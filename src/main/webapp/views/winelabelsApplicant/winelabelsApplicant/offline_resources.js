window.bof_offline_resources = 
{"js/bof/decisionpanel/Portal/Dashlet/Portlet/BofPortlet.js":"\nvar CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var Portlet=jsloader.resolve(\"bof.decisionpanel.Portal.Dashlet.Portlet.Portlet\");var MacroMenuCommand=null;var DropDownBox=null;var MacroService=imports(\"bof.macro.services.MacroService\").getInstance();var BofPortlet=function(parentDiv,contextStr,type){BofPortlet.superclass.constructor.call(this,parentDiv,contextStr);this.params=null;this.changeParams=new Array();this.hiddenParamIdList=new Array();if(!MacroMenuCommand)\nMacroMenuCommand=jsloader.resolve(\"bof.decisionpanel.Portal.macro.MacroMenuCommand\");this.handler=new MacroMenuCommand();this.handler.onDoCmd.subscribe(this.doAutoCmd,this);if(contextStr)\nthis.resolveContentXml(contextStr);};lang.extend(BofPortlet,Portlet);BofPortlet.prototype.render=function(){BofPortlet.superclass.render.call(this);this.setBtnStatus();}\nBofPortlet.prototype.destroy=function(){delete this.portalObj;delete this.params;delete this.hiddenParamIdList;if(this.handler){this.handler.onDoCmd.unsubscribe(this.doAutoCmd,this);this.handler.destroy();}\nBofPortlet.superclass.destroy.call(this);};BofPortlet.prototype.refreshData=function(){this.refresh();}\nBofPortlet.prototype.setParamsValue=function(params,notCommit){if(!params||!this.getPortletObject()||!this.getParamPanelObj())\nreturn;var report=this.getPortletObject();var paramPanelObj=this.getParamPanelObj();if(!window.bof_offline_xhr){paramPanelObj.setAutoCommit(false);}\nfor(indx in params){var param=params[indx];report.setParamValue(param.id,param.value,param.displayValue);this.changeParams[param.id]=false;}\nparamPanelObj.notCommitedParamBeans=[];if(notCommit){;}else{paramPanelObj.commit();}\nparamPanelObj.setAutoCommit(true);}\nBofPortlet.prototype.getParams=function(){if(!this.params)\nthis.params=this.getReportParams();return this.params;}\nBofPortlet.prototype.setParamValueByName=function(pName,pValue,pDisplayValue){for(indx in this.getParams()){var param=this.params[indx];if(pName==param.name&&param.value!=pValue){param.value=pValue;param.displayValue=pDisplayValue;break;}}}\nBofPortlet.prototype.onParamChange=function(paramPanel,param,newValue,newDispValue,relateParam){var paramList=this.getParams();for(indx in paramList){var portletParam=paramList[indx];if(portletParam.name==param.name&&portletParam.type==param.type){if(portletParam.value==newValue)\nbreak;this.getPortletObject().setParamValue(portletParam.id,newValue,newDispValue);if(relateParam!=\"RELATEPARAM\")\nthis.refresh(false);break;}}}\nBofPortlet.prototype.onParamChangeByName=function(paramName,newValue,newDispValue){var paramList=this.getParams();for(indx in paramList){var portletParam=paramList[indx];if(portletParam.name==paramName){this.getPortletObject().setParamValue(portletParam.id,newValue,newDispValue);this.refresh(false);break;}}}\nBofPortlet.prototype.hiddenParam=function(){var portletObj=this.getPortletObject();if(null==portletObj||!this.getPageObj()||!this.getPublicParamsConfig())\nreturn;var publicParamsInfo=this.getPublicParamsConfig();for(var indx in publicParamsInfo){var param=publicParamsInfo[indx];if(param.type==\"PARAM\"&&param.dashletId==this.portletId){this.addHiddenParamIdToList(param.id);portletObj.hiddenParameterByName(param.name);}}};BofPortlet.prototype.setParamsInfo=function(notCommit){this.getParams();this.setParamValuesByURL();this.setParamValuesByPublicParams(true);this.setParamsValue(this.getParams(),notCommit);}\nBofPortlet.prototype.getReportParams=function(){if(this.getPortletObject()){return this.getPortletObject().params;}\nreturn null;}\nBofPortlet.prototype.setParamValuesByURL=function(){var urlParams=this.getURLParamValues();for(indx in urlParams){var param=urlParams[indx];var pName=param.name;if(param.name.indexOf(\"PARAM.\")!=-1){pName=param.name.split(\".\")[2];}\nthis.setParamValueByName(pName,param.value,param.displayValue);}}\nBofPortlet.prototype.setParamValuesByPublicParams=function(skip){var reportParamList=this.getParams();if(!this.getPageObj())\nreturn;var paramPanelObj=this.getPageObj().paramPanel;if(paramPanelObj)\nparamPanelObj.setAutoCommit(false);var reportObj=this.getPortletObject();reportObj.portlet=this;var publicParams=this.getPublicParams();for(indx in publicParams){var publicParam=publicParams[indx];if(!publicParam.hasSetValue){for(reportIndx in reportParamList){var portletParam=reportParamList[reportIndx];if(portletParam.name==publicParam.name&&portletParam.type==publicParam.type&&portletParam.value!=publicParam.value){var isPublic=this.isPublicParam(portletParam.id,this.portletId);if(isPublic){if(portletParam.value!=null&&portletParam.displayValue!=null){if(!skip){publicParam.valueFromClient=true;this.setPublicParamValueById(publicParam.id,portletParam.value,portletParam.displayValue);}else{var resetPublicParamsValue=this.getPortletObject().resetPublicParamsValue;if(!this.isDefultParamValue(portletParam)||resetPublicParamsValue){this.setPublicParamValueById(publicParam.id,portletParam.value,portletParam.displayValue);}}}else{if(!skip){var defaultValue=this.portalObj.getParamDefaultValue(publicParam.id);if(defaultValue.length>1){this.setPublicParamValueById(publicParam.id,defaultValue[0],defaultValue[1]);}}}}\nbreak;}}}\nelse{if(!skip||publicParam.refreshReport||publicParam.valueFromClient){for(reportIndx in reportParamList){var portletParam=reportParamList[reportIndx];if(portletParam.name==publicParam.name&&portletParam.type==publicParam.type&&portletParam.value!=publicParam.value){this.changeParams[portletParam.id]=true;var isPublic=this.isPublicParam(portletParam.id,this.portletId);if(isPublic&&publicParam.display){portletParam.value=publicParam.value;portletParam.displayValue=publicParam.displayValue;if(publicParam.refreshReport||publicParam.valueFromClient){reportObj.hasRefreshDataFromPage=true;try{reportObj.setParamValue(portletParam.id,portletParam.value,portletParam.displayValue);}catch(e){}}}\nbreak;}}}}}\nif(paramPanelObj){this.commitParameter(paramPanelObj);}}\nBofPortlet.prototype.commitParameter=function(paramPanelObj){paramPanelObj.setEnableResetRelateParamsValue(false);paramPanelObj.notCommitedParamBeans=new Array();paramPanelObj.setAutoCommit(true);paramPanelObj.setEnableResetRelateParamsValue(true);}\nBofPortlet.prototype.isDefultParamValue=function(paramId){return true;}\nBofPortlet.prototype.isPublicParam=function(paramId,reportId){if(!reportId)\nreportId=this.portletId;var isPublic=false;var pageParamConfig=this.getPublicParamsConfig();for(ppcIndx in pageParamConfig){if(pageParamConfig[ppcIndx].type==\"PARAM\"&&pageParamConfig[ppcIndx].dashletId==reportId&&pageParamConfig[ppcIndx].public2&&pageParamConfig[ppcIndx].id==paramId){isPublic=true;break;}}\nreturn isPublic;}\nBofPortlet.prototype.setCurrObjState=function(){var reportParamList=this.getParams();var paramBean=this.getPublicParamsConfig();for(reportIndx in reportParamList){var portletParam=reportParamList[reportIndx];var publicPId=\"\";for(indx in paramBean){var param=paramBean[indx];if(param.type==\"PARAMGROUP\"){if(param.name==portletParam.name)\npublicPId=param.id;continue;}\nif(portletParam.id==param.id&&param.dashletId==this.portletId){this.portalObj.setParamDisplayStyle(param,true);var publicParams=this.portalObj.params;for(pindx in publicParams){var publicParam=publicParams[pindx];if(publicPId==publicParam.id){if(portletParam.value!=publicParam.value){if(publicParam.olapType==\"\"){portletParam.value=publicParam.value;portletParam.displayValue=publicParam.displayValue;}else{portletParam.currentValue=publicParam.currentValue;portletParam.currentDisplayValue=publicParam.currentDisplayValue;}}\nbreak;}}\nbreak;}}}\nthis.setCurrObjStateAfter();}\nBofPortlet.prototype.commitParamValue=function(){var report=this.getPortletObject();var p=this.getParams();if(!report||!this.params||!this.getParamPanelObj())\nreturn;var paramPanelObj=this.getParamPanelObj();if(this.params.length>0){paramPanelObj.setAutoCommit(false);for(indx in this.params){var param=this.params[indx];report.setParamValue(param.id,param.value,param.displayValue);}\nparamPanelObj.commit();paramPanelObj.setAutoCommit(true);}}\nBofPortlet.prototype.getParamPanelObj=function(){if(this.getPortletObject())\nreturn this.getPortletObject().paramPanelObj;}\nBofPortlet.prototype.setAutoRefreshValue=function(refreshValue){}\nBofPortlet.prototype.addHiddenParamIdToList=function(paramId){for(var idx in this.hiddenParamIdList){if(this.hiddenParamIdList[idx]==paramId){return;}}\nthis.hiddenParamIdList.push(paramId);}\nBofPortlet.prototype.resolveContentXml=function(contentString){if(!contentString||contentString==\"\")\nreturn;var dom=domutils.parseXML(contentString);var layoutNode=dom.documentElement;var portletXml=layoutNode.firstChild;this.portletXml=portletXml;this.resolveCommonContentXml(portletXml);this.resolveCustomContentXml(portletXml);}\nBofPortlet.prototype.resolveCommonContentXml=function(portletXml){this.height=domutils.getNodeAtrributeValueByName(portletXml,\"HEIGHT\").nodeValue;if(this.height)\nthis.div.style.height=\"100%\";this.width=domutils.getNodeAtrributeValueByName(portletXml,\"WIDTH\").nodeValue;this.portletName=domutils.getNodeAtrributeValueByName(portletXml,\"NAME\").nodeValue;this.portletId=domutils.getNodeAtrributeValueByName(portletXml,\"ID\").nodeValue;try{this.title=domutils.getNodeAtrributeValueByName(portletXml,\"DASHLETNAME\").nodeValue;}catch(e){if(this.portletName.indexOf(\">\")!=-1){this.title=this.portletName.substring(this.portletName.lastIndexOf(\">\")+1);}else\nthis.title=this.portletName;}\ntry{this.display=domutils.getNodeAtrributeValueByName(portletXml,\"DISPLAY\").nodeValue;}catch(e){this.display=\"title_border\";var tOpts=registry.get(\"dashletOptions\");if(tOpts&&tOpts.skinDisplay){this.display=tOpts.skinDisplay;}}}\nBofPortlet.prototype.resolveReportContentXml=function(portletXml){try{var isHideShortTollBar=domutils.getNodeAtrributeValueByName(portletXml,\"ISHIDESHORTCUTTOOLBAR\").nodeValue;this.isHideShortTollBar=isHideShortTollBar==\"false\"?false:true;}catch(e){this.isHideShortTollBar=true;}\ntry{var autorefresh=domutils.getNodeAtrributeValueByName(portletXml,\"AUTOREFRESH\").nodeValue;this.autorefresh=autorefresh==\"true\"?true:false;this.autorefreshValue=autorefresh;}catch(e){this.autorefresh=true;}\ntry{this.delayTime=domutils.getNodeAtrributeValueByName(portletXml,\"DELAYTIME\").nodeValue;}catch(e){this.delayTime=1;}\ntry{var ishidetoolbar=domutils.getNodeAtrributeValueByName(portletXml,\"ISHIDETOOLBAR\").nodeValue;this.ishidetoolbar=ishidetoolbar==\"false\"?false:true;}catch(e){this.ishidetoolbar=true;}}\nBofPortlet.prototype.resolveCustomContentXml=function(portletXml){}\nBofPortlet.prototype.getTitle=function(){return this.title;}\nBofPortlet.prototype.getPortletObject=function(){return;}\nBofPortlet.prototype.setPortletId=function(portletId){this.portletId=portletId;this.ishidetoolbar=true;this.isHideShortTollBar=true;}\nBofPortlet.prototype.setBtnStatus=function(){}\nBofPortlet.prototype.isReplace=function(){if(this.dashlet){return this.dashlet.getReplace();}}\nBofPortlet.prototype.fillParamValueFromObj=function(pName,paramObj){if(paramObj.value){if(!paramObj.displayValue)\nparamObj.displayValue=paramObj.value;this.fillParamValue(pName,paramObj.value,paramObj.displayValue);}else\nalert('paramObj参数无效');}\nBofPortlet.prototype.fillParamValue=function(pName,pValue,pDisplayValue){var p=this.getParams();for(indx in this.params){var param=this.params[indx];if(pName==param.name&&param.value!=pValue){param.value=pValue;param.displayValue=pDisplayValue;this.changeParams[param.id]=true;}\nif(pName==param.name){var paramObj={};paramObj.id=param.id;paramObj.name=pName;paramObj.type=param.type;paramObj.value=pValue;paramObj.displayValue=pDisplayValue;if(this.getPortletType()==\"URL\"&&this.getPortletObject()){this.getPortletObject().setParamValue(pName,pValue,pDisplayValue);}\nthis.setPublicParamPanelValue(paramObj);break;}}}\nBofPortlet.prototype.getClientId=function(){return this.getPortletObject().getClientId();}\nBofPortlet.prototype.getResourceId=function(){return this.portalObj.pageId;}\nBofPortlet.prototype.getResourceType=function(){return this.getPortletObject().getResourceType();}\nBofPortlet.prototype.addMenuItem=function(labelName,cmd,key,callback,autoCmd){if(!this.popupMenu||!this.handler)\nreturn;this.handler.menuItems[labelName]=callback;if(autoCmd)\nthis.handler.autoCmd[labelName]=labelName;else\nthis.popupMenu.createMenuItem(labelName,cmd,key);}\nBofPortlet.prototype.setPublicParamPanelValue=function(param){var isPublic=this.isPublicParam(param.id,this.portletId);if(isPublic){var publicParams=this.portalObj.params;for(indx in publicParams){var publicParam=publicParams[indx];if(param.name==publicParam.name&&param.type==publicParam.type){if(param.value&&(param.value!=publicParam.value||null!=this.portalObj.InteractParamList)){this.setPublicParamValueById(publicParam.id,param.value,param.displayValue);this.doPublicParamChange(publicParam,param.value,param.displayValue);}else\nthis.getPortletObject().setParamValue(param.id,param.value,param.displayValue);break;}}}\nelse\nthis.getPortletObject().setParamValue(param.id,param.value,param.displayValue);}\nBofPortlet.prototype.doPopupMenuCmd=function(e){if(this.popupMenu.menuItems.length==0){this.doAutoCmd();return;}\nif(this.popupMenu.menuItems.length>1){this.popupMenu.popup(e);return;}\nvar needJumpMenu=this.getSystemNeedJumpMenu();if(!needJumpMenu){this.handler.doCmd(this.popupMenu.menuItems[0].cmd);this.popupMenu.clear();}else{this.popupMenu.popup(e);}}\nBofPortlet.prototype.doAutoCmd=function(){this.handler.isDoAutoCmdFire=true;for(indx in this.handler.autoCmd){var autoName=this.handler.autoCmd[indx];this.handler.doCmd(autoName);}\nthis.handler.isDoAutoCmdFire=false;try{this.popupMenu.clear();}catch(e){}}\nBofPortlet.prototype.getSystemNeedJumpMenu=function(){if(this.hasGetNeedJumpMenu)\nreturn this.needJumpMenu;var needJumpMenu=false;var ret=util.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfigs\",[]);if(ret){var systemConfig=ret.result;for(var i in systemConfig){if(systemConfig[i].key==\"SINGLE_JUMP_NEED_MENU\"){needJumpMenu=(systemConfig[i].value==\"true\");break;}}}\nthis.hasGetNeedJumpMenu=true;this.needJumpMenu=needJumpMenu;return needJumpMenu;}\nBofPortlet.prototype.doOnChartClick=function(e,chart){this.chartClick(e,chart,\"chartClick\",chart);}\nBofPortlet.prototype.doOnSeriesClick=function(e,series,chart){this.chartClick(e,chart,\"seriesClick\",series);}\nBofPortlet.prototype.doOnPointClick=function(e,point,chart){this.chartClick(e,chart,\"pointClick\",point);}\nBofPortlet.prototype.chartClick=function(e,chart,eventType,clieckInfo){this.getAllChartClickMacros(chart);if(!(chart&&eventType&&clieckInfo)){return;}\nMacroService.fire(this,chart.getChartId(),eventType,[chart,clieckInfo,e]);if(chart.popupMenu.menuItems.length==1){if(!chart.needJumpMenu){chart.handler.doCmd(chart.popupMenu.menuItems[0].cmd);chart.popupMenu.clear();}else{chart.doPopupMenuCmd(e);}}else{chart.doPopupMenuCmd(e);}\ndelete this.modules;this.hasModules=false;};BofPortlet.prototype.getAllChartClickMacros=function(chart){if(this.hasModules)\nreturn;var resId=this.getResourceId();var chartId=chart.getChartId();var modules=util.remoteInvokeEx2(\"MacroService\",\"getMacroModulesByResId\",[resId],null,null,null).result;var macros={};if(modules){for(key in modules){var module=modules[key];var eventName=module.eventName;if(!macros[eventName])\nmacros[eventName]=[];if(module.targetName==chartId){macros[eventName].push(module);}}}\nthis.modules=macros;this.hasModules=true;}\nBofPortlet.prototype.addChartSubscribe=function(portletObj){if(!portletObj)\nreturn;portletObj.onChartClick.subscribe(this.doOnChartClick,this);portletObj.onSeriesClick.subscribe(this.doOnSeriesClick,this);portletObj.onPointClick.subscribe(this.doOnPointClick,this);}\nBofPortlet.prototype.setCurrObjStateAfter=function(){this.commitParamValue();this.refreshData();}\nBofPortlet.prototype.doOnDashletExport=function(ev,pos,parentElem){var portletObj=this.getPortletObject();if(!this.exportMenu)\nthis.initExportMenu(parentElem);var x=pos.x<40?pos.x:pos.x-40;this.exportMenu.dropDown(x,pos.y,100,120);}\nBofPortlet.prototype.initExportMenu=function(parentElem){if(!this.exportMenu){if(!DropDownBox)\nDropDownBox=jsloader.resolve(\"freequery.control.DropDownBox\");this.exportMenu=new DropDownBox(parentElem);this.exportMenu.panel.style.textAlign=\"left\";this.exportMenu.onCloseUp.subscribe(this.doExportMenuCloseUp,this);this.exportMenu.insertItem(\"EXCEL\",\"EXCEL2003\");this.exportMenu.insertItem(\"WORD\",\"WORD\");this.exportMenu.insertItem(\"PDF\",\"PDF\");this.initSelfExportMenu();}}\nBofPortlet.prototype.doExportMenuCloseUp=function(){var exportType=this.exportMenu.selectedId;var portletObj=this.getPortletObject();if(portletObj&&portletObj.doExportMenuCloseUp&&exportType){portletObj.doExportMenuCloseUp(exportType);}}\nBofPortlet.prototype.maximizeWindowInAutoHeight=function(){if(this.autoHeight){var viewdiv=document.getElementById(\"_viewdiv_\");if(viewdiv.firstChild){if(viewdiv.firstChild.height==\"\"){viewdiv.firstChild.height=\"100%\";}}}}","template/freequery/query/QueryViewForms.template":"<FORM id=\"_queryExportForm\" name=\"query_exportForm\" class=\"_queryExportForm\" METHOD=POST ACTION=\"ExportServlet\" target=\"query_exportIFrame\">\r\n\t<input type=\"hidden\" name=\"type\" class=\"_exportType\"/>\r\n\t<input type=\"hidden\" name=\"clientId\" class=\"_clientId\"/>\r\n\t<input type=\"hidden\" name=\"delimiter\" class=\"_delimiter\"/>\r\n\t<input type=\"hidden\" name=\"maxRow\" class=\"_maxRow\"/>\r\n\t<input type=\"hidden\" name=\"mode\" class=\"_mode\"/>\r\n\t<input type=\"hidden\" name=\"valueType\" class=\"_valueType\"/>\r\n\t<input type=\"hidden\" name=\"headerHtml\" class=\"_headerHtml\"/>\r\n\t<input type=\"hidden\" name=\"tailHtml\" class=\"_tailHtml\"/>\r\n\t<input type=\"hidden\" name=\"result\" class=\"_result\"/>\r\n\t<input type=\"hidden\" name=\"contentType\" class=\"_contentType\"/>\r\n\t<input type=\"hidden\" name=\"pageId\" class=\"_pageId\"/>\r\n\t<input type=\"hidden\" name=\"exportHiddenField\" class=\"_exportHiddenField\">\r\n<\/FORM>\r\n<FORM id=\"_queryExcelForm\" name=\"query_excelForm\" class=\"_queryExcelForm\" METHOD=POST ACTION=\"ExcelAnalysis\" target=\"excelAnalysisIFrame\">\r\n\t<input type=\"hidden\" name=\"user\" class=\"_user\">\r\n\t<input type=\"hidden\" name=\"password\" class=\"_password\">\r\n\t<input type=\"hidden\" name=\"clientId\" class=\"_clientId\">\r\n\t<input type=\"hidden\" name=\"pageId\" class=\"_pageId\"/>\r\n<\/FORM>\r\n<iframe name=\"query_exportIFrame\" width=\"0\" height=\"0\">\r\n<\/iframe>\r\n<iframe name=\"excelAnalysisIFrame\" width=\"0\" height=\"0\">\r\n<\/iframe>","js/bof/reportcomment/CommentForQueryHandler.js":"HTTP Status 404 . filename not found: /vision/js/bof/reportcomment/CommentForQueryHandler.js","template/freequery/query/QueryView.template":"<div id=\"_leftFrameWith\" width=\"100%\"><\/div>\r\n<table bofid=\"_outerTable\" class=\"_outerTable\" height=\"100%\" width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"table-layout : fixed;\">\r\n  <tr style=\"display:\" bofid=\"_trToolbar\" class=\"_trToolbar queryview-toolbar\" height=\"26px\" valign=\"top\">\r\n    <td bofid=\"toolbarBg\" class=\"toolbarBg\">\r\n    \r\n\t<table style=\"width: 100%; table-layout: fixed\" cellSpacing=\"0\" cellPadding=\"0\">\r\n\t\t<tbody>\r\n\t\t\t<tr>\r\n\t\t\t\t<td nowrap><div style=\"overflow: hidden; width: 100%\"><div style=\"position: relative; width: 100%\">\r\n\t\t\t\t\t\t\r\n      <table cellPadding=\"0\" cellSpacing=\"0\" height=\"26px\" whg=\"whg\">\r\n        <tr style=\"margin-left:5;px;text-indent:5px;\" bofid=\"toolbarTr\">\r\n          <td nowrap>\r\n            <input bofid=\"_btnBackward\" type=\"button\" title=\"后退\" class=\"_btnBackward queryview-toolbar-button disable-queryview-toolbar-backward\" disabled>\r\n          <\/td>\r\n          <td nowrap>\r\n            <input bofid=\"_btnForward\" type=\"button\" title=\"前进\" class=\"_btnForward queryview-toolbar-button disable-queryview-toolbar-forward\" disabled>\r\n          <\/td>\r\n          <td nowrap>\r\n            <input bofid=\"_btnRefresh\" type=\"button\" title=\"显示结果\" class=\"_btnRefresh queryview-toolbar-button queryview-toolbar-refresh\">\r\n          <\/td>\r\n          <td nowrap>\r\n            <SPAN bofid=\"_space1\" class=\"_space1\" style=\"BACKGROUND-IMAGE: url(img/banner/toolbar_tab_space.gif); WIDTH: 2px; HEIGHT: 12px;display: inline-block;\">\r\n            <\/SPAN>\r\n          <\/td>\r\n\r\n          <td nowrap>\r\n            <input bofid=\"_btnSave\" type=\"button\" title=\"保存\" class=\"_btnSave queryview-toolbar-button queryview-toolbar-save\">\r\n          <\/td>\r\n          <td nowrap>\r\n            <input bofid=\"_btnSaveAs\" type=\"button\" title=\"另存为\" class=\"_btnSaveAs queryview-toolbar-button queryview-toolbar-saveAs\">\r\n          <\/td>\r\n\r\n          <td nowrap>\r\n            <input bofid=\"_btnMyFavorite\" type=\"button\" title=\"添加到收藏夹\" class=\"_btnMyFavorite queryview-toolbar-button queryview-toolbar-myfavorite\">\r\n          <\/td>\r\n          <td nowrap>\r\n            <SPAN bofid=\"_space2\" class=\"_space2\" style=\"BACKGROUND-IMAGE: url(img/banner/toolbar_tab_space.gif); WIDTH: 2px; HEIGHT: 12px;display: inline-block;\">\r\n            <\/SPAN>\r\n          <\/td>\r\n\r\n          <td nowrap>\r\n            <input bofid=\"_btnChart\" type=\"button\" title=\"图形\" class=\"_btnChart queryview-toolbar-button queryview-toolbar-chart\">\r\n          <\/td>\r\n          <td nowrap>\r\n            <input bofid=\"_btnView\" type=\"button\" title=\"视图\" class=\"_btnView queryview-toolbar-button queryview-toolbar-view\">\r\n          <\/td>\r\n          <td nowrap>\r\n            <input bofid=\"_btnSelectField\" type=\"button\" title=\"添加/删除字段\" class=\"_btnSelectField queryview-toolbar-button queryview-toolbar-select\">\r\n          <\/td>\r\n          <td nowrap>\r\n            <SPAN bofid=\"_space3\" class=\"_space3\" style=\"BACKGROUND-IMAGE: url(img/banner/toolbar_tab_space.gif); WIDTH: 2px; HEIGHT: 12px;display: inline-block;\">\r\n            <\/SPAN>\r\n          <\/td>\r\n\r\n          <td nowrap>\r\n            <input bofid=\"_btnQueryViewSetting\" type=\"button\" title=\"报表设置\" class=\"_btnQueryViewSetting queryview-toolbar-button queryview-toolbar-header\">\r\n          <\/td>\r\n          <td nowrap>\r\n            <input bofid=\"_btnSubtotal\" type=\"button\" title=\"分类汇总\" class=\"_btnSubtotal queryview-toolbar-button queryview-toolbar-subtotal\">\r\n          <\/td>\r\n          <td nowrap>\r\n            <input bofid=\"_btnReportParam\" type=\"button\" title=\"参数设置\" class=\"_btnReportParam queryview-toolbar-button queryview-toolbar-param\">\r\n          <\/td>\r\n          <td nowrap>\r\n            <SPAN bofid=\"_space4\" class=\"_space4\" style=\"BACKGROUND-IMAGE: url(img/banner/toolbar_tab_space.gif); WIDTH: 2px; HEIGHT: 12px;display: inline-block;\">\r\n            <\/SPAN>\r\n          <\/td>\r\n\r\n          <td nowrap style=\"display:none;\">\r\n            <input bofid=\"_btnExcel\" style=\"display:none;\" type=\"button\" title=\"在Excel中分析\" class=\"_btnExcel queryview-toolbar-button queryview-toolbar-excel\">\r\n          <\/td>\r\n          <td nowrap>\r\n            <input bofid=\"_btnExport\" type=\"button\" title=\"导出\" class=\"_btnExport queryview-toolbar-button queryview-toolbar-export\">\r\n          <\/td>\r\n          <td nowrap>\r\n            <input bofid=\"_btnPrint\" type=\"button\" title=\"打印 \" class=\"_btnPrint queryview-toolbar-button queryview-toolbar-print\">\r\n          <\/td>\r\n\r\n          <td nowrap>\r\n            <SPAN bofid=\"_space5\" class=\"_space5\" style=\"BACKGROUND-IMAGE: url(img/banner/toolbar_tab_space.gif); WIDTH: 2px; HEIGHT: 12px;display: inline-block;\">\r\n            <\/SPAN>\r\n          <\/td>\r\n          <td nowrap>\r\n            <input bofid=\"_btnLocate\" type=\"button\" title=\"定位业务查询\" class=\"_btnLocate queryview-toolbar-button queryview-toolbar-locate\">\r\n          <\/td>\r\n\r\n          <td nowrap width=\"100%\" bofid=\"toolbarLastTd\">\r\n          <\/td>\r\n          <!--Add extend function button here-->\r\n        <\/tr>\r\n      <\/table>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<\/div>\r\n\t\t\t\t\t<\/div>\r\n\t\t\t\t<\/td>\r\n\t\t\t\t<td style=\"width: 40px\" nowrap><span class=\"tab-scroll-left-disabled\"><\/span><span class=\"tab-scroll-right-disabled\"><\/span>\r\n\t\t\t\t<\/td>\r\n\t\t\t<\/tr>\r\n\t\t<\/tbody>\r\n\t<\/table>\r\n\t\r\n    <\/td>\r\n  <\/tr>\r\n\r\n  <tr bofid=\"_content\" class=\"_content\" style=\"padding-top:2px; width:100%; height:100%;\">\r\n    <td bofid=\"_contentTd\" width=\"100%\" style=\"padding-left:10px;\">\r\n      <div bofid=\"_contentDiv\" class=\"_contentDiv searchResult\" style=\"overflow:hidden;\">\r\n        <table bofid=\"_contentTable\" width=\"100%\" border=\"0\">\r\n          <tr style=\"display:''\" bofid=\"_trmaskdiv\" class=\"_trmaskdiv\" valign=\"top\">\r\n            <td colspan=\"2\">\r\n            \t<DIV bofid=\"_maskDiv\"\r\n\t\t\t\t\tstyle=\"display:none; POSITION: absolute; left:35%; top:35%;  Z-INDEX: 100; FILTER: progid : DXImageTransform.Microsoft.Alpha(opacity = 80); BACKGROUND-COLOR: lightsteelblue;  text-align : center;\"\r\n\t\t\t\t\tclass=Noprint>\r\n\t\t\t\t\t<span><\/span>\r\n\t\t\t\t\t<BUTTON bofid=\"_maskDiv_CancelButton\" style=\"POSITION: relative; WIDTH: 120px; HEIGHT: 50px;\">取消查询<\/BUTTON>\r\n\t\t\t\t<\/DIV>\r\n\t\t\t\t<\/td>\r\n          <\/tr>\r\n          <tr style=\"display:''\" bofid=\"_trHeader\" class=\"_trHeader\" valign=\"top\">\r\n            <td colspan=\"2\">\r\n              <!--此栏目放表头面板-->\r\n              <div bofid=\"_reportHeader\" class=\"_reportHeader no_margin_p\">\r\n              <\/div>\r\n            <\/td>\r\n          <\/tr>\r\n          <tr bofid=\"_alignControlorTr\">\r\n            <td bofid=\"_alignControlor\">\r\n              <table bofid=\"_alignControlorTable\">\r\n                <tr style=\"display:\" bofid=\"_trParam\" class=\"_trParam \" height=\"20px\" valign=\"top\">\r\n                  <td colspan=\"2\">\r\n                    <!--此栏目放参数-->\r\n                    <div bofid=\"_param\" class=\"_param\">\r\n                    <\/div>\r\n                  <\/td>\r\n                <\/tr>\r\n                <tr style=\"display:none\" bofid=\"_trShortcut\" class=\"_trShortcut\" height=\"20px\" valign=\"top\">\r\n                  <td colspan=\"2\">\r\n                    <input bofid=\"_btnSearchEx\" class=\"button-buttonbar button-bgicon-search \" type=\"button\" value=\"查询报表(Q)\" ACCESSKEY=\"Q\"\r\n                    /><input bofid=\"_btnChartEx\" class=\"button-buttonbar button-bgicon-chart \" type=\"button\" value=\"添加图形(C)\" ACCESSKEY=\"C\"\r\n                    /><input bofid=\"_btnExportEx\" class=\"button-buttonbar button-bgicon-export \" type=\"button\" value=\"导出EXCEL(E)\" ACCESSKEY=\"E\"/>\r\n                  <\/td>\r\n                <\/tr>\r\n                <tr style=\"display:none\" bofid=\"_trJumpRuleLink\" class=\"_trJumpRuleLink\" height=\"26px\" valign=\"bottom\">\r\n                  <td colspan=\"2\">\r\n                    <!--此栏目跳转规则链接-->\r\n                    跳转区域：\r\n                    <span bofid=\"_jumpRuleLink\" class=\"_jumpRuleLink\">\r\n                    <\/span>\r\n                  <\/td>\r\n                <\/tr>\r\n                <tr style=\"display:none\" bofid=\"_trOrderby\" class=\"_trOrderby\" valign=\"top\">\r\n                  <td colspan=\"2\">\r\n                    <!--此栏目放排序-->\r\n                    <div bofid=\"_orderby\" class=\"_orderby\">\r\n                    <\/div>\r\n                  <\/td>\r\n                <\/tr>\r\n\r\n                <tr style=\"display:none\" bofid=\"_trOrderByPriority\" class=\"_trOrderByPriority\" height=\"26px\" valign=\"bottom\">\r\n                  <td colspan=\"2\">\r\n                    <!--此栏目放排序优先顺序-->\r\n                    排序优先级：\r\n                    <span bofid=\"_orderByPriority\" class=\"_orderByPriority\">\r\n                    <\/span>\r\n                  <\/td>\r\n                <\/tr>\t\r\n\r\n                <tr bofid=\"_trNavigation\" id=\"_frWith\" class=\"_trNavigation\" height=\"26px\" valign=\"bottom\">\r\n                  <td colspan=\"2\">\r\n                  <\/td>\r\n                <\/tr>\t\r\n                <tr height=\"1px\">\r\n                  <td colspan=\"2\">\r\n                  <\/td>\r\n                <\/tr>\t\r\n                <tr style=\"display: position:absolute;\" bofid=\"_trGrid\" class=\"_trGrid\" height=\"100%\" valign=\"top\">\r\n                  <td colspan=\"2\">\r\n                    <!--此栏目放表格 width属性的设置是为冻结表头所用-->\r\n                    <div bofid=\"_grid\" class=\"_grid\">\r\n                    \t<div bofid=\"_tablepanel\" class=\"_tablepanel\">               \r\n                    \t<\/div>\r\n\r\n\t\t\t\t\t<div>\t\r\n                  <\/td>\r\n                <\/tr>\r\n                <tr style=\"display:\" bofid=\"_trGraph\" class=\"_trGraph\" height=\"1\" valign=\"top\">\r\n                  <td colspan=\"2\">\r\n                    <!--此栏目放图形-->\r\n                    <div bofid=\"_graphConfig\" class=\"_graphConfig\">\r\n                    <\/div>\r\n                    <div bofid=\"_graph\" class=\"_graph\">\r\n                    <\/div>\r\n                  <\/td>\r\n                <\/tr>\r\n              <\/table>\r\n            <\/td>\r\n          <\/tr>\r\n          <tr style=\"display:\" bofid=\"_trTail\" class=\"_trTail\" valign=\"top\">\r\n            <td>\r\n              <!--此栏目放表尾面板-->\r\n              <div bofid=\"_reportTail\" class=\"_reportTail no_margin_p\">\r\n              <\/div>\r\n            <\/td>\r\n          <\/tr>\r\n        <\/table>\r\n      <\/div>\r\n    <\/td>\r\n  <\/tr>\r\n<\/table>","template/freequery/query/PagePanel.template":"<div bofid=\"_navigation\" class=\"_navigation\"\r\n\t><div\r\n\t\t><table width=\"100%\"  border=\"0\" cellspacing=\"0\" cellpadding=\"0\"\r\n\t\t\t><tr\r\n\t\t\t\t><td valign=\"bottom\" style=\"font-size:12px; \"\r\n\t\t\t\t\t><span style=\"cursor:'hand'\" class=\"_firstPage\">[首页]<\/span\r\n\t\t\t\t\t><span style=\"cursor:'hand'\" class=\"_prevPage\">[上页]<\/span\r\n\t\t\t\t\t><span style=\"cursor:'hand'\" class=\"_nextPage\">[下页]<\/span\r\n\t\t\t\t\t><span style=\"cursor:'hand'\" class=\"_lastPage\">[尾页]<\/span\r\n\t\t\t\t\t>&nbsp;第<input type=\"text\" class=\"_curPage\" style=\"width:34px; height:16px;border: 0px;border-top: 1px solid #919B9C;border-bottom: 1px solid #919B9C;border-left: 1px solid #919B9C;border-right: 1px solid #919B9C;\"\r\n\t\t\t\t\t>页，共<span class=\"_pageCount\">&nbsp;<\/span\r\n\t\t\t\t\t>页 每页<input type=\"text\" class=\"_rowCount\"  style=\"width:34px; height:16px;border: 0px;border-top: 1px solid #919B9C;border-bottom: 1px solid #919B9C;border-left: 1px solid #919B9C;border-right: 1px solid #919B9C;\"\r\n\t\t\t\t\t>行，共<span class=\"_allRowCount\">&nbsp;<\/span>行\r\n\t\t\t\t\t<span style=\"color: red;display:none;\" class=\"_onloading\">(正在获取中..)<\/span>\r\n\t\t\t\t<\/td>\r\n\t\t\t<\/tr>\r\n\t\t<\/table>\r\n\t<\/div>\r\n<\/div>","js/smartbi/chartsetting/shortcut/PreviewDataButton.js":"\nvar BaseButton=jsloader.resolve(\"smartbi.chartsetting.shortcut.BaseButton\");var PreviewDataButton=function(container,options,chartObj){PreviewDataButton.superclass.constructor.call(this,container,options,chartObj);this.onClick=new CustomEvent(\"onClick\");this.showGrid=true;};lang.extend(PreviewDataButton,BaseButton);PreviewDataButton.prototype.destroy=function(){if(this.onClick){this.onClick.unsubscribeAll();this.onClick=null;}\nPreviewDataButton.superclass.destroy.call(this);};PreviewDataButton.prototype.getTitle=function(){if(this.chartType==\"stock\"){return this.showGrid?\"切换表格：大数据量请慎用\":\"切换图形\";}\nreturn this.showGrid?\"切换表格\":\"切换图形\";};PreviewDataButton.prototype.getClassName=function(){if(this.showGrid)\nreturn\"smartbichart-toolbar-button smartbichart-toolbar-to-grid-gray\";else\nreturn\"smartbichart-toolbar-button smartbichart-toolbar-to-chart-gray\";};PreviewDataButton.prototype.onMouseEnter=function(){if(this.showGrid){this.buttonInput.className=\"smartbichart-toolbar-button smartbichart-toolbar-to-grid\"}else{this.buttonInput.className=\"smartbichart-toolbar-button smartbichart-toolbar-to-chart\"}};PreviewDataButton.prototype.onMouseLeave=function(){if(this.showGrid){this.buttonInput.className=\"smartbichart-toolbar-button smartbichart-toolbar-to-grid-gray\"}else{this.buttonInput.className=\"smartbichart-toolbar-button smartbichart-toolbar-to-chart-gray\"}};PreviewDataButton.prototype.doOnClick=function(){this.onClick.fire(this.showGrid);this.showGrid=!this.showGrid;if(this.buttonInput)\nthis.buttonInput.title=this.getTitle();};","js/bof/olapquery/olapquery/OlapQueryViewDisplay.js":"\nvar util=jsloader.resolve(\"freequery.common.util\");var DOMAgent=jsloader.resolve(\"bof.baseajax.common.DOMAgent\");var OlapQueryViewToolbar=jsloader.resolve(\"bof.olapquery.olapquery.OlapQueryViewToolbar\");var OlapQueryMacroExecutor=jsloader.resolve(\"bof.macro.OlapQueryMacroExecutor\");var OlapQueryViewChart=jsloader.resolve(\"bof.olapquery.olapquery.OlapQueryViewChart\");var OlapTable=jsloader.resolve(\"bof.olapquery.olapquery.OlapTable\");var dialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var Paging=jsloader.resolve(\"bof.olapquery.paging.Paging\");var ParameterPanel=jsloader.resolve(\"freequery.query.ParameterPanel\");var MacroService=imports(\"bof.macro.services.MacroService\");var PopupMenu=jsloader.resolve(\"freequery.menu.PopupMenu\");var modalWindow=imports(\"freequery.common.modalWindow\").getInstance();var Progress=jsloader.resolve(\"freequery.control.Progress\");var HierarchiesSpace=jsloader.resolve(\"bof.olapquery.olapquery.displayworkspace.HierarchiesSpace\");var compatutil=jsloader.resolve(\"freequery.lang.compatutil\");var OlapQueryViewDisplay=function(container,editType){OlapQueryViewDisplay.superclass.constructor.call(this,container);this.needRefresh=new CustomEvent(\"needRefresh\",this);this.parent=container;this.editType=editType;this.setFrameTitle(\"多维分析 \");var t=document.createElement(\"TABLE\");t.cellPadding=t.cellSpacing=0;t.style.width=t.style.height=\"100%\";var tbody=document.createElement(\"TBODY\");t.appendChild(tbody);var tr=document.createElement(\"TR\");tbody.appendChild(tr);var td=document.createElement(\"TD\");tr.appendChild(td);this.frameViewContainer.appendChild(t);var hd=document.createElement(\"TD\");hd.className=\"hsplitterHide\";hd.style.display=\"none\";tr.appendChild(hd);var wd=document.createElement(\"TD\");wd.className=\"leftPane\";wd.style.width=\"300px\";wd.style.borderLeft=\"1px solid #919B9C\";wd.style.display=\"none\";tr.appendChild(wd);var d=document.createElement(\"DIV\");d.style.height=\"100%\";td.appendChild(d);this.domAgent=new DOMAgent(d);this.domAgent.registerListenerByDefault(\"contextmenu\",function(e){domutils.stopEvent(e);},this);this.domAgent.registerListenerByBofclass(\"hsplitter\",\"mousedown\",function(){;},this);this.domAgent.registerListenerByBofclass(\"vsplitter\",\"mousedown\",function(){;},this);this.domAgent.registerListenerByBofid(\"nextPage\",\"click\",this.nextPage,this);this.domAgent.registerListenerByBofid(\"prevPage\",\"click\",this.prevPage,this);this.olapDefineContainer=wd;this.workspace=new HierarchiesSpace(wd);this.workspace.onChange.subscribe(this.doOnWorkspaceChange,this);this.workspace.onRemoveExpHandler.subscribe(this.deleteHierarchy,this);this.olapTable=new OlapTable(this.domAgent);this.olapTable.refreshDefineHandler.subscribe(this.refreshDefine,this);this.olapTable.refreshChartHandler.subscribe(this.refreshChart,this);this.olapTable.afterRefrshTableHandler.subscribe(this.afterRefrshTable,this);this.olapTable.afterRefreshDataHandler.subscribe(this.afterRefreshData,this);this.olapTable.setRowCountHandler.subscribe(this.setRowCount,this);this.olapTable.onClick.subscribe(this.doOnClickOlapTable,this);this.olapTable.onFilter.subscribe(this.doOnFilter,this);this.olapTable.onAddSubTotal.subscribe(this.doAddSubTotal,this);this.olapTable.onAddFunction.subscribe(this.doAddFunction,this);this.olapTable.onClearSubTotal.subscribe(this.doClearSubTotal,this);this.olapTable.onClearFunction.subscribe(this.doClearFunction,this);this.olapTable.onSetClientConfig.subscribe(this.doSetClientConfig,this);this.olapTable.onSetFunction.subscribe(this.refreshData,this);this.olapTable.onRefreshTableStyle.subscribe(this.refreshTableStyle,this);this.olapTable.onExchange.subscribe(this.doExchange,this);this.olapTable.onDrillTo.subscribe(this.doDrillTo,this);this.olapTable.onNextColumnPage.subscribe(this.doNextColumnPage,this);this.olapTable.onPrevColumnPage.subscribe(this.doPrevColumnPage,this);this.toolbar=new OlapQueryViewToolbar(this.domAgent);this.toolbar.setControlType(\"OlapQueryViewDisplay\");this.toolbar.onRefreshData.subscribe(this.refreshData,this);this.toolbar.onSaveOlapQuery.subscribe(this.saveOlapQuery,this);this.toolbar.onRestoreOlapQuery.subscribe(this.restoreOlapQuery,this);this.toolbar.onShowQueryDefinePanel.subscribe(this.showOlapDefinePanel,this);this.toolbar.onSetReport.subscribe(this.setReport,this);this.toolbar.onSetSubtotal.subscribe(this.setSubtotal,this);this.toolbar.onSetParam.subscribe(this.setParamSetting,this);this.toolbar.onAddFavorite.subscribe(this.addFavorite,this);this.toolbar.onSaveAsOlapQuery.subscribe(this.saveAsOlapQuery,this);this.toolbar.onPreviewMDX.subscribe(this.previewMDX,this);this.toolbar.onGoBackWard.subscribe(this.goBackWard,this);this.toolbar.onGoForWard.subscribe(this.goForWard,this);this.toolbar.onExport.subscribe(this.prepareExport,this);this.toolbar.onChangeViewSettings.subscribe(this.changeViewSettings,this);this.toolbar.onGetParamId.subscribe(this.getParamId,this);this.toolbar.onAddChart.subscribe(this.doAddChart,this);this.toolbar.onAddMap.subscribe(this.doAddMap,this);this.toolbar.onPrint.subscribe(this.doPrint,this);this.toolbar.onChangeMode.subscribe(this.doChangeMode,this);this.toolbar.onClearAllHiddenSettings.subscribe(this.doClearAllHiddenSettings,this);this.toolbar.onAdvancedSetting.subscribe(this.doAdvancedSetting,this);this.toolbar.onGetChartCount.subscribe(this.setToolbarChartCount,this);this.newQuery=true;this.queryDefine;this.isDefinePanelShow=true;this.isPaging=false;this.pageCount=1;this.pageRows=0;this.hasRefresh=false;this.refreshingData=false;this.popupMenu=new PopupMenu(document.body,this);this.frameViewContainer.style.overflow=\"hidden\";this.locationBar.onMinFrame.subscribe(this.doMinFrame,this);this.afterRefresh=new CustomEvent(\"afterRefresh\",this);this.onBeforeClickOlapTable=new CustomEvent(\"onBeforeClickOlapTable\",this);this.onClickOlapTable=new CustomEvent(\"onClickOlapTable\",this);this.onAfterClickOlapTable=new CustomEvent(\"onAfterClickOlapTable\",this);this.onAfterRefrshTable=new CustomEvent(\"onAfterRefrshTable\",this);this.onDoCmd=new CustomEvent(\"onDoCmd\",this);this.onOpenOlapQueryView=new CustomEvent(\"onOpenOlapQueryView\",this);this.onSave=new CustomEvent(\"onSave\",this);};lang.extend(OlapQueryViewDisplay,\"freequery.common.FrameView\");OlapQueryViewDisplay.prototype.init=function(cubeId,folderNodeData){this.workspace.cubeId=cubeId;this.folderNodeData=folderNodeData;this.cubeId=cubeId;var result=util.remoteInvokeEx(\"OlapQueryClientService\",\"create\",[cubeId]);if(!result){this.onClose.fire(this);return false;}\nresult=result.result;this.setClientId(result.clientId);this.paramPanelId=result.parameterPanelId;this.domAgent.refreshAll(result.html);domutils.removeWhiteSpace(this.domAgent.container);this.toolbar.setViewSettings(result.viewSetting);this.autoRefresh=result.autoRefresh;this.isPaging=result.olapPaging;this.toolbar.setIsPaging(this.isPaging);this.pageRows=result.olapPagingRows;this.clientSetting=result.setting;this.clientSetting.openMode=\"DISCOVER\";util.remoteInvokeEx(\"OlapQueryClientService\",\"setClientSetting\",[this.clientId,this.clientSetting],this.emptyFunction,this);this.initComponent(cubeId,result.clientId,result);if(this.clientSetting.alignCenter){this.setAlignCenter(true);}\nthis.setQueryViewBackgroundColor();this.pagingContainer=this.domAgent.getElementByBofid(\"pagingDiv\");this.initPaging();this.elemReportHeader=this.domAgent.getElementByBofid(\"reportHeader\");this.elemReportTail=this.domAgent.getElementByBofid(\"reportTail\");this.setHeader(\"\");this.setTail(\"\");this.elemChartDiv=this.domAgent.getElementByBofid(\"chartDiv\");this.chartTool=new OlapQueryViewChart(this,this.clientId,this.elemChartDiv);this.toolbar.initScrollToolbar();MacroService.getInstance().fire(this,\"olapQuery\",\"onRender\",[this]);this.initHandlers();if(domutils.isIE()&&domutils.getBrowserVersion()>9){var container=this.domAgent.getElementByBofid(\"scrollDiv\");compatutil.fixFirefoxScroll2(container);}\nreturn true;};OlapQueryViewDisplay.prototype.open=function(olapQueryId){this.id=olapQueryId;if(this.getPageId()){util.compositeInvoke(\"openOlapReportInPage\",[olapQueryId,this.getPageId()],true,this.compositeInvokeOpenOlapReportCallBack,this);}else\nutil.compositeInvoke(\"openOlapReport\",[olapQueryId],true,this.compositeInvokeOpenOlapReportCallBack,this);this.showMaskDiv(true);this.maskDiv_CancelButton.innerHTML='正在运行中……';}\nOlapQueryViewDisplay.prototype.compositeInvokeOpenOlapReportCallBack=function(ret){if(ret&&ret.succeeded){}else{if(this.onClose==null){return;}\nmodalWindow.showServerError(ret);this.error=true;this.onClose.fire(this);return false;}\nvar result=util.remoteInvokeEx(\"OlapQueryClientService\",\"openOlapReport\",[this.id]);if(!result){this.error=true;this.onClose.fire(this);return false;}\nif(this.olapTable){}else{return;}\nthis.showMaskDiv(false);this.maskDiv_CancelButton.innerHTML='正在查询中……';var olapQueryId=this.id;result=result.result;this.cubeId=result.cubeId;this.workspace.cubeId=result.cubeId;this.setClientId(result.clientId);this.paramPanelId=result.parameterPanelId;this.clientSetting=result.setting;this.isPaging=this.clientSetting.paging;this.toolbar.setIsPaging(this.isPaging);this.pageRows=this.clientSetting.pageRows;if(this.editType==\"VIEW\"&&this.clientSetting.openMode==\"DISCOVER\"&&!domutils.isMobile())\nthis.editType=\"DISCOVER\";this.reportId=result.reportId;this.reportAlias=result.reportAlias;if(result.paramLayout){this.paramLayout=lang.parseJSON(result.paramLayout);if(this.paramLayout&&this.paramLayout.length>0&&this.paramLayout[0].length>0){;}else{this.paramLayout=null;}}\ntry{var pathandname=util.getCatalogNodeLocation(this.reportId);this.setFrameTitleLocal(pathandname[0]);this.setFrameTitle(pathandname[1]);}catch(e){}\nthis.autoRefresh=result.autoRefresh;this.domAgent.refreshAll(result.html);domutils.removeWhiteSpace(this.domAgent.container);this.initComponent(result.cubeId,result.clientId,result);var chartClientIdList=result.chartClientIdList;this.newQuery=false;this.pagingContainer=this.domAgent.getElementByBofid(\"pagingDiv\");this.initPaging();this.elemReportHeader=this.domAgent.getElementByBofid(\"reportHeader\");this.elemReportTail=this.domAgent.getElementByBofid(\"reportTail\");var formatHead=this.replaceEvalString(this.clientSetting.formatHead);var formatTail=this.replaceEvalString(this.clientSetting.formatTail);this.setHeader(formatHead,true);this.setTail(formatTail,true);this.subtotalInfos=[];if(result.subtotalInfos.length>0){for(var i=0;i<result.subtotalInfos.length;i++){var subtotalInfo=result.subtotalInfos[i];var obj={};obj.name=subtotalInfo.name;obj.dimenion=subtotalInfo.dimenionName;obj.hierarchyText=subtotalInfo.hierText;obj.hierarchyName=subtotalInfo.hierUniqueName;obj.calculate=subtotalInfo.calculateType;obj.solveOrder=subtotalInfo.solveOrder;obj.dataType=subtotalInfo.dataType;obj.formatType=subtotalInfo.formatType;this.subtotalInfos.push(obj);}}\nthis.elemChartDiv=this.domAgent.getElementByBofid(\"chartDiv\");this.chartTool=new OlapQueryViewChart(this,this.clientId,this.elemChartDiv);this.chartTool.loadCharts(result.charts,result.chartOptionsList);this.resetChartAlign(this.clientSetting.chartAlign);this.toolbar.setViewSettings(result.viewSetting);this.setPaddingLeft(this.clientSetting.tableDefine.leftPadding);if(this.clientSetting.alignCenter){this.setAlignCenter(true);}\nthis.setQueryViewBackgroundColor();this.toolbar.initScrollToolbar();util.clearCompositeInvokeCache(\"openOlapReport\",[olapQueryId]);util.clearCompositeInvokeCache(\"openOlapReportInPage\",[olapQueryId,this.getPageId()]);MacroService.getInstance().fire(this,\"olapQuery\",\"onRender\",[this]);this.initHandlers();this.onOpenOlapQueryView.fire(this,this.reportId);if(domutils.isIE()&&domutils.getBrowserVersion()>9){var container=this.domAgent.getElementByBofid(\"scrollDiv\");compatutil.fixFirefoxScroll2(container);}\nreturn true;};OlapQueryViewDisplay.prototype.initComponent=function(cubeId,clientId,result){this.hiddenLeftAndRightPane();this.domAgent.getElementByBofid(\"olapDefine\").style.display=\"none\";if(this.editType==\"DISCOVER\"||this.editType==\"EDIT\"){this.olapDefineContainer.style.display=\"block\";}else{this.olapDefineContainer.style.display=\"none\";}\nthis.setComponentCubeId(this.cubeId);this.toolbar.setEditType(this.editType);this.toolbar.hiddenButton();this.initParamPanelObj();this.refreshDefine(result);}\nOlapQueryViewDisplay.prototype.doOnWorkspaceChange=function(workspace,fromOrdinal,fromHier,axisOrdinal,hierarchies){if(fromOrdinal>=0){this.moveMember(null,fromOrdinal,fromHier,axisOrdinal,hierarchies);}else{this.resetMember(null,axisOrdinal,hierarchies);}}\nOlapQueryViewDisplay.prototype.initOlapDefine=function(container){};OlapQueryViewDisplay.prototype.changeCurrentSelectedAxis=function(that,axisOrdinal){this.currentSelectedAxis=axisOrdinal;};OlapQueryViewDisplay.prototype.afterChangeDefine=function(ret){if(ret&&ret.succeeded){this.refreshDefine();if(this.queryDefine&&this.queryDefine.axisList&&this.queryDefine.axisList[0]&&this.queryDefine.axisList[0].hierarchys&&this.queryDefine.axisList[0].hierarchys.length>0){if(this.autoRefresh)\nthis.refreshData();}}else{var obj={result:this.queryDefine}\nthis.workspace.setClientSetting(this.clientSetting);this.workspace.processQueryDefine(obj);}}\nOlapQueryViewDisplay.prototype.resetMember=function(ctrl,axis,hierarchies){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"resetMembersOnAxis\",[this.clientId,axis,hierarchies]);this.afterChangeDefine(ret);}\nOlapQueryViewDisplay.prototype.deleteHierarchy=function(that,hierDefine,axisOrdinal){var expList=new Array();for(var i=0;i<hierDefine.selections.length;i++){expList.push(hierDefine.selections[i].mdx);}\nvar ret;if(axisOrdinal!=2){ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"removeMembersFromAxis\",[this.clientId,axisOrdinal,hierDefine.dimensionName,hierDefine.name,expList]);}else{ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"removeMembersFromDice\",[this.clientId,expList]);}\nthis.afterChangeDefine(ret);}\nOlapQueryViewDisplay.prototype.moveMember=function(ctrl,removeAxis,removeHier,axis,allHierarchies){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"moveMembers\",[this.clientId,removeAxis,removeHier,axis,allHierarchies]);this.afterChangeDefine(ret);};OlapQueryViewDisplay.prototype.doPlaceExp=function(ctrl,dimName,hierName,expList){if(this.currentSelectedAxis==0||this.currentSelectedAxis==1){this.placeMemberOnAxis(this.currentSelectedAxis,null,hierName,expList);}else if(this.currentSelectedAxis==2){this.placeMembersOnDice(null,hierName,expList);}}\nOlapQueryViewDisplay.prototype.placeMembersOnDice=function(dimName,hierName,expList){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"placeMembersOnDice\",[this.clientId,dimName,hierName,expList]);this.afterChangeDefine(ret);}\nOlapQueryViewDisplay.prototype.placeMemberOnAxis=function(axis,dimName,hierName,expList){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"placeMembersOnAxis\",[this.clientId,axis,dimName,hierName,expList]);this.afterChangeDefine(ret);}\nOlapQueryViewDisplay.prototype.refreshDefine=function(result){var ret;if(result){ret=result;}else{var tempRet=util.remoteInvokeEx(\"OlapQueryClientService\",\"refreshDefine\",[this.clientId]);if(tempRet&&tempRet.succeeded){ret=tempRet.result;}}\nif(ret){this.queryDefine=ret.olapQueryDefine;this.workspace.setClientSetting(this.clientSetting);this.workspace.processQueryDefine(ret.olapQueryDefine);this.rebuildParam(this.clientId);this.resetForwardBackwardState(ret.canGoForward,ret.canGoBackward);this.refreshClientSetting(ret.setting);if(this.elemReportHeader){var formatHead=this.replaceEvalString(this.clientSetting.formatHead);this.setHeader(formatHead,true);}\nif(this.elemReportTail){var formatTail=this.replaceEvalString(this.clientSetting.formatTail);this.setTail(formatTail,true);}\nvar errorList=ret.errorList;if(errorList.length>0){var msg=\"\";for(var i=0;i<errorList.length;i++){msg+=errorList[i]+\"\\n\";}\nalert(msg);}}}\nOlapQueryViewDisplay.prototype.initParamPanelObj=function(){this.paramContainer=this.domAgent.getElementByBofid(\"paramDiv\");if(!this.paramPanelObj){this.paramPanelObj=new ParameterPanel(this.paramContainer,this._parent,this.paramLayout);this.paramPanelObj.clientId=this.paramPanelId;this.paramPanelObj.onSelectChange.subscribe(this.doParamChange,this);}};OlapQueryViewDisplay.prototype.doParamChange=function(){if(this.autoRefresh)\nthis.refreshData();this.setHeader(this.clientSetting.head);this.setTail(this.clientSetting.tail);};OlapQueryViewDisplay.prototype.addParam=function(param){if(!this.paramPanelObj)\nthis.initParamPanelObj();if(param.display){var index=this.paramPanelObj.findParam(param.id);if(index<0){var addedParam=this.paramPanelObj.addParam(param);if(addedParam&&addedParam.dropDownTreePanel&&addedParam.dropDownTreePanel.tree){addedParam.dropDownTreePanel.tree.queryClientId=this.clientId;}else if(addedParam.bofClassName==\"bof.olapquery.param.OlapParamMemberChoose\"){addedParam.queryClientId=this.clientId;}}else{this.paramPanelObj.paramObjList[index].setCurrentValue(param.currentValue,param.currentDisplayValue);}}\nthis.params.push(param);}\nOlapQueryViewDisplay.prototype.rebuildParam=function(clientId){var ret=util.remoteInvoke(\"OlapQueryClientService\",\"getOutputParamemtersAndLayout\",[clientId]);if(ret&&ret.succeeded){this.paramPanelObj.clear();this.paramsInited=new Array();this.params=new Array();var paramDiv=this.domAgent.getElementByBofid(\"paramDiv\");this.paramPanelObj.initLayout(lang.parseJSON(ret.result[1]));this.paramPanelObj.initParamLayout=true;this.paramPanelObj.paramsInited=new Array();for(var i=0;i<ret.result[0].length;i++){var param=ret.result[0][i];this.addParam(param);}\nthis.adjustParamPanelObj(ret.result[0]);}};OlapQueryViewDisplay.prototype.getParam=function(paramId){for(var i=0;i<this.params.length;i++){if(this.params[i].id==paramId){return this.params[i];}}\nreturn null;}\nOlapQueryViewDisplay.prototype.adjustParamPanelObj=function(params){if(!this.paramPanelObj)\nreturn;var paramObjList=this.paramPanelObj.paramObjList;var paramArray=new Array();for(var i=0;i<paramObjList.length;i++){var paramTag=paramObjList[i].paramTag;var param=paramTag.param;var paramId=param.id;var find=false;for(var j=0;j<params.length;j++){if(paramId==params[j].id){find=true;if(typeof params[j].currentValue!=\"undefined\"){paramObjList[i].setSelectedItem(params[j].currentValue,params[j].currentDisplayValue);}else{this.paramPanelObj.setParamCtrlValue(paramTag,params[j].value,params[j].displayValue);}}}\nif(find){paramArray.push(paramObjList[i]);}}\nthis.paramPanelObj.paramObjList=paramArray;};OlapQueryViewDisplay.prototype.setParamValue=function(paramId,paramValue,paramAlias,fromPortal){if(fromPortal){this.paramPanelObj.setParamValue(paramId,paramValue,paramAlias);return;}\nvar value=paramValue;var param=this.getParam(paramId);if(!param)\nreturn;if(param.type==\"MemberSet\"){value=paramValue;var paramArray=paramValue.split(\",\");var newArray=new Array();for(var i=0;i<paramArray.length;i++){newArray.push(paramArray[i]);}\nvalue=lang.toJSONString(newArray);}else{value=paramValue;}\nthis.paramPanelObj.setParamValue(paramId,value,paramAlias);};OlapQueryViewDisplay.prototype.setParamValueByName=function(paramName,paramValue,paramAlias,fromPortal){var param=this.paramPanelObj.findParamByName(paramName);if(param==null)\nreturn;var paramId=param.id;if(fromPortal){this.paramPanelObj.setParamValue(paramId,paramValue,paramAlias);return;}\nvar value=paramValue;var param=this.getParam(paramId);if(param.type==\"MemberSet\"){value=paramValue;var paramArray=paramValue.split(\",\");var newArray=new Array();for(var i=0;i<paramArray.length;i++){newArray.push(paramArray[i]);}\nvalue=lang.toJSONString(newArray);}else{value=paramValue;}\nthis.paramPanelObj.setParamValue(paramId,value,paramAlias);};OlapQueryViewDisplay.prototype.getParamValue=function(paramId){var value=null;var displayValue=null;var memberValue=null;var paramValue=this.paramPanelObj.getParamValue(paramId);if(typeof paramValue==\"undefined\"){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"getOutputParameterById\",[this.clientId,paramId]);if(ret.succeeded&&ret.result){var pvalue=ret.result.currentValue||ret.result.value;try{var valueArray=lang.parseJSON(pvalue);value=valueArray.join(\",\");}catch(e){value=pvalue;}\ndisplayValue=ret.result.currentDisplayValue||ret.result.displayValue;}}else{if(typeof paramValue==\"string\"){try{var valueArray=lang.parseJSON(paramValue);value=valueArray.join(\",\");}catch(e){value=paramValue;}}else{value=paramValue.join(\",\");}\ndisplayValue=this.paramPanelObj.getParamDisplayValue(paramId);}\nif(value)\nmemberValue=this.getMemberValueByParamValue(value);var retValue={value:value,displayValue:displayValue,memberValue:memberValue};return retValue;};OlapQueryViewDisplay.prototype.getMemberValueByParamValue=function(paramValue){var uNameArray=paramValue.split(\",\");var allId=\"\";for(var i=0;i<uNameArray.length;i++){var nameArray=uNameArray[i].split(\".\");var level=nameArray.length;var idValue=nameArray[level-1];idValue=idValue.substring(1,idValue.length-1);if(i!=0)\nallId=allId+\",\";allId=allId+\"'\"+idValue+\"'\";}\nreturn allId;}\nOlapQueryViewDisplay.prototype.getParamId=function(){var paramId=prompt(\"Input ParamId: \",\"_BOF_Dice_CustomerMember_Measures\");if(!paramId){return;}\nvar retValue=this.getParamValue(paramId);alert(\"实际值：\"+retValue.value+\"，显示值：\"+retValue.displayValue);};OlapQueryViewDisplay.prototype.hiddenParameterByName=function(paramName){for(var i=0;i<this.paramPanelObj.paramObjList.length;i++){var paramTag=this.paramPanelObj.paramObjList[i].paramTag;var param=paramTag.getAttribute(\"param\")||paramTag.param;if(param.name==paramName){paramTag.style.display=\"none\";}}};OlapQueryViewDisplay.prototype.hiddenParameterByNameEx=function(paramName){for(var i=0;i<this.paramPanelObj.paramObjList.length;i++){var paramTag=this.paramPanelObj.paramObjList[i].paramTag;var param=paramTag.param;if(param.name==paramName){paramTag.style.display=\"none\";util.remoteInvokeEx(\"OlapQueryClientService\",\"setOutputParamInfo\",[this.clientId,param.id,\"display\",\"false\"]);}}};OlapQueryViewDisplay.prototype.hiddenParameterById=function(paramId){for(var i=0;i<this.paramPanelObj.paramObjList.length;i++){var paramTag=this.paramPanelObj.paramObjList[i].paramTag;var param=paramTag.getAttribute(\"param\");if(param.id==paramId){paramTag.style.display=\"none\";}}};OlapQueryViewDisplay.prototype.hiddenOlapDefinePanel=function(){this.setOlapDefinePanelStatus(false);}\nOlapQueryViewDisplay.prototype.showOlapDefinePanel=function(){this.setOlapDefinePanelStatus(!this.isDefinePanelShow);}\nOlapQueryViewDisplay.prototype.setOlapDefinePanelStatus=function(isShow){return;this.isDefinePanelShow=isShow;if(isShow){this.olapDefineContainer.style.display=\"\";if(this.olapDefinePanel){this.resetDefineDivPosition();}}else{this.olapDefineContainer.style.display=\"none\";}}\nOlapQueryViewDisplay.prototype.hiddenLeftAndRightPane=function(){this.setOlapDefinePanelStatus(false);this.domAgent.getElementByBofid(\"hsplitterLetfTd\").style.display=\"none\";this.domAgent.getElementByBofid(\"leftPaneTreeTd\").style.display=\"none\";this.domAgent.getElementByBofid(\"rightPaneTd\").style.display=\"none\";};OlapQueryViewDisplay.prototype.showLeftAndRightPane=function(){this.setOlapDefinePanelStatus(true);this.domAgent.getElementByBofid(\"hsplitterLetfTd\").style.display=\"\";this.domAgent.getElementByBofid(\"leftPaneTreeTd\").style.display=\"\";this.domAgent.getElementByBofid(\"rightPaneTd\").style.display=\"\";};OlapQueryViewDisplay.prototype.setClientId=function(clientId){this.clientId=clientId;this.olapTable.setClientId(clientId);this.toolbar.setClientId(clientId);this.workspace.setClientId(clientId);};OlapQueryViewDisplay.prototype.setComponentCubeId=function(cubeId){this.olapTable.setCubeId(cubeId);};OlapQueryViewDisplay.prototype.removeFromSession=function(){if(this.clientId){util.remoteInvokeEx(\"OlapQueryClientService\",\"close\",[this.clientId]);this.clientId=null;}else{var obj=this;setTimeout(function(){obj.removeFromSession();},1000);}}\nOlapQueryViewDisplay.prototype.doAdvancedSetting=function(){if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var data=[this.clientId,this.cubeId];var dialogConfig={title:\"高级设置\",fullName:\"bof.olapquery.olapquery.advancedsetting.AdvancedSettingDialog\"};dialogConfig.size=[500,341];dialogFactory.showDialog(dialogConfig,data,this.afterAdvancedSetting,this);}\nOlapQueryViewDisplay.prototype.afterAdvancedSetting=function(close){if(!close)\nreturn;this.rebuildParam(this.clientId);}\nOlapQueryViewDisplay.prototype.destroy=function(){this.removeFromSession();if(this.workspace){this.workspace.onChange.unsubscribe(this.doOnWorkspaceChange,this);this.workspace.onRemoveExpHandler.unsubscribe(this.deleteHierarchy,this);this.workspace.destroy();this.workspace=null;}\nif(this.olapTable){this.olapTable.refreshDefineHandler.unsubscribe(this.refreshDefine,this);this.olapTable.refreshChartHandler.unsubscribe(this.refreshChart,this);this.olapTable.afterRefrshTableHandler.unsubscribe(this.afterRefrshTable,this);this.olapTable.afterRefreshDataHandler.unsubscribe(this.afterRefreshData,this);this.olapTable.setRowCountHandler.unsubscribe(this.setRowCount,this);this.olapTable.onClick.unsubscribe(this.doOnClickOlapTable,this);this.olapTable.onFilter.unsubscribe(this.doOnFilter,this);this.olapTable.onAddSubTotal.unsubscribe(this.doAddSubTotal,this);this.olapTable.onAddFunction.unsubscribe(this.doAddFunction,this);this.olapTable.onClearSubTotal.unsubscribe(this.doClearSubTotal,this);this.olapTable.onSetClientConfig.unsubscribe(this.doSetClientConfig,this);this.olapTable.onSetFunction.unsubscribe(this.refreshData,this);this.olapTable.onRefreshTableStyle.unsubscribe(this.refreshTableStyle,this);this.olapTable.onExchange.unsubscribe(this.doExchange,this);this.olapTable.onDrillTo.unsubscribe(this.doDrillTo,this);this.olapTable.destroy();this.olapTable=null;}\nif(this.toolbar){this.toolbar.onRefreshData.unsubscribe(this.refreshData,this);this.toolbar.onSaveOlapQuery.unsubscribe(this.saveOlapQuery,this);this.toolbar.onRestoreOlapQuery.unsubscribe(this.restoreOlapQuery,this);this.toolbar.onShowQueryDefinePanel.unsubscribe(this.showOlapDefinePanel,this);this.toolbar.onSetReport.unsubscribe(this.setReport,this);this.toolbar.onSetSubtotal.unsubscribe(this.setSubtotal,this);this.toolbar.onSetParam.unsubscribe(this.setParamSetting,this);this.toolbar.onAddFavorite.unsubscribe(this.addFavorite,this);this.toolbar.onSaveAsOlapQuery.unsubscribe(this.saveAsOlapQuery,this);this.toolbar.onPreviewMDX.unsubscribe(this.previewMDX,this);this.toolbar.onGoBackWard.unsubscribe(this.goBackWard,this);this.toolbar.onGoForWard.unsubscribe(this.goForWard,this);this.toolbar.onExport.unsubscribe(this.prepareExport,this);this.toolbar.onChangeViewSettings.unsubscribe(this.changeViewSettings,this);this.toolbar.onGetParamId.unsubscribe(this.getParamId,this);this.toolbar.onAddChart.unsubscribe(this.doAddChart,this);this.toolbar.onAddMap.unsubscribe(this.doAddMap,this);this.toolbar.onPrint.unsubscribe(this.doPrint,this);this.toolbar.onClearAllHiddenSettings.unsubscribe(this.doClearAllHiddenSettings,this);this.toolbar.onAdvancedSetting.unsubscribe(this.doAdvancedSetting,this);this.toolbar.onGetChartCount.unsubscribe(this.setToolbarChartCount,this);this.toolbar.destroy();this.toolbar=null;}\nif(this.paging){this.paging.onblur.unsubscribe(this.pageChange,this);this.paging.destroy();this.paging=null;}\nif(this.paramPanelObj){this.paramPanelObj.onSelectChange.unsubscribe(this.doParamChange,this);this.paramPanelObj.destroy();this.paramPanelObj=null;}\nif(this.chartTool){this.chartTool.destroy();this.chartTool=null;}\nif(this.exportProgressBar){clearInterval(this.exportInterval);currentQueryView=null;this.showCancelMaskDiv(false);this.exportProgressBar.destroy();this.exportProgressBar=null;}\nif(this.cancelMaskDiv){this.cancelMaskDiv_CancelButton.owner=null;domutils.destroyNode(this.cancelMaskDiv_CancelButton);this.cancelMaskDiv_CancelButton=null;if(this.cancelMaskDiv.parentNode==this.parent){domutils.destroyNode(this.cancelMaskDiv);}\nthis.cancelMaskDiv=null;}\nif(this.locationBar)\nthis.locationBar.onMinFrame.unsubscribe(this.doMinFrame,this);if(this.pagingContainer)\nthis.pagingContainer=null;if(this.paramContainer)\nthis.paramContainer=null;if(this.elemChartDiv)\nthis.elemChartDiv=null;if(this.olapDefineContainer)\nthis.olapDefineContainer=null;if(this.elemReportHeader)\nthis.elemReportHeader=null;if(this.elemReportTail)\nthis.elemReportTail=null;if(this.domAgent){this.domAgent.destroy();this.domAgent=null;}\nif(this.popupMenu){this.popupMenu.destroy();this.popupMenu=null;}\ndelete this.hiddenOlapParam;delete this.error;OlapQueryViewDisplay.superclass.destroy.call(this);};OlapQueryViewDisplay.prototype.refreshData=function(){if(this.refreshingData){return false;}\nif(this.queryDefine){if(this.queryDefine.axisList){if(this.queryDefine.axisList.length==2){if(this.queryDefine.axisList[0].hierarchys.length==0){alert(\"列轴上没有表达式\");return;}}}}\nvar paramSize=this.paramPanelObj.paramObjList.length;for(var i=0;i<paramSize;i++){var param=this.paramPanelObj.paramObjList[i];if(param.olapParam){var paramValue=null;if(param.olapParam.componentType=ParameterPanel.OlapMemberParam){paramValue=param.getSelectedObject();}else if(param.olapParam.componentType=ParameterPanel.OlapMemberDialog){paramValue=param.getSelectedId();}else{paramValue=this.paramPanelObj.getParamValue(param.olapParam.id);}\nif(!paramValue){alert(param.olapParam.alias+\"的值不能为空！\");return;}}}\nthis.refreshingData=true;this.showMaskDiv(true);if(this.getPageId()){util.compositeInvoke(\"refreshOlapReportInPage\",[this.clientId,this.getPageId()],true,this.refreshDataCallBack,this);}else{util.compositeInvoke(\"refreshOlapReport\",[this.clientId],true,this.refreshDataCallBack,this);}\nreturn true;};OlapQueryViewDisplay.prototype.refreshDataCallBack=function(ret){if(ret&&ret.succeeded){}else{if(this.onClose==null){return;}\nmodalWindow.showServerError(ret);this.showMaskDiv(false);this.refreshingData=false;this.hasRefresh=true;return;}\nthis.olapTable.refreshData(this.afterRefreshData,this);if(!this.isPaging)\nthis.toolbar.allRowCount=this.allRowCount;return true;}\nOlapQueryViewDisplay.prototype.afterRefreshData=function(){this.refreshingData=false;this.hasRefresh=true;this.pagingContronl();this.showMaskDiv(false);util.clearCompositeInvokeCache(\"refreshOlapReport\",[this.clientId]);util.clearCompositeInvokeCache(\"refreshOlapReportInPage\",[this.clientId,this.getPageId()]);this.refreshTableStyle();this.onAfterRefrshTable.fire(this);}\nOlapQueryViewDisplay.prototype.refreshTableStyle=function(){var olapTableDiv=this.domAgent.getElementByBofid(\"olapTable\");if(this.clientSetting.frozenRowHeader||this.clientSetting.frozenColumnHeader){olapTableDiv.className=\"olap-centerscroll_div\";olapTableDiv.style.overflow=\"auto\";}else{olapTableDiv.className=\"\";olapTableDiv.style.overflow=\"\";}};OlapQueryViewDisplay.prototype.refreshDataByEditType=function(){if(this.editType==\"VIEW\"){if(this.clientSetting.viewAutoRefresh==1){this.refreshData();}else if(this.clientSetting.viewAutoRefresh==-1){var ret=util.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfig\",[\"OLAP_VIEW_AUTO_REFRESH\"]);if(ret&&(ret.result==undefined||(ret.result&&ret.result.value==\"true\")))\nthis.refreshData();}}else if(this.editType==\"DISCOVER\"){if(this.clientSetting.discoverAutoRefresh==1){this.refreshData();}else if(this.clientSetting.discoverAutoRefresh==-1){var ret=util.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfig\",[\"OLAP_DISCOVER_AUTO_REFRESH\"]);if(ret&&ret.result&&ret.result.value==\"true\")\nthis.refreshData();}}};OlapQueryViewDisplay.prototype.afterRefrshTable=function(){MacroService.getInstance().fire(this,\"olapQuery\",\"afterRefreshTable\",[this]);}\nOlapQueryViewDisplay.prototype.directToPage=function(page){var toPage=page;if(typeof page!=\"string\")\ntoPage=this.paging.elemCurrentPage.value;this.showMaskDiv(true);this.olapTable.directToPage(parseFloat(page),this.afterRefreshData,this);this.pageCount=page;this.pagingContronl();};OlapQueryViewDisplay.prototype.nextPage=function(){if(this.paging.elemNextPage.disabled)\nreturn;this.showMaskDiv(true);this.olapTable.directToPage(++this.pageCount,this.afterRefreshData,this);this.pagingContronl();};OlapQueryViewDisplay.prototype.prevPage=function(){if(this.pageCount<=1){return;}\nthis.showMaskDiv(true);this.olapTable.directToPage(--this.pageCount,this.afterRefreshData,this);this.pagingContronl();};OlapQueryViewDisplay.prototype.doNextColumnPage=function(){this.showMaskDiv(true);this.clientSetting.columnStartIndex+=this.clientSetting.pageColumns;util.remoteInvokeEx(\"OlapQueryClientService\",\"setClientSetting\",[this.clientId,this.clientSetting]);this.directToPage(this.pageCount);};OlapQueryViewDisplay.prototype.doPrevColumnPage=function(){this.showMaskDiv(true);this.clientSetting.columnStartIndex-=this.clientSetting.pageColumns;util.remoteInvokeEx(\"OlapQueryClientService\",\"setClientSetting\",[this.clientId,this.clientSetting]);this.directToPage(this.pageCount);};OlapQueryViewDisplay.prototype.pagingContronl=function(){if(!this.hasRefresh){return;}\nvar pagingDiv=this.domAgent.getElementByBofid(\"pagingDiv\");if(!this.isPaging){pagingDiv.style.display=\"none\";return;}\npagingDiv.style.display=\"\";var prevPage=this.paging.elemPrevPage;if(this.pageCount==1){prevPage.disabled=true;prevPage.style.color=\"gray\";}else{prevPage.disabled=false;prevPage.style.color=\"\";}\nif(this.olapTable&&this.olapTable.rowCount){var currentRowCount=this.olapTable.rowCount;if(currentRowCount<this.pageRows){}else{this.paging.elemNextPage.disabled=false;}}else{}\nvar currentPage=this.paging.elemCurrentPage;currentPage.value=this.pageCount;var rows=this.paging.elemPageRows;rows.value=this.pageRows;if(this.paging.elemNextPage.disabled&&this.paging.elemPrevPage.disabled){pagingDiv.style.display=\"none\";}}\nOlapQueryViewDisplay.prototype.pageCountChange=function(param){var currentPage=param;if(currentPage.length==0){return;}\nif(this.pageCount==param){return;}\nthis.directToPage(currentPage);}\nOlapQueryViewDisplay.prototype.pageRowsChange=function(param){var rows=param+\"\";if(this.pageRows==param){return;}\nutil.remoteInvokeEx(\"OlapQueryClientService\",\"setPageRows\",[this.clientId,parseFloat(rows)]);this.pageRows=rows;this.directToPage(\"1\");}\nOlapQueryViewDisplay.prototype.initPaging=function(){this.paging=new Paging(this.pagingContainer);this.paging.onblur.subscribe(this.pageChange,this);if(this.clientSetting&&this.clientSetting.compressRow){this.paging.elemCurrentPage.disabled=true;}}\nOlapQueryViewDisplay.prototype.pageChange=function(type,param){if(type==\"count\"){this.pageCountChange(param);}else if(type==\"row\"){this.pageRowsChange(param);}}\nOlapQueryViewDisplay.prototype.setRowCount=function(that,count){this.allRowCount=count;if(!this.isPaging){this.toolbar.allRowCount=this.allRowCount;}};OlapQueryViewDisplay.prototype.refreshChart=function(chartOptionsList){if(this.chartTool){this.chartTool.refreshAll(chartOptionsList);}}\nOlapQueryViewDisplay.prototype.doAddChart=function(){this.chartTool.showChartSetting(true);};OlapQueryViewDisplay.prototype.doAddMap=function(){this.chartTool.showMapSetting(true);};OlapQueryViewDisplay.prototype.maxFirstChart=function(){var chartTr=this.domAgent.getElementByBofid(\"chartTr\");if(chartTr.style.display==\"none\")\nreturn;if(this.chartTool.chartList.length<1)\nreturn;var olapTableDiv=this.domAgent.getElementByBofid(\"mainTable\");var height=olapTableDiv.clientHeight;var width=olapTableDiv.clientWidth;if(this.clientSetting.chartAlign==\"right\"){this.domAgent.getElementByBofid(\"olapTableTr\").firstChild.style.display=\"none\";}else{this.domAgent.getElementByBofid(\"olapTableTr\").style.display=\"none\";}\nthis.domAgent.getElementByBofid(\"pagingDivTr\").style.display=\"none\";this.domAgent.getElementByBofid(\"spaceLineTr\").style.display=\"none\";this.domAgent.getElementByBofid(\"alignControlor\").style.paddingLeft=0;if(this.elemReportHeader.innerHTML==\"\"){this.domAgent.getElementByBofid(\"reportHeaderTr\").style.display=\"none\";}\nif(this.elemReportTail.innerHTML==\"\"){this.domAgent.getElementByBofid(\"reportTailTr\").style.display=\"none\";}\nvar allHidden=true;for(var i=0;i<this.paramPanelObj.paramObjList.length;i++){var paramTag=this.paramPanelObj.paramObjList[i].paramTag;if(paramTag.style.display!=\"none\"&&paramTag.style.display!=\"NONE\"){allHidden=false;break;}}\nif(allHidden){this.domAgent.getElementByBofid(\"paramDivTr\").style.display=\"none\";}\nheight=height-this.domAgent.getElementByBofid(\"reportHeaderTr\").clientHeight;height=height-this.domAgent.getElementByBofid(\"paramDivTr\").clientHeight;height=height-this.domAgent.getElementByBofid(\"pagingDivTr\").clientHeight;height=height-this.domAgent.getElementByBofid(\"olapViewShotCut\").clientHeight;height=height-this.domAgent.getElementByBofid(\"reportTailTr\").clientHeight;width=width-2;height=height-2;if(width>0&&height>0){this.chartTool.maxFirstChart(null,height,width);}};OlapQueryViewDisplay.prototype.resizeFirstChart=function(){if(!this.chartTool.maximizedChart)\nreturn;this.domAgent.getElementByBofid(\"olapTableTr\").style.display=\"block\";this.chartTool.destroyMaximizedChart();};OlapQueryViewDisplay.prototype.resetChartAlign=function(chartAlign){var olapTableTr=this.domAgent.getElementByBofid(\"olapTableTr\");var olapTableContainer=this.domAgent.getElementByBofid(\"olapTableContainer\");var chartDiv=this.domAgent.getElementByBofid(\"chartDiv\");var chartTr=this.domAgent.getElementByBofid(\"chartTr\");var node=olapTableTr.firstChild;olapTableContainer.parentNode.removeChild(olapTableContainer);chartDiv.parentNode.removeChild(chartDiv);while(node){var tmp=node.nextSibling;domutils.destroyNode(node);node=tmp;}\nif(chartAlign==\"right\"){var alignControlor=this.domAgent.getElementByBofid(\"alignControlor\");var table=alignControlor.firstChild;for(var i=0;i<table.rows.length;i++){var row=table.rows[i];if(row.cells.length==1){var cell=row.cells[0];cell.colSpan=2;}}\nvar td=document.createElement(\"TD\");td.style.verticalAlign=\"top\";td.width=\"200\";olapTableTr.appendChild(td);td.appendChild(olapTableContainer);td=document.createElement(\"TD\");td.align=\"left\";td.style.verticalAlign=\"top\";olapTableTr.appendChild(td);td.appendChild(chartDiv);}else{var td=document.createElement(\"TD\");td.style.verticalAlign=\"top\";td.width=\"100%\";td.colSpan=2;olapTableTr.appendChild(td);td.appendChild(olapTableContainer);chartTr.firstChild.appendChild(chartDiv);}};OlapQueryViewDisplay.prototype.setAlignCenter=function(flag){var alignString=\"\";if(flag){alignString=\"CENTER\";}\nvar alignControlor=this.domAgent.getElementByBofid(\"alignControlor\");alignControlor.align=alignString;};OlapQueryViewDisplay.prototype.setPaddingLeft=function(setting){var olapTableGirdTd=this.domAgent.getElementByBofid(\"alignControlor\");olapTableGirdTd.style.paddingLeft=setting;};OlapQueryViewDisplay.prototype.saveOlapQuery=function(){if(this.reportId&&this.reportId!=''){this.updateOlapReport();}else{this.saveNewReport();}};OlapQueryViewDisplay.prototype.saveAsOlapQuery=function(){this.saveNewReport();if(this.editType==\"EDIT\"){this.doClose();}}\nOlapQueryViewDisplay.prototype.updateOlapReport=function(){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"updateOlapReport\",[this.clientId]);if(ret&&ret.succeeded){alert(\"保存多维分析成功!\");}else{}};OlapQueryViewDisplay.prototype.saveNewReport=function(){var data=new Array();data[0]=[\"DEFAULT_TREENODE\",\"SELF_TREENODE\"];if(registry.get(\"PrivateFolderAction_actived\")){data[0]=[\"SELF_TREENODE\"];}\ndata[1]=[\"OLAP_REPORT\"]\ndata[2]=[\"OLAP报表\"];data[3]=\"SAVE\";data[4]=this.folderNodeData;var uid=registry.get(\"currentUserId\");var ret=util.remoteInvokeEx(\"UserService\",\"getCurrentUser\",[]);if(ret&&ret.result){uid=ret.result.id;}\nif(this.editType==\"VIEW\"||this.editType==\"DISCOVER\"){data.rootNodeId=\"SELF_\"+uid;}\nif(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var dialogConfig={title:\"保存报表\",fullName:\"freequery.dialog.OpenSaveDialog\"};dialogConfig.size=[500,341];dialogFactory.showDialog(dialogConfig,data,this.saveOlapQueryCallback,this);}\nOlapQueryViewDisplay.prototype.saveOlapQueryCallback=function(ret,dialog){if(!ret)\nreturn false;if(ret.actionType==\"override\"){var saved=this.overwriteOlapReport(ret.fileId,ret.fileDesc);if(saved){this.reportId=ret.fileId;this.reportAlias=ret.fileName;dialog.alert(\"保存报表成功！\");this.onSave.fire(this,this.reportId);}else{this.reportId='';}}else{result=util.remoteInvokeEx(\"OlapQueryClientService\",\"saveOlapReport\",[this.clientId,ret.folderId,ret.fileName,ret.fileName,ret.fileDesc]);if(result&&result.succeeded){this.reportId=result.result;this.reportAlias=ret.fileName;dialog.alert(\"保存多维分析成功!\");this.onSave.fire(this,this.reportId);}else{this.reportId='';}}\nif(ret){this.needRefresh.fire(this,ret.folderId);}\nif(this.reportId&&this.reportId!=''){try{var pathandname=util.getCatalogNodeLocation(this.reportId);this.setFrameTitleLocal(pathandname[0]);this.setFrameTitle(pathandname[1]);}catch(e){}};};OlapQueryViewDisplay.prototype.overwriteOlapReport=function(reportId,desc){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"overwriteOlapReport\",[this.clientId,reportId,desc]);if(ret&&ret.succeeded){return true;}else{return false;}}\nOlapQueryViewDisplay.prototype.setReport=function(){if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var dialogConfig={};dialogConfig.size=[550,450];dialogConfig.title=\"报表设置\";dialogConfig.fullName=\"bof.olapquery.olapquery.OlapQuerySettingDialog\";var params=[this.clientId,this.clientSetting,this.cubeId];dialogFactory.showDialog(dialogConfig,params,this.afterSetReport,this);}\nOlapQueryViewDisplay.prototype.afterSetReport=function(close,reportSetting){if(!close)\nreturn;if(!reportSetting)\nreturn;var result=util.remoteInvokeEx(\"OlapQueryClientService\",\"setClientSetting\",[this.clientId,reportSetting]);if(result){this.clientSetting=reportSetting;if(reportSetting.paging==1){this.isPaging=true;this.pageRows=reportSetting.pageRows;this.pagingContronl();}else if(reportSetting.paging==-1){var ret=util.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfig\",[\"OLAP_PAGING\"]);if(ret&&(ret.result==undefined||ret.result.value=='true')){this.isPaging=true;ret=util.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfig\",[\"OLAP_PAGING_ROWS\"]);if(ret&&ret.result){this.pageRows=parseInt(ret.result.value);}else{this.pageRows=1000;}}else{this.isPaging=false;}\nthis.pagingContronl();}else{this.isPaging=false;this.pagingContronl();}}\nthis.setPaddingLeft(this.clientSetting.tableDefine.leftPadding);this.setAlignCenter(this.clientSetting.alignCenter);this.resetChartAlign(this.clientSetting.chartAlign);this.setQueryViewBackgroundColor();this.setHeader(reportSetting.head);this.setTail(reportSetting.tail);if(this.isPaging){this.directToPage(\"1\");}else{this.refreshData();}\nthis.toolbar.setIsPaging(this.isPaging);}\nOlapQueryViewDisplay.prototype.setParamSetting=function(){this.readyParam();this.readyParamLayout();var dialogConfig={};dialogConfig.title=\"参数设置\";dialogConfig.resizable=\"yes\";dialogConfig.size=dialogFactory.size.LARGE;dialogConfig.fullName=\"bof.olapquery.olapquery.OlapQueryParamSettingDialog\";if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var paramsApplyValue=[this.paramSetting,this.params,false,this.autoRefresh];var layout=this.paramLayout;var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"getParamLayout\",[this.clientId]);if(ret&&ret.succeeded){layout=lang.parseJSON(ret.result);}\nvar params=[paramsApplyValue,layout,this.clientId];dialogFactory.showDialog(dialogConfig,params,this.afterSetParamSetting,this);}\nOlapQueryViewDisplay.prototype.afterSetParamSetting=function(close,setting){if(!close)\nreturn;if(!setting)\nreturn;this.paramSetting=setting[0];this.autoRefresh=this.paramSetting.autoRefresh;var paramsId=this.paramSetting.applyDefaultValueParams;for(var n=0;n<paramsId.length;n++){var paramId=paramsId[n];var ret=util.remoteInvoke(\"OlapQueryClientService\",\"setParameterUseDefaultValue\",[this.clientId,paramId,true]);}\nvar paramsId=this.paramSetting.noApplyDefaultValueParams;for(var n=0;n<paramsId.length;n++){var paramId=paramsId[n];var ret=util.remoteInvoke(\"OlapQueryClientService\",\"setParameterUseDefaultValue\",[this.clientId,paramId,false]);}\nthis.setAutoRefreshStatus(this.autoRefresh);var newParamLayout=new Array();var layout=setting[1];if(layout==null)\nreturn;for(var i=0;i<layout.length;i++){var newRow=new Array();for(var j=0;j<layout[i].length;j++){newRow.push(layout[i][j]);}\nnewParamLayout.push(newRow);}\nvar ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"setParamLayout\",[this.clientId,lang.toJSONString(newParamLayout)]);if(ret&&ret.succeeded){this.paramLayout=newParamLayout;}\nthis.rebuildParam(this.clientId);}\nOlapQueryViewDisplay.prototype.readyParamLayout=function(){if(!this.params||this.params.length==0)\nreturn;var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"getParamLayout\",[this.clientId]);if(!ret||!ret.result)\nreturn;this.paramLayout=lang.parseJSON(ret.result);}\nOlapQueryViewDisplay.prototype.setParamLayout=function(e){if(!this.params||this.params.length==0)\nreturn;var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"getParamLayout\",[this.clientId]);if(!ret||!ret.result)\nreturn;var paramLayout=lang.parseJSON(ret.result);if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var w=dialogFactory.fixSize(800,\"W\");var h=dialogFactory.fixSize(520,\"H\");var layout=window.showModalDialog(\"js/freequery/businessview/ParamLayout.html\",paramLayout,\"dialogHeight:\"+h\n+\"px;dialogWidth:\"+w+\"px;resizable:yes;status:no\");if(!layout)\nreturn;var newParamLayout=new Array();for(var i=0;i<layout.length;i++){var newRow=new Array();for(var j=0;j<layout[i].length;j++){newRow.push(layout[i][j]);}\nnewParamLayout.push(newRow);}\nvar ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"setParamLayout\",[this.clientId,lang.toJSONString(newParamLayout)]);if(!ret){return;}\nthis.paramLayout=newParamLayout;}\nOlapQueryViewDisplay.prototype.readyParam=function(e){if(!this.params)\nreturn;var isNew=false;if(!this.paramSetting){this.paramSetting=new Object();this.paramSetting.applyDefaultValueParams=new Array();this.paramSetting.noApplyDefaultValueParams=new Array();this.paramSetting.attributes=new Array();isNew=true;}\nif(!this.paramSetting.applyDefaultValueParams)\nthis.paramSetting.applyDefaultValueParams=new Array();if(!this.paramSetting.noApplyDefaultValueParams)\nthis.paramSetting.noApplyDefaultValueParams=new Array();if(!this.paramSetting.attributes){this.paramSetting.attributes=new Array();}\nfor(var i=0;i<this.params.length;i++){if(this.params[i].useDefaultValue){this.paramSetting.applyDefaultValueParams.push(this.params[i].id);}else{this.paramSetting.noApplyDefaultValueParams.push(this.params[i].id);}}\nisNew=false;}\nOlapQueryViewDisplay.prototype.doParamOK=function(succeed,setting){if(!succeed)\nreturn;this.paramSetting=setting;this.autoRefresh=setting.autoRefresh;var paramsId=setting.applyDefaultValueParams;for(var n=0;n<paramsId.length;n++){var paramId=paramsId[n];var ret=util.remoteInvoke(\"OlapQueryClientService\",\"setParameterUseDefaultValue\",[this.clientId,paramId,true]);}\nvar paramsId=setting.noApplyDefaultValueParams;for(var n=0;n<paramsId.length;n++){var paramId=paramsId[n];var ret=util.remoteInvoke(\"OlapQueryClientService\",\"setParameterUseDefaultValue\",[this.clientId,paramId,false]);}\nthis.setAutoRefreshStatus(this.autoRefresh);}\nOlapQueryViewDisplay.prototype.setHeader=function(title,notNeedReplace){if(typeof title==\"undefined\"||title==\"\"){delete this.clientSetting.header;this.elemReportHeader.innerHTML=\"\";}else{if(!this.clientSetting){this.clientSetting={};}\nthis.clientSetting.header=title;var t;if(notNeedReplace){t=title;}else{t=this.replaceAllFunc(title);}\nt=this.replaceFontStyle(t,\"header\");this.elemReportHeader.innerHTML=t;}};OlapQueryViewDisplay.prototype.setTail=function(title,notNeedReplace){if(typeof title==\"undefined\"||title==\"\"){this.elemReportTail.innerHTML=\"\";}else{if(!this.clientConfig){this.clientConfig={};}\nthis.clientConfig.tail=title;var t;if(notNeedReplace){t=title;}else{t=this.replaceAllFunc(title);}\nt=this.replaceFontStyle(t,\"tail\");this.elemReportTail.innerHTML=t;}};OlapQueryViewDisplay.prototype.replaceAllFunc=function(title){var result=util.remoteInvokeEx(\"OlapQueryClientService\",\"replaceAllFunc\",[this.clientId,title]);var t7=title;if(result&&result.result){t7=result.result;}\nvar t8=this.replaceEvalString(t7);return t8;};OlapQueryViewDisplay.prototype.replaceFontStyle=function(text,headerFlag){var pageTheme=registry.get(\"pageTheme\");if(!pageTheme||!pageTheme.report)\nreturn text;var style=\"\";if(headerFlag==\"header\"&&pageTheme.report.reportHeaderFont){style=\"<span style='font-size:\"+pageTheme.report.reportHeaderFont.fontSize+\";color:\"+pageTheme.report.reportHeaderFont.color+\"'>\";}else if(headerFlag==\"tail\"&&pageTheme.report.reportTailFont){style=\"<span style='font-size:\"+pageTheme.report.reportTailFont.fontSize+\";color:\"+pageTheme.report.reportTailFont.color+\"'>\";}else{return text;}\nvar s1=\"<FONT size=\";while(text.indexOf(s1)!=-1){var t=text.indexOf(s1);var news=text.substring(0,t);var news2=text.substring(t);var l=news2.indexOf(\">\");news2=news2.substring(l+1);text=news+news2;}\ns1=\"<FONT color=\";while(text.indexOf(s1)!=-1){var t=text.indexOf(s1);var news=text.substring(0,t);var news2=text.substring(t);var l=news2.indexOf(\">\");news2=news2.substring(l+1);text=news+news2;}\ntext=text.replace(/<\\/FONT>/ig,\"\")\ntext=style+text+\"<\/span>\";return text;}\nOlapQueryViewDisplay.prototype.replaceEvalString=function(text){var ret=[];var txt=text;var pat=/EvalString\\([\"|']/g;var temp;var startIndex=0;while((temp=pat.exec(txt))!=null){var head=txt.substring(startIndex,temp.index);ret.push(head);var param=this.getEvalStrParam(txt,pat.lastIndex);var ev=this.evalString(param);ret.push(ev);startIndex=pat.lastIndex+param.length+2;pat.lastIndex=startIndex;}\nif(startIndex<txt.length)\nret.push(txt.substring(startIndex));return ret.join(\"\");}\nOlapQueryViewDisplay.prototype.getEvalStrParam=function(s,beginIndex){var toIndex=s.length;var c=1;for(var i=beginIndex;i<toIndex;i++){if(s.charAt(i)==\"(\")\n++c;else if(s.charAt(i)==\")\")\n--c;if(c==0){toIndex=i-1;break;}}\nreturn s.substring(beginIndex,toIndex);}\nOlapQueryViewDisplay.prototype.evalString=function(s){var objDiv=document.createElement(\"div\");objDiv.innerHTML=s;var text=objDiv.innerText;objDiv=null;try{text=eval(text);}catch(ex){text=\"null\";}\nreturn text;}\nOlapQueryViewDisplay.prototype.setSubtotal=function(e){if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var dialogConfig={};dialogConfig.title=\"分类汇总\";dialogConfig.fullName=\"bof.olapquery.olapquery.SubtotalSettingDialog\";dialogConfig.size=dialogFactory.size.LARGE;if(!this.subtotalSetting){this.subtotalSetting=new Object();}\nthis.subtotalSetting.SubtotalInfos=this.subtotalInfos;this.subtotalSetting.cubeId=this.cubeId;dialogFactory.showDialog(dialogConfig,[this.subtotalSetting],this.afterSetSubtotal,this);}\nOlapQueryViewDisplay.prototype.afterSetSubtotal=function(succeed,setting){if(!succeed)\nreturn;if(setting&&setting.length>0){this.subtotalInfos=setting;util.remoteInvoke(\"OlapQueryClientService\",\"clearSubtotalInfos\",[this.clientId]);for(var i=0;i<setting.length;i++){var name=setting[i].name;var dimenion=setting[i].dimenion;var hierarchy=setting[i].hierarchyName;var calculate=setting[i].calculate;var text=setting[i].hierarchyText;var solveOrder=setting[i].solveOrder;var dataType=setting[i].dataType;var formatType=setting[i].formatType;var obj={name:name,hierUniqueName:hierarchy,dimensionName:dimenion,hierText:text,calculateType:calculate,solveOrder:solveOrder,dataType:dataType,formatType:formatType};util.remoteInvoke(\"OlapQueryClientService\",\"addCalculateMembers\",[this.clientId,obj]);}}else{util.remoteInvoke(\"OlapQueryClientService\",\"clearSubtotalInfos\",[this.clientId]);this.subtotalInfos=[];}}\nOlapQueryViewDisplay.prototype.doClearSubTotal=function(hierarchyName){util.remoteInvoke(\"OlapQueryClientService\",\"delCalculateMembersByHierarchyName\",[this.clientId,hierarchyName]);this.synSubTotal();this.refreshData();}\nOlapQueryViewDisplay.prototype.doClearFunction=function(hierarchyName){util.remoteInvoke(\"OlapQueryClientService\",\"removeExtendFunctionByHierarchy\",[this.clientId,hierarchyName]);this.refreshData();}\nOlapQueryViewDisplay.prototype.doAddFunction=function(memberName,memberCaption,hierarchyName,hierarchyCaption,dimension,timeHierarchy,timeMemberName,timeMemberCaption,calculate,fireObj){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"getMemberCaption\",[this.clientId,memberName]);if(ret)\nmemberCaption=ret.result;var obj=new Object();obj.hierarchyName=hierarchyName;obj.hierarchyCaption=hierarchyCaption;obj.dimemsionName=dimension;obj.memberName=memberName;if(calculate==\"Proportion\"){obj.functionName=\"Proportion\";obj.name=memberCaption+\"的占比\";}else if(calculate==\"Rank\"){obj.functionName=\"Rank\";obj.name=memberCaption+\"的排名\";}else if(calculate==\"PrevValue\"){obj.functionName=\"PrevValue\";obj.name=memberCaption+\"的前期值\";obj.timeHierarchyName=timeHierarchy;}else if(calculate==\"ChainCompare\"){obj.functionName=\"ChainCompare\";obj.name=memberCaption+\"的环比(前期比)\";obj.timeHierarchyName=timeHierarchy;}else if(calculate==\"Kibbee\"){obj.functionName=\"Kibbee\";obj.name=memberCaption+\"的基比<br>(\"+timeMemberCaption+\")\";obj.timeMemberName=timeMemberName;}else if(calculate==\"CorrespondingPeriodValue\"){obj.functionName=\"CorrespondingPeriodValue\";obj.name=memberCaption+\"的同期值\";obj.timeHierarchyName=timeHierarchy;obj.timeLevelName=fireObj.timeLevelName;}else if(calculate==\"CorrespondingPeriodCompare\"){obj.functionName=\"CorrespondingPeriodCompare\";obj.name=memberCaption+\"的同期比\";obj.timeHierarchyName=timeHierarchy;obj.timeLevelName=fireObj.timeLevelName;}else if(calculate==\"PrevValueGrowthRate\"){obj.functionName=\"PrevValueGrowthRate\";obj.name=memberCaption+\"的前期增长率\";obj.timeHierarchyName=timeHierarchy;}else if(calculate==\"PeriodValueGrowthRate\"){obj.functionName=\"PeriodValueGrowthRate\";obj.name=memberCaption+\"的同期增长率\";obj.timeHierarchyName=timeHierarchy;obj.timeLevelName=fireObj.timeLevelName;}\nvar info=lang.toJSONString(obj);util.remoteInvoke(\"OlapQueryClientService\",\"addExtendFunction\",[this.clientId,info]);this.refreshData();}\nOlapQueryViewDisplay.prototype.doAddSubTotal=function(hierarchyName,calculate){var setting=this.subtotalInfos;var name=\"\";if(calculate==\"SUM\")\nname=\"_合计\";else if(calculate==\"AVG\")\nname=\"_平均\";else if(calculate==\"MAX\")\nname=\"_最大\";else if(calculate==\"MIN\")\nname=\"_最小\";var obj={name:name,hierUniqueName:hierarchyName,calculateType:calculate};var result=util.remoteInvoke(\"OlapQueryClientService\",\"addCalculateMembers\",[this.clientId,obj]);if(result&&result.succeeded&&result.result){this.synSubTotal();this.refreshData();}else{alert(\"设置失败！存在相同的名称！\");}}\nOlapQueryViewDisplay.prototype.synSubTotal=function(){var ret=util.remoteInvoke(\"OlapQueryClientService\",\"getAllSubtotalInfos\",[this.clientId]);if(ret&&ret.succeeded){this.subtotalInfos=new Array();var result=ret.result;for(var i=0;i<result.length;i++){var subtotalInfo=result[i];var obj={};obj.name=subtotalInfo.name;obj.dimenion=subtotalInfo.dimenionName;obj.hierarchyText=subtotalInfo.hierText;obj.hierarchyName=subtotalInfo.hierUniqueName;obj.calculate=subtotalInfo.calculateType;obj.solveOrder=subtotalInfo.solveOrder;obj.dataType=subtotalInfo.dataType;obj.formatType=subtotalInfo.formatType;this.subtotalInfos.push(obj);}}}\nOlapQueryViewDisplay.prototype.setAutoRefreshStatus=function(autoRefresh){if(!this.clientId)\nreturn;var ret=util.remoteInvoke(\"OlapQueryClientService\",\"setAutoRefresh\",[this.clientId,autoRefresh]);if(ret.succeeded){this.autoRefresh=autoRefresh;}}\nOlapQueryViewDisplay.prototype.addFavorite=function(){if(this.reportId){var node={};node._id=this.reportId;node._alias=this.reportAlias;var dialogConfig={};dialogConfig.title=\"添加到收藏夹\";dialogConfig.fullName=\"freequery.myfavorite.AddMyFavorite\";if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");dialogFactory.showDialog(dialogConfig,[node],null,this);}else{alert(\"请先保存多维分析\");}}\nOlapQueryViewDisplay.prototype.previewMDX=function(){var dialogConfig={};dialogConfig.title=\"查看MDX\";dialogConfig.size=dialogFactory.size.LARGE;dialogConfig.fullName=\"bof.olapquery.olapquery.PreviewMDXDialog\";dialogFactory.showDialog(dialogConfig,[this.clientId],this.emptyFunction,this);}\nOlapQueryViewDisplay.prototype.emptyFunction=function(){}\nOlapQueryViewDisplay.prototype.getResourceId=function(){return this.id;};OlapQueryViewDisplay.prototype.getResourceType=function(){return\"olapQuery\";};OlapQueryViewDisplay.prototype.doOnClickOlapTable=function(cell,event){this.onBeforeClickOlapTable.fire(this);this.currentCell=this.wrapCell(cell);var me=this;MacroService.getInstance().fire(this,\"olapTable\",\"onClick\",[this.currentCell]);this.popupMenu.clear();this.cmds={};MacroService.getInstance().fire(this,\"olapTable\",\"onInitPopupMenu\",[{addMenuItem:function(label,cmd,key,callback){me.popupMenu.createMenuItem(label,cmd,key);me.cmds[cmd]=callback;}},this.currentCell]);this.onClickOlapTable.fire(this.currentCell,this,event);if(this.popupMenu.menuItems.length==0){this.popupMenu.clear();this.onDoCmd.fire();}else if(this.popupMenu.menuItems.length==1){var needJumpMenu=false;var ret=util.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfigs\",[]);if(ret){var systemConfig=ret.result;for(var i in systemConfig){if(systemConfig[i].key==\"SINGLE_JUMP_NEED_MENU\"){needJumpMenu=(systemConfig[i].value==\"true\");break;}}}\nif(!needJumpMenu){this.doCmd(this.popupMenu.menuItems[0].cmd);this.popupMenu.clear();}else{this.popupMenu.popup(event);}}else{this.popupMenu.popup(event);}\nthis.onAfterClickOlapTable.fire(this);}\nOlapQueryViewDisplay.prototype.wrapCell=function(srcCell){var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");var ev=eventutil.getEvent();var tdCell;if(srcCell)\ntdCell=srcCell;else\ntdCell=ev.target;var cellType=(tdCell.bofclass==\"MEMBER\"?\"Member\":\"Data\");if(cellType==\"Data\"){var columnsPosition=lang.parseJSON(tdCell.columnsPosition);var rowsPosition=lang.parseJSON(tdCell.rowsPosition);var groupName=tdCell.getAttribute(\"groupName\");var data={value:new Number(tdCell.getAttribute(\"value\")),td:tdCell,groupName:groupName};}\nif(cellType==\"Member\"){if(tdCell.getAttribute(\"isSubCell\")==\"true\"){var tr=tdCell.parentNode;var tbody=tr.parentNode;var table=tbody.parentNode;tdCell=table.parentNode;}\nif(tdCell.getAttribute(\"resizeContentTd\")==\"true\"){var tr=tdCell.parentNode;var tbody=tr.parentNode;var table=tbody.parentNode;tdCell=table.parentNode;}\nvar member={uniqueName:this.olapTable._unMapObj[tdCell.un].un,caption:this.olapTable._unMapObj[tdCell.un].ca,groupName:tdCell.getAttribute(\"groupName\")};}\nvar cell={cellType:cellType,member:member,data:data};return cell;}\nOlapQueryViewDisplay.prototype.getMemberObj=function(cell,hierName){function getMemberObjFromTd(olapTable,td,hierName){var pathObjs=olapTable.getMemberObjPathFromTd(td);for(var i=0;i<pathObjs.length;i++){var obj=pathObjs[i];var hierarchyName=olapTable._hiMap[obj.hi].n;if(hierarchyName==hierName){obj.uniqueName=obj.un;obj.caption=obj.ca;return obj;}}}\nvar td=cell.data.td;while(td){if(td.getAttribute(\"un\")){var ret=getMemberObjFromTd(this.olapTable,td,hierName);if(ret)\nreturn ret;}\ntd=td.previousSibling;}\ntd=cell.data.td;var unMap=[];var row=cell.data.td.parentNode.parentNode.firstChild;while(row&&row.lastChild.un){unMap.push([]);row=row.nextSibling;}\nvar cellsLength=td.parentNode.cells.length;var cellIndex=td.cellIndex;var lastIndex=cellsLength-cellIndex;var row=cell.data.td.parentNode.parentNode.firstChild;var rowIndex=0;while(row&&row.lastChild.un){var td=row.firstChild;var colIndex=0;while(unMap[rowIndex][colIndex])\ncolIndex++;while(td){for(var i=0;i<td.rowSpan;i++){for(var j=0;j<td.colSpan;j++){unMap[rowIndex+i][colIndex+j]=td;}}\nwhile(unMap[rowIndex][colIndex])\ncolIndex++;td=td.nextSibling;}\nrowIndex++;row=row.nextSibling;}\nfor(var i=unMap.length-1;i>=0;i--){var td=unMap[i][unMap[i].length-lastIndex];if(td.un){var ret=getMemberObjFromTd(this.olapTable,td,hierName);if(ret)\nreturn ret;}}}\nOlapQueryViewDisplay.prototype.doCmd=function(cmd){if(!this.cmds){return;}\nvar callback=this.cmds[cmd];if(!callback){this.onDoCmd.fire(cmd);}else\ncallback(this.currentCell);}\nOlapQueryViewDisplay.prototype.doAfterRefreshData=function(ret){if(ret.succeeded){this.olapTable.refresh(ret.result);}else{modalWindow.showServerError(ret);}\nthis.afterRefreshData();this.afterRefresh.fire();};OlapQueryViewDisplay.prototype.goBackWard=function(){if(this.toolbar.canGoBackWard){this.showMaskDiv(true);var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"goBackward\",[this.clientId],this.doAfterRefreshData,this);}};OlapQueryViewDisplay.prototype.goForWard=function(){if(this.toolbar.canGoForWard){this.showMaskDiv(true);var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"goForward\",[this.clientId],this.doAfterRefreshData,this);}};OlapQueryViewDisplay.prototype.resetForwardBackwardState=function(canGoForward,canGoBackward){this.toolbar.disableForward(!canGoForward);this.toolbar.disableBackward(!canGoBackward);};OlapQueryViewDisplay.prototype.exportChartToImage=function(cbOptions){var charts=this.chartTool.chartList||[];var succeeded=charts.length>0;if(succeeded){var chartObjs=[];this.chartImageData=[];this.chartImageData.cbOptions=cbOptions;for(var i=0;i<charts.length&&succeeded;i++){var svgsData=charts[i].exportCharts(\"JPEG\");if(svgsData){this.setChartImageInfo(svgsData);}else{var key=charts[i].flashId;registry.put(key,charts[i]);charts[i].setQueryObject(this);}}}\nif(!succeeded&&cbOptions&&cbOptions.forceCallback){if(cbOptions.func instanceof Function||typeof cbOptions.func=='function'){var args=cbOptions.args||[];args.push(null);cbOptions.func.apply(cbOptions.thisobj,args);}}};OlapQueryViewDisplay.prototype.setChartImageInfo=function(imageInfo,paramsInfo){var charts=this.chartTool.chartList||[];if(!this.chartImageData||charts.length==0)\nreturn;this.chartImageData.push(lang.toJSONString(imageInfo));registry.remove(imageInfo.chartId);if(this.chartImageData.length==charts.length){var imageDatas=this.chartImageData.concat();var cbOptions=this.chartImageData.cbOptions;this.chartImageData=null;var func=cbOptions?cbOptions.func:null;if(func instanceof Function||typeof func=='function'){var that=cbOptions.thisobj;var args=cbOptions.args.concat()||[];var index=(cbOptions?cbOptions.targetArgIndex:args.length)-0;args[index]=imageDatas.join(\"!@#%&!@#%&\");func.apply(that,args);}}};OlapQueryViewDisplay.prototype.doExportMenuCloseUp=function(exportType){this.toolbar.doExportMenuCloseUp(exportType);};OlapQueryViewDisplay.prototype.prepareExport=function(that,type,options){var oldViewSetting=null\nvar oldViewSettingRet=util.remoteInvokeEx(\"OlapQueryClientService\",\"getViewSetting\",[this.clientId]);if(oldViewSettingRet&&oldViewSettingRet.succeeded){oldViewSetting=oldViewSettingRet.result;}\nvar viewSetting=this.toolbar.getViewSettings();this.changeViewSettings(this,viewSetting);var isTreeMenuExport=this.toolbar&&this.toolbar.exportMenu&&this.toolbar.exportMenu.isFromTree;var ret=util.remoteInvokeEx(\"UserService\",\"getCurrentUserQueryMaxRow\",[]);if(ret&&ret.succeeded){var maxRow=ret.result;var integerMaxVlaue=2147483647;if(maxRow!=integerMaxVlaue){var msg=\"当前用户可查讯最大行数为\"+maxRow\n+\"，是否继续导出？\";var status=modalWindow.open(msg,null,modalWindow.MB_YESNO|modalWindow.MB_ICONQUESTION);if(modalWindow.ID_NO==status){return;}}}\nthis.doExport(that,type,options);};OlapQueryViewDisplay.prototype.setExportFormInputValues=function(that,type,options){var exportType=this.domAgent.getElementByBofid(\"exportType\");var clientId=this.domAgent.getElementByBofid(\"clientId\");var delimiterElem=this.domAgent.getElementByBofid(\"delimiter\");var headerHtmlElem=this.domAgent.getElementByBofid(\"headerHtml\");var tailHtmlElem=this.domAgent.getElementByBofid(\"tailHtml\");var maxRowElem=this.domAgent.getElementByBofid(\"maxRow\");var valueTypeElem=this.domAgent.getElementByBofid(\"valueType\");var modeElem=this.domAgent.getElementByBofid(\"mode\");var pageIdElem=this.domAgent.getElementByBofid(\"pageId\");var contentTypeElem=this.domAgent.getElementByBofid(\"contentType\");var widthArray=this.olapTable.getMemberPathWidthArray();this.doSetClientConfig(this,widthArray);exportType.value=type;clientId.value=this.clientId;headerHtmlElem.value=this.elemReportHeader.innerHTML;tailHtmlElem.value=this.elemReportTail.innerHTML;pageIdElem.value=this.getPageId();if(options&&typeof(options)==\"object\"){maxRowElem.value=options.rowCount;valueTypeElem.value=options.valueType;modeElem.value=options.mode;delimiterElem.value=options.delimiter;contentTypeElem.value=options.contentType;}else if(options)\ndelimiterElem.value=options;};OlapQueryViewDisplay.prototype.doExport=function(that,type,options){var exportForm=this.domAgent.getElementByBofid(\"exportForm\");this.setExportFormInputValues(that,type,options)\nexportForm.submit();this.showCancelMaskDiv(true);};OlapQueryViewDisplay.prototype.changeViewSettings=function(that,settings){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"setViewSetting\",[this.clientId,settings]);};OlapQueryViewDisplay.prototype.refreshClientSetting=function(reportSetting){this.clientSetting=reportSetting;if(reportSetting.paging==1){this.isPaging=true;this.pageCount=reportSetting.startIndex/reportSetting.pageRows+1;this.pageRows=reportSetting.pageRows;this.pagingContronl();}else if(reportSetting.paging==-1){var ret=util.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfig\",[\"OLAP_PAGING\"]);if(ret&&(ret.result==undefined||ret.result.value=='true')){this.isPaging=true;ret=util.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfig\",[\"OLAP_PAGING_ROWS\"]);if(ret&&ret.result){this.pageRows=parseInt(ret.result.value);}else{this.pageRows=1000;}\nthis.pageCount=reportSetting.startIndex/this.pageRows+1;}else{this.isPaging=false;}\nthis.pagingContronl();}else{this.isPaging=false;this.pagingContronl();}\nthis.toolbar.setIsPaging(this.isPaging);};OlapQueryViewDisplay.prototype.showMaskDiv=function(show){if(!this.maskDiv){this.maskDiv=document.createElement(\"div\");this.maskDiv.className=\"Noprint\";this.parent.appendChild(this.maskDiv);this.maskDiv.style.position=\"absolute\";this.maskDiv.style.width=\"300\";this.maskDiv.style.height=\"100\";var offsetp=this.getOffset(this.parent);this.maskDiv.style.left=offsetp.left+(this.parent.offsetWidth-300)/2;this.maskDiv.style.top=offsetp.top+(this.parent.offsetHeight)/2;this.maskDiv.style.zIndex=100;this.maskDiv.style.backgroundColor=\"lightsteelblue\";this.maskDiv.style.filter=\"progid:DXImageTransform.Microsoft.Alpha(opacity=80)\";this.maskDiv_CancelButton=document.createElement(\"SPAN\");this.maskDiv.appendChild(this.maskDiv_CancelButton);this.maskDiv_CancelButton.style.position=\"absolute\";this.maskDiv_CancelButton.style.width=\"100\";this.maskDiv_CancelButton.style.height=\"50\";this.maskDiv_CancelButton.style.left=\"100\";this.maskDiv_CancelButton.style.top=\"45\";this.maskDiv_CancelButton.innerHTML='正在查询中……';}\nif(show){this.maskDiv.style.display=\"block\";this.canceling=false;this.toolbar.setButtonEnable(\"refreshData\",false);this.toolbar.setButtonEnable(\"backwardBtn\",false);this.toolbar.setButtonEnable(\"forwardBtn\",false);}else{this.maskDiv.style.display=\"none\";this.toolbar.setButtonEnable(\"refreshData\",true);this.toolbar.setButtonEnable(\"backwardBtn\",true);this.toolbar.setButtonEnable(\"forwardBtn\",true);}}\nOlapQueryViewDisplay.prototype.getOffset=function(obj){var p=new Object();p.left=0;p.top=0;while(obj){p.left+=obj.offsetLeft-obj.scrollLeft;p.top+=obj.offsetTop-obj.scrollTop;obj=obj.offsetParent;}\nreturn p;}\nOlapQueryViewDisplay.prototype.doClose=function(){if(this.confirmClose()){this.onClose.fire(this);}};OlapQueryViewDisplay.prototype.confirmClose=function(){if(!this.isDirty()){return true;}\nvar msg=\"多维分析已经更改，确实要保存？\";var status=modalWindow.open(msg,null,modalWindow.MB_YESNOCANCEL|modalWindow.MB_ICONQUESTION);if(modalWindow.ID_YES==status){this.saveOlapQuery();return true;}else if(modalWindow.ID_NO==status){return true;}else{return false;}};OlapQueryViewDisplay.prototype.isDirty=function(){if(this.editType!=\"EDIT\"){return false;}\nif(!util.checkFunctionValid(\"BROWSE_ANALYSISREPORT_SAVE\")){return false;}\nif(this.clientId){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"isOlapQueryDirty\",[this.clientId]);if(ret&&ret.succeeded){return ret.result;}}\nreturn false;}\nOlapQueryViewDisplay.prototype.resetDefineDivPosition=function(){;};OlapQueryViewDisplay.prototype.doPrint=function(){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"getClientSetting\",[this.clientId]);var refreshRet=null;var oldSetting=null;if(ret&&ret.succeeded){oldSetting=ret.result;}\ntry{if(oldSetting.paging||oldSetting.showGridButton){var cloneSetting=lang.parseJSON(lang.toJSONString(oldSetting));cloneSetting.paging=0;cloneSetting.showGridButton=false;var ret2=util.remoteInvokeEx(\"OlapQueryClientService\",\"setClientSetting\",[this.clientId,cloneSetting]);}\nrefreshRet=util.remoteInvokeEx(\"OlapQueryClientService\",\"refreshData\",[this.clientId]);if(!refreshRet){return;}\nthis.olapTable.refresh(refreshRet.result);var template=domutils.doGet(\"template/freequery/query/Print.template\");var printWindow=window.open(\"\",\"_blank\");var printDoc=printWindow.document;var cssFiles=[\"querygrid.css\",\"dropdowncontrol.css\",\"dragTable.css\",\"popupmenu.css\",\"base.css\",\"OlapQuery.css\"];this.writeCssFiles(printDoc,cssFiles);printDoc.write(\"<base href='\"+jsloader.baseHref+\"'/>\");var allCharts=this.chartTool.chartList;var chartOptionsList=refreshRet.result.chartOptionsList;if(allCharts&&allCharts.length>0&&chartOptionsList&&chartOptionsList.length){this.writeChartsHtml(printDoc,allCharts,chartOptionsList);}\nvar scrollDiv=this.domAgent.getElementByBofid(\"scrollDiv\");var targetHTML=scrollDiv.innerHTML;var tpl=template.replace('<div id=\"container\" />','<div id=\"container\">'+targetHTML+'<\/div>');printDoc.write(tpl);printDoc.close();}catch(e){}finally{if(oldSetting.paging||oldSetting.showGridButton){var ret3=util.remoteInvokeEx(\"OlapQueryClientService\",\"setClientSetting\",[this.clientId,oldSetting]);this.refreshData();}}};OlapQueryViewDisplay.prototype.writeChartsHtml=function(doc,charts,chartOptionsList){var jsText=domutils.doGet(\"js/freequery/lang/JSLoader.js\"),buf=[];var clen=charts.length,chartDefines=[],printChartOptions=[];for(var i=0;i<clen;i++){chartDefines.push(charts[i].chartDefine);}\nprintChartOptions.push(chartOptionsList);buf.push('<script type=\"text/javascript\">');buf.push(jsText);buf.push('');buf.push('(function(chartDefines, printChartOptions) {');buf.push(' var onloadFn = window.onload, jsloader;');buf.push(' var setChartPaneSize = function(chartPane, chartDefine) {');buf.push('  if (!chartPane || !chartDefine)');buf.push('   return;');buf.push('  var chartDef = chartDefine.chart || {};');buf.push('  var width = chartDef.width, height = chartDef.height;');buf.push('  if (width) {');buf.push('   chartPane.style.width = width + \"px\";');buf.push('  }');buf.push('  if (height) {');buf.push('   chartPane.style.height = height + \"px\";');buf.push('  }');buf.push(' };');buf.push(' window.onload = function() {');buf.push('  jsloader = new JSLoader({');buf.push('   lang : \"'+jsloader.getLang()+'\"');buf.push('  });');buf.push('  var lang = jsloader.resolve(\"freequery.lang.lang\");');buf.push('  var domutils = jsloader.resolve(\"freequery.lang.domutils\");');buf.push('  var ChartViewUtil = jsloader.resolve(\"smartbi.chart.ChartViewUtil\");');buf.push('  var containerElem = document.getElementById(\"container\");');buf.push('  var graphEls = domutils.findElementByBofid(containerElem, \"chartDiv\");');buf.push('  var chartCount = chartDefines.length, defs = [];');buf.push('  graphEls = graphEls ? [].concat(graphEls) : [];');buf.push('  for ( var index = 0, pageCount = graphEls.length; index < pageCount; index++) {');buf.push('   var chartOptions = printChartOptions[index] || [];');buf.push('   var graphEl = graphEls[index];');buf.push('   graphEl.innerHTML = \"\";');buf.push('   for ( var i = 0; i < chartCount; i++) {');buf.push('    (function(chartDefine, options) {');buf.push('     var def = defs[i] = defs[i] || chartDefine;');buf.push('     var opt = lang.parseJSON(options);');buf.push('     var chartType = def.chartType;');buf.push('     var chartPane = document.createElement(\"div\");');buf.push('     var renderer = document.createElement(\"div\");');buf.push('     chartPane.style.position = \"relative\";');buf.push('     setChartPaneSize(chartPane, def);');buf.push('     graphEl.appendChild(chartPane);');buf.push('     chartPane.appendChild(renderer);');buf.push('     var chart = ChartViewUtil.initChartView(chartType,renderer,null,null,{ enabled : false },null,null);');buf.push('     if(opt.chartex && opt.chartex.chartId) {');buf.push('      opt.chartex.chartId = opt.chartex.chartId + index + i;');buf.push('     }');buf.push('     chart.refresh(chartType, opt);');buf.push('    })(chartDefines[i], chartOptions[i]);');buf.push('   }');buf.push('   break; // only one page');buf.push('  }');buf.push('  if (typeof onloadFn === \"function\") {');buf.push('   onloadFn.call(this);');buf.push('  }');buf.push(' };');buf.push('})('+lang.toJSONString(chartDefines)+', '+lang.toJSONString(printChartOptions)+');');buf.push('');buf.push('<\\/script>');doc.write(buf.join('\\n'));};OlapQueryViewDisplay.prototype.writeCssFiles=function(doc,files){var base=jsloader.baseHref;if(doc&&files&&files.length){for(var i=0;i<files.length;i++){var cssStr=domutils.doGet(\"css/\"+files[i]);cssStr=cssStr.replace(/url\\(\\.\\.\\/([^)]+)\\)/g,\"url(\"+base+\"\\./$1)\");doc.write(\"<style>\"+cssStr+\"<\/style>\");}}};OlapQueryViewDisplay.prototype.doSetClientConfig=function(that,widthSettings){var clientConfig={columnWidthSettings:widthSettings}\nvar ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"setClientConfig\",[this.clientId,lang.toJSONString(clientConfig)]);};OlapQueryViewDisplay.prototype.doRebuildParam=function(){this.rebuildParam(this.clientId);};OlapQueryViewDisplay.prototype.doRefreshDefine=function(){this.refreshDefine();};OlapQueryViewDisplay.prototype.doOnFilter=function(){if(this.isPaging){this.directToPage(\"1\");}else{this.refreshData();}};OlapQueryViewDisplay.prototype.doMinFrame=function(){this.resetDefineDivPosition();};OlapQueryViewDisplay.prototype.doChangeMode=function(){if(this.editType==\"DISCOVER\"){this.olapDefineContainer.style.display=\"none\";this.editType=\"VIEW\";this.toolbar.setEditType(this.editType);this.clientSetting.openMode=\"VIEW\";util.remoteInvokeEx(\"OlapQueryClientService\",\"setClientSetting\",[this.clientId,this.clientSetting],this.emptyFunction,this);var mainTableHsplitter=this.domAgent.getElementByBofid(\"mainTableHsplitter\");if(mainTableHsplitter)\nmainTableHsplitter.style.width=\"0px\";if(this.domAgent.getElementByBofid(\"_btnDiscover\"))\nthis.domAgent.getElementByBofid(\"_btnDiscover\").value=\"探索模式(D)\";}else if(this.editType==\"VIEW\"){this.olapDefineContainer.style.display=\"block\";if(this.olapDefinePanel==undefined||this.olapDefinePanel==null){this.initOlapDefine(this.olapDefineContainer);if(this.olapDefinePanel){this.olapDefinePanel.setClientSetting(this.clientSetting);this.olapDefinePanel.processQueryDefine({succeeded:true,result:this.queryDefine});}}\nthis.editType=\"DISCOVER\";this.toolbar.setEditType(this.editType);this.clientSetting.openMode=\"DISCOVER\";util.remoteInvokeEx(\"OlapQueryClientService\",\"setClientSetting\",[this.clientId,this.clientSetting],this.emptyFunction,this);var mainTableHsplitter=this.domAgent.getElementByBofid(\"mainTableHsplitter\");if(mainTableHsplitter)\nmainTableHsplitter.style.width=\"2px\";if(this.domAgent.getElementByBofid(\"_btnDiscover\"))\nthis.domAgent.getElementByBofid(\"_btnDiscover\").value=\"浏览模式(D)\";}}\nOlapQueryViewDisplay.prototype.setQueryViewBackgroundColor=function(){var bgColor=this.clientSetting.tableDefine.backgroundColor;var useSystemDefaultValue=this.clientSetting.tableDefine.useSystemDefaultValue;if(useSystemDefaultValue==\"true\"){var ret=util.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfig\",[\"OLAP_REPORT_BACKGROUND\"]);if(ret&&ret.result)\nbgColor=ret.result.value;else\nbgColor=\"#ffffff\";}\nvar pageTheme=registry.get(\"pageTheme\");if(null!=pageTheme){var grid=pageTheme.grid;if(grid&&grid.queryViewBackgroundColor){bgColor=grid.queryViewBackgroundColor;}}\nif(bgColor){this.domAgent.getElementByBofid(\"scrollTd\").style.backgroundColor=bgColor;}}\nOlapQueryViewDisplay.prototype.showCancelMaskDiv=function(show){if(!this.cancelMaskDiv){this.cancelMaskDiv=document.createElement(\"div\");this.parent.appendChild(this.cancelMaskDiv);this.cancelMaskDiv.style.position=\"absolute\";this.cancelMaskDiv.style.width=\"400\";this.cancelMaskDiv.style.height=\"200\";var offsetp=this.getOffset(this.parent);this.cancelMaskDiv.style.left=offsetp.left+(this.parent.offsetWidth-400)/2;this.cancelMaskDiv.style.top=offsetp.top+(this.parent.offsetHeight-200)/2;this.cancelMaskDiv.style.zIndex=100;this.cancelMaskDiv.style.backgroundColor=\"lightsteelblue\";this.cancelMaskDiv.style.filter=\"progid:DXImageTransform.Microsoft.Alpha(opacity=80)\";var div=document.createElement(\"DIV\");this.cancelMaskDiv.appendChild(div);div.style.width=\"100%\";div.style.height=\"30px\";this.exportProgressBar=new Progress(div);this.cancelMaskDiv_CancelButton=document.createElement(\"button\");this.cancelMaskDiv.appendChild(this.cancelMaskDiv_CancelButton);this.cancelMaskDiv_CancelButton.style.position=\"absolute\";this.cancelMaskDiv_CancelButton.style.width=\"100\";this.cancelMaskDiv_CancelButton.style.height=\"50\";this.cancelMaskDiv_CancelButton.style.left=\"150\";this.cancelMaskDiv_CancelButton.style.top=\"80\";this.cancelMaskDiv_CancelButton.value=\"取消导出\";this.cancelMaskDiv_CancelButton.innerText=\"取消导出\";this.cancelMaskDiv_CancelButton.owner=this;this.cancelMaskDiv_CancelButton.onclick=function(){this.owner.canceling=true;this.owner.cancelExport();this.owner.exportMHT=false;this.owner.printClick=false;clearInterval(this.exportInterval);currentQueryView=null;this.owner.showCancelMaskDiv(false);};}\nif(show){currentQueryView=this;this.exportProgressBar.setProgress(0);this.exportInterval=setInterval(getExportProgress,500);this.cancelMaskDiv.style.display=\"block\";this.canceling=false;}else{this.cancelMaskDiv.style.display=\"none\";}}\nOlapQueryViewDisplay.prototype.cancelExport=function(){util.remoteInvokeEx(\"OlapQueryClientService\",\"interruptExport\",[]);var t=exportForm.action;exportForm.action=\"\";exportForm.submit();exportForm.action=t;}\nvar currentQueryView=null;function getExportProgress(){if(currentQueryView){currentQueryView.getExportProgress();}}\nOlapQueryViewDisplay.prototype.getExportProgress=function(){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"getExportStatus\",[]);if(ret){if(ret.result){var value=parseFloat(ret.result.progress);var msg=ret.result.message;if(msg){this.lastExportMessage=this.lastExportMessage||{};if(this.lastExportMessage.msg==msg){var ext=this.lastExportMessage.ext||\"\";if(ext.length<6)\next+=\".\";else\next=\"\";this.lastExportMessage.ext=ext;}else{this.lastExportMessage.msg=msg;this.lastExportMessage.ext=\"\";}\nmsg+=this.lastExportMessage.ext;}\nthis.exportProgressBar.setProgress(value*100,msg);}else{this.lastExportMessage=null;clearInterval(this.exportInterval);currentQueryView=null;this.showCancelMaskDiv(false);}}}\nOlapQueryViewDisplay.prototype.doExchange=function(){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"exchangeExpressions\",[this.clientId]);if(ret&&ret.succeeded){this.chartTool.doExchange();if(this.isPaging)\nthis.directToPage(\"1\");else\nthis.refreshData();}}\nOlapQueryViewDisplay.prototype.setToolbarChartCount=function(){this.toolbar.setChartCount(this.chartTool.chartList.length);};OlapQueryViewDisplay.prototype.doDrillTo=function(curHier){var hierList=new Array();if(this.queryDefine){if(this.queryDefine.axisList){for(var i=0;i<this.queryDefine.axisList.length;i++){var axisDefine=this.queryDefine.axisList[i];if(axisDefine&&axisDefine.hierarchys){for(var j=0;j<axisDefine.hierarchys.length;j++){var hierDefine=axisDefine.hierarchys[j];hierList[hierDefine.name]=hierDefine.name;}}}}\nif(this.queryDefine.dice){var axisDefine=this.queryDefine.dice;if(axisDefine&&axisDefine.hierarchys){for(var j=0;j<axisDefine.hierarchys.length;j++){var hierDefine=axisDefine.hierarchys[j];hierList[hierDefine.name]=hierDefine.name;}}}}\nif(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var dialogConfig={title:\"选择目标级别\",fullName:\"bof.olapquery.olapquery.drillto.SelectLevelDialog\"};var data=new Array();data[0]=this.clientId;data[1]=this.cubeId;data[2]=curHier;data[3]=hierList;dialogFactory.showDialog(dialogConfig,data,this.doDrillToCallback,this);}\nOlapQueryViewDisplay.prototype.doDrillToCallback=function(flag,oldHier,newHier,level){if(flag){var exp=new Array();exp.push(level+\".ALLMEMBERS\");var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"replaceExpressions\",[this.clientId,oldHier,newHier,exp]);if(ret&&ret.succeeded){if(this.isPaging)\nthis.directToPage(\"1\");else\nthis.refreshData();}}}\nOlapQueryViewDisplay.prototype.doClearAllHiddenSettings=function(){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"clearAllHiddenSettings\",[this.clientId]);if(ret&&ret.succeeded){this.refreshData();}};OlapQueryViewDisplay.prototype.setFrameBorder=function(flag){OlapQueryViewDisplay.superclass.setFrameBorder.call(this,flag);var vsplitter=this.domAgent.getElementByBofid(\"vsplitter\");var mainTableHsplitter=this.domAgent.getElementByBofid(\"mainTableHsplitter\");if(flag){if(vsplitter)\nvsplitter.style.backgroundColor=\"#0E9BFB\";if(mainTableHsplitter)\nmainTableHsplitter.style.width=\"2px\";}else{if(vsplitter)\nvsplitter.style.backgroundColor=\"\";if(mainTableHsplitter)\nmainTableHsplitter.style.width=\"0px\";}};OlapQueryViewDisplay.prototype.setShowShotCut=function(flag){if(flag){if(this.domAgent.getElementByBofid(\"olapViewShotCut\"))\nthis.domAgent.getElementByBofid(\"olapViewShotCut\").style.display=\"\";if(this.domAgent.getElementByBofid(\"olapViewToolbarBg\"))\nthis.domAgent.getElementByBofid(\"olapViewToolbarBg\").style.display=\"none\";}else{if(this.domAgent.getElementByBofid(\"olapViewShotCut\"))\nthis.domAgent.getElementByBofid(\"olapViewShotCut\").style.display=\"none\";if(this.domAgent.getElementByBofid(\"olapViewToolbarBg\"))\nthis.domAgent.getElementByBofid(\"olapViewToolbarBg\").style.display=\"\";}}\nOlapQueryViewDisplay.prototype.setTableRightClickEnable=function(flag){this.olapTable.setRightClickEnable(flag);}\nOlapQueryViewDisplay.prototype.setPortalObject=function(portalObj){this.portalObj=portalObj;};OlapQueryViewDisplay.prototype.getClientId=function(){return this.clientId;}\nOlapQueryViewDisplay.prototype.getPageId=function(){if(this.portalObj)\nreturn this.portalObj.pageId;}\nOlapQueryViewDisplay.prototype.getCellValue=function(row,col){return this.olapTable.getCellValue(row,col);};OlapQueryViewDisplay.prototype.getMemberCatpion=function(memberName){var umMap=this.olapTable._unMapObj;for(var idx=0;idx<umMap.length;idx++){if(umMap[idx].un==memberName)\nreturn umMap[idx].ca;}\nreturn\"\";}\nOlapQueryViewDisplay.prototype.getRowPosition=function(){return this.chartTool.buildRowPosition(this.olapTable);}\nOlapQueryViewDisplay.prototype.getGridFilters=function(){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"getGridFilter\",[this.clientId]);if(ret&&ret.succeeded)\nreturn ret.result;};OlapQueryViewDisplay.prototype.getAllHierarchies=function(){var boxData=new Array();var ret=util.remoteInvoke(\"OlapQueryClientService\",\"getCurrentQueryState\",[this.clientId]);if(ret&&ret.succeeded){var axisList=ret.result.axisList;var boxData=new Array();if(axisList){for(var i=0;i<axisList.length;i++){var hierarchys=axisList[i].hierarchys;for(var j=0;j<hierarchys.length;j++){var caption=hierarchys[j].caption;var hierName=hierarchys[j].name;var obj={name:hierName,alias:caption,type:\"AXIS\"}\nboxData.push(obj);}}}\nvar dice=ret.result.dice;if(dice){for(var j=0;j<dice.hierarchys.length;j++){var caption=dice.hierarchys[j].caption;var hierName=dice.hierarchys[j].name;var obj={name:hierName,alias:caption,type:\"DICE\"}\nboxData.push(obj);}}}\nreturn boxData;};OlapQueryViewDisplay.prototype.getTail=function(){return this.elemReportTail.innerHTML;};OlapQueryViewDisplay.prototype.getHeader=function(){return this.elemReportHeader.innerHTML;};OlapQueryViewDisplay.prototype.getOlapTable=function(){return this.olapTable;};OlapQueryViewDisplay.prototype.initHandlers=function(){var Configuration=jsloader.resolve(\"Configuration\");var configPoint=Configuration.extensionPoints.OlapQueryView;var handlerList=configPoint&&configPoint.handlers;if(!handlerList||!handlerList.length)\nreturn;this.appendHandlers(handlerList);};OlapQueryViewDisplay.prototype.appendHandlers=function(handlerList){if(!handlerList||!handlerList.length)\nreturn;if(!this.handlers)\nthis.handlers=[];var toolbarTr=this.domAgent.getElementByBofid(\"toolbarTable\").rows[0];for(var i=0;i<handlerList.length;i++){var clz=jsloader.resolve(handlerList[i].className);var handler=new clz(this);this.handlers.push(handler);if(\"function\"!=typeof handler.readConfig)\ncontinue;var config=handler.readConfig();var items=config&&config.toolbar&&config.toolbar.items;if(!items)\ncontinue;for(var j=0;j<items.length;j++){var item=items[j];var bofid=item.bofid;var image=item.image;if(!bofid||!image)\ncontinue;if(this.domAgent.getElementByBofid(bofid))\ncontinue;var isSpace=(image==\"img/banner/toolbar_tab_space.gif\");var beforeElem=null;if(item.before){beforeElem=this.domAgent.getElementByBofid(item.before);if(beforeElem&&beforeElem.className.indexOf(\"queryview-toolbar-button\")>-1){}else{beforeElem=null;}}\nvar tdElem=document.createElement(\"td\");if(beforeElem){toolbarTr.insertBefore(tdElem,beforeElem.parentNode);}else{toolbarTr.appendChild(tdElem);}\ntdElem.noWrap=true;var itemElem=null;if(isSpace){itemElem=document.createElement(\"span\");itemElem.style.width=\"2px\";itemElem.style.height=\"12px\";}else{itemElem=document.createElement(\"input\");itemElem.type=\"button\";itemElem.className=\"queryview-toolbar-button\";this.addBtnClickListener(handler,item.command,itemElem);}\ntdElem.appendChild(itemElem);itemElem.style.background=\"#FFFFFF url(\"+image+\") no-repeat left center\";for(var k in item){if(k==\"image\"||k==\"before\")\ncontinue;itemElem.setAttribute(k,item[k]);}\nvar propName=this.getPropNameByBofid(bofid);this[propName]=itemElem;}}};OlapQueryViewDisplay.prototype.addBtnClickListener=function(handler,cmd,btn){if(!btn||!handler||\"function\"!=typeof handler.execute)\nreturn;this.addListener(btn,\"click\",function(){handler.execute(cmd);},this);};OlapQueryViewDisplay.prototype.__setExportFormInputValues=OlapQueryViewDisplay.prototype.setExportFormInputValues;OlapQueryViewDisplay.prototype.setExportFormInputValues=function(that,type,options){var charts=this.chartTool.chartList||[];if(charts&&charts.length>0){if(options&&options.exportChartWay==\"excelChart\"){options.exportType=\"EXCEL2007_XLSM\";type=\"EXCEL2007_XLSM\";}}\nthis.__setExportFormInputValues(that,type,options);};","js/smartbi/chartsetting/ChartSettingWizardWindow.js":"\nvar dialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var CustomEvent=jsloader.resolve('freequery.lang.CustomEvent');var util=jsloader.resolve(\"freequery.common.util\");var ChartViewUtil=jsloader.resolve(\"smartbi.chart.ChartViewUtil\");if(typeof jQuery=='undefined'||!jQuery){jsloader.resolve('thirdparty.jquery.jquery',true);}\nvar ChartSettingWizardWindow=function(options){var defaultOptions={chartDefine:{chartType:\"column\",chartDefine:null},reportType:'oltp',dialogConfig:{title:\"图形设置\",size:[810,530],fullName:\"smartbi.chartsetting.ChartSettingDialog\"}}\nthis.options=jQuery.extend(true,null,defaultOptions,options);if(options.chartDefine&&options.chartDefine.chartType){this.options.chartDefine=options.chartDefine;}\nvar provider=this.options.provider;if(typeof provider==\"undefined\"||provider==null||!provider.getFields){throw(\"没有设置用于创建图形的数据字段\");}\nthis.chartDefine=this.options.chartDefine;this.onClose=new CustomEvent(\"onClose\");this.onSave=new CustomEvent(\"onSave\");}\nChartSettingWizardWindow.prototype.destroy=function(){this.onClose.unsubscribeAll();this.onSave.unsubscribeAll();}\nChartSettingWizardWindow.prototype.show=function(step){var chartDefine=this.options.chartDefine;var chartType=chartDefine.chartType;if(!ChartViewUtil.hasOtherChartPlugIn()){this.showChartDefine(step,{chartTemplatesClassName:\"smartbi.ChartTypeTemplates\",defaultChartType:\"column\"});}else{if(step==0){this.showChartPlugIn(chartType,step);}else{var chartTemplatesClassName=ChartViewUtil.getChartTemplatesClassName(chartType);this.showChartDefine(step,{chartTemplatesClassName:chartTemplatesClassName});}}}\nChartSettingWizardWindow.prototype.showChartDefine=function(step,dialogConfig){var chartDefine=this.options.chartDefine;if(null==chartDefine.chartDefine){var result=util.remoteInvokeEx(\"ChartService\",\"creatDefaultChartDefine\",[chartDefine.chartType]);if(result&&result.succeeded){chartDefine.chartDefine=result.result.chartDefine;}}\nvar data={chartDefine:chartDefine,provider:this.options.provider,dataSettingClass:this.options.dataSettingClass,chartTemplatesClassName:dialogConfig&&dialogConfig.chartTemplatesClassName,defaultChartType:dialogConfig&&dialogConfig.defaultChartType,reportType:this.options.reportType,step:step};dialogFactory.showDialog(this.options.dialogConfig,data,function(data){function isNullOrEmpty(d){if(d==undefined||d==null||d==\"\")\nreturn true;}\nif(isNullOrEmpty(data)||isNullOrEmpty(data.chartDefine)){this.onClose.fire(this);return;}\nthis.chartDefine.chartType=data.chartType;this.chartDefine.chartDefine=data.chartDefine;this.chartDefine.externalDefine=data.externalDefine;this.onSave.fire(this);},this);}\nChartSettingWizardWindow.prototype.showChartPlugIn=function(chartType,step){var dialogConfig={title:\"选择图形控件类别\",size:[400,90],fullName:\"smartbi.chartsetting.ChartPlugInDialog\"};var obj=ChartViewUtil.getAllChartPlugIn();dialogFactory.showDialog(dialogConfig,obj,function(data){if(data){this.showChartDefine(0,data);}else{this.onClose.fire(this);}},this);}","js/smartbi/chart/ChartView.js":"\nvar globalNames=[],len;if(typeof jQuery=='undefined'||!jQuery){globalNames.push('thirdparty.jquery.jquery');}\nif(typeof FusionCharts=='undefined'||!FusionCharts){globalNames.push('thirdparty.fusioncharts.FusionCharts');document._smartbi_getElementById=document.getElementById;document.getElementById=function(id){var f=this._smartbi_getElementById(id);if(!f&&!arguments.callee.caller){f=FusionCharts.items[id];if(f){f=f.ref;}}\nreturn f;}}\nfunction initHighcharts(){globalNames=[];globalNames.push('thirdparty.fusioncharts.FusionCharts_HC','thirdparty.fusioncharts.FusionCharts_HC_Charts','thirdparty.fusioncharts.FusionCharts_HC_PowerCharts','thirdparty.fusioncharts.FusionCharts_HC_Widgets','thirdparty.fusioncharts.fusioncharts_effect','thirdparty.fusioncharts.FusionCharts_HC_AttrGrid');jsloader.resolveMany(globalNames);for(var i=0,len=globalNames.length;i<len;i++){jsloader.resolve(globalNames[i],true);}\nif(typeof Highstock=='undefined'||!Highstock){globalNames=[];globalNames.push('thirdparty.highcharts.highstock','smartbi.map.map');jsloader.resolveMany(globalNames);for(var i=0,len=globalNames.length;i<len;i++){jsloader.resolve(globalNames[i],true);}}}\nif(typeof Class=='undefined'){globalNames.push('freequery.lang.Class');}\nif(typeof AbstractChart=='undefined'){globalNames.push('smartbi.chart.AbstractChart');}\nif(typeof Chart=='undefined'){globalNames.push('smartbi.chart.Chart');}\nif(typeof AbstractChartView=='undefined'){globalNames.push('smartbi.chart.abstract.AbstractChartView');}\nif((len=globalNames.length)>0){jsloader.resolveMany(globalNames);for(var i=0;i<len;i++){jsloader.resolve(globalNames[i],true);}}\nvar domutils=jsloader.resolve(\"freequery.lang.domutils\");var utils=jsloader.resolve('smartbi.chart.options.utils');var util=jsloader.resolve(\"freequery.common.util\");var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");var PreviewChartData=null;var Toolbar=null;var modalWindow=null;var ChartView=AbstractChartView.extend({init:function(viewOptions,chartType,className){this._super(viewOptions,chartType,className);this._private._toolbar=null;if(!PopupMenu){PopupMenu=jsloader.resolve(\"freequery.menu.PopupMenu\");}\nif(document.body){this.popupMenu=new PopupMenu(document.body,this.handler);}},getDefaultViewOptions:function(){var defaultViewOptions={renderOnBrowser:true,chartDefine:null,toolbar:{enabled:true}};return defaultViewOptions;},destroy:function(){var renderTo=this.viewOptions.renderTo;if(typeof renderTo==='string'){renderTo=document.getElementById(renderTo);}\nif(this.doMouseMove){eventutil.removeEventHandler(renderTo,\"mousemove\",this.doMouseMove,this);}\nvar t=this;var chart=t.getChartObject(),highChart=chart&&chart.getChart();var container=highChart&&(highChart.renderTo||highChart.options.containerElement);if(container&&highChart){container.onmousedown=container.onmouseup=container.oncontextmenu=null;}\nif(this._private._toolbar){this._private._toolbar.destroy();this._private._toolbar=null;}\nif(this.previewData){this.previewData.destroy();}\nthis._super();},refresh:function(chartType,chartOptions){this._data=null;chartOptions=this.mergeDefaultValue(chartOptions,chartType,chartType);if(this.viewOptions.toolbar.enabled){this.chartOptions=jQuery.extend(true,null,chartOptions);}else{this.chartOptions=null;}\nthis.setChartRenderer(chartType,chartOptions);if(this.previewData&&this.viewOptions.renderTo.style.display==\"none\"){var data=this.getGridData();this.previewData.refreshGrid({field:chartOptions.chartDatas.fieldList,data:data});this.previewData.chartType=chartType;this.previewData.chartOptions=chartOptions;this.hasRefreshChart=true;}else{if(domutils.isIOS()&&chartOptions.chart.showPanAndZoom){chartOptions.panAndZoom={enableControl:false};}\nthis._super(chartType,chartOptions);}\nvar t=this;setTimeout(function(){t.getChartViewOption(t);},0);},getChartViewOption:function(t){var chart=t.getChartObject(),highChart=chart&&chart.getChart();var container=highChart&&(highChart.renderTo||highChart.options.containerElement);if(container&&highChart){var eventutil=jsloader.resolve('freequery.lang.eventutil');container.onmousedown=function(e){var ev=eventutil.getEvent(),isMiddle=ev&&ev.which===2,options;if(ev&&(ev.button&2)!=0){try{container.setCapture();}catch(e){}\ndomutils.stopEvent(ev);}\nif(isMiddle){var title=\"FusionChart options, Press Shift to Highchart\";if(ev.shiftKey){title=\"Highchart options\";options=highChart.options.dataSource||highChart.options;}else{options=chart.getOptions();}\nvar renderTo=options.chart.renderTo,optstr;try{delete options.chart.renderTo;optstr=lang.toJSONString(options);}catch(e){}finally{options.chart.renderTo=renderTo;}\nif(optstr){if(window.console){console.log(optstr);}\nalert(optstr,title);}}};container.onmouseup=function(e){var ev=eventutil.getEvent();if(ev&&(ev.button&2)!=0){try{container.releaseCapture();}catch(e){}\ndomutils.stopEvent(ev);}};container.oncontextmenu=function(ev){return false;};}},mergeDefaultValue:function(options,newChartType,oldChartType){var t=this,fn=function(chartType){var defaultOptions=t.defaultChartOptions[chartType];if(!defaultOptions){try{defaultOptions=jsloader.resolve('smartbi.chart.options.'+chartType);delete defaultOptions.bofClassName;}catch(e){defaultOptions={};}\nt.defaultChartOptions[chartType]=defaultOptions;}\nreturn defaultOptions;};var defaultOptions=fn.call(this,newChartType);options=utils.processDefaultOptionsOnTypeChanged(defaultOptions,options,newChartType,oldChartType,fn);options._defaultOptionsSetted=true;return options},getGridData:function(){this._super();if(!this._data&&this.clientId){var ret=util.remoteInvoke(\"ChartService\",\"getChartData\",[this.clientId]);if(ret!=null&&ret.succeeded){var data=ret.result;this._data=data;this.dataChanged=true;return data;}}\nreturn this._data;},initChart:function(chartType){this._super(chartType);var chartObj=this.getChartObject(),chartView=this;function getRowData(rowIndex){var r={};chartView.getGridData();if(chartView._data){if(chartView&&chartView.chartOptions&&chartView.chartOptions.chart&&chartView.chartOptions.chart.type&&chartView.chartOptions.chart.type==\"pie\"){var fields=chartView.chartOptions.chartDatas.fieldList;var yIndex=0;for(var i=0;i<fields.length;i++){if(fields[i].axisType==\"yAxis\"){yIndex=i;}}\nvar notNullCount=-1;for(var i=0;i<chartView._data.data.length;i++){var object=chartView._data.data[i][yIndex].value;if(object&&object!=\"null\"){notNullCount++;}\nif(notNullCount==rowIndex){r.row=chartView._data.data[i];break;}}}else{r.row=chartView._data.data[rowIndex];}\nr.fields=chartView._data.fields;r.getCurrentPointValueObj=function(fieldAlias){for(index in r.fields){if(r.fields[index].alias==fieldAlias||r.fields[index].name==fieldAlias){return r.row?r.row[index]:null;break;}}}}\nreturn r;}\nchartObj.on('PointClick',function(type,point,chart,e){if(point&&!point.hasDecoded){for(var prop in point){var temp=point[prop];if(temp&&temp.indexOf&&temp.indexOf(\"base64:\")>=0){point[prop]=util.decb64Unicode(temp.substr(7).replace(\" \",\"+\"),true);}}\npoint.hasDecoded=true;}\nif(!point.rowData){point.rowData=getRowData(point.rowIndex);}\npoint.getCurrentPointValueObj=function(fildAlias){var valueObj=null;if(point.rowData){valueObj=point.rowData.getCurrentPointValueObj(fildAlias);}\nif(null!=valueObj){valueObj.value=valueObj.value+\"\";}\nreturn valueObj;}\npoint.currentYAlias=point.seriesName||(point.series&&point.series.name);point.currentXAlias=point.category;point.getMemberObj=function(memberName){if(point.rowData){var rowData=point.rowData;var datas=rowData.fields[0].alias.split(\"[]\");for(var index=0;index<datas.length;index++){if(datas[index]==memberName){var uniqueName=rowData.row[0].value.split(\"[]\")[index];var caption=rowData.row[0].displayValue.split(\"_\")[index];return{uniqueName:uniqueName,caption:caption};}}\nfor(var i in rowData.fields){var series=rowData.fields[i];var alias=series.alias;if(alias==point.currentYAlias){var seriesIds=series.id.split(\"[]\");for(index=0;index<seriesIds.length;index++){var name=seriesIds[index].split(\".\")[0];if(memberName==name){return{uniqueName:seriesIds[index],caption:alias};}}}}}}\nvar e=eventutil.getEvent();if(!e){e=chartObj.clientEvent||{};}\npoint.getCurrentMapAreaInfo=function(){return{value:point.areaId,displayValue:point.name};}\nif(chartView.getChartId())\nchartView.runMacro(\"pointClick\",point,e);chartView.fire('PointClick',e,point,chartView);});chartObj.on('BeforeRenderer',function(type,chart){chartView.fire('BeforeRenderer',chartView);});chartObj.on('AfterRenderer',function(type,chart){var hasTouch=domutils.isIOS()||domutils.isAndroid()||window.bof_offline_xhr;if(!hasTouch){chartView.initToolbar();}\nchartView.fire('AfterRenderer',chartView);});var renderTo=this.viewOptions.renderTo;if(typeof renderTo==='string'){renderTo=document.getElementById(renderTo);}\nthis.doMouseMove=function(e){chartObj.clientEvent={clientX:e.clientX,clientY:e.clientY};};eventutil.addEventHandler(renderTo,\"mousemove\",this.doMouseMove,this);},showToolbar:function(visiable){if(this._private._toolbar){var toolbar=this._private._toolbar;if(visiable){toolbar.addListener(toolbar.container,\"mousemove\",toolbar.onMouseEnter,toolbar);toolbar.addListener(toolbar.container,isIE?\"mouseleave\":\"mouseout\",toolbar.onMouseLeave,toolbar);}\nelse{toolbar.removeListener(toolbar.container,\"mousemove\",toolbar.onMouseEnter,toolbar);toolbar.removeListener(toolbar.container,isIE?\"mouseleave\":\"mouseout\",toolbar.onMouseLeave,toolbar);}}},initToolbar:function(){if(!modalWindow){modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");}\nif(this._private._toolbar){this._private._toolbar.destroy();this._private._toolbar=null;}\nvar viewOptions=this.viewOptions;if(this.isInPage()){viewOptions=jQuery.extend(true,viewOptions,{toolbar:{buttons:{settingButton:{enabled:false},chartTypeButton:{showMore:false},deleteButton:{enabled:false}}}});}\nvar tbConfig=viewOptions.toolbar||{},tbEvents=tbConfig.events||{};if(!tbConfig.enabled){return;}\nif(!Toolbar){jsloader.resolveMany([\"smartbi.chartsetting.shortcut.Toolbar\",\"smartbi.chartsetting.shortcut.ChartTypeButton\",\"smartbi.chartsetting.shortcut.DropDownButton\",\"smartbi.chartsetting.shortcut.BaseButton\",\"smartbi.ChartTypeTemplates\",\"smartbi.chartsetting.shortcut.PreviewDataButton\"]);Toolbar=jsloader.resolve(\"smartbi.chartsetting.shortcut.Toolbar\");}\nvar chartView=this;var chartObj=chartView.getChartObject();var defPane=eval(chartView.viewOptions.renderTo);var container=defPane.parentNode;var toolbar=new Toolbar(container,chartObj,tbConfig.buttons,chartView);chartView._private._toolbar=toolbar;toolbar.onSetting.subscribe(function(showTypeWindowFirst){var func=tbEvents.onSetting;var flag=func?func.call(chartView,showTypeWindowFirst):true;if(flag!==false){var settingControl=chartView.viewOptions.settingControl;if(settingControl){settingControl.show(showTypeWindowFirst?0:1);}}},chartView);toolbar.onSelectType.subscribe(function(toolbar,template){var oldType=chartObj.chartType,newType=template.type;if(chartView.chartDefine!=null){chartView.chartDefine.chartType=newType;var defObj=lang.parseJSON(chartView.chartDefine.chartDefine);if(oldType!=newType){var hasSeries=false;var fieldList=defObj.chartDatas.fieldList;for(fieldId in fieldList){var field=fieldList[fieldId];if(field.axisType==\"series\"){hasSeries=true;break;}}\nif(hasSeries){if(!(newType=='line'||newType=='column'||newType=='bar'||newType=='area')){var result=modalWindow.open(\"切换到该类型将清空并列轴信息，是否继续？\",\"图形类型\",modalWindow.MB_YES|modalWindow.MB_NO);if(result==modalWindow.ID_NO){return;}else{var fieldLength=fieldList.length;for(var n=0;n<fieldLength;n++){var field=fieldList[n];if(field.axisType==\"series\"){fieldList.splice(n,1);n=n-1;fieldLength=fieldLength-1;}}}}}\ndefObj=chartView.mergeDefaultValue(defObj,newType,oldType);}\njQuery.extend(true,defObj,template.options);defObj.chartTemplate={id:template.id,type:template.type};chartView.chartDefine.chartDefine=lang.toJSONString(defObj);var needRefresh=true;chartView.fire('SettingChanged',needRefresh,chartView);}\nif(tbEvents.onSelectType){tbEvents.onSelectType.call(chartView,template);}},chartView);toolbar.onDelete.subscribe(function(){if(tbEvents.onDelete){tbEvents.onDelete.call(chartView);}\nchartView.fire('Delete',chartView);chartView.destroy();},chartView);toolbar.onPreviewData.subscribe(function(showGrid){var option=chartObj.getOptions();if(showGrid){defPane.style.display=\"none\";if(!PreviewChartData){PreviewChartData=jsloader.resolve(\"smartbi.previewdata.PreviewChartData\");}\nif(!this.previewData){this.previewData=new PreviewChartData(container);}\nvar dataChanged=false;if(!this._data){this.clientId=this.clientId||option.clientId;this.getGridData();dataChanged=true;}else if(this.dataChanged){dataChanged=true;}\nvar data={field:option.chartDatas.airlineFieldList||option.chartDatas.fieldList,data:this._data}\nif(dataChanged){this.previewData.refreshGrid(data);this.dataChanged=false;}\nthis.previewData.show();}else{this.previewData.hidden();defPane.style.display=\"\";if(this.hasRefreshChart){this.refresh(this.previewData.chartType,this.previewData.chartOptions);this.hasRefreshChart=false;}}},chartView);},setOtherOptions:function(options){this.otherOptions=options;},setChartRenderer:function(chartType,options){if(\"map\"==chartType||\"stock\"==chartType||undefined!=options.chart.renderer||\"airlinemap\"==chartType){initHighcharts();return;}\nif(undefined!=options.chart.renderer){if(options.chart.renderer==\"javascript\"){initHighcharts();}\nreturn;}\nvar chartStyle=options.chart&&options.chart.chartStyle;var renderer=\"\";if(chartStyle!=\"HTML5\"&&chartStyle!=\"FLASH\"){chartStyle=util.getSystemConfig(\"CHART_STYLE\");}\nif(chartStyle==\"HTML5\"||domutils.isIOS()||domutils.isAndroid()||window.bof_offline_xhr){renderer=\"javascript\";initHighcharts();}\nif(!options.chart){options.chart={};}\noptions.chart.renderer=renderer;},attachEvents:function(chartType){}});ChartView.prototype.getChartViewOption_ipad=ChartView.prototype.getChartViewOption;ChartView.prototype.getChartViewOption=function(t){var chart=t._private._chartObj,highChart=chart&&chart.getChart();var container=highChart&&(highChart.renderTo||highChart.options.containerElement);if(container&&highChart){var hasTouch=document.documentElement.ontouchstart!==undefined;if(hasTouch){container.ontouchstart=function(e){if(t.chartOptions.chart.type==\"gauge\"&&t.chartOptions.dials.dial&&t.chartOptions.dials.dial.length==1){container.clickkk=true;}}\ncontainer.ontouchmove=function(e){if(t.chartOptions.chart.type==\"gauge\"&&t.chartOptions.dials.dial&&t.chartOptions.dials.dial.length==1){container.clickkk=false;}}\ncontainer.ontouchend=function(e){if(t.chartOptions.chart.type==\"gauge\"&&t.chartOptions.dials.dial&&t.chartOptions.dials.dial.length==1&&container.clickkk===true){var pointJson=t.chartOptions.dials.dial[0];chart.fire('PointClick',pointJson,chart);}}}}\nthis.getChartViewOption_ipad(t);}","js/thirdparty/highcharts/highstock.js":"\n(function(){var UNDEFINED,doc=document,win=window,math=Math,mathRound=math.round,mathFloor=math.floor,mathCeil=math.ceil,mathMax=math.max,mathMin=math.min,mathAbs=math.abs,mathCos=math.cos,mathSin=math.sin,mathPI=math.PI,deg2rad=mathPI*2/360,userAgent=navigator.userAgent,isIE=/msie/i.test(userAgent)&&!win.opera,docMode8=doc.documentMode===8,isWebKit=/AppleWebKit/.test(userAgent),isFirefox=/Firefox/.test(userAgent),SVG_NS='http://www.w3.org/2000/svg',hasSVG=!!doc.createElementNS&&!!doc.createElementNS(SVG_NS,'svg').createSVGRect,hasBidiBug=isFirefox&&parseInt(userAgent.split('Firefox/')[1],10)<4,useCanVG=!hasSVG&&!isIE&&!!doc.createElement('canvas').getContext,Renderer,hasTouch=doc.documentElement.ontouchstart!==UNDEFINED,symbolSizes={},idCounter=0,garbageBin,defaultOptions,dateFormat,globalAnimation,pathAnim,timeUnits,noop=function(){},DIV='div',ABSOLUTE='absolute',RELATIVE='relative',HIDDEN='hidden',PREFIX='highchartsstock-',VISIBLE='visible',PX='px',NONE='none',M='M',L='L',TRACKER_FILL='rgba(192,192,192,'+(hasSVG?0.000001:0.002)+')',NORMAL_STATE='',HOVER_STATE='hover',SELECT_STATE='select',MILLISECOND='millisecond',SECOND='second',MINUTE='minute',HOUR='hour',DAY='day',WEEK='week',MONTH='month',YEAR='year',FILL='fill',LINEAR_GRADIENT='linearGradient',STOPS='stops',STROKE='stroke',STROKE_WIDTH='stroke-width',makeTime,getMinutes,getHours,getDay,getDate,getMonth,getFullYear,setMinutes,setHours,setDate,setMonth,setFullYear,seriesTypes={};win.Highstock={};function extend(a,b){var n;if(!a){a={};}\nfor(n in b){a[n]=b[n];}\nreturn a;}\nfunction hash(){var i=0,args=arguments,length=args.length,obj={};for(;i<length;i++){obj[args[i++]]=args[i];}\nreturn obj;}\nfunction pInt(s,mag){return parseInt(s,mag||10);}\nfunction isString(s){return typeof s==='string';}\nfunction isObject(obj){return typeof obj==='object';}\nfunction isArray(obj){return Object.prototype.toString.call(obj)==='[object Array]';}\nfunction isNumber(n){return typeof n==='number';}\nfunction log2lin(num){return math.log(num)/math.LN10;}\nfunction lin2log(num){return math.pow(10,num);}\nfunction erase(arr,item){var i=arr.length;while(i--){if(arr[i]===item){arr.splice(i,1);break;}}}\nfunction defined(obj){return obj!==UNDEFINED&&obj!==null;}\nfunction attr(elem,prop,value){var key,setAttribute='setAttribute',ret;if(isString(prop)){if(defined(value)){elem[setAttribute](prop,value);}else if(elem&&elem.getAttribute){ret=elem.getAttribute(prop);}}else if(defined(prop)&&isObject(prop)){for(key in prop){elem[setAttribute](key,prop[key]);}}\nreturn ret;}\nfunction splat(obj){return isArray(obj)?obj:[obj];}\nfunction pick(){var args=arguments,i,arg,length=args.length;for(i=0;i<length;i++){arg=args[i];if(typeof arg!=='undefined'&&arg!==null){return arg;}}}\nfunction css(el,styles){if(isIE){if(styles&&styles.opacity!==UNDEFINED){styles.filter='alpha(opacity='+(styles.opacity*100)+')';}}\nextend(el.style,styles);}\nfunction createElement(tag,attribs,styles,parent,nopad){var el=doc.createElement(tag);if(attribs){extend(el,attribs);}\nif(nopad){css(el,{padding:0,border:NONE,margin:0});}\nif(styles){css(el,styles);}\nif(parent){parent.appendChild(el);}\nreturn el;}\nfunction extendClass(parent,members){var object=function(){};object.prototype=new parent();extend(object.prototype,members);return object;}\nfunction getDecimals(number){number=(number||0).toString();return number.indexOf('.')>-1?number.split('.')[1].length:0;}\nfunction numberFormat(number,decimals,decPoint,thousandsSep){var lang=defaultOptions.lang,n=number,c=decimals===-1?getDecimals(number):(isNaN(decimals=mathAbs(decimals))?2:decimals),d=decPoint===undefined?lang.decimalPoint:decPoint,t=thousandsSep===undefined?lang.thousandsSep:thousandsSep,s=n<0?\"-\":\"\",i=String(pInt(n=mathAbs(+n||0).toFixed(c))),j=i.length>3?i.length%3:0;return s+(j?i.substr(0,j)+t:\"\")+i.substr(j).replace(/(\\d{3})(?=\\d)/g,\"$1\"+t)+\n(c?d+mathAbs(n-i).toFixed(c).slice(2):\"\");}\nfunction pad(number,length){return new Array((length||2)+1-String(number).length).join(0)+number;}\nfunction wrap(obj,method,func){var proceed=obj[method];obj[method]=function(){var args=Array.prototype.slice.call(arguments);args.unshift(proceed);return func.apply(this,args);};}\ndateFormat=function(format,timestamp,capitalize){if(!defined(timestamp)||isNaN(timestamp)){return'Invalid date';}\nformat=pick(format,'%Y-%m-%d %H:%M:%S');var date=new Date(timestamp),key,hours=date[getHours](),day=date[getDay](),dayOfMonth=date[getDate](),month=date[getMonth](),fullYear=date[getFullYear](),lang=defaultOptions.lang,langWeekdays=lang.weekdays,replacements={'a':langWeekdays[day].substr(0,3),'A':langWeekdays[day],'d':pad(dayOfMonth),'e':dayOfMonth,'b':lang.shortMonths[month],'B':lang.months[month],'m':pad(month+1),'y':fullYear.toString().substr(2,2),'Y':fullYear,'H':pad(hours),'I':pad((hours%12)||12),'l':(hours%12)||12,'M':pad(date[getMinutes]()),'p':hours<12?'AM':'PM','P':hours<12?'am':'pm','S':pad(date.getSeconds()),'L':pad(mathRound(timestamp%1000),3)};for(key in replacements){format=format.replace('%'+key,replacements[key]);}\nreturn capitalize?format.substr(0,1).toUpperCase()+format.substr(1):format;};function normalizeTickInterval(interval,multiples,magnitude,options){var normalized,i;magnitude=pick(magnitude,1);normalized=interval/magnitude;if(!multiples){multiples=[1,2,2.5,5,10];if(options&&options.allowDecimals===false){if(magnitude===1){multiples=[1,2,5,10];}else if(magnitude<=0.1){multiples=[1/magnitude];}}}\nfor(i=0;i<multiples.length;i++){interval=multiples[i];if(normalized<=(multiples[i]+(multiples[i+1]||multiples[i]))/2){break;}}\ninterval*=magnitude;return interval;}\nfunction normalizeTimeTickInterval(tickInterval,unitsOption){var units=unitsOption||[[MILLISECOND,[1,2,5,10,20,25,50,100,200,500]],[SECOND,[1,2,5,10,15,30]],[MINUTE,[1,2,5,10,15,30]],[HOUR,[1,2,3,4,6,8,12]],[DAY,[1,2]],[WEEK,[1,2]],[MONTH,[1,2,3,4,6]],[YEAR,null]],unit=units[units.length-1],interval=timeUnits[unit[0]],multiples=unit[1],count,i;for(i=0;i<units.length;i++){unit=units[i];interval=timeUnits[unit[0]];multiples=unit[1];if(units[i+1]){var lessThan=(interval*multiples[multiples.length-1]+\ntimeUnits[units[i+1][0]])/2;if(tickInterval<=lessThan){break;}}}\nif(interval===timeUnits[YEAR]&&tickInterval<5*interval){multiples=[1,2,5];}\nif(interval===timeUnits[YEAR]&&tickInterval<5*interval){multiples=[1,2,5];}\ncount=normalizeTickInterval(tickInterval/interval,multiples);return{unitRange:interval,count:count,unitName:unit[0]};}\nfunction getTimeTicks(normalizedInterval,min,max,startOfWeek){var tickPositions=[],i,higherRanks={},useUTC=defaultOptions.global.useUTC,minYear,minDate=new Date(min),interval=normalizedInterval.unitRange,count=normalizedInterval.count;if(interval>=timeUnits[SECOND]){minDate.setMilliseconds(0);minDate.setSeconds(interval>=timeUnits[MINUTE]?0:count*mathFloor(minDate.getSeconds()/count));}\nif(interval>=timeUnits[MINUTE]){minDate[setMinutes](interval>=timeUnits[HOUR]?0:count*mathFloor(minDate[getMinutes]()/count));}\nif(interval>=timeUnits[HOUR]){minDate[setHours](interval>=timeUnits[DAY]?0:count*mathFloor(minDate[getHours]()/count));}\nif(interval>=timeUnits[DAY]){minDate[setDate](interval>=timeUnits[MONTH]?1:count*mathFloor(minDate[getDate]()/count));}\nif(interval>=timeUnits[MONTH]){minDate[setMonth](interval>=timeUnits[YEAR]?0:count*mathFloor(minDate[getMonth]()/count));minYear=minDate[getFullYear]();}\nif(interval>=timeUnits[YEAR]){minYear-=minYear%count;minDate[setFullYear](minYear);}\nif(interval===timeUnits[WEEK]){minDate[setDate](minDate[getDate]()-minDate[getDay]()+\npick(startOfWeek,1));}\ni=1;minYear=minDate[getFullYear]();var time=minDate.getTime(),minMonth=minDate[getMonth](),minDateDate=minDate[getDate](),timezoneOffset=useUTC?0:(24*3600*1000+minDate.getTimezoneOffset()*60*1000)%(24*3600*1000);while(time<max){tickPositions.push(time);if(interval===timeUnits[YEAR]){time=makeTime(minYear+i*count,0);}else if(interval===timeUnits[MONTH]){time=makeTime(minYear,minMonth+i*count);}else if(!useUTC&&(interval===timeUnits[DAY]||interval===timeUnits[WEEK])){time=makeTime(minYear,minMonth,minDateDate+\ni*count*(interval===timeUnits[DAY]?1:7));}else{time+=interval*count;if(interval<=timeUnits[HOUR]&&time%timeUnits[DAY]===timezoneOffset){higherRanks[time]=DAY;}}\ni++;}\ntickPositions.push(time);tickPositions.info=extend(normalizedInterval,{higherRanks:higherRanks,totalRange:interval*count});return tickPositions;}\nfunction ChartCounters(){this.color=0;this.symbol=0;}\nChartCounters.prototype={wrapColor:function(length){if(this.color>=length){this.color=0;}},wrapSymbol:function(length){if(this.symbol>=length){this.symbol=0;}}};function stableSort(arr,sortFunction){var length=arr.length,sortValue,i;for(i=0;i<length;i++){arr[i].ss_i=i;}\narr.sort(function(a,b){sortValue=sortFunction(a,b);return sortValue===0?a.ss_i-b.ss_i:sortValue;});for(i=0;i<length;i++){delete arr[i].ss_i;}}\nfunction arrayMin(data){var i=data.length,min=data[0];while(i--){if(data[i]<min){min=data[i];}}\nreturn min;}\nfunction arrayMax(data){var i=data.length,max=data[0];while(i--){if(data[i]>max){max=data[i];}}\nreturn max;}\nfunction destroyObjectProperties(obj,except){var n;for(n in obj){if(obj[n]&&obj[n]!==except&&obj[n].destroy){obj[n].destroy();}\ndelete obj[n];}}\nfunction discardElement(element){if(!garbageBin){garbageBin=createElement(DIV);}\nif(element){garbageBin.appendChild(element);}\ngarbageBin.innerHTML='';}\nfunction error(code,stop){var msg='Highstock error #'+code+': www.Highstock.com/errors/'+code;if(stop){throw msg;}else if(win.console){console.log(msg);}}\nfunction correctFloat(num){return parseFloat(num.toPrecision(14));}\nfunction setAnimation(animation,chart){globalAnimation=pick(animation,chart.animation);}\ntimeUnits=hash(MILLISECOND,1,SECOND,1000,MINUTE,60000,HOUR,3600000,DAY,24*3600000,WEEK,7*24*3600000,MONTH,30*24*3600000,YEAR,31556952000);pathAnim={init:function(elem,fromD,toD){fromD=fromD||'';var shift=elem.shift,bezier=fromD.indexOf('C')>-1,numParams=bezier?7:3,endLength,slice,i,start=fromD.split(' '),end=[].concat(toD),startBaseLine,endBaseLine,sixify=function(arr){i=arr.length;while(i--){if(arr[i]===M){arr.splice(i+1,0,arr[i+1],arr[i+2],arr[i+1],arr[i+2]);}}};if(bezier){sixify(start);sixify(end);}\nif(elem.isArea){startBaseLine=start.splice(start.length-6,6);endBaseLine=end.splice(end.length-6,6);}\nif(shift<=end.length/numParams){while(shift--){end=[].concat(end).splice(0,numParams).concat(end);}}\nelem.shift=0;if(start.length){endLength=end.length;while(start.length<endLength){slice=[].concat(start).splice(start.length-numParams,numParams);if(bezier){slice[numParams-6]=slice[numParams-2];slice[numParams-5]=slice[numParams-1];}\nstart=start.concat(slice);}}\nif(startBaseLine){start=start.concat(startBaseLine);end=end.concat(endBaseLine);}\nreturn[start,end];},step:function(start,end,pos,complete){var ret=[],i=start.length,startVal;if(pos===1){ret=complete;}else if(i===end.length&&pos<1){while(i--){startVal=parseFloat(start[i]);ret[i]=isNaN(startVal)?start[i]:pos*(parseFloat(end[i]-startVal))+startVal;}}else{ret=end;}\nreturn ret;}};(function($){win.HighstockAdapter=win.HighstockAdapter||($&&{init:function(pathAnim){var Fx=$.fx,Step=Fx.step,dSetter,Tween=$.Tween,propHooks=Tween&&Tween.propHooks;$.extend($.easing,{easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;}});$.each(['cur','_default','width','height'],function(i,fn){var obj=Step,base,elem;if(fn==='cur'){obj=Fx.prototype;}else if(fn==='_default'&&Tween){obj=propHooks[fn];fn='set';}\nbase=obj[fn];if(base){obj[fn]=function(fx){fx=i?fx:this;elem=fx.elem;return elem.attr?elem.attr(fx.prop,fn==='cur'?UNDEFINED:fx.now):base.apply(this,arguments);};}});dSetter=function(fx){var elem=fx.elem,ends;if(!fx.started){ends=pathAnim.init(elem,elem.d,elem.toD);fx.start=ends[0];fx.end=ends[1];fx.started=true;}\nelem.attr('d',pathAnim.step(fx.start,fx.end,fx.pos,elem.toD));};if(Tween){propHooks.d={set:dSetter};}else{Step.d=dSetter;}},getScript:$.getScript,inArray:$.inArray,adapterRun:function(elem,method){return $(elem)[method]();},each:function(arr,fn){var i=0,len=arr.length;for(;i<len;i++){if(fn.call(arr[i],arr[i],i,arr)===false){return i;}}},grep:$.grep,map:function(arr,fn){var results=[],i=0,len=arr.length;for(;i<len;i++){results[i]=fn.call(arr[i],arr[i],i,arr);}\nreturn results;},merge:function(){var args=arguments;return $.extend(true,null,args[0],args[1],args[2],args[3]);},offset:function(el){return $(el).offset();},addEvent:function(el,event,fn){$(el).bind(event,fn);},removeEvent:function(el,eventType,handler){var func=doc.removeEventListener?'removeEventListener':'detachEvent';if(doc[func]&&!el[func]){el[func]=function(){};}\n$(el).unbind(eventType,handler);},fireEvent:function(el,type,eventArguments,defaultFunction){var event=$.Event(type),detachedType='detached'+type,defaultPrevented;if(!isIE&&eventArguments){delete eventArguments.layerX;delete eventArguments.layerY;}\nextend(event,eventArguments);if(el[type]){el[detachedType]=el[type];el[type]=null;}\n$.each(['preventDefault','stopPropagation'],function(i,fn){var base=event[fn];event[fn]=function(){try{base.call(event);}catch(e){if(fn==='preventDefault'){defaultPrevented=true;}}};});$(el).trigger(event);if(el[detachedType]){el[type]=el[detachedType];el[detachedType]=null;}\nif(defaultFunction&&!event.isDefaultPrevented()&&!defaultPrevented){defaultFunction(event);}},washMouseEvent:function(e){var ret=e.originalEvent||e;ret.pageX=e.pageX;ret.pageY=e.pageY;return ret;},animate:function(el,params,options){var $el=$(el);if(params.d){el.toD=params.d;params.d=1;}\n$el.stop();$el.animate(params,options);},stop:function(el){$(el).stop();}});}(win.jQuery));var globalAdapter=win.HighstockAdapter,adapter=globalAdapter||{},adapterRun=adapter.adapterRun,getScript=adapter.getScript,inArray=adapter.inArray,each=adapter.each,grep=adapter.grep,offset=adapter.offset,map=adapter.map,merge=adapter.merge,addEvent=adapter.addEvent,removeEvent=adapter.removeEvent,fireEvent=adapter.fireEvent,washMouseEvent=adapter.washMouseEvent,animate=adapter.animate,stop=adapter.stop;if(globalAdapter&&globalAdapter.init){globalAdapter.init(pathAnim);}\nvar\ndefaultLabelOptions={enabled:true,align:'center',x:0,y:15,style:{color:'#666',fontSize:'11px',lineHeight:'14px'}};defaultOptions={colors:['#4572A7','#AA4643','#89A54E','#80699B','#3D96AE','#DB843D','#92A8CD','#A47D7C','#B5CA92'],symbols:['circle','diamond','square','triangle','triangle-down'],lang:{loading:'Loading...',months:['January','February','March','April','May','June','July','August','September','October','November','December'],shortMonths:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],weekdays:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],decimalPoint:'.',numericSymbols:['k','M','G','T','P','E'],resetZoom:'Reset zoom',resetZoomTitle:'Reset zoom level 1:1',thousandsSep:','},global:{useUTC:true,canvasToolsURL:'http://code.Highstock.com/stock/1.2.0/modules/canvas-tools.js',VMLRadialGradientURL:'http://code.Highstock.com/stock/1.2.0/gfx/vml-radial-gradient.png'},chart:{borderColor:'#4572A7',borderRadius:5,defaultSeriesType:'line',ignoreHiddenSeries:true,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'\"Lucida Grande\", \"Lucida Sans Unicode\", Verdana, Arial, Helvetica, sans-serif',fontSize:'12px'},backgroundColor:'#FFFFFF',plotBorderColor:'#C0C0C0',resetZoomButton:{theme:{zIndex:20},position:{align:'right',x:-10,y:10}}},title:{text:'Chart title',align:'center',y:15,style:{color:'#3E576F',fontSize:'16px'}},subtitle:{text:'',align:'center',y:30,style:{color:'#6D869F'}},plotOptions:{line:{allowPointSelect:false,showCheckbox:false,animation:{duration:1000},connectPoints:true,pointsPerPosition:1,events:{},lineWidth:2,shadow:true,marker:{enabled:true,lineWidth:0,radius:4,lineColor:'#FFFFFF',states:{hover:{enabled:true},select:{fillColor:'#FFFFFF',lineColor:'#000000',lineWidth:2}}},point:{events:{}},dataLabels:merge(defaultLabelOptions,{enabled:false,y:-6,formatter:function(){return this.y;}}),cropThreshold:300,pointRange:0,showInLegend:true,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:true}},labels:{style:{position:ABSOLUTE,color:'#3E576F'}},legend:{enabled:true,align:'center',layout:'horizontal',labelFormatter:function(){return this.name;},borderWidth:1,borderColor:'#909090',borderRadius:5,navigation:{activeColor:'#3E576F',inactiveColor:'#CCC'},shadow:false,itemStyle:{cursor:'pointer',color:'#3E576F',fontSize:'12px'},itemHoverStyle:{color:'#000'},itemHiddenStyle:{color:'#CCC'},itemCheckboxStyle:{position:ABSOLUTE,width:'13px',height:'13px'},symbolWidth:16,symbolPadding:5,verticalAlign:'bottom',x:0,y:0},loading:{labelStyle:{fontWeight:'bold',position:RELATIVE,top:'1em'},style:{position:ABSOLUTE,backgroundColor:'white',opacity:0.5,textAlign:'center'}},tooltip:{enabled:true,backgroundColor:'rgba(255, 255, 255, .85)',borderWidth:2,borderRadius:5,dateTimeLabelFormats:{millisecond:'%A, %b %e, %H:%M:%S.%L',second:'%A, %b %e, %H:%M:%S',minute:'%A, %b %e, %H:%M',hour:'%A, %b %e, %H:%M',day:'%A, %b %e, %Y',week:'Week from %A, %b %e, %Y',month:'%B %Y',year:'%Y'},headerFormat:'<span style=\"font-size: 10px\">{point.key}<\/span><br/>',pointFormat:'<span style=\"color:{series.color}\">{series.name}<\/span>: <b>{point.y}<\/b><br/>',shadow:true,shared:useCanVG,snap:hasTouch?25:10,style:{color:'#333333',fontSize:'12px',padding:'5px',whiteSpace:'nowrap'}},credits:{enabled:false,text:'Highstock.com',href:'http://www.Highstock.com',position:{align:'right',x:-10,verticalAlign:'bottom',y:-5},style:{cursor:'pointer',color:'#909090',fontSize:'10px'}}};var defaultPlotOptions=defaultOptions.plotOptions,defaultSeriesOptions=defaultPlotOptions.line;setTimeMethods();function setTimeMethods(){var useUTC=defaultOptions.global.useUTC,GET=useUTC?'getUTC':'get',SET=useUTC?'setUTC':'set';makeTime=useUTC?Date.UTC:function(year,month,date,hours,minutes,seconds){return new Date(year,month,pick(date,1),pick(hours,0),pick(minutes,0),pick(seconds,0)).getTime();};getMinutes=GET+'Minutes';getHours=GET+'Hours';getDay=GET+'Day';getDate=GET+'Date';getMonth=GET+'Month';getFullYear=GET+'FullYear';setMinutes=SET+'Minutes';setHours=SET+'Hours';setDate=SET+'Date';setMonth=SET+'Month';setFullYear=SET+'FullYear';}\nfunction setOptions(options){defaultOptions=merge(defaultOptions,options);setTimeMethods();return defaultOptions;}\nfunction getOptions(){return defaultOptions;}\nvar Color=function(input){var rgba=[],result;function init(input){result=/rgba\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]?(?:\\.[0-9]+)?)\\s*\\)/.exec(input);if(result){rgba=[pInt(result[1]),pInt(result[2]),pInt(result[3]),parseFloat(result[4],10)];}else{result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(input);if(result){rgba=[pInt(result[1],16),pInt(result[2],16),pInt(result[3],16),1];}}}\nfunction get(format){var ret;if(rgba&&!isNaN(rgba[0])){if(format==='rgb'){ret='rgb('+rgba[0]+','+rgba[1]+','+rgba[2]+')';}else if(format==='a'){ret=rgba[3];}else{ret='rgba('+rgba.join(',')+')';}}else{ret=input;}\nreturn ret;}\nfunction brighten(alpha){if(isNumber(alpha)&&alpha!==0){var i;for(i=0;i<3;i++){rgba[i]+=pInt(alpha*255);if(rgba[i]<0){rgba[i]=0;}\nif(rgba[i]>255){rgba[i]=255;}}}\nreturn this;}\nfunction setOpacity(alpha){rgba[3]=alpha;return this;}\ninit(input);return{get:get,brighten:brighten,setOpacity:setOpacity};};function SVGElement(){}\nSVGElement.prototype={init:function(renderer,nodeName){var wrapper=this;wrapper.element=nodeName==='span'?createElement(nodeName):doc.createElementNS(SVG_NS,nodeName);wrapper.renderer=renderer;wrapper.attrSetters={};},animate:function(params,options,complete){var animOptions=pick(options,globalAnimation,true);stop(this);if(animOptions){animOptions=merge(animOptions);if(complete){animOptions.complete=complete;}\nanimate(this,params,animOptions);}else{this.attr(params);if(complete){complete();}}},attr:function(hash,val){var wrapper=this,key,value,result,i,child,element=wrapper.element,nodeName=element.nodeName,renderer=wrapper.renderer,skipAttr,titleNode,attrSetters=wrapper.attrSetters,shadows=wrapper.shadows,hasSetSymbolSize,doTransform,ret=wrapper;if(isString(hash)&&defined(val)){key=hash;hash={};hash[key]=val;}\nif(isString(hash)){key=hash;if(nodeName==='circle'){key={x:'cx',y:'cy'}[key]||key;}else if(key==='strokeWidth'){key='stroke-width';}\nret=attr(element,key)||wrapper[key]||0;if(key!=='d'&&key!=='visibility'){ret=parseFloat(ret);}}else{for(key in hash){skipAttr=false;value=hash[key];result=attrSetters[key]&&attrSetters[key].call(wrapper,value,key);if(result!==false){if(result!==UNDEFINED){value=result;}\nif(key==='d'){if(value&&value.join){value=value.join(' ');}\nif(/(NaN| {2}|^$)/.test(value)){value='M 0 0';}}else if(key==='x'&&nodeName==='text'){for(i=0;i<element.childNodes.length;i++){child=element.childNodes[i];if(attr(child,'x')===attr(element,'x')){attr(child,'x',value);}}\nif(wrapper.rotation){attr(element,'transform','rotate('+wrapper.rotation+' '+value+' '+\npInt(hash.y||attr(element,'y'))+')');}}else if(key==='fill'){value=renderer.color(value,element,key);}else if(nodeName==='circle'&&(key==='x'||key==='y')){key={x:'cx',y:'cy'}[key]||key;}else if(nodeName==='rect'&&key==='r'){attr(element,{rx:value,ry:value});skipAttr=true;}else if(key==='translateX'||key==='translateY'||key==='rotation'||key==='verticalAlign'){doTransform=true;skipAttr=true;}else if(key==='stroke'){value=renderer.color(value,element,key);}else if(key==='dashstyle'){key='stroke-dasharray';value=value&&value.toLowerCase();if(value==='solid'){value=NONE;}else if(value){value=value.replace('shortdashdotdot','3,1,1,1,1,1,').replace('shortdashdot','3,1,1,1').replace('shortdot','1,1,').replace('shortdash','3,1,').replace('longdash','8,3,').replace(/dot/g,'1,3,').replace('dash','4,3,').replace(/,$/,'').split(',');i=value.length;while(i--){value[i]=pInt(value[i])*hash['stroke-width'];}\nvalue=value.join(',');}}else if(key==='isTracker'){wrapper[key]=value;}else if(key==='width'){value=pInt(value);}else if(key==='align'){key='text-anchor';value={left:'start',center:'middle',right:'end'}[value];}else if(key==='title'){titleNode=element.getElementsByTagName('title')[0];if(!titleNode){titleNode=doc.createElementNS(SVG_NS,'title');element.appendChild(titleNode);}\ntitleNode.textContent=value;}\nif(key==='strokeWidth'){key='stroke-width';}\nif(isWebKit&&key==='stroke-width'&&value===0){value=0.000001;}\nif(wrapper.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(key)){if(!hasSetSymbolSize){wrapper.symbolAttr(hash);hasSetSymbolSize=true;}\nskipAttr=true;}\nif(shadows&&/^(width|height|visibility|x|y|d|transform)$/.test(key)){i=shadows.length;while(i--){attr(shadows[i],key,key==='height'?mathMax(value-(shadows[i].cutHeight||0),0):value);}}\nif((key==='width'||key==='height')&&nodeName==='rect'&&value<0){value=0;}\nwrapper[key]=value;if(doTransform){wrapper.updateTransform();}\nif(key==='text'){wrapper.textStr=value;if(wrapper.added){renderer.buildText(wrapper);}}else if(!skipAttr){attr(element,key,value);}}}}\nreturn ret;},symbolAttr:function(hash){var wrapper=this;each(['x','y','r','start','end','width','height','innerR','anchorX','anchorY'],function(key){wrapper[key]=pick(hash[key],wrapper[key]);});wrapper.attr({d:wrapper.renderer.symbols[wrapper.symbolName](wrapper.x,wrapper.y,wrapper.width,wrapper.height,wrapper)});},clip:function(clipRect){return this.attr('clip-path',clipRect?'url('+this.renderer.url+'#'+clipRect.id+')':NONE);},crisp:function(strokeWidth,x,y,width,height){var wrapper=this,key,attribs={},values={},normalizer;strokeWidth=strokeWidth||wrapper.strokeWidth||(wrapper.attr&&wrapper.attr('stroke-width'))||0;normalizer=mathRound(strokeWidth)%2/2;values.x=mathFloor(x||wrapper.x||0)+normalizer;values.y=mathFloor(y||wrapper.y||0)+normalizer;values.width=mathFloor((width||wrapper.width||0)-2*normalizer);values.height=mathFloor((height||wrapper.height||0)-2*normalizer);values.strokeWidth=strokeWidth;for(key in values){if(wrapper[key]!==values[key]){wrapper[key]=attribs[key]=values[key];}}\nreturn attribs;},css:function(styles){var elemWrapper=this,elem=elemWrapper.element,textWidth=styles&&styles.width&&elem.nodeName==='text',n,serializedCss='',hyphenate=function(a,b){return'-'+b.toLowerCase();};if(styles&&styles.color){styles.fill=styles.color;}\nstyles=extend(elemWrapper.styles,styles);elemWrapper.styles=styles;if(isIE&&!hasSVG){if(textWidth){delete styles.width;}\ncss(elemWrapper.element,styles);}else{for(n in styles){serializedCss+=n.replace(/([A-Z])/g,hyphenate)+':'+styles[n]+';';}\nelemWrapper.attr({style:serializedCss});}\nif(textWidth&&elemWrapper.added){elemWrapper.renderer.buildText(elemWrapper);}\nreturn elemWrapper;},on:function(eventType,handler){var fn=handler;if(hasTouch&&eventType==='click'){eventType='touchstart';fn=function(e){e.preventDefault();handler();};}\nthis.element['on'+eventType]=fn;return this;},setRadialReference:function(coordinates){this.element.radialReference=coordinates;return this;},translate:function(x,y){return this.attr({translateX:x,translateY:y});},invert:function(){var wrapper=this;wrapper.inverted=true;wrapper.updateTransform();return wrapper;},htmlCss:function(styles){var wrapper=this,element=wrapper.element,textWidth=styles&&element.tagName==='SPAN'&&styles.width;if(textWidth){delete styles.width;wrapper.textWidth=textWidth;wrapper.updateTransform();}\nwrapper.styles=extend(wrapper.styles,styles);css(wrapper.element,styles);return wrapper;},htmlGetBBox:function(refresh){var wrapper=this,element=wrapper.element,bBox=wrapper.bBox;if(!bBox||refresh){if(element.nodeName==='text'){element.style.position=ABSOLUTE;}\nbBox=wrapper.bBox={x:element.offsetLeft,y:element.offsetTop,width:element.offsetWidth,height:element.offsetHeight};}\nreturn bBox;},htmlUpdateTransform:function(){if(!this.added){this.alignOnAdd=true;return;}\nvar wrapper=this,renderer=wrapper.renderer,elem=wrapper.element,translateX=wrapper.translateX||0,translateY=wrapper.translateY||0,x=wrapper.x||0,y=wrapper.y||0,align=wrapper.textAlign||'left',alignCorrection={left:0,center:0.5,right:1}[align],nonLeft=align&&align!=='left',shadows=wrapper.shadows;if(translateX||translateY){css(elem,{marginLeft:translateX,marginTop:translateY});if(shadows){each(shadows,function(shadow){css(shadow,{marginLeft:translateX+1,marginTop:translateY+1});});}}\nif(wrapper.inverted){each(elem.childNodes,function(child){renderer.invertChild(child,elem);});}\nif(elem.tagName==='SPAN'){var width,height,rotation=wrapper.rotation,baseline,radians=0,costheta=1,sintheta=0,quad,textWidth=pInt(wrapper.textWidth),xCorr=wrapper.xCorr||0,yCorr=wrapper.yCorr||0,currentTextTransform=[rotation,align,elem.innerHTML,wrapper.textWidth].join(',');if(currentTextTransform!==wrapper.cTT){if(defined(rotation)){radians=rotation*deg2rad;costheta=mathCos(radians);sintheta=mathSin(radians);css(elem,{filter:rotation?['progid:DXImageTransform.Microsoft.Matrix(M11=',costheta,', M12=',-sintheta,', M21=',sintheta,', M22=',costheta,', sizingMethod=\\'auto expand\\')'].join(''):NONE});}\nwidth=pick(wrapper.elemWidth,elem.offsetWidth);height=pick(wrapper.elemHeight,elem.offsetHeight);if(width>textWidth&&/[ \\-]/.test(elem.innerText)){css(elem,{width:textWidth+PX,display:'block',whiteSpace:'normal'});width=textWidth;}\nbaseline=renderer.fontMetrics(elem.style.fontSize).b;xCorr=costheta<0&&-width;yCorr=sintheta<0&&-height;quad=costheta*sintheta<0;xCorr+=sintheta*baseline*(quad?1-alignCorrection:alignCorrection);yCorr-=costheta*baseline*(rotation?(quad?alignCorrection:1-alignCorrection):1);if(nonLeft){xCorr-=width*alignCorrection*(costheta<0?-1:1);if(rotation){yCorr-=height*alignCorrection*(sintheta<0?-1:1);}\ncss(elem,{textAlign:align});}\nwrapper.xCorr=xCorr;wrapper.yCorr=yCorr;}\ncss(elem,{left:(x+xCorr)+PX,top:(y+yCorr)+PX});wrapper.cTT=currentTextTransform;}},updateTransform:function(){var wrapper=this,translateX=wrapper.translateX||0,translateY=wrapper.translateY||0,inverted=wrapper.inverted,rotation=wrapper.rotation,transform=[];if(inverted){translateX+=wrapper.attr('width');translateY+=wrapper.attr('height');}\nif(translateX||translateY){transform.push('translate('+translateX+','+translateY+')');}\nif(inverted){transform.push('rotate(90) scale(-1,1)');}else if(rotation){transform.push('rotate('+rotation+' '+(wrapper.x||0)+' '+(wrapper.y||0)+')');}\nif(transform.length){attr(wrapper.element,'transform',transform.join(' '));}},toFront:function(){var element=this.element;element.parentNode.appendChild(element);return this;},align:function(alignOptions,alignByTranslate,box){var elemWrapper=this;if(!alignOptions){alignOptions=elemWrapper.alignOptions;alignByTranslate=elemWrapper.alignByTranslate;}else{elemWrapper.alignOptions=alignOptions;elemWrapper.alignByTranslate=alignByTranslate;if(!box){elemWrapper.renderer.alignedObjects.push(elemWrapper);}}\nbox=pick(box,elemWrapper.renderer);var align=alignOptions.align,vAlign=alignOptions.verticalAlign,x=(box.x||0)+(alignOptions.x||0),y=(box.y||0)+(alignOptions.y||0),attribs={};if(/^(right|center)$/.test(align)){x+=(box.width-(alignOptions.width||0))/{right:1,center:2}[align];}\nattribs[alignByTranslate?'translateX':'x']=mathRound(x);if(/^(bottom|middle)$/.test(vAlign)){y+=(box.height-(alignOptions.height||0))/({bottom:1,middle:2}[vAlign]||1);}\nattribs[alignByTranslate?'translateY':'y']=mathRound(y);elemWrapper[elemWrapper.placed?'animate':'attr'](attribs);elemWrapper.placed=true;elemWrapper.alignAttr=attribs;return elemWrapper;},getBBox:function(refresh){var wrapper=this,bBox,width,height,rotation=wrapper.rotation,element=wrapper.element,rad=rotation*deg2rad;if(element.namespaceURI===SVG_NS||wrapper.renderer.forExport){try{bBox=element.getBBox?extend({},element.getBBox()):{width:element.offsetWidth,height:element.offsetHeight};}catch(e){}\nif(!bBox||bBox.width<0){bBox={width:0,height:0};}\nwidth=bBox.width;height=bBox.height;if(rotation){bBox.width=mathAbs(height*mathSin(rad))+mathAbs(width*mathCos(rad));bBox.height=mathAbs(height*mathCos(rad))+mathAbs(width*mathSin(rad));}}else{bBox=wrapper.htmlGetBBox(refresh);}\nreturn bBox;},show:function(){return this.attr({visibility:VISIBLE});},hide:function(){return this.attr({visibility:HIDDEN});},add:function(parent){var renderer=this.renderer,parentWrapper=parent||renderer,parentNode=parentWrapper.element||renderer.box,childNodes=parentNode.childNodes,element=this.element,zIndex=attr(element,'zIndex'),otherElement,otherZIndex,i,inserted;if(parent){this.parentGroup=parent;}\nthis.parentInverted=parent&&parent.inverted;if(this.textStr!==undefined){renderer.buildText(this);}\nif(zIndex){parentWrapper.handleZ=true;zIndex=pInt(zIndex);}\nif(parentWrapper.handleZ){for(i=0;i<childNodes.length;i++){otherElement=childNodes[i];otherZIndex=attr(otherElement,'zIndex');if(otherElement!==element&&(pInt(otherZIndex)>zIndex||(!defined(zIndex)&&defined(otherZIndex)))){parentNode.insertBefore(element,otherElement);inserted=true;break;}}}\nif(!inserted){parentNode.appendChild(element);}\nthis.added=true;fireEvent(this,'add');return this;},safeRemoveChild:function(element){var parentNode=element.parentNode;if(parentNode){parentNode.removeChild(element);}},destroy:function(){var wrapper=this,element=wrapper.element||{},shadows=wrapper.shadows,box=wrapper.box,key,i;element.onclick=element.onmouseout=element.onmouseover=element.onmousemove=null;stop(wrapper);if(wrapper.clipPath){wrapper.clipPath=wrapper.clipPath.destroy();}\nif(wrapper.stops){for(i=0;i<wrapper.stops.length;i++){wrapper.stops[i]=wrapper.stops[i].destroy();}\nwrapper.stops=null;}\nwrapper.safeRemoveChild(element);if(shadows){each(shadows,function(shadow){wrapper.safeRemoveChild(shadow);});}\nif(box){box.destroy();}\nerase(wrapper.renderer.alignedObjects,wrapper);for(key in wrapper){delete wrapper[key];}\nreturn null;},empty:function(){var element=this.element,childNodes=element.childNodes,i=childNodes.length;while(i--){element.removeChild(childNodes[i]);}},shadow:function(shadowOptions,group,cutOff){var shadows=[],i,shadow,element=this.element,strokeWidth,shadowWidth,shadowElementOpacity,transform;if(shadowOptions){shadowWidth=pick(shadowOptions.width,3);shadowElementOpacity=(shadowOptions.opacity||0.15)/shadowWidth;transform=this.parentInverted?'(-1,-1)':'('+(shadowOptions.offsetX||1)+', '+(shadowOptions.offsetY||1)+')';for(i=1;i<=shadowWidth;i++){shadow=element.cloneNode(0);strokeWidth=(shadowWidth*2)+1-(2*i);attr(shadow,{'isShadow':'true','stroke':shadowOptions.color||'black','stroke-opacity':shadowElementOpacity*i,'stroke-width':strokeWidth,'transform':'translate'+transform,'fill':NONE});if(cutOff){attr(shadow,'height',mathMax(attr(shadow,'height')-strokeWidth,0));shadow.cutHeight=strokeWidth;}\nif(group){group.element.appendChild(shadow);}else{element.parentNode.insertBefore(shadow,element);}\nshadows.push(shadow);}\nthis.shadows=shadows;}\nreturn this;}};var SVGRenderer=function(){this.init.apply(this,arguments);};SVGRenderer.prototype={Element:SVGElement,init:function(container,width,height,forExport){var renderer=this,loc=location,boxWrapper;boxWrapper=renderer.createElement('svg').attr({xmlns:SVG_NS,version:'1.1'});container.appendChild(boxWrapper.element);renderer.isSVG=true;renderer.box=boxWrapper.element;renderer.boxWrapper=boxWrapper;renderer.alignedObjects=[];renderer.url=(isFirefox||isWebKit)&&doc.getElementsByTagName('base').length?loc.href.replace(/#.*?$/,'').replace(/([\\('\\)])/g,'\\\\$1').replace(/ /g,'%20'):'';renderer.defs=this.createElement('defs').add();renderer.forExport=forExport;renderer.gradients={};renderer.setSize(width,height,false);var subPixelFix,rect;if(isFirefox&&container.getBoundingClientRect){renderer.subPixelFix=subPixelFix=function(){css(container,{left:0,top:0});rect=container.getBoundingClientRect();css(container,{left:(mathCeil(rect.left)-rect.left)+PX,top:(mathCeil(rect.top)-rect.top)+PX});};subPixelFix();addEvent(win,'resize',subPixelFix);}},isHidden:function(){return!this.boxWrapper.getBBox().width;},destroy:function(){var renderer=this,rendererDefs=renderer.defs;renderer.box=null;renderer.boxWrapper=renderer.boxWrapper.destroy();destroyObjectProperties(renderer.gradients||{});renderer.gradients=null;if(rendererDefs){renderer.defs=rendererDefs.destroy();}\nif(renderer.subPixelFix){removeEvent(win,'resize',renderer.subPixelFix);}\nrenderer.alignedObjects=null;return null;},createElement:function(nodeName){var wrapper=new this.Element();wrapper.init(this,nodeName);return wrapper;},draw:function(){},buildText:function(wrapper){var textNode=wrapper.element,lines=pick(wrapper.textStr,'').toString().replace(/<(b|strong)>/g,'<span style=\"font-weight:bold\">').replace(/<(i|em)>/g,'<span style=\"font-style:italic\">').replace(/<a/g,'<span').replace(/<\\/(b|strong|i|em|a)>/g,'<\/span>').split(/<br.*?>/g),childNodes=textNode.childNodes,styleRegex=/style=\"([^\"]+)\"/,hrefRegex=/href=\"([^\"]+)\"/,parentX=attr(textNode,'x'),textStyles=wrapper.styles,width=textStyles&&pInt(textStyles.width),textLineHeight=textStyles&&textStyles.lineHeight,lastLine,GET_COMPUTED_STYLE='getComputedStyle',i=childNodes.length,linePositions=[];function getLineHeightByBBox(lineNo){linePositions[lineNo]=textNode.getBBox?textNode.getBBox().height:wrapper.renderer.fontMetrics(textNode.style.fontSize).h;return mathRound(linePositions[lineNo]-(linePositions[lineNo-1]||0));}\nwhile(i--){textNode.removeChild(childNodes[i]);}\nif(width&&!wrapper.added){this.box.appendChild(textNode);}\nif(lines[lines.length-1]===''){lines.pop();}\neach(lines,function(line,lineNo){var spans,spanNo=0,lineHeight;line=line.replace(/<span/g,'|||<span').replace(/<\\/span>/g,'<\/span>|||');spans=line.split('|||');each(spans,function(span){if(span!==''||spans.length===1){var attributes={},tspan=doc.createElementNS(SVG_NS,'tspan');if(styleRegex.test(span)){attr(tspan,'style',span.match(styleRegex)[1].replace(/(;| |^)color([ :])/,'$1fill$2'));}\nif(hrefRegex.test(span)){attr(tspan,'onclick','location.href=\\\"'+span.match(hrefRegex)[1]+'\\\"');css(tspan,{cursor:'pointer'});}\nspan=(span.replace(/<(.|\\n)*?>/g,'')||' ').replace(/&lt;/g,'<').replace(/&gt;/g,'>');tspan.appendChild(doc.createTextNode(span));if(!spanNo){attributes.x=parentX;}else{attributes.dx=3;}\nif(!spanNo){if(lineNo){if(!hasSVG&&wrapper.renderer.forExport){css(tspan,{display:'block'});}\nlineHeight=win[GET_COMPUTED_STYLE]&&pInt(win[GET_COMPUTED_STYLE](lastLine,null).getPropertyValue('line-height'));if(!lineHeight||isNaN(lineHeight)){lineHeight=textLineHeight||lastLine.offsetHeight||getLineHeightByBBox(lineNo)||18;}\nattr(tspan,'dy',lineHeight);}\nlastLine=tspan;}\nattr(tspan,attributes);textNode.appendChild(tspan);spanNo++;if(width){var words=span.replace(/-/g,'- ').split(' '),tooLong,actualWidth,rest=[];while(words.length||rest.length){actualWidth=wrapper.getBBox().width;tooLong=actualWidth>width;if(!tooLong||words.length===1){words=rest;rest=[];if(words.length){tspan=doc.createElementNS(SVG_NS,'tspan');attr(tspan,{dy:textLineHeight||16,x:parentX});textNode.appendChild(tspan);if(actualWidth>width){width=actualWidth;}}}else{tspan.removeChild(tspan.firstChild);rest.unshift(words.pop());}\nif(words.length){tspan.appendChild(doc.createTextNode(words.join(' ').replace(/- /g,'-')));}}}}});});},button:function(text,x,y,callback,normalState,hoverState,pressedState){var label=this.label(text,x,y),curState=0,stateOptions,stateStyle,normalStyle,hoverStyle,pressedStyle,STYLE='style',verticalGradient={x1:0,y1:0,x2:0,y2:1};normalState=merge(hash(STROKE_WIDTH,1,STROKE,'#999',FILL,hash(LINEAR_GRADIENT,verticalGradient,STOPS,[[0,'#FFF'],[1,'#DDD']]),'r',3,'padding',3,STYLE,hash('color','black')),normalState);normalStyle=normalState[STYLE];delete normalState[STYLE];hoverState=merge(normalState,hash(STROKE,'#68A',FILL,hash(LINEAR_GRADIENT,verticalGradient,STOPS,[[0,'#FFF'],[1,'#ACF']])),hoverState);hoverStyle=hoverState[STYLE];delete hoverState[STYLE];pressedState=merge(normalState,hash(STROKE,'#68A',FILL,hash(LINEAR_GRADIENT,verticalGradient,STOPS,[[0,'#9BD'],[1,'#CDF']])),pressedState);pressedStyle=pressedState[STYLE];delete pressedState[STYLE];addEvent(label.element,'mouseenter',function(){label.attr(hoverState).css(hoverStyle);});addEvent(label.element,'mouseleave',function(){stateOptions=[normalState,hoverState,pressedState][curState];stateStyle=[normalStyle,hoverStyle,pressedStyle][curState];label.attr(stateOptions).css(stateStyle);});label.setState=function(state){curState=state;if(!state){label.attr(normalState).css(normalStyle);}else if(state===2){label.attr(pressedState).css(pressedStyle);}};return label.on('click',function(){callback.call(label);}).attr(normalState).css(extend({cursor:'default'},normalStyle));},crispLine:function(points,width){if(points[1]===points[4]){points[1]=points[4]=mathRound(points[1])-(width%2/2);}\nif(points[2]===points[5]){points[2]=points[5]=mathRound(points[2])+(width%2/2);}\nreturn points;},path:function(path){var attr={fill:NONE};if(isArray(path)){attr.d=path;}else if(isObject(path)){extend(attr,path);}\nreturn this.createElement('path').attr(attr);},circle:function(x,y,r){var attr=isObject(x)?x:{x:x,y:y,r:r};return this.createElement('circle').attr(attr);},arc:function(x,y,r,innerR,start,end){if(isObject(x)){y=x.y;r=x.r;innerR=x.innerR;start=x.start;end=x.end;x=x.x;}\nreturn this.symbol('arc',x||0,y||0,r||0,r||0,{innerR:innerR||0,start:start||0,end:end||0});},rect:function(x,y,width,height,r,strokeWidth){r=isObject(x)?x.r:r;var wrapper=this.createElement('rect').attr({rx:r,ry:r,fill:NONE});return wrapper.attr(isObject(x)?x:wrapper.crisp(strokeWidth,x,y,mathMax(width,0),mathMax(height,0)));},setSize:function(width,height,animate){var renderer=this,alignedObjects=renderer.alignedObjects,i=alignedObjects.length;renderer.width=width;renderer.height=height;renderer.boxWrapper[pick(animate,true)?'animate':'attr']({width:width,height:height});while(i--){alignedObjects[i].align();}},g:function(name){var elem=this.createElement('g');return defined(name)?elem.attr({'class':PREFIX+name}):elem;},image:function(src,x,y,width,height){var attribs={preserveAspectRatio:NONE},elemWrapper;if(arguments.length>1){extend(attribs,{x:x,y:y,width:width,height:height});}\nelemWrapper=this.createElement('image').attr(attribs);if(elemWrapper.element.setAttributeNS){elemWrapper.element.setAttributeNS('http://www.w3.org/1999/xlink','href',src);}else{elemWrapper.element.setAttribute('hc-svg-href',src);}\nreturn elemWrapper;},symbol:function(symbol,x,y,width,height,options){var obj,symbolFn=this.symbols[symbol],path=symbolFn&&symbolFn(mathRound(x),mathRound(y),width,height,options),imageRegex=/^url\\((.*?)\\)$/,imageSrc,imageSize,centerImage;if(path){obj=this.path(path);extend(obj,{symbolName:symbol,x:x,y:y,width:width,height:height});if(options){extend(obj,options);}}else if(imageRegex.test(symbol)){centerImage=function(img,size){img.attr({width:size[0],height:size[1]});if(!img.alignByTranslate){img.translate(-mathRound(size[0]/2),-mathRound(size[1]/2));}};imageSrc=symbol.match(imageRegex)[1];imageSize=symbolSizes[imageSrc];obj=this.image(imageSrc).attr({x:x,y:y});if(imageSize){centerImage(obj,imageSize);}else{obj.attr({width:width,height:height});createElement('img',{onload:function(){var img=this;centerImage(obj,symbolSizes[imageSrc]=[img.width,img.height]);},src:imageSrc});}}\nreturn obj;},symbols:{'circle':function(x,y,w,h){var cpw=0.166*w;return[M,x+w/2,y,'C',x+w+cpw,y,x+w+cpw,y+h,x+w/2,y+h,'C',x-cpw,y+h,x-cpw,y,x+w/2,y,'Z'];},'square':function(x,y,w,h){return[M,x,y,L,x+w,y,x+w,y+h,x,y+h,'Z'];},'triangle':function(x,y,w,h){return[M,x+w/2,y,L,x+w,y+h,x,y+h,'Z'];},'triangle-down':function(x,y,w,h){return[M,x,y,L,x+w,y,x+w/2,y+h,'Z'];},'diamond':function(x,y,w,h){return[M,x+w/2,y,L,x+w,y+h/2,x+w/2,y+h,x,y+h/2,'Z'];},'arc':function(x,y,w,h,options){var start=options.start,radius=options.r||w||h,end=options.end-0.000001,innerRadius=options.innerR,open=options.open,cosStart=mathCos(start),sinStart=mathSin(start),cosEnd=mathCos(end),sinEnd=mathSin(end),longArc=options.end-start<mathPI?0:1;return[M,x+radius*cosStart,y+radius*sinStart,'A',radius,radius,0,longArc,1,x+radius*cosEnd,y+radius*sinEnd,open?M:L,x+innerRadius*cosEnd,y+innerRadius*sinEnd,'A',innerRadius,innerRadius,0,longArc,0,x+innerRadius*cosStart,y+innerRadius*sinStart,open?'':'Z'];}},clipRect:function(x,y,width,height){var wrapper,id=PREFIX+idCounter++,clipPath=this.createElement('clipPath').attr({id:id}).add(this.defs);wrapper=this.rect(x,y,width,height,0).add(clipPath);wrapper.id=id;wrapper.clipPath=clipPath;return wrapper;},color:function(color,elem,prop){var renderer=this,colorObject,regexRgba=/^rgba/,gradName;if(color&&color.linearGradient){gradName='linearGradient';}else if(color&&color.radialGradient){gradName='radialGradient';}\nif(gradName){var gradAttr=color[gradName],gradients=renderer.gradients,gradientObject,stopColor,stopOpacity,radialReference=elem.radialReference;if(!gradAttr.id||!gradients[gradAttr.id]){if(isArray(gradAttr)){color[gradName]=gradAttr={x1:gradAttr[0],y1:gradAttr[1],x2:gradAttr[2],y2:gradAttr[3],gradientUnits:'userSpaceOnUse'};}\nif(gradName==='radialGradient'&&radialReference&&!defined(gradAttr.gradientUnits)){extend(gradAttr,{cx:(radialReference[0]-radialReference[2]/2)+gradAttr.cx*radialReference[2],cy:(radialReference[1]-radialReference[2]/2)+gradAttr.cy*radialReference[2],r:gradAttr.r*radialReference[2],gradientUnits:'userSpaceOnUse'});}\ngradAttr.id=PREFIX+idCounter++;gradients[gradAttr.id]=gradientObject=renderer.createElement(gradName).attr(gradAttr).add(renderer.defs);gradientObject.stops=[];each(color.stops,function(stop){var stopObject;if(regexRgba.test(stop[1])){colorObject=Color(stop[1]);stopColor=colorObject.get('rgb');stopOpacity=colorObject.get('a');}else{stopColor=stop[1];stopOpacity=1;}\nstopObject=renderer.createElement('stop').attr({offset:stop[0],'stop-color':stopColor,'stop-opacity':stopOpacity}).add(gradientObject);gradientObject.stops.push(stopObject);});}\nreturn'url('+renderer.url+'#'+gradAttr.id+')';}else if(regexRgba.test(color)){colorObject=Color(color);attr(elem,prop+'-opacity',colorObject.get('a'));return colorObject.get('rgb');}else{elem.removeAttribute(prop+'-opacity');return color;}},text:function(str,x,y,useHTML){var renderer=this,defaultChartStyle=defaultOptions.chart.style,wrapper;if(useHTML&&!renderer.forExport){return renderer.html(str,x,y);}\nx=mathRound(pick(x,0));y=mathRound(pick(y,0));wrapper=renderer.createElement('text').attr({x:x,y:y,text:str}).css({fontFamily:defaultChartStyle.fontFamily,fontSize:defaultChartStyle.fontSize});if(!hasSVG&&renderer.forExport){wrapper.css({position:ABSOLUTE});}\nwrapper.x=x;wrapper.y=y;return wrapper;},html:function(str,x,y){var defaultChartStyle=defaultOptions.chart.style,wrapper=this.createElement('span'),attrSetters=wrapper.attrSetters,element=wrapper.element,renderer=wrapper.renderer;attrSetters.text=function(value){element.innerHTML=value;return false;};attrSetters.x=attrSetters.y=attrSetters.align=function(value,key){if(key==='align'){key='textAlign';}\nwrapper[key]=value;wrapper.htmlUpdateTransform();return false;};wrapper.attr({text:str,x:mathRound(x),y:mathRound(y)}).css({position:ABSOLUTE,whiteSpace:'nowrap',fontFamily:defaultChartStyle.fontFamily,fontSize:defaultChartStyle.fontSize});wrapper.css=wrapper.htmlCss;if(renderer.isSVG){wrapper.add=function(svgGroupWrapper){var htmlGroup,container=renderer.box.parentNode,parentGroup,parents=[];if(svgGroupWrapper){htmlGroup=svgGroupWrapper.div;if(!htmlGroup){parentGroup=svgGroupWrapper;while(parentGroup){parents.push(parentGroup);parentGroup=parentGroup.parentGroup;}\neach(parents.reverse(),function(parentGroup){var htmlGroupStyle;htmlGroup=parentGroup.div=parentGroup.div||createElement(DIV,{className:attr(parentGroup.element,'class')},{position:ABSOLUTE,left:(parentGroup.translateX||0)+PX,top:(parentGroup.translateY||0)+PX},htmlGroup||container);htmlGroupStyle=htmlGroup.style;extend(parentGroup.attrSetters,{translateX:function(value){htmlGroupStyle.left=value+PX;},translateY:function(value){htmlGroupStyle.top=value+PX;},visibility:function(value,key){htmlGroupStyle[key]=value;}});});}}else{htmlGroup=container;}\nhtmlGroup.appendChild(element);wrapper.added=true;if(wrapper.alignOnAdd){wrapper.htmlUpdateTransform();}\nreturn wrapper;};}\nreturn wrapper;},fontMetrics:function(fontSize){fontSize=pInt(fontSize||11);var lineHeight=fontSize<24?fontSize+4:mathRound(fontSize*1.2),baseline=mathRound(lineHeight*0.8);return{h:lineHeight,b:baseline};},label:function(str,x,y,shape,anchorX,anchorY,useHTML,baseline,className){var renderer=this,wrapper=renderer.g(className),text=renderer.text('',0,0,useHTML).attr({zIndex:1}),box,bBox,alignFactor=0,padding=3,width,height,wrapperX,wrapperY,crispAdjust=0,deferredAttr={},baselineOffset,attrSetters=wrapper.attrSetters;function updateBoxSize(){var boxY,style=text.element.style;bBox=(width===undefined||height===undefined||wrapper.styles.textAlign)&&text.getBBox(true);wrapper.width=(width||bBox.width||0)+2*padding;wrapper.height=(height||bBox.height||0)+2*padding;baselineOffset=padding+renderer.fontMetrics(style&&style.fontSize).b;if(!box){boxY=baseline?-baselineOffset:0;wrapper.box=box=shape?renderer.symbol(shape,-alignFactor*padding,boxY,wrapper.width,wrapper.height):renderer.rect(-alignFactor*padding,boxY,wrapper.width,wrapper.height,0,deferredAttr[STROKE_WIDTH]);box.add(wrapper);}\nbox.attr(merge({width:wrapper.width,height:wrapper.height},deferredAttr));deferredAttr=null;}\nfunction updateTextPadding(){var styles=wrapper.styles,textAlign=styles&&styles.textAlign,x=padding*(1-alignFactor),y;y=baseline?0:baselineOffset;if(defined(width)&&(textAlign==='center'||textAlign==='right')){x+={center:0.5,right:1}[textAlign]*(width-bBox.width);}\nif(x!==text.x||y!==text.y){text.attr({x:x,y:y});}\ntext.x=x;text.y=y;}\nfunction boxAttr(key,value){if(box){box.attr(key,value);}else{deferredAttr[key]=value;}}\nfunction getSizeAfterAdd(){text.add(wrapper);wrapper.attr({text:str,x:x,y:y});if(defined(anchorX)){wrapper.attr({anchorX:anchorX,anchorY:anchorY});}}\naddEvent(wrapper,'add',getSizeAfterAdd);attrSetters.width=function(value){width=value;return false;};attrSetters.height=function(value){height=value;return false;};attrSetters.padding=function(value){if(defined(value)&&value!==padding){padding=value;updateTextPadding();}\nreturn false;};attrSetters.align=function(value){alignFactor={left:0,center:0.5,right:1}[value];return false;};attrSetters.text=function(value,key){text.attr(key,value);updateBoxSize();updateTextPadding();return false;};attrSetters[STROKE_WIDTH]=function(value,key){crispAdjust=value%2/2;boxAttr(key,value);return false;};attrSetters.stroke=attrSetters.fill=attrSetters.r=function(value,key){boxAttr(key,value);return false;};attrSetters.anchorX=function(value,key){anchorX=value;boxAttr(key,value+crispAdjust-wrapperX);return false;};attrSetters.anchorY=function(value,key){anchorY=value;boxAttr(key,value-wrapperY);return false;};attrSetters.x=function(value){wrapper.x=value;value-=alignFactor*((width||bBox.width)+padding);wrapperX=mathRound(value);wrapper.attr('translateX',wrapperX);return false;};attrSetters.y=function(value){wrapperY=wrapper.y=mathRound(value);wrapper.attr('translateY',value);return false;};var baseCss=wrapper.css;return extend(wrapper,{css:function(styles){if(styles){var textStyles={};styles=merge({},styles);each(['fontSize','fontWeight','fontFamily','color','lineHeight','width'],function(prop){if(styles[prop]!==UNDEFINED){textStyles[prop]=styles[prop];delete styles[prop];}});text.css(textStyles);}\nreturn baseCss.call(wrapper,styles);},getBBox:function(){return box.getBBox();},shadow:function(b){box.shadow(b);return wrapper;},destroy:function(){removeEvent(wrapper,'add',getSizeAfterAdd);removeEvent(wrapper.element,'mouseenter');removeEvent(wrapper.element,'mouseleave');if(text){text=text.destroy();}\nSVGElement.prototype.destroy.call(wrapper);}});}};Renderer=SVGRenderer;var VMLRenderer;if(!hasSVG&&!useCanVG){var VMLElement={init:function(renderer,nodeName){var wrapper=this,markup=['<',nodeName,' filled=\"f\" stroked=\"f\"'],style=['position: ',ABSOLUTE,';'];if(nodeName==='shape'||nodeName===DIV){style.push('left:0;top:0;width:1px;height:1px;');}\nif(docMode8){style.push('visibility: ',nodeName===DIV?HIDDEN:VISIBLE);}\nmarkup.push(' style=\"',style.join(''),'\"/>');if(nodeName){markup=nodeName===DIV||nodeName==='span'||nodeName==='img'?markup.join(''):renderer.prepVML(markup);wrapper.element=createElement(markup);}\nwrapper.renderer=renderer;wrapper.attrSetters={};},add:function(parent){var wrapper=this,renderer=wrapper.renderer,element=wrapper.element,box=renderer.box,inverted=parent&&parent.inverted,parentNode=parent?parent.element||parent:box;if(inverted){renderer.invertChild(element,parentNode);}\nif(docMode8&&parentNode.gVis===HIDDEN){css(element,{visibility:HIDDEN});}\nparentNode.appendChild(element);wrapper.added=true;if(wrapper.alignOnAdd&&!wrapper.deferUpdateTransform){wrapper.updateTransform();}\nfireEvent(wrapper,'add');return wrapper;},toggleChildren:function(element,visibility){var childNodes=element.childNodes,i=childNodes.length;while(i--){css(childNodes[i],{visibility:visibility});if(childNodes[i].nodeName==='DIV'){this.toggleChildren(childNodes[i],visibility);}}},updateTransform:SVGElement.prototype.htmlUpdateTransform,attr:function(hash,val){var wrapper=this,key,value,i,result,element=wrapper.element||{},elemStyle=element.style,nodeName=element.nodeName,renderer=wrapper.renderer,symbolName=wrapper.symbolName,hasSetSymbolSize,shadows=wrapper.shadows,skipAttr,attrSetters=wrapper.attrSetters,ret=wrapper;if(isString(hash)&&defined(val)){key=hash;hash={};hash[key]=val;}\nif(isString(hash)){key=hash;if(key==='strokeWidth'||key==='stroke-width'){ret=wrapper.strokeweight;}else{ret=wrapper[key];}}else{for(key in hash){value=hash[key];skipAttr=false;result=attrSetters[key]&&attrSetters[key].call(wrapper,value,key);if(result!==false&&value!==null){if(result!==UNDEFINED){value=result;}\nif(symbolName&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(key)){if(!hasSetSymbolSize){wrapper.symbolAttr(hash);hasSetSymbolSize=true;}\nskipAttr=true;}else if(key==='d'){value=value||[];wrapper.d=value.join(' ');i=value.length;var convertedPath=[];while(i--){if(isNumber(value[i])){convertedPath[i]=mathRound(value[i]*10)-5;}else if(value[i]==='Z'){convertedPath[i]='x';}else{convertedPath[i]=value[i];}}\nvalue=convertedPath.join(' ')||'x';element.path=value;if(shadows){i=shadows.length;while(i--){shadows[i].path=shadows[i].cutOff?this.cutOffPath(value,shadows[i].cutOff):value;}}\nskipAttr=true;}else if(key==='zIndex'||key==='visibility'){if(docMode8&&key==='visibility'&&nodeName==='DIV'){element.gVis=value;wrapper.toggleChildren(element,value);if(value===VISIBLE){value=null;}}\nif(value){elemStyle[key]=value;}\nskipAttr=true;}else if(key==='width'||key==='height'){value=mathMax(0,value);this[key]=value;if(wrapper.updateClipping){wrapper[key]=value;wrapper.updateClipping();}else{elemStyle[key]=value;}\nskipAttr=true;}else if(key==='x'||key==='y'){wrapper[key]=value;elemStyle[{x:'left',y:'top'}[key]]=value;}else if(key==='class'){element.className=value;}else if(key==='stroke'){value=renderer.color(value,element,key);key='strokecolor';}else if(key==='stroke-width'||key==='strokeWidth'){element.stroked=value?true:false;key='strokeweight';wrapper[key]=value;if(isNumber(value)){value+=PX;}}else if(key==='dashstyle'){var strokeElem=element.getElementsByTagName('stroke')[0]||createElement(renderer.prepVML(['<stroke/>']),null,null,element);strokeElem[key]=value||'solid';wrapper.dashstyle=value;skipAttr=true;}else if(key==='fill'){if(nodeName==='SPAN'){elemStyle.color=value;}else{element.filled=value!==NONE?true:false;value=renderer.color(value,element,key,wrapper);key='fillcolor';}}else if(nodeName==='shape'&&key==='rotation'){wrapper[key]=value;element.style.left=-mathRound(mathSin(value*deg2rad)+1)+PX;element.style.top=mathRound(mathCos(value*deg2rad))+PX;}else if(key==='translateX'||key==='translateY'||key==='rotation'){wrapper[key]=value;wrapper.updateTransform();skipAttr=true;}else if(key==='text'){this.bBox=null;element.innerHTML=value;skipAttr=true;}\nif(shadows&&key==='visibility'){i=shadows.length;while(i--){shadows[i].style[key]=value;}}\nif(!skipAttr){if(docMode8){element[key]=value;}else{attr(element,key,value);}}}}}\nreturn ret;},clip:function(clipRect){var wrapper=this,clipMembers,element=wrapper.element,parentNode=element.parentNode;if(clipRect){clipMembers=clipRect.members;clipMembers.push(wrapper);wrapper.destroyClip=function(){erase(clipMembers,wrapper);};if(parentNode&&parentNode.className==='Highstock-tracker'&&!docMode8){css(element,{visibility:HIDDEN});}}else if(wrapper.destroyClip){wrapper.destroyClip();}\nif(isIE){return wrapper.css(clipRect?clipRect.getCSS(wrapper):{clip:'rect(auto auto auto auto)'});}else{return wrapper.css(clipRect?clipRect.getCSS(wrapper):{clip:'inherit'});}},css:SVGElement.prototype.htmlCss,safeRemoveChild:function(element){var parentNode=element.parentNode;if(parentNode){discardElement(element);}},destroy:function(){var wrapper=this;if(wrapper.destroyClip){wrapper.destroyClip();}\nreturn SVGElement.prototype.destroy.apply(wrapper);},empty:function(){var element=this.element,childNodes=element.childNodes,i=childNodes.length,node;while(i--){node=childNodes[i];node.parentNode.removeChild(node);}},on:function(eventType,handler){this.element['on'+eventType]=function(){var evt=win.event;evt.target=evt.srcElement;handler(evt);};return this;},cutOffPath:function(path,length){var len;path=path.split(/[ ,]/);len=path.length;if(len===9||len===11){path[len-4]=path[len-2]=pInt(path[len-2])-10*length;}\nreturn path.join(' ');},shadow:function(shadowOptions,group,cutOff){var shadows=[],i,element=this.element,renderer=this.renderer,shadow,elemStyle=element.style,markup,path=element.path,strokeWidth,modifiedPath,shadowWidth,shadowElementOpacity;if(path&&typeof path.value!=='string'){path='x';}\nmodifiedPath=path;if(shadowOptions){shadowWidth=pick(shadowOptions.width,3);shadowElementOpacity=(shadowOptions.opacity||0.15)/shadowWidth;for(i=1;i<=3;i++){strokeWidth=(shadowWidth*2)+1-(2*i);if(cutOff){modifiedPath=this.cutOffPath(path.value,strokeWidth+0.5);}\nmarkup=['<shape isShadow=\"true\" strokeweight=\"',strokeWidth,'\" filled=\"false\" path=\"',modifiedPath,'\" coordsize=\"10 10\" style=\"',element.style.cssText,'\" />'];shadow=createElement(renderer.prepVML(markup),null,{left:pInt(elemStyle.left)+(shadowOptions.offsetX||1),top:pInt(elemStyle.top)+(shadowOptions.offsetY||1)});if(cutOff){shadow.cutOff=strokeWidth+1;}\nmarkup=['<stroke color=\"',shadowOptions.color||'black','\" opacity=\"',shadowElementOpacity*i,'\"/>'];createElement(renderer.prepVML(markup),null,null,shadow);if(group){group.element.appendChild(shadow);}else{element.parentNode.insertBefore(shadow,element);}\nshadows.push(shadow);}\nthis.shadows=shadows;}\nreturn this;}};VMLElement=extendClass(SVGElement,VMLElement);var VMLRendererExtension={Element:VMLElement,isIE8:userAgent.indexOf('MSIE 8.0')>-1,init:function(container,width,height){var renderer=this,boxWrapper,box;renderer.alignedObjects=[];boxWrapper=renderer.createElement(DIV);box=boxWrapper.element;box.style.position=RELATIVE;container.appendChild(boxWrapper.element);renderer.box=box;renderer.boxWrapper=boxWrapper;renderer.setSize(width,height,false);if(!doc.namespaces.hcv){doc.namespaces.add('hcv','urn:schemas-microsoft-com:vml');doc.createStyleSheet().cssText='hcv\\\\:fill, hcv\\\\:path, hcv\\\\:shape, hcv\\\\:stroke'+'{ behavior:url(#default#VML); display: inline-block; } ';}},isHidden:function(){return!this.box.offsetWidth;},clipRect:function(x,y,width,height){var clipRect=this.createElement(),isObj=isObject(x);return extend(clipRect,{members:[],left:isObj?x.x:x,top:isObj?x.y:y,width:isObj?x.width:width,height:isObj?x.height:height,getCSS:function(wrapper){var inverted=wrapper.inverted,rect=this,top=rect.top,left=rect.left,right=left+rect.width,bottom=top+rect.height,ret={clip:'rect('+\nmathRound(inverted?left:top)+'px,'+\nmathRound(inverted?bottom:right)+'px,'+\nmathRound(inverted?right:bottom)+'px,'+\nmathRound(inverted?top:left)+'px)'};if(!inverted&&docMode8&&wrapper.element.nodeName!=='IMG'){extend(ret,{width:right+PX,height:bottom+PX});}\nreturn ret;},updateClipping:function(){each(clipRect.members,function(member){member.css(clipRect.getCSS(member));});}});},color:function(color,elem,prop,wrapper){var renderer=this,colorObject,regexRgba=/^rgba/,markup,fillType,ret=NONE;if(color&&color.linearGradient){fillType='gradient';}else if(color&&color.radialGradient){fillType='pattern';}\nif(fillType){var stopColor,stopOpacity,gradient=color.linearGradient||color.radialGradient,x1,y1,x2,y2,opacity1,opacity2,color1,color2,fillAttr='',stops=color.stops,firstStop,lastStop,colors=[],addFillNode=function(){markup=['<fill colors=\"'+colors.join(',')+'\" opacity=\"',opacity2,'\" o:opacity2=\"',opacity1,'\" type=\"',fillType,'\" ',fillAttr,'focus=\"100%\" method=\"any\" />'];createElement(renderer.prepVML(markup),null,null,elem);};firstStop=stops[0];lastStop=stops[stops.length-1];if(firstStop[0]>0){stops.unshift([0,firstStop[1]]);}\nif(lastStop[0]<1){stops.push([1,lastStop[1]]);}\neach(stops,function(stop,i){if(regexRgba.test(stop[1])){colorObject=Color(stop[1]);stopColor=colorObject.get('rgb');stopOpacity=colorObject.get('a');}else{stopColor=stop[1];stopOpacity=1;}\ncolors.push((stop[0]*100)+'% '+stopColor);if(!i){opacity1=stopOpacity;color2=stopColor;}else{opacity2=stopOpacity;color1=stopColor;}});if(prop==='fill'){if(fillType==='gradient'){x1=gradient.x1||gradient[0]||0;y1=gradient.y1||gradient[1]||0;x2=gradient.x2||gradient[2]||0;y2=gradient.y2||gradient[3]||0;fillAttr='angle=\"'+(90-math.atan((y2-y1)/(x2-x1))*180/mathPI)+'\"';addFillNode();}else{var r=gradient.r,sizex=r*2,sizey=r*2,cx=gradient.cx,cy=gradient.cy,radialReference=elem.radialReference,bBox,applyRadialGradient=function(){if(radialReference){bBox=wrapper.getBBox();cx+=(radialReference[0]-bBox.x)/bBox.width-0.5;cy+=(radialReference[1]-bBox.y)/bBox.height-0.5;sizex*=radialReference[2]/bBox.width;sizey*=radialReference[2]/bBox.height;}\nfillAttr='src=\"'+defaultOptions.global.VMLRadialGradientURL+'\" '+'size=\"'+sizex+','+sizey+'\" '+'origin=\"0.5,0.5\" '+'position=\"'+cx+','+cy+'\" '+'color2=\"'+color2+'\" ';addFillNode();};if(wrapper.added){applyRadialGradient();}else{addEvent(wrapper,'add',applyRadialGradient);}\nret=color1;}}else{ret=stopColor;}}else if(regexRgba.test(color)&&elem.tagName!=='IMG'){colorObject=Color(color);markup=['<',prop,' opacity=\"',colorObject.get('a'),'\"/>'];createElement(this.prepVML(markup),null,null,elem);ret=colorObject.get('rgb');}else{var strokeNodes=elem.getElementsByTagName(prop);if(strokeNodes.length){strokeNodes[0].opacity=1;}\nret=color;}\nreturn ret;},prepVML:function(markup){var vmlStyle='display:inline-block;behavior:url(#default#VML);',isIE8=this.isIE8;markup=markup.join('');if(isIE8){markup=markup.replace('/>',' xmlns=\"urn:schemas-microsoft-com:vml\" />');if(markup.indexOf('style=\"')===-1){markup=markup.replace('/>',' style=\"'+vmlStyle+'\" />');}else{markup=markup.replace('style=\"','style=\"'+vmlStyle);}}else{markup=markup.replace('<','<hcv:');}\nreturn markup;},text:SVGRenderer.prototype.html,path:function(path){var attr={coordsize:'10 10'};if(isArray(path)){attr.d=path;}else if(isObject(path)){extend(attr,path);}\nreturn this.createElement('shape').attr(attr);},circle:function(x,y,r){return this.symbol('circle').attr({x:x-r,y:y-r,width:2*r,height:2*r});},g:function(name){var wrapper,attribs;if(name){attribs={'className':PREFIX+name,'class':PREFIX+name};}\nwrapper=this.createElement(DIV).attr(attribs);return wrapper;},image:function(src,x,y,width,height){var obj=this.createElement('img').attr({src:src});if(arguments.length>1){obj.css({left:x,top:y,width:width,height:height});}\nreturn obj;},rect:function(x,y,width,height,r,strokeWidth){if(isObject(x)){y=x.y;width=x.width;height=x.height;strokeWidth=x.strokeWidth;x=x.x;}\nvar wrapper=this.symbol('rect');wrapper.r=r;return wrapper.attr(wrapper.crisp(strokeWidth,x,y,mathMax(width,0),mathMax(height,0)));},invertChild:function(element,parentNode){var parentStyle=parentNode.style;css(element,{flip:'x',left:pInt(parentStyle.width)-1,top:pInt(parentStyle.height)-1,rotation:-90});},symbols:{arc:function(x,y,w,h,options){var start=options.start,end=options.end,radius=options.r||w||h,cosStart=mathCos(start),sinStart=mathSin(start),cosEnd=mathCos(end),sinEnd=mathSin(end),innerRadius=options.innerR,circleCorrection=0.08/radius,innerCorrection=(innerRadius&&0.1/innerRadius)||0,ret;if(end-start===0){return['x'];}else if(2*mathPI-end+start<circleCorrection){cosEnd=-circleCorrection;}else if(end-start<innerCorrection){cosEnd=mathCos(start+innerCorrection);}\nret=['wa',x-radius,y-radius,x+radius,y+radius,x+radius*cosStart,y+radius*sinStart,x+radius*cosEnd,y+radius*sinEnd];if(options.open&&!innerRadius){ret.push('e',M,x,y);}\nret.push('at',x-innerRadius,y-innerRadius,x+innerRadius,y+innerRadius,x+innerRadius*cosEnd,y+innerRadius*sinEnd,x+innerRadius*cosStart,y+innerRadius*sinStart,'x','e');return ret;},circle:function(x,y,w,h){return['wa',x,y,x+w,y+h,x+w,y+h/2,x+w,y+h/2,'e'];},rect:function(left,top,width,height,options){var right=left+width,bottom=top+height,ret,r;if(!defined(options)||!options.r){ret=SVGRenderer.prototype.symbols.square.apply(0,arguments);}else{r=mathMin(options.r,width,height);ret=[M,left+r,top,L,right-r,top,'wa',right-2*r,top,right,top+2*r,right-r,top,right,top+r,L,right,bottom-r,'wa',right-2*r,bottom-2*r,right,bottom,right,bottom-r,right-r,bottom,L,left+r,bottom,'wa',left,bottom-2*r,left+2*r,bottom,left+r,bottom,left,bottom-r,L,left,top+r,'wa',left,top,left+2*r,top+2*r,left,top+r,left+r,top,'x','e'];}\nreturn ret;}}};VMLRenderer=function(){this.init.apply(this,arguments);};VMLRenderer.prototype=merge(SVGRenderer.prototype,VMLRendererExtension);Renderer=VMLRenderer;}\nvar CanVGRenderer,CanVGController;if(useCanVG){CanVGRenderer=function(){};CanVGRenderer.prototype.symbols={};CanVGController=(function(){var deferredRenderCalls=[];function drawDeferred(){var callLength=deferredRenderCalls.length,callIndex;for(callIndex=0;callIndex<callLength;callIndex++){deferredRenderCalls[callIndex]();}\ndeferredRenderCalls=[];}\nreturn{push:function(func,scriptLocation){if(deferredRenderCalls.length===0){getScript(scriptLocation,drawDeferred);}\ndeferredRenderCalls.push(func);}};}());}\nRenderer=VMLRenderer||CanVGRenderer||SVGRenderer;function Tick(axis,pos,type){this.axis=axis;this.pos=pos;this.type=type||'';this.isNew=true;if(!type){this.addLabel();}}\nTick.prototype={addLabel:function(){var tick=this,axis=tick.axis,options=axis.options,chart=axis.chart,horiz=axis.horiz,categories=axis.categories,pos=tick.pos,labelOptions=options.labels,str,tickPositions=axis.tickPositions,width=(categories&&horiz&&categories.length&&!labelOptions.step&&!labelOptions.staggerLines&&!labelOptions.rotation&&chart.plotWidth/tickPositions.length)||(!horiz&&chart.plotWidth/2),isFirst=pos===tickPositions[0],isLast=pos===tickPositions[tickPositions.length-1],css,attr,value=categories&&defined(categories[pos])?categories[pos]:pos,label=tick.label,tickPositionInfo=tickPositions.info,dateTimeLabelFormat;if(axis.isDatetimeAxis&&tickPositionInfo){dateTimeLabelFormat=options.dateTimeLabelFormats[tickPositionInfo.higherRanks[pos]||tickPositionInfo.unitName];}\ntick.isFirst=isFirst;tick.isLast=isLast;str=axis.labelFormatter.call({axis:axis,chart:chart,isFirst:isFirst,isLast:isLast,dateTimeLabelFormat:dateTimeLabelFormat,value:axis.isLog?correctFloat(lin2log(value)):value});css=width&&{width:mathMax(1,mathRound(width-2*(labelOptions.padding||10)))+PX};css=extend(css,labelOptions.style);if(!defined(label)){attr={align:labelOptions.align};if(isNumber(labelOptions.rotation)){attr.rotation=labelOptions.rotation;}\ntick.label=defined(str)&&labelOptions.enabled?chart.renderer.text(str,0,0,labelOptions.useHTML).attr(attr).css(css).add(axis.labelGroup):null;}else if(label){label.attr({text:str}).css(css);}},getLabelSize:function(){var label=this.label,axis=this.axis;return label?((this.labelBBox=label.getBBox(true)))[axis.horiz?'height':'width']:0;},getLabelSides:function(){var bBox=this.labelBBox,axis=this.axis,options=axis.options,labelOptions=options.labels,width=bBox.width,leftSide=width*{left:0,center:0.5,right:1}[labelOptions.align]-labelOptions.x;return[-leftSide,width-leftSide];},handleOverflow:function(index,xy){var show=true,axis=this.axis,chart=axis.chart,isFirst=this.isFirst,isLast=this.isLast,x=xy.x,reversed=axis.reversed,tickPositions=axis.tickPositions;if(isFirst||isLast){var sides=this.getLabelSides(),leftSide=sides[0],rightSide=sides[1],plotLeft=chart.plotLeft,plotRight=plotLeft+axis.len,neighbour=axis.ticks[tickPositions[index+(isFirst?1:-1)]],neighbourEdge=neighbour&&neighbour.label.xy&&neighbour.label.xy.x+neighbour.getLabelSides()[isFirst?0:1];if((isFirst&&!reversed)||(isLast&&reversed)){if(x+leftSide<plotLeft){x=plotLeft-leftSide;if(neighbour&&x+rightSide>neighbourEdge){show=false;}}}else{if(x+rightSide>plotRight){x=plotRight-rightSide;if(neighbour&&x+leftSide<neighbourEdge){show=false;}}}\nxy.x=x;}\nreturn show;},getPosition:function(horiz,pos,tickmarkOffset,old){var axis=this.axis,chart=axis.chart,cHeight=(old&&chart.oldChartHeight)||chart.chartHeight;return{x:horiz?axis.translate(pos+tickmarkOffset,null,null,old)+axis.transB:axis.left+axis.offset+(axis.opposite?((old&&chart.oldChartWidth)||chart.chartWidth)-axis.right-axis.left:0),y:horiz?cHeight-axis.bottom+axis.offset-(axis.opposite?axis.height:0):cHeight-axis.translate(pos+tickmarkOffset,null,null,old)-axis.transB};},getLabelPosition:function(x,y,label,horiz,labelOptions,tickmarkOffset,index,step){var axis=this.axis,transA=axis.transA,reversed=axis.reversed,staggerLines=axis.staggerLines;x=x+labelOptions.x-(tickmarkOffset&&horiz?tickmarkOffset*transA*(reversed?-1:1):0);y=y+labelOptions.y-(tickmarkOffset&&!horiz?tickmarkOffset*transA*(reversed?1:-1):0);if(!defined(labelOptions.y)){y+=pInt(label.styles.lineHeight)*0.9-label.getBBox().height/2;}\nif(staggerLines){y+=(index/(step||1)%staggerLines)*16;}\nreturn{x:x,y:y};},getMarkPath:function(x,y,tickLength,tickWidth,horiz,renderer){return renderer.crispLine([M,x,y,L,x+(horiz?0:-tickLength),y+(horiz?tickLength:0)],tickWidth);},render:function(index,old){var tick=this,axis=tick.axis,options=axis.options,chart=axis.chart,renderer=chart.renderer,horiz=axis.horiz,type=tick.type,label=tick.label,pos=tick.pos,labelOptions=options.labels,gridLine=tick.gridLine,gridPrefix=type?type+'Grid':'grid',tickPrefix=type?type+'Tick':'tick',gridLineWidth=options[gridPrefix+'LineWidth'],gridLineColor=options[gridPrefix+'LineColor'],dashStyle=options[gridPrefix+'LineDashStyle'],tickLength=options[tickPrefix+'Length'],tickWidth=options[tickPrefix+'Width']||0,tickColor=options[tickPrefix+'Color'],tickPosition=options[tickPrefix+'Position'],gridLinePath,mark=tick.mark,markPath,step=labelOptions.step,attribs,show=true,tickmarkOffset=(options.categories&&options.tickmarkPlacement==='between')?0.5:0,xy=tick.getPosition(horiz,pos,tickmarkOffset,old),x=xy.x,y=xy.y,staggerLines=axis.staggerLines;if(gridLineWidth){gridLinePath=axis.getPlotLinePath(pos+tickmarkOffset,gridLineWidth,old);if(gridLine===UNDEFINED){attribs={stroke:gridLineColor,'stroke-width':gridLineWidth};if(dashStyle){attribs.dashstyle=dashStyle;}\nif(!type){attribs.zIndex=1;}\ntick.gridLine=gridLine=gridLineWidth?renderer.path(gridLinePath).attr(attribs).add(axis.gridGroup):null;}\nif(!old&&gridLine&&gridLinePath){gridLine[tick.isNew?'attr':'animate']({d:gridLinePath});}}\nif(tickWidth&&tickLength){if(tickPosition==='inside'){tickLength=-tickLength;}\nif(axis.opposite){tickLength=-tickLength;}\nmarkPath=tick.getMarkPath(x,y,tickLength,tickWidth,horiz,renderer);if(mark){mark.animate({d:markPath});}else{tick.mark=renderer.path(markPath).attr({stroke:tickColor,'stroke-width':tickWidth}).add(axis.axisGroup);}}\nif(label&&!isNaN(x)){label.xy=xy=tick.getLabelPosition(x,y,label,horiz,labelOptions,tickmarkOffset,index,step);if((tick.isFirst&&!pick(options.showFirstLabel,1))||(tick.isLast&&!pick(options.showLastLabel,1))){show=false;}else if(!staggerLines&&horiz&&labelOptions.overflow==='justify'&&!tick.handleOverflow(index,xy)){show=false;}\nif(step&&index%step){show=false;}\nif(show){label[tick.isNew?'attr':'animate'](xy);label.show();tick.isNew=false;}else{label.hide();}}},destroy:function(){destroyObjectProperties(this,this.axis);}};function PlotLineOrBand(axis,options){this.axis=axis;if(options){this.options=options;this.id=options.id;}\nreturn this;}\nPlotLineOrBand.prototype={render:function(){var plotLine=this,axis=plotLine.axis,horiz=axis.horiz,halfPointRange=(axis.pointRange||0)/2,options=plotLine.options,optionsLabel=options.label,label=plotLine.label,width=options.width,to=options.to,from=options.from,isBand=defined(from)&&defined(to),value=options.value,dashStyle=options.dashStyle,svgElem=plotLine.svgElem,path=[],addEvent,eventType,xs,ys,x,y,color=options.color,zIndex=options.zIndex,events=options.events,attribs,renderer=axis.chart.renderer;if(axis.isLog){from=log2lin(from);to=log2lin(to);value=log2lin(value);}\nif(width){path=axis.getPlotLinePath(value,width);attribs={stroke:color,'stroke-width':width};if(dashStyle){attribs.dashstyle=dashStyle;}}else if(isBand){from=mathMax(from,axis.min-halfPointRange);to=mathMin(to,axis.max+halfPointRange);path=axis.getPlotBandPath(from,to,options);attribs={fill:color};if(options.borderWidth){attribs.stroke=options.borderColor;attribs['stroke-width']=options.borderWidth;}}else{return;}\nif(defined(zIndex)){attribs.zIndex=zIndex;}\nif(svgElem){if(path){svgElem.animate({d:path},null,svgElem.onGetPath);}else{svgElem.hide();svgElem.onGetPath=function(){svgElem.show();};}}else if(path&&path.length){plotLine.svgElem=svgElem=renderer.path(path).attr(attribs).add();if(events){addEvent=function(eventType){svgElem.on(eventType,function(e){events[eventType].apply(plotLine,[e]);});};for(eventType in events){addEvent(eventType);}}}\nif(optionsLabel&&defined(optionsLabel.text)&&path&&path.length&&axis.width>0&&axis.height>0){optionsLabel=merge({align:horiz&&isBand&&'center',x:horiz?!isBand&&4:10,verticalAlign:!horiz&&isBand&&'middle',y:horiz?isBand?16:10:isBand?6:-4,rotation:horiz&&!isBand&&90},optionsLabel);if(!label){plotLine.label=label=renderer.text(optionsLabel.text,0,0).attr({align:optionsLabel.textAlign||optionsLabel.align,rotation:optionsLabel.rotation,zIndex:zIndex}).css(optionsLabel.style).add();}\nxs=[path[1],path[4],pick(path[6],path[1])];ys=[path[2],path[5],pick(path[7],path[2])];x=arrayMin(xs);y=arrayMin(ys);label.align(optionsLabel,false,{x:x,y:y,width:arrayMax(xs)-x,height:arrayMax(ys)-y});label.show();}else if(label){label.hide();}\nreturn plotLine;},destroy:function(){var plotLine=this,axis=plotLine.axis;erase(axis.plotLinesAndBands,plotLine);destroyObjectProperties(plotLine,this.axis);}};function StackItem(axis,options,isNegative,x,stackOption){var inverted=axis.chart.inverted;this.axis=axis;this.isNegative=isNegative;this.options=options;this.x=x;this.stack=stackOption;this.alignOptions={align:options.align||(inverted?(isNegative?'left':'right'):'center'),verticalAlign:options.verticalAlign||(inverted?'middle':(isNegative?'bottom':'top')),y:pick(options.y,inverted?4:(isNegative?14:-6)),x:pick(options.x,inverted?(isNegative?-6:6):0)};this.textAlign=options.textAlign||(inverted?(isNegative?'right':'left'):'center');}\nStackItem.prototype={destroy:function(){destroyObjectProperties(this,this.axis);},setTotal:function(total){this.total=total;this.cum=total;},render:function(group){var str=this.options.formatter.call(this);if(this.label){this.label.attr({text:str,visibility:HIDDEN});}else{this.label=this.axis.chart.renderer.text(str,0,0).css(this.options.style).attr({align:this.textAlign,rotation:this.options.rotation,visibility:HIDDEN}).add(group);}},setOffset:function(xOffset,xWidth){var stackItem=this,axis=stackItem.axis,chart=axis.chart,inverted=chart.inverted,neg=this.isNegative,y=axis.translate(this.total,0,0,0,1),yZero=axis.translate(0),h=mathAbs(y-yZero),x=chart.xAxis[0].translate(this.x)+xOffset,plotHeight=chart.plotHeight,stackBox={x:inverted?(neg?y:y-h):x,y:inverted?plotHeight-x-xWidth:(neg?(plotHeight-y-h):plotHeight-y),width:inverted?h:xWidth,height:inverted?xWidth:h};if(this.label){this.label.align(this.alignOptions,null,stackBox).attr({visibility:VISIBLE});}}};function Axis(){this.init.apply(this,arguments);}\nAxis.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:'%H:%M:%S.%L',second:'%H:%M:%S',minute:'%H:%M',hour:'%H:%M',day:'%e. %b',week:'%e. %b',month:'%b \\'%y',year:'%Y'},endOnTick:false,gridLineColor:'#C0C0C0',labels:defaultLabelOptions,lineColor:'#C0D0E0',lineWidth:1,minPadding:0.01,maxPadding:0.01,minorGridLineColor:'#E0E0E0',minorGridLineWidth:1,minorTickColor:'#A0A0A0',minorTickLength:2,minorTickPosition:'outside',startOfWeek:1,startOnTick:false,tickColor:'#C0D0E0',tickLength:5,tickmarkPlacement:'between',tickPixelInterval:100,tickPosition:'outside',tickWidth:1,title:{align:'middle',style:{color:'#6D869F',fontWeight:'bold'}},type:'linear'},defaultYAxisOptions:{endOnTick:true,gridLineWidth:1,tickPixelInterval:72,showLastLabel:true,labels:{align:'right',x:-8,y:3},lineWidth:0,maxPadding:0.05,minPadding:0.05,startOnTick:true,tickWidth:0,title:{rotation:270,text:'Y-values'},stackLabels:{enabled:false,formatter:function(){return this.total;},style:defaultLabelOptions.style}},defaultLeftAxisOptions:{labels:{align:'right',x:-8,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{align:'left',x:8,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{align:'center',x:0,y:14},title:{rotation:0}},defaultTopAxisOptions:{labels:{align:'center',x:0,y:-5},title:{rotation:0}},init:function(chart,userOptions){var isXAxis=userOptions.isX,axis=this;axis.horiz=chart.inverted?!isXAxis:isXAxis;axis.isXAxis=isXAxis;axis.xOrY=isXAxis?'x':'y';axis.opposite=userOptions.opposite;axis.side=axis.horiz?(axis.opposite?0:2):(axis.opposite?1:3);axis.setOptions(userOptions);var options=this.options,type=options.type,isDatetimeAxis=type==='datetime';axis.labelFormatter=options.labels.formatter||axis.defaultLabelFormatter;axis.staggerLines=axis.horiz&&options.labels.staggerLines;axis.userOptions=userOptions;axis.minPixelPadding=0;axis.chart=chart;axis.reversed=options.reversed;axis.categories=options.categories;axis.isLog=type==='logarithmic';axis.isLinked=defined(options.linkedTo);axis.isDatetimeAxis=isDatetimeAxis;axis.ticks={};axis.minorTicks={};axis.plotLinesAndBands=[];axis.alternateBands={};axis.len=0;axis.minRange=axis.userMinRange=options.minRange||options.maxZoom;axis.range=options.range;axis.offset=options.offset||0;axis.stacks={};axis.max=null;axis.min=null;var eventType,events=axis.options.events;chart.axes.push(axis);chart[isXAxis?'xAxis':'yAxis'].push(axis);axis.series=[];if(chart.inverted&&isXAxis&&axis.reversed===UNDEFINED){axis.reversed=true;}\naxis.removePlotBand=axis.removePlotBandOrLine;axis.removePlotLine=axis.removePlotBandOrLine;axis.addPlotBand=axis.addPlotBandOrLine;axis.addPlotLine=axis.addPlotBandOrLine;for(eventType in events){addEvent(axis,eventType,events[eventType]);}\nif(axis.isLog){axis.val2lin=log2lin;axis.lin2val=lin2log;}},setOptions:function(userOptions){this.options=merge(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],merge(defaultOptions[this.isXAxis?'xAxis':'yAxis'],userOptions));},defaultLabelFormatter:function(){var axis=this.axis,value=this.value,categories=axis.categories,dateTimeLabelFormat=this.dateTimeLabelFormat,numericSymbols=defaultOptions.lang.numericSymbols,i=numericSymbols&&numericSymbols.length,multi,ret,numericSymbolDetector=axis.isLog?value:axis.tickInterval;if(categories){ret=value;}else if(dateTimeLabelFormat){ret=dateFormat(dateTimeLabelFormat,value);}else if(i&&numericSymbolDetector>=1000){while(i--&&ret===UNDEFINED){multi=Math.pow(1000,i+1);if(numericSymbolDetector>=multi&&numericSymbols[i]!==null){ret=numberFormat(value/multi,-1)+numericSymbols[i];}}}\nif(ret===UNDEFINED){if(value>=1000){ret=numberFormat(value,0);}else{ret=numberFormat(value,-1);}}\nreturn ret;},getSeriesExtremes:function(){var axis=this,chart=axis.chart,stacks=axis.stacks,posStack=[],negStack=[],i;axis.hasVisibleSeries=false;axis.dataMin=axis.dataMax=null;each(axis.series,function(series){if(series.visible||!chart.options.chart.ignoreHiddenSeries){var seriesOptions=series.options,stacking,posPointStack,negPointStack,stackKey,stackOption,negKey,xData,yData,x,y,threshold=seriesOptions.threshold,yDataLength,activeYData=[],activeCounter=0;axis.hasVisibleSeries=true;if(axis.isLog&&threshold<=0){threshold=seriesOptions.threshold=null;}\nif(axis.isXAxis){xData=series.xData;if(xData.length){axis.dataMin=mathMin(pick(axis.dataMin,xData[0]),arrayMin(xData));axis.dataMax=mathMax(pick(axis.dataMax,xData[0]),arrayMax(xData));}}else{var isNegative,pointStack,key,cropped=series.cropped,xExtremes=series.xAxis.getExtremes(),j,hasModifyValue=!!series.modifyValue;stacking=seriesOptions.stacking;axis.usePercentage=stacking==='percent';if(stacking){stackOption=seriesOptions.stack;stackKey=series.type+pick(stackOption,'');negKey='-'+stackKey;series.stackKey=stackKey;posPointStack=posStack[stackKey]||[];posStack[stackKey]=posPointStack;negPointStack=negStack[negKey]||[];negStack[negKey]=negPointStack;}\nif(axis.usePercentage){axis.dataMin=0;axis.dataMax=99;}\nxData=series.processedXData;yData=series.processedYData;yDataLength=yData.length;for(i=0;i<yDataLength;i++){x=xData[i];y=yData[i];if(y!==null&&y!==UNDEFINED){if(stacking){isNegative=y<threshold;pointStack=isNegative?negPointStack:posPointStack;key=isNegative?negKey:stackKey;y=pointStack[x]=defined(pointStack[x])?pointStack[x]+y:y;if(!stacks[key]){stacks[key]={};}\nif(!stacks[key][x]){stacks[key][x]=new StackItem(axis,axis.options.stackLabels,isNegative,x,stackOption);}\nstacks[key][x].setTotal(y);}else if(hasModifyValue){y=series.modifyValue(y);}\nif(cropped||((xData[i+1]||x)>=xExtremes.min&&(xData[i-1]||x)<=xExtremes.max)){j=y.length;if(j){while(j--){if(y[j]!==null){activeYData[activeCounter++]=y[j];}}}else{activeYData[activeCounter++]=y;}}}}\nif(!axis.usePercentage&&activeYData.length){axis.dataMin=mathMin(pick(axis.dataMin,activeYData[0]),arrayMin(activeYData));axis.dataMax=mathMax(pick(axis.dataMax,activeYData[0]),arrayMax(activeYData));}\nif(defined(threshold)){if(axis.dataMin>=threshold){axis.dataMin=threshold;axis.ignoreMinPadding=true;}else if(axis.dataMax<threshold){axis.dataMax=threshold;axis.ignoreMaxPadding=true;}}}}});},translate:function(val,backwards,cvsCoord,old,handleLog,pointPlacementBetween){var axis=this,axisLength=axis.len,sign=1,cvsOffset=0,localA=old?axis.oldTransA:axis.transA,localMin=old?axis.oldMin:axis.min,returnValue,postTranslate=axis.options.ordinal||(axis.isLog&&handleLog);if(!localA){localA=axis.transA;}\nif(cvsCoord){sign*=-1;cvsOffset=axisLength;}\nif(axis.reversed){sign*=-1;cvsOffset-=sign*axisLength;}\nif(backwards){if(axis.reversed){val=axisLength-val;}\nreturnValue=val/localA+localMin;if(postTranslate){returnValue=axis.lin2val(returnValue);}}else{if(postTranslate){val=axis.val2lin(val);}\nreturnValue=sign*(val-localMin)*localA+cvsOffset+(sign*axis.minPixelPadding)+\n(pointPlacementBetween?localA*axis.pointRange/2:0);}\nreturn returnValue;},getPlotLinePath:function(value,lineWidth,old){var axis=this,chart=axis.chart,axisLeft=axis.left,axisTop=axis.top,x1,y1,x2,y2,translatedValue=axis.translate(value,null,null,old),cHeight=(old&&chart.oldChartHeight)||chart.chartHeight,cWidth=(old&&chart.oldChartWidth)||chart.chartWidth,skip,transB=axis.transB;x1=x2=mathRound(translatedValue+transB);y1=y2=mathRound(cHeight-translatedValue-transB);if(isNaN(translatedValue)){skip=true;}else if(axis.horiz){y1=axisTop;y2=cHeight-axis.bottom;if(x1<axisLeft||x1>axisLeft+axis.width){skip=true;}}else{x1=axisLeft;x2=cWidth-axis.right;if(y1<axisTop||y1>axisTop+axis.height){skip=true;}}\nreturn skip?null:chart.renderer.crispLine([M,x1,y1,L,x2,y2],lineWidth||0);},getPlotBandPath:function(from,to){var toPath=this.getPlotLinePath(to),path=this.getPlotLinePath(from);if(path&&toPath){path.push(toPath[4],toPath[5],toPath[1],toPath[2]);}else{path=null;}\nreturn path;},getLinearTickPositions:function(tickInterval,min,max){var pos,lastPos,roundedMin=correctFloat(mathFloor(min/tickInterval)*tickInterval),roundedMax=correctFloat(mathCeil(max/tickInterval)*tickInterval),tickPositions=[];pos=roundedMin;while(pos<=roundedMax){tickPositions.push(pos);pos=correctFloat(pos+tickInterval);if(pos===lastPos){break;}\nlastPos=pos;}\nreturn tickPositions;},getLogTickPositions:function(interval,min,max,minor){var axis=this,options=axis.options,axisLength=axis.len;var positions=[];if(!minor){axis._minorAutoInterval=null;}\nif(interval>=0.5){interval=mathRound(interval);positions=axis.getLinearTickPositions(interval,min,max);}else if(interval>=0.08){var roundedMin=mathFloor(min),intermediate,i,j,len,pos,lastPos,break2;if(interval>0.3){intermediate=[1,2,4];}else if(interval>0.15){intermediate=[1,2,4,6,8];}else{intermediate=[1,2,3,4,5,6,7,8,9];}\nfor(i=roundedMin;i<max+1&&!break2;i++){len=intermediate.length;for(j=0;j<len&&!break2;j++){pos=log2lin(lin2log(i)*intermediate[j]);if(pos>min){positions.push(lastPos);}\nif(lastPos>max){break2=true;}\nlastPos=pos;}}}else{var realMin=lin2log(min),realMax=lin2log(max),tickIntervalOption=options[minor?'minorTickInterval':'tickInterval'],filteredTickIntervalOption=tickIntervalOption==='auto'?null:tickIntervalOption,tickPixelIntervalOption=options.tickPixelInterval/(minor?5:1),totalPixelLength=minor?axisLength/axis.tickPositions.length:axisLength;interval=pick(filteredTickIntervalOption,axis._minorAutoInterval,(realMax-realMin)*tickPixelIntervalOption/(totalPixelLength||1));interval=normalizeTickInterval(interval,null,math.pow(10,mathFloor(math.log(interval)/math.LN10)));positions=map(axis.getLinearTickPositions(interval,realMin,realMax),log2lin);if(!minor){axis._minorAutoInterval=interval/5;}}\nif(!minor){axis.tickInterval=interval;}\nreturn positions;},getMinorTickPositions:function(){var axis=this,tickPositions=axis.tickPositions,minorTickInterval=axis.minorTickInterval;var minorTickPositions=[],pos,i,len;if(axis.isLog){len=tickPositions.length;for(i=1;i<len;i++){minorTickPositions=minorTickPositions.concat(axis.getLogTickPositions(minorTickInterval,tickPositions[i-1],tickPositions[i],true));}}else{for(pos=axis.min+(tickPositions[0]-axis.min)%minorTickInterval;pos<=axis.max;pos+=minorTickInterval){minorTickPositions.push(pos);}}\nreturn minorTickPositions;},adjustForMinRange:function(){var axis=this,options=axis.options,min=axis.min,max=axis.max,zoomOffset,spaceAvailable=axis.dataMax-axis.dataMin>=axis.minRange,closestDataRange,i,distance,xData,loopLength,minArgs,maxArgs;if(axis.isXAxis&&axis.minRange===UNDEFINED&&!axis.isLog){if(defined(options.min)||defined(options.max)){axis.minRange=null;}else{each(axis.series,function(series){xData=series.xData;loopLength=series.xIncrement?1:xData.length-1;for(i=loopLength;i>0;i--){distance=xData[i]-xData[i-1];if(closestDataRange===UNDEFINED||distance<closestDataRange){closestDataRange=distance;}}});axis.minRange=mathMin(closestDataRange*5,axis.dataMax-axis.dataMin);}}\nif(max-min<axis.minRange){var minRange=axis.minRange;zoomOffset=(minRange-max+min)/2;minArgs=[min-zoomOffset,pick(options.min,min-zoomOffset)];if(spaceAvailable){minArgs[2]=axis.dataMin;}\nmin=arrayMax(minArgs);maxArgs=[min+minRange,pick(options.max,min+minRange)];if(spaceAvailable){maxArgs[2]=axis.dataMax;}\nmax=arrayMin(maxArgs);if(max-min<minRange){minArgs[0]=max-minRange;minArgs[1]=pick(options.min,max-minRange);min=arrayMax(minArgs);}}\naxis.min=min;axis.max=max;},setAxisTranslation:function(){var axis=this,range=axis.max-axis.min,pointRange=0,closestPointRange,minPointOffset=0,pointRangePadding=0,transA=axis.transA;if(axis.isXAxis){if(axis.isLinked){minPointOffset=axis.linkedParent.minPointOffset;}else{each(axis.series,function(series){var seriesPointRange=series.pointRange,pointPlacement=series.options.pointPlacement,seriesClosestPointRange=series.closestPointRange;pointRange=mathMax(pointRange,seriesPointRange);minPointOffset=mathMax(minPointOffset,pointPlacement?0:seriesPointRange/2);pointRangePadding=mathMax(pointRangePadding,pointPlacement==='on'?0:seriesPointRange);if(!series.noSharedTooltip&&defined(seriesClosestPointRange)){closestPointRange=defined(closestPointRange)?mathMin(closestPointRange,seriesClosestPointRange):seriesClosestPointRange;}});}\naxis.minPointOffset=minPointOffset;axis.pointRange=pointRange;axis.closestPointRange=closestPointRange;}\naxis.oldTransA=transA;axis.translationSlope=axis.transA=transA=axis.len/((range+pointRangePadding)||1);axis.transB=axis.horiz?axis.left:axis.bottom;axis.minPixelPadding=transA*minPointOffset;},setTickPositions:function(secondPass){var axis=this,chart=axis.chart,options=axis.options,isLog=axis.isLog,isDatetimeAxis=axis.isDatetimeAxis,isXAxis=axis.isXAxis,isLinked=axis.isLinked,tickPositioner=axis.options.tickPositioner,magnitude,maxPadding=options.maxPadding,minPadding=options.minPadding,length,linkedParentExtremes,tickIntervalOption=options.tickInterval,minTickIntervalOption=options.minTickInterval,tickPixelIntervalOption=options.tickPixelInterval,tickPositions,categories=axis.categories;if(isLinked){axis.linkedParent=chart[isXAxis?'xAxis':'yAxis'][options.linkedTo];linkedParentExtremes=axis.linkedParent.getExtremes();axis.min=pick(linkedParentExtremes.min,linkedParentExtremes.dataMin);axis.max=pick(linkedParentExtremes.max,linkedParentExtremes.dataMax);if(options.type!==axis.linkedParent.options.type){error(11,1);}}else{axis.min=pick(axis.userMin,options.min,axis.dataMin);axis.max=pick(axis.userMax,options.max,axis.dataMax);}\nif(isLog){if(!secondPass&&mathMin(axis.min,pick(axis.dataMin,axis.min))<=0){error(10,1);}\naxis.min=correctFloat(log2lin(axis.min));axis.max=correctFloat(log2lin(axis.max));}\nif(axis.range){axis.userMin=axis.min=mathMax(axis.min,axis.max-axis.range);axis.userMax=axis.max;if(secondPass){axis.range=null;}}\naxis.adjustForMinRange();if(!categories&&!axis.usePercentage&&!isLinked&&defined(axis.min)&&defined(axis.max)){length=(axis.max-axis.min)||1;if(!defined(options.min)&&!defined(axis.userMin)&&minPadding&&(axis.dataMin<0||!axis.ignoreMinPadding)){axis.min-=length*minPadding;}\nif(!defined(options.max)&&!defined(axis.userMax)&&maxPadding&&(axis.dataMax>0||!axis.ignoreMaxPadding)){axis.max+=length*maxPadding;}}\nif(axis.min===axis.max||axis.min===undefined||axis.max===undefined){axis.tickInterval=1;}else if(isLinked&&!tickIntervalOption&&tickPixelIntervalOption===axis.linkedParent.options.tickPixelInterval){axis.tickInterval=axis.linkedParent.tickInterval;}else{axis.tickInterval=pick(tickIntervalOption,categories?1:(axis.max-axis.min)*tickPixelIntervalOption/(axis.len||1));}\nif(isXAxis&&!secondPass){each(axis.series,function(series){series.processData(axis.min!==axis.oldMin||axis.max!==axis.oldMax);});}\naxis.setAxisTranslation(secondPass);if(axis.beforeSetTickPositions){axis.beforeSetTickPositions();}\nif(axis.postProcessTickInterval){axis.tickInterval=axis.postProcessTickInterval(axis.tickInterval);}\nif(!tickIntervalOption&&axis.tickInterval<minTickIntervalOption){axis.tickInterval=minTickIntervalOption;}\nif(!isDatetimeAxis&&!isLog){magnitude=math.pow(10,mathFloor(math.log(axis.tickInterval)/math.LN10));if(!tickIntervalOption){axis.tickInterval=normalizeTickInterval(axis.tickInterval,null,magnitude,options);}}\nvar minorTickNum=options.minorTickNum||5;axis.minorTickInterval=options.minorTickInterval==='auto'&&axis.tickInterval?axis.tickInterval/minorTickNum:options.minorTickInterval;axis.tickPositions=tickPositions=options.tickPositions||(tickPositioner&&tickPositioner.apply(axis,[axis.min,axis.max]));if(!tickPositions){if(isDatetimeAxis){tickPositions=(axis.getNonLinearTimeTicks||getTimeTicks)(normalizeTimeTickInterval(axis.tickInterval,options.units),axis.min,axis.max,options.startOfWeek,axis.ordinalPositions,axis.closestPointRange,true);}else if(isLog){tickPositions=axis.getLogTickPositions(axis.tickInterval,axis.min,axis.max);}else{tickPositions=axis.getLinearTickPositions(axis.tickInterval,axis.min,axis.max);}\naxis.tickPositions=tickPositions;}\nif(!isLinked){var roundedMin=tickPositions[0],roundedMax=tickPositions[tickPositions.length-1],minPointOffset=axis.minPointOffset||0;if(options.startOnTick){axis.min=roundedMin;}else if(axis.min-minPointOffset>roundedMin){tickPositions.shift();}\nif(options.endOnTick){axis.max=roundedMax;}else if(axis.max+minPointOffset<roundedMax){tickPositions.pop();}}},setMaxTicks:function(){var chart=this.chart,maxTicks=chart.maxTicks,tickPositions=this.tickPositions,xOrY=this.xOrY;if(!maxTicks){maxTicks={x:0,y:0};}\nif(!this.isLinked&&!this.isDatetimeAxis&&tickPositions.length>maxTicks[xOrY]&&this.options.alignTicks!==false){maxTicks[xOrY]=tickPositions.length;}\nchart.maxTicks=maxTicks;},adjustTickAmount:function(){var axis=this,chart=axis.chart,xOrY=axis.xOrY,tickPositions=axis.tickPositions,maxTicks=chart.maxTicks;if(maxTicks&&maxTicks[xOrY]&&!axis.isDatetimeAxis&&!axis.categories&&!axis.isLinked&&axis.options.alignTicks!==false){var oldTickAmount=axis.tickAmount,calculatedTickAmount=tickPositions.length,tickAmount;axis.tickAmount=tickAmount=maxTicks[xOrY];if(calculatedTickAmount<tickAmount){while(tickPositions.length<tickAmount){tickPositions.push(correctFloat(tickPositions[tickPositions.length-1]+axis.tickInterval));}\naxis.transA*=(calculatedTickAmount-1)/(tickAmount-1);axis.max=tickPositions[tickPositions.length-1];}\nif(defined(oldTickAmount)&&tickAmount!==oldTickAmount){axis.isDirty=true;}}},setScale:function(){var axis=this,stacks=axis.stacks,type,i,isDirtyData,isDirtyAxisLength;axis.oldMin=axis.min;axis.oldMax=axis.max;axis.oldAxisLength=axis.len;axis.setAxisSize();isDirtyAxisLength=axis.len!==axis.oldAxisLength;each(axis.series,function(series){if(series.isDirtyData||series.isDirty||series.xAxis.isDirty){isDirtyData=true;}});if(isDirtyAxisLength||isDirtyData||axis.isLinked||axis.userMin!==axis.oldUserMin||axis.userMax!==axis.oldUserMax){axis.getSeriesExtremes();axis.setTickPositions();axis.oldUserMin=axis.userMin;axis.oldUserMax=axis.userMax;if(!axis.isDirty){axis.isDirty=isDirtyAxisLength||axis.min!==axis.oldMin||axis.max!==axis.oldMax;}}\nif(!axis.isXAxis){for(type in stacks){for(i in stacks[type]){stacks[type][i].cum=stacks[type][i].total;}}}\naxis.setMaxTicks();},setExtremes:function(newMin,newMax,redraw,animation,eventArguments){var axis=this,chart=axis.chart;redraw=pick(redraw,true);eventArguments=extend(eventArguments,{min:newMin,max:newMax});fireEvent(axis,'setExtremes',eventArguments,function(){axis.userMin=newMin;axis.userMax=newMax;axis.isDirtyExtremes=true;if(redraw){chart.redraw(animation);}});},setAxisSize:function(){var axis=this,chart=axis.chart,options=axis.options;var offsetLeft=options.offsetLeft||0,offsetRight=options.offsetRight||0;axis.left=pick(options.left,chart.plotLeft+offsetLeft);axis.top=pick(options.top,chart.plotTop);axis.width=pick(options.width,chart.plotWidth-offsetLeft+offsetRight);axis.height=pick(options.height,chart.plotHeight);axis.bottom=chart.chartHeight-axis.height-axis.top;axis.right=chart.chartWidth-axis.width-axis.left;axis.len=mathMax(axis.horiz?axis.width:axis.height,0);},getExtremes:function(){var axis=this,isLog=axis.isLog;return{min:isLog?correctFloat(lin2log(axis.min)):axis.min,max:isLog?correctFloat(lin2log(axis.max)):axis.max,dataMin:axis.dataMin,dataMax:axis.dataMax,userMin:axis.userMin,userMax:axis.userMax};},getThreshold:function(threshold){var axis=this,isLog=axis.isLog;var realMin=isLog?lin2log(axis.min):axis.min,realMax=isLog?lin2log(axis.max):axis.max;if(realMin>threshold||threshold===null){threshold=realMin;}else if(realMax<threshold){threshold=realMax;}\nreturn axis.translate(threshold,0,1,0,1);},addPlotBandOrLine:function(options){var obj=new PlotLineOrBand(this,options).render();this.plotLinesAndBands.push(obj);return obj;},getOffset:function(){var axis=this,chart=axis.chart,renderer=chart.renderer,options=axis.options,tickPositions=axis.tickPositions,ticks=axis.ticks,horiz=axis.horiz,side=axis.side,hasData,showAxis,titleOffset=0,titleOffsetOption,titleMargin=0,axisTitleOptions=options.title,labelOptions=options.labels,labelOffset=0,axisOffset=chart.axisOffset,directionFactor=[-1,1,1,-1][side],n;axis.hasData=hasData=(axis.hasVisibleSeries||(defined(axis.min)&&defined(axis.max)&&!!tickPositions));axis.showAxis=showAxis=hasData||pick(options.showEmpty,true);if(!axis.axisGroup){axis.gridGroup=renderer.g('grid').attr({zIndex:options.gridZIndex||1}).add();axis.axisGroup=renderer.g('axis').attr({zIndex:options.zIndex||2}).add();axis.labelGroup=renderer.g('axis-labels').attr({zIndex:labelOptions.zIndex||7}).add();}\nif(hasData||axis.isLinked){each(tickPositions,function(pos){if(!ticks[pos]){ticks[pos]=new Tick(axis,pos);}else{ticks[pos].addLabel();}});each(tickPositions,function(pos){if(side===0||side===2||{1:'left',3:'right'}[side]===labelOptions.align){labelOffset=mathMax(ticks[pos].getLabelSize(),labelOffset);}});if(axis.staggerLines){labelOffset+=(axis.staggerLines-1)*16;}}else{for(n in ticks){ticks[n].destroy();delete ticks[n];}}\nif(axisTitleOptions&&axisTitleOptions.text){if(!axis.axisTitle){axis.axisTitle=renderer.text(axisTitleOptions.text,0,0,axisTitleOptions.useHTML).attr({zIndex:7,rotation:axisTitleOptions.rotation||0,align:axisTitleOptions.textAlign||{low:'left',middle:'center',high:'right'}[axisTitleOptions.align]}).css(axisTitleOptions.style).add(axis.axisGroup);axis.axisTitle.isNew=true;}\nif(showAxis){titleOffset=axis.axisTitle.getBBox()[horiz?'height':'width'];titleMargin=pick(axisTitleOptions.margin,horiz?5:10);titleOffsetOption=axisTitleOptions.offset;}\naxis.axisTitle[showAxis?'show':'hide']();}\naxis.offset=directionFactor*pick(options.offset,axisOffset[side]);axis.axisTitleMargin=pick(titleOffsetOption,labelOffset+titleMargin+\n(side!==2&&labelOffset&&directionFactor*options.labels[horiz?'y':'x']));axisOffset[side]=mathMax(axisOffset[side],axis.axisTitleMargin+titleOffset+directionFactor*axis.offset);},getLinePath:function(lineWidth){var chart=this.chart,opposite=this.opposite,offset=this.offset,horiz=this.horiz,lineLeft=this.left+(opposite?this.width:0)+offset,lineTop=chart.chartHeight-this.bottom-(opposite?this.height:0)+offset;return chart.renderer.crispLine([M,horiz?this.left:lineLeft,horiz?lineTop:this.top,L,horiz?chart.chartWidth-this.right:lineLeft,horiz?lineTop:chart.chartHeight-this.bottom],lineWidth);},getTitlePosition:function(){var horiz=this.horiz,axisLeft=this.left,axisTop=this.top,axisLength=this.len,axisTitleOptions=this.options.title,margin=horiz?axisLeft:axisTop,opposite=this.opposite,offset=this.offset,fontSize=pInt(axisTitleOptions.style.fontSize||12),alongAxis={low:margin+(horiz?0:axisLength),middle:margin+axisLength/2,high:margin+(horiz?axisLength:0)}[axisTitleOptions.align],offAxis=(horiz?axisTop+this.height:axisLeft)+\n(horiz?1:-1)*(opposite?-1:1)*this.axisTitleMargin+\n(this.side===2?fontSize:0);return{x:horiz?alongAxis:offAxis+(opposite?this.width:0)+offset+\n(axisTitleOptions.x||0),y:horiz?offAxis-(opposite?this.height:0)+offset:alongAxis+(axisTitleOptions.y||0)};},render:function(){var axis=this,chart=axis.chart,renderer=chart.renderer,options=axis.options,isLog=axis.isLog,isLinked=axis.isLinked,tickPositions=axis.tickPositions,axisTitle=axis.axisTitle,stacks=axis.stacks,ticks=axis.ticks,minorTicks=axis.minorTicks,alternateBands=axis.alternateBands,stackLabelOptions=options.stackLabels,alternateGridColor=options.alternateGridColor,lineWidth=options.lineWidth,linePath,hasRendered=chart.hasRendered,slideInTicks=hasRendered&&defined(axis.oldMin)&&!isNaN(axis.oldMin),hasData=axis.hasData,showAxis=axis.showAxis,from,to;if(hasData||isLinked){if(axis.minorTickInterval&&!axis.categories){each(axis.getMinorTickPositions(),function(pos){if(!minorTicks[pos]){minorTicks[pos]=new Tick(axis,pos,'minor');}\nif(slideInTicks&&minorTicks[pos].isNew){minorTicks[pos].render(null,true);}\nminorTicks[pos].isActive=true;minorTicks[pos].render();});}\nif(tickPositions.length>0){each(tickPositions.slice(1).concat([tickPositions[0]]),function(pos,i){i=(i===tickPositions.length-1)?0:i+1;if(!isLinked||(pos>=axis.min&&pos<=axis.max)){if(!ticks[pos]){ticks[pos]=new Tick(axis,pos);}\nif(slideInTicks&&ticks[pos].isNew){ticks[pos].render(i,true);}\nticks[pos].isActive=true;ticks[pos].render(i);}});}\nif(alternateGridColor){each(tickPositions,function(pos,i){if(i%2===0&&pos<axis.max){if(!alternateBands[pos]){alternateBands[pos]=new PlotLineOrBand(axis);}\nfrom=pos;to=tickPositions[i+1]!==UNDEFINED?tickPositions[i+1]:axis.max;alternateBands[pos].options={from:isLog?lin2log(from):from,to:isLog?lin2log(to):to,color:alternateGridColor};alternateBands[pos].render();alternateBands[pos].isActive=true;}});}\nif(!axis._addedPlotLB){each((options.plotLines||[]).concat(options.plotBands||[]),function(plotLineOptions){axis.addPlotBandOrLine(plotLineOptions);});axis._addedPlotLB=true;}}\neach([ticks,minorTicks,alternateBands],function(coll){var pos;for(pos in coll){if(!coll[pos].isActive){coll[pos].destroy();delete coll[pos];}else{coll[pos].isActive=false;}}});if(lineWidth){linePath=axis.getLinePath(lineWidth);if(!axis.axisLine){axis.axisLine=renderer.path(linePath).attr({stroke:options.lineColor,'stroke-width':lineWidth,zIndex:7}).add(axis.axisGroup);}else{axis.axisLine.animate({d:linePath});}\naxis.axisLine[showAxis?'show':'hide']();}\nif(axisTitle&&showAxis){axisTitle[axisTitle.isNew?'attr':'animate'](axis.getTitlePosition());axisTitle.isNew=false;}\nif(stackLabelOptions&&stackLabelOptions.enabled){var stackKey,oneStack,stackCategory,stackTotalGroup=axis.stackTotalGroup;if(!stackTotalGroup){axis.stackTotalGroup=stackTotalGroup=renderer.g('stack-labels').attr({visibility:VISIBLE,zIndex:6}).add();}\nstackTotalGroup.translate(chart.plotLeft,chart.plotTop);for(stackKey in stacks){oneStack=stacks[stackKey];for(stackCategory in oneStack){oneStack[stackCategory].render(stackTotalGroup);}}}\naxis.isDirty=false;},removePlotBandOrLine:function(id){var plotLinesAndBands=this.plotLinesAndBands,i=plotLinesAndBands.length;while(i--){if(plotLinesAndBands[i].id===id){plotLinesAndBands[i].destroy();}}},setTitle:function(newTitleOptions,redraw){var chart=this.chart,options=this.options,axisTitle=this.axisTitle;options.title=merge(options.title,newTitleOptions);this.axisTitle=axisTitle&&axisTitle.destroy();this.isDirty=true;if(pick(redraw,true)){chart.redraw();}},redraw:function(){var axis=this,chart=axis.chart;if(chart.tracker.resetTracker){chart.tracker.resetTracker(true);}\naxis.render();each(axis.plotLinesAndBands,function(plotLine){plotLine.render();});each(axis.series,function(series){series.isDirty=true;});},setCategories:function(newCategories,doRedraw){var axis=this,chart=axis.chart;axis.categories=axis.userOptions.categories=newCategories;each(axis.series,function(series){series.translate();series.setTooltipPoints(true);});axis.isDirty=true;if(pick(doRedraw,true)){chart.redraw();}},destroy:function(){var axis=this,stacks=axis.stacks,stackKey;removeEvent(axis);for(stackKey in stacks){destroyObjectProperties(stacks[stackKey]);stacks[stackKey]=null;}\neach([axis.ticks,axis.minorTicks,axis.alternateBands,axis.plotLinesAndBands],function(coll){destroyObjectProperties(coll);});each(['stackTotalGroup','axisLine','axisGroup','gridGroup','labelGroup','axisTitle'],function(prop){if(axis[prop]){axis[prop]=axis[prop].destroy();}});}};function Tooltip(chart,options){var borderWidth=options.borderWidth,style=options.style,padding=pInt(style.padding);this.chart=chart;this.options=options;this.crosshairs=[];this.now={x:0,y:0};this.isHidden=true;this.label=chart.renderer.label('',0,0,options.shape,null,null,options.useHTML,null,'tooltip').attr({padding:padding,fill:options.backgroundColor,'stroke-width':borderWidth,r:options.borderRadius,zIndex:8}).css(style).css({padding:0}).hide().add();if(!useCanVG){this.label.shadow(options.shadow);}\nthis.shared=options.shared;}\nTooltip.prototype={destroy:function(){each(this.crosshairs,function(crosshair){if(crosshair){crosshair.destroy();}});if(this.label){this.label=this.label.destroy();}},move:function(x,y,anchorX,anchorY){var tooltip=this,now=tooltip.now,animate=tooltip.options.animation!==false&&!tooltip.isHidden;extend(now,{x:animate?(2*now.x+x)/3:x,y:animate?(now.y+y)/2:y,anchorX:animate?(2*now.anchorX+anchorX)/3:anchorX,anchorY:animate?(now.anchorY+anchorY)/2:anchorY});tooltip.label.attr(now);if(animate&&(mathAbs(x-now.x)>1||mathAbs(y-now.y)>1)){tooltip.tooltipTick=function(){tooltip.move(x,y,anchorX,anchorY);};}else{tooltip.tooltipTick=null;}},hide:function(){if(!this.isHidden){var hoverPoints=this.chart.hoverPoints;this.label.hide();if(hoverPoints){each(hoverPoints,function(point){point.setState();});}\nthis.chart.hoverPoints=null;this.isHidden=true;}},hideCrosshairs:function(){each(this.crosshairs,function(crosshair){if(crosshair){crosshair.hide();}});},getAnchor:function(points,mouseEvent){var ret,chart=this.chart,inverted=chart.inverted,plotX=0,plotY=0,yAxis;points=splat(points);ret=points[0].tooltipPos;if(!ret){each(points,function(point){yAxis=point.series.yAxis;plotX+=point.plotX;plotY+=(point.plotLow?(point.plotLow+point.plotHigh)/2:point.plotY)+\n(!inverted&&yAxis?yAxis.top-chart.plotTop:0);});plotX/=points.length;plotY/=points.length;ret=[inverted?chart.plotWidth-plotY:plotX,this.shared&&!inverted&&points.length>1&&mouseEvent?mouseEvent.chartY-chart.plotTop:inverted?chart.plotHeight-plotX:plotY];}\nreturn map(ret,mathRound);},getPosition:function(boxWidth,boxHeight,point){var chart=this.chart,plotLeft=chart.plotLeft,plotTop=chart.plotTop,plotWidth=chart.plotWidth,plotHeight=chart.plotHeight,distance=pick(this.options.distance,12),pointX=point.plotX,pointY=point.plotY,x=pointX+plotLeft+(chart.inverted?distance:-boxWidth-distance),y=pointY-boxHeight+plotTop+15,alignedRight;if(x<7){x=plotLeft+pointX+distance;}\nif((x+boxWidth)>(plotLeft+plotWidth)){x-=(x+boxWidth)-(plotLeft+plotWidth);y=pointY-boxHeight+plotTop-distance;alignedRight=true;}\nif(y<plotTop+5){y=plotTop+5;if(alignedRight&&pointY>=y&&pointY<=(y+boxHeight)){y=pointY+plotTop+distance;}}\nif(y+boxHeight>plotTop+plotHeight){y=mathMax(plotTop,plotTop+plotHeight-boxHeight-distance);}\nreturn{x:x,y:y};},refresh:function(point,mouseEvent){var tooltip=this,chart=tooltip.chart,label=tooltip.label,options=tooltip.options;function defaultFormatter(){var pThis=this,items=pThis.points||splat(pThis),series=items[0].series,s;s=[series.tooltipHeaderFormatter(items[0].key)];each(items,function(item){series=item.series;s.push((series.tooltipFormatter&&series.tooltipFormatter(item))||item.point.tooltipFormatter(series.tooltipOptions.pointFormat));});s.push(options.footerFormat||'');return s.join('');}\nvar x,y,show,anchor,textConfig={},text,pointConfig=[],formatter=options.formatter||defaultFormatter,hoverPoints=chart.hoverPoints,placedTooltipPoint,borderColor,crosshairsOptions=options.crosshairs,shared=tooltip.shared,currentSeries;anchor=tooltip.getAnchor(point,mouseEvent);x=anchor[0];y=anchor[1];if(shared&&!(point.series&&point.series.noSharedTooltip)){chart.hoverPoints=point;if(hoverPoints){each(hoverPoints,function(point){point.setState();});}\neach(point,function(item){item.setState(HOVER_STATE);pointConfig.push(item.getLabelConfig());});textConfig={x:point[0].category,y:point[0].y};textConfig.points=pointConfig;point=point[0];}else{textConfig=point.getLabelConfig();}\ntext=formatter.call(textConfig);currentSeries=point.series;show=shared||!currentSeries.isCartesian||currentSeries.tooltipOutsidePlot||chart.isInsidePlot(x,y);if(text===false||!show){this.hide();}else{if(tooltip.isHidden){label.show();}\nlabel.attr({text:text});borderColor=options.borderColor||point.color||currentSeries.color||'#606060';label.attr({stroke:borderColor});placedTooltipPoint=(options.positioner||tooltip.getPosition).call(tooltip,label.width,label.height,{plotX:x,plotY:y});tooltip.move(mathRound(placedTooltipPoint.x),mathRound(placedTooltipPoint.y),x+chart.plotLeft,y+chart.plotTop);tooltip.isHidden=false;}\nif(crosshairsOptions){crosshairsOptions=splat(crosshairsOptions);var path,i=crosshairsOptions.length,attribs,axis;while(i--){axis=point.series[i?'yAxis':'xAxis'];if(crosshairsOptions[i]&&axis){path=axis.getPlotLinePath(i?pick(point.stackY,point.y):point.x,1);if(tooltip.crosshairs[i]){tooltip.crosshairs[i].attr({d:path,visibility:VISIBLE});}else{attribs={'stroke-width':crosshairsOptions[i].width||1,stroke:crosshairsOptions[i].color||'#C0C0C0',zIndex:crosshairsOptions[i].zIndex||2};if(crosshairsOptions[i].dashStyle){attribs.dashstyle=crosshairsOptions[i].dashStyle;}\ntooltip.crosshairs[i]=chart.renderer.path(path).attr(attribs).add();}}}}\nfireEvent(chart,'tooltipRefresh',{text:text,x:x+chart.plotLeft,y:y+chart.plotTop,borderColor:borderColor});},tick:function(){if(this.tooltipTick){this.tooltipTick();}}};function MouseTracker(chart,options){var zoomType=useCanVG?'':options.chart.zoomType;this.zoomX=/x/.test(zoomType);this.zoomY=/y/.test(zoomType);this.options=options;this.chart=chart;this.init(chart,options.tooltip);}\nMouseTracker.prototype={normalizeMouseEvent:function(e){var chartPosition,chartX,chartY,ePos;e=e||win.event;if(!e.target){e.target=e.srcElement;}\ne=washMouseEvent(e);ePos=e.touches?e.touches.item(0):e;this.chartPosition=chartPosition=offset(this.chart.container);if(ePos.pageX===UNDEFINED){chartX=e.x;chartY=e.y;}else{chartX=ePos.pageX-chartPosition.left;chartY=ePos.pageY-chartPosition.top;}\nreturn extend(e,{chartX:mathRound(chartX),chartY:mathRound(chartY)});},getMouseCoordinates:function(e){var coordinates={xAxis:[],yAxis:[]},chart=this.chart;each(chart.axes,function(axis){var isXAxis=axis.isXAxis,isHorizontal=chart.inverted?!isXAxis:isXAxis;coordinates[isXAxis?'xAxis':'yAxis'].push({axis:axis,value:axis.translate((isHorizontal?e.chartX-chart.plotLeft:axis.top+axis.len-e.chartY)-axis.minPixelPadding,true)});});return coordinates;},getIndex:function(e){var chart=this.chart;return chart.inverted?chart.plotHeight+chart.plotTop-e.chartY:e.chartX-chart.plotLeft;},onmousemove:function(e){var mouseTracker=this,chart=mouseTracker.chart,series=chart.series,tooltip=chart.tooltip,point,points,hoverPoint=chart.hoverPoint,hoverSeries=chart.hoverSeries,i,j,distance=chart.chartWidth,index=mouseTracker.getIndex(e);if(tooltip&&mouseTracker.options.tooltip.shared&&!(hoverSeries&&hoverSeries.noSharedTooltip)){points=[];i=series.length;for(j=0;j<i;j++){if(series[j].visible&&series[j].options.enableMouseTracking!==false&&!series[j].noSharedTooltip&&series[j].tooltipPoints.length){point=series[j].tooltipPoints[index];point._dist=mathAbs(index-point[series[j].xAxis.tooltipPosName||'plotX']);distance=mathMin(distance,point._dist);points.push(point);}}\ni=points.length;while(i--){if(points[i]._dist>distance){points.splice(i,1);}}\nif(points.length&&(points[0].plotX!==mouseTracker.hoverX)){tooltip.refresh(points,e);mouseTracker.hoverX=points[0].plotX;}}\nif(hoverSeries&&hoverSeries.tracker){point=hoverSeries.tooltipPoints[index];if(point&&point!==hoverPoint){point.onMouseOver();}}},resetTracker:function(allowMove){var mouseTracker=this,chart=mouseTracker.chart,hoverSeries=chart.hoverSeries,hoverPoint=chart.hoverPoint,tooltip=chart.tooltip,tooltipPoints=tooltip&&tooltip.shared?chart.hoverPoints:hoverPoint;allowMove=allowMove&&tooltip&&tooltipPoints;if(allowMove&&splat(tooltipPoints)[0].plotX===UNDEFINED){allowMove=false;}\nif(allowMove){tooltip.refresh(tooltipPoints);}else{if(hoverPoint){hoverPoint.onMouseOut();}\nif(hoverSeries){hoverSeries.onMouseOut();}\nif(tooltip){tooltip.hide();tooltip.hideCrosshairs();}\nmouseTracker.hoverX=null;}},setDOMEvents:function(){var lastWasOutsidePlot=true,mouseTracker=this,chart=mouseTracker.chart,container=chart.container,hasDragged,zoomHor=(mouseTracker.zoomX&&!chart.inverted)||(mouseTracker.zoomY&&chart.inverted),zoomVert=(mouseTracker.zoomY&&!chart.inverted)||(mouseTracker.zoomX&&chart.inverted);function drop(){if(mouseTracker.selectionMarker){var selectionData={xAxis:[],yAxis:[]},selectionBox=mouseTracker.selectionMarker.getBBox(),selectionLeft=selectionBox.x-chart.plotLeft,selectionTop=selectionBox.y-chart.plotTop,runZoom;if(hasDragged){each(chart.axes,function(axis){if(axis.options.zoomEnabled!==false){var isXAxis=axis.isXAxis,isHorizontal=chart.inverted?!isXAxis:isXAxis,selectionMin=axis.translate(isHorizontal?selectionLeft:chart.plotHeight-selectionTop-selectionBox.height,true,0,0,1),selectionMax=axis.translate((isHorizontal?selectionLeft+selectionBox.width:chart.plotHeight-selectionTop)-\n2*axis.minPixelPadding,true,0,0,1);if(!isNaN(selectionMin)&&!isNaN(selectionMax)){selectionData[isXAxis?'xAxis':'yAxis'].push({axis:axis,min:mathMin(selectionMin,selectionMax),max:mathMax(selectionMin,selectionMax)});runZoom=true;}}});if(runZoom){fireEvent(chart,'selection',selectionData,function(args){chart.zoom(args);});}}\nmouseTracker.selectionMarker=mouseTracker.selectionMarker.destroy();}\nif(chart){css(container,{cursor:'auto'});chart.cancelClick=hasDragged;chart.mouseIsDown=hasDragged=false;}\nremoveEvent(doc,hasTouch?'touchend':'mouseup',drop);}\nmouseTracker.hideTooltipOnMouseMove=function(e){e=washMouseEvent(e);if(mouseTracker.chartPosition&&chart.hoverSeries&&chart.hoverSeries.isCartesian&&!chart.isInsidePlot(e.pageX-mouseTracker.chartPosition.left-chart.plotLeft,e.pageY-mouseTracker.chartPosition.top-chart.plotTop)){mouseTracker.resetTracker();}};mouseTracker.hideTooltipOnMouseLeave=function(){mouseTracker.resetTracker();mouseTracker.chartPosition=null;};container.onmousedown=function(e){e=mouseTracker.normalizeMouseEvent(e);if(!hasTouch&&e.preventDefault){e.preventDefault();}\nchart.mouseIsDown=true;chart.cancelClick=false;chart.mouseDownX=mouseTracker.mouseDownX=e.chartX;mouseTracker.mouseDownY=e.chartY;addEvent(doc,hasTouch?'touchend':'mouseup',drop);};var mouseMove=function(e){if(e&&e.touches&&e.touches.length>1){return;}\ne=mouseTracker.normalizeMouseEvent(e);if(!hasTouch){e.returnValue=false;}\nvar chartX=e.chartX,chartY=e.chartY,isOutsidePlot=!chart.isInsidePlot(chartX-chart.plotLeft,chartY-chart.plotTop);if(hasTouch&&e.type==='touchstart'){if(attr(e.target,'isTracker')){if(!chart.runTrackerClick){e.preventDefault();}}else if(!chart.runChartClick&&!isOutsidePlot){e.preventDefault();}}\nif(isOutsidePlot){if(chartX<chart.plotLeft){chartX=chart.plotLeft;}else if(chartX>chart.plotLeft+chart.plotWidth){chartX=chart.plotLeft+chart.plotWidth;}\nif(chartY<chart.plotTop){chartY=chart.plotTop;}else if(chartY>chart.plotTop+chart.plotHeight){chartY=chart.plotTop+chart.plotHeight;}}\nif(chart.mouseIsDown&&e.type!=='touchstart'){hasDragged=Math.sqrt(Math.pow(mouseTracker.mouseDownX-chartX,2)+\nMath.pow(mouseTracker.mouseDownY-chartY,2));if(hasDragged>10){var clickedInside=chart.isInsidePlot(mouseTracker.mouseDownX-chart.plotLeft,mouseTracker.mouseDownY-chart.plotTop);if(chart.hasCartesianSeries&&(mouseTracker.zoomX||mouseTracker.zoomY)&&clickedInside){if(!mouseTracker.selectionMarker){mouseTracker.selectionMarker=chart.renderer.rect(chart.plotLeft,chart.plotTop,zoomHor?1:chart.plotWidth,zoomVert?1:chart.plotHeight,0).attr({fill:mouseTracker.options.chart.selectionMarkerFill||'rgba(69,114,167,0.25)',zIndex:7}).add();}}\nif(mouseTracker.selectionMarker&&zoomHor){var xSize=chartX-mouseTracker.mouseDownX;mouseTracker.selectionMarker.attr({width:mathAbs(xSize),x:(xSize>0?0:xSize)+mouseTracker.mouseDownX});}\nif(mouseTracker.selectionMarker&&zoomVert){var ySize=chartY-mouseTracker.mouseDownY;mouseTracker.selectionMarker.attr({height:mathAbs(ySize),y:(ySize>0?0:ySize)+mouseTracker.mouseDownY});}\nif(clickedInside&&!mouseTracker.selectionMarker&&mouseTracker.options.chart.panning){chart.pan(chartX);}}}\nif(!isOutsidePlot){mouseTracker.onmousemove(e);}\nlastWasOutsidePlot=isOutsidePlot;return isOutsidePlot||!chart.hasCartesianSeries;};container.onmousemove=mouseMove;addEvent(container,'mouseleave',mouseTracker.hideTooltipOnMouseLeave);addEvent(doc,'mousemove',mouseTracker.hideTooltipOnMouseMove);container.ontouchstart=function(e){if(mouseTracker.zoomX||mouseTracker.zoomY){container.onmousedown(e);}\nmouseMove(e);};container.ontouchmove=mouseMove;container.ontouchend=function(){if(hasDragged){mouseTracker.resetTracker();}};container.onclick=function(e){var hoverPoint=chart.hoverPoint,plotX,plotY;e=mouseTracker.normalizeMouseEvent(e);e.cancelBubble=true;if(!chart.cancelClick){if(hoverPoint&&(attr(e.target,'isTracker')||attr(e.target.parentNode,'isTracker'))){plotX=hoverPoint.plotX;plotY=hoverPoint.plotY;extend(hoverPoint,{pageX:mouseTracker.chartPosition.left+chart.plotLeft+\n(chart.inverted?chart.plotWidth-plotY:plotX),pageY:mouseTracker.chartPosition.top+chart.plotTop+\n(chart.inverted?chart.plotHeight-plotX:plotY)});fireEvent(hoverPoint.series,'click',extend(e,{point:hoverPoint}));hoverPoint.firePointEvent('click',e);}else{extend(e,mouseTracker.getMouseCoordinates(e));if(chart.isInsidePlot(e.chartX-chart.plotLeft,e.chartY-chart.plotTop)){fireEvent(chart,'click',e);}}}};},destroy:function(){var mouseTracker=this,chart=mouseTracker.chart,container=chart.container;if(chart.trackerGroup){chart.trackerGroup=chart.trackerGroup.destroy();}\nremoveEvent(container,'mouseleave',mouseTracker.hideTooltipOnMouseLeave);removeEvent(doc,'mousemove',mouseTracker.hideTooltipOnMouseMove);container.onclick=container.onmousedown=container.onmousemove=container.ontouchstart=container.ontouchend=container.ontouchmove=null;clearInterval(this.tooltipInterval);},init:function(chart,options){if(!chart.trackerGroup){chart.trackerGroup=chart.renderer.g('tracker').attr({zIndex:9}).add();}\nif(options.enabled){chart.tooltip=new Tooltip(chart,options);this.tooltipInterval=setInterval(function(){if(chart&&chart.tooltip){chart.tooltip.tick();}},32);}\nthis.setDOMEvents();}};function Legend(chart){this.init(chart);}\nLegend.prototype={init:function(chart){var legend=this,options=legend.options=chart.options.legend;if(!options.enabled){return;}\nvar\nitemStyle=options.itemStyle,padding=pick(options.padding,8),itemMarginTop=options.itemMarginTop||0;legend.baseline=pInt(itemStyle.fontSize)+3+itemMarginTop;legend.itemStyle=itemStyle;legend.itemHiddenStyle=merge(itemStyle,options.itemHiddenStyle);legend.itemMarginTop=itemMarginTop;legend.padding=padding;legend.initialItemX=padding;legend.initialItemY=padding-5;legend.maxItemWidth=0;legend.chart=chart;legend.itemHeight=0;legend.lastLineHeight=0;legend.render();addEvent(legend.chart,'endResize',function(){legend.positionCheckboxes();});},colorizeItem:function(item,visible){var legend=this,options=legend.options,legendItem=item.legendItem,legendLine=item.legendLine,legendSymbol=item.legendSymbol,hiddenColor=legend.itemHiddenStyle.color,textColor=visible?options.itemStyle.color:hiddenColor,symbolColor=visible?item.color:hiddenColor;if(legendItem){legendItem.css({fill:textColor});}\nif(legendLine){legendLine.attr({stroke:symbolColor});}\nif(legendSymbol){legendSymbol.attr({stroke:symbolColor,strokeWidth:1,fill:symbolColor});}},positionItem:function(item){var legend=this,options=legend.options,symbolPadding=options.symbolPadding,ltr=!options.rtl,legendItemPos=item._legendItemPos,itemX=legendItemPos[0],itemY=legendItemPos[1],checkbox=item.checkbox;if(item.legendGroup){item.legendGroup.translate(ltr?itemX:legend.legendWidth-itemX-2*symbolPadding-4,itemY);}\nif(checkbox){checkbox.x=itemX;checkbox.y=itemY;}},destroyItem:function(item){var checkbox=item.checkbox;each(['legendItem','legendLine','legendSymbol','legendGroup'],function(key){if(item[key]){item[key].destroy();}});if(checkbox){discardElement(item.checkbox);}},destroy:function(){var legend=this,legendGroup=legend.group,box=legend.box;if(box){legend.box=box.destroy();}\nif(legendGroup){legend.group=legendGroup.destroy();}},positionCheckboxes:function(){var legend=this;each(legend.allItems,function(item){var checkbox=item.checkbox,alignAttr=legend.group.alignAttr;if(checkbox){css(checkbox,{left:(alignAttr.translateX+item.legendItemWidth+checkbox.x-20)+PX,top:(alignAttr.translateY+checkbox.y+3)+PX});}});},renderItem:function(item){var legend=this,chart=legend.chart,renderer=chart.renderer,options=legend.options,horizontal=options.layout==='horizontal',symbolWidth=options.symbolWidth,symbolPadding=options.symbolPadding,itemStyle=legend.itemStyle,itemHiddenStyle=legend.itemHiddenStyle,padding=legend.padding,ltr=!options.rtl,itemHeight,widthOption=options.width,itemMarginBottom=options.itemMarginBottom||0,itemMarginTop=legend.itemMarginTop||0,initialItemX=legend.initialItemX,bBox,itemWidth,li=item.legendItem,series=item.series||item,itemOptions=series.options,showCheckbox=itemOptions.showCheckbox;if(!li){item.legendGroup=renderer.g('legend-item').attr({zIndex:1}).add(legend.scrollGroup);series.drawLegendSymbol(legend,item);item.legendItem=li=renderer.text(options.labelFormatter.call(item),ltr?symbolWidth+symbolPadding:-symbolPadding,legend.baseline,options.useHTML).css(merge(item.visible?itemStyle:itemHiddenStyle)).attr({align:ltr?'left':'right',zIndex:2}).add(item.legendGroup);item.legendGroup.on('mouseover',function(){item.setState(HOVER_STATE);li.css(legend.options.itemHoverStyle);}).on('mouseout',function(){li.css(item.visible?itemStyle:itemHiddenStyle);item.setState();}).on('click',function(event){var strLegendItemClick='legendItemClick',fnLegendItemClick=function(){item.setVisible();};event={browserEvent:event};if(item.firePointEvent){item.firePointEvent(strLegendItemClick,event,fnLegendItemClick);}else{fireEvent(item,strLegendItemClick,event,fnLegendItemClick);}});legend.colorizeItem(item,item.visible);if(itemOptions&&showCheckbox){item.checkbox=createElement('input',{type:'checkbox',checked:item.selected,defaultChecked:item.selected},options.itemCheckboxStyle,chart.container);addEvent(item.checkbox,'click',function(event){var target=event.target;fireEvent(item,'checkboxClick',{checked:target.checked},function(){item.select();});});}}\nbBox=li.getBBox();itemWidth=item.legendItemWidth=options.itemWidth||symbolWidth+symbolPadding+bBox.width+padding+\n(showCheckbox?20:0);legend.itemHeight=itemHeight=bBox.height;if(horizontal&&legend.itemX-initialItemX+itemWidth>(widthOption||(chart.chartWidth-2*padding-initialItemX))){legend.itemX=initialItemX;legend.itemY+=itemMarginTop+legend.lastLineHeight+itemMarginBottom;legend.lastLineHeight=0;}\nlegend.maxItemWidth=mathMax(legend.maxItemWidth,itemWidth);legend.lastItemY=itemMarginTop+legend.itemY+itemMarginBottom;legend.lastLineHeight=mathMax(itemHeight,legend.lastLineHeight);item._legendItemPos=[legend.itemX,itemMarginTop+legend.itemY];if(horizontal){legend.itemX+=itemWidth;}else{legend.itemY+=itemMarginTop+itemHeight+itemMarginBottom;legend.lastLineHeight=itemHeight;}\nlegend.offsetWidth=widthOption||mathMax(horizontal?legend.itemX-initialItemX:itemWidth,legend.offsetWidth);},render:function(){var legend=this,chart=legend.chart,renderer=chart.renderer,legendGroup=legend.group,allItems,display,legendWidth,legendHeight,box=legend.box,options=legend.options,padding=legend.padding,legendBorderWidth=options.borderWidth,legendBackgroundColor=options.backgroundColor;legend.itemX=legend.initialItemX;legend.itemY=legend.initialItemY;legend.offsetWidth=0;legend.lastItemY=0;if(!legendGroup){legend.group=legendGroup=renderer.g('legend').attr({zIndex:7}).add();legend.contentGroup=renderer.g().attr({zIndex:1}).add(legendGroup);legend.scrollGroup=renderer.g().add(legend.contentGroup);legend.clipRect=renderer.clipRect(0,0,9999,chart.chartHeight);legend.contentGroup.clip(legend.clipRect);}\nallItems=[];each(chart.series,function(serie){var seriesOptions=serie.options;if(!seriesOptions.showInLegend){return;}\nallItems=allItems.concat(serie.legendItems||(seriesOptions.legendType==='point'?serie.data:serie));});stableSort(allItems,function(a,b){return(a.options.legendIndex||0)-(b.options.legendIndex||0);});if(options.reversed){allItems.reverse();}\nlegend.allItems=allItems;legend.display=display=!!allItems.length;each(allItems,function(item){legend.renderItem(item);});legendWidth=options.width||legend.offsetWidth;legendHeight=legend.lastItemY+legend.lastLineHeight;legendHeight=legend.handleOverflow(legendHeight);if(legendBorderWidth||legendBackgroundColor){legendWidth+=padding;legendHeight+=padding;if(!box){legend.box=box=renderer.rect(0,0,legendWidth,legendHeight,options.borderRadius,legendBorderWidth||0).attr({stroke:options.borderColor,'stroke-width':legendBorderWidth||0,fill:legendBackgroundColor||NONE}).add(legendGroup).shadow(options.shadow);box.isNew=true;}else if(legendWidth>0&&legendHeight>0){box[box.isNew?'attr':'animate'](box.crisp(null,null,null,legendWidth,legendHeight));box.isNew=false;}\nbox[display?'show':'hide']();}\nlegend.legendWidth=legendWidth;legend.legendHeight=legendHeight;each(allItems,function(item){legend.positionItem(item);});if(display){legendGroup.align(extend({width:legendWidth,height:legendHeight},options),true,chart.spacingBox);}\nif(!chart.isResizing){this.positionCheckboxes();}},handleOverflow:function(legendHeight){var legend=this,chart=this.chart,renderer=chart.renderer,pageCount,options=this.options,optionsY=options.y,alignTop=options.verticalAlign==='top',spaceHeight=chart.spacingBox.height+(alignTop?-optionsY:optionsY)-this.padding,maxHeight=options.maxHeight,clipHeight,clipRect=this.clipRect,navOptions=options.navigation,animation=pick(navOptions.animation,true),arrowSize=navOptions.arrowSize||12,nav=this.nav;if(options.layout==='horizontal'){spaceHeight/=2;}\nif(maxHeight){spaceHeight=mathMin(spaceHeight,maxHeight);}\nif(legendHeight>spaceHeight){this.clipHeight=clipHeight=spaceHeight-20;this.pageCount=pageCount=mathCeil(legendHeight/clipHeight);this.currentPage=pick(this.currentPage,1);this.fullHeight=legendHeight;clipRect.attr({height:clipHeight});if(!nav){this.nav=nav=renderer.g().attr({zIndex:1}).add(this.group);this.up=renderer.symbol('triangle',0,0,arrowSize,arrowSize).on('click',function(){legend.scroll(-1,animation);}).add(nav);this.pager=renderer.text('',15,10).css(navOptions.style).add(nav);this.down=renderer.symbol('triangle-down',0,0,arrowSize,arrowSize).on('click',function(){legend.scroll(1,animation);}).add(nav);}\nlegend.scroll(0);legendHeight=spaceHeight;}else if(nav){clipRect.attr({height:chart.chartHeight});nav.hide();this.scrollGroup.attr({translateY:1});}\nreturn legendHeight;},scroll:function(scrollBy,animation){var pageCount=this.pageCount,currentPage=this.currentPage+scrollBy,clipHeight=this.clipHeight,navOptions=this.options.navigation,activeColor=navOptions.activeColor,inactiveColor=navOptions.inactiveColor,pager=this.pager,padding=this.padding;if(currentPage>pageCount){currentPage=pageCount;}\nif(currentPage>0){if(animation!==UNDEFINED){setAnimation(animation,this.chart);}\nthis.nav.attr({translateX:padding,translateY:clipHeight+7,visibility:VISIBLE});this.up.attr({fill:currentPage===1?inactiveColor:activeColor}).css({cursor:currentPage===1?'default':'pointer'});pager.attr({text:currentPage+'/'+this.pageCount});this.down.attr({x:18+this.pager.getBBox().width,fill:currentPage===pageCount?inactiveColor:activeColor}).css({cursor:currentPage===pageCount?'default':'pointer'});this.scrollGroup.animate({translateY:-mathMin(clipHeight*(currentPage-1),this.fullHeight-clipHeight+padding)+1});pager.attr({text:currentPage+'/'+pageCount});this.currentPage=currentPage;}}};function Chart(userOptions,callback){var options,seriesOptions=userOptions.series;userOptions.series=null;options=merge(defaultOptions,userOptions);options.series=userOptions.series=seriesOptions;var optionsChart=options.chart,optionsMargin=optionsChart.margin,margin=isObject(optionsMargin)?optionsMargin:[optionsMargin,optionsMargin,optionsMargin,optionsMargin];this.optionsMarginTop=pick(optionsChart.marginTop,margin[0]);this.optionsMarginRight=pick(optionsChart.marginRight,margin[1]);this.optionsMarginBottom=pick(optionsChart.marginBottom,margin[2]);this.optionsMarginLeft=pick(optionsChart.marginLeft,margin[3]);var chartEvents=optionsChart.events;this.runChartClick=chartEvents&&!!chartEvents.click;this.callback=callback;this.isResizing=0;this.options=options;this.axes=[];this.series=[];this.hasCartesianSeries=optionsChart.showAxes;this.init(chartEvents);}\nChart.prototype={initSeries:function(options){var chart=this,optionsChart=chart.options.chart,type=options.type||optionsChart.type||optionsChart.defaultSeriesType,series=new seriesTypes[type]();series.init(this,options);return series;},addSeries:function(options,redraw,animation){var series,chart=this;if(options){setAnimation(animation,chart);redraw=pick(redraw,true);fireEvent(chart,'addSeries',{options:options},function(){series=chart.initSeries(options);chart.isDirtyLegend=true;if(redraw){chart.redraw();}});}\nreturn series;},isInsidePlot:function(plotX,plotY,inverted){var x=inverted?plotY:plotX,y=inverted?plotX:plotY;return x>=0&&x<=this.plotWidth&&y>=0&&y<=this.plotHeight;},adjustTickAmounts:function(){if(this.options.chart.alignTicks!==false){each(this.axes,function(axis){axis.adjustTickAmount();});}\nthis.maxTicks=null;},redraw:function(animation){var chart=this,axes=chart.axes,series=chart.series,tracker=chart.tracker,legend=chart.legend,redrawLegend=chart.isDirtyLegend,hasStackedSeries,isDirtyBox=chart.isDirtyBox,seriesLength=series.length,i=seriesLength,serie,renderer=chart.renderer,isHiddenChart=renderer.isHidden();setAnimation(animation,chart);if(isHiddenChart){chart.cloneRenderTo();}\nwhile(i--){serie=series[i];if(serie.isDirty&&serie.options.stacking){hasStackedSeries=true;break;}}\nif(hasStackedSeries){i=seriesLength;while(i--){serie=series[i];if(serie.options.stacking){serie.isDirty=true;}}}\neach(series,function(serie){if(serie.isDirty){if(serie.options.legendType==='point'){redrawLegend=true;}}});if(redrawLegend&&legend.options.enabled){legend.render();chart.isDirtyLegend=false;}\nif(chart.hasCartesianSeries){if(!chart.isResizing){chart.maxTicks=null;each(axes,function(axis){axis.setScale();});}\nchart.adjustTickAmounts();chart.getMargins();each(axes,function(axis){if(axis.isDirtyExtremes){axis.isDirtyExtremes=false;fireEvent(axis,'afterSetExtremes',axis.getExtremes());}\nif(axis.isDirty||isDirtyBox||hasStackedSeries){axis.redraw();isDirtyBox=true;}});}\nif(isDirtyBox){chart.drawChartBox();}\neach(series,function(serie){if(serie.isDirty&&serie.visible&&(!serie.isCartesian||serie.xAxis)){serie.redraw();}});if(tracker&&tracker.resetTracker){tracker.resetTracker(true);}\nrenderer.draw();fireEvent(chart,'redraw');if(isHiddenChart){chart.cloneRenderTo(true);}},showLoading:function(str){var chart=this,options=chart.options,loadingDiv=chart.loadingDiv;var loadingOptions=options.loading;if(!loadingDiv){chart.loadingDiv=loadingDiv=createElement(DIV,{className:PREFIX+'loading'},extend(loadingOptions.style,{left:chart.plotLeft+PX,top:chart.plotTop+PX,width:chart.plotWidth+PX,height:chart.plotHeight+PX,zIndex:10,display:NONE}),chart.container);chart.loadingSpan=createElement('span',null,loadingOptions.labelStyle,loadingDiv);}\nchart.loadingSpan.innerHTML=str||options.lang.loading;if(!chart.loadingShown){css(loadingDiv,{opacity:0,display:''});animate(loadingDiv,{opacity:loadingOptions.style.opacity},{duration:loadingOptions.showDuration||0});chart.loadingShown=true;}},hideLoading:function(){var options=this.options,loadingDiv=this.loadingDiv;if(loadingDiv){animate(loadingDiv,{opacity:0},{duration:options.loading.hideDuration||100,complete:function(){css(loadingDiv,{display:NONE});}});}\nthis.loadingShown=false;},get:function(id){var chart=this,axes=chart.axes,series=chart.series;var i,j,points;for(i=0;i<axes.length;i++){if(axes[i].options.id===id){return axes[i];}}\nfor(i=0;i<series.length;i++){if(series[i].options.id===id){return series[i];}}\nfor(i=0;i<series.length;i++){points=series[i].points||[];for(j=0;j<points.length;j++){if(points[j].id===id){return points[j];}}}\nreturn null;},getAxes:function(){var chart=this,options=this.options;var xAxisOptions=options.xAxis||{},yAxisOptions=options.yAxis||{},optionsArray,axis;xAxisOptions=splat(xAxisOptions);each(xAxisOptions,function(axis,i){axis.index=i;axis.isX=true;});yAxisOptions=splat(yAxisOptions);each(yAxisOptions,function(axis,i){axis.index=i;});optionsArray=xAxisOptions.concat(yAxisOptions);each(optionsArray,function(axisOptions){axis=new Axis(chart,axisOptions);});chart.adjustTickAmounts();},getSelectedPoints:function(){var points=[];each(this.series,function(serie){points=points.concat(grep(serie.points,function(point){return point.selected;}));});return points;},getSelectedSeries:function(){return grep(this.series,function(serie){return serie.selected;});},showResetZoom:function(){var chart=this,lang=defaultOptions.lang,btnOptions=chart.options.chart.resetZoomButton,theme=btnOptions.theme,states=theme.states,alignTo=btnOptions.relativeTo==='chart'?null:'plotBox';this.resetZoomButton=chart.renderer.button(lang.resetZoom,null,null,function(){chart.zoomOut();},theme,states&&states.hover).attr({align:btnOptions.position.align,title:lang.resetZoomTitle}).add().align(btnOptions.position,false,chart[alignTo]);this.resetZoomButton.alignTo=alignTo;},zoomOut:function(){var chart=this,resetZoomButton=chart.resetZoomButton;fireEvent(chart,'selection',{resetSelection:true},function(){chart.zoom();});if(resetZoomButton){chart.resetZoomButton=resetZoomButton.destroy();}},zoom:function(event){var chart=this,optionsChart=chart.options.chart;var hasZoomed;if(chart.resetZoomEnabled!==false&&!chart.resetZoomButton){chart.showResetZoom();}\nif(!event||event.resetSelection){each(chart.axes,function(axis){if(axis.options.zoomEnabled!==false){axis.setExtremes(null,null,false,UNDEFINED,{trigger:'zoomout'});hasZoomed=true;}});}else{each(event.xAxis.concat(event.yAxis),function(axisData){var axis=axisData.axis;if(chart.tracker[axis.isXAxis?'zoomX':'zoomY']){axis.setExtremes(axisData.min,axisData.max,false,UNDEFINED,{trigger:'zoom'});hasZoomed=true;}});}\nif(hasZoomed){chart.redraw(pick(optionsChart.animation,chart.pointCount<100));}},pan:function(chartX){var chart=this;var xAxis=chart.xAxis[0],mouseDownX=chart.mouseDownX,halfPointRange=xAxis.pointRange/2,extremes=xAxis.getExtremes(),newMin=xAxis.translate(mouseDownX-chartX,true)+halfPointRange,newMax=xAxis.translate(mouseDownX+chart.plotWidth-chartX,true)-halfPointRange,hoverPoints=chart.hoverPoints;if(hoverPoints){each(hoverPoints,function(point){point.setState();});}\nif(xAxis.series.length&&newMin>mathMin(extremes.dataMin,extremes.min)&&newMax<mathMax(extremes.dataMax,extremes.max)){xAxis.setExtremes(newMin,newMax,true,false,{trigger:'pan'});}\nchart.mouseDownX=chartX;css(chart.container,{cursor:'move'});},setTitle:function(titleOptions,subtitleOptions){var chart=this,options=chart.options,chartTitleOptions,chartSubtitleOptions;chart.chartTitleOptions=chartTitleOptions=merge(options.title,titleOptions);chart.chartSubtitleOptions=chartSubtitleOptions=merge(options.subtitle,subtitleOptions);each([['title',titleOptions,chartTitleOptions],['subtitle',subtitleOptions,chartSubtitleOptions]],function(arr){var name=arr[0],title=chart[name],titleOptions=arr[1],chartTitleOptions=arr[2];if(title&&titleOptions){chart[name]=title=title.destroy();}\nif(chartTitleOptions&&chartTitleOptions.text&&!title){chart[name]=chart.renderer.text(chartTitleOptions.text,0,0,chartTitleOptions.useHTML).attr({align:chartTitleOptions.align,'class':PREFIX+name,zIndex:chartTitleOptions.zIndex||4}).css(chartTitleOptions.style).add().align(chartTitleOptions,false,chart.spacingBox);}});},getChartSize:function(){var chart=this,optionsChart=chart.options.chart,renderTo=chart.renderToClone||chart.renderTo;chart.containerWidth=adapterRun(renderTo,'width');chart.containerHeight=adapterRun(renderTo,'height');chart.chartWidth=optionsChart.width||chart.containerWidth||600;chart.chartHeight=optionsChart.height||(chart.containerHeight>19?chart.containerHeight:400);},cloneRenderTo:function(revert){var clone=this.renderToClone,container=this.container;if(revert){if(clone){this.renderTo.appendChild(container);discardElement(clone);delete this.renderToClone;}}else{if(container){this.renderTo.removeChild(container);}\nthis.renderToClone=clone=this.renderTo.cloneNode(0);css(clone,{position:ABSOLUTE,top:'-9999px',display:'block'});doc.body.appendChild(clone);if(container){clone.appendChild(container);}}},getContainer:function(){var chart=this,container,optionsChart=chart.options.chart,chartWidth,chartHeight,renderTo,containerId;chart.renderTo=renderTo=optionsChart.renderTo;containerId=PREFIX+idCounter++;if(isString(renderTo)){chart.renderTo=renderTo=doc.getElementById(renderTo);}\nif(!renderTo){error(13,true);}\nrenderTo.innerHTML='';if(!renderTo.offsetWidth){chart.cloneRenderTo();}\nchart.getChartSize();chartWidth=chart.chartWidth;chartHeight=chart.chartHeight;chart.container=container=createElement(DIV,{className:PREFIX+'container'+\n(optionsChart.className?' '+optionsChart.className:''),id:containerId},extend({position:RELATIVE,overflow:HIDDEN,width:chartWidth+PX,height:chartHeight+PX,textAlign:'left',lineHeight:'normal',zIndex:0},optionsChart.style),chart.renderToClone||renderTo);chart.renderer=optionsChart.forExport?new SVGRenderer(container,chartWidth,chartHeight,true):new Renderer(container,chartWidth,chartHeight);if(useCanVG){chart.renderer.create(chart,container,chartWidth,chartHeight);}},getMargins:function(){var chart=this,optionsChart=chart.options.chart,spacingTop=optionsChart.spacingTop,spacingRight=optionsChart.spacingRight,spacingBottom=optionsChart.spacingBottom,spacingLeft=optionsChart.spacingLeft,axisOffset,legend=chart.legend,optionsMarginTop=chart.optionsMarginTop,optionsMarginLeft=chart.optionsMarginLeft,optionsMarginRight=chart.optionsMarginRight,optionsMarginBottom=chart.optionsMarginBottom,chartTitleOptions=chart.chartTitleOptions,chartSubtitleOptions=chart.chartSubtitleOptions,legendOptions=chart.options.legend,legendMargin=pick(legendOptions.margin,10),legendX=legendOptions.x,legendY=legendOptions.y,align=legendOptions.align,verticalAlign=legendOptions.verticalAlign,titleOffset;chart.resetMargins();axisOffset=chart.axisOffset;if((chart.title||chart.subtitle)&&!defined(chart.optionsMarginTop)){titleOffset=mathMax((chart.title&&!chartTitleOptions.floating&&!chartTitleOptions.verticalAlign&&chartTitleOptions.y)||0,(chart.subtitle&&!chartSubtitleOptions.floating&&!chartSubtitleOptions.verticalAlign&&chartSubtitleOptions.y)||0);if(titleOffset){chart.plotTop=mathMax(chart.plotTop,titleOffset+pick(chartTitleOptions.margin,15)+spacingTop);}}\nif(legend.display&&!legendOptions.floating){if(align==='right'){if(!defined(optionsMarginRight)){chart.marginRight=mathMax(chart.marginRight,legend.legendWidth-legendX+legendMargin+spacingRight);}}else if(align==='left'){if(!defined(optionsMarginLeft)){chart.plotLeft=mathMax(chart.plotLeft,legend.legendWidth+legendX+legendMargin+spacingLeft);}}else if(verticalAlign==='top'){if(!defined(optionsMarginTop)){chart.plotTop=mathMax(chart.plotTop,legend.legendHeight+legendY+legendMargin+spacingTop);}}else if(verticalAlign==='bottom'){if(!defined(optionsMarginBottom)){chart.marginBottom=mathMax(chart.marginBottom,legend.legendHeight-legendY+legendMargin+spacingBottom);}}}\nif(chart.extraBottomMargin){chart.marginBottom+=chart.extraBottomMargin;}\nif(chart.extraTopMargin){chart.plotTop+=chart.extraTopMargin;}\nif(chart.hasCartesianSeries){each(chart.axes,function(axis){axis.getOffset();});}\nif(!defined(optionsMarginLeft)){chart.plotLeft+=axisOffset[3];}\nif(!defined(optionsMarginTop)){chart.plotTop+=axisOffset[0];}\nif(!defined(optionsMarginBottom)){chart.marginBottom+=axisOffset[2];}\nif(!defined(optionsMarginRight)){chart.marginRight+=axisOffset[1];}\nchart.setChartSize();},initReflow:function(){var chart=this,optionsChart=chart.options.chart,renderTo=chart.renderTo;var reflowTimeout;function reflow(e){var width=optionsChart.width||adapterRun(renderTo,'width'),height=optionsChart.height||adapterRun(renderTo,'height'),target=e?e.target:win;if(width&&height&&(target===win||target===doc)){if(width!==chart.containerWidth||height!==chart.containerHeight){clearTimeout(reflowTimeout);reflowTimeout=setTimeout(function(){chart.resize(width,height,false);},100);}\nchart.containerWidth=width;chart.containerHeight=height;}}\naddEvent(win,'resize',reflow);addEvent(chart,'destroy',function(){removeEvent(win,'resize',reflow);});},resize:function(width,height,animation){var chart=this,chartWidth,chartHeight,spacingBox,resetZoomButton=chart.resetZoomButton,chartTitle=chart.title,chartSubtitle=chart.subtitle,fireEndResize;chart.isResizing+=1;fireEndResize=function(){if(chart){fireEvent(chart,'endResize',null,function(){chart.isResizing-=1;});}};setAnimation(animation,chart);chart.oldChartHeight=chart.chartHeight;chart.oldChartWidth=chart.chartWidth;if(defined(width)){chart.chartWidth=chartWidth=mathRound(width);}\nif(defined(height)){chart.chartHeight=chartHeight=mathRound(height);}\ncss(chart.container,{width:chartWidth+PX,height:chartHeight+PX});chart.renderer.setSize(chartWidth,chartHeight,animation);chart.plotWidth=chartWidth-chart.plotLeft-chart.marginRight;chart.plotHeight=chartHeight-chart.plotTop-chart.marginBottom;chart.maxTicks=null;each(chart.axes,function(axis){axis.isDirty=true;axis.setScale();});each(chart.series,function(serie){serie.isDirty=true;});chart.isDirtyLegend=true;chart.isDirtyBox=true;chart.getMargins();spacingBox=chart.spacingBox;if(chartTitle){chartTitle.align(null,null,spacingBox);}\nif(chartSubtitle){chartSubtitle.align(null,null,spacingBox);}\nif(resetZoomButton){resetZoomButton.align(null,null,chart[resetZoomButton.alignTo]);}\nchart.redraw(animation);chart.oldChartHeight=null;fireEvent(chart,'resize');if(globalAnimation===false){fireEndResize();}else{setTimeout(fireEndResize,(globalAnimation&&globalAnimation.duration)||500);}},setChartSize:function(){var chart=this,inverted=chart.inverted,chartWidth=chart.chartWidth,chartHeight=chart.chartHeight,optionsChart=chart.options.chart,spacingTop=optionsChart.spacingTop,spacingRight=optionsChart.spacingRight,spacingBottom=optionsChart.spacingBottom,spacingLeft=optionsChart.spacingLeft,plotLeft,plotTop,plotWidth,plotHeight,plotBorderWidth;chart.plotLeft=plotLeft=mathRound(chart.plotLeft);chart.plotTop=plotTop=mathRound(chart.plotTop);chart.plotWidth=plotWidth=mathRound(chartWidth-plotLeft-chart.marginRight);chart.plotHeight=plotHeight=mathRound(chartHeight-plotTop-chart.marginBottom);chart.plotSizeX=inverted?plotHeight:plotWidth;chart.plotSizeY=inverted?plotWidth:plotHeight;chart.plotBorderWidth=plotBorderWidth=optionsChart.plotBorderWidth||0;chart.spacingBox={x:spacingLeft,y:spacingTop,width:chartWidth-spacingLeft-spacingRight,height:chartHeight-spacingTop-spacingBottom};chart.plotBox={x:plotLeft,y:plotTop,width:plotWidth,height:plotHeight};chart.clipBox={x:plotBorderWidth/2,y:plotBorderWidth/2,width:chart.plotSizeX-plotBorderWidth,height:chart.plotSizeY-plotBorderWidth};each(chart.axes,function(axis){axis.setAxisSize();axis.setAxisTranslation();});},resetMargins:function(){var chart=this,optionsChart=chart.options.chart,spacingTop=optionsChart.spacingTop,spacingRight=optionsChart.spacingRight,spacingBottom=optionsChart.spacingBottom,spacingLeft=optionsChart.spacingLeft;chart.plotTop=pick(chart.optionsMarginTop,spacingTop);chart.marginRight=pick(chart.optionsMarginRight,spacingRight);chart.marginBottom=pick(chart.optionsMarginBottom,spacingBottom);chart.plotLeft=pick(chart.optionsMarginLeft,spacingLeft);chart.axisOffset=[0,0,0,0];},drawChartBox:function(){var chart=this,optionsChart=chart.options.chart,renderer=chart.renderer,chartWidth=chart.chartWidth,chartHeight=chart.chartHeight,chartBackground=chart.chartBackground,plotBackground=chart.plotBackground,plotBorder=chart.plotBorder,plotBGImage=chart.plotBGImage,chartBorderWidth=optionsChart.borderWidth||0,chartBackgroundColor=optionsChart.backgroundColor,plotBackgroundColor=optionsChart.plotBackgroundColor,plotBackgroundImage=optionsChart.plotBackgroundImage,plotBorderWidth=optionsChart.plotBorderWidth||0,mgn,bgAttr,plotLeft=chart.plotLeft,plotTop=chart.plotTop,plotWidth=chart.plotWidth,plotHeight=chart.plotHeight,plotBox=chart.plotBox,clipRect=chart.clipRect,clipBox=chart.clipBox;mgn=chartBorderWidth+(optionsChart.shadow?8:0);if(chartBorderWidth||chartBackgroundColor){if(!chartBackground){bgAttr={fill:chartBackgroundColor||NONE};if(chartBorderWidth){bgAttr.stroke=optionsChart.borderColor;bgAttr['stroke-width']=chartBorderWidth;}\nchart.chartBackground=renderer.rect(mgn/2,mgn/2,chartWidth-mgn,chartHeight-mgn,optionsChart.borderRadius,chartBorderWidth).attr(bgAttr).add().shadow(optionsChart.shadow);}else{chartBackground.animate(chartBackground.crisp(null,null,null,chartWidth-mgn,chartHeight-mgn));}}\nif(plotBackgroundColor){if(!plotBackground){chart.plotBackground=renderer.rect(plotLeft,plotTop,plotWidth,plotHeight,0).attr({fill:plotBackgroundColor}).add().shadow(optionsChart.plotShadow);}else{plotBackground.animate(plotBox);}}\nif(plotBackgroundImage){if(!plotBGImage){chart.plotBGImage=renderer.image(plotBackgroundImage,plotLeft,plotTop,plotWidth,plotHeight).add();}else{plotBGImage.animate(plotBox);}}\nif(!clipRect){chart.clipRect=renderer.clipRect(clipBox);}else{clipRect.animate({width:clipBox.width,height:clipBox.height});}\nif(plotBorderWidth){if(!plotBorder){chart.plotBorder=renderer.rect(plotLeft,plotTop,plotWidth,plotHeight,0,plotBorderWidth).attr({stroke:optionsChart.plotBorderColor,'stroke-width':plotBorderWidth,zIndex:1}).add();}else{plotBorder.animate(plotBorder.crisp(null,plotLeft,plotTop,plotWidth,plotHeight));}}\nchart.isDirtyBox=false;},propFromSeries:function(){var chart=this,optionsChart=chart.options.chart,klass,seriesOptions=chart.options.series,i,value;each(['inverted','angular','polar'],function(key){klass=seriesTypes[optionsChart.type||optionsChart.defaultSeriesType];value=(chart[key]||optionsChart[key]||(klass&&klass.prototype[key]));i=seriesOptions&&seriesOptions.length;while(!value&&i--){klass=seriesTypes[seriesOptions[i].type];if(klass&&klass.prototype[key]){value=true;}}\nchart[key]=value;});},render:function(){var chart=this,axes=chart.axes,renderer=chart.renderer,options=chart.options;var labels=options.labels,credits=options.credits,creditsHref;chart.setTitle();chart.legend=new Legend(chart);each(axes,function(axis){axis.setScale();});chart.getMargins();chart.maxTicks=null;each(axes,function(axis){axis.setTickPositions(true);axis.setMaxTicks();});chart.adjustTickAmounts();chart.getMargins();chart.drawChartBox();if(chart.hasCartesianSeries){each(axes,function(axis){axis.render();});}\nif(!chart.seriesGroup){chart.seriesGroup=renderer.g('series-group').attr({zIndex:3}).add();}\neach(chart.series,function(serie){serie.translate();serie.setTooltipPoints();serie.render();});if(labels.items){each(labels.items,function(){var style=extend(labels.style,this.style),x=pInt(style.left)+chart.plotLeft,y=pInt(style.top)+chart.plotTop+12;delete style.left;delete style.top;renderer.text(this.html,x,y).attr({zIndex:2}).css(style).add();});}\nif(credits.enabled&&!chart.credits){creditsHref=credits.href;chart.credits=renderer.text(credits.text,0,0).on('click',function(){if(creditsHref){location.href=creditsHref;}}).attr({align:credits.position.align,zIndex:8}).css(credits.style).add().align(credits.position);}\nchart.hasRendered=true;},destroy:function(){var chart=this,axes=chart.axes,series=chart.series,container=chart.container;var i,parentNode=container&&container.parentNode;if(chart===null){return;}\nfireEvent(chart,'destroy');removeEvent(chart);i=axes.length;while(i--){axes[i]=axes[i].destroy();}\ni=series.length;while(i--){series[i]=series[i].destroy();}\neach(['title','subtitle','chartBackground','plotBackground','plotBGImage','plotBorder','seriesGroup','clipRect','credits','tracker','scroller','rangeSelector','legend','resetZoomButton','tooltip','renderer'],function(name){var prop=chart[name];if(prop){chart[name]=prop.destroy();}});if(container){container.innerHTML='';removeEvent(container);if(parentNode){discardElement(container);}\ncontainer=null;}\nfor(i in chart){delete chart[i];}\nchart.options=null;chart=null;},firstRender:function(){var chart=this,options=chart.options,callback=chart.callback;var ONREADYSTATECHANGE='onreadystatechange',COMPLETE='complete';if((!hasSVG&&(win==win.top&&doc.readyState!==COMPLETE))||(useCanVG&&!win.canvg)){if(useCanVG){CanVGController.push(function(){chart.firstRender();},options.global.canvasToolsURL);}else{doc.attachEvent(ONREADYSTATECHANGE,function(){doc.detachEvent(ONREADYSTATECHANGE,chart.firstRender);if(doc.readyState===COMPLETE){chart.firstRender();}});}\nreturn;}\nchart.getContainer();fireEvent(chart,'init');if(Highstock.RangeSelector&&options.rangeSelector.enabled){chart.rangeSelector=new Highstock.RangeSelector(chart);}\nchart.resetMargins();chart.setChartSize();chart.propFromSeries();chart.getAxes();each(options.series||[],function(serieOptions){chart.initSeries(serieOptions);});if(Highstock.Scroller&&(options.navigator.enabled||options.scrollbar.enabled)){chart.scroller=new Highstock.Scroller(chart);}\nchart.tracker=new MouseTracker(chart,options);chart.render();chart.renderer.draw();if(callback){callback.apply(chart,[chart]);}\neach(chart.callbacks,function(fn){fn.apply(chart,[chart]);});chart.cloneRenderTo(true);fireEvent(chart,'load');},init:function(chartEvents){var chart=this,optionsChart=chart.options.chart,eventType;if(optionsChart.reflow!==false){addEvent(chart,'load',chart.initReflow);}\nif(chartEvents){for(eventType in chartEvents){addEvent(chart,eventType,chartEvents[eventType]);}}\nchart.xAxis=[];chart.yAxis=[];chart.animation=useCanVG?false:pick(optionsChart.animation,true);chart.setSize=chart.resize;chart.pointCount=0;chart.counters=new ChartCounters();chart.firstRender();}};Chart.prototype.callbacks=[];var Point=function(){};Point.prototype={init:function(series,options,x){var point=this,counters=series.chart.counters,defaultColors;point.series=series;point.applyOptions(options,x);point.pointAttr={};if(series.options.colorByPoint){defaultColors=series.chart.options.colors;if(!point.options){point.options={};}\npoint.color=point.options.color=point.color||defaultColors[counters.color++];counters.wrapColor(defaultColors.length);}\nseries.chart.pointCount++;return point;},applyOptions:function(options,x){var point=this,series=point.series,optionsType=typeof options;point.config=options;if(optionsType==='number'||options===null){point.y=options;}else if(typeof options[0]==='number'){point.x=options[0];point.y=options[1];}else if(optionsType==='object'&&typeof options.length!=='number'){extend(point,options);point.options=options;if(options.dataLabels){series._hasPointLabels=true;}\nif(options.marker){series._hasPointMarkers=true;}}else if(typeof options[0]==='string'){point.name=options[0];point.y=options[1];}\nif(point.x===UNDEFINED){point.x=x===UNDEFINED?series.autoIncrement():x;}},destroy:function(){var point=this,series=point.series,chart=series.chart,hoverPoints=chart.hoverPoints,prop;chart.pointCount--;if(hoverPoints){point.setState();erase(hoverPoints,point);if(!hoverPoints.length){chart.hoverPoints=null;}}\nif(point===chart.hoverPoint){point.onMouseOut();}\nif(point.graphic||point.dataLabel){removeEvent(point);point.destroyElements();}\nif(point.legendItem){chart.legend.destroyItem(point);}\nfor(prop in point){point[prop]=null;}},destroyElements:function(){var point=this,props=['graphic','tracker','dataLabel','group','connector','shadowGroup'],prop,i=6;while(i--){prop=props[i];if(point[prop]){point[prop]=point[prop].destroy();}}},getLabelConfig:function(){var point=this;return{x:point.category,y:point.y,key:point.name||point.category,series:point.series,point:point,percentage:point.percentage,total:point.total||point.stackTotal};},select:function(selected,accumulate){var point=this,series=point.series,chart=series.chart;selected=pick(selected,!point.selected);point.firePointEvent(selected?'select':'unselect',{accumulate:accumulate},function(){point.selected=selected;point.setState(selected&&SELECT_STATE);if(!accumulate){each(chart.getSelectedPoints(),function(loopPoint){if(loopPoint.selected&&loopPoint!==point){loopPoint.selected=false;loopPoint.setState(NORMAL_STATE);loopPoint.firePointEvent('unselect');}});}});},onMouseOver:function(){var point=this,series=point.series,chart=series.chart,tooltip=chart.tooltip,hoverPoint=chart.hoverPoint;if(hoverPoint&&hoverPoint!==point){hoverPoint.onMouseOut();}\npoint.firePointEvent('mouseOver');if(tooltip&&(!tooltip.shared||series.noSharedTooltip)){tooltip.refresh(point);}\npoint.setState(HOVER_STATE);chart.hoverPoint=point;},onMouseOut:function(){var chart=this.series.chart,hoverPoints=chart.hoverPoints;if(!hoverPoints||inArray(this,hoverPoints)===-1){this.firePointEvent('mouseOut');this.setState();chart.hoverPoint=null;}},tooltipFormatter:function(pointFormat){var point=this,series=point.series,seriesTooltipOptions=series.tooltipOptions,match=pointFormat.match(/\\{(series|point)\\.[a-zA-Z]+\\}/g),splitter=/[{\\.}]/,obj,key,replacement,repOptionKey,parts,prop,i,cfg={y:0,open:0,high:0,low:0,close:0,percentage:1,total:1};seriesTooltipOptions.valuePrefix=seriesTooltipOptions.valuePrefix||seriesTooltipOptions.yPrefix;seriesTooltipOptions.valueDecimals=seriesTooltipOptions.valueDecimals||seriesTooltipOptions.yDecimals;seriesTooltipOptions.valueSuffix=seriesTooltipOptions.valueSuffix||seriesTooltipOptions.ySuffix;for(i in match){key=match[i];if(isString(key)&&key!==pointFormat){parts=(' '+key).split(splitter);obj={'point':point,'series':series}[parts[1]];prop=parts[2];if(obj===point&&cfg.hasOwnProperty(prop)){repOptionKey=cfg[prop]?prop:'value';replacement=(seriesTooltipOptions[repOptionKey+'Prefix']||'')+\nnumberFormat(point[prop],pick(seriesTooltipOptions[repOptionKey+'Decimals'],-1))+\n(seriesTooltipOptions[repOptionKey+'Suffix']||'');}else{replacement=obj[prop];}\npointFormat=pointFormat.replace(key,replacement);}}\nreturn pointFormat;},update:function(options,redraw,animation){var point=this,series=point.series,graphic=point.graphic,i,data=series.data,dataLength=data.length,chart=series.chart;redraw=pick(redraw,true);point.firePointEvent('update',{options:options},function(){point.applyOptions(options);if(isObject(options)){series.getAttribs();if(graphic){graphic.attr(point.pointAttr[series.state]);}}\nfor(i=0;i<dataLength;i++){if(data[i]===point){series.xData[i]=point.x;series.yData[i]=point.y;series.options.data[i]=options;break;}}\nseries.isDirty=true;series.isDirtyData=true;if(redraw){chart.redraw(animation);}});},remove:function(redraw,animation){var point=this,series=point.series,chart=series.chart,i,data=series.data,dataLength=data.length;setAnimation(animation,chart);redraw=pick(redraw,true);point.firePointEvent('remove',null,function(){for(i=0;i<dataLength;i++){if(data[i]===point){data.splice(i,1);series.options.data.splice(i,1);series.xData.splice(i,1);series.yData.splice(i,1);break;}}\npoint.destroy();series.isDirty=true;series.isDirtyData=true;if(redraw){chart.redraw();}});},firePointEvent:function(eventType,eventArgs,defaultFunction){var point=this,series=this.series,seriesOptions=series.options;if(seriesOptions.point.events[eventType]||(point.options&&point.options.events&&point.options.events[eventType])){this.importEvents();}\nif(eventType==='click'&&seriesOptions.allowPointSelect){defaultFunction=function(event){point.select(null,event.ctrlKey||event.metaKey||event.shiftKey);};}\nfireEvent(this,eventType,eventArgs,defaultFunction);},importEvents:function(){if(!this.hasImportedEvents){var point=this,options=merge(point.series.options.point,point.options),events=options.events,eventType;point.events=events;for(eventType in events){addEvent(point,eventType,events[eventType]);}\nthis.hasImportedEvents=true;}},setState:function(state){var point=this,plotX=point.plotX,plotY=point.plotY,series=point.series,stateOptions=series.options.states,markerOptions=defaultPlotOptions[series.type].marker&&series.options.marker,normalDisabled=markerOptions&&!markerOptions.enabled,markerStateOptions=markerOptions&&markerOptions.states[state],stateDisabled=markerStateOptions&&markerStateOptions.enabled===false,stateMarkerGraphic=series.stateMarkerGraphic,chart=series.chart,radius,pointAttr=point.pointAttr;state=state||NORMAL_STATE;if(state===point.state||(point.selected&&state!==SELECT_STATE)||(stateOptions[state]&&stateOptions[state].enabled===false)||(state&&(stateDisabled||(normalDisabled&&!markerStateOptions.enabled)))){return;}\nif(point.graphic){radius=markerOptions&&point.graphic.symbolName&&pointAttr[state].r;point.graphic.attr(merge(pointAttr[state],radius?{x:plotX-radius,y:plotY-radius,width:2*radius,height:2*radius}:{}));}else{if(state&&markerStateOptions){radius=markerStateOptions.radius;if(!stateMarkerGraphic){if(pointAttr[state].fill||pointAttr[state].stroke&&pointAttr[state][\"stroke-width\"]){series.stateMarkerGraphic=stateMarkerGraphic=chart.renderer.symbol(series.symbol,plotX-radius,plotY-radius,2*radius,2*radius).attr(pointAttr[state]).add(series.markerGroup);}}else{stateMarkerGraphic.attr({x:plotX-radius,y:plotY-radius});}}\nif(stateMarkerGraphic){stateMarkerGraphic[state&&chart.isInsidePlot(plotX,plotY)?'show':'hide']();}}\npoint.state=state;}};var Series=function(){};Series.prototype={isCartesian:true,type:'line',pointClass:Point,sorted:true,pointAttrToOptions:{stroke:'lineColor','stroke-width':'lineWidth',fill:'fillColor',r:'radius'},init:function(chart,options){var series=this,eventType,events;series.chart=chart;series.options=options=series.setOptions(options);series.bindAxes();extend(series,{name:options.name,state:NORMAL_STATE,pointAttr:{},visible:options.visible!==false,selected:options.selected===true});if(useCanVG){options.animation=false;}\nevents=options.events;for(eventType in events){addEvent(series,eventType,events[eventType]);}\nif((events&&events.click)||(options.point&&options.point.events&&options.point.events.click)||options.allowPointSelect){chart.runTrackerClick=true;}\nseries.getColor();series.getSymbol();series.setData(options.data,false);if(series.isCartesian){chart.hasCartesianSeries=true;}\nchart.series.push(series);chart.series.sort(function(a,b){return(a.options.index||0)-(b.options.index||0);});each(chart.series,function(series,i){series.index=i;series.name=series.name||'Series '+(i+1);});},bindAxes:function(){var series=this,seriesOptions=series.options,chart=series.chart,axisOptions;if(series.isCartesian){each(['xAxis','yAxis'],function(AXIS){each(chart[AXIS],function(axis){axisOptions=axis.options;if((seriesOptions[AXIS]===axisOptions.index)||(seriesOptions[AXIS]===UNDEFINED&&axisOptions.index===0)){axis.series.push(series);series[AXIS]=axis;axis.isDirty=true;}});});}},autoIncrement:function(){var series=this,options=series.options,xIncrement=series.xIncrement;xIncrement=pick(xIncrement,options.pointStart,0);series.pointInterval=pick(series.pointInterval,options.pointInterval,1);series.xIncrement=xIncrement+series.pointInterval;return xIncrement;},getSegments:function(){var series=this,lastNull=-1,segments=[],i,points=series.points,pointsLength=points.length;if(pointsLength){if(series.options.connectNulls){i=pointsLength;while(i--){if(points[i].y===null){points.splice(i,1);}}\nif(points.length){segments=[points];}}else{each(points,function(point,i){if(point.y===null){if(i>lastNull+1){segments.push(points.slice(lastNull+1,i));}\nlastNull=i;}else if(i===pointsLength-1){segments.push(points.slice(lastNull+1,i+1));}});}}\nseries.segments=segments;},setOptions:function(itemOptions){var chart=this.chart,chartOptions=chart.options,plotOptions=chartOptions.plotOptions,typeOptions=plotOptions[this.type],data=itemOptions.data,options;itemOptions.data=null;options=merge(typeOptions,plotOptions.series,itemOptions);options.data=itemOptions.data=data;this.tooltipOptions=merge(chartOptions.tooltip,options.tooltip);if(typeOptions.marker===null){delete options.marker;}\nreturn options;},getColor:function(){var options=this.options,defaultColors=this.chart.options.colors,counters=this.chart.counters;this.color=options.color||(!options.colorByPoint&&defaultColors[counters.color++])||'gray';counters.wrapColor(defaultColors.length);},getSymbol:function(){var series=this,seriesMarkerOption=series.options.marker,chart=series.chart,defaultSymbols=chart.options.symbols,counters=chart.counters;series.symbol=seriesMarkerOption.symbol||defaultSymbols[counters.symbol++];if(/^url/.test(series.symbol)){seriesMarkerOption.radius=0;}\ncounters.wrapSymbol(defaultSymbols.length);},drawLegendSymbol:function(legend){var options=this.options,markerOptions=options.marker,radius,legendOptions=legend.options,legendSymbol,symbolWidth=legendOptions.symbolWidth,renderer=this.chart.renderer,legendItemGroup=this.legendGroup,baseline=legend.baseline,attr;if(options.lineWidth){attr={'stroke-width':options.lineWidth};if(options.dashStyle){attr.dashstyle=options.dashStyle;}\nthis.legendLine=renderer.path([M,0,baseline-4,L,symbolWidth,baseline-4]).attr(attr).add(legendItemGroup);}\nif(markerOptions&&markerOptions.enabled){radius=markerOptions.radius;this.legendSymbol=legendSymbol=renderer.symbol(this.symbol,(symbolWidth/2)-radius,baseline-4-radius,2*radius,2*radius).attr(this.pointAttr[NORMAL_STATE]).add(legendItemGroup);}},addPoint:function(options,redraw,shift,animation){var series=this,data=series.data,graph=series.graph,area=series.area,chart=series.chart,xData=series.xData,yData=series.yData,currentShift=(graph&&graph.shift)||0,dataOptions=series.options.data,point,proto=series.pointClass.prototype;setAnimation(animation,chart);if(graph&&shift){graph.shift=currentShift+1;}\nif(area){if(shift){area.shift=currentShift+1;}\narea.isArea=true;}\nredraw=pick(redraw,true);point={series:series};proto.applyOptions.apply(point,[options]);xData.push(point.x);yData.push(proto.toYData?proto.toYData.call(point):point.y);dataOptions.push(options);if(shift){if(data[0]&&data[0].remove){data[0].remove(false);}else{data.shift();xData.shift();yData.shift();dataOptions.shift();}}\nseries.getAttribs();series.isDirty=true;series.isDirtyData=true;if(redraw){chart.redraw();}},setData:function(data,redraw){var series=this,oldData=series.points,options=series.options,initialColor=series.initialColor,chart=series.chart,firstPoint=null,xAxis=series.xAxis,i,pointProto=series.pointClass.prototype;series.xIncrement=null;series.pointRange=xAxis&&xAxis.categories?1:options.pointRange;if(defined(initialColor)){chart.counters.color=initialColor;}\nvar xData=[],yData=[],dataLength=data?data.length:[],turboThreshold=options.turboThreshold||1000,pt,pointArrayMap=series.pointArrayMap,valueCount=pointArrayMap&&pointArrayMap.length;if(dataLength>turboThreshold){i=0;while(firstPoint===null&&i<dataLength){firstPoint=data[i];i++;}\nif(isNumber(firstPoint)){var x=pick(options.pointStart,0),pointInterval=pick(options.pointInterval,1);for(i=0;i<dataLength;i++){xData[i]=x;yData[i]=data[i];x+=pointInterval;}\nseries.xIncrement=x;}else if(isArray(firstPoint)){if(valueCount){for(i=0;i<dataLength;i++){pt=data[i];xData[i]=pt[0];yData[i]=pt.slice(1,valueCount+1);}}else{for(i=0;i<dataLength;i++){pt=data[i];xData[i]=pt[0];yData[i]=pt[1];}}}}else{for(i=0;i<dataLength;i++){pt={series:series};pointProto.applyOptions.apply(pt,[data[i]]);xData[i]=pt.x;yData[i]=pointProto.toYData?pointProto.toYData.call(pt):pt.y;}}\nif(isString(yData[0])){error(14,true);}\nseries.data=[];series.options.data=data;series.xData=xData;series.yData=yData;i=(oldData&&oldData.length)||0;while(i--){if(oldData[i]&&oldData[i].destroy){oldData[i].destroy();}}\nif(xAxis){xAxis.minRange=xAxis.userMinRange;}\nseries.isDirty=series.isDirtyData=chart.isDirtyBox=true;if(pick(redraw,true)){chart.redraw(false);}},remove:function(redraw,animation){var series=this,chart=series.chart;redraw=pick(redraw,true);if(!series.isRemoving){series.isRemoving=true;fireEvent(series,'remove',null,function(){series.destroy();chart.isDirtyLegend=chart.isDirtyBox=true;if(redraw){chart.redraw(animation);}});}\nseries.isRemoving=false;},processData:function(force){var series=this,processedXData=series.xData,processedYData=series.yData,dataLength=processedXData.length,cropStart=0,cropEnd=dataLength,cropped,distance,closestPointRange,xAxis=series.xAxis,i,options=series.options,cropThreshold=options.cropThreshold,isCartesian=series.isCartesian;if(isCartesian&&!series.isDirty&&!xAxis.isDirty&&!series.yAxis.isDirty&&!force){return false;}\nif(isCartesian&&series.sorted&&(!cropThreshold||dataLength>cropThreshold||series.forceCrop)){var extremes=xAxis.getExtremes(),min=extremes.min,max=extremes.max;if(processedXData[dataLength-1]<min||processedXData[0]>max){processedXData=[];processedYData=[];}else if(processedXData[0]<min||processedXData[dataLength-1]>max){for(i=0;i<dataLength;i++){if(processedXData[i]>=min){cropStart=mathMax(0,i-1);break;}}\nfor(;i<dataLength;i++){if(processedXData[i]>max){cropEnd=i+1;break;}}\nprocessedXData=processedXData.slice(cropStart,cropEnd);processedYData=processedYData.slice(cropStart,cropEnd);cropped=true;}}\nfor(i=processedXData.length-1;i>0;i--){distance=processedXData[i]-processedXData[i-1];if(distance>0&&(closestPointRange===UNDEFINED||distance<closestPointRange)){closestPointRange=distance;}}\nseries.cropped=cropped;series.cropStart=cropStart;series.processedXData=processedXData;series.processedYData=processedYData;if(options.pointRange===null){series.pointRange=closestPointRange||1;}\nseries.closestPointRange=closestPointRange;},generatePoints:function(){var series=this,options=series.options,dataOptions=options.data,data=series.data,dataLength,processedXData=series.processedXData,processedYData=series.processedYData,pointClass=series.pointClass,processedDataLength=processedXData.length,cropStart=series.cropStart||0,cursor,hasGroupedData=series.hasGroupedData,point,points=[],i;if(!data&&!hasGroupedData){var arr=[];arr.length=dataOptions.length;data=series.data=arr;}\nfor(i=0;i<processedDataLength;i++){cursor=cropStart+i;if(!hasGroupedData){if(data[cursor]){point=data[cursor];}else if(dataOptions[cursor]!==UNDEFINED){data[cursor]=point=(new pointClass()).init(series,dataOptions[cursor],processedXData[i]);}\npoints[i]=point;}else{points[i]=(new pointClass()).init(series,[processedXData[i]].concat(splat(processedYData[i])));}}\nif(data&&(processedDataLength!==(dataLength=data.length)||hasGroupedData)){for(i=0;i<dataLength;i++){if(i===cropStart&&!hasGroupedData){i+=processedDataLength;}\nif(data[i]){data[i].destroyElements();data[i].plotX=UNDEFINED;}}}\nseries.data=data;series.points=points;},translate:function(){if(!this.processedXData){this.processData();}\nthis.generatePoints();var series=this,chart=series.chart,options=series.options,stacking=options.stacking,xAxis=series.xAxis,categories=xAxis.categories,yAxis=series.yAxis,points=series.points,dataLength=points.length,hasModifyValue=!!series.modifyValue,isBottomSeries,allStackSeries=yAxis.series,i=allStackSeries.length,placeBetween=options.pointPlacement==='between';while(i--){if(allStackSeries[i].visible){if(allStackSeries[i]===series){isBottomSeries=true;}\nbreak;}}\nfor(i=0;i<dataLength;i++){var point=points[i],xValue=point.x,yValue=point.y,yBottom=point.low,stack=yAxis.stacks[(yValue<options.threshold?'-':'')+series.stackKey],pointStack,pointStackTotal;point.plotX=xAxis.translate(xValue,0,0,0,1,placeBetween);if(stacking&&series.visible&&stack&&stack[xValue]){pointStack=stack[xValue];pointStackTotal=pointStack.total;pointStack.cum=yBottom=pointStack.cum-yValue;yValue=yBottom+yValue;if(isBottomSeries){yBottom=pick(options.threshold,yAxis.min);}\nif(stacking==='percent'){yBottom=pointStackTotal?yBottom*100/pointStackTotal:0;yValue=pointStackTotal?yValue*100/pointStackTotal:0;}\npoint.percentage=pointStackTotal?point.y*100/pointStackTotal:0;point.total=point.stackTotal=pointStackTotal;point.stackY=yValue;}\npoint.yBottom=defined(yBottom)?yAxis.translate(yBottom,0,1,0,1):null;if(hasModifyValue){yValue=series.modifyValue(yValue,point);}\npoint.plotY=(typeof yValue==='number')?mathRound(yAxis.translate(yValue,0,1,0,1)*10)/10:UNDEFINED;point.clientX=chart.inverted?chart.plotHeight-point.plotX:point.plotX;point.category=categories&&categories[point.x]!==UNDEFINED?categories[point.x]:point.x;}\nseries.getSegments();},setTooltipPoints:function(renew){var series=this,points=[],pointsLength,low,high,xAxis=series.xAxis,axisLength=xAxis?(xAxis.tooltipLen||xAxis.len):series.chart.plotSizeX,plotX=(xAxis&&xAxis.tooltipPosName)||'plotX',point,i,tooltipPoints=[];if(series.options.enableMouseTracking===false){return;}\nif(renew){series.tooltipPoints=null;}\neach(series.segments||series.points,function(segment){points=points.concat(segment);});if(xAxis&&xAxis.reversed){points=points.reverse();}\npointsLength=points.length;for(i=0;i<pointsLength;i++){point=points[i];low=points[i-1]?high+1:0;high=points[i+1]?mathMax(0,mathFloor((point[plotX]+(points[i+1]?points[i+1][plotX]:axisLength))/2)):axisLength;while(low>=0&&low<=high){tooltipPoints[low++]=point;}}\nseries.tooltipPoints=tooltipPoints;},tooltipHeaderFormatter:function(key){var series=this,tooltipOptions=series.tooltipOptions,xDateFormat=tooltipOptions.xDateFormat,xAxis=series.xAxis,isDateTime=xAxis&&xAxis.options.type==='datetime',n;if(isDateTime&&!xDateFormat){for(n in timeUnits){if(timeUnits[n]>=xAxis.closestPointRange){xDateFormat=tooltipOptions.dateTimeLabelFormats[n];break;}}}\nreturn tooltipOptions.headerFormat.replace('{point.key}',isDateTime?dateFormat(xDateFormat,key):key).replace('{series.name}',series.name).replace('{series.color}',series.color);},onMouseOver:function(){var series=this,chart=series.chart,hoverSeries=chart.hoverSeries;if(hoverSeries&&hoverSeries!==series){hoverSeries.onMouseOut();}\nif(series.options.events.mouseOver){fireEvent(series,'mouseOver');}\nseries.setState(HOVER_STATE);chart.hoverSeries=series;},onMouseOut:function(){var series=this,options=series.options,chart=series.chart,tooltip=chart.tooltip,hoverPoint=chart.hoverPoint;if(hoverPoint){hoverPoint.onMouseOut();}\nif(series&&options.events.mouseOut){fireEvent(series,'mouseOut');}\nif(tooltip&&!options.stickyTracking&&!tooltip.shared){tooltip.hide();}\nseries.setState();chart.hoverSeries=null;},animate:function(init){var series=this,chart=series.chart,renderer=chart.renderer,clipRect,markerClipRect,animation=series.options.animation,clipBox=chart.clipBox,inverted=chart.inverted,sharedClipKey;if(animation&&!isObject(animation)){animation=defaultPlotOptions[series.type].animation;}\nsharedClipKey='_sharedClip'+animation.duration+animation.easing;if(init){clipRect=chart[sharedClipKey];markerClipRect=chart[sharedClipKey+'m'];if(!clipRect){chart[sharedClipKey]=clipRect=renderer.clipRect(extend(clipBox,{width:0}));chart[sharedClipKey+'m']=markerClipRect=renderer.clipRect(-99,inverted?-chart.plotLeft:-chart.plotTop,99,inverted?chart.chartWidth:chart.chartHeight);}\nseries.group.clip(clipRect);series.markerGroup.clip(markerClipRect);series.sharedClipKey=sharedClipKey;}else{clipRect=chart[sharedClipKey];if(clipRect){clipRect.animate({width:chart.plotSizeX},animation);chart[sharedClipKey+'m'].animate({width:chart.plotSizeX+99},animation);}\nseries.animate=null;series.animationTimeout=setTimeout(function(){series.afterAnimate();},animation.duration);}},afterAnimate:function(){var chart=this.chart,sharedClipKey=this.sharedClipKey,group=this.group,trackerGroup=this.trackerGroup;if(group&&this.options.clip!==false){group.clip(chart.clipRect);this.markerGroup.clip();}\nif(trackerGroup){trackerGroup.clip(chart.clipRect);}\nsetTimeout(function(){if(sharedClipKey&&chart[sharedClipKey]){chart[sharedClipKey]=chart[sharedClipKey].destroy();chart[sharedClipKey+'m']=chart[sharedClipKey+'m'].destroy();}},100);},drawPoints:function(){var series=this,pointAttr,points=series.points,chart=series.chart,plotX,plotY,i,point,radius,symbol,isImage,graphic,options=series.options,seriesMarkerOptions=options.marker,pointMarkerOptions,enabled,isInside,markerGroup=series.markerGroup;if(seriesMarkerOptions.enabled||series._hasPointMarkers){i=points.length;while(i--){point=points[i];plotX=point.plotX;plotY=point.plotY;graphic=point.graphic;pointMarkerOptions=point.marker||{};enabled=(seriesMarkerOptions.enabled&&pointMarkerOptions.enabled===UNDEFINED)||pointMarkerOptions.enabled;isInside=chart.isInsidePlot(plotX,plotY,chart.inverted);if(enabled&&plotY!==UNDEFINED&&!isNaN(plotY)){pointAttr=point.pointAttr[point.selected?SELECT_STATE:NORMAL_STATE];radius=pointAttr.r;symbol=pick(pointMarkerOptions.symbol,series.symbol);isImage=symbol.indexOf('url')===0;if(graphic){graphic.attr({visibility:isInside?(hasSVG?'inherit':VISIBLE):HIDDEN}).animate(extend({x:plotX-radius,y:plotY-radius},graphic.symbolName?{width:2*radius,height:2*radius}:{}));}else if(isInside&&(radius>0||isImage)&&(pointAttr.fill||pointAttr.stroke&&pointAttr[\"stroke-width\"])){point.graphic=graphic=chart.renderer.symbol(symbol,plotX-radius,plotY-radius,2*radius,2*radius).attr(pointAttr).add(markerGroup);}}}}},convertAttribs:function(options,base1,base2,base3){var conversion=this.pointAttrToOptions,attr,option,obj={};options=options||{};base1=base1||{};base2=base2||{};base3=base3||{};for(attr in conversion){option=conversion[attr];obj[attr]=pick(options[option],base1[attr],base2[attr],base3[attr]);}\nreturn obj;},getAttribs:function(){var series=this,normalOptions=defaultPlotOptions[series.type].marker?series.options.marker:series.options,stateOptions=normalOptions.states,stateOptionsHover=stateOptions[HOVER_STATE],pointStateOptionsHover,seriesColor=series.color,normalDefaults={stroke:seriesColor,fill:seriesColor},points=series.points||[],i,point,seriesPointAttr=[],pointAttr,pointAttrToOptions=series.pointAttrToOptions,hasPointSpecificOptions,key;if(series.options.marker){stateOptionsHover.radius=stateOptionsHover.radius||normalOptions.radius+2;stateOptionsHover.lineWidth=stateOptionsHover.lineWidth||normalOptions.lineWidth+1;}else{stateOptionsHover.color=stateOptionsHover.color||Color(stateOptionsHover.color||seriesColor).brighten(stateOptionsHover.brightness).get();}\nseriesPointAttr[NORMAL_STATE]=series.convertAttribs(normalOptions,normalDefaults);each([HOVER_STATE,SELECT_STATE],function(state){seriesPointAttr[state]=series.convertAttribs(stateOptions[state],seriesPointAttr[NORMAL_STATE]);});series.pointAttr=seriesPointAttr;i=points.length;while(i--){point=points[i];normalOptions=(point.options&&point.options.marker)||point.options;if(normalOptions&&normalOptions.enabled===false){normalOptions.radius=0;}\nhasPointSpecificOptions=false;if(point.options){for(key in pointAttrToOptions){if(defined(normalOptions[pointAttrToOptions[key]])){hasPointSpecificOptions=true;}}}\nif(hasPointSpecificOptions){pointAttr=[];stateOptions=normalOptions.states||{};pointStateOptionsHover=stateOptions[HOVER_STATE]=stateOptions[HOVER_STATE]||{};if(!series.options.marker){pointStateOptionsHover.color=Color(pointStateOptionsHover.color||point.options.color).brighten(pointStateOptionsHover.brightness||stateOptionsHover.brightness).get();}\npointAttr[NORMAL_STATE]=series.convertAttribs(normalOptions,seriesPointAttr[NORMAL_STATE]);pointAttr[HOVER_STATE]=series.convertAttribs(stateOptions[HOVER_STATE],seriesPointAttr[HOVER_STATE],pointAttr[NORMAL_STATE]);pointAttr[SELECT_STATE]=series.convertAttribs(stateOptions[SELECT_STATE],seriesPointAttr[SELECT_STATE],pointAttr[NORMAL_STATE]);}else{pointAttr=seriesPointAttr;}\npoint.pointAttr=pointAttr;}},destroy:function(){var series=this,chart=series.chart,issue134=/AppleWebKit\\/533/.test(userAgent),destroy,i,data=series.data||[],point,prop,axis;fireEvent(series,'destroy');removeEvent(series);each(['xAxis','yAxis'],function(AXIS){axis=series[AXIS];if(axis){erase(axis.series,series);axis.isDirty=true;}});if(series.legendItem){series.chart.legend.destroyItem(series);}\ni=data.length;while(i--){point=data[i];if(point&&point.destroy){point.destroy();}}\nseries.points=null;clearTimeout(series.animationTimeout);each(['area','graph','dataLabelsGroup','group','markerGroup','tracker','trackerGroup'],function(prop){if(series[prop]){destroy=issue134&&prop==='group'?'hide':'destroy';series[prop][destroy]();}});if(chart.hoverSeries===series){chart.hoverSeries=null;}\nerase(chart.series,series);for(prop in series){delete series[prop];}},drawDataLabels:function(){var series=this,seriesOptions=series.options,options=seriesOptions.dataLabels;if(options.enabled||series._hasPointLabels){var x,y,points=series.points,pointOptions,generalOptions,str,dataLabelsGroup,chart=series.chart,renderer=chart.renderer,inverted=chart.inverted,seriesType=series.type,stacking=seriesOptions.stacking,isBarLike=seriesType==='column'||seriesType==='bar',vAlignIsNull=options.verticalAlign===null,yIsNull=options.y===null,fontMetrics=renderer.fontMetrics(options.style.fontSize),fontLineHeight=fontMetrics.h,fontBaseline=fontMetrics.b,dataLabel,enabled;if(isBarLike){var defaultYs={top:fontBaseline,middle:fontBaseline-fontLineHeight/2,bottom:-fontLineHeight+fontBaseline};if(stacking){if(vAlignIsNull){options=merge(options,{verticalAlign:'middle'});}\nif(yIsNull){options=merge(options,{y:defaultYs[options.verticalAlign]});}}else{if(vAlignIsNull){options=merge(options,{verticalAlign:'top'});}else if(yIsNull){options=merge(options,{y:defaultYs[options.verticalAlign]});}}}\ndataLabelsGroup=series.plotGroup('dataLabelsGroup','data-labels',series.visible?VISIBLE:HIDDEN,6);generalOptions=options;each(points,function(point){dataLabel=point.dataLabel;options=generalOptions;pointOptions=point.options;if(pointOptions&&pointOptions.dataLabels){options=merge(options,pointOptions.dataLabels);}\nenabled=options.enabled;if(enabled){var plotX=(point.barX&&point.barX+point.barW/2)||pick(point.plotX,-999),plotY=pick(point.plotY,-999),individualYDelta=options.y===null?(point.y>=seriesOptions.threshold?-fontLineHeight+fontBaseline:fontBaseline):options.y;x=(inverted?chart.plotWidth-plotY:plotX)+options.x;y=mathRound((inverted?chart.plotHeight-plotX:plotY)+individualYDelta);}\nif(dataLabel&&series.isCartesian&&(!chart.isInsidePlot(x,y)||!enabled)){point.dataLabel=dataLabel.destroy();}else if(enabled){var align=options.align,attr,name;str=options.formatter.call(point.getLabelConfig(),options);if(seriesType==='column'){x+={left:-1,right:1}[align]*point.barW/2||0;}\nif(!stacking&&inverted&&point.y<0){align='right';x-=10;}\noptions.style.color=pick(options.color,options.style.color,series.color,'black');if(dataLabel){dataLabel.attr({text:str}).animate({x:x,y:y});}else if(defined(str)){attr={align:align,fill:options.backgroundColor,stroke:options.borderColor,'stroke-width':options.borderWidth,r:options.borderRadius||0,rotation:options.rotation,padding:options.padding,zIndex:1};for(name in attr){if(attr[name]===UNDEFINED){delete attr[name];}}\ndataLabel=point.dataLabel=renderer[options.rotation?'text':'label'](str,x,y,null,null,null,options.useHTML,true).attr(attr).css(options.style).add(dataLabelsGroup).shadow(options.shadow);}\nif(isBarLike&&seriesOptions.stacking&&dataLabel){var barX=point.barX,barY=point.barY,barW=point.barW,barH=point.barH;dataLabel.align(options,null,{x:inverted?chart.plotWidth-barY-barH:barX,y:inverted?chart.plotHeight-barX-barW:barY,width:inverted?barH:barW,height:inverted?barW:barH});}}});}},getSegmentPath:function(segment){var series=this,connectPoints=series.options.connectPoints,segmentPath=[];each(segment,function(point,i){if(series.getPointSpline){segmentPath.push.apply(segmentPath,series.getPointSpline(segment,point,i));}else{if(connectPoints)\nsegmentPath.push(i?L:M);else\nsegmentPath.push(M);if(i&&series.options.step){var lastPoint=segment[i-1];segmentPath.push(point.plotX,lastPoint.plotY);}\nif(connectPoints){segmentPath.push(point.plotX,point.plotY);}else{var addPoint=true;var roundPlotX=mathRound(point.plotX);var roundPlotY=mathRound(point.plotY);var index=segmentPath.length-2;while(segmentPath[index]==roundPlotX){if(segmentPath[index+1]==roundPlotY){addPoint=false;break;}\nindex-=3;}\nif(addPoint){segmentPath.push(roundPlotX,roundPlotY);segmentPath.push('L',roundPlotX,roundPlotY+1);}}}});return segmentPath;},getGraphPath:function(){var series=this,graphPath=[],segmentPath,singlePoints=[];each(series.segments,function(segment){segmentPath=series.getSegmentPath(segment);if(segment.length>1){graphPath=graphPath.concat(segmentPath);}else{singlePoints.push(segment[0]);}});series.singlePoints=singlePoints;series.graphPath=graphPath;return graphPath;},drawGraph:function(){var options=this.options,graph=this.graph,group=this.group,color=options.lineColor||this.color,lineWidth=options.lineWidth,dashStyle=options.dashStyle,attribs,graphPath=this.getGraphPath();if(graph){stop(graph);graph.animate({d:graphPath});}else{if(lineWidth){attribs={stroke:color,'stroke-width':lineWidth,zIndex:1};if(dashStyle){attribs.dashstyle=dashStyle;}\nthis.graph=this.chart.renderer.path(graphPath).attr(attribs).add(group).shadow(options.shadow);}}},invertGroups:function(){var series=this,chart=series.chart;function setInvert(){var size={width:series.yAxis.len,height:series.xAxis.len};each(['group','trackerGroup','markerGroup'],function(groupName){if(series[groupName]){series[groupName].attr(size).invert();}});}\naddEvent(chart,'resize',setInvert);addEvent(series,'destroy',function(){removeEvent(chart,'resize',setInvert);});setInvert();series.invertGroups=setInvert;},plotGroup:function(prop,name,visibility,zIndex,parent){var group=this[prop],chart=this.chart,xAxis=this.xAxis,yAxis=this.yAxis;if(!group){this[prop]=group=chart.renderer.g(name).attr({visibility:visibility,zIndex:zIndex||0.1}).add(parent);}\ngroup.translate(xAxis?xAxis.left:chart.plotLeft,yAxis?yAxis.top:chart.plotTop);return group;},render:function(){var series=this,chart=series.chart,group,options=series.options,animation=options.animation,doAnimation=animation&&!!series.animate,visibility=series.visible?VISIBLE:HIDDEN,zIndex=options.zIndex,hasRendered=series.hasRendered,chartSeriesGroup=chart.seriesGroup;group=series.plotGroup('group','series',visibility,zIndex,chartSeriesGroup);series.markerGroup=series.plotGroup('markerGroup','markers',visibility,zIndex,chartSeriesGroup);series.drawDataLabels();if(doAnimation){series.animate(true);}\nseries.getAttribs();group.inverted=chart.inverted;if(series.drawGraph){series.drawGraph();}\nseries.drawPoints();if(series.options.enableMouseTracking!==false){series.drawTracker();}\nif(chart.inverted){series.invertGroups();}\nif(options.clip!==false&&!series.sharedClipKey&&!hasRendered){group.clip(chart.clipRect);}\nif(doAnimation){series.animate();}else if(!hasRendered){series.afterAnimate();}\nseries.isDirty=series.isDirtyData=false;series.hasRendered=true;},redraw:function(){var series=this,chart=series.chart,wasDirtyData=series.isDirtyData,group=series.group;if(group){if(chart.inverted){group.attr({width:chart.plotWidth,height:chart.plotHeight});}\ngroup.animate({translateX:series.xAxis.left,translateY:series.yAxis.top});}\nseries.translate();series.setTooltipPoints(true);series.render();if(wasDirtyData){fireEvent(series,'updatedData');}},setState:function(state){var series=this,options=series.options,graph=series.graph,stateOptions=options.states,lineWidth=options.lineWidth;state=state||NORMAL_STATE;if(series.state!==state){series.state=state;if(stateOptions[state]&&stateOptions[state].enabled===false){return;}\nif(state){lineWidth=stateOptions[state].lineWidth||lineWidth+1;}\nif(graph&&!graph.dashstyle){graph.attr({'stroke-width':lineWidth},state?0:500);}}},setVisible:function(vis,redraw){var series=this,chart=series.chart,legendItem=series.legendItem,seriesGroup=series.group,seriesTracker=series.tracker,dataLabelsGroup=series.dataLabelsGroup,markerGroup=series.markerGroup,showOrHide,i,points=series.points,point,ignoreHiddenSeries=chart.options.chart.ignoreHiddenSeries,oldVisibility=series.visible;series.visible=vis=vis===UNDEFINED?!oldVisibility:vis;showOrHide=vis?'show':'hide';if(seriesGroup){seriesGroup[showOrHide]();}\nif(markerGroup){markerGroup[showOrHide]();}\nif(seriesTracker){seriesTracker[showOrHide]();}else if(points){i=points.length;while(i--){point=points[i];if(point.tracker){point.tracker[showOrHide]();}}}\nif(dataLabelsGroup){dataLabelsGroup[showOrHide]();}\nif(legendItem){chart.legend.colorizeItem(series,vis);}\nseries.isDirty=true;if(series.options.stacking){each(chart.series,function(otherSeries){if(otherSeries.options.stacking&&otherSeries.visible){otherSeries.isDirty=true;}});}\nif(ignoreHiddenSeries){chart.isDirtyBox=true;}\nif(redraw!==false){chart.redraw();}\nfireEvent(series,showOrHide);},show:function(){this.setVisible(true);},hide:function(){this.setVisible(false);},select:function(selected){var series=this;series.selected=selected=(selected===UNDEFINED)?!series.selected:selected;if(series.checkbox){series.checkbox.checked=selected;}\nfireEvent(series,selected?'select':'unselect');},drawTracker:function(){var series=this,options=series.options,trackByArea=options.trackByArea,trackerPath=[].concat(trackByArea?series.areaPath:series.graphPath),trackerPathLength=trackerPath.length,chart=series.chart,renderer=chart.renderer,snap=chart.options.tooltip.snap,tracker=series.tracker,cursor=options.cursor,css=cursor&&{cursor:cursor},singlePoints=series.singlePoints,trackerGroup=this.isCartesian&&this.plotGroup('trackerGroup',null,VISIBLE,options.zIndex||1,chart.trackerGroup),singlePoint,i;if(trackerPathLength&&!trackByArea){i=trackerPathLength+1;while(i--){if(trackerPath[i]===M){trackerPath.splice(i+1,0,trackerPath[i+1]-snap,trackerPath[i+2],L);}\nif((i&&trackerPath[i]===M)||i===trackerPathLength){trackerPath.splice(i,0,L,trackerPath[i-2]+snap,trackerPath[i-1]);}}}\nfor(i=0;i<singlePoints.length;i++){singlePoint=singlePoints[i];trackerPath.push(M,singlePoint.plotX-snap,singlePoint.plotY,L,singlePoint.plotX+snap,singlePoint.plotY);}\nif(tracker){tracker.attr({d:trackerPath});}else{series.tracker=renderer.path(trackerPath).attr({isTracker:true,'stroke-linejoin':'bevel',visibility:series.visible?VISIBLE:HIDDEN,stroke:TRACKER_FILL,fill:trackByArea?TRACKER_FILL:NONE,'stroke-width':options.lineWidth+(trackByArea?0:2*snap)}).on(hasTouch?'touchstart':'mouseover',function(){if(chart.hoverSeries!==series){series.onMouseOver();}}).on('mouseout',function(){if(!options.stickyTracking){series.onMouseOut();}}).css(css).add(trackerGroup);}}};var LineSeries=extendClass(Series);seriesTypes.line=LineSeries;defaultPlotOptions.area=merge(defaultSeriesOptions,{threshold:0});var AreaSeries=extendClass(Series,{type:'area',getSegmentPath:function(segment){var segmentPath=Series.prototype.getSegmentPath.call(this,segment),areaSegmentPath=[].concat(segmentPath),i,options=this.options,segLength=segmentPath.length;if(segLength===3){areaSegmentPath.push(L,segmentPath[1],segmentPath[2]);}\nif(options.stacking&&!this.closedStacks){for(i=segment.length-1;i>=0;i--){if(i<segment.length-1&&options.step){areaSegmentPath.push(segment[i+1].plotX,segment[i].yBottom);}\nareaSegmentPath.push(segment[i].plotX,segment[i].yBottom);}}else{this.closeSegment(areaSegmentPath,segment);}\nthis.areaPath=this.areaPath.concat(areaSegmentPath);return segmentPath;},closeSegment:function(path,segment){var translatedThreshold=this.yAxis.getThreshold(this.options.threshold);path.push(L,segment[segment.length-1].plotX,translatedThreshold,L,segment[0].plotX,translatedThreshold);},drawGraph:function(){this.areaPath=[];Series.prototype.drawGraph.apply(this);var areaPath=this.areaPath,options=this.options,area=this.area;if(area){area.animate({d:areaPath});}else{this.area=this.chart.renderer.path(areaPath).attr({fill:pick(options.fillColor,Color(this.color).setOpacity(options.fillOpacity||0.75).get()),zIndex:0}).add(this.group);}},drawLegendSymbol:function(legend,item){item.legendSymbol=this.chart.renderer.rect(0,legend.baseline-11,legend.options.symbolWidth,12,2).attr({zIndex:3}).add(item.legendGroup);}});seriesTypes.area=AreaSeries;defaultPlotOptions.spline=merge(defaultSeriesOptions);var SplineSeries=extendClass(Series,{type:'spline',getPointSpline:function(segment,point,i){var smoothing=1.5,denom=smoothing+1,plotX=point.plotX,plotY=point.plotY,lastPoint=segment[i-1],nextPoint=segment[i+1],leftContX,leftContY,rightContX,rightContY,ret;if(lastPoint&&nextPoint){var lastX=lastPoint.plotX,lastY=lastPoint.plotY,nextX=nextPoint.plotX,nextY=nextPoint.plotY,correction;leftContX=(smoothing*plotX+lastX)/denom;leftContY=(smoothing*plotY+lastY)/denom;rightContX=(smoothing*plotX+nextX)/denom;rightContY=(smoothing*plotY+nextY)/denom;correction=((rightContY-leftContY)*(rightContX-plotX))/(rightContX-leftContX)+plotY-rightContY;leftContY+=correction;rightContY+=correction;if(leftContY>lastY&&leftContY>plotY){leftContY=mathMax(lastY,plotY);rightContY=2*plotY-leftContY;}else if(leftContY<lastY&&leftContY<plotY){leftContY=mathMin(lastY,plotY);rightContY=2*plotY-leftContY;}\nif(rightContY>nextY&&rightContY>plotY){rightContY=mathMax(nextY,plotY);leftContY=2*plotY-rightContY;}else if(rightContY<nextY&&rightContY<plotY){rightContY=mathMin(nextY,plotY);leftContY=2*plotY-rightContY;}\npoint.rightContX=rightContX;point.rightContY=rightContY;}\nif(!i){ret=[M,plotX,plotY];}else{ret=['C',lastPoint.rightContX||lastPoint.plotX,lastPoint.rightContY||lastPoint.plotY,leftContX||plotX,leftContY||plotY,plotX,plotY];lastPoint.rightContX=lastPoint.rightContY=null;}\nreturn ret;}});seriesTypes.spline=SplineSeries;defaultPlotOptions.areaspline=merge(defaultPlotOptions.area);var areaProto=AreaSeries.prototype,AreaSplineSeries=extendClass(SplineSeries,{type:'areaspline',closedStacks:true,getSegmentPath:areaProto.getSegmentPath,closeSegment:areaProto.closeSegment,drawGraph:areaProto.drawGraph});seriesTypes.areaspline=AreaSplineSeries;defaultPlotOptions.column=merge(defaultSeriesOptions,{borderColor:'#FFFFFF',borderWidth:1,borderRadius:0,groupPadding:0.2,marker:null,pointPadding:0.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:0.1,shadow:false},select:{color:'#C0C0C0',borderColor:'#000000',shadow:false}},dataLabels:{y:null,verticalAlign:null},threshold:0});var ColumnSeries=extendClass(Series,{type:'column',tooltipOutsidePlot:true,pointAttrToOptions:{stroke:'borderColor','stroke-width':'borderWidth',fill:'color',r:'borderRadius'},init:function(){Series.prototype.init.apply(this,arguments);var series=this,chart=series.chart;if(chart.hasRendered){each(chart.series,function(otherSeries){if(otherSeries.type===series.type){otherSeries.isDirty=true;}});}},translate:function(){var series=this,chart=series.chart,options=series.options,stacking=options.stacking,borderWidth=options.borderWidth,columnCount=0,xAxis=series.xAxis,reversedXAxis=xAxis.reversed,stackGroups={},stackKey,columnIndex;Series.prototype.translate.apply(series);if(options.grouping===false){columnCount=1;}else{each(chart.series,function(otherSeries){var otherOptions=otherSeries.options;if(otherSeries.type===series.type&&otherSeries.visible&&series.options.group===otherOptions.group){if(otherOptions.stacking){stackKey=otherSeries.stackKey;if(stackGroups[stackKey]===UNDEFINED){stackGroups[stackKey]=columnCount++;}\ncolumnIndex=stackGroups[stackKey];}else if(otherOptions.grouping!==false){columnIndex=columnCount++;}\notherSeries.columnIndex=columnIndex;}});}\nvar points=series.points,categoryWidth=mathAbs(xAxis.transA)*(xAxis.ordinalSlope||options.pointRange||xAxis.closestPointRange||1),groupPadding=categoryWidth*options.groupPadding,groupWidth=categoryWidth-2*groupPadding,pointOffsetWidth=groupWidth/columnCount,optionPointWidth=options.pointWidth,pointPadding=defined(optionPointWidth)?(pointOffsetWidth-optionPointWidth)/2:pointOffsetWidth*options.pointPadding,pointWidth=pick(optionPointWidth,pointOffsetWidth-2*pointPadding),barW=mathCeil(mathMax(pointWidth,1+2*borderWidth)),colIndex=(reversedXAxis?columnCount-\nseries.columnIndex:series.columnIndex)||0,pointXOffset=pointPadding+(groupPadding+colIndex*pointOffsetWidth-(categoryWidth/2))*(reversedXAxis?-1:1),threshold=options.threshold,translatedThreshold=series.yAxis.getThreshold(threshold),minPointLength=pick(options.minPointLength,5);each(points,function(point){var plotY=point.plotY,yBottom=pick(point.yBottom,translatedThreshold),barX=point.plotX+pointXOffset,barY=mathCeil(mathMin(plotY,yBottom)),barH=mathCeil(mathMax(plotY,yBottom)-barY),stack=series.yAxis.stacks[(point.y<0?'-':'')+series.stackKey],shapeArgs;if(stacking&&series.visible&&stack&&stack[point.x]){stack[point.x].setOffset(pointXOffset,barW);}\nif(mathAbs(barH)<minPointLength){if(minPointLength){barH=minPointLength;barY=mathAbs(barY-translatedThreshold)>minPointLength?yBottom-minPointLength:translatedThreshold-(plotY<=translatedThreshold?minPointLength:0);}}\nextend(point,{barX:barX,barY:barY,barW:barW,barH:barH,pointWidth:pointWidth});point.shapeType='rect';point.shapeArgs=shapeArgs=chart.renderer.Element.prototype.crisp.call(0,borderWidth,barX,barY,barW,barH);if(borderWidth%2){shapeArgs.y-=1;shapeArgs.height+=1;}\npoint.trackerArgs=mathAbs(barH)<3&&merge(point.shapeArgs,{height:6,y:barY-3});});},getSymbol:noop,drawLegendSymbol:AreaSeries.prototype.drawLegendSymbol,drawGraph:noop,drawPoints:function(){var series=this,options=series.options,renderer=series.chart.renderer,graphic,shapeArgs;each(series.points,function(point){var plotY=point.plotY;if(plotY!==UNDEFINED&&!isNaN(plotY)&&point.y!==null){graphic=point.graphic;shapeArgs=point.shapeArgs;if(graphic){stop(graphic);graphic.animate(merge(shapeArgs));}else{point.graphic=graphic=renderer[point.shapeType](shapeArgs).attr(point.pointAttr[point.selected?SELECT_STATE:NORMAL_STATE]).add(series.group).shadow(options.shadow,null,options.stacking&&!options.borderRadius);}}});},drawTracker:function(){var series=this,chart=series.chart,renderer=chart.renderer,shapeArgs,tracker,trackerLabel=+new Date(),options=series.options,cursor=options.cursor,css=cursor&&{cursor:cursor},trackerGroup=series.isCartesian&&series.plotGroup('trackerGroup',null,VISIBLE,options.zIndex||1,chart.trackerGroup),rel,plotY,validPlotY;each(series.points,function(point){tracker=point.tracker;shapeArgs=point.trackerArgs||point.shapeArgs;plotY=point.plotY;validPlotY=!series.isCartesian||(plotY!==UNDEFINED&&!isNaN(plotY));delete shapeArgs.strokeWidth;if(point.y!==null&&validPlotY){if(tracker){tracker.attr(shapeArgs);}else{point.tracker=renderer[point.shapeType](shapeArgs).attr({isTracker:trackerLabel,fill:TRACKER_FILL,visibility:series.visible?VISIBLE:HIDDEN}).on(hasTouch?'touchstart':'mouseover',function(event){rel=event.relatedTarget||event.fromElement;if(chart.hoverSeries!==series&&attr(rel,'isTracker')!==trackerLabel){series.onMouseOver();}\npoint.onMouseOver();}).on('mouseout',function(event){if(!options.stickyTracking){rel=event.relatedTarget||event.toElement;if(attr(rel,'isTracker')!==trackerLabel){series.onMouseOut();}}}).css(css).add(point.group||trackerGroup);}}});},animate:function(init){var series=this,points=series.points,options=series.options;if(!init){each(points,function(point){var graphic=point.graphic,shapeArgs=point.shapeArgs,yAxis=series.yAxis,threshold=options.threshold;if(graphic){graphic.attr({height:0,y:defined(threshold)?yAxis.getThreshold(threshold):yAxis.translate(yAxis.getExtremes().min,0,1,0,1)});graphic.animate({height:shapeArgs.height,y:shapeArgs.y},options.animation);}});series.animate=null;}},remove:function(){var series=this,chart=series.chart;if(chart.hasRendered){each(chart.series,function(otherSeries){if(otherSeries.type===series.type){otherSeries.isDirty=true;}});}\nSeries.prototype.remove.apply(series,arguments);}});seriesTypes.column=ColumnSeries;defaultPlotOptions.bar=merge(defaultPlotOptions.column,{dataLabels:{align:'left',x:5,y:null,verticalAlign:'middle'}});var BarSeries=extendClass(ColumnSeries,{type:'bar',inverted:true});seriesTypes.bar=BarSeries;defaultPlotOptions.scatter=merge(defaultSeriesOptions,{lineWidth:0,states:{hover:{lineWidth:0}},tooltip:{headerFormat:'<span style=\"font-size: 10px; color:{series.color}\">{series.name}<\/span><br/>',pointFormat:'x: <b>{point.x}<\/b><br/>y: <b>{point.y}<\/b><br/>'}});var ScatterSeries=extendClass(Series,{type:'scatter',sorted:false,translate:function(){var series=this;Series.prototype.translate.apply(series);each(series.points,function(point){point.shapeType='circle';point.shapeArgs={x:point.plotX,y:point.plotY,r:series.chart.options.tooltip.snap};});},drawTracker:function(){var series=this,cursor=series.options.cursor,css=cursor&&{cursor:cursor},points=series.points,i=points.length,graphic;while(i--){graphic=points[i].graphic;if(graphic){graphic.element._i=i;}}\nif(!series._hasTracking){series.markerGroup.attr({isTracker:true}).on(hasTouch?'touchstart':'mouseover',function(e){series.onMouseOver();if(e.target._i!==UNDEFINED){points[e.target._i].onMouseOver();}}).on('mouseout',function(){if(!series.options.stickyTracking){series.onMouseOut();}}).css(css);}else{series._hasTracking=true;}}});seriesTypes.scatter=ScatterSeries;defaultPlotOptions.pie=merge(defaultSeriesOptions,{borderColor:'#FFFFFF',borderWidth:1,center:['50%','50%'],colorByPoint:true,dataLabels:{distance:30,enabled:true,formatter:function(){return this.point.name;},y:5},legendType:'point',marker:null,size:'75%',showInLegend:false,slicedOffset:10,states:{hover:{brightness:0.1,shadow:false}}});var PiePoint=extendClass(Point,{init:function(){Point.prototype.init.apply(this,arguments);var point=this,toggleSlice;extend(point,{visible:point.visible!==false,name:pick(point.name,'Slice')});toggleSlice=function(){point.slice();};addEvent(point,'select',toggleSlice);addEvent(point,'unselect',toggleSlice);return point;},setVisible:function(vis){var point=this,chart=point.series.chart,tracker=point.tracker,dataLabel=point.dataLabel,connector=point.connector,shadowGroup=point.shadowGroup,method;point.visible=vis=vis===UNDEFINED?!point.visible:vis;method=vis?'show':'hide';point.group[method]();if(tracker){tracker[method]();}\nif(dataLabel){dataLabel[method]();}\nif(connector){connector[method]();}\nif(shadowGroup){shadowGroup[method]();}\nif(point.legendItem){chart.legend.colorizeItem(point,vis);}},slice:function(sliced,redraw,animation){var point=this,series=point.series,chart=series.chart,slicedTranslation=point.slicedTranslation,translation;setAnimation(animation,chart);redraw=pick(redraw,true);sliced=point.sliced=defined(sliced)?sliced:!point.sliced;translation={translateX:(sliced?slicedTranslation[0]:chart.plotLeft),translateY:(sliced?slicedTranslation[1]:chart.plotTop)};point.group.animate(translation);if(point.shadowGroup){point.shadowGroup.animate(translation);}}});var PieSeries={type:'pie',isCartesian:false,pointClass:PiePoint,pointAttrToOptions:{stroke:'borderColor','stroke-width':'borderWidth',fill:'color'},getColor:function(){this.initialColor=this.chart.counters.color;},animate:function(){var series=this,points=series.points;each(points,function(point){var graphic=point.graphic,args=point.shapeArgs,up=-mathPI/2;if(graphic){graphic.attr({r:0,start:up,end:up});graphic.animate({r:args.r,start:args.start,end:args.end},series.options.animation);}});series.animate=null;},setData:function(data,redraw){Series.prototype.setData.call(this,data,false);this.processData();this.generatePoints();if(pick(redraw,true)){this.chart.redraw();}},getCenter:function(){var options=this.options,chart=this.chart,plotWidth=chart.plotWidth,plotHeight=chart.plotHeight,positions=options.center.concat([options.size,options.innerSize||0]),smallestSize=mathMin(plotWidth,plotHeight),isPercent;return map(positions,function(length,i){isPercent=/%$/.test(length);return isPercent?[plotWidth,plotHeight,smallestSize,smallestSize][i]*pInt(length)/100:length;});},translate:function(){this.generatePoints();var total=0,series=this,cumulative=-0.25,precision=1000,options=series.options,slicedOffset=options.slicedOffset,connectorOffset=slicedOffset+options.borderWidth,positions,chart=series.chart,start,end,angle,points=series.points,circ=2*mathPI,fraction,radiusX,radiusY,labelDistance=options.dataLabels.distance;series.center=positions=series.getCenter();series.getX=function(y,left){angle=math.asin((y-positions[1])/(positions[2]/2+labelDistance));return positions[0]+\n(left?-1:1)*(mathCos(angle)*(positions[2]/2+labelDistance));};each(points,function(point){total+=point.y;});each(points,function(point){fraction=total?point.y/total:0;start=mathRound(cumulative*circ*precision)/precision;cumulative+=fraction;end=mathRound(cumulative*circ*precision)/precision;point.shapeType='arc';point.shapeArgs={x:positions[0],y:positions[1],r:positions[2]/2,innerR:positions[3]/2,start:start,end:end};angle=(end+start)/2;point.slicedTranslation=map([mathCos(angle)*slicedOffset+chart.plotLeft,mathSin(angle)*slicedOffset+chart.plotTop],mathRound);radiusX=mathCos(angle)*positions[2]/2;radiusY=mathSin(angle)*positions[2]/2;point.tooltipPos=[positions[0]+radiusX*0.7,positions[1]+radiusY*0.7];point.labelPos=[positions[0]+radiusX+mathCos(angle)*labelDistance,positions[1]+radiusY+mathSin(angle)*labelDistance,positions[0]+radiusX+mathCos(angle)*connectorOffset,positions[1]+radiusY+mathSin(angle)*connectorOffset,positions[0]+radiusX,positions[1]+radiusY,labelDistance<0?'center':angle<circ/4?'left':'right',angle];point.percentage=fraction*100;point.total=total;});this.setTooltipPoints();},render:function(){var series=this;series.getAttribs();this.drawPoints();if(series.options.enableMouseTracking!==false){series.drawTracker();}\nthis.drawDataLabels();if(series.options.animation&&series.animate){series.animate();}\nseries.isDirty=false;},drawPoints:function(){var series=this,chart=series.chart,renderer=chart.renderer,groupTranslation,graphic,group,shadow=series.options.shadow,shadowGroup,shapeArgs;each(series.points,function(point){graphic=point.graphic;shapeArgs=point.shapeArgs;group=point.group;shadowGroup=point.shadowGroup;if(shadow&&!shadowGroup){shadowGroup=point.shadowGroup=renderer.g('shadow').attr({zIndex:4}).add();}\nif(!group){group=point.group=renderer.g('point').attr({zIndex:5}).add();}\ngroupTranslation=point.sliced?point.slicedTranslation:[chart.plotLeft,chart.plotTop];group.translate(groupTranslation[0],groupTranslation[1]);if(shadowGroup){shadowGroup.translate(groupTranslation[0],groupTranslation[1]);}\nif(graphic){graphic.animate(shapeArgs);}else{point.graphic=graphic=renderer.arc(shapeArgs).setRadialReference(series.center).attr(extend(point.pointAttr[NORMAL_STATE],{'stroke-linejoin':'round'})).add(point.group).shadow(shadow,shadowGroup);}\nif(point.visible===false){point.setVisible(false);}});},drawDataLabels:function(){var series=this,data=series.data,point,chart=series.chart,options=series.options.dataLabels,connectorPadding=pick(options.connectorPadding,10),connectorWidth=pick(options.connectorWidth,1),connector,connectorPath,softConnector=pick(options.softConnector,true),distanceOption=options.distance,seriesCenter=series.center,radius=seriesCenter[2]/2,centerY=seriesCenter[1],outside=distanceOption>0,dataLabel,labelPos,labelHeight,halves=[[],[]],x,y,visibility,rankArr,sort,i=2,j;if(!options.enabled&&!series._hasPointLabels){return;}\nSeries.prototype.drawDataLabels.apply(series);each(data,function(point){if(point.dataLabel){halves[point.labelPos[7]<mathPI/2?0:1].push(point);}});halves[1].reverse();sort=function(a,b){return b.y-a.y;};labelHeight=halves[0][0]&&halves[0][0].dataLabel&&(halves[0][0].dataLabel.getBBox().height||21);while(i--){var slots=[],slotsLength,usedSlots=[],points=halves[i],pos,length=points.length,slotIndex;if(distanceOption>0){for(pos=centerY-radius-distanceOption;pos<=centerY+radius+distanceOption;pos+=labelHeight){slots.push(pos);}\nslotsLength=slots.length;if(length>slotsLength){rankArr=[].concat(points);rankArr.sort(sort);j=length;while(j--){rankArr[j].rank=j;}\nj=length;while(j--){if(points[j].rank>=slotsLength){points.splice(j,1);}}\nlength=points.length;}\nfor(j=0;j<length;j++){point=points[j];labelPos=point.labelPos;var closest=9999,distance,slotI;for(slotI=0;slotI<slotsLength;slotI++){distance=mathAbs(slots[slotI]-labelPos[1]);if(distance<closest){closest=distance;slotIndex=slotI;}}\nif(slotIndex<j&&slots[j]!==null){slotIndex=j;}else if(slotsLength<length-j+slotIndex&&slots[j]!==null){slotIndex=slotsLength-length+j;while(slots[slotIndex]===null){slotIndex++;}}else{while(slots[slotIndex]===null){slotIndex++;}}\nusedSlots.push({i:slotIndex,y:slots[slotIndex]});slots[slotIndex]=null;}\nusedSlots.sort(sort);}\nfor(j=0;j<length;j++){var slot,naturalY;point=points[j];labelPos=point.labelPos;dataLabel=point.dataLabel;visibility=point.visible===false?HIDDEN:VISIBLE;naturalY=labelPos[1];if(distanceOption>0){slot=usedSlots.pop();slotIndex=slot.i;y=slot.y;if((naturalY>y&&slots[slotIndex+1]!==null)||(naturalY<y&&slots[slotIndex-1]!==null)){y=naturalY;}}else{y=naturalY;}\nx=options.justify?seriesCenter[0]+(i?-1:1)*(radius+distanceOption):series.getX(slotIndex===0||slotIndex===slots.length-1?naturalY:y,i);dataLabel.attr({visibility:visibility,align:labelPos[6]})[dataLabel.moved?'animate':'attr']({x:x+options.x+\n({left:connectorPadding,right:-connectorPadding}[labelPos[6]]||0),y:y+options.y});dataLabel.moved=true;if(outside&&connectorWidth){connector=point.connector;connectorPath=softConnector?[M,x+(labelPos[6]==='left'?5:-5),y,'C',x,y,2*labelPos[2]-labelPos[4],2*labelPos[3]-labelPos[5],labelPos[2],labelPos[3],L,labelPos[4],labelPos[5]]:[M,x+(labelPos[6]==='left'?5:-5),y,L,labelPos[2],labelPos[3],L,labelPos[4],labelPos[5]];if(connector){connector.animate({d:connectorPath});connector.attr('visibility',visibility);}else{point.connector=connector=series.chart.renderer.path(connectorPath).attr({'stroke-width':connectorWidth,stroke:options.connectorColor||point.color||'#606060',visibility:visibility,zIndex:3}).translate(chart.plotLeft,chart.plotTop).add();}}}}},drawTracker:ColumnSeries.prototype.drawTracker,drawLegendSymbol:AreaSeries.prototype.drawLegendSymbol,getSymbol:function(){}};PieSeries=extendClass(Series,PieSeries);seriesTypes.pie=PieSeries;var DATA_GROUPING='dataGrouping',seriesProto=Series.prototype,baseProcessData=seriesProto.processData,baseGeneratePoints=seriesProto.generatePoints,baseDestroy=seriesProto.destroy,baseTooltipHeaderFormatter=seriesProto.tooltipHeaderFormatter,NUMBER='number',commonOptions={approximation:'average',groupPixelWidth:2,dateTimeLabelFormats:hash(MILLISECOND,['%A, %b %e, %H:%M:%S.%L','%A, %b %e, %H:%M:%S.%L','-%H:%M:%S.%L'],SECOND,['%A, %b %e, %H:%M:%S','%A, %b %e, %H:%M:%S','-%H:%M:%S'],MINUTE,['%A, %b %e, %H:%M','%A, %b %e, %H:%M','-%H:%M'],HOUR,['%A, %b %e, %H:%M','%A, %b %e, %H:%M','-%H:%M'],DAY,['%A, %b %e, %Y','%A, %b %e','-%A, %b %e, %Y'],WEEK,['Week from %A, %b %e, %Y','%A, %b %e','-%A, %b %e, %Y'],MONTH,['%B %Y','%B','-%B %Y'],YEAR,['%Y','%Y','-%Y'])},specificOptions={line:{},spline:{},area:{},areaspline:{},column:{approximation:'sum',groupPixelWidth:10},arearange:{approximation:'range'},areasplinerange:{approximation:'range'},columnrange:{approximation:'range',groupPixelWidth:10},candlestick:{approximation:'ohlc',groupPixelWidth:10},ohlc:{approximation:'ohlc',groupPixelWidth:5}},defaultDataGroupingUnits=[[MILLISECOND,[1,2,5,10,20,25,50,100,200,500]],[SECOND,[1,2,5,10,15,30]],[MINUTE,[1,2,5,10,15,30]],[HOUR,[1,2,3,4,6,8,12]],[DAY,[1]],[WEEK,[1]],[MONTH,[1,3,6]],[YEAR,null]],approximations={sum:function(arr){var len=arr.length,ret;if(!len&&arr.hasNulls){ret=null;}else if(len){ret=0;while(len--){ret+=arr[len];}}\nreturn ret;},average:function(arr){var len=arr.length,ret=approximations.sum(arr);if(typeof ret===NUMBER&&len){ret=ret/len;}\nreturn ret;},open:function(arr){return arr.length?arr[0]:(arr.hasNulls?null:UNDEFINED);},high:function(arr){return arr.length?arrayMax(arr):(arr.hasNulls?null:UNDEFINED);},low:function(arr){return arr.length?arrayMin(arr):(arr.hasNulls?null:UNDEFINED);},close:function(arr){return arr.length?arr[arr.length-1]:(arr.hasNulls?null:UNDEFINED);},ohlc:function(open,high,low,close){open=approximations.open(open);high=approximations.high(high);low=approximations.low(low);close=approximations.close(close);if(typeof open===NUMBER||typeof high===NUMBER||typeof low===NUMBER||typeof close===NUMBER){return[open,high,low,close];}},range:function(low,high){low=approximations.low(low);high=approximations.high(high);if(typeof low===NUMBER||typeof high===NUMBER){return[low,high];}},all:function(arr){if(arr.length){return arr;}else{return arr.hasNulls?null:UNDEFINED;}},minmax:function(arr){if(arr.length){return[arrayMin(arr),arrayMax(arr)];}else{return arr.hasNulls?null:UNDEFINED;}}};seriesProto.groupData=function(xData,yData,groupPositions,approximation){var series=this,data=series.data,dataOptions=series.options.data,groupedXData=[],groupedYData=[],dataLength=xData.length,pointX,pointY,groupedY,handleYData=!!yData,values=[[],[],[],[]],approximationFn=typeof approximation==='function'?approximation:approximations[approximation],pointArrayMap=series.pointArrayMap,pointArrayMapLength=pointArrayMap&&pointArrayMap.length,i;for(i=0;i<=dataLength;i++){while((groupPositions[1]!==UNDEFINED&&xData[i]>=groupPositions[1])||i===dataLength){pointX=groupPositions.shift();groupedY=approximationFn.apply(0,values);if(groupedY!==UNDEFINED){if(groupedY instanceof Array){for(var j=0;j<groupedY.length;j++){groupedXData.push(pointX);groupedYData.push(groupedY[j]);}}else{groupedXData.push(pointX);groupedYData.push(groupedY);}}\nvalues[0]=[];values[1]=[];values[2]=[];values[3]=[];if(i===dataLength){break;}}\nif(i===dataLength){break;}\nif(pointArrayMap){var index=series.cropStart+i,point=(data&&data[index])||series.pointClass.prototype.applyOptions.apply({series:series},[dataOptions[index]]),j,val;for(j=0;j<pointArrayMapLength;j++){val=point[pointArrayMap[j]];if(typeof val===NUMBER){values[j].push(val);}else if(val===null){values[j].hasNulls=true;}}}else{pointY=handleYData?yData[i]:null;if(typeof pointY===NUMBER){values[0].push(pointY);}else if(pointY===null){values[0].hasNulls=true;}}}\nreturn[groupedXData,groupedYData];};seriesProto.processData=function(){var series=this,options=series.options,dataGroupingOptions=options[DATA_GROUPING],groupingEnabled=dataGroupingOptions&&dataGroupingOptions.enabled,hasGroupedData;series.forceCrop=groupingEnabled;if(baseProcessData.apply(series,arguments)===false||!groupingEnabled){return;}else{series.destroyGroupedData();}\nvar i,chart=series.chart,processedXData=series.processedXData,processedYData=series.processedYData,plotSizeX=chart.plotSizeX,xAxis=series.xAxis,groupPixelWidth=pick(xAxis.groupPixelWidth,dataGroupingOptions.groupPixelWidth),dataLength=processedXData.length,chartSeries=chart.series,nonGroupedPointRange=series.pointRange;if(!xAxis.groupPixelWidth){i=chartSeries.length;while(i--){if(chartSeries[i].xAxis===xAxis&&chartSeries[i].options[DATA_GROUPING]){groupPixelWidth=mathMax(groupPixelWidth,chartSeries[i].options[DATA_GROUPING].groupPixelWidth);}}\nxAxis.groupPixelWidth=groupPixelWidth;}\nif(dataLength>(plotSizeX/groupPixelWidth/2)||(dataLength&&dataGroupingOptions.forced)){hasGroupedData=true;series.points=null;var extremes=xAxis.getExtremes(),xMin=extremes.min,xMax=extremes.max,groupIntervalFactor=(xAxis.getGroupIntervalFactor&&xAxis.getGroupIntervalFactor(xMin,xMax,processedXData))||1,interval=(groupPixelWidth*(xMax-xMin)/plotSizeX)*groupIntervalFactor/options.pointsPerPosition,groupPositions=(xAxis.getNonLinearTimeTicks||getTimeTicks)(normalizeTimeTickInterval(interval,dataGroupingOptions.units||defaultDataGroupingUnits),xMin,xMax,null,processedXData,series.closestPointRange),groupedXandY=seriesProto.groupData.apply(series,[processedXData,processedYData,groupPositions,dataGroupingOptions.approximation]),groupedXData=groupedXandY[0],groupedYData=groupedXandY[1];if(dataGroupingOptions.smoothed){i=groupedXData.length-1;groupedXData[i]=xMax;while(i--&&i>0){groupedXData[i]+=interval/2;}\ngroupedXData[0]=xMin;}\nseries.currentDataGrouping=groupPositions.info;if(options.pointRange===null){series.pointRange=groupPositions.info.totalRange;}\nseries.closestPointRange=groupPositions.info.totalRange;series.processedXData=groupedXData;series.processedYData=groupedYData;}else{series.currentDataGrouping=null;series.pointRange=nonGroupedPointRange;}\nseries.hasGroupedData=hasGroupedData;};seriesProto.destroyGroupedData=function(){var groupedData=this.groupedData;each(groupedData||[],function(point,i){if(point){groupedData[i]=point.destroy?point.destroy():null;}});this.groupedData=null;};seriesProto.generatePoints=function(){baseGeneratePoints.apply(this);this.destroyGroupedData();this.groupedData=this.hasGroupedData?this.points:null;};seriesProto.tooltipHeaderFormatter=function(key){var series=this,options=series.options,tooltipOptions=series.tooltipOptions,dataGroupingOptions=options.dataGrouping,xDateFormat=tooltipOptions.xDateFormat,xDateFormatEnd,xAxis=series.xAxis,currentDataGrouping,dateTimeLabelFormats,labelFormats,formattedKey,n,ret;if(xAxis&&xAxis.options.type==='datetime'&&dataGroupingOptions){currentDataGrouping=series.currentDataGrouping;dateTimeLabelFormats=dataGroupingOptions.dateTimeLabelFormats;if(currentDataGrouping){labelFormats=dateTimeLabelFormats[currentDataGrouping.unitName];if(currentDataGrouping.count===1){xDateFormat=labelFormats[0];}else{xDateFormat=labelFormats[1];xDateFormatEnd=labelFormats[2];}}else if(!xDateFormat){for(n in timeUnits){if(timeUnits[n]>=xAxis.closestPointRange){xDateFormat=dateTimeLabelFormats[n][0];break;}}}\nformattedKey=dateFormat(xDateFormat,key);if(xDateFormatEnd){formattedKey+=dateFormat(xDateFormatEnd,key+currentDataGrouping.totalRange-1);}\nret=tooltipOptions.headerFormat.replace('{point.key}',formattedKey);}else{ret=baseTooltipHeaderFormatter.apply(series,[key]);}\nreturn ret;};seriesProto.destroy=function(){var series=this,groupedData=series.groupedData||[],i=groupedData.length;while(i--){if(groupedData[i]){groupedData[i].destroy();}}\nbaseDestroy.apply(series);};wrap(seriesProto,'setOptions',function(proceed,itemOptions){var options=proceed.call(this,itemOptions),type=this.type;if(!defaultPlotOptions[type].dataGrouping){defaultPlotOptions[type].dataGrouping=merge(commonOptions,specificOptions[type]);}\noptions.dataGrouping=merge(defaultPlotOptions[this.type].dataGrouping,this.chart.options.plotOptions[this.type].dataGrouping,itemOptions.dataGrouping);return options;});defaultPlotOptions.ohlc=merge(defaultPlotOptions.column,{lineWidth:1,tooltip:{pointFormat:'<span style=\"color:{series.color};font-weight:bold\">{series.name}<\/span><br/>'+'Open: {point.open}<br/>'+'High: {point.high}<br/>'+'Low: {point.low}<br/>'+'Close: {point.close}<br/>'},states:{hover:{lineWidth:3}},threshold:null});var OHLCPoint=extendClass(Point,{applyOptions:function(options){var point=this,series=point.series,pointArrayMap=series.pointArrayMap,i=0,j=0,valueCount=pointArrayMap.length;if(typeof options==='object'&&typeof options.length!=='number'){extend(point,options);point.options=options;}else if(options.length){if(options.length>valueCount){if(typeof options[0]==='string'){point.name=options[0];}else if(typeof options[0]==='number'){point.x=options[0];}\ni++;}\nwhile(j<valueCount){point[pointArrayMap[j++]]=options[i++];}}\npoint.y=point[series.pointValKey];if(point.x===UNDEFINED&&series){point.x=series.autoIncrement();}\nreturn point;},tooltipFormatter:function(){var point=this,series=point.series;return['<span style=\"color:'+series.color+';font-weight:bold\">',(point.name||series.name),'<\/span><br/>','Open: ',point.open,'<br/>','High: ',point.high,'<br/>','Low: ',point.low,'<br/>','Close: ',point.close,'<br/>'].join('');},toYData:function(){return[this.open,this.high,this.low,this.close];}});var OHLCSeries=extendClass(seriesTypes.column,{type:'ohlc',pointArrayMap:['open','high','low','close'],pointValKey:'high',pointClass:OHLCPoint,pointAttrToOptions:{stroke:'color','stroke-width':'lineWidth'},upColorProp:'stroke',getAttribs:function(){seriesTypes.column.prototype.getAttribs.apply(this,arguments);var series=this,options=series.options,stateOptions=options.states,upColor=options.upColor||series.color,seriesDownPointAttr=merge(series.pointAttr),upColorProp=series.upColorProp;seriesDownPointAttr[''][upColorProp]=upColor;seriesDownPointAttr.hover[upColorProp]=stateOptions.hover.upColor||upColor;seriesDownPointAttr.select[upColorProp]=stateOptions.select.upColor||upColor;each(series.points,function(point){if(point.open<point.close){point.pointAttr=seriesDownPointAttr;}});},translate:function(){var series=this,yAxis=series.yAxis;seriesTypes.column.prototype.translate.apply(series);each(series.points,function(point){if(point.open!==null){point.plotOpen=yAxis.translate(point.open,0,1,0,1);}\nif(point.close!==null){point.plotClose=yAxis.translate(point.close,0,1,0,1);}});},drawPoints:function(){var series=this,points=series.points,chart=series.chart,pointAttr,plotOpen,plotClose,crispCorr,halfWidth,path,graphic,crispX;each(points,function(point){if(point.plotY!==UNDEFINED){graphic=point.graphic;pointAttr=point.pointAttr[point.selected?'selected':''];crispCorr=(pointAttr['stroke-width']%2)/2;crispX=mathRound(point.plotX)+crispCorr;halfWidth=mathRound(point.barW/2);path=['M',crispX,mathRound(point.yBottom),'L',crispX,mathRound(point.plotY)];if(point.open!==null){plotOpen=mathRound(point.plotOpen)+crispCorr;path.push('M',crispX,plotOpen,'L',crispX-halfWidth,plotOpen);}\nif(point.close!==null){plotClose=mathRound(point.plotClose)+crispCorr;path.push('M',crispX,plotClose,'L',crispX+halfWidth,plotClose);}\nif(graphic){graphic.animate({d:path});}else{point.graphic=chart.renderer.path(path).attr(pointAttr).add(series.group);}}});},animate:null});seriesTypes.ohlc=OHLCSeries;defaultPlotOptions.candlestick=merge(defaultPlotOptions.column,{lineColor:'black',lineWidth:1,states:{hover:{lineWidth:2}},tooltip:defaultPlotOptions.ohlc.tooltip,threshold:null,upColor:'white'});var CandlestickSeries=extendClass(OHLCSeries,{type:'candlestick',pointAttrToOptions:{fill:'color',stroke:'lineColor','stroke-width':'lineWidth'},upColorProp:'fill',drawPoints:function(){var series=this,points=series.points,chart=series.chart,pointAttr,plotOpen,plotClose,topBox,bottomBox,crispCorr,crispX,graphic,path,halfWidth;each(points,function(point){graphic=point.graphic;if(point.plotY!==UNDEFINED){pointAttr=point.pointAttr[point.selected?'selected':''];crispCorr=(pointAttr['stroke-width']%2)/2;crispX=mathRound(point.plotX)+crispCorr;plotOpen=mathRound(point.plotOpen)+crispCorr;plotClose=mathRound(point.plotClose)+crispCorr;topBox=math.min(plotOpen,plotClose);bottomBox=math.max(plotOpen,plotClose);halfWidth=mathRound(point.barW/2);path=['M',crispX-halfWidth,bottomBox,'L',crispX-halfWidth,topBox,'L',crispX+halfWidth,topBox,'L',crispX+halfWidth,bottomBox,'L',crispX-halfWidth,bottomBox,'M',crispX,bottomBox,'L',crispX,mathRound(point.yBottom),'M',crispX,topBox,'L',crispX,mathRound(point.plotY),'Z'];if(graphic){graphic.animate({d:path});}else{point.graphic=chart.renderer.path(path).attr(pointAttr).add(series.group);}}});}});seriesTypes.candlestick=CandlestickSeries;var symbols=SVGRenderer.prototype.symbols;defaultPlotOptions.flags=merge(defaultPlotOptions.column,{dataGrouping:null,fillColor:'white',lineWidth:1,pointRange:0,shape:'flag',stackDistance:7,states:{hover:{lineColor:'black',fillColor:'#FCFFC5'}},style:{fontSize:'11px',fontWeight:'bold',textAlign:'center'},threshold:null,y:-30});seriesTypes.flags=extendClass(seriesTypes.column,{type:'flags',sorted:false,noSharedTooltip:true,takeOrdinalPosition:false,forceCrop:true,init:Series.prototype.init,pointAttrToOptions:{fill:'fillColor',stroke:'color','stroke-width':'lineWidth',r:'radius'},translate:function(){seriesTypes.column.prototype.translate.apply(this);var series=this,options=series.options,chart=series.chart,points=series.points,cursor=points.length-1,point,lastPoint,optionsOnSeries=options.onSeries,onSeries=optionsOnSeries&&chart.get(optionsOnSeries),step=onSeries&&onSeries.options.step,onData=onSeries&&onSeries.points,i=onData&&onData.length,xAxisExt=series.xAxis.getExtremes(),leftPoint,lastX,rightPoint;if(onSeries&&onSeries.visible&&i){lastX=onData[i-1].x;points.sort(function(a,b){return(a.x-b.x);});while(i--&&points[cursor]){point=points[cursor];leftPoint=onData[i];if(leftPoint.x<=point.x&&leftPoint.plotY!==UNDEFINED){if(point.x<=lastX){point.plotY=leftPoint.plotY;if(leftPoint.x<point.x&&!step){rightPoint=onData[i+1];if(rightPoint&&rightPoint.plotY!==UNDEFINED){point.plotY+=((point.x-leftPoint.x)/(rightPoint.x-leftPoint.x))*(rightPoint.plotY-leftPoint.plotY);}}}\ncursor--;i++;if(cursor<0){break;}}}}\neach(points,function(point,i){if(point.plotY===UNDEFINED){if(point.x>=xAxisExt.min&&point.x<=xAxisExt.max){point.plotY=chart.plotHeight;}else{point.shapeArgs={};}}\nlastPoint=points[i-1];if(lastPoint&&lastPoint.plotX===point.plotX){if(lastPoint.stackIndex===UNDEFINED){lastPoint.stackIndex=0;}\npoint.stackIndex=lastPoint.stackIndex+1;}});},drawPoints:function(){var series=this,pointAttr,points=series.points,chart=series.chart,renderer=chart.renderer,plotX,plotY,options=series.options,optionsY=options.y,shape=options.shape,box,bBox,i,point,graphic,tracker,stackIndex,crisp=(options.lineWidth%2/2),anchorX,anchorY;i=points.length;while(i--){point=points[i];plotX=point.plotX+crisp;stackIndex=point.stackIndex;plotY=point.plotY;if(plotY!==UNDEFINED){plotY=point.plotY+optionsY+crisp-(stackIndex!==UNDEFINED&&stackIndex*options.stackDistance);}\nanchorX=stackIndex?UNDEFINED:point.plotX+crisp;anchorY=stackIndex?UNDEFINED:point.plotY;graphic=point.graphic;tracker=point.tracker;if(plotY!==UNDEFINED){pointAttr=point.pointAttr[point.selected?'select':''];if(graphic){graphic.attr({x:plotX,y:plotY,r:pointAttr.r,anchorX:anchorX,anchorY:anchorY});}else{graphic=point.graphic=renderer.label(point.options.title||options.title||'A',plotX,plotY,shape,anchorX,anchorY).css(merge(options.style,point.style)).attr(pointAttr).attr({align:shape==='flag'?'left':'center',width:options.width,height:options.height}).add(series.group).shadow(options.shadow);}\nbox=graphic.box;bBox=box.getBBox();point.shapeArgs=extend(bBox,{x:plotX-(shape==='flag'?0:box.attr('width')/2),y:plotY});}else if(graphic){point.graphic=graphic.destroy();if(tracker){tracker.attr('y',-9999);}}}},drawTracker:function(){seriesTypes.column.prototype.drawTracker.apply(this);each(this.points,function(point){if(point.tracker){addEvent(point.tracker.element,'mouseover',function(){point.graphic.toFront();});}});},tooltipFormatter:function(item){return item.point.text;},animate:function(){}});symbols.flag=function(x,y,w,h,options){var anchorX=(options&&options.anchorX)||x,anchorY=(options&&options.anchorY)||y;return['M',anchorX,anchorY,'L',x,y+h,x,y,x+w,y,x+w,y+h,x,y+h,'M',anchorX,anchorY,'Z'];};each(['circle','square'],function(shape){symbols[shape+'pin']=function(x,y,w,h,options){var anchorX=options&&options.anchorX,anchorY=options&&options.anchorY,path=symbols[shape](x,y,w,h);if(anchorX&&anchorY){path.push('M',anchorX,y+h,'L',anchorX,anchorY);}\nreturn path;};});if(Renderer===VMLRenderer){each(['flag','circlepin','squarepin'],function(shape){VMLRenderer.prototype.symbols[shape]=symbols[shape];});}\nvar MOUSEDOWN=hasTouch?'touchstart':'mousedown',MOUSEMOVE=hasTouch?'touchmove':'mousemove',MOUSEUP=hasTouch?'touchend':'mouseup';var buttonGradient=hash(LINEAR_GRADIENT,{x1:0,y1:0,x2:0,y2:1},STOPS,[[0,'#FFF'],[1,'#CCC']]),units=[].concat(defaultDataGroupingUnits);units[4]=[DAY,[1,2,3,4]];units[5]=[WEEK,[1,2,3]];extend(defaultOptions,{navigator:{handles:{backgroundColor:'#FFF',borderColor:'#666'},height:40,margin:10,maskFill:'rgba(255, 255, 255, 0.75)',outlineColor:'#444',outlineWidth:1,series:{type:'areaspline',color:'#4572A7',compare:null,fillOpacity:0.4,dataGrouping:{approximation:'average',groupPixelWidth:2,smoothed:true,units:units},dataLabels:{enabled:false},id:PREFIX+'navigator-series',lineColor:'#4572A7',lineWidth:1,marker:{enabled:false},pointRange:0,shadow:false},xAxis:{tickWidth:0,lineWidth:0,gridLineWidth:1,tickPixelInterval:200,labels:{align:'left',x:3,y:-4}},yAxis:{gridLineWidth:0,startOnTick:false,endOnTick:false,minPadding:0.1,maxPadding:0.1,labels:{enabled:false},title:{text:null},tickWidth:0}},scrollbar:{height:hasTouch?20:14,barBackgroundColor:buttonGradient,barBorderRadius:2,barBorderWidth:1,barBorderColor:'#666',buttonArrowColor:'#666',buttonBackgroundColor:buttonGradient,buttonBorderColor:'#666',buttonBorderRadius:2,buttonBorderWidth:1,rifleColor:'#666',trackBackgroundColor:hash(LINEAR_GRADIENT,{x1:0,y1:0,x2:0,y2:1},STOPS,[[0,'#EEE'],[1,'#FFF']]),trackBorderColor:'#CCC',trackBorderWidth:1}});function Scroller(chart){var chartOptions=chart.options,navigatorOptions=chartOptions.navigator,navigatorEnabled=navigatorOptions.enabled,scrollbarOptions=chartOptions.scrollbar,scrollbarEnabled=scrollbarOptions.enabled,height=navigatorEnabled?navigatorOptions.height:0,scrollbarHeight=scrollbarEnabled?scrollbarOptions.height:0,baseSeriesOption=navigatorOptions.baseSeries;this.baseSeries=chart.series[baseSeriesOption]||(typeof baseSeriesOption==='string'&&chart.get(baseSeriesOption))||chart.series[0];this.handles=[];this.scrollbarButtons=[];this.elementsToDestroy=[];chart.resetZoomEnabled=false;this.chart=chart;this.height=height;this.scrollbarHeight=scrollbarHeight;this.scrollbarEnabled=scrollbarEnabled;this.navigatorEnabled=navigatorEnabled;this.navigatorOptions=navigatorOptions;this.scrollbarOptions=scrollbarOptions;this.outlineHeight=height+scrollbarHeight;this.init();}\nScroller.prototype={getAxisTop:function(chartHeight){return this.navigatorOptions.top||chartHeight-this.height-this.scrollbarHeight-this.chart.options.chart.spacingBottom;},drawHandle:function(x,index){var scroller=this,chart=scroller.chart,renderer=chart.renderer,elementsToDestroy=scroller.elementsToDestroy,handles=scroller.handles,handlesOptions=scroller.navigatorOptions.handles,attr={fill:handlesOptions.backgroundColor,stroke:handlesOptions.borderColor,'stroke-width':1},tempElem;if(!scroller.rendered){handles[index]=renderer.g().css({cursor:'e-resize'}).attr({zIndex:4-index}).add();tempElem=renderer.rect(-4.5,0,9,16,3,1).attr(attr).add(handles[index]);elementsToDestroy.push(tempElem);tempElem=renderer.path(['M',-1.5,4,'L',-1.5,12,'M',0.5,4,'L',0.5,12]).attr(attr).add(handles[index]);elementsToDestroy.push(tempElem);}\nhandles[index].translate(scroller.scrollerLeft+scroller.scrollbarHeight+parseInt(x,10),scroller.top+scroller.height/2-8);},drawScrollbarButton:function(index){var scroller=this,chart=scroller.chart,renderer=chart.renderer,elementsToDestroy=scroller.elementsToDestroy,scrollbarButtons=scroller.scrollbarButtons,scrollbarHeight=scroller.scrollbarHeight,scrollbarOptions=scroller.scrollbarOptions,tempElem;if(!scroller.rendered){scrollbarButtons[index]=renderer.g().add(scroller.scrollbarGroup);tempElem=renderer.rect(-0.5,-0.5,scrollbarHeight+1,scrollbarHeight+1,scrollbarOptions.buttonBorderRadius,scrollbarOptions.buttonBorderWidth).attr({stroke:scrollbarOptions.buttonBorderColor,'stroke-width':scrollbarOptions.buttonBorderWidth,fill:scrollbarOptions.buttonBackgroundColor}).add(scrollbarButtons[index]);elementsToDestroy.push(tempElem);tempElem=renderer.path(['M',scrollbarHeight/2+(index?-1:1),scrollbarHeight/2-3,'L',scrollbarHeight/2+(index?-1:1),scrollbarHeight/2+3,scrollbarHeight/2+(index?2:-2),scrollbarHeight/2]).attr({fill:scrollbarOptions.buttonArrowColor}).add(scrollbarButtons[index]);elementsToDestroy.push(tempElem);}\nif(index){scrollbarButtons[index].attr({translateX:scroller.scrollerWidth-scrollbarHeight});}},render:function(min,max,pxMin,pxMax){var scroller=this,chart=scroller.chart,renderer=chart.renderer,navigatorLeft,navigatorWidth,scrollerLeft,scrollerWidth,scrollbarGroup=scroller.scrollbarGroup,scrollbar=scroller.scrollbar,xAxis=scroller.xAxis,scrollbarTrack=scroller.scrollbarTrack,scrollbarHeight=scroller.scrollbarHeight,scrollbarEnabled=scroller.scrollbarEnabled,navigatorOptions=scroller.navigatorOptions,scrollbarOptions=scroller.scrollbarOptions,height=scroller.height,top=scroller.top,navigatorEnabled=scroller.navigatorEnabled,outlineWidth=navigatorOptions.outlineWidth,halfOutline=outlineWidth/2,zoomedMin,zoomedMax,range,outlineHeight=scroller.outlineHeight,barBorderRadius=scrollbarOptions.barBorderRadius,strokeWidth,scrollbarStrokeWidth=scrollbarOptions.barBorderWidth,centerBarX,outlineTop=top+halfOutline;if(isNaN(min)){return;}\nscroller.navigatorLeft=navigatorLeft=pick(xAxis.left,chart.plotLeft+scrollbarHeight);scroller.navigatorWidth=navigatorWidth=pick(xAxis.len,chart.plotWidth-2*scrollbarHeight);scroller.scrollerLeft=scrollerLeft=navigatorLeft-scrollbarHeight;scroller.scrollerWidth=scrollerWidth=scrollerWidth=navigatorWidth+2*scrollbarHeight;if(xAxis.getExtremes){var baseExtremes=chart.xAxis[0].getExtremes(),noBase=baseExtremes.dataMin===null,navExtremes=xAxis.getExtremes(),newMin=mathMin(baseExtremes.dataMin,navExtremes.dataMin),newMax=mathMax(baseExtremes.dataMax,navExtremes.dataMax);if(!noBase&&(newMin!==navExtremes.min||newMax!==navExtremes.max)){xAxis.setExtremes(newMin,newMax,true,false);}}\npxMin=pick(pxMin,xAxis.translate(min));pxMax=pick(pxMax,xAxis.translate(max));scroller.zoomedMin=zoomedMin=pInt(mathMin(pxMin,pxMax));scroller.zoomedMax=zoomedMax=pInt(mathMax(pxMin,pxMax));scroller.range=range=zoomedMax-zoomedMin;if(!scroller.rendered){if(navigatorEnabled){scroller.leftShade=renderer.rect().attr({fill:navigatorOptions.maskFill,zIndex:3}).add();scroller.rightShade=renderer.rect().attr({fill:navigatorOptions.maskFill,zIndex:3}).add();scroller.outline=renderer.path().attr({'stroke-width':outlineWidth,stroke:navigatorOptions.outlineColor,zIndex:3}).add();}\nif(scrollbarEnabled){scroller.scrollbarGroup=scrollbarGroup=renderer.g().add();strokeWidth=scrollbarOptions.trackBorderWidth;scroller.scrollbarTrack=scrollbarTrack=renderer.rect().attr({y:-strokeWidth%2/2,fill:scrollbarOptions.trackBackgroundColor,stroke:scrollbarOptions.trackBorderColor,'stroke-width':strokeWidth,r:scrollbarOptions.trackBorderRadius||0,height:scrollbarHeight}).add(scrollbarGroup);scroller.scrollbar=scrollbar=renderer.rect().attr({y:-scrollbarStrokeWidth%2/2,height:scrollbarHeight,fill:scrollbarOptions.barBackgroundColor,stroke:scrollbarOptions.barBorderColor,'stroke-width':scrollbarStrokeWidth,r:barBorderRadius}).add(scrollbarGroup);scroller.scrollbarRifles=renderer.path().attr({stroke:scrollbarOptions.rifleColor,'stroke-width':1}).add(scrollbarGroup);}}\nif(navigatorEnabled){scroller.leftShade.attr({x:navigatorLeft,y:top,width:zoomedMin,height:height});scroller.rightShade.attr({x:navigatorLeft+zoomedMax,y:top,width:navigatorWidth-zoomedMax,height:height});scroller.outline.attr({d:[M,scrollerLeft,outlineTop,L,navigatorLeft+zoomedMin+halfOutline,outlineTop,navigatorLeft+zoomedMin+halfOutline,outlineTop+outlineHeight-scrollbarHeight,M,navigatorLeft+zoomedMax-halfOutline,outlineTop+outlineHeight-scrollbarHeight,L,navigatorLeft+zoomedMax-halfOutline,outlineTop,scrollerLeft+scrollerWidth,outlineTop]});scroller.drawHandle(zoomedMin+halfOutline,0);scroller.drawHandle(zoomedMax+halfOutline,1);}\nif(scrollbarEnabled){scroller.drawScrollbarButton(0);scroller.drawScrollbarButton(1);scrollbarGroup.translate(scrollerLeft,mathRound(outlineTop+height));scrollbarTrack.attr({width:scrollerWidth});scrollbar.attr({x:mathRound(scrollbarHeight+zoomedMin)+(scrollbarStrokeWidth%2/2),width:range-scrollbarStrokeWidth});centerBarX=scrollbarHeight+zoomedMin+range/2-0.5;scroller.scrollbarRifles.attr({d:[M,centerBarX-3,scrollbarHeight/4,L,centerBarX-3,2*scrollbarHeight/3,M,centerBarX,scrollbarHeight/4,L,centerBarX,2*scrollbarHeight/3,M,centerBarX+3,scrollbarHeight/4,L,centerBarX+3,2*scrollbarHeight/3],visibility:range>12?VISIBLE:HIDDEN});}\nscroller.rendered=true;},addEvents:function(){var scroller=this,chart=scroller.chart;addEvent(chart.container,MOUSEDOWN,scroller.mouseDownHandler);addEvent(chart.container,MOUSEMOVE,scroller.mouseMoveHandler);addEvent(document,MOUSEUP,scroller.mouseUpHandler);},removeEvents:function(){var scroller=this,chart=scroller.chart;removeEvent(chart.container,MOUSEDOWN,scroller.mouseDownHandler);removeEvent(chart.container,MOUSEMOVE,scroller.mouseMoveHandler);removeEvent(document,MOUSEUP,scroller.mouseUpHandler);if(scroller.navigatorEnabled){removeEvent(scroller.baseSeries,'updatedData',scroller.updatedDataHandler);}},init:function(){var scroller=this,chart=scroller.chart,xAxis,yAxis,scrollbarHeight=scroller.scrollbarHeight,navigatorOptions=scroller.navigatorOptions,height=scroller.height,top=scroller.top,navigatorSeries,dragOffset,hasDragged,bodyStyle=document.body.style,defaultBodyCursor,baseSeries=scroller.baseSeries,navigatorData;scroller.mouseDownHandler=function(e){e=chart.tracker.normalizeMouseEvent(e);var zoomedMin=scroller.zoomedMin,zoomedMax=scroller.zoomedMax,top=scroller.top,scrollbarHeight=scroller.scrollbarHeight,scrollerLeft=scroller.scrollerLeft,scrollerWidth=scroller.scrollerWidth,navigatorLeft=scroller.navigatorLeft,navigatorWidth=scroller.navigatorWidth,range=scroller.range,chartX=e.chartX,chartY=e.chartY,handleSensitivity=hasTouch?10:7,left,isOnNavigator;if(chartY>top&&chartY<top+height+scrollbarHeight){isOnNavigator=!scroller.scrollbarEnabled||chartY<top+height;if(isOnNavigator&&math.abs(chartX-zoomedMin-navigatorLeft)<handleSensitivity){scroller.grabbedLeft=true;scroller.otherHandlePos=zoomedMax;}else if(isOnNavigator&&math.abs(chartX-zoomedMax-navigatorLeft)<handleSensitivity){scroller.grabbedRight=true;scroller.otherHandlePos=zoomedMin;}else if(chartX>navigatorLeft+zoomedMin&&chartX<navigatorLeft+zoomedMax){scroller.grabbedCenter=chartX;defaultBodyCursor=bodyStyle.cursor;bodyStyle.cursor='ew-resize';dragOffset=chartX-zoomedMin;}else if(chartX>scrollerLeft&&chartX<scrollerLeft+scrollerWidth){if(isOnNavigator){left=chartX-navigatorLeft-range/2;}else{if(chartX<navigatorLeft){left=zoomedMin-mathMin(10,range);}else if(chartX>scrollerLeft+scrollerWidth-scrollbarHeight){left=zoomedMin+mathMin(10,range);}else{left=chartX<navigatorLeft+zoomedMin?zoomedMin-range:zoomedMax;}}\nif(left<0){left=0;}else if(left+range>navigatorWidth){left=navigatorWidth-range;}\nif(left!==zoomedMin){chart.xAxis[0].setExtremes(xAxis.translate(left,true),xAxis.translate(left+range,true),true,false,{trigger:'navigator'});}}}};scroller.mouseMoveHandler=function(e){var scrollbarHeight=scroller.scrollbarHeight,navigatorLeft=scroller.navigatorLeft,navigatorWidth=scroller.navigatorWidth,scrollerLeft=scroller.scrollerLeft,scrollerWidth=scroller.scrollerWidth,range=scroller.range;e=chart.tracker.normalizeMouseEvent(e);var chartX=e.chartX;if(chartX<navigatorLeft){chartX=navigatorLeft;}else if(chartX>scrollerLeft+scrollerWidth-scrollbarHeight){chartX=scrollerLeft+scrollerWidth-scrollbarHeight;}\nif(scroller.grabbedLeft){hasDragged=true;scroller.render(0,0,chartX-navigatorLeft,scroller.otherHandlePos);}else if(scroller.grabbedRight){hasDragged=true;scroller.render(0,0,scroller.otherHandlePos,chartX-navigatorLeft);}else if(scroller.grabbedCenter){hasDragged=true;if(chartX<dragOffset){chartX=dragOffset;}else if(chartX>navigatorWidth+dragOffset-range){chartX=navigatorWidth+dragOffset-range;}\nscroller.render(0,0,chartX-dragOffset,chartX-dragOffset+range);}};scroller.mouseUpHandler=function(){var zoomedMin=scroller.zoomedMin,zoomedMax=scroller.zoomedMax;if(hasDragged){chart.xAxis[0].setExtremes(xAxis.translate(zoomedMin,true),xAxis.translate(zoomedMax,true),true,false,{trigger:'navigator'});}\nscroller.grabbedLeft=scroller.grabbedRight=scroller.grabbedCenter=hasDragged=dragOffset=null;bodyStyle.cursor=defaultBodyCursor||'';};scroller.updatedDataHandler=function(){var baseXAxis=baseSeries.xAxis,baseExtremes=baseXAxis.getExtremes(),baseMin=baseExtremes.min,baseMax=baseExtremes.max,baseDataMin=baseExtremes.dataMin,baseDataMax=baseExtremes.dataMax,range=baseMax-baseMin,stickToMin,stickToMax,newMax,newMin,doRedraw,navXData=navigatorSeries.xData,hasSetExtremes=!!baseXAxis.setExtremes;stickToMax=baseMax>=navXData[navXData.length-1];stickToMin=baseMin<=baseDataMin;if(!navigatorData){navigatorSeries.options.pointStart=baseSeries.xData[0];navigatorSeries.setData(baseSeries.options.data,false);doRedraw=true;}\nif(stickToMin){newMin=baseDataMin;newMax=newMin+range;}\nif(stickToMax){newMax=baseDataMax;if(!stickToMin){newMin=mathMax(newMax-range,navigatorSeries.xData[0]);}}\nif(hasSetExtremes&&(stickToMin||stickToMax)){baseXAxis.setExtremes(newMin,newMax,true,false);}else{if(doRedraw){chart.redraw(false);}\nscroller.render(mathMax(baseMin,baseDataMin),mathMin(baseMax,baseDataMax));}};var xAxisIndex=chart.xAxis.length,yAxisIndex=chart.yAxis.length,baseChartSetSize=chart.setSize;chart.extraBottomMargin=scroller.outlineHeight+navigatorOptions.margin;scroller.top=top=scroller.getAxisTop(chart.chartHeight);if(scroller.navigatorEnabled){var baseOptions=baseSeries.options,mergedNavSeriesOptions,baseData=baseOptions.data,navigatorSeriesOptions=navigatorOptions.series;navigatorData=navigatorSeriesOptions.data;baseOptions.data=navigatorSeriesOptions.data=null;scroller.xAxis=xAxis=new Axis(chart,merge({ordinal:baseSeries.xAxis.options.ordinal},navigatorOptions.xAxis,{dateTimeLabelFormats:chart.options.xAxis.dateTimeLabelFormats,isX:true,type:'datetime',index:xAxisIndex,height:height,top:top,offset:0,offsetLeft:scrollbarHeight,offsetRight:-scrollbarHeight,startOnTick:false,endOnTick:false,minPadding:0,maxPadding:0,zoomEnabled:false}));scroller.yAxis=yAxis=new Axis(chart,merge(navigatorOptions.yAxis,{alignTicks:false,height:height,top:top,offset:0,index:yAxisIndex,zoomEnabled:false}));mergedNavSeriesOptions=merge(baseSeries.options,navigatorSeriesOptions,{threshold:null,clip:false,enableMouseTracking:false,group:'nav',padXAxis:false,xAxis:xAxisIndex,yAxis:yAxisIndex,name:'Navigator',showInLegend:false,isInternal:true,visible:true});baseOptions.data=baseData;navigatorSeriesOptions.data=navigatorData;mergedNavSeriesOptions.data=navigatorData||baseData;navigatorSeries=chart.initSeries(mergedNavSeriesOptions);addEvent(baseSeries,'updatedData',scroller.updatedDataHandler);}else{scroller.xAxis=xAxis={translate:function(value,reverse){var ext=chart.xAxis[0].getExtremes(),scrollTrackWidth=chart.plotWidth-2*scrollbarHeight,dataMin=ext.dataMin,valueRange=ext.dataMax-dataMin;return reverse?(value*valueRange/scrollTrackWidth)+dataMin:scrollTrackWidth*(value-dataMin)/valueRange;}};}\nscroller.series=navigatorSeries;chart.setSize=function(width,height,animation){scroller.top=top=scroller.getAxisTop(height);if(xAxis&&yAxis){xAxis.options.top=yAxis.options.top=top;}\nbaseChartSetSize.call(chart,width,height,animation);};scroller.addEvents();},destroy:function(){var scroller=this;scroller.removeEvents();each([scroller.xAxis,scroller.yAxis,scroller.leftShade,scroller.rightShade,scroller.outline,scroller.scrollbarTrack,scroller.scrollbarRifles,scroller.scrollbarGroup,scroller.scrollbar],function(prop){if(prop&&prop.destroy){prop.destroy();}});scroller.xAxis=scroller.yAxis=scroller.leftShade=scroller.rightShade=scroller.outline=scroller.scrollbarTrack=scroller.scrollbarRifles=scroller.scrollbarGroup=scroller.scrollbar=null;each([scroller.scrollbarButtons,scroller.handles,scroller.elementsToDestroy],function(coll){destroyObjectProperties(coll);});}};Highstock.Scroller=Scroller;extend(defaultOptions,{rangeSelector:{buttonTheme:{width:28,height:16,padding:1,r:0,zIndex:7}}});defaultOptions.lang=merge(defaultOptions.lang,{rangeSelectorZoom:'Zoom',rangeSelectorFrom:'From:',rangeSelectorTo:'To:'});function RangeSelector(chart){var defaultButtons=[{type:'month',count:1,text:'1m'},{type:'month',count:3,text:'3m'},{type:'month',count:6,text:'6m'},{type:'ytd',text:'YTD'},{type:'year',count:1,text:'1y'},{type:'all',text:'All'}];chart.resetZoomEnabled=false;this.chart=chart;this.buttons=[];this.boxSpanElements={};this.init(defaultButtons);}\nRangeSelector.prototype={clickButton:function(i,rangeOptions,redraw){var rangeSelector=this,chart=rangeSelector.chart,buttons=rangeSelector.buttons,baseAxis=chart.xAxis[0],extremes=baseAxis&&baseAxis.getExtremes(),navAxis=chart.scroller&&chart.scroller.xAxis,navExtremes=navAxis&&navAxis.getExtremes&&navAxis.getExtremes(),navDataMin=navExtremes&&navExtremes.dataMin,navDataMax=navExtremes&&navExtremes.dataMax,baseDataMin=extremes&&extremes.dataMin,baseDataMax=extremes&&extremes.dataMax,dataMin=mathMin(baseDataMin,pick(navDataMin,baseDataMin)),dataMax=mathMax(baseDataMax,pick(navDataMax,baseDataMax)),newMin,newMax=baseAxis&&mathMin(extremes.max,dataMax),now,date=new Date(newMax),type=rangeOptions.type,count=rangeOptions.count,baseXAxisOptions,range,rangeMin,year,fixedTimes={millisecond:1,second:1000,minute:60*1000,hour:3600*1000,day:24*3600*1000,week:7*24*3600*1000};if(dataMin===null||dataMax===null||i===rangeSelector.selected){return;}\nif(fixedTimes[type]){range=fixedTimes[type]*count;newMin=mathMax(newMax-range,dataMin);}else if(type==='month'){date.setMonth(date.getMonth()-count);newMin=mathMax(date.getTime(),dataMin);range=30*24*3600*1000*count;}else if(type==='ytd'){date=new Date(0);now=new Date(dataMax);year=now.getFullYear();date.setFullYear(year);if(String(year)!==dateFormat('%Y',date)){date.setFullYear(year-1);}\nnewMin=rangeMin=mathMax(dataMin||0,date.getTime());now=now.getTime();newMax=mathMin(dataMax||now,now);}else if(type==='year'){date.setFullYear(date.getFullYear()-count);newMin=mathMax(dataMin,date.getTime());range=365*24*3600*1000*count;}else if(type==='all'&&baseAxis){newMin=dataMin;newMax=dataMax;}\nif(buttons[i]){buttons[i].setState(2);}\nif(!baseAxis){baseXAxisOptions=chart.options.xAxis;baseXAxisOptions[0]=merge(baseXAxisOptions[0],{range:range,min:rangeMin});rangeSelector.selected=i;}else{setTimeout(function(){baseAxis.setExtremes(newMin,newMax,pick(redraw,1),0,{trigger:'rangeSelectorButton',rangeSelectorButton:rangeOptions});rangeSelector.selected=i;},1);}},init:function(defaultButtons){var rangeSelector=this,chart=rangeSelector.chart,options=chart.options.rangeSelector,buttonOptions=options.buttons||defaultButtons,buttons=rangeSelector.buttons,leftBox=rangeSelector.leftBox,rightBox=rangeSelector.rightBox,selectedOption=options.selected;chart.extraTopMargin=25;rangeSelector.buttonOptions=buttonOptions;rangeSelector.mouseDownHandler=function(){if(leftBox){leftBox.blur();}\nif(rightBox){rightBox.blur();}};addEvent(chart.container,MOUSEDOWN,rangeSelector.mouseDownHandler);if(selectedOption!==UNDEFINED&&buttonOptions[selectedOption]){this.clickButton(selectedOption,buttonOptions[selectedOption],false);}\naddEvent(chart,'load',function(){addEvent(chart.xAxis[0],'afterSetExtremes',function(){if(buttons[rangeSelector.selected]&&!chart.renderer.forExport){buttons[rangeSelector.selected].setState(0);}\nrangeSelector.selected=null;});});},setInputValue:function(input,time){var rangeSelector=this,chart=rangeSelector.chart,options=chart.options.rangeSelector,format=input.hasFocus?options.inputEditDateFormat||'%Y-%m-%d':options.inputDateFormat||'%b %e, %Y';if(time){input.HCTime=time;}\ninput.value=dateFormat(format,input.HCTime);},drawInput:function(name){var rangeSelector=this,chart=rangeSelector.chart,options=chart.options.rangeSelector,boxSpanElements=rangeSelector.boxSpanElements,lang=defaultOptions.lang,div=rangeSelector.div,isMin=name==='min',input;boxSpanElements[name]=createElement('span',{innerHTML:lang[isMin?'rangeSelectorFrom':'rangeSelectorTo']},options.labelStyle,div);input=createElement('input',{name:name,className:PREFIX+'range-selector',type:'text'},extend({width:'80px',height:'16px',border:'1px solid silver',marginLeft:'5px',marginRight:isMin?'5px':'0',textAlign:'center'},options.inputStyle),div);input.onfocus=input.onblur=function(e){e=e||window.event||{};input.hasFocus=e.type==='focus';rangeSelector.setInputValue(input);};input.onchange=function(){var inputValue=input.value,value=Date.parse(inputValue),extremes=chart.xAxis[0].getExtremes();if(isNaN(value)){value=inputValue.split('-');value=Date.UTC(pInt(value[0]),pInt(value[1])-1,pInt(value[2]));}\nif(!isNaN(value)&&((isMin&&(value>=extremes.dataMin&&value<=rangeSelector.rightBox.HCTime))||(!isMin&&(value<=extremes.dataMax&&value>=rangeSelector.leftBox.HCTime)))){chart.xAxis[0].setExtremes(isMin?value:extremes.min,isMin?extremes.max:value,UNDEFINED,UNDEFINED,{trigger:'rangeSelectorInput'});}};return input;},render:function(min,max){var rangeSelector=this,chart=rangeSelector.chart,renderer=chart.renderer,container=chart.container,options=chart.options.rangeSelector,buttons=rangeSelector.buttons,lang=defaultOptions.lang,div=rangeSelector.div,chartStyle=chart.options.chart.style,buttonTheme=options.buttonTheme,inputEnabled=options.inputEnabled!==false,states=buttonTheme&&buttonTheme.states,plotLeft=chart.plotLeft,buttonLeft;if(!rangeSelector.rendered){rangeSelector.zoomText=renderer.text(lang.rangeSelectorZoom,plotLeft,chart.plotTop-10).css(options.labelStyle).add();buttonLeft=plotLeft+rangeSelector.zoomText.getBBox().width+5;each(rangeSelector.buttonOptions,function(rangeOptions,i){buttons[i]=renderer.button(rangeOptions.text,buttonLeft,chart.plotTop-25,function(){rangeSelector.clickButton(i,rangeOptions);rangeSelector.isActive=true;},buttonTheme,states&&states.hover,states&&states.select).css({textAlign:'center'}).add();buttonLeft+=buttons[i].width+(options.buttonSpacing||0);if(rangeSelector.selected===i){buttons[i].setState(2);}});if(inputEnabled){rangeSelector.divRelative=div=createElement('div',null,{position:'relative',height:0,fontFamily:chartStyle.fontFamily,fontSize:chartStyle.fontSize,zIndex:1});container.parentNode.insertBefore(div,container);rangeSelector.divAbsolute=rangeSelector.div=div=createElement('div',null,extend({position:'absolute',top:(chart.plotTop-25)+'px',right:(chart.chartWidth-chart.plotLeft-chart.plotWidth)+'px'},options.inputBoxStyle),div);rangeSelector.leftBox=rangeSelector.drawInput('min');rangeSelector.rightBox=rangeSelector.drawInput('max');}}\nif(inputEnabled){rangeSelector.setInputValue(rangeSelector.leftBox,min);rangeSelector.setInputValue(rangeSelector.rightBox,max);}\nrangeSelector.rendered=true;},destroy:function(){var rangeSelector=this,leftBox=rangeSelector.leftBox,rightBox=rangeSelector.rightBox,boxSpanElements=rangeSelector.boxSpanElements,divRelative=rangeSelector.divRelative,divAbsolute=rangeSelector.divAbsolute,zoomText=rangeSelector.zoomText;removeEvent(rangeSelector.chart.container,MOUSEDOWN,rangeSelector.mouseDownHandler);each([rangeSelector.buttons],function(coll){destroyObjectProperties(coll);});if(zoomText){rangeSelector.zoomText=zoomText.destroy();}\nif(leftBox){leftBox.onfocus=leftBox.onblur=leftBox.onchange=null;}\nif(rightBox){rightBox.onfocus=rightBox.onblur=rightBox.onchange=null;}\neach([leftBox,rightBox,boxSpanElements.min,boxSpanElements.max,divAbsolute,divRelative],function(item){discardElement(item);});rangeSelector.leftBox=rangeSelector.rightBox=rangeSelector.boxSpanElements=rangeSelector.div=rangeSelector.divAbsolute=rangeSelector.divRelative=null;}};Highstock.RangeSelector=RangeSelector;Chart.prototype.callbacks.push(function(chart){var extremes,scroller=chart.scroller,rangeSelector=chart.rangeSelector;function renderScroller(){extremes=chart.xAxis[0].getExtremes();scroller.render(mathMax(extremes.min,extremes.dataMin),mathMin(extremes.max,extremes.dataMax));}\nfunction renderRangeSelector(){extremes=chart.xAxis[0].getExtremes();rangeSelector.render(extremes.min,extremes.max);}\nfunction afterSetExtremesHandlerScroller(e){scroller.render(e.min,e.max);}\nfunction afterSetExtremesHandlerRangeSelector(e){rangeSelector.render(e.min,e.max);}\nfunction destroyEvents(){if(scroller){removeEvent(chart,'resize',renderScroller);removeEvent(chart.xAxis[0],'afterSetExtremes',afterSetExtremesHandlerScroller);}\nif(rangeSelector){removeEvent(chart,'resize',renderRangeSelector);removeEvent(chart.xAxis[0],'afterSetExtremes',afterSetExtremesHandlerRangeSelector);}}\nif(scroller){addEvent(chart.xAxis[0],'afterSetExtremes',afterSetExtremesHandlerScroller);addEvent(chart,'resize',renderScroller);renderScroller();}\nif(rangeSelector){addEvent(chart.xAxis[0],'afterSetExtremes',afterSetExtremesHandlerRangeSelector);addEvent(chart,'resize',renderRangeSelector);renderRangeSelector();}\naddEvent(chart,'destroy',destroyEvents);});Highstock.StockChart=function(options,callback){var seriesOptions=options.series,opposite,lineOptions={marker:{enabled:false,states:{hover:{radius:5}}},shadow:false,states:{hover:{lineWidth:2}},dataGrouping:{enabled:true}},columnOptions={shadow:false,borderWidth:0,dataGrouping:{enabled:true}};options.xAxis=map(splat(options.xAxis||{}),function(xAxisOptions){return merge({minPadding:0,maxPadding:0,ordinal:true,title:{text:null},labels:{overflow:'justify'},showLastLabel:true},xAxisOptions,{type:'datetime',categories:null});});options.yAxis=map(splat(options.yAxis||{}),function(yAxisOptions){opposite=yAxisOptions.opposite;return merge({labels:{align:opposite?'right':'left',x:opposite?-2:2,y:-2},showLastLabel:false,title:{text:null}},yAxisOptions);});options.series=null;options=merge({chart:{panning:true},navigator:{enabled:true},scrollbar:{enabled:true},rangeSelector:{enabled:true},title:{text:null},tooltip:{shared:true,crosshairs:true},legend:{enabled:false},plotOptions:{line:lineOptions,spline:lineOptions,area:lineOptions,areaspline:lineOptions,arearange:lineOptions,areasplinerange:lineOptions,column:columnOptions,columnrange:columnOptions}},options,{chart:{inverted:false}});options.series=seriesOptions;return new Chart(options,callback);};var seriesInit=seriesProto.init,seriesProcessData=seriesProto.processData,pointTooltipFormatter=Point.prototype.tooltipFormatter;seriesProto.init=function(){seriesInit.apply(this,arguments);var series=this,compare=series.options.compare;if(compare){series.modifyValue=function(value,point){var compareValue=this.compareValue;value=compare==='value'?value-compareValue:value=100*(value/compareValue)-100;if(point){point.change=value;}\nreturn value;};}};seriesProto.processData=function(){var series=this;seriesProcessData.apply(this,arguments);if(series.options.compare){var i=0,processedXData=series.processedXData,processedYData=series.processedYData,length=processedYData.length,min=series.xAxis.getExtremes().min;for(;i<length;i++){if(typeof processedYData[i]===NUMBER&&processedXData[i]>=min){series.compareValue=processedYData[i];break;}}}};Point.prototype.tooltipFormatter=function(pointFormat){var point=this;pointFormat=pointFormat.replace('{point.change}',(point.change>0?'+':'')+numberFormat(point.change,point.series.tooltipOptions.changeDecimals||2));return pointTooltipFormatter.apply(this,[pointFormat]);};(function(){var baseInit=seriesProto.init,baseGetSegments=seriesProto.getSegments;seriesProto.init=function(){var series=this,chart,xAxis;baseInit.apply(series,arguments);chart=series.chart;xAxis=series.xAxis;if(xAxis&&xAxis.options.ordinal){addEvent(series,'updatedData',function(){delete xAxis.ordinalIndex;});}\nif(xAxis&&xAxis.options.ordinal&&!xAxis.hasOrdinalExtension){xAxis.hasOrdinalExtension=true;xAxis.beforeSetTickPositions=function(){var axis=this,len,ordinalPositions=[],useOrdinal=false,dist,extremes=axis.getExtremes(),min=extremes.min,max=extremes.max,minIndex,maxIndex,slope,i;if(axis.options.ordinal){each(axis.series,function(series,i){if(series.visible!==false&&series.takeOrdinalPosition!==false){ordinalPositions=ordinalPositions.concat(series.processedXData);len=ordinalPositions.length;if(i&&len){ordinalPositions.sort(function(a,b){return a-b;});i=len-1;while(i--){if(ordinalPositions[i]===ordinalPositions[i+1]){ordinalPositions.splice(i,1);}}}}});len=ordinalPositions.length;if(len>2){dist=ordinalPositions[1]-ordinalPositions[0];i=len-1;while(i--&&!useOrdinal){if(ordinalPositions[i+1]-ordinalPositions[i]!==dist){useOrdinal=true;}}}\nif(useOrdinal){axis.ordinalPositions=ordinalPositions;minIndex=xAxis.val2lin(min,true);maxIndex=xAxis.val2lin(max,true);axis.ordinalSlope=slope=(max-min)/(maxIndex-minIndex);axis.ordinalOffset=min-(minIndex*slope);}else{axis.ordinalPositions=axis.ordinalSlope=axis.ordinalOffset=UNDEFINED;}}};xAxis.val2lin=function(val,toIndex){var axis=this,ordinalPositions=axis.ordinalPositions;if(!ordinalPositions){return val;}else{var ordinalLength=ordinalPositions.length,i,distance,ordinalIndex;i=ordinalLength;while(i--){if(ordinalPositions[i]===val){ordinalIndex=i;break;}}\ni=ordinalLength-1;while(ordinalPositions[i-1]==ordinalPositions[i])\ni--;while(i--){if(val>ordinalPositions[i]||i===0){if(i==0){while(ordinalPositions[i+1]==ordinalPositions[i])\ni++;}\ndistance=(val-ordinalPositions[i])/(ordinalPositions[i+1]-ordinalPositions[i]);ordinalIndex=i+distance;break;}}\nreturn toIndex?ordinalIndex:axis.ordinalSlope*(ordinalIndex||0)+axis.ordinalOffset;}};xAxis.lin2val=function(val,fromIndex){var axis=this,ordinalPositions=axis.ordinalPositions;if(!ordinalPositions){return val;}else{var ordinalSlope=axis.ordinalSlope,ordinalOffset=axis.ordinalOffset,i=ordinalPositions.length-1,linearEquivalentLeft,linearEquivalentRight,distance;if(fromIndex){if(val<0){val=ordinalPositions[0];}else if(val>i){val=ordinalPositions[i];}else{i=mathFloor(val);distance=val-i;}}else{while(i--){linearEquivalentLeft=(ordinalSlope*i)+ordinalOffset;if(val>=linearEquivalentLeft){linearEquivalentRight=(ordinalSlope*(i+1))+ordinalOffset;distance=(val-linearEquivalentLeft)/(linearEquivalentRight-linearEquivalentLeft);break;}}}\nreturn distance!==UNDEFINED&&ordinalPositions[i]!==UNDEFINED?ordinalPositions[i]+(distance?distance*(ordinalPositions[i+1]-ordinalPositions[i]):0):val;}};xAxis.getExtendedPositions=function(){var grouping=xAxis.series[0].currentDataGrouping,ordinalIndex=xAxis.ordinalIndex,key=grouping?grouping.count+grouping.unitName:'raw',extremes=xAxis.getExtremes(),fakeAxis,fakeSeries;if(!ordinalIndex){ordinalIndex=xAxis.ordinalIndex={};}\nif(!ordinalIndex[key]){fakeAxis={series:[],getExtremes:function(){return{min:extremes.dataMin,max:extremes.dataMax};},options:{ordinal:true}};each(xAxis.series,function(series){fakeSeries={xAxis:fakeAxis,xData:series.xData,chart:chart,destroyGroupedData:noop};fakeSeries.options={dataGrouping:grouping?{enabled:true,forced:true,approximation:'open',units:[[grouping.unitName,[grouping.count]]]}:{enabled:false}};series.processData.apply(fakeSeries);fakeAxis.series.push(fakeSeries);});xAxis.beforeSetTickPositions.apply(fakeAxis);ordinalIndex[key]=fakeAxis.ordinalPositions;}\nreturn ordinalIndex[key];};xAxis.getGroupIntervalFactor=function(xMin,xMax,processedXData){var i=0,len=processedXData.length,distances=[],median;for(;i<len-1;i++){distances[i]=processedXData[i+1]-processedXData[i];}\ndistances.sort(function(a,b){return a-b;});median=distances[mathFloor(len/2)];return(len*median)/(xMax-xMin);};xAxis.postProcessTickInterval=function(tickInterval){var ordinalSlope=this.ordinalSlope;return ordinalSlope?tickInterval/(ordinalSlope/xAxis.closestPointRange):tickInterval;};xAxis.getNonLinearTimeTicks=function(normalizedInterval,min,max,startOfWeek,positions,closestDistance,findHigherRanks){var start=0,end=0,segmentPositions,higherRanks={},hasCrossedHigherRank,info,posLength,outsideMax,groupPositions=[],tickPixelIntervalOption=xAxis.options.tickPixelInterval;if(!positions||min===UNDEFINED){return getTimeTicks(normalizedInterval,min,max,startOfWeek);}\nposLength=positions.length;for(;end<posLength;end++){outsideMax=end&&positions[end-1]>max;if(positions[end]<min){start=end;}\nif(end===posLength-1||positions[end+1]-positions[end]>closestDistance*5||outsideMax){segmentPositions=getTimeTicks(normalizedInterval,positions[start],positions[end],startOfWeek);groupPositions=groupPositions.concat(segmentPositions);start=end+1;}\nif(outsideMax){break;}}\ninfo=segmentPositions.info;if(findHigherRanks&&info.unitRange<=timeUnits[HOUR]){end=groupPositions.length-1;for(start=1;start<end;start++){if(new Date(groupPositions[start])[getDate]()!==new Date(groupPositions[start-1])[getDate]()){higherRanks[groupPositions[start]]=DAY;hasCrossedHigherRank=true;}}\nif(hasCrossedHigherRank){higherRanks[groupPositions[0]]=DAY;}\ninfo.higherRanks=higherRanks;}\ngroupPositions.info=info;if(findHigherRanks&&defined(tickPixelIntervalOption)){var length=groupPositions.length,i=length,itemToRemove,translated,translatedArr=[],lastTranslated,medianDistance,distance,distances=[];while(i--){translated=xAxis.translate(groupPositions[i]);if(lastTranslated){distances[i]=lastTranslated-translated;}\ntranslatedArr[i]=lastTranslated=translated;}\ndistances.sort();medianDistance=distances[mathFloor(distances.length/2)];if(medianDistance<tickPixelIntervalOption*0.6){medianDistance=null;}\ni=groupPositions[length-1]>max?length-1:length;lastTranslated=undefined;while(i--){translated=translatedArr[i];distance=lastTranslated-translated;if(lastTranslated&&distance<tickPixelIntervalOption*0.8&&(medianDistance===null||distance<medianDistance*0.8)){if(higherRanks[groupPositions[i]]&&!higherRanks[groupPositions[i+1]]){itemToRemove=i+1;lastTranslated=translated;}else{itemToRemove=i;}\ngroupPositions.splice(itemToRemove,1);}else{lastTranslated=translated;}}}\nreturn groupPositions;};var baseChartPan=chart.pan;chart.pan=function(chartX){var xAxis=chart.xAxis[0],runBase=false;if(xAxis.options.ordinal&&xAxis.series.length){var mouseDownX=chart.mouseDownX,extremes=xAxis.getExtremes(),dataMax=extremes.dataMax,min=extremes.min,max=extremes.max,newMin,newMax,hoverPoints=chart.hoverPoints,closestPointRange=xAxis.closestPointRange,pointPixelWidth=xAxis.translationSlope*(xAxis.ordinalSlope||closestPointRange),movedUnits=(mouseDownX-chartX)/pointPixelWidth,extendedAxis={ordinalPositions:xAxis.getExtendedPositions()},ordinalPositions,searchAxisLeft,lin2val=xAxis.lin2val,val2lin=xAxis.val2lin,searchAxisRight;if(!extendedAxis.ordinalPositions){runBase=true;}else if(mathAbs(movedUnits)>1){if(hoverPoints){each(hoverPoints,function(point){point.setState();});}\nif(movedUnits<0){searchAxisLeft=extendedAxis;searchAxisRight=xAxis.ordinalPositions?xAxis:extendedAxis;}else{searchAxisLeft=xAxis.ordinalPositions?xAxis:extendedAxis;searchAxisRight=extendedAxis;}\nordinalPositions=searchAxisRight.ordinalPositions;if(dataMax>ordinalPositions[ordinalPositions.length-1]){ordinalPositions.push(dataMax);}\nnewMin=lin2val.apply(searchAxisLeft,[val2lin.apply(searchAxisLeft,[min,true])+movedUnits,true]);newMax=lin2val.apply(searchAxisRight,[val2lin.apply(searchAxisRight,[max,true])+movedUnits,true]);if(newMin>mathMin(extremes.dataMin,min)&&newMax<mathMax(dataMax,max)){xAxis.setExtremes(newMin,newMax,true,false,{trigger:'pan'});}\nchart.mouseDownX=chartX;css(chart.container,{cursor:'move'});}}else{runBase=true;}\nif(runBase){baseChartPan.apply(chart,arguments);}};}};seriesProto.getSegments=function(){var series=this,segments,gapSize=series.options.gapSize;baseGetSegments.apply(series);if(gapSize){segments=series.segments;each(segments,function(segment,no){var i=segment.length-1;while(i--){if(segment[i+1].x-segment[i].x>series.xAxis.closestPointRange*gapSize){segments.splice(no+1,0,segment.splice(i+1,segment.length-i));}}});}};}());extend(Highstock,{Axis:Axis,CanVGRenderer:CanVGRenderer,Chart:Chart,Color:Color,Legend:Legend,MouseTracker:MouseTracker,Point:Point,Tick:Tick,Tooltip:Tooltip,Renderer:Renderer,Series:Series,SVGRenderer:SVGRenderer,VMLRenderer:VMLRenderer,dateFormat:dateFormat,pathAnim:pathAnim,getOptions:getOptions,hasBidiBug:hasBidiBug,numberFormat:numberFormat,seriesTypes:seriesTypes,setOptions:setOptions,addEvent:addEvent,removeEvent:removeEvent,createElement:createElement,discardElement:discardElement,fireEvent:fireEvent,css:css,each:each,extend:extend,map:map,merge:merge,pick:pick,splat:splat,extendClass:extendClass,pInt:pInt,wrap:wrap,svg:hasSVG,canvas:useCanVG,vml:!hasSVG&&!useCanVG,product:'Highstock',version:'1.2.0',attr:attr});}());","js/thirdparty/highcharts/highcharts_more.js":"\n(function(Highcharts,UNDEFINED){var arrayMin=Highcharts.arrayMin,arrayMax=Highcharts.arrayMax,each=Highcharts.each,extend=Highcharts.extend,merge=Highcharts.merge,map=Highcharts.map,pick=Highcharts.pick,pInt=Highcharts.pInt,defaultPlotOptions=Highcharts.getOptions().plotOptions,seriesTypes=Highcharts.seriesTypes,extendClass=Highcharts.extendClass,splat=Highcharts.splat,wrap=Highcharts.wrap,Axis=Highcharts.Axis,Tick=Highcharts.Tick,Point=Highcharts.Point,Pointer=Highcharts.Pointer,CenteredSeriesMixin=Highcharts.CenteredSeriesMixin,TrackerMixin=Highcharts.TrackerMixin,Series=Highcharts.Series,math=Math,mathRound=math.round,mathFloor=math.floor,mathMax=math.max,Color=Highcharts.Color,noop=function(){};function Pane(options,chart,firstAxis){this.init.call(this,options,chart,firstAxis);}\nextend(Pane.prototype,{init:function(options,chart,firstAxis){var pane=this,backgroundOption,defaultOptions=pane.defaultOptions;pane.chart=chart;if(chart.angular){defaultOptions.background={};}\npane.options=options=merge(defaultOptions,options);backgroundOption=options.background;if(backgroundOption){each([].concat(splat(backgroundOption)).reverse(),function(config){var backgroundColor=config.backgroundColor;config=merge(pane.defaultBackgroundOptions,config);if(backgroundColor){config.backgroundColor=backgroundColor;}\nconfig.color=config.backgroundColor;firstAxis.options.plotBands.unshift(config);});}},defaultOptions:{center:['50%','50%'],size:'85%',startAngle:0},defaultBackgroundOptions:{shape:'circle',borderWidth:1,borderColor:'silver',backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,'#FFF'],[1,'#DDD']]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:'105%'}});var axisProto=Axis.prototype,tickProto=Tick.prototype;var hiddenAxisMixin={getOffset:noop,redraw:function(){this.isDirty=false;},render:function(){this.isDirty=false;},setScale:noop,setCategories:noop,setTitle:noop};var radialAxisMixin={isRadial:true,defaultRadialGaugeOptions:{labels:{align:'center',x:0,y:null},minorGridLineWidth:0,minorTickInterval:'auto',minorTickLength:10,minorTickPosition:'inside',minorTickWidth:1,tickLength:10,tickPosition:'inside',tickWidth:2,title:{rotation:0},zIndex:2},defaultRadialXOptions:{gridLineWidth:1,labels:{align:null,distance:15,x:0,y:null},maxPadding:0,minPadding:0,showLastLabel:false,tickLength:0},defaultRadialYOptions:{gridLineInterpolation:'circle',labels:{align:'right',x:-3,y:-2},showLastLabel:false,title:{x:4,text:null,rotation:90}},setOptions:function(userOptions){var options=this.options=merge(this.defaultOptions,this.defaultRadialOptions,userOptions);if(!options.plotBands){options.plotBands=[];}},getOffset:function(){axisProto.getOffset.call(this);this.chart.axisOffset[this.side]=0;this.center=this.pane.center=CenteredSeriesMixin.getCenter.call(this.pane);},getLinePath:function(lineWidth,radius){var center=this.center;radius=pick(radius,center[2]/2-this.offset);return this.chart.renderer.symbols.arc(this.left+center[0],this.top+center[1],radius,radius,{start:this.startAngleRad,end:this.endAngleRad,open:true,innerR:0});},setAxisTranslation:function(){axisProto.setAxisTranslation.call(this);if(this.center){if(this.isCircular){this.transA=(this.endAngleRad-this.startAngleRad)/((this.max-this.min)||1);}else{this.transA=(this.center[2]/2)/((this.max-this.min)||1);}\nif(this.isXAxis){this.minPixelPadding=this.transA*this.minPointOffset;}else{this.minPixelPadding=0;}}},beforeSetTickPositions:function(){if(this.autoConnect){this.max+=(this.categories&&1)||this.pointRange||this.closestPointRange||0;}},setAxisSize:function(){axisProto.setAxisSize.call(this);if(this.isRadial){this.center=this.pane.center=Highcharts.CenteredSeriesMixin.getCenter.call(this.pane);if(this.isCircular){this.sector=this.endAngleRad-this.startAngleRad;}\nthis.len=this.width=this.height=this.center[2]*pick(this.sector,1)/2;}},getPosition:function(value,length){return this.postTranslate(this.isCircular?this.translate(value):0,pick(this.isCircular?length:this.translate(value),this.center[2]/2)-this.offset);},postTranslate:function(angle,radius){var chart=this.chart,center=this.center;angle=this.startAngleRad+angle;return{x:chart.plotLeft+center[0]+Math.cos(angle)*radius,y:chart.plotTop+center[1]+Math.sin(angle)*radius};},getPlotBandPath:function(from,to,options){var center=this.center,startAngleRad=this.startAngleRad,fullRadius=center[2]/2,radii=[pick(options.outerRadius,'100%'),options.innerRadius,pick(options.thickness,10)],percentRegex=/%$/,start,end,open,isCircular=this.isCircular,ret;if(this.options.gridLineInterpolation==='polygon'){ret=this.getPlotLinePath(from).concat(this.getPlotLinePath(to,true));}else{if(!isCircular){radii[0]=this.translate(from);radii[1]=this.translate(to);}\nradii=map(radii,function(radius){if(percentRegex.test(radius)){radius=(pInt(radius,10)*fullRadius)/100;}\nreturn radius;});if(options.shape==='circle'||!isCircular){start=-Math.PI/2;end=Math.PI*1.5;open=true;}else{start=startAngleRad+this.translate(from);end=startAngleRad+this.translate(to);}\nret=this.chart.renderer.symbols.arc(this.left+center[0],this.top+center[1],radii[0],radii[0],{start:start,end:end,innerR:pick(radii[1],radii[0]-radii[2]),open:open});}\nreturn ret;},getPlotLinePath:function(value,reverse){var axis=this,center=axis.center,chart=axis.chart,end=axis.getPosition(value),xAxis,xy,tickPositions,ret;if(axis.isCircular){ret=['M',center[0]+chart.plotLeft,center[1]+chart.plotTop,'L',end.x,end.y];}else if(axis.options.gridLineInterpolation==='circle'){value=axis.translate(value);if(value){ret=axis.getLinePath(0,value);}}else{each(chart.xAxis,function(a){if(a.pane===axis.pane){xAxis=a;}});ret=[];value=axis.translate(value);tickPositions=xAxis.tickPositions;if(xAxis.autoConnect){tickPositions=tickPositions.concat([tickPositions[0]]);}\nif(reverse){tickPositions=[].concat(tickPositions).reverse();}\neach(tickPositions,function(pos,i){xy=xAxis.getPosition(pos,value);ret.push(i?'L':'M',xy.x,xy.y);});}\nreturn ret;},getTitlePosition:function(){var center=this.center,chart=this.chart,titleOptions=this.options.title;return{x:chart.plotLeft+center[0]+(titleOptions.x||0),y:chart.plotTop+center[1]-({high:0.5,middle:0.25,low:0}[titleOptions.align]*center[2])+(titleOptions.y||0)};}};wrap(axisProto,'init',function(proceed,chart,userOptions){var axis=this,angular=chart.angular,polar=chart.polar,isX=userOptions.isX,isHidden=angular&&isX,isCircular,startAngleRad,endAngleRad,options,chartOptions=chart.options,paneIndex=userOptions.pane||0,pane,paneOptions;if(angular){extend(this,isHidden?hiddenAxisMixin:radialAxisMixin);isCircular=!isX;if(isCircular){this.defaultRadialOptions=this.defaultRadialGaugeOptions;}}else if(polar){extend(this,radialAxisMixin);isCircular=isX;this.defaultRadialOptions=isX?this.defaultRadialXOptions:merge(this.defaultYAxisOptions,this.defaultRadialYOptions);}\nproceed.call(this,chart,userOptions);if(!isHidden&&(angular||polar)){options=this.options;if(!chart.panes){chart.panes=[];}\nthis.pane=pane=chart.panes[paneIndex]=chart.panes[paneIndex]||new Pane(splat(chartOptions.pane)[paneIndex],chart,axis);paneOptions=pane.options;chart.inverted=false;chartOptions.chart.zoomType=null;this.startAngleRad=startAngleRad=(paneOptions.startAngle-90)*Math.PI/180;this.endAngleRad=endAngleRad=(pick(paneOptions.endAngle,paneOptions.startAngle+360)-90)*Math.PI/180;this.offset=options.offset||0;this.isCircular=isCircular;if(isCircular&&userOptions.max===UNDEFINED&&endAngleRad-startAngleRad===2*Math.PI){this.autoConnect=true;}}});wrap(tickProto,'getPosition',function(proceed,horiz,pos,tickmarkOffset,old){var axis=this.axis;return axis.getPosition?axis.getPosition(pos):proceed.call(this,horiz,pos,tickmarkOffset,old);});wrap(tickProto,'getLabelPosition',function(proceed,x,y,label,horiz,labelOptions,tickmarkOffset,index,step){var axis=this.axis,optionsY=labelOptions.y,ret,align=labelOptions.align,angle=((axis.translate(this.pos)+axis.startAngleRad+Math.PI/2)/Math.PI*180)%360;if(axis.isRadial){ret=axis.getPosition(this.pos,(axis.center[2]/2)+pick(labelOptions.distance,-25));if(labelOptions.rotation==='auto'){label.attr({rotation:angle});}else if(optionsY===null){optionsY=axis.chart.renderer.fontMetrics(label.styles.fontSize).b-label.getBBox().height/2;}\nif(align===null){if(axis.isCircular){if(angle>20&&angle<160){align='left';}else if(angle>200&&angle<340){align='right';}else{align='center';}}else{align='center';}\nlabel.attr({align:align});}\nret.x+=labelOptions.x;ret.y+=optionsY;}else{ret=proceed.call(this,x,y,label,horiz,labelOptions,tickmarkOffset,index,step);}\nreturn ret;});wrap(tickProto,'getMarkPath',function(proceed,x,y,tickLength,tickWidth,horiz,renderer){var axis=this.axis,endPoint,ret;if(axis.isRadial){endPoint=axis.getPosition(this.pos,axis.center[2]/2+tickLength);ret=['M',x,y,'L',endPoint.x,endPoint.y];}else{ret=proceed.call(this,x,y,tickLength,tickWidth,horiz,renderer);}\nreturn ret;});defaultPlotOptions.arearange=merge(defaultPlotOptions.area,{lineWidth:1,marker:null,threshold:null,tooltip:{pointFormat:'<span style=\"color:{series.color}\">\\u25CF<\/span> {series.name}: <b>{point.low}<\/b> - <b>{point.high}<\/b><br/>'},trackByArea:true,dataLabels:{align:null,verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0},states:{hover:{halo:false}}});seriesTypes.arearange=extendClass(seriesTypes.area,{type:'arearange',pointArrayMap:['low','high'],toYData:function(point){return[point.low,point.high];},pointValKey:'low',getSegments:function(){var series=this;each(series.points,function(point){if(!series.options.connectNulls&&(point.low===null||point.high===null)){point.y=null;}else if(point.low===null&&point.high!==null){point.y=point.high;}});Series.prototype.getSegments.call(this);},translate:function(){var series=this,yAxis=series.yAxis;seriesTypes.area.prototype.translate.apply(series);each(series.points,function(point){var low=point.low,high=point.high,plotY=point.plotY;if(high===null&&low===null){point.y=null;}else if(low===null){point.plotLow=point.plotY=null;point.plotHigh=yAxis.translate(high,0,1,0,1);}else if(high===null){point.plotLow=plotY;point.plotHigh=null;}else{point.plotLow=plotY;point.plotHigh=yAxis.translate(high,0,1,0,1);}});},getSegmentPath:function(segment){var lowSegment,highSegment=[],i=segment.length,baseGetSegmentPath=Series.prototype.getSegmentPath,point,linePath,lowerPath,options=this.options,step=options.step,higherPath;lowSegment=HighchartsAdapter.grep(segment,function(point){return point.plotLow!==null;});while(i--){point=segment[i];if(point.plotHigh!==null){highSegment.push({plotX:point.plotX,plotY:point.plotHigh});}}\nlowerPath=baseGetSegmentPath.call(this,lowSegment);if(step){if(step===true){step='left';}\noptions.step={left:'right',center:'center',right:'left'}[step];}\nhigherPath=baseGetSegmentPath.call(this,highSegment);options.step=step;linePath=[].concat(lowerPath,higherPath);higherPath[0]='L';this.areaPath=this.areaPath.concat(lowerPath,higherPath);return linePath;},drawDataLabels:function(){var data=this.data,length=data.length,i,originalDataLabels=[],seriesProto=Series.prototype,dataLabelOptions=this.options.dataLabels,align=dataLabelOptions.align,point,inverted=this.chart.inverted;if(dataLabelOptions.enabled||this._hasPointLabels){i=length;while(i--){point=data[i];point.y=point.high;point._plotY=point.plotY;point.plotY=point.plotHigh;originalDataLabels[i]=point.dataLabel;point.dataLabel=point.dataLabelUpper;point.below=false;if(inverted){if(!align){dataLabelOptions.align='left';}\ndataLabelOptions.x=dataLabelOptions.xHigh;}else{dataLabelOptions.y=dataLabelOptions.yHigh;}}\nif(seriesProto.drawDataLabels){seriesProto.drawDataLabels.apply(this,arguments);}\ni=length;while(i--){point=data[i];point.dataLabelUpper=point.dataLabel;point.dataLabel=originalDataLabels[i];point.y=point.low;point.plotY=point._plotY;point.below=true;if(inverted){if(!align){dataLabelOptions.align='right';}\ndataLabelOptions.x=dataLabelOptions.xLow;}else{dataLabelOptions.y=dataLabelOptions.yLow;}}\nif(seriesProto.drawDataLabels){seriesProto.drawDataLabels.apply(this,arguments);}}\ndataLabelOptions.align=align;},alignDataLabel:function(){seriesTypes.column.prototype.alignDataLabel.apply(this,arguments);},getSymbol:noop,drawPoints:noop});defaultPlotOptions.areasplinerange=merge(defaultPlotOptions.arearange);seriesTypes.areasplinerange=extendClass(seriesTypes.arearange,{type:'areasplinerange',getPointSpline:seriesTypes.spline.prototype.getPointSpline});(function(){var colProto=seriesTypes.column.prototype;defaultPlotOptions.columnrange=merge(defaultPlotOptions.column,defaultPlotOptions.arearange,{lineWidth:1,pointRange:null});seriesTypes.columnrange=extendClass(seriesTypes.arearange,{type:'columnrange',translate:function(){var series=this,yAxis=series.yAxis,plotHigh;colProto.translate.apply(series);each(series.points,function(point){var shapeArgs=point.shapeArgs,minPointLength=series.options.minPointLength,heightDifference,height,y;point.tooltipPos=null;point.plotHigh=plotHigh=yAxis.translate(point.high,0,1,0,1);point.plotLow=point.plotY;y=plotHigh;height=point.plotY-plotHigh;if(height<minPointLength){heightDifference=(minPointLength-height);height+=heightDifference;y-=heightDifference/2;}\nshapeArgs.height=height;shapeArgs.y=y;});},trackerGroups:['group','dataLabelsGroup'],drawGraph:noop,pointAttrToOptions:colProto.pointAttrToOptions,drawPoints:colProto.drawPoints,drawTracker:colProto.drawTracker,animate:colProto.animate,getColumnMetrics:colProto.getColumnMetrics});}());defaultPlotOptions.gauge=merge(defaultPlotOptions.line,{dataLabels:{enabled:true,defer:false,y:15,borderWidth:1,borderColor:'silver',borderRadius:3,crop:false,style:{fontWeight:'bold'},verticalAlign:'top',zIndex:2},dial:{},pivot:{},tooltip:{headerFormat:''},showInLegend:false});var GaugePoint=extendClass(Point,{setState:function(state){this.state=state;}});var GaugeSeries={type:'gauge',pointClass:GaugePoint,angular:true,drawGraph:noop,fixedBox:true,forceDL:true,trackerGroups:['group','dataLabelsGroup'],translate:function(){var series=this,yAxis=series.yAxis,options=series.options,center=yAxis.center;series.generatePoints();each(series.points,function(point){var dialOptions=merge(options.dial,point.dial),radius=(pInt(pick(dialOptions.radius,80))*center[2])/200,baseLength=(pInt(pick(dialOptions.baseLength,70))*radius)/100,rearLength=(pInt(pick(dialOptions.rearLength,10))*radius)/100,baseWidth=dialOptions.baseWidth||3,topWidth=dialOptions.topWidth||1,overshoot=options.overshoot,rotation=yAxis.startAngleRad+yAxis.translate(point.y,null,null,null,true);if(overshoot&&typeof overshoot==='number'){overshoot=overshoot/180*Math.PI;rotation=Math.max(yAxis.startAngleRad-overshoot,Math.min(yAxis.endAngleRad+overshoot,rotation));}else if(options.wrap===false){rotation=Math.max(yAxis.startAngleRad,Math.min(yAxis.endAngleRad,rotation));}\nrotation=rotation*180/Math.PI;point.shapeType='path';point.shapeArgs={d:dialOptions.path||['M',-rearLength,-baseWidth/2,'L',baseLength,-baseWidth/2,radius,-topWidth/2,radius,topWidth/2,baseLength,baseWidth/2,-rearLength,baseWidth/2,'z'],translateX:center[0],translateY:center[1],rotation:rotation};point.plotX=center[0];point.plotY=center[1];});},drawPoints:function(){var series=this,center=series.yAxis.center,pivot=series.pivot,options=series.options,pivotOptions=options.pivot,renderer=series.chart.renderer;each(series.points,function(point){var graphic=point.graphic,shapeArgs=point.shapeArgs,d=shapeArgs.d,dialOptions=merge(options.dial,point.dial);if(graphic){graphic.animate(shapeArgs);shapeArgs.d=d;}else{point.graphic=renderer[point.shapeType](shapeArgs).attr({stroke:dialOptions.borderColor||'none','stroke-width':dialOptions.borderWidth||0,fill:dialOptions.backgroundColor||'black',rotation:shapeArgs.rotation}).add(series.group);}});if(pivot){pivot.animate({translateX:center[0],translateY:center[1]});}else{series.pivot=renderer.circle(0,0,pick(pivotOptions.radius,5)).attr({'stroke-width':pivotOptions.borderWidth||0,stroke:pivotOptions.borderColor||'silver',fill:pivotOptions.backgroundColor||'black'}).translate(center[0],center[1]).add(series.group);}},animate:function(init){var series=this;if(!init){each(series.points,function(point){var graphic=point.graphic;if(graphic){graphic.attr({rotation:series.yAxis.startAngleRad*180/Math.PI});graphic.animate({rotation:point.shapeArgs.rotation},series.options.animation);}});series.animate=null;}},render:function(){this.group=this.plotGroup('group','series',this.visible?'visible':'hidden',this.options.zIndex,this.chart.seriesGroup);Series.prototype.render.call(this);this.group.clip(this.chart.clipRect);},setData:function(data,redraw){Series.prototype.setData.call(this,data,false);this.processData();this.generatePoints();if(pick(redraw,true)){this.chart.redraw();}},drawTracker:TrackerMixin&&TrackerMixin.drawTrackerPoint};seriesTypes.gauge=extendClass(seriesTypes.line,GaugeSeries);defaultPlotOptions.boxplot=merge(defaultPlotOptions.column,{fillColor:'#FFFFFF',lineWidth:1,medianWidth:2,states:{hover:{brightness:-0.3}},threshold:null,tooltip:{pointFormat:'<span style=\"color:{series.color}\">\\u25CF<\/span> <b> {series.name}<\/b><br/>'+'Maximum: {point.high}<br/>'+'Upper quartile: {point.q3}<br/>'+'Median: {point.median}<br/>'+'Lower quartile: {point.q1}<br/>'+'Minimum: {point.low}<br/>'},whiskerLength:'50%',whiskerWidth:2});seriesTypes.boxplot=extendClass(seriesTypes.column,{type:'boxplot',pointArrayMap:['low','q1','median','q3','high'],toYData:function(point){return[point.low,point.q1,point.median,point.q3,point.high];},pointValKey:'high',pointAttrToOptions:{fill:'fillColor',stroke:'color','stroke-width':'lineWidth'},drawDataLabels:noop,translate:function(){var series=this,yAxis=series.yAxis,pointArrayMap=series.pointArrayMap;seriesTypes.column.prototype.translate.apply(series);each(series.points,function(point){each(pointArrayMap,function(key){if(point[key]!==null){point[key+'Plot']=yAxis.translate(point[key],0,1,0,1);}});});},drawPoints:function(){var series=this,points=series.points,options=series.options,chart=series.chart,renderer=chart.renderer,pointAttr,q1Plot,q3Plot,highPlot,lowPlot,medianPlot,crispCorr,crispX,graphic,stemPath,stemAttr,boxPath,whiskersPath,whiskersAttr,medianPath,medianAttr,width,left,right,halfWidth,shapeArgs,color,doQuartiles=series.doQuartiles!==false,whiskerLength=parseInt(series.options.whiskerLength,10)/100;each(points,function(point){graphic=point.graphic;shapeArgs=point.shapeArgs;stemAttr={};whiskersAttr={};medianAttr={};color=point.color||series.color;if(point.plotY!==UNDEFINED){pointAttr=point.pointAttr[point.selected?'selected':''];width=shapeArgs.width;left=mathFloor(shapeArgs.x);right=left+width;halfWidth=mathRound(width/2);q1Plot=mathFloor(doQuartiles?point.q1Plot:point.lowPlot);q3Plot=mathFloor(doQuartiles?point.q3Plot:point.lowPlot);highPlot=mathFloor(point.highPlot);lowPlot=mathFloor(point.lowPlot);stemAttr.stroke=point.stemColor||options.stemColor||color;stemAttr['stroke-width']=pick(point.stemWidth,options.stemWidth,options.lineWidth);stemAttr.dashstyle=point.stemDashStyle||options.stemDashStyle;whiskersAttr.stroke=point.whiskerColor||options.whiskerColor||color;whiskersAttr['stroke-width']=pick(point.whiskerWidth,options.whiskerWidth,options.lineWidth);medianAttr.stroke=point.medianColor||options.medianColor||color;medianAttr['stroke-width']=pick(point.medianWidth,options.medianWidth,options.lineWidth);medianAttr['stroke-linecap']='round';crispCorr=(stemAttr['stroke-width']%2)/2;crispX=left+halfWidth+crispCorr;stemPath=['M',crispX,q3Plot,'L',crispX,highPlot,'M',crispX,q1Plot,'L',crispX,lowPlot];if(doQuartiles){crispCorr=(pointAttr['stroke-width']%2)/2;crispX=mathFloor(crispX)+crispCorr;q1Plot=mathFloor(q1Plot)+crispCorr;q3Plot=mathFloor(q3Plot)+crispCorr;left+=crispCorr;right+=crispCorr;boxPath=['M',left,q3Plot,'L',left,q1Plot,'L',right,q1Plot,'L',right,q3Plot,'L',left,q3Plot,'z'];}\nif(whiskerLength){crispCorr=(whiskersAttr['stroke-width']%2)/2;highPlot=highPlot+crispCorr;lowPlot=lowPlot+crispCorr;whiskersPath=['M',crispX-halfWidth*whiskerLength,highPlot,'L',crispX+halfWidth*whiskerLength,highPlot,'M',crispX-halfWidth*whiskerLength,lowPlot,'L',crispX+halfWidth*whiskerLength,lowPlot];}\ncrispCorr=(medianAttr['stroke-width']%2)/2;medianPlot=mathRound(point.medianPlot)+crispCorr;medianPath=['M',left,medianPlot,'L',right,medianPlot];if(graphic){point.stem.animate({d:stemPath});if(whiskerLength){point.whiskers.animate({d:whiskersPath});}\nif(doQuartiles){point.box.animate({d:boxPath});}\npoint.medianShape.animate({d:medianPath});}else{point.graphic=graphic=renderer.g().add(series.group);point.stem=renderer.path(stemPath).attr(stemAttr).add(graphic);if(whiskerLength){point.whiskers=renderer.path(whiskersPath).attr(whiskersAttr).add(graphic);}\nif(doQuartiles){point.box=renderer.path(boxPath).attr(pointAttr).add(graphic);}\npoint.medianShape=renderer.path(medianPath).attr(medianAttr).add(graphic);}}});}});defaultPlotOptions.errorbar=merge(defaultPlotOptions.boxplot,{color:'#000000',grouping:false,linkedTo:':previous',tooltip:{pointFormat:'<span style=\"color:{series.color}\">\\u25CF<\/span> {series.name}: <b>{point.low}<\/b> - <b>{point.high}<\/b><br/>'},whiskerWidth:null});seriesTypes.errorbar=extendClass(seriesTypes.boxplot,{type:'errorbar',pointArrayMap:['low','high'],toYData:function(point){return[point.low,point.high];},pointValKey:'high',doQuartiles:false,drawDataLabels:seriesTypes.arearange?seriesTypes.arearange.prototype.drawDataLabels:noop,getColumnMetrics:function(){return(this.linkedParent&&this.linkedParent.columnMetrics)||seriesTypes.column.prototype.getColumnMetrics.call(this);}});defaultPlotOptions.waterfall=merge(defaultPlotOptions.column,{lineWidth:1,lineColor:'#333',dashStyle:'dot',borderColor:'#333',states:{hover:{lineWidthPlus:0}}});seriesTypes.waterfall=extendClass(seriesTypes.column,{type:'waterfall',upColorProp:'fill',pointArrayMap:['low','y'],pointValKey:'y',init:function(chart,options){options.stacking=true;seriesTypes.column.prototype.init.call(this,chart,options);},translate:function(){var series=this,options=series.options,yAxis=series.yAxis,len,i,points,point,shapeArgs,stack,y,previousY,previousIntermediate,stackPoint,threshold=options.threshold,tooltipY;seriesTypes.column.prototype.translate.apply(this);previousY=previousIntermediate=threshold;points=series.points;for(i=0,len=points.length;i<len;i++){point=points[i];shapeArgs=point.shapeArgs;stack=series.getStack(i);stackPoint=stack.points[series.index+','+i];if(isNaN(point.y)){point.y=series.yData[i];}\ny=mathMax(previousY,previousY+point.y)+stackPoint[0];shapeArgs.y=yAxis.translate(y,0,1);if(point.isSum){shapeArgs.y=yAxis.translate(stackPoint[1],0,1);shapeArgs.height=yAxis.translate(stackPoint[0],0,1)-shapeArgs.y;}else if(point.isIntermediateSum){shapeArgs.y=yAxis.translate(stackPoint[1],0,1);shapeArgs.height=yAxis.translate(previousIntermediate,0,1)-shapeArgs.y;previousIntermediate=stackPoint[1];}else{previousY+=stack.total;}\nif(shapeArgs.height<0){shapeArgs.y+=shapeArgs.height;shapeArgs.height*=-1;}\npoint.plotY=shapeArgs.y=mathRound(shapeArgs.y)-(series.borderWidth%2)/2;shapeArgs.height=mathMax(mathRound(shapeArgs.height),0.001);point.yBottom=shapeArgs.y+shapeArgs.height;tooltipY=point.plotY+(point.negative?shapeArgs.height:0);if(series.chart.inverted){point.tooltipPos[0]=yAxis.len-tooltipY;}else{point.tooltipPos[1]=tooltipY;}}},processData:function(force){var series=this,options=series.options,yData=series.yData,points=series.points,point,dataLength=yData.length,threshold=options.threshold||0,subSum,sum,dataMin,dataMax,y,i;sum=subSum=dataMin=dataMax=threshold;for(i=0;i<dataLength;i++){y=yData[i];point=points&&points[i]?points[i]:{};if(y===\"sum\"||point.isSum){yData[i]=sum;}else if(y===\"intermediateSum\"||point.isIntermediateSum){yData[i]=subSum;}else{sum+=y;subSum+=y;}\ndataMin=Math.min(sum,dataMin);dataMax=Math.max(sum,dataMax);}\nSeries.prototype.processData.call(this,force);series.dataMin=dataMin;series.dataMax=dataMax;},toYData:function(pt){if(pt.isSum){return\"sum\";}else if(pt.isIntermediateSum){return\"intermediateSum\";}\nreturn pt.y;},getAttribs:function(){seriesTypes.column.prototype.getAttribs.apply(this,arguments);var series=this,options=series.options,stateOptions=options.states,upColor=options.upColor||series.color,hoverColor=Highcharts.Color(upColor).brighten(0.1).get(),seriesDownPointAttr=merge(series.pointAttr),upColorProp=series.upColorProp;seriesDownPointAttr[''][upColorProp]=upColor;seriesDownPointAttr.hover[upColorProp]=stateOptions.hover.upColor||hoverColor;seriesDownPointAttr.select[upColorProp]=stateOptions.select.upColor||upColor;each(series.points,function(point){if(point.y>0&&!point.color){point.pointAttr=seriesDownPointAttr;point.color=upColor;}});},getGraphPath:function(){var data=this.data,length=data.length,lineWidth=this.options.lineWidth+this.borderWidth,normalizer=mathRound(lineWidth)%2/2,path=[],M='M',L='L',prevArgs,pointArgs,i,d;for(i=1;i<length;i++){pointArgs=data[i].shapeArgs;prevArgs=data[i-1].shapeArgs;d=[M,prevArgs.x+prevArgs.width,prevArgs.y+normalizer,L,pointArgs.x,prevArgs.y+normalizer];if(data[i-1].y<0){d[2]+=prevArgs.height;d[5]+=prevArgs.height;}\npath=path.concat(d);}\nreturn path;},getExtremes:noop,getStack:function(i){var axis=this.yAxis,stacks=axis.stacks,key=this.stackKey;if(this.processedYData[i]<this.options.threshold){key='-'+key;}\nreturn stacks[key][i];},drawGraph:Series.prototype.drawGraph});defaultPlotOptions.bubble=merge(defaultPlotOptions.scatter,{dataLabels:{formatter:function(){return this.point.z;},inside:true,style:{color:'white',textShadow:'0px 0px 3px black'},verticalAlign:'middle'},marker:{lineColor:null,lineWidth:1},minSize:8,maxSize:'20%',states:{hover:{halo:{size:5}}},tooltip:{pointFormat:'({point.x}, {point.y}), Size: {point.z}'},turboThreshold:0,zThreshold:0});var BubblePoint=extendClass(Point,{haloPath:function(){return Point.prototype.haloPath.call(this,this.shapeArgs.r+this.series.options.states.hover.halo.size);}});seriesTypes.bubble=extendClass(seriesTypes.scatter,{type:'bubble',pointClass:BubblePoint,pointArrayMap:['y','z'],parallelArrays:['x','y','z'],trackerGroups:['group','dataLabelsGroup'],bubblePadding:true,pointAttrToOptions:{stroke:'lineColor','stroke-width':'lineWidth',fill:'fillColor'},applyOpacity:function(fill){var markerOptions=this.options.marker,fillOpacity=pick(markerOptions.fillOpacity,0.5);fill=fill||markerOptions.fillColor||this.color;if(fillOpacity!==1){fill=Color(fill).setOpacity(fillOpacity).get('rgba');}\nreturn fill;},convertAttribs:function(){var obj=Series.prototype.convertAttribs.apply(this,arguments);obj.fill=this.applyOpacity(obj.fill);return obj;},getRadii:function(zMin,zMax,minSize,maxSize){var len,i,pos,zData=this.zData,radii=[],sizeByArea=this.options.sizeBy!=='width',zRange;for(i=0,len=zData.length;i<len;i++){zRange=zMax-zMin;pos=zRange>0?(zData[i]-zMin)/(zMax-zMin):0.5;if(sizeByArea&&pos>=0){pos=Math.sqrt(pos);}\nradii.push(math.ceil(minSize+pos*(maxSize-minSize))/2);}\nthis.radii=radii;},animate:function(init){var animation=this.options.animation;if(!init){each(this.points,function(point){var graphic=point.graphic,shapeArgs=point.shapeArgs;if(graphic&&shapeArgs){graphic.attr('r',1);graphic.animate({r:shapeArgs.r},animation);}});this.animate=null;}},translate:function(){var i,data=this.data,point,radius,radii=this.radii;seriesTypes.scatter.prototype.translate.call(this);i=data.length;while(i--){point=data[i];radius=radii?radii[i]:0;point.negative=point.z<(this.options.zThreshold||0);if(radius>=this.minPxSize/2){point.shapeType='circle';point.shapeArgs={x:point.plotX,y:point.plotY,r:radius};point.dlBox={x:point.plotX-radius,y:point.plotY-radius,width:2*radius,height:2*radius};}else{point.shapeArgs=point.plotY=point.dlBox=UNDEFINED;}}},drawLegendSymbol:function(legend,item){var radius=pInt(legend.itemStyle.fontSize)/2;item.legendSymbol=this.chart.renderer.circle(radius,legend.baseline-radius,radius).attr({zIndex:3}).add(item.legendGroup);item.legendSymbol.isMarker=true;},drawPoints:seriesTypes.column.prototype.drawPoints,alignDataLabel:seriesTypes.column.prototype.alignDataLabel});Axis.prototype.beforePadding=function(){var axis=this,axisLength=this.len,chart=this.chart,pxMin=0,pxMax=axisLength,isXAxis=this.isXAxis,dataKey=isXAxis?'xData':'yData',min=this.min,extremes={},smallestSize=math.min(chart.plotWidth,chart.plotHeight),zMin=Number.MAX_VALUE,zMax=-Number.MAX_VALUE,range=this.max-min,transA=axisLength/range,activeSeries=[];if(this.tickPositions){each(this.series,function(series){var seriesOptions=series.options,zData;if(series.bubblePadding&&(series.visible||!chart.options.chart.ignoreHiddenSeries)){axis.allowZoomOutside=true;activeSeries.push(series);if(isXAxis){each(['minSize','maxSize'],function(prop){var length=seriesOptions[prop],isPercent=/%$/.test(length);length=pInt(length);extremes[prop]=isPercent?smallestSize*length/100:length;});series.minPxSize=extremes.minSize;zData=series.zData;if(zData.length){zMin=pick(seriesOptions.zMin,math.min(zMin,math.max(arrayMin(zData),seriesOptions.displayNegative===false?seriesOptions.zThreshold:-Number.MAX_VALUE)));zMax=pick(seriesOptions.zMax,math.max(zMax,arrayMax(zData)));}}}});each(activeSeries,function(series){var data=series[dataKey],i=data.length,radius;if(isXAxis){series.getRadii(zMin,zMax,extremes.minSize,extremes.maxSize);}\nif(range>0){while(i--){if(typeof data[i]==='number'){radius=series.radii[i];pxMin=Math.min(((data[i]-min)*transA)-radius,pxMin);pxMax=Math.max(((data[i]-min)*transA)+radius,pxMax);}}}});if(activeSeries.length&&range>0&&pick(this.options.min,this.userMin)===UNDEFINED&&pick(this.options.max,this.userMax)===UNDEFINED){pxMax-=axisLength;transA*=(axisLength+pxMin-pxMax)/axisLength;this.min+=pxMin/transA;this.max+=pxMax/transA;}}};(function(){var seriesProto=Series.prototype,pointerProto=Pointer.prototype,colProto;seriesProto.toXY=function(point){var xy,chart=this.chart,plotX=point.plotX,plotY=point.plotY,clientX;point.rectPlotX=plotX;point.rectPlotY=plotY;clientX=((plotX/Math.PI*180)+this.xAxis.pane.options.startAngle)%360;if(clientX<0){clientX+=360;}\npoint.clientX=clientX;xy=this.xAxis.postTranslate(point.plotX,this.yAxis.len-plotY);point.plotX=point.polarPlotX=xy.x-chart.plotLeft;point.plotY=point.polarPlotY=xy.y-chart.plotTop;};seriesProto.orderTooltipPoints=function(points){if(this.chart.polar){points.sort(function(a,b){return a.clientX-b.clientX;});if(points[0]){points[0].wrappedClientX=points[0].clientX+360;points.push(points[0]);}}};function initArea(proceed,chart,options){proceed.call(this,chart,options);if(this.chart.polar){this.closeSegment=function(path){var center=this.xAxis.center;path.push('L',center[0],center[1]);};this.closedStacks=true;}}\nif(seriesTypes.area){wrap(seriesTypes.area.prototype,'init',initArea);}\nif(seriesTypes.areaspline){wrap(seriesTypes.areaspline.prototype,'init',initArea);}\nif(seriesTypes.spline){wrap(seriesTypes.spline.prototype,'getPointSpline',function(proceed,segment,point,i){var ret,smoothing=1.5,denom=smoothing+1,plotX,plotY,lastPoint,nextPoint,lastX,lastY,nextX,nextY,leftContX,leftContY,rightContX,rightContY,distanceLeftControlPoint,distanceRightControlPoint,leftContAngle,rightContAngle,jointAngle;if(this.chart.polar){plotX=point.plotX;plotY=point.plotY;lastPoint=segment[i-1];nextPoint=segment[i+1];if(this.connectEnds){if(!lastPoint){lastPoint=segment[segment.length-2];}\nif(!nextPoint){nextPoint=segment[1];}}\nif(lastPoint&&nextPoint){lastX=lastPoint.plotX;lastY=lastPoint.plotY;nextX=nextPoint.plotX;nextY=nextPoint.plotY;leftContX=(smoothing*plotX+lastX)/denom;leftContY=(smoothing*plotY+lastY)/denom;rightContX=(smoothing*plotX+nextX)/denom;rightContY=(smoothing*plotY+nextY)/denom;distanceLeftControlPoint=Math.sqrt(Math.pow(leftContX-plotX,2)+Math.pow(leftContY-plotY,2));distanceRightControlPoint=Math.sqrt(Math.pow(rightContX-plotX,2)+Math.pow(rightContY-plotY,2));leftContAngle=Math.atan2(leftContY-plotY,leftContX-plotX);rightContAngle=Math.atan2(rightContY-plotY,rightContX-plotX);jointAngle=(Math.PI/2)+((leftContAngle+rightContAngle)/2);if(Math.abs(leftContAngle-jointAngle)>Math.PI/2){jointAngle-=Math.PI;}\nleftContX=plotX+Math.cos(jointAngle)*distanceLeftControlPoint;leftContY=plotY+Math.sin(jointAngle)*distanceLeftControlPoint;rightContX=plotX+Math.cos(Math.PI+jointAngle)*distanceRightControlPoint;rightContY=plotY+Math.sin(Math.PI+jointAngle)*distanceRightControlPoint;point.rightContX=rightContX;point.rightContY=rightContY;}\nif(!i){ret=['M',plotX,plotY];}else{ret=['C',lastPoint.rightContX||lastPoint.plotX,lastPoint.rightContY||lastPoint.plotY,leftContX||plotX,leftContY||plotY,plotX,plotY];lastPoint.rightContX=lastPoint.rightContY=null;}}else{ret=proceed.call(this,segment,point,i);}\nreturn ret;});}\nwrap(seriesProto,'translate',function(proceed){proceed.call(this);if(this.chart.polar&&!this.preventPostTranslate){var points=this.points,i=points.length;while(i--){this.toXY(points[i]);}}});wrap(seriesProto,'getSegmentPath',function(proceed,segment){var points=this.points;if(this.chart.polar&&this.options.connectEnds!==false&&segment[segment.length-1]===points[points.length-1]&&points[0].y!==null){this.connectEnds=true;segment=[].concat(segment,[points[0]]);}\nreturn proceed.call(this,segment);});function polarAnimate(proceed,init){var chart=this.chart,animation=this.options.animation,group=this.group,markerGroup=this.markerGroup,center=this.xAxis.center,plotLeft=chart.plotLeft,plotTop=chart.plotTop,attribs;if(chart.polar){if(chart.renderer.isSVG){if(animation===true){animation={};}\nif(init){attribs={translateX:center[0]+plotLeft,translateY:center[1]+plotTop,scaleX:0.001,scaleY:0.001};group.attr(attribs);if(markerGroup){markerGroup.attr(attribs);}}else{attribs={translateX:plotLeft,translateY:plotTop,scaleX:1,scaleY:1};group.animate(attribs,animation);if(markerGroup){markerGroup.animate(attribs,animation);}\nthis.animate=null;}}}else{proceed.call(this,init);}}\nwrap(seriesProto,'animate',polarAnimate);wrap(seriesProto,'setTooltipPoints',function(proceed,renew){if(this.chart.polar){extend(this.xAxis,{tooltipLen:360});}\nreturn proceed.call(this,renew);});if(seriesTypes.column){colProto=seriesTypes.column.prototype;wrap(colProto,'animate',polarAnimate);wrap(colProto,'translate',function(proceed){var xAxis=this.xAxis,len=this.yAxis.len,center=xAxis.center,startAngleRad=xAxis.startAngleRad,renderer=this.chart.renderer,start,points,point,i;this.preventPostTranslate=true;proceed.call(this);if(xAxis.isRadial){points=this.points;i=points.length;while(i--){point=points[i];start=point.barX+startAngleRad;point.shapeType='path';point.shapeArgs={d:renderer.symbols.arc(center[0],center[1],len-point.plotY,null,{start:start,end:start+point.pointWidth,innerR:len-pick(point.yBottom,len)})};this.toXY(point);point.tooltipPos=[point.plotX,point.plotY];point.ttBelow=point.plotY>center[1];}}});wrap(colProto,'alignDataLabel',function(proceed,point,dataLabel,options,alignTo,isNew){if(this.chart.polar){var angle=point.rectPlotX/Math.PI*180,align,verticalAlign;if(options.align===null){if(angle>20&&angle<160){align='left';}else if(angle>200&&angle<340){align='right';}else{align='center';}\noptions.align=align;}\nif(options.verticalAlign===null){if(angle<45||angle>315){verticalAlign='bottom';}else if(angle>135&&angle<225){verticalAlign='top';}else{verticalAlign='middle';}\noptions.verticalAlign=verticalAlign;}\nseriesProto.alignDataLabel.call(this,point,dataLabel,options,alignTo,isNew);}else{proceed.call(this,point,dataLabel,options,alignTo,isNew);}});}\nwrap(pointerProto,'getIndex',function(proceed,e){var ret,chart=this.chart,center,x,y;if(chart.polar){center=chart.xAxis[0].center;x=e.chartX-center[0]-chart.plotLeft;y=e.chartY-center[1]-chart.plotTop;ret=180-Math.round(Math.atan2(x,y)/Math.PI*180);}else{ret=proceed.call(this,e);}\nreturn ret;});wrap(pointerProto,'getCoordinates',function(proceed,e){var chart=this.chart,ret={xAxis:[],yAxis:[]};if(chart.polar){each(chart.axes,function(axis){var isXAxis=axis.isXAxis,center=axis.center,x=e.chartX-center[0]-chart.plotLeft,y=e.chartY-center[1]-chart.plotTop;ret[isXAxis?'xAxis':'yAxis'].push({axis:axis,value:axis.translate(isXAxis?Math.PI-Math.atan2(x,y):Math.sqrt(Math.pow(x,2)+Math.pow(y,2)),true)});});}else{ret=proceed.call(this,e);}\nreturn ret;});}());}(Highcharts));","js/thirdparty/highcharts/smartbi/highcharts_effect.js":"\n(function(HC){var win=window,useVML=HC.vml,Color=HC.Color,pick=HC.pick,seriesProto=HC.Series.prototype,seriesGetColor=seriesProto.getColor,seriesConvertAttribs=seriesProto.convertAttribs,pointProto=HC.Point.prototype,pointInit=pointProto.init,pointSelect=pointProto.select,colorAdapter=win.HighchartsColorAdapter,Renderer=Highcharts.Renderer;if(!colorAdapter){colorAdapter=win.HighchartsColorAdapter={seriesColor:function(color,point,series){var stype=series.type,newColor=color;if(stype=='column'||stype=='bar'||stype=='waterfall'){newColor=this.columnColor.apply(this,arguments);}else if(stype=='pie'){newColor=this.pieColor.apply(this,arguments);}else if(stype=='scatter'||stype=='bubble'){newColor=this.scatterColor.apply(this,arguments);}else if(stype==\"area\"||stype==\"areaspline\"){arguments[0]=Color(color).setOpacity(series.options.fillOpacity||0.75).get();newColor=this.areaColor.apply(this,arguments);}\nreturn newColor;},pointColor:function(color,point,series){var stype=series.type,newColor=color;if(stype=='column'||stype=='bar'||stype=='waterfall'){newColor=this.columnColor.apply(this,arguments);}else if(stype=='pie'){newColor=this.pieColor.apply(this,arguments);}else if(stype=='scatter'||stype=='bubble'){newColor=this.scatterColor.apply(this,arguments);}else if(stype==\"area\"||stype==\"areaspline\"||stype=='line'||stype=='spline'){newColor=this.scatterColor.apply(this,arguments);}\nreturn newColor;},pieColor:function(){var oldColor=arguments[0],series=arguments[2];if(!(oldColor&&oldColor.radialGradient)){if(series&&(series.options.innerSize||0)!=0){var center=series.getCenter(),start=center[3]/center[2];start=start>1?1/start:start;var stops=[[0,\"rgb(255,255,255)\"],[start,Color(oldColor).brighten(-0.10).get('rgb')],[((1-start)/2+start),Color(oldColor).brighten(0.1).get('rgb')],[1,Color(oldColor).brighten(-0.23).get('rgb')]];return{radialGradient:{cx:0.5,cy:0.5,r:0.5},oldColor:oldColor,stops:stops};}else{var stops=[[0,Color(oldColor).brighten(0.50).get('rgba')],[0.4,Color(oldColor).brighten(0).get('rgba')],[0.6,Color(oldColor).brighten(-0.10).get('rgba')],[0.8,Color(oldColor).brighten(-0.30).get('rgba')],[1,Color(oldColor).brighten(-0.9).get('rgba')]];if(useVML){stops[0][1]=Color(oldColor).brighten(0.20).get('rgba');stops[stops.length-1][1]=Color(oldColor).brighten(-0.5).get('rgba');}\nreturn{oldColor:oldColor,radialGradient:{cx:0.5,cy:0,r:1},stops:stops};}}\nreturn oldColor;},scatterColor:function(){var oldColor=arguments[0];if(!(oldColor&&oldColor.radialGradient)){var stops=[[0,Color(oldColor).brighten(0.50).get('rgba')],[0.4,Color(oldColor).brighten(0).get('rgba')],[0.6,Color(oldColor).brighten(-0.10).get('rgba')],[0.9,Color(oldColor).brighten(-0.30).get('rgba')],[1,Color(oldColor).brighten(-0.8).get('rgba')]];if(useVML){stops[0][1]=Color(oldColor).brighten(0.2).get('rgba');stops[stops.length-1][1]=Color(oldColor).brighten(-0.5).get('rgba');}\nreturn{oldColor:oldColor,radialGradient:{cx:0.5,cy:0,r:1},stops:stops};}\nreturn oldColor;},columnColor:function(){var oldColor=arguments[0],series=arguments[2];if(!(oldColor&&oldColor.linearGradient)){oldColor={oldColor:oldColor,linearGradient:{x1:0,y1:0,x2:1,y2:0},stops:[[0,Color(oldColor).brighten(-0.20).get('rgba')],[0.3,Color(oldColor).brighten(0.10).get('rgba')],[0.45,Color(oldColor).brighten(0.20).get('rgba')],[0.5,Color(oldColor).brighten(0.25).get('rgba')],[0.55,Color(oldColor).brighten(0.20).get('rgba')],[0.7,Color(oldColor).brighten(0.10).get('rgba')],[1,Color(oldColor).brighten(-0.20).get('rgba')]]};}\nif(oldColor&&series.type==\"bar\"&&useVML){oldColor.linearGradient={x1:0,y1:0,x2:0,y2:1};}\nreturn oldColor;},areaColor:function(){var oldColor=arguments[0];if(!(oldColor&&oldColor.linearGradient)){return{oldColor:oldColor,linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Color(oldColor).brighten(0.5).get('rgba')],[0.5,Color(oldColor).brighten(0).get('rgba')],[1,Color(oldColor).brighten(-0.30).get('rgba')]]};}}}}\nseriesProto.getColor=function(){seriesGetColor.apply(this,arguments);this.getEffectColor();var stype=this.type;if(this.options.colorByPoint&&(stype=\"bar\"||stype==\"column\")){this.color=null;}};seriesProto.getEffectColor=function(){if(this.color&&this.options.effect){this.color=colorAdapter.seriesColor(this.color,null,this);}};seriesProto.convertAttribs=function(){var series=this,obj=seriesConvertAttribs.apply(this,arguments);if(this.options.effect&&obj.fill){var stype=series.type;if(stype==\"area\"||stype==\"areaspline\"||stype=='line'||stype=='spline'){obj.fill=colorAdapter.pointColor(obj.fill.oldColor?obj.fill.oldColor:obj.fill,null,this);}else if((stype=='bubble'||stype=='scatter')&&!obj.fill.radialGradient){obj.fill=colorAdapter.pointColor(obj.fill,null,this);}else if(stype=='pie'&&obj.fill.radialGradient&&obj.fill.radialGradient.id){obj.fill.radialGradient.id=null;}else{obj.fill=colorAdapter.pointColor(obj.fill,null,this);}}\nreturn obj;};pointProto.init=function(series,options,x){var point=this;pointInit.apply(this,arguments);if(point.color&&series.options.effect){point.color=point.options.color=colorAdapter.pointColor(point.color,this,series);}\nreturn point;};pointProto.select=function(selected,accumulate){var point=this;if(!accumulate&&point.selected)return;selected=pick(selected,!point.selected);pointSelect.apply(this,arguments);};pointProto.setSelectState=function(selected){var point=this,SELECT_STATE='select',state=SELECT_STATE,plotX=point.plotX,plotY=point.plotY,series=point.series,chart=series.chart,wrapper,radius,pointAttr=point.pointAttr,selectMarkerGraphic=chart.selectMarkerGraphic,defaultOptions=Highcharts.getOptions(),options=series.options,stateOptions=series.options.states,markerOptions=defaultOptions.plotOptions[series.type].marker&&series.options.marker,normalDisabled=markerOptions&&!markerOptions.enabled,markerStateOptions=markerOptions&&markerOptions.states&&markerOptions.states[state],stateDisabled=markerStateOptions&&markerStateOptions.enabled===false,selectStateOptions=markerStateOptions?markerStateOptions:stateOptions[state],selectShadowOptions={color:'#ff0000',width:4,opacity:0.8,offsetX:0.1,offsetY:0.1};if((stateOptions[state]&&stateOptions[state].enabled===false)||(stateDisabled||(normalDisabled&&!markerStateOptions.enabled))){return;}\nselectShadowOptions=Highcharts.merge(selectShadowOptions,selectStateOptions.shadow);function removeShadows(wrapper){if(wrapper&&wrapper.shadows&&wrapper.shadows.length>0){if(!wrapper.isSelected&&selected){wrapper.hasShadows=true;}\nshadows=wrapper.shadows;Highcharts.each(shadows,function(shadow){wrapper.safeRemoveChild(shadow);});wrapper.shadows=null;}}\nif(point.graphic){if(!selectStateOptions.shadow||!selectStateOptions.shadow.width)return;wrapper=point.graphic;}else{if(selected){radius=markerStateOptions.radius||markerOptions.radius||5;if(state&&markerStateOptions){if(!selectMarkerGraphic){chart.selectMarkerGraphic=selectMarkerGraphic=chart.renderer.symbol(series.symbol,plotX-radius,plotY-radius,2*radius,2*radius).attr(pointAttr[state]).add(series.markerGroup);}else{selectMarkerGraphic.attr({x:plotX-radius,y:plotY-radius});}}\nif(selectMarkerGraphic){selectMarkerGraphic.show();if(!selectStateOptions.shadow||!selectStateOptions.shadow.width)return;wrapper=selectMarkerGraphic;}}}\nif(selected){removeShadows(wrapper);wrapper.shadow(selectShadowOptions,point.shadowGroup);}else{removeShadows(wrapper);if(point.graphic&&point.graphic.hasShadows){point.graphic.shadow(options.shadow,point.shadowGroup,options.stacking&&!options.borderRadius);}}\nif(wrapper){wrapper.isSelected=selected;}};})(Highcharts)","js/thirdparty/highcharts/smartbi/bubble.js":"\n(function(HC){var HOVER_STATE='hover',SELECT_STATE='select',plotOptions=HC.getOptions().plotOptions;plotOptions.bubble=HC.merge(plotOptions.scatter,{marker:{radius:5,states:{hover:{enabled:true,lineColor:'rgb(100,100,100)',lineWidth:2,fillColor:'#ffffff'}}},states:{hover:{marker:{enabled:false}}}});HC.seriesTypes.bubble=HC.extendClass(HC.seriesTypes.scatter,{type:'bubble',getAttribs:function(){var series=this,i,pointAttrToOptions=series.pointAttrToOptions,points=series.points||[],stateOptions;i=points.length;function defined(obj){return obj!==undefined&&obj!==null;}\nwhile(i--){point=points[i];normalOptions=(point.options&&point.options.marker)||point.options;if(normalOptions&&normalOptions.enabled===false){normalOptions.radius=0;}\nhasPointSpecificOptions=false;if(point.options){for(key in pointAttrToOptions){if(defined(normalOptions[pointAttrToOptions[key]])){hasPointSpecificOptions=true;}}}\nif(hasPointSpecificOptions){stateOptions=normalOptions.states||{};stateOptions[HOVER_STATE]=stateOptions[HOVER_STATE]||{};stateOptions[SELECT_STATE]=stateOptions[SELECT_STATE]||{};stateOptions[HOVER_STATE].radius=stateOptions[HOVER_STATE].radius||normalOptions.radius;stateOptions[SELECT_STATE].radius=stateOptions[SELECT_STATE].radius||normalOptions.radius;normalOptions.states=stateOptions;}}\nHC.seriesTypes.scatter.prototype.getAttribs.apply(this,arguments);}});})(Highcharts);","js/thirdparty/highcharts/smartbi/waterfall.js":"\n(function(HC){var plotOptions=HC.getOptions().plotOptions;plotOptions.waterfall=HC.merge(plotOptions.column,{});HC.seriesTypes.waterfall=HC.extendClass(HC.seriesTypes.column,{type:'waterfall'});})(Highcharts);","js/smartbi/map/map.js":"\n(function(Highstock){var UNDEFINED,addEvent=Highstock.addEvent,removeEvent=Highstock.removeEvent,each=Highstock.each,extend=Highstock.extend,extendClass=Highstock.extendClass,merge=Highstock.merge,numberFormat=Highstock.numberFormat,fireEvent=Highstock.fireEvent,defaultOptions=Highstock.getOptions(),plotOptions=defaultOptions.plotOptions,M='M',L='L',NORMAL_STATE='',HOVER_STATE='hover',SELECT_STATE='select',HIDDEN='hidden',VISIBLE='visible',splat=Highstock.splat,pick=Highstock.pick,noop=function(){},hasTouch=document.documentElement.ontouchstart!==UNDEFINED,Color=Highstock.Color,TRACKER_FILL='rgba(192,192,192,'+(Highstock.svg?0.000001:0.002)+')',attr=Highstock.attr,vml=Highstock.vml;function defined(obj){return obj!==UNDEFINED&&obj!==null;}\nfunction hash(){var i=0,args=arguments,length=args.length,obj={};for(;i<length;i++){obj[args[i++]]=args[i];}\nreturn obj;}\nfunction getRgbColor(hexColor,alpha){var result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(hexColor);var rgb=null;if(result){rgb=[parseInt(result[1],16),parseInt(result[2],16),parseInt(result[3],16)];if(typeof alpha!=\"undefined\"&&alpha!=null){alpha=parseInt(alpha);if(alpha>=0&&alpha<=100){rgb.push(alpha/100);}}\nif(rgb.length==3)\nreturn\"rgb(\"+rgb.join(',')+\")\";if(rgb.length==4)\nreturn\"rgba(\"+rgb.join(',')+\")\";}\nreturn null;}\nHighstock.pathToArray=function(path){path=path.replace(/([A-Za-z])/g,' $1 ');path=path.replace(/^\\s*/,\"\").replace(/\\s*$/,\"\");path=path.split(/[ ,]+/);for(var i=0;i<path.length;i++){if(!/[a-zA-Z]/.test(path[i])){path[i]=parseFloat(path[i]);}}\nreturn path;};plotOptions.map=merge(plotOptions.scatter,{animation:false,minOpacity:0.2,nullColor:'#ECF7F9',shadow:false,nullValueHoverState:true,marker:{borderColor:'#58B3C2',borderWidth:'1',color:'#ECF7F9',hoverBrighten:false,states:{hover:{color:'#58B3C2',borderWidth:'2'},select:{color:'#58B3C2',borderWidth:'2'}}},dataLabels:{enabled:true,color:'#000',align:'right',style:{cursor:'default'},formatter:function(){return this.key;}},tooltip:{headerFormat:'',pointFormat:'<span style=\"font-size: 12px;\">{series.name}:'\n+'{point.displayValue}<\/span><br/>'}});var MapPoint=extendClass(Highstock.Point,{init:function(){var point=Highstock.Point.prototype.init.apply(this,arguments),valueRanges=point.series.options.valueRanges,range,from,to,i,value=point.value,defaultColor,marker=point.series.options.marker;if(value===UNDEFINED){point.isNull=true;if(!marker.useMapColor){defaultColor=pick(marker.color,point.series.options.defaultColor,point.series.options.nullColor);point.color=point.options.color=defaultColor;}}\nif(valueRanges&&!point.isNull){i=valueRanges.length;while(i--){range=valueRanges[i];from=range.from;to=range.to;if((from===UNDEFINED||value>=from)&&(to===UNDEFINED||value<to)){if(typeof range.transparency!=\"undefined\"){point.color=point.options.color=getRgbColor(range.color,range.transparency);if(range.transparency!=\"\"&&range.transparency==0){point.borderColor=point.options.borderColor=getRgbColor(range.color,range.transparency);point.doNothingOnmouseover=true;}}else{point.color=point.options.color=range.color;}\nbreak;}}}\nvar other=point.series.xAxis.options.other;if(other){point.category=point.series.xAxis.options.other.alias;}\nreturn point;},setState:function(state){var point=this,bBox,radius,plotX,plotY,series=point.series,chart=series.chart,renderer=series.chart.renderer,hoverImgSrc,image=point.image;state=state||NORMAL_STATE;if(point.state!==state&&point.symbolImg&&image.hoverSrc){if(HOVER_STATE==state){if(point.symbolImg){point.symbolImg.attr({visibility:\"hidden\"})}\nif(!point.symbolImgHover){var xy=series.translatePath([image.x,image.y]);hoverImgSrc=\"url(\"+image.hoverSrc+\")\";point.symbolImgHover=renderer.symbol(hoverImgSrc,xy[0]+image.width/2,xy[1]+image.height/2,image.width,image.height).add(series.markerGroup);}else{point.symbolImgHover.attr({visibility:\"visible\"})}}else if(NORMAL_STATE==state){if(point.symbolImg){point.symbolImg.attr({visibility:\"visible\"})}\nif(point.symbolImgHover){point.symbolImgHover.attr({visibility:\"hidden\"})}}}\nHighstock.Point.prototype.setState.apply(this,arguments);}});var MapSeries=extendClass(Highstock.seriesTypes.scatter,{type:'map',pointClass:MapPoint,pointAttrToOptions:Highstock.seriesTypes.column.prototype.pointAttrToOptions,init:function(chart){Highstock.Series.prototype.init.apply(this,arguments);this.addRangeLegends(chart);},drawGraph:noop,drawTracker:Highstock.seriesTypes.column.prototype.drawTracker});Highstock.seriesTypes.map=MapSeries;MapSeries.prototype.addRangeLegends=function(chart){var series=this,valueDecimals=chart.options.legend.valueDecimals,legendItems=[],name,from,to;if(series.symbol==\"none\"||series.name==\"none\"){series.legendItems=legendItems;return;}\nlegendItems.push(series);if(series.options.valueRanges){each(series.options.valueRanges,function(range){from=range.from;to=range.to;name='';if(from===UNDEFINED){name='< '}else if(to===UNDEFINED){name='> ';}\nif(from!==UNDEFINED){name+=numberFormat(from,valueDecimals);}\nif(from!==UNDEFINED&&to!==UNDEFINED){name+=' - ';}\nif(to!==UNDEFINED){name+=numberFormat(to,valueDecimals);}\nif(!range.name)\nrange.name=name;legendItems.push(extend(extend(extend({},series),{isSubLegendItem:true,setVisible:function(vis,redraw){var subLegendSeries=this;MapLegend.setSubLegendVisible(vis,redraw,series,subLegendSeries);}}),range));});series.legendItems=legendItems;}};MapSeries.prototype.getBox=function(){var series=this,maxX=-Math.pow(2,31),minX=Math.pow(2,31)-1,maxY=-Math.pow(2,31),minY=Math.pow(2,31)-1\neach(series.options.data,function(point){var path=point.path&&point.path.path,i=path.length,even=false;while(i--){if(typeof path[i]==='number'){if(even){maxX=Math.max(maxX,path[i]);minX=Math.min(minX,path[i]);}else{maxY=Math.max(maxY,path[i]);minY=Math.min(minY,path[i]);}\neven=!even;}}});};MapSeries.prototype.translatePath=function(path){var series=this,chart=series.chart,even=false,xAxis=series.xAxis,yAxis=series.yAxis;var i=path.length;var newPath=new Array(i);while(i--){newPath[i]=path[i];if(typeof path[i]==='number'){if(even){newPath[i]=Math.round(xAxis.translate(path[i]));}else{newPath[i]=Math.round(yAxis.translate(path[i]));}\neven=!even;}}\nreturn newPath;};MapSeries.prototype.setData=function(){Highstock.Series.prototype.setData.apply(this,arguments);},MapSeries.prototype.translate=function(){var series=this,options=series.options,maxValue=0,opacity,minOpacity=options.minOpacity,path,color,xAxis=series.xAxis,yAxis=series.yAxis,transA=Math.min(xAxis.transA,yAxis.transA),axes=[xAxis,yAxis];each(axes,function(axis){if(axis.transA>transA){var diff=(axis.len/transA)-(axis.len/axis.transA);axis.min=axis.min-diff/2;axis.max=axis.max+diff/2;axis.translationSlope=axis.transA=transA;}})\nseries.generatePoints();each(series.data,function(point){point.shapeType='path';if(!point.path||!point.path.path){alert(\"\\\"\"+point.series.name+\"\\\"地图文件格式不正确：没有path\");return false;}\npoint.shapeArgs=series.translatePath(point.path.path);if(point.path&&point.path.linePath&&point.path.linePath.length>0){point.lineShapeArgs=series.translatePath(point.path.linePath);}\nif(point.path&&point.path.point){point.labelPoint=series.translatePath(point.path.point);}\nif(point.value>maxValue){maxValue=point.value;}});};MapSeries.prototype.drawDataLabels=function(){var series=this,seriesOptions=series.options,options=seriesOptions.dataLabels;if(options.enabled||series._hasPointLabels){var x,y,points=series.points,pointOptions,generalOptions,str,dataLabelsGroup=series.dataLabelsGroup,chart=series.chart,xAxis=series.xAxis,groupLeft=xAxis?xAxis.left:chart.plotLeft,yAxis=series.yAxis,groupTop=yAxis?yAxis.top:chart.plotTop,renderer=chart.renderer,dataLabel,enabled,lineShapeArgs,lineGraphic,markerOptions;if(!dataLabelsGroup){dataLabelsGroup=series.dataLabelsGroup=renderer.g('data-labels').attr({visibility:series.visible?VISIBLE:HIDDEN,zIndex:6}).translate(groupLeft,groupTop).add();}else{dataLabelsGroup.translate(groupLeft,groupTop);}\ngeneralOptions=options;each(points,function(point){dataLabel=point.dataLabel;options=generalOptions;pointOptions=point.options;if(pointOptions&&pointOptions.dataLabels){options=merge(options,pointOptions.dataLabels);}\nenabled=options.enabled&&point.labelPoint[0]&&point.labelPoint[1];if(enabled){x=point.labelPoint[0]+options.x+26;y=point.labelPoint[1]+options.y+10;}\nif(dataLabel&&series.isCartesian&&(!chart.isInsidePlot(x,y)||!enabled)){point.dataLabel=dataLabel.destroy();}else if(enabled){var align=options.align,attr,name;str=options.formatter.call(point.getLabelConfig(),options);options.style.color=pick(options.style.color,options.color,series.color,'black');if(dataLabel){dataLabel.attr({text:str}).animate({x:x,y:y});}else if(defined(str)){attr={align:align,fill:options.backgroundColor,stroke:options.borderColor,'stroke-width':options.borderWidth,r:options.borderRadius||0,rotation:options.rotation,padding:options.padding,zIndex:1};for(name in attr){if(attr[name]===UNDEFINED){delete attr[name];}}\nif(options.style.fontSize>12){options.style.lineHeight=options.style.fontSize+\"px\";}\ndataLabel=point.dataLabel=renderer[options.rotation?'text':'label'](str,x,y,null,null,null,options.useHTML,true).attr(attr).css(options.style).add(dataLabelsGroup).shadow(options.shadow);}}\nlineGraphic=point.lineGraphic;lineShapeArgs=point.lineShapeArgs;markerOptions=series.options.marker;if(lineShapeArgs){if(lineGraphic){jQuery(lineGraphic).stop();lineGraphic.animate({d:lineShapeArgs});}else\npoint.lineGraphic=renderer[point.shapeType](lineShapeArgs).attr({stroke:options.connectorColor||point.borderColor||markerOptions.borderColor||'#606060','stroke-width':options.connectorWidth||point.borderWidth||markerOptions.borderWidth||1}).add(series.dataLabelsGroup);}});}};MapSeries.prototype.drawPoints=function(){var series=this,chart=series.chart,saturation,bBox,options=series.options,renderer=series.chart.renderer,graphic,shapeArgs,markerGroup=series.markerGroup,symbol,radius,plotX,plotY,image;each(series.data,function(point){point.plotY=1;if(point.value===null){point.value=0;point.isNull=true;}});each(series.points,function(point){var plotY=point.plotY;if(plotY!==UNDEFINED&&!isNaN(plotY)&&point.value!==null){graphic=point.graphic;shapeArgs=point.shapeArgs;image=point.image;if(graphic){jQuery(graphic).stop();graphic.animate({d:shapeArgs});if(image){var xy=series.translatePath([image.x+image.width/2,image.y+image.height/2]);if(point.symbolImg){point.symbolImg.animate({x:xy[0],y:xy[1]})}\nif(point.symbolImgHover){point.symbolImgHover.animate({x:xy[0],y:xy[1]})}}}else{point.graphic=graphic=renderer[point.shapeType](shapeArgs).attr(point.pointAttr[point.selected?SELECT_STATE:NORMAL_STATE]).add(markerGroup).shadow(options.shadow,null,options.stacking&&!options.borderRadius);if(image){var src=image.src;if(chart.options.chart.forExport){src=src.replace(/\\\\/g,'/');}\nsymbol=\"url(\"+src+\")\";var xy=series.translatePath([image.x,image.y]);point.symbolImg=renderer.symbol(symbol,xy[0]+image.width/2,xy[1]+image.height/2,parseInt(image.width),parseInt(image.height)).add(series.markerGroup);if(chart.options.chart.forExport){point.symbolImg.translate(-Math.round(image.width/2),-Math.round(image.height/2));}}}}});each(series.data,function(point){if(!point.isNull){}\nbBox=point.graphic.getBBox();point.tooltipPos=[bBox.x+bBox.width/2,bBox.y+bBox.height/2];point.plotX=bBox.x+bBox.width/2-chart.plotLeft;point.plotY=bBox.y+bBox.height/2-chart.plotTop;image=point.image;if(image){point.tooltipPos=series.translatePath([image.x+image.width/2,image.y+image.height/2]);}else{if(point.labelPoint[0]&&　point.labelPoint[1]){point.tooltipPos=[point.labelPoint[0],point.labelPoint[1]];}}\nif(point.isNull){point.value=null;}});};MapSeries.prototype.getAttribs=function(){Highstock.seriesTypes.scatter.prototype.getAttribs.apply(this,arguments);var series=this,options=series.options,stateOptions=options.states,hoverState,color,newColor,selectState,marker;each(series.data,function(point){hoverState=point.pointAttr[HOVER_STATE];selectState=point.pointAttr[SELECT_STATE];if(point.isNull&&!options.nullValueHoverState){hoverState.fill=point.color;selectState.fill=point.color;hoverState[\"stroke-width\"]=\"1\";selectState[\"stroke-width\"]=\"1\";return;}\nif(point.doNothingOnmouseover){hoverState.fill=point.color;hoverState.stroke=point.color;selectState.fill=point.color;selectState.stroke=point.color;hoverState[\"stroke-width\"]=\"1\";selectState[\"stroke-width\"]=\"1\";return;}\nif(point.color!=series.options.nullColor||series.options.marker.hoverBrighten){color=Color(point.color);if(series.options.marker.hoverBrighten==true){color.brighten(0.1);}else{color.brighten(-0.2);}\nnewColor=color.get(\"rgb\");if(newColor==\"rgb(255,255,255)\"){newColor=Color(point.color).brighten(-0.1).get(\"rgb\");}\nhoverState.fill=newColor;selectState.fill=newColor;color=Color(point.color);if(series.options.marker.hoverBrighten==true){color.brighten(0.15);}else{color.brighten(-0.3);}\nnewColor=color.get(\"rgb\");if(newColor==\"rgb(255,255,255)\"){newColor=Color(point.color).brighten(-0.13).get(\"rgb\");}\nhoverState.stroke=newColor;selectState.stroke=newColor;}});};MapSeries.prototype.setAllVisible=MapSeries.prototype.setVisible;MapSeries.prototype.setVisible=function(vis,redraw,subLegendSeries){var series=this,chart=series.chart,legendItem=series.legendItem,dataLabelsGroup=series.dataLabelsGroup,showOrHide,i,points=series.points,point,oldVisibility=series.visible,isDefaultLegendClick=subLegendSeries===UNDEFINED,defaultColor,subLegendColor=!isDefaultLegendClick?subLegendSeries.color:null,subLegendColorRgb=!isDefaultLegendClick?Color(subLegendColor).get(\"rgb\"):null,lColor;if(isDefaultLegendClick)\nseries.visible=vis=vis===UNDEFINED?!oldVisibility:vis;showOrHide=vis?'show':'hide';if(points){i=points.length;while(i--){point=points[i];if(point.graphic){defaultColor=series.options.marker.color||series.options.nullColor;if(isDefaultLegendClick){point.graphic.attr({fill:vis?point.options.color:defaultColor});point.pointAttr[\"\"].fill=vis?point.options.color:defaultColor;point.visible=vis;}else{lColor=subLegendColorRgb;if(point.options.color.indexOf(\"rgb\")==-1){lColor=subLegendColor;}\nif(lColor==point.options.color){point.graphic.attr({fill:vis?point.options.color:defaultColor});point.pointAttr[\"\"].fill=vis?point.options.color:defaultColor;point.visible=vis;}}}}}\nif(legendItem&&isDefaultLegendClick){chart.legend.colorizeItem(series,vis);}\nMapLegend.setGroupLegendVisible(vis,series,subLegendSeries);};MapSeries.prototype.setTooltipPoints=function(renew){var series=this,chart=series.chart,points=[],pointsLength,plotSize=chart.plotSizeX,low,high,xAxis=series.xAxis,point,i,areaId,tooltipPoints=[];if(series.options.enableMouseTracking===false){return;}\nif(renew){series.tooltipPoints=null;}\neach(series.segments||series.points,function(segment){points=points.concat(segment);});if(xAxis&&xAxis.reversed){points=points.reverse();}\npointsLength=points.length;for(i=0;i<pointsLength;i++){point=points[i];areaId=point.areaId;tooltipPoints[areaId]=point;}\nseries.tooltipPoints=tooltipPoints;};MapSeries.prototype.drawTracker=function(){var series=this,chart=series.chart,renderer=chart.renderer,shapeArgs,tracker,trackerLabel=+new Date(),options=series.options,cursor=options.cursor,css=cursor&&{cursor:cursor},trackerGroup=series.isCartesian&&series.plotGroup('trackerGroup',null,VISIBLE,options.zIndex||1,chart.trackerGroup),rel,plotY,validPlotY;each(series.points,function(point){tracker=point.tracker;shapeArgs=point.trackerArgs||point.shapeArgs;plotY=point.plotY;validPlotY=!series.isCartesian||(plotY!==UNDEFINED&&!isNaN(plotY));delete shapeArgs.strokeWidth;if(point.y!==null&&validPlotY){if(tracker){tracker.attr({d:shapeArgs});}else{point.tracker=renderer[point.shapeType](shapeArgs).attr({isTracker:trackerLabel,fill:TRACKER_FILL,visibility:series.visible?VISIBLE:HIDDEN}).on(hasTouch?'touchstart':'mouseover',function(event){rel=event.relatedTarget||event.fromElement;if(chart.hoverSeries!==series&&attr(rel,'isTracker')!==trackerLabel){series.onMouseOver();}\npoint.onMouseOver();}).on('mouseout',function(event){if(!options.stickyTracking){rel=event.relatedTarget||event.toElement;if(attr(rel,'isTracker')!==trackerLabel){series.onMouseOut();}}}).css(point.isNull?\"\":css).add(point.group||trackerGroup);}}});};var Map=function(userOptions,callback){var options;var hiddenAxis={endOnTick:false,gridLineWidth:0,labels:{enabled:false},lineWidth:0,minPadding:0,maxPadding:0,startOnTick:false,tickWidth:0,title:null};var seriesOptions=userOptions.series;userOptions.series=null;options=merge({chart:{type:'map',animation:false},credits:{enabled:false},title:{text:''},plotOptions:{map:{animation:false}},xAxis:hiddenAxis,yAxis:hiddenAxis,legend:{floating:true,layout:'vertical',align:'left'},tooltip:{backgroundColor:\"#FFFFFF\"}},userOptions,{chart:{inverted:false}});options.series=userOptions.series=seriesOptions;if(options.tooltip.shared!=false){options.tooltip.shared=false;var formatter=options.tooltip.formatter||MapTooltip.prototype.defaultFormatter;options.tooltip.formatter=function(){var textConfig=MapTooltip.prototype.addSharePoint.call(this);if(textConfig.points.length==0)\nreturn false;var text=formatter.call(textConfig);if(text==''){return false;}\nreturn text;}}else{var formatter=options.tooltip.formatter||MapTooltip.prototype.defaultFormatter;;options.tooltip.formatter=function(){if(this.point.isNull===true){return false;}\nvar text=formatter.call(this);if(text==''){return false;}\nreturn text;}}\nif(String(options.chart.height).indexOf(\"%\")!=-1){options.chart.height=options.chart.renderTo.offsetHeight-2;}\nif(String(options.chart.width).indexOf(\"%\")!=-1){options.chart.width=options.chart.renderTo.offsetWidth-2;}\nvar myCallback=callback;if(options.chart.showPanAndZoom==true){myCallback=function(chart){if(chart.options.panAndZoom.enabled){chart.panAndZoom=new Highstock.PanAndZoom(chart);}\nif(callback){callback.apply(this,arguments);}};}\nreturn new Highstock.Chart(options,myCallback);};Highstock.Map=Map;Highstock.Chart.prototype.dispose=Highstock.Chart.prototype.destroy;Highstock.Chart.prototype.resizeTo=function(width,height){var chart=this;if(String(height).indexOf(\"%\")!=-1){height=this.renderTo.offsetHeight-2;}\nif(String(width).indexOf(\"%\")!=-1){width=this.renderTo.offsetWidth-2;}\nHighstock.Chart.prototype.resize.apply(this,arguments);}\nplotOptions.mapscatter=merge(plotOptions.scatter,{tooltip:{headerFormat:'',pointFormat:'<span style=\"font-size: 12px;\">{series.name}:'\n+'{point.displayValue}<\/span><br/>'}});var MapScatterPoint=extendClass(Highstock.Point,{init:function(){var point=Highstock.Point.prototype.init.apply(this,arguments),valueRanges=point.series.options.valueRanges,range,from,to,i,value=point.value;if(!point.marker)\npoint.marker={};if(!point.options.marker)\npoint.options.marker={};if(valueRanges){i=valueRanges.length;while(i--){range=valueRanges[i];from=range.from;to=range.to;if((from===UNDEFINED||value>=from)&&(to===UNDEFINED||value<to)){point.marker.fillColor=point.options.marker.fillColor=range.color;point.marker.lineColor=point.options.marker.lineColor=range.color;point.marker.lineWidth=point.options.marker.lineWidth=1;point.color=point.options.color=range.color;break;}}}else{point.marker.fillColor=point.options.marker.fillColor=point.series.color;point.marker.lineColor=point.options.marker.lineColor=point.series.color;point.marker.lineWidth=point.options.marker.lineWidth=1;point.color=point.options.color=point.series.color;}\nreturn point;},onMouseOver:function(){}});var mapscatter=extendClass(Highstock.seriesTypes.scatter,{type:\"mapscatter\",pointClass:MapScatterPoint,init:function(chart){var series=this;Highstock.Series.prototype.init.apply(this,arguments);MapSeries.prototype.addRangeLegends.apply(this,arguments);},translate:function(){var series=this,xAxis=series.xAxis,yAxis=series.yAxis;Highstock.Series.prototype.translate.apply(series);each(series.points,function(point){point.plotX=point.plotX+point.offseti*14+5;point.plotY=yAxis.len-point.plotY;if(point.plotY>20){point.plotY=point.plotY-20;}\npoint.shapeType='circle';point.shapeArgs={x:point.plotX,y:point.plotY,r:series.chart.options.tooltip.snap};});},setVisible:function(vis,redraw,subLegendSeries){var series=this,chart=series.chart,legendItem=series.legendItem,dataLabelsGroup=series.dataLabelsGroup,showOrHide,i,points=series.points,point,oldVisibility=series.visible,isDefaultLegendClick=subLegendSeries===UNDEFINED;if(isDefaultLegendClick)\nseries.visible=vis=vis===UNDEFINED?!oldVisibility:vis;showOrHide=vis?'show':'hide';if(points){i=points.length;while(i--){point=points[i];if(point.graphic){if(isDefaultLegendClick){point.graphic[showOrHide]();point.visible=vis;}else{if(subLegendSeries.color==point.options.marker.fillColor){point.graphic[showOrHide]();point.visible=vis;}}}}}\nif(legendItem&&isDefaultLegendClick){chart.legend.colorizeItem(series,vis);}\nMapLegend.setGroupLegendVisible(vis,series,subLegendSeries);},setTooltipPoints:function(renew){MapSeries.prototype.setTooltipPoints.apply(this,arguments);},drawLegendSymbol:function(legend,item){MapSeries.prototype.drawLegendSymbol.apply(this,arguments);},getAttribs:function(){Highstock.seriesTypes.scatter.prototype.getAttribs.apply(this,arguments);var series=this,options=series.options,stateOptions=options.states,color,stroke;each(series.data,function(point){for(var state in point.pointAttr){if(stateOptions[state]&&stateOptions[state].marker){color=stateOptions[state].marker.fillColor;stroke=stateOptions[state].marker.lineColor;}\npoint.pointAttr[state].fill=pick(color,point.color);point.pointAttr[state].stroke=pick(stroke,point.color);}});}});Highstock.seriesTypes.mapscatter=mapscatter;var ChartDrawLegendSymbol=Highstock.seriesTypes.scatter.prototype.drawLegendSymbol;MapSeries.prototype.drawLegendSymbol=function(legend,item){if(item.drawSymbol!=false){Highstock.seriesTypes.scatter.prototype.drawLegendSymbol.apply(this,arguments);}}\nvar ChartLegendRenderItem=Highstock.Legend.prototype.renderItem;var MapLegend=extend(Highstock.Legend.prototype,{positionItem:function(item){var legend=this,options=legend.options,symbolPadding=options.symbolPadding,ltr=!options.rtl,legendItemPos=item._legendItemPos,itemX=legendItemPos[0],itemY=legendItemPos[1],checkbox=item.checkbox;if(item.legendGroup){if(item.isSubLegendItem===true){itemX=2*itemX;}else if(item.drawSymbol==false){itemX=itemX/2;}\nif(vml){itemY=itemY-3;item.legendItem.css({top:6});}\nitem.legendGroup.translate(ltr?itemX:legend.legendWidth-itemX-2*symbolPadding-4,itemY);}\nif(checkbox){checkbox.x=itemX;checkbox.y=itemY;}},renderItem:function(item){var legend=this,chart=legend.chart,optionsChart=chart.options.chart,type=optionsChart.type||optionsChart.defaultSeriesType,options=legend.options;if(type==\"map\"){options.itemMarginBottom_old=options.itemMarginBottom_old||options.itemMarginBottom||1;legend.itemMarginTop_old=legend.itemMarginTop_old||legend.itemMarginTop||1;options.symbolWidth_old=options.symbolWidth_old||options.symbolWidth;if(item.isSubLegendItem===true){options.itemMarginBottom=options.itemMarginBottom_old;legend.itemMarginTop=legend.itemMarginTop_old;options.symbolWidth=options.symbolWidth_old;}else{options.itemMarginBottom=options.itemMainMarginBottom||1;if(!legend.isNotFirstIetm&&options.itemFirstMainMarginTop){legend.itemMarginTop=options.itemFirstMainMarginTop;legend.isNotFirstIetm=true;}else{legend.itemMarginTop=options.itemMainMarginTop||2;}\nitem.drawSymbol=legend.options.drawSymbol||false;if(item.drawSymbol==false){options.symbolWidth=0;}}}\nChartLegendRenderItem.call(this,item);},setSubLegendVisible:function(vis,redraw,series,subLegendSeries){var oldVisibility=subLegendSeries.visible;subLegendSeries.visible=vis=vis===UNDEFINED?!oldVisibility:vis;if(subLegendSeries.legendItem){subLegendSeries.chart.legend.colorizeItem(subLegendSeries,vis);}\nseries.setVisible(vis,redraw,subLegendSeries);},setGroupLegendVisible:function(vis,series,subLegendSeries){if(!series.legendItems){return;}\nvar i=series.legendItems.length,otherlegendItem,isSubLegendItem,isDefaultLegendClick=subLegendSeries===UNDEFINED,chart=series.chart;while(i--){otherlegendItem=series.legendItems[i];isSubLegendItem=otherlegendItem.isSubLegendItem;if(isDefaultLegendClick){if(isSubLegendItem&&otherlegendItem.visible!=vis){otherlegendItem.visible=vis;chart.legend.colorizeItem(otherlegendItem,vis);}}else{if(isSubLegendItem&&otherlegendItem.visible!==subLegendSeries.visible)\nbreak;if(!isSubLegendItem){series.visible=vis;chart.legend.colorizeItem(otherlegendItem,vis);break;}}}}});var getAnchor=Highstock.Tooltip.prototype.getAnchor;var Tooltip=extend(Highstock.Tooltip.prototype,{});var MapTooltip=function(){};MapTooltip.prototype={addSharePoint:function(){var pThis=this,chart=pThis.series.chart,series=chart.series,point,points=[],j,areaId=pThis.point.areaId;i=series.length;for(j=0;j<i;j++){if(series[j].visible&&series[j].options.enableMouseTracking!==false){point=series[j].tooltipPoints[areaId];if(point!=UNDEFINED&&point.visible!==false)\npoints.push(point);}}\nvar hoverPoints=chart.hoverPoints2,textConfig={},text,pointConfig=[];if(hoverPoints){each(hoverPoints,function(point){if(point!=UNDEFINED)\npoint.setState();});}\nchart.hoverPoints2=points;each(points,function(item){if(item!=UNDEFINED){item.setState(HOVER_STATE);pointConfig.push(item.getLabelConfig());}});textConfig={};if(points.length>0){textConfig.x=points[0].x;textConfig.y=points[0].y;textConfig.value=points[0].value;}\ntextConfig.points=pointConfig;return textConfig;},defaultFormatter:function(){var pThis=this,items=pThis.points||splat(pThis),series=items[0].series,tooltip=series.chart.tooltip,options=tooltip.options,s;s=[series.tooltipHeaderFormatter(items[0].key)];each(items,function(item){series=item.series;if(!item.point.isNull){s.push((series.tooltipFormatter&&series.tooltipFormatter(item))||item.point.tooltipFormatter(series.tooltipOptions.pointFormat));}});s.push(options.footerFormat||'');return s.join('');}};var mapScatterSymbols={\"triangle-banner\":function(x,y,w,h){return[M,x,y,L,x,y+h,x+w,y+h,'Z',M,x,y,L,x,y+h*2,'Z'];},\"banner\":function(x,y,w,h){return[M,x,y,L,x+w,y,x+w,y+h,x,y+h,'Z',M,x,y,L,x,y+h*2,'Z'];},\"square-banner\":function(x,y,w,h){return[M,x,y,L,x+w,y,x+w,y+h,x,y+h,'Z',M,x,y,L,x,y+h*2,'Z'];},\"figure\":function(x,y,w,h){var cpw=0.166*w;return[M,x+w/2,y,'C',x+w+cpw,y,x+w+cpw,y+h,x+w/2,y+h,'C',x-cpw,y+h,x-cpw,y,x+w/2,y,'Z',M,x,y+h,L,x+w,y+h,x+w,y+h*3/2,x,y+h*3/2,'Z'];},\"balloon\":function(x,y,w,h){var cpw=0.166*w;return[M,x+w/2,y,'C',x+w+cpw,y,x+w+cpw,y+h,x+w/2,y+h,'C',x-cpw,y+h,x-cpw,y,x+w/2,y,'Z',M,x+w/2,y+h,L,x+w/2,y+2*h,'Z'];},\"star\":function(x,y,w,h){var w1=3,h1=5,h2=12;return[M,x,y+h1,L,x+w1*6,y+h1,x+w1,y+h2,x+w1*3,y,x+w1*5,y+h2,'Z'];},\"bulb\":function(x,y,w,h){var cpw=0.166*w;return[M,x+w/2,y,'C',x+w+cpw,y,x+w+cpw,y+h,x+w/2,y+h,'C',x-cpw,y+h,x-cpw,y,x+w/2,y,'Z',M,x+w/4,y+h,L,x+w*3/4,y+h,x+w*3/4,y+h*3/2,x+w/4,y+h*3/2,'Z'];},\"square-star\":function(x,y,w,h){var w1=3,h1=5,h2=12;return[M,x+w/2,y,L,x+3*w/2,y,x+3*w/2,y+h,x+w/2,y+h,'Z',M,x,y+h1,L,x+w1*6,y+h1,x+w1,y+h2,x+w1*3,y,x+w1*5,y+h2];},\"heart\":function(x,y,w,h){return[M,x,y,L,x+w,y+h,x,y+h,x+1,y+h*2,'Z'];},\"map\":function(x,y,w,h){return[M,x,y,L,x+w,y,x+w,y+h,x,y+h,'Z'];}}\nextend(Highstock.Renderer.prototype.symbols,mapScatterSymbols);var panAndZoomIcon={'panLeftIcon':function(x,y,w,h){return[M,x,y+h/2,L,x+w,y,'Z',M,x,y+h/2,L,x+w,y+h,'Z'];},'panRightIcon':function(x,y,w,h){return[M,x,y,L,x+w,y+h/2,'Z',M,x,y+h,L,x+w,y+h/2,'Z'];},'panTopIcon':function(x,y,w,h){return[M,x+w/2,y,L,x,y+h,'Z',M,x+w/2,y,L,x+w,y+h,'Z'];},'panBottomIcon':function(x,y,w,h){return[M,x+w/2,y+h,L,x,y,'Z',M,x+w/2,y+h,L,x+w,y,'Z'];},'zoomInIcon':function(x,y,w,h){return[M,x,y+h/2,L,x+w,y+h/2,'Z'];},'zoomOutIcon':function(x,y,w,h){return[M,x,y+h/2,L,x+w,y+h/2,'Z',M,x+w/2,y,L,x+w/2,y+h,'Z'];},'resetZoomIcon':function(x,y,w,h){return[M,x+w/3,y,L,x,y,x,y+h/3,'Z',M,x,y+2*h/3,L,x,y+h,x+w/3,y+h,'Z',M,x+2*w/3,y+h,L,x+w,y+h,x+w,y+2*h/3,'Z',M,x+w,y+h/3,L,x+w,y,x+2*w/3,y,'Z',M,x+w/4,y+h/4,L,x+3*w/4,y+h/4,x+3*w/4,y+3*h/4,x+w/4,y+3*h/4,'Z'];},'zoomZoomIcon':function(x,y,w,h){return[M,x,y,L,x,y,'Z'];}}\nextend(Highstock.Renderer.prototype.symbols,panAndZoomIcon);defaultOptions.panAndZoom={controls:{pan:{buttons:{panLeftButton:{symbol:'panLeftIcon',x:-52,y:30,onclick:function(){this.panAndZoom.pan(15,0);}},panRightButtton:{symbol:'panRightIcon',x:-8,y:30,onclick:function(){this.panAndZoom.pan(-15,0);}},panTopButton:{symbol:'panTopIcon',x:-30,y:10,onclick:function(){this.panAndZoom.pan(0,15);}},panBottomButton:{symbol:'panBottomIcon',x:-30,y:52,onclick:function(){this.panAndZoom.pan(0,-15);}},resetButton:{symbol:'resetZoomIcon',x:-30,y:30,onclick:function(){this.panAndZoom.resetZoom();}}}},zoom:{buttons:{zoomOutButton:{symbol:'zoomOutIcon',_id:'zoomOut',x:-30,y:85,onclick:function(){var panAndZoom=this.panAndZoom,scale=2;panAndZoom.zoom(scale);panAndZoom.syZoomZoom(\"zoomOut\",scale);}},zoomInButton:{symbol:'zoomInIcon',_id:'zoomIn',x:-30,y:245,onclick:function(){var panAndZoom=this.panAndZoom,scale=1/2;panAndZoom.zoom(scale);panAndZoom.syZoomZoom(\"zoomIn\",scale);}},zoomZoomButton:{symbol:'zoomZoomIcon',_id:'zoomZoom',x:-32,y:227,onclick:function(){;}}},mini:true}},buttonOptions:{align:'right',backgroundColor:hash('linearGradient',{x1:0,y1:0,x2:0,y2:1},'stops',[[0,'#FEFEFE'],[0.5,'#CCC']\n[1,'#E6DBDB']]),borderColor:'#666',borderRadius:2,borderWidth:1,height:16,hoverBorderColor:'rgb(248,6,6)',hoverSymbolFill:'#ffffff',hoverSymbolStroke:'#000000',symbolFill:'none',symbolSize:6,symbolStroke:'#000000',symbolStrokeWidth:1,symbolX:8,symbolY:8,verticalAlign:'top',width:18,y:10},panBoxOption:{x:-76,y:1,buttonWidth:74,buttonHeight:74,borderRadius:5,backgroundColor:\"rgba(248,248,248,0.4)\",borderWidth:1,stroke:\"#F8F8F8\",x2:30,y2:90,buttonWidth2:35,buttonHeight2:155},zoomBoxOption:{x:-57,y:79,buttonWidth:35,buttonHeight:190,borderRadius:5,backgroundColor:\"rgba(248,248,248,0.4)\",borderWidth:1,stroke:\"#F8F8F8\"},zoomZoomOption:{x:-43.5,y:107,buttonWidth:7,buttonHeight:130,borderRadius:1,backgroundColor:hash('linearGradient',{x1:0,y1:0,x2:0,y2:1},'stops',[[0,'#DDD'],[1,'#FFF']]),borderWidth:1,stroke:\"#AAAAAA\"},enabled:true,enableMouse:true,enableControl:true,backgroundColor:null,borderColor:null,borderWidth:0,borderRadius:5,width:82,height:108,align:'right',verticalAlign:'top',x:-10,y:10};var panAndZoom=function(chart){this.chart=chart;this.init();};panAndZoom.prototype={init:function(){var chart=this.chart,renderer=chart.renderer,options=chart.options,optionsPanAndZoom=options.panAndZoom,controls=optionsPanAndZoom.controls,panAndZoom=this;if(!optionsPanAndZoom.enabled||!(optionsPanAndZoom.enableMouse||optionsPanAndZoom.enableControl))\nreturn;function addButton(options,boxContainer){var btnOptions=merge(optionsPanAndZoom.buttonOptions,options),onclick=btnOptions.onclick,buttonWidth=btnOptions.width,buttonHeight=btnOptions.height,box,symbol,button,borderWidth=btnOptions.borderWidth,boxAttr={stroke:btnOptions.borderColor},symbolAttr={stroke:btnOptions.symbolStroke,fill:btnOptions.symbolFill},symbolSize=btnOptions.symbolSize||12;if(!this.panAndZoomSVGElements){this.panAndZoomSVGElements=[];}\nif(!this.MoveZoomEle){this.MoveZoomEle=[];}\nif(btnOptions.enabled===false){return;}\nfunction revert(){symbol.attr(symbolAttr);box.attr(boxAttr);}\nif(btnOptions._id==\"zoomZoom\"){buttonWidth=20;buttonHeight=10;}\nbox=renderer.rect(0,0,buttonWidth,buttonHeight,btnOptions.borderRadius,borderWidth).align(btnOptions,false,boxContainer).attr(extend({fill:btnOptions.backgroundColor,'stroke-width':borderWidth,zIndex:2},boxAttr)).add(boxContainer).shadow(true);button=renderer.rect(0,0,buttonWidth,buttonHeight,0).align(btnOptions,false,boxContainer).attr({id:btnOptions._id,fill:'rgba(255, 255, 255, 0.001)',zIndex:4}).css({cursor:'pointer'}).on('mouseover',function(){symbol.attr({stroke:btnOptions.hoverSymbolStroke});box.attr({stroke:btnOptions.hoverBorderColor});}).on('mouseout',revert).on(hasTouch?'touchstart':'click',revert).add(boxContainer);button.on(hasTouch?'touchstart':'click',function(e){panAndZoom.zoomZoom(e.srcElement.id);onclick.apply(chart,arguments);});symbol=renderer.symbol(btnOptions.symbol,btnOptions.symbolX-(symbolSize/2),btnOptions.symbolY-(symbolSize/2),symbolSize,symbolSize).align(btnOptions,true,boxContainer).attr(extend(symbolAttr,{'stroke-width':btnOptions.symbolStrokeWidth||1,zIndex:3})).add(boxContainer);this.panAndZoomSVGElements.push(box,button,symbol);if(btnOptions._id==\"zoomZoom\"){this.MoveZoomEle.push(box,button,symbol);}};if(optionsPanAndZoom.enabled){if(optionsPanAndZoom.enableControl){var panAndZoomGroup,panAndZoomBoxAttr={fill:optionsPanAndZoom.backgroundColor,'stroke-width':optionsPanAndZoom.borderWidth,stroke:optionsPanAndZoom.borderColor,zIndex:20,width:optionsPanAndZoom.width,height:optionsPanAndZoom.height},panBoxOption=optionsPanAndZoom.panBoxOption,zoomBoxOption=optionsPanAndZoom.zoomBoxOption,zoomZoomOption=optionsPanAndZoom.zoomZoomOption,panBox,zoomBox,buttomBox=panBox,zoomZoomBox;panAndZoomGroup=renderer.g('pan-and-zoom').align(optionsPanAndZoom,true).attr(panAndZoomBoxAttr).add();panBox=renderer.rect(panBoxOption.x,panBoxOption.y,panBoxOption.buttonWidth,panBoxOption.buttonHeight,panBoxOption.borderRadius,panBoxOption.borderWidth).align({align:'right'},true,panAndZoomGroup).attr({fill:panBoxOption.backgroundColor,'stroke-width':panBoxOption.borderWidth,zIndex:1,stroke:panBoxOption.stroke}).add(panAndZoomGroup);zoomBox=renderer.rect(zoomBoxOption.x,zoomBoxOption.y,zoomBoxOption.buttonWidth,zoomBoxOption.buttonHeight,zoomBoxOption.borderRadius,zoomBoxOption.borderWidth).align({align:'right'},true,panAndZoomGroup).attr({fill:zoomBoxOption.backgroundColor,'stroke-width':zoomBoxOption.borderWidth,zIndex:1,stroke:zoomBoxOption.stroke}).add(panAndZoomGroup);zoomZoomBox=renderer.rect(zoomZoomOption.x,zoomZoomOption.y,zoomZoomOption.buttonWidth,zoomZoomOption.buttonHeight,zoomZoomOption.borderRadius,zoomZoomOption.borderWidth).align({align:'right'},true,panAndZoomGroup).attr({fill:zoomZoomOption.backgroundColor,'stroke-width':zoomZoomOption.borderWidth,zIndex:1,stroke:zoomZoomOption.stroke}).add(panAndZoomGroup);for(var cn in controls){var buttons=controls[cn].buttons;for(var bn in buttons){addButton.call(this,buttons[bn],panAndZoomGroup);}}\nthis.panAndZoomSVGElements.push(panAndZoomGroup);}\nif(optionsPanAndZoom.enableMouse){this.setDomEvents();}\nvar that=this;addEvent(chart,'destroy',function destroyPanAndZoom(){that.destroy();});}},zoomZoom:function(zoomKey,scale){var panAndZoom=this,chart=this.chart,options=chart.options,optionsPanAndZoom=options.panAndZoom,zoomZoomOption=optionsPanAndZoom.zoomZoomOption,trasY=optionsPanAndZoom.buttonOptions.y||0\nminY=zoomZoomOption.y,maxY=minY+zoomZoomOption.buttonHeight-10,zoomLength=zoomZoomOption.buttonHeight/3;if(scale>4)scale=4;var chartY=maxY-(scale-1)*zoomLength+trasY;if(chartY>maxY){chartY=maxY;}\nif(chartY<minY){chartY=minY;}\nif(zoomKey==\"zoomOut\"||zoomKey==\"zoomIn\"){for(v in panAndZoom.MoveZoomEle){var el=panAndZoom.MoveZoomEle[v];el.attr({y:chartY});}}},setDomEvents:function(){var chart=this.chart,panAndZoom=this;var getNewCenter=function(anchorPoint,scale){var w=chart.plotWidth,h=chart.plotHeight,ax=anchorPoint.x,ay=anchorPoint.y;var newCx=ax-ax/scale+w/scale/2;var newCy=ay-ay/scale+h/scale/2;return{x:newCx,y:newCy};}\nvar mouseDown=function(e){if(hasTouch){chart.container.onmousedown(e);}\nif(e.srcElement.id==\"zoomZoom\"){panAndZoom.monveZoomZoom=true;}else{panAndZoom.monveZoomZoom=false;}\npanAndZoom.startX=chart.tracker.mouseDownX;panAndZoom.startY=chart.tracker.mouseDownY;var originalE=e.originalEvent;if(originalE&&originalE.touches&&originalE.touches.length>1){var touch1=chart.tracker.normalizeMouseEvent(originalE.touches.item(0)),touch2=chart.tracker.normalizeMouseEvent(originalE.touches.item(1));panAndZoom.touches=[{startX:touch1.chartX,startY:touch1.chartY},{startX:touch2.chartX,startY:touch2.chartY}];panAndZoom.scale=originalE.scale;}}\nvar mouseMove=function(e){if(!chart.mouseIsDown)return;var tracker=chart.tracker;var originalE=tracker.normalizeMouseEvent(e);var chartX=originalE.chartX,chartY=originalE.chartY,isOutsidePlot=!chart.isInsidePlot(chartX-chart.plotLeft,chartY-chart.plotTop);if(panAndZoom.monveZoomZoom){var　options=chart.options,optionsPanAndZoom=options.panAndZoom,trasY=optionsPanAndZoom.buttonOptions.y||0,chartY=chartY-trasY,zoomZoomOption=optionsPanAndZoom.zoomZoomOption,minY=zoomZoomOption.y,maxY=minY+zoomZoomOption.buttonHeight-10;if(chartY<minY){chartY=minY;}else if(chartY>maxY){chartY=maxY;}\nfor(v in panAndZoom.MoveZoomEle){var el=panAndZoom.MoveZoomEle[v];el.attr({y:chartY});}\nreturn;}\nif(e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>1){var touch1=tracker.normalizeMouseEvent(e.originalEvent.touches.item(0)),touch2=tracker.normalizeMouseEvent(e.originalEvent.touches.item(1)),scale=e.originalEvent.scale,zoomFactor=scale/panAndZoom.scale;var lastTouch1=panAndZoom.touches[0],lastTouch2=panAndZoom.touches[1],lastCx=(lastTouch1.startX+lastTouch2.startX)/2,lastCy=(lastTouch1.startY+lastTouch2.startY)/2,currentCx=(touch1.chartX+touch2.chartX)/2,currentCy=(touch1.chartY+touch2.chartY)/2,dx=currentCx-lastCx,dy=currentCy-lastCy;var anchorPoint={x:lastCx-chart.plotLeft,y:lastCy-chart.plotTop};var clickedInside=chart.isInsidePlot(anchorPoint.x,anchorPoint.y);if(clickedInside){var newC=getNewCenter(anchorPoint,zoomFactor);var newCenter={x:(newC.x-dx),y:(newC.y-dy)};panAndZoom.zoom(zoomFactor,newCenter);panAndZoom.touches=[{startX:touch1.chartX,startY:touch1.chartY},{startX:touch2.chartX,startY:touch2.chartY}];panAndZoom.scale=scale;}\ne.originalEvent.preventDefault();return;}\nif(isOutsidePlot){if(chartX<chart.plotLeft){chartX=chart.plotLeft;}else if(chartX>chart.plotLeft+chart.plotWidth){chartX=chart.plotLeft+chart.plotWidth;}\nif(chartY<chart.plotTop){chartY=chart.plotTop;}else if(chartY>chart.plotTop+chart.plotHeight){chartY=chart.plotTop+chart.plotHeight;}}\nif(chart.mouseIsDown){var mouseDownX=panAndZoom.startX,mouseDownY=panAndZoom.startY,hasDragged=Math.sqrt(Math.pow(mouseDownX-chartX,2)+\nMath.pow(mouseDownY-chartY,2));if(hasDragged>5){var clickedInside=chart.isInsidePlot(tracker.mouseDownX-chart.plotLeft,tracker.mouseDownY-chart.plotTop);if(clickedInside){panAndZoom.pan(chartX-mouseDownX,chartY-mouseDownY);panAndZoom.startX=chartX;panAndZoom.startY=chartY;}}}}\nvar mouseWheel=function(e){var originalE=e.originalEvent,delta=originalE.detail?(-40*originalE.detail):originalE.wheelDelta,scale=(delta>0?2:1/2),zoomKey=(delta>0?\"zoomOut\":\"zoomIn\");originalE=chart.tracker.normalizeMouseEvent(originalE);e.preventDefault();if(Math.abs(delta/120)>1){return;}\nvar anchorPoint={x:originalE.chartX-chart.plotLeft,y:originalE.chartY-chart.plotTop};var clickedInside=chart.isInsidePlot(anchorPoint.x,anchorPoint.y);if(clickedInside){var newC=getNewCenter(anchorPoint,scale);panAndZoom.zoom(scale,newC);panAndZoom.syZoomZoom(zoomKey,scale);}}\nvar mouseUp=function(e){if(panAndZoom.monveZoomZoom){var tracker=chart.tracker,originalE=tracker.normalizeMouseEvent(e),chartY=originalE.chartY,options=chart.options,optionsPanAndZoom=options.panAndZoom,trasY=optionsPanAndZoom.buttonOptions.y||0,chartY=chartY-trasY,zoomZoomOption=optionsPanAndZoom.zoomZoomOption,minY=zoomZoomOption.y,maxY=minY+zoomZoomOption.buttonHeight-10,zoomLength=zoomZoomOption.buttonHeight/3,zoomFactor;if(chartY>=maxY){panAndZoom.lastZoomFactor=1;panAndZoom.resetZoom();return;}else if(chartY<=minY){zoomFactor=4;}else{zoomFactor=1+(maxY-chartY)/zoomLength;};panAndZoom.zoom(zoomFactor/(panAndZoom.lastZoomFactor||1));panAndZoom.lastZoomFactor=zoomFactor}}\naddEvent(chart.container,'mousedown',mouseDown);addEvent(chart.container,'mousemove',mouseMove);addEvent(chart.container,'mouseup',mouseUp);addEvent(chart.container,'mousewheel DOMMouseScroll',mouseWheel);if(hasTouch){addEvent(chart.container,'touchstart',mouseDown);addEvent(chart.container,'touchmove',mouseMove);}},syZoomZoom:function(zoomKey,scale){var panAndZoom=this;var roomFactor=scale*(panAndZoom.lastZoomFactor||1);panAndZoom.lastZoomFactor=roomFactor>4?4:((roomFactor<1)?1:roomFactor);if(panAndZoom.lastZoomFactor==1){panAndZoom.resetZoom();}else{panAndZoom.zoomZoom(zoomKey,panAndZoom.lastZoomFactor);}},destroy:function(){var chart=this.chart,elem;if(this.panAndZoomSVGElements){for(i=0;i<this.panAndZoomSVGElements.length;i++){elem=this.panAndZoomSVGElements[i];elem.onclick=elem.ontouchstart=null;this.panAndZoomSVGElements[i]=elem.destroy();}}\nif(chart.container){removeEvent(chart.container,'mousedown');removeEvent(chart.container,'mousemove');removeEvent(chart.container,'mousewheel DOMMouseScroll');removeEvent(chart.container,'touchstart');removeEvent(chart.container,'touchmove');removeEvent(chart.container,'mouseup');}},pan:function(dx,dy){var chart=this.chart,hasZoomed=false,optionsChart=chart.options.chart;if(chart!=null){each(chart.axes,function(axis){var newMin,mewMax;if(axis.isXAxis){newMin=axis.translate(-dx,true);newMax=axis.translate(chart.plotWidth-dx,true);axis.setExtremes(newMin,newMax,false);hasZoomed=true;}else if(!axis.isXAxis){newMin=axis.translate(-dy,true);newMax=axis.translate(chart.plotHeight-dy,true);axis.setExtremes(newMin,newMax,false);hasZoomed=true;}});if(hasZoomed){chart.redraw(Highstock.pick(optionsChart.animation,chart.pointCount<10));}}},resetZoom:function(){var chart=this.chart,optionsChart=chart.options.chart;each(chart.axes,function(axis){axis.setExtremes(null,null,false);});chart.redraw(Highstock.pick(optionsChart.animation,chart.pointCount<100));this.lastZoomFactor=1;var options=chart.options,optionsPanAndZoom=options.panAndZoom,zoomZoomOption=optionsPanAndZoom.zoomZoomOption,minY=zoomZoomOption.y,maxY=minY+zoomZoomOption.buttonHeight-10;for(v in this.MoveZoomEle){var el=this.MoveZoomEle[v];el.attr({y:maxY});}},zoom:function(zoomFactor,newCenter){var chart=this.chart,optionsChart=chart.options.chart,hasZoomed;if(newCenter==undefined||newCenter==null){newCenter={x:chart.plotWidth/2,y:chart.plotHeight/2}}\nif(zoomFactor==0||zoomFactor==1)return;var dx=chart.plotWidth/zoomFactor/2,dy=chart.plotHeight/zoomFactor/2;var pixelRange={maxX:newCenter.x+dx,minX:newCenter.x-dx,maxY:newCenter.y+dy,minY:newCenter.y-dy}\nvar valR={minX:0,maxX:0,minY:0,maxY:0};var canZoomed=true;each(chart.axes,function(axis){if(axis.isXAxis){valR.minX=axis.translate(pixelRange.minX,true);valR.maxX=axis.translate(pixelRange.maxX,true);var minRange=axis.minRange||(axis.options.max-axis.options.min)/10||50,maxRange=axis.maxRange||(axis.options.max-axis.options.min+300)||1000;if(minRange>(valR.maxX-valR.minX)||maxRange<(valR.maxX-valR.minX)){canZoomed=false;}}else{valR.minY=axis.translate(pixelRange.minY,true);valR.maxY=axis.translate(pixelRange.maxY,true);var minRange=axis.minRange||(axis.options.max-axis.options.min)/5||50,maxRange=axis.maxRange||(axis.options.max-axis.options.min+200)||1000;if(minRange>(valR.maxY-valR.minY)||maxRange<(valR.maxY-valR.minY)){canZoomed=false;}}});each(chart.axes,function(axis){if(canZoomed){if(axis.isXAxis){axis.setExtremes(valR.minX,valR.maxX,false);}else{axis.setExtremes(valR.minY,valR.maxY,false);}\nhasZoomed=true;}});if(hasZoomed){chart.redraw(Highstock.pick(optionsChart.animation,chart.pointCount<100));}}}\nHighstock.PanAndZoom=panAndZoom;})(Highstock);","js/freequery/lang/Class.js":"\nvar Class=(function(UNDEF){var initializing=false,regex=/xyz/.test(function(){'xyz';})?/\\b_super\\b/:/.*/,fn=function(){},isFn=function(fn){return(typeof fn==='function');},removeItem=function(array,item){for(var i=0,l=array.length;i<l;i++){if(array[i]===item){array.splice(i,1);i--;}}},getListener=function(obj,type,force){var allListeners=obj.__allListeners||force&&(obj.__allListeners={});type=type.toLowerCase();return allListeners&&(allListeners[type]||force&&(allListeners[type]=[]));},extend=function(obj){var _super=this.prototype,proto,name,isOverwriting;initializing=true;proto=new this();initializing=false;for(name in obj){isOverwriting=isFn(obj[name])&&isFn(_super[name])&&regex.test(obj[name]);proto[name]=isOverwriting?(function(name,fn){return function(){var tmp=this._super,ret;this._super=_super[name];ret=isFn(fn)?fn.apply(this,arguments):void(0);this._super=tmp;return ret;};})(name,obj[name]):obj[name];}\nfunction Klass(){if(!initializing&&isFn(this.init)){this.init.apply(this,arguments);}}\nKlass.prototype=proto;Klass.constructor=Klass;Klass.extend=arguments.callee;return Klass;},Class=extend.call(fn,{on:function(type,listener){getListener(this,type,true).push(listener);},un:function(type,listener){var listeners=getListener(this,type);listeners&&removeItem(listeners,listener);},fire:function(type){var listeners=getListener(this,type),r=null,t,k;if(listeners){k=listeners.length;while(k--){t=listeners[k].apply(this,arguments);if(t!==UNDEF){r=t;}}}\nif(t=this['on'+type.toLowerCase()]){r=t.apply(this,arguments);}\nreturn r;}});return Class;})();","js/smartbi/chart/AbstractChart.js":"\nvar AbstractChart=Class.extend({init:function(chartType,className){this.chartType=chartType;this.className=className;},destroy:function(){delete this.chartType;delete this.className;},getChartType:function(){return this.chartType;},setChartType:function(chartType){this.chartType=chartType;},getChart:function(){return null;},getOptions:function(){return null;},getSVG:function(){return null;},refresh:function(container,chartOptions){},resizeTo:function(width,height){},pointClick:function(pointObj,arg1,arg2,arg3){var e=window.event;this.fire('PointClick',pointObj,this,e);},onBeforeRenderer:function(){this.fire('BeforeRenderer',this);},onAfterRenderer:function(){this.fire('AfterRenderer',this);},preprocessServerChartOptions:function(chartOptions){}});","js/smartbi/chart/Chart.js":"\nfunction doFusionchartsPointClick(pointJson){var fusionChart,smartbiChart,scope;if(pointJson){fusionChart=FusionCharts(pointJson.chartId);if(pointJson.hasSlice){fusionChart.togglePieSlice(pointJson.rowIndex);}\nif(fusionChart){scope=smartbiChart=fusionChart.getSmartbiChart();if(scope)\nscope.fire('PointClick',pointJson,scope);}}}\nfunction setHighchartsOptions(){if(typeof Highstock=='undefined'||!Highstock){return;}\nHighstock.setOptions({credits:{text:''},loading:{labelStyle:{top:'45%',backgroundColor:'#ccc',padding:'2px 5px'},style:{backgroundColor:null}},plotOptions:{line:{dataGrouping:{dateTimeLabelFormats:{second:['%Y-%m-%d<br/>%H:%M:%S','%Y-%m-%d<br/>%H:%M:%S','%Y-%m-%d<br/>%H:%M:%S'],minute:['%Y-%m-%d<br/>%H:%M','%Y-%m-%d<br/>%H:%M','%Y-%m-%d<br/>%H:%M'],hour:['%Y-%m-%d<br/>%H','%Y-%m-%d<br/>%H','%Y-%m-%d<br/>%H'],day:['%Y-%m-%d','%Y-%m-%d','%Y-%m-%d'],week:['%Y-%m-%d','%Y-%m-%d','%Y-%m-%d'],month:['%Y-%m','%Y-%m','%Y-%m'],year:['%Y','%Y','%Y']}}}},xAxis:{dateTimeLabelFormats:{second:'%Y-%m-%d<br/>%H:%M:%S',minute:'%Y-%m-%d<br/>%H:%M',hour:'%Y-%m-%d<br/>%H',day:'%Y-%m-%d',week:'%Y-%m-%d',month:'%Y-%m',year:'%Y'}}});}\nvar processorTypes={},chartIdIndex=0;var HighchartsSetOptions=false;var Chart=AbstractChart.extend({init:function(viewOptions,chartType,chartClassName){this._super(chartType,chartClassName);if(arguments&&arguments.length>0){this.renderOnBrowser=arguments[0].renderOnBrowser;}\nthis._private={_chartObj:null,_options:null};},destroy:function(){if(this.getChart()){this._private._chartObj.options.containerElement=null;this._private._chartObj.dispose();this._private._chartObj=null;}\nthis._private._options=null;this._super();},getChart:function(){return this._private._chartObj;},setChart:function(hcChart){this._private._chartObj=hcChart;},getOptions:function(){return this._private._options;},getSVG:function(){var chartType=this.chartType;var chart=this.getChart();if(chartType!='map'&&chartType!='stock'){chart=chart.jsVars.hcObj;}\nif(chart){return chart.container.innerHTML;}\nreturn null;},showLoading:function(message,loadingDiv,conWidth,conHeight){var chartObj=this.getChart();var loadingContainer=null,width=300,height=300;if(loadingDiv&&message){loadingContainer=loadingDiv;width=conWidth||this.lastWidth||300;height=conHeight||this.lastHeight||300;}\nif(chartObj!=null&&message){if(this.useHighcharts()){chartObj.showLoading(message);}else{var loadingContainer=chartObj.ref.parentNode;width=this.lastWidth=chartObj.width;height=this.lastHeight=chartObj.height;}}\nif(loadingContainer){var d=document.createElement(\"DIV\");d.className=\"dashboard_loading\";d.style.textAlign=\"center\";d.style.color=\"blue\";d.style.width=width;d.style.height=height;d.style.left=d.style.top=\"0px\";d.style.position=\"absolute\";var dd=document.createElement(\"DIV\");dd.innerText=message;d.appendChild(dd);if(String(height).indexOf(\"%\")==-1){dd.style.paddingTop=height/2;}else{dd.style.paddingTop=loadingContainer.offsetHeight/2;}\nd.id=\"chartLoadingContainer\";loadingContainer.appendChild(d);}},hideLoading:function(loadingContainer){var chartObj=this.getChart();if(chartObj!=null){if(this.useHighcharts()){chartObj.hideLoading();}else{var p=chartObj.ref.parentNode;p.removeChild(p.lastChild);}}else if(loadingContainer&&loadingContainer.lastChild.id==\"chartLoadingContainer\"){loadingContainer.removeChild(loadingContainer.lastChild);}},refresh:function(container,chartOptions){if(this._private._chartObj){this._private._chartObj.dispose();this._private._chartObj=null;}\nif(!chartOptions.chart)\nchartOptions.chart={};chartOptions=this.mergerDefaultOptions(chartOptions,this.chartType);this._private._options=chartOptions;if(!this.useHighcharts()&&this.renderOnBrowser==false){if(!chartOptions.chart)chartOptions.chart={};chartOptions.chart.renderer=\"javascript\";}\nvar chartWidth=chartOptions.chart.width,chartHeight=chartOptions.chart.height;if(this.renderOnBrowser==true&&chartOptions.chartClientId&&chartOptions.chart.chartStyle==\"image\"){var scope=this;var loadingContainer=container.parentNode;var img=container.img;if(!container.img){img=document.createElement(\"img\");container.appendChild(img);container.img=img;}\nthis.showLoading(\"正在加载静态图片...\",loadingContainer);img.src=\"ImageChartServlet?chartClientId=\"+chartOptions.chartClientId\n+\"&width=\"+chartWidth+\"&height=\"+chartHeight+\"&index=\"+chartIdIndex++;img.onload=function(){scope.hideLoading(loadingContainer);scope.fire('AfterRenderer',scope);img.onload=null;};return;}\nvar OptsProcessor=processorTypes[this.chartType]||OptionsProcessor;var optsProObj=new OptsProcessor();optsProObj.process(this);if(container.img){try{container.removeChild(container.img);}catch(e){}\ncontainer.img=null;}\nif(this.useHighcharts()){if(!HighchartsSetOptions){setHighchartsOptions();HighchartsSetOptions=true;}\nchartOptions.chart[\"renderTo\"]=container;if(this.chartType=='map'){this._private._chartObj=new Highstock.Map(chartOptions);}else{this._private._chartObj=new Highstock.Chart(chartOptions);}}else{if(!chartOptions.chart.swfType)\nreturn;this.renderToContainer=container;var fusionChartsRenderParams={swfUrl:\"chartsswf/\"+chartOptions.chart.swfType+\".swf\",id:(chartOptions.chartex&&chartOptions.chartex.chartId)||\"ChartId\"+chartIdIndex++,width:chartWidth,height:chartHeight,renderer:chartOptions.chart.renderer||\"\",debugMode:chartOptions.chart.debugMode||false};this._private._chartObj=new FusionCharts(fusionChartsRenderParams);optsProObj.attachEvents(this);this._private._chartObj.setChartData(chartOptions,\"json\");optsProObj.processMessages(this);if(chartOptions&&chartOptions.chartex&&chartOptions.chartex.transparent){this._private._chartObj.setTransparent(true);}\nthis._private._chartObj.render(container);}},resizeTo:function(w,h){var chartObj=this._private._chartObj;if(!chartObj){return;}\nif(this.chartType=='stock'){chartObj.setSize(w,h);}else{if(this.chartType=='gauge'){var chartOptions=this._private._options;chartOptions.chart.width=w;chartOptions.chart.height=h;this.refresh(this.renderToContainer,chartOptions);}else{chartObj.resizeTo(w,h);}}},useHighcharts:function(){if(this.chartType=='map'||this.chartType=='stock'){return true;}\nreturn false;},mergerDefaultOptions:function(chartOptions,chartType){if(chartOptions._defaultOptionsSetted){delete chartOptions._defaultOptionsSetted;}else{var defaultOptions=eval(chartType),helper=eval('utils');chartOptions=helper.processDefaultOptions(defaultOptions,chartOptions,chartType,null);}\nreturn chartOptions;},preprocessServerChartOptions:function(chartOptions){var chartType=this.chartType;if(chartType=='map'||chartType==\"stock\"){this.preprocessChartOptions(chartOptions);}else{this.preprocessFusionChartOptions(chartOptions);}},preprocessChartOptions:function(options){if(!options.exporting)\noptions.exporting={};options.exporting.enabled=false;options.chart.animation=false;options.chart.plotBackgroundImage=null;options.chart.forExport=true;if(!options.chart.width){options.chart.width=800;options.chart.height=400;}\nvar series=[];Highstock.each(options.series,function(serie){serie=Highstock.merge(serie,{animation:false,showCheckbox:false,enableMouseTracking:false});if(!serie.isInternal){if(serie&&serie.marker&&/^url\\(/.test(serie.marker.symbol)){serie.marker.symbol='circle';}\nseries.push(serie);}});options.series=series;},preprocessFusionChartOptions:function(options){if(!options.chart){options.chart={};}\nif(!options.chart.width){options.chart.width=800;options.chart.height=400;}\noptions.chart.animation=\"0\";var chartLeftMargin=options.chart.chartLeftMargin?options.chart.chartLeftMargin:0;options.chart.chartLeftMargin=parseInt(chartLeftMargin)+6;}});var OptionsProcessor=function(){var win=window,doc=document,userAgent=navigator.userAgent,SVG_NS='http://www.w3.org/2000/svg',isIE=/msie/i.test(userAgent)&&!win.opera,hasSVG=!!doc.createElementNS&&!!doc.createElementNS(SVG_NS,'svg').createSVGRect,useCanVG=!hasSVG&&!isIE&&!!doc.createElement('canvas').getContext;this.isIE=isIE;this.vml=!hasSVG&&!useCanVG;this.hasSVG=hasSVG;this.useCanVG=useCanVG;this.colors=[\"#AFD8F8\",\"#F6BD0F\",\"#8BBA00\",\"#FF8E46\",\"#008E8E\",\"#D64646\",\"#8E468E\",\"#588526\",\"#B3AA00\",\"#008ED6\",\"#9D080D\",\"#A186BE\",\"#CC6600\",\"#FDC689\",\"#ABA000\",\"#F26D7D\",\"#FFF200\",\"#0054A6\",\"#F7941C\",\"#CC3300\",\"#006600\",\"#663300\",\"#6DCFF6\"];this.waterfallColors=[\"#0054A6\",\"#8BBA00\",\"#F6BD0F\",\"#008E8E\"];this.allSwfName={\"scatter\":{\"\":\"Scatter\"},\"bubble\":{\"\":\"Bubble\"},\"gauge\":{\"\":\"AngularGauge\"},\"radar\":{\"\":\"Radar\"},\"waterfall\":{\"\":\"Waterfall2D\"},\"pie\":{\"\":\"Pie2D\",is3D:\"Pie3D\"},\"donut\":{\"\":\"Doughnut2D\",is3D:\"Doughnut3D\"},\"line\":{\"\":\"MSLine\",isSpline:\"MSSpline\",isScroll:\"ScrollLine2D\",isStep:\"MSStepLine\"},\"area\":{\"\":\"MSArea\",isStacked:\"StackedArea2D\",isScroll:\"ScrollArea2D\",isSpline:\"MSSplineArea\"},\"bar\":{\"\":\"MSBar2D\",is3D:\"MSBar3D\",isStacked:\"StackedBar2D\",isStackedis3D:\"StackedBar3D\"},\"column\":{\"\":\"MSColumn2D\",is3D:\"MSColumn3D\",isStacked:\"StackedColumn2D\",isStackedis3D:\"StackedColumn3D\",isScroll:\"ScrollColumn2D\",isScrollisStacked:\"ScrollStackedColumn2D\"},\"combination\":{\"\":\"MSCombi2D\",is3D:\"MSColumnLine3D\",isScroll:\"ScrollCombi2D\"},\"true3dcombination\":{\"\":\"MSCombi3D\"},\"dualycombination\":{\"\":\"MSCombiDY2D\",is3D:\"MSColumn3DLineDY\",isScroll:\"ScrollCombiDY2D\",isStackedis3D:\"StackedColumn3DLineDY\",isStacked:\"MSStackedColumn2DLineDY\"}};};OptionsProcessor.prototype.process=function(chart){this.processOptions(chart);};OptionsProcessor.prototype.processOptions=function(chart){var chartOptions=chart.getOptions();if(!chartOptions.chart)\nchartOptions.chart={};if(!chartOptions.chartex)\nchartOptions.chartex={};if(chartOptions.other){var obj=chartOptions.other;if(!jQuery.isPlainObject(obj)){var json=null;try{json=eval('('+obj+')');}catch(e){}\nif(jQuery.isPlainObject(json)){obj=json;}else{alert('“扩展属性”的代码不是合法的JSON格式！');obj={};}}\njQuery.extend(true,chartOptions,obj);}\nthis.processType(chart);this.processData(chart);this.processAxis(chart);this.processAlpha(chart);this.processDataLabels(chart);this.processTooltip(chart);this.processSeriesSetting(chart);this.processLegend(chart);this.processStyle(chart);this.processOther(chart);if(chartOptions.colors){delete chartOptions.colors;}\nif(chartOptions.syAxis){delete chartOptions.syAxis;}\nif(chartOptions.parentInfo){delete chartOptions.parentInfo;}};OptionsProcessor.prototype.processType=function(chart){var chartOptions=chart.getOptions(),chartEx=chartOptions.chartex,chartObj=chartOptions.chart,chartType=chart.chartType||\"line\",swfType,allSwfName,typeOptions=\"\",suportStackedTypes=\"area,bar,column,dualycombination,\",suport3DTypes=\"pie,donut,bar,column,combination,dualycombination,\",suportLineEffectTypes=\"area,line,\",suportScrollTypes=\"line,area,column,combination,dualycombination,\";if(chartObj.swfType!=null&&chartObj.swfType!=\"\")\nreturn;allSwfName=this.allSwfName;chartType=chartType.toLowerCase();if(chartEx.isScroll==\"1\"&&suportScrollTypes.indexOf(chartType+\",\")>=0){typeOptions=typeOptions+\"isScroll\";}\nif(suportStackedTypes.indexOf(chartType+\",\")>=0){if(chartEx.isStacked==\"1\"){chartObj.showPercentInToolTip=\"0\";typeOptions=typeOptions+\"isStacked\";}else if(chartEx.isStacked==\"2\"){chartObj.stack100Percent=\"1\";chartObj.showPercentInToolTip=\"1\";typeOptions=typeOptions+\"isStacked\";}}\nif(chartEx.is3D==\"1\"&&suport3DTypes.indexOf(chartType+\",\")>=0){typeOptions=typeOptions+\"is3D\";}\nif(suportLineEffectTypes.indexOf(chartType+\",\")>=0){if(chartEx.lineEffect==\"spline\"){typeOptions=typeOptions+\"isSpline\";}else if(chartEx.lineEffect==\"step\"&&chartType==\"line\"){typeOptions=typeOptions+\"isStep\";}}\nif(!allSwfName[chartType]){alert(\"不存在该类型的图\"+chartType);return;}\nswfType=allSwfName[chartType][typeOptions]||allSwfName[chartType][\"\"];chartObj.swfType=swfType;};OptionsProcessor.prototype.processAxis=function(chart){this._processXAxis(chart);this._processYAxis(chart);};OptionsProcessor.prototype._processXAxis=function(chart){};OptionsProcessor.prototype._processYAxis=function(chart){var chartOptions=chart.getOptions(),chartObj=chartOptions.chart,renderer=chartObj&&chartObj.renderer,chartType=chart.chartType||\"line\";function processYAxisName(axisNameKey,chartObj,sepChar,rotateKey){var axisName=chartObj&&chartObj[axisNameKey];if(axisName){axisName=axisName.replace(/^\\s+|\\s+$/g,\"\");var axisNames=axisName.split(''),len=axisNames.length,r=[];for(var i=0;i<len;i++){var c=axisNames[i];var code=c.charCodeAt(0);r.push(c);if(code>255){r.push(sepChar)}else if(c==' '){r.push(sepChar);}else if(code<=255&&(i<len-1&&axisNames[i+1].charCodeAt(0)>255)){r.push(sepChar);}}\naxisName=r.join('');if(axisName.indexOf(sepChar)>=0){chartObj[rotateKey]=\"0\";}\nif(r[r.length-1]==sepChar){r.pop();axisName=r.join('');}\nchartObj[axisNameKey]=axisName;}}\nif(chartObj){var sepChar=(renderer==\"javascript\")?\"<br/>\":\"{br}\",rotateKey=\"rotateYAxisName\";if(chartType==\"true3DCombination\"){sepChar=\"\";}\nif(chartType==\"bar\"){rotateKey=\"rotateXAxisName\";processYAxisName(\"xAxisName\",chartObj,sepChar,rotateKey);}else{processYAxisName(\"yAxisName\",chartObj,sepChar,rotateKey);}\nprocessYAxisName(\"PYAxisName\",chartObj,sepChar,rotateKey);processYAxisName(\"SYAxisName\",chartObj,sepChar,rotateKey);}};OptionsProcessor.prototype._getColor=function(colors,index){if(colors&&colors.length>0)\nreturn colors[(index-parseInt((index+1)/colors.length)*colors.length)];return\"#333333\";};OptionsProcessor.prototype._getColorObj=function(input){var rgba=null,pInt=parseInt,COLOR_BLACK='000000';var result=/rgba\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]?(?:\\.[0-9]+)?)\\s*\\)/.exec(input);if(result){rgba=[pInt(result[1]),pInt(result[2]),pInt(result[3]),parseFloat(result[4],10)];var hexColor=\"#\"+(COLOR_BLACK+(rgba[0]<<16|rgba[1]<<8|rgba[2]).toString(16)).slice(-6);return{color:hexColor,alpha:rgba[3]*100};}\nresult=/rgb\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*\\)/.exec(input);if(result){rgba=[pInt(result[1]),pInt(result[2]),pInt(result[3])];var hexColor=\"#\"+(COLOR_BLACK+(rgba[0]<<16|rgba[1]<<8|rgba[2]).toString(16)).slice(-6);return{color:hexColor};}else{result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(input);if(result){return{color:input}}}\nif(input&&input.color){return input;}\nreturn{color:input};}\nOptionsProcessor.prototype._pickValue=function(){var args=arguments;for(var i=0,len=arguments.length;i<len;i++){var v=arguments[i];if(v!==undefined)return v;}}\nOptionsProcessor.prototype._buildJsonObj=function(path,root){if(!root||path==null||path==\"\")return null;var paths=path.split(\".\"),result=root;if(paths.length>0&&root){for(var i=0,len=paths.length;i<len;i++){var pkey=paths[i];if(!result[pkey])result[pkey]={};result=result[pkey];}}\nreturn result;}\nOptionsProcessor.prototype._processAxisTitle=function(axisTitleOptions){};OptionsProcessor.prototype.getYDisplayValue=function(point){};OptionsProcessor.prototype.processAlpha=function(chart){var chartOptions=chart.getOptions(),chartObj=chartOptions.chart,alphas,alpha,newAlphas=\"\";if(chartObj.canvasBorderAlpha&&chartObj.canvasBorderAlpha!=\"\"){alphas=chartObj.canvasBorderAlpha.split(\",\");var len=alphas.length;for(var inx=0;inx<len;inx++){alpha=alphas[inx];alpha=100-parseInt(alpha);newAlphas=newAlphas+alpha;if(inx!=len-1){newAlphas=newAlphas+\",\";}}\nchartObj.canvasBorderAlpha=newAlphas;}}\nOptionsProcessor.prototype.processTooltip=function(chart){var chartOptions=chart.getOptions(),dataset=chartOptions.dataset||chartOptions.data||[],chartex=chartOptions.chartex,chartObj=chartOptions.chart,categories=chartOptions.categories,sets,set,toolTipSepChar;var hcSeries=this._buildJsonObj(\"hcOptions.plotOptions.series\",chartOptions);hcSeries.stickyTracking=true;if(chartObj&&chartObj.renderer==\"javascript\"){if(chartex&&chartex.tooltipCrosshairsWidth){var cWidth=chartex.tooltipCrosshairsWidth-0;if(cWidth>0){var tooltipObj=this._buildJsonObj(\"chartex.hcOptions.tooltip\",chartOptions);var crosshairsObj={};crosshairsObj.color=chartex.tooltipCrosshairsColor||\"#555555\";crosshairsObj.width=cWidth;crosshairsObj.dashStyle=chartex.tooltipCrosshairsDashStyle;var crossDir=chartex.tooltipCrosshairs;switch(crossDir){case\"x\":tooltipObj.crosshairs=crosshairsObj;break;case\"y\":tooltipObj.crosshairs=[null,crosshairsObj];break;case\"xy\":tooltipObj.crosshairs=[crosshairsObj,crosshairsObj];break;default:break;}}}}\nif(chartex&&chartex.onlyDataValueInToolTip==1){for(index in dataset){sets=dataset[index];for(seti in sets.data){set=sets.data[seti];if(set!=null)\nset.tooltext=set.displayValue;}}}else{toolTipSepChar=chartObj.toolTipSepChar?chartObj.toolTipSepChar:'{br}';if(toolTipSepChar=='{br}'){if(chartObj.renderer==\"javascript\"){toolTipSepChar=\"<br>\";}}\nchartObj.toolTipSepChar=toolTipSepChar;if(categories&&categories.length>0){var cateAlias=this._getCategoriesAlis(chart);for(var index=0;index<dataset.length;index++){sets=dataset[index];for(seti in sets.data){set=sets.data[seti];if(set==null)\ncontinue;if(!set.tooltext){var pv=this._pickValue(set.originalDisplayValue,set.displayValue,set.value);set.tooltext=cateAlias+categories[0].category[seti].label+toolTipSepChar\n+sets.seriesName+\":\"+pv;if(chartex&&chartex.showPercent&&pv!=set.percent){set.tooltext=set.tooltext+toolTipSepChar+(set.percent?\"百分比:\"+set.percent:\"\");}}}}}else{for(var index=0;index<dataset.length;index++){set=dataset[index];if(set==null)\ncontinue;if(!set.tooltext){var pv=this._pickValue(set.originalDisplayValue,set.displayValue,set.value);set.tooltext=(set.label?(set.label+toolTipSepChar):\"\")+(pv?pv:\"\");if(chartex&&chartex.showPercent&&pv!=set.percent){set.tooltext=set.tooltext+toolTipSepChar+(set.percent?set.percent:\"\");}}}}}};OptionsProcessor.prototype._getCategoriesAlis=function(chart){var chartOptions=chart.getOptions(),dataset=chartOptions.chartDatas;if(dataset){var fieldList=dataset.fieldList;for(var indx in fieldList){var field=fieldList[indx];if(field.axisType==\"categories\"){return field.alias+\":\";}}}\nreturn\"\";};OptionsProcessor.prototype.processLegend=function(chart){var chartOptions=chart.getOptions(),dataset=chartOptions.dataset;};OptionsProcessor.prototype.processSeriesSetting=function(chart){var chartOptions=chart.getOptions(),colors=(chartOptions.colors&&chartOptions.colors.length>0&&chartOptions.colors)||this.colors,chartObj=chartOptions.chart,chartex=chartOptions.chartex||{},renderer=chartOptions.chart.renderer.toLowerCase(),paletteColors=\"\",plotFillAlpha=\"\",color,alpha,dataset=chartOptions.dataset||chartOptions.data,lineset=chartOptions.lineset;if((lineset&&lineset.length>0)||(dataset&&dataset.dataset&&dataset.dataset.length>0)||(dataset&&dataset.length>0&&dataset[0].dataset)){var newDataset=[];if(dataset&&dataset.dataset&&dataset.dataset.length>0)newDataset=newDataset.concat(dataset);else if(dataset&&dataset.length>0&&dataset[0].dataset){for(var i=0,dlen=dataset.length-1;i<=dlen;i++){var di=dataset[i];if(di&&di.dataset&&di.dataset.length>0){newDataset=newDataset.concat(di.dataset);}}}\nif(lineset&&lineset.length>0)newDataset=newDataset.concat(lineset);dataset=newDataset;}\nif(dataset&&dataset.length>0){var colorIndex=0;var dynamicSymbol=false,symbolIndex=3;if(chartObj.anchorSides){dynamicSymbol=chartObj.anchorSides==\"-1\"?true:false;}\nfor(var i=0,len=dataset.length;i<len;i++){var dataseti=dataset[i];if(dynamicSymbol){dataseti.anchorSides=symbolIndex++;}\nif(!dataseti.color){if(colorIndex>=colors.length){colorIndex=0;}\nvar colorObj=this._getColorObj(colors[colorIndex]);var loopi=0;while(loopi<(colors.length-1)&&(colorObj.color==null||colorObj.color==\"\")){colorIndex++;loopi++;if(colorIndex>=colors.length){colorIndex=0;}\ncolorObj=this._getColorObj(colors[colorIndex]);}\ndataseti.color=colorObj.color;if(colorObj.alpha!=undefined&&colorObj.alpha!=null&&colorObj.alpha!==\"\"){if(chartObj.type==\"bubble\"){dataseti.plotFillAlpha=colorObj.alpha;}else{dataseti.alpha=colorObj.alpha;}}\ncolorIndex++;}}}\nif(chartex&&chartex.dashStyle){var dashStyle=chartex.dashStyle,isJsRenderer=renderer=='javascript';chartObj.lineDashed=(!dashStyle||dashStyle=='Solid')?'0':'1';if(dashStyle=='Solid'){}else if(dashStyle=='ShortDash'){if(isJsRenderer){chartObj.lineDashLen='3';}else{chartObj.lineDashLen='8';chartObj.lineDashGap='5';}}else if(dashStyle=='Dot'){chartObj.lineDashLen='2';if(isJsRenderer){chartObj.lineDashGap='3';}else{chartObj.lineDashGap='5';}}else if(dashStyle=='Dash'){chartObj.lineDashLen='2';}else if(dashStyle=='DashDot'){chartObj.lineDashLen='5';}}\nif(chartObj&&chartObj.drawAnchors==\"1\"){chartObj.anchorAlpha=this._pickValue(chartObj.anchorAlpha,chartObj.alpha,'100');chartObj.anchorBgAlpha=this._pickValue(chartObj.anchorBgAlpha,chartObj.alpha,'100');}else if(chartObj&&chartObj.drawAnchors==\"0\"){chartObj.anchorAlpha='0';chartObj.anchorBgAlpha='0';chartObj.drawAnchors=\"1\";}\nif(chartex.is3D==\"1\"){if(renderer!=\"javascript\"){if(chartObj.canvasBgAlpha&&chartObj.canvasBgAlpha.indexOf&&chartObj.canvasBgAlpha.indexOf(\",\")>=0){chartObj.canvasBgAlpha=chartObj.canvasBgAlpha.split(',')[0];}}}};OptionsProcessor.prototype.processDataLabels=function(chart){var chartOptions=chart.getOptions(),dataset=chartOptions.dataset||chartOptions.data,chartex=chartOptions.chartex,chartObj=chartOptions.chart,sets,set;if(chartObj&&chartObj.labelSepChar=='{br}'){if(chartObj.renderer==\"javascript\"){chartObj.labelSepChar=\"<br>\";}}\nif(chartex&&chartex.showPercent){var decimals=chartObj&&chartObj.decimals||0;var mul=Math.pow(10,decimals);for(index in dataset){sets=dataset[index];for(seti in sets.data){set=sets.data[seti];if(set==null)\ncontinue;if((\"NN\"==chartex.percentValueType&&set.value>=0)||(\"NP\"==chartex.percentValueType&&set.value<=0)){if(chartex.showInDataLable){if(chartex.isStacked==\"2\"&&!set.displayValue){var categoryAll=0;for(var dlen=dataset.length-1;dlen>=0;dlen--){var dsItem=dataset[dlen];if(dsItem&&dsItem.data&&dsItem.data.length>(seti-0)){var dsItemDi=dsItem.data[seti];if(dsItemDi!==null&&dsItemDi!==undefined&&dsItemDi.value!==null&&dsItemDi.value!==undefined){categoryAll+=Math.abs(dsItemDi.value-0);}}}\nif(categoryAll>0&&set.value!=null){set.displayValue=Math.round(100*mul*Math.abs(set.value-0)/categoryAll)/mul+\"%\";}}\nset.originalDisplayValue=set.originalDisplayValue||set.displayValue||'';if(chartex.showPercentPosition==\"replace\"){set.displayValue=set.percent;}else if(chartex.showPercentPosition==\"after\"){set.displayValue=(set.displayValue?(set.displayValue+\";\"):'')+set.percent;}}}else{set.displayValue=\" \";}}}}};OptionsProcessor.prototype.processData=function(chart){var chartOptions=chart.getOptions();if(chartOptions.chartex){var dp=chartOptions.chartex;if(dp.showPercent){var percentValueType=dp.percentValueType;var showInDataLable=dp.showInDataLable;var showPercentPosition=dp.showPercentPosition;var series=chartOptions.dataset;if(series&&series.length>0){for(var i in series){var seriesi=series[i];if(seriesi.data&&seriesi.data.length>0){var seriesTotal=0;for(var di=0,dlen=seriesi.data.length;di<dlen;di++){var datai=seriesi.data[di];if((\"NN\"==percentValueType&&datai.value>=0)||(\"NP\"==percentValueType&&datai.value<0)){seriesTotal+=datai.value;}}\nseriesi.yTotal=seriesTotal;seriesi.percentValueType=percentValueType;var point,percent;for(pi in seriesi.data){point=seriesi.data[pi];percent=this._getPointPercent(point,seriesi);if(percent!=null){point.percent=percent+\"%\";}}}}}}}};OptionsProcessor.prototype._getPointPercent=function(point,series){if(point.percent)\nreturn point.percent;if(series.yTotal&&series.yTotal!=0){if((\"NN\"==series.percentValueType&&point.value>=0)||(\"NP\"==series.percentValueType&&point.value<=0)){var percent=Math.round(100*100*point.value/series.yTotal)/100;point.percent=percent;return percent;}}\nreturn null;};OptionsProcessor.prototype.attachEvents=function(chart){var scope=chart,_chartObj=chart.getChart();_chartObj.getSmartbiChart=function(){return scope;};scope.fire('BeforeRenderer',scope);_chartObj.addEventListener(\"DrawComplete\",function(eventObject,argumentsObject){scope.fire('AfterRenderer',scope);});};OptionsProcessor.prototype.processMessages=function(chart){var scope=chart,_chartObj=chart.getChart();_chartObj.configure({\"ChartNoDataText\":\"没有数据\",\"LoadDataErrorText\":\"读取数据错误\",\"InvalidXMLText\":\"数据格式错误\"});};OptionsProcessor.prototype.processStyle=function(chart){var chartOptions=chart.getOptions(),chartex=chartOptions.chartex,styles=chartOptions.styles,style={},apply={};if(!chartex)\nchartex={};if(!styles){styles={definition:[],application:[]}}\nif(chartex.style&&chartex.style.font){for(var key in chartex.style.font){style=chartex.style.font[key];style.type=\"font\";style.name=key+\"font\";if(style.bold){style.bold=(style.bold==\"bold\")?'1':'0';}\napply={};apply.toobject=key;apply.styles=style.name;styles.definition.push(style);styles.application.push(apply);}\ndelete chartOptions.chartex.style.font;}\nchartOptions.styles=styles;};OptionsProcessor.prototype.processOther=function(chart){};function extendClass(parent,members){var object=function(){};object.prototype=new parent();var p=object.prototype;for(var n in members){p[n]=members[n];}\nreturn object;}\nvar LineOptionsProcessor=extendClass(OptionsProcessor,{processSeriesSetting:function(chart){OptionsProcessor.prototype.processSeriesSetting.apply(this,arguments);this.processAnchor(chart);},processAnchor:function(chart){var chartOptions=chart.getOptions(),chartObj=chartOptions.chart,chartex=chartOptions.chartex||{},dataset=chartOptions.lineset||chartOptions.dataset;if(chartex.effect==\"1\"){if(dataset&&dataset.length>0){if(chartObj.anchorBorderThickness){chartObj.anchorRadius=((chartObj.anchorRadius||3)-0)+chartObj.anchorBorderThickness/2;}\nchartObj.anchorBorderThickness=0;if(!chartObj.anchorBorderThickness)chartObj.anchorBorderThickness=0;for(var len=dataset.length-1;len>=0;len--){var di=dataset[len];di.anchorBgColor=di.color;}}}\nif(dataset&&dataset.length>0){for(var len=dataset.length-1;len>=0;len--){var dsi=dataset[len];if(dsi.isScatter){dsi.anchorBgColor=dsi.color;dsi.anchorBorderColor=dsi.color;}}}}});processorTypes[\"line\"]=LineOptionsProcessor;var AreaOptionsProcessor=extendClass(LineOptionsProcessor,{});processorTypes[\"area\"]=AreaOptionsProcessor;var ColumnOptionsProcessor=extendClass(OptionsProcessor,{processSeriesSetting:function(chart){OptionsProcessor.prototype.processSeriesSetting.apply(this,arguments);var chartOptions=chart.getOptions(),chartObj=chartOptions.chart||{},chartex=chartOptions.chartex||{},dataset=chartOptions.dataset||chartOptions.data,colors=(chartOptions.colors&&chartOptions.colors.length>0&&chartOptions.colors)||this.colors,sets,set,plotGradientColor=chartOptions.chart.plotGradientColor;if(dataset&&dataset.length==1){sets=dataset[0].data,colorIndex=0,set;for(index in sets){if(colorIndex>=colors.length){colorIndex=0;}\nset=sets[index];var colorObj=this._getColorObj(colors[colorIndex]);set.color=colorObj.color;if(chartOptions.chart.renderer!=\"javascript\"&&plotGradientColor!=null&&plotGradientColor!=\"\"){set.color+=\",\"+plotGradientColor;}\nset.alpha=this._pickValue(colorObj.alpha,100);colorIndex++;}}\nif(chartex.is3D==\"1\"){chartObj.showPlotBorder=\"0\";}\nif(chartex.effect==\"1\"){chartObj.showPlotBorder=\"0\";}}});processorTypes[\"column\"]=ColumnOptionsProcessor;var BarOptionsProcessor=extendClass(ColumnOptionsProcessor,{processOther:function(chart){var chartOptions=chart.getOptions(),chartO=chartOptions.chart;if(chartO.alternateHGridColor){chartO.alternateVGridColor=chartO.alternateHGridColor;chartO.alternateVGridAlpha=\"50\";delete chartO.alternateHGridColor;}}});processorTypes[\"bar\"]=BarOptionsProcessor;processorTypes[\"waterfall\"]=extendClass(OptionsProcessor,{processTooltip:function(chart){OptionsProcessor.prototype.processTooltip.apply(this,arguments);var chartOptions=chart.getOptions(),chartex=chartOptions.chartex,dataset=chartOptions.dataset||chartOptions.data||[];if(chartex&&chartex.onlyDataValueInToolTip==1){for(var index in dataset){var data=dataset[index];if(data!=null){data.tooltext=data.displayValue||data.value;}}}},processSeriesSetting:function(chart){var chartOptions=chart.getOptions(),colors=chartOptions.colors||this.waterfallColors,alphas=[],dataset=chartOptions.data,chartObj=chartOptions.chart,paletteColors=\"\",color,dataset=chartOptions.data,len,showSumAtEnd=chartObj.showSumAtEnd;if(dataset&&dataset.length>0){if(showSumAtEnd==\"1\"&&chartObj.lastDataIsSum!=\"1\"){dataset.push({\"label\":(chartObj.sumLabel||\"合计\"),\"isSum\":\"1\",\"cumulative\":\"1\"});chartObj.showSumAtEnd=\"0\";}}\nif(colors&&colors.length>0){if(colors[0]==null||!colors[0].color){for(var i in colors){var wDefaultL=this.waterfallColors.length;var wi=(i>(wDefaultL-1))?0:i;colors[i]=this._getColorObj(colors[i]||this.waterfallColors[wi]);alphas.push(this._pickValue(colors[i].alpha,null));}}\nif(dataset&&dataset.length>0){dataset[0].color=colors[0].color;if(chartObj.lastDataIsSum==\"1\"||showSumAtEnd==\"1\"){dataset[dataset.length-1].color=colors[3].color;}}\nchartObj.positiveColor=colors[1].color;chartObj.negativeColor=colors[2].color;chartObj.paletteColors=colors[3].color;}\nif(alphas){len=dataset&&dataset.length;for(var index=0;index<len;index++){var sets=dataset[index];if(!sets){continue;}\nif(index==0){if(alphas[0]!=null)sets.alpha=alphas[0];}else if(sets.value>0){if(alphas[1]!=null)sets.alpha=alphas[1];}else{if(alphas[2]!=null)sets.alpha=alphas[2];}}\nif(alphas[3]!=null)chartObj.plotFillAlpha=alphas[3];}}});var PieOptionsProcessor=extendClass(OptionsProcessor,{processSeriesSetting:function(chart){OptionsProcessor.prototype.processSeriesSetting.apply(this,arguments);var chartOptions=chart.getOptions(),chartObj=chartOptions.chart||{},chartex=chartOptions.chartex||{};if(chartOptions.chart&&chartOptions.chart.pieRadius){var pr=parseInt(chartOptions.chart.pieRadius);if(pr<=100&&pr>=0){var chartSize=Math.min(chartOptions.chart.width,chartOptions.chart.height);chartOptions.chart.pieRadius=chartSize*pr/100/2;}}\nif(chartex.effect==\"1\"){chartObj.showPlotBorder=\"0\";}},processTooltip:function(chart){OptionsProcessor.prototype.processTooltip.apply(this,arguments);var chartOptions=chart.getOptions(),chartex=chartOptions.chartex,dataset=chartOptions.dataset||chartOptions.data||[];if(chartex&&chartex.onlyDataValueInToolTip==1){for(var index in dataset){var data=dataset[index];if(data!=null){data.tooltext=data.displayValue||data.value;}}}},processDataLabels:function(chart){OptionsProcessor.prototype.processDataLabels.apply(this,arguments);var chartOptions=chart.getOptions(),chartex=chartOptions.chartex,chartObj=chartOptions.chart,showValueType=chartex&&chartex.showValueType,showDataLabels=chartex&&chartex.showDataLabels;if(showValueType){if(showValueType==\"value\"){chartObj.showValues=\"1\";chartObj.showPercentInToolTip=\"1\";}else if(showValueType==\"all\"){chartObj.showAllValues=\"1\";}else if(showValueType==\"none\"){chartObj.showValues=\"0\";chartObj.showPercentValues=\"0\";}else{chartObj.showValues=\"1\";chartObj.showPercentValues=\"1\";chartObj.showPercentInToolTip=\"0\";}}\nif(\"0\"==showDataLabels){chartObj.showValues=\"0\";chartObj.showLabels=\"0\";}}});processorTypes[\"pie\"]=PieOptionsProcessor;var DonutOptionsProcessor=extendClass(PieOptionsProcessor,{processDataLabels:function(chart){PieOptionsProcessor.prototype.processDataLabels.apply(this,arguments);}});processorTypes[\"donut\"]=DonutOptionsProcessor;var ScatterOptionsProcessor=extendClass(OptionsProcessor,{processSeriesSetting:function(chart){OptionsProcessor.prototype.processSeriesSetting.apply(this,arguments);this.processAnchor(chart);},processAnchor:function(chart){var chartOptions=chart.getOptions(),chartObj=chartOptions.chart,dataset=chartOptions.dataset;if(dataset&&dataset.length>0){for(var len=dataset.length-1;len>=0;len--){var di=dataset[len];di.anchorBgColor=di.color;di.anchorBorderColor=di.color;}}},processTooltip:function(chart){OptionsProcessor.prototype.processTooltip.apply(this,arguments);var chartOptions=chart.getOptions(),chartObj=chartOptions.chart,toolTipSepChar=chartObj.toolTipSepChar,lineSep=\":\",dataset=chartOptions.dataset||chartOptions.data||[];for(var index=0,len=dataset.length;index<len;index++){var sets=dataset[index];for(seti in sets.data){var set=sets.data[seti];if(set==null)\ncontinue;if(!set.tooltext){set.tooltext=(set.displayValue?(set.displayValue+toolTipSepChar):\"\")\n+(set.xName||'x')+lineSep+set.xDisplayValue\n+toolTipSepChar+(set.yName||'y')+lineSep+set.yDisplayValue;set.displayValue=set.yDisplayValue;}}}}});processorTypes[\"scatter\"]=ScatterOptionsProcessor;var BubbleOptionsProcessor=extendClass(ScatterOptionsProcessor,{processTooltip:function(chart){OptionsProcessor.prototype.processTooltip.apply(this,arguments);var chartOptions=chart.getOptions(),chartObj=chartOptions.chart,toolTipSepChar=chartObj.toolTipSepChar,lineSep=\":\",dataset=chartOptions.dataset||chartOptions.data||[];for(var index=0,len=dataset.length;index<len;index++){var sets=dataset[index];for(seti in sets.data){var set=sets.data[seti];if(set==null)\ncontinue;if(!set.tooltext){set.tooltext=(set.displayValue?(set.displayValue+toolTipSepChar):\"\")\n+(set.xName||'x')+lineSep+set.xDisplayValue\n+toolTipSepChar+(set.yName||'y')+lineSep+set.yDisplayValue\n+toolTipSepChar+(set.zName||'z')+lineSep+set.zDisplayValue;}}}}});processorTypes[\"bubble\"]=BubbleOptionsProcessor;var DualYCombinationOptionsProcessor=extendClass(OptionsProcessor,{processType:function(chart){var chartOptions=chart.getOptions(),chartObj=chartOptions.chart,chartex=chartOptions.chartex,is3D=chartex&&chartex.is3D,isStacked=chartex&&chartex.isStacked,isScroll=chartex&&chartex.isScroll,dataset=chartOptions.dataset;if(dataset&&dataset.length>0){var lineCnt=0,areaCnt=0,totalCnt=0,pyLineCnt=0,syLineCnt=0,pyColumnCnt=0,syColumnCnt=0;for(var len=dataset.length-1;len>=0;len--){var dsi=dataset[len];var renderAs=dsi.renderAs||'column';if(renderAs==\"area\")\nareaCnt++;else if(renderAs==\"line\"){lineCnt++;if(dsi.parentYAxis==\"S\"){syLineCnt++;}else{pyLineCnt++;}\nif(dsi.isScatter&&chartObj.renderer==\"javascript\"){dsi.lineThickness=0;}}else if(renderAs==\"column\"){if(dsi.parentYAxis==\"S\"){syColumnCnt++;}else{pyColumnCnt++;}}else if(renderAs==\"scatter\"){lineCnt++;if(dsi.parentYAxis==\"S\"){syLineCnt++;}else{pyLineCnt++;}\ndsi.renderAs=\"line\";dsi.alpha=\"1\";dsi.showLineInLegend=\"0\";dsi.isScatter=true;}\ntotalCnt++;}\nif(areaCnt>0||(lineCnt==totalCnt)||(pyLineCnt>0&&pyColumnCnt==0)||(syColumnCnt>0&&syLineCnt==0)){chartex.is3D=\"0\";}}\nOptionsProcessor.prototype.processType.apply(this,arguments);},processSeriesSetting:function(chart){OptionsProcessor.prototype.processSeriesSetting.apply(this,arguments);LineOptionsProcessor.prototype.processAnchor.apply(this,arguments);var chartOptions=chart.getOptions(),chartObj=chartOptions.chart,chartex=chartOptions.chartex;if(chartex.is3D==\"1\"){chartObj.showPlotBorder=\"0\";}\nif(chartex.effect==\"1\"){chartObj.showPlotBorder=\"0\";}}});processorTypes[\"dualYCombination\"]=DualYCombinationOptionsProcessor;var CombinationOptionsProcessor=extendClass(DualYCombinationOptionsProcessor,{});processorTypes[\"combination\"]=CombinationOptionsProcessor;var True3DCombinationOptionsProcessor=extendClass(OptionsProcessor,{processOther:function(chart){var chartOptions=chart.getOptions(),chartO=chartOptions.chart;chartO.renderer=\"\";if(chartO.legendBgColor&&　chartO.legendBgColor.indexOf(\"#\")!=-1){chartO.legendBgColor=chartO.legendBgColor.replace('#','');}}});processorTypes[\"true3DCombination\"]=True3DCombinationOptionsProcessor;var RadarOptionsProcessor=extendClass(OptionsProcessor,{processOptions:function(chart){OptionsProcessor.prototype.processOptions.apply(this,arguments);var chartOptions=chart.getOptions(),chartObj=chartOptions.chart;delete chartObj.numVDivlines;}});processorTypes[\"radar\"]=RadarOptionsProcessor;var GaugeOptionsProcessor=extendClass(OptionsProcessor,{processTooltip:function(chart){OptionsProcessor.prototype.processTooltip.apply(this,arguments);var chartOptions=chart.getOptions(),chartex=chartOptions.chartex,dataset=chartOptions.dials?chartOptions.dials.dial:[],toolTipSepChar=chartOptions.chart.toolTipSepChar;if(chartex&&chartex.onlyDataValueInToolTip==0){for(seti in dataset){set=dataset[seti];if(set==null)\ncontinue;if(!set.tooltext){set.tooltext=set.seriesName+toolTipSepChar\n+this._pickValue(set.originalDisplayValue,set.displayValue,set.value);if(chartex&&chartex.showPercent){set.tooltext=set.tooltext+toolTipSepChar+(set.percent?set.percent:\"\");}}}}},processSeriesSetting:function(chart){OptionsProcessor.prototype.processSeriesSetting.apply(this,arguments);var options=chart.getOptions();var chart,originW=(options.chart&&options.chart.width)||250,originH=(options.chart&&options.chart.height)||250,gaugeStyle=\"1\",gaugeAngle=180,originX=originW/2,originY=Math.min(originW/2,originH);if(options.chart){chart=options.chart;if(chart.gaugeStyle!==undefined&&chart.gaugeStyle!=null){gaugeStyle=chart.gaugeStyle+\"\";}\nif(chart.gaugeScaleAngle!==undefined&&chart.gaugeScaleAngle!=null){gaugeAngle=chart.gaugeScaleAngle-0;}}\nif(!options.chart){chart={};options.chart=chart;}\nvar wd=2,hd=1,lSpace=(chart.chartLeftMargin||2)-0,rSpace=(chart.chartRightMargin||2)-0,tSpace=(chart.chartTopMargin||2)-0,bSpace=(chart.chartBottomMargin||2)-0;var chartex=options.chartex;var font=chartex.style&&chartex.style.font;var captionSize=12,tickValuesSize=12;if(chart.caption!==undefined&&chart.caption!=null&&chart.caption!=\"\"){var plotWidth=originW-rSpace-lSpace;if(font&&font.caption){var captionStyle=font.caption;captionSize=((captionStyle&&captionStyle.size)||captionSize)-0;}\nvar caption=chart.caption,br=\"<br>\",itemWidth=captionSize+1,captionLines=0;if(caption){var texts=caption.split(br),width=0;for(var i in texts){var str=texts[i],twidth=0;for(var len=str.length-1;len>=0;len--){if(str.charCodeAt(len)<=255){twidth+=(itemWidth/2);}else{twidth+=itemWidth;}}\ncaptionLines=captionLines+Math.ceil(twidth/plotWidth);}}\ntSpace+=(chart.renderer==\"javascript\"?10:25)+captionLines*(captionSize+4);}\nif(font&&font.tickValues){var tickValuesStyle=font.tickValues;tickValuesSize=((tickValuesStyle&&tickValuesStyle.size)||tickValuesSize)-0;}\nif(\"1\"==gaugeStyle||\"3\"==gaugeStyle){tSpace+=tickValuesSize+4;}\nif(gaugeAngle>180){hd=Math.sin(Math.PI*(gaugeAngle-180)/2/180)+hd;}\nif(gaugeAngle>180&&gaugeStyle==\"2\"){hd=2;}\nvar radiusX=(originW-(lSpace+rSpace))/wd;var radiusY=(originH-(tSpace+bSpace))/hd;var radius=Math.min(radiusX,radiusY);originY=(originH-(tSpace+bSpace)-radius*hd)/2+tSpace+radius;originX=(originW-(lSpace+rSpace))/2+lSpace;chart.gaugeOriginX=originX;chart.gaugeOriginY=originY;chart.gaugeOuterRadius=radius;chart.origW=originW;chart.origH=originH;if(\"1\"==gaugeStyle||\"2\"==gaugeStyle){var dial=options.dials&&options.dials.dial;if(dial!=null&&dial.length){for(var i=0;i<dial.length;i++){var diali=dial[i];if(diali){if(\"1\"==gaugeStyle){diali.radius=radius*90/100;}\nif(\"2\"==gaugeStyle){diali.baseWidth=7;diali.bgColor=\"#a5a3fb\";diali.radius=radius*70/100;}}}}}\nvar start=90+(360-gaugeAngle)/2;var end=90-(360-gaugeAngle)/2;if(gaugeAngle>180&&gaugeAngle<360){start=180+(360-gaugeAngle)/2;end=0-(360-gaugeAngle)/2;}else if(gaugeAngle==360){start=180;end=-180;}\noptions.chart.gaugeStartAngle=start;options.chart.gaugeEndAngle=end;var colorRanges=options.colorRange&&options.colorRange.color;if((colorRanges&&colorRanges.length>0)||chart.lowerLimit!=undefined||chart.upperLimit!=undefined){chart.adjustTM=\"0\";}\nif(!colorRanges||colorRanges.length==0){options.colorRange={color:[]};colorRanges=options.colorRange.color;if(\"1\"==gaugeStyle){colorRanges.push({\"code\":\"DDDDDD\"});}else if(\"2\"==gaugeStyle){colorRanges.push({\"code\":\"A1A0FF\"});}else{colorRanges.push({\"code\":\"F6BD0F\"});}}\nif(this.vml&&chart.renderer==\"javascript\"&&gaugeAngle==360){chart.gaugeEndAngle=-179;}\nthis.processGaugeStyleOptions(options,gaugeStyle);if(\"2\"==gaugeStyle){chart.gaugeOuterRadius=radius*89/100;chart.gaugeInnerRadius=radius*89/100-10;options.annotations=this.createGaugeStyle2Annotations(gaugeAngle,start,end,originW,originH,originX,originY,radius);}},processGaugeStyleOptions:function(chartOptions,gaugeStyle){var gaugeOptions={\"1\":{chart:{gaugeInnerRadius:'0',\"valueBelowPivot\":'0'}},\"2\":{chart:{manageResize:\"1\",manageValueOverlapping:\"0\",autoAlignTickValues:\"1\",majorTMColor:\"ffffff\",majorTMHeight:\"10\",majorTMThickness:\"2\",minorTMColor:\"ffffff\",minorTMHeight:\"10\",showGaugeBorder:\"0\",gaugeAlpha:\"50\",placeValuesInside:\"1\",toolTipBgColor:\"F2F2FF\",toolTipBorderColor:\"6A6FA6\",gaugeFillMix:\"\",showShadow:\"0\",annRenderDelay:\"0\",pivotRadius:\"8\",pivotFillColor:'#a5a3fb',showPivotBorder:'1',pivotBorderThickness:2,pivotBorderColor:'#737aaf',valueBelowPivot:'0',tickValueDistance:1}},\"3\":{chart:{gaugeInnerRadius:'75%',\"valueBelowPivot\":'0'}}}\nvar gaugeStyleOptions=gaugeOptions[gaugeStyle];function copyOption(origin,target){for(var attr in origin){if(typeof origin[attr]==\"object\"&&origin[attr]!==null){if(!target[attr])target[attr]=(origin[attr].length===undefined)?{}:[];copyOption(origin[attr],target[attr]);}else{if(target[attr]===undefined){target[attr]=origin[attr];}}}}\ncopyOption(gaugeStyleOptions,chartOptions);},createGaugeStyle2Annotations:function(gaugeAngle,startAngle,endAngle,origW,origH,gaugeOriginX,gaugeOriginY,gaugeOuterRadius){var ag={x:gaugeOriginX,y:gaugeOriginY,showBelow:\"1\"};var agItems=[];agItems.push({type:\"arc\",fillPattern:\"linear\",x:\"0\",y:\"0\",radius:gaugeOuterRadius,fillColor:\"#eeeeee,#32393C\",fillAngle:\"-90\",fillRatio:\"0,100\",showBorder:\"0\"});agItems.push({type:\"circle\",fillPattern:\"linear\",x:\"0\",y:\"0\",radius:(gaugeOuterRadius*96/100),fillColor:\"#32393C,#eeeeee\",fillRatio:\"0,100\",fillAlpha:\"80,90\",fillAngle:\"-90\",\"showBorder\":\"0\"});agItems.push({type:\"circle\",fillPattern:\"linear\",x:\"0\",y:\"0\",radius:(gaugeOuterRadius*89/100),fillColor:\"#0E354D,#0E354D,#0E354D,#0E354D\",fillAlpha:\"30,50,70,100\",fillRatio:\"0,30,30,40\",fillAngle:\"-90\",showBorder:\"0\"});agItems.push({type:\"arc\",fillPattern:\"linear\",x:\"0\",y:\"0\",radius:(gaugeOuterRadius*92/100),innerRadius:(gaugeOuterRadius*89/100),fillColor:\"#0E354D\",fillAlpha:\"70\",showBorder:\"0\"});var is180=((gaugeAngle-0)==180);for(var len=agItems.length-1;len>=0;len--){agItems[len].startAngle=is180?-3:0;agItems[len].endAngle=is180?183:360;}\nag.items=agItems;return{groups:[ag]};}});processorTypes[\"gauge\"]=GaugeOptionsProcessor;var MapOptionsProcessor=extendClass(OptionsProcessor,{process:function(chart){this.attachEvents(chart);},attachEvents:function(chart){var options=chart.getOptions();if(!options.chart){options.chart={};}\nif(!options.chart.events)\noptions.chart.events={};var scope=chart;var chartEvents=options.chart.events;var beforeRenderer=chartEvents.beforeRenderer;if(beforeRenderer){beforeRenderer.call(scope,scope);}\nscope.fire('BeforeRenderer',scope);var load=chartEvents.load;chartEvents.load=function(){if(load)\nload.apply(this,arguments);scope.setChart(this);var series=this.options.series;if(series==null||series.length==0){var r=this.renderer;this.emptyText=r.text('没有数据',r.width/2,r.height/2).css({'fontSize':\"16px\",color:'#ff0000','font-weight':'bold'}).add();}\nscope.fire('AfterRenderer',scope);}\nchartEvents.destroy=function(){if(typeof this.emptyText!=\"undefined\"&&this.emptyText)\nthis.emptyText.destroy();this.panes=null;}\nif(!options.plotOptions){options.plotOptions={series:{}};}\nif(!options.plotOptions.series){options.plotOptions.series={};}\nif(!options.plotOptions.series||!options.plotOptions.series.point)\noptions.plotOptions.series.point={events:{}};if(!options.plotOptions.series.point.events){options.plotOptions.series.point.events={};}\nvar pEvents=options.plotOptions.series.point.events;var pClick=pEvents.click;pEvents.click=function(e){if(pClick)\npClick.apply(this,arguments);if(e.point&&e.point.value!=null){scope.fire('PointClick',this,scope,e);}}}});processorTypes[\"map\"]=MapOptionsProcessor;var StockOptionsProcessor=extendClass(MapOptionsProcessor,{process:function(chart){this.attachEvents(chart);var options=chart.getOptions();if(options.yAxis){if(options.yAxis[0]&&!options.yAxis[0].title.text){options.yAxis[0].title.text=null;}\nif(options.yAxis[1]&&!options.yAxis[1].title.text){options.yAxis[1].title.text=null;}}}});processorTypes[\"stock\"]=StockOptionsProcessor;var DataFormat=function(){this.type;this.prefix;this.suffix;this.decimal=-1;this.scale=1;this.dateFormat;this.timeFormat;this.viewType;};DataFormat.prototype.format=function(value){var vType=this.type;switch(vType){case\"INTEGER\":case\"LONG\":case\"DOUBLE\":value=this._formatNumber(value);return this._formatString(value+'');case\"DATE\":case\"DATETIME\":case\"TIME\":if(value instanceof Date){return this._formatDateTime(value);}else{return this_formatString(value+'');}\ndefault:return this._formatString(value+'');}};DataFormat.prototype._formatNumber=function(value){if(typeof value==\"undefined\"||value==null)\nreturn null;value=parseFloat(value);value=value*this.scale;function fixNumber(value,decimal){if(decimal>=0){value=value.toFixed(decimal);}\nreturn value;}\nswitch(this.viewType){case\"TNUMBER\":var valStr=fixNumber(value,this.decimal);var i=parseInt(Math.abs(value)).toString(),j=i.length>3?i.length%3:0,s=value<0?\"-\":\"\",thousandsSep=\",\",decPoint=\".\";return s\n+(j?i.substr(0,j)+thousandsSep:\"\")\n+i.substr(j).replace(/(\\d{3})(?=\\d)/g,\"$1\"+thousandsSep)\n+(this.decimal>0?(decPoint+valStr.substr(valStr.lastIndexOf('.')+1)):\"\");break;case\"ENUMBER\":var i=value.toString(),len=Math.abs(Math.round(value)).toString().length-1;if(len>=1){var n=value/Math.pow(10,len);return fixNumber(n,this.decimal)+\"E\"+len;}else{var index=i.lastIndexOf(\".\");if(index>=0&&value<1){var dl=i.substr(index+1).length;if(this.decimal>=0){dl=dl-this.decimal;}\nreturn fixNumber(value*Math.pow(10,dl),this.decimal)+\"E\"\n+(dl>0?\"-\"+dl:\"0\");}else{return fixNumber(value,this.decimal)+\"E0\";}}\nbreak;default:var vType=this.type;if(this.decimal<0){if(vType==\"INTEGER\"||vType==\"LONG\"&&(this.scale-parseInt(this.scale))==0){return fixNumber(value,0);}else{return value.toString()}}else{return fixNumber(value,this.decimal);}\nbreak;}};DataFormat.prototype._formatDateTime=function(value){};DataFormat.prototype._formatString=function(value){if(value==null)\nreturn null;if(value.replace(/ /g,'')==\"\")\nreturn value+\"\";return(this.prefix||'')+value+(this.suffix||'');};","js/smartbi/chart/ServerChartView.js":"\nvar ServerChartView=Class.extend({init:function(viewOptions,chartType,chartClassName){this.chartType=chartType;this.className=chartClassName;var defaultViewOptions={renderOnBrowser:false};this.viewOptions=jQuery.extend(false,null,defaultViewOptions,viewOptions);this._private={_chartObj:null,_toolbar:null};},destroy:function(){if(this.getChartObject()){this.getChartObject().destroy();}},refresh:function(chartType,chartOptions){var chartView=this;var chartClassName=this.getChartClassName(chartType);if(chartView.getChartObject()&&chartView.getChartObject().className==chartClassName){}else{this.initChart(chartType);}\nchartView.getChartObject().chartType=chartType;chartView.getChartObject().refresh(this.viewOptions.renderTo,chartOptions);},resizeTo:function(w,h){if(this.getChartObject()){this.getChartObject().resizeTo(w,h);}},hide:function(hideParent){if(this.viewOptions.renderTo){if(hideParent&&this.viewOptions.renderTo.parentNode){this.viewOptions.renderTo.parentNode.style.display=\"none\";}else{this.viewOptions.renderTo.style.display=\"none\";}}},show:function(showParent){if(this.viewOptions.renderTo){if(showParent&&this.viewOptions.renderTo.parentNode){this.viewOptions.renderTo.parentNode.style.display=\"\";}else{this.viewOptions.renderTo.style.display=\"\";}}},initChart:function(chartType){var chartView=this;var chartClassName=this.getChartClassName(chartType);var chartObj=null;if(chartView.getChartObject())\nchartView.getChartObject().dispose();var shortName=chartClassName.substr(chartClassName.lastIndexOf(\".\")+1);if(eval(\"typeof \"+shortName)!=\"function\"){jsloader.resolve(chartClassName,true);}\nchartObj=eval(\"new \"+shortName+\"({renderOnBrowser:\"\n+chartView.viewOptions.renderOnBrowser+\"},'\"+chartType+\"','\"+chartClassName+\"')\");chartObj.className=chartClassName;chartView.setChartObject(chartObj);function executeFunc(b,params){if(typeof b==\"function\"){b.apply(chartView,params);}else if(typeof b==\"string\"){try{eval(b);if(typeof main==\"function\"){main.apply(chartView,params);}}catch(e){};}}\nfunction checkMacro(macro,type){var viewOptions=chartView.viewOptions;var renderOnBrowser=viewOptions.renderOnBrowser;var isResMacro=renderOnBrowser&&(macro.resourceId==chartView.getResourceId());var isResPageMacro=renderOnBrowser&&(macro.resourceId==chartView.context.getPageId());var isPackageMacro=macro.isPackageMacro;var isSelfMacro=isResMacro||isResPageMacro||isPackageMacro;if(macro.eventName==type&&(!renderOnBrowser||isSelfMacro)){return true;}\nreturn false;}\nchartObj.on('BeforeRenderer',function(type,chart){var cVOptions=chart.getOptions().chartViewOptions;if(cVOptions&&cVOptions.events&&cVOptions.events.length>0){for(var i=0;i<cVOptions.events.length;i++){var macro=cVOptions.events[i];if(checkMacro(macro,\"beforeRenderer\")){var b=macro.script;executeFunc(b,[chartView]);}}}});chartObj.on('AfterRenderer',function(type,chart){var cVOptions=chart.getOptions().chartViewOptions;if(cVOptions&&cVOptions.events&&cVOptions.events.length>0){for(var i=0;i<cVOptions.events.length;i++){var macro=cVOptions.events[i];if(checkMacro(macro,\"afterRenderer\")){var b=macro.script;executeFunc(b,[chartView]);}}}});chartView.getChartObject().chartType=chartType;var DIRECTION_UP=1;var DIRECTION_DOWN=2;function getSuitablePosition(datas,fontSize,orgObj){var len=datas.length;var newPosition=orgObj.yPosition;var orgValue=orgObj.yValue;for(var i=0;i<len;i++){var yPosition=datas[i].yPosition;var yValue=datas[i].yValue;if(newPosition+fontSize>=yPosition&&yPosition+fontSize>=newPosition){newPosition-=fontSize;orgObj.yPosition=newPosition;return getSuitablePosition(datas,fontSize,orgObj);}}\nreturn newPosition;}\nchartObj.on('AfterRenderer',function(type,chart){var chartbi=chartView.getChartObject();var chart=chartbi.getChart();var options=chartbi.getOptions();if(options&&options.chartex&&options.chartex.notOverlapLabel==\"1\"&&chart.jsVars&&chart.jsVars.hcObj){var series=chart.jsVars.hcObj.series;var len=series.length;var yPosList=new Array();var fontSize=null;for(var i=0;i<len;i++){var datas=series[i].data;var dataLen=datas.length;for(var j=0;j<dataLen;j++){if(yPosList[j]){}else{yPosList[j]=new Array();}\nvar data=datas[j];var dataLabel=data.dataLabel;if(fontSize){}else{fontSize=parseInt(dataLabel.styles.fontSize);fontSize=isNaN(isNaN)?12:fontSize;}\nif(!data||!dataLabel){continue;}\nvar yPosition=getSuitablePosition(yPosList[j],fontSize,{yPosition:dataLabel.y,yValue:data.y});yPosList[j].push({yPosition:yPosition,yValue:data.y,labelObj:dataLabel});}}\nlen=yPosList.length;var temp=null;for(var i=0;i<len;i++){var posList=yPosList[i];var dataLen=posList.length;for(var m=0;m<dataLen;m++){for(var n=m+1;n<dataLen;n++){if(posList[m]&&posList[n]){if((posList[m].yValue>posList[n].yValue&&posList[m].yPosition>posList[n].yPosition)||(posList[m].yValue<posList[n].yValue&&posList[m].yPosition<posList[n].yPosition)){temp=posList[m].yPosition;posList[m].yPosition=posList[n].yPosition;posList[n].yPosition=temp;}}}}\nfor(var m=0;m<dataLen;m++){var posObj=posList[m];posObj.labelObj.attr(\"y\",posObj.yPosition);}}}});},getChartObject:function(){return this._private._chartObj;},setChartObject:function(chartObj){this._private._chartObj=chartObj;},getResourceId:function(){\"\";},getContext:function(){getPageId()=function(){return\"\";};},getChartClassName:function(chartType){var defChartClass=\"smartbi.chart.Chart\";if(chartType=='map'||chartType==\"airlinemap\"){defChartClass=\"smartbi.map.SmartbiMap\";}\nreturn this.className||defChartClass;},setChartClassName:function(className){this.className=className;},getGridData:function(){if(!this._data){var chartObj=this.getChartObject();if(chartObj){var option=chartObj.getOptions();this._data=option.allFieldsData;}}\nreturn this._data;}});","js/smartbi/chart/ChartMacroMenuCmd.js":"\nvar Module2=jsloader.resolve(\"freequery.widget.Module2\");var ChartMacroMenuCmd=function(){this.menuItems={};this.chartView=null;this.point=null;this.autoCmd=new Array();this.onDoCmd=new CustomEvent(\"onDoCmd\",this);};lang.extend(ChartMacroMenuCmd,Module2);ChartMacroMenuCmd.prototype.destroy=function(){delete this.menuItems;delete this.chartView;delete this.autoCmd;delete this.point;};ChartMacroMenuCmd.prototype.doCmd=function(cmd){if(this.menuItems){if(this.menuItems[cmd]){var callback=this.menuItems[cmd];eval(callback.action);callback(this.chartView,this.point);}else{this.onDoCmd.fire(cmd,this.query);}}};ChartMacroMenuCmd.prototype.setChartView=function(chartView){this.chartView=chartView;};ChartMacroMenuCmd.prototype.setPoint=function(point){this.point=point;};ChartMacroMenuCmd.prototype.setQueryObj=function(query){this.query=query;};","js/freequery/common/FrameView.html":"<table width=\"100%\" height=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\r\n\t<tr width=\"100%\">\r\n\t\t<td bofid=\"loc\" class=\"_loc\"><\/td>\r\n\t<\/tr>\r\n  \t<tr widht=\"100%\" height=\"100%\">\r\n    \t<td bofid=\"outerFrame\" class=\"_outerFrame\">\r\n    \t\t<div class=\"_frameViewContainer\" style=\"width:100%;height:100%;overflow: auto\"><\/div>\r\n    \t<\/td>\r\n  \t<\/tr>\r\n<\/table>","js/freequery/common/LocationBar.html":"  \t  <table cellpadding=\"0\" cellspacing=\"0\" class=\"location_bar\" style=\"table-layout: fixed\">\r\n        <tr bofid=\"bartr\">\r\n\t\t\t<td width=\"3\" class=\"frame_title_leftbg\" >\r\n\t\t\t<\/td>\r\n\t\t\t<td width=\"23\" align=\"center\" class=\"frame_title_centerbg\" >\r\n\t\t\t  <img src=\"img/mainframe/frame_title_log.gif\" class=\"frame_img16\"/><\/td>\r\n\t\t\t<td class=\"frame_title_centerbg\" nowrap=\"nowrap\" >\r\n\t\t\t\t<div bofid=\"frameTitleBar\"  style=\"overflow: hidden;width:100%\">\r\n\t\t\t\t\t<span class=\"frame_title_local\">当前位置：&nbsp;<span class=\"_frameTitleLocal frame_title_local\" bofid=\"curPath\"><\/span><\/span>\r\n\t\t\t\t\t<span class=\"_frameTitle frame_title\" bofid = \"curLocation\"><\/span>\r\n\t\t\t\t<\/div>\r\n\t\t    <\/td>\r\n\t      \t<td width=\"60\" align=\"right\" class=\"frame_title_centerbg\" >\r\n\t\t\t  <img src=\"img/mainframe/max.gif\" class=\"_frameMaxButton frame_hand_img16\"  bofid = \"maxButton\"/>\r\n\t\t\t  <img src=\"img/mainframe/frame_close.gif\" class=\"_frameCloseButton frame_hand_img16\"   bofid = \"closeButton\"/>\r\n\t      \t<\/td>\r\n\t\t\t<td width=\"3\" class=\"frame_title_rightbg\" >\r\n\t\t\t<\/td>\r\n        <\/tr>\r\n      <\/table>\r\n","js/bof/olapquery/paging/Paging.html":"<span bofid=\"prevPage\" style=\"cursor:pointer;\" class=\"_prevPage\">[上页]<\/span>\r\n<span bofid=\"nextPage\" style=\"cursor:pointer;\" class=\"_nextPage\">[下页]<\/span>\r\n \t&nbsp;第\r\n \t<input bofid=\"currentPage\" type=\"text\" class=\"_curPage\" style=\"width:34px; height:16px;border: 0px;border-top: 1px solid #919B9C;border-bottom: 1px solid #919B9C;border-left: 1px solid #919B9C;border-right: 1px solid #919B9C;\">\r\n \t页，\r\n每页\r\n<input bofid=\"pageRows\" type=\"text\" class=\"_rowCount\"  style=\"width:34px; height:16px;border: 0px;border-top: 1px solid #919B9C;border-bottom: 1px solid #919B9C;border-left: 1px solid #919B9C;border-right: 1px solid #919B9C;\">\r\n行","js/bof/reportcomment/CommentForOlapHandler.js":"HTTP Status 404 . filename not found: /vision/js/bof/reportcomment/CommentForOlapHandler.js","js/freequery/tree/CatalogTree.js":"\nvar TreeView=jsloader.resolve(\"freequery.tree.TreeView\");var CatalogTreeNode=jsloader.resolve(\"freequery.tree.CatalogTreeNode\");var util=jsloader.resolve(\"freequery.common.util\");var PopupMenu=jsloader.resolve(\"freequery.menu.PopupMenu\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var dialogFactory=null;var Configuration=imports(\"Configuration\").getInstance();var CatalogTree=function(parent){CatalogTree.superclass.constructor.call(this,parent);this.rootNode._id=\"\";this.dynamicLoad=true;this.dragEnabled=true;this.checkHiddenFilter=true;this.onNodeInitComplete=new CustomEvent(\"nodeInitComplete\",this);this.onDblClick.subscribe(this.doOnNodeDblClick,this);this.onDragDrop.subscribe(this.doOnCatalogDragDrop,this);this.onDblClickNode=new CustomEvent(\"dblClick\",this);this.addListener(this.rootPane,\"keydown\",this.doOnCatalogTreeKeyDown,this);this.popupMenu=new PopupMenu(document.body,this);};lang.extend(CatalogTree,TreeView);CatalogTree.prototype.doOnCatalogTreeKeyDown=function(e){if(e.keyCode==67&&e.ctrlKey){var node=this.getTreeNode(e.target);if(Configuration.extensionPoints.CatalogTree.copyableTypes&&node&&Configuration.extensionPoints.CatalogTree.copyableTypes[node._type]){this.doCmd(\"COPY\");}}\nif(e.keyCode==86&&e.ctrlKey){var node=this.getTreeNode(e.target);if(Configuration.extensionPoints.CatalogTree.copyableTypes&&node&&this.copyedNode){var acceptTypes=Configuration.extensionPoints.CatalogTree.copyableTypes[node.tree.copyedNode._type];if(acceptTypes){if(acceptTypes===true){var srcParentType=null;var srcType=node.tree.copyedNode._type;if(node.tree.copyedNode.parentNode)\nsrcParentType=node.tree.copyedNode.parentNode._type;var destType=node._type;if(srcParentType==destType||(srcType==\"PAGE\"&&destType==\"PAGE\")||(srcParentType==\"DEFAULT_TREENODE\"&&destType==\"SELF_TREENODE\")||(srcParentType==\"SELF_TREENODE\"&&destType==\"DEFAULT_TREENODE\")||(srcParentType==\"PUBLIC_PAGES\"&&destType==\"SELF_PAGES\")||(srcParentType==\"SELF_PAGES\"&&destType==\"PUBLIC_PAGES\"))\n{this.doCmd(\"PASTE\");}}}}}}\nCatalogTree.prototype.destroy=function(){if(this.popupMenu&&this.popupMenu.__handlers){for(var i=0;i<this.popupMenu.__handlers.length;i++)\nthis.popupMenu.__handlers[i].destroy();this.popupMenu.__handlers=null;}\nif(this.__dragDropHandlers){for(var i=0;i<this.__dragDropHandlers.length;i++)\nthis.__dragDropHandlers[i].destroy();this.__dragDropHandlers=null;}\nCatalogTree.superclass.destroy.call(this);}\nCatalogTree.prototype.createTreeNode=function(text,level,mayHasChild,parent,id){return new CatalogTreeNode(text,level,mayHasChild,parent,id);};CatalogTree.prototype.render=function(id){if(!this._isInit){if(!id)\nthis.rootNode.setExpanded(true);else{var result=util.remoteInvoke(\"CatalogService\",\"getCatalogElementById\",[id]);if(result.succeeded){this.rootNode.removeAllChildren();this.rootNode.addCatalogTreeNode(result.result);this.rootNode._isInitChild=true;this.rootNode._id=id;this.rootNode.setExpanded(true);}else\nmodalWindow.showServerError(result);}\nthis._isInit=true;}};CatalogTree.prototype.expandToId=function(id){var ret=util.remoteInvoke(\"CatalogService\",\"getCatalogElementPath\",[id]);if(ret.succeeded){var oldDynamicLoad=this.dynamicLoad;this.dynamicLoad=false;var node=this.rootNode;var fromIndex=0;if(ret.result===undefined){return null;}\nif(this.rootNode._id){var found=false;for(fromIndex=0;fromIndex<ret.result.length&&!found;fromIndex++)\nif(this.rootNode._id==ret.result[fromIndex].id){found=true;}}\nfor(var i=fromIndex;i<ret.result.length;i++){var tmp=node.getChildNodeByNodeId(ret.result[i].id);if(tmp==null)\ncontinue;node.setExpanded(true);node=tmp;}\nthis.selectNode(node);this.dynamicLoad=oldDynamicLoad;return node;}\nreturn null;};CatalogTree.prototype.refreshNode=function(id){if(this.nodes[id]!=null){this.nodes[id].refreshChildren();this.nodes[id].setExpanded(true);return;}\nvar ret=util.remoteInvoke(\"CatalogService\",\"getCatalogElementPath\",[id]);if(ret.succeeded&&ret.result){var oldDynamicLoad=this.dynamicLoad;this.dynamicLoad=false;var node=this.rootNode;var fromIndex=0;if(this.rootNode._id){var found=false;for(fromIndex=0;fromIndex<ret.result.length&&!found;fromIndex++)\nif(this.rootNode._id==ret.result[fromIndex].id){found=true;}}\nfor(var i=fromIndex;i<ret.result.length-1;i++){var tmp=node.getChildNodeByNodeId(ret.result[i].id);if(tmp==null)\nreturn;node.setExpanded(true);node=tmp;}\nnode.refreshChildren();node.setExpanded(true);this.dynamicLoad=oldDynamicLoad;}};CatalogTree.prototype.getMenuHandlers=function(){return Configuration.extensionPoints.CatalogTree.popupMenuHandler;}\nCatalogTree.prototype.initMenuHandlers=function(){if(this.popupMenu&&!this.popupMenu.__handlers){var handlerList=this.getMenuHandlers()||[];var __handlers=new Array();for(var i=0,len=handlerList.length;i<len;i++){var clz=jsloader.resolve(handlerList[i].className);var handler=new clz(this.popupMenu);__handlers.push(handler);handler.initMenu();}\nthis.popupMenu.__handlers=__handlers;}}\nCatalogTree.prototype.doOnPopupMenu=function(){if(!this.selectedNode)\nreturn false;this.initMenuHandlers();if(this.popupMenu&&this.popupMenu.__handlers){for(var i=0;i<this.popupMenu.__handlers.length;i++){if(this.popupMenu.__handlers[i].clearMenuState)\nthis.popupMenu.__handlers[i].clearMenuState();}\nfor(var i=0;i<this.popupMenu.__handlers.length;i++){this.popupMenu.__handlers[i].resetMenuState(this.selectedNode);}}\nif(this.popupMenu.changeManagerM){this.selectedNode.aliaseditable=this.popupMenu.changeManagerM.getVisibility();this.popupMenu.changeManagerM.setVisibility(false);}else{this.selectedNode.aliaseditable=false;}\nif(this.selectedNode._type==\"BI3OLAP_REPORT\"){this.selectedNode.aliaseditable=true;}\nreturn true;};CatalogTree.prototype.deleteSelectedNode=function(cmd){};CatalogTree.prototype.doCheckFolderDelete=function(node){if(!node.parentNode)\nreturn false;if(node._type==\"DEFAULT_TREENODE\"){if(this.isBusinessView(node.parentNode._type)||this.isTable(node.parentNode._type))\nreturn true;}\nif(node.parentNode._type!=node._type)\nreturn false;return true;};CatalogTree.prototype.doDelete=function(node,functionType){switch(node._type){case\"PARAMS\":case\"CALC_FIELDS\":case\"BUSINESS_THEMES\":case\"SELF_TREENODE\":case\"JUMPRULES\":case\"SCHEDULETASKS\":case\"MACROS\":case\"TRANSFORMRULES\":case\"ORDERRULES\":case\"USER_PROPERTIES\":case\"DATAFORMATS\":case\"DEFAULT_TREENODE\":if(!this.doCheckFolderDelete(node)){alert(\"内置节点不允许删除\");return false;}}\nvar ret=util.remoteInvokeEx(\"CatalogService\",\"isCatalogElementAccessible\",[node._id,\"DELETE\"]);if(!ret)return;if(!ret.result){alert(\"您对该资源没有\\\"删除\\\"拥有的权限！\");return;}\nif(functionType!=null){var ret=util.remoteInvoke(\"UserService\",\"isCurUserFuncTypeAccessible\",[functionType]);if(ret.succeeded){if(!ret.result){alert(\"您无使用该功能的权限！\");return false;}}else{modalWindow.showServerError(ret);return false;}}\nvar showRelative=false;var ret=util.remoteInvokeEx(\"MetadataService\",\"getIndexStatus\",[]);if(ret&&ret.succeeded){if(ret.result!=\"INVALID\"){if(ret.result==\"EMPTY\"){alert(\"索引信息为空，找不到影响资源，请联系管理员重建索引！\");}else\nshowRelative=true;}else{alert(\"索引服务状态不正常！\\n请确认索引保存目录是否正确设置，或尝试重启服务器！\");}}\nif(node._type==\"FILE_RESOURCE\")\nshowRelative=false;if(showRelative){if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var dialogConfig={};dialogConfig.title=\"删除资源\";dialogConfig.size=dialogFactory.size.LARGE;dialogConfig.fullName=\"bof.metadata.RefResourceDialog\";var ret=dialogFactory.showDialog(dialogConfig,[node],null,this);if(!ret)\nreturn false;}else if(modalWindow.open(\"确认要删除 '\"+node.text+\"' 吗？\",\"资源树\",modalWindow.MB_YESNO|modalWindow.MB_ICONQUESTION)!=modalWindow.ID_YES)\nreturn false;var bi35ReportId=null;if(node._type==\"BI3OLAP_REPORT\"){var ret=util.remoteInvokeEx(\"UrlLinkService\",\"getURLLink\",[node._id]);if(ret&&ret.succeeded){var url=ret.result.url;var pattern=/[\\?|&]id=(\\d+)/g;var ret=pattern.exec(url);if(ret)\nbi35ReportId=ret[1];}}\nvar ret=util.remoteInvoke(\"CatalogService\",\"deleteCatalogElement\",[node._id]);if(ret.succeeded){if(bi35ReportId){try{var FBI_Query_Delete=registry.get(\"FBI_Query_Delete\");if(!FBI_Query_Delete){var app=jsloader.imports(\"bof.baseajax.common.Application\").getInstance();var FBI_BIServerInterface=app.connectAp();if(FBI_BIServerInterface){FBI_Query_Delete=new ActiveXObject(\"FBI.BIQuery\");FBI_Query_Delete.ServerInterface=FBI_BIServerInterface;registry.put(\"FBI_Query_Delete\",FBI_Query_Delete);}}\nFBI_Query_Delete.Delete(bi35ReportId);}catch(e){}}\nreturn true;}\nelse{if(ret.retCode==\"UNKOWN_ERROR\")\n{modalWindow.showServerError(\"无法删除该资源\");}\nelse\n{modalWindow.showServerError(ret);}\nreturn false;}};CatalogTree.prototype.doCmd=function(cmd){if(!this.commandFactory)\nthis.commandFactory=this.getCommandFactory();this.initMenuHandlers();if(this.popupMenu&&this.popupMenu.__handlers){for(var i=0;i<this.popupMenu.__handlers.length;i++)\nthis.popupMenu.__handlers[i].doCmd(this.selectedNode,cmd);}};CatalogTree.prototype.getCommandFactory=function(){return null;};CatalogTree.prototype.doOnNodeDblClick=function(tree,node){this.onDblClickNode.fire(tree,node);this.initMenuHandlers();this.doCmd(\"OPEN\");};CatalogTree.prototype.getDragDropHandler=function(){var Configuration=imports(\"Configuration\").getInstance();return Configuration.extensionPoints.CatalogTree.dragDropHandler;}\nCatalogTree.prototype.canDrag=function(node){if(!this.dragEnabled)\nreturn false;if(util.transferData().srcType!=\"node\"||util.transferData().srcElement!=this||util.transferData().dataNodes.length!=1)\nreturn false;if(util.transferData().dataNodes[0].id==node._id)\nreturn false;var childNode=node.firstChild;while(childNode){if(childNode._id==util.transferData().dataNodes[0].id)\nreturn false;childNode=childNode.nextSibling;}\nif(!this.__dragDropHandlers){var h=new Array();var handler=this.getDragDropHandler();if(handler){for(var i=0;i<handler.length;i++){var clz=jsloader.resolve(handler[i].className);h[i]=new clz(this);}}\nthis.__dragDropHandlers=h;}\nfor(var i=0;i<this.__dragDropHandlers.length;i++){var ret=this.__dragDropHandlers[i].canDrag(node);if(typeof ret!=\"undefined\"){return ret;}}\nif(node._type!=\"USER_PROPERTIES\"&&node._type!=\"USER_PROPERTIE\"&&node._type!=\"CALC_FIELDS\"&&node._type!=\"PARAMS\"&&node._type!=\"FILTERS\"&&node._type!=\"BUSINESS_THEMES\"&&node._type!=\"JUMPRULES\"&&node._type!=\"MACROS\"&&node._type!=\"TRANSFORMRULES\"&&node._type!=\"DEFAULT_TREENODE\"&&node._type!=\"SELF_TREENODE\"&&node._type!=\"PUBLIC_PAGES\"&&node._type!=\"SELF_PAGES\"&&node._type!=\"PAGE\"&&node._type!=\"PAGE_INTERACTS\"&&node._type!=\"TASKS\"&&node._type!=\"SCHEDULES\"&&node._type!=\"AP_WARNING_STYLE_SETTTING\"&&node._type!=\"CUBECUSTOMMEMBERS\"&&node._type!=\"CUBENAMEDSETS\"&&node._type!=\"ORDERRULES\")\nreturn false;var type=util.transferData().dataNodes[0].type;var id=util.transferData().dataNodes[0].id;if(type==\"PARAM\"||type==\"OLAP_PARAM\")\nreturn node._type==\"PARAMS\";if(type==\"CALC_FIELD\")\nreturn node._type==\"CALC_FIELDS\";if(type==\"FILTER\")\nreturn node._type==\"FILTERS\";if(type==\"BUSINESS_THEME\")\nreturn node._type==\"BUSINESS_THEMES\";if(type==\"CALC_FIELDS\"||type==\"PARAMS\"||type==\"FILTERS\"||type==\"BUSINESS_THEMES\"||type==\"JUMPRULES\"||type==\"MACROS\"||type==\"TRANSFORMRULES\"||type==\"USER_PROPERTIES\"||type==\"TASKS\"||type==\"SCHEDULES\"||type==\"CUBECUSTOMMEMBERS\"||type==\"CUBENAMEDSETS\"||type==\"DEFAULT_TREENODE\"||type==\"SELF_TREENODE\"||type==\"AP_WARNING_STYLE_SETTTING\"||type==\"ORDERRULES\"){return node._type==type;}\nif(type==\"USER_PROPERTY\")\nreturn node._type==\"USER_PROPERTIES\";if(type==\"JUMPRULE\")\nreturn node._type==\"JUMPRULES\";if(type==\"MACRO\")\nreturn node._type==\"MACROS\";if(type==\"TRANSFORMRULE\")\nreturn node._type==\"TRANSFORMRULES\";if(type==\"ORDERRULE\")\nreturn node._type==\"ORDERRULES\";if(type==\"BUSINESS_VIEW\"||type==\"TEXT_BUSINESS_VIEW\"||type==\"JAVA_BUSINESS_VIEW\"||type==\"RAWSQL_BUSINESS_VIEW\"||type==\"SIMPLE_REPORT\"||type==\"PROC_BUSINESS_VIEW\"||type==\"URL\"||type==\"FILE_RESOURCE\"||type==\"BI3OLAP_REPORT\"||type==\"METRIC_REPORT\"||type==\"FREE_REPORT\"||type==\"Dashboard\"||type==\"DashboardMap\"||type==\"OLAP_REPORT\"||type==\"SPREADSHEET_REPORT\"){var dragNodeParentNode=this.nodes[util.transferData().dataNodes[0].id];if(dragNodeParentNode&&dragNodeParentNode.parentNode){if(node._type==\"DEFAULT_TREENODE\"||node._type==\"SELF_TREENODE\"){return(dragNodeParentNode.parentNode._type==\"DEFAULT_TREENODE\"||dragNodeParentNode.parentNode._type==\"SELF_TREENODE\");}else{return node._type==dragNodeParentNode.parentNode._type;}}}\nif(type==\"PAGE\"){var retsrc=util.remoteInvoke(\"CatalogService\",\"isPublicPage\",[util.transferData().dataNodes[0].id]);var rettar=util.remoteInvoke(\"CatalogService\",\"isPublicPage\",[node._id]);if(retsrc.result){return node._type==\"PUBLIC_PAGES\"||(node._type==\"PAGE\"&&rettar.result);}else{return node._type==\"SELF_PAGES\"||(node._type==\"PAGE\"&&!rettar.result);}}\nif(type==\"PAGE_INTERACT\")\nreturn node._type==\"PAGE_INTERACTS\";if(type==\"PAGE_INTERACTS\"&&id!=\"PAGE_INTERACTS\"){return node._type==\"PAGE_INTERACTS\";}\nif(type==\"SCHEDULE\")\nreturn node._type==\"SCHEDULES\";if(type==\"TASK\")\nreturn node._type==\"TASKS\";if(type==\"OLAP_WARNING_STYLE\"){return node._type==\"AP_WARNING_STYLE_SETTTING\";}\nif(type==\"CUSTOMMEMBER\"){return node._type==\"CUBECUSTOMMEMBERS\";}\nif(type==\"NAMEDSET\"){return node._type==\"CUBENAMEDSETS\";}\nreturn false;}\nCatalogTree.prototype.doOnCatalogDragDrop=function(tree,e,node){var type=util.transferData().dataNodes[0].type;var srcNodeId=util.transferData().dataNodes[0].id;if(type==\"CALC_FIELDS\"||type==\"CALC_FIELD\"||type==\"FILTERS\"||type==\"FILTER\"){if(util.getDataSourceIdByNodeId(srcNodeId)!=util.getDataSourceIdByNodeId(node._id)){alert(\"源节点与目标节点不在同一个数据库中\");return false;}}\nif(type==\"CUBECUSTOMMEMBERS\"||type==\"CUSTOMMEMBER\"||type==\"CUBENAMEDSETS\"||type==\"NAMEDSET\"){if(this.getCubeIdByNodeId(srcNodeId)!=this.getCubeIdByNodeId(node._id)){alert(\"源节点与目标节点不在同一个CUBE中\");return false;}}\nif(modalWindow.open(\"确认要将\\\"\"+util.transferData().dataNodes[0].label+\"\\\"移动到\\\"\"+node.text+\"\\\"中吗\",\"资源树\",modalWindow.MB_YESNO|modalWindow.MB_ICONQUESTION)!=modalWindow.ID_YES)\nreturn false;var transferData=util.transferData();if(transferData.srcType==\"node\"&&transferData.srcElement==this){var oldDynamicLoad=this.dynamicLoad;this.dynamicLoad=false;for(var i=0;i<transferData.dataNodes.length;i++){var nodeIdToMove=transferData.dataNodes[i].id;var nodeToMove=this.nodes[nodeIdToMove];var ret=util.remoteInvoke(\"CatalogService\",\"moveCatalogElement\",[nodeIdToMove,node._id]);if(!ret.succeeded)\nmodalWindow.showServerError(ret);else\nnodeToMove.parentNode.refreshChildren();}\nvar tmpNode=this.nodes[node._id];if(tmpNode)\ntmpNode.refreshChildren();this.dynamicLoad=oldDynamicLoad;domutils.preventDefault(e);}};CatalogTree.prototype.changeNodeAlias=function(succeed,node,alias,desc){if(!succeed)\nreturn;var result=util.remoteInvokeEx(\"CatalogService\",\"changeAlias\",[node._id,alias,desc]);if(result){node.setText(alias?alias:node._name);node._alias=alias;node._desc=desc;}};CatalogTree.prototype.getCubeIdByNodeId=function(id){var ret=util.remoteInvoke(\"OlapMetadataService\",\"getCubeIdByTreeId\",[id]);if(!ret.succeeded){return null;}else if(ret.result){return ret.result;}else{return null;}};CatalogTree.prototype.isBusinessView=function(type){if(type!=\"BUSINESS_VIEW\"&&type!=\"RAWSQL_BUSINESS_VIEW\"&&type!=\"TEXT_BUSINESS_VIEW\"&&type!=\"PROC_BUSINESS_VIEW\"&&type!=\"JAVA_BUSINESS_VIEW\")\nreturn false;else\nreturn true;}\nCatalogTree.prototype.isTable=function(type){if(type!=\"BASETABLE\"&&type!=\"BASEVIEW\"&&type!=\"BASEPROCEDURE\")\nreturn false;else\nreturn true;}","js/freequery/tree/CatalogTreeNode.js":"\nvar TreeNode=jsloader.resolve(\"freequery.tree.TreeNode\");var TransferDataNode=jsloader.resolve(\"freequery.common.TransferDataNode\");var util=jsloader.resolve(\"freequery.common.util\");var modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var CatalogTreeNode=function(text,level,mayHasChild,parent,id){CatalogTreeNode.superclass.constructor.call(this,text,level,mayHasChild,parent,id);};lang.extend(CatalogTreeNode,TreeNode);CatalogTreeNode.prototype.isTypeMatch=function(type){var tmpDenyTypes=[];tmpDenyTypes.push(\"DATATYPE_REF_PARAM\");if(util.licenses){if(!util.licenses.Query){tmpDenyTypes.push(\"SIMPLE_REPORT\");}\nif(!util.licenses.MetricReport){tmpDenyTypes.push(\"METRIC_REPORT\");tmpDenyTypes.push(\"METRICDATASOURCE\");}\nif(!util.licenses.ComplexReport){tmpDenyTypes.push(\"FREE_REPORT\");}\nif(!util.licenses.Chart){tmpDenyTypes.push(\"Dashboard\");}\nif(!util.licenses.Map){tmpDenyTypes.push(\"DashboardMap\");tmpDenyTypes.push(\"MAPAREA_MANAGE\");tmpDenyTypes.push(\"MAP_INTERVALCOLORS\");}\nif(!util.licenses.Portal){tmpDenyTypes.push(\"PUBLIC_PAGES\");tmpDenyTypes.push(\"SELF_PAGES\");tmpDenyTypes.push(\"PAGE_THEMES\");}\nif(!util.licenses.BI3Insight){tmpDenyTypes.push(\"BI3OLAP_REPORT\");}\nif(!util.licenses.Analysis){tmpDenyTypes.push(\"OLAP_DATASOURCE\");tmpDenyTypes.push(\"OLAP_REPORT\");tmpDenyTypes.push(\"OLAP_PARAM\");tmpDenyTypes.push(\"AP_WARNING_STYLE_SETTTING\");tmpDenyTypes.push(\"OLAP_WARNING_STYLE\");}\nif(!util.licenses.JavaQuery){tmpDenyTypes.push(\"JAVA_DATASOURCE\");tmpDenyTypes.push(\"JAVA_QUERY_DEFINE\");tmpDenyTypes.push(\"JAVA_QUERY_DEFINE_FIELD\");tmpDenyTypes.push(\"JAVA_BUSINESS_VIEW\");}\nif(!util.licenses.VisualQuery){tmpDenyTypes.push(\"BUSINESS_VIEW\");tmpDenyTypes.push(\"LINK_VIEWS\");}\nif(!util.licenses.Analysis&&!util.licenses.VisualQuery){tmpDenyTypes.push(\"ROW_PERMISSION\");}\nif(!util.licenses.Metadata){tmpDenyTypes.push(\"BUSINESS_THEMES\");tmpDenyTypes.push(\"BUSINESS_THEME\");tmpDenyTypes.push(\"BUSINESS_OBJECT\");tmpDenyTypes.push(\"BUSINESS_ATTRIBUTE\");tmpDenyTypes.push(\"DATATYPE_REF_PARAM\");}\nif(!util.licenses.FileManager){tmpDenyTypes.push(\"FILE_RESOURCE\");}\nif(!util.licenses.ScheduleTask){tmpDenyTypes.push(\"SCHEDULETASK\");tmpDenyTypes.push(\"UNIONDATASOURCE\");}\nif(!util.licenses.UserManager){tmpDenyTypes.push(\"ROW_PERMISSION\");tmpDenyTypes.push(\"SECURITY_MANAGER\");}\nif(!util.licenses.Macro){tmpDenyTypes.push(\"MACRO_PACKAGE\");tmpDenyTypes.push(\"RESOURCE_PACKS\");}\nfor(var x in tmpDenyTypes)\nif(tmpDenyTypes[x]==type)\nreturn false;}\nif(this.tree.filterTypes){if(typeof this.tree.filterTypes==\"string\"){if(type==this.tree.resType)\nreturn true;return type==this.tree.filterTypes;}\nelse{for(var x in this.tree.filterTypes)\nif(this.tree.filterTypes[x]==type)\nreturn true;return false;}}\nif(this.tree.denyTypes){if(typeof this.tree.denyTypes==\"string\")\nreturn type!=this.tree.denyTypes;else{for(var x in this.tree.denyTypes)\nif(this.tree.denyTypes[x]==type)\nreturn false;return true;}}\nreturn true;};CatalogTreeNode.prototype.isHiddenNode=function(catalog){var ret=(!!catalog.hiddenInBrowse)&&this.tree.checkHiddenInBrowse;if(!ret&&catalog.type=='FILTER'&&this.tree.checkHiddenFilter){var rtn=util.remoteInvokeEx(\"FilterService\",\"isHiddenFilter\",[catalog.id]);if(rtn&&rtn.succeeded){ret=rtn.result;}}\nreturn ret;}\nCatalogTreeNode.prototype.isShowNode=function(id){if(!util.hasLicense(\"SessionManager\")){if(id==\"I2c94ea9f2567c7ec012567ef00b40046\"){return false;}}\nif(!util.hasLicense(\"UserManager\")){if(id==\"I2c94ea86298cbe6c01298cfd9ba900fa\"||id==\"I2c94ea86296db80801296dd20f12005a\"){return false;}}\nreturn true;}\nCatalogTreeNode.prototype.addCatalogTreeNode=function(catalog){if(!catalog)return;if(!this.isTypeMatch(catalog.type))\nreturn;if(!this.isShowNode(catalog.id))\nreturn;if(this.isHiddenNode(catalog))\nreturn;if(this.tree.dsSetting)\n{if(!this.dsFilter(catalog))\nreturn;}\nvar alias=catalog.alias;if(alias==null||alias==\"\")\nalias=catalog.name;var node=this.addChild(alias,catalog.hasChild,catalog.id);node.setCatalogInfo(catalog);return node;};CatalogTreeNode.prototype.dsFilter=function(catalog){if(catalog.type==\"BUSINESS_THEME\"&&this.tree.dsSetting)\n{var nodeId=catalog.id;var dsId=this.tree.dsSetting.id;var ret=util.remoteInvokeEx(\"BusinessThemeService\",\"isAccessibleThemeNode2\",[nodeId,dsId]);return ret&&ret.result;}\nreturn true;}\nCatalogTreeNode.prototype.setCatalogInfo=function(catalog){this.catalog=catalog;this._id=catalog.id;this._name=catalog.name;this._alias=catalog.alias;this._desc=catalog.desc;this._type=catalog.type;this._hiddenInBrowse=!!catalog.hiddenInBrowse;this._customImage=catalog.customImage;this._hasChild=catalog.hasChild;this._extended=catalog.extended;this._detectChild=catalog.detectChild;var alias=catalog.alias;if(alias==null||alias==\"\")\nalias=catalog.name;this.setText(alias);this.updateHintInfo();switch(catalog.type)\n{case\"BUSINESS_ATTRIBUTE\":if(this._customImage!=null&&this._customImage!=\"\"){this.setIcon(\"img/catalogtree/\"+this._customImage);this.icon.onerror=function(ev){this.src=\"img/catalogtree/\"+catalog.type+\".gif\";}}else{var result=util.remoteInvoke(\"BusinessThemeService\",\"getBusinessAttributeByID\",[catalog.id]).result;if(result.dataType==\"DOUBLE\"||result.dataType==\"INTEGER\"){this.setIcon(\"img/catalogtree/\"+catalog.type+\"_NUMBER.gif\");this._refParam=true;}else{this.setIcon(\"img/catalogtree/\"+catalog.type+\".gif\");this._refParam=false;}}\nbreak;default:if(this._hiddenInBrowse==true){this.setIcon(\"img/catalogtree/DEFAULT_TREENODE_HIDDEN.gif\");}\nelse if(this._customImage!=null&&this._customImage!=\"\"){var pic=this._customImage||catalog.icon||this._icon;if(pic.indexOf(\"img/catalogtree/\")==0)\nthis.setIcon(pic);else\nthis.setIcon(\"img/catalogtree/\"+pic);if(this._type=='FILE_RESOURCE'){this.icon.onerror=function(ev){this.src=\"img/catalogtree/UNKNOWN_FILE_TYPE.gif\";}}else{this.icon.onerror=function(ev){this.src=\"img/catalogtree/\"+catalog.type+\".gif\";}}}else\nthis.setIcon(\"img/catalogtree/\"+catalog.type+\".gif\");}};CatalogTreeNode.prototype.updateHintInfo=function(){var title=\"名字：\"+(this.longText||this.text);if(this._desc)\ntitle+=\"\\n描述：\"+this._desc;if(this._hiddenInBrowse==true){title+=\"\\n此目录在浏览界面隐藏\";}\nthis.textSpan.title=title;}\nCatalogTreeNode.prototype.remoteCallback=function(result){result=this.reInitChildren(result);if(result.succeeded){for(var i=0;i<result.result.length;i++){if(this.tree.searchCondition){if(this.tree.searchNodeIdArray[result.result[i].id]){this.addCatalogTreeNode(result.result[i]);}}else{this.addCatalogTreeNode(result.result[i]);}}}else{modalWindow.showServerError(result);}\nthis.isLoading=false;this.initExpanderImg();this.tree.onNodeInitComplete.fire(this.tree,this);};CatalogTreeNode.prototype.reInitChildren=function(result){return result;};CatalogTreeNode.prototype.initChildren=function(){if(this._mayHasChild===false){this._isInitChild=true;return;}\nthis.isLoading=true;this.removeAllChildren();if(this.tree.dynamicLoad){if(this.tree.treePurview)\nutil.remoteInvoke(\"CatalogService\",\"getChildElementsWithPurviewType\",[this._id,this.tree.treePurview],this.remoteCallback,this);else\nutil.remoteInvoke(\"CatalogService\",\"getChildElements\",[this._id],this.remoteCallback,this);}else{var result=null\nif(this.tree.treePurview)\nresult=util.remoteInvoke(\"CatalogService\",\"getChildElementsWithPurviewType\",[this._id,this.tree.treePurview]);else\nresult=util.remoteInvoke(\"CatalogService\",\"getChildElements\",[this._id]);this.remoteCallback(result);this.isLoading=false;this.initExpanderImg();}\nthis._isInitChild=true;};CatalogTreeNode.prototype.refreshChildren=function(){var result=util.remoteInvoke(\"CatalogService\",\"getCatalogElementById\",[this._id]);if(result.succeeded){if(result.result)\nthis.setCatalogInfo(result.result);}else\nmodalWindow.showServerError(result);this.initChildren();};CatalogTreeNode.prototype.createTransferData=function(){var transferNode=new TransferDataNode();transferNode.id=this._id;transferNode.type=this._type;transferNode.name=this._name;transferNode.label=(this._alias==null||this._alias==\"\")?this._name:this._alias;transferNode.alias=this._alias;transferNode.parentName=this.parentNode._name;transferNode.parentID=this.parentNode._id;util.transferData().srcElement=this.tree;util.transferData().srcType=\"node\";util.transferData().dataNodes=[transferNode];return true;};CatalogTreeNode.prototype.createTransferDatas=function(){dataNodes=[];for(var i=0;i<this.tree.selected.length;i++){var node=this.tree.selected[i];var transferNode=new TransferDataNode();transferNode.id=node._id;transferNode.type=node._type;transferNode.name=node._name;transferNode.label=(node._alias==null||node._alias==\"\")?node._name:node._alias;transferNode.alias=node._alias;　　　transferNode.parentName=this.parentNode._name;　　　transferNode.parentID=this.parentNode._id;util.transferData().srcElement=node.tree;util.transferData().srcType=\"node\";dataNodes.push(transferNode);}\nutil.transferData().dataNodes=dataNodes;return true;}\nCatalogTreeNode.prototype.getFullAliasPath=function(){var nodeList=this.getFullNodePath();if(nodeList&&nodeList instanceof Array){var arr=[];for(var i=0;i<nodeList.length;i++){arr.push(nodeList[i].alias||nodeList[i].name);}\nreturn arr;}}\nCatalogTreeNode.prototype.getFullNodePath=function(){result=util.remoteInvoke(\"CatalogService\",\"getCatalogElementPath\",[this._id]);if(result.succeeded){if(result.result)\nreturn result.result;}else{modalWindow.showServerError(result);}}\nCatalogTreeNode.prototype.destroy=function(){this.icon.onerror=null;CatalogTreeNode.superclass.destroy.call(this);}","js/freequery/common/TransferDataNode.js":"\n﻿var util=jsloader.resolve(\"freequery.common.util\");var modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var TransferDataNode=function(){this.id=null;this.label=null;this.name=null;this.alias=null;this.type=null;this.description=null;this.dsId=null;}","js/smartbi/chartsetting/shortcut/Toolbar.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var SettingButton=jsloader.resolve(\"smartbi.chartsetting.shortcut.SettingButton\");var ChartTypeButton=jsloader.resolve(\"smartbi.chartsetting.shortcut.ChartTypeButton\");var DeleteButton=jsloader.resolve(\"smartbi.chartsetting.shortcut.DeleteButton\");var PreviewDataButton=jsloader.resolve(\"smartbi.chartsetting.shortcut.PreviewDataButton\");var domutils=jsloader.resolve(\"freequery.lang.domutils\");var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");var util=jsloader.resolve(\"freequery.common.util\");var Toolbar=function(container,chartObj,toolbarOptions,chartView){Toolbar.superclass.constructor.call(this);this.container=container;this.chartObj=chartObj;this.chartView=chartView;this.options=toolbarOptions;this.buttons=new Array();this.initShortcutButons();this.onSetting=new CustomEvent(\"onSetting\");this.onSelectType=new CustomEvent(\"onSelectType\");this.onDelete=new CustomEvent(\"onDelete\");this.onPreviewData=new CustomEvent(\"onPreviewData\");};lang.extend(Toolbar,Module);Toolbar.prototype.destroy=function(){if(this.settingButton){this.settingButton.destroy();this.settingButton=null;}\nif(this.chartTypeButton){this.chartTypeButton.destroy();this.chartTypeButton=null;}\nif(this.previewDataButton){this.previewDataButton.destroy();this.previewDataButton=null;}\nif(this.deleteButton){this.deleteButton.destroy();this.deleteButton=null;}\nif(this.toolbarSpan){domutils.destroyNode(this.toolbarSpan);this.toolbarSpan=null;}\nthis.onSetting.unsubscribeAll();this.onSelectType.unsubscribeAll();this.onDelete.unsubscribeAll();var isIE=domutils.isIE();this.removeListener(this.container,\"mousemove\",this.onMouseEnter,this);this.removeListener(this.container,isIE?\"mouseleave\":\"mouseout\",this.onMouseLeave,this);};Toolbar.prototype.initShortcutButons=function(){if(!this.toolbarSpan){this.toolbarSpan=document.createElement(\"SPAN\");this.container.insertBefore(this.toolbarSpan,this.container.firstChild);this.toolbarSpan.style.position=\"absolute\";this.toolbarSpan.style.zIndex=\"999\";this.toolbarSpan.style.top=\"0px\";this.toolbarSpan.style.right=\"0px\";this.tbSpanBgLeft=document.createElement(\"SPAN\");this.tbSpanBgLeft.className=\"smartbichart-toolbar-bg smartbichart-toolbar-bg-left\";this.toolbarSpan.appendChild(this.tbSpanBgLeft);this.tbSpanBgMiddle=document.createElement(\"SPAN\");this.tbSpanBgMiddle.className=\"smartbichart-toolbar-bg smartbichart-toolbar-bg-middle\";this.toolbarSpan.appendChild(this.tbSpanBgMiddle);this.tbSpanBgRight=document.createElement(\"SPAN\");this.tbSpanBgRight.className=\"smartbichart-toolbar-bg smartbichart-toolbar-bg-right\";this.toolbarSpan.appendChild(this.tbSpanBgRight);}\nthis.toolbarSpan.style.display=\"none\";var isIE=domutils.isIE();this.addListener(this.container,\"mousemove\",this.onMouseEnter,this);this.addListener(this.container,isIE?\"mouseleave\":\"mouseout\",this.onMouseLeave,this);this.addListener(this.container,\"mouseover\",this.onMouseOver,this);var tbOpts=this.options||{},btnContainer=this.tbSpanBgMiddle;var chartDefine=this.chartView.chartDefine||{},chartObj=this.chartObj;var defObj=chartDefine.chartDefine?lang.parseJSON(chartDefine.chartDefine):{};var chartType=chartDefine.chartType;var showBtnCounts=0;if(!tbOpts.settingButton||tbOpts.settingButton.enabled!==false){++showBtnCounts;this.settingButton=new SettingButton(btnContainer,tbOpts.settingButton,chartObj);this.settingButton.onSetting.subscribe(this.doSetting,this);this.settingButton.render(defObj,chartType);}\nif((!tbOpts.chartTypeButton||tbOpts.chartTypeButton.enabled!==false)&&chartType!=\"stock\"){++showBtnCounts;this.chartTypeButton=new ChartTypeButton(btnContainer,tbOpts.chartTypeButton,chartObj);this.chartTypeButton.onSelectType.subscribe(this.doSelectType,this);this.chartTypeButton.onSetting.subscribe(this.doSetting,this);this.chartTypeButton.onCloseUp.subscribe(this.doButtonCloseUp,this);this.chartTypeButton.render(defObj,chartType);}\nif(!tbOpts.previewDataButton){var sysBuDisplay=util.getSystemConfig(\"CHART_TOOLBAR_DISPLAY\");tbOpts.previewDataButton={enabled:sysBuDisplay==\"false\"?false:true};}\nif(!tbOpts.previewDataButton||tbOpts.previewDataButton.enabled!==false){++showBtnCounts;this.previewDataButton=new PreviewDataButton(btnContainer,tbOpts.previewDataButton,chartObj);this.previewDataButton.onClick.subscribe(this.doPreviewDataButtonClick,this);this.previewDataButton.render(defObj,chartType);}\nif(!tbOpts.deleteButton||tbOpts.deleteButton.enabled!==false){++showBtnCounts;this.deleteButton=new DeleteButton(btnContainer,tbOpts.deleteButton,chartObj);this.deleteButton.onDelete.subscribe(this.doDelete,this);this.deleteButton.render(defObj,chartType);}\nthis.showBtnCounts=showBtnCounts;};Toolbar.prototype.onMouseEnter=function(ev){if(this.toolbarSpan.style.display==\"none\"&&this.showBtnCounts){this.toolbarSpan.style.display=\"\";}};Toolbar.prototype.onMouseOver=function(ev){this.outFlag=false;}\nToolbar.prototype.onMouseLeave=function(ev){var that=this;this.outFlag=true;setTimeout(function(){if(that.outFlag){try{that.updateVisible(true);}catch(e){}}},1000);};Toolbar.prototype.updateVisible=function(force){var count=0;if(this.chartTypeButton&&this.chartTypeButton.isVisible()){++count;}\nif(count===0){if(!force){var ev=eventutil.getEvent();if(ev&&this.containsElement(ev.target)){return;}}\nthis.toolbarSpan.style.display=\"none\";}};Toolbar.prototype.containsElement=function(el){if(this.container){while(el!=null){if(el==this.container){return true;}else{el=el.parentNode;}}}\nreturn false;};Toolbar.prototype.doButtonCloseUp=function(button){this.updateVisible();};Toolbar.prototype.doSetting=function(showTypeWindowFirst){this.onSetting.fire(showTypeWindowFirst);};Toolbar.prototype.doSelectType=function(that,node){this.onSelectType.fire(this,node);};Toolbar.prototype.doDelete=function(){this.onDelete.fire();};Toolbar.prototype.doPreviewDataButtonClick=function(showGrid){if(this.settingButton)\nshowGrid?this.settingButton.hidden():this.settingButton.show();if(this.chartTypeButton)\nshowGrid?this.chartTypeButton.hidden():this.chartTypeButton.show();if(this.deleteButton)\nshowGrid?this.deleteButton.hidden():this.deleteButton.show();this.onPreviewData.fire(showGrid);};Toolbar.prototype.doExportButtonClick=function(){};","js/smartbi/chartsetting/shortcut/SettingButton.js":"\nvar BaseButton=jsloader.resolve(\"smartbi.chartsetting.shortcut.BaseButton\");var SettingButton=function(container,options,chartObj){SettingButton.superclass.constructor.call(this,container,options,chartObj);this.onSetting=new CustomEvent(\"onSetting\");};lang.extend(SettingButton,BaseButton);SettingButton.prototype.destroy=function(){if(this.onSetting){this.onSetting.unsubscribeAll();this.onSetting=null;}\nSettingButton.superclass.destroy.call(this);};SettingButton.prototype.getTitle=function(){return\"设置\";};SettingButton.prototype.getClassName=function(){return\"smartbichart-toolbar-button smartbichart-toolbar-setting-gray\";};SettingButton.prototype.onMouseEnter=function(){domutils.replaceClassName(this.buttonInput,'smartbichart-toolbar-setting','smartbichart-toolbar-setting-gray');};SettingButton.prototype.onMouseLeave=function(){domutils.replaceClassName(this.buttonInput,'smartbichart-toolbar-setting-gray','smartbichart-toolbar-setting');};SettingButton.prototype.doOnClick=function(){this.onSetting.fire();};","js/smartbi/chartsetting/shortcut/BaseButton.js":"\nvar Module2=jsloader.resolve('freequery.widget.Module2');var BaseButton=function(container,options,chartObj){this.container=container;this.options=options;this.chartObj=chartObj;this.enable=true;this.onClick=new CustomEvent('onClick',this);};lang.extend(BaseButton,Module2);BaseButton.prototype.destroy=function(){if(this.onClick){this.onClick.unsubscribeAll();this.onClick=null;}\nvar btn=this.buttonInput;if(btn){var isIE=domutils.isIE();this.removeListener(btn,'click',this.doOnClick,this);this.removeListener(btn,\"mousemove\",this.onMouseEnter,this);this.removeListener(btn,isIE?\"mouseleave\":\"mouseout\",this.onMouseLeave,this);domutils.destroyNode(this.buttonInput);this.buttonInput=null;}\nBaseButton.superclass.destroy.call(this);};BaseButton.prototype.unrender=function(){};BaseButton.prototype.render=function(defObj,chartType){this.defObj=defObj;this.chartType=chartType;var btn=this.buttonInput=document.createElement('INPUT');var isIE=domutils.isIE();btn.type='button';btn.title=this.getTitle();btn.className=this.getClassName();this.container.appendChild(btn);this.addListener(btn,'click',this.doOnClick,this);this.addListener(btn,\"mousemove\",this.onMouseEnter,this);this.addListener(btn,isIE?\"mouseleave\":\"mouseout\",this.onMouseLeave,this);};BaseButton.prototype.hidden=function(){this.buttonInput.style.display=\"none\";};BaseButton.prototype.show=function(){this.buttonInput.style.display=\"\";};BaseButton.prototype.getTitle=function(){return'BaseButton';};BaseButton.prototype.getClassName=function(){return'queryview-toolbar-button';};BaseButton.prototype.getOffset=function(obj,parent){var p={left:0,top:0},pn=this.container.parentNode;while(obj&&pn!=obj){p.left+=obj.offsetLeft-obj.scrollLeft;p.top+=obj.offsetTop-obj.scrollTop;obj=obj.offsetParent;}\nreturn p;};BaseButton.prototype.elementInPanel=function(el,panel){if(panel){while(el!=null){if(el==panel){return true;}else{el=el.parentNode;}}}\nreturn false;};BaseButton.prototype.doOnClick=function(){this.onClick.fire();};BaseButton.prototype.onMouseEnter=function(){};BaseButton.prototype.onMouseLeave=function(){};","js/smartbi/chartsetting/shortcut/ChartTypeButton.js":"\nvar DropDownButton=jsloader.resolve(\"smartbi.chartsetting.shortcut.DropDownButton\");var ChartTypeTemplates=jsloader.resolve(\"smartbi.ChartTypeTemplates\");var ChartTypeButton=function(container,options,chartObj){ChartTypeButton.superclass.constructor.call(this,container,options,chartObj);this.columnCount=3;this.selectedChartTemplate=null;this.onSelectType=new CustomEvent(\"onSelectType\");this.onSetting=new CustomEvent(\"onSetting\");};lang.extend(ChartTypeButton,DropDownButton);ChartTypeButton.prototype.destroy=function(){if(this.onSetting){this.onSetting.unsubscribeAll();this.onSetting=null;}\nif(this.onSelectType){this.onSelectType.unsubscribeAll();this.onSelectType=null;}\nChartTypeButton.superclass.destroy.call(this);};ChartTypeButton.prototype.getTitle=function(){return\"图形类型\";};ChartTypeButton.prototype.getClassName=function(){return\"smartbichart-toolbar-button smartbichart-toolbar-type-gray\";};ChartTypeButton.prototype.onMouseEnter=function(){domutils.replaceClassName(this.buttonInput,'smartbichart-toolbar-type','smartbichart-toolbar-type-gray');};ChartTypeButton.prototype.onMouseLeave=function(){if(!this.isVisible()){domutils.replaceClassName(this.buttonInput,'smartbichart-toolbar-type-gray','smartbichart-toolbar-type');}};ChartTypeButton.prototype.closeUp=function(){ChartTypeButton.superclass.closeUp.call(this);this.onMouseLeave();};ChartTypeButton.prototype.getDropDownWidth=function(){return 150;};ChartTypeButton.prototype.initDropDownPanelContent=function(){this.menuTable=document.createElement(\"table\");this.menuTable.style[\"width\"]=\"100%\";this.menuDiv.appendChild(this.menuTable);this.menuTbody=document.createElement(\"tbody\");this.menuTable.appendChild(this.menuTbody);var chartObj=this.chartObj,options=chartObj._private._options||{};var chartTemplate=options.chartTemplate||{};var tmpId=chartTemplate.id,tmpType=chartTemplate.type||chartObj.chartType;var chartTypeTemplate=new ChartTypeTemplates();var groups=chartTypeTemplate.getToTemplatesByChartOption(options,chartObj.chartType,chartObj._reportType);var setSelected=false;for(var groupName in groups){if(groupName==\"bofClassName\"){continue;}\nvar group=groups[groupName],subGroups=[],templates=group.templates,key,items,len;for(key in templates){items=templates[key];if(items.length){subGroups=subGroups.concat(items);}}\nif((len=subGroups.length)){this.createGroupHead(group.name);var i,itemTr,subGroup;for(i=0;i<len;i++){if(i%this.columnCount==0){itemTr=document.createElement(\"TR\");itemTr.id=\"templeList\";this.menuTbody.appendChild(itemTr);}\nsubGroup=subGroups[i];if(!setSelected){if(tmpId){if(subGroup.id===tmpId){this.selectedChartTemplate=subGroup;setSelected=true;}}else{if(subGroup.type===tmpType){this.selectedChartTemplate=subGroup;setSelected=true;}}}\nthis.createCell(itemTr,subGroup);}\nfor(i=len;i%this.columnCount!=0;i++){this.createCell(itemTr,null);}}}\nthis.select(this.selectedChartTemplate);var showMore=domutils.isIE()&&(!this.options||(this.options.showMore!==false));if(showMore){var buttonTr=document.createElement(\"TR\");this.menuTbody.appendChild(buttonTr);var buttonTd=document.createElement(\"TD\");buttonTr.appendChild(buttonTd);buttonTd.colSpan=3;var moreButton=document.createElement(\"input\");moreButton.type=\"button\";moreButton.value=\"更多\";moreButton.className=\"button-buttonbar-noimage\";buttonTd.appendChild(moreButton);this.addListener(moreButton,\"click\",this.doMoreButtonClick,this);}};ChartTypeButton.prototype.doMoreButtonClick=function(){this.closeUp();this.onSetting.fire(true);};ChartTypeButton.prototype.createGroupHead=function(name){var itemTr=document.createElement(\"TR\");itemTr.height=\"20\";itemTr.id=name;var td=document.createElement(\"TD\");td.className=\"smartbichart-shorttoolbar-bg\";td.colSpan=this.columnCount;td.innerText=\"  \"+name;itemTr.appendChild(td);this.menuTbody.appendChild(itemTr);};ChartTypeButton.prototype.createCell=function(itemTr,node){var td=document.createElement(\"TD\");td.style.padding=3;td.align=\"center\";domutils.addClassName(td,'chart-type-td');if(node){td.nodedata=node;td.title=node.name;var img=document.createElement(\"IMG\");img.setAttribute('src',node.iconUrl);img.style.width=\"32px\";img.style.height=\"32px\";td.appendChild(img);this.addListener(td,\"mouseover\",function(){domutils.addClassName(td,\"smartbichart-config-td-hover\");},this);this.addListener(td,\"mouseout\",function(){domutils.removeClassName(td,\"smartbichart-config-td-hover\");},this);var obj=this;this.addListener(td,\"click\",function(){if(!td.nodedata){return;}\nobj.select(td.nodedata);obj.closeUp();obj.onSelectType.fire(obj,td.nodedata);},this);}else{td.appendChild(document.createTextNode(\"\"));td.style.width=(100/this.columnCount)+'%';td.style.backgroundColor='transparent';}\nitemTr.appendChild(td);};ChartTypeButton.prototype.select=function(chartTypeTemplate){var typeId=chartTypeTemplate&&chartTypeTemplate.id;if(!typeId)\nreturn;this.selectedChartTemplate=chartTypeTemplate;if(!this.menuTbody)\nreturn;var tds=domutils.getElementsByClassName('chart-type-td',this.menuTbody);var length=tds.length;for(var i=length-1;i>=0;i--){var tdElem=tds[i];if(tdElem.nodedata&&tdElem.nodedata.id!=typeId){domutils.removeClassName(tdElem,\"smartbichart-config-tr-selected\");}else{domutils.addClassName(tdElem,\"smartbichart-config-tr-selected\");}}};","js/smartbi/chartsetting/shortcut/DropDownButton.js":"\nvar BaseButton=jsloader.resolve(\"smartbi.chartsetting.shortcut.BaseButton\");var DropDownPanel=jsloader.resolve(\"freequery.control.DropDownPanel\");var util=jsloader.resolve(\"freequery.common.util\");var DropDownButton=function(container,options,chartObj){DropDownButton.superclass.constructor.call(this,container,options,chartObj);this.buttonWidth=20;this.buttonHeight=20;this.rootPanelPadding=0;this.docElement=document.getElementById('mainTable')||document.body;this.onCloseUp=new CustomEvent(\"onCloseUp\");};lang.extend(DropDownButton,BaseButton);DropDownButton.prototype.destroy=function(){this.bindDocMouseDown(false);if(this.onCloseUp){this.onCloseUp.unsubscribeAll();this.onCloseUp=null;}\nif(this.menuDiv){domutils.destroyNode(this.menuDiv);this.menuDiv=null;}\nif(this.menuRootDiv){domutils.destroyNode(this.menuRootDiv);this.menuRootDiv=null;}\nDropDownButton.superclass.destroy.call(this);};DropDownButton.prototype.initDropDownPanel=function(){if(!this.menuRootDiv){this.menuRootDiv=document.createElement(\"div\");this.container.parentNode.appendChild(this.menuRootDiv);this.menuRootDiv.style[\"position\"]=\"absolute\";this.menuRootDiv.style[\"zIndex\"]=1000;this.menuRootDiv.style[\"padding\"]=this.rootPanelPadding+\"px\";this.menuDiv=document.createElement(\"div\");this.menuRootDiv.appendChild(this.menuDiv);this.menuDiv.style[\"background\"]=\"#FFFFFF\";this.menuDiv.style[\"border\"]=\"1px solid #A0A0A0\";this.menuDiv.style[\"MozBoxShadow\"]=\"3px 3px 10px #888\";this.menuDiv.style[\"WebkitBoxShadow\"]=\"3px 3px 10px #888\";this.menuDiv.style[\"boxShadow\"]=\"3px 3px 10px #888\";this.menuDiv.style[\"overflow\"]=\"auto\";this.menuDiv.style[\"width\"]=this.getDropDownWidth()+\"px\";this.menuDiv.style[\"height\"]=this.getDropDownHight()+\"px\";this.initDropDownPanelContent();}\nthis.bindDocMouseDown(true);this.setVisible(true);};DropDownButton.prototype.initDropDownPanelContent=function(){this.menuDiv.innerHTML=\"DropDownButton\";};DropDownButton.prototype.doOnClick=function(){this.initDropDownPanel();var editOffset=this.getOffset(this.buttonInput,this.container.parentNode);this.menuRootDiv.style[\"display\"]=\"block\";var chartWidth=this.chartObj.getOptions().width;var right=chartWidth-editOffset.left-this.rootPanelPadding-this.buttonWidth;this.menuRootDiv.style[\"right\"]=\"0px\";var top=editOffset.top+this.buttonHeight-this.rootPanelPadding;this.menuRootDiv.style[\"top\"]=top+\"px\";};DropDownButton.prototype.doMouseDown=function(ev){if(this.isVisible()&&!this.elementInPanel(ev.target,this.menuRootDiv)){this.closeUp();}};DropDownButton.prototype.closeUp=function(){this.setVisible(false);this.bindDocMouseDown(false);this.onCloseUp.fire(this);};DropDownButton.prototype.bindDocMouseDown=function(isAddListener){if(isAddListener){if(!this._isBoundDocMouseDown){this.addListener(this.docElement,\"mousedown\",this.doMouseDown,this);this._isBoundDocMouseDown=true;}}else{if(this._isBoundDocMouseDown){this.removeListener(this.docElement,\"mousedown\",this.doMouseDown,this);delete this._isBoundDocMouseDown;}}};DropDownButton.prototype.isVisible=function(){return this.menuRootDiv&&this.menuRootDiv.style.display!=\"none\"||false;};DropDownButton.prototype.setVisible=function(v){if(this.menuRootDiv){this.menuRootDiv.style.display=v?\"block\":\"none\";}};DropDownButton.prototype.getDropDownWidth=function(){return 150;};DropDownButton.prototype.getDropDownHight=function(){return 200;};DropDownButton.prototype.getViewport=function(){var mode=document.compatMode;var result=new Object();if(mode||domutils.isIE()){switch(mode){case'CSS1Compat':result.width=document.documentElement.clientWidth;result.height=document.documentElement.clientHeight;break;default:result.width=document.body.clientWidth;result.height=document.body.clientHeight;break;}}\nreturn result;};","js/smartbi/chartsetting/shortcut/LegendButton.js":"\nvar DropDownButton=jsloader.resolve(\"smartbi.chartsetting.shortcut.DropDownButton\");var LegendButton=function(container,options,chartObj){LegendButton.superclass.constructor.call(this,container,options,chartObj);this.onSelectLegend=new CustomEvent(\"onSelectLegend\");this.selectedTemplate=null;};lang.extend(LegendButton,DropDownButton);LegendButton.prototype.destroy=function(){if(this.onSelectLegend){this.onSelectLegend.unsubscribeAll();this.onSelectLegend=null;}\nLegendButton.superclass.destroy.call(this);};LegendButton.prototype.getTitle=function(){return\"图例\";};LegendButton.prototype.getClassName=function(){return\"smartbichart-toolbar-button smartbichart-toolbar-legend-gray\";};LegendButton.prototype.onMouseEnter=function(){domutils.replaceClassName(this.buttonInput,'smartbichart-toolbar-legend','smartbichart-toolbar-legend-gray');};LegendButton.prototype.onMouseLeave=function(){if(!this.isVisible()){domutils.replaceClassName(this.buttonInput,'smartbichart-toolbar-legend-gray','smartbichart-toolbar-legend');}};LegendButton.prototype.closeUp=function(){LegendButton.superclass.closeUp.call(this);this.onMouseLeave();};LegendButton.prototype.render=function(options,chartType){LegendButton.superclass.render.call(this,options,chartType);options=options||{};var id='none',chartOpt=options.chart;if(chartOpt){if(chartOpt.showLegend-0===1){var pos=chartOpt.legendPosition;id=pos&&pos.toUpperCase()==='RIGHT'?'right':'bottom';}}\nvar configs=this.getLegendConfigs();for(var i=0,len=configs.length;i<len;i++){if(configs[i].id===id){this.selectedTemplate=configs[i];break;}}};LegendButton.prototype.initDropDownPanelContent=function(){this.menuTable=document.createElement(\"table\");this.menuTable.cellPadding=\"0\";this.menuTable.cellSpacing=\"0\";this.menuTable.style[\"width\"]=\"100%\";this.menuDiv.appendChild(this.menuTable);this.menuTbody=document.createElement(\"tbody\");this.menuTable.appendChild(this.menuTbody);var configs=this.getLegendConfigs();for(var i=0,len=configs.length;i<len;i++){this.createLegendRow(this.menuTbody,configs[i]);}\nif(!this.selectedTemplate){this.selectedTemplate=configs[0];}\nthis.select(this.selectedTemplate);};LegendButton.prototype.createLegendRow=function(menuTbody,config){var itemTr=document.createElement(\"TR\");itemTr.config=config;itemTr.style[\"padding\"]=\"2px\";menuTbody.appendChild(itemTr);var imgTd=document.createElement(\"TD\");itemTr.appendChild(imgTd);imgTd.align=\"center\";imgTd.style[\"width\"]=\"30%\";var img=document.createElement(\"IMG\");img.setAttribute('src',config.iconUrl);img.style[\"width\"]=\"32px\";img.style[\"height\"]=\"32px\";imgTd.appendChild(img);var textTd=document.createElement(\"TD\");itemTr.appendChild(textTd);textTd.align=\"center\";textTd.style[\"width\"]=\"70%\";textTd.appendChild(document.createTextNode(config.text));this.addListener(itemTr,\"mouseover\",function(){domutils.addClassName(itemTr,\"smartbichart-config-tr-hover\");},this);this.addListener(itemTr,\"mouseout\",function(){domutils.removeClassName(itemTr,\"smartbichart-config-tr-hover\");},this);var obj=this;this.addListener(itemTr,\"click\",function(){obj.select(itemTr.config);obj.closeUp();obj.onSelectLegend.fire(obj,itemTr.config);},this);};LegendButton.prototype.select=function(config){this.selectedTemplate=config;var configId=config&&config.id;var rows=this.menuTbody&&this.menuTbody.children||[];for(var i=rows.length-1;i>=0;i--){var trElem=rows[i];if(!trElem.config){continue;}\nif(trElem.config.id==configId){domutils.addClassName(trElem,\"smartbichart-config-tr-selected\");}else{domutils.removeClassName(trElem,\"smartbichart-config-tr-selected\");}}};LegendButton.prototype.getDropDownWidth=function(){return 110;};LegendButton.prototype.getDropDownHight=function(){return 110;};LegendButton.prototype.getLegendConfigs=function(){var configs=new Array();configs.push({id:\"none\",iconUrl:'img/chart/legend/none.png',text:'无图例',options:{chart:{showLegend:0}}},{id:\"right\",iconUrl:'img/chart/legend/right.png',text:'图例在右侧',options:{chart:{showLegend:1,legendPosition:'RIGHT'}}},{id:\"bottom\",iconUrl:'img/chart/legend/bottom.png',text:'图例在底部',options:{chart:{showLegend:1,legendPosition:'BOTTOM'}}});return configs;};","js/smartbi/chartsetting/shortcut/ColorsButton.js":"\nvar DropDownButton=jsloader.resolve(\"smartbi.chartsetting.shortcut.DropDownButton\");var ChartUtil=jsloader.resolve(\"smartbi.ChartUtil\");var util=imports(\"freequery.common.util\").getInstance();var dialogFactory=null;var modalWindow=null;var ColorsButton=function(container,options,chartObj){ColorsButton.superclass.constructor.call(this,container,options,chartObj);this.CUSTOM_GROUP_ROW_ID=\"CUSTOM_COLORS_GROUP_ROW\";this.BUILTIN_GROUP_ROW_ID=\"BUILTIN_COLORS_GROUP_ROW\";this.COLS_PER_ROW=8;this.selectedColorTheme=null;this.onSelectColor=new CustomEvent(\"onSelectColor\");};lang.extend(ColorsButton,DropDownButton);ColorsButton.prototype.destroy=function(){this.removeListener(this.moreButton,\"click\",this.doMoreButtonClick,this);this.removeListener(this.menuTbody,\"contextmenu\",this.doContextMenuClick,this);if(this.popupMenu){this.popupMenu.destroy();this.popupMenu=null;}\nif(this.onSelectColor){this.onSelectColor.unsubscribeAll();this.onSelectColor=null;}\nColorsButton.superclass.destroy.call(this);};ColorsButton.prototype.getTitle=function(){return\"颜色\";};ColorsButton.prototype.getClassName=function(){return\"smartbichart-toolbar-button smartbichart-toolbar-colors-gray\";};ColorsButton.prototype.onMouseEnter=function(){domutils.replaceClassName(this.buttonInput,'smartbichart-toolbar-colors','smartbichart-toolbar-colors-gray');};ColorsButton.prototype.onMouseLeave=function(){if(!this.isVisible()){domutils.replaceClassName(this.buttonInput,'smartbichart-toolbar-colors-gray','smartbichart-toolbar-colors');}};ColorsButton.prototype.closeUp=function(){ColorsButton.superclass.closeUp.call(this);this.onMouseLeave();};ColorsButton.prototype.render=function(options,chartType){ColorsButton.superclass.render.call(this,options,chartType);options=options||{};var chartexOpt=options.chartex||{},colorThemeId=chartexOpt.colorThemeId;if(colorThemeId){var customConfigs=this.getCustomThemeColors();var builtInConfigs=this.getBuiltInThemeColors();var configs=[].concat(customConfigs,builtInConfigs);for(var i=0,len=configs.length;i<len;i++){if(configs[i].id===colorThemeId){this.selectedColorTheme=configs[i];break;}}}};ColorsButton.prototype.initDropDownPanel=function(){ColorsButton.superclass.initDropDownPanel.call(this);var locateElem=this.builtInGroupRow;var elem=locateElem.previousSibling;while(elem){var tmp=elem.previousSibling;domutils.destroyNode(elem);elem=tmp;}\nvar customConfigs=this.getCustomThemeColors();if(customConfigs.length>0){this.createGroupHead(this.CUSTOM_GROUP_ROW_ID,\"自定义\",locateElem);for(var i=0,len=customConfigs.length;i<len;i++){this.createThemeRow(this.menuTbody,customConfigs[i],locateElem);}}\nthis.moreButton.disabled=!this.hasCreatePurview();this.select(this.selectedColorTheme);};ColorsButton.prototype.initDropDownPanelContent=function(){this.colorsDiv=document.createElement(\"div\");this.colorsDiv.style[\"width\"]=\"100%\";this.colorsDiv.style[\"height\"]=(this.getDropDownHight()-20)+\"px\";this.colorsDiv.style[\"overflow\"]=\"auto\";this.menuDiv.style[\"overflow\"]=\"visible\";this.menuDiv.appendChild(this.colorsDiv);this.menuTable=document.createElement(\"table\");this.menuTable.cellPadding=\"0\";this.menuTable.cellSpacing=\"0\";this.menuTable.style[\"width\"]=\"100%\";this.colorsDiv.appendChild(this.menuTable);this.menuTbody=document.createElement(\"tbody\");this.menuTable.appendChild(this.menuTbody);var buttonDiv=document.createElement(\"div\");var moreButton=this.moreButton=document.createElement(\"input\");moreButton.type=\"button\";moreButton.value=\"新建主题颜色\";moreButton.className=\"button-buttonbar-noimage\";buttonDiv.style.cssText=\"border-top:1px solid #C5C5C5;padding:2px;background-color:#EAF1F9\";buttonDiv.appendChild(moreButton);this.menuDiv.appendChild(buttonDiv);this.addListener(this.moreButton,\"click\",this.doMoreButtonClick,this);this.addListener(this.menuTbody,\"contextmenu\",this.doContextMenuClick,this);this.initColorTable();};ColorsButton.prototype.initColorTable=function(){var builtInConfigs=this.getBuiltInThemeColors();this.builtInGroupRow=this.createGroupHead(this.BUILTIN_GROUP_ROW_ID,\"内置\");for(var i=0,len=builtInConfigs.length;i<len;i++){this.createThemeRow(this.menuTbody,builtInConfigs[i]);}\nif(!this.selectedColorTheme){this.selectedColorTheme=builtInConfigs[0];}};ColorsButton.prototype.createGroupHead=function(id,text,beforeElem){var itemTr=document.createElement(\"TR\");itemTr.height=\"20\";itemTr.id=id;var td=document.createElement(\"TD\");td.style.backgroundColor=\"#DEE7EF\";td.colSpan=2;td.innerText=\"  \"+text;td.style.fontWeight=\"bold\";itemTr.appendChild(td);if(beforeElem){this.menuTbody.insertBefore(itemTr,beforeElem);}else{this.menuTbody.appendChild(itemTr);}\nreturn itemTr;};ColorsButton.prototype.doContextMenuClick=function(ev){var target=ev.target,tmp=target,config;if(this._activeTrElem){delete this._activeTrElem;}\ndomutils.stopEvent(ev);while(tmp&&tmp.parentNode!=this.menuTbody){tmp=tmp.parentNode;}\nconfig=tmp&&tmp.config;if(config&&config.customSetting){this._activeTrElem=tmp;this.showCustomPopupmenu(ev,tmp);}};ColorsButton.prototype.showCustomPopupmenu=function(ev,activeTrElem){if(!this.popupMenu){var PopupMenu=jsloader.resolve(\"freequery.menu.PopupMenu\");this.popupMenu=new PopupMenu(document.body,this);this.popupMenu.modifyItem=this.popupMenu.createMenuItem(\"编辑\",\"MODIFY_THEME_COLOR\");this.popupMenu.deleteItem=this.popupMenu.createMenuItem(\"删除\",\"DELETE_THEME_COLOR\");}\nthis.popupMenu.modifyItem.setVisibility(true);this.popupMenu.deleteItem.setVisibility(true);var hiddenCount=0;var config=activeTrElem&&activeTrElem.config,setting=config&&config.customSetting;if(setting){var id=config.id;var ret=util.remoteInvokeEx(\"CatalogService\",\"isCatalogElementAccessible\",[id,\"WRITE\"]);if(ret&&ret.succeeded&&!ret.result){this.popupMenu.modifyItem.setVisibility(false);++hiddenCount;}\nret=util.remoteInvokeEx(\"CatalogService\",\"isCatalogElementAccessible\",[id,\"DELETE\"]);if(ret&&ret.succeeded&&!ret.result){this.popupMenu.deleteItem.setVisibility(false);++hiddenCount;}}\nif(hiddenCount<2){this.popupMenu.popup(ev);}};ColorsButton.prototype.doCmd=function(cmd){var config;if(!this._activeTrElem){return;}else{config=this._activeTrElem.config;}\nvar setting=config&&config.customSetting;if(!setting){return;}\nswitch(cmd){case\"MODIFY_THEME_COLOR\":this.showConfigDialog(config,true);break;case\"DELETE_THEME_COLOR\":if(!modalWindow){modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");}\nvar text=setting.alias||setting.name,id=config.id;if(modalWindow.open(\"确认要删除 '\"+text+\"' 吗？\",\"主题颜色\",modalWindow.MB_YESNO|modalWindow.MB_ICONQUESTION)!=modalWindow.ID_YES){return;}\nvar ret=util.remoteInvokeEx(\"CatalogService\",\"deleteCatalogElement\",[id]);if(ret&&ret.succeeded){var trElem=this._activeTrElem.previousSibling;domutils.destroyNode(this._activeTrElem);if(trElem.id==this.CUSTOM_GROUP_ROW_ID&&trElem.nextSibling.id==this.BUILTIN_GROUP_ROW_ID){domutils.destroyNode(trElem);}\nalert(\"删除成功！\");}\nbreak;}\ndelete this._activeTrElem;};ColorsButton.prototype.hasCreatePurview=function(){return util.checkFunctionValid('CUSTOM_COMMONSETTINGS_CHARTCOLORS');};ColorsButton.prototype.doMoreButtonClick=function(ev){if(!this.hasCreatePurview()){return;}\nthis.showConfigDialog(this.selectedColorTheme,false);};ColorsButton.prototype.showConfigDialog=function(config,isEdit){this.closeUp();if(!dialogFactory){dialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");}\nvar dialogConfig={title:\"自定义颜色\",fullName:\"smartbi.chart.color.ChartColorDialog\",size:[650,380]};dialogFactory.showDialog(dialogConfig,{\"isEdit\":isEdit,\"config\":config},this.rebuildColorTable,this);};ColorsButton.prototype.rebuildColorTable=function(){var rows=this.menuTbody.children;var length=rows.length;for(var i=length-1;i>=0;i--){var trElem=rows[i];domutils.destroyNode(trElem);}\nthis.initColorTable();};ColorsButton.prototype.createThemeRow=function(menuTbody,config,beforeElem){var itemTr=document.createElement(\"TR\");itemTr.config=config;itemTr.style[\"padding\"]=\"2px\";if(beforeElem){menuTbody.insertBefore(itemTr,beforeElem);}else{menuTbody.appendChild(itemTr);}\nvar colorsTd=document.createElement(\"TD\");itemTr.appendChild(colorsTd);colorsTd.style[\"width\"]=\"70%\";var colors=config.colors,len=colors.length;for(var i=0;i<this.COLS_PER_ROW;i++){if(i<len){var inputElem=document.createElement(\"input\");var color=colors[i],transparent=1;if(color.toLowerCase().indexOf(\"rgb\")!=-1){var colours=util.rgbaToHexColor(color);color=colours[\"color\"];transparent=(colours[\"alpha\"]||100)/100;}\ninputElem.title=color;inputElem.style.cssText=\"cursor:point;height:12px;width:12px;background-color:\"\n+color+\";opacity:\"+transparent\n+\";border:1px solid #6B656B;border-spacing:2;margin-left:2px;\";colorsTd.appendChild(inputElem);}else{var btnElem=document.createElement(\"input\");btnElem.type=\"button\";btnElem.title=\"未设置\";btnElem.style.cssText=\"height:12px;width:12px;border:1px solid #6B656B;\"\n+\"margin-left:2px;background:url(img/chart/toolbar/null.png)\";colorsTd.appendChild(btnElem);}\nif(len>this.COLS_PER_ROW&&i==this.COLS_PER_ROW-1){var txtElem=document.createElement(\"span\");txtElem.title=\"还有部分颜色未显示\";txtElem.style.cursor=\"default\";txtElem.appendChild(document.createTextNode(\"...\"));colorsTd.appendChild(txtElem);}}\nvar textTd=document.createElement(\"TD\"),text=config.text;itemTr.appendChild(textTd);textTd.style[\"width\"]=\"30%\";var tooLong=util.getCharLength(text)>8;var txt=tooLong?util.getShortString(text,6,\"...\"):text;textTd.appendChild(document.createTextNode(txt));if(tooLong){textTd.title=text;textTd.style.cursor=\"default\";}\nthis.addListener(itemTr,\"mouseover\",function(){domutils.addClassName(itemTr,\"smartbichart-config-tr-hover\");},this);this.addListener(itemTr,\"mouseout\",function(){domutils.removeClassName(itemTr,\"smartbichart-config-tr-hover\");},this);var obj=this;this.addListener(itemTr,\"click\",function(){var conf=itemTr.config,opts={id:conf.id,text:conf.text,options:{chartex:{colorThemeId:conf.id},colors:conf.colors}};obj.select(conf);obj.closeUp();obj.onSelectColor.fire(obj,opts);},this);};ColorsButton.prototype.select=function(colorTheme){var sid=colorTheme.id||colorTheme;if(!sid){return;}\nthis.selectedColorTheme=colorTheme;var rows=this.menuTbody&&this.menuTbody.children||[];for(var i=rows.length-1;i>=0;i--){var trElem=rows[i];if(trElem.config&&trElem.config.id!=sid){domutils.removeClassName(trElem,\"smartbichart-config-tr-selected\");}else{domutils.addClassName(trElem,\"smartbichart-config-tr-selected\");}}};ColorsButton.prototype.getDropDownWidth=function(){return 200;};ColorsButton.prototype.getDropDownHight=function(){return 250;};ColorsButton.prototype.getCustomThemeColors=function(){var result=[],ret=util.remoteInvokeEx(\"ChartService\",\"getAllChartColors\",[]);if(ret&&ret.succeeded&&ret.result){var allChartColors=ret.result;for(var i=0,len=allChartColors.length;i<len;i++){var ri=allChartColors[i];var config={id:ri.id,text:ri.alias||ri.name,colors:lang.parseJSON(ri.configs).colors,customSetting:ri}\nresult.push(config);}}\nreturn result;};ColorsButton.prototype.getBuiltInThemeColors=function(){var configs=new Array();configs.push({id:'highchart',colors:['#AFD8F8','#F6BD0F','#8BBA00','#FF8E46','#008E8E','#D64646','#8E468E','#588526'],text:'默认'},{id:'bs',colors:[\"#F0A22E\",\"#A5644E\",\"#B58B80\",\"#C3986D\",\"#A19574\",\"#C17529\"],text:'跋涉'},{id:'cw',colors:[\"#72A376\",\"#B0CCB0\",\"#A8CDD7\",\"#C0BEAF\",\"#CEC597\",\"#E8B7B7\"],text:'沉稳'},{id:'cy',colors:[\"#7FD13B\",\"#EA157A\",\"#FEB80A\",\"#00ADDC\",\"#738AC8\",\"#1AB39F\"],text:'穿越'},{id:'df',colors:[\"#CEB966\",\"#9CB084\",\"#6BB1C9\",\"#6585CF\",\"#7E6BC9\",\"#A379BB\"],text:'顶峰'},{id:'ds',colors:[\"#53548A\",\"#438086\",\"#A04DA3\",\"#C4652D\",\"#8B5D3D\",\"#5C92B5\"],text:'都市'},{id:'hl',colors:['#B83D68','#AC66BB','#DE6C36','#F9B639','#CF6DA4','#FA8D3D'],text:'华丽'},{id:'huol',colors:[\"#FF388C\",\"#E40059\",\"#9C007F\",\"#68007F\",\"#005BD3\",\"#00349E\"],text:'活力'},{id:'jq',colors:['#6EA0B0','#CCAF0A','#8D89A4','#748560','#9E9273','#7E848D'],text:'技巧'},{id:'jh',colors:[\"#2DA2BF\",\"#DA1F28\",\"#EB641B\",\"#39639D\",\"#474B78\",\"#7D3C4A\"],text:'聚合'},{id:'lc',colors:[\"#0F6FC6\",\"#009DD9\",\"#0BD0D9\",\"#10CF9B\",\"#FAFAFA\",\"#A5C249\"],text:'流畅'},{id:'mk',colors:[\"#F0AD00\",\"#60B5CC\",\"#E66C7D\",\"#6BB76D\",\"#E88651\",\"#C64847\"],text:'模块'},{id:'ph',colors:[\"#D34817\",\"#9B2D1F\",\"#A28E6A\",\"#956251\",\"#918485\",\"#855D5D\"],text:'平衡'},{id:'sz',colors:[\"#D16349\",\"#CCB400\",\"#8CADAE\",\"#8C7B70\",\"#8FB08C\",\"#D19049\"],text:'市镇'},{id:'sd',colors:[\"#F07F09\",\"#9F2936\",\"#1B587C\",\"#4E8542\",\"#604878\",\"#C19859\"],text:'视点'},{id:'tx',colors:['#FE8637','#7598D9','#B32C16','#F5CD2D','#AEBAD5','#777C84'],text:'凸显'},{id:'xz',colors:[\"#3891A7\",\"#FEB80A\",\"#C32D2E\",\"#84AA33\",\"#964305\",\"#475A8D\"],text:'夏至'},{id:'zz',colors:[\"#A5B592\",\"#F3A447\",\"#E7BC29\",\"#D092A7\",\"#9C85C0\",\"#809EC2\"],text:'纸张'},{id:'zp',colors:[\"#727CA3\",\"#9FB8CD\",\"#D2DA7A\",\"#FADA7A\",\"#B88472\",\"#8E736A\"],text:'质朴'},{id:'zx',colors:[\"#94B6D2\",\"#DD8047\",\"#A5AB81\",\"#D8B25C\",\"#7BA79D\",\"#968C8C\"],text:'中性'},{id:'hd',colors:['#DDDDDD','#B2B2B2','#969696','#808080','#5F5F5F','#4D4D4D'],text:'灰度'},{id:'axpm',colors:[\"#918415\",\"#C47546\",\"#AFB591\",\"#B9945B\",\"#85ADBC\",\"#E5B440\"],text:'暗香扑面'},{id:'fwjt',colors:[\"#50742F\",\"#268868\",\"#33BD56\",\"#4BC5B9\",\"#3163CA\",\"#868686\"],text:'凤舞九天'},{id:'ltsh',colors:[\"#477AB1\",\"#51848E\",\"#7B9B57\",\"#8B8D8C\",\"#8B7396\",\"#E89A53\"],text:'龙腾四海'},{id:'yxls',colors:['#A24A48','#B2935C','#6A9A9A','#B2B787','#91644B','#654A76'],text:'行云流水'});return configs;};","js/smartbi/chartsetting/shortcut/DeleteButton.js":"\nvar BaseButton=jsloader.resolve(\"smartbi.chartsetting.shortcut.BaseButton\");var DeleteButton=function(container,options,chartObj){DeleteButton.superclass.constructor.call(this,container,options,chartObj);this.onDelete=new CustomEvent(\"onDelete\");};lang.extend(DeleteButton,BaseButton);DeleteButton.prototype.destroy=function(){if(this.onDelete){this.onDelete.unsubscribeAll();this.onDelete=null;}\nDeleteButton.superclass.destroy.call(this);};DeleteButton.prototype.getTitle=function(){return\"删除\";};DeleteButton.prototype.getClassName=function(){return\"smartbichart-toolbar-button smartbichart-toolbar-delete-gray\";};DeleteButton.prototype.onMouseEnter=function(){domutils.replaceClassName(this.buttonInput,'smartbichart-toolbar-delete','smartbichart-toolbar-delete-gray');};DeleteButton.prototype.onMouseLeave=function(){domutils.replaceClassName(this.buttonInput,'smartbichart-toolbar-delete-gray','smartbichart-toolbar-delete');};DeleteButton.prototype.doOnClick=function(){this.onDelete.fire();};","js/smartbi/ChartUtil.js":"\nvar util=jsloader.resolve(\"freequery.common.util\");var ChartUtil={setRadioDisabled:function(container,buttonName,isDisable){var radioArray=this.findRadioArray(container,buttonName);if(radioArray&&radioArray!=\"\"){for(var i=0;i<radioArray.length;i++){radioArray[i].disabled=isDisable;}}},getRadioCheckedValue:function(container,buttonName){var radioArray=this.findRadioArray(container,buttonName);if(radioArray&&radioArray!=\"\"){for(var i=0;i<radioArray.length;i++){if(radioArray[i].checked)\nreturn radioArray[i].value;}}},setRadioChecked:function(container,buttonName,radioValue){var radioArray=this.findRadioArray(container,buttonName);if(radioArray&&radioArray!=\"\"){for(var i=0;i<radioArray.length;i++){if(radioArray[i].value==radioValue){radioArray[i].checked=true;return;}}}},findRadioArray:function(container,buttonName){var inputList=container.getElementsByTagName(\"input\");var radioArray=[];for(var idx in inputList){if(inputList[idx].type==\"radio\"&&inputList[idx].name==buttonName){radioArray[radioArray.length]=inputList[idx];}else if(inputList[idx][0]&&inputList[idx][0].type&&inputList[idx][0].type==\"radio\"&&inputList[idx][0].name==buttonName){var len=inputList[idx].length\nfor(var subIdx=0;subIdx<len;subIdx++){if(inputList[idx][subIdx].type==\"radio\"&&inputList[idx][subIdx].name==buttonName){radioArray[radioArray.length]=inputList[idx][subIdx];}}\nbreak;}}\nreturn radioArray;},checkInvalidCharacter:function(value,elementName,allowEmpty){var value=util.trim(value);var re=eval(\"/'|<|>/\");var ret=value.match(re);if(value==\"\"){if(allowEmpty==true){return true;}else{alert(elementName+\"不允许为空!\");}}\nif(ret){alert(elementName+\"含有非法字符：\\\"' < >\\\" \");return false;}\nreturn true;},linear2Angle:function(linear){function getAngle(pt1,pt2){pt1.x=parseFloat(pt1.x);pt1.y=parseFloat(pt1.y);pt2.x=parseFloat(pt2.x);pt2.y=parseFloat(pt2.y);var tga=90;var sy=0-(pt1.y-pt2.y),sx=pt2.x-pt1.x;if(sy==0&&sx==0)\nreturn null;if(sx!=0)\ntga=(Math.atan(sy/sx))*180/Math.PI;if(sy>=0){if(sx>0)\ntga=tga;else if(sx<0)\ntga=tga+180;}else if(sy<0){if(sx>0)\ntga=tga+360;else if(sx<=0)\ntga=tga+180;}else if(sy==0){if(sx>0)\ntga=0;else if(sx<0)\ntga=180;}\nreturn Math.round(tga*10)/10;};return getAngle({x:linear[0],y:linear[1]},{x:linear[2],y:linear[3]});},toSCGradientColor:function(hcGradientColor){if(!hcGradientColor)\nreturn hcGradientColor;if(hcGradientColor.linearGradient){var angle=this.linear2Angle(hcGradientColor.linearGradient);if(hcGradientColor.stops[0][1].indexOf(\"rgb\")!=-1){var beginColor=util.rgbaToHexColor(hcGradientColor.stops[0][1]);var alpha=null;if(beginColor.alpha!=undefined)\nalpha=beginColor.alpha;beginColor=beginColor.color;var endColor=util.rgbaToHexColor(hcGradientColor.stops[1][1]).color;return{beginColor:beginColor,endColor:endColor,alpha:alpha,acnvAngel:angle}}else{return{beginColor:hcGradientColor.stops[0][1],endColor:hcGradientColor.stops[1][1],alpha:1,acnvAngel:angle}}}else{var hexColor=this.linear2Angle(hcGradientColor);return{beginColor:hexColor.color,alpha:hexColor.alpha}}},getColor:function(hexColor,alpha){if(alpha==undefined||alpha==null||alpha===\"\"){return hexColor;}else{return util.getRgbColor(hexColor,alpha);}},toHCGradientColor:function(gradientColor){if(!gradientColor)\nreturn null;var beginColor=this.getColor(gradientColor.beginColor,gradientColor.alpha);var endColor=this.getColor(gradientColor.endColor,gradientColor.alpha);if(!endColor)\nreturn beginColor;if(!beginColor)\nreturn endColor;var angle=gradientColor.acnvAngel,linear=null;if(typeof angle==\"undefined\"||angle==null)\nangle=0;if(angle<0)\nangle=(angle%360)+360;function angle2Radian(a){return a/180*Math.PI;}\nfunction tan(a,decimal){if(typeof decimal==\"undefined\"||decimal==null||decimal<=0)\ndecimal=3;a=a/180*Math.PI;return Math.round(Math.abs(Math.tan(a))*Math.pow(10,decimal))/Math.pow(10,decimal);}\nfunction cotan(a,decimal){if(typeof decimal==\"undefined\"||decimal==null||decimal<=0)\ndecimal=3;a=a/180*Math.PI;return Math.round(1/Math.abs(Math.tan(a))*Math.pow(10,decimal))/Math.pow(10,decimal);}\nfunction angle2Linear(angle){var decimal=3;if(angle==0)\nlinear=[0,0,'100%',0];else if(angle<=45&&angle>0)\nlinear=[0,0,'100%',tan(angle,decimal)*100+'%'];else if(angle<90&&angle>45)\nlinear=[0,0,(cotan(angle,decimal)*100+'%'),'100%'];else if(angle==90)\nlinear=[0,0,0,'100%'];else if(angle<=135&&angle>90)\nlinear=['100%',0,((100-cotan(angle,decimal)*100)+'%'),'100%'];else if(angle<180&&angle>135)\nlinear=['100%',0,0,(tan(angle,decimal)*100+'%')];else if(angle==180)\nlinear=['100%',0,0,0];else if(angle<=225&&angle>180)\nlinear=['100%','100%',0,((100-tan(angle,decimal)*100)+'%')];else if(angle<270&&angle>225)\nlinear=['100%','100%',((100-cotan(angle,decimal)*100)+'%'),0];else if(angle==270)\nlinear=[0,'100%',0,0];else if(angle<=315&&angle>270)\nlinear=[0,'100%',cotan(angle,decimal)*100+'%',0];else if(angle<360&&angle>315)\nlinear=[0,'100%','100%',(100-tan(angle,decimal)*100)+'%'];return linear;}\nreturn{linearGradient:angle2Linear(angle),stops:[[0,beginColor],[1,endColor],]}},getValueByKeys:function(obj,keys){var newObj=null;for(var idx in keys){var key=keys[idx];if(obj.hasOwnProperty(key)){if(newObj==null)\nnewObj={};newObj[key]=obj[key];}else if(key.indexOf(\".\")!=-1){var subKeys=key.split('.');var len=subKeys.length;var tempObj=obj;var flag=true;for(var i=0;i<len;i++){var subKey=subKeys[i];if(tempObj.hasOwnProperty(subKey)){tempObj=tempObj[subKey];}else{flag=false;break;}}\nif(flag){if(newObj==null)\nnewObj={};newObj[key]=tempObj;}}}\nreturn newObj;}};","js/smartbi/chart/options/area.js":"\nvar area={chart:{caption:'',animation:'1',showLegend:'0',legendPosition:'BOTTOM',showBorder:'0',showShadow:'0',chartStyle:'systemSetting',chartLeftMargin:'15',chartRightMargin:'15',chartTopMargin:'15',chartBottomMargin:'15',showValues:'0',connectNullData:'0',nullShow:'0',showToolTip:'1',toolTipBgColor:'#ffffff',toolTipBorderColor:'#c0c0c0',showToolTipShadow:'1',bgColor:'#FFFFFF',bgAlpha:'100',canvasBgColor:'#FFFFFF',canvasBgAlpha:'100',borderColor:'#c0c0c0',borderThickness:'1',canvasBorderColor:'#707070',canvasBorderThickness:'1',xAxisName:'',labelStep:1,staggerLines:1,showLabels:'1',labelDisplay:'WRAP',slantLabels:'1',yAxisName:'',drawAnchors:'0',anchorRadius:'3',anchorSides:'10',showPlotBorder:'1',plotBorderThickness:'1',plotBorderColor:'#909090',divLineColor:\"#C1C1C1\",legendBorderColor:\"#909090\",legendBorderThickness:1,legendBgColor:\"#ffffff\"},chartex:{effect:'0',isStacked:'0',isScroll:'0',onlyDataValueInToolTip:'0',lineEffect:'line',tooltipCrosshairs:\"xy\",tooltipCrosshairsWidth:'1',tooltipCrosshairsColor:'#555555',tooltipCrosshairsDashStyle:'ShortDash',style:{font:{caption:{font:'Verdana',color:'#555555',bold:'bold',size:13},legend:{font:'Verdana',color:'#555555',bold:'normal',size:12},tooltip:{font:'Verdana',color:'#555555',bold:'normal',size:12},dataValues:{font:'Verdana',color:'#555555',bold:'normal',size:12},xAxisName:{font:'Verdana',color:'#555555',bold:'bold',size:12},dataLabels:{font:'Verdana',color:'#555555',bold:'normal',size:12},yAxisName:{font:'Verdana',color:'#555555',bold:'bold',size:12},yAxisValues:{font:'Verdana',color:'#555555',bold:'normal',size:12},trendValues:{size:12}}}}};","js/smartbi/chart/options/bar.js":"\nvar bar={chart:{caption:'',animation:'1',showLegend:'0',legendPosition:'BOTTOM',showBorder:'0',chartStyle:'systemSetting',chartLeftMargin:'15',chartRightMargin:'15',chartTopMargin:'15',chartBottomMargin:'15',showValues:'0',connectNullData:'0',nullShow:'0',showToolTip:'1',toolTipBgColor:'#ffffff',toolTipBorderColor:'#c0c0c0',showToolTipShadow:'1',bgColor:'#FFFFFF',bgAlpha:'100',canvasBgColor:'#FFFFFF',canvasBgAlpha:'100',borderColor:'#c0c0c0',borderThickness:'1',canvasBorderColor:'#707070',canvasBorderThickness:'1',xAxisName:'',labelStep:1,staggerLines:1,showLabels:'1',labelDisplay:'WRAP',slantLabels:'1',yAxisName:'',showYAxisValues:'1',showPlotBorder:'1',plotBorderColor:'#909090',plotBorderThickness:'1',plotGradientColor:'#ffffff',plotFillAngle:'0',divLineColor:\"#C1C1C1\",legendBorderColor:\"#909090\",legendBorderThickness:1,legendBgColor:\"#ffffff\"},chartex:{effect:'0',is3D:'0',isStacked:'0',isScroll:'0',onlyDataValueInToolTip:'0',style:{font:{caption:{font:'Verdana',color:'#555555',bold:'bold',size:13},legend:{font:'Verdana',color:'#555555',bold:'normal',size:12},tooltip:{font:'Verdana',color:'#555555',bold:'normal',size:12},dataValues:{font:'Verdana',color:'#555555',bold:'normal',size:12},xAxisName:{font:'Verdana',color:'#555555',bold:'bold',size:12},dataLabels:{font:'Verdana',color:'#555555',bold:'normal',size:12},yAxisName:{font:'Verdana',color:'#555555',bold:'bold',size:12},yAxisValues:{font:'Verdana',color:'#555555',bold:'normal',size:12},trendValues:{size:12}}}}};","js/smartbi/chart/options/bubble.js":"\nvar bubble={chart:{caption:'',animation:'1',showLegend:'0',legendPosition:'BOTTOM',showBorder:'0',chartStyle:'systemSetting',chartLeftMargin:'15',chartRightMargin:'15',chartTopMargin:'15',chartBottomMargin:'15',showValues:'0',connectNullData:'0',nullShow:'0',showToolTip:'1',toolTipBgColor:'#ffffff',toolTipBorderColor:'#c0c0c0',showToolTipShadow:'1',bgColor:'#FFFFFF',bgAlpha:'100',canvasBgColor:'#FFFFFF',canvasBgAlpha:'100',borderColor:'#c0c0c0',borderThickness:'1',canvasBorderColor:'#707070',canvasBorderThickness:'1',xAxisName:'',showXAxisValues:'1',yAxisName:'',showYAxisValues:'1',showPlotBorder:'1',plotBorderThickness:'1',divLineColor:\"#C1C1C1\",legendBorderColor:\"#909090\",legendBorderThickness:1,legendBgColor:\"#ffffff\"},chartex:{effect:'0',onlyDataValueInToolTip:'0',tooltipCrosshairs:\"xy\",tooltipCrosshairsWidth:'1',tooltipCrosshairsColor:'#555555',tooltipCrosshairsDashStyle:'ShortDash',style:{font:{caption:{font:'Verdana',color:'#555555',bold:'bold',size:13},legend:{font:'Verdana',color:'#555555',bold:'normal',size:12},tooltip:{font:'Verdana',color:'#555555',bold:'normal',size:12},dataValues:{font:'Verdana',color:'#555555',bold:'normal',size:12},xAxisName:{font:'Verdana',color:'#555555',bold:'bold',size:12},xAxisValues:{font:'Verdana',color:'#555555',bold:'normal',size:12},yAxisName:{font:'Verdana',color:'#555555',bold:'bold',size:12},yAxisValues:{font:'Verdana',color:'#555555',bold:'normal',size:12},trendValues:{size:12}}}}};","js/smartbi/chart/options/column.js":"\nvar column={chart:{caption:'',animation:'1',showLegend:'0',legendPosition:'BOTTOM',showBorder:'0',chartStyle:'systemSetting',chartLeftMargin:'15',chartRightMargin:'15',chartTopMargin:'15',chartBottomMargin:'15',showValues:'0',connectNullData:'0',nullShow:'0',showToolTip:'1',toolTipBgColor:'#ffffff',toolTipBorderColor:'#c0c0c0',showToolTipShadow:'1',bgColor:'#FFFFFF',bgAlpha:'100',canvasBgColor:'FFFFFF',canvasBgAlpha:'100',borderColor:'#c0c0c0',borderThickness:'1',canvasBorderColor:'#707070',canvasBorderThickness:'1',xAxisName:'',labelStep:1,staggerLines:1,showLabels:'1',labelDisplay:'WRAP',slantLabels:'1',yAxisName:'',showYAxisValues:'1',showPlotBorder:'1',plotBorderColor:'#909090',plotBorderThickness:'1',plotGradientColor:'#ffffff',plotFillAngle:'270',plotFillRatio:'20,80',divLineColor:\"#C1C1C1\",legendBorderColor:\"#909090\",legendBorderThickness:1,legendBgColor:\"#ffffff\"},chartex:{effect:'0',is3D:'0',isStacked:'0',isScroll:'0',onlyDataValueInToolTip:'0',style:{font:{caption:{font:'Verdana',color:'#555555',bold:'bold',size:13},legend:{font:'Verdana',color:'#555555',bold:'normal',size:12},tooltip:{font:'Verdana',color:'#555555',bold:'normal',size:12},dataValues:{font:'Verdana',color:'#555555',bold:'normal',size:12},xAxisName:{font:'Verdana',color:'#555555',bold:'bold',size:12},dataLabels:{font:'Verdana',color:'#555555',bold:'normal',size:12},yAxisName:{font:'Verdana',color:'#555555',bold:'bold',size:12},yAxisValues:{font:'Verdana',color:'#555555',bold:'normal',size:12},trendValues:{size:12}}}}};","js/smartbi/chart/options/combination.js":"\nvar combination={chart:{caption:'',animation:'1',showLegend:'0',legendPosition:'BOTTOM',showBorder:'0',showShadow:'0',chartStyle:'systemSetting',chartLeftMargin:'15',chartRightMargin:'15',chartTopMargin:'15',chartBottomMargin:'15',showValues:'0',connectNullData:'0',nullShow:'0',showToolTip:'1',toolTipBgColor:'#ffffff',toolTipBorderColor:'#c0c0c0',showToolTipShadow:'1',bgColor:'#FFFFFF',bgAlpha:'100',canvasBgColor:'#FFFFFF',canvasBgAlpha:'100',borderColor:'#c0c0c0',borderThickness:'1',canvasBorderColor:'#707070',canvasBorderThickness:'1',xAxisName:'',labelStep:1,staggerLines:1,showLabels:'1',labelDisplay:'WRAP',slantLabels:'1',yAxisName:'',showYAxisValues:'1',lineThickness:'2',drawAnchors:'1',anchorRadius:'3',anchorSides:'10',showPlotBorder:'1',plotBorderColor:'#909090',plotBorderThickness:'1',plotGradientColor:'#ffffff',plotFillAngle:'270',divLineColor:\"#C1C1C1\",legendBorderColor:\"#909090\",legendBorderThickness:1,legendBgColor:\"#ffffff\"},chartex:{effect:'0',is3D:'0',isStacked:'0',isScroll:'0',dashStyle:'Solid',onlyDataValueInToolTip:'0',style:{font:{caption:{font:'Verdana',color:'#555555',bold:'bold',size:13},legend:{font:'Verdana',color:'#555555',bold:'normal',size:12},tooltip:{font:'Verdana',color:'#555555',bold:'normal',size:12},dataValues:{font:'Verdana',color:'#555555',bold:'normal',size:12},xAxisName:{font:'Verdana',color:'#555555',bold:'bold',size:12},dataLabels:{font:'Verdana',color:'#555555',bold:'normal',size:12},yAxisName:{font:'Verdana',color:'#555555',bold:'bold',size:12},yAxisValues:{font:'Verdana',color:'#555555',bold:'normal',size:12},trendValues:{size:12}}}}};","js/smartbi/chart/options/donut.js":"\nvar donut={chart:{caption:'',animation:'1',showLegend:'0',legendPosition:'BOTTOM',showBorder:'0',chartStyle:'systemSetting',chartLeftMargin:2,chartRightMargin:2,chartTopMargin:2,chartBottomMargin:2,showValues:'0',connectNullData:'0',nullShow:'0',showToolTip:'1',toolTipBgColor:'#ffffff',toolTipBorderColor:'#c0c0c0',showToolTipShadow:'1',bgColor:'#FFFFFF',bgAlpha:'100',borderColor:'#c0c0c0',borderThickness:'1',showPlotBorder:'1',showLabels:'1',labelSepChar:',',legendBorderColor:\"#909090\",legendBorderThickness:1,legendBgColor:\"#ffffff\"},chartex:{effect:'0',is3D:'0',onlyDataValueInToolTip:'0',showDataLabels:'1',showValueType:'percent',style:{font:{caption:{font:'Verdana',color:'#555555',bold:'bold',size:13},legend:{font:'Verdana',color:'#555555',bold:'normal',size:12},tooltip:{font:'Verdana',color:'#555555',bold:'normal',size:12},dataLabels:{font:'Verdana',color:'#555555',bold:'normal',size:12}}}}};","js/smartbi/chart/options/dualYCombination.js":"\nvar dualYCombination={chart:{caption:'',animation:'1',showLegend:'0',legendPosition:'BOTTOM',showBorder:'0',showShadow:'0',chartStyle:'systemSetting',chartLeftMargin:'15',chartRightMargin:'15',chartTopMargin:'15',chartBottomMargin:'15',showValues:'0',connectNullData:'0',nullShow:'0',showToolTip:'1',toolTipBgColor:'#ffffff',toolTipBorderColor:'#c0c0c0',showToolTipShadow:'1',bgColor:'#FFFFFF',bgAlpha:'100',canvasBgColor:'#FFFFFF',canvasBgAlpha:'100',borderColor:'#c0c0c0',borderThickness:'1',canvasBorderColor:'#707070',canvasBorderThickness:'1',xAxisName:'',labelStep:1,staggerLines:1,showLabels:'1',labelDisplay:'WRAP',slantLabels:'1',PYAxisName:'',SYAxisName:'',showYAxisValues:'1',lineThickness:'2',drawAnchors:'1',anchorRadius:'3',anchorSides:'10',showPlotBorder:'1',plotBorderColor:'#909090',plotBorderThickness:'1',plotGradientColor:'#ffffff',plotFillAngle:'270',divLineColor:\"#C1C1C1\",legendBorderColor:\"#909090\",legendBorderThickness:1,legendBgColor:\"#ffffff\"},chartex:{effect:'0',is3D:'0',isStacked:'0',isScroll:'0',onlyDataValueInToolTip:'0',style:{font:{caption:{font:'Verdana',color:'#555555',bold:'bold',size:13},legend:{font:'Verdana',color:'#555555',bold:'normal',size:12},tooltip:{font:'Verdana',color:'#555555',bold:'normal',size:12},dataValues:{font:'Verdana',color:'#555555',bold:'normal',size:12},xAxisName:{font:'Verdana',color:'#555555',bold:'bold',size:12},dataLabels:{font:'Verdana',color:'#555555',bold:'normal',size:12},yAxisName:{font:'Verdana',color:'#555555',bold:'bold',size:12},yAxisValues:{font:'Verdana',color:'#555555',bold:'normal',size:12},trendValues:{size:12}}}}};","js/smartbi/chart/options/funnel.js":"\nvar funnel={};","js/smartbi/chart/options/gauge.js":"\nvar gauge={chart:{caption:'',animation:'1',showLegend:'0',legendPosition:'BOTTOM',showBorder:'0',chartStyle:'systemSetting',chartLeftMargin:'60',chartRightMargin:'60',chartTopMargin:'10',chartBottomMargin:'35',showValue:'0',connectNullData:'0',nullShow:'0',showToolTip:'1',toolTipBgColor:'#ffffff',toolTipBorderColor:'#c0c0c0',showToolTipShadow:'1',bgColor:'#FFFFFF',bgAlpha:'100',canvasBgColor:'#FFFFFF',canvasBgAlpha:'100',borderColor:'#c0c0c0',borderThickness:'1',canvasBorderColor:'#707070',canvasBorderThickness:'1',xAxisName:'',labelStep:1,staggerLines:1,labelDisplay:'AUTO',slantLabels:'1',yAxisName:'',gaugeStyle:'1',gaugeScaleAngle:'180',manageValueOverlapping:'0',legendBorderColor:\"#909090\",legendBorderThickness:1,legendBgColor:\"#ffffff\"},chartex:{effect:'0',is3D:'0',isStacked:'0',isScroll:'0',onlyDataValueInToolTip:'0',style:{font:{caption:{font:'Verdana',color:'#555555',bold:'bold',size:13},tooltip:{font:'Verdana',color:'#555555',bold:'normal',size:12},value:{font:'Verdana',color:'#ff0000',bold:'bold',size:12},tickValues:{font:'Verdana',color:'#000000',bold:'normal',size:12},limitValues:{font:'Verdana',color:'#000000',bold:'normal',size:12}}}}};","js/smartbi/chart/options/line.js":"\nvar line={chart:{caption:'',animation:'1',showLegend:'0',legendPosition:'BOTTOM',showBorder:'0',showShadow:'0',chartStyle:'systemSetting',chartLeftMargin:'15',chartRightMargin:'15',chartTopMargin:'15',chartBottomMargin:'15',showValues:'0',connectNullData:'0',nullShow:'0',showToolTip:'1',toolTipBgColor:'#ffffff',toolTipBorderColor:'#c0c0c0',showToolTipShadow:'1',bgColor:'#FFFFFF',bgAlpha:'100',canvasBgColor:'#FFFFFF',canvasBgAlpha:'100',borderColor:'#c0c0c0',borderThickness:'1',canvasBorderColor:'#707070',canvasBorderThickness:'1',xAxisName:'',labelStep:1,staggerLines:1,showLabels:'1',labelDisplay:'WRAP',slantLabels:'1',yAxisName:'',showYAxisValues:'1',lineThickness:'2',drawAnchors:'1',anchorRadius:'3',anchorSides:'10',divLineColor:\"#C1C1C1\",legendBorderColor:\"#909090\",legendBorderThickness:1,legendBgColor:\"#ffffff\"},chartex:{effect:'0',isScroll:'0',onlyDataValueInToolTip:'0',lineEffect:'line',dashStyle:'Solid',tooltipCrosshairs:\"xy\",tooltipCrosshairsWidth:'1',tooltipCrosshairsColor:'#555555',tooltipCrosshairsDashStyle:'ShortDash',style:{font:{caption:{font:'Verdana',color:'#555555',bold:'bold',size:13},legend:{font:'Verdana',color:'#555555',bold:'normal',size:12},tooltip:{font:'Verdana',color:'#555555',bold:'normal',size:12},dataValues:{font:'Verdana',color:'#555555',bold:'normal',size:12},xAxisName:{font:'Verdana',color:'#555555',bold:'bold',size:12},dataLabels:{font:'Verdana',color:'#555555',bold:'normal',size:12},yAxisName:{font:'Verdana',color:'#555555',bold:'bold',size:12},yAxisValues:{font:'Verdana',color:'#555555',bold:'normal',size:12},trendValues:{size:12}}}}};","js/smartbi/chart/options/map.js":"\nvar map={title:{style:{fontFamily:\"Microsoft YaHei\",color:\"#000000\",fontSize:16,fontWeight:\"bold\"}},plotOptions:{map:{color:'#ECF7F9',borderColor:'#58B3C2',dataLabels:{enabled:true,style:{color:'#000000',fontSize:12,fontFamily:\"SimSun\",fontWeight:\"normal\",HcTextStroke:null},format:'{point.name}'},states:{hover:{brightness:-0.2}}}},legend:{enabled:true,align:\"left\",verticalAlign:\"bottom\",layout:\"vertical\",floating:false,itemMarginBottom:5,symbolWidth:10,symbolHeight:10,itemStyle:{color:'#000000',fontSize:12,fontFamily:\"SimSun\",fontWeight:\"normal\"}},chart:{backgroundColor:\"#ffffff\",borderWidth:0,borderColor:\"#4572A7\"}};","js/smartbi/chart/options/pie.js":"\nvar pie={chart:{caption:'',animation:'1',showLegend:'0',legendPosition:'BOTTOM',showBorder:'0',chartStyle:'systemSetting',chartLeftMargin:2,chartRightMargin:2,chartTopMargin:2,chartBottomMargin:2,showValues:'0',connectNullData:'0',nullShow:'0',showToolTip:'1',toolTipBgColor:'#ffffff',toolTipBorderColor:'#c0c0c0',showToolTipShadow:'1',bgColor:'#FFFFFF',bgAlpha:'100',borderColor:'#c0c0c0',borderThickness:'1',showPlotBorder:'1',showLabels:'1',labelSepChar:',',legendBorderColor:\"#909090\",legendBorderThickness:1,legendBgColor:\"#ffffff\"},chartex:{effect:'0',is3D:'0',onlyDataValueInToolTip:'0',showDataLabels:'1',showValueType:'percent',style:{font:{caption:{font:'Verdana',color:'#555555',bold:'bold',size:13},legend:{font:'Verdana',color:'#555555',bold:'normal',size:12},tooltip:{font:'Verdana',color:'#555555',bold:'normal',size:12},dataLabels:{font:'Verdana',color:'#555555',bold:'normal',size:12}}}}};","js/smartbi/chart/options/radar.js":"\nvar radar={chart:{caption:'',animation:'1',showLegend:'0',legendPosition:'BOTTOM',showBorder:'0',chartStyle:'systemSetting',chartLeftMargin:'15',chartRightMargin:'15',chartTopMargin:'15',chartBottomMargin:'15',showValues:'0',connectNullData:'0',nullShow:'0',showToolTip:'1',toolTipBgColor:'#ffffff',toolTipBorderColor:'#c0c0c0',showToolTipShadow:'1',bgColor:'#FFFFFF',bgAlpha:'100',canvasBgColor:'#FFFFFF',canvasBgAlpha:'100',borderColor:'#c0c0c0',borderThickness:'1',canvasBorderColor:'#707070',canvasBorderThickness:'1',showLabels:'1',labelStep:1,staggerLines:1,labelDisplay:'AUTO',slantLabels:'1',showYAxisValues:'1',yAxisValuesStep:'1',drawAnchors:'1',anchorRadius:'3',anchorSides:'10',showPlotBorder:'0',radarBorderColor:'#717170',radarBorderThickness:'2',radarFillColor:'#EEEEEE',radarFillAlpha:'50',radarSpikeColor:'#717170',radarSpikeThickness:'1',legendBorderColor:\"#909090\",legendBorderThickness:1,legendBgColor:\"#ffffff\"},chartex:{effect:'0',onlyDataValueInToolTip:'0',style:{font:{caption:{font:'Verdana',color:'#555555',bold:'bold',size:13},legend:{font:'Verdana',color:'#555555',bold:'normal',size:12},tooltip:{font:'Verdana',color:'#555555',bold:'normal',size:12},dataValues:{font:'Verdana',color:'#555555',bold:'normal',size:12},dataLabels:{font:'Verdana',color:'#555555',bold:'normal',size:12},yAxisValues:{font:'Verdana',color:'#555555',bold:'normal',size:12}}}}};","js/smartbi/chart/options/scatter.js":"\nvar scatter={chart:{caption:'',animation:'1',showLegend:'0',legendPosition:'BOTTOM',showBorder:'0',chartStyle:'systemSetting',chartLeftMargin:'15',chartRightMargin:'15',chartTopMargin:'15',chartBottomMargin:'15',showValues:'0',connectNullData:'0',nullShow:'0',showToolTip:'1',toolTipBgColor:'#ffffff',toolTipBorderColor:'#c0c0c0',showToolTipShadow:'1',bgColor:'#FFFFFF',bgAlpha:'100',canvasBgColor:'#FFFFFF',canvasBgAlpha:'100',borderColor:'#c0c0c0',borderThickness:'1',canvasBorderColor:'#707070',canvasBorderThickness:'1',xAxisName:'',showXAxisValues:'1',yAxisName:'',showYAxisValues:'1',numVDivlines:'9',anchorRadius:'3',anchorSides:'3',anchorBorderThickness:'1',drawAnchors:'1',divLineColor:\"#C1C1C1\",legendBorderColor:\"#909090\",legendBorderThickness:1,legendBgColor:\"#ffffff\"},chartex:{effect:'0',onlyDataValueInToolTip:'0',tooltipCrosshairs:\"xy\",tooltipCrosshairsWidth:'1',tooltipCrosshairsColor:'#555555',tooltipCrosshairsDashStyle:'ShortDash',style:{font:{caption:{font:'Verdana',color:'#555555',bold:'bold',size:13},legend:{font:'Verdana',color:'#555555',bold:'normal',size:12},tooltip:{font:'Verdana',color:'#555555',bold:'normal',size:12},dataValues:{font:'Verdana',color:'#555555',bold:'normal',size:12},xAxisName:{font:'Verdana',color:'#555555',bold:'bold',size:12},xAxisValues:{font:'Verdana',color:'#555555',bold:'normal',size:12},yAxisName:{font:'Verdana',color:'#555555',bold:'bold',size:12},yAxisValues:{font:'Verdana',color:'#555555',bold:'normal',size:12},trendValues:{size:12}}}}};","js/smartbi/chart/options/utils.js":"\nvar utils={reject:function(obj1,obj2,type,_obj3){if(utils.isPlainObject(obj1)&&utils.isPlainObject(obj2)){for(var p in obj1){if(obj1.hasOwnProperty(p)&&(p in obj2)){var v2=obj2[p];if(_obj3===undefined){_obj3=type&&utils.protectedProps[type]||null;}\nif(utils.isPrimitive(v2)){if(!_obj3||_obj3[p]===undefined){delete obj1[p];}}else{var v3=_obj3&&_obj3[p];if(v3===undefined){v3=null;}\nutils.reject(obj1[p],v2,type,v3);}}}}\nreturn obj1;},merge:function(obj1,obj2){var args=Array.prototype.slice.call(arguments,1);utils.forEach(args,function(obj){obj1=utils.isPlainObject(obj1)?obj1:(utils.isArray(obj)?[]:{});for(var p in obj){if(obj.hasOwnProperty(p)){var v=obj[p];if(utils.isPrimitive(v)){obj1[p]=v;}else{obj1[p]=utils.merge(obj1[p],v);}}}});return obj1;},isPrimitive:function(val){return val===null||('object'!==typeof val&&'function'!==typeof val);},isArray:Array.isArray||function(val){return getConstructorName(val)==='Array';},isPlainObject:function(val){return getConstructorName(val)==='Object';},forEach:Array.prototype.forEach?function(arr,fn){arr.forEach(fn);}:function(arr,fn){for(var i=0,len=arr.length;i<len;i++){fn(arr[i],i,arr);}},processDefaultOptionsOnTypeChanged:function(defaultOptions,chartOptions,newChartType,oldChartType,getDefOptsFn){if(newChartType!=oldChartType){var marginProps={chart:{chartLeftMargin:'15',chartRightMargin:'15',chartTopMargin:'15',chartBottomMargin:'15'}};var xyTypes=\"column,bar,area,line,scatter,bubble,combination,dualYCombination,waterfall,\";if(xyTypes.indexOf(oldChartType+\",\")>=0&&xyTypes.indexOf(newChartType+\",\")>=0){;}else{chartOptions=this.reject(chartOptions,marginProps);}}\nreturn this.processDefaultOptions(defaultOptions,chartOptions,newChartType,getDefOptsFn);},excludeExtendAttrs:[\"dataset\",\"data\",\"categories\",\"chartDatas\",\"lineset\",\"trendLines\",\"vTrendLines\"],processDefaultOptions:function(defaultOptions,chartOptions,chartType,getDefOptsFn){var defaultOpts=jQuery.extend(true,null,defaultOptions);var excludeExtendAttrs=utils.excludeExtendAttrs;var defineOpts=chartOptions;var tempObj={};for(var i in excludeExtendAttrs){var attr=excludeExtendAttrs[i];var attrValue=defineOpts[attr];if(attrValue!==undefined){tempObj[attr]=attrValue;delete defineOpts[attr];}}\nvar axis=defineOpts.axis;if(axis){if(axis.xAxis){defineOpts.xAxis=axis.xAxis;}\nif(axis.yAxis||axis.syAxis){defineOpts.yAxis=axis.syAxis?[axis.yAxis||null,axis.syAxis]:axis.yAxis;}\ndelete defineOpts.axis;}\nvar options=jQuery.extend(true,defaultOpts,defineOpts);for(var attr in tempObj){var attrValue=tempObj[attr];defineOpts[attr]=attrValue;options[attr]=attrValue;}\nreturn options;},protectedProps:{column:{plotOptions:{series:{stacking:''}}},bar:{plotOptions:{series:{stacking:''}}},area:{plotOptions:{series:{stacking:''}}},line:{plotOptions:{series:{lineEffect:'defaultValue',isSpline:false,step:false}}},donut:{plotOptions:{series:{innerSize:0}}},gauge:{yAxis:{startAngle:-135,endAngleKey:135,centerX:'50%',centerY:'50%',paneSize:''}}}},getConstructorName=function(o){if(o!=null&&o.constructor!=null){return Object.prototype.toString.call(o).slice(8,-1);}else{return'';}};","js/smartbi/chart/options/waterfall.js":"\nvar waterfall={chart:{caption:'',animation:'1',showLegend:'0',legendPosition:'BOTTOM',showBorder:'0',chartStyle:'systemSetting',chartLeftMargin:'15',chartRightMargin:'15',chartTopMargin:'15',chartBottomMargin:'15',showValues:'0',connectNullData:'0',nullShow:'0',showToolTip:'1',toolTipBgColor:'#ffffff',toolTipBorderColor:'#c0c0c0',showToolTipShadow:'1',bgColor:'#FFFFFF',bgAlpha:'100',canvasBgColor:'#FFFFFF',canvasBgAlpha:'100',borderColor:'#c0c0c0',borderThickness:'1',canvasBorderColor:'#707070',canvasBorderThickness:'1',xAxisName:'',labelStep:1,staggerLines:1,showLabels:'1',labelDisplay:'WRAP',yAxisName:'',showYAxisValues:'1',connectorColor:'',connectorDashed:'1',showSumAtEnd:'1',sumLabel:'',lastDataIsSum:'0',divLineColor:\"#C1C1C1\",legendBorderColor:\"#909090\",legendBorderThickness:1,legendBgColor:\"#ffffff\"},chartex:{effect:'0',onlyDataValueInToolTip:'0',style:{font:{caption:{font:'Verdana',color:'#555555',bold:'bold',size:13},legend:{font:'Verdana',color:'#555555',bold:'normal',size:12},tooltip:{font:'Verdana',color:'#555555',bold:'normal',size:12},dataValues:{font:'Verdana',color:'#555555',bold:'normal',size:12},xAxisName:{font:'Verdana',color:'#555555',bold:'bold',size:12},dataLabels:{font:'Verdana',color:'#555555',bold:'normal',size:12},yAxisName:{font:'Verdana',color:'#555555',bold:'bold',size:12},yAxisValues:{font:'Verdana',color:'#555555',bold:'normal',size:12},trendValues:{size:12}}}}};","js/bof/olapquery/param/OlapParamMemberChoose.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var OlapParamTreePanel=jsloader.resolve(\"bof.olapquery.param.OlapParamTreePanel\");var dialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var OlapParamMemberChoose=function(parentObject,width,dropdownParent){this.parent=parentObject;this.ondropDown=new CustomEvent(\"dropDown\",this);this.onselectChange=new CustomEvent(\"selectChange\",this);this.oneditChange=new CustomEvent(\"editChange\",this);this.panel=document.createElement(\"div\");this.panel.style.height=OlapParamMemberChoose.DefaultHeight;this.panel.className=\"combobox-panel\";this.setWidth(width);this.parent.appendChild(this.panel);this.edit=document.createElement(\"input\");this.edit.readOnly=true;this.edit.style.width=width-OlapParamMemberChoose.ButtonWidth-2;this.edit.style.height=OlapParamMemberChoose.DefaultHeight;this.edit.type=\"text\";this.edit.className=\"combobox-edit\";this.panel.appendChild(this.edit);this.btn=document.createElement(\"input\");this.btn.type=\"button\";this.btn.style.width=OlapParamMemberChoose.ButtonWidth;this.btn.style.height=OlapParamMemberChoose.DefaultHeight;this.btn.className=\"combobox-button\";this.panel.appendChild(this.btn);this.addListener(this.btn,\"click\",this.btnClick,this);this.OlapParamTreePanel=new OlapParamTreePanel(dropdownParent?dropdownParent:this.parent,this);}\nlang.extend(OlapParamMemberChoose,Module);OlapParamMemberChoose.prototype.destroy=function(){this.clear();this.ondropDown=null;this.onselectChange=null;this.paramPanel=null;this.removeListener(this.edit,\"change\",this.editChange);this.removeListener(this.edit,\"keyup\",this.editKeyup);this.removeListener(this.edit,\"blur\",this.editBlur);try{domutils.destroyNode(this.edit);}catch(e){}\nthis.edit=null;this.removeListener(this.btn,\"click\",this.btnClick);try{domutils.destroyNode(this.btn);}catch(e){}\nthis.btn=null;try{domutils.destroyNode(this.panel);}catch(e){}\nthis.panel=null;this.parent=null;if(this.OlapParamTreePanel){this.OlapParamTreePanel.destroy();this.OlapParamTreePanel=null;}\nOlapParamMemberChoose.superclass.destroy.call(this);}\nOlapParamMemberChoose.ButtonWidth=15;OlapParamMemberChoose.DefaultHeight=16;OlapParamMemberChoose.prototype.setWidth=function(width){this.panel.style.width=width;}\nOlapParamMemberChoose.prototype.render=function(olapParam){this.multSelect=(olapParam.type==\"MemberSet\");this.olapParam=olapParam;if(olapParam.currentDisplayValue)\nthis.edit.value=olapParam.currentDisplayValue;if(olapParam.type==\"MemberSet\"&&olapParam.currentValue){try{this.currentSettingValue=lang.parseJSON(olapParam.currentValue);}catch(e){this.currentSettingValue=new Array();this.currentSettingValue.push(olapParam.currentValue);}}\nif(!olapParam.useDefaultValue){this.selectedId=olapParam.currentValue?olapParam.currentValue:\"\";this.edit.value=olapParam.currentDisplayValue?olapParam.currentDisplayValue:\"\";return;}\nif(olapParam.defaultType==\"CONSTLIST\"){var dValue=lang.parseJSON(olapParam.defaultValue);this.selectedId=dValue[0][0];this.edit.value=dValue[0][1];}else if(olapParam.defaultType==\"MDX\"){var dValue=olapParam.defaultValue;if(dValue!=\"\"){var result=this.paramPanel.getParamDefaultValue(olapParam.id);if(result&&result.length>1){this.selectedId=result[0];this.edit.value=result[1];}else{return false;}}}};OlapParamMemberChoose.prototype.getOffset=function(obj){var p=new Object();p.left=0;p.top=0;while(obj){p.left+=obj.offsetLeft-obj.scrollLeft;p.top+=obj.offsetTop-obj.scrollTop;obj=obj.offsetParent;}\nreturn p;}\nOlapParamMemberChoose.prototype.getViewport=function(){var mode=document.compatMode;var result=new Object();if(mode||domutils.isIE()){switch(mode){case'CSS1Compat':result.width=document.documentElement.clientWidth;result.height=document.documentElement.clientHeight;break;default:result.width=document.body.clientWidth;result.height=document.body.clientHeight;break;}}\nreturn result;};OlapParamMemberChoose.prototype.setHightDomObject=function(hightDomObject){this.hightDomObject=hightDomObject;}\nOlapParamMemberChoose.prototype.getHightDomObject=function(){return this.hightDomObject;}\nOlapParamMemberChoose.prototype.getDropDownHight=function(){var ho=this.getHightDomObject();var DEFAULT_HEIGHT=100;var RESERVE_HEIGHT=30;var height=DEFAULT_HEIGHT;if(ho!=null&&ho.style!=null)\nheight=ho.style.pixelHeight-RESERVE_HEIGHT;return height;}\nOlapParamMemberChoose.prototype.btnClick=function(){var dialogConfig={};if(this.olapParam.type==\"MemberSet\"){dialogConfig.title=\"选择成员集\";}else{dialogConfig.title=\"选择成员\";}\ndialogConfig.size=dialogFactory.size.LARGE;dialogConfig.fullName=\"bof.olapquery.olapquery.OlapQueryChooseMemberDialog\";var params=[this.olapParam,this];dialogFactory.showDialog(dialogConfig,params,this.afterChooseMember,this);}\nOlapParamMemberChoose.prototype.afterChooseMember=function(ok,members){if(!ok)return;if(members==null)return;var newValue=new Array();var newId=new Array();if(this.olapParam.type==\"MemberSet\"){for(var i=0;i<members.length;i++){newValue.push(members[i].alias);newId.push(members[i].id);}\nnewValue=newValue.join(\",\");newId=lang.toJSONString(newId);}else{newValue=members[0].alias;newId=members[0].id;}\nif(newValue!=null){if(this.selectedValue!=newValue){this.edit.value=newValue;this.selectedId=newId;this.selectedValue=newValue;this.olapParam.currentDisplayValue=newValue;this.olapParam.currentValue=newId;this.onselectChange.fire(this,this.selectedId,newId,this.selectedValue,newValue);}}}\nOlapParamMemberChoose.prototype.doDropDown=function(){if(this.paramPanel&&!this.paramPanel.paramsInited[this.olapParam.id])\nthis.OlapParamTreePanel.initTree(this.olapParam,this.parentFieldName,this.multSelect,this.checkDescendents);this.ondropDown.fire(this);}\nOlapParamMemberChoose.prototype.getEditReadOnly=function(){return this.edit.readOnly;}\nOlapParamMemberChoose.prototype.setEditReadOnly=function(readonly){this.edit.readOnly=readonly;}\nOlapParamMemberChoose.prototype.setSelectedItem=function(id,name,add){if(!id)\nreturn false;if(add==null)\nadd=false;this.selectedId=id;var selectedObject=id;try{selectedObject=lang.parseJSON(id);}catch(e){selectedObject=id;}\nthis.selectedObject=selectedObject;this.selectedValue=name;this.edit.value=name;if(id&&!this.defaultId){this.defaultId=id;this.defaultValue=name;}}\nOlapParamMemberChoose.prototype.editBlur=function(){if(this.old_selected_id!=this.selectedId)\nthis.onselectChange.fire(this,this.old_selected_id,this.selectedId,this.old_selected_id,this.selectedValue);this.old_selected_id=this.selectedId;}\nOlapParamMemberChoose.prototype.editChange=function(){this.oneditChange.fire(this,this.edit.value);}\nOlapParamMemberChoose.prototype.editKeyup=function(){this.selectedId=this.edit.value;this.selectedValue=this.edit.value;var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");var ev=eventutil.getEvent();if(ev.charCode==13)\n{if(this.old_selected_id!=this.selectedId)\nthis.onselectChange.fire(this,this.old_selected_id,this.selectedId,this.old_selected_id,this.selectedValue);this.old_selected_id=this.selectedId;}}\nOlapParamMemberChoose.prototype.getSelectedId=function(){if(this.selectedId!=\"\")\nreturn this.selectedId;else\nreturn this.edit.value;}\nOlapParamMemberChoose.prototype.getSelectedText=function(){return this.edit.value;}\nOlapParamMemberChoose.prototype.clear=function(){}\nOlapParamMemberChoose.prototype.setAttribute=function(name,value){this[name]=value;}\nOlapParamMemberChoose.prototype.getAttribute=function(name){return this[name];}\nOlapParamMemberChoose.prototype.itemsCount=function(){}\nOlapParamMemberChoose.prototype.setReadOnly=function(readonly){this.edit.readOnly=readonly;}\nOlapParamMemberChoose.prototype.getReadOnly=function(){return this.edit.readOnly;}\nOlapParamMemberChoose.prototype.setEnabled=function(enable){this.enabled=enable;this.panel.disabled=!this.enabled;this.btn.disabled=!this.enabled;this.edit.style.background=this.enabled?\"\":\"#F6F6F6\";}\nOlapParamMemberChoose.prototype.refreshNode=function(id){};OlapParamMemberChoose.prototype.setCurrentValue=function(value,currentValue){this.edit.value=currentValue;if(this.olapParam.type!=\"MemberSet\")\nreturn;if(value&&value!=\"\"){try{this.currentSettingValue=lang.parseJSON(value);}catch(e){this.currentSettingValue=new Array();this.currentSettingValue.push(value);}}else{this.currentSettingValue=new Array();}\nif(this.OlapParamTreePanel){var tree=this.OlapParamTreePanel.tree;var nodes=tree.getCheckedNodes();for(var i=0;i<this.currentSettingValue.length;i++){var node=tree.nodes[this.currentSettingValue[i]];if(node)\nnode.setChecked(1);}\nfor(var j=0;j<nodes.length;j++){var found=false;for(var i=0;i<this.currentSettingValue.length;i++){if(nodes[j]._id==this.currentSettingValue[i]){found=true;break;}}\nif(!found)\nnodes[j].setChecked(0);}}};OlapParamMemberChoose.prototype.getSelectedObject=function(){return this.selectedObject;};","js/bof/olapquery/olapquery/displayworkspace/HierarchiesSpace.js":"\nvar util=jsloader.resolve('freequery.common.util');var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");var PopupMenu=jsloader.resolve(\"freequery.menu.PopupMenu\");var domutil=jsloader.resolve('freequery.common.util');var dialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var domutils=jsloader.resolve(\"freequery.lang.domutils\");jsloader.resolve('thirdparty.jquery.jquery');jsloader.resolve('thirdparty.jquery.jquery_ui');var hierarchySpaceId=0;var HierarchiesSpace=function(container){this.init(container,__url,true);this.hierarchySpaceId=hierarchySpaceId++;this.onChange=new CustomEvent(\"change\",this);this.onRemoveExpHandler=new CustomEvent();this.popupMenu=new PopupMenu(document.body,this);this.deleteM=this.popupMenu.createMenuItem(\"删除\",\"DELETE\",\"D\");this.editM=this.popupMenu.createMenuItem(\"编辑\",\"EDIT\",\"E\");this.addListener(this.elemAvailableHierarchiesTd,\"click\",this.doCheckBoxClick,this);}\nlang.extend(HierarchiesSpace,\"freequery.widget.Module2\");HierarchiesSpace.prototype.destroy=function(){registry.remove(this.hierarchySpaceId);HierarchiesSpace.superclass.destroy.call(this);}\nHierarchiesSpace.prototype.doCmd=function(cmd){if(cmd==\"DELETE\"){this.removeExp();}else if(cmd==\"EDIT\"){var c=this.currentElement;var hierarchyId=c.getAttribute(\"hierarchyId\");var axisOrdinal=-1;var hier=null;if((hier=this.findHierarchy(this.elemFilterHierarchiesTd,hierarchyId))!=null){axisOrdinal=2;}else if((hier=this.findHierarchy(this.elemColumnHierarchiesTd,hierarchyId))!=null){axisOrdinal=0;}else if((hier=this.findHierarchy(this.elemRowHierarchiesTd,hierarchyId))!=null){axisOrdinal=1;}\nif(!hier.name)\nreturn;this.doEdit(c,hier,axisOrdinal);}};HierarchiesSpace.prototype.removeExp=function(){var c=this.currentElement;var hierarchyId=c.getAttribute(\"hierarchyId\");var axisOrdinal=-1;var hier=null;if((hier=this.findHierarchy(this.elemFilterHierarchiesTd,hierarchyId))!=null){axisOrdinal=2;}else if((hier=this.findHierarchy(this.elemColumnHierarchiesTd,hierarchyId))!=null){axisOrdinal=0;}else if((hier=this.findHierarchy(this.elemRowHierarchiesTd,hierarchyId))!=null){axisOrdinal=1;}\nif(axisOrdinal!=-1){this.onRemoveExpHandler.fire(this,hier,axisOrdinal);}};HierarchiesSpace.prototype.processFourAreaMouseOver=function(e){var e=eventutil.getEvent();if(e.target){var mousePointX=this.getMousePoint(e).x;var mousePointY=this.getMousePoint(e).y;var filterAreaX=util.getAbsolutePos(this.elemFilterHierarchiesTd).x;var filterAreaY=util.getAbsolutePos(this.elemFilterHierarchiesTd).y;var columnAreaX=util.getAbsolutePos(this.elemColumnHierarchiesTd).x;var columnAreaY=util.getAbsolutePos(this.elemColumnHierarchiesTd).y;var rowAreaX=util.getAbsolutePos(this.elemRowHierarchiesTd).x;var rowAreaY=util.getAbsolutePos(this.elemRowHierarchiesTd).y;this.mousePointY=mousePointY;if(mousePointX>=filterAreaX&&mousePointY>=filterAreaY&&mousePointY<rowAreaY){this.doChangeClassName(this.elemFilterHierarchiesTd,mousePointY);}else if(mousePointX>=columnAreaX&&mousePointY>=columnAreaY){this.doChangeClassName(this.elemColumnHierarchiesTd,mousePointY);}else if(mousePointX>=rowAreaX&&mousePointY>=rowAreaY&&mousePointX<columnAreaX){this.doChangeClassName(this.elemRowHierarchiesTd,mousePointY);}}}\nHierarchiesSpace.prototype.doChangeClassName=function(parentDiv,mousePointY){if(domutils.isIE()){var length=parentDiv.children.length;if(length==0){}\nif(length==1||parentDiv.firstChild){var y0_from=util.getAbsolutePos(parentDiv.firstChild).y-parentDiv.scrollTop;var y0_to=util.getAbsolutePos(parentDiv.firstChild).y+4-parentDiv.scrollTop;if(mousePointY>=y0_from&&mousePointY<=y0_to&&this.eButton==1){parentDiv.firstChild.firstChild.nextSibling.className=\"olap_ws_field_middle_top\";parentDiv.firstChild.firstChild.nextSibling.style.padding=\"1px\";}}\nif(length==1){var yn=util.getAbsolutePos(parentDiv.firstChild).y+20-parentDiv.scrollTop;if(mousePointY>yn&&this.eButton&&this.eButton==1){parentDiv.firstChild.firstChild.nextSibling.className=\"olap_ws_field_middle_bottom\";parentDiv.firstChild.firstChild.nextSibling.style.padding=\"1px\";}}\nif(length>1){var child=parentDiv.firstChild;while(child.nextSibling){var from_Y=util.getAbsolutePos(child).y+5-parentDiv.scrollTop;var to_Y=util.getAbsolutePos(child.nextSibling).y+5-parentDiv.scrollTop;if(mousePointY>=from_Y&&mousePointY<to_Y&&this.eButton==1){child.nextSibling.firstChild.nextSibling.className=\"olap_ws_field_middle_top\";child.nextSibling.firstChild.nextSibling.style.padding=\"1px\"}\nchild=child.nextSibling;}\nvar yn=util.getAbsolutePos(child).y-parentDiv.scrollTop;if(mousePointY>yn&&this.eButton&&this.eButton==1){child.firstChild.nextSibling.className=\"olap_ws_field_middle_bottom\";child.firstChild.nextSibling.style.padding=\"1px\";}}}else{var child=parentDiv.firstChild;while(child){if(child.nodeType==3&&child.nodeName==\"#text\"){parentDiv.removeChild(child);child=parentDiv.firstChild;}\nchild=child.nextSibling;}\nvar length=parentDiv.children.length;if(length==0){}\nif(length==1||parentDiv.firstChild){var y0_from=util.getAbsolutePos(parentDiv.firstChild).y-parentDiv.scrollTop;var y0_to=util.getAbsolutePos(parentDiv.firstChild).y+4-parentDiv.scrollTop;if(mousePointY>=y0_from&&mousePointY<=y0_to&&this.eButton==0){parentDiv.firstChild.firstChild.nextSibling.className=\"olap_ws_field_middle_top\";}}\nif(length==1){var yn=util.getAbsolutePos(parentDiv.firstChild).y+20-parentDiv.scrollTop;if(mousePointY>yn&&this.eButton!=null&&this.eButton==0){parentDiv.firstChild.firstChild.nextSibling.className=\"olap_ws_field_middle_bottom\";}}\nif(length>1){var child=parentDiv.firstChild;while(child.nextSibling){var from_Y=util.getAbsolutePos(child).y+5-parentDiv.scrollTop;var to_Y=util.getAbsolutePos(child.nextSibling).y+5-parentDiv.scrollTop;if(mousePointY>=from_Y&&mousePointY<to_Y&&this.eButton==0){child.nextSibling.firstChild.nextSibling.className=\"olap_ws_field_middle_top\";}\nchild=child.nextSibling;}\nvar yn=util.getAbsolutePos(child).y-parentDiv.scrollTop;if(mousePointY>yn&&this.eButton!=null&&this.eButton==0){child.firstChild.nextSibling.className=\"olap_ws_field_middle_bottom\";}}}}\nHierarchiesSpace.prototype.doChangeClassNameBack=function(parentDiv){var child=parentDiv.firstChild;while(child){child.firstChild.nextSibling.className=\"olap_ws_field_middle\";child=child.nextSibling;}}\nHierarchiesSpace.prototype.processFourAreaMouseOut=function(e){this.doChangeClassNameBack(this.elemFilterHierarchiesTd);this.doChangeClassNameBack(this.elemColumnHierarchiesTd);this.doChangeClassNameBack(this.elemRowHierarchiesTd);}\nHierarchiesSpace.prototype.processQueryDefine=function(olapQueryDefine){var ret=util.remoteInvoke(\"OlapMetadataService\",\"getAllHierarchy\",[this.cubeId]);this.hierarchyList=lang.parseJSON(ret.result);this.elemFilterHierarchiesTd.innerHTML=\"\";this.elemColumnHierarchiesTd.innerHTML=\"\";this.elemRowHierarchiesTd.innerHTML=\"\";this.elemAvailableHierarchiesTd.innerHTML=\"\";var rowHierarchyList=[];var columnHierarchyList=[];var filterHierarchyList=[];var hierarchysCount=this.hierarchyList.length;for(var i=0;i<hierarchysCount;i++){var div=document.createElement(\"DIV\");div.style.height=\"22px\";this.elemAvailableHierarchiesTd.appendChild(div);var left=document.createElement(\"span\");left.style.width=\"2px\";left.style.overflow=\"hidden\";left.className=\"olap_ws_field_unselected\";left.innerHTML=\"<INPUT type='checkbox'>\";div.appendChild(left);var wrapper=document.createElement(\"span\");div.appendChild(wrapper);wrapper.className=\"olap_ws_field_unselected\";wrapper.style.cursor=\"move\";wrapper.setAttribute(\"hierarchyId\",this.hierarchyList[i].id);wrapper.setAttribute(\"hierarchyName\",this.hierarchyList[i].name);wrapper.setAttribute(\"hierarchyAlias\",this.hierarchyList[i].alias);wrapper.setAttribute(\"dimensionName\",this.hierarchyList[i].dimension.name);wrapper.setAttribute(\"dimensionAlias\",this.hierarchyList[i].dimension.alias);wrapper.setAttribute(\"hierarchySpaceId\",this.hierarchySpaceId);wrapper.setAttribute(\"bof_id\",\"availableHierarchiesTd\");wrapper.setAttribute(\"wrapper\",\"true\");var input=document.createElement(\"input\");input.type=\"checkbox\";input.style.cursor=\"default\";input.setAttribute(\"hierarchyId\",this.hierarchyList[i].id);input.setAttribute(\"hierarchyName\",this.hierarchyList[i].name);input.setAttribute(\"hierarchyAlias\",this.hierarchyList[i].alias);input.setAttribute(\"dimensionName\",this.hierarchyList[i].dimension.name);input.setAttribute(\"dimensionAlias\",this.hierarchyList[i].dimension.alias);input.setAttribute(\"bof_id\",\"availableHierarchiesTd\");wrapper.appendChild(input);var span=document.createElement(\"span\");span.innerHTML=this.hierarchyList[i].alias;span.setAttribute(\"hierarchyId\",this.hierarchyList[i].id);span.setAttribute(\"hierarchyName\",this.hierarchyList[i].name);span.setAttribute(\"hierarchyAlias\",this.hierarchyList[i].alias);span.setAttribute(\"dimensionName\",this.hierarchyList[i].dimension.name);span.setAttribute(\"dimensionAlias\",this.hierarchyList[i].dimension.alias);span.setAttribute(\"hierarchySpaceId\",this.hierarchySpaceId);span.setAttribute(\"bof_id\",\"availableHierarchiesTd\");wrapper.appendChild(span);var right=document.createElement(\"span\");right.style.width=\"2px\";right.style.overflow=\"hidden\";right.className=\"olap_ws_field_unselected\";right.innerHTML=\"<INPUT type='checkbox'>\";div.appendChild(right);if(!domutils.isIE()){left.style.display=right.style.display=\"none\";}}\nif(olapQueryDefine.axisList){var column=olapQueryDefine.axisList[0];if(column){for(var z=0;z<column.hierarchys.length;z++){var h=column.hierarchys[z];for(var i=0;i<hierarchysCount;i++){if(h.name==this.hierarchyList[i].name){this.hierarchyList[i].selections=h.selections;columnHierarchyList.push(this.hierarchyList[i]);}}}}\nvar row=olapQueryDefine.axisList[1];if(row){for(var z=0;z<row.hierarchys.length;z++){var h=row.hierarchys[z];for(var i=0;i<hierarchysCount;i++){if(h.name==this.hierarchyList[i].name){this.hierarchyList[i].selections=h.selections;rowHierarchyList.push(this.hierarchyList[i]);}}}}}\nif(olapQueryDefine.dice){var dice=olapQueryDefine.dice;for(var z=0;z<dice.hierarchys.length;z++){var h=dice.hierarchys[z];for(var i=0;i<hierarchysCount;i++){if(h.name==this.hierarchyList[i].name){this.hierarchyList[i].selections=h.selections;filterHierarchyList.push(this.hierarchyList[i]);}}}}\nfor(var i=0;i<rowHierarchyList.length;i++){this.addRow(this,rowHierarchyList[i],\"row\",\"appendChild\",false);}\nfor(var i=0;i<columnHierarchyList.length;i++){this.addRow(this,columnHierarchyList[i],\"column\",\"appendChild\",false);}\nfor(var i=0;i<filterHierarchyList.length;i++){this.addRow(this,filterHierarchyList[i],\"filter\",\"appendChild\",false);}\nvar child=this.elemAvailableHierarchiesTd.firstChild;while(child){var c=child.firstChild.nextSibling;if(c.nodeType==1&&c.tagName==\"SPAN\"){$(c).draggable({helper:doDrag});}\nchild=child.nextSibling;}\n$(document.body).droppable({drop:doDrop});var that=this;registry.put(this.hierarchySpaceId,that);function doDrag(){var draggedObj=$(this);var hierarchyId=draggedObj[0].getAttribute(\"hierarchyId\");var hierarchyName=draggedObj[0].getAttribute(\"hierarchyName\");var hierarchyAlias=draggedObj[0].getAttribute(\"hierarchyAlias\");var dimensionName=draggedObj[0].getAttribute(\"dimensionName\");var dimensionAlias=draggedObj[0].getAttribute(\"dimensionAlias\");var selections=draggedObj[0].getAttribute(\"selections\");if(selections){selections=lang.parseJSON(selections);}\nif(hierarchyId==undefined){draggedObj=draggedObj.parentNode;}\nif(hierarchyId==undefined){domutils.stopEvent(e);return;}\nvar transferNode={};transferNode.type=\"HIERARCHY\";transferNode.id=hierarchyId;transferNode.name=hierarchyName;transferNode.alias=hierarchyAlias;transferNode.dimension={name:dimensionName,alias:dimensionAlias}\ntransferNode.selections=selections;util.transferData().srcType=\"OLAPEXP\";util.transferData().srcElement=draggedObj[0];util.transferData().dataNodes=[transferNode];util.transferData().dataDropped=false;var transferData=util.transferData();var container=$('<div />');var span=document.createElement(\"span\");span.innerHTML=hierarchyAlias;container.append(span);return container;}\nfunction doDrop(event,ui){var hierarchySpaceId=ui.draggable.context.getAttribute(\"hierarchySpaceId\");var that=registry.get(hierarchySpaceId);var transferData=util.transferData();var data=transferData.dataNodes[0];var mousePointX=util.getMousePoint(event).x;var mousePointY=util.getMousePoint(event).y;var availableAreaX=util.getAbsolutePos(that.elemAvailableHierarchiesTd).x;var availableAreaY=util.getAbsolutePos(that.elemAvailableHierarchiesTd).y;var filterAreaX=util.getAbsolutePos(that.elemFilterHierarchiesTd).x;var filterAreaY=util.getAbsolutePos(that.elemFilterHierarchiesTd).y;var columnAreaX=util.getAbsolutePos(that.elemColumnHierarchiesTd).x;var columnAreaY=util.getAbsolutePos(that.elemColumnHierarchiesTd).y;var rowAreaX=util.getAbsolutePos(that.elemRowHierarchiesTd).x;var rowAreaY=util.getAbsolutePos(that.elemRowHierarchiesTd).y;var bofid=null;if(mousePointX>=availableAreaX&&mousePointY>=availableAreaY&&mousePointY<filterAreaY){bofid=\"availableHierarchiesTd\";}else if(mousePointX>=filterAreaX&&mousePointY>=filterAreaY&&mousePointY<rowAreaY){bofid=\"filterHierarchiesTd\";}else if(mousePointX>=columnAreaX&&mousePointY>=columnAreaY){bofid=\"columnHierarchiesTd\";}else if(mousePointX>=rowAreaX&&mousePointY>=rowAreaY&&mousePointX<columnAreaX){bofid=\"rowHierarchiesTd\";}\nvar pos=null;var parentDiv=null;if(bofid==\"availableHierarchiesTd\"){var anotherBofid=ui.draggable.context.parentNode.getAttribute(\"bof_id\")||ui.draggable.context.parentNode.getAttribute(\"bofid\")\nif(!(anotherBofid==\"availableHierarchiesTd\")){var hierarchyId=data.id;var hierIndex=-1;var hier=null;if((hier=that.findHierarchy(that.elemFilterHierarchiesTd,hierarchyId))!=null){hierIndex=2;}else if((hier=that.findHierarchy(that.elemColumnHierarchiesTd,hierarchyId))!=null){hierIndex=0;}else if((hier=that.findHierarchy(that.elemRowHierarchiesTd,hierarchyId))!=null){hierIndex=1;}\nif(hierIndex!=-1){that.onRemoveExpHandler.fire(this,hier,hierIndex);}}}else if(bofid==\"filterHierarchiesTd\"){parentDiv=that.elemFilterHierarchiesTd;pos=\"filter\";}else if(bofid==\"columnHierarchiesTd\"){parentDiv=that.elemColumnHierarchiesTd;pos=\"column\";}else if(bofid==\"rowHierarchiesTd\"){parentDiv=that.elemRowHierarchiesTd;pos=\"row\";}\nthat.doChangeClassNameBack(that.elemFilterHierarchiesTd);that.doChangeClassNameBack(that.elemColumnHierarchiesTd);that.doChangeClassNameBack(that.elemRowHierarchiesTd);if(parentDiv!=null){var length=parentDiv.children.length;var y=that.mousePointY;var lastChild_offsetTop=0;var temp=null;if(length>=1){temp=util.getAbsolutePos(parentDiv.firstChild).y-parentDiv.scrollTop;lastChild_offsetTop=temp+20*length;}\nvar dropMode=y>lastChild_offsetTop?\"appendChild\":\"insertBefore\";that.addRow(that,data,pos,dropMode,y,true);}}}\nHierarchiesSpace.prototype.doCheckBoxClick=function(e){var e=eventutil.getEvent();var checked=false;var checkedObj=null;if(e.target.type==\"checkbox\"){checked=e.target.checked;checkedObj=e.target;}else if(e.target.className==\"olap_ws_field_unselected\"||e.target.className==\"olap_ws_field_selected\"){checked=!e.target.firstChild.checked;checkedObj=e.target.firstChild;}else if(e.target.parentNode.className==\"olap_ws_field_unselected\"||e.target.parentNode.className==\"olap_ws_field_selected\"){checked=!e.target.parentNode.firstChild.checked;checkedObj=e.target.parentNode.firstChild;}else{domutils.stopEvent(e);return;}\nvar hierarchysCount=parseInt(this.hierarchyList.length);if(checked){if(this.isChoosed==\"true\"){for(var i=0;i<hierarchysCount;i++){if(checkedObj.getAttribute(\"hierarchyId\")==this.hierarchyList[i].id){this.addRow(this,this.hierarchyList[i],this.isChoosedPosition,\"appendChild\",\"\",true);break;}}}else{for(var i=0;i<hierarchysCount;i++){var hierarchyId=checkedObj.getAttribute(\"hierarchyId\");if(hierarchyId==this.hierarchyList[i].id){if(this.hierarchyList[i].name==\"[Measures]\"){this.addRow(this,this.hierarchyList[i],\"column\",\"appendChild\",\"\",true);}else{this.addRow(this,this.hierarchyList[i],\"row\",\"appendChild\",\"\",true);}\nbreak;}}}}else{var hierarchyId=checkedObj.getAttribute(\"hierarchyId\");var hierIndex=-1;var hier=null;if((hier=this.removeRow(this.elemFilterHierarchiesTd,hierarchyId))!=null){hierIndex=2;}else if((hier=this.removeRow(this.elemColumnHierarchiesTd,hierarchyId))!=null){hierIndex=0;}else if((hier=this.removeRow(this.elemRowHierarchiesTd,hierarchyId))!=null){hierIndex=1;}\nthis.fireChangeEvent(hierIndex,hier,hierIndex);}\ndomutils.stopEvent(e);}\nHierarchiesSpace.prototype.doCheckBoxCheckedValueChange=function(id,checked){var child=this.elemAvailableHierarchiesTd.firstChild;while(child){var c=child.firstChild.nextSibling;var hierarchyId=c.getAttribute(\"hierarchyId\");if(id==hierarchyId){c.firstChild.checked=checked;break;}\nchild=child.nextSibling;}}\nHierarchiesSpace.prototype.elemAvailableHierarchiesTd_mousedown_handler=function(e){this.eButton=e.button;this.processMenuClick(e);};HierarchiesSpace.prototype.elemAvailableHierarchiesTd_mouseup_handler=function(e){this.eButton=null;this.popupMenu.hide();};HierarchiesSpace.prototype.elemFilterHierarchiesTd_mousedown_handler=function(e){if(e.target.className!=\"olap_ws_field_middle_button\"&&(e.target.className==\"olap_ws_field_middle_selected\"||e.target.className==\"olap_ws_field_middle_text\")){this.eButton=e.button;}else if(e.target.className!=\"olap_ws_field_middle_button\"){this.eButton=null;this.doChooseArea(e,this.elemFilterHierarchiesTd,\"filter\");}\nthis.processMenuClick(e);};HierarchiesSpace.prototype.elemFilterHierarchiesTd_mouseup_handler=function(e){this.eButton=null;this.popupMenu.hide();};HierarchiesSpace.prototype.elemColumnHierarchiesTd_mousedown_handler=function(e){if(e.target.className!=\"olap_ws_field_middle_button\"&&(e.target.className==\"olap_ws_field_middle_selected\"||e.target.className==\"olap_ws_field_middle_text\")){this.eButton=e.button;}else if(e.target.className!=\"olap_ws_field_middle_button\"){this.eButton=null;this.doChooseArea(e,this.elemColumnHierarchiesTd,\"column\");}\nthis.processMenuClick(e);};HierarchiesSpace.prototype.elemColumnHierarchiesTd_mouseup_handler=function(e){this.eButton=null;this.popupMenu.hide();};HierarchiesSpace.prototype.elemColumnHierarchiesTd_dblclick_handler=function(e){if(e.target.className!=\"olap_ws_field_middle_button\"){this.onEdit(e,0);}}\nHierarchiesSpace.prototype.elemRowHierarchiesTd_dblclick_handler=function(e){if(e.target.className!=\"olap_ws_field_middle_button\"){this.onEdit(e,1);}}\nHierarchiesSpace.prototype.elemFilterHierarchiesTd_dblclick_handler=function(e){if(e.target.className!=\"olap_ws_field_middle_button\"){this.onEdit(e,2);}}\nHierarchiesSpace.prototype.onEdit=function(e,axisOrdinal){var c=e.target.parentNode;var hier={dimensionName:c.getAttribute(\"dimensionName\"),name:c.getAttribute(\"hierarchyName\"),selections:lang.parseJSON(c.getAttribute(\"selections\"))}\nif(!hier.name)\nreturn;this.doEdit(c,hier,axisOrdinal);}\nHierarchiesSpace.prototype.doEdit=function(obj,hier,axisOrdinal){if(!hier.name)\nreturn;var dialogConfig={title:\"编辑已选成员\",size:dialogFactory.size.LARGE,fullName:\"bof.olapquery.olapquery.olapquerydefine.EditHierarchyExpDialog\"};var canMove=false;if(axisOrdinal==2){}else if(axisOrdinal==1){if(!this.clientSetting.axis1UsedHierarchize){canMove=true;}}else if(axisOrdinal==0){if(!this.clientSetting.axis0UsedHierarchize){canMove=true;}}\nthis.editingHierarchy=obj;this.editingOrdinal=axisOrdinal;dialogFactory.showDialog(dialogConfig,[this.cubeId,hier,canMove,axisOrdinal,this.clientId],this.editHierarchyExpCallback,this);}\nHierarchiesSpace.prototype.editHierarchyExpCallback=function(def){if(def){var selections=lang.parseJSON(def).selections;this.editingHierarchy.setAttribute(\"selections\",lang.toJSONString(selections));this.fireChangeEvent(-1,null,this.editingOrdinal);}}\nHierarchiesSpace.prototype.elemRowHierarchiesTd_mousedown_handler=function(e){if(e.target.className!=\"olap_ws_field_middle_button\"&&(e.target.className==\"olap_ws_field_middle_selected\"||e.target.className==\"olap_ws_field_middle_text\")){this.eButton=e.button;}else if(e.target.className!=\"olap_ws_field_middle_button\"){this.eButton=null;this.doChooseArea(e,this.elemRowHierarchiesTd,\"row\");}\nthis.processMenuClick(e);};HierarchiesSpace.prototype.doChooseArea=function(e,lastChoosedArea,pos){if(this.lastChoosedArea!=lastChoosedArea){if(this.lastChoosedArea!=null){this.lastChoosedArea.style.background=\"#FFFFFF\";}\nthis.isChoosed=\"true\";this.isChoosedPosition=pos;e.target.style.background=\"#EAF1F8\";this.lastChoosedArea=lastChoosedArea;}else{this.isChoosed=null;this.isChoosedPosition=null;e.target.style.background=\"#FFFFFF\";this.lastChoosedArea=null;}};HierarchiesSpace.prototype.elemRowHierarchiesTd_mouseup_handler=function(e){this.eButton=null;this.popupMenu.hide();};HierarchiesSpace.prototype.elem_workspaceTd_mouseup_handler=function(e){this.eButton=null;};HierarchiesSpace.prototype.processAvailableHierarchyMouseOver=function(e){var e=eventutil.getEvent();var obj=e.target;var hierarchyId=obj.getAttribute(\"hierarchyId\");if(hierarchyId==undefined){domutils.stopEvent(e);return;}\nvar parentObj=obj;while(parentObj.getAttribute(\"wrapper\")!=\"true\"){parentObj=parentObj.parentNode;}\nparentObj.className=\"olap_ws_field_selected\";parentObj.previousSibling.style.backgroundImage=\"url('img/queryview/orange_left.png')\";parentObj.nextSibling.style.backgroundImage=\"url('img/queryview/orange_right.png')\";}\nHierarchiesSpace.prototype.processAvailableHierarchyMouseOut=function(e){var e=eventutil.getEvent();var obj=e.target;var hierarchyId=obj.getAttribute(\"hierarchyId\");if(hierarchyId==undefined){domutils.stopEvent(e);return;}\nvar parentObj=obj;while(parentObj.getAttribute(\"wrapper\")!=\"true\"){parentObj=parentObj.parentNode;}\nparentObj.className=\"olap_ws_field_unselected\";parentObj.previousSibling.style.backgroundImage=\"\";parentObj.nextSibling.style.backgroundImage=\"\";}\nHierarchiesSpace.prototype.elemAvailableHierarchiesTd_mouseover_handler=function(e){this.processAvailableHierarchyMouseOver(e);};HierarchiesSpace.prototype.elemAvailableHierarchiesTd_mouseout_handler=function(e){this.processAvailableHierarchyMouseOut(e);};HierarchiesSpace.prototype.elemFilterHierarchiesTd_mouseover_handler=function(e){this.processFourAreaMouseOver(e);};HierarchiesSpace.prototype.elemFilterHierarchiesTd_mouseout_handler=function(e){this.processFourAreaMouseOut(e);};HierarchiesSpace.prototype.elemColumnHierarchiesTd_mouseover_handler=function(e){this.processFourAreaMouseOver(e);};HierarchiesSpace.prototype.elemColumnHierarchiesTd_mouseout_handler=function(e){this.processFourAreaMouseOut(e);};HierarchiesSpace.prototype.elemRowHierarchiesTd_mouseover_handler=function(e){this.processFourAreaMouseOver(e);};HierarchiesSpace.prototype.elemRowHierarchiesTd_mouseout_handler=function(e){this.processFourAreaMouseOut(e);};HierarchiesSpace.prototype.processDragStart=function(e){var e=eventutil.getEvent();if(e.target.nodeName!=\"SPAN\"){domutils.stopEvent(e);return;}\nvar obj=e.target;if(obj.hierarchyId==undefined){obj=obj.parentNode;}\nif(obj.hierarchyId==undefined){domutils.stopEvent(e);return;}\nvar transferNode={};transferNode.type=\"FIELD\";transferNode.id=obj.hierarchyId;transferNode.name=obj.hierarchyName;transferNode.alias=obj.hierarchyAlias;util.transferData().srcType=\"HIERARCHY\";util.transferData().srcElement=obj;util.transferData().dataNodes=[transferNode];util.transferData().dataDropped=false;}\nHierarchiesSpace.prototype.processDrop=function(e,pos){var transferData=util.transferData();if(!transferData||!transferData.srcType){e.returnValue=false;domutils.stopEvent(e);return;}\ndomutils.stopEvent(e);var data=transferData.dataNodes[0];if(transferData.srcType==\"HIERARCHY\"){this.addRow(data,pos,true);}}\nHierarchiesSpace.prototype.addRow=function(that,data,pos,dropMode,y,fireEvent){var parentDiv=null;var bof_id=null;var axisOrdinal=-1;if(pos==\"row\"){axisOrdinal=1;parentDiv=that.elemRowHierarchiesTd;bof_id=\"rowHierarchiesTd\";}else if(pos==\"column\"){axisOrdinal=0;parentDiv=that.elemColumnHierarchiesTd;bof_id=\"columnHierarchiesTd\";}else if(pos==\"filter\"){axisOrdinal=2;parentDiv=that.elemFilterHierarchiesTd;bof_id=\"filterHierarchiesTd\";}\nif(dropMode==\"insertBefore\"){var length=parentDiv.children.length;var child=null;if(domutils.isIE()){child=parentDiv.firstChild;}else{child=parentDiv.firstChild.nextSibling;}\nwhile(child){if(child.nodeType==1){var hierarchyId=child.getAttribute(\"hierarchyId\");if(hierarchyId==data.id){var offsetTop=util.getAbsolutePos(child).y;this.offsetTop=offsetTop;break;}}\nchild=child.nextSibling;}}\nvar fromOrdinal=-1;var fromHier=null;if((fromHier=that.removeRow(that.elemRowHierarchiesTd,data.id))!=null)\nfromOrdinal=1;else if((fromHier=that.removeRow(that.elemColumnHierarchiesTd,data.id))!=null)\nfromOrdinal=0;else if((fromHier=that.removeRow(that.elemFilterHierarchiesTd,data.id))!=null)\nfromOrdinal=2;that.doCheckBoxCheckedValueChange(data.id,false);if(parentDiv!=null){var text=data.alias;var div=document.createElement(\"DIV\");var left=document.createElement(\"span\");left.style.width=\"2px\";left.style.overflow=\"hidden\";left.className=\"olap_ws_field_unselected\";left.style.backgroundImage=\"url('img/queryview/light_left.png')\";div.appendChild(left);var middleSpan=document.createElement(\"span\");div.appendChild(middleSpan);var right=document.createElement(\"span\");right.style.width=\"2px\";right.style.overflow=\"hidden\";right.className=\"olap_ws_field_unselected\";right.style.backgroundImage=\"url('img/queryview/light_right.png')\";div.appendChild(right);middleSpan.className=\"olap_ws_field_middle\";middleSpan.style.cursor=\"move\";if(domutils.isIE()){middleSpan.style.padding=\"1px\";}else{left.style.display=right.style.display=\"none\";middleSpan.style.display=\"block\";}\nvar selections=data.selections?lang.toJSONString(data.selections):null;middleSpan.setAttribute('hierarchySpaceId',that.hierarchySpaceId);middleSpan.setAttribute('hierarchyId',data.id);middleSpan.setAttribute('hierarchyName',data.name);middleSpan.setAttribute('hierarchyAlias',data.alias);middleSpan.setAttribute('dimensionName',data.dimension.name);middleSpan.setAttribute('dimensionAlias',data.dimension.alias);if(selections)\nmiddleSpan.setAttribute('selections',selections);middleSpan.setAttribute('bof_id',bof_id);middleSpan.setAttribute('pos',pos);middleSpan.setAttribute('hasSubTotal',data.hasSubTotal);middleSpan.setAttribute('wrapper',\"true\");if(dropMode==\"appendChild\"){parentDiv.appendChild(div);}else if(dropMode==\"insertBefore\"){if(offsetTop&&y>offsetTop){y=y-20;}\nvar scrollTop=parentDiv.scrollTop;if(domutils.isFirefox()){scrollTop=parentDiv.parentNode.scrollTop;}\nvar firstRowOffsetTop=util.getAbsolutePos(parentDiv.firstChild).y-scrollTop;if(length==1||y<=firstRowOffsetTop+4){parentDiv.insertBefore(div,parentDiv.firstChild);}else{var child=parentDiv.firstChild;while(child.nextSibling){if(child.nodeType==1){var fromOffsetTop=util.getAbsolutePos(child).y+5-scrollTop;var toOffsetTop=util.getAbsolutePos(child.nextSibling).y+5-scrollTop;var condition=y>=fromOffsetTop&&y<toOffsetTop;if(condition){child=child.nextSibling;break;}}\nchild=child.nextSibling;}\nparentDiv.insertBefore(div,child);}}\nthat.doCheckBoxCheckedValueChange(data.id,true);var middleText=document.createElement(\"span\");middleText.className=\"olap_ws_field_middle_text\";middleText.setAttribute('bof_id',bof_id);middleText.innerHTML=text;middleSpan.appendChild(middleText);var middleButton=document.createElement(\"span\");middleButton.className=\"olap_ws_field_middle_button\";middleSpan.appendChild(middleButton);function dodrag(){var draggedObj=$(this);var hierarchyId=draggedObj[0].getAttribute(\"hierarchyId\");var hierarchyName=draggedObj[0].getAttribute(\"hierarchyName\");var hierarchyAlias=draggedObj[0].getAttribute(\"hierarchyAlias\");var dimensionName=draggedObj[0].getAttribute(\"dimensionName\");var dimensionAlias=draggedObj[0].getAttribute(\"dimensionAlias\");var selections=draggedObj[0].getAttribute(\"selections\");if(selections){selections=lang.parseJSON(selections);}\nif(hierarchyId==undefined){draggedObj=draggedObj.parentNode;}\nif(hierarchyId==undefined){domutils.stopEvent(e);return;}\nvar transferNode={};transferNode.type=\"HIERARCHY\";transferNode.id=hierarchyId;transferNode.name=hierarchyName;transferNode.alias=hierarchyAlias;transferNode.dimension={name:dimensionName,alias:dimensionAlias}\ntransferNode.selections=selections;util.transferData().srcType=\"HIERARCHY\";util.transferData().srcElement=draggedObj[0];util.transferData().dataNodes=[transferNode];util.transferData().dataDropped=false;var transferData=util.transferData();var container=$('<div />');var span=document.createElement(\"span\");span.innerHTML=hierarchyAlias;container.append(span);return container;}\n$(middleSpan).draggable({helper:dodrag,cancel:'.olap_ws_field_middle_button'});}\nif(fireEvent){that.fireChangeEvent(fromOrdinal,fromHier,axisOrdinal);}}\nHierarchiesSpace.prototype.processMenuClick=function(e){var e=eventutil.getEvent();if(domutils.isLeftButton(e.button)){if(e.target.className!=\"olap_ws_field_middle_button\"){domutils.stopEvent(e);return;}\nvar obj=e.target.parentNode;if(obj.getAttribute(\"hierarchyId\")==undefined){domutils.stopEvent(e);return;}\nthis.currentElement=obj;this.popupMenu.popup(e);}\ndomutils.stopEvent(e);}\nHierarchiesSpace.prototype.findHierarchy=function(parentDiv,id){var removed=null;var child=parentDiv.firstChild;while(child){var c=child.firstChild.nextSibling;if(c.nodeType==1&&c.tagName==\"SPAN\"&&c.getAttribute(\"hierarchyId\")==id){var selections=c.getAttribute(\"selections\");var exps;var h={name:c.getAttribute(\"hierarchyName\"),caption:c.getAttribute(\"hierarchyAlias\"),dimensionName:c.getAttribute(\"dimensionName\"),dimensionCaption:c.getAttribute(\"dimensionAlias\"),selections:[]}\nif(!selections){var ret=util.remoteInvokeEx(\"OlapQueryService\",\"getUserAccessibleMembers\",[this.clientId,c.getAttribute(\"hierarchyId\")]);if(ret&&ret.succeeded){var result=ret.result;exps=result;}\nfor(var k=0;k<exps.length;k++){var perExp=exps[k]\nvar isFound=false;var selection={mdx:perExp}\nh.selections.push(selection);}}else{h.selections=lang.parseJSON(selections);}\nremoved=h;break;}else{child=child.nextSibling;}}\nreturn removed;}\nHierarchiesSpace.prototype.removeRow=function(parentDiv,id){var removed=null;var child=parentDiv.firstChild;while(child){var c=child.firstChild.nextSibling;if(c.nodeType==1&&c.tagName==\"SPAN\"&&c.getAttribute(\"hierarchyId\")==id){var tempNode=child.nextSibling;domutils.destroyNode(child);child=tempNode;var selections=c.getAttribute(\"selections\");var exps;var h={name:c.getAttribute(\"hierarchyName\"),caption:c.getAttribute(\"hierarchyAlias\"),dimensionName:c.getAttribute(\"dimensionName\"),dimensionCaption:c.getAttribute(\"dimensionAlias\"),selections:[]}\nif(!selections){var ret=util.remoteInvokeEx(\"OlapQueryService\",\"getUserAccessibleMembers\",[this.clientId,c.getAttribute(\"hierarchyId\")]);if(ret&&ret.succeeded){var result=ret.result;exps=result;}\nfor(var k=0;k<exps.length;k++){var perExp=exps[k]\nvar isFound=false;var selection={mdx:perExp}\nh.selections.push(selection);}}else{h.selections=lang.parseJSON(selections);}\nremoved=h;}else{child=child.nextSibling;}}\nreturn removed;}\nHierarchiesSpace.prototype.getHierarchyList=function(){return this.hierarchyList;}\nHierarchiesSpace.prototype.getMousePoint=function(e){var point={x:0,y:0};if(typeof window.pageYOffset!='undefined'){point.x=window.pageXOffset;point.y=window.pageYOffset;}\nelse if(typeof document.compatMode!='undefined'&&document.compatMode!='BackCompat'){point.x=document.documentElement.scrollLeft;point.y=document.documentElement.scrollTop;}\nelse if(typeof document.body!='undefined'){point.x=document.body.scrollLeft;point.y=document.body.scrollTop;}\npoint.x+=e.clientX;point.y+=e.clientY;return point;}\nHierarchiesSpace.prototype.getAllHierarchy=function(axisOrdinal){var td;switch(axisOrdinal){case 0:td=this.elemColumnHierarchiesTd;break;case 1:td=this.elemRowHierarchiesTd;break;case 2:td=this.elemFilterHierarchiesTd;break;default:return[];}\nvar resultHiers=[];var child=td.firstChild;while(child){var c=child.firstChild.nextSibling;if(c.nodeType==1&&c.tagName==\"SPAN\"){var selections=c.getAttribute(\"selections\");var exps;var h={name:c.getAttribute(\"hierarchyName\"),caption:c.getAttribute(\"hierarchyAlias\"),dimensionName:c.getAttribute(\"dimensionName\"),dimensionCaption:c.getAttribute(\"dimensionAlias\"),selections:[]}\nif(!selections){var ret=util.remoteInvokeEx(\"OlapQueryService\",\"getUserAccessibleMembers\",[this.clientId,c.getAttribute(\"hierarchyId\")]);if(ret&&ret.succeeded){var result=ret.result;exps=result;}\nfor(var k=0;k<exps.length;k++){var perExp=exps[k]\nvar isFound=false;var selection={mdx:perExp}\nh.selections.push(selection);}}else{h.selections=lang.parseJSON(selections);}\nresultHiers.push(h);}\nchild=child.nextSibling;}\nreturn resultHiers;}\nHierarchiesSpace.prototype.fireChangeEvent=function(fromOrdinal,fromHier,axisOrdinal){this.onChange.fire(this,fromOrdinal,fromHier,axisOrdinal,this.getAllHierarchy(axisOrdinal));}\nHierarchiesSpace.prototype.setClientId=function(clientId){this.clientId=clientId;}\nHierarchiesSpace.prototype.setClientSetting=function(clientSetting){this.clientSetting=clientSetting;}","js/bof/olapquery/olapquery/displayworkspace/HierarchiesSpace.html":"<table width=\"100%\" height=\"100%\" broder=\"0\" class=\"olap_ws_bg\" >\r\n\t<tr><td>\r\n\t<table bofid=\"_workspaceTable\" width=\"100%\" height=\"100%\" border=\"0\" >\r\n\t\t<tr height=\"22px\">\r\n\t\t\t<td colspan=2 class='olap_ws_title' >待选列<\/td>\r\n\t\t<\/tr>\r\n\t\t<tr height=\"40%\" >\r\n    \t\t<td colspan=2><div bofid=\"availableHierarchiesTd\" style=\"height:100%;overflow:auto;\" class=\"olap_ws_border\" ><\/td>\r\n    \t<\/tr>\r\n    \t<tr height=\"22px\">\r\n\t\t\t<td width=\"50%\" class='olap_ws_title' colSpan=\"2\">过滤区<\/td>\r\n\t\t<\/tr>\r\n\t\t<tr height=\"15%\" >\r\n\t\t\t<td width=\"50%\" class='olap_ws_title'  colSpan=\"2\">\r\n\t\t\t\t<div bofid=\"filterHierarchiesTd\" style=\"height:100%;overflow:auto;\" class=\"olap_ws_border\" >\r\n\t\t\t<\/td>\r\n\t\t<\/tr>\r\n\t\t<tr height=\"22px\">\r\n\t\t\t<td width=\"50%\" class='olap_ws_title'>行区<\/td>\r\n\t\t\t<td width=\"50%\" class='olap_ws_title'>列区<\/td>\r\n\t\t<\/tr>\r\n\t\t<tr height=\"35%\" >\r\n\t\t\t<td width=\"50%\" class='olap_ws_title'>\r\n\t\t\t\t<div bofid=\"rowHierarchiesTd\" style=\"height:100%;overflow:auto;\" class=\"olap_ws_border\" >\r\n\t\t\t<\/td>\r\n\t\t\t<td width=\"50%\" class='olap_ws_title'>\r\n\t\t\t\t<div bofid=\"columnHierarchiesTd\" style=\"height:100%;overflow:auto;\" class=\"olap_ws_border\" >\r\n\t\t\t<\/td>\r\n\t\t<\/tr>\r\n\t\t<tr>\r\n\t\t\t<td colspan='2'>&nbsp;<\/td>\r\n\t\t<\/tr>\r\n\t<\/table>\r\n\t<\/td><\/tr>\r\n<\/table>\r\n","js/thirdparty/jquery/jquery.js":"\n(function(window,undefined){var document=window.document,navigator=window.navigator,location=window.location;var jQuery=(function(){var jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery);},_jQuery=window.jQuery,_$=window.$,rootjQuery,quickExpr=/^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/,rnotwhite=/\\S/,trimLeft=/^\\s+/,trimRight=/\\s+$/,rsingleTag=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>)?$/,rvalidchars=/^[\\],:{}\\s]*$/,rvalidescape=/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\\s*\\[)+/g,rwebkit=/(webkit)[ \\/]([\\w.]+)/,ropera=/(opera)(?:.*version)?[ \\/]([\\w.]+)/,rmsie=/(msie) ([\\w.]+)/,rmozilla=/(mozilla)(?:.*? rv:([\\w.]+))?/,rdashAlpha=/-([a-z]|[0-9])/ig,rmsPrefix=/^-ms-/,fcamelCase=function(all,letter){return(letter+\"\").toUpperCase();},userAgent=navigator.userAgent,browserMatch,readyList,DOMContentLoaded,toString=Object.prototype.toString,hasOwn=Object.prototype.hasOwnProperty,push=Array.prototype.push,slice=Array.prototype.slice,trim=String.prototype.trim,indexOf=Array.prototype.indexOf,class2type={};jQuery.fn=jQuery.prototype={constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem,ret,doc;if(!selector){return this;}\nif(selector.nodeType){this.context=this[0]=selector;this.length=1;return this;}\nif(selector===\"body\"&&!context&&document.body){this.context=document;this[0]=document.body;this.selector=selector;this.length=1;return this;}\nif(typeof selector===\"string\"){if(selector.charAt(0)===\"<\"&&selector.charAt(selector.length-1)===\">\"&&selector.length>=3){match=[null,selector,null];}else{match=quickExpr.exec(selector);}\nif(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;doc=(context?context.ownerDocument||context:document);ret=rsingleTag.exec(selector);if(ret){if(jQuery.isPlainObject(context)){selector=[document.createElement(ret[1])];jQuery.fn.attr.call(selector,context,true);}else{selector=[doc.createElement(ret[1])];}}else{ret=jQuery.buildFragment([match[1]],[doc]);selector=(ret.cacheable?jQuery.clone(ret.fragment):ret.fragment).childNodes;}\nreturn jQuery.merge(this,selector);}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){if(elem.id!==match[2]){return rootjQuery.find(selector);}\nthis.length=1;this[0]=elem;}\nthis.context=document;this.selector=selector;return this;}}else if(!context||context.jquery){return(context||rootjQuery).find(selector);}else{return this.constructor(context).find(selector);}}else if(jQuery.isFunction(selector)){return rootjQuery.ready(selector);}\nif(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context;}\nreturn jQuery.makeArray(selector,this);},selector:\"\",jquery:\"1.7.2\",length:0,size:function(){return this.length;},toArray:function(){return slice.call(this,0);},get:function(num){return num==null?this.toArray():(num<0?this[this.length+num]:this[num]);},pushStack:function(elems,name,selector){var ret=this.constructor();if(jQuery.isArray(elems)){push.apply(ret,elems);}else{jQuery.merge(ret,elems);}\nret.prevObject=this;ret.context=this.context;if(name===\"find\"){ret.selector=this.selector+(this.selector?\" \":\"\")+selector;}else if(name){ret.selector=this.selector+\".\"+name+\"(\"+selector+\")\";}\nreturn ret;},each:function(callback,args){return jQuery.each(this,callback,args);},ready:function(fn){jQuery.bindReady();readyList.add(fn);return this;},eq:function(i){i=+i;return i===-1?this.slice(i):this.slice(i,i+1);},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},slice:function(){return this.pushStack(slice.apply(this,arguments),\"slice\",slice.call(arguments).join(\",\"));},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem);}));},end:function(){return this.prevObject||this.constructor(null);},push:push,sort:[].sort,splice:[].splice};jQuery.fn.init.prototype=jQuery.fn;jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target===\"boolean\"){deep=target;target=arguments[1]||{};i=2;}\nif(typeof target!==\"object\"&&!jQuery.isFunction(target)){target={};}\nif(length===i){target=this;--i;}\nfor(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue;}\nif(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[];}else{clone=src&&jQuery.isPlainObject(src)?src:{};}\ntarget[name]=jQuery.extend(deep,clone,copy);}else if(copy!==undefined){target[name]=copy;}}}}\nreturn target;};jQuery.extend({noConflict:function(deep){if(window.$===jQuery){window.$=_$;}\nif(deep&&window.jQuery===jQuery){window.jQuery=_jQuery;}\nreturn jQuery;},isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++;}else{jQuery.ready(true);}},ready:function(wait){if((wait===true&&!--jQuery.readyWait)||(wait!==true&&!jQuery.isReady)){if(!document.body){return setTimeout(jQuery.ready,1);}\njQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return;}\nreadyList.fireWith(document,[jQuery]);if(jQuery.fn.trigger){jQuery(document).trigger(\"ready\").off(\"ready\");}}},bindReady:function(){if(readyList){return;}\nreadyList=jQuery.Callbacks(\"once memory\");if(document.readyState===\"complete\"){return setTimeout(jQuery.ready,1);}\nif(document.addEventListener){document.addEventListener(\"DOMContentLoaded\",DOMContentLoaded,false);window.addEventListener(\"load\",jQuery.ready,false);}else if(document.attachEvent){document.attachEvent(\"onreadystatechange\",DOMContentLoaded);window.attachEvent(\"onload\",jQuery.ready);var toplevel=false;try{toplevel=window.frameElement==null;}catch(e){}\nif(document.documentElement.doScroll&&toplevel){doScrollCheck();}}},isFunction:function(obj){return jQuery.type(obj)===\"function\";},isArray:Array.isArray||function(obj){return jQuery.type(obj)===\"array\";},isWindow:function(obj){return obj!=null&&obj==obj.window;},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj);},type:function(obj){return obj==null?String(obj):class2type[toString.call(obj)]||\"object\";},isPlainObject:function(obj){if(!obj||jQuery.type(obj)!==\"object\"||obj.nodeType||jQuery.isWindow(obj)){return false;}\ntry{if(obj.constructor&&!hasOwn.call(obj,\"constructor\")&&!hasOwn.call(obj.constructor.prototype,\"isPrototypeOf\")){return false;}}catch(e){return false;}\nvar key;for(key in obj){}\nreturn key===undefined||hasOwn.call(obj,key);},isEmptyObject:function(obj){for(var name in obj){return false;}\nreturn true;},error:function(msg){throw new Error(msg);},parseJSON:function(data){if(typeof data!==\"string\"||!data){return null;}\ndata=jQuery.trim(data);if(window.JSON&&window.JSON.parse){return window.JSON.parse(data);}\nif(rvalidchars.test(data.replace(rvalidescape,\"@\").replace(rvalidtokens,\"]\").replace(rvalidbraces,\"\"))){return(new Function(\"return \"+data))();}\njQuery.error(\"Invalid JSON: \"+data);},parseXML:function(data){if(typeof data!==\"string\"||!data){return null;}\nvar xml,tmp;try{if(window.DOMParser){tmp=new DOMParser();xml=tmp.parseFromString(data,\"text/xml\");}else{xml=new ActiveXObject(\"Microsoft.XMLDOM\");xml.async=\"false\";xml.loadXML(data);}}catch(e){xml=undefined;}\nif(!xml||!xml.documentElement||xml.getElementsByTagName(\"parsererror\").length){jQuery.error(\"Invalid XML: \"+data);}\nreturn xml;},noop:function(){},globalEval:function(data){if(data&&rnotwhite.test(data)){(window.execScript||function(data){window[\"eval\"].call(window,data);})(data);}},camelCase:function(string){return string.replace(rmsPrefix,\"ms-\").replace(rdashAlpha,fcamelCase);},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()===name.toUpperCase();},each:function(object,callback,args){var name,i=0,length=object.length,isObj=length===undefined||jQuery.isFunction(object);if(args){if(isObj){for(name in object){if(callback.apply(object[name],args)===false){break;}}}else{for(;i<length;){if(callback.apply(object[i++],args)===false){break;}}}}else{if(isObj){for(name in object){if(callback.call(object[name],name,object[name])===false){break;}}}else{for(;i<length;){if(callback.call(object[i],i,object[i++])===false){break;}}}}\nreturn object;},trim:trim?function(text){return text==null?\"\":trim.call(text);}:function(text){return text==null?\"\":text.toString().replace(trimLeft,\"\").replace(trimRight,\"\");},makeArray:function(array,results){var ret=results||[];if(array!=null){var type=jQuery.type(array);if(array.length==null||type===\"string\"||type===\"function\"||type===\"regexp\"||jQuery.isWindow(array)){push.call(ret,array);}else{jQuery.merge(ret,array);}}\nreturn ret;},inArray:function(elem,array,i){var len;if(array){if(indexOf){return indexOf.call(array,elem,i);}\nlen=array.length;i=i?i<0?Math.max(0,len+i):i:0;for(;i<len;i++){if(i in array&&array[i]===elem){return i;}}}\nreturn-1;},merge:function(first,second){var i=first.length,j=0;if(typeof second.length===\"number\"){for(var l=second.length;j<l;j++){first[i++]=second[j];}}else{while(second[j]!==undefined){first[i++]=second[j++];}}\nfirst.length=i;return first;},grep:function(elems,callback,inv){var ret=[],retVal;inv=!!inv;for(var i=0,length=elems.length;i<length;i++){retVal=!!callback(elems[i],i);if(inv!==retVal){ret.push(elems[i]);}}\nreturn ret;},map:function(elems,callback,arg){var value,key,ret=[],i=0,length=elems.length,isArray=elems instanceof jQuery||length!==undefined&&typeof length===\"number\"&&((length>0&&elems[0]&&elems[length-1])||length===0||jQuery.isArray(elems));if(isArray){for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret[ret.length]=value;}}}else{for(key in elems){value=callback(elems[key],key,arg);if(value!=null){ret[ret.length]=value;}}}\nreturn ret.concat.apply([],ret);},guid:1,proxy:function(fn,context){if(typeof context===\"string\"){var tmp=fn[context];context=fn;fn=tmp;}\nif(!jQuery.isFunction(fn)){return undefined;}\nvar args=slice.call(arguments,2),proxy=function(){return fn.apply(context,args.concat(slice.call(arguments)));};proxy.guid=fn.guid=fn.guid||proxy.guid||jQuery.guid++;return proxy;},access:function(elems,fn,key,value,chainable,emptyGet,pass){var exec,bulk=key==null,i=0,length=elems.length;if(key&&typeof key===\"object\"){for(i in key){jQuery.access(elems,fn,i,key[i],1,emptyGet,value);}\nchainable=1;}else if(value!==undefined){exec=pass===undefined&&jQuery.isFunction(value);if(bulk){if(exec){exec=fn;fn=function(elem,key,value){return exec.call(jQuery(elem),value);};}else{fn.call(elems,value);fn=null;}}\nif(fn){for(;i<length;i++){fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass);}}\nchainable=1;}\nreturn chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet;},now:function(){return(new Date()).getTime();},uaMatch:function(ua){ua=ua.toLowerCase();var match=rwebkit.exec(ua)||ropera.exec(ua)||rmsie.exec(ua)||ua.indexOf(\"compatible\")<0&&rmozilla.exec(ua)||[];return{browser:match[1]||\"\",version:match[2]||\"0\"};},sub:function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context);}\njQuery.extend(true,jQuerySub,this);jQuerySub.superclass=this;jQuerySub.fn=jQuerySub.prototype=this();jQuerySub.fn.constructor=jQuerySub;jQuerySub.sub=this.sub;jQuerySub.fn.init=function init(selector,context){if(context&&context instanceof jQuery&&!(context instanceof jQuerySub)){context=jQuerySub(context);}\nreturn jQuery.fn.init.call(this,selector,context,rootjQuerySub);};jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return jQuerySub;},browser:{}});jQuery.each(\"Boolean Number String Function Array Date RegExp Object\".split(\" \"),function(i,name){class2type[\"[object \"+name+\"]\"]=name.toLowerCase();});browserMatch=jQuery.uaMatch(userAgent);if(browserMatch.browser){jQuery.browser[browserMatch.browser]=true;jQuery.browser.version=browserMatch.version;}\nif(jQuery.browser.webkit){jQuery.browser.safari=true;}\nif(rnotwhite.test(\"\\xA0\")){trimLeft=/^[\\s\\xA0]+/;trimRight=/[\\s\\xA0]+$/;}\nrootjQuery=jQuery(document);if(document.addEventListener){DOMContentLoaded=function(){document.removeEventListener(\"DOMContentLoaded\",DOMContentLoaded,false);jQuery.ready();};}else if(document.attachEvent){DOMContentLoaded=function(){if(document.readyState===\"complete\"){document.detachEvent(\"onreadystatechange\",DOMContentLoaded);jQuery.ready();}};}\nfunction doScrollCheck(){if(jQuery.isReady){return;}\ntry{document.documentElement.doScroll(\"left\");}catch(e){setTimeout(doScrollCheck,1);return;}\njQuery.ready();}\nreturn jQuery;})();var flagsCache={};function createFlags(flags){var object=flagsCache[flags]={},i,length;flags=flags.split(/\\s+/);for(i=0,length=flags.length;i<length;i++){object[flags[i]]=true;}\nreturn object;}\njQuery.Callbacks=function(flags){flags=flags?(flagsCache[flags]||createFlags(flags)):{};var\nlist=[],stack=[],memory,fired,firing,firingStart,firingLength,firingIndex,add=function(args){var i,length,elem,type,actual;for(i=0,length=args.length;i<length;i++){elem=args[i];type=jQuery.type(elem);if(type===\"array\"){add(elem);}else if(type===\"function\"){if(!flags.unique||!self.has(elem)){list.push(elem);}}}},fire=function(context,args){args=args||[];memory=!flags.memory||[context,args];fired=true;firing=true;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;for(;list&&firingIndex<firingLength;firingIndex++){if(list[firingIndex].apply(context,args)===false&&flags.stopOnFalse){memory=true;break;}}\nfiring=false;if(list){if(!flags.once){if(stack&&stack.length){memory=stack.shift();self.fireWith(memory[0],memory[1]);}}else if(memory===true){self.disable();}else{list=[];}}},self={add:function(){if(list){var length=list.length;add(arguments);if(firing){firingLength=list.length;}else if(memory&&memory!==true){firingStart=length;fire(memory[0],memory[1]);}}\nreturn this;},remove:function(){if(list){var args=arguments,argIndex=0,argLength=args.length;for(;argIndex<argLength;argIndex++){for(var i=0;i<list.length;i++){if(args[argIndex]===list[i]){if(firing){if(i<=firingLength){firingLength--;if(i<=firingIndex){firingIndex--;}}}\nlist.splice(i--,1);if(flags.unique){break;}}}}}\nreturn this;},has:function(fn){if(list){var i=0,length=list.length;for(;i<length;i++){if(fn===list[i]){return true;}}}\nreturn false;},empty:function(){list=[];return this;},disable:function(){list=stack=memory=undefined;return this;},disabled:function(){return!list;},lock:function(){stack=undefined;if(!memory||memory===true){self.disable();}\nreturn this;},locked:function(){return!stack;},fireWith:function(context,args){if(stack){if(firing){if(!flags.once){stack.push([context,args]);}}else if(!(flags.once&&memory)){fire(context,args);}}\nreturn this;},fire:function(){self.fireWith(this,arguments);return this;},fired:function(){return!!fired;}};return self;};var\nsliceDeferred=[].slice;jQuery.extend({Deferred:function(func){var doneList=jQuery.Callbacks(\"once memory\"),failList=jQuery.Callbacks(\"once memory\"),progressList=jQuery.Callbacks(\"memory\"),state=\"pending\",lists={resolve:doneList,reject:failList,notify:progressList},promise={done:doneList.add,fail:failList.add,progress:progressList.add,state:function(){return state;},isResolved:doneList.fired,isRejected:failList.fired,then:function(doneCallbacks,failCallbacks,progressCallbacks){deferred.done(doneCallbacks).fail(failCallbacks).progress(progressCallbacks);return this;},always:function(){deferred.done.apply(deferred,arguments).fail.apply(deferred,arguments);return this;},pipe:function(fnDone,fnFail,fnProgress){return jQuery.Deferred(function(newDefer){jQuery.each({done:[fnDone,\"resolve\"],fail:[fnFail,\"reject\"],progress:[fnProgress,\"notify\"]},function(handler,data){var fn=data[0],action=data[1],returned;if(jQuery.isFunction(fn)){deferred[handler](function(){returned=fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().then(newDefer.resolve,newDefer.reject,newDefer.notify);}else{newDefer[action+\"With\"](this===deferred?newDefer:this,[returned]);}});}else{deferred[handler](newDefer[action]);}});}).promise();},promise:function(obj){if(obj==null){obj=promise;}else{for(var key in promise){obj[key]=promise[key];}}\nreturn obj;}},deferred=promise.promise({}),key;for(key in lists){deferred[key]=lists[key].fire;deferred[key+\"With\"]=lists[key].fireWith;}\ndeferred.done(function(){state=\"resolved\";},failList.disable,progressList.lock).fail(function(){state=\"rejected\";},doneList.disable,progressList.lock);if(func){func.call(deferred,deferred);}\nreturn deferred;},when:function(firstParam){var args=sliceDeferred.call(arguments,0),i=0,length=args.length,pValues=new Array(length),count=length,pCount=length,deferred=length<=1&&firstParam&&jQuery.isFunction(firstParam.promise)?firstParam:jQuery.Deferred(),promise=deferred.promise();function resolveFunc(i){return function(value){args[i]=arguments.length>1?sliceDeferred.call(arguments,0):value;if(!(--count)){deferred.resolveWith(deferred,args);}};}\nfunction progressFunc(i){return function(value){pValues[i]=arguments.length>1?sliceDeferred.call(arguments,0):value;deferred.notifyWith(promise,pValues);};}\nif(length>1){for(;i<length;i++){if(args[i]&&args[i].promise&&jQuery.isFunction(args[i].promise)){args[i].promise().then(resolveFunc(i),deferred.reject,progressFunc(i));}else{--count;}}\nif(!count){deferred.resolveWith(deferred,args);}}else if(deferred!==firstParam){deferred.resolveWith(deferred,length?[firstParam]:[]);}\nreturn promise;}});jQuery.support=(function(){var support,all,a,select,opt,input,fragment,tds,events,eventName,i,isSupported,div=document.createElement(\"div\"),documentElement=document.documentElement;div.setAttribute(\"className\",\"t\");div.innerHTML=\"   <link/><table><\/table><a href='/a' style='top:1px;float:left;opacity:.55;'>a<\/a><input type='checkbox'/>\";all=div.getElementsByTagName(\"*\");a=div.getElementsByTagName(\"a\")[0];if(!all||!all.length||!a){return{};}\nselect=document.createElement(\"select\");opt=select.appendChild(document.createElement(\"option\"));input=div.getElementsByTagName(\"input\")[0];support={leadingWhitespace:(div.firstChild.nodeType===3),tbody:!div.getElementsByTagName(\"tbody\").length,htmlSerialize:!!div.getElementsByTagName(\"link\").length,style:/top/.test(a.getAttribute(\"style\")),hrefNormalized:(a.getAttribute(\"href\")===\"/a\"),opacity:/^0.55/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:(input.value===\"on\"),optSelected:opt.selected,getSetAttribute:div.className!==\"t\",enctype:!!document.createElement(\"form\").enctype,html5Clone:document.createElement(\"nav\").cloneNode(true).outerHTML!==\"<:nav><\/:nav>\",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,pixelMargin:true};jQuery.boxModel=support.boxModel=(document.compatMode===\"CSS1Compat\");input.checked=true;support.noCloneChecked=input.cloneNode(true).checked;select.disabled=true;support.optDisabled=!opt.disabled;try{delete div.test;}catch(e){support.deleteExpando=false;}\nif(!div.addEventListener&&div.attachEvent&&div.fireEvent){div.attachEvent(\"onclick\",function(){support.noCloneEvent=false;});div.cloneNode(true).fireEvent(\"onclick\");}\ninput=document.createElement(\"input\");input.value=\"t\";input.setAttribute(\"type\",\"radio\");support.radioValue=input.value===\"t\";input.setAttribute(\"checked\",\"checked\");input.setAttribute(\"name\",\"t\");div.appendChild(input);fragment=document.createDocumentFragment();fragment.appendChild(div.lastChild);support.checkClone=fragment.cloneNode(true).cloneNode(true).lastChild.checked;support.appendChecked=input.checked;fragment.removeChild(input);fragment.appendChild(div);if(div.attachEvent){for(i in{submit:1,change:1,focusin:1}){eventName=\"on\"+i;isSupported=(eventName in div);if(!isSupported){div.setAttribute(eventName,\"return;\");isSupported=(typeof div[eventName]===\"function\");}\nsupport[i+\"Bubbles\"]=isSupported;}}\nfragment.removeChild(div);fragment=select=opt=div=input=null;jQuery(function(){var container,outer,inner,table,td,offsetSupport,marginDiv,conMarginTop,style,html,positionTopLeftWidthHeight,paddingMarginBorderVisibility,paddingMarginBorder,body=document.getElementsByTagName(\"body\")[0];if(!body){return;}\nconMarginTop=1;paddingMarginBorder=\"padding:0;margin:0;border:\";positionTopLeftWidthHeight=\"position:absolute;top:0;left:0;width:1px;height:1px;\";paddingMarginBorderVisibility=paddingMarginBorder+\"0;visibility:hidden;\";style=\"style='\"+positionTopLeftWidthHeight+paddingMarginBorder+\"5px solid #000;\";html=\"<div \"+style+\"display:block;'><div style='\"+paddingMarginBorder+\"0;display:block;overflow:hidden;'><\/div><\/div>\"+\"<table \"+style+\"' cellpadding='0' cellspacing='0'>\"+\"<tr><td><\/td><\/tr><\/table>\";container=document.createElement(\"div\");container.style.cssText=paddingMarginBorderVisibility+\"width:0;height:0;position:static;top:0;margin-top:\"+conMarginTop+\"px\";body.insertBefore(container,body.firstChild);div=document.createElement(\"div\");container.appendChild(div);div.innerHTML=\"<table><tr><td style='\"+paddingMarginBorder+\"0;display:none'><\/td><td>t<\/td><\/tr><\/table>\";tds=div.getElementsByTagName(\"td\");isSupported=(tds[0].offsetHeight===0);tds[0].style.display=\"\";tds[1].style.display=\"none\";support.reliableHiddenOffsets=isSupported&&(tds[0].offsetHeight===0);if(window.getComputedStyle){div.innerHTML=\"\";marginDiv=document.createElement(\"div\");marginDiv.style.width=\"0\";marginDiv.style.marginRight=\"0\";div.style.width=\"2px\";div.appendChild(marginDiv);support.reliableMarginRight=(parseInt((window.getComputedStyle(marginDiv,null)||{marginRight:0}).marginRight,10)||0)===0;}\nif(typeof div.style.zoom!==\"undefined\"){div.innerHTML=\"\";div.style.width=div.style.padding=\"1px\";div.style.border=0;div.style.overflow=\"hidden\";div.style.display=\"inline\";div.style.zoom=1;support.inlineBlockNeedsLayout=(div.offsetWidth===3);div.style.display=\"block\";div.style.overflow=\"visible\";div.innerHTML=\"<div style='width:5px;'><\/div>\";support.shrinkWrapBlocks=(div.offsetWidth!==3);}\ndiv.style.cssText=positionTopLeftWidthHeight+paddingMarginBorderVisibility;div.innerHTML=html;outer=div.firstChild;inner=outer.firstChild;td=outer.nextSibling.firstChild.firstChild;offsetSupport={doesNotAddBorder:(inner.offsetTop!==5),doesAddBorderForTableAndCells:(td.offsetTop===5)};inner.style.position=\"fixed\";inner.style.top=\"20px\";offsetSupport.fixedPosition=(inner.offsetTop===20||inner.offsetTop===15);inner.style.position=inner.style.top=\"\";outer.style.overflow=\"hidden\";outer.style.position=\"relative\";offsetSupport.subtractsBorderForOverflowNotVisible=(inner.offsetTop===-5);offsetSupport.doesNotIncludeMarginInBodyOffset=(body.offsetTop!==conMarginTop);if(window.getComputedStyle){div.style.marginTop=\"1%\";support.pixelMargin=(window.getComputedStyle(div,null)||{marginTop:0}).marginTop!==\"1%\";}\nif(typeof container.style.zoom!==\"undefined\"){container.style.zoom=1;}\nbody.removeChild(container);marginDiv=div=container=null;jQuery.extend(support,offsetSupport);});return support;})();var rbrace=/^(?:\\{.*\\}|\\[.*\\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},uuid:0,expando:\"jQuery\"+(jQuery.fn.jquery+Math.random()).replace(/\\D/g,\"\"),noData:{\"embed\":true,\"object\":\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\",\"applet\":true},hasData:function(elem){elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando];return!!elem&&!isEmptyDataObject(elem);},data:function(elem,name,data,pvt){if(!jQuery.acceptData(elem)){return;}\nvar privateCache,thisCache,ret,internalKey=jQuery.expando,getByName=typeof name===\"string\",isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey,isEvents=name===\"events\";if((!id||!cache[id]||(!isEvents&&!pvt&&!cache[id].data))&&getByName&&data===undefined){return;}\nif(!id){if(isNode){elem[internalKey]=id=++jQuery.uuid;}else{id=internalKey;}}\nif(!cache[id]){cache[id]={};if(!isNode){cache[id].toJSON=jQuery.noop;}}\nif(typeof name===\"object\"||typeof name===\"function\"){if(pvt){cache[id]=jQuery.extend(cache[id],name);}else{cache[id].data=jQuery.extend(cache[id].data,name);}}\nprivateCache=thisCache=cache[id];if(!pvt){if(!thisCache.data){thisCache.data={};}\nthisCache=thisCache.data;}\nif(data!==undefined){thisCache[jQuery.camelCase(name)]=data;}\nif(isEvents&&!thisCache[name]){return privateCache.events;}\nif(getByName){ret=thisCache[name];if(ret==null){ret=thisCache[jQuery.camelCase(name)];}}else{ret=thisCache;}\nreturn ret;},removeData:function(elem,name,pvt){if(!jQuery.acceptData(elem)){return;}\nvar thisCache,i,l,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:internalKey;if(!cache[id]){return;}\nif(name){thisCache=pvt?cache[id]:cache[id].data;if(thisCache){if(!jQuery.isArray(name)){if(name in thisCache){name=[name];}else{name=jQuery.camelCase(name);if(name in thisCache){name=[name];}else{name=name.split(\" \");}}}\nfor(i=0,l=name.length;i<l;i++){delete thisCache[name[i]];}\nif(!(pvt?isEmptyDataObject:jQuery.isEmptyObject)(thisCache)){return;}}}\nif(!pvt){delete cache[id].data;if(!isEmptyDataObject(cache[id])){return;}}\nif(jQuery.support.deleteExpando||!cache.setInterval){delete cache[id];}else{cache[id]=null;}\nif(isNode){if(jQuery.support.deleteExpando){delete elem[internalKey];}else if(elem.removeAttribute){elem.removeAttribute(internalKey);}else{elem[internalKey]=null;}}},_data:function(elem,name,data){return jQuery.data(elem,name,data,true);},acceptData:function(elem){if(elem.nodeName){var match=jQuery.noData[elem.nodeName.toLowerCase()];if(match){return!(match===true||elem.getAttribute(\"classid\")!==match);}}\nreturn true;}});jQuery.fn.extend({data:function(key,value){var parts,part,attr,name,l,elem=this[0],i=0,data=null;if(key===undefined){if(this.length){data=jQuery.data(elem);if(elem.nodeType===1&&!jQuery._data(elem,\"parsedAttrs\")){attr=elem.attributes;for(l=attr.length;i<l;i++){name=attr[i].name;if(name.indexOf(\"data-\")===0){name=jQuery.camelCase(name.substring(5));dataAttr(elem,name,data[name]);}}\njQuery._data(elem,\"parsedAttrs\",true);}}\nreturn data;}\nif(typeof key===\"object\"){return this.each(function(){jQuery.data(this,key);});}\nparts=key.split(\".\",2);parts[1]=parts[1]?\".\"+parts[1]:\"\";part=parts[1]+\"!\";return jQuery.access(this,function(value){if(value===undefined){data=this.triggerHandler(\"getData\"+part,[parts[0]]);if(data===undefined&&elem){data=jQuery.data(elem,key);data=dataAttr(elem,key,data);}\nreturn data===undefined&&parts[1]?this.data(parts[0]):data;}\nparts[1]=value;this.each(function(){var self=jQuery(this);self.triggerHandler(\"setData\"+part,parts);jQuery.data(this,key,value);self.triggerHandler(\"changeData\"+part,parts);});},null,value,arguments.length>1,null,false);},removeData:function(key){return this.each(function(){jQuery.removeData(this,key);});}});function dataAttr(elem,key,data){if(data===undefined&&elem.nodeType===1){var name=\"data-\"+key.replace(rmultiDash,\"-$1\").toLowerCase();data=elem.getAttribute(name);if(typeof data===\"string\"){try{data=data===\"true\"?true:data===\"false\"?false:data===\"null\"?null:jQuery.isNumeric(data)?+data:rbrace.test(data)?jQuery.parseJSON(data):data;}catch(e){}\njQuery.data(elem,key,data);}else{data=undefined;}}\nreturn data;}\nfunction isEmptyDataObject(obj){for(var name in obj){if(name===\"data\"&&jQuery.isEmptyObject(obj[name])){continue;}\nif(name!==\"toJSON\"){return false;}}\nreturn true;}\nfunction handleQueueMarkDefer(elem,type,src){var deferDataKey=type+\"defer\",queueDataKey=type+\"queue\",markDataKey=type+\"mark\",defer=jQuery._data(elem,deferDataKey);if(defer&&(src===\"queue\"||!jQuery._data(elem,queueDataKey))&&(src===\"mark\"||!jQuery._data(elem,markDataKey))){setTimeout(function(){if(!jQuery._data(elem,queueDataKey)&&!jQuery._data(elem,markDataKey)){jQuery.removeData(elem,deferDataKey,true);defer.fire();}},0);}}\njQuery.extend({_mark:function(elem,type){if(elem){type=(type||\"fx\")+\"mark\";jQuery._data(elem,type,(jQuery._data(elem,type)||0)+1);}},_unmark:function(force,elem,type){if(force!==true){type=elem;elem=force;force=false;}\nif(elem){type=type||\"fx\";var key=type+\"mark\",count=force?0:((jQuery._data(elem,key)||1)-1);if(count){jQuery._data(elem,key,count);}else{jQuery.removeData(elem,key,true);handleQueueMarkDefer(elem,type,\"mark\");}}},queue:function(elem,type,data){var q;if(elem){type=(type||\"fx\")+\"queue\";q=jQuery._data(elem,type);if(data){if(!q||jQuery.isArray(data)){q=jQuery._data(elem,type,jQuery.makeArray(data));}else{q.push(data);}}\nreturn q||[];}},dequeue:function(elem,type){type=type||\"fx\";var queue=jQuery.queue(elem,type),fn=queue.shift(),hooks={};if(fn===\"inprogress\"){fn=queue.shift();}\nif(fn){if(type===\"fx\"){queue.unshift(\"inprogress\");}\njQuery._data(elem,type+\".run\",hooks);fn.call(elem,function(){jQuery.dequeue(elem,type);},hooks);}\nif(!queue.length){jQuery.removeData(elem,type+\"queue \"+type+\".run\",true);handleQueueMarkDefer(elem,type,\"queue\");}}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!==\"string\"){data=type;type=\"fx\";setter--;}\nif(arguments.length<setter){return jQuery.queue(this[0],type);}\nreturn data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);if(type===\"fx\"&&queue[0]!==\"inprogress\"){jQuery.dequeue(this,type);}});},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type);});},delay:function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||\"fx\";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout);};});},clearQueue:function(type){return this.queue(type||\"fx\",[]);},promise:function(type,object){if(typeof type!==\"string\"){object=type;type=undefined;}\ntype=type||\"fx\";var defer=jQuery.Deferred(),elements=this,i=elements.length,count=1,deferDataKey=type+\"defer\",queueDataKey=type+\"queue\",markDataKey=type+\"mark\",tmp;function resolve(){if(!(--count)){defer.resolveWith(elements,[elements]);}}\nwhile(i--){if((tmp=jQuery.data(elements[i],deferDataKey,undefined,true)||(jQuery.data(elements[i],queueDataKey,undefined,true)||jQuery.data(elements[i],markDataKey,undefined,true))&&jQuery.data(elements[i],deferDataKey,jQuery.Callbacks(\"once memory\"),true))){count++;tmp.add(resolve);}}\nresolve();return defer.promise(object);}});var rclass=/[\\n\\t\\r]/g,rspace=/\\s+/,rreturn=/\\r/g,rtype=/^(?:button|input)$/i,rfocusable=/^(?:button|input|object|select|textarea)$/i,rclickable=/^a(?:rea)?$/i,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute,nodeHook,boolHook,fixSpecified;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,arguments.length>1);},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name);});},prop:function(name,value){return jQuery.access(this,jQuery.prop,name,value,arguments.length>1);},removeProp:function(name){name=jQuery.propFix[name]||name;return this.each(function(){try{this[name]=undefined;delete this[name];}catch(e){}});},addClass:function(value){var classNames,i,l,elem,setClass,c,cl;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className));});}\nif(value&&typeof value===\"string\"){classNames=value.split(rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1){if(!elem.className&&classNames.length===1){elem.className=value;}else{setClass=\" \"+elem.className+\" \";for(c=0,cl=classNames.length;c<cl;c++){if(!~setClass.indexOf(\" \"+classNames[c]+\" \")){setClass+=classNames[c]+\" \";}}\nelem.className=jQuery.trim(setClass);}}}}\nreturn this;},removeClass:function(value){var classNames,i,l,elem,className,c,cl;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className));});}\nif((value&&typeof value===\"string\")||value===undefined){classNames=(value||\"\").split(rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1&&elem.className){if(value){className=(\" \"+elem.className+\" \").replace(rclass,\" \");for(c=0,cl=classNames.length;c<cl;c++){className=className.replace(\" \"+classNames[c]+\" \",\" \");}\nelem.className=jQuery.trim(className);}else{elem.className=\"\";}}}}\nreturn this;},toggleClass:function(value,stateVal){var type=typeof value,isBool=typeof stateVal===\"boolean\";if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal);});}\nreturn this.each(function(){if(type===\"string\"){var className,i=0,self=jQuery(this),state=stateVal,classNames=value.split(rspace);while((className=classNames[i++])){state=isBool?state:!self.hasClass(className);self[state?\"addClass\":\"removeClass\"](className);}}else if(type===\"undefined\"||type===\"boolean\"){if(this.className){jQuery._data(this,\"__className__\",this.className);}\nthis.className=this.className||value===false?\"\":jQuery._data(this,\"__className__\")||\"\";}});},hasClass:function(selector){var className=\" \"+selector+\" \",i=0,l=this.length;for(;i<l;i++){if(this[i].nodeType===1&&(\" \"+this[i].className+\" \").replace(rclass,\" \").indexOf(className)>-1){return true;}}\nreturn false;},val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&\"get\"in hooks&&(ret=hooks.get(elem,\"value\"))!==undefined){return ret;}\nret=elem.value;return typeof ret===\"string\"?ret.replace(rreturn,\"\"):ret==null?\"\":ret;}\nreturn;}\nisFunction=jQuery.isFunction(value);return this.each(function(i){var self=jQuery(this),val;if(this.nodeType!==1){return;}\nif(isFunction){val=value.call(this,i,self.val());}else{val=value;}\nif(val==null){val=\"\";}else if(typeof val===\"number\"){val+=\"\";}else if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?\"\":value+\"\";});}\nhooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!(\"set\"in hooks)||hooks.set(this,val,\"value\")===undefined){this.value=val;}});}});jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text;}},select:{get:function(elem){var value,i,max,option,index=elem.selectedIndex,values=[],options=elem.options,one=elem.type===\"select-one\";if(index<0){return null;}\ni=one?index:0;max=one?index+1:options.length;for(;i<max;i++){option=options[i];if(option.selected&&(jQuery.support.optDisabled?!option.disabled:option.getAttribute(\"disabled\")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,\"optgroup\"))){value=jQuery(option).val();if(one){return value;}\nvalues.push(value);}}\nif(one&&!values.length&&options.length){return jQuery(options[index]).val();}\nreturn values;},set:function(elem,value){var values=jQuery.makeArray(value);jQuery(elem).find(\"option\").each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0;});if(!values.length){elem.selectedIndex=-1;}\nreturn values;}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(elem,name,value,pass){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return;}\nif(pass&&name in jQuery.attrFn){return jQuery(elem)[name](value);}\nif(typeof elem.getAttribute===\"undefined\"){return jQuery.prop(elem,name,value);}\nnotxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook);}\nif(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);return;}else if(hooks&&\"set\"in hooks&&notxml&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}else{elem.setAttribute(name,\"\"+value);return value;}}else if(hooks&&\"get\"in hooks&&notxml&&(ret=hooks.get(elem,name))!==null){return ret;}else{ret=elem.getAttribute(name);return ret===null?undefined:ret;}},removeAttr:function(elem,value){var propName,attrNames,name,l,isBool,i=0;if(value&&elem.nodeType===1){attrNames=value.toLowerCase().split(rspace);l=attrNames.length;for(;i<l;i++){name=attrNames[i];if(name){propName=jQuery.propFix[name]||name;isBool=rboolean.test(name);if(!isBool){jQuery.attr(elem,name,\"\");}\nelem.removeAttribute(getSetAttribute?name:propName);if(isBool&&propName in elem){elem[propName]=false;}}}}},attrHooks:{type:{set:function(elem,value){if(rtype.test(elem.nodeName)&&elem.parentNode){jQuery.error(\"type property can't be changed\");}else if(!jQuery.support.radioValue&&value===\"radio\"&&jQuery.nodeName(elem,\"input\")){var val=elem.value;elem.setAttribute(\"type\",value);if(val){elem.value=val;}\nreturn value;}}},value:{get:function(elem,name){if(nodeHook&&jQuery.nodeName(elem,\"button\")){return nodeHook.get(elem,name);}\nreturn name in elem?elem.value:null;},set:function(elem,value,name){if(nodeHook&&jQuery.nodeName(elem,\"button\")){return nodeHook.set(elem,value,name);}\nelem.value=value;}}},propFix:{tabindex:\"tabIndex\",readonly:\"readOnly\",\"for\":\"htmlFor\",\"class\":\"className\",maxlength:\"maxLength\",cellspacing:\"cellSpacing\",cellpadding:\"cellPadding\",rowspan:\"rowSpan\",colspan:\"colSpan\",usemap:\"useMap\",frameborder:\"frameBorder\",contenteditable:\"contentEditable\"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return;}\nnotxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name];}\nif(value!==undefined){if(hooks&&\"set\"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}else{return(elem[name]=value);}}else{if(hooks&&\"get\"in hooks&&(ret=hooks.get(elem,name))!==null){return ret;}else{return elem[name];}}},propHooks:{tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode(\"tabindex\");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined;}}}});jQuery.attrHooks.tabindex=jQuery.propHooks.tabIndex;boolHook={get:function(elem,name){var attrNode,property=jQuery.prop(elem,name);return property===true||typeof property!==\"boolean\"&&(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==false?name.toLowerCase():undefined;},set:function(elem,value,name){var propName;if(value===false){jQuery.removeAttr(elem,name);}else{propName=jQuery.propFix[name]||name;if(propName in elem){elem[propName]=true;}\nelem.setAttribute(name,name.toLowerCase());}\nreturn name;}};if(!getSetAttribute){fixSpecified={name:true,id:true,coords:true};nodeHook=jQuery.valHooks.button={get:function(elem,name){var ret;ret=elem.getAttributeNode(name);return ret&&(fixSpecified[name]?ret.nodeValue!==\"\":ret.specified)?ret.nodeValue:undefined;},set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(!ret){ret=document.createAttribute(name);elem.setAttributeNode(ret);}\nreturn(ret.nodeValue=value+\"\");}};jQuery.attrHooks.tabindex.set=nodeHook.set;jQuery.each([\"width\",\"height\"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){if(value===\"\"){elem.setAttribute(name,\"auto\");return value;}}});});jQuery.attrHooks.contenteditable={get:nodeHook.get,set:function(elem,value,name){if(value===\"\"){value=\"false\";}\nnodeHook.set(elem,value,name);}};}\nif(!jQuery.support.hrefNormalized){jQuery.each([\"href\",\"src\",\"width\",\"height\"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return ret===null?undefined:ret;}});});}\nif(!jQuery.support.style){jQuery.attrHooks.style={get:function(elem){return elem.style.cssText.toLowerCase()||undefined;},set:function(elem,value){return(elem.style.cssText=\"\"+value);}};}\nif(!jQuery.support.optSelected){jQuery.propHooks.selected=jQuery.extend(jQuery.propHooks.selected,{get:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex;}}\nreturn null;}});}\nif(!jQuery.support.enctype){jQuery.propFix.enctype=\"encoding\";}\nif(!jQuery.support.checkOn){jQuery.each([\"radio\",\"checkbox\"],function(){jQuery.valHooks[this]={get:function(elem){return elem.getAttribute(\"value\")===null?\"on\":elem.value;}};});}\njQuery.each([\"radio\",\"checkbox\"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],{set:function(elem,value){if(jQuery.isArray(value)){return(elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0);}}});});var rformElems=/^(?:textarea|input|select)$/i,rtypenamespace=/^([^\\.]*)?(?:\\.(.+))?$/,rhoverHack=/(?:^|\\s)hover(\\.\\S+)?\\b/,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rquickIs=/^(\\w*)(?:#([\\w\\-]+))?(?:\\.([\\w\\-]+))?$/,quickParse=function(selector){var quick=rquickIs.exec(selector);if(quick){quick[1]=(quick[1]||\"\").toLowerCase();quick[3]=quick[3]&&new RegExp(\"(?:^|\\\\s)\"+quick[3]+\"(?:\\\\s|$)\");}\nreturn quick;},quickIs=function(elem,m){var attrs=elem.attributes||{};return((!m[1]||elem.nodeName.toLowerCase()===m[1])&&(!m[2]||(attrs.id||{}).value===m[2])&&(!m[3]||m[3].test((attrs[\"class\"]||{}).value)));},hoverHack=function(events){return jQuery.event.special.hover?events:events.replace(rhoverHack,\"mouseenter$1 mouseleave$1\");};jQuery.event={add:function(elem,types,handler,data,selector){var elemData,eventHandle,events,t,tns,type,namespaces,handleObj,handleObjIn,quick,handlers,special;if(elem.nodeType===3||elem.nodeType===8||!types||!handler||!(elemData=jQuery._data(elem))){return;}\nif(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector;}\nif(!handler.guid){handler.guid=jQuery.guid++;}\nevents=elemData.events;if(!events){elemData.events=events={};}\neventHandle=elemData.handle;if(!eventHandle){elemData.handle=eventHandle=function(e){return typeof jQuery!==\"undefined\"&&(!e||jQuery.event.triggered!==e.type)?jQuery.event.dispatch.apply(eventHandle.elem,arguments):undefined;};eventHandle.elem=elem;}\ntypes=jQuery.trim(hoverHack(types)).split(\" \");for(t=0;t<types.length;t++){tns=rtypenamespace.exec(types[t])||[];type=tns[1];namespaces=(tns[2]||\"\").split(\".\").sort();special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:tns[1],data:data,handler:handler,guid:handler.guid,selector:selector,quick:selector&&quickParse(selector),namespace:namespaces.join(\".\")},handleObjIn);handlers=events[type];if(!handlers){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false);}else if(elem.attachEvent){elem.attachEvent(\"on\"+type,eventHandle);}}}\nif(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid;}}\nif(selector){handlers.splice(handlers.delegateCount++,0,handleObj);}else{handlers.push(handleObj);}\njQuery.event.global[type]=true;}\nelem=null;},global:{},remove:function(elem,types,handler,selector,mappedTypes){var elemData=jQuery.hasData(elem)&&jQuery._data(elem),t,tns,type,origType,namespaces,origCount,j,events,special,handle,eventType,handleObj;if(!elemData||!(events=elemData.events)){return;}\ntypes=jQuery.trim(hoverHack(types||\"\")).split(\" \");for(t=0;t<types.length;t++){tns=rtypenamespace.exec(types[t])||[];type=origType=tns[1];namespaces=tns[2];if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true);}\ncontinue;}\nspecial=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;eventType=events[type]||[];origCount=eventType.length;namespaces=namespaces?new RegExp(\"(^|\\\\.)\"+namespaces.split(\".\").sort().join(\"\\\\.(?:.*\\\\.)?\")+\"(\\\\.|$)\"):null;for(j=0;j<eventType.length;j++){handleObj=eventType[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!namespaces||namespaces.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector===\"**\"&&handleObj.selector)){eventType.splice(j--,1);if(handleObj.selector){eventType.delegateCount--;}\nif(special.remove){special.remove.call(elem,handleObj);}}}\nif(eventType.length===0&&origCount!==eventType.length){if(!special.teardown||special.teardown.call(elem,namespaces)===false){jQuery.removeEvent(elem,type,elemData.handle);}\ndelete events[type];}}\nif(jQuery.isEmptyObject(events)){handle=elemData.handle;if(handle){handle.elem=null;}\njQuery.removeData(elem,[\"events\",\"handle\"],true);}},customEvent:{\"getData\":true,\"setData\":true,\"changeData\":true},trigger:function(event,data,elem,onlyHandlers){if(elem&&(elem.nodeType===3||elem.nodeType===8)){return;}\nvar type=event.type||event,namespaces=[],cache,exclusive,i,cur,old,ontype,special,handle,eventPath,bubbleType;if(rfocusMorph.test(type+jQuery.event.triggered)){return;}\nif(type.indexOf(\"!\")>=0){type=type.slice(0,-1);exclusive=true;}\nif(type.indexOf(\".\")>=0){namespaces=type.split(\".\");type=namespaces.shift();namespaces.sort();}\nif((!elem||jQuery.event.customEvent[type])&&!jQuery.event.global[type]){return;}\nevent=typeof event===\"object\"?event[jQuery.expando]?event:new jQuery.Event(type,event):new jQuery.Event(type);event.type=type;event.isTrigger=true;event.exclusive=exclusive;event.namespace=namespaces.join(\".\");event.namespace_re=event.namespace?new RegExp(\"(^|\\\\.)\"+namespaces.join(\"\\\\.(?:.*\\\\.)?\")+\"(\\\\.|$)\"):null;ontype=type.indexOf(\":\")<0?\"on\"+type:\"\";if(!elem){cache=jQuery.cache;for(i in cache){if(cache[i].events&&cache[i].events[type]){jQuery.event.trigger(event,data,cache[i].handle.elem,true);}}\nreturn;}\nevent.result=undefined;if(!event.target){event.target=elem;}\ndata=data!=null?jQuery.makeArray(data):[];data.unshift(event);special=jQuery.event.special[type]||{};if(special.trigger&&special.trigger.apply(elem,data)===false){return;}\neventPath=[[elem,special.bindType||type]];if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;cur=rfocusMorph.test(bubbleType+type)?elem:elem.parentNode;old=null;for(;cur;cur=cur.parentNode){eventPath.push([cur,bubbleType]);old=cur;}\nif(old&&old===elem.ownerDocument){eventPath.push([old.defaultView||old.parentWindow||window,bubbleType]);}}\nfor(i=0;i<eventPath.length&&!event.isPropagationStopped();i++){cur=eventPath[i][0];event.type=eventPath[i][1];handle=(jQuery._data(cur,\"events\")||{})[event.type]&&jQuery._data(cur,\"handle\");if(handle){handle.apply(cur,data);}\nhandle=ontype&&cur[ontype];if(handle&&jQuery.acceptData(cur)&&handle.apply(cur,data)===false){event.preventDefault();}}\nevent.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(elem.ownerDocument,data)===false)&&!(type===\"click\"&&jQuery.nodeName(elem,\"a\"))&&jQuery.acceptData(elem)){if(ontype&&elem[type]&&((type!==\"focus\"&&type!==\"blur\")||event.target.offsetWidth!==0)&&!jQuery.isWindow(elem)){old=elem[ontype];if(old){elem[ontype]=null;}\njQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(old){elem[ontype]=old;}}}}\nreturn event.result;},dispatch:function(event){event=jQuery.event.fix(event||window.event);var handlers=((jQuery._data(this,\"events\")||{})[event.type]||[]),delegateCount=handlers.delegateCount,args=[].slice.call(arguments,0),run_all=!event.exclusive&&!event.namespace,special=jQuery.event.special[event.type]||{},handlerQueue=[],i,j,cur,jqcur,ret,selMatch,matched,matches,handleObj,sel,related;args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return;}\nif(delegateCount&&!(event.button&&event.type===\"click\")){jqcur=jQuery(this);jqcur.context=this.ownerDocument||this;for(cur=event.target;cur!=this;cur=cur.parentNode||this){if(cur.disabled!==true){selMatch={};matches=[];jqcur[0]=cur;for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector;if(selMatch[sel]===undefined){selMatch[sel]=(handleObj.quick?quickIs(cur,handleObj.quick):jqcur.is(sel));}\nif(selMatch[sel]){matches.push(handleObj);}}\nif(matches.length){handlerQueue.push({elem:cur,matches:matches});}}}}\nif(handlers.length>delegateCount){handlerQueue.push({elem:this,matches:handlers.slice(delegateCount)});}\nfor(i=0;i<handlerQueue.length&&!event.isPropagationStopped();i++){matched=handlerQueue[i];event.currentTarget=matched.elem;for(j=0;j<matched.matches.length&&!event.isImmediatePropagationStopped();j++){handleObj=matched.matches[j];if(run_all||(!event.namespace&&!handleObj.namespace)||event.namespace_re&&event.namespace_re.test(handleObj.namespace)){event.data=handleObj.data;event.handleObj=handleObj;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){event.result=ret;if(ret===false){event.preventDefault();event.stopPropagation();}}}}}\nif(special.postDispatch){special.postDispatch.call(this,event);}\nreturn event.result;},props:\"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),fixHooks:{},keyHooks:{props:\"char charCode key keyCode\".split(\" \"),filter:function(event,original){if(event.which==null){event.which=original.charCode!=null?original.charCode:original.keyCode;}\nreturn event;}},mouseHooks:{props:\"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),filter:function(event,original){var eventDoc,doc,body,button=original.button,fromElement=original.fromElement;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);}\nif(!event.relatedTarget&&fromElement){event.relatedTarget=fromElement===event.target?original.toElement:fromElement;}\nif(!event.which&&button!==undefined){event.which=(button&1?1:(button&2?3:(button&4?2:0)));}\nreturn event;}},fix:function(event){if(event[jQuery.expando]){return event;}\nvar i,prop,originalEvent=event,fixHook=jQuery.event.fixHooks[event.type]||{},copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=jQuery.Event(originalEvent);for(i=copy.length;i;){prop=copy[--i];event[prop]=originalEvent[prop];}\nif(!event.target){event.target=originalEvent.srcElement||document;}\nif(event.target.nodeType===3){event.target=event.target.parentNode;}\nif(event.metaKey===undefined){event.metaKey=event.ctrlKey;}\nreturn fixHook.filter?fixHook.filter(event,originalEvent):event;},special:{ready:{setup:jQuery.bindReady},load:{noBubble:true},focus:{delegateType:\"focusin\"},blur:{delegateType:\"focusout\"},beforeunload:{setup:function(data,namespaces,eventHandle){if(jQuery.isWindow(this)){this.onbeforeunload=eventHandle;}},teardown:function(namespaces,eventHandle){if(this.onbeforeunload===eventHandle){this.onbeforeunload=null;}}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event(),event,{type:type,isSimulated:true,originalEvent:{}});if(bubble){jQuery.event.trigger(e,null,elem);}else{jQuery.event.dispatch.call(elem,e);}\nif(e.isDefaultPrevented()){event.preventDefault();}}};jQuery.event.handle=jQuery.event.dispatch;jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle,false);}}:function(elem,type,handle){if(elem.detachEvent){elem.detachEvent(\"on\"+type,handle);}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props);}\nif(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=(src.defaultPrevented||src.returnValue===false||src.getPreventDefault&&src.getPreventDefault())?returnTrue:returnFalse;}else{this.type=src;}\nif(props){jQuery.extend(this,props);}\nthis.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true;};function returnFalse(){return false;}\nfunction returnTrue(){return true;}\njQuery.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;if(!e){return;}\nif(e.preventDefault){e.preventDefault();}else{e.returnValue=false;}},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;if(!e){return;}\nif(e.stopPropagation){e.stopPropagation();}\ne.cancelBubble=true;},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation();},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};jQuery.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var target=this,related=event.relatedTarget,handleObj=event.handleObj,selector=handleObj.selector,ret;if(!related||(related!==target&&!jQuery.contains(target,related))){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix;}\nreturn ret;}};});if(!jQuery.support.submitBubbles){jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,\"form\")){return false;}\njQuery.event.add(this,\"click._submit keypress._submit\",function(e){var elem=e.target,form=jQuery.nodeName(elem,\"input\")||jQuery.nodeName(elem,\"button\")?elem.form:undefined;if(form&&!form._submit_attached){jQuery.event.add(form,\"submit._submit\",function(event){event._submit_bubble=true;});form._submit_attached=true;}});},postDispatch:function(event){if(event._submit_bubble){delete event._submit_bubble;if(this.parentNode&&!event.isTrigger){jQuery.event.simulate(\"submit\",this.parentNode,event,true);}}},teardown:function(){if(jQuery.nodeName(this,\"form\")){return false;}\njQuery.event.remove(this,\"._submit\");}};}\nif(!jQuery.support.changeBubbles){jQuery.event.special.change={setup:function(){if(rformElems.test(this.nodeName)){if(this.type===\"checkbox\"||this.type===\"radio\"){jQuery.event.add(this,\"propertychange._change\",function(event){if(event.originalEvent.propertyName===\"checked\"){this._just_changed=true;}});jQuery.event.add(this,\"click._change\",function(event){if(this._just_changed&&!event.isTrigger){this._just_changed=false;jQuery.event.simulate(\"change\",this,event,true);}});}\nreturn false;}\njQuery.event.add(this,\"beforeactivate._change\",function(e){var elem=e.target;if(rformElems.test(elem.nodeName)&&!elem._change_attached){jQuery.event.add(elem,\"change._change\",function(event){if(this.parentNode&&!event.isSimulated&&!event.isTrigger){jQuery.event.simulate(\"change\",this.parentNode,event,true);}});elem._change_attached=true;}});},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||(elem.type!==\"radio\"&&elem.type!==\"checkbox\")){return event.handleObj.handler.apply(this,arguments);}},teardown:function(){jQuery.event.remove(this,\"._change\");return rformElems.test(this.nodeName);}};}\nif(!jQuery.support.focusinBubbles){jQuery.each({focus:\"focusin\",blur:\"focusout\"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),true);};jQuery.event.special[fix]={setup:function(){if(attaches++===0){document.addEventListener(orig,handler,true);}},teardown:function(){if(--attaches===0){document.removeEventListener(orig,handler,true);}}};});}\njQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if(typeof types===\"object\"){if(typeof selector!==\"string\"){data=data||selector;selector=undefined;}\nfor(type in types){this.on(type,selector,data,types[type],one);}\nreturn this;}\nif(data==null&&fn==null){fn=selector;data=selector=undefined;}else if(fn==null){if(typeof selector===\"string\"){fn=data;data=undefined;}else{fn=data;data=selector;selector=undefined;}}\nif(fn===false){fn=returnFalse;}else if(!fn){return this;}\nif(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments);};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++);}\nreturn this.each(function(){jQuery.event.add(this,types,fn,data,selector);});},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1);},off:function(types,selector,fn){if(types&&types.preventDefault&&types.handleObj){var handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+\".\"+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this;}\nif(typeof types===\"object\"){for(var type in types){this.off(type,selector,types[type]);}\nreturn this;}\nif(selector===false||typeof selector===\"function\"){fn=selector;selector=undefined;}\nif(fn===false){fn=returnFalse;}\nreturn this.each(function(){jQuery.event.remove(this,types,fn,selector);});},bind:function(types,data,fn){return this.on(types,null,data,fn);},unbind:function(types,fn){return this.off(types,null,fn);},live:function(types,data,fn){jQuery(this.context).on(types,this.selector,data,fn);return this;},die:function(types,fn){jQuery(this.context).off(types,this.selector||\"**\",fn);return this;},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn);},undelegate:function(selector,types,fn){return arguments.length==1?this.off(selector,\"**\"):this.off(types,selector,fn);},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this);});},triggerHandler:function(type,data){if(this[0]){return jQuery.event.trigger(type,data,this[0],true);}},toggle:function(fn){var args=arguments,guid=fn.guid||jQuery.guid++,i=0,toggler=function(event){var lastToggle=(jQuery._data(this,\"lastToggle\"+fn.guid)||0)%i;jQuery._data(this,\"lastToggle\"+fn.guid,lastToggle+1);event.preventDefault();return args[lastToggle].apply(this,arguments)||false;};toggler.guid=guid;while(i<args.length){args[i++].guid=guid;}\nreturn this.click(toggler);},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver);}});jQuery.each((\"blur focus focusin focusout load resize scroll unload click dblclick \"+\"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \"+\"change select submit keydown keypress keyup error contextmenu\").split(\" \"),function(i,name){jQuery.fn[name]=function(data,fn){if(fn==null){fn=data;data=null;}\nreturn arguments.length>0?this.on(name,null,data,fn):this.trigger(name);};if(jQuery.attrFn){jQuery.attrFn[name]=true;}\nif(rkeyEvent.test(name)){jQuery.event.fixHooks[name]=jQuery.event.keyHooks;}\nif(rmouseEvent.test(name)){jQuery.event.fixHooks[name]=jQuery.event.mouseHooks;}});(function(){var chunker=/((?:\\((?:\\([^()]+\\)|[^()]+)+\\)|\\[(?:\\[[^\\[\\]]*\\]|['\"][^'\"]*['\"]|[^\\[\\]'\"]+)+\\]|\\\\.|[^ >+~,(\\[\\\\]+)+|[>+~])(\\s*,\\s*)?((?:.|\\r|\\n)*)/g,expando=\"sizcache\"+(Math.random()+'').replace('.',''),done=0,toString=Object.prototype.toString,hasDuplicate=false,baseHasDuplicate=true,rBackslash=/\\\\/g,rReturn=/\\r\\n/g,rNonWord=/\\W/;[0,0].sort(function(){baseHasDuplicate=false;return 0;});var Sizzle=function(selector,context,results,seed){results=results||[];context=context||document;var origContext=context;if(context.nodeType!==1&&context.nodeType!==9){return[];}\nif(!selector||typeof selector!==\"string\"){return results;}\nvar m,set,checkSet,extra,ret,cur,pop,i,prune=true,contextXML=Sizzle.isXML(context),parts=[],soFar=selector;do{chunker.exec(\"\");m=chunker.exec(soFar);if(m){soFar=m[3];parts.push(m[1]);if(m[2]){extra=m[3];break;}}}while(m);if(parts.length>1&&origPOS.exec(selector)){if(parts.length===2&&Expr.relative[parts[0]]){set=posProcess(parts[0]+parts[1],context,seed);}else{set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);while(parts.length){selector=parts.shift();if(Expr.relative[selector]){selector+=parts.shift();}\nset=posProcess(selector,set,seed);}}}else{if(!seed&&parts.length>1&&context.nodeType===9&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1])){ret=Sizzle.find(parts.shift(),context,contextXML);context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0];}\nif(context){ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),parts.length===1&&(parts[0]===\"~\"||parts[0]===\"+\")&&context.parentNode?context.parentNode:context,contextXML);set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set;if(parts.length>0){checkSet=makeArray(set);}else{prune=false;}\nwhile(parts.length){cur=parts.pop();pop=cur;if(!Expr.relative[cur]){cur=\"\";}else{pop=parts.pop();}\nif(pop==null){pop=context;}\nExpr.relative[cur](checkSet,pop,contextXML);}}else{checkSet=parts=[];}}\nif(!checkSet){checkSet=set;}\nif(!checkSet){Sizzle.error(cur||selector);}\nif(toString.call(checkSet)===\"[object Array]\"){if(!prune){results.push.apply(results,checkSet);}else if(context&&context.nodeType===1){for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&(checkSet[i]===true||checkSet[i].nodeType===1&&Sizzle.contains(context,checkSet[i]))){results.push(set[i]);}}}else{for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&checkSet[i].nodeType===1){results.push(set[i]);}}}}else{makeArray(checkSet,results);}\nif(extra){Sizzle(extra,origContext,results,seed);Sizzle.uniqueSort(results);}\nreturn results;};Sizzle.uniqueSort=function(results){if(sortOrder){hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(var i=1;i<results.length;i++){if(results[i]===results[i-1]){results.splice(i--,1);}}}}\nreturn results;};Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set);};Sizzle.matchesSelector=function(node,expr){return Sizzle(expr,null,null,[node]).length>0;};Sizzle.find=function(expr,context,isXML){var set,i,len,match,type,left;if(!expr){return[];}\nfor(i=0,len=Expr.order.length;i<len;i++){type=Expr.order[i];if((match=Expr.leftMatch[type].exec(expr))){left=match[1];match.splice(1,1);if(left.substr(left.length-1)!==\"\\\\\"){match[1]=(match[1]||\"\").replace(rBackslash,\"\");set=Expr.find[type](match,context,isXML);if(set!=null){expr=expr.replace(Expr.match[type],\"\");break;}}}}\nif(!set){set=typeof context.getElementsByTagName!==\"undefined\"?context.getElementsByTagName(\"*\"):[];}\nreturn{set:set,expr:expr};};Sizzle.filter=function(expr,set,inplace,not){var match,anyFound,type,found,item,filter,left,i,pass,old=expr,result=[],curLoop=set,isXMLFilter=set&&set[0]&&Sizzle.isXML(set[0]);while(expr&&set.length){for(type in Expr.filter){if((match=Expr.leftMatch[type].exec(expr))!=null&&match[2]){filter=Expr.filter[type];left=match[1];anyFound=false;match.splice(1,1);if(left.substr(left.length-1)===\"\\\\\"){continue;}\nif(curLoop===result){result=[];}\nif(Expr.preFilter[type]){match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter);if(!match){anyFound=found=true;}else if(match===true){continue;}}\nif(match){for(i=0;(item=curLoop[i])!=null;i++){if(item){found=filter(item,match,i,curLoop);pass=not^found;if(inplace&&found!=null){if(pass){anyFound=true;}else{curLoop[i]=false;}}else if(pass){result.push(item);anyFound=true;}}}}\nif(found!==undefined){if(!inplace){curLoop=result;}\nexpr=expr.replace(Expr.match[type],\"\");if(!anyFound){return[];}\nbreak;}}}\nif(expr===old){if(anyFound==null){Sizzle.error(expr);}else{break;}}\nold=expr;}\nreturn curLoop;};Sizzle.error=function(msg){throw new Error(\"Syntax error, unrecognized expression: \"+msg);};var getText=Sizzle.getText=function(elem){var i,node,nodeType=elem.nodeType,ret=\"\";if(nodeType){if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==='string'){return elem.textContent;}else if(typeof elem.innerText==='string'){return elem.innerText.replace(rReturn,'');}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem);}}}else if(nodeType===3||nodeType===4){return elem.nodeValue;}}else{for(i=0;(node=elem[i]);i++){if(node.nodeType!==8){ret+=getText(node);}}}\nreturn ret;};var Expr=Sizzle.selectors={order:[\"ID\",\"NAME\",\"TAG\"],match:{ID:/#((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)/,CLASS:/\\.((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)/,NAME:/\\[name=['\"]*((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)['\"]*\\]/,ATTR:/\\[\\s*((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)\\s*(?:(\\S?=)\\s*(?:(['\"])(.*?)\\3|(#?(?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)*)|)|)\\s*\\]/,TAG:/^((?:[\\w\\u00c0-\\uFFFF\\*\\-]|\\\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\\(\\s*(even|odd|(?:[+\\-]?\\d+|(?:[+\\-]?\\d*)?n\\s*(?:[+\\-]\\s*\\d+)?))\\s*\\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\))?(?=[^\\-]|$)/,PSEUDO:/:((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)(?:\\((['\"]?)((?:\\([^\\)]+\\)|[^\\(\\)]*)+)\\2\\))?/},leftMatch:{},attrMap:{\"class\":\"className\",\"for\":\"htmlFor\"},attrHandle:{href:function(elem){return elem.getAttribute(\"href\");},type:function(elem){return elem.getAttribute(\"type\");}},relative:{\"+\":function(checkSet,part){var isPartStr=typeof part===\"string\",isTag=isPartStr&&!rNonWord.test(part),isPartStrNotTag=isPartStr&&!isTag;if(isTag){part=part.toLowerCase();}\nfor(var i=0,l=checkSet.length,elem;i<l;i++){if((elem=checkSet[i])){while((elem=elem.previousSibling)&&elem.nodeType!==1){}\ncheckSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||false:elem===part;}}\nif(isPartStrNotTag){Sizzle.filter(part,checkSet,true);}},\">\":function(checkSet,part){var elem,isPartStr=typeof part===\"string\",i=0,l=checkSet.length;if(isPartStr&&!rNonWord.test(part)){part=part.toLowerCase();for(;i<l;i++){elem=checkSet[i];if(elem){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:false;}}}else{for(;i<l;i++){elem=checkSet[i];if(elem){checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part;}}\nif(isPartStr){Sizzle.filter(part,checkSet,true);}}},\"\":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;if(typeof part===\"string\"&&!rNonWord.test(part)){part=part.toLowerCase();nodeCheck=part;checkFn=dirNodeCheck;}\ncheckFn(\"parentNode\",part,doneName,checkSet,nodeCheck,isXML);},\"~\":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;if(typeof part===\"string\"&&!rNonWord.test(part)){part=part.toLowerCase();nodeCheck=part;checkFn=dirNodeCheck;}\ncheckFn(\"previousSibling\",part,doneName,checkSet,nodeCheck,isXML);}},find:{ID:function(match,context,isXML){if(typeof context.getElementById!==\"undefined\"&&!isXML){var m=context.getElementById(match[1]);return m&&m.parentNode?[m]:[];}},NAME:function(match,context){if(typeof context.getElementsByName!==\"undefined\"){var ret=[],results=context.getElementsByName(match[1]);for(var i=0,l=results.length;i<l;i++){if(results[i].getAttribute(\"name\")===match[1]){ret.push(results[i]);}}\nreturn ret.length===0?null:ret;}},TAG:function(match,context){if(typeof context.getElementsByTagName!==\"undefined\"){return context.getElementsByTagName(match[1]);}}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){match=\" \"+match[1].replace(rBackslash,\"\")+\" \";if(isXML){return match;}\nfor(var i=0,elem;(elem=curLoop[i])!=null;i++){if(elem){if(not^(elem.className&&(\" \"+elem.className+\" \").replace(/[\\t\\n\\r]/g,\" \").indexOf(match)>=0)){if(!inplace){result.push(elem);}}else if(inplace){curLoop[i]=false;}}}\nreturn false;},ID:function(match){return match[1].replace(rBackslash,\"\");},TAG:function(match,curLoop){return match[1].replace(rBackslash,\"\").toLowerCase();},CHILD:function(match){if(match[1]===\"nth\"){if(!match[2]){Sizzle.error(match[0]);}\nmatch[2]=match[2].replace(/^\\+|\\s*/g,'');var test=/(-?)(\\d*)(?:n([+\\-]?\\d*))?/.exec(match[2]===\"even\"&&\"2n\"||match[2]===\"odd\"&&\"2n+1\"||!/\\D/.test(match[2])&&\"0n+\"+match[2]||match[2]);match[2]=(test[1]+(test[2]||1))-0;match[3]=test[3]-0;}\nelse if(match[2]){Sizzle.error(match[0]);}\nmatch[0]=done++;return match;},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1]=match[1].replace(rBackslash,\"\");if(!isXML&&Expr.attrMap[name]){match[1]=Expr.attrMap[name];}\nmatch[4]=(match[4]||match[5]||\"\").replace(rBackslash,\"\");if(match[2]===\"~=\"){match[4]=\" \"+match[4]+\" \";}\nreturn match;},PSEUDO:function(match,curLoop,inplace,result,not){if(match[1]===\"not\"){if((chunker.exec(match[3])||\"\").length>1||/^\\w/.test(match[3])){match[3]=Sizzle(match[3],null,null,curLoop);}else{var ret=Sizzle.filter(match[3],curLoop,inplace,true^not);if(!inplace){result.push.apply(result,ret);}\nreturn false;}}else if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0])){return true;}\nreturn match;},POS:function(match){match.unshift(true);return match;}},filters:{enabled:function(elem){return elem.disabled===false&&elem.type!==\"hidden\";},disabled:function(elem){return elem.disabled===true;},checked:function(elem){return elem.checked===true;},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex;}\nreturn elem.selected===true;},parent:function(elem){return!!elem.firstChild;},empty:function(elem){return!elem.firstChild;},has:function(elem,i,match){return!!Sizzle(match[3],elem).length;},header:function(elem){return(/h\\d/i).test(elem.nodeName);},text:function(elem){var attr=elem.getAttribute(\"type\"),type=elem.type;return elem.nodeName.toLowerCase()===\"input\"&&\"text\"===type&&(attr===type||attr===null);},radio:function(elem){return elem.nodeName.toLowerCase()===\"input\"&&\"radio\"===elem.type;},checkbox:function(elem){return elem.nodeName.toLowerCase()===\"input\"&&\"checkbox\"===elem.type;},file:function(elem){return elem.nodeName.toLowerCase()===\"input\"&&\"file\"===elem.type;},password:function(elem){return elem.nodeName.toLowerCase()===\"input\"&&\"password\"===elem.type;},submit:function(elem){var name=elem.nodeName.toLowerCase();return(name===\"input\"||name===\"button\")&&\"submit\"===elem.type;},image:function(elem){return elem.nodeName.toLowerCase()===\"input\"&&\"image\"===elem.type;},reset:function(elem){var name=elem.nodeName.toLowerCase();return(name===\"input\"||name===\"button\")&&\"reset\"===elem.type;},button:function(elem){var name=elem.nodeName.toLowerCase();return name===\"input\"&&\"button\"===elem.type||name===\"button\";},input:function(elem){return(/input|select|textarea|button/i).test(elem.nodeName);},focus:function(elem){return elem===elem.ownerDocument.activeElement;}},setFilters:{first:function(elem,i){return i===0;},last:function(elem,i,match,array){return i===array.length-1;},even:function(elem,i){return i%2===0;},odd:function(elem,i){return i%2===1;},lt:function(elem,i,match){return i<match[3]-0;},gt:function(elem,i,match){return i>match[3]-0;},nth:function(elem,i,match){return match[3]-0===i;},eq:function(elem,i,match){return match[3]-0===i;}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter){return filter(elem,i,match,array);}else if(name===\"contains\"){return(elem.textContent||elem.innerText||getText([elem])||\"\").indexOf(match[3])>=0;}else if(name===\"not\"){var not=match[3];for(var j=0,l=not.length;j<l;j++){if(not[j]===elem){return false;}}\nreturn true;}else{Sizzle.error(name);}},CHILD:function(elem,match){var first,last,doneName,parent,cache,count,diff,type=match[1],node=elem;switch(type){case\"only\":case\"first\":while((node=node.previousSibling)){if(node.nodeType===1){return false;}}\nif(type===\"first\"){return true;}\nnode=elem;case\"last\":while((node=node.nextSibling)){if(node.nodeType===1){return false;}}\nreturn true;case\"nth\":first=match[2];last=match[3];if(first===1&&last===0){return true;}\ndoneName=match[0];parent=elem.parentNode;if(parent&&(parent[expando]!==doneName||!elem.nodeIndex)){count=0;for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){node.nodeIndex=++count;}}\nparent[expando]=doneName;}\ndiff=elem.nodeIndex-last;if(first===0){return diff===0;}else{return(diff%first===0&&diff/first>=0);}}},ID:function(elem,match){return elem.nodeType===1&&elem.getAttribute(\"id\")===match;},TAG:function(elem,match){return(match===\"*\"&&elem.nodeType===1)||!!elem.nodeName&&elem.nodeName.toLowerCase()===match;},CLASS:function(elem,match){return(\" \"+(elem.className||elem.getAttribute(\"class\"))+\" \").indexOf(match)>-1;},ATTR:function(elem,match){var name=match[1],result=Sizzle.attr?Sizzle.attr(elem,name):Expr.attrHandle[name]?Expr.attrHandle[name](elem):elem[name]!=null?elem[name]:elem.getAttribute(name),value=result+\"\",type=match[2],check=match[4];return result==null?type===\"!=\":!type&&Sizzle.attr?result!=null:type===\"=\"?value===check:type===\"*=\"?value.indexOf(check)>=0:type===\"~=\"?(\" \"+value+\" \").indexOf(check)>=0:!check?value&&result!==false:type===\"!=\"?value!==check:type===\"^=\"?value.indexOf(check)===0:type===\"$=\"?value.substr(value.length-check.length)===check:type===\"|=\"?value===check||value.substr(0,check.length+1)===check+\"-\":false;},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];if(filter){return filter(elem,i,match,array);}}}};var origPOS=Expr.match.POS,fescape=function(all,num){return\"\\\\\"+(num-0+1);};for(var type in Expr.match){Expr.match[type]=new RegExp(Expr.match[type].source+(/(?![^\\[]*\\])(?![^\\(]*\\))/.source));Expr.leftMatch[type]=new RegExp(/(^(?:.|\\r|\\n)*?)/.source+Expr.match[type].source.replace(/\\\\(\\d+)/g,fescape));}\nExpr.match.globalPOS=origPOS;var makeArray=function(array,results){array=Array.prototype.slice.call(array,0);if(results){results.push.apply(results,array);return results;}\nreturn array;};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType;}catch(e){makeArray=function(array,results){var i=0,ret=results||[];if(toString.call(array)===\"[object Array]\"){Array.prototype.push.apply(ret,array);}else{if(typeof array.length===\"number\"){for(var l=array.length;i<l;i++){ret.push(array[i]);}}else{for(;array[i];i++){ret.push(array[i]);}}}\nreturn ret;};}\nvar sortOrder,siblingCheck;if(document.documentElement.compareDocumentPosition){sortOrder=function(a,b){if(a===b){hasDuplicate=true;return 0;}\nif(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1;}\nreturn a.compareDocumentPosition(b)&4?-1:1;};}else{sortOrder=function(a,b){if(a===b){hasDuplicate=true;return 0;}else if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex;}\nvar al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup){return siblingCheck(a,b);}else if(!aup){return-1;}else if(!bup){return 1;}\nwhile(cur){ap.unshift(cur);cur=cur.parentNode;}\ncur=bup;while(cur){bp.unshift(cur);cur=cur.parentNode;}\nal=ap.length;bl=bp.length;for(var i=0;i<al&&i<bl;i++){if(ap[i]!==bp[i]){return siblingCheck(ap[i],bp[i]);}}\nreturn i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1);};siblingCheck=function(a,b,ret){if(a===b){return ret;}\nvar cur=a.nextSibling;while(cur){if(cur===b){return-1;}\ncur=cur.nextSibling;}\nreturn 1;};}\n(function(){var form=document.createElement(\"div\"),id=\"script\"+(new Date()).getTime(),root=document.documentElement;form.innerHTML=\"<a name='\"+id+\"'/>\";root.insertBefore(form,root.firstChild);if(document.getElementById(id)){Expr.find.ID=function(match,context,isXML){if(typeof context.getElementById!==\"undefined\"&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||typeof m.getAttributeNode!==\"undefined\"&&m.getAttributeNode(\"id\").nodeValue===match[1]?[m]:undefined:[];}};Expr.filter.ID=function(elem,match){var node=typeof elem.getAttributeNode!==\"undefined\"&&elem.getAttributeNode(\"id\");return elem.nodeType===1&&node&&node.nodeValue===match;};}\nroot.removeChild(form);root=form=null;})();(function(){var div=document.createElement(\"div\");div.appendChild(document.createComment(\"\"));if(div.getElementsByTagName(\"*\").length>0){Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if(match[1]===\"*\"){var tmp=[];for(var i=0;results[i];i++){if(results[i].nodeType===1){tmp.push(results[i]);}}\nresults=tmp;}\nreturn results;};}\ndiv.innerHTML=\"<a href='#'><\/a>\";if(div.firstChild&&typeof div.firstChild.getAttribute!==\"undefined\"&&div.firstChild.getAttribute(\"href\")!==\"#\"){Expr.attrHandle.href=function(elem){return elem.getAttribute(\"href\",2);};}\ndiv=null;})();if(document.querySelectorAll){(function(){var oldSizzle=Sizzle,div=document.createElement(\"div\"),id=\"__sizzle__\";div.innerHTML=\"<p class='TEST'><\/p>\";if(div.querySelectorAll&&div.querySelectorAll(\".TEST\").length===0){return;}\nSizzle=function(query,context,extra,seed){context=context||document;if(!seed&&!Sizzle.isXML(context)){var match=/^(\\w+$)|^\\.([\\w\\-]+$)|^#([\\w\\-]+$)/.exec(query);if(match&&(context.nodeType===1||context.nodeType===9)){if(match[1]){return makeArray(context.getElementsByTagName(query),extra);}else if(match[2]&&Expr.find.CLASS&&context.getElementsByClassName){return makeArray(context.getElementsByClassName(match[2]),extra);}}\nif(context.nodeType===9){if(query===\"body\"&&context.body){return makeArray([context.body],extra);}else if(match&&match[3]){var elem=context.getElementById(match[3]);if(elem&&elem.parentNode){if(elem.id===match[3]){return makeArray([elem],extra);}}else{return makeArray([],extra);}}\ntry{return makeArray(context.querySelectorAll(query),extra);}catch(qsaError){}}else if(context.nodeType===1&&context.nodeName.toLowerCase()!==\"object\"){var oldContext=context,old=context.getAttribute(\"id\"),nid=old||id,hasParent=context.parentNode,relativeHierarchySelector=/^\\s*[+~]/.test(query);if(!old){context.setAttribute(\"id\",nid);}else{nid=nid.replace(/'/g,\"\\\\$&\");}\nif(relativeHierarchySelector&&hasParent){context=context.parentNode;}\ntry{if(!relativeHierarchySelector||hasParent){return makeArray(context.querySelectorAll(\"[id='\"+nid+\"'] \"+query),extra);}}catch(pseudoError){}finally{if(!old){oldContext.removeAttribute(\"id\");}}}}\nreturn oldSizzle(query,context,extra,seed);};for(var prop in oldSizzle){Sizzle[prop]=oldSizzle[prop];}\ndiv=null;})();}\n(function(){var html=document.documentElement,matches=html.matchesSelector||html.mozMatchesSelector||html.webkitMatchesSelector||html.msMatchesSelector;if(matches){var disconnectedMatch=!matches.call(document.createElement(\"div\"),\"div\"),pseudoWorks=false;try{matches.call(document.documentElement,\"[test!='']:sizzle\");}catch(pseudoError){pseudoWorks=true;}\nSizzle.matchesSelector=function(node,expr){expr=expr.replace(/\\=\\s*([^'\"\\]]*)\\s*\\]/g,\"='$1']\");if(!Sizzle.isXML(node)){try{if(pseudoWorks||!Expr.match.PSEUDO.test(expr)&&!/!=/.test(expr)){var ret=matches.call(node,expr);if(ret||!disconnectedMatch||node.document&&node.document.nodeType!==11){return ret;}}}catch(e){}}\nreturn Sizzle(expr,null,null,[node]).length>0;};}})();(function(){var div=document.createElement(\"div\");div.innerHTML=\"<div class='test e'><\/div><div class='test'><\/div>\";if(!div.getElementsByClassName||div.getElementsByClassName(\"e\").length===0){return;}\ndiv.lastChild.className=\"e\";if(div.getElementsByClassName(\"e\").length===1){return;}\nExpr.order.splice(1,0,\"CLASS\");Expr.find.CLASS=function(match,context,isXML){if(typeof context.getElementsByClassName!==\"undefined\"&&!isXML){return context.getElementsByClassName(match[1]);}};div=null;})();function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var match=false;elem=elem[dir];while(elem){if(elem[expando]===doneName){match=checkSet[elem.sizset];break;}\nif(elem.nodeType===1&&!isXML){elem[expando]=doneName;elem.sizset=i;}\nif(elem.nodeName.toLowerCase()===cur){match=elem;break;}\nelem=elem[dir];}\ncheckSet[i]=match;}}}\nfunction dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var match=false;elem=elem[dir];while(elem){if(elem[expando]===doneName){match=checkSet[elem.sizset];break;}\nif(elem.nodeType===1){if(!isXML){elem[expando]=doneName;elem.sizset=i;}\nif(typeof cur!==\"string\"){if(elem===cur){match=true;break;}}else if(Sizzle.filter(cur,[elem]).length>0){match=elem;break;}}\nelem=elem[dir];}\ncheckSet[i]=match;}}}\nif(document.documentElement.contains){Sizzle.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):true);};}else if(document.documentElement.compareDocumentPosition){Sizzle.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16);};}else{Sizzle.contains=function(){return false;};}\nSizzle.isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?documentElement.nodeName!==\"HTML\":false;};var posProcess=function(selector,context,seed){var match,tmpSet=[],later=\"\",root=context.nodeType?[context]:context;while((match=Expr.match.PSEUDO.exec(selector))){later+=match[0];selector=selector.replace(Expr.match.PSEUDO,\"\");}\nselector=Expr.relative[selector]?selector+\"*\":selector;for(var i=0,l=root.length;i<l;i++){Sizzle(selector,root[i],tmpSet,seed);}\nreturn Sizzle.filter(later,tmpSet);};Sizzle.attr=jQuery.attr;Sizzle.selectors.attrMap={};jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[\":\"]=jQuery.expr.filters;jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;})();var runtil=/Until$/,rparentsprev=/^(?:parents|prevUntil|prevAll)/,rmultiselector=/,/,isSimple=/^.[^:#\\[\\.,]*$/,slice=Array.prototype.slice,POS=jQuery.expr.match.globalPOS,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({find:function(selector){var self=this,i,l;if(typeof selector!==\"string\"){return jQuery(selector).filter(function(){for(i=0,l=self.length;i<l;i++){if(jQuery.contains(self[i],this)){return true;}}});}\nvar ret=this.pushStack(\"\",\"find\",selector),length,n,r;for(i=0,l=this.length;i<l;i++){length=ret.length;jQuery.find(selector,this[i],ret);if(i>0){for(n=length;n<ret.length;n++){for(r=0;r<length;r++){if(ret[r]===ret[n]){ret.splice(n--,1);break;}}}}}\nreturn ret;},has:function(target){var targets=jQuery(target);return this.filter(function(){for(var i=0,l=targets.length;i<l;i++){if(jQuery.contains(this,targets[i])){return true;}}});},not:function(selector){return this.pushStack(winnow(this,selector,false),\"not\",selector);},filter:function(selector){return this.pushStack(winnow(this,selector,true),\"filter\",selector);},is:function(selector){return!!selector&&(typeof selector===\"string\"?POS.test(selector)?jQuery(selector,this.context).index(this[0])>=0:jQuery.filter(selector,this).length>0:this.filter(selector).length>0);},closest:function(selectors,context){var ret=[],i,l,cur=this[0];if(jQuery.isArray(selectors)){var level=1;while(cur&&cur.ownerDocument&&cur!==context){for(i=0;i<selectors.length;i++){if(jQuery(cur).is(selectors[i])){ret.push({selector:selectors[i],elem:cur,level:level});}}\ncur=cur.parentNode;level++;}\nreturn ret;}\nvar pos=POS.test(selectors)||typeof selectors!==\"string\"?jQuery(selectors,context||this.context):0;for(i=0,l=this.length;i<l;i++){cur=this[i];while(cur){if(pos?pos.index(cur)>-1:jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break;}else{cur=cur.parentNode;if(!cur||!cur.ownerDocument||cur===context||cur.nodeType===11){break;}}}}\nret=ret.length>1?jQuery.unique(ret):ret;return this.pushStack(ret,\"closest\",selectors);},index:function(elem){if(!elem){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1;}\nif(typeof elem===\"string\"){return jQuery.inArray(this[0],jQuery(elem));}\nreturn jQuery.inArray(elem.jquery?elem[0]:elem,this);},add:function(selector,context){var set=typeof selector===\"string\"?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:jQuery.unique(all));},andSelf:function(){return this.add(this.prevObject);}});function isDisconnected(node){return!node||!node.parentNode||node.parentNode.nodeType===11;}\njQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null;},parents:function(elem){return jQuery.dir(elem,\"parentNode\");},parentsUntil:function(elem,i,until){return jQuery.dir(elem,\"parentNode\",until);},next:function(elem){return jQuery.nth(elem,2,\"nextSibling\");},prev:function(elem){return jQuery.nth(elem,2,\"previousSibling\");},nextAll:function(elem){return jQuery.dir(elem,\"nextSibling\");},prevAll:function(elem){return jQuery.dir(elem,\"previousSibling\");},nextUntil:function(elem,i,until){return jQuery.dir(elem,\"nextSibling\",until);},prevUntil:function(elem,i,until){return jQuery.dir(elem,\"previousSibling\",until);},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem);},children:function(elem){return jQuery.sibling(elem.firstChild);},contents:function(elem){return jQuery.nodeName(elem,\"iframe\")?elem.contentDocument||elem.contentWindow.document:jQuery.makeArray(elem.childNodes);}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);if(!runtil.test(name)){selector=until;}\nif(selector&&typeof selector===\"string\"){ret=jQuery.filter(selector,ret);}\nret=this.length>1&&!guaranteedUnique[name]?jQuery.unique(ret):ret;if((this.length>1||rmultiselector.test(selector))&&rparentsprev.test(name)){ret=ret.reverse();}\nreturn this.pushStack(ret,name,slice.call(arguments).join(\",\"));};});jQuery.extend({filter:function(expr,elems,not){if(not){expr=\":not(\"+expr+\")\";}\nreturn elems.length===1?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems);},dir:function(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!jQuery(cur).is(until))){if(cur.nodeType===1){matched.push(cur);}\ncur=cur[dir];}\nreturn matched;},nth:function(cur,result,dir,elem){result=result||1;var num=0;for(;cur;cur=cur[dir]){if(cur.nodeType===1&&++num===result){break;}}\nreturn cur;},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){r.push(n);}}\nreturn r;}});function winnow(elements,qualifier,keep){qualifier=qualifier||0;if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep;});}else if(qualifier.nodeType){return jQuery.grep(elements,function(elem,i){return(elem===qualifier)===keep;});}else if(typeof qualifier===\"string\"){var filtered=jQuery.grep(elements,function(elem){return elem.nodeType===1;});if(isSimple.test(qualifier)){return jQuery.filter(qualifier,filtered,!keep);}else{qualifier=jQuery.filter(qualifier,filtered);}}\nreturn jQuery.grep(elements,function(elem,i){return(jQuery.inArray(elem,qualifier)>=0)===keep;});}\nfunction createSafeFragment(document){var list=nodeNames.split(\"|\"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement){while(list.length){safeFrag.createElement(list.pop());}}\nreturn safeFrag;}\nvar nodeNames=\"abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|\"+\"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video\",rinlinejQuery=/ jQuery\\d+=\"(?:\\d+|null)\"/g,rleadingWhitespace=/^\\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/ig,rtagName=/<([\\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\\w+;/,rnoInnerhtml=/<(?:script|style)/i,rnocache=/<(?:script|object|embed|option|style)/i,rnoshimcache=new RegExp(\"<(?:\"+nodeNames+\")[\\\\s/>]\",\"i\"),rchecked=/checked\\s*(?:[^=]|=\\s*.checked.)/i,rscriptType=/\\/(java|ecma)script/i,rcleanScript=/^\\s*<!(?:\\[CDATA\\[|\\-\\-)/,wrapMap={option:[1,\"<select multiple='multiple'>\",\"<\/select>\"],legend:[1,\"<fieldset>\",\"<\/fieldset>\"],thead:[1,\"<table>\",\"<\/table>\"],tr:[2,\"<table><tbody>\",\"<\/tbody><\/table>\"],td:[3,\"<table><tbody><tr>\",\"<\/tr><\/tbody><\/table>\"],col:[2,\"<table><tbody><\/tbody><colgroup>\",\"<\/colgroup><\/table>\"],area:[1,\"<map>\",\"<\/map>\"],_default:[0,\"\",\"\"]},safeFragment=createSafeFragment(document);wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;if(!jQuery.support.htmlSerialize){wrapMap._default=[1,\"div<div>\",\"<\/div>\"];}\njQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value));},null,value,arguments.length);},wrapAll:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i));});}\nif(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0]);}\nwrap.map(function(){var elem=this;while(elem.firstChild&&elem.firstChild.nodeType===1){elem=elem.firstChild;}\nreturn elem;}).append(this);}\nreturn this;},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i));});}\nreturn this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html);}else{self.append(html);}});},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html);});},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,\"body\")){jQuery(this).replaceWith(this.childNodes);}}).end();},append:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1){this.appendChild(elem);}});},prepend:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1){this.insertBefore(elem,this.firstChild);}});},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this);});}else if(arguments.length){var set=jQuery.clean(arguments);set.push.apply(set,this.toArray());return this.pushStack(set,\"before\",arguments);}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this.nextSibling);});}else if(arguments.length){var set=this.pushStack(this,\"after\",arguments);set.push.apply(set,jQuery.clean(arguments));return set;}},remove:function(selector,keepData){for(var i=0,elem;(elem=this[i])!=null;i++){if(!selector||jQuery.filter(selector,[elem]).length){if(!keepData&&elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName(\"*\"));jQuery.cleanData([elem]);}\nif(elem.parentNode){elem.parentNode.removeChild(elem);}}}\nreturn this;},empty:function(){for(var i=0,elem;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName(\"*\"));}\nwhile(elem.firstChild){elem.removeChild(elem.firstChild);}}\nreturn this;},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents);});},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined){return elem.nodeType===1?elem.innerHTML.replace(rinlinejQuery,\"\"):null;}\nif(typeof value===\"string\"&&!rnoInnerhtml.test(value)&&(jQuery.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||[\"\",\"\"])[1].toLowerCase()]){value=value.replace(rxhtmlTag,\"<$1><\/$2>\");try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName(\"*\"));elem.innerHTML=value;}}\nelem=0;}catch(e){}}\nif(elem){this.empty().append(value);}},null,value,arguments.length);},replaceWith:function(value){if(this[0]&&this[0].parentNode){if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this),old=self.html();self.replaceWith(value.call(this,i,old));});}\nif(typeof value!==\"string\"){value=jQuery(value).detach();}\nreturn this.each(function(){var next=this.nextSibling,parent=this.parentNode;jQuery(this).remove();if(next){jQuery(next).before(value);}else{jQuery(parent).append(value);}});}else{return this.length?this.pushStack(jQuery(jQuery.isFunction(value)?value():value),\"replaceWith\",value):this;}},detach:function(selector){return this.remove(selector,true);},domManip:function(args,table,callback){var results,first,fragment,parent,value=args[0],scripts=[];if(!jQuery.support.checkClone&&arguments.length===3&&typeof value===\"string\"&&rchecked.test(value)){return this.each(function(){jQuery(this).domManip(args,table,callback,true);});}\nif(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);args[0]=value.call(this,i,table?self.html():undefined);self.domManip(args,table,callback);});}\nif(this[0]){parent=value&&value.parentNode;if(jQuery.support.parentNode&&parent&&parent.nodeType===11&&parent.childNodes.length===this.length){results={fragment:parent};}else{results=jQuery.buildFragment(args,this,scripts);}\nfragment=results.fragment;if(fragment.childNodes.length===1){first=fragment=fragment.firstChild;}else{first=fragment.firstChild;}\nif(first){table=table&&jQuery.nodeName(first,\"tr\");for(var i=0,l=this.length,lastIndex=l-1;i<l;i++){callback.call(table?root(this[i],first):this[i],results.cacheable||(l>1&&i<lastIndex)?jQuery.clone(fragment,true,true):fragment);}}\nif(scripts.length){jQuery.each(scripts,function(i,elem){if(elem.src){jQuery.ajax({type:\"GET\",global:false,url:elem.src,async:false,dataType:\"script\"});}else{jQuery.globalEval((elem.text||elem.textContent||elem.innerHTML||\"\").replace(rcleanScript,\"/*$0*/\"));}\nif(elem.parentNode){elem.parentNode.removeChild(elem);}});}}\nreturn this;}});function root(elem,cur){return jQuery.nodeName(elem,\"table\")?(elem.getElementsByTagName(\"tbody\")[0]||elem.appendChild(elem.ownerDocument.createElement(\"tbody\"))):elem;}\nfunction cloneCopyEvent(src,dest){if(dest.nodeType!==1||!jQuery.hasData(src)){return;}\nvar type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle;curData.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i]);}}}\nif(curData.data){curData.data=jQuery.extend({},curData.data);}}\nfunction cloneFixAttributes(src,dest){var nodeName;if(dest.nodeType!==1){return;}\nif(dest.clearAttributes){dest.clearAttributes();}\nif(dest.mergeAttributes){dest.mergeAttributes(src);}\nnodeName=dest.nodeName.toLowerCase();if(nodeName===\"object\"){dest.outerHTML=src.outerHTML;}else if(nodeName===\"input\"&&(src.type===\"checkbox\"||src.type===\"radio\")){if(src.checked){dest.defaultChecked=dest.checked=src.checked;}\nif(dest.value!==src.value){dest.value=src.value;}}else if(nodeName===\"option\"){dest.selected=src.defaultSelected;}else if(nodeName===\"input\"||nodeName===\"textarea\"){dest.defaultValue=src.defaultValue;}else if(nodeName===\"script\"&&dest.text!==src.text){dest.text=src.text;}\ndest.removeAttribute(jQuery.expando);dest.removeAttribute(\"_submit_attached\");dest.removeAttribute(\"_change_attached\");}\njQuery.buildFragment=function(args,nodes,scripts){var fragment,cacheable,cacheresults,doc,first=args[0];if(nodes&&nodes[0]){doc=nodes[0].ownerDocument||nodes[0];}\nif(!doc.createDocumentFragment){doc=document;}\nif(args.length===1&&typeof first===\"string\"&&first.length<512&&doc===document&&first.charAt(0)===\"<\"&&!rnocache.test(first)&&(jQuery.support.checkClone||!rchecked.test(first))&&(jQuery.support.html5Clone||!rnoshimcache.test(first))){cacheable=true;cacheresults=jQuery.fragments[first];if(cacheresults&&cacheresults!==1){fragment=cacheresults;}}\nif(!fragment){fragment=doc.createDocumentFragment();jQuery.clean(args,doc,fragment,scripts);}\nif(cacheable){jQuery.fragments[first]=cacheresults?fragment:1;}\nreturn{fragment:fragment,cacheable:cacheable};};jQuery.fragments={};jQuery.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(name,original){jQuery.fn[name]=function(selector){var ret=[],insert=jQuery(selector),parent=this.length===1&&this[0].parentNode;if(parent&&parent.nodeType===11&&parent.childNodes.length===1&&insert.length===1){insert[original](this[0]);return this;}else{for(var i=0,l=insert.length;i<l;i++){var elems=(i>0?this.clone(true):this).get();jQuery(insert[i])[original](elems);ret=ret.concat(elems);}\nreturn this.pushStack(ret,name,insert.selector);}};});function getAll(elem){if(typeof elem.getElementsByTagName!==\"undefined\"){return elem.getElementsByTagName(\"*\");}else if(typeof elem.querySelectorAll!==\"undefined\"){return elem.querySelectorAll(\"*\");}else{return[];}}\nfunction fixDefaultChecked(elem){if(elem.type===\"checkbox\"||elem.type===\"radio\"){elem.defaultChecked=elem.checked;}}\nfunction findInputs(elem){var nodeName=(elem.nodeName||\"\").toLowerCase();if(nodeName===\"input\"){fixDefaultChecked(elem);}else if(nodeName!==\"script\"&&typeof elem.getElementsByTagName!==\"undefined\"){jQuery.grep(elem.getElementsByTagName(\"input\"),fixDefaultChecked);}}\nfunction shimCloneNode(elem){var div=document.createElement(\"div\");safeFragment.appendChild(div);div.innerHTML=elem.outerHTML;return div.firstChild;}\njQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var srcElements,destElements,i,clone=jQuery.support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test(\"<\"+elem.nodeName+\">\")?elem.cloneNode(true):shimCloneNode(elem);if((!jQuery.support.noCloneEvent||!jQuery.support.noCloneChecked)&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){cloneFixAttributes(elem,clone);srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i){if(destElements[i]){cloneFixAttributes(srcElements[i],destElements[i]);}}}\nif(dataAndEvents){cloneCopyEvent(elem,clone);if(deepDataAndEvents){srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i){cloneCopyEvent(srcElements[i],destElements[i]);}}}\nsrcElements=destElements=null;return clone;},clean:function(elems,context,fragment,scripts){var checkScriptType,script,j,ret=[];context=context||document;if(typeof context.createElement===\"undefined\"){context=context.ownerDocument||context[0]&&context[0].ownerDocument||document;}\nfor(var i=0,elem;(elem=elems[i])!=null;i++){if(typeof elem===\"number\"){elem+=\"\";}\nif(!elem){continue;}\nif(typeof elem===\"string\"){if(!rhtml.test(elem)){elem=context.createTextNode(elem);}else{elem=elem.replace(rxhtmlTag,\"<$1><\/$2>\");var tag=(rtagName.exec(elem)||[\"\",\"\"])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,depth=wrap[0],div=context.createElement(\"div\"),safeChildNodes=safeFragment.childNodes,remove;if(context===document){safeFragment.appendChild(div);}else{createSafeFragment(context).appendChild(div);}\ndiv.innerHTML=wrap[1]+elem+wrap[2];while(depth--){div=div.lastChild;}\nif(!jQuery.support.tbody){var hasBody=rtbody.test(elem),tbody=tag===\"table\"&&!hasBody?div.firstChild&&div.firstChild.childNodes:wrap[1]===\"<table>\"&&!hasBody?div.childNodes:[];for(j=tbody.length-1;j>=0;--j){if(jQuery.nodeName(tbody[j],\"tbody\")&&!tbody[j].childNodes.length){tbody[j].parentNode.removeChild(tbody[j]);}}}\nif(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)){div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild);}\nelem=div.childNodes;if(div){div.parentNode.removeChild(div);if(safeChildNodes.length>0){remove=safeChildNodes[safeChildNodes.length-1];if(remove&&remove.parentNode){remove.parentNode.removeChild(remove);}}}}}\nvar len;if(!jQuery.support.appendChecked){if(elem[0]&&typeof(len=elem.length)===\"number\"){for(j=0;j<len;j++){findInputs(elem[j]);}}else{findInputs(elem);}}\nif(elem.nodeType){ret.push(elem);}else{ret=jQuery.merge(ret,elem);}}\nif(fragment){checkScriptType=function(elem){return!elem.type||rscriptType.test(elem.type);};for(i=0;ret[i];i++){script=ret[i];if(scripts&&jQuery.nodeName(script,\"script\")&&(!script.type||rscriptType.test(script.type))){scripts.push(script.parentNode?script.parentNode.removeChild(script):script);}else{if(script.nodeType===1){var jsTags=jQuery.grep(script.getElementsByTagName(\"script\"),checkScriptType);ret.splice.apply(ret,[i+1,0].concat(jsTags));}\nfragment.appendChild(script);}}}\nreturn ret;},cleanData:function(elems){var data,id,cache=jQuery.cache,special=jQuery.event.special,deleteExpando=jQuery.support.deleteExpando;for(var i=0,elem;(elem=elems[i])!=null;i++){if(elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()]){continue;}\nid=elem[jQuery.expando];if(id){data=cache[id];if(data&&data.events){for(var type in data.events){if(special[type]){jQuery.event.remove(elem,type);}else{jQuery.removeEvent(elem,type,data.handle);}}\nif(data.handle){data.handle.elem=null;}}\nif(deleteExpando){delete elem[jQuery.expando];}else if(elem.removeAttribute){elem.removeAttribute(jQuery.expando);}\ndelete cache[id];}}}});var ralpha=/alpha\\([^)]*\\)/i,ropacity=/opacity=([^)]*)/,rupper=/([A-Z]|^ms)/g,rnum=/^[\\-+]?(?:\\d*\\.)?\\d+$/i,rnumnonpx=/^-?(?:\\d*\\.)?\\d+(?!px)[^\\d\\s]+$/i,rrelNum=/^([\\-+])=([\\-+.\\de]+)/,rmargin=/^margin/,cssShow={position:\"absolute\",visibility:\"hidden\",display:\"block\"},cssExpand=[\"Top\",\"Right\",\"Bottom\",\"Left\"],curCSS,getComputedStyle,currentStyle;jQuery.fn.css=function(name,value){return jQuery.access(this,function(elem,name,value){return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name);},name,value,arguments.length>1);};jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,\"opacity\");return ret===\"\"?\"1\":ret;}else{return elem.style.opacity;}}}},cssNumber:{\"fillOpacity\":true,\"fontWeight\":true,\"lineHeight\":true,\"opacity\":true,\"orphans\":true,\"widows\":true,\"zIndex\":true,\"zoom\":true},cssProps:{\"float\":jQuery.support.cssFloat?\"cssFloat\":\"styleFloat\"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return;}\nvar ret,type,origName=jQuery.camelCase(name),style=elem.style,hooks=jQuery.cssHooks[origName];name=jQuery.cssProps[origName]||origName;if(value!==undefined){type=typeof value;if(type===\"string\"&&(ret=rrelNum.exec(value))){value=(+(ret[1]+1)*+ret[2])+parseFloat(jQuery.css(elem,name));type=\"number\";}\nif(value==null||type===\"number\"&&isNaN(value)){return;}\nif(type===\"number\"&&!jQuery.cssNumber[origName]){value+=\"px\";}\nif(!hooks||!(\"set\"in hooks)||(value=hooks.set(elem,value))!==undefined){try{style[name]=value;}catch(e){}}}else{if(hooks&&\"get\"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret;}\nreturn style[name];}},css:function(elem,name,extra){var ret,hooks;name=jQuery.camelCase(name);hooks=jQuery.cssHooks[name];name=jQuery.cssProps[name]||name;if(name===\"cssFloat\"){name=\"float\";}\nif(hooks&&\"get\"in hooks&&(ret=hooks.get(elem,true,extra))!==undefined){return ret;}else if(curCSS){return curCSS(elem,name);}},swap:function(elem,options,callback){var old={},ret,name;for(name in options){old[name]=elem.style[name];elem.style[name]=options[name];}\nret=callback.call(elem);for(name in options){elem.style[name]=old[name];}\nreturn ret;}});jQuery.curCSS=jQuery.css;if(document.defaultView&&document.defaultView.getComputedStyle){getComputedStyle=function(elem,name){var ret,defaultView,computedStyle,width,style=elem.style;name=name.replace(rupper,\"-$1\").toLowerCase();if((defaultView=elem.ownerDocument.defaultView)&&(computedStyle=defaultView.getComputedStyle(elem,null))){ret=computedStyle.getPropertyValue(name);if(ret===\"\"&&!jQuery.contains(elem.ownerDocument.documentElement,elem)){ret=jQuery.style(elem,name);}}\nif(!jQuery.support.pixelMargin&&computedStyle&&rmargin.test(name)&&rnumnonpx.test(ret)){width=style.width;style.width=ret;ret=computedStyle.width;style.width=width;}\nreturn ret;};}\nif(document.documentElement.currentStyle){currentStyle=function(elem,name){var left,rsLeft,uncomputed,ret=elem.currentStyle&&elem.currentStyle[name],style=elem.style;if(ret==null&&style&&(uncomputed=style[name])){ret=uncomputed;}\nif(rnumnonpx.test(ret)){left=style.left;rsLeft=elem.runtimeStyle&&elem.runtimeStyle.left;if(rsLeft){elem.runtimeStyle.left=elem.currentStyle.left;}\nstyle.left=name===\"fontSize\"?\"1em\":ret;ret=style.pixelLeft+\"px\";style.left=left;if(rsLeft){elem.runtimeStyle.left=rsLeft;}}\nreturn ret===\"\"?\"auto\":ret;};}\ncurCSS=getComputedStyle||currentStyle;function getWidthOrHeight(elem,name,extra){var val=name===\"width\"?elem.offsetWidth:elem.offsetHeight,i=name===\"width\"?1:0,len=4;if(val>0){if(extra!==\"border\"){for(;i<len;i+=2){if(!extra){val-=parseFloat(jQuery.css(elem,\"padding\"+cssExpand[i]))||0;}\nif(extra===\"margin\"){val+=parseFloat(jQuery.css(elem,extra+cssExpand[i]))||0;}else{val-=parseFloat(jQuery.css(elem,\"border\"+cssExpand[i]+\"Width\"))||0;}}}\nreturn val+\"px\";}\nval=curCSS(elem,name);if(val<0||val==null){val=elem.style[name];}\nif(rnumnonpx.test(val)){return val;}\nval=parseFloat(val)||0;if(extra){for(;i<len;i+=2){val+=parseFloat(jQuery.css(elem,\"padding\"+cssExpand[i]))||0;if(extra!==\"padding\"){val+=parseFloat(jQuery.css(elem,\"border\"+cssExpand[i]+\"Width\"))||0;}\nif(extra===\"margin\"){val+=parseFloat(jQuery.css(elem,extra+cssExpand[i]))||0;}}}\nreturn val+\"px\";}\njQuery.each([\"height\",\"width\"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){if(elem.offsetWidth!==0){return getWidthOrHeight(elem,name,extra);}else{return jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra);});}}},set:function(elem,value){return rnum.test(value)?value+\"px\":value;}};});if(!jQuery.support.opacity){jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||\"\")?(parseFloat(RegExp.$1)/100)+\"\":computed?\"1\":\"\";},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?\"alpha(opacity=\"+value*100+\")\":\"\",filter=currentStyle&&currentStyle.filter||style.filter||\"\";style.zoom=1;if(value>=1&&jQuery.trim(filter.replace(ralpha,\"\"))===\"\"){style.removeAttribute(\"filter\");if(currentStyle&&!currentStyle.filter){return;}}\nstyle.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+\" \"+opacity;}};}\njQuery(function(){if(!jQuery.support.reliableMarginRight){jQuery.cssHooks.marginRight={get:function(elem,computed){return jQuery.swap(elem,{\"display\":\"inline-block\"},function(){if(computed){return curCSS(elem,\"margin-right\");}else{return elem.style.marginRight;}});}};}});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.hidden=function(elem){var width=elem.offsetWidth,height=elem.offsetHeight;return(width===0&&height===0)||(!jQuery.support.reliableHiddenOffsets&&((elem.style&&elem.style.display)||jQuery.css(elem,\"display\"))===\"none\");};jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem);};}\njQuery.each({margin:\"\",padding:\"\",border:\"Width\"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i,parts=typeof value===\"string\"?value.split(\" \"):[value],expanded={};for(i=0;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];}\nreturn expanded;}};});var r20=/%20/g,rbracket=/\\[\\]$/,rCRLF=/\\r?\\n/g,rhash=/#.*$/,rheaders=/^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/mg,rinput=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,rlocalProtocol=/^(?:about|app|app\\-storage|.+\\-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\\/\\//,rquery=/\\?/,rscript=/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,rselectTextarea=/^(?:select|textarea)/i,rspacesAjax=/\\s+/,rts=/([?&])_=[^&]*/,rurl=/^([\\w\\+\\.\\-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+))?)?/,_load=jQuery.fn.load,prefilters={},transports={},ajaxLocation,ajaxLocParts,allTypes=[\"*/\"]+[\"*\"];try{ajaxLocation=location.href;}catch(e){ajaxLocation=document.createElement(\"a\");ajaxLocation.href=\"\";ajaxLocation=ajaxLocation.href;}\najaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!==\"string\"){func=dataTypeExpression;dataTypeExpression=\"*\";}\nif(jQuery.isFunction(func)){var dataTypes=dataTypeExpression.toLowerCase().split(rspacesAjax),i=0,length=dataTypes.length,dataType,list,placeBefore;for(;i<length;i++){dataType=dataTypes[i];placeBefore=/^\\+/.test(dataType);if(placeBefore){dataType=dataType.substr(1)||\"*\";}\nlist=structure[dataType]=structure[dataType]||[];list[placeBefore?\"unshift\":\"push\"](func);}}};}\nfunction inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,dataType,inspected){dataType=dataType||options.dataTypes[0];inspected=inspected||{};inspected[dataType]=true;var list=structure[dataType],i=0,length=list?list.length:0,executeOnly=(structure===prefilters),selection;for(;i<length&&(executeOnly||!selection);i++){selection=list[i](options,originalOptions,jqXHR);if(typeof selection===\"string\"){if(!executeOnly||inspected[selection]){selection=undefined;}else{options.dataTypes.unshift(selection);selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,selection,inspected);}}}\nif((executeOnly||!selection)&&!inspected[\"*\"]){selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,\"*\",inspected);}\nreturn selection;}\nfunction ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:(deep||(deep={})))[key]=src[key];}}\nif(deep){jQuery.extend(true,target,deep);}}\njQuery.fn.extend({load:function(url,params,callback){if(typeof url!==\"string\"&&_load){return _load.apply(this,arguments);}else if(!this.length){return this;}\nvar off=url.indexOf(\" \");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off);}\nvar type=\"GET\";if(params){if(jQuery.isFunction(params)){callback=params;params=undefined;}else if(typeof params===\"object\"){params=jQuery.param(params,jQuery.ajaxSettings.traditional);type=\"POST\";}}\nvar self=this;jQuery.ajax({url:url,type:type,dataType:\"html\",data:params,complete:function(jqXHR,status,responseText){responseText=jqXHR.responseText;if(jqXHR.isResolved()){jqXHR.done(function(r){responseText=r;});self.html(selector?jQuery(\"<div>\").append(responseText.replace(rscript,\"\")).find(selector):responseText);}\nif(callback){self.each(callback,[responseText,status,jqXHR]);}}});return this;},serialize:function(){return jQuery.param(this.serializeArray());},serializeArray:function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this;}).filter(function(){return this.name&&!this.disabled&&(this.checked||rselectTextarea.test(this.nodeName)||rinput.test(this.type));}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val,i){return{name:elem.name,value:val.replace(rCRLF,\"\\r\\n\")};}):{name:elem.name,value:val.replace(rCRLF,\"\\r\\n\")};}).get();}});jQuery.each(\"ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend\".split(\" \"),function(i,o){jQuery.fn[o]=function(f){return this.on(o,f);};});jQuery.each([\"get\",\"post\"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined;}\nreturn jQuery.ajax({type:method,url:url,data:data,success:callback,dataType:type});};});jQuery.extend({getScript:function(url,callback){return jQuery.get(url,undefined,callback,\"script\");},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,\"json\");},ajaxSetup:function(target,settings){if(settings){ajaxExtend(target,jQuery.ajaxSettings);}else{settings=target;target=jQuery.ajaxSettings;}\najaxExtend(target,settings);return target;},ajaxSettings:{url:ajaxLocation,isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,type:\"GET\",contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",processData:true,async:true,accepts:{xml:\"application/xml, text/xml\",html:\"text/html\",text:\"text/plain\",json:\"application/json, text/javascript\",\"*\":allTypes},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:\"responseXML\",text:\"responseText\"},converters:{\"* text\":window.String,\"text html\":true,\"text json\":jQuery.parseJSON,\"text xml\":jQuery.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url===\"object\"){options=url;url=undefined;}\noptions=options||{};var\ns=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=callbackContext!==s&&(callbackContext.nodeType||callbackContext instanceof jQuery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks(\"once memory\"),statusCode=s.statusCode||{},ifModifiedKey,requestHeaders={},requestHeadersNames={},responseHeadersString,responseHeaders,transport,timeoutTimer,parts,state=0,fireGlobals,i,jqXHR={readyState:0,setRequestHeader:function(name,value){if(!state){var lname=name.toLowerCase();name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value;}\nreturn this;},getAllResponseHeaders:function(){return state===2?responseHeadersString:null;},getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while((match=rheaders.exec(responseHeadersString))){responseHeaders[match[1].toLowerCase()]=match[2];}}\nmatch=responseHeaders[key.toLowerCase()];}\nreturn match===undefined?null:match;},overrideMimeType:function(type){if(!state){s.mimeType=type;}\nreturn this;},abort:function(statusText){statusText=statusText||\"abort\";if(transport){transport.abort(statusText);}\ndone(0,statusText);return this;}};function done(status,nativeStatusText,responses,headers){if(state===2){return;}\nstate=2;if(timeoutTimer){clearTimeout(timeoutTimer);}\ntransport=undefined;responseHeadersString=headers||\"\";jqXHR.readyState=status>0?4:0;var isSuccess,success,error,statusText=nativeStatusText,response=responses?ajaxHandleResponses(s,jqXHR,responses):undefined,lastModified,etag;if(status>=200&&status<300||status===304){if(s.ifModified){if((lastModified=jqXHR.getResponseHeader(\"Last-Modified\"))){jQuery.lastModified[ifModifiedKey]=lastModified;}\nif((etag=jqXHR.getResponseHeader(\"Etag\"))){jQuery.etag[ifModifiedKey]=etag;}}\nif(status===304){statusText=\"notmodified\";isSuccess=true;}else{try{success=ajaxConvert(s,response);statusText=\"success\";isSuccess=true;}catch(e){statusText=\"parsererror\";error=e;}}}else{error=statusText;if(!statusText||status){statusText=\"error\";if(status<0){status=0;}}}\njqXHR.status=status;jqXHR.statusText=\"\"+(nativeStatusText||statusText);if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);}\njqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger(\"ajax\"+(isSuccess?\"Success\":\"Error\"),[jqXHR,s,isSuccess?success:error]);}\ncompleteDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger(\"ajaxComplete\",[jqXHR,s]);if(!(--jQuery.active)){jQuery.event.trigger(\"ajaxStop\");}}}\ndeferred.promise(jqXHR);jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;jqXHR.complete=completeDeferred.add;jqXHR.statusCode=function(map){if(map){var tmp;if(state<2){for(tmp in map){statusCode[tmp]=[statusCode[tmp],map[tmp]];}}else{tmp=map[jqXHR.status];jqXHR.then(tmp,tmp);}}\nreturn this;};s.url=((url||s.url)+\"\").replace(rhash,\"\").replace(rprotocol,ajaxLocParts[1]+\"//\");s.dataTypes=jQuery.trim(s.dataType||\"*\").toLowerCase().split(rspacesAjax);if(s.crossDomain==null){parts=rurl.exec(s.url.toLowerCase());s.crossDomain=!!(parts&&(parts[1]!=ajaxLocParts[1]||parts[2]!=ajaxLocParts[2]||(parts[3]||(parts[1]===\"http:\"?80:443))!=(ajaxLocParts[3]||(ajaxLocParts[1]===\"http:\"?80:443))));}\nif(s.data&&s.processData&&typeof s.data!==\"string\"){s.data=jQuery.param(s.data,s.traditional);}\ninspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2){return false;}\nfireGlobals=s.global;s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger(\"ajaxStart\");}\nif(!s.hasContent){if(s.data){s.url+=(rquery.test(s.url)?\"&\":\"?\")+s.data;delete s.data;}\nifModifiedKey=s.url;if(s.cache===false){var ts=jQuery.now(),ret=s.url.replace(rts,\"$1_=\"+ts);s.url=ret+((ret===s.url)?(rquery.test(s.url)?\"&\":\"?\")+\"_=\"+ts:\"\");}}\nif(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader(\"Content-Type\",s.contentType);}\nif(s.ifModified){ifModifiedKey=ifModifiedKey||s.url;if(jQuery.lastModified[ifModifiedKey]){jqXHR.setRequestHeader(\"If-Modified-Since\",jQuery.lastModified[ifModifiedKey]);}\nif(jQuery.etag[ifModifiedKey]){jqXHR.setRequestHeader(\"If-None-Match\",jQuery.etag[ifModifiedKey]);}}\njqXHR.setRequestHeader(\"Accept\",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!==\"*\"?\", \"+allTypes+\"; q=0.01\":\"\"):s.accepts[\"*\"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i]);}\nif(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){jqXHR.abort();return false;}\nfor(i in{success:1,error:1,complete:1}){jqXHR[i](s[i]);}\ntransport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,\"No Transport\");}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger(\"ajaxSend\",[jqXHR,s]);}\nif(s.async&&s.timeout>0){timeoutTimer=setTimeout(function(){jqXHR.abort(\"timeout\");},s.timeout);}\ntry{state=1;transport.send(requestHeaders,done);}catch(e){if(state<2){done(-1,e);}else{throw e;}}}\nreturn jqXHR;},param:function(a,traditional){var s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value;s[s.length]=encodeURIComponent(key)+\"=\"+encodeURIComponent(value);};if(traditional===undefined){traditional=jQuery.ajaxSettings.traditional;}\nif(jQuery.isArray(a)||(a.jquery&&!jQuery.isPlainObject(a))){jQuery.each(a,function(){add(this.name,this.value);});}else{for(var prefix in a){buildParams(prefix,a[prefix],traditional,add);}}\nreturn s.join(\"&\").replace(r20,\"+\");}});function buildParams(prefix,obj,traditional,add){if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v);}else{buildParams(prefix+\"[\"+(typeof v===\"object\"?i:\"\")+\"]\",v,traditional,add);}});}else if(!traditional&&jQuery.type(obj)===\"object\"){for(var name in obj){buildParams(prefix+\"[\"+name+\"]\",obj[name],traditional,add);}}else{add(prefix,obj);}}\njQuery.extend({active:0,lastModified:{},etag:{}});function ajaxHandleResponses(s,jqXHR,responses){var contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields,ct,type,finalDataType,firstDataType;for(type in responseFields){if(type in responses){jqXHR[responseFields[type]]=responses[type];}}\nwhile(dataTypes[0]===\"*\"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader(\"content-type\");}}\nif(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break;}}}\nif(dataTypes[0]in responses){finalDataType=dataTypes[0];}else{for(type in responses){if(!dataTypes[0]||s.converters[type+\" \"+dataTypes[0]]){finalDataType=type;break;}\nif(!firstDataType){firstDataType=type;}}\nfinalDataType=finalDataType||firstDataType;}\nif(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType);}\nreturn responses[finalDataType];}}\nfunction ajaxConvert(s,response){if(s.dataFilter){response=s.dataFilter(response,s.dataType);}\nvar dataTypes=s.dataTypes,converters={},i,key,length=dataTypes.length,tmp,current=dataTypes[0],prev,conversion,conv,conv1,conv2;for(i=1;i<length;i++){if(i===1){for(key in s.converters){if(typeof key===\"string\"){converters[key.toLowerCase()]=s.converters[key];}}}\nprev=current;current=dataTypes[i];if(current===\"*\"){current=prev;}else if(prev!==\"*\"&&prev!==current){conversion=prev+\" \"+current;conv=converters[conversion]||converters[\"* \"+current];if(!conv){conv2=undefined;for(conv1 in converters){tmp=conv1.split(\" \");if(tmp[0]===prev||tmp[0]===\"*\"){conv2=converters[tmp[1]+\" \"+current];if(conv2){conv1=converters[conv1];if(conv1===true){conv=conv2;}else if(conv2===true){conv=conv1;}\nbreak;}}}}\nif(!(conv||conv2)){jQuery.error(\"No conversion from \"+conversion.replace(\" \",\" to \"));}\nif(conv!==true){response=conv?conv(response):conv2(conv1(response));}}}\nreturn response;}\nvar jsc=jQuery.now(),jsre=/(\\=)\\?(&|$)|\\?\\?/i;jQuery.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){return jQuery.expando+\"_\"+(jsc++);}});jQuery.ajaxPrefilter(\"json jsonp\",function(s,originalSettings,jqXHR){var inspectData=(typeof s.data===\"string\")&&/^application\\/x\\-www\\-form\\-urlencoded/.test(s.contentType);if(s.dataTypes[0]===\"jsonp\"||s.jsonp!==false&&(jsre.test(s.url)||inspectData&&jsre.test(s.data))){var responseContainer,jsonpCallback=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,previous=window[jsonpCallback],url=s.url,data=s.data,replace=\"$1\"+jsonpCallback+\"$2\";if(s.jsonp!==false){url=url.replace(jsre,replace);if(s.url===url){if(inspectData){data=data.replace(jsre,replace);}\nif(s.data===data){url+=(/\\?/.test(url)?\"&\":\"?\")+s.jsonp+\"=\"+jsonpCallback;}}}\ns.url=url;s.data=data;window[jsonpCallback]=function(response){responseContainer=[response];};jqXHR.always(function(){window[jsonpCallback]=previous;if(responseContainer&&jQuery.isFunction(previous)){window[jsonpCallback](responseContainer[0]);}});s.converters[\"script json\"]=function(){if(!responseContainer){jQuery.error(jsonpCallback+\" was not called\");}\nreturn responseContainer[0];};s.dataTypes[0]=\"json\";return\"script\";}});jQuery.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/javascript|ecmascript/},converters:{\"text script\":function(text){jQuery.globalEval(text);return text;}}});jQuery.ajaxPrefilter(\"script\",function(s){if(s.cache===undefined){s.cache=false;}\nif(s.crossDomain){s.type=\"GET\";s.global=false;}});jQuery.ajaxTransport(\"script\",function(s){if(s.crossDomain){var script,head=document.head||document.getElementsByTagName(\"head\")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement(\"script\");script.async=\"async\";if(s.scriptCharset){script.charset=s.scriptCharset;}\nscript.src=s.url;script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;if(head&&script.parentNode){head.removeChild(script);}\nscript=undefined;if(!isAbort){callback(200,\"success\");}}};head.insertBefore(script,head.firstChild);},abort:function(){if(script){script.onload(0,1);}}};}});var\nxhrOnUnloadAbort=window.ActiveXObject?function(){for(var key in xhrCallbacks){xhrCallbacks[key](0,1);}}:false,xhrId=0,xhrCallbacks;function createStandardXHR(){try{return new window.XMLHttpRequest();}catch(e){}}\nfunction createActiveXHR(){try{return new window.ActiveXObject(\"Microsoft.XMLHTTP\");}catch(e){}}\njQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||createActiveXHR();}:createStandardXHR;(function(xhr){jQuery.extend(jQuery.support,{ajax:!!xhr,cors:!!xhr&&(\"withCredentials\"in xhr)});})(jQuery.ajaxSettings.xhr());if(jQuery.support.ajax){jQuery.ajaxTransport(function(s){if(!s.crossDomain||jQuery.support.cors){var callback;return{send:function(headers,complete){var xhr=s.xhr(),handle,i;if(s.username){xhr.open(s.type,s.url,s.async,s.username,s.password);}else{xhr.open(s.type,s.url,s.async);}\nif(s.xhrFields){for(i in s.xhrFields){xhr[i]=s.xhrFields[i];}}\nif(s.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(s.mimeType);}\nif(!s.crossDomain&&!headers[\"X-Requested-With\"]){headers[\"X-Requested-With\"]=\"XMLHttpRequest\";}\ntry{for(i in headers){xhr.setRequestHeader(i,headers[i]);}}catch(_){}\nxhr.send((s.hasContent&&s.data)||null);callback=function(_,isAbort){var status,statusText,responseHeaders,responses,xml;try{if(callback&&(isAbort||xhr.readyState===4)){callback=undefined;if(handle){xhr.onreadystatechange=jQuery.noop;if(xhrOnUnloadAbort){delete xhrCallbacks[handle];}}\nif(isAbort){if(xhr.readyState!==4){xhr.abort();}}else{status=xhr.status;responseHeaders=xhr.getAllResponseHeaders();responses={};xml=xhr.responseXML;if(xml&&xml.documentElement){responses.xml=xml;}\ntry{responses.text=xhr.responseText;}catch(_){}\ntry{statusText=xhr.statusText;}catch(e){statusText=\"\";}\nif(!status&&s.isLocal&&!s.crossDomain){status=responses.text?200:404;}else if(status===1223){status=204;}}}}catch(firefoxAccessException){if(!isAbort){complete(-1,firefoxAccessException);}}\nif(responses){complete(status,statusText,responses,responseHeaders);}};if(!s.async||xhr.readyState===4){callback();}else{handle=++xhrId;if(xhrOnUnloadAbort){if(!xhrCallbacks){xhrCallbacks={};jQuery(window).unload(xhrOnUnloadAbort);}\nxhrCallbacks[handle]=callback;}\nxhr.onreadystatechange=callback;}},abort:function(){if(callback){callback(0,1);}}};}});}\nvar elemdisplay={},iframe,iframeDoc,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=/^([+\\-]=)?([\\d+.\\-]+)([a-z%]*)$/i,timerId,fxAttrs=[[\"height\",\"marginTop\",\"marginBottom\",\"paddingTop\",\"paddingBottom\"],[\"width\",\"marginLeft\",\"marginRight\",\"paddingLeft\",\"paddingRight\"],[\"opacity\"]],fxNow;jQuery.fn.extend({show:function(speed,easing,callback){var elem,display;if(speed||speed===0){return this.animate(genFx(\"show\",3),speed,easing,callback);}else{for(var i=0,j=this.length;i<j;i++){elem=this[i];if(elem.style){display=elem.style.display;if(!jQuery._data(elem,\"olddisplay\")&&display===\"none\"){display=elem.style.display=\"\";}\nif((display===\"\"&&jQuery.css(elem,\"display\")===\"none\")||!jQuery.contains(elem.ownerDocument.documentElement,elem)){jQuery._data(elem,\"olddisplay\",defaultDisplay(elem.nodeName));}}}\nfor(i=0;i<j;i++){elem=this[i];if(elem.style){display=elem.style.display;if(display===\"\"||display===\"none\"){elem.style.display=jQuery._data(elem,\"olddisplay\")||\"\";}}}\nreturn this;}},hide:function(speed,easing,callback){if(speed||speed===0){return this.animate(genFx(\"hide\",3),speed,easing,callback);}else{var elem,display,i=0,j=this.length;for(;i<j;i++){elem=this[i];if(elem.style){display=jQuery.css(elem,\"display\");if(display!==\"none\"&&!jQuery._data(elem,\"olddisplay\")){jQuery._data(elem,\"olddisplay\",display);}}}\nfor(i=0;i<j;i++){if(this[i].style){this[i].style.display=\"none\";}}\nreturn this;}},_toggle:jQuery.fn.toggle,toggle:function(fn,fn2,callback){var bool=typeof fn===\"boolean\";if(jQuery.isFunction(fn)&&jQuery.isFunction(fn2)){this._toggle.apply(this,arguments);}else if(fn==null||bool){this.each(function(){var state=bool?fn:jQuery(this).is(\":hidden\");jQuery(this)[state?\"show\":\"hide\"]();});}else{this.animate(genFx(\"toggle\",3),fn,fn2,callback);}\nreturn this;},fadeTo:function(speed,to,easing,callback){return this.filter(\":hidden\").css(\"opacity\",0).show().end().animate({opacity:to},speed,easing,callback);},animate:function(prop,speed,easing,callback){var optall=jQuery.speed(speed,easing,callback);if(jQuery.isEmptyObject(prop)){return this.each(optall.complete,[false]);}\nprop=jQuery.extend({},prop);function doAnimation(){if(optall.queue===false){jQuery._mark(this);}\nvar opt=jQuery.extend({},optall),isElement=this.nodeType===1,hidden=isElement&&jQuery(this).is(\":hidden\"),name,val,p,e,hooks,replace,parts,start,end,unit,method;opt.animatedProperties={};for(p in prop){name=jQuery.camelCase(p);if(p!==name){prop[name]=prop[p];delete prop[p];}\nif((hooks=jQuery.cssHooks[name])&&\"expand\"in hooks){replace=hooks.expand(prop[name]);delete prop[name];for(p in replace){if(!(p in prop)){prop[p]=replace[p];}}}}\nfor(name in prop){val=prop[name];if(jQuery.isArray(val)){opt.animatedProperties[name]=val[1];val=prop[name]=val[0];}else{opt.animatedProperties[name]=opt.specialEasing&&opt.specialEasing[name]||opt.easing||'swing';}\nif(val===\"hide\"&&hidden||val===\"show\"&&!hidden){return opt.complete.call(this);}\nif(isElement&&(name===\"height\"||name===\"width\")){opt.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(jQuery.css(this,\"display\")===\"inline\"&&jQuery.css(this,\"float\")===\"none\"){if(!jQuery.support.inlineBlockNeedsLayout||defaultDisplay(this.nodeName)===\"inline\"){this.style.display=\"inline-block\";}else{this.style.zoom=1;}}}}\nif(opt.overflow!=null){this.style.overflow=\"hidden\";}\nfor(p in prop){e=new jQuery.fx(this,opt,p);val=prop[p];if(rfxtypes.test(val)){method=jQuery._data(this,\"toggle\"+p)||(val===\"toggle\"?hidden?\"show\":\"hide\":0);if(method){jQuery._data(this,\"toggle\"+p,method===\"show\"?\"hide\":\"show\");e[method]();}else{e[val]();}}else{parts=rfxnum.exec(val);start=e.cur();if(parts){end=parseFloat(parts[2]);unit=parts[3]||(jQuery.cssNumber[p]?\"\":\"px\");if(unit!==\"px\"){jQuery.style(this,p,(end||1)+unit);start=((end||1)/e.cur())*start;jQuery.style(this,p,start+unit);}\nif(parts[1]){end=((parts[1]===\"-=\"?-1:1)*end)+start;}\ne.custom(start,end,unit);}else{e.custom(start,val,\"\");}}}\nreturn true;}\nreturn optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation);},stop:function(type,clearQueue,gotoEnd){if(typeof type!==\"string\"){gotoEnd=clearQueue;clearQueue=type;type=undefined;}\nif(clearQueue&&type!==false){this.queue(type||\"fx\",[]);}\nreturn this.each(function(){var index,hadTimers=false,timers=jQuery.timers,data=jQuery._data(this);if(!gotoEnd){jQuery._unmark(true,this);}\nfunction stopQueue(elem,data,index){var hooks=data[index];jQuery.removeData(elem,index,true);hooks.stop(gotoEnd);}\nif(type==null){for(index in data){if(data[index]&&data[index].stop&&index.indexOf(\".run\")===index.length-4){stopQueue(this,data,index);}}}else if(data[index=type+\".run\"]&&data[index].stop){stopQueue(this,data,index);}\nfor(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){if(gotoEnd){timers[index](true);}else{timers[index].saveState();}\nhadTimers=true;timers.splice(index,1);}}\nif(!(gotoEnd&&hadTimers)){jQuery.dequeue(this,type);}});}});function createFxNow(){setTimeout(clearFxNow,0);return(fxNow=jQuery.now());}\nfunction clearFxNow(){fxNow=undefined;}\nfunction genFx(type,num){var obj={};jQuery.each(fxAttrs.concat.apply([],fxAttrs.slice(0,num)),function(){obj[this]=type;});return obj;}\njQuery.each({slideDown:genFx(\"show\",1),slideUp:genFx(\"hide\",1),slideToggle:genFx(\"toggle\",1),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback);};});jQuery.extend({speed:function(speed,easing,fn){var opt=speed&&typeof speed===\"object\"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration===\"number\"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true){opt.queue=\"fx\";}\nopt.old=opt.complete;opt.complete=function(noUnmark){if(jQuery.isFunction(opt.old)){opt.old.call(this);}\nif(opt.queue){jQuery.dequeue(this,opt.queue);}else if(noUnmark!==false){jQuery._unmark(this);}};return opt;},easing:{linear:function(p){return p;},swing:function(p){return(-Math.cos(p*Math.PI)/2)+0.5;}},timers:[],fx:function(elem,options,prop){this.options=options;this.elem=elem;this.prop=prop;options.orig=options.orig||{};}});jQuery.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this);}\n(jQuery.fx.step[this.prop]||jQuery.fx.step._default)(this);},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop];}\nvar parsed,r=jQuery.css(this.elem,this.prop);return isNaN(parsed=parseFloat(r))?!r||r===\"auto\"?0:r:parsed;},custom:function(from,to,unit){var self=this,fx=jQuery.fx;this.startTime=fxNow||createFxNow();this.end=to;this.now=this.start=from;this.pos=this.state=0;this.unit=unit||this.unit||(jQuery.cssNumber[this.prop]?\"\":\"px\");function t(gotoEnd){return self.step(gotoEnd);}\nt.queue=this.options.queue;t.elem=this.elem;t.saveState=function(){if(jQuery._data(self.elem,\"fxshow\"+self.prop)===undefined){if(self.options.hide){jQuery._data(self.elem,\"fxshow\"+self.prop,self.start);}else if(self.options.show){jQuery._data(self.elem,\"fxshow\"+self.prop,self.end);}}};if(t()&&jQuery.timers.push(t)&&!timerId){timerId=setInterval(fx.tick,fx.interval);}},show:function(){var dataShow=jQuery._data(this.elem,\"fxshow\"+this.prop);this.options.orig[this.prop]=dataShow||jQuery.style(this.elem,this.prop);this.options.show=true;if(dataShow!==undefined){this.custom(this.cur(),dataShow);}else{this.custom(this.prop===\"width\"||this.prop===\"height\"?1:0,this.cur());}\njQuery(this.elem).show();},hide:function(){this.options.orig[this.prop]=jQuery._data(this.elem,\"fxshow\"+this.prop)||jQuery.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0);},step:function(gotoEnd){var p,n,complete,t=fxNow||createFxNow(),done=true,elem=this.elem,options=this.options;if(gotoEnd||t>=options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();options.animatedProperties[this.prop]=true;for(p in options.animatedProperties){if(options.animatedProperties[p]!==true){done=false;}}\nif(done){if(options.overflow!=null&&!jQuery.support.shrinkWrapBlocks){jQuery.each([\"\",\"X\",\"Y\"],function(index,value){elem.style[\"overflow\"+value]=options.overflow[index];});}\nif(options.hide){jQuery(elem).hide();}\nif(options.hide||options.show){for(p in options.animatedProperties){jQuery.style(elem,p,options.orig[p]);jQuery.removeData(elem,\"fxshow\"+p,true);jQuery.removeData(elem,\"toggle\"+p,true);}}\ncomplete=options.complete;if(complete){options.complete=false;complete.call(elem);}}\nreturn false;}else{if(options.duration==Infinity){this.now=t;}else{n=t-this.startTime;this.state=n/options.duration;this.pos=jQuery.easing[options.animatedProperties[this.prop]](this.state,n,0,1,options.duration);this.now=this.start+((this.end-this.start)*this.pos);}\nthis.update();}\nreturn true;}};jQuery.extend(jQuery.fx,{tick:function(){var timer,timers=jQuery.timers,i=0;for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1);}}\nif(!timers.length){jQuery.fx.stop();}},interval:13,stop:function(){clearInterval(timerId);timerId=null;},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(fx){jQuery.style(fx.elem,\"opacity\",fx.now);},_default:function(fx){if(fx.elem.style&&fx.elem.style[fx.prop]!=null){fx.elem.style[fx.prop]=fx.now+fx.unit;}else{fx.elem[fx.prop]=fx.now;}}}});jQuery.each(fxAttrs.concat.apply([],fxAttrs),function(i,prop){if(prop.indexOf(\"margin\")){jQuery.fx.step[prop]=function(fx){jQuery.style(fx.elem,prop,Math.max(0,fx.now)+fx.unit);};}});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem;}).length;};}\nfunction defaultDisplay(nodeName){if(!elemdisplay[nodeName]){var body=document.body,elem=jQuery(\"<\"+nodeName+\">\").appendTo(body),display=elem.css(\"display\");elem.remove();if(display===\"none\"||display===\"\"){if(!iframe){iframe=document.createElement(\"iframe\");iframe.frameBorder=iframe.width=iframe.height=0;}\nbody.appendChild(iframe);if(!iframeDoc||!iframe.createElement){iframeDoc=(iframe.contentWindow||iframe.contentDocument).document;iframeDoc.write((jQuery.support.boxModel?\"<!doctype html>\":\"\")+\"<html><body>\");iframeDoc.close();}\nelem=iframeDoc.createElement(nodeName);iframeDoc.body.appendChild(elem);display=jQuery.css(elem,\"display\");body.removeChild(iframe);}\nelemdisplay[nodeName]=display;}\nreturn elemdisplay[nodeName];}\nvar getOffset,rtable=/^t(?:able|d|h)$/i,rroot=/^(?:body|html)$/i;if(\"getBoundingClientRect\"in document.documentElement){getOffset=function(elem,doc,docElem,box){try{box=elem.getBoundingClientRect();}catch(e){}\nif(!box||!jQuery.contains(docElem,elem)){return box?{top:box.top,left:box.left}:{top:0,left:0};}\nvar body=doc.body,win=getWindow(doc),clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,scrollTop=win.pageYOffset||jQuery.support.boxModel&&docElem.scrollTop||body.scrollTop,scrollLeft=win.pageXOffset||jQuery.support.boxModel&&docElem.scrollLeft||body.scrollLeft,top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft;return{top:top,left:left};};}else{getOffset=function(elem,doc,docElem){var computedStyle,offsetParent=elem.offsetParent,prevOffsetParent=elem,body=doc.body,defaultView=doc.defaultView,prevComputedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle,top=elem.offsetTop,left=elem.offsetLeft;while((elem=elem.parentNode)&&elem!==body&&elem!==docElem){if(jQuery.support.fixedPosition&&prevComputedStyle.position===\"fixed\"){break;}\ncomputedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle;top-=elem.scrollTop;left-=elem.scrollLeft;if(elem===offsetParent){top+=elem.offsetTop;left+=elem.offsetLeft;if(jQuery.support.doesNotAddBorder&&!(jQuery.support.doesAddBorderForTableAndCells&&rtable.test(elem.nodeName))){top+=parseFloat(computedStyle.borderTopWidth)||0;left+=parseFloat(computedStyle.borderLeftWidth)||0;}\nprevOffsetParent=offsetParent;offsetParent=elem.offsetParent;}\nif(jQuery.support.subtractsBorderForOverflowNotVisible&&computedStyle.overflow!==\"visible\"){top+=parseFloat(computedStyle.borderTopWidth)||0;left+=parseFloat(computedStyle.borderLeftWidth)||0;}\nprevComputedStyle=computedStyle;}\nif(prevComputedStyle.position===\"relative\"||prevComputedStyle.position===\"static\"){top+=body.offsetTop;left+=body.offsetLeft;}\nif(jQuery.support.fixedPosition&&prevComputedStyle.position===\"fixed\"){top+=Math.max(docElem.scrollTop,body.scrollTop);left+=Math.max(docElem.scrollLeft,body.scrollLeft);}\nreturn{top:top,left:left};};}\njQuery.fn.offset=function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i);});}\nvar elem=this[0],doc=elem&&elem.ownerDocument;if(!doc){return null;}\nif(elem===doc.body){return jQuery.offset.bodyOffset(elem);}\nreturn getOffset(elem,doc,doc.documentElement);};jQuery.offset={bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;if(jQuery.support.doesNotIncludeMarginInBodyOffset){top+=parseFloat(jQuery.css(body,\"marginTop\"))||0;left+=parseFloat(jQuery.css(body,\"marginLeft\"))||0;}\nreturn{top:top,left:left};},setOffset:function(elem,options,i){var position=jQuery.css(elem,\"position\");if(position===\"static\"){elem.style.position=\"relative\";}\nvar curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,\"top\"),curCSSLeft=jQuery.css(elem,\"left\"),calculatePosition=(position===\"absolute\"||position===\"fixed\")&&jQuery.inArray(\"auto\",[curCSSTop,curCSSLeft])>-1,props={},curPosition={},curTop,curLeft;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left;}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0;}\nif(jQuery.isFunction(options)){options=options.call(elem,i,curOffset);}\nif(options.top!=null){props.top=(options.top-curOffset.top)+curTop;}\nif(options.left!=null){props.left=(options.left-curOffset.left)+curLeft;}\nif(\"using\"in options){options.using.call(elem,props);}else{curElem.css(props);}}};jQuery.fn.extend({position:function(){if(!this[0]){return null;}\nvar elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=rroot.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();offset.top-=parseFloat(jQuery.css(elem,\"marginTop\"))||0;offset.left-=parseFloat(jQuery.css(elem,\"marginLeft\"))||0;parentOffset.top+=parseFloat(jQuery.css(offsetParent[0],\"borderTopWidth\"))||0;parentOffset.left+=parseFloat(jQuery.css(offsetParent[0],\"borderLeftWidth\"))||0;return{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left};},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||document.body;while(offsetParent&&(!rroot.test(offsetParent.nodeName)&&jQuery.css(offsetParent,\"position\")===\"static\")){offsetParent=offsetParent.offsetParent;}\nreturn offsetParent;});}});jQuery.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?(prop in win)?win[prop]:jQuery.support.boxModel&&win.document.documentElement[method]||win.document.body[method]:elem[method];}\nif(win){win.scrollTo(!top?val:jQuery(win).scrollLeft(),top?val:jQuery(win).scrollTop());}else{elem[method]=val;}},method,val,arguments.length,null);};});function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9?elem.defaultView||elem.parentWindow:false;}\njQuery.each({Height:\"height\",Width:\"width\"},function(name,type){var clientProp=\"client\"+name,scrollProp=\"scroll\"+name,offsetProp=\"offset\"+name;jQuery.fn[\"inner\"+name]=function(){var elem=this[0];return elem?elem.style?parseFloat(jQuery.css(elem,type,\"padding\")):this[type]():null;};jQuery.fn[\"outer\"+name]=function(margin){var elem=this[0];return elem?elem.style?parseFloat(jQuery.css(elem,type,margin?\"margin\":\"border\")):this[type]():null;};jQuery.fn[type]=function(value){return jQuery.access(this,function(elem,type,value){var doc,docElemProp,orig,ret;if(jQuery.isWindow(elem)){doc=elem.document;docElemProp=doc.documentElement[clientProp];return jQuery.support.boxModel&&docElemProp||doc.body&&doc.body[clientProp]||docElemProp;}\nif(elem.nodeType===9){doc=elem.documentElement;if(doc[clientProp]>=doc[scrollProp]){return doc[clientProp];}\nreturn Math.max(elem.body[scrollProp],doc[scrollProp],elem.body[offsetProp],doc[offsetProp]);}\nif(value===undefined){orig=jQuery.css(elem,type);ret=parseFloat(orig);return jQuery.isNumeric(ret)?ret:orig;}\njQuery(elem).css(type,value);},type,value,arguments.length,null);};});window.jQuery=window.$=jQuery;if(typeof define===\"function\"&&define.amd&&define.amd.jQuery){define(\"jquery\",[],function(){return jQuery;});}})(window);var jquery=window.jQuery;","js/thirdparty/jquery/jquery_ui.js":"\n(function($,undefined){$.ui=$.ui||{};if($.ui.version){return;}\n$.extend($.ui,{version:\"1.8.18\",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});$.fn.extend({propAttr:$.fn.prop||$.fn.attr,_focus:$.fn.focus,focus:function(delay,fn){return typeof delay===\"number\"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();if(fn){fn.call(elem);}},delay);}):this._focus.apply(this,arguments);},scrollParent:function(){var scrollParent;if(($.browser.msie&&(/(static|relative)/).test(this.css('position')))||(/absolute/).test(this.css('position'))){scrollParent=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test($.curCSS(this,'position',1))&&(/(auto|scroll)/).test($.curCSS(this,'overflow',1)+$.curCSS(this,'overflow-y',1)+$.curCSS(this,'overflow-x',1));}).eq(0);}else{scrollParent=this.parents().filter(function(){return(/(auto|scroll)/).test($.curCSS(this,'overflow',1)+$.curCSS(this,'overflow-y',1)+$.curCSS(this,'overflow-x',1));}).eq(0);}\nreturn(/fixed/).test(this.css('position'))||!scrollParent.length?$(document):scrollParent;},zIndex:function(zIndex){if(zIndex!==undefined){return this.css(\"zIndex\",zIndex);}\nif(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=elem.css(\"position\");if(position===\"absolute\"||position===\"relative\"||position===\"fixed\"){value=parseInt(elem.css(\"zIndex\"),10);if(!isNaN(value)&&value!==0){return value;}}\nelem=elem.parent();}}\nreturn 0;},disableSelection:function(){return this.bind(($.support.selectstart?\"selectstart\":\"mousedown\")+\".ui-disableSelection\",function(event){event.preventDefault();});},enableSelection:function(){return this.unbind(\".ui-disableSelection\");}});$.each([\"Width\",\"Height\"],function(i,name){var side=name===\"Width\"?[\"Left\",\"Right\"]:[\"Top\",\"Bottom\"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.curCSS(elem,\"padding\"+this,true))||0;if(border){size-=parseFloat($.curCSS(elem,\"border\"+this+\"Width\",true))||0;}\nif(margin){size-=parseFloat($.curCSS(elem,\"margin\"+this,true))||0;}});return size;}\n$.fn[\"inner\"+name]=function(size){if(size===undefined){return orig[\"inner\"+name].call(this);}\nreturn this.each(function(){$(this).css(type,reduce(this,size)+\"px\");});};$.fn[\"outer\"+name]=function(size,margin){if(typeof size!==\"number\"){return orig[\"outer\"+name].call(this,size);}\nreturn this.each(function(){$(this).css(type,reduce(this,size,true,margin)+\"px\");});};});function focusable(element,isTabIndexNotNaN){var nodeName=element.nodeName.toLowerCase();if(\"area\"===nodeName){var map=element.parentNode,mapName=map.name,img;if(!element.href||!mapName||map.nodeName.toLowerCase()!==\"map\"){return false;}\nimg=$(\"img[usemap=#\"+mapName+\"]\")[0];return!!img&&visible(img);}\nreturn(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:\"a\"==nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element);}\nfunction visible(element){return!$(element).parents().andSelf().filter(function(){return $.curCSS(this,\"visibility\")===\"hidden\"||$.expr.filters.hidden(this);}).length;}\n$.extend($.expr[\":\"],{data:function(elem,i,match){return!!$.data(elem,match[3]);},focusable:function(element){return focusable(element,!isNaN($.attr(element,\"tabindex\")));},tabbable:function(element){var tabIndex=$.attr(element,\"tabindex\"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN);}});$(function(){var body=document.body,div=body.appendChild(div=document.createElement(\"div\"));div.offsetHeight;$.extend(div.style,{minHeight:\"100px\",height:\"auto\",padding:0,borderWidth:0});$.support.minHeight=div.offsetHeight===100;$.support.selectstart=\"onselectstart\"in div;body.removeChild(div).style.display=\"none\";});$.extend($.ui,{plugin:{add:function(module,option,set){var proto=$.ui[module].prototype;for(var i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]]);}},call:function(instance,name,args){var set=instance.plugins[name];if(!set||!instance.element[0].parentNode){return;}\nfor(var i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args);}}}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b);},hasScroll:function(el,a){if($(el).css(\"overflow\")===\"hidden\"){return false;}\nvar scroll=(a&&a===\"left\")?\"scrollLeft\":\"scrollTop\",has=false;if(el[scroll]>0){return true;}\nel[scroll]=1;has=(el[scroll]>0);el[scroll]=0;return has;},isOverAxis:function(x,reference,size){return(x>reference)&&(x<(reference+size));},isOver:function(y,x,top,left,height,width){return $.ui.isOverAxis(y,top,height)&&$.ui.isOverAxis(x,left,width);}});})(jQuery);(function($,undefined){if($.cleanData){var _cleanData=$.cleanData;$.cleanData=function(elems){for(var i=0,elem;(elem=elems[i])!=null;i++){try{$(elem).triggerHandler(\"remove\");}catch(e){}}\n_cleanData(elems);};}else{var _remove=$.fn.remove;$.fn.remove=function(selector,keepData){return this.each(function(){if(!keepData){if(!selector||$.filter(selector,[this]).length){$(\"*\",this).add([this]).each(function(){try{$(this).triggerHandler(\"remove\");}catch(e){}});}}\nreturn _remove.call($(this),selector,keepData);});};}\n$.widget=function(name,base,prototype){var namespace=name.split(\".\")[0],fullName;name=name.split(\".\")[1];fullName=namespace+\"-\"+name;if(!prototype){prototype=base;base=$.Widget;}\n$.expr[\":\"][fullName]=function(elem){return!!$.data(elem,name);};$[namespace]=$[namespace]||{};$[namespace][name]=function(options,element){if(arguments.length){this._createWidget(options,element);}};var basePrototype=new base();basePrototype.options=$.extend(true,{},basePrototype.options);$[namespace][name].prototype=$.extend(true,basePrototype,{namespace:namespace,widgetName:name,widgetEventPrefix:$[namespace][name].prototype.widgetEventPrefix||name,widgetBaseClass:fullName},prototype);$.widget.bridge(name,$[namespace][name]);};$.widget.bridge=function(name,object){$.fn[name]=function(options){var isMethodCall=typeof options===\"string\",args=Array.prototype.slice.call(arguments,1),returnValue=this;options=!isMethodCall&&args.length?$.extend.apply(null,[true,options].concat(args)):options;if(isMethodCall&&options.charAt(0)===\"_\"){return returnValue;}\nif(isMethodCall){this.each(function(){var instance=$.data(this,name),methodValue=instance&&$.isFunction(instance[options])?instance[options].apply(instance,args):instance;if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue;return false;}});}else{this.each(function(){var instance=$.data(this,name);if(instance){instance.option(options||{})._init();}else{$.data(this,name,new object(options,this));}});}\nreturn returnValue;};};$.Widget=function(options,element){if(arguments.length){this._createWidget(options,element);}};$.Widget.prototype={widgetName:\"widget\",widgetEventPrefix:\"\",options:{disabled:false},_createWidget:function(options,element){$.data(element,this.widgetName,this);this.element=$(element);this.options=$.extend(true,{},this.options,this._getCreateOptions(),options);var self=this;this.element.bind(\"remove.\"+this.widgetName,function(){self.destroy();});this._create();this._trigger(\"create\");this._init();},_getCreateOptions:function(){return $.metadata&&$.metadata.get(this.element[0])[this.widgetName];},_create:function(){},_init:function(){},destroy:function(){this.element.unbind(\".\"+this.widgetName).removeData(this.widgetName);this.widget().unbind(\".\"+this.widgetName).removeAttr(\"aria-disabled\").removeClass(this.widgetBaseClass+\"-disabled \"+\"ui-state-disabled\");},widget:function(){return this.element;},option:function(key,value){var options=key;if(arguments.length===0){return $.extend({},this.options);}\nif(typeof key===\"string\"){if(value===undefined){return this.options[key];}\noptions={};options[key]=value;}\nthis._setOptions(options);return this;},_setOptions:function(options){var self=this;$.each(options,function(key,value){self._setOption(key,value);});return this;},_setOption:function(key,value){this.options[key]=value;if(key===\"disabled\"){this.widget()\n[value?\"addClass\":\"removeClass\"](this.widgetBaseClass+\"-disabled\"+\" \"+\"ui-state-disabled\").attr(\"aria-disabled\",value);}\nreturn this;},enable:function(){return this._setOption(\"disabled\",false);},disable:function(){return this._setOption(\"disabled\",true);},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;if(orig){for(prop in orig){if(!(prop in event)){event[prop]=orig[prop];}}}\nthis.element.trigger(event,data);return!($.isFunction(callback)&&callback.call(this.element[0],event,data)===false||event.isDefaultPrevented());}};})(jQuery);(function($,undefined){var mouseHandled=false;$(document).mouseup(function(e){mouseHandled=false;});$.widget(\"ui.mouse\",{options:{cancel:':input,option',distance:1,delay:0},_mouseInit:function(){var self=this;this.element.bind('mousedown.'+this.widgetName,function(event){return self._mouseDown(event);}).bind('click.'+this.widgetName,function(event){if(true===$.data(event.target,self.widgetName+'.preventClickEvent')){$.removeData(event.target,self.widgetName+'.preventClickEvent');event.stopImmediatePropagation();return false;}});this.started=false;},_mouseDestroy:function(){this.element.unbind('.'+this.widgetName);},_mouseDown:function(event){if(mouseHandled){return};(this._mouseStarted&&this._mouseUp(event));this._mouseDownEvent=event;var self=this,btnIsLeft=(event.which==1),elIsCancel=(typeof this.options.cancel==\"string\"&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:false);if(!btnIsLeft||elIsCancel||!this._mouseCapture(event)){return true;}\nthis.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){self.mouseDelayMet=true;},this.options.delay);}\nif(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(event)!==false);if(!this._mouseStarted){event.preventDefault();return true;}}\nif(true===$.data(event.target,this.widgetName+'.preventClickEvent')){$.removeData(event.target,this.widgetName+'.preventClickEvent');}\nthis._mouseMoveDelegate=function(event){return self._mouseMove(event);};this._mouseUpDelegate=function(event){return self._mouseUp(event);};$(document).bind('mousemove.'+this.widgetName,this._mouseMoveDelegate).bind('mouseup.'+this.widgetName,this._mouseUpDelegate);event.preventDefault();mouseHandled=true;return true;},_mouseMove:function(event){if($.browser.msie&&!(document.documentMode>=9)&&!event.button){return this._mouseUp(event);}\nif(this._mouseStarted){this._mouseDrag(event);return event.preventDefault();}\nif(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,event)!==false);(this._mouseStarted?this._mouseDrag(event):this._mouseUp(event));}\nreturn!this._mouseStarted;},_mouseUp:function(event){$(document).unbind('mousemove.'+this.widgetName,this._mouseMoveDelegate).unbind('mouseup.'+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(event.target==this._mouseDownEvent.target){$.data(event.target,this.widgetName+'.preventClickEvent',true);}\nthis._mouseStop(event);}\nreturn false;},_mouseDistanceMet:function(event){return(Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance);},_mouseDelayMet:function(event){return this.mouseDelayMet;},_mouseStart:function(event){},_mouseDrag:function(event){},_mouseStop:function(event){},_mouseCapture:function(event){return true;}});})(jQuery);(function($,undefined){$.ui=$.ui||{};var horizontalPositions=/left|center|right/,verticalPositions=/top|center|bottom/,center=\"center\",support={},_position=$.fn.position,_offset=$.fn.offset;$.fn.position=function(options){if(!options||!options.of){return _position.apply(this,arguments);}\noptions=$.extend({},options);var target=$(options.of),targetElem=target[0],collision=(options.collision||\"flip\").split(\" \"),offset=options.offset?options.offset.split(\" \"):[0,0],targetWidth,targetHeight,basePosition;if(targetElem.nodeType===9){targetWidth=target.width();targetHeight=target.height();basePosition={top:0,left:0};}else if(targetElem.setTimeout){targetWidth=target.width();targetHeight=target.height();basePosition={top:target.scrollTop(),left:target.scrollLeft()};}else if(targetElem.preventDefault){options.at=\"left top\";targetWidth=targetHeight=0;basePosition={top:options.of.pageY,left:options.of.pageX};}else{targetWidth=target.outerWidth();targetHeight=target.outerHeight();basePosition=target.offset();}\n$.each([\"my\",\"at\"],function(){var pos=(options[this]||\"\").split(\" \");if(pos.length===1){pos=horizontalPositions.test(pos[0])?pos.concat([center]):verticalPositions.test(pos[0])?[center].concat(pos):[center,center];}\npos[0]=horizontalPositions.test(pos[0])?pos[0]:center;pos[1]=verticalPositions.test(pos[1])?pos[1]:center;options[this]=pos;});if(collision.length===1){collision[1]=collision[0];}\noffset[0]=parseInt(offset[0],10)||0;if(offset.length===1){offset[1]=offset[0];}\noffset[1]=parseInt(offset[1],10)||0;if(options.at[0]===\"right\"){basePosition.left+=targetWidth;}else if(options.at[0]===center){basePosition.left+=targetWidth/2;}\nif(options.at[1]===\"bottom\"){basePosition.top+=targetHeight;}else if(options.at[1]===center){basePosition.top+=targetHeight/2;}\nbasePosition.left+=offset[0];basePosition.top+=offset[1];return this.each(function(){var elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseInt($.curCSS(this,\"marginLeft\",true))||0,marginTop=parseInt($.curCSS(this,\"marginTop\",true))||0,collisionWidth=elemWidth+marginLeft+\n(parseInt($.curCSS(this,\"marginRight\",true))||0),collisionHeight=elemHeight+marginTop+\n(parseInt($.curCSS(this,\"marginBottom\",true))||0),position=$.extend({},basePosition),collisionPosition;if(options.my[0]===\"right\"){position.left-=elemWidth;}else if(options.my[0]===center){position.left-=elemWidth/2;}\nif(options.my[1]===\"bottom\"){position.top-=elemHeight;}else if(options.my[1]===center){position.top-=elemHeight/2;}\nif(!support.fractions){position.left=Math.round(position.left);position.top=Math.round(position.top);}\ncollisionPosition={left:position.left-marginLeft,top:position.top-marginTop};$.each([\"left\",\"top\"],function(i,dir){if($.ui.position[collision[i]]){$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:offset,my:options.my,at:options.at});}});if($.fn.bgiframe){elem.bgiframe();}\nelem.offset($.extend(position,{using:options.using}));});};$.ui.position={fit:{left:function(position,data){var win=$(window),over=data.collisionPosition.left+data.collisionWidth-win.width()-win.scrollLeft();position.left=over>0?position.left-over:Math.max(position.left-data.collisionPosition.left,position.left);},top:function(position,data){var win=$(window),over=data.collisionPosition.top+data.collisionHeight-win.height()-win.scrollTop();position.top=over>0?position.top-over:Math.max(position.top-data.collisionPosition.top,position.top);}},flip:{left:function(position,data){if(data.at[0]===center){return;}\nvar win=$(window),over=data.collisionPosition.left+data.collisionWidth-win.width()-win.scrollLeft(),myOffset=data.my[0]===\"left\"?-data.elemWidth:data.my[0]===\"right\"?data.elemWidth:0,atOffset=data.at[0]===\"left\"?data.targetWidth:-data.targetWidth,offset=-2*data.offset[0];position.left+=data.collisionPosition.left<0?myOffset+atOffset+offset:over>0?myOffset+atOffset+offset:0;},top:function(position,data){if(data.at[1]===center){return;}\nvar win=$(window),over=data.collisionPosition.top+data.collisionHeight-win.height()-win.scrollTop(),myOffset=data.my[1]===\"top\"?-data.elemHeight:data.my[1]===\"bottom\"?data.elemHeight:0,atOffset=data.at[1]===\"top\"?data.targetHeight:-data.targetHeight,offset=-2*data.offset[1];position.top+=data.collisionPosition.top<0?myOffset+atOffset+offset:over>0?myOffset+atOffset+offset:0;}}};if(!$.offset.setOffset){$.offset.setOffset=function(elem,options){if(/static/.test($.curCSS(elem,\"position\"))){elem.style.position=\"relative\";}\nvar curElem=$(elem),curOffset=curElem.offset(),curTop=parseInt($.curCSS(elem,\"top\",true),10)||0,curLeft=parseInt($.curCSS(elem,\"left\",true),10)||0,props={top:(options.top-curOffset.top)+curTop,left:(options.left-curOffset.left)+curLeft};if('using'in options){options.using.call(elem,props);}else{curElem.css(props);}};$.fn.offset=function(options){var elem=this[0];if(!elem||!elem.ownerDocument){return null;}\nif(options){return this.each(function(){$.offset.setOffset(this,options);});}\nreturn _offset.call(this);};}\n(function(){var body=document.getElementsByTagName(\"body\")[0],div=document.createElement(\"div\"),testElement,testElementParent,testElementStyle,offset,offsetTotal;testElement=document.createElement(body?\"div\":\"body\");testElementStyle={visibility:\"hidden\",width:0,height:0,border:0,margin:0,background:\"none\"};if(body){$.extend(testElementStyle,{position:\"absolute\",left:\"-1000px\",top:\"-1000px\"});}\nfor(var i in testElementStyle){testElement.style[i]=testElementStyle[i];}\ntestElement.appendChild(div);testElementParent=body||document.documentElement;testElementParent.insertBefore(testElement,testElementParent.firstChild);div.style.cssText=\"position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;\";offset=$(div).offset(function(_,offset){return offset;}).offset();testElement.innerHTML=\"\";testElementParent.removeChild(testElement);offsetTotal=offset.top+offset.left+(body?2000:0);support.fractions=offsetTotal>21&&offsetTotal<22;})();}(jQuery));(function($,undefined){$.widget(\"ui.draggable\",$.ui.mouse,{widgetEventPrefix:\"drag\",options:{addClasses:true,appendTo:\"parent\",axis:false,connectToSortable:false,containment:false,cursor:\"auto\",cursorAt:false,grid:false,handle:false,helper:\"original\",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:\"default\",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:\"both\",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper=='original'&&!(/^(?:r|a|f)/).test(this.element.css(\"position\")))\nthis.element[0].style.position='relative';(this.options.addClasses&&this.element.addClass(\"ui-draggable\"));(this.options.disabled&&this.element.addClass(\"ui-draggable-disabled\"));this._mouseInit();},destroy:function(){if(!this.element.data('draggable'))return;this.element.removeData(\"draggable\").unbind(\".draggable\").removeClass(\"ui-draggable\"\n+\" ui-draggable-dragging\"\n+\" ui-draggable-disabled\");this._mouseDestroy();return this;},_mouseCapture:function(event){var o=this.options;if(this.helper||o.disabled||$(event.target).is('.ui-resizable-handle'))\nreturn false;this.handle=this._getHandle(event);if(!this.handle)\nreturn false;if(o.iframeFix){$(o.iframeFix===true?\"iframe\":o.iframeFix).each(function(){$('<div class=\"ui-draggable-iframeFix\" style=\"background: #fff;\"><\/div>').css({width:this.offsetWidth+\"px\",height:this.offsetHeight+\"px\",position:\"absolute\",opacity:\"0.001\",zIndex:1000}).css($(this).offset()).appendTo(\"body\");});}\nreturn true;},_mouseStart:function(event){var o=this.options;this.helper=this._createHelper(event);this._cacheHelperProportions();if($.ui.ddmanager)\n$.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css(\"position\");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));if(o.containment)\nthis._setContainment();if(this._trigger(\"start\",event)===false){this._clear();return false;}\nthis._cacheHelperProportions();if($.ui.ddmanager&&!o.dropBehaviour)\n$.ui.ddmanager.prepareOffsets(this,event);this.helper.addClass(\"ui-draggable-dragging\");this._mouseDrag(event,true);if($.ui.ddmanager)$.ui.ddmanager.dragStart(this,event);return true;},_mouseDrag:function(event,noPropagation){this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo(\"absolute\");if(!noPropagation){var ui=this._uiHash();if(this._trigger('drag',event,ui)===false){this._mouseUp({});return false;}\nthis.position=ui.position;}\nif(!this.options.axis||this.options.axis!=\"y\")this.helper[0].style.left=this.position.left+'px';if(!this.options.axis||this.options.axis!=\"x\")this.helper[0].style.top=this.position.top+'px';if($.ui.ddmanager)$.ui.ddmanager.drag(this,event);return false;},_mouseStop:function(event){var dropped=false;if($.ui.ddmanager&&!this.options.dropBehaviour)\ndropped=$.ui.ddmanager.drop(this,event);if(this.dropped){dropped=this.dropped;this.dropped=false;}\nif((!this.element[0]||!this.element[0].parentNode)&&this.options.helper==\"original\")\nreturn false;if((this.options.revert==\"invalid\"&&!dropped)||(this.options.revert==\"valid\"&&dropped)||this.options.revert===true||($.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped))){var self=this;$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(self._trigger(\"stop\",event)!==false){self._clear();}});}else{if(this._trigger(\"stop\",event)!==false){this._clear();}}\nreturn false;},_mouseUp:function(event){if(this.options.iframeFix===true){$(\"div.ui-draggable-iframeFix\").each(function(){this.parentNode.removeChild(this);});}\nif($.ui.ddmanager)$.ui.ddmanager.dragStop(this,event);return $.ui.mouse.prototype._mouseUp.call(this,event);},cancel:function(){if(this.helper.is(\".ui-draggable-dragging\")){this._mouseUp({});}else{this._clear();}\nreturn this;},_getHandle:function(event){var handle=!this.options.handle||!$(this.options.handle,this.element).length?true:false;$(this.options.handle,this.element).find(\"*\").andSelf().each(function(){if(this==event.target)handle=true;});return handle;},_createHelper:function(event){var o=this.options;var helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event])):(o.helper=='clone'?this.element.clone().removeAttr('id'):this.element);if(!helper.parents('body').length)\nhelper.appendTo((o.appendTo=='parent'?this.element[0].parentNode:o.appendTo));if(helper[0]!=this.element[0]&&!(/(fixed|absolute)/).test(helper.css(\"position\")))\nhelper.css(\"position\",\"absolute\");return helper;},_adjustOffsetFromHelper:function(obj){if(typeof obj=='string'){obj=obj.split(' ');}\nif($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}\nif('left'in obj){this.offset.click.left=obj.left+this.margins.left;}\nif('right'in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}\nif('top'in obj){this.offset.click.top=obj.top+this.margins.top;}\nif('bottom'in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition=='absolute'&&this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}\nif((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=='html'&&$.browser.msie))\npo={top:0,left:0};return{top:po.top+(parseInt(this.offsetParent.css(\"borderTopWidth\"),10)||0),left:po.left+(parseInt(this.offsetParent.css(\"borderLeftWidth\"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition==\"relative\"){var p=this.element.position();return{top:p.top-(parseInt(this.helper.css(\"top\"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css(\"left\"),10)||0)+this.scrollParent.scrollLeft()};}else{return{top:0,left:0};}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css(\"marginLeft\"),10)||0),top:(parseInt(this.element.css(\"marginTop\"),10)||0),right:(parseInt(this.element.css(\"marginRight\"),10)||0),bottom:(parseInt(this.element.css(\"marginBottom\"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var o=this.options;if(o.containment=='parent')o.containment=this.helper[0].parentNode;if(o.containment=='document'||o.containment=='window')this.containment=[o.containment=='document'?0:$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,o.containment=='document'?0:$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(o.containment=='document'?0:$(window).scrollLeft())+$(o.containment=='document'?document:window).width()-this.helperProportions.width-this.margins.left,(o.containment=='document'?0:$(window).scrollTop())+($(o.containment=='document'?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!(/^(document|window|parent)$/).test(o.containment)&&o.containment.constructor!=Array){var c=$(o.containment);var ce=c[0];if(!ce)return;var co=c.offset();var over=($(ce).css(\"overflow\")!='hidden');this.containment=[(parseInt($(ce).css(\"borderLeftWidth\"),10)||0)+(parseInt($(ce).css(\"paddingLeft\"),10)||0),(parseInt($(ce).css(\"borderTopWidth\"),10)||0)+(parseInt($(ce).css(\"paddingTop\"),10)||0),(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css(\"borderLeftWidth\"),10)||0)-(parseInt($(ce).css(\"paddingRight\"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css(\"borderTopWidth\"),10)||0)-(parseInt($(ce).css(\"paddingBottom\"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=c;}else if(o.containment.constructor==Array){this.containment=o.containment;}},_convertPositionTo:function(d,pos){if(!pos)pos=this.position;var mod=d==\"absolute\"?1:-1;var o=this.options,scroll=this.cssPosition=='absolute'&&!(this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);return{top:(pos.top\n+this.offset.relative.top*mod\n+this.offset.parent.top*mod\n-($.browser.safari&&$.browser.version<526&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop()))*mod)),left:(pos.left\n+this.offset.relative.left*mod\n+this.offset.parent.left*mod\n-($.browser.safari&&$.browser.version<526&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod))};},_generatePosition:function(event){var o=this.options,scroll=this.cssPosition=='absolute'&&!(this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);var pageX=event.pageX;var pageY=event.pageY;if(this.originalPosition){var containment;if(this.containment){if(this.relative_container){var co=this.relative_container.offset();containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top];}\nelse{containment=this.containment;}\nif(event.pageX-this.offset.click.left<containment[0])pageX=containment[0]+this.offset.click.left;if(event.pageY-this.offset.click.top<containment[1])pageY=containment[1]+this.offset.click.top;if(event.pageX-this.offset.click.left>containment[2])pageX=containment[2]+this.offset.click.left;if(event.pageY-this.offset.click.top>containment[3])pageY=containment[3]+this.offset.click.top;}\nif(o.grid){var top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;pageY=containment?(!(top-this.offset.click.top<containment[1]||top-this.offset.click.top>containment[3])?top:(!(top-this.offset.click.top<containment[1])?top-o.grid[1]:top+o.grid[1])):top;var left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;pageX=containment?(!(left-this.offset.click.left<containment[0]||left-this.offset.click.left>containment[2])?left:(!(left-this.offset.click.left<containment[0])?left-o.grid[0]:left+o.grid[0])):left;}}\nreturn{top:(pageY\n-this.offset.click.top\n-this.offset.relative.top\n-this.offset.parent.top\n+($.browser.safari&&$.browser.version<526&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop())))),left:(pageX\n-this.offset.click.left\n-this.offset.relative.left\n-this.offset.parent.left\n+($.browser.safari&&$.browser.version<526&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())))};},_clear:function(){this.helper.removeClass(\"ui-draggable-dragging\");if(this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval)this.helper.remove();this.helper=null;this.cancelHelperRemoval=false;},_trigger:function(type,event,ui){ui=ui||this._uiHash();$.ui.plugin.call(this,type,[event,ui]);if(type==\"drag\")this.positionAbs=this._convertPositionTo(\"absolute\");return $.Widget.prototype._trigger.call(this,type,event,ui);},plugins:{},_uiHash:function(event){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs};}});$.extend($.ui.draggable,{version:\"1.8.18\"});$.ui.plugin.add(\"draggable\",\"connectToSortable\",{start:function(event,ui){var inst=$(this).data(\"draggable\"),o=inst.options,uiSortable=$.extend({},ui,{item:inst.element});inst.sortables=[];$(o.connectToSortable).each(function(){var sortable=$.data(this,'sortable');if(sortable&&!sortable.options.disabled){inst.sortables.push({instance:sortable,shouldRevert:sortable.options.revert});sortable.refreshPositions();sortable._trigger(\"activate\",event,uiSortable);}});},stop:function(event,ui){var inst=$(this).data(\"draggable\"),uiSortable=$.extend({},ui,{item:inst.element});$.each(inst.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;inst.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(event);this.instance.options.helper=this.instance.options._helper;if(inst.options.helper=='original')\nthis.instance.currentItem.css({top:'auto',left:'auto'});}else{this.instance.cancelHelperRemoval=false;this.instance._trigger(\"deactivate\",event,uiSortable);}});},drag:function(event,ui){var inst=$(this).data(\"draggable\"),self=this;var checkPos=function(o){var dyClick=this.offset.click.top,dxClick=this.offset.click.left;var helperTop=this.positionAbs.top,helperLeft=this.positionAbs.left;var itemHeight=o.height,itemWidth=o.width;var itemTop=o.top,itemLeft=o.left;return $.ui.isOver(helperTop+dyClick,helperLeft+dxClick,itemTop,itemLeft,itemHeight,itemWidth);};$.each(inst.sortables,function(i){this.instance.positionAbs=inst.positionAbs;this.instance.helperProportions=inst.helperProportions;this.instance.offset.click=inst.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=$(self).clone().removeAttr('id').appendTo(this.instance.element).data(\"sortable-item\",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return ui.helper[0];};event.target=this.instance.currentItem[0];this.instance._mouseCapture(event,true);this.instance._mouseStart(event,true,true);this.instance.offset.click.top=inst.offset.click.top;this.instance.offset.click.left=inst.offset.click.left;this.instance.offset.parent.left-=inst.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=inst.offset.parent.top-this.instance.offset.parent.top;inst._trigger(\"toSortable\",event);inst.dropped=this.instance.element;inst.currentItem=inst.element;this.instance.fromOutside=inst;}\nif(this.instance.currentItem)this.instance._mouseDrag(event);}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger('out',event,this.instance._uiHash(this.instance));this.instance._mouseStop(event,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder)this.instance.placeholder.remove();inst._trigger(\"fromSortable\",event);inst.dropped=false;}};});}});$.ui.plugin.add(\"draggable\",\"cursor\",{start:function(event,ui){var t=$('body'),o=$(this).data('draggable').options;if(t.css(\"cursor\"))o._cursor=t.css(\"cursor\");t.css(\"cursor\",o.cursor);},stop:function(event,ui){var o=$(this).data('draggable').options;if(o._cursor)$('body').css(\"cursor\",o._cursor);}});$.ui.plugin.add(\"draggable\",\"opacity\",{start:function(event,ui){var t=$(ui.helper),o=$(this).data('draggable').options;if(t.css(\"opacity\"))o._opacity=t.css(\"opacity\");t.css('opacity',o.opacity);},stop:function(event,ui){var o=$(this).data('draggable').options;if(o._opacity)$(ui.helper).css('opacity',o._opacity);}});$.ui.plugin.add(\"draggable\",\"scroll\",{start:function(event,ui){var i=$(this).data(\"draggable\");if(i.scrollParent[0]!=document&&i.scrollParent[0].tagName!='HTML')i.overflowOffset=i.scrollParent.offset();},drag:function(event,ui){var i=$(this).data(\"draggable\"),o=i.options,scrolled=false;if(i.scrollParent[0]!=document&&i.scrollParent[0].tagName!='HTML'){if(!o.axis||o.axis!='x'){if((i.overflowOffset.top+i.scrollParent[0].offsetHeight)-event.pageY<o.scrollSensitivity)\ni.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop+o.scrollSpeed;else if(event.pageY-i.overflowOffset.top<o.scrollSensitivity)\ni.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop-o.scrollSpeed;}\nif(!o.axis||o.axis!='y'){if((i.overflowOffset.left+i.scrollParent[0].offsetWidth)-event.pageX<o.scrollSensitivity)\ni.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft+o.scrollSpeed;else if(event.pageX-i.overflowOffset.left<o.scrollSensitivity)\ni.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft-o.scrollSpeed;}}else{if(!o.axis||o.axis!='x'){if(event.pageY-$(document).scrollTop()<o.scrollSensitivity)\nscrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity)\nscrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);}\nif(!o.axis||o.axis!='y'){if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity)\nscrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity)\nscrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed);}}\nif(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour)\n$.ui.ddmanager.prepareOffsets(i,event);}});$.ui.plugin.add(\"draggable\",\"snap\",{start:function(event,ui){var i=$(this).data(\"draggable\"),o=i.options;i.snapElements=[];$(o.snap.constructor!=String?(o.snap.items||':data(draggable)'):o.snap).each(function(){var $t=$(this);var $o=$t.offset();if(this!=i.element[0])i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left});});},drag:function(event,ui){var inst=$(this).data(\"draggable\"),o=inst.options;var d=o.snapTolerance;var x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(var i=inst.snapElements.length-1;i>=0;i--){var l=inst.snapElements[i].left,r=l+inst.snapElements[i].width,t=inst.snapElements[i].top,b=t+inst.snapElements[i].height;if(!((l-d<x1&&x1<r+d&&t-d<y1&&y1<b+d)||(l-d<x1&&x1<r+d&&t-d<y2&&y2<b+d)||(l-d<x2&&x2<r+d&&t-d<y1&&y1<b+d)||(l-d<x2&&x2<r+d&&t-d<y2&&y2<b+d))){if(inst.snapElements[i].snapping)(inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));inst.snapElements[i].snapping=false;continue;}\nif(o.snapMode!='inner'){var ts=Math.abs(t-y2)<=d;var bs=Math.abs(b-y1)<=d;var ls=Math.abs(l-x2)<=d;var rs=Math.abs(r-x1)<=d;if(ts)ui.position.top=inst._convertPositionTo(\"relative\",{top:t-inst.helperProportions.height,left:0}).top-inst.margins.top;if(bs)ui.position.top=inst._convertPositionTo(\"relative\",{top:b,left:0}).top-inst.margins.top;if(ls)ui.position.left=inst._convertPositionTo(\"relative\",{top:0,left:l-inst.helperProportions.width}).left-inst.margins.left;if(rs)ui.position.left=inst._convertPositionTo(\"relative\",{top:0,left:r}).left-inst.margins.left;}\nvar first=(ts||bs||ls||rs);if(o.snapMode!='outer'){var ts=Math.abs(t-y1)<=d;var bs=Math.abs(b-y2)<=d;var ls=Math.abs(l-x1)<=d;var rs=Math.abs(r-x2)<=d;if(ts)ui.position.top=inst._convertPositionTo(\"relative\",{top:t,left:0}).top-inst.margins.top;if(bs)ui.position.top=inst._convertPositionTo(\"relative\",{top:b-inst.helperProportions.height,left:0}).top-inst.margins.top;if(ls)ui.position.left=inst._convertPositionTo(\"relative\",{top:0,left:l}).left-inst.margins.left;if(rs)ui.position.left=inst._convertPositionTo(\"relative\",{top:0,left:r-inst.helperProportions.width}).left-inst.margins.left;}\nif(!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first))\n(inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));inst.snapElements[i].snapping=(ts||bs||ls||rs||first);};}});$.ui.plugin.add(\"draggable\",\"stack\",{start:function(event,ui){var o=$(this).data(\"draggable\").options;var group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css(\"zIndex\"),10)||0)-(parseInt($(b).css(\"zIndex\"),10)||0);});if(!group.length){return;}\nvar min=parseInt(group[0].style.zIndex)||0;$(group).each(function(i){this.style.zIndex=min+i;});this[0].style.zIndex=min+group.length;}});$.ui.plugin.add(\"draggable\",\"zIndex\",{start:function(event,ui){var t=$(ui.helper),o=$(this).data(\"draggable\").options;if(t.css(\"zIndex\"))o._zIndex=t.css(\"zIndex\");t.css('zIndex',o.zIndex);},stop:function(event,ui){var o=$(this).data(\"draggable\").options;if(o._zIndex)$(ui.helper).css('zIndex',o._zIndex);}});})(jQuery);(function($,undefined){$.widget(\"ui.droppable\",{widgetEventPrefix:\"drop\",options:{accept:'*',activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:'default',tolerance:'intersect'},_create:function(){var o=this.options,accept=o.accept;this.isover=0;this.isout=1;this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept);};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};$.ui.ddmanager.droppables[o.scope]=$.ui.ddmanager.droppables[o.scope]||[];$.ui.ddmanager.droppables[o.scope].push(this);(o.addClasses&&this.element.addClass(\"ui-droppable\"));},destroy:function(){var drop=$.ui.ddmanager.droppables[this.options.scope];for(var i=0;i<drop.length;i++)\nif(drop[i]==this)\ndrop.splice(i,1);this.element.removeClass(\"ui-droppable ui-droppable-disabled\").removeData(\"droppable\").unbind(\".droppable\");return this;},_setOption:function(key,value){if(key=='accept'){this.accept=$.isFunction(value)?value:function(d){return d.is(value);};}\n$.Widget.prototype._setOption.apply(this,arguments);},_activate:function(event){var draggable=$.ui.ddmanager.current;if(this.options.activeClass)this.element.addClass(this.options.activeClass);(draggable&&this._trigger('activate',event,this.ui(draggable)));},_deactivate:function(event){var draggable=$.ui.ddmanager.current;if(this.options.activeClass)this.element.removeClass(this.options.activeClass);(draggable&&this._trigger('deactivate',event,this.ui(draggable)));},_over:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]==this.element[0])return;if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.hoverClass)this.element.addClass(this.options.hoverClass);this._trigger('over',event,this.ui(draggable));}},_out:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]==this.element[0])return;if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.hoverClass)this.element.removeClass(this.options.hoverClass);this._trigger('out',event,this.ui(draggable));}},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]==this.element[0])return false;var childrenIntersection=false;this.element.find(\":data(droppable)\").not(\".ui-draggable-dragging\").each(function(){var inst=$.data(this,'droppable');if(inst.options.greedy&&!inst.options.disabled&&inst.options.scope==draggable.options.scope&&inst.accept.call(inst.element[0],(draggable.currentItem||draggable.element))&&$.ui.intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance)){childrenIntersection=true;return false;}});if(childrenIntersection)return false;if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.activeClass)this.element.removeClass(this.options.activeClass);if(this.options.hoverClass)this.element.removeClass(this.options.hoverClass);this._trigger('drop',event,this.ui(draggable));return this.element;}\nreturn false;},ui:function(c){return{draggable:(c.currentItem||c.element),helper:c.helper,position:c.position,offset:c.positionAbs};}});$.extend($.ui.droppable,{version:\"1.8.18\"});$.ui.intersect=function(draggable,droppable,toleranceMode){if(!droppable.offset)return false;var x1=(draggable.positionAbs||draggable.position.absolute).left,x2=x1+draggable.helperProportions.width,y1=(draggable.positionAbs||draggable.position.absolute).top,y2=y1+draggable.helperProportions.height;var l=droppable.offset.left,r=l+droppable.proportions.width,t=droppable.offset.top,b=t+droppable.proportions.height;switch(toleranceMode){case'fit':return(l<=x1&&x2<=r&&t<=y1&&y2<=b);break;case'intersect':return(l<x1+(draggable.helperProportions.width/2)&&x2-(draggable.helperProportions.width/2)<r&&t<y1+(draggable.helperProportions.height/2)&&y2-(draggable.helperProportions.height/2)<b);break;case'pointer':var draggableLeft=((draggable.positionAbs||draggable.position.absolute).left+(draggable.clickOffset||draggable.offset.click).left),draggableTop=((draggable.positionAbs||draggable.position.absolute).top+(draggable.clickOffset||draggable.offset.click).top),isOver=$.ui.isOver(draggableTop,draggableLeft,t,l,droppable.proportions.height,droppable.proportions.width);return isOver;break;case'touch':return((y1>=t&&y1<=b)||(y2>=t&&y2<=b)||(y1<t&&y2>b))&&((x1>=l&&x1<=r)||(x2>=l&&x2<=r)||(x1<l&&x2>r));break;default:return false;break;}};$.ui.ddmanager={current:null,droppables:{'default':[]},prepareOffsets:function(t,event){var m=$.ui.ddmanager.droppables[t.options.scope]||[];var type=event?event.type:null;var list=(t.currentItem||t.element).find(\":data(droppable)\").andSelf();droppablesLoop:for(var i=0;i<m.length;i++){if(m[i].options.disabled||(t&&!m[i].accept.call(m[i].element[0],(t.currentItem||t.element))))continue;for(var j=0;j<list.length;j++){if(list[j]==m[i].element[0]){m[i].proportions.height=0;continue droppablesLoop;}};m[i].visible=m[i].element.css(\"display\")!=\"none\";if(!m[i].visible)continue;if(type==\"mousedown\")m[i]._activate.call(m[i],event);m[i].offset=m[i].element.offset();m[i].proportions={width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight};}},drop:function(draggable,event){var dropped=false;$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(!this.options)return;if(!this.options.disabled&&this.visible&&$.ui.intersect(draggable,this,this.options.tolerance))\ndropped=this._drop.call(this,event)||dropped;if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this.isout=1;this.isover=0;this._deactivate.call(this,event);}});return dropped;},dragStart:function(draggable,event){draggable.element.parents(\":not(body,html)\").bind(\"scroll.droppable\",function(){if(!draggable.options.refreshPositions)$.ui.ddmanager.prepareOffsets(draggable,event);});},drag:function(draggable,event){if(draggable.options.refreshPositions)$.ui.ddmanager.prepareOffsets(draggable,event);$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var intersects=$.ui.intersect(draggable,this,this.options.tolerance);var c=!intersects&&this.isover==1?'isout':(intersects&&this.isover==0?'isover':null);if(!c)return;var parentInstance;if(this.options.greedy){var parent=this.element.parents(':data(droppable):eq(0)');if(parent.length){parentInstance=$.data(parent[0],'droppable');parentInstance.greedyChild=(c=='isover'?1:0);}}\nif(parentInstance&&c=='isover'){parentInstance['isover']=0;parentInstance['isout']=1;parentInstance._out.call(parentInstance,event);}\nthis[c]=1;this[c=='isout'?'isover':'isout']=0;this[c==\"isover\"?\"_over\":\"_out\"].call(this,event);if(parentInstance&&c=='isout'){parentInstance['isout']=0;parentInstance['isover']=1;parentInstance._over.call(parentInstance,event);}});},dragStop:function(draggable,event){draggable.element.parents(\":not(body,html)\").unbind(\"scroll.droppable\");if(!draggable.options.refreshPositions)$.ui.ddmanager.prepareOffsets(draggable,event);}};})(jQuery);(function($,undefined){$.widget(\"ui.resizable\",$.ui.mouse,{widgetEventPrefix:\"resize\",options:{alsoResize:false,animate:false,animateDuration:\"slow\",animateEasing:\"swing\",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:\"e,s,se\",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var self=this,o=this.options;this.element.addClass(\"ui-resizable\");$.extend(this,{_aspectRatio:!!(o.aspectRatio),aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||'ui-resizable-helper':null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){this.element.wrap($('<div class=\"ui-wrapper\" style=\"overflow: hidden;\"><\/div>').css({position:this.element.css('position'),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css('top'),left:this.element.css('left')}));this.element=this.element.parent().data(\"resizable\",this.element.data('resizable'));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css(\"marginLeft\"),marginTop:this.originalElement.css(\"marginTop\"),marginRight:this.originalElement.css(\"marginRight\"),marginBottom:this.originalElement.css(\"marginBottom\")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css('resize');this.originalElement.css('resize','none');this._proportionallyResizeElements.push(this.originalElement.css({position:'static',zoom:1,display:'block'}));this.originalElement.css({margin:this.originalElement.css('margin')});this._proportionallyResize();}\nthis.handles=o.handles||(!$('.ui-resizable-handle',this.element).length?\"e,s,se\":{n:'.ui-resizable-n',e:'.ui-resizable-e',s:'.ui-resizable-s',w:'.ui-resizable-w',se:'.ui-resizable-se',sw:'.ui-resizable-sw',ne:'.ui-resizable-ne',nw:'.ui-resizable-nw'});if(this.handles.constructor==String){if(this.handles=='all')this.handles='n,e,s,w,se,sw,ne,nw';var n=this.handles.split(\",\");this.handles={};for(var i=0;i<n.length;i++){var handle=$.trim(n[i]),hname='ui-resizable-'+handle;var axis=$('<div class=\"ui-resizable-handle '+hname+'\"><\/div>');if(/sw|se|ne|nw/.test(handle))axis.css({zIndex:++o.zIndex});if('se'==handle){axis.addClass('ui-icon ui-icon-gripsmall-diagonal-se');};this.handles[handle]='.ui-resizable-'+handle;this.element.append(axis);}}\nthis._renderAxis=function(target){target=target||this.element;for(var i in this.handles){if(this.handles[i].constructor==String)\nthis.handles[i]=$(this.handles[i],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var axis=$(this.handles[i],this.element),padWrapper=0;padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth();var padPos=['padding',/ne|nw|n/.test(i)?'Top':/se|sw|s/.test(i)?'Bottom':/^e$/.test(i)?'Right':'Left'].join(\"\");target.css(padPos,padWrapper);this._proportionallyResize();}\nif(!$(this.handles[i]).length)\ncontinue;}};this._renderAxis(this.element);this._handles=$('.ui-resizable-handle',this.element).disableSelection();this._handles.mouseover(function(){if(!self.resizing){if(this.className)\nvar axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);self.axis=axis&&axis[1]?axis[1]:'se';}});if(o.autoHide){this._handles.hide();$(this.element).addClass(\"ui-resizable-autohide\").hover(function(){if(o.disabled)return;$(this).removeClass(\"ui-resizable-autohide\");self._handles.show();},function(){if(o.disabled)return;if(!self.resizing){$(this).addClass(\"ui-resizable-autohide\");self._handles.hide();}});}\nthis._mouseInit();},destroy:function(){this._mouseDestroy();var _destroy=function(exp){$(exp).removeClass(\"ui-resizable ui-resizable-disabled ui-resizable-resizing\").removeData(\"resizable\").unbind(\".resizable\").find('.ui-resizable-handle').remove();};if(this.elementIsWrapper){_destroy(this.element);var wrapper=this.element;wrapper.after(this.originalElement.css({position:wrapper.css('position'),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css('top'),left:wrapper.css('left')})).remove();}\nthis.originalElement.css('resize',this.originalResizeStyle);_destroy(this.originalElement);return this;},_mouseCapture:function(event){var handle=false;for(var i in this.handles){if($(this.handles[i])[0]==event.target){handle=true;}}\nreturn!this.options.disabled&&handle;},_mouseStart:function(event){var o=this.options,iniPos=this.element.position(),el=this.element;this.resizing=true;this.documentScroll={top:$(document).scrollTop(),left:$(document).scrollLeft()};if(el.is('.ui-draggable')||(/absolute/).test(el.css('position'))){el.css({position:'absolute',top:iniPos.top,left:iniPos.left});}\nthis._renderProxy();var curleft=num(this.helper.css('left')),curtop=num(this.helper.css('top'));if(o.containment){curleft+=$(o.containment).scrollLeft()||0;curtop+=$(o.containment).scrollTop()||0;}\nthis.offset=this.helper.offset();this.position={left:curleft,top:curtop};this.size=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.originalPosition={left:curleft,top:curtop};this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()};this.originalMousePosition={left:event.pageX,top:event.pageY};this.aspectRatio=(typeof o.aspectRatio=='number')?o.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);var cursor=$('.ui-resizable-'+this.axis).css('cursor');$('body').css('cursor',cursor=='auto'?this.axis+'-resize':cursor);el.addClass(\"ui-resizable-resizing\");this._propagate(\"start\",event);return true;},_mouseDrag:function(event){var el=this.helper,o=this.options,props={},self=this,smp=this.originalMousePosition,a=this.axis;var dx=(event.pageX-smp.left)||0,dy=(event.pageY-smp.top)||0;var trigger=this._change[a];if(!trigger)return false;var data=trigger.apply(this,[event,dx,dy]),ie6=$.browser.msie&&$.browser.version<7,csdif=this.sizeDiff;this._updateVirtualBoundaries(event.shiftKey);if(this._aspectRatio||event.shiftKey)\ndata=this._updateRatio(data,event);data=this._respectSize(data,event);this._propagate(\"resize\",event);el.css({top:this.position.top+\"px\",left:this.position.left+\"px\",width:this.size.width+\"px\",height:this.size.height+\"px\"});if(!this._helper&&this._proportionallyResizeElements.length)\nthis._proportionallyResize();this._updateCache(data);this._trigger('resize',event,this.ui());return false;},_mouseStop:function(event){this.resizing=false;var o=this.options,self=this;if(this._helper){var pr=this._proportionallyResizeElements,ista=pr.length&&(/textarea/i).test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],'left')?0:self.sizeDiff.height,soffsetw=ista?0:self.sizeDiff.width;var s={width:(self.helper.width()-soffsetw),height:(self.helper.height()-soffseth)},left=(parseInt(self.element.css('left'),10)+(self.position.left-self.originalPosition.left))||null,top=(parseInt(self.element.css('top'),10)+(self.position.top-self.originalPosition.top))||null;if(!o.animate)\nthis.element.css($.extend(s,{top:top,left:left}));self.helper.height(self.size.height);self.helper.width(self.size.width);if(this._helper&&!o.animate)this._proportionallyResize();}\n$('body').css('cursor','auto');this.element.removeClass(\"ui-resizable-resizing\");this._propagate(\"stop\",event);if(this._helper)this.helper.remove();return false;},_updateVirtualBoundaries:function(forceAspectRatio){var o=this.options,pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b;b={minWidth:isNumber(o.minWidth)?o.minWidth:0,maxWidth:isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:isNumber(o.minHeight)?o.minHeight:0,maxHeight:isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||forceAspectRatio){pMinWidth=b.minHeight*this.aspectRatio;pMinHeight=b.minWidth/this.aspectRatio;pMaxWidth=b.maxHeight*this.aspectRatio;pMaxHeight=b.maxWidth/this.aspectRatio;if(pMinWidth>b.minWidth)b.minWidth=pMinWidth;if(pMinHeight>b.minHeight)b.minHeight=pMinHeight;if(pMaxWidth<b.maxWidth)b.maxWidth=pMaxWidth;if(pMaxHeight<b.maxHeight)b.maxHeight=pMaxHeight;}\nthis._vBoundaries=b;},_updateCache:function(data){var o=this.options;this.offset=this.helper.offset();if(isNumber(data.left))this.position.left=data.left;if(isNumber(data.top))this.position.top=data.top;if(isNumber(data.height))this.size.height=data.height;if(isNumber(data.width))this.size.width=data.width;},_updateRatio:function(data,event){var o=this.options,cpos=this.position,csize=this.size,a=this.axis;if(isNumber(data.height))data.width=(data.height*this.aspectRatio);else if(isNumber(data.width))data.height=(data.width/this.aspectRatio);if(a=='sw'){data.left=cpos.left+(csize.width-data.width);data.top=null;}\nif(a=='nw'){data.top=cpos.top+(csize.height-data.height);data.left=cpos.left+(csize.width-data.width);}\nreturn data;},_respectSize:function(data,event){var el=this.helper,o=this._vBoundaries,pRatio=this._aspectRatio||event.shiftKey,a=this.axis,ismaxw=isNumber(data.width)&&o.maxWidth&&(o.maxWidth<data.width),ismaxh=isNumber(data.height)&&o.maxHeight&&(o.maxHeight<data.height),isminw=isNumber(data.width)&&o.minWidth&&(o.minWidth>data.width),isminh=isNumber(data.height)&&o.minHeight&&(o.minHeight>data.height);if(isminw)data.width=o.minWidth;if(isminh)data.height=o.minHeight;if(ismaxw)data.width=o.maxWidth;if(ismaxh)data.height=o.maxHeight;var dw=this.originalPosition.left+this.originalSize.width,dh=this.position.top+this.size.height;var cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);if(isminw&&cw)data.left=dw-o.minWidth;if(ismaxw&&cw)data.left=dw-o.maxWidth;if(isminh&&ch)data.top=dh-o.minHeight;if(ismaxh&&ch)data.top=dh-o.maxHeight;var isNotwh=!data.width&&!data.height;if(isNotwh&&!data.left&&data.top)data.top=null;else if(isNotwh&&!data.top&&data.left)data.left=null;return data;},_proportionallyResize:function(){var o=this.options;if(!this._proportionallyResizeElements.length)return;var element=this.helper||this.element;for(var i=0;i<this._proportionallyResizeElements.length;i++){var prel=this._proportionallyResizeElements[i];if(!this.borderDif){var b=[prel.css('borderTopWidth'),prel.css('borderRightWidth'),prel.css('borderBottomWidth'),prel.css('borderLeftWidth')],p=[prel.css('paddingTop'),prel.css('paddingRight'),prel.css('paddingBottom'),prel.css('paddingLeft')];this.borderDif=$.map(b,function(v,i){var border=parseInt(v,10)||0,padding=parseInt(p[i],10)||0;return border+padding;});}\nif($.browser.msie&&!(!($(element).is(':hidden')||$(element).parents(':hidden').length)))\ncontinue;prel.css({height:(element.height()-this.borderDif[0]-this.borderDif[2])||0,width:(element.width()-this.borderDif[1]-this.borderDif[3])||0});};},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset();if(this._helper){this.helper=this.helper||$('<div style=\"overflow:hidden;\"><\/div>');var ie6=$.browser.msie&&$.browser.version<7,ie6offset=(ie6?1:0),pxyoffset=(ie6?2:-1);this.helper.addClass(this._helper).css({width:this.element.outerWidth()+pxyoffset,height:this.element.outerHeight()+pxyoffset,position:'absolute',left:this.elementOffset.left-ie6offset+'px',top:this.elementOffset.top-ie6offset+'px',zIndex:++o.zIndex});this.helper.appendTo(\"body\").disableSelection();}else{this.helper=this.element;}},_change:{e:function(event,dx,dy){return{width:this.originalSize.width+dx};},w:function(event,dx,dy){var o=this.options,cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx};},n:function(event,dx,dy){var o=this.options,cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy};},s:function(event,dx,dy){return{height:this.originalSize.height+dy};},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]);(n!=\"resize\"&&this._trigger(n,event,this.ui()));},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition};}});$.extend($.ui.resizable,{version:\"1.8.18\"});$.ui.plugin.add(\"resizable\",\"alsoResize\",{start:function(event,ui){var self=$(this).data(\"resizable\"),o=self.options;var _store=function(exp){$(exp).each(function(){var el=$(this);el.data(\"resizable-alsoresize\",{width:parseInt(el.width(),10),height:parseInt(el.height(),10),left:parseInt(el.css('left'),10),top:parseInt(el.css('top'),10)});});};if(typeof(o.alsoResize)=='object'&&!o.alsoResize.parentNode){if(o.alsoResize.length){o.alsoResize=o.alsoResize[0];_store(o.alsoResize);}\nelse{$.each(o.alsoResize,function(exp){_store(exp);});}}else{_store(o.alsoResize);}},resize:function(event,ui){var self=$(this).data(\"resizable\"),o=self.options,os=self.originalSize,op=self.originalPosition;var delta={height:(self.size.height-os.height)||0,width:(self.size.width-os.width)||0,top:(self.position.top-op.top)||0,left:(self.position.left-op.left)||0},_alsoResize=function(exp,c){$(exp).each(function(){var el=$(this),start=$(this).data(\"resizable-alsoresize\"),style={},css=c&&c.length?c:el.parents(ui.originalElement[0]).length?['width','height']:['width','height','top','left'];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);if(sum&&sum>=0)\nstyle[prop]=sum||null;});el.css(style);});};if(typeof(o.alsoResize)=='object'&&!o.alsoResize.nodeType){$.each(o.alsoResize,function(exp,c){_alsoResize(exp,c);});}else{_alsoResize(o.alsoResize);}},stop:function(event,ui){$(this).removeData(\"resizable-alsoresize\");}});$.ui.plugin.add(\"resizable\",\"animate\",{stop:function(event,ui){var self=$(this).data(\"resizable\"),o=self.options;var pr=self._proportionallyResizeElements,ista=pr.length&&(/textarea/i).test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],'left')?0:self.sizeDiff.height,soffsetw=ista?0:self.sizeDiff.width;var style={width:(self.size.width-soffsetw),height:(self.size.height-soffseth)},left=(parseInt(self.element.css('left'),10)+(self.position.left-self.originalPosition.left))||null,top=(parseInt(self.element.css('top'),10)+(self.position.top-self.originalPosition.top))||null;self.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseInt(self.element.css('width'),10),height:parseInt(self.element.css('height'),10),top:parseInt(self.element.css('top'),10),left:parseInt(self.element.css('left'),10)};if(pr&&pr.length)$(pr[0]).css({width:data.width,height:data.height});self._updateCache(data);self._propagate(\"resize\",event);}});}});$.ui.plugin.add(\"resizable\",\"containment\",{start:function(event,ui){var self=$(this).data(\"resizable\"),o=self.options,el=self.element;var oc=o.containment,ce=(oc instanceof $)?oc.get(0):(/parent/.test(oc))?el.parent().get(0):oc;if(!ce)return;self.containerElement=$(ce);if(/document/.test(oc)||oc==document){self.containerOffset={left:0,top:0};self.containerPosition={left:0,top:0};self.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight};}\nelse{var element=$(ce),p=[];$([\"Top\",\"Right\",\"Left\",\"Bottom\"]).each(function(i,name){p[i]=num(element.css(\"padding\"+name));});self.containerOffset=element.offset();self.containerPosition=element.position();self.containerSize={height:(element.innerHeight()-p[3]),width:(element.innerWidth()-p[1])};var co=self.containerOffset,ch=self.containerSize.height,cw=self.containerSize.width,width=($.ui.hasScroll(ce,\"left\")?ce.scrollWidth:cw),height=($.ui.hasScroll(ce)?ce.scrollHeight:ch);self.parentData={element:ce,left:co.left,top:co.top,width:width,height:height};}},resize:function(event,ui){var self=$(this).data(\"resizable\"),o=self.options,ps=self.containerSize,co=self.containerOffset,cs=self.size,cp=self.position,pRatio=self._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=self.containerElement;if(ce[0]!=document&&(/static/).test(ce.css('position')))cop=co;if(cp.left<(self._helper?co.left:0)){self.size.width=self.size.width+(self._helper?(self.position.left-co.left):(self.position.left-cop.left));if(pRatio)self.size.height=self.size.width/o.aspectRatio;self.position.left=o.helper?co.left:0;}\nif(cp.top<(self._helper?co.top:0)){self.size.height=self.size.height+(self._helper?(self.position.top-co.top):self.position.top);if(pRatio)self.size.width=self.size.height*o.aspectRatio;self.position.top=self._helper?co.top:0;}\nself.offset.left=self.parentData.left+self.position.left;self.offset.top=self.parentData.top+self.position.top;var woset=Math.abs((self._helper?self.offset.left-cop.left:(self.offset.left-cop.left))+self.sizeDiff.width),hoset=Math.abs((self._helper?self.offset.top-cop.top:(self.offset.top-co.top))+self.sizeDiff.height);var isParent=self.containerElement.get(0)==self.element.parent().get(0),isOffsetRelative=/relative|absolute/.test(self.containerElement.css('position'));if(isParent&&isOffsetRelative)woset-=self.parentData.left;if(woset+self.size.width>=self.parentData.width){self.size.width=self.parentData.width-woset;if(pRatio)self.size.height=self.size.width/self.aspectRatio;}\nif(hoset+self.size.height>=self.parentData.height){self.size.height=self.parentData.height-hoset;if(pRatio)self.size.width=self.size.height*self.aspectRatio;}},stop:function(event,ui){var self=$(this).data(\"resizable\"),o=self.options,cp=self.position,co=self.containerOffset,cop=self.containerPosition,ce=self.containerElement;var helper=$(self.helper),ho=helper.offset(),w=helper.outerWidth()-self.sizeDiff.width,h=helper.outerHeight()-self.sizeDiff.height;if(self._helper&&!o.animate&&(/relative/).test(ce.css('position')))\n$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});if(self._helper&&!o.animate&&(/static/).test(ce.css('position')))\n$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}});$.ui.plugin.add(\"resizable\",\"ghost\",{start:function(event,ui){var self=$(this).data(\"resizable\"),o=self.options,cs=self.size;self.ghost=self.originalElement.clone();self.ghost.css({opacity:.25,display:'block',position:'relative',height:cs.height,width:cs.width,margin:0,left:0,top:0}).addClass('ui-resizable-ghost').addClass(typeof o.ghost=='string'?o.ghost:'');self.ghost.appendTo(self.helper);},resize:function(event,ui){var self=$(this).data(\"resizable\"),o=self.options;if(self.ghost)self.ghost.css({position:'relative',height:self.size.height,width:self.size.width});},stop:function(event,ui){var self=$(this).data(\"resizable\"),o=self.options;if(self.ghost&&self.helper)self.helper.get(0).removeChild(self.ghost.get(0));}});$.ui.plugin.add(\"resizable\",\"grid\",{resize:function(event,ui){var self=$(this).data(\"resizable\"),o=self.options,cs=self.size,os=self.originalSize,op=self.originalPosition,a=self.axis,ratio=o._aspectRatio||event.shiftKey;o.grid=typeof o.grid==\"number\"?[o.grid,o.grid]:o.grid;var ox=Math.round((cs.width-os.width)/(o.grid[0]||1))*(o.grid[0]||1),oy=Math.round((cs.height-os.height)/(o.grid[1]||1))*(o.grid[1]||1);if(/^(se|s|e)$/.test(a)){self.size.width=os.width+ox;self.size.height=os.height+oy;}\nelse if(/^(ne)$/.test(a)){self.size.width=os.width+ox;self.size.height=os.height+oy;self.position.top=op.top-oy;}\nelse if(/^(sw)$/.test(a)){self.size.width=os.width+ox;self.size.height=os.height+oy;self.position.left=op.left-ox;}\nelse{self.size.width=os.width+ox;self.size.height=os.height+oy;self.position.top=op.top-oy;self.position.left=op.left-ox;}}});var num=function(v){return parseInt(v,10)||0;};var isNumber=function(value){return!isNaN(parseInt(value,10));};})(jQuery);(function($,undefined){$.widget(\"ui.selectable\",$.ui.mouse,{options:{appendTo:'body',autoRefresh:true,distance:0,filter:'*',tolerance:'touch'},_create:function(){var self=this;this.element.addClass(\"ui-selectable\");this.dragged=false;var selectees;this.refresh=function(){selectees=$(self.options.filter,self.element[0]);selectees.addClass(\"ui-selectee\");selectees.each(function(){var $this=$(this);var pos=$this.offset();$.data(this,\"selectable-item\",{element:this,$element:$this,left:pos.left,top:pos.top,right:pos.left+$this.outerWidth(),bottom:pos.top+$this.outerHeight(),startselected:false,selected:$this.hasClass('ui-selected'),selecting:$this.hasClass('ui-selecting'),unselecting:$this.hasClass('ui-unselecting')});});};this.refresh();this.selectees=selectees.addClass(\"ui-selectee\");this._mouseInit();this.helper=$(\"<div class='ui-selectable-helper'><\/div>\");},destroy:function(){this.selectees.removeClass(\"ui-selectee\").removeData(\"selectable-item\");this.element.removeClass(\"ui-selectable ui-selectable-disabled\").removeData(\"selectable\").unbind(\".selectable\");this._mouseDestroy();return this;},_mouseStart:function(event){var self=this;this.opos=[event.pageX,event.pageY];if(this.options.disabled)\nreturn;var options=this.options;this.selectees=$(options.filter,this.element[0]);this._trigger(\"start\",event);$(options.appendTo).append(this.helper);this.helper.css({\"left\":event.clientX,\"top\":event.clientY,\"width\":0,\"height\":0});if(options.autoRefresh){this.refresh();}\nthis.selectees.filter('.ui-selected').each(function(){var selectee=$.data(this,\"selectable-item\");selectee.startselected=true;if(!event.metaKey&&!event.ctrlKey){selectee.$element.removeClass('ui-selected');selectee.selected=false;selectee.$element.addClass('ui-unselecting');selectee.unselecting=true;self._trigger(\"unselecting\",event,{unselecting:selectee.element});}});$(event.target).parents().andSelf().each(function(){var selectee=$.data(this,\"selectable-item\");if(selectee){var doSelect=(!event.metaKey&&!event.ctrlKey)||!selectee.$element.hasClass('ui-selected');selectee.$element.removeClass(doSelect?\"ui-unselecting\":\"ui-selected\").addClass(doSelect?\"ui-selecting\":\"ui-unselecting\");selectee.unselecting=!doSelect;selectee.selecting=doSelect;selectee.selected=doSelect;if(doSelect){self._trigger(\"selecting\",event,{selecting:selectee.element});}else{self._trigger(\"unselecting\",event,{unselecting:selectee.element});}\nreturn false;}});},_mouseDrag:function(event){var self=this;this.dragged=true;if(this.options.disabled)\nreturn;var options=this.options;var x1=this.opos[0],y1=this.opos[1],x2=event.pageX,y2=event.pageY;if(x1>x2){var tmp=x2;x2=x1;x1=tmp;}\nif(y1>y2){var tmp=y2;y2=y1;y1=tmp;}\nthis.helper.css({left:x1,top:y1,width:x2-x1,height:y2-y1});this.selectees.each(function(){var selectee=$.data(this,\"selectable-item\");if(!selectee||selectee.element==self.element[0])\nreturn;var hit=false;if(options.tolerance=='touch'){hit=(!(selectee.left>x2||selectee.right<x1||selectee.top>y2||selectee.bottom<y1));}else if(options.tolerance=='fit'){hit=(selectee.left>x1&&selectee.right<x2&&selectee.top>y1&&selectee.bottom<y2);}\nif(hit){if(selectee.selected){selectee.$element.removeClass('ui-selected');selectee.selected=false;}\nif(selectee.unselecting){selectee.$element.removeClass('ui-unselecting');selectee.unselecting=false;}\nif(!selectee.selecting){selectee.$element.addClass('ui-selecting');selectee.selecting=true;self._trigger(\"selecting\",event,{selecting:selectee.element});}}else{if(selectee.selecting){if((event.metaKey||event.ctrlKey)&&selectee.startselected){selectee.$element.removeClass('ui-selecting');selectee.selecting=false;selectee.$element.addClass('ui-selected');selectee.selected=true;}else{selectee.$element.removeClass('ui-selecting');selectee.selecting=false;if(selectee.startselected){selectee.$element.addClass('ui-unselecting');selectee.unselecting=true;}\nself._trigger(\"unselecting\",event,{unselecting:selectee.element});}}\nif(selectee.selected){if(!event.metaKey&&!event.ctrlKey&&!selectee.startselected){selectee.$element.removeClass('ui-selected');selectee.selected=false;selectee.$element.addClass('ui-unselecting');selectee.unselecting=true;self._trigger(\"unselecting\",event,{unselecting:selectee.element});}}}});return false;},_mouseStop:function(event){var self=this;this.dragged=false;var options=this.options;$('.ui-unselecting',this.element[0]).each(function(){var selectee=$.data(this,\"selectable-item\");selectee.$element.removeClass('ui-unselecting');selectee.unselecting=false;selectee.startselected=false;self._trigger(\"unselected\",event,{unselected:selectee.element});});$('.ui-selecting',this.element[0]).each(function(){var selectee=$.data(this,\"selectable-item\");selectee.$element.removeClass('ui-selecting').addClass('ui-selected');selectee.selecting=false;selectee.selected=true;selectee.startselected=true;self._trigger(\"selected\",event,{selected:selectee.element});});this._trigger(\"stop\",event);this.helper.remove();return false;}});$.extend($.ui.selectable,{version:\"1.8.18\"});})(jQuery);(function($,undefined){$.widget(\"ui.sortable\",$.ui.mouse,{widgetEventPrefix:\"sort\",ready:false,options:{appendTo:\"parent\",axis:false,connectWith:false,containment:false,cursor:'auto',cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:\"original\",items:'> *',opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:\"default\",tolerance:\"intersect\",zIndex:1000},_create:function(){var o=this.options;this.containerCache={};this.element.addClass(\"ui-sortable\");this.refresh();this.floating=this.items.length?o.axis==='x'||(/left|right/).test(this.items[0].item.css('float'))||(/inline|table-cell/).test(this.items[0].item.css('display')):false;this.offset=this.element.offset();this._mouseInit();this.ready=true},destroy:function(){$.Widget.prototype.destroy.call(this);this.element.removeClass(\"ui-sortable ui-sortable-disabled\");this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--)\nthis.items[i].item.removeData(this.widgetName+\"-item\");return this;},_setOption:function(key,value){if(key===\"disabled\"){this.options[key]=value;this.widget()\n[value?\"addClass\":\"removeClass\"](\"ui-sortable-disabled\");}else{$.Widget.prototype._setOption.apply(this,arguments);}},_mouseCapture:function(event,overrideHandle){var that=this;if(this.reverting){return false;}\nif(this.options.disabled||this.options.type=='static')return false;this._refreshItems(event);var currentItem=null,self=this,nodes=$(event.target).parents().each(function(){if($.data(this,that.widgetName+'-item')==self){currentItem=$(this);return false;}});if($.data(event.target,that.widgetName+'-item')==self)currentItem=$(event.target);if(!currentItem)return false;if(this.options.handle&&!overrideHandle){var validHandle=false;$(this.options.handle,currentItem).find(\"*\").andSelf().each(function(){if(this==event.target)validHandle=true;});if(!validHandle)return false;}\nthis.currentItem=currentItem;this._removeCurrentsFromItems();return true;},_mouseStart:function(event,overrideHandle,noActivation){var o=this.options,self=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(event);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css(\"position\",\"absolute\");this.cssPosition=this.helper.css(\"position\");$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!=this.currentItem[0]){this.currentItem.hide();}\nthis._createPlaceholder();if(o.containment)\nthis._setContainment();if(o.cursor){if($('body').css(\"cursor\"))this._storedCursor=$('body').css(\"cursor\");$('body').css(\"cursor\",o.cursor);}\nif(o.opacity){if(this.helper.css(\"opacity\"))this._storedOpacity=this.helper.css(\"opacity\");this.helper.css(\"opacity\",o.opacity);}\nif(o.zIndex){if(this.helper.css(\"zIndex\"))this._storedZIndex=this.helper.css(\"zIndex\");this.helper.css(\"zIndex\",o.zIndex);}\nif(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!='HTML')\nthis.overflowOffset=this.scrollParent.offset();this._trigger(\"start\",event,this._uiHash());if(!this._preserveHelperProportions)\nthis._cacheHelperProportions();if(!noActivation){for(var i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger(\"activate\",event,self._uiHash(this));}}\nif($.ui.ddmanager)\n$.ui.ddmanager.current=this;if($.ui.ddmanager&&!o.dropBehaviour)\n$.ui.ddmanager.prepareOffsets(this,event);this.dragging=true;this.helper.addClass(\"ui-sortable-helper\");this._mouseDrag(event);return true;},_mouseDrag:function(event){this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo(\"absolute\");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs;}\nif(this.options.scroll){var o=this.options,scrolled=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!='HTML'){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-event.pageY<o.scrollSensitivity)\nthis.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed;else if(event.pageY-this.overflowOffset.top<o.scrollSensitivity)\nthis.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed;if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-event.pageX<o.scrollSensitivity)\nthis.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed;else if(event.pageX-this.overflowOffset.left<o.scrollSensitivity)\nthis.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed;}else{if(event.pageY-$(document).scrollTop()<o.scrollSensitivity)\nscrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity)\nscrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity)\nscrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity)\nscrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed);}\nif(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour)\n$.ui.ddmanager.prepareOffsets(this,event);}\nthis.positionAbs=this._convertPositionTo(\"absolute\");if(!this.options.axis||this.options.axis!=\"y\")this.helper[0].style.left=this.position.left+'px';if(!this.options.axis||this.options.axis!=\"x\")this.helper[0].style.top=this.position.top+'px';for(var i=this.items.length-1;i>=0;i--){var item=this.items[i],itemElement=item.item[0],intersection=this._intersectsWithPointer(item);if(!intersection)continue;if(itemElement!=this.currentItem[0]&&this.placeholder[intersection==1?\"next\":\"prev\"]()[0]!=itemElement&&!$.ui.contains(this.placeholder[0],itemElement)&&(this.options.type=='semi-dynamic'?!$.ui.contains(this.element[0],itemElement):true)){this.direction=intersection==1?\"down\":\"up\";if(this.options.tolerance==\"pointer\"||this._intersectsWithSides(item)){this._rearrange(event,item);}else{break;}\nthis._trigger(\"change\",event,this._uiHash());break;}}\nthis._contactContainers(event);if($.ui.ddmanager)$.ui.ddmanager.drag(this,event);this._trigger('sort',event,this._uiHash());this.lastPositionAbs=this.positionAbs;return false;},_mouseStop:function(event,noPropagation){if(!event)return;if($.ui.ddmanager&&!this.options.dropBehaviour)\n$.ui.ddmanager.drop(this,event);if(this.options.revert){var self=this;var cur=self.placeholder.offset();self.reverting=true;$(this.helper).animate({left:cur.left-this.offset.parent.left-self.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:cur.top-this.offset.parent.top-self.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){self._clear(event);});}else{this._clear(event,noPropagation);}\nreturn false;},cancel:function(){var self=this;if(this.dragging){this._mouseUp({target:null});if(this.options.helper==\"original\")\nthis.currentItem.css(this._storedCSS).removeClass(\"ui-sortable-helper\");else\nthis.currentItem.show();for(var i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger(\"deactivate\",null,self._uiHash(this));if(this.containers[i].containerCache.over){this.containers[i]._trigger(\"out\",null,self._uiHash(this));this.containers[i].containerCache.over=0;}}}\nif(this.placeholder){if(this.placeholder[0].parentNode)this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.options.helper!=\"original\"&&this.helper&&this.helper[0].parentNode)this.helper.remove();$.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){$(this.domPosition.prev).after(this.currentItem);}else{$(this.domPosition.parent).prepend(this.currentItem);}}\nreturn this;},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected);var str=[];o=o||{};$(items).each(function(){var res=($(o.item||this).attr(o.attribute||'id')||'').match(o.expression||(/(.+)[-=_](.+)/));if(res)str.push((o.key||res[1]+'[]')+'='+(o.key&&o.expression?res[1]:res[2]));});if(!str.length&&o.key){str.push(o.key+'=');}\nreturn str.join('&');},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected);var ret=[];o=o||{};items.each(function(){ret.push($(o.item||this).attr(o.attribute||'id')||'');});return ret;},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height;var l=item.left,r=l+item.width,t=item.top,b=t+item.height;var dyClick=this.offset.click.top,dxClick=this.offset.click.left;var isOverElement=(y1+dyClick)>t&&(y1+dyClick)<b&&(x1+dxClick)>l&&(x1+dxClick)<r;if(this.options.tolerance==\"pointer\"||this.options.forcePointerForContainers||(this.options.tolerance!=\"pointer\"&&this.helperProportions[this.floating?'width':'height']>item[this.floating?'width':'height'])){return isOverElement;}else{return(l<x1+(this.helperProportions.width/2)&&x2-(this.helperProportions.width/2)<r&&t<y1+(this.helperProportions.height/2)&&y2-(this.helperProportions.height/2)<b);}},_intersectsWithPointer:function(item){var isOverElementHeight=$.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth=$.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth,verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(!isOverElement)\nreturn false;return this.floating?(((horizontalDirection&&horizontalDirection==\"right\")||verticalDirection==\"down\")?2:1):(verticalDirection&&(verticalDirection==\"down\"?2:1));},_intersectsWithSides:function(item){var isOverBottomHalf=$.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+(item.height/2),item.height),isOverRightHalf=$.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+(item.width/2),item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(this.floating&&horizontalDirection){return((horizontalDirection==\"right\"&&isOverRightHalf)||(horizontalDirection==\"left\"&&!isOverRightHalf));}else{return verticalDirection&&((verticalDirection==\"down\"&&isOverBottomHalf)||(verticalDirection==\"up\"&&!isOverBottomHalf));}},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return delta!=0&&(delta>0?\"down\":\"up\");},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return delta!=0&&(delta>0?\"right\":\"left\");},refresh:function(event){this._refreshItems(event);this.refreshPositions();return this;},_connectWith:function(){var options=this.options;return options.connectWith.constructor==String?[options.connectWith]:options.connectWith;},_getItemsAsjQuery:function(connected){var self=this;var items=[];var queries=[];var connectWith=this._connectWith();if(connectWith&&connected){for(var i=connectWith.length-1;i>=0;i--){var cur=$(connectWith[i]);for(var j=cur.length-1;j>=0;j--){var inst=$.data(cur[j],this.widgetName);if(inst&&inst!=this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(\".ui-sortable-helper\").not('.ui-sortable-placeholder'),inst]);}};};}\nqueries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(\".ui-sortable-helper\").not('.ui-sortable-placeholder'),this]);for(var i=queries.length-1;i>=0;i--){queries[i][0].each(function(){items.push(this);});};return $(items);},_removeCurrentsFromItems:function(){var list=this.currentItem.find(\":data(\"+this.widgetName+\"-item)\");for(var i=0;i<this.items.length;i++){for(var j=0;j<list.length;j++){if(list[j]==this.items[i].item[0])\nthis.items.splice(i,1);};};},_refreshItems:function(event){this.items=[];this.containers=[this];var items=this.items;var self=this;var queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]];var connectWith=this._connectWith();if(connectWith&&this.ready){for(var i=connectWith.length-1;i>=0;i--){var cur=$(connectWith[i]);for(var j=cur.length-1;j>=0;j--){var inst=$.data(cur[j],this.widgetName);if(inst&&inst!=this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]);this.containers.push(inst);}};};}\nfor(var i=queries.length-1;i>=0;i--){var targetData=queries[i][1];var _queries=queries[i][0];for(var j=0,queriesLength=_queries.length;j<queriesLength;j++){var item=$(_queries[j]);item.data(this.widgetName+'-item',targetData);items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0});};};},refreshPositions:function(fast){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset();}\nfor(var i=this.items.length-1;i>=0;i--){var item=this.items[i];if(item.instance!=this.currentContainer&&this.currentContainer&&item.item[0]!=this.currentItem[0])\ncontinue;var t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item;if(!fast){item.width=t.outerWidth();item.height=t.outerHeight();}\nvar p=t.offset();item.left=p.left;item.top=p.top;};if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this);}else{for(var i=this.containers.length-1;i>=0;i--){var p=this.containers[i].element.offset();this.containers[i].containerCache.left=p.left;this.containers[i].containerCache.top=p.top;this.containers[i].containerCache.width=this.containers[i].element.outerWidth();this.containers[i].containerCache.height=this.containers[i].element.outerHeight();};}\nreturn this;},_createPlaceholder:function(that){var self=that||this,o=self.options;if(!o.placeholder||o.placeholder.constructor==String){var className=o.placeholder;o.placeholder={element:function(){var el=$(document.createElement(self.currentItem[0].nodeName)).addClass(className||self.currentItem[0].className+\" ui-sortable-placeholder\").removeClass(\"ui-sortable-helper\")[0];if(!className)\nel.style.visibility=\"hidden\";return el;},update:function(container,p){if(className&&!o.forcePlaceholderSize)return;if(!p.height()){p.height(self.currentItem.innerHeight()-parseInt(self.currentItem.css('paddingTop')||0,10)-parseInt(self.currentItem.css('paddingBottom')||0,10));};if(!p.width()){p.width(self.currentItem.innerWidth()-parseInt(self.currentItem.css('paddingLeft')||0,10)-parseInt(self.currentItem.css('paddingRight')||0,10));};}};}\nself.placeholder=$(o.placeholder.element.call(self.element,self.currentItem));self.currentItem.after(self.placeholder);o.placeholder.update(self,self.placeholder);},_contactContainers:function(event){var innermostContainer=null,innermostIndex=null;for(var i=this.containers.length-1;i>=0;i--){if($.ui.contains(this.currentItem[0],this.containers[i].element[0]))\ncontinue;if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.ui.contains(this.containers[i].element[0],innermostContainer.element[0]))\ncontinue;innermostContainer=this.containers[i];innermostIndex=i;}else{if(this.containers[i].containerCache.over){this.containers[i]._trigger(\"out\",event,this._uiHash(this));this.containers[i].containerCache.over=0;}}}\nif(!innermostContainer)return;if(this.containers.length===1){this.containers[innermostIndex]._trigger(\"over\",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1;}else if(this.currentContainer!=this.containers[innermostIndex]){var dist=10000;var itemWithLeastDistance=null;var base=this.positionAbs[this.containers[innermostIndex].floating?'left':'top'];for(var j=this.items.length-1;j>=0;j--){if(!$.ui.contains(this.containers[innermostIndex].element[0],this.items[j].item[0]))continue;var cur=this.items[j][this.containers[innermostIndex].floating?'left':'top'];if(Math.abs(cur-base)<dist){dist=Math.abs(cur-base);itemWithLeastDistance=this.items[j];}}\nif(!itemWithLeastDistance&&!this.options.dropOnEmpty)\nreturn;this.currentContainer=this.containers[innermostIndex];itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,true):this._rearrange(event,null,this.containers[innermostIndex].element,true);this._trigger(\"change\",event,this._uiHash());this.containers[innermostIndex]._trigger(\"change\",event,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[innermostIndex]._trigger(\"over\",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1;}},_createHelper:function(event){var o=this.options;var helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):(o.helper=='clone'?this.currentItem.clone():this.currentItem);if(!helper.parents('body').length)\n$(o.appendTo!='parent'?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]);if(helper[0]==this.currentItem[0])\nthis._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css(\"position\"),top:this.currentItem.css(\"top\"),left:this.currentItem.css(\"left\")};if(helper[0].style.width==''||o.forceHelperSize)helper.width(this.currentItem.width());if(helper[0].style.height==''||o.forceHelperSize)helper.height(this.currentItem.height());return helper;},_adjustOffsetFromHelper:function(obj){if(typeof obj=='string'){obj=obj.split(' ');}\nif($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}\nif('left'in obj){this.offset.click.left=obj.left+this.margins.left;}\nif('right'in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}\nif('top'in obj){this.offset.click.top=obj.top+this.margins.top;}\nif('bottom'in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition=='absolute'&&this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}\nif((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=='html'&&$.browser.msie))\npo={top:0,left:0};return{top:po.top+(parseInt(this.offsetParent.css(\"borderTopWidth\"),10)||0),left:po.left+(parseInt(this.offsetParent.css(\"borderLeftWidth\"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition==\"relative\"){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css(\"top\"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css(\"left\"),10)||0)+this.scrollParent.scrollLeft()};}else{return{top:0,left:0};}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css(\"marginLeft\"),10)||0),top:(parseInt(this.currentItem.css(\"marginTop\"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var o=this.options;if(o.containment=='parent')o.containment=this.helper[0].parentNode;if(o.containment=='document'||o.containment=='window')this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,$(o.containment=='document'?document:window).width()-this.helperProportions.width-this.margins.left,($(o.containment=='document'?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!(/^(document|window|parent)$/).test(o.containment)){var ce=$(o.containment)[0];var co=$(o.containment).offset();var over=($(ce).css(\"overflow\")!='hidden');this.containment=[co.left+(parseInt($(ce).css(\"borderLeftWidth\"),10)||0)+(parseInt($(ce).css(\"paddingLeft\"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css(\"borderTopWidth\"),10)||0)+(parseInt($(ce).css(\"paddingTop\"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css(\"borderLeftWidth\"),10)||0)-(parseInt($(ce).css(\"paddingRight\"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css(\"borderTopWidth\"),10)||0)-(parseInt($(ce).css(\"paddingBottom\"),10)||0)-this.helperProportions.height-this.margins.top];}},_convertPositionTo:function(d,pos){if(!pos)pos=this.position;var mod=d==\"absolute\"?1:-1;var o=this.options,scroll=this.cssPosition=='absolute'&&!(this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);return{top:(pos.top\n+this.offset.relative.top*mod\n+this.offset.parent.top*mod\n-($.browser.safari&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop()))*mod)),left:(pos.left\n+this.offset.relative.left*mod\n+this.offset.parent.left*mod\n-($.browser.safari&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod))};},_generatePosition:function(event){var o=this.options,scroll=this.cssPosition=='absolute'&&!(this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);if(this.cssPosition=='relative'&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])){this.offset.relative=this._getRelativeOffset();}\nvar pageX=event.pageX;var pageY=event.pageY;if(this.originalPosition){if(this.containment){if(event.pageX-this.offset.click.left<this.containment[0])pageX=this.containment[0]+this.offset.click.left;if(event.pageY-this.offset.click.top<this.containment[1])pageY=this.containment[1]+this.offset.click.top;if(event.pageX-this.offset.click.left>this.containment[2])pageX=this.containment[2]+this.offset.click.left;if(event.pageY-this.offset.click.top>this.containment[3])pageY=this.containment[3]+this.offset.click.top;}\nif(o.grid){var top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1];pageY=this.containment?(!(top-this.offset.click.top<this.containment[1]||top-this.offset.click.top>this.containment[3])?top:(!(top-this.offset.click.top<this.containment[1])?top-o.grid[1]:top+o.grid[1])):top;var left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0];pageX=this.containment?(!(left-this.offset.click.left<this.containment[0]||left-this.offset.click.left>this.containment[2])?left:(!(left-this.offset.click.left<this.containment[0])?left-o.grid[0]:left+o.grid[0])):left;}}\nreturn{top:(pageY\n-this.offset.click.top\n-this.offset.relative.top\n-this.offset.parent.top\n+($.browser.safari&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop())))),left:(pageX\n-this.offset.click.left\n-this.offset.relative.left\n-this.offset.parent.left\n+($.browser.safari&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())))};},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction=='down'?i.item[0]:i.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var self=this,counter=this.counter;window.setTimeout(function(){if(counter==self.counter)self.refreshPositions(!hardRefresh);},0);},_clear:function(event,noPropagation){this.reverting=false;var delayedTriggers=[],self=this;if(!this._noFinalSort&&this.currentItem.parent().length)this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS){if(this._storedCSS[i]=='auto'||this._storedCSS[i]=='static')this._storedCSS[i]='';}\nthis.currentItem.css(this._storedCSS).removeClass(\"ui-sortable-helper\");}else{this.currentItem.show();}\nif(this.fromOutside&&!noPropagation)delayedTriggers.push(function(event){this._trigger(\"receive\",event,this._uiHash(this.fromOutside));});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(\".ui-sortable-helper\")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!noPropagation)delayedTriggers.push(function(event){this._trigger(\"update\",event,this._uiHash());});if(!$.ui.contains(this.element[0],this.currentItem[0])){if(!noPropagation)delayedTriggers.push(function(event){this._trigger(\"remove\",event,this._uiHash());});for(var i=this.containers.length-1;i>=0;i--){if($.ui.contains(this.containers[i].element[0],this.currentItem[0])&&!noPropagation){delayedTriggers.push((function(c){return function(event){c._trigger(\"receive\",event,this._uiHash(this));};}).call(this,this.containers[i]));delayedTriggers.push((function(c){return function(event){c._trigger(\"update\",event,this._uiHash(this));};}).call(this,this.containers[i]));}};};for(var i=this.containers.length-1;i>=0;i--){if(!noPropagation)delayedTriggers.push((function(c){return function(event){c._trigger(\"deactivate\",event,this._uiHash(this));};}).call(this,this.containers[i]));if(this.containers[i].containerCache.over){delayedTriggers.push((function(c){return function(event){c._trigger(\"out\",event,this._uiHash(this));};}).call(this,this.containers[i]));this.containers[i].containerCache.over=0;}}\nif(this._storedCursor)$('body').css(\"cursor\",this._storedCursor);if(this._storedOpacity)this.helper.css(\"opacity\",this._storedOpacity);if(this._storedZIndex)this.helper.css(\"zIndex\",this._storedZIndex=='auto'?'':this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!noPropagation){this._trigger(\"beforeStop\",event,this._uiHash());for(var i=0;i<delayedTriggers.length;i++){delayedTriggers[i].call(this,event);};this._trigger(\"stop\",event,this._uiHash());}\nreturn false;}\nif(!noPropagation)this._trigger(\"beforeStop\",event,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.helper[0]!=this.currentItem[0])this.helper.remove();this.helper=null;if(!noPropagation){for(var i=0;i<delayedTriggers.length;i++){delayedTriggers[i].call(this,event);};this._trigger(\"stop\",event,this._uiHash());}\nthis.fromOutside=false;return true;},_trigger:function(){if($.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel();}},_uiHash:function(inst){var self=inst||this;return{helper:self.helper,placeholder:self.placeholder||$([]),position:self.position,originalPosition:self.originalPosition,offset:self.positionAbs,item:self.currentItem,sender:inst?inst.element:null};}});$.extend($.ui.sortable,{version:\"1.8.18\"});})(jQuery);(function($,undefined){$.widget(\"ui.accordion\",{options:{active:0,animated:\"slide\",autoHeight:true,clearStyle:false,collapsible:false,event:\"click\",fillSpace:false,header:\"> li > :first-child,> :not(li):even\",icons:{header:\"ui-icon-triangle-1-e\",headerSelected:\"ui-icon-triangle-1-s\"},navigation:false,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase();}},_create:function(){var self=this,options=self.options;self.running=0;self.element.addClass(\"ui-accordion ui-widget ui-helper-reset\").children(\"li\").addClass(\"ui-accordion-li-fix\");self.headers=self.element.find(options.header).addClass(\"ui-accordion-header ui-helper-reset ui-state-default ui-corner-all\").bind(\"mouseenter.accordion\",function(){if(options.disabled){return;}\n$(this).addClass(\"ui-state-hover\");}).bind(\"mouseleave.accordion\",function(){if(options.disabled){return;}\n$(this).removeClass(\"ui-state-hover\");}).bind(\"focus.accordion\",function(){if(options.disabled){return;}\n$(this).addClass(\"ui-state-focus\");}).bind(\"blur.accordion\",function(){if(options.disabled){return;}\n$(this).removeClass(\"ui-state-focus\");});self.headers.next().addClass(\"ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom\");if(options.navigation){var current=self.element.find(\"a\").filter(options.navigationFilter).eq(0);if(current.length){var header=current.closest(\".ui-accordion-header\");if(header.length){self.active=header;}else{self.active=current.closest(\".ui-accordion-content\").prev();}}}\nself.active=self._findActive(self.active||options.active).addClass(\"ui-state-default ui-state-active\").toggleClass(\"ui-corner-all\").toggleClass(\"ui-corner-top\");self.active.next().addClass(\"ui-accordion-content-active\");self._createIcons();self.resize();self.element.attr(\"role\",\"tablist\");self.headers.attr(\"role\",\"tab\").bind(\"keydown.accordion\",function(event){return self._keydown(event);}).next().attr(\"role\",\"tabpanel\");self.headers.not(self.active||\"\").attr({\"aria-expanded\":\"false\",\"aria-selected\":\"false\",tabIndex:-1}).next().hide();if(!self.active.length){self.headers.eq(0).attr(\"tabIndex\",0);}else{self.active.attr({\"aria-expanded\":\"true\",\"aria-selected\":\"true\",tabIndex:0});}\nif(!$.browser.safari){self.headers.find(\"a\").attr(\"tabIndex\",-1);}\nif(options.event){self.headers.bind(options.event.split(\" \").join(\".accordion \")+\".accordion\",function(event){self._clickHandler.call(self,event,this);event.preventDefault();});}},_createIcons:function(){var options=this.options;if(options.icons){$(\"<span><\/span>\").addClass(\"ui-icon \"+options.icons.header).prependTo(this.headers);this.active.children(\".ui-icon\").toggleClass(options.icons.header).toggleClass(options.icons.headerSelected);this.element.addClass(\"ui-accordion-icons\");}},_destroyIcons:function(){this.headers.children(\".ui-icon\").remove();this.element.removeClass(\"ui-accordion-icons\");},destroy:function(){var options=this.options;this.element.removeClass(\"ui-accordion ui-widget ui-helper-reset\").removeAttr(\"role\");this.headers.unbind(\".accordion\").removeClass(\"ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top\").removeAttr(\"role\").removeAttr(\"aria-expanded\").removeAttr(\"aria-selected\").removeAttr(\"tabIndex\");this.headers.find(\"a\").removeAttr(\"tabIndex\");this._destroyIcons();var contents=this.headers.next().css(\"display\",\"\").removeAttr(\"role\").removeClass(\"ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled\");if(options.autoHeight||options.fillHeight){contents.css(\"height\",\"\");}\nreturn $.Widget.prototype.destroy.call(this);},_setOption:function(key,value){$.Widget.prototype._setOption.apply(this,arguments);if(key==\"active\"){this.activate(value);}\nif(key==\"icons\"){this._destroyIcons();if(value){this._createIcons();}}\nif(key==\"disabled\"){this.headers.add(this.headers.next())\n[value?\"addClass\":\"removeClass\"](\"ui-accordion-disabled ui-state-disabled\");}},_keydown:function(event){if(this.options.disabled||event.altKey||event.ctrlKey){return;}\nvar keyCode=$.ui.keyCode,length=this.headers.length,currentIndex=this.headers.index(event.target),toFocus=false;switch(event.keyCode){case keyCode.RIGHT:case keyCode.DOWN:toFocus=this.headers[(currentIndex+1)%length];break;case keyCode.LEFT:case keyCode.UP:toFocus=this.headers[(currentIndex-1+length)%length];break;case keyCode.SPACE:case keyCode.ENTER:this._clickHandler({target:event.target},event.target);event.preventDefault();}\nif(toFocus){$(event.target).attr(\"tabIndex\",-1);$(toFocus).attr(\"tabIndex\",0);toFocus.focus();return false;}\nreturn true;},resize:function(){var options=this.options,maxHeight;if(options.fillSpace){if($.browser.msie){var defOverflow=this.element.parent().css(\"overflow\");this.element.parent().css(\"overflow\",\"hidden\");}\nmaxHeight=this.element.parent().height();if($.browser.msie){this.element.parent().css(\"overflow\",defOverflow);}\nthis.headers.each(function(){maxHeight-=$(this).outerHeight(true);});this.headers.next().each(function(){$(this).height(Math.max(0,maxHeight-\n$(this).innerHeight()+$(this).height()));}).css(\"overflow\",\"auto\");}else if(options.autoHeight){maxHeight=0;this.headers.next().each(function(){maxHeight=Math.max(maxHeight,$(this).height(\"\").height());}).height(maxHeight);}\nreturn this;},activate:function(index){this.options.active=index;var active=this._findActive(index)[0];this._clickHandler({target:active},active);return this;},_findActive:function(selector){return selector?typeof selector===\"number\"?this.headers.filter(\":eq(\"+selector+\")\"):this.headers.not(this.headers.not(selector)):selector===false?$([]):this.headers.filter(\":eq(0)\");},_clickHandler:function(event,target){var options=this.options;if(options.disabled){return;}\nif(!event.target){if(!options.collapsible){return;}\nthis.active.removeClass(\"ui-state-active ui-corner-top\").addClass(\"ui-state-default ui-corner-all\").children(\".ui-icon\").removeClass(options.icons.headerSelected).addClass(options.icons.header);this.active.next().addClass(\"ui-accordion-content-active\");var toHide=this.active.next(),data={options:options,newHeader:$([]),oldHeader:options.active,newContent:$([]),oldContent:toHide},toShow=(this.active=$([]));this._toggle(toShow,toHide,data);return;}\nvar clicked=$(event.currentTarget||target),clickedIsActive=clicked[0]===this.active[0];options.active=options.collapsible&&clickedIsActive?false:this.headers.index(clicked);if(this.running||(!options.collapsible&&clickedIsActive)){return;}\nvar active=this.active,toShow=clicked.next(),toHide=this.active.next(),data={options:options,newHeader:clickedIsActive&&options.collapsible?$([]):clicked,oldHeader:this.active,newContent:clickedIsActive&&options.collapsible?$([]):toShow,oldContent:toHide},down=this.headers.index(this.active[0])>this.headers.index(clicked[0]);this.active=clickedIsActive?$([]):clicked;this._toggle(toShow,toHide,data,clickedIsActive,down);active.removeClass(\"ui-state-active ui-corner-top\").addClass(\"ui-state-default ui-corner-all\").children(\".ui-icon\").removeClass(options.icons.headerSelected).addClass(options.icons.header);if(!clickedIsActive){clicked.removeClass(\"ui-state-default ui-corner-all\").addClass(\"ui-state-active ui-corner-top\").children(\".ui-icon\").removeClass(options.icons.header).addClass(options.icons.headerSelected);clicked.next().addClass(\"ui-accordion-content-active\");}\nreturn;},_toggle:function(toShow,toHide,data,clickedIsActive,down){var self=this,options=self.options;self.toShow=toShow;self.toHide=toHide;self.data=data;var complete=function(){if(!self){return;}\nreturn self._completed.apply(self,arguments);};self._trigger(\"changestart\",null,self.data);self.running=toHide.size()===0?toShow.size():toHide.size();if(options.animated){var animOptions={};if(options.collapsible&&clickedIsActive){animOptions={toShow:$([]),toHide:toHide,complete:complete,down:down,autoHeight:options.autoHeight||options.fillSpace};}else{animOptions={toShow:toShow,toHide:toHide,complete:complete,down:down,autoHeight:options.autoHeight||options.fillSpace};}\nif(!options.proxied){options.proxied=options.animated;}\nif(!options.proxiedDuration){options.proxiedDuration=options.duration;}\noptions.animated=$.isFunction(options.proxied)?options.proxied(animOptions):options.proxied;options.duration=$.isFunction(options.proxiedDuration)?options.proxiedDuration(animOptions):options.proxiedDuration;var animations=$.ui.accordion.animations,duration=options.duration,easing=options.animated;if(easing&&!animations[easing]&&!$.easing[easing]){easing=\"slide\";}\nif(!animations[easing]){animations[easing]=function(options){this.slide(options,{easing:easing,duration:duration||700});};}\nanimations[easing](animOptions);}else{if(options.collapsible&&clickedIsActive){toShow.toggle();}else{toHide.hide();toShow.show();}\ncomplete(true);}\ntoHide.prev().attr({\"aria-expanded\":\"false\",\"aria-selected\":\"false\",tabIndex:-1}).blur();toShow.prev().attr({\"aria-expanded\":\"true\",\"aria-selected\":\"true\",tabIndex:0}).focus();},_completed:function(cancel){this.running=cancel?0:--this.running;if(this.running){return;}\nif(this.options.clearStyle){this.toShow.add(this.toHide).css({height:\"\",overflow:\"\"});}\nthis.toHide.removeClass(\"ui-accordion-content-active\");if(this.toHide.length){this.toHide.parent()[0].className=this.toHide.parent()[0].className;}\nthis._trigger(\"change\",null,this.data);}});$.extend($.ui.accordion,{version:\"1.8.18\",animations:{slide:function(options,additions){options=$.extend({easing:\"swing\",duration:300},options,additions);if(!options.toHide.size()){options.toShow.animate({height:\"show\",paddingTop:\"show\",paddingBottom:\"show\"},options);return;}\nif(!options.toShow.size()){options.toHide.animate({height:\"hide\",paddingTop:\"hide\",paddingBottom:\"hide\"},options);return;}\nvar overflow=options.toShow.css(\"overflow\"),percentDone=0,showProps={},hideProps={},fxAttrs=[\"height\",\"paddingTop\",\"paddingBottom\"],originalWidth;var s=options.toShow;originalWidth=s[0].style.width;s.width(s.parent().width()\n-parseFloat(s.css(\"paddingLeft\"))\n-parseFloat(s.css(\"paddingRight\"))\n-(parseFloat(s.css(\"borderLeftWidth\"))||0)\n-(parseFloat(s.css(\"borderRightWidth\"))||0));$.each(fxAttrs,function(i,prop){hideProps[prop]=\"hide\";var parts=(\"\"+$.css(options.toShow[0],prop)).match(/^([\\d+-.]+)(.*)$/);showProps[prop]={value:parts[1],unit:parts[2]||\"px\"};});options.toShow.css({height:0,overflow:\"hidden\"}).show();options.toHide.filter(\":hidden\").each(options.complete).end().filter(\":visible\").animate(hideProps,{step:function(now,settings){if(settings.prop==\"height\"){percentDone=(settings.end-settings.start===0)?0:(settings.now-settings.start)/(settings.end-settings.start);}\noptions.toShow[0].style[settings.prop]=(percentDone*showProps[settings.prop].value)\n+showProps[settings.prop].unit;},duration:options.duration,easing:options.easing,complete:function(){if(!options.autoHeight){options.toShow.css(\"height\",\"\");}\noptions.toShow.css({width:originalWidth,overflow:overflow});options.complete();}});},bounceslide:function(options){this.slide(options,{easing:options.down?\"easeOutBounce\":\"swing\",duration:options.down?1000:200});}}});})(jQuery);(function($,undefined){var requestIndex=0;$.widget(\"ui.autocomplete\",{options:{appendTo:\"body\",autoFocus:false,delay:300,minLength:1,position:{my:\"left top\",at:\"left bottom\",collision:\"none\"},source:null},pending:0,_create:function(){var self=this,doc=this.element[0].ownerDocument,suppressKeyPress;this.element.addClass(\"ui-autocomplete-input\").attr(\"autocomplete\",\"off\").attr({role:\"textbox\",\"aria-autocomplete\":\"list\",\"aria-haspopup\":\"true\"}).bind(\"keydown.autocomplete\",function(event){if(self.options.disabled||self.element.propAttr(\"readOnly\")){return;}\nsuppressKeyPress=false;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:self._move(\"previousPage\",event);break;case keyCode.PAGE_DOWN:self._move(\"nextPage\",event);break;case keyCode.UP:self._move(\"previous\",event);event.preventDefault();break;case keyCode.DOWN:self._move(\"next\",event);event.preventDefault();break;case keyCode.ENTER:case keyCode.NUMPAD_ENTER:if(self.menu.active){suppressKeyPress=true;event.preventDefault();}\ncase keyCode.TAB:if(!self.menu.active){return;}\nself.menu.select(event);break;case keyCode.ESCAPE:self.element.val(self.term);self.close(event);break;default:clearTimeout(self.searching);self.searching=setTimeout(function(){if(self.term!=self.element.val()){self.selectedItem=null;self.search(null,event);}},self.options.delay);break;}}).bind(\"keypress.autocomplete\",function(event){if(suppressKeyPress){suppressKeyPress=false;event.preventDefault();}}).bind(\"focus.autocomplete\",function(){if(self.options.disabled){return;}\nself.selectedItem=null;self.previous=self.element.val();}).bind(\"blur.autocomplete\",function(event){if(self.options.disabled){return;}\nclearTimeout(self.searching);self.closing=setTimeout(function(){self.close(event);self._change(event);},150);});this._initSource();this.response=function(){return self._response.apply(self,arguments);};this.menu=$(\"<ul><\/ul>\").addClass(\"ui-autocomplete\").appendTo($(this.options.appendTo||\"body\",doc)[0]).mousedown(function(event){var menuElement=self.menu.element[0];if(!$(event.target).closest(\".ui-menu-item\").length){setTimeout(function(){$(document).one('mousedown',function(event){if(event.target!==self.element[0]&&event.target!==menuElement&&!$.ui.contains(menuElement,event.target)){self.close();}});},1);}\nsetTimeout(function(){clearTimeout(self.closing);},13);}).menu({focus:function(event,ui){var item=ui.item.data(\"item.autocomplete\");if(false!==self._trigger(\"focus\",event,{item:item})){if(/^key/.test(event.originalEvent.type)){self.element.val(item.value);}}},selected:function(event,ui){var item=ui.item.data(\"item.autocomplete\"),previous=self.previous;if(self.element[0]!==doc.activeElement){self.element.focus();self.previous=previous;setTimeout(function(){self.previous=previous;self.selectedItem=item;},1);}\nif(false!==self._trigger(\"select\",event,{item:item})){self.element.val(item.value);}\nself.term=self.element.val();self.close(event);self.selectedItem=item;},blur:function(event,ui){if(self.menu.element.is(\":visible\")&&(self.element.val()!==self.term)){self.element.val(self.term);}}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data(\"menu\");if($.fn.bgiframe){this.menu.element.bgiframe();}\nself.beforeunloadHandler=function(){self.element.removeAttr(\"autocomplete\");};$(window).bind(\"beforeunload\",self.beforeunloadHandler);},destroy:function(){this.element.removeClass(\"ui-autocomplete-input\").removeAttr(\"autocomplete\").removeAttr(\"role\").removeAttr(\"aria-autocomplete\").removeAttr(\"aria-haspopup\");this.menu.element.remove();$(window).unbind(\"beforeunload\",this.beforeunloadHandler);$.Widget.prototype.destroy.call(this);},_setOption:function(key,value){$.Widget.prototype._setOption.apply(this,arguments);if(key===\"source\"){this._initSource();}\nif(key===\"appendTo\"){this.menu.element.appendTo($(value||\"body\",this.element[0].ownerDocument)[0])}\nif(key===\"disabled\"&&value&&this.xhr){this.xhr.abort();}},_initSource:function(){var self=this,array,url;if($.isArray(this.options.source)){array=this.options.source;this.source=function(request,response){response($.ui.autocomplete.filter(array,request.term));};}else if(typeof this.options.source===\"string\"){url=this.options.source;this.source=function(request,response){if(self.xhr){self.xhr.abort();}\nself.xhr=$.ajax({url:url,data:request,dataType:\"json\",context:{autocompleteRequest:++requestIndex},success:function(data,status){if(this.autocompleteRequest===requestIndex){response(data);}},error:function(){if(this.autocompleteRequest===requestIndex){response([]);}}});};}else{this.source=this.options.source;}},search:function(value,event){value=value!=null?value:this.element.val();this.term=this.element.val();if(value.length<this.options.minLength){return this.close(event);}\nclearTimeout(this.closing);if(this._trigger(\"search\",event)===false){return;}\nreturn this._search(value);},_search:function(value){this.pending++;this.element.addClass(\"ui-autocomplete-loading\");this.source({term:value},this.response);},_response:function(content){if(!this.options.disabled&&content&&content.length){content=this._normalize(content);this._suggest(content);this._trigger(\"open\");}else{this.close();}\nthis.pending--;if(!this.pending){this.element.removeClass(\"ui-autocomplete-loading\");}},close:function(event){clearTimeout(this.closing);if(this.menu.element.is(\":visible\")){this.menu.element.hide();this.menu.deactivate();this._trigger(\"close\",event);}},_change:function(event){if(this.previous!==this.element.val()){this._trigger(\"change\",event,{item:this.selectedItem});}},_normalize:function(items){if(items.length&&items[0].label&&items[0].value){return items;}\nreturn $.map(items,function(item){if(typeof item===\"string\"){return{label:item,value:item};}\nreturn $.extend({label:item.label||item.value,value:item.value||item.label},item);});},_suggest:function(items){var ul=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(ul,items);this.menu.deactivate();this.menu.refresh();ul.show();this._resizeMenu();ul.position($.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next(new $.Event(\"mouseover\"));}},_resizeMenu:function(){var ul=this.menu.element;ul.outerWidth(Math.max(ul.width(\"\").outerWidth()+1,this.element.outerWidth()));},_renderMenu:function(ul,items){var self=this;$.each(items,function(index,item){self._renderItem(ul,item);});},_renderItem:function(ul,item){return $(\"<li><\/li>\").data(\"item.autocomplete\",item).append($(\"<a><\/a>\").text(item.label)).appendTo(ul);},_move:function(direction,event){if(!this.menu.element.is(\":visible\")){this.search(null,event);return;}\nif(this.menu.first()&&/^previous/.test(direction)||this.menu.last()&&/^next/.test(direction)){this.element.val(this.term);this.menu.deactivate();return;}\nthis.menu[direction](event);},widget:function(){return this.menu.element;}});$.extend($.ui.autocomplete,{escapeRegex:function(value){return value.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g,\"\\\\$&\");},filter:function(array,term){var matcher=new RegExp($.ui.autocomplete.escapeRegex(term),\"i\");return $.grep(array,function(value){return matcher.test(value.label||value.value||value);});}});}(jQuery));(function($){$.widget(\"ui.menu\",{_create:function(){var self=this;this.element.addClass(\"ui-menu ui-widget ui-widget-content ui-corner-all\").attr({role:\"listbox\",\"aria-activedescendant\":\"ui-active-menuitem\"}).click(function(event){if(!$(event.target).closest(\".ui-menu-item a\").length){return;}\nevent.preventDefault();self.select(event);});this.refresh();},refresh:function(){var self=this;var items=this.element.children(\"li:not(.ui-menu-item):has(a)\").addClass(\"ui-menu-item\").attr(\"role\",\"menuitem\");items.children(\"a\").addClass(\"ui-corner-all\").attr(\"tabindex\",-1).mouseenter(function(event){self.activate(event,$(this).parent());}).mouseleave(function(){self.deactivate();});},activate:function(event,item){this.deactivate();if(this.hasScroll()){var offset=item.offset().top-this.element.offset().top,scroll=this.element.scrollTop(),elementHeight=this.element.height();if(offset<0){this.element.scrollTop(scroll+offset);}else if(offset>=elementHeight){this.element.scrollTop(scroll+offset-elementHeight+item.height());}}\nthis.active=item.eq(0).children(\"a\").addClass(\"ui-state-hover\").attr(\"id\",\"ui-active-menuitem\").end();this._trigger(\"focus\",event,{item:item});},deactivate:function(){if(!this.active){return;}\nthis.active.children(\"a\").removeClass(\"ui-state-hover\").removeAttr(\"id\");this._trigger(\"blur\");this.active=null;},next:function(event){this.move(\"next\",\".ui-menu-item:first\",event);},previous:function(event){this.move(\"prev\",\".ui-menu-item:last\",event);},first:function(){return this.active&&!this.active.prevAll(\".ui-menu-item\").length;},last:function(){return this.active&&!this.active.nextAll(\".ui-menu-item\").length;},move:function(direction,edge,event){if(!this.active){this.activate(event,this.element.children(edge));return;}\nvar next=this.active[direction+\"All\"](\".ui-menu-item\").eq(0);if(next.length){this.activate(event,next);}else{this.activate(event,this.element.children(edge));}},nextPage:function(event){if(this.hasScroll()){if(!this.active||this.last()){this.activate(event,this.element.children(\".ui-menu-item:first\"));return;}\nvar base=this.active.offset().top,height=this.element.height(),result=this.element.children(\".ui-menu-item\").filter(function(){var close=$(this).offset().top-base-height+$(this).height();return close<10&&close>-10;});if(!result.length){result=this.element.children(\".ui-menu-item:last\");}\nthis.activate(event,result);}else{this.activate(event,this.element.children(\".ui-menu-item\").filter(!this.active||this.last()?\":first\":\":last\"));}},previousPage:function(event){if(this.hasScroll()){if(!this.active||this.first()){this.activate(event,this.element.children(\".ui-menu-item:last\"));return;}\nvar base=this.active.offset().top,height=this.element.height();result=this.element.children(\".ui-menu-item\").filter(function(){var close=$(this).offset().top-base+height-$(this).height();return close<10&&close>-10;});if(!result.length){result=this.element.children(\".ui-menu-item:first\");}\nthis.activate(event,result);}else{this.activate(event,this.element.children(\".ui-menu-item\").filter(!this.active||this.first()?\":last\":\":first\"));}},hasScroll:function(){return this.element.height()<this.element[$.fn.prop?\"prop\":\"attr\"](\"scrollHeight\");},select:function(event){this._trigger(\"selected\",event,{item:this.active});}});}(jQuery));(function($,undefined){var lastActive,startXPos,startYPos,clickDragged,baseClasses=\"ui-button ui-widget ui-state-default ui-corner-all\",stateClasses=\"ui-state-hover ui-state-active \",typeClasses=\"ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only\",formResetHandler=function(){var buttons=$(this).find(\":ui-button\");setTimeout(function(){buttons.button(\"refresh\");},1);},radioGroup=function(radio){var name=radio.name,form=radio.form,radios=$([]);if(name){if(form){radios=$(form).find(\"[name='\"+name+\"']\");}else{radios=$(\"[name='\"+name+\"']\",radio.ownerDocument).filter(function(){return!this.form;});}}\nreturn radios;};$.widget(\"ui.button\",{options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest(\"form\").unbind(\"reset.button\").bind(\"reset.button\",formResetHandler);if(typeof this.options.disabled!==\"boolean\"){this.options.disabled=!!this.element.propAttr(\"disabled\");}else{this.element.propAttr(\"disabled\",this.options.disabled);}\nthis._determineButtonType();this.hasTitle=!!this.buttonElement.attr(\"title\");var self=this,options=this.options,toggleButton=this.type===\"checkbox\"||this.type===\"radio\",hoverClass=\"ui-state-hover\"+(!toggleButton?\" ui-state-active\":\"\"),focusClass=\"ui-state-focus\";if(options.label===null){options.label=this.buttonElement.html();}\nthis.buttonElement.addClass(baseClasses).attr(\"role\",\"button\").bind(\"mouseenter.button\",function(){if(options.disabled){return;}\n$(this).addClass(\"ui-state-hover\");if(this===lastActive){$(this).addClass(\"ui-state-active\");}}).bind(\"mouseleave.button\",function(){if(options.disabled){return;}\n$(this).removeClass(hoverClass);}).bind(\"click.button\",function(event){if(options.disabled){event.preventDefault();event.stopImmediatePropagation();}});this.element.bind(\"focus.button\",function(){self.buttonElement.addClass(focusClass);}).bind(\"blur.button\",function(){self.buttonElement.removeClass(focusClass);});if(toggleButton){this.element.bind(\"change.button\",function(){if(clickDragged){return;}\nself.refresh();});this.buttonElement.bind(\"mousedown.button\",function(event){if(options.disabled){return;}\nclickDragged=false;startXPos=event.pageX;startYPos=event.pageY;}).bind(\"mouseup.button\",function(event){if(options.disabled){return;}\nif(startXPos!==event.pageX||startYPos!==event.pageY){clickDragged=true;}});}\nif(this.type===\"checkbox\"){this.buttonElement.bind(\"click.button\",function(){if(options.disabled||clickDragged){return false;}\n$(this).toggleClass(\"ui-state-active\");self.buttonElement.attr(\"aria-pressed\",self.element[0].checked);});}else if(this.type===\"radio\"){this.buttonElement.bind(\"click.button\",function(){if(options.disabled||clickDragged){return false;}\n$(this).addClass(\"ui-state-active\");self.buttonElement.attr(\"aria-pressed\",\"true\");var radio=self.element[0];radioGroup(radio).not(radio).map(function(){return $(this).button(\"widget\")[0];}).removeClass(\"ui-state-active\").attr(\"aria-pressed\",\"false\");});}else{this.buttonElement.bind(\"mousedown.button\",function(){if(options.disabled){return false;}\n$(this).addClass(\"ui-state-active\");lastActive=this;$(document).one(\"mouseup\",function(){lastActive=null;});}).bind(\"mouseup.button\",function(){if(options.disabled){return false;}\n$(this).removeClass(\"ui-state-active\");}).bind(\"keydown.button\",function(event){if(options.disabled){return false;}\nif(event.keyCode==$.ui.keyCode.SPACE||event.keyCode==$.ui.keyCode.ENTER){$(this).addClass(\"ui-state-active\");}}).bind(\"keyup.button\",function(){$(this).removeClass(\"ui-state-active\");});if(this.buttonElement.is(\"a\")){this.buttonElement.keyup(function(event){if(event.keyCode===$.ui.keyCode.SPACE){$(this).click();}});}}\nthis._setOption(\"disabled\",options.disabled);this._resetButton();},_determineButtonType:function(){if(this.element.is(\":checkbox\")){this.type=\"checkbox\";}else if(this.element.is(\":radio\")){this.type=\"radio\";}else if(this.element.is(\"input\")){this.type=\"input\";}else{this.type=\"button\";}\nif(this.type===\"checkbox\"||this.type===\"radio\"){var ancestor=this.element.parents().filter(\":last\"),labelSelector=\"label[for='\"+this.element.attr(\"id\")+\"']\";this.buttonElement=ancestor.find(labelSelector);if(!this.buttonElement.length){ancestor=ancestor.length?ancestor.siblings():this.element.siblings();this.buttonElement=ancestor.filter(labelSelector);if(!this.buttonElement.length){this.buttonElement=ancestor.find(labelSelector);}}\nthis.element.addClass(\"ui-helper-hidden-accessible\");var checked=this.element.is(\":checked\");if(checked){this.buttonElement.addClass(\"ui-state-active\");}\nthis.buttonElement.attr(\"aria-pressed\",checked);}else{this.buttonElement=this.element;}},widget:function(){return this.buttonElement;},destroy:function(){this.element.removeClass(\"ui-helper-hidden-accessible\");this.buttonElement.removeClass(baseClasses+\" \"+stateClasses+\" \"+typeClasses).removeAttr(\"role\").removeAttr(\"aria-pressed\").html(this.buttonElement.find(\".ui-button-text\").html());if(!this.hasTitle){this.buttonElement.removeAttr(\"title\");}\n$.Widget.prototype.destroy.call(this);},_setOption:function(key,value){$.Widget.prototype._setOption.apply(this,arguments);if(key===\"disabled\"){if(value){this.element.propAttr(\"disabled\",true);}else{this.element.propAttr(\"disabled\",false);}\nreturn;}\nthis._resetButton();},refresh:function(){var isDisabled=this.element.is(\":disabled\");if(isDisabled!==this.options.disabled){this._setOption(\"disabled\",isDisabled);}\nif(this.type===\"radio\"){radioGroup(this.element[0]).each(function(){if($(this).is(\":checked\")){$(this).button(\"widget\").addClass(\"ui-state-active\").attr(\"aria-pressed\",\"true\");}else{$(this).button(\"widget\").removeClass(\"ui-state-active\").attr(\"aria-pressed\",\"false\");}});}else if(this.type===\"checkbox\"){if(this.element.is(\":checked\")){this.buttonElement.addClass(\"ui-state-active\").attr(\"aria-pressed\",\"true\");}else{this.buttonElement.removeClass(\"ui-state-active\").attr(\"aria-pressed\",\"false\");}}},_resetButton:function(){if(this.type===\"input\"){if(this.options.label){this.element.val(this.options.label);}\nreturn;}\nvar buttonElement=this.buttonElement.removeClass(typeClasses),buttonText=$(\"<span><\/span>\",this.element[0].ownerDocument).addClass(\"ui-button-text\").html(this.options.label).appendTo(buttonElement.empty()).text(),icons=this.options.icons,multipleIcons=icons.primary&&icons.secondary,buttonClasses=[];if(icons.primary||icons.secondary){if(this.options.text){buttonClasses.push(\"ui-button-text-icon\"+(multipleIcons?\"s\":(icons.primary?\"-primary\":\"-secondary\")));}\nif(icons.primary){buttonElement.prepend(\"<span class='ui-button-icon-primary ui-icon \"+icons.primary+\"'><\/span>\");}\nif(icons.secondary){buttonElement.append(\"<span class='ui-button-icon-secondary ui-icon \"+icons.secondary+\"'><\/span>\");}\nif(!this.options.text){buttonClasses.push(multipleIcons?\"ui-button-icons-only\":\"ui-button-icon-only\");if(!this.hasTitle){buttonElement.attr(\"title\",buttonText);}}}else{buttonClasses.push(\"ui-button-text-only\");}\nbuttonElement.addClass(buttonClasses.join(\" \"));}});$.widget(\"ui.buttonset\",{options:{items:\":button, :submit, :reset, :checkbox, :radio, a, :data(button)\"},_create:function(){this.element.addClass(\"ui-buttonset\");},_init:function(){this.refresh();},_setOption:function(key,value){if(key===\"disabled\"){this.buttons.button(\"option\",key,value);}\n$.Widget.prototype._setOption.apply(this,arguments);},refresh:function(){var rtl=this.element.css(\"direction\")===\"rtl\";this.buttons=this.element.find(this.options.items).filter(\":ui-button\").button(\"refresh\").end().not(\":ui-button\").button().end().map(function(){return $(this).button(\"widget\")[0];}).removeClass(\"ui-corner-all ui-corner-left ui-corner-right\").filter(\":first\").addClass(rtl?\"ui-corner-right\":\"ui-corner-left\").end().filter(\":last\").addClass(rtl?\"ui-corner-left\":\"ui-corner-right\").end().end();},destroy:function(){this.element.removeClass(\"ui-buttonset\");this.buttons.map(function(){return $(this).button(\"widget\")[0];}).removeClass(\"ui-corner-left ui-corner-right\").end().button(\"destroy\");$.Widget.prototype.destroy.call(this);}});}(jQuery));(function($,undefined){var uiDialogClasses='ui-dialog '+'ui-widget '+'ui-widget-content '+'ui-corner-all ',sizeRelatedOptions={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},resizableRelatedOptions={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},attrFn=$.attrFn||{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true,click:true};$.widget(\"ui.dialog\",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:'close',dialogClass:'',draggable:true,hide:null,height:'auto',maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:{my:'center',at:'center',collision:'fit',using:function(pos){var topOffset=$(this).css(pos).offset().top;if(topOffset<0){$(this).css('top',pos.top-topOffset);}}},resizable:true,show:null,stack:true,title:'',width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr('title');if(typeof this.originalTitle!==\"string\"){this.originalTitle=\"\";}\nthis.options.title=this.options.title||this.originalTitle;var self=this,options=self.options,title=options.title||'&#160;',titleId=$.ui.dialog.getTitleId(self.element),uiDialog=(self.uiDialog=$('<div><\/div>')).appendTo(document.body).hide().addClass(uiDialogClasses+options.dialogClass).css({zIndex:options.zIndex}).attr('tabIndex',-1).css('outline',0).keydown(function(event){if(options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE){self.close(event);event.preventDefault();}}).attr({role:'dialog','aria-labelledby':titleId}).mousedown(function(event){self.moveToTop(false,event);}),uiDialogContent=self.element.show().removeAttr('title').addClass('ui-dialog-content '+'ui-widget-content').appendTo(uiDialog),uiDialogTitlebar=(self.uiDialogTitlebar=$('<div><\/div>')).addClass('ui-dialog-titlebar '+'ui-widget-header '+'ui-corner-all '+'ui-helper-clearfix').prependTo(uiDialog),uiDialogTitlebarClose=$('<a href=\"#\"><\/a>').addClass('ui-dialog-titlebar-close '+'ui-corner-all').attr('role','button').hover(function(){uiDialogTitlebarClose.addClass('ui-state-hover');},function(){uiDialogTitlebarClose.removeClass('ui-state-hover');}).focus(function(){uiDialogTitlebarClose.addClass('ui-state-focus');}).blur(function(){uiDialogTitlebarClose.removeClass('ui-state-focus');}).click(function(event){self.close(event);return false;}).appendTo(uiDialogTitlebar),uiDialogTitlebarCloseText=(self.uiDialogTitlebarCloseText=$('<span><\/span>')).addClass('ui-icon '+'ui-icon-closethick').text(options.closeText).appendTo(uiDialogTitlebarClose),uiDialogTitle=$('<span><\/span>').addClass('ui-dialog-title').attr('id',titleId).html(title).prependTo(uiDialogTitlebar);if($.isFunction(options.beforeclose)&&!$.isFunction(options.beforeClose)){options.beforeClose=options.beforeclose;}\nuiDialogTitlebar.find(\"*\").add(uiDialogTitlebar).disableSelection();if(options.draggable&&$.fn.draggable){self._makeDraggable();}\nif(options.resizable&&$.fn.resizable){self._makeResizable();}\nself._createButtons(options.buttons);self._isOpen=false;if($.fn.bgiframe){uiDialog.bgiframe();}},_init:function(){if(this.options.autoOpen){this.open();}},destroy:function(){var self=this;if(self.overlay){self.overlay.destroy();}\nself.uiDialog.hide();self.element.unbind('.dialog').removeData('dialog').removeClass('ui-dialog-content ui-widget-content').hide().appendTo('body');self.uiDialog.remove();if(self.originalTitle){self.element.attr('title',self.originalTitle);}\nreturn self;},widget:function(){return this.uiDialog;},close:function(event){var self=this,maxZ,thisZ;if(false===self._trigger('beforeClose',event)){return;}\nif(self.overlay){self.overlay.destroy();}\nself.uiDialog.unbind('keypress.ui-dialog');self._isOpen=false;if(self.options.hide){self.uiDialog.hide(self.options.hide,function(){self._trigger('close',event);});}else{self.uiDialog.hide();self._trigger('close',event);}\n$.ui.dialog.overlay.resize();if(self.options.modal){maxZ=0;$('.ui-dialog').each(function(){if(this!==self.uiDialog[0]){thisZ=$(this).css('z-index');if(!isNaN(thisZ)){maxZ=Math.max(maxZ,thisZ);}}});$.ui.dialog.maxZ=maxZ;}\nreturn self;},isOpen:function(){return this._isOpen;},moveToTop:function(force,event){var self=this,options=self.options,saveScroll;if((options.modal&&!force)||(!options.stack&&!options.modal)){return self._trigger('focus',event);}\nif(options.zIndex>$.ui.dialog.maxZ){$.ui.dialog.maxZ=options.zIndex;}\nif(self.overlay){$.ui.dialog.maxZ+=1;self.overlay.$el.css('z-index',$.ui.dialog.overlay.maxZ=$.ui.dialog.maxZ);}\nsaveScroll={scrollTop:self.element.scrollTop(),scrollLeft:self.element.scrollLeft()};$.ui.dialog.maxZ+=1;self.uiDialog.css('z-index',$.ui.dialog.maxZ);self.element.attr(saveScroll);self._trigger('focus',event);return self;},open:function(){if(this._isOpen){return;}\nvar self=this,options=self.options,uiDialog=self.uiDialog;self.overlay=options.modal?new $.ui.dialog.overlay(self):null;self._size();self._position(options.position);uiDialog.show(options.show);self.moveToTop(true);if(options.modal){uiDialog.bind(\"keydown.ui-dialog\",function(event){if(event.keyCode!==$.ui.keyCode.TAB){return;}\nvar tabbables=$(':tabbable',this),first=tabbables.filter(':first'),last=tabbables.filter(':last');if(event.target===last[0]&&!event.shiftKey){first.focus(1);return false;}else if(event.target===first[0]&&event.shiftKey){last.focus(1);return false;}});}\n$(self.element.find(':tabbable').get().concat(uiDialog.find('.ui-dialog-buttonpane :tabbable').get().concat(uiDialog.get()))).eq(0).focus();self._isOpen=true;self._trigger('open');return self;},_createButtons:function(buttons){var self=this,hasButtons=false,uiDialogButtonPane=$('<div><\/div>').addClass('ui-dialog-buttonpane '+'ui-widget-content '+'ui-helper-clearfix'),uiButtonSet=$(\"<div><\/div>\").addClass(\"ui-dialog-buttonset\").appendTo(uiDialogButtonPane);self.uiDialog.find('.ui-dialog-buttonpane').remove();if(typeof buttons==='object'&&buttons!==null){$.each(buttons,function(){return!(hasButtons=true);});}\nif(hasButtons){$.each(buttons,function(name,props){props=$.isFunction(props)?{click:props,text:name}:props;var button=$('<button type=\"button\"><\/button>').click(function(){props.click.apply(self.element[0],arguments);}).appendTo(uiButtonSet);$.each(props,function(key,value){if(key===\"click\"){return;}\nif(key in attrFn){button[key](value);}else{button.attr(key,value);}});if($.fn.button){button.button();}});uiDialogButtonPane.appendTo(self.uiDialog);}},_makeDraggable:function(){var self=this,options=self.options,doc=$(document),heightBeforeDrag;function filteredUi(ui){return{position:ui.position,offset:ui.offset};}\nself.uiDialog.draggable({cancel:'.ui-dialog-content, .ui-dialog-titlebar-close',handle:'.ui-dialog-titlebar',containment:'document',start:function(event,ui){heightBeforeDrag=options.height===\"auto\"?\"auto\":$(this).height();$(this).height($(this).height()).addClass(\"ui-dialog-dragging\");self._trigger('dragStart',event,filteredUi(ui));},drag:function(event,ui){self._trigger('drag',event,filteredUi(ui));},stop:function(event,ui){options.position=[ui.position.left-doc.scrollLeft(),ui.position.top-doc.scrollTop()];$(this).removeClass(\"ui-dialog-dragging\").height(heightBeforeDrag);self._trigger('dragStop',event,filteredUi(ui));$.ui.dialog.overlay.resize();}});},_makeResizable:function(handles){handles=(handles===undefined?this.options.resizable:handles);var self=this,options=self.options,position=self.uiDialog.css('position'),resizeHandles=(typeof handles==='string'?handles:'n,e,s,w,se,sw,ne,nw');function filteredUi(ui){return{originalPosition:ui.originalPosition,originalSize:ui.originalSize,position:ui.position,size:ui.size};}\nself.uiDialog.resizable({cancel:'.ui-dialog-content',containment:'document',alsoResize:self.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:self._minHeight(),handles:resizeHandles,start:function(event,ui){$(this).addClass(\"ui-dialog-resizing\");self._trigger('resizeStart',event,filteredUi(ui));},resize:function(event,ui){self._trigger('resize',event,filteredUi(ui));},stop:function(event,ui){$(this).removeClass(\"ui-dialog-resizing\");options.height=$(this).height();options.width=$(this).width();self._trigger('resizeStop',event,filteredUi(ui));$.ui.dialog.overlay.resize();}}).css('position',position).find('.ui-resizable-se').addClass('ui-icon ui-icon-grip-diagonal-se');},_minHeight:function(){var options=this.options;if(options.height==='auto'){return options.minHeight;}else{return Math.min(options.minHeight,options.height);}},_position:function(position){var myAt=[],offset=[0,0],isVisible;if(position){if(typeof position==='string'||(typeof position==='object'&&'0'in position)){myAt=position.split?position.split(' '):[position[0],position[1]];if(myAt.length===1){myAt[1]=myAt[0];}\n$.each(['left','top'],function(i,offsetPosition){if(+myAt[i]===myAt[i]){offset[i]=myAt[i];myAt[i]=offsetPosition;}});position={my:myAt.join(\" \"),at:myAt.join(\" \"),offset:offset.join(\" \")};}\nposition=$.extend({},$.ui.dialog.prototype.options.position,position);}else{position=$.ui.dialog.prototype.options.position;}\nisVisible=this.uiDialog.is(':visible');if(!isVisible){this.uiDialog.show();}\nthis.uiDialog.css({top:0,left:0}).position($.extend({of:window},position));if(!isVisible){this.uiDialog.hide();}},_setOptions:function(options){var self=this,resizableOptions={},resize=false;$.each(options,function(key,value){self._setOption(key,value);if(key in sizeRelatedOptions){resize=true;}\nif(key in resizableRelatedOptions){resizableOptions[key]=value;}});if(resize){this._size();}\nif(this.uiDialog.is(\":data(resizable)\")){this.uiDialog.resizable(\"option\",resizableOptions);}},_setOption:function(key,value){var self=this,uiDialog=self.uiDialog;switch(key){case\"beforeclose\":key=\"beforeClose\";break;case\"buttons\":self._createButtons(value);break;case\"closeText\":self.uiDialogTitlebarCloseText.text(\"\"+value);break;case\"dialogClass\":uiDialog.removeClass(self.options.dialogClass).addClass(uiDialogClasses+value);break;case\"disabled\":if(value){uiDialog.addClass('ui-dialog-disabled');}else{uiDialog.removeClass('ui-dialog-disabled');}\nbreak;case\"draggable\":var isDraggable=uiDialog.is(\":data(draggable)\");if(isDraggable&&!value){uiDialog.draggable(\"destroy\");}\nif(!isDraggable&&value){self._makeDraggable();}\nbreak;case\"position\":self._position(value);break;case\"resizable\":var isResizable=uiDialog.is(\":data(resizable)\");if(isResizable&&!value){uiDialog.resizable('destroy');}\nif(isResizable&&typeof value==='string'){uiDialog.resizable('option','handles',value);}\nif(!isResizable&&value!==false){self._makeResizable(value);}\nbreak;case\"title\":$(\".ui-dialog-title\",self.uiDialogTitlebar).html(\"\"+(value||'&#160;'));break;}\n$.Widget.prototype._setOption.apply(self,arguments);},_size:function(){var options=this.options,nonContentHeight,minContentHeight,isVisible=this.uiDialog.is(\":visible\");this.element.show().css({width:'auto',minHeight:0,height:0});if(options.minWidth>options.width){options.width=options.minWidth;}\nnonContentHeight=this.uiDialog.css({height:'auto',width:options.width}).height();minContentHeight=Math.max(0,options.minHeight-nonContentHeight);if(options.height===\"auto\"){if($.support.minHeight){this.element.css({minHeight:minContentHeight,height:\"auto\"});}else{this.uiDialog.show();var autoHeight=this.element.css(\"height\",\"auto\").height();if(!isVisible){this.uiDialog.hide();}\nthis.element.height(Math.max(autoHeight,minContentHeight));}}else{this.element.height(Math.max(options.height-nonContentHeight,0));}\nif(this.uiDialog.is(':data(resizable)')){this.uiDialog.resizable('option','minHeight',this._minHeight());}}});$.extend($.ui.dialog,{version:\"1.8.18\",uuid:0,maxZ:0,getTitleId:function($el){var id=$el.attr('id');if(!id){this.uuid+=1;id=this.uuid;}\nreturn'ui-dialog-title-'+id;},overlay:function(dialog){this.$el=$.ui.dialog.overlay.create(dialog);}});$.extend($.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:$.map('focus,mousedown,mouseup,keydown,keypress,click'.split(','),function(event){return event+'.dialog-overlay';}).join(' '),create:function(dialog){if(this.instances.length===0){setTimeout(function(){if($.ui.dialog.overlay.instances.length){$(document).bind($.ui.dialog.overlay.events,function(event){if($(event.target).zIndex()<$.ui.dialog.overlay.maxZ){return false;}});}},1);$(document).bind('keydown.dialog-overlay',function(event){if(dialog.options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE){dialog.close(event);event.preventDefault();}});$(window).bind('resize.dialog-overlay',$.ui.dialog.overlay.resize);}\nvar $el=(this.oldInstances.pop()||$('<div><\/div>').addClass('ui-widget-overlay')).appendTo(document.body).css({width:this.width(),height:this.height()});if($.fn.bgiframe){$el.bgiframe();}\nthis.instances.push($el);return $el;},destroy:function($el){var indexOf=$.inArray($el,this.instances);if(indexOf!=-1){this.oldInstances.push(this.instances.splice(indexOf,1)[0]);}\nif(this.instances.length===0){$([document,window]).unbind('.dialog-overlay');}\n$el.remove();var maxZ=0;$.each(this.instances,function(){maxZ=Math.max(maxZ,this.css('z-index'));});this.maxZ=maxZ;},height:function(){var scrollHeight,offsetHeight;if($.browser.msie&&$.browser.version<7){scrollHeight=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);offsetHeight=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(scrollHeight<offsetHeight){return $(window).height()+'px';}else{return scrollHeight+'px';}}else{return $(document).height()+'px';}},width:function(){var scrollWidth,offsetWidth;if($.browser.msie){scrollWidth=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);offsetWidth=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(scrollWidth<offsetWidth){return $(window).width()+'px';}else{return scrollWidth+'px';}}else{return $(document).width()+'px';}},resize:function(){var $overlays=$([]);$.each($.ui.dialog.overlay.instances,function(){$overlays=$overlays.add(this);});$overlays.css({width:0,height:0}).css({width:$.ui.dialog.overlay.width(),height:$.ui.dialog.overlay.height()});}});$.extend($.ui.dialog.overlay.prototype,{destroy:function(){$.ui.dialog.overlay.destroy(this.$el);}});}(jQuery));(function($,undefined){var numPages=5;$.widget(\"ui.slider\",$.ui.mouse,{widgetEventPrefix:\"slide\",options:{animate:false,distance:0,max:100,min:0,orientation:\"horizontal\",range:false,step:1,value:0,values:null},_create:function(){var self=this,o=this.options,existingHandles=this.element.find(\".ui-slider-handle\").addClass(\"ui-state-default ui-corner-all\"),handle=\"<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'><\/a>\",handleCount=(o.values&&o.values.length)||1,handles=[];this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass(\"ui-slider\"+\" ui-slider-\"+this.orientation+\" ui-widget\"+\" ui-widget-content\"+\" ui-corner-all\"+\n(o.disabled?\" ui-slider-disabled ui-disabled\":\"\"));this.range=$([]);if(o.range){if(o.range===true){if(!o.values){o.values=[this._valueMin(),this._valueMin()];}\nif(o.values.length&&o.values.length!==2){o.values=[o.values[0],o.values[0]];}}\nthis.range=$(\"<div><\/div>\").appendTo(this.element).addClass(\"ui-slider-range\"+\" ui-widget-header\"+\n((o.range===\"min\"||o.range===\"max\")?\" ui-slider-range-\"+o.range:\"\"));}\nfor(var i=existingHandles.length;i<handleCount;i+=1){handles.push(handle);}\nthis.handles=existingHandles.add($(handles.join(\"\")).appendTo(self.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter(\"a\").click(function(event){event.preventDefault();}).hover(function(){if(!o.disabled){$(this).addClass(\"ui-state-hover\");}},function(){$(this).removeClass(\"ui-state-hover\");}).focus(function(){if(!o.disabled){$(\".ui-slider .ui-state-focus\").removeClass(\"ui-state-focus\");$(this).addClass(\"ui-state-focus\");}else{$(this).blur();}}).blur(function(){$(this).removeClass(\"ui-state-focus\");});this.handles.each(function(i){$(this).data(\"index.ui-slider-handle\",i);});this.handles.keydown(function(event){var index=$(this).data(\"index.ui-slider-handle\"),allowed,curVal,newVal,step;if(self.options.disabled){return;}\nswitch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:event.preventDefault();if(!self._keySliding){self._keySliding=true;$(this).addClass(\"ui-state-active\");allowed=self._start(event,index);if(allowed===false){return;}}\nbreak;}\nstep=self.options.step;if(self.options.values&&self.options.values.length){curVal=newVal=self.values(index);}else{curVal=newVal=self.value();}\nswitch(event.keyCode){case $.ui.keyCode.HOME:newVal=self._valueMin();break;case $.ui.keyCode.END:newVal=self._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=self._trimAlignValue(curVal+((self._valueMax()-self._valueMin())/numPages));break;case $.ui.keyCode.PAGE_DOWN:newVal=self._trimAlignValue(curVal-((self._valueMax()-self._valueMin())/numPages));break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===self._valueMax()){return;}\nnewVal=self._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===self._valueMin()){return;}\nnewVal=self._trimAlignValue(curVal-step);break;}\nself._slide(event,index,newVal);}).keyup(function(event){var index=$(this).data(\"index.ui-slider-handle\");if(self._keySliding){self._keySliding=false;self._stop(event,index);self._change(event,index);$(this).removeClass(\"ui-state-active\");}});this._refreshValue();this._animateOff=false;},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass(\"ui-slider\"+\" ui-slider-horizontal\"+\" ui-slider-vertical\"+\" ui-slider-disabled\"+\" ui-widget\"+\" ui-widget-content\"+\" ui-corner-all\").removeData(\"slider\").unbind(\".slider\");this._mouseDestroy();return this;},_mouseCapture:function(event){var o=this.options,position,normValue,distance,closestHandle,self,index,allowed,offset,mouseOverHandle;if(o.disabled){return false;}\nthis.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();position={x:event.pageX,y:event.pageY};normValue=this._normValueFromMouse(position);distance=this._valueMax()-this._valueMin()+1;self=this;this.handles.each(function(i){var thisDistance=Math.abs(normValue-self.values(i));if(distance>thisDistance){distance=thisDistance;closestHandle=$(this);index=i;}});if(o.range===true&&this.values(1)===o.min){index+=1;closestHandle=$(this.handles[index]);}\nallowed=this._start(event,index);if(allowed===false){return false;}\nthis._mouseSliding=true;self._handleIndex=index;closestHandle.addClass(\"ui-state-active\").focus();offset=closestHandle.offset();mouseOverHandle=!$(event.target).parents().andSelf().is(\".ui-slider-handle\");this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-offset.left-(closestHandle.width()/2),top:event.pageY-offset.top-\n(closestHandle.height()/2)-\n(parseInt(closestHandle.css(\"borderTopWidth\"),10)||0)-\n(parseInt(closestHandle.css(\"borderBottomWidth\"),10)||0)+\n(parseInt(closestHandle.css(\"marginTop\"),10)||0)};if(!this.handles.hasClass(\"ui-state-hover\")){this._slide(event,index,normValue);}\nthis._animateOff=true;return true;},_mouseStart:function(event){return true;},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position);this._slide(event,this._handleIndex,normValue);return false;},_mouseStop:function(event){this.handles.removeClass(\"ui-state-active\");this._mouseSliding=false;this._stop(event,this._handleIndex);this._change(event,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false;},_detectOrientation:function(){this.orientation=(this.options.orientation===\"vertical\")?\"vertical\":\"horizontal\";},_normValueFromMouse:function(position){var pixelTotal,pixelMouse,percentMouse,valueTotal,valueMouse;if(this.orientation===\"horizontal\"){pixelTotal=this.elementSize.width;pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0);}else{pixelTotal=this.elementSize.height;pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0);}\npercentMouse=(pixelMouse/pixelTotal);if(percentMouse>1){percentMouse=1;}\nif(percentMouse<0){percentMouse=0;}\nif(this.orientation===\"vertical\"){percentMouse=1-percentMouse;}\nvalueTotal=this._valueMax()-this._valueMin();valueMouse=this._valueMin()+percentMouse*valueTotal;return this._trimAlignValue(valueMouse);},_start:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}\nreturn this._trigger(\"start\",event,uiHash);},_slide:function(event,index,newVal){var otherVal,newValues,allowed;if(this.options.values&&this.options.values.length){otherVal=this.values(index?0:1);if((this.options.values.length===2&&this.options.range===true)&&((index===0&&newVal>otherVal)||(index===1&&newVal<otherVal))){newVal=otherVal;}\nif(newVal!==this.values(index)){newValues=this.values();newValues[index]=newVal;allowed=this._trigger(\"slide\",event,{handle:this.handles[index],value:newVal,values:newValues});otherVal=this.values(index?0:1);if(allowed!==false){this.values(index,newVal,true);}}}else{if(newVal!==this.value()){allowed=this._trigger(\"slide\",event,{handle:this.handles[index],value:newVal});if(allowed!==false){this.value(newVal);}}}},_stop:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}\nthis._trigger(\"stop\",event,uiHash);},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}\nthis._trigger(\"change\",event,uiHash);}},value:function(newValue){if(arguments.length){this.options.value=this._trimAlignValue(newValue);this._refreshValue();this._change(null,0);return;}\nreturn this._value();},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1){this.options.values[index]=this._trimAlignValue(newValue);this._refreshValue();this._change(null,index);return;}\nif(arguments.length){if($.isArray(arguments[0])){vals=this.options.values;newValues=arguments[0];for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(newValues[i]);this._change(null,i);}\nthis._refreshValue();}else{if(this.options.values&&this.options.values.length){return this._values(index);}else{return this.value();}}}else{return this._values();}},_setOption:function(key,value){var i,valsLength=0;if($.isArray(this.options.values)){valsLength=this.options.values.length;}\n$.Widget.prototype._setOption.apply(this,arguments);switch(key){case\"disabled\":if(value){this.handles.filter(\".ui-state-focus\").blur();this.handles.removeClass(\"ui-state-hover\");this.handles.propAttr(\"disabled\",true);this.element.addClass(\"ui-disabled\");}else{this.handles.propAttr(\"disabled\",false);this.element.removeClass(\"ui-disabled\");}\nbreak;case\"orientation\":this._detectOrientation();this.element.removeClass(\"ui-slider-horizontal ui-slider-vertical\").addClass(\"ui-slider-\"+this.orientation);this._refreshValue();break;case\"value\":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case\"values\":this._animateOff=true;this._refreshValue();for(i=0;i<valsLength;i+=1){this._change(null,i);}\nthis._animateOff=false;break;}},_value:function(){var val=this.options.value;val=this._trimAlignValue(val);return val;},_values:function(index){var val,vals,i;if(arguments.length){val=this.options.values[index];val=this._trimAlignValue(val);return val;}else{vals=this.options.values.slice();for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(vals[i]);}\nreturn vals;}},_trimAlignValue:function(val){if(val<=this._valueMin()){return this._valueMin();}\nif(val>=this._valueMax()){return this._valueMax();}\nvar step=(this.options.step>0)?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=val-valModStep;if(Math.abs(valModStep)*2>=step){alignValue+=(valModStep>0)?step:(-step);}\nreturn parseFloat(alignValue.toFixed(5));},_valueMin:function(){return this.options.min;},_valueMax:function(){return this.options.max;},_refreshValue:function(){var oRange=this.options.range,o=this.options,self=this,animate=(!this._animateOff)?o.animate:false,valPercent,_set={},lastValPercent,value,valueMin,valueMax;if(this.options.values&&this.options.values.length){this.handles.each(function(i,j){valPercent=(self.values(i)-self._valueMin())/(self._valueMax()-self._valueMin())*100;_set[self.orientation===\"horizontal\"?\"left\":\"bottom\"]=valPercent+\"%\";$(this).stop(1,1)[animate?\"animate\":\"css\"](_set,o.animate);if(self.options.range===true){if(self.orientation===\"horizontal\"){if(i===0){self.range.stop(1,1)[animate?\"animate\":\"css\"]({left:valPercent+\"%\"},o.animate);}\nif(i===1){self.range[animate?\"animate\":\"css\"]({width:(valPercent-lastValPercent)+\"%\"},{queue:false,duration:o.animate});}}else{if(i===0){self.range.stop(1,1)[animate?\"animate\":\"css\"]({bottom:(valPercent)+\"%\"},o.animate);}\nif(i===1){self.range[animate?\"animate\":\"css\"]({height:(valPercent-lastValPercent)+\"%\"},{queue:false,duration:o.animate});}}}\nlastValPercent=valPercent;});}else{value=this.value();valueMin=this._valueMin();valueMax=this._valueMax();valPercent=(valueMax!==valueMin)?(value-valueMin)/(valueMax-valueMin)*100:0;_set[self.orientation===\"horizontal\"?\"left\":\"bottom\"]=valPercent+\"%\";this.handle.stop(1,1)[animate?\"animate\":\"css\"](_set,o.animate);if(oRange===\"min\"&&this.orientation===\"horizontal\"){this.range.stop(1,1)[animate?\"animate\":\"css\"]({width:valPercent+\"%\"},o.animate);}\nif(oRange===\"max\"&&this.orientation===\"horizontal\"){this.range[animate?\"animate\":\"css\"]({width:(100-valPercent)+\"%\"},{queue:false,duration:o.animate});}\nif(oRange===\"min\"&&this.orientation===\"vertical\"){this.range.stop(1,1)[animate?\"animate\":\"css\"]({height:valPercent+\"%\"},o.animate);}\nif(oRange===\"max\"&&this.orientation===\"vertical\"){this.range[animate?\"animate\":\"css\"]({height:(100-valPercent)+\"%\"},{queue:false,duration:o.animate});}}}});$.extend($.ui.slider,{version:\"1.8.18\"});}(jQuery));(function($,undefined){var tabId=0,listId=0;function getNextTabId(){return++tabId;}\nfunction getNextListId(){return++listId;}\n$.widget(\"ui.tabs\",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:\"click\",fx:null,idPrefix:\"ui-tabs-\",load:null,panelTemplate:\"<div><\/div>\",remove:null,select:null,show:null,spinner:\"<em>Loading&#8230;<\/em>\",tabTemplate:\"<li><a href='#{href}'><span>#{label}<\/span><\/a><\/li>\"},_create:function(){this._tabify(true);},_setOption:function(key,value){if(key==\"selected\"){if(this.options.collapsible&&value==this.options.selected){return;}\nthis.select(value);}else{this.options[key]=value;this._tabify();}},_tabId:function(a){return a.title&&a.title.replace(/\\s/g,\"_\").replace(/[^\\w\\u00c0-\\uFFFF-]/g,\"\")||this.options.idPrefix+getNextTabId();},_sanitizeSelector:function(hash){return hash.replace(/:/g,\"\\\\:\");},_cookie:function(){var cookie=this.cookie||(this.cookie=this.options.cookie.name||\"ui-tabs-\"+getNextListId());return $.cookie.apply(null,[cookie].concat($.makeArray(arguments)));},_ui:function(tab,panel){return{tab:tab,panel:panel,index:this.anchors.index(tab)};},_cleanup:function(){this.lis.filter(\".ui-state-processing\").removeClass(\"ui-state-processing\").find(\"span:data(label.tabs)\").each(function(){var el=$(this);el.html(el.data(\"label.tabs\")).removeData(\"label.tabs\");});},_tabify:function(init){var self=this,o=this.options,fragmentId=/^#.+/;this.list=this.element.find(\"ol,ul\").eq(0);this.lis=$(\" > li:has(a[href])\",this.list);this.anchors=this.lis.map(function(){return $(\"a\",this)[0];});this.panels=$([]);this.anchors.each(function(i,a){var href=$(a).attr(\"href\");var hrefBase=href.split(\"#\")[0],baseEl;if(hrefBase&&(hrefBase===location.toString().split(\"#\")[0]||(baseEl=$(\"base\")[0])&&hrefBase===baseEl.href)){href=a.hash;a.href=href;}\nif(fragmentId.test(href)){self.panels=self.panels.add(self.element.find(self._sanitizeSelector(href)));}else if(href&&href!==\"#\"){$.data(a,\"href.tabs\",href);$.data(a,\"load.tabs\",href.replace(/#.*$/,\"\"));var id=self._tabId(a);a.href=\"#\"+id;var $panel=self.element.find(\"#\"+id);if(!$panel.length){$panel=$(o.panelTemplate).attr(\"id\",id).addClass(\"ui-tabs-panel ui-widget-content ui-corner-bottom\").insertAfter(self.panels[i-1]||self.list);$panel.data(\"destroy.tabs\",true);}\nself.panels=self.panels.add($panel);}else{o.disabled.push(i);}});if(init){this.element.addClass(\"ui-tabs ui-widget ui-widget-content ui-corner-all\");this.list.addClass(\"ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all\");this.lis.addClass(\"ui-state-default ui-corner-top\");this.panels.addClass(\"ui-tabs-panel ui-widget-content ui-corner-bottom\");if(o.selected===undefined){if(location.hash){this.anchors.each(function(i,a){if(a.hash==location.hash){o.selected=i;return false;}});}\nif(typeof o.selected!==\"number\"&&o.cookie){o.selected=parseInt(self._cookie(),10);}\nif(typeof o.selected!==\"number\"&&this.lis.filter(\".ui-tabs-selected\").length){o.selected=this.lis.index(this.lis.filter(\".ui-tabs-selected\"));}\no.selected=o.selected||(this.lis.length?0:-1);}else if(o.selected===null){o.selected=-1;}\no.selected=((o.selected>=0&&this.anchors[o.selected])||o.selected<0)?o.selected:0;o.disabled=$.unique(o.disabled.concat($.map(this.lis.filter(\".ui-state-disabled\"),function(n,i){return self.lis.index(n);}))).sort();if($.inArray(o.selected,o.disabled)!=-1){o.disabled.splice($.inArray(o.selected,o.disabled),1);}\nthis.panels.addClass(\"ui-tabs-hide\");this.lis.removeClass(\"ui-tabs-selected ui-state-active\");if(o.selected>=0&&this.anchors.length){self.element.find(self._sanitizeSelector(self.anchors[o.selected].hash)).removeClass(\"ui-tabs-hide\");this.lis.eq(o.selected).addClass(\"ui-tabs-selected ui-state-active\");self.element.queue(\"tabs\",function(){self._trigger(\"show\",null,self._ui(self.anchors[o.selected],self.element.find(self._sanitizeSelector(self.anchors[o.selected].hash))[0]));});this.load(o.selected);}\n$(window).bind(\"unload\",function(){self.lis.add(self.anchors).unbind(\".tabs\");self.lis=self.anchors=self.panels=null;});}else{o.selected=this.lis.index(this.lis.filter(\".ui-tabs-selected\"));}\nthis.element[o.collapsible?\"addClass\":\"removeClass\"](\"ui-tabs-collapsible\");if(o.cookie){this._cookie(o.selected,o.cookie);}\nfor(var i=0,li;(li=this.lis[i]);i++){$(li)[$.inArray(i,o.disabled)!=-1&&!$(li).hasClass(\"ui-tabs-selected\")?\"addClass\":\"removeClass\"](\"ui-state-disabled\");}\nif(o.cache===false){this.anchors.removeData(\"cache.tabs\");}\nthis.lis.add(this.anchors).unbind(\".tabs\");if(o.event!==\"mouseover\"){var addState=function(state,el){if(el.is(\":not(.ui-state-disabled)\")){el.addClass(\"ui-state-\"+state);}};var removeState=function(state,el){el.removeClass(\"ui-state-\"+state);};this.lis.bind(\"mouseover.tabs\",function(){addState(\"hover\",$(this));});this.lis.bind(\"mouseout.tabs\",function(){removeState(\"hover\",$(this));});this.anchors.bind(\"focus.tabs\",function(){addState(\"focus\",$(this).closest(\"li\"));});this.anchors.bind(\"blur.tabs\",function(){removeState(\"focus\",$(this).closest(\"li\"));});}\nvar hideFx,showFx;if(o.fx){if($.isArray(o.fx)){hideFx=o.fx[0];showFx=o.fx[1];}else{hideFx=showFx=o.fx;}}\nfunction resetStyle($el,fx){$el.css(\"display\",\"\");if(!$.support.opacity&&fx.opacity){$el[0].style.removeAttribute(\"filter\");}}\nvar showTab=showFx?function(clicked,$show){$(clicked).closest(\"li\").addClass(\"ui-tabs-selected ui-state-active\");$show.hide().removeClass(\"ui-tabs-hide\").animate(showFx,showFx.duration||\"normal\",function(){resetStyle($show,showFx);self._trigger(\"show\",null,self._ui(clicked,$show[0]));});}:function(clicked,$show){$(clicked).closest(\"li\").addClass(\"ui-tabs-selected ui-state-active\");$show.removeClass(\"ui-tabs-hide\");self._trigger(\"show\",null,self._ui(clicked,$show[0]));};var hideTab=hideFx?function(clicked,$hide){$hide.animate(hideFx,hideFx.duration||\"normal\",function(){self.lis.removeClass(\"ui-tabs-selected ui-state-active\");$hide.addClass(\"ui-tabs-hide\");resetStyle($hide,hideFx);self.element.dequeue(\"tabs\");});}:function(clicked,$hide,$show){self.lis.removeClass(\"ui-tabs-selected ui-state-active\");$hide.addClass(\"ui-tabs-hide\");self.element.dequeue(\"tabs\");};this.anchors.bind(o.event+\".tabs\",function(){var el=this,$li=$(el).closest(\"li\"),$hide=self.panels.filter(\":not(.ui-tabs-hide)\"),$show=self.element.find(self._sanitizeSelector(el.hash));if(($li.hasClass(\"ui-tabs-selected\")&&!o.collapsible)||$li.hasClass(\"ui-state-disabled\")||$li.hasClass(\"ui-state-processing\")||self.panels.filter(\":animated\").length||self._trigger(\"select\",null,self._ui(this,$show[0]))===false){this.blur();return false;}\no.selected=self.anchors.index(this);self.abort();if(o.collapsible){if($li.hasClass(\"ui-tabs-selected\")){o.selected=-1;if(o.cookie){self._cookie(o.selected,o.cookie);}\nself.element.queue(\"tabs\",function(){hideTab(el,$hide);}).dequeue(\"tabs\");this.blur();return false;}else if(!$hide.length){if(o.cookie){self._cookie(o.selected,o.cookie);}\nself.element.queue(\"tabs\",function(){showTab(el,$show);});self.load(self.anchors.index(this));this.blur();return false;}}\nif(o.cookie){self._cookie(o.selected,o.cookie);}\nif($show.length){if($hide.length){self.element.queue(\"tabs\",function(){hideTab(el,$hide);});}\nself.element.queue(\"tabs\",function(){showTab(el,$show);});self.load(self.anchors.index(this));}else{throw\"jQuery UI Tabs: Mismatching fragment identifier.\";}\nif($.browser.msie){this.blur();}});this.anchors.bind(\"click.tabs\",function(){return false;});},_getIndex:function(index){if(typeof index==\"string\"){index=this.anchors.index(this.anchors.filter(\"[href$=\"+index+\"]\"));}\nreturn index;},destroy:function(){var o=this.options;this.abort();this.element.unbind(\".tabs\").removeClass(\"ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible\").removeData(\"tabs\");this.list.removeClass(\"ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all\");this.anchors.each(function(){var href=$.data(this,\"href.tabs\");if(href){this.href=href;}\nvar $this=$(this).unbind(\".tabs\");$.each([\"href\",\"load\",\"cache\"],function(i,prefix){$this.removeData(prefix+\".tabs\");});});this.lis.unbind(\".tabs\").add(this.panels).each(function(){if($.data(this,\"destroy.tabs\")){$(this).remove();}else{$(this).removeClass([\"ui-state-default\",\"ui-corner-top\",\"ui-tabs-selected\",\"ui-state-active\",\"ui-state-hover\",\"ui-state-focus\",\"ui-state-disabled\",\"ui-tabs-panel\",\"ui-widget-content\",\"ui-corner-bottom\",\"ui-tabs-hide\"].join(\" \"));}});if(o.cookie){this._cookie(null,o.cookie);}\nreturn this;},add:function(url,label,index){if(index===undefined){index=this.anchors.length;}\nvar self=this,o=this.options,$li=$(o.tabTemplate.replace(/#\\{href\\}/g,url).replace(/#\\{label\\}/g,label)),id=!url.indexOf(\"#\")?url.replace(\"#\",\"\"):this._tabId($(\"a\",$li)[0]);$li.addClass(\"ui-state-default ui-corner-top\").data(\"destroy.tabs\",true);var $panel=self.element.find(\"#\"+id);if(!$panel.length){$panel=$(o.panelTemplate).attr(\"id\",id).data(\"destroy.tabs\",true);}\n$panel.addClass(\"ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide\");if(index>=this.lis.length){$li.appendTo(this.list);$panel.appendTo(this.list[0].parentNode);}else{$li.insertBefore(this.lis[index]);$panel.insertBefore(this.panels[index]);}\no.disabled=$.map(o.disabled,function(n,i){return n>=index?++n:n;});this._tabify();if(this.anchors.length==1){o.selected=0;$li.addClass(\"ui-tabs-selected ui-state-active\");$panel.removeClass(\"ui-tabs-hide\");this.element.queue(\"tabs\",function(){self._trigger(\"show\",null,self._ui(self.anchors[0],self.panels[0]));});this.load(0);}\nthis._trigger(\"add\",null,this._ui(this.anchors[index],this.panels[index]));return this;},remove:function(index){index=this._getIndex(index);var o=this.options,$li=this.lis.eq(index).remove(),$panel=this.panels.eq(index).remove();if($li.hasClass(\"ui-tabs-selected\")&&this.anchors.length>1){this.select(index+(index+1<this.anchors.length?1:-1));}\no.disabled=$.map($.grep(o.disabled,function(n,i){return n!=index;}),function(n,i){return n>=index?--n:n;});this._tabify();this._trigger(\"remove\",null,this._ui($li.find(\"a\")[0],$panel[0]));return this;},enable:function(index){index=this._getIndex(index);var o=this.options;if($.inArray(index,o.disabled)==-1){return;}\nthis.lis.eq(index).removeClass(\"ui-state-disabled\");o.disabled=$.grep(o.disabled,function(n,i){return n!=index;});this._trigger(\"enable\",null,this._ui(this.anchors[index],this.panels[index]));return this;},disable:function(index){index=this._getIndex(index);var self=this,o=this.options;if(index!=o.selected){this.lis.eq(index).addClass(\"ui-state-disabled\");o.disabled.push(index);o.disabled.sort();this._trigger(\"disable\",null,this._ui(this.anchors[index],this.panels[index]));}\nreturn this;},select:function(index){index=this._getIndex(index);if(index==-1){if(this.options.collapsible&&this.options.selected!=-1){index=this.options.selected;}else{return this;}}\nthis.anchors.eq(index).trigger(this.options.event+\".tabs\");return this;},load:function(index){index=this._getIndex(index);var self=this,o=this.options,a=this.anchors.eq(index)[0],url=$.data(a,\"load.tabs\");this.abort();if(!url||this.element.queue(\"tabs\").length!==0&&$.data(a,\"cache.tabs\")){this.element.dequeue(\"tabs\");return;}\nthis.lis.eq(index).addClass(\"ui-state-processing\");if(o.spinner){var span=$(\"span\",a);span.data(\"label.tabs\",span.html()).html(o.spinner);}\nthis.xhr=$.ajax($.extend({},o.ajaxOptions,{url:url,success:function(r,s){self.element.find(self._sanitizeSelector(a.hash)).html(r);self._cleanup();if(o.cache){$.data(a,\"cache.tabs\",true);}\nself._trigger(\"load\",null,self._ui(self.anchors[index],self.panels[index]));try{o.ajaxOptions.success(r,s);}\ncatch(e){}},error:function(xhr,s,e){self._cleanup();self._trigger(\"load\",null,self._ui(self.anchors[index],self.panels[index]));try{o.ajaxOptions.error(xhr,s,index,a);}\ncatch(e){}}}));self.element.dequeue(\"tabs\");return this;},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue(\"tabs\",this.element.queue(\"tabs\").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr;}\nthis._cleanup();return this;},url:function(index,url){this.anchors.eq(index).removeData(\"cache.tabs\").data(\"load.tabs\",url);return this;},length:function(){return this.anchors.length;}});$.extend($.ui.tabs,{version:\"1.8.18\"});$.extend($.ui.tabs.prototype,{rotation:null,rotate:function(ms,continuing){var self=this,o=this.options;var rotate=self._rotate||(self._rotate=function(e){clearTimeout(self.rotation);self.rotation=setTimeout(function(){var t=o.selected;self.select(++t<self.anchors.length?t:0);},ms);if(e){e.stopPropagation();}});var stop=self._unrotate||(self._unrotate=!continuing?function(e){if(e.clientX){self.rotate(null);}}:function(e){t=o.selected;rotate();});if(ms){this.element.bind(\"tabsshow\",rotate);this.anchors.bind(o.event+\".tabs\",stop);rotate();}else{clearTimeout(self.rotation);this.element.unbind(\"tabsshow\",rotate);this.anchors.unbind(o.event+\".tabs\",stop);delete this._rotate;delete this._unrotate;}\nreturn this;}});})(jQuery);(function($,undefined){$.extend($.ui,{datepicker:{version:\"1.8.18\"}});var PROP_NAME='datepicker';var dpuuid=new Date().getTime();var instActive;function Datepicker(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId='ui-datepicker-div';this._inlineClass='ui-datepicker-inline';this._appendClass='ui-datepicker-append';this._triggerClass='ui-datepicker-trigger';this._dialogClass='ui-datepicker-dialog';this._disableClass='ui-datepicker-disabled';this._unselectableClass='ui-datepicker-unselectable';this._currentClass='ui-datepicker-current-day';this._dayOverClass='ui-datepicker-days-cell-over';this.regional=[];this.regional['']={closeText:'Done',prevText:'Prev',nextText:'Next',currentText:'Today',monthNames:['January','February','March','April','May','June','July','August','September','October','November','December'],monthNamesShort:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],dayNames:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],dayNamesShort:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],dayNamesMin:['Su','Mo','Tu','We','Th','Fr','Sa'],weekHeader:'Wk',dateFormat:'mm/dd/yy',firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:''};this._defaults={showOn:'focus',showAnim:'fadeIn',showOptions:{},defaultDate:null,appendText:'',buttonText:'...',buttonImage:'',buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:'c-10:c+10',showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:'+10',minDate:null,maxDate:null,duration:'fast',beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:'',altFormat:'',constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};$.extend(this._defaults,this.regional['']);this.dpDiv=bindHover($('<div id=\"'+this._mainDivId+'\" class=\"ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all\"><\/div>'));}\n$.extend(Datepicker.prototype,{markerClassName:'hasDatepicker',maxRows:4,log:function(){if(this.debug)\nconsole.log.apply('',arguments);},_widgetDatepicker:function(){return this.dpDiv;},setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this;},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute('date:'+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue);}catch(err){inlineSettings[attrName]=attrValue;}}}\nvar nodeName=target.nodeName.toLowerCase();var inline=(nodeName=='div'||nodeName=='span');if(!target.id){this.uuid+=1;target.id='dp'+this.uuid;}\nvar inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{});if(nodeName=='input'){this._connectDatepicker(target,inst);}else if(inline){this._inlineDatepicker(target,inst);}},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_-])/g,'\\\\\\\\$1');return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:(!inline?this.dpDiv:bindHover($('<div class=\"'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all\"><\/div>')))};},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName))\nreturn;this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind(\"setData.datepicker\",function(event,key,value){inst.settings[key]=value;}).bind(\"getData.datepicker\",function(event,key){return this._get(inst,key);});this._autoSize(inst);$.data(target,PROP_NAME,inst);if(inst.settings.disabled){this._disableDatepicker(target);}},_attachments:function(input,inst){var appendText=this._get(inst,'appendText');var isRTL=this._get(inst,'isRTL');if(inst.append)\ninst.append.remove();if(appendText){inst.append=$('<span class=\"'+this._appendClass+'\">'+appendText+'<\/span>');input[isRTL?'before':'after'](inst.append);}\ninput.unbind('focus',this._showDatepicker);if(inst.trigger)\ninst.trigger.remove();var showOn=this._get(inst,'showOn');if(showOn=='focus'||showOn=='both')\ninput.focus(this._showDatepicker);if(showOn=='button'||showOn=='both'){var buttonText=this._get(inst,'buttonText');var buttonImage=this._get(inst,'buttonImage');inst.trigger=$(this._get(inst,'buttonImageOnly')?$('<img/>').addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$('<button type=\"button\"><\/button>').addClass(this._triggerClass).html(buttonImage==''?buttonText:$('<img/>').attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?'before':'after'](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput==input[0])\n$.datepicker._hideDatepicker();else if($.datepicker._datepickerShowing&&$.datepicker._lastInput!=input[0]){$.datepicker._hideDatepicker();$.datepicker._showDatepicker(input[0]);}else\n$.datepicker._showDatepicker(input[0]);return false;});}},_autoSize:function(inst){if(this._get(inst,'autoSize')&&!inst.inline){var date=new Date(2009,12-1,20);var dateFormat=this._get(inst,'dateFormat');if(dateFormat.match(/[DM]/)){var findMax=function(names){var max=0;var maxI=0;for(var i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i;}}\nreturn maxI;};date.setMonth(findMax(this._get(inst,(dateFormat.match(/MM/)?'monthNames':'monthNamesShort'))));date.setDate(findMax(this._get(inst,(dateFormat.match(/DD/)?'dayNames':'dayNamesShort')))+20-date.getDay());}\ninst.input.attr('size',this._formatDate(inst,date).length);}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName))\nreturn;divSpan.addClass(this.markerClassName).append(inst.dpDiv).bind(\"setData.datepicker\",function(event,key,value){inst.settings[key]=value;}).bind(\"getData.datepicker\",function(event,key){return this._get(inst,key);});$.data(target,PROP_NAME,inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst);if(inst.settings.disabled){this._disableDatepicker(target);}\ninst.dpDiv.css(\"display\",\"block\");},_dialogDatepicker:function(input,date,onSelect,settings,pos){var inst=this._dialogInst;if(!inst){this.uuid+=1;var id='dp'+this.uuid;this._dialogInput=$('<input type=\"text\" id=\"'+id+'\" style=\"position: absolute; top: -100px; width: 0px; z-index: -10;\"/>');this._dialogInput.keydown(this._doKeyDown);$('body').append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],PROP_NAME,inst);}\nextendRemove(inst.settings,settings||{});date=(date&&date.constructor==Date?this._formatDate(inst,date):date);this._dialogInput.val(date);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){var browserWidth=document.documentElement.clientWidth;var browserHeight=document.documentElement.clientHeight;var scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;var scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY];}\nthis._dialogInput.css('left',(this._pos[0]+20)+'px').css('top',this._pos[1]+'px');inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI)\n$.blockUI(this.dpDiv);$.data(this._dialogInput[0],PROP_NAME,inst);return this;},_destroyDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return;}\nvar nodeName=target.nodeName.toLowerCase();$.removeData(target,PROP_NAME);if(nodeName=='input'){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind('focus',this._showDatepicker).unbind('keydown',this._doKeyDown).unbind('keypress',this._doKeyPress).unbind('keyup',this._doKeyUp);}else if(nodeName=='div'||nodeName=='span')\n$target.removeClass(this.markerClassName).empty();},_enableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return;}\nvar nodeName=target.nodeName.toLowerCase();if(nodeName=='input'){target.disabled=false;inst.trigger.filter('button').each(function(){this.disabled=false;}).end().filter('img').css({opacity:'1.0',cursor:''});}\nelse if(nodeName=='div'||nodeName=='span'){var inline=$target.children('.'+this._inlineClass);inline.children().removeClass('ui-state-disabled');inline.find(\"select.ui-datepicker-month, select.ui-datepicker-year\").removeAttr(\"disabled\");}\nthis._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value);});},_disableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return;}\nvar nodeName=target.nodeName.toLowerCase();if(nodeName=='input'){target.disabled=true;inst.trigger.filter('button').each(function(){this.disabled=true;}).end().filter('img').css({opacity:'0.5',cursor:'default'});}\nelse if(nodeName=='div'||nodeName=='span'){var inline=$target.children('.'+this._inlineClass);inline.children().addClass('ui-state-disabled');inline.find(\"select.ui-datepicker-month, select.ui-datepicker-year\").attr(\"disabled\",\"disabled\");}\nthis._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value);});this._disabledInputs[this._disabledInputs.length]=target;},_isDisabledDatepicker:function(target){if(!target){return false;}\nfor(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]==target)\nreturn true;}\nreturn false;},_getInst:function(target){try{return $.data(target,PROP_NAME);}\ncatch(err){throw'Missing instance data for this datepicker';}},_optionDatepicker:function(target,name,value){var inst=this._getInst(target);if(arguments.length==2&&typeof name=='string'){return(name=='defaults'?$.extend({},$.datepicker._defaults):(inst?(name=='all'?$.extend({},inst.settings):this._get(inst,name)):null));}\nvar settings=name||{};if(typeof name=='string'){settings={};settings[name]=value;}\nif(inst){if(this._curInst==inst){this._hideDatepicker();}\nvar date=this._getDateDatepicker(target,true);var minDate=this._getMinMaxDate(inst,'min');var maxDate=this._getMinMaxDate(inst,'max');extendRemove(inst.settings,settings);if(minDate!==null&&settings['dateFormat']!==undefined&&settings['minDate']===undefined)\ninst.settings.minDate=this._formatDate(inst,minDate);if(maxDate!==null&&settings['dateFormat']!==undefined&&settings['maxDate']===undefined)\ninst.settings.maxDate=this._formatDate(inst,maxDate);this._attachments($(target),inst);this._autoSize(inst);this._setDate(inst,date);this._updateAlternate(inst);this._updateDatepicker(inst);}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value);},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst);}},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst);}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);if(inst&&!inst.inline)\nthis._setDateFromField(inst,noDefault);return(inst?this._getDate(inst):null);},_doKeyDown:function(event){var inst=$.datepicker._getInst(event.target);var handled=true;var isRTL=inst.dpDiv.is('.ui-datepicker-rtl');inst._keyEvent=true;if($.datepicker._datepickerShowing)\nswitch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:var sel=$('td.'+$.datepicker._dayOverClass+':not(.'+\n$.datepicker._currentClass+')',inst.dpDiv);if(sel[0])\n$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]);var onSelect=$.datepicker._get(inst,'onSelect');if(onSelect){var dateStr=$.datepicker._formatDate(inst);onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);}\nelse\n$.datepicker._hideDatepicker();return false;break;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,'stepBigMonths'):-$.datepicker._get(inst,'stepMonths')),'M');break;case 34:$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,'stepBigMonths'):+$.datepicker._get(inst,'stepMonths')),'M');break;case 35:if(event.ctrlKey||event.metaKey)$.datepicker._clearDate(event.target);handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey)$.datepicker._gotoToday(event.target);handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,(isRTL?+1:-1),'D');handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey)$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,'stepBigMonths'):-$.datepicker._get(inst,'stepMonths')),'M');break;case 38:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,-7,'D');handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,(isRTL?-1:+1),'D');handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey)$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,'stepBigMonths'):+$.datepicker._get(inst,'stepMonths')),'M');break;case 40:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,+7,'D');handled=event.ctrlKey||event.metaKey;break;default:handled=false;}\nelse if(event.keyCode==36&&event.ctrlKey)\n$.datepicker._showDatepicker(this);else{handled=false;}\nif(handled){event.preventDefault();event.stopPropagation();}},_doKeyPress:function(event){var inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,'constrainInput')){var chars=$.datepicker._possibleChars($.datepicker._get(inst,'dateFormat'));var chr=String.fromCharCode(event.charCode==undefined?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||(chr<' '||!chars||chars.indexOf(chr)>-1);}},_doKeyUp:function(event){var inst=$.datepicker._getInst(event.target);if(inst.input.val()!=inst.lastVal){try{var date=$.datepicker.parseDate($.datepicker._get(inst,'dateFormat'),(inst.input?inst.input.val():null),$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst);}}\ncatch(event){$.datepicker.log(event);}}\nreturn true;},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!='input')\ninput=$('input',input.parentNode)[0];if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput==input)\nreturn;var inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!=inst){$.datepicker._curInst.dpDiv.stop(true,true);if(inst&&$.datepicker._datepickerShowing){$.datepicker._hideDatepicker($.datepicker._curInst.input[0]);}}\nvar beforeShow=$.datepicker._get(inst,'beforeShow');var beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{};if(beforeShowSettings===false){return;}\nextendRemove(inst.settings,beforeShowSettings);inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog)\ninput.value='';if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight;}\nvar isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css('position')=='fixed';return!isFixed;});if(isFixed&&$.browser.opera){$.datepicker._pos[0]-=document.documentElement.scrollLeft;$.datepicker._pos[1]-=document.documentElement.scrollTop;}\nvar offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.empty();inst.dpDiv.css({position:'absolute',display:'block',top:'-1000px'});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:($.datepicker._inDialog&&$.blockUI?'static':(isFixed?'fixed':'absolute')),display:'none',left:offset.left+'px',top:offset.top+'px'});if(!inst.inline){var showAnim=$.datepicker._get(inst,'showAnim');var duration=$.datepicker._get(inst,'duration');var postProcess=function(){var cover=inst.dpDiv.find('iframe.ui-datepicker-cover');if(!!cover.length){var borders=$.datepicker._getBorders(inst.dpDiv);cover.css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()});}};inst.dpDiv.zIndex($(input).zIndex()+1);$.datepicker._datepickerShowing=true;if($.effects&&$.effects[showAnim])\ninst.dpDiv.show(showAnim,$.datepicker._get(inst,'showOptions'),duration,postProcess);else\ninst.dpDiv[showAnim||'show']((showAnim?duration:null),postProcess);if(!showAnim||!duration)\npostProcess();if(inst.input.is(':visible')&&!inst.input.is(':disabled'))\ninst.input.focus();$.datepicker._curInst=inst;}},_updateDatepicker:function(inst){var self=this;self.maxRows=4;var borders=$.datepicker._getBorders(inst.dpDiv);instActive=inst;inst.dpDiv.empty().append(this._generateHTML(inst));var cover=inst.dpDiv.find('iframe.ui-datepicker-cover');if(!!cover.length){cover.css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()})}\ninst.dpDiv.find('.'+this._dayOverClass+' a').mouseover();var numMonths=this._getNumberOfMonths(inst);var cols=numMonths[1];var width=17;inst.dpDiv.removeClass('ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4').width('');if(cols>1)\ninst.dpDiv.addClass('ui-datepicker-multi-'+cols).css('width',(width*cols)+'em');inst.dpDiv[(numMonths[0]!=1||numMonths[1]!=1?'add':'remove')+'Class']('ui-datepicker-multi');inst.dpDiv[(this._get(inst,'isRTL')?'add':'remove')+'Class']('ui-datepicker-rtl');if(inst==$.datepicker._curInst&&$.datepicker._datepickerShowing&&inst.input&&inst.input.is(':visible')&&!inst.input.is(':disabled')&&inst.input[0]!=document.activeElement)\ninst.input.focus();if(inst.yearshtml){var origyearshtml=inst.yearshtml;setTimeout(function(){if(origyearshtml===inst.yearshtml&&inst.yearshtml){inst.dpDiv.find('select.ui-datepicker-year:first').replaceWith(inst.yearshtml);}\norigyearshtml=inst.yearshtml=null;},0);}},_getBorders:function(elem){var convert=function(value){return{thin:1,medium:2,thick:3}[value]||value;};return[parseFloat(convert(elem.css('border-left-width'))),parseFloat(convert(elem.css('border-top-width')))];},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth();var dpHeight=inst.dpDiv.outerHeight();var inputWidth=inst.input?inst.input.outerWidth():0;var inputHeight=inst.input?inst.input.outerHeight():0;var viewWidth=document.documentElement.clientWidth+$(document).scrollLeft();var viewHeight=document.documentElement.clientHeight+$(document).scrollTop();offset.left-=(this._get(inst,'isRTL')?(dpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left==inst.input.offset().left)?$(document).scrollLeft():0;offset.top-=(isFixed&&offset.top==(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=Math.min(offset.left,(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,(offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(dpHeight+inputHeight):0);return offset;},_findPos:function(obj){var inst=this._getInst(obj);var isRTL=this._get(inst,'isRTL');while(obj&&(obj.type=='hidden'||obj.nodeType!=1||$.expr.filters.hidden(obj))){obj=obj[isRTL?'previousSibling':'nextSibling'];}\nvar position=$(obj).offset();return[position.left,position.top];},_hideDatepicker:function(input){var inst=this._curInst;if(!inst||(input&&inst!=$.data(input,PROP_NAME)))\nreturn;if(this._datepickerShowing){var showAnim=this._get(inst,'showAnim');var duration=this._get(inst,'duration');var self=this;var postProcess=function(){$.datepicker._tidyDialog(inst);self._curInst=null;};if($.effects&&$.effects[showAnim])\ninst.dpDiv.hide(showAnim,$.datepicker._get(inst,'showOptions'),duration,postProcess);else\ninst.dpDiv[(showAnim=='slideDown'?'slideUp':(showAnim=='fadeIn'?'fadeOut':'hide'))]((showAnim?duration:null),postProcess);if(!showAnim)\npostProcess();this._datepickerShowing=false;var onClose=this._get(inst,'onClose');if(onClose)\nonClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():''),inst]);this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:'absolute',left:'0',top:'-100px'});if($.blockUI){$.unblockUI();$('body').append(this.dpDiv);}}\nthis._inDialog=false;}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind('.ui-datepicker-calendar');},_checkExternalClick:function(event){if(!$.datepicker._curInst)\nreturn;var $target=$(event.target),inst=$.datepicker._getInst($target[0]);if((($target[0].id!=$.datepicker._mainDivId&&$target.parents('#'+$.datepicker._mainDivId).length==0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.closest(\".\"+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)))||($target.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=inst))\n$.datepicker._hideDatepicker();},_adjustDate:function(id,offset,period){var target=$(id);var inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return;}\nthis._adjustInstDate(inst,offset+\n(period=='M'?this._get(inst,'showCurrentAtPos'):0),period);this._updateDatepicker(inst);},_gotoToday:function(id){var target=$(id);var inst=this._getInst(target[0]);if(this._get(inst,'gotoCurrent')&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear;}\nelse{var date=new Date();inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();}\nthis._notifyChange(inst);this._adjustDate(target);},_selectMonthYear:function(id,select,period){var target=$(id);var inst=this._getInst(target[0]);inst['selected'+(period=='M'?'Month':'Year')]=inst['draw'+(period=='M'?'Month':'Year')]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target);},_selectDay:function(id,month,year,td){var target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return;}\nvar inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$('a',td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear));},_clearDate:function(id){var target=$(id);var inst=this._getInst(target[0]);this._selectDate(target,'');},_selectDate:function(id,dateStr){var target=$(id);var inst=this._getInst(target[0]);dateStr=(dateStr!=null?dateStr:this._formatDate(inst));if(inst.input)\ninst.input.val(dateStr);this._updateAlternate(inst);var onSelect=this._get(inst,'onSelect');if(onSelect)\nonSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);else if(inst.input)\ninst.input.trigger('change');if(inst.inline)\nthis._updateDatepicker(inst);else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof(inst.input[0])!='object')\ninst.input.focus();this._lastInput=null;}},_updateAlternate:function(inst){var altField=this._get(inst,'altField');if(altField){var altFormat=this._get(inst,'altFormat')||this._get(inst,'dateFormat');var date=this._getDate(inst);var dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr);});}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),''];},iso8601Week:function(date){var checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/86400000)/7)+1;},parseDate:function(format,value,settings){if(format==null||value==null)\nthrow'Invalid arguments';value=(typeof value=='object'?value.toString():value+'');if(value=='')\nreturn null;var shortYearCutoff=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff;shortYearCutoff=(typeof shortYearCutoff!='string'?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var year=-1;var month=-1;var day=-1;var doy=-1;var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches)\niFormat++;return matches;};var getNumber=function(match){var isDoubled=lookAhead(match);var size=(match=='@'?14:(match=='!'?20:(match=='y'&&isDoubled?4:(match=='o'?3:2))));var digits=new RegExp('^\\\\d{1,'+size+'}');var num=value.substring(iValue).match(digits);if(!num)\nthrow'Missing number at position '+iValue;iValue+=num[0].length;return parseInt(num[0],10);};var getName=function(match,shortNames,longNames){var names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]];}).sort(function(a,b){return-(a[1].length-b[1].length);});var index=-1;$.each(names,function(i,pair){var name=pair[1];if(value.substr(iValue,name.length).toLowerCase()==name.toLowerCase()){index=pair[0];iValue+=name.length;return false;}});if(index!=-1)\nreturn index+1;else\nthrow'Unknown name at position '+iValue;};var checkLiteral=function(){if(value.charAt(iValue)!=format.charAt(iFormat))\nthrow'Unexpected literal at position '+iValue;iValue++;};var iValue=0;for(var iFormat=0;iFormat<format.length;iFormat++){if(literal)\nif(format.charAt(iFormat)==\"'\"&&!lookAhead(\"'\"))\nliteral=false;else\ncheckLiteral();else\nswitch(format.charAt(iFormat)){case'd':day=getNumber('d');break;case'D':getName('D',dayNamesShort,dayNames);break;case'o':doy=getNumber('o');break;case'm':month=getNumber('m');break;case'M':month=getName('M',monthNamesShort,monthNames);break;case'y':year=getNumber('y');break;case'@':var date=new Date(getNumber('@'));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case'!':var date=new Date((getNumber('!')-this._ticksTo1970)/10000);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case\"'\":if(lookAhead(\"'\"))\ncheckLiteral();else\nliteral=true;break;default:checkLiteral();}}\nif(iValue<value.length){throw\"Extra/unparsed characters found in date: \"+value.substring(iValue);}\nif(year==-1)\nyear=new Date().getFullYear();else if(year<100)\nyear+=new Date().getFullYear()-new Date().getFullYear()%100+\n(year<=shortYearCutoff?0:-100);if(doy>-1){month=1;day=doy;do{var dim=this._getDaysInMonth(year,month-1);if(day<=dim)\nbreak;month++;day-=dim;}while(true);}\nvar date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!=year||date.getMonth()+1!=month||date.getDate()!=day)\nthrow'Invalid date';return date;},ATOM:'yy-mm-dd',COOKIE:'D, dd M yy',ISO_8601:'yy-mm-dd',RFC_822:'D, d M y',RFC_850:'DD, dd-M-y',RFC_1036:'D, d M y',RFC_1123:'D, d M yy',RFC_2822:'D, d M yy',RSS:'D, d M y',TICKS:'!',TIMESTAMP:'@',W3C:'yy-mm-dd',_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+\nMath.floor(1970/400))*24*60*60*10000000),formatDate:function(format,date,settings){if(!date)\nreturn'';var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches)\niFormat++;return matches;};var formatNumber=function(match,value,len){var num=''+value;if(lookAhead(match))\nwhile(num.length<len)\nnum='0'+num;return num;};var formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value]);};var output='';var literal=false;if(date)\nfor(var iFormat=0;iFormat<format.length;iFormat++){if(literal)\nif(format.charAt(iFormat)==\"'\"&&!lookAhead(\"'\"))\nliteral=false;else\noutput+=format.charAt(iFormat);else\nswitch(format.charAt(iFormat)){case'd':output+=formatNumber('d',date.getDate(),2);break;case'D':output+=formatName('D',date.getDay(),dayNamesShort,dayNames);break;case'o':output+=formatNumber('o',Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/86400000),3);break;case'm':output+=formatNumber('m',date.getMonth()+1,2);break;case'M':output+=formatName('M',date.getMonth(),monthNamesShort,monthNames);break;case'y':output+=(lookAhead('y')?date.getFullYear():(date.getYear()%100<10?'0':'')+date.getYear()%100);break;case'@':output+=date.getTime();break;case'!':output+=date.getTime()*10000+this._ticksTo1970;break;case\"'\":if(lookAhead(\"'\"))\noutput+=\"'\";else\nliteral=true;break;default:output+=format.charAt(iFormat);}}\nreturn output;},_possibleChars:function(format){var chars='';var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches)\niFormat++;return matches;};for(var iFormat=0;iFormat<format.length;iFormat++)\nif(literal)\nif(format.charAt(iFormat)==\"'\"&&!lookAhead(\"'\"))\nliteral=false;else\nchars+=format.charAt(iFormat);else\nswitch(format.charAt(iFormat)){case'd':case'm':case'y':case'@':chars+='0123456789';break;case'D':case'M':return null;case\"'\":if(lookAhead(\"'\"))\nchars+=\"'\";else\nliteral=true;break;default:chars+=format.charAt(iFormat);}\nreturn chars;},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name];},_setDateFromField:function(inst,noDefault){if(inst.input.val()==inst.lastVal){return;}\nvar dateFormat=this._get(inst,'dateFormat');var dates=inst.lastVal=inst.input?inst.input.val():null;var date,defaultDate;date=defaultDate=this._getDefaultDate(inst);var settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate;}catch(event){this.log(event);dates=(noDefault?'':dates);}\ninst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=(dates?date.getDate():0);inst.currentMonth=(dates?date.getMonth():0);inst.currentYear=(dates?date.getFullYear():0);this._adjustInstDate(inst);},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,'defaultDate'),new Date()));},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date;};var offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,'dateFormat'),offset,$.datepicker._getFormatConfig(inst));}\ncatch(e){}\nvar date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date();var year=date.getFullYear();var month=date.getMonth();var day=date.getDate();var pattern=/([+-]?[0-9]+)\\s*(d|D|w|W|m|M|y|Y)?/g;var matches=pattern.exec(offset);while(matches){switch(matches[2]||'d'){case'd':case'D':day+=parseInt(matches[1],10);break;case'w':case'W':day+=parseInt(matches[1],10)*7;break;case'm':case'M':month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case'y':case'Y':year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;}\nmatches=pattern.exec(offset);}\nreturn new Date(year,month,day);};var newDate=(date==null||date===''?defaultDate:(typeof date=='string'?offsetString(date):(typeof date=='number'?(isNaN(date)?defaultDate:offsetNumeric(date)):new Date(date.getTime()))));newDate=(newDate&&newDate.toString()=='Invalid Date'?defaultDate:newDate);if(newDate){newDate.setHours(0);newDate.setMinutes(0);newDate.setSeconds(0);newDate.setMilliseconds(0);}\nreturn this._daylightSavingAdjust(newDate);},_daylightSavingAdjust:function(date){if(!date)return null;date.setHours(date.getHours()>12?date.getHours()+2:0);return date;},_setDate:function(inst,date,noChange){var clear=!date;var origMonth=inst.selectedMonth;var origYear=inst.selectedYear;var newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date()));inst.selectedDay=inst.currentDay=newDate.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear();if((origMonth!=inst.selectedMonth||origYear!=inst.selectedYear)&&!noChange)\nthis._notifyChange(inst);this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?'':this._formatDate(inst));}},_getDate:function(inst){var startDate=(!inst.currentYear||(inst.input&&inst.input.val()=='')?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return startDate;},_generateHTML:function(inst){var today=new Date();today=this._daylightSavingAdjust(new Date(today.getFullYear(),today.getMonth(),today.getDate()));var isRTL=this._get(inst,'isRTL');var showButtonPanel=this._get(inst,'showButtonPanel');var hideIfNoPrevNext=this._get(inst,'hideIfNoPrevNext');var navigationAsDateFormat=this._get(inst,'navigationAsDateFormat');var numMonths=this._getNumberOfMonths(inst);var showCurrentAtPos=this._get(inst,'showCurrentAtPos');var stepMonths=this._get(inst,'stepMonths');var isMultiMonth=(numMonths[0]!=1||numMonths[1]!=1);var currentDate=this._daylightSavingAdjust((!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));var minDate=this._getMinMaxDate(inst,'min');var maxDate=this._getMinMaxDate(inst,'max');var drawMonth=inst.drawMonth-showCurrentAtPos;var drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--;}\nif(maxDate){var maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-(numMonths[0]*numMonths[1])+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--;}}}\ninst.drawMonth=drawMonth;inst.drawYear=drawYear;var prevText=this._get(inst,'prevText');prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));var prev=(this._canAdjustMonth(inst,-1,drawYear,drawMonth)?'<a class=\"ui-datepicker-prev ui-corner-all\" onclick=\"DP_jQuery_'+dpuuid+'.datepicker._adjustDate(\\'#'+inst.id+'\\', -'+stepMonths+', \\'M\\');\"'+' title=\"'+prevText+'\"><span class=\"ui-icon ui-icon-circle-triangle-'+(isRTL?'e':'w')+'\">'+prevText+'<\/span><\/a>':(hideIfNoPrevNext?'':'<a class=\"ui-datepicker-prev ui-corner-all ui-state-disabled\" title=\"'+prevText+'\"><span class=\"ui-icon ui-icon-circle-triangle-'+(isRTL?'e':'w')+'\">'+prevText+'<\/span><\/a>'));var nextText=this._get(inst,'nextText');nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));var next=(this._canAdjustMonth(inst,+1,drawYear,drawMonth)?'<a class=\"ui-datepicker-next ui-corner-all\" onclick=\"DP_jQuery_'+dpuuid+'.datepicker._adjustDate(\\'#'+inst.id+'\\', +'+stepMonths+', \\'M\\');\"'+' title=\"'+nextText+'\"><span class=\"ui-icon ui-icon-circle-triangle-'+(isRTL?'w':'e')+'\">'+nextText+'<\/span><\/a>':(hideIfNoPrevNext?'':'<a class=\"ui-datepicker-next ui-corner-all ui-state-disabled\" title=\"'+nextText+'\"><span class=\"ui-icon ui-icon-circle-triangle-'+(isRTL?'w':'e')+'\">'+nextText+'<\/span><\/a>'));var currentText=this._get(inst,'currentText');var gotoDate=(this._get(inst,'gotoCurrent')&&inst.currentDay?currentDate:today);currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));var controls=(!inst.inline?'<button type=\"button\" class=\"ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all\" onclick=\"DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();\">'+this._get(inst,'closeText')+'<\/button>':'');var buttonPanel=(showButtonPanel)?'<div class=\"ui-datepicker-buttonpane ui-widget-content\">'+(isRTL?controls:'')+\n(this._isInRange(inst,gotoDate)?'<button type=\"button\" class=\"ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all\" onclick=\"DP_jQuery_'+dpuuid+'.datepicker._gotoToday(\\'#'+inst.id+'\\');\"'+'>'+currentText+'<\/button>':'')+(isRTL?'':controls)+'<\/div>':'';var firstDay=parseInt(this._get(inst,'firstDay'),10);firstDay=(isNaN(firstDay)?0:firstDay);var showWeek=this._get(inst,'showWeek');var dayNames=this._get(inst,'dayNames');var dayNamesShort=this._get(inst,'dayNamesShort');var dayNamesMin=this._get(inst,'dayNamesMin');var monthNames=this._get(inst,'monthNames');var monthNamesShort=this._get(inst,'monthNamesShort');var beforeShowDay=this._get(inst,'beforeShowDay');var showOtherMonths=this._get(inst,'showOtherMonths');var selectOtherMonths=this._get(inst,'selectOtherMonths');var calculateWeek=this._get(inst,'calculateWeek')||this.iso8601Week;var defaultDate=this._getDefaultDate(inst);var html='';for(var row=0;row<numMonths[0];row++){var group='';this.maxRows=4;for(var col=0;col<numMonths[1];col++){var selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));var cornerClass=' ui-corner-all';var calender='';if(isMultiMonth){calender+='<div class=\"ui-datepicker-group';if(numMonths[1]>1)\nswitch(col){case 0:calender+=' ui-datepicker-group-first';cornerClass=' ui-corner-'+(isRTL?'right':'left');break;case numMonths[1]-1:calender+=' ui-datepicker-group-last';cornerClass=' ui-corner-'+(isRTL?'left':'right');break;default:calender+=' ui-datepicker-group-middle';cornerClass='';break;}\ncalender+='\">';}\ncalender+='<div class=\"ui-datepicker-header ui-widget-header ui-helper-clearfix'+cornerClass+'\">'+\n(/all|left/.test(cornerClass)&&row==0?(isRTL?next:prev):'')+\n(/all|right/.test(cornerClass)&&row==0?(isRTL?prev:next):'')+\nthis._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+'<\/div><table class=\"ui-datepicker-calendar\"><thead>'+'<tr>';var thead=(showWeek?'<th class=\"ui-datepicker-week-col\">'+this._get(inst,'weekHeader')+'<\/th>':'');for(var dow=0;dow<7;dow++){var day=(dow+firstDay)%7;thead+='<th'+((dow+firstDay+6)%7>=5?' class=\"ui-datepicker-week-end\"':'')+'>'+'<span title=\"'+dayNames[day]+'\">'+dayNamesMin[day]+'<\/span><\/th>';}\ncalender+=thead+'<\/tr><\/thead><tbody>';var daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear==inst.selectedYear&&drawMonth==inst.selectedMonth)\ninst.selectedDay=Math.min(inst.selectedDay,daysInMonth);var leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;var curRows=Math.ceil((leadDays+daysInMonth)/7);var numRows=(isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:curRows);this.maxRows=numRows;var printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(var dRow=0;dRow<numRows;dRow++){calender+='<tr>';var tbody=(!showWeek?'':'<td class=\"ui-datepicker-week-col\">'+\nthis._get(inst,'calculateWeek')(printDate)+'<\/td>');for(var dow=0;dow<7;dow++){var daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,'']);var otherMonth=(printDate.getMonth()!=drawMonth);var unselectable=(otherMonth&&!selectOtherMonths)||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);tbody+='<td class=\"'+\n((dow+firstDay+6)%7>=5?' ui-datepicker-week-end':'')+\n(otherMonth?' ui-datepicker-other-month':'')+\n((printDate.getTime()==selectedDate.getTime()&&drawMonth==inst.selectedMonth&&inst._keyEvent)||(defaultDate.getTime()==printDate.getTime()&&defaultDate.getTime()==selectedDate.getTime())?' '+this._dayOverClass:'')+\n(unselectable?' '+this._unselectableClass+' ui-state-disabled':'')+\n(otherMonth&&!showOtherMonths?'':' '+daySettings[1]+\n(printDate.getTime()==currentDate.getTime()?' '+this._currentClass:'')+\n(printDate.getTime()==today.getTime()?' ui-datepicker-today':''))+'\"'+\n((!otherMonth||showOtherMonths)&&daySettings[2]?' title=\"'+daySettings[2]+'\"':'')+\n(unselectable?'':' onclick=\"DP_jQuery_'+dpuuid+'.datepicker._selectDay(\\'#'+\ninst.id+'\\','+printDate.getMonth()+','+printDate.getFullYear()+', this);return false;\"')+'>'+\n(otherMonth&&!showOtherMonths?'&#xa0;':(unselectable?'<span class=\"ui-state-default\">'+printDate.getDate()+'<\/span>':'<a class=\"ui-state-default'+\n(printDate.getTime()==today.getTime()?' ui-state-highlight':'')+\n(printDate.getTime()==currentDate.getTime()?' ui-state-active':'')+\n(otherMonth?' ui-priority-secondary':'')+'\" href=\"#\">'+printDate.getDate()+'<\/a>'))+'<\/td>';printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate);}\ncalender+=tbody+'<\/tr>';}\ndrawMonth++;if(drawMonth>11){drawMonth=0;drawYear++;}\ncalender+='<\/tbody><\/table>'+(isMultiMonth?'<\/div>'+\n((numMonths[0]>0&&col==numMonths[1]-1)?'<div class=\"ui-datepicker-row-break\"><\/div>':''):'');group+=calender;}\nhtml+=group;}\nhtml+=buttonPanel+($.browser.msie&&parseInt($.browser.version,10)<7&&!inst.inline?'<iframe src=\"javascript:false;\" class=\"ui-datepicker-cover\" frameborder=\"0\"><\/iframe>':'');inst._keyEvent=false;return html;},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var changeMonth=this._get(inst,'changeMonth');var changeYear=this._get(inst,'changeYear');var showMonthAfterYear=this._get(inst,'showMonthAfterYear');var html='<div class=\"ui-datepicker-title\">';var monthHtml='';if(secondary||!changeMonth)\nmonthHtml+='<span class=\"ui-datepicker-month\">'+monthNames[drawMonth]+'<\/span>';else{var inMinYear=(minDate&&minDate.getFullYear()==drawYear);var inMaxYear=(maxDate&&maxDate.getFullYear()==drawYear);monthHtml+='<select class=\"ui-datepicker-month\" '+'onchange=\"DP_jQuery_'+dpuuid+'.datepicker._selectMonthYear(\\'#'+inst.id+'\\', this, \\'M\\');\" '+'>';for(var month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth()))\nmonthHtml+='<option value=\"'+month+'\"'+\n(month==drawMonth?' selected=\"selected\"':'')+'>'+monthNamesShort[month]+'<\/option>';}\nmonthHtml+='<\/select>';}\nif(!showMonthAfterYear)\nhtml+=monthHtml+(secondary||!(changeMonth&&changeYear)?'&#xa0;':'');if(!inst.yearshtml){inst.yearshtml='';if(secondary||!changeYear)\nhtml+='<span class=\"ui-datepicker-year\">'+drawYear+'<\/span>';else{var years=this._get(inst,'yearRange').split(':');var thisYear=new Date().getFullYear();var determineYear=function(value){var year=(value.match(/c[+-].*/)?drawYear+parseInt(value.substring(1),10):(value.match(/[+-].*/)?thisYear+parseInt(value,10):parseInt(value,10)));return(isNaN(year)?thisYear:year);};var year=determineYear(years[0]);var endYear=Math.max(year,determineYear(years[1]||''));year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);inst.yearshtml+='<select class=\"ui-datepicker-year\" '+'onchange=\"DP_jQuery_'+dpuuid+'.datepicker._selectMonthYear(\\'#'+inst.id+'\\', this, \\'Y\\');\" '+'>';for(;year<=endYear;year++){inst.yearshtml+='<option value=\"'+year+'\"'+\n(year==drawYear?' selected=\"selected\"':'')+'>'+year+'<\/option>';}\ninst.yearshtml+='<\/select>';html+=inst.yearshtml;inst.yearshtml=null;}}\nhtml+=this._get(inst,'yearSuffix');if(showMonthAfterYear)\nhtml+=(secondary||!(changeMonth&&changeYear)?'&#xa0;':'')+monthHtml;html+='<\/div>';return html;},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period=='Y'?offset:0);var month=inst.drawMonth+(period=='M'?offset:0);var day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+\n(period=='D'?offset:0);var date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period=='M'||period=='Y')\nthis._notifyChange(inst);},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,'min');var maxDate=this._getMinMaxDate(inst,'max');var newDate=(minDate&&date<minDate?minDate:date);newDate=(maxDate&&newDate>maxDate?maxDate:newDate);return newDate;},_notifyChange:function(inst){var onChange=this._get(inst,'onChangeMonthYear');if(onChange)\nonChange.apply((inst.input?inst.input[0]:null),[inst.selectedYear,inst.selectedMonth+1,inst]);},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,'numberOfMonths');return(numMonths==null?[1,1]:(typeof numMonths=='number'?[1,numMonths]:numMonths));},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+'Date'),null);},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate();},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay();},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst);var date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0)\ndate.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()));return this._isInRange(inst,date);},_isInRange:function(inst,date){var minDate=this._getMinMaxDate(inst,'min');var maxDate=this._getMinMaxDate(inst,'max');return((!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime()));},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,'shortYearCutoff');shortYearCutoff=(typeof shortYearCutoff!='string'?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,'dayNamesShort'),dayNames:this._get(inst,'dayNames'),monthNamesShort:this._get(inst,'monthNamesShort'),monthNames:this._get(inst,'monthNames')};},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear;}\nvar date=(day?(typeof day=='object'?day:this._daylightSavingAdjust(new Date(year,month,day))):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return this.formatDate(this._get(inst,'dateFormat'),date,this._getFormatConfig(inst));}});function bindHover(dpDiv){var selector='button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a';return dpDiv.bind('mouseout',function(event){var elem=$(event.target).closest(selector);if(!elem.length){return;}\nelem.removeClass(\"ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover\");}).bind('mouseover',function(event){var elem=$(event.target).closest(selector);if($.datepicker._isDisabledDatepicker(instActive.inline?dpDiv.parent()[0]:instActive.input[0])||!elem.length){return;}\nelem.parents('.ui-datepicker-calendar').find('a').removeClass('ui-state-hover');elem.addClass('ui-state-hover');if(elem.hasClass('ui-datepicker-prev'))elem.addClass('ui-datepicker-prev-hover');if(elem.hasClass('ui-datepicker-next'))elem.addClass('ui-datepicker-next-hover');});}\nfunction extendRemove(target,props){$.extend(target,props);for(var name in props)\nif(props[name]==null||props[name]==undefined)\ntarget[name]=props[name];return target;};function isArray(a){return(a&&(($.browser.safari&&typeof a=='object'&&a.length)||(a.constructor&&a.constructor.toString().match(/\\Array\\(\\)/))));};$.fn.datepicker=function(options){if(!this.length){return this;}\nif(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick).find('body').append($.datepicker.dpDiv);$.datepicker.initialized=true;}\nvar otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options=='string'&&(options=='isDisabled'||options=='getDate'||options=='widget'))\nreturn $.datepicker['_'+options+'Datepicker'].apply($.datepicker,[this[0]].concat(otherArgs));if(options=='option'&&arguments.length==2&&typeof arguments[1]=='string')\nreturn $.datepicker['_'+options+'Datepicker'].apply($.datepicker,[this[0]].concat(otherArgs));return this.each(function(){typeof options=='string'?$.datepicker['_'+options+'Datepicker'].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options);});};$.datepicker=new Datepicker();$.datepicker.initialized=false;$.datepicker.uuid=new Date().getTime();$.datepicker.version=\"1.8.18\";window['DP_jQuery_'+dpuuid]=$;})(jQuery);(function($,undefined){$.widget(\"ui.progressbar\",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass(\"ui-progressbar ui-widget ui-widget-content ui-corner-all\").attr({role:\"progressbar\",\"aria-valuemin\":this.min,\"aria-valuemax\":this.options.max,\"aria-valuenow\":this._value()});this.valueDiv=$(\"<div class='ui-progressbar-value ui-widget-header ui-corner-left'><\/div>\").appendTo(this.element);this.oldValue=this._value();this._refreshValue();},destroy:function(){this.element.removeClass(\"ui-progressbar ui-widget ui-widget-content ui-corner-all\").removeAttr(\"role\").removeAttr(\"aria-valuemin\").removeAttr(\"aria-valuemax\").removeAttr(\"aria-valuenow\");this.valueDiv.remove();$.Widget.prototype.destroy.apply(this,arguments);},value:function(newValue){if(newValue===undefined){return this._value();}\nthis._setOption(\"value\",newValue);return this;},_setOption:function(key,value){if(key===\"value\"){this.options.value=value;this._refreshValue();if(this._value()===this.options.max){this._trigger(\"complete\");}}\n$.Widget.prototype._setOption.apply(this,arguments);},_value:function(){var val=this.options.value;if(typeof val!==\"number\"){val=0;}\nreturn Math.min(this.options.max,Math.max(this.min,val));},_percentage:function(){return 100*this._value()/this.options.max;},_refreshValue:function(){var value=this.value();var percentage=this._percentage();if(this.oldValue!==value){this.oldValue=value;this._trigger(\"change\");}\nthis.valueDiv.toggle(value>this.min).toggleClass(\"ui-corner-right\",value===this.options.max).width(percentage.toFixed(0)+\"%\");this.element.attr(\"aria-valuenow\",value);}});$.extend($.ui.progressbar,{version:\"1.8.18\"});})(jQuery);;jQuery.effects||(function($,undefined){$.effects={};$.each(['backgroundColor','borderBottomColor','borderLeftColor','borderRightColor','borderTopColor','borderColor','color','outlineColor'],function(i,attr){$.fx.step[attr]=function(fx){if(!fx.colorInit){fx.start=getColor(fx.elem,attr);fx.end=getRGB(fx.end);fx.colorInit=true;}\nfx.elem.style[attr]='rgb('+\nMath.max(Math.min(parseInt((fx.pos*(fx.end[0]-fx.start[0]))+fx.start[0],10),255),0)+','+\nMath.max(Math.min(parseInt((fx.pos*(fx.end[1]-fx.start[1]))+fx.start[1],10),255),0)+','+\nMath.max(Math.min(parseInt((fx.pos*(fx.end[2]-fx.start[2]))+fx.start[2],10),255),0)+')';};});function getRGB(color){var result;if(color&&color.constructor==Array&&color.length==3)\nreturn color;if(result=/rgb\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*\\)/.exec(color))\nreturn[parseInt(result[1],10),parseInt(result[2],10),parseInt(result[3],10)];if(result=/rgb\\(\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*\\)/.exec(color))\nreturn[parseFloat(result[1])*2.55,parseFloat(result[2])*2.55,parseFloat(result[3])*2.55];if(result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(color))\nreturn[parseInt(result[1],16),parseInt(result[2],16),parseInt(result[3],16)];if(result=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(color))\nreturn[parseInt(result[1]+result[1],16),parseInt(result[2]+result[2],16),parseInt(result[3]+result[3],16)];if(result=/rgba\\(0, 0, 0, 0\\)/.exec(color))\nreturn colors['transparent'];return colors[$.trim(color).toLowerCase()];}\nfunction getColor(elem,attr){var color;do{color=$.curCSS(elem,attr);if(color!=''&&color!='transparent'||$.nodeName(elem,\"body\"))\nbreak;attr=\"backgroundColor\";}while(elem=elem.parentNode);return getRGB(color);};var colors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};var classAnimationActions=['add','remove','toggle'],shorthandStyles={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function getElementStyles(){var style=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,newStyle={},key,camelCase;if(style&&style.length&&style[0]&&style[style[0]]){var len=style.length;while(len--){key=style[len];if(typeof style[key]=='string'){camelCase=key.replace(/\\-(\\w)/g,function(all,letter){return letter.toUpperCase();});newStyle[camelCase]=style[key];}}}else{for(key in style){if(typeof style[key]==='string'){newStyle[key]=style[key];}}}\nreturn newStyle;}\nfunction filterStyles(styles){var name,value;for(name in styles){value=styles[name];if(value==null||$.isFunction(value)||name in shorthandStyles||(/scrollbar/).test(name)||(!(/color/i).test(name)&&isNaN(parseFloat(value)))){delete styles[name];}}\nreturn styles;}\nfunction styleDifference(oldStyle,newStyle){var diff={_:0},name;for(name in newStyle){if(oldStyle[name]!=newStyle[name]){diff[name]=newStyle[name];}}\nreturn diff;}\n$.effects.animateClass=function(value,duration,easing,callback){if($.isFunction(easing)){callback=easing;easing=null;}\nreturn this.queue(function(){var that=$(this),originalStyleAttr=that.attr('style')||' ',originalStyle=filterStyles(getElementStyles.call(this)),newStyle,className=that.attr('class');$.each(classAnimationActions,function(i,action){if(value[action]){that[action+'Class'](value[action]);}});newStyle=filterStyles(getElementStyles.call(this));that.attr('class',className);that.animate(styleDifference(originalStyle,newStyle),{queue:false,duration:duration,easing:easing,complete:function(){$.each(classAnimationActions,function(i,action){if(value[action]){that[action+'Class'](value[action]);}});if(typeof that.attr('style')=='object'){that.attr('style').cssText='';that.attr('style').cssText=originalStyleAttr;}else{that.attr('style',originalStyleAttr);}\nif(callback){callback.apply(this,arguments);}\n$.dequeue(this);}});});};$.fn.extend({_addClass:$.fn.addClass,addClass:function(classNames,speed,easing,callback){return speed?$.effects.animateClass.apply(this,[{add:classNames},speed,easing,callback]):this._addClass(classNames);},_removeClass:$.fn.removeClass,removeClass:function(classNames,speed,easing,callback){return speed?$.effects.animateClass.apply(this,[{remove:classNames},speed,easing,callback]):this._removeClass(classNames);},_toggleClass:$.fn.toggleClass,toggleClass:function(classNames,force,speed,easing,callback){if(typeof force==\"boolean\"||force===undefined){if(!speed){return this._toggleClass(classNames,force);}else{return $.effects.animateClass.apply(this,[(force?{add:classNames}:{remove:classNames}),speed,easing,callback]);}}else{return $.effects.animateClass.apply(this,[{toggle:classNames},force,speed,easing]);}},switchClass:function(remove,add,speed,easing,callback){return $.effects.animateClass.apply(this,[{add:add,remove:remove},speed,easing,callback]);}});$.extend($.effects,{version:\"1.8.18\",save:function(element,set){for(var i=0;i<set.length;i++){if(set[i]!==null)element.data(\"ec.storage.\"+set[i],element[0].style[set[i]]);}},restore:function(element,set){for(var i=0;i<set.length;i++){if(set[i]!==null)element.css(set[i],element.data(\"ec.storage.\"+set[i]));}},setMode:function(el,mode){if(mode=='toggle')mode=el.is(':hidden')?'show':'hide';return mode;},getBaseline:function(origin,original){var y,x;switch(origin[0]){case'top':y=0;break;case'middle':y=0.5;break;case'bottom':y=1;break;default:y=origin[0]/original.height;};switch(origin[1]){case'left':x=0;break;case'center':x=0.5;break;case'right':x=1;break;default:x=origin[1]/original.width;};return{x:x,y:y};},createWrapper:function(element){if(element.parent().is('.ui-effects-wrapper')){return element.parent();}\nvar props={width:element.outerWidth(true),height:element.outerHeight(true),'float':element.css('float')},wrapper=$('<div><\/div>').addClass('ui-effects-wrapper').css({fontSize:'100%',background:'transparent',border:'none',margin:0,padding:0}),active=document.activeElement;element.wrap(wrapper);if(element[0]===active||$.contains(element[0],active)){$(active).focus();}\nwrapper=element.parent();if(element.css('position')=='static'){wrapper.css({position:'relative'});element.css({position:'relative'});}else{$.extend(props,{position:element.css('position'),zIndex:element.css('z-index')});$.each(['top','left','bottom','right'],function(i,pos){props[pos]=element.css(pos);if(isNaN(parseInt(props[pos],10))){props[pos]='auto';}});element.css({position:'relative',top:0,left:0,right:'auto',bottom:'auto'});}\nreturn wrapper.css(props).show();},removeWrapper:function(element){var parent,active=document.activeElement;if(element.parent().is('.ui-effects-wrapper')){parent=element.parent().replaceWith(element);if(element[0]===active||$.contains(element[0],active)){$(active).focus();}\nreturn parent;}\nreturn element;},setTransition:function(element,list,factor,value){value=value||{};$.each(list,function(i,x){unit=element.cssUnit(x);if(unit[0]>0)value[x]=unit[0]*factor+unit[1];});return value;}});function _normalizeArguments(effect,options,speed,callback){if(typeof effect=='object'){callback=options;speed=null;options=effect;effect=options.effect;}\nif($.isFunction(options)){callback=options;speed=null;options={};}\nif(typeof options=='number'||$.fx.speeds[options]){callback=speed;speed=options;options={};}\nif($.isFunction(speed)){callback=speed;speed=null;}\noptions=options||{};speed=speed||options.duration;speed=$.fx.off?0:typeof speed=='number'?speed:speed in $.fx.speeds?$.fx.speeds[speed]:$.fx.speeds._default;callback=callback||options.complete;return[effect,options,speed,callback];}\nfunction standardSpeed(speed){if(!speed||typeof speed===\"number\"||$.fx.speeds[speed]){return true;}\nif(typeof speed===\"string\"&&!$.effects[speed]){return true;}\nreturn false;}\n$.fn.extend({effect:function(effect,options,speed,callback){var args=_normalizeArguments.apply(this,arguments),args2={options:args[1],duration:args[2],callback:args[3]},mode=args2.options.mode,effectMethod=$.effects[effect];if($.fx.off||!effectMethod){if(mode){return this[mode](args2.duration,args2.callback);}else{return this.each(function(){if(args2.callback){args2.callback.call(this);}});}}\nreturn effectMethod.call(this,args2);},_show:$.fn.show,show:function(speed){if(standardSpeed(speed)){return this._show.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args[1].mode='show';return this.effect.apply(this,args);}},_hide:$.fn.hide,hide:function(speed){if(standardSpeed(speed)){return this._hide.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args[1].mode='hide';return this.effect.apply(this,args);}},__toggle:$.fn.toggle,toggle:function(speed){if(standardSpeed(speed)||typeof speed===\"boolean\"||$.isFunction(speed)){return this.__toggle.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args[1].mode='toggle';return this.effect.apply(this,args);}},cssUnit:function(key){var style=this.css(key),val=[];$.each(['em','px','%','pt'],function(i,unit){if(style.indexOf(unit)>0)\nval=[parseFloat(style),unit];});return val;}});$.easing.jswing=$.easing.swing;$.extend($.easing,{def:'easeOutQuad',swing:function(x,t,b,c,d){return $.easing[$.easing.def](x,t,b,c,d);},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b;},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*((--t)*(t-2)-1)+b;},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b;},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b;},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b;},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b;},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}\nelse var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}\nelse var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4;}\nelse var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b;},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b;},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},easeInBounce:function(x,t,b,c,d){return c-$.easing.easeOutBounce(x,d-t,0,c,d)+b;},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b;}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return $.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return $.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b;}});})(jQuery);(function($,undefined){$.effects.blind=function(o){return this.queue(function(){var el=$(this),props=['position','top','bottom','left','right'];var mode=$.effects.setMode(el,o.options.mode||'hide');var direction=o.options.direction||'vertical';$.effects.save(el,props);el.show();var wrapper=$.effects.createWrapper(el).css({overflow:'hidden'});var ref=(direction=='vertical')?'height':'width';var distance=(direction=='vertical')?wrapper.height():wrapper.width();if(mode=='show')wrapper.css(ref,0);var animation={};animation[ref]=mode=='show'?distance:0;wrapper.animate(animation,o.duration,o.options.easing,function(){if(mode=='hide')el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(el[0],arguments);el.dequeue();});});};})(jQuery);(function($,undefined){$.effects.bounce=function(o){return this.queue(function(){var el=$(this),props=['position','top','bottom','left','right'];var mode=$.effects.setMode(el,o.options.mode||'effect');var direction=o.options.direction||'up';var distance=o.options.distance||20;var times=o.options.times||5;var speed=o.duration||250;if(/show|hide/.test(mode))props.push('opacity');$.effects.save(el,props);el.show();$.effects.createWrapper(el);var ref=(direction=='up'||direction=='down')?'top':'left';var motion=(direction=='up'||direction=='left')?'pos':'neg';var distance=o.options.distance||(ref=='top'?el.outerHeight({margin:true})/3:el.outerWidth({margin:true})/3);if(mode=='show')el.css('opacity',0).css(ref,motion=='pos'?-distance:distance);if(mode=='hide')distance=distance/(times*2);if(mode!='hide')times--;if(mode=='show'){var animation={opacity:1};animation[ref]=(motion=='pos'?'+=':'-=')+distance;el.animate(animation,speed/2,o.options.easing);distance=distance/2;times--;};for(var i=0;i<times;i++){var animation1={},animation2={};animation1[ref]=(motion=='pos'?'-=':'+=')+distance;animation2[ref]=(motion=='pos'?'+=':'-=')+distance;el.animate(animation1,speed/2,o.options.easing).animate(animation2,speed/2,o.options.easing);distance=(mode=='hide')?distance*2:distance/2;};if(mode=='hide'){var animation={opacity:0};animation[ref]=(motion=='pos'?'-=':'+=')+distance;el.animate(animation,speed/2,o.options.easing,function(){el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(this,arguments);});}else{var animation1={},animation2={};animation1[ref]=(motion=='pos'?'-=':'+=')+distance;animation2[ref]=(motion=='pos'?'+=':'-=')+distance;el.animate(animation1,speed/2,o.options.easing).animate(animation2,speed/2,o.options.easing,function(){$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(this,arguments);});};el.queue('fx',function(){el.dequeue();});el.dequeue();});};})(jQuery);(function($,undefined){$.effects.clip=function(o){return this.queue(function(){var el=$(this),props=['position','top','bottom','left','right','height','width'];var mode=$.effects.setMode(el,o.options.mode||'hide');var direction=o.options.direction||'vertical';$.effects.save(el,props);el.show();var wrapper=$.effects.createWrapper(el).css({overflow:'hidden'});var animate=el[0].tagName=='IMG'?wrapper:el;var ref={size:(direction=='vertical')?'height':'width',position:(direction=='vertical')?'top':'left'};var distance=(direction=='vertical')?animate.height():animate.width();if(mode=='show'){animate.css(ref.size,0);animate.css(ref.position,distance/2);}\nvar animation={};animation[ref.size]=mode=='show'?distance:0;animation[ref.position]=mode=='show'?0:distance/2;animate.animate(animation,{queue:false,duration:o.duration,easing:o.options.easing,complete:function(){if(mode=='hide')el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(el[0],arguments);el.dequeue();}});});};})(jQuery);(function($,undefined){$.effects.drop=function(o){return this.queue(function(){var el=$(this),props=['position','top','bottom','left','right','opacity'];var mode=$.effects.setMode(el,o.options.mode||'hide');var direction=o.options.direction||'left';$.effects.save(el,props);el.show();$.effects.createWrapper(el);var ref=(direction=='up'||direction=='down')?'top':'left';var motion=(direction=='up'||direction=='left')?'pos':'neg';var distance=o.options.distance||(ref=='top'?el.outerHeight({margin:true})/2:el.outerWidth({margin:true})/2);if(mode=='show')el.css('opacity',0).css(ref,motion=='pos'?-distance:distance);var animation={opacity:mode=='show'?1:0};animation[ref]=(mode=='show'?(motion=='pos'?'+=':'-='):(motion=='pos'?'-=':'+='))+distance;el.animate(animation,{queue:false,duration:o.duration,easing:o.options.easing,complete:function(){if(mode=='hide')el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(this,arguments);el.dequeue();}});});};})(jQuery);(function($,undefined){$.effects.explode=function(o){return this.queue(function(){var rows=o.options.pieces?Math.round(Math.sqrt(o.options.pieces)):3;var cells=o.options.pieces?Math.round(Math.sqrt(o.options.pieces)):3;o.options.mode=o.options.mode=='toggle'?($(this).is(':visible')?'hide':'show'):o.options.mode;var el=$(this).show().css('visibility','hidden');var offset=el.offset();offset.top-=parseInt(el.css(\"marginTop\"),10)||0;offset.left-=parseInt(el.css(\"marginLeft\"),10)||0;var width=el.outerWidth(true);var height=el.outerHeight(true);for(var i=0;i<rows;i++){for(var j=0;j<cells;j++){el.clone().appendTo('body').wrap('<div><\/div>').css({position:'absolute',visibility:'visible',left:-j*(width/cells),top:-i*(height/rows)}).parent().addClass('ui-effects-explode').css({position:'absolute',overflow:'hidden',width:width/cells,height:height/rows,left:offset.left+j*(width/cells)+(o.options.mode=='show'?(j-Math.floor(cells/2))*(width/cells):0),top:offset.top+i*(height/rows)+(o.options.mode=='show'?(i-Math.floor(rows/2))*(height/rows):0),opacity:o.options.mode=='show'?0:1}).animate({left:offset.left+j*(width/cells)+(o.options.mode=='show'?0:(j-Math.floor(cells/2))*(width/cells)),top:offset.top+i*(height/rows)+(o.options.mode=='show'?0:(i-Math.floor(rows/2))*(height/rows)),opacity:o.options.mode=='show'?1:0},o.duration||500);}}\nsetTimeout(function(){o.options.mode=='show'?el.css({visibility:'visible'}):el.css({visibility:'visible'}).hide();if(o.callback)o.callback.apply(el[0]);el.dequeue();$('div.ui-effects-explode').remove();},o.duration||500);});};})(jQuery);(function($,undefined){$.effects.fade=function(o){return this.queue(function(){var elem=$(this),mode=$.effects.setMode(elem,o.options.mode||'hide');elem.animate({opacity:mode},{queue:false,duration:o.duration,easing:o.options.easing,complete:function(){(o.callback&&o.callback.apply(this,arguments));elem.dequeue();}});});};})(jQuery);(function($,undefined){$.effects.fold=function(o){return this.queue(function(){var el=$(this),props=['position','top','bottom','left','right'];var mode=$.effects.setMode(el,o.options.mode||'hide');var size=o.options.size||15;var horizFirst=!(!o.options.horizFirst);var duration=o.duration?o.duration/2:$.fx.speeds._default/2;$.effects.save(el,props);el.show();var wrapper=$.effects.createWrapper(el).css({overflow:'hidden'});var widthFirst=((mode=='show')!=horizFirst);var ref=widthFirst?['width','height']:['height','width'];var distance=widthFirst?[wrapper.width(),wrapper.height()]:[wrapper.height(),wrapper.width()];var percent=/([0-9]+)%/.exec(size);if(percent)size=parseInt(percent[1],10)/100*distance[mode=='hide'?0:1];if(mode=='show')wrapper.css(horizFirst?{height:0,width:size}:{height:size,width:0});var animation1={},animation2={};animation1[ref[0]]=mode=='show'?distance[0]:size;animation2[ref[1]]=mode=='show'?distance[1]:0;wrapper.animate(animation1,duration,o.options.easing).animate(animation2,duration,o.options.easing,function(){if(mode=='hide')el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(el[0],arguments);el.dequeue();});});};})(jQuery);(function($,undefined){$.effects.highlight=function(o){return this.queue(function(){var elem=$(this),props=['backgroundImage','backgroundColor','opacity'],mode=$.effects.setMode(elem,o.options.mode||'show'),animation={backgroundColor:elem.css('backgroundColor')};if(mode=='hide'){animation.opacity=0;}\n$.effects.save(elem,props);elem.show().css({backgroundImage:'none',backgroundColor:o.options.color||'#ffff99'}).animate(animation,{queue:false,duration:o.duration,easing:o.options.easing,complete:function(){(mode=='hide'&&elem.hide());$.effects.restore(elem,props);(mode=='show'&&!$.support.opacity&&this.style.removeAttribute('filter'));(o.callback&&o.callback.apply(this,arguments));elem.dequeue();}});});};})(jQuery);(function($,undefined){$.effects.pulsate=function(o){return this.queue(function(){var elem=$(this),mode=$.effects.setMode(elem,o.options.mode||'show');times=((o.options.times||5)*2)-1;duration=o.duration?o.duration/2:$.fx.speeds._default/2,isVisible=elem.is(':visible'),animateTo=0;if(!isVisible){elem.css('opacity',0).show();animateTo=1;}\nif((mode=='hide'&&isVisible)||(mode=='show'&&!isVisible)){times--;}\nfor(var i=0;i<times;i++){elem.animate({opacity:animateTo},duration,o.options.easing);animateTo=(animateTo+1)%2;}\nelem.animate({opacity:animateTo},duration,o.options.easing,function(){if(animateTo==0){elem.hide();}\n(o.callback&&o.callback.apply(this,arguments));});elem.queue('fx',function(){elem.dequeue();}).dequeue();});};})(jQuery);(function($,undefined){$.effects.puff=function(o){return this.queue(function(){var elem=$(this),mode=$.effects.setMode(elem,o.options.mode||'hide'),percent=parseInt(o.options.percent,10)||150,factor=percent/100,original={height:elem.height(),width:elem.width()};$.extend(o.options,{fade:true,mode:mode,percent:mode=='hide'?percent:100,from:mode=='hide'?original:{height:original.height*factor,width:original.width*factor}});elem.effect('scale',o.options,o.duration,o.callback);elem.dequeue();});};$.effects.scale=function(o){return this.queue(function(){var el=$(this);var options=$.extend(true,{},o.options);var mode=$.effects.setMode(el,o.options.mode||'effect');var percent=parseInt(o.options.percent,10)||(parseInt(o.options.percent,10)==0?0:(mode=='hide'?0:100));var direction=o.options.direction||'both';var origin=o.options.origin;if(mode!='effect'){options.origin=origin||['middle','center'];options.restore=true;}\nvar original={height:el.height(),width:el.width()};el.from=o.options.from||(mode=='show'?{height:0,width:0}:original);var factor={y:direction!='horizontal'?(percent/100):1,x:direction!='vertical'?(percent/100):1};el.to={height:original.height*factor.y,width:original.width*factor.x};if(o.options.fade){if(mode=='show'){el.from.opacity=0;el.to.opacity=1;};if(mode=='hide'){el.from.opacity=1;el.to.opacity=0;};};options.from=el.from;options.to=el.to;options.mode=mode;el.effect('size',options,o.duration,o.callback);el.dequeue();});};$.effects.size=function(o){return this.queue(function(){var el=$(this),props=['position','top','bottom','left','right','width','height','overflow','opacity'];var props1=['position','top','bottom','left','right','overflow','opacity'];var props2=['width','height','overflow'];var cProps=['fontSize'];var vProps=['borderTopWidth','borderBottomWidth','paddingTop','paddingBottom'];var hProps=['borderLeftWidth','borderRightWidth','paddingLeft','paddingRight'];var mode=$.effects.setMode(el,o.options.mode||'effect');var restore=o.options.restore||false;var scale=o.options.scale||'both';var origin=o.options.origin;var original={height:el.height(),width:el.width()};el.from=o.options.from||original;el.to=o.options.to||original;if(origin){var baseline=$.effects.getBaseline(origin,original);el.from.top=(original.height-el.from.height)*baseline.y;el.from.left=(original.width-el.from.width)*baseline.x;el.to.top=(original.height-el.to.height)*baseline.y;el.to.left=(original.width-el.to.width)*baseline.x;};var factor={from:{y:el.from.height/original.height,x:el.from.width/original.width},to:{y:el.to.height/original.height,x:el.to.width/original.width}};if(scale=='box'||scale=='both'){if(factor.from.y!=factor.to.y){props=props.concat(vProps);el.from=$.effects.setTransition(el,vProps,factor.from.y,el.from);el.to=$.effects.setTransition(el,vProps,factor.to.y,el.to);};if(factor.from.x!=factor.to.x){props=props.concat(hProps);el.from=$.effects.setTransition(el,hProps,factor.from.x,el.from);el.to=$.effects.setTransition(el,hProps,factor.to.x,el.to);};};if(scale=='content'||scale=='both'){if(factor.from.y!=factor.to.y){props=props.concat(cProps);el.from=$.effects.setTransition(el,cProps,factor.from.y,el.from);el.to=$.effects.setTransition(el,cProps,factor.to.y,el.to);};};$.effects.save(el,restore?props:props1);el.show();$.effects.createWrapper(el);el.css('overflow','hidden').css(el.from);if(scale=='content'||scale=='both'){vProps=vProps.concat(['marginTop','marginBottom']).concat(cProps);hProps=hProps.concat(['marginLeft','marginRight']);props2=props.concat(vProps).concat(hProps);el.find(\"*[width]\").each(function(){child=$(this);if(restore)$.effects.save(child,props2);var c_original={height:child.height(),width:child.width()};child.from={height:c_original.height*factor.from.y,width:c_original.width*factor.from.x};child.to={height:c_original.height*factor.to.y,width:c_original.width*factor.to.x};if(factor.from.y!=factor.to.y){child.from=$.effects.setTransition(child,vProps,factor.from.y,child.from);child.to=$.effects.setTransition(child,vProps,factor.to.y,child.to);};if(factor.from.x!=factor.to.x){child.from=$.effects.setTransition(child,hProps,factor.from.x,child.from);child.to=$.effects.setTransition(child,hProps,factor.to.x,child.to);};child.css(child.from);child.animate(child.to,o.duration,o.options.easing,function(){if(restore)$.effects.restore(child,props2);});});};el.animate(el.to,{queue:false,duration:o.duration,easing:o.options.easing,complete:function(){if(el.to.opacity===0){el.css('opacity',el.from.opacity);}\nif(mode=='hide')el.hide();$.effects.restore(el,restore?props:props1);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(this,arguments);el.dequeue();}});});};})(jQuery);(function($,undefined){$.effects.shake=function(o){return this.queue(function(){var el=$(this),props=['position','top','bottom','left','right'];var mode=$.effects.setMode(el,o.options.mode||'effect');var direction=o.options.direction||'left';var distance=o.options.distance||20;var times=o.options.times||3;var speed=o.duration||o.options.duration||140;$.effects.save(el,props);el.show();$.effects.createWrapper(el);var ref=(direction=='up'||direction=='down')?'top':'left';var motion=(direction=='up'||direction=='left')?'pos':'neg';var animation={},animation1={},animation2={};animation[ref]=(motion=='pos'?'-=':'+=')+distance;animation1[ref]=(motion=='pos'?'+=':'-=')+distance*2;animation2[ref]=(motion=='pos'?'-=':'+=')+distance*2;el.animate(animation,speed,o.options.easing);for(var i=1;i<times;i++){el.animate(animation1,speed,o.options.easing).animate(animation2,speed,o.options.easing);};el.animate(animation1,speed,o.options.easing).animate(animation,speed/2,o.options.easing,function(){$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(this,arguments);});el.queue('fx',function(){el.dequeue();});el.dequeue();});};})(jQuery);(function($,undefined){$.effects.slide=function(o){return this.queue(function(){var el=$(this),props=['position','top','bottom','left','right'];var mode=$.effects.setMode(el,o.options.mode||'show');var direction=o.options.direction||'left';$.effects.save(el,props);el.show();$.effects.createWrapper(el).css({overflow:'hidden'});var ref=(direction=='up'||direction=='down')?'top':'left';var motion=(direction=='up'||direction=='left')?'pos':'neg';var distance=o.options.distance||(ref=='top'?el.outerHeight({margin:true}):el.outerWidth({margin:true}));if(mode=='show')el.css(ref,motion=='pos'?(isNaN(distance)?\"-\"+distance:-distance):distance);var animation={};animation[ref]=(mode=='show'?(motion=='pos'?'+=':'-='):(motion=='pos'?'-=':'+='))+distance;el.animate(animation,{queue:false,duration:o.duration,easing:o.options.easing,complete:function(){if(mode=='hide')el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(this,arguments);el.dequeue();}});});};})(jQuery);(function($,undefined){$.effects.transfer=function(o){return this.queue(function(){var elem=$(this),target=$(o.options.to),endPosition=target.offset(),animation={top:endPosition.top,left:endPosition.left,height:target.innerHeight(),width:target.innerWidth()},startPosition=elem.offset(),transfer=$('<div class=\"ui-effects-transfer\"><\/div>').appendTo(document.body).addClass(o.options.className).css({top:startPosition.top,left:startPosition.left,height:elem.innerHeight(),width:elem.innerWidth(),position:'absolute'}).animate(animation,o.duration,o.options.easing,function(){transfer.remove();(o.callback&&o.callback.apply(elem[0],arguments));elem.dequeue();});});};})(jQuery);var jquery_ui={};","js/smartbi/ChartType.js":"\n﻿\nvar ChartType={area:\"area\",bar:\"bar\",column:\"column\",line:\"line\",pie:\"pie\",donut:\"donut\",scatter:\"scatter\",bubble:\"bubble\",waterfall:\"waterfall\",gauge:\"gauge\",combination:\"combination\",dualYCombination:\"dualYCombination\",true3DCombination:\"true3DCombination\",funnel:\"funnel\",radar:\"radar\",stock:\"stock\",map:\"map\",airlinemap:\"airlinemap\",fusionmap:\"fusionmap\",areaCN:\"面积图\",barCN:\"横条图\",columnCN:\"柱图\",lineCN:\"线图\",pieCN:\"饼图\",donutCN:\"圆环图\",scatterCN:\"散点图\",bubbleCN:\"泡泡图\",waterfallCN:\"瀑布图\",gaugeCN:\"油量图\",combinationCN:\"联合图\",dualYCombinationCN:\"双y联合图\",true3DCombinationCN:\"三维联合图\",funnelCN:\"漏斗图\",radarCN:\"雷达图\",mapCN:\"地图\",stockCN:\"股票图\",airlinemapCN:\"航线图\",fusionmapCN:\"Fusion地图\"};","js/smartbi/ChartTypeTemplates.js":"\nif(typeof AbstractChartTypeTemplates=='undefined'){jsloader.resolve(\"smartbi.chart.abstract.AbstractChartTypeTemplates\",true);}\nvar ChartTypeTemplates=AbstractChartTypeTemplates.extend({init:function(){this.initTemplatesGroup();this.initTemplates();},getToTemplatesByChartOption:function(option,chartType,reportType){var allTemplates=this.getTemplateByReportType(reportType);if(!option||option==null||(!option.dataset&&!option.data&&!option.dials))\nreturn this.groupTemplates(allTemplates);if(chartType==undefined||chartType==null){chartType=option.chart.type;}\nif(option.chartTemplate&&option.chartTemplate.id){var flag=false;for(var idx in allTemplates){var temp=allTemplates[idx];for(var i in temp){if(temp[i].id==option.chartTemplate.id){chartType=idx;flag=true;break;}}\nif(flag)\nbreak;}}\nfunction getTemplates(types,allTemplates){var result={};for(var i in types){var type=types[i];if(type!=\"\"){result[type]=allTemplates[type];}}\nreturn result;}\nvar resultTemplates={};var group1='line,column,bar,area,pie,donut,combination,dualYCombination,waterfall,gauge,radar';if((','+group1+',').indexOf(','+chartType+',')>=0){resultTemplates=getTemplates(group1.split(','),allTemplates);}else if(\"scatter\"==chartType){var a=group1.split(',');a.push(\"scatter\");resultTemplates=getTemplates(a,allTemplates);}else if(\"bubble\"==chartType){resultTemplates=getTemplates(['bubble'],allTemplates);}else{resultTemplates[chartType]=allTemplates[chartType];}\nreturn this.groupTemplates(resultTemplates);},getTemplateByReportType:function(reportType){if(reportType==\"OLAP\"||reportType==\"INSIGHT\"){var rtn=jQuery.extend(true,{},this.templates);delete rtn[\"scatter\"];delete rtn[\"bubble\"];delete rtn[\"stock\"];return rtn;}else{return this.templates;}},initTemplatesGroup:function(){this.templatesGroup={column:{name:'柱图',iconUrl:'img/chart/charttype/column_group.png',templateKeys:['column','bar']},line:{name:'线图',iconUrl:'img/chart/charttype/line_group.png',templateKeys:['line']},pie:{name:'饼图',iconUrl:'img/chart/charttype/pie_group.png',templateKeys:['pie','donut']},gauge:{name:'油量图',iconUrl:'img/chart/charttype/gauge_group.png',templateKeys:['gauge']},others:{name:'其他',iconUrl:'img/chart/charttype/other_group.png'}}\nreturn this.templatesGroup;},initTemplates:function(){this.templates={'column':[{id:'column_common',name:'柱图',type:'column',iconUrl:'img/chart/charttype/column_common.png',options:{chartex:{isStacked:'0'}}},{id:'column_stack',name:'堆积柱图',type:'column',iconUrl:'img/chart/charttype/column_stack.png',options:{chartex:{isStacked:'1'}}},{id:'column_percent',name:'百分比堆积柱图',type:'column',iconUrl:'img/chart/charttype/column_percent.png',options:{chartex:{isStacked:'2'}}}],'line':[{id:'line_common',name:'折线图',type:'line',iconUrl:'img/chart/charttype/line_common.png',options:{chartex:{isStacked:'0',lineEffect:'line'},chart:{drawAnchors:'0'}}},{id:'line_marker',name:'带标记的折线图',type:'line',iconUrl:'img/chart/charttype/line_marker.png',options:{chartex:{isStacked:'0',lineEffect:'line'},chart:{drawAnchors:'1'}}},{id:'line_spline',name:'曲线图',type:'line',iconUrl:'img/chart/charttype/line_spline.png',options:{chartex:{isStacked:'0',isScroll:'0',lineEffect:'spline'},chart:{drawAnchors:'0'}}},{id:'line_marker_spline',name:'带标记的曲线图',type:'line',iconUrl:'img/chart/charttype/line_marker_spline.png',options:{chartex:{isStacked:'0',isScroll:'0',lineEffect:'spline'},chart:{drawAnchors:'1'}}}],'pie':[{id:'pie_common',name:'饼图',type:'pie',iconUrl:'img/chart/charttype/pie_common.png',options:{chart:{showLegend:'0'}}},{id:'pie_legend',name:'带图例的饼图',type:'pie',iconUrl:'img/chart/charttype/pie_legend.png',options:{chart:{showLegend:'1'}}}],'bar':[{id:'bar_common',name:'横条图',type:'bar',iconUrl:'img/chart/charttype/bar_common.png',options:{chartex:{isStacked:'0'}}},{id:'bar_stack',name:'堆积横条图',type:'bar',iconUrl:'img/chart/charttype/bar_stack.png',options:{chartex:{isStacked:'1'}}},{id:'bar_percent',name:'百分比堆积横条图',type:'bar',iconUrl:'img/chart/charttype/bar_percent.png',options:{chartex:{isStacked:'2'}}}],'area':[{id:'area_common',name:'面积图',type:'area',iconUrl:'img/chart/charttype/area_common.png',options:{chartex:{isStacked:'0'}}},{id:'area_stack',name:'堆积面积图',type:'area',iconUrl:'img/chart/charttype/area_stack.png',options:{chartex:{isStacked:'1'}}}],'scatter':[{id:'scatter_common',name:'散点图',type:'scatter',iconUrl:'img/chart/charttype/scatter_common.png',options:{chart:{drawAnchors:'1'}}}],'donut':[{id:'donut_common',name:'圆环图',type:'donut',iconUrl:'img/chart/charttype/donut_common.png',options:{}}],'combination':[{id:'combination_common',name:'联合图',type:'combination',iconUrl:'img/chart/charttype/combination_common.png',options:{}}],'dualYCombination':[{id:'dualycombination_common',name:'双y联合图',type:'dualYCombination',iconUrl:'img/chart/charttype/dualycombination_common.png',options:{}}],'bubble':[{id:'bubble_common',name:'泡泡图',type:'bubble',iconUrl:'img/chart/charttype/bubble_common.png',options:{}}],'waterfall':[{id:'waterfall_common',name:'瀑布图',type:'waterfall',iconUrl:'img/chart/charttype/waterfall_common.png',options:{}}],'gauge':[{id:'gauge_gaugeStyle1',name:'油量图_风格1',type:'gauge',iconUrl:'img/chart/charttype/gauge_gaugeStyle1.png',options:{chart:{gaugeStyle:'1',gaugeScaleAngle:'180',chartLeftMargin:'60',chartRightMargin:'60',chartTopMargin:'5',chartBottomMargin:'35'},chartex:{style:{font:{tickValues:{color:'#555555'},limitValues:{color:'#555555'}}}}}},{id:'gauge_gaugeStyle2',name:'油量图_风格2',type:'gauge',iconUrl:'img/chart/charttype/gauge_gaugeStyle2.png',options:{chart:{gaugeStyle:'2',gaugeScaleAngle:'270',chartLeftMargin:'5',chartRightMargin:'5',chartTopMargin:'5',chartBottomMargin:'5'},chartex:{style:{font:{tickValues:{color:'#e7f1d7'},limitValues:{color:'#e7f1d7'}}}}}},{id:'gauge_gaugeStyle3',name:'油量图_风格3',type:'gauge',iconUrl:'img/chart/charttype/gauge_gaugeStyle3.png',options:{chart:{gaugeStyle:'3',gaugeScaleAngle:'180',chartLeftMargin:'60',chartRightMargin:'60',chartTopMargin:'5',chartBottomMargin:'35'},chartex:{style:{font:{tickValues:{color:'#555555'},limitValues:{color:'#555555'}}}}}}],'radar':[{id:'radar_common',name:'雷达图',type:'radar',iconUrl:'img/chart/charttype/radar_common.png',options:{}}],'stock':[{id:'stock_common',name:'股票图',type:'stock',iconUrl:'img/chart/charttype/stock_common.png',options:{}}],'true3DCombination':[{id:'true3DCombination_common',name:'三维联合图',type:'true3DCombination',iconUrl:'img/chart/charttype/true3dcombination_common.png',options:{chart:{chartStyle:\"FLASH\"},chartex:{clickEvent:\"0\"}}}]}\nreturn this.templates;}});","template/decisionpanel/dashboard/DashboardForms.template":"<!-- 因为IE对Form无法正常释放，由Dashboard.js创建唯一一份Form对象-->\r\n<span style=\"display: none\">\r\n\t<form id=\"_dashboardExportForm\" name=\"dashboard_exportForm\" class=\"_dashboardExportForm\" method=post action=\"DpExportServlet\" target=\"dashboard_exportIFrame\">\r\n\t\t<input type=\"hidden\" name=\"type\" class=\"_exportType\"/>\r\n\t\t<input type=\"hidden\" name=\"clientId\" class=\"_clientId\"/>\r\n\t\t<input type=\"hidden\" name=\"headerHtml\" class=\"_headerHtml\"/>\r\n\t\t<input type=\"hidden\" name=\"headerText\" class=\"_headerText\"/>\r\n\t\t<input type=\"hidden\" name=\"tailHtml\" class=\"_tailHtml\"/>\r\n\t\t<input type=\"hidden\" name=\"tailText\" class=\"_tailText\"/>\r\n\t\t<input type=\"hidden\" name=\"clientWidth\" class=\"_clientWidth\"/>\r\n\t\t<input type=\"hidden\" name=\"clientHeight\" class=\"_clientHeight\"/>\r\n\t<\/form>\r\n\t<form id=\"_portalExportForm\" name=\"portal_exportForm\" class=\"_portalExportForm\" method=post action=\"PortalExportServlet\" target=\"portal_exportIFrame\">\r\n\t\t<input type=\"hidden\" name=\"type\" class=\"_exportType\"/>\r\n\t\t<input type=\"hidden\" name=\"clientId\" class=\"_clientId\"/>\r\n\t\t<input type=\"hidden\" name=\"rand\" class=\"_rand\"/>\r\n\t\t<input type=\"hidden\" name=\"pageId\" class=\"_pageId\"/>\r\n\t\t<input type=\"hidden\" name=\"pageWidth\" class=\"_pageWidth\"/>\r\n\t\t<input type=\"hidden\" name=\"pageHeaderHtml\" class=\"_pageHeaderHtml\"/>\r\n\t\t<input type=\"hidden\" name=\"pageHeaderText\" class=\"_pageHeaderText\"/>\r\n\t<\/form>\r\n\t<iframe name=\"dashboard_exportIFrame\" width=\"0\" height=\"0\">\r\n\t<\/iframe>\r\n\t<iframe name=\"portal_exportIFrame\" width=\"0\" height=\"0\">\r\n\t<\/iframe>\r\n<\/span>","js/bof/reportcomment/CommentForDashboardHandler.js":"HTTP Status 404 . filename not found: /vision/js/bof/reportcomment/CommentForDashboardHandler.js","js/bof/macro/MeterReportMacroExecutor.js":"\nvar MacroService=imports(\"bof.macro.services.MacroService\");var MeterReportMacroExecutor=function(resource,targetName,eventName,args,script){this.resource=resource;this.context=resource.dpChart;this.targetName=targetName;this.evenetType=eventName;this.args=args;this.script=script;};MeterReportMacroExecutor.prototype.run=function(module){var application={};var openOlapQuery=function(id,callback){if(callback){var ret=util.remoteInvokeEx(\"CatalogService\",\"getCatalogElementById\",[id]);if(ret&&ret.succeeded){if(!ret.result){alert(\"报表已被删除\");return;}}\nvar sBaseURL=jsloader.baseHref;if(typeof needToolBar==\"undefined\")\nneedToolBar=true;var url=sBaseURL+\"openresource.jsp?notNeedLogon=true&showtoolbar=\"+needToolBar+\"&resid=\"+id;var wnd=window.open(url);if(wnd.queryCmd){var olapQueryView=wnd.queryCmd.olapQueryView;callback(olapQueryView);}else{var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");eventutil.addEventHandler(wnd,'load',function(){var time=setInterval(function(){if(wnd&&wnd.classAction&&wnd.classAction.olapQueryCommand&&wnd.classAction.olapQueryCommand.olapQueryView&&wnd.classAction.olapQueryCommand.olapQueryView.clientId){clearInterval(time);var olapQueryView=wnd.classAction.olapQueryCommand.olapQueryView;callback(olapQueryView);}},100);});}}else{alert(\"not support in present\")}};application.openOlapQuery=openOlapQuery;eval(\"var \"+this.resource.getResourceType()+\" = this.resource;\");eval(\"application.\"+this.resource.getResourceType()+\" = \"+this.resource.getResourceType()+\";\");var event={arguments:this.args};application.event=event;application.application=application;application.module=module;var resourceId=this.resource.getResourceId();var use=function(moduleName){eval(MacroService.getInstance().findCommonModule(resourceId?resourceId:null,moduleName,\"ClientSide\"));return loadCommonModule();};eval(this.script);main.apply(null,this.args);};","js/bof/macro/ChartMacroExecutor.js":"\nvar MacroService=imports(\"bof.macro.services.MacroService\");var util=jsloader.resolve(\"freequery.common.util\");var ChartMacroExecutor=function(resource,targetName,eventName,args,script){this.resource=resource;this.targetName=targetName;this.evenetType=eventName;this.args=args;this.script=script;};ChartMacroExecutor.prototype.run=function(module){var application={};var openOlapQuery=function(id,callback,needToolBar){if(callback){var ret=util.remoteInvokeEx(\"CatalogService\",\"getCatalogElementById\",[id]);if(ret&&ret.succeeded){if(!ret.result){alert(\"报表已被删除\");return;}}\nvar sBaseURL=jsloader.baseHref;if(typeof needToolBar==\"undefined\")\nneedToolBar=true;var url=sBaseURL+\"openresource.jsp?notNeedLogon=true&showtoolbar=\"+needToolBar+\"&resid=\"+id;var wnd=window.open(url);if(wnd.queryCmd){var olapQueryView=wnd.queryCmd.olapQueryView;callback(olapQueryView);}else{var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");eventutil.addEventHandler(wnd,'load',function(){var time=setInterval(function(){if(wnd&&wnd.classAction&&wnd.classAction.olapQueryCommand&&wnd.classAction.olapQueryCommand.olapQueryView&&wnd.classAction.olapQueryCommand.olapQueryView.clientId){clearInterval(time);var olapQueryView=wnd.classAction.olapQueryCommand.olapQueryView;callback(olapQueryView);}},100);});}\nwnd.moveTo(0,0);wnd.resizeTo(screen.availWidth,screen.availHeight);}else{alert(\"not support in present\")}};var openURL=function(url,postData,name,spec){if(postData&&postData.length>0){var form=document.getElementById(\"__openURLForm\");if(!form){var form=document.createElement(\"FORM\");document.body.appendChild(form);}\nform.innerHTML=\"\";form.style.display=\"none\";form.id=\"__openURLForm\";form.action=url;form.method='POST';if(name){form.target=name;}\nelse{form.target=\"_blank\";}\nfor(var i=0;i<postData.length;i++){var input=document.createElement(\"input\");input.name=postData[i].name;input.value=postData[i].value;form.appendChild(input);}\nform.submit();}else{if(name&&spec){window.open(url,name,spec);}\nelse if(name){window.open(url,name)}\nelse{window.open(url);}}};application.openOlapQuery=openOlapQuery;eval(\"var \"+this.resource.getResourceType()+\" = this.resource;\");eval(\"application.\"+this.resource.getResourceType()+\" = \"+this.resource.getResourceType()+\";\");var event={arguments:this.args};application.event=event;application.application=application;application.module=module;var resourceId=this.resource.getResourceId();var use=function(moduleName){eval(MacroService.getInstance().findCommonModule(resourceId?resourceId:null,moduleName,\"ClientSide\"));return loadCommonModule();};eval(this.script);main.apply(null,this.args);};","js/thirdparty/highcharts/highcharts.js":"\n(function(){var UNDEFINED,doc=document,win=window,math=Math,mathRound=math.round,mathFloor=math.floor,mathCeil=math.ceil,mathMax=math.max,mathMin=math.min,mathAbs=math.abs,mathCos=math.cos,mathSin=math.sin,mathPI=math.PI,deg2rad=mathPI*2/360,userAgent=navigator.userAgent,isOpera=win.opera,isIE=/msie/i.test(userAgent)&&!isOpera,docMode8=doc.documentMode===8,isWebKit=/AppleWebKit/.test(userAgent),isFirefox=/Firefox/.test(userAgent),isTouchDevice=/(Mobile|Android|Windows Phone)/.test(userAgent),SVG_NS='http://www.w3.org/2000/svg',hasSVG=!!doc.createElementNS&&!!doc.createElementNS(SVG_NS,'svg').createSVGRect,hasBidiBug=isFirefox&&parseInt(userAgent.split('Firefox/')[1],10)<4,useCanVG=!hasSVG&&!isIE&&!!doc.createElement('canvas').getContext,Renderer,hasTouch,symbolSizes={},idCounter=0,garbageBin,defaultOptions,dateFormat,globalAnimation,pathAnim,timeUnits,error,noop=function(){return UNDEFINED;},charts=[],chartCount=0,PRODUCT='Highcharts',VERSION='4.0.3',DIV='div',ABSOLUTE='absolute',RELATIVE='relative',HIDDEN='hidden',PREFIX='smarthighcharts-',VISIBLE='visible',PX='px',NONE='none',M='M',L='L',numRegex=/^[0-9]+$/,NORMAL_STATE='',HOVER_STATE='hover',SELECT_STATE='select',AxisPlotLineOrBandExtension,STROKE_WIDTH='stroke-width',makeTime,timezoneOffset,getMinutes,getHours,getDay,getDate,getMonth,getFullYear,setMinutes,setHours,setDate,setMonth,setFullYear,seriesTypes={},Highcharts;if(win.Highcharts){error(16,true);}else{Highcharts=win.Highcharts={};}\nfunction extend(a,b){var n;if(!a){a={};}\nfor(n in b){a[n]=b[n];}\nreturn a;}\nfunction merge(){var i,args=arguments,len,ret={},doCopy=function(copy,original){var value,key;if(typeof copy!=='object'){copy={};}\nfor(key in original){if(original.hasOwnProperty(key)){value=original[key];if(value&&typeof value==='object'&&Object.prototype.toString.call(value)!=='[object Array]'&&key!=='renderTo'&&typeof value.nodeType!=='number'){copy[key]=doCopy(copy[key]||{},value);}else{copy[key]=original[key];}}}\nreturn copy;};if(args[0]===true){ret=args[1];args=Array.prototype.slice.call(args,2);}\nlen=args.length;for(i=0;i<len;i++){ret=doCopy(ret,args[i]);}\nreturn ret;}\nfunction pInt(s,mag){return parseInt(s,mag||10);}\nfunction isString(s){return typeof s==='string';}\nfunction isObject(obj){return obj&&typeof obj==='object';}\nfunction isArray(obj){return Object.prototype.toString.call(obj)==='[object Array]';}\nfunction isNumber(n){return typeof n==='number';}\nfunction log2lin(num){return math.log(num)/math.LN10;}\nfunction lin2log(num){return math.pow(10,num);}\nfunction erase(arr,item){var i=arr.length;while(i--){if(arr[i]===item){arr.splice(i,1);break;}}}\nfunction defined(obj){return obj!==UNDEFINED&&obj!==null;}\nfunction attr(elem,prop,value){var key,ret;if(isString(prop)){if(defined(value)){elem.setAttribute(prop,value);}else if(elem&&elem.getAttribute){ret=elem.getAttribute(prop);}}else if(defined(prop)&&isObject(prop)){for(key in prop){elem.setAttribute(key,prop[key]);}}\nreturn ret;}\nfunction splat(obj){return isArray(obj)?obj:[obj];}\nfunction pick(){var args=arguments,i,arg,length=args.length;for(i=0;i<length;i++){arg=args[i];if(arg!==UNDEFINED&&arg!==null){return arg;}}}\nfunction css(el,styles){if(isIE&&!hasSVG){if(styles&&styles.opacity!==UNDEFINED){styles.filter='alpha(opacity='+(styles.opacity*100)+')';}}\nextend(el.style,styles);}\nfunction createElement(tag,attribs,styles,parent,nopad){var el=doc.createElement(tag);if(attribs){extend(el,attribs);}\nif(nopad){css(el,{padding:0,border:NONE,margin:0});}\nif(styles){css(el,styles);}\nif(parent){parent.appendChild(el);}\nreturn el;}\nfunction extendClass(parent,members){var object=function(){return UNDEFINED;};object.prototype=new parent();extend(object.prototype,members);return object;}\nfunction numberFormat(number,decimals,decPoint,thousandsSep){var lang=defaultOptions.lang,n=+number||0,c=decimals===-1?(n.toString().split('.')[1]||'').length:(isNaN(decimals=mathAbs(decimals))?2:decimals),d=decPoint===undefined?lang.decimalPoint:decPoint,t=thousandsSep===undefined?lang.thousandsSep:thousandsSep,s=n<0?\"-\":\"\",i=String(pInt(n=mathAbs(n).toFixed(c))),j=i.length>3?i.length%3:0;return s+(j?i.substr(0,j)+t:\"\")+i.substr(j).replace(/(\\d{3})(?=\\d)/g,\"$1\"+t)+\n(c?d+mathAbs(n-i).toFixed(c).slice(2):\"\");}\nfunction pad(number,length){return new Array((length||2)+1-String(number).length).join(0)+number;}\nfunction wrap(obj,method,func){var proceed=obj[method];obj[method]=function(){var args=Array.prototype.slice.call(arguments);args.unshift(proceed);return func.apply(this,args);};}\ndateFormat=function(format,timestamp,capitalize){if(!defined(timestamp)||isNaN(timestamp)){return'Invalid date';}\nformat=pick(format,'%Y-%m-%d %H:%M:%S');var date=new Date(timestamp-timezoneOffset),key,hours=date[getHours](),day=date[getDay](),dayOfMonth=date[getDate](),month=date[getMonth](),fullYear=date[getFullYear](),lang=defaultOptions.lang,langWeekdays=lang.weekdays,replacements=extend({'a':langWeekdays[day].substr(0,3),'A':langWeekdays[day],'d':pad(dayOfMonth),'e':dayOfMonth,'b':lang.shortMonths[month],'B':lang.months[month],'m':pad(month+1),'y':fullYear.toString().substr(2,2),'Y':fullYear,'H':pad(hours),'I':pad((hours%12)||12),'l':(hours%12)||12,'M':pad(date[getMinutes]()),'p':hours<12?'AM':'PM','P':hours<12?'am':'pm','S':pad(date.getSeconds()),'L':pad(mathRound(timestamp%1000),3)},Highcharts.dateFormats);for(key in replacements){while(format.indexOf('%'+key)!==-1){format=format.replace('%'+key,typeof replacements[key]==='function'?replacements[key](timestamp):replacements[key]);}}\nreturn capitalize?format.substr(0,1).toUpperCase()+format.substr(1):format;};function formatSingle(format,val){var floatRegex=/f$/,decRegex=/\\.([0-9])/,lang=defaultOptions.lang,decimals;if(floatRegex.test(format)){decimals=format.match(decRegex);decimals=decimals?decimals[1]:-1;if(val!==null){val=numberFormat(val,decimals,lang.decimalPoint,format.indexOf(',')>-1?lang.thousandsSep:'');}}else{val=dateFormat(format,val);}\nreturn val;}\nfunction format(str,ctx){var splitter='{',isInside=false,segment,valueAndFormat,path,i,len,ret=[],val,index;while((index=str.indexOf(splitter))!==-1){segment=str.slice(0,index);if(isInside){valueAndFormat=segment.split(':');path=valueAndFormat.shift().split('.');len=path.length;val=ctx;for(i=0;i<len;i++){val=val[path[i]];}\nif(valueAndFormat.length){val=formatSingle(valueAndFormat.join(':'),val);}\nret.push(val);}else{ret.push(segment);}\nstr=str.slice(index+1);isInside=!isInside;splitter=isInside?'}':'{';}\nret.push(str);return ret.join('');}\nfunction getMagnitude(num){return math.pow(10,mathFloor(math.log(num)/math.LN10));}\nfunction normalizeTickInterval(interval,multiples,magnitude,options){var normalized,i;magnitude=pick(magnitude,1);normalized=interval/magnitude;if(!multiples){multiples=[1,2,2.5,5,10];if(options&&options.allowDecimals===false){if(magnitude===1){multiples=[1,2,5,10];}else if(magnitude<=0.1){multiples=[1/magnitude];}}}\nfor(i=0;i<multiples.length;i++){interval=multiples[i];if(normalized<=(multiples[i]+(multiples[i+1]||multiples[i]))/2){break;}}\ninterval*=magnitude;return interval;}\nfunction stableSort(arr,sortFunction){var length=arr.length,sortValue,i;for(i=0;i<length;i++){arr[i].ss_i=i;}\narr.sort(function(a,b){sortValue=sortFunction(a,b);return sortValue===0?a.ss_i-b.ss_i:sortValue;});for(i=0;i<length;i++){delete arr[i].ss_i;}}\nfunction arrayMin(data){var i=data.length,min=data[0];while(i--){if(data[i]<min){min=data[i];}}\nreturn min;}\nfunction arrayMax(data){var i=data.length,max=data[0];while(i--){if(data[i]>max){max=data[i];}}\nreturn max;}\nfunction destroyObjectProperties(obj,except){var n;for(n in obj){if(obj[n]&&obj[n]!==except&&obj[n].destroy){obj[n].destroy();}\ndelete obj[n];}}\nfunction discardElement(element){if(!garbageBin){garbageBin=createElement(DIV);}\nif(element){garbageBin.appendChild(element);}\ngarbageBin.innerHTML='';}\nerror=function(code,stop){var msg='Highcharts error #'+code+': www.highcharts.com/errors/'+code;if(stop){throw msg;}\nif(win.console){console.log(msg);}};function correctFloat(num){return parseFloat(num.toPrecision(14));}\nfunction setAnimation(animation,chart){globalAnimation=pick(animation,chart.animation);}\ntimeUnits={millisecond:1,second:1000,minute:60000,hour:3600000,day:24*3600000,week:7*24*3600000,month:31*24*3600000,year:31556952000};pathAnim={init:function(elem,fromD,toD){fromD=fromD||'';var shift=elem.shift,bezier=fromD.indexOf('C')>-1,numParams=bezier?7:3,endLength,slice,i,start=fromD.split(' '),end=[].concat(toD),startBaseLine,endBaseLine,sixify=function(arr){i=arr.length;while(i--){if(arr[i]===M){arr.splice(i+1,0,arr[i+1],arr[i+2],arr[i+1],arr[i+2]);}}};if(bezier){sixify(start);sixify(end);}\nif(elem.isArea){startBaseLine=start.splice(start.length-6,6);endBaseLine=end.splice(end.length-6,6);}\nif(shift<=end.length/numParams&&start.length===end.length){while(shift--){end=[].concat(end).splice(0,numParams).concat(end);}}\nelem.shift=0;if(start.length){endLength=end.length;while(start.length<endLength){slice=[].concat(start).splice(start.length-numParams,numParams);if(bezier){slice[numParams-6]=slice[numParams-2];slice[numParams-5]=slice[numParams-1];}\nstart=start.concat(slice);}}\nif(startBaseLine){start=start.concat(startBaseLine);end=end.concat(endBaseLine);}\nreturn[start,end];},step:function(start,end,pos,complete){var ret=[],i=start.length,startVal;if(pos===1){ret=complete;}else if(i===end.length&&pos<1){while(i--){startVal=parseFloat(start[i]);ret[i]=isNaN(startVal)?start[i]:pos*(parseFloat(end[i]-startVal))+startVal;}}else{ret=end;}\nreturn ret;}};(function($){win.HighchartsAdapter=win.HighchartsAdapter||($&&{init:function(pathAnim){var Fx=$.fx,Step=Fx.step,dSetter,Tween=$.Tween,propHooks=Tween&&Tween.propHooks,opacityHook=$.cssHooks.opacity;$.extend($.easing,{easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;}});$.each(['cur','_default','width','height','opacity'],function(i,fn){var obj=Step,base;if(fn==='cur'){obj=Fx.prototype;}else if(fn==='_default'&&Tween){obj=propHooks[fn];fn='set';}\nbase=obj[fn];if(base){obj[fn]=function(fx){var elem;fx=i?fx:this;if(fx.prop==='align'){return;}\nelem=fx.elem;return elem.attr?elem.attr(fx.prop,fn==='cur'?UNDEFINED:fx.now):base.apply(this,arguments);};}});wrap(opacityHook,'get',function(proceed,elem,computed){return elem.attr?(elem.opacity||0):proceed.call(this,elem,computed);});dSetter=function(fx){var elem=fx.elem,ends;if(!fx.started){ends=pathAnim.init(elem,elem.d,elem.toD);fx.start=ends[0];fx.end=ends[1];fx.started=true;}\nelem.attr('d',pathAnim.step(fx.start,fx.end,fx.pos,elem.toD));};if(Tween){propHooks.d={set:dSetter};}else{Step.d=dSetter;}\nthis.each=Array.prototype.forEach?function(arr,fn){return Array.prototype.forEach.call(arr,fn);}:function(arr,fn){var i,len=arr.length;for(i=0;i<len;i++){if(fn.call(arr[i],arr[i],i,arr)===false){return i;}}};$.fn.highcharts=function(){var constr='Chart',args=arguments,options,ret,chart;if(this[0]){if(isString(args[0])){constr=args[0];args=Array.prototype.slice.call(args,1);}\noptions=args[0];if(options!==UNDEFINED){options.chart=options.chart||{};options.chart.renderTo=this[0];chart=new Highcharts[constr](options,args[1]);ret=this;}\nif(options===UNDEFINED){ret=charts[attr(this[0],'data-highcharts-chart')];}}\nreturn ret;};},getScript:$.getScript,inArray:$.inArray,adapterRun:function(elem,method){return $(elem)[method]();},grep:$.grep,map:function(arr,fn){var results=[],i=0,len=arr.length;for(;i<len;i++){results[i]=fn.call(arr[i],arr[i],i,arr);}\nreturn results;},offset:function(el){return $(el).offset();},addEvent:function(el,event,fn){$(el).bind(event,fn);},removeEvent:function(el,eventType,handler){var func=doc.removeEventListener?'removeEventListener':'detachEvent';if(doc[func]&&el&&!el[func]){el[func]=function(){};}\n$(el).unbind(eventType,handler);},fireEvent:function(el,type,eventArguments,defaultFunction){var event=$.Event(type),detachedType='detached'+type,defaultPrevented;if(!isIE&&eventArguments){delete eventArguments.layerX;delete eventArguments.layerY;delete eventArguments.returnValue;}\nextend(event,eventArguments);if(el[type]){el[detachedType]=el[type];el[type]=null;}\n$.each(['preventDefault','stopPropagation'],function(i,fn){var base=event[fn];event[fn]=function(){try{base.call(event);}catch(e){if(fn==='preventDefault'){defaultPrevented=true;}}};});$(el).trigger(event);if(el[detachedType]){el[type]=el[detachedType];el[detachedType]=null;}\nif(defaultFunction&&!event.isDefaultPrevented()&&!defaultPrevented){defaultFunction(event);}},washMouseEvent:function(e){var ret=e.originalEvent||e;if(ret.pageX===UNDEFINED){ret.pageX=e.pageX;ret.pageY=e.pageY;}\nreturn ret;},animate:function(el,params,options){var $el=$(el);if(!el.style){el.style={};}\nif(params.d){el.toD=params.d;params.d=1;}\n$el.stop();if(params.opacity!==UNDEFINED&&el.attr){params.opacity+='px';}\n$el.animate(params,options);},stop:function(el){$(el).stop();}});}(win.jQuery));var globalAdapter=win.HighchartsAdapter,adapter=globalAdapter||{};if(globalAdapter){globalAdapter.init.call(globalAdapter,pathAnim);}\nvar adapterRun=adapter.adapterRun,getScript=adapter.getScript,inArray=adapter.inArray,each=adapter.each,grep=adapter.grep,offset=adapter.offset,map=adapter.map,addEvent=adapter.addEvent,removeEvent=adapter.removeEvent,fireEvent=adapter.fireEvent,washMouseEvent=adapter.washMouseEvent,animate=adapter.animate,stop=adapter.stop;var\ndefaultLabelOptions={enabled:true,x:0,y:15,style:{color:'#606060',cursor:'default',fontSize:'11px'}};defaultOptions={colors:['#7cb5ec','#434348','#90ed7d','#f7a35c','#8085e9','#f15c80','#e4d354','#8085e8','#8d4653','#91e8e1'],symbols:['circle','diamond','square','triangle','triangle-down'],lang:{loading:'Loading...',months:['January','February','March','April','May','June','July','August','September','October','November','December'],shortMonths:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],weekdays:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],decimalPoint:'.',numericSymbols:['k','M','G','T','P','E'],resetZoom:'Reset zoom',resetZoomTitle:'Reset zoom level 1:1',thousandsSep:','},global:{useUTC:true,canvasToolsURL:'http://code.highcharts.com/4.0.3/modules/canvas-tools.js',VMLRadialGradientURL:'http://code.highcharts.com/4.0.3/gfx/vml-radial-gradient.png'},chart:{borderColor:'#4572A7',borderRadius:0,defaultSeriesType:'line',ignoreHiddenSeries:true,spacing:[10,10,15,10],backgroundColor:'#FFFFFF',plotBorderColor:'#C0C0C0',resetZoomButton:{theme:{zIndex:20},position:{align:'right',x:-10,y:10}}},title:{text:'Chart title',align:'center',margin:15,style:{color:'#333333',fontSize:'18px'}},subtitle:{text:'',align:'center',style:{color:'#555555'}},plotOptions:{line:{allowPointSelect:false,showCheckbox:false,animation:{duration:1000},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:'#FFFFFF',states:{hover:{enabled:true,lineWidthPlus:1,radiusPlus:2},select:{fillColor:'#FFFFFF',lineColor:'#000000',lineWidth:2}}},point:{events:{}},dataLabels:merge(defaultLabelOptions,{align:'center',enabled:false,formatter:function(){return this.y===null?'':numberFormat(this.y,-1);},verticalAlign:'bottom',y:0}),cropThreshold:300,pointRange:0,states:{hover:{lineWidthPlus:1,marker:{},halo:{size:10,opacity:0.25}},select:{marker:{}}},stickyTracking:true,turboThreshold:1000}},labels:{style:{position:ABSOLUTE,color:'#3E576F'}},legend:{enabled:true,align:'center',layout:'horizontal',labelFormatter:function(){return this.name;},borderColor:'#909090',borderRadius:0,navigation:{activeColor:'#274b6d',inactiveColor:'#CCC'},shadow:false,itemStyle:{color:'#333333',fontSize:'12px',fontWeight:'bold'},itemHoverStyle:{color:'#000'},itemHiddenStyle:{color:'#CCC'},itemCheckboxStyle:{position:ABSOLUTE,width:'13px',height:'13px'},symbolPadding:5,verticalAlign:'bottom',x:0,y:0,title:{style:{fontWeight:'bold'}}},loading:{labelStyle:{fontWeight:'bold',position:RELATIVE,top:'45%'},style:{position:ABSOLUTE,backgroundColor:'white',opacity:0.5,textAlign:'center'}},tooltip:{enabled:true,animation:hasSVG,backgroundColor:'rgba(249, 249, 249, .85)',borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:'%A, %b %e, %H:%M:%S.%L',second:'%A, %b %e, %H:%M:%S',minute:'%A, %b %e, %H:%M',hour:'%A, %b %e, %H:%M',day:'%A, %b %e, %Y',week:'Week from %A, %b %e, %Y',month:'%B %Y',year:'%Y'},headerFormat:'<span style=\"font-size: 10px\">{point.key}<\/span><br/>',pointFormat:'<span style=\"color:{series.color}\">\\u25CF<\/span> {series.name}: <b>{point.y}<\/b><br/>',shadow:true,snap:isTouchDevice?25:10,style:{color:'#333333',cursor:'default',fontSize:'12px',padding:'8px',whiteSpace:'nowrap'}},credits:{enabled:true,text:'Highcharts.com',href:'http://www.highcharts.com',position:{align:'right',x:-10,verticalAlign:'bottom',y:-5},style:{cursor:'pointer',color:'#909090',fontSize:'9px'}}};var defaultPlotOptions=defaultOptions.plotOptions,defaultSeriesOptions=defaultPlotOptions.line;setTimeMethods();function setTimeMethods(){var useUTC=defaultOptions.global.useUTC,GET=useUTC?'getUTC':'get',SET=useUTC?'setUTC':'set';timezoneOffset=((useUTC&&defaultOptions.global.timezoneOffset)||0)*60000;makeTime=useUTC?Date.UTC:function(year,month,date,hours,minutes,seconds){return new Date(year,month,pick(date,1),pick(hours,0),pick(minutes,0),pick(seconds,0)).getTime();};getMinutes=GET+'Minutes';getHours=GET+'Hours';getDay=GET+'Day';getDate=GET+'Date';getMonth=GET+'Month';getFullYear=GET+'FullYear';setMinutes=SET+'Minutes';setHours=SET+'Hours';setDate=SET+'Date';setMonth=SET+'Month';setFullYear=SET+'FullYear';}\nfunction setOptions(options){defaultOptions=merge(true,defaultOptions,options);setTimeMethods();return defaultOptions;}\nfunction getOptions(){return defaultOptions;}\nvar rgbaRegEx=/rgba\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]?(?:\\.[0-9]+)?)\\s*\\)/,hexRegEx=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,rgbRegEx=/rgb\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*\\)/;var Color=function(input){var rgba=[],result,stops;function init(input){if(input&&input.stops){stops=map(input.stops,function(stop){return Color(stop[1]);});}else{result=rgbaRegEx.exec(input);if(result){rgba=[pInt(result[1]),pInt(result[2]),pInt(result[3]),parseFloat(result[4],10)];}else{result=hexRegEx.exec(input);if(result){rgba=[pInt(result[1],16),pInt(result[2],16),pInt(result[3],16),1];}else{result=rgbRegEx.exec(input);if(result){rgba=[pInt(result[1]),pInt(result[2]),pInt(result[3]),1];}}}}}\nfunction get(format){var ret;if(stops){ret=merge(input);ret.stops=[].concat(ret.stops);each(stops,function(stop,i){ret.stops[i]=[ret.stops[i][0],stop.get(format)];});}else if(rgba&&!isNaN(rgba[0])){if(format==='rgb'){ret='rgb('+rgba[0]+','+rgba[1]+','+rgba[2]+')';}else if(format==='a'){ret=rgba[3];}else{ret='rgba('+rgba.join(',')+')';}}else{ret=input;}\nreturn ret;}\nfunction brighten(alpha){if(stops){each(stops,function(stop){stop.brighten(alpha);});}else if(isNumber(alpha)&&alpha!==0){var i;for(i=0;i<3;i++){rgba[i]+=pInt(alpha*255);if(rgba[i]<0){rgba[i]=0;}\nif(rgba[i]>255){rgba[i]=255;}}}\nreturn this;}\nfunction setOpacity(alpha){rgba[3]=alpha;return this;}\ninit(input);return{get:get,brighten:brighten,rgba:rgba,setOpacity:setOpacity};};function SVGElement(){}\nSVGElement.prototype={opacity:1,textProps:['fontSize','fontWeight','fontFamily','color','lineHeight','width','textDecoration','textShadow','HcTextStroke'],init:function(renderer,nodeName){var wrapper=this;wrapper.element=nodeName==='span'?createElement(nodeName):doc.createElementNS(SVG_NS,nodeName);wrapper.renderer=renderer;},animate:function(params,options,complete){var animOptions=pick(options,globalAnimation,true);stop(this);if(animOptions){animOptions=merge(animOptions,{});if(complete){animOptions.complete=complete;}\nanimate(this,params,animOptions);}else{this.attr(params);if(complete){complete();}}\nreturn this;},colorGradient:function(color,prop,elem){var renderer=this.renderer,colorObject,gradName,gradAttr,gradients,gradientObject,stops,stopColor,stopOpacity,radialReference,n,id,key=[];if(color.linearGradient){gradName='linearGradient';}else if(color.radialGradient){gradName='radialGradient';}\nif(gradName){gradAttr=color[gradName];gradients=renderer.gradients;stops=color.stops;radialReference=elem.radialReference;if(isArray(gradAttr)){color[gradName]=gradAttr={x1:gradAttr[0],y1:gradAttr[1],x2:gradAttr[2],y2:gradAttr[3],gradientUnits:'userSpaceOnUse'};}\nif(gradName==='radialGradient'&&radialReference&&!defined(gradAttr.gradientUnits)){gradAttr=merge(gradAttr,{cx:(radialReference[0]-radialReference[2]/2)+gradAttr.cx*radialReference[2],cy:(radialReference[1]-radialReference[2]/2)+gradAttr.cy*radialReference[2],r:gradAttr.r*radialReference[2],gradientUnits:'userSpaceOnUse'});}\nfor(n in gradAttr){if(n!=='id'){key.push(n,gradAttr[n]);}}\nfor(n in stops){key.push(stops[n]);}\nkey=key.join(',');if(gradients[key]){id=gradients[key].attr('id');}else{gradAttr.id=id=PREFIX+idCounter++;gradients[key]=gradientObject=renderer.createElement(gradName).attr(gradAttr).add(renderer.defs);gradientObject.stops=[];each(stops,function(stop){var stopObject;if(stop[1].indexOf('rgba')===0){colorObject=Color(stop[1]);stopColor=colorObject.get('rgb');stopOpacity=colorObject.get('a');}else{stopColor=stop[1];stopOpacity=1;}\nstopObject=renderer.createElement('stop').attr({offset:stop[0],'stop-color':stopColor,'stop-opacity':stopOpacity}).add(gradientObject);gradientObject.stops.push(stopObject);});}\nelem.setAttribute(prop,'url('+renderer.url+'#'+id+')');}},attr:function(hash,val){var key,value,element=this.element,hasSetSymbolSize,ret=this,skipAttr;if(typeof hash==='string'&&val!==UNDEFINED){key=hash;hash={};hash[key]=val;}\nif(typeof hash==='string'){ret=(this[hash+'Getter']||this._defaultGetter).call(this,hash,element);}else{for(key in hash){value=hash[key];skipAttr=false;if(this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(key)){if(!hasSetSymbolSize){this.symbolAttr(hash);hasSetSymbolSize=true;}\nskipAttr=true;}\nif(this.rotation&&(key==='x'||key==='y')){this.doTransform=true;}\nif(!skipAttr){(this[key+'Setter']||this._defaultSetter).call(this,value,key,element);}\nif(this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(key)){this.updateShadows(key,value);}}\nif(this.doTransform){this.updateTransform();this.doTransform=false;}}\nreturn ret;},updateShadows:function(key,value){var shadows=this.shadows,i=shadows.length;while(i--){shadows[i].setAttribute(key,key==='height'?mathMax(value-(shadows[i].cutHeight||0),0):key==='d'?this.d:value);}},addClass:function(className){var element=this.element,currentClassName=attr(element,'class')||'';if(currentClassName.indexOf(className)===-1){attr(element,'class',currentClassName+' '+className);}\nreturn this;},symbolAttr:function(hash){var wrapper=this;each(['x','y','r','start','end','width','height','innerR','anchorX','anchorY'],function(key){wrapper[key]=pick(hash[key],wrapper[key]);});wrapper.attr({d:wrapper.renderer.symbols[wrapper.symbolName](wrapper.x,wrapper.y,wrapper.width,wrapper.height,wrapper)});},clip:function(clipRect){return this.attr('clip-path',clipRect?'url('+this.renderer.url+'#'+clipRect.id+')':NONE);},crisp:function(rect){var wrapper=this,key,attribs={},normalizer,strokeWidth=rect.strokeWidth||wrapper.strokeWidth||0;normalizer=mathRound(strokeWidth)%2/2;rect.x=mathFloor(rect.x||wrapper.x||0)+normalizer;rect.y=mathFloor(rect.y||wrapper.y||0)+normalizer;rect.width=mathFloor((rect.width||wrapper.width||0)-2*normalizer);rect.height=mathFloor((rect.height||wrapper.height||0)-2*normalizer);rect.strokeWidth=strokeWidth;for(key in rect){if(wrapper[key]!==rect[key]){wrapper[key]=attribs[key]=rect[key];}}\nreturn attribs;},css:function(styles){var elemWrapper=this,oldStyles=elemWrapper.styles,newStyles={},elem=elemWrapper.element,textWidth,n,serializedCss='',hyphenate,hasNew=!oldStyles;if(styles&&styles.color){styles.fill=styles.color;}\nif(oldStyles){for(n in styles){if(styles[n]!==oldStyles[n]){newStyles[n]=styles[n];hasNew=true;}}}\nif(hasNew){textWidth=elemWrapper.textWidth=styles&&styles.width&&elem.nodeName.toLowerCase()==='text'&&pInt(styles.width);if(oldStyles){styles=extend(oldStyles,newStyles);}\nelemWrapper.styles=styles;if(textWidth&&(useCanVG||(!hasSVG&&elemWrapper.renderer.forExport))){delete styles.width;}\nif(isIE&&!hasSVG){css(elemWrapper.element,styles);}else{hyphenate=function(a,b){return'-'+b.toLowerCase();};for(n in styles){serializedCss+=n.replace(/([A-Z])/g,hyphenate)+':'+styles[n]+';';}\nattr(elem,'style',serializedCss);}\nif(textWidth&&elemWrapper.added){elemWrapper.renderer.buildText(elemWrapper);}}\nreturn elemWrapper;},on:function(eventType,handler){var svgElement=this,element=svgElement.element;if(hasTouch&&eventType==='click'){element.ontouchstart=function(e){svgElement.touchEventFired=Date.now();e.preventDefault();handler.call(element,e);};element.onclick=function(e){if(userAgent.indexOf('Android')===-1||Date.now()-(svgElement.touchEventFired||0)>1100){handler.call(element,e);}};}else{element['on'+eventType]=handler;}\nreturn this;},setRadialReference:function(coordinates){this.element.radialReference=coordinates;return this;},translate:function(x,y){return this.attr({translateX:x,translateY:y});},invert:function(){var wrapper=this;wrapper.inverted=true;wrapper.updateTransform();return wrapper;},updateTransform:function(){var wrapper=this,translateX=wrapper.translateX||0,translateY=wrapper.translateY||0,scaleX=wrapper.scaleX,scaleY=wrapper.scaleY,inverted=wrapper.inverted,rotation=wrapper.rotation,element=wrapper.element,transform;if(inverted){translateX+=wrapper.attr('width');translateY+=wrapper.attr('height');}\ntransform=['translate('+translateX+','+translateY+')'];if(inverted){transform.push('rotate(90) scale(-1,1)');}else if(rotation){transform.push('rotate('+rotation+' '+(element.getAttribute('x')||0)+' '+(element.getAttribute('y')||0)+')');}\nif(defined(scaleX)||defined(scaleY)){transform.push('scale('+pick(scaleX,1)+' '+pick(scaleY,1)+')');}\nif(transform.length){element.setAttribute('transform',transform.join(' '));}},toFront:function(){var element=this.element;element.parentNode.appendChild(element);return this;},align:function(alignOptions,alignByTranslate,box){var align,vAlign,x,y,attribs={},alignTo,renderer=this.renderer,alignedObjects=renderer.alignedObjects;if(alignOptions){this.alignOptions=alignOptions;this.alignByTranslate=alignByTranslate;if(!box||isString(box)){this.alignTo=alignTo=box||'renderer';erase(alignedObjects,this);alignedObjects.push(this);box=null;}}else{alignOptions=this.alignOptions;alignByTranslate=this.alignByTranslate;alignTo=this.alignTo;}\nbox=pick(box,renderer[alignTo],renderer);align=alignOptions.align;vAlign=alignOptions.verticalAlign;x=(box.x||0)+(alignOptions.x||0);y=(box.y||0)+(alignOptions.y||0);if(align==='right'||align==='center'){x+=(box.width-(alignOptions.width||0))/{right:1,center:2}[align];}\nattribs[alignByTranslate?'translateX':'x']=mathRound(x);if(vAlign==='bottom'||vAlign==='middle'){y+=(box.height-(alignOptions.height||0))/({bottom:1,middle:2}[vAlign]||1);}\nattribs[alignByTranslate?'translateY':'y']=mathRound(y);this[this.placed?'animate':'attr'](attribs);this.placed=true;this.alignAttr=attribs;return this;},getBBox:function(){var wrapper=this,bBox=wrapper.bBox,renderer=wrapper.renderer,width,height,rotation=wrapper.rotation,element=wrapper.element,styles=wrapper.styles,rad=rotation*deg2rad,textStr=wrapper.textStr,cacheKey;if(textStr===''||numRegex.test(textStr)){cacheKey='num.'+textStr.toString().length+(styles?('|'+styles.fontSize+'|'+styles.fontFamily):'');}\nif(cacheKey){bBox=renderer.cache[cacheKey];}\nif(!bBox){if(element.namespaceURI===SVG_NS||renderer.forExport){try{bBox=element.getBBox?extend({},element.getBBox()):{width:element.offsetWidth,height:element.offsetHeight};}catch(e){}\nif(!bBox||bBox.width<0){bBox={width:0,height:0};}}else{bBox=wrapper.htmlGetBBox();}\nif(renderer.isSVG){width=bBox.width;height=bBox.height;if(isIE&&styles&&styles.fontSize==='11px'&&height.toPrecision(3)==='16.9'){bBox.height=height=14;}\nif(rotation){bBox.width=mathAbs(height*mathSin(rad))+mathAbs(width*mathCos(rad));bBox.height=mathAbs(height*mathCos(rad))+mathAbs(width*mathSin(rad));}}\nwrapper.bBox=bBox;if(cacheKey){renderer.cache[cacheKey]=bBox;}}\nreturn bBox;},show:function(inherit){if(inherit&&this.element.namespaceURI===SVG_NS){this.element.removeAttribute('visibility');return this;}else{return this.attr({visibility:inherit?'inherit':VISIBLE});}},hide:function(){return this.attr({visibility:HIDDEN});},fadeOut:function(duration){var elemWrapper=this;elemWrapper.animate({opacity:0},{duration:duration||150,complete:function(){elemWrapper.hide();}});},add:function(parent){var renderer=this.renderer,parentWrapper=parent||renderer,parentNode=parentWrapper.element||renderer.box,childNodes,element=this.element,zIndex=this.zIndex,otherElement,otherZIndex,i,inserted;if(parent){this.parentGroup=parent;}\nthis.parentInverted=parent&&parent.inverted;if(this.textStr!==undefined){renderer.buildText(this);}\nif(zIndex){parentWrapper.handleZ=true;zIndex=pInt(zIndex);}\nif(parentWrapper.handleZ){childNodes=parentNode.childNodes;for(i=0;i<childNodes.length;i++){otherElement=childNodes[i];otherZIndex=attr(otherElement,'zIndex');if(otherElement!==element&&(pInt(otherZIndex)>zIndex||(!defined(zIndex)&&defined(otherZIndex)))){parentNode.insertBefore(element,otherElement);inserted=true;break;}}}\nif(!inserted){parentNode.appendChild(element);}\nthis.added=true;if(this.onAdd){this.onAdd();}\nreturn this;},safeRemoveChild:function(element){var parentNode=element.parentNode;if(parentNode){parentNode.removeChild(element);}},destroy:function(){var wrapper=this,element=wrapper.element||{},shadows=wrapper.shadows,parentToClean=wrapper.renderer.isSVG&&element.nodeName==='SPAN'&&wrapper.parentGroup,grandParent,key,i;element.onclick=element.onmouseout=element.onmouseover=element.onmousemove=element.point=null;stop(wrapper);if(wrapper.clipPath){wrapper.clipPath=wrapper.clipPath.destroy();}\nif(wrapper.stops){for(i=0;i<wrapper.stops.length;i++){wrapper.stops[i]=wrapper.stops[i].destroy();}\nwrapper.stops=null;}\nwrapper.safeRemoveChild(element);if(shadows){each(shadows,function(shadow){wrapper.safeRemoveChild(shadow);});}\nwhile(parentToClean&&parentToClean.div&&parentToClean.div.childNodes.length===0){grandParent=parentToClean.parentGroup;wrapper.safeRemoveChild(parentToClean.div);delete parentToClean.div;parentToClean=grandParent;}\nif(wrapper.alignTo){erase(wrapper.renderer.alignedObjects,wrapper);}\nfor(key in wrapper){delete wrapper[key];}\nreturn null;},shadow:function(shadowOptions,group,cutOff){var shadows=[],i,shadow,element=this.element,strokeWidth,shadowWidth,shadowElementOpacity,transform;if(shadowOptions){shadowWidth=pick(shadowOptions.width,3);shadowElementOpacity=(shadowOptions.opacity||0.15)/shadowWidth;transform=this.parentInverted?'(-1,-1)':'('+pick(shadowOptions.offsetX,1)+', '+pick(shadowOptions.offsetY,1)+')';for(i=1;i<=shadowWidth;i++){shadow=element.cloneNode(0);strokeWidth=(shadowWidth*2)+1-(2*i);attr(shadow,{'isShadow':'true','stroke':shadowOptions.color||'black','stroke-opacity':shadowElementOpacity*i,'stroke-width':strokeWidth,'transform':'translate'+transform,'fill':NONE});if(cutOff){attr(shadow,'height',mathMax(attr(shadow,'height')-strokeWidth,0));shadow.cutHeight=strokeWidth;}\nif(group){group.element.appendChild(shadow);}else{element.parentNode.insertBefore(shadow,element);}\nshadows.push(shadow);}\nthis.shadows=shadows;}\nreturn this;},xGetter:function(key){if(this.element.nodeName==='circle'){key={x:'cx',y:'cy'}[key]||key;}\nreturn this._defaultGetter(key);},_defaultGetter:function(key){var ret=pick(this[key],this.element?this.element.getAttribute(key):null,0);if(/^[\\-0-9\\.]+$/.test(ret)){ret=parseFloat(ret);}\nreturn ret;},dSetter:function(value,key,element){if(value&&value.join){value=value.join(' ');}\nif(/(NaN| {2}|^$)/.test(value)){value='M 0 0';}\nelement.setAttribute(key,value);this[key]=value;},dashstyleSetter:function(value){var i;value=value&&value.toLowerCase();if(value){value=value.replace('shortdashdotdot','3,1,1,1,1,1,').replace('shortdashdot','3,1,1,1').replace('shortdot','1,1,').replace('shortdash','3,1,').replace('longdash','8,3,').replace(/dot/g,'1,3,').replace('dash','4,3,').replace(/,$/,'').replace('solid',1).split(',');i=value.length;while(i--){value[i]=pInt(value[i])*this['stroke-width'];}\nvalue=value.join(',');this.element.setAttribute('stroke-dasharray',value);}},alignSetter:function(value){this.element.setAttribute('text-anchor',{left:'start',center:'middle',right:'end'}[value]);},opacitySetter:function(value,key,element){this[key]=value;element.setAttribute(key,value);},titleSetter:function(value){var titleNode=this.element.getElementsByTagName('title')[0];if(!titleNode){titleNode=doc.createElementNS(SVG_NS,'title');this.element.appendChild(titleNode);}\ntitleNode.textContent=value;},textSetter:function(value){if(value!==this.textStr){delete this.bBox;this.textStr=value;if(this.added){this.renderer.buildText(this);}}},fillSetter:function(value,key,element){if(typeof value==='string'){element.setAttribute(key,value);}else if(value){this.colorGradient(value,key,element);}},zIndexSetter:function(value,key,element){element.setAttribute(key,value);this[key]=value;},_defaultSetter:function(value,key,element){element.setAttribute(key,value);}};SVGElement.prototype.yGetter=SVGElement.prototype.xGetter;SVGElement.prototype.translateXSetter=SVGElement.prototype.translateYSetter=SVGElement.prototype.rotationSetter=SVGElement.prototype.verticalAlignSetter=SVGElement.prototype.scaleXSetter=SVGElement.prototype.scaleYSetter=function(value,key){this[key]=value;this.doTransform=true;};SVGElement.prototype['stroke-widthSetter']=SVGElement.prototype.strokeSetter=function(value,key,element){this[key]=value;if(this.stroke&&this['stroke-width']){this.strokeWidth=this['stroke-width'];SVGElement.prototype.fillSetter.call(this,this.stroke,'stroke',element);element.setAttribute('stroke-width',this['stroke-width']);this.hasStroke=true;}else if(key==='stroke-width'&&value===0&&this.hasStroke){element.removeAttribute('stroke');this.hasStroke=false;}};var SVGRenderer=function(){this.init.apply(this,arguments);};SVGRenderer.prototype={Element:SVGElement,init:function(container,width,height,style,forExport){var renderer=this,loc=location,boxWrapper,element,desc;boxWrapper=renderer.createElement('svg').attr({version:'1.1'}).css(this.getStyle(style));element=boxWrapper.element;container.appendChild(element);if(container.innerHTML.indexOf('xmlns')===-1){attr(element,'xmlns',SVG_NS);}\nrenderer.isSVG=true;renderer.box=element;renderer.boxWrapper=boxWrapper;renderer.alignedObjects=[];renderer.url=(isFirefox||isWebKit)&&doc.getElementsByTagName('base').length?loc.href.replace(/#.*?$/,'').replace(/([\\('\\)])/g,'\\\\$1').replace(/ /g,'%20'):'';desc=this.createElement('desc').add();desc.element.appendChild(doc.createTextNode('Created with '+PRODUCT+' '+VERSION));renderer.defs=this.createElement('defs').add();renderer.forExport=forExport;renderer.gradients={};renderer.cache={};renderer.setSize(width,height,false);var subPixelFix,rect;if(isFirefox&&container.getBoundingClientRect){renderer.subPixelFix=subPixelFix=function(){css(container,{left:0,top:0});rect=container.getBoundingClientRect();css(container,{left:(mathCeil(rect.left)-rect.left)+PX,top:(mathCeil(rect.top)-rect.top)+PX});};subPixelFix();addEvent(win,'resize',subPixelFix);}},getStyle:function(style){return(this.style=extend({fontFamily:'\"Lucida Grande\", \"Lucida Sans Unicode\", Arial, Helvetica, sans-serif',fontSize:'12px'},style));},isHidden:function(){return!this.boxWrapper.getBBox().width;},destroy:function(){var renderer=this,rendererDefs=renderer.defs;renderer.box=null;renderer.boxWrapper=renderer.boxWrapper.destroy();destroyObjectProperties(renderer.gradients||{});renderer.gradients=null;if(rendererDefs){renderer.defs=rendererDefs.destroy();}\nif(renderer.subPixelFix){removeEvent(win,'resize',renderer.subPixelFix);}\nrenderer.alignedObjects=null;return null;},createElement:function(nodeName){var wrapper=new this.Element();wrapper.init(this,nodeName);return wrapper;},draw:function(){},buildText:function(wrapper){var textNode=wrapper.element,renderer=this,forExport=renderer.forExport,textStr=pick(wrapper.textStr,'').toString(),hasMarkup=textStr.indexOf('<')!==-1,lines,childNodes=textNode.childNodes,styleRegex,hrefRegex,parentX=attr(textNode,'x'),textStyles=wrapper.styles,width=wrapper.textWidth,textLineHeight=textStyles&&textStyles.lineHeight,textStroke=textStyles&&textStyles.HcTextStroke,i=childNodes.length,getLineHeight=function(tspan){return textLineHeight?pInt(textLineHeight):renderer.fontMetrics(/(px|em)$/.test(tspan&&tspan.style.fontSize)?tspan.style.fontSize:((textStyles&&textStyles.fontSize)||renderer.style.fontSize||12),tspan).h;};while(i--){textNode.removeChild(childNodes[i]);}\nif(!hasMarkup&&!textStroke&&textStr.indexOf(' ')===-1){textNode.appendChild(doc.createTextNode(textStr));return;}else{styleRegex=/<.*style=\"([^\"]+)\".*>/;hrefRegex=/<.*href=\"(http[^\"]+)\".*>/;if(width&&!wrapper.added){this.box.appendChild(textNode);}\nif(hasMarkup){lines=textStr.replace(/<(b|strong)>/g,'<span style=\"font-weight:bold\">').replace(/<(i|em)>/g,'<span style=\"font-style:italic\">').replace(/<a/g,'<span').replace(/<\\/(b|strong|i|em|a)>/g,'<\/span>').split(/<br.*?>/g);}else{lines=[textStr];}\nif(lines[lines.length-1]===''){lines.pop();}\neach(lines,function(line,lineNo){var spans,spanNo=0;line=line.replace(/<span/g,'|||<span').replace(/<\\/span>/g,'<\/span>|||');spans=line.split('|||');each(spans,function(span){if(span!==''||spans.length===1){var attributes={},tspan=doc.createElementNS(SVG_NS,'tspan'),spanStyle;if(styleRegex.test(span)){spanStyle=span.match(styleRegex)[1].replace(/(;| |^)color([ :])/,'$1fill$2');attr(tspan,'style',spanStyle);}\nif(hrefRegex.test(span)&&!forExport){attr(tspan,'onclick','location.href=\\\"'+span.match(hrefRegex)[1]+'\\\"');css(tspan,{cursor:'pointer'});}\nspan=(span.replace(/<(.|\\n)*?>/g,'')||' ').replace(/&lt;/g,'<').replace(/&gt;/g,'>');if(span!==' '){tspan.appendChild(doc.createTextNode(span));if(!spanNo){if(lineNo&&parentX!==null){attributes.x=parentX;}}else{attributes.dx=0;}\nattr(tspan,attributes);textNode.appendChild(tspan);if(!spanNo&&lineNo){if(!hasSVG&&forExport){css(tspan,{display:'block'});}\nattr(tspan,'dy',getLineHeight(tspan));}\nif(width){var words=span.replace(/([^\\^])-/g,'$1- ').split(' '),hasWhiteSpace=spans.length>1||(words.length>1&&textStyles.whiteSpace!=='nowrap'),tooLong,actualWidth,hcHeight=textStyles.HcHeight,rest=[],dy=getLineHeight(tspan),softLineNo=1,bBox;while(hasWhiteSpace&&(words.length||rest.length)){delete wrapper.bBox;bBox=wrapper.getBBox();actualWidth=bBox.width;if(!hasSVG&&renderer.forExport){actualWidth=renderer.measureSpanWidth(tspan.firstChild.data,wrapper.styles);}\ntooLong=actualWidth>width;if(!tooLong||words.length===1){words=rest;rest=[];if(words.length){softLineNo++;if(hcHeight&&softLineNo*dy>hcHeight){words=['...'];wrapper.attr('title',wrapper.textStr);}else{tspan=doc.createElementNS(SVG_NS,'tspan');attr(tspan,{dy:dy,x:parentX});if(spanStyle){attr(tspan,'style',spanStyle);}\ntextNode.appendChild(tspan);}}\nif(actualWidth>width){width=actualWidth;}}else{tspan.removeChild(tspan.firstChild);rest.unshift(words.pop());}\nif(words.length){tspan.appendChild(doc.createTextNode(words.join(' ').replace(/- /g,'-')));}}}\nspanNo++;}}});});}},button:function(text,x,y,callback,normalState,hoverState,pressedState,disabledState,shape){var label=this.label(text,x,y,shape,null,null,null,null,'button'),curState=0,stateOptions,stateStyle,normalStyle,hoverStyle,pressedStyle,disabledStyle,verticalGradient={x1:0,y1:0,x2:0,y2:1};normalState=merge({'stroke-width':1,stroke:'#CCCCCC',fill:{linearGradient:verticalGradient,stops:[[0,'#FEFEFE'],[1,'#F6F6F6']]},r:2,padding:5,style:{color:'black'}},normalState);normalStyle=normalState.style;delete normalState.style;hoverState=merge(normalState,{stroke:'#68A',fill:{linearGradient:verticalGradient,stops:[[0,'#FFF'],[1,'#ACF']]}},hoverState);hoverStyle=hoverState.style;delete hoverState.style;pressedState=merge(normalState,{stroke:'#68A',fill:{linearGradient:verticalGradient,stops:[[0,'#9BD'],[1,'#CDF']]}},pressedState);pressedStyle=pressedState.style;delete pressedState.style;disabledState=merge(normalState,{style:{color:'#CCC'}},disabledState);disabledStyle=disabledState.style;delete disabledState.style;addEvent(label.element,isIE?'mouseover':'mouseenter',function(){if(curState!==3){label.attr(hoverState).css(hoverStyle);}});addEvent(label.element,isIE?'mouseout':'mouseleave',function(){if(curState!==3){stateOptions=[normalState,hoverState,pressedState][curState];stateStyle=[normalStyle,hoverStyle,pressedStyle][curState];label.attr(stateOptions).css(stateStyle);}});label.setState=function(state){label.state=curState=state;if(!state){label.attr(normalState).css(normalStyle);}else if(state===2){label.attr(pressedState).css(pressedStyle);}else if(state===3){label.attr(disabledState).css(disabledStyle);}};return label.on('click',function(){if(curState!==3){callback.call(label);}}).attr(normalState).css(extend({cursor:'default'},normalStyle));},crispLine:function(points,width){if(points[1]===points[4]){points[1]=points[4]=mathRound(points[1])-(width%2/2);}\nif(points[2]===points[5]){points[2]=points[5]=mathRound(points[2])+(width%2/2);}\nreturn points;},path:function(path){var attr={fill:NONE};if(isArray(path)){attr.d=path;}else if(isObject(path)){extend(attr,path);}\nreturn this.createElement('path').attr(attr);},circle:function(x,y,r){var attr=isObject(x)?x:{x:x,y:y,r:r},wrapper=this.createElement('circle');wrapper.xSetter=function(value){this.element.setAttribute('cx',value);};wrapper.ySetter=function(value){this.element.setAttribute('cy',value);};return wrapper.attr(attr);},arc:function(x,y,r,innerR,start,end){var arc;if(isObject(x)){y=x.y;r=x.r;innerR=x.innerR;start=x.start;end=x.end;x=x.x;}\narc=this.symbol('arc',x||0,y||0,r||0,r||0,{innerR:innerR||0,start:start||0,end:end||0});arc.r=r;return arc;},rect:function(x,y,width,height,r,strokeWidth){r=isObject(x)?x.r:r;var wrapper=this.createElement('rect'),attribs=isObject(x)?x:x===UNDEFINED?{}:{x:x,y:y,width:mathMax(width,0),height:mathMax(height,0)};if(strokeWidth!==UNDEFINED){attribs.strokeWidth=strokeWidth;attribs=wrapper.crisp(attribs);}\nif(r){attribs.r=r;}\nwrapper.rSetter=function(value){attr(this.element,{rx:value,ry:value});};return wrapper.attr(attribs);},setSize:function(width,height,animate){var renderer=this,alignedObjects=renderer.alignedObjects,i=alignedObjects.length;renderer.width=width;renderer.height=height;renderer.boxWrapper[pick(animate,true)?'animate':'attr']({width:width,height:height});while(i--){alignedObjects[i].align();}},g:function(name){var elem=this.createElement('g');return defined(name)?elem.attr({'class':PREFIX+name}):elem;},image:function(src,x,y,width,height){var attribs={preserveAspectRatio:NONE},elemWrapper;if(arguments.length>1){extend(attribs,{x:x,y:y,width:width,height:height});}\nelemWrapper=this.createElement('image').attr(attribs);if(elemWrapper.element.setAttributeNS){elemWrapper.element.setAttributeNS('http://www.w3.org/1999/xlink','href',src);}else{elemWrapper.element.setAttribute('hc-svg-href',src);}\nreturn elemWrapper;},symbol:function(symbol,x,y,width,height,options){var obj,symbolFn=this.symbols[symbol],path=symbolFn&&symbolFn(mathRound(x),mathRound(y),width,height,options),imageElement,imageRegex=/^url\\((.*?)\\)$/,imageSrc,imageSize,centerImage;if(path){obj=this.path(path);extend(obj,{symbolName:symbol,x:x,y:y,width:width,height:height});if(options){extend(obj,options);}}else if(imageRegex.test(symbol)){centerImage=function(img,size){if(img.element){img.attr({width:size[0],height:size[1]});if(!img.alignByTranslate){img.translate(mathRound((width-size[0])/2),mathRound((height-size[1])/2));}}};imageSrc=symbol.match(imageRegex)[1];imageSize=symbolSizes[imageSrc];obj=this.image(imageSrc).attr({x:x,y:y});obj.isImg=true;if(imageSize){centerImage(obj,imageSize);}else{obj.attr({width:0,height:0});imageElement=createElement('img',{onload:function(){centerImage(obj,symbolSizes[imageSrc]=[this.width,this.height]);},src:imageSrc});}}\nreturn obj;},symbols:{'circle':function(x,y,w,h){var cpw=0.166*w;return[M,x+w/2,y,'C',x+w+cpw,y,x+w+cpw,y+h,x+w/2,y+h,'C',x-cpw,y+h,x-cpw,y,x+w/2,y,'Z'];},'square':function(x,y,w,h){return[M,x,y,L,x+w,y,x+w,y+h,x,y+h,'Z'];},'triangle':function(x,y,w,h){return[M,x+w/2,y,L,x+w,y+h,x,y+h,'Z'];},'triangle-down':function(x,y,w,h){return[M,x,y,L,x+w,y,x+w/2,y+h,'Z'];},'diamond':function(x,y,w,h){return[M,x+w/2,y,L,x+w,y+h/2,x+w/2,y+h,x,y+h/2,'Z'];},'arc':function(x,y,w,h,options){var start=options.start,radius=options.r||w||h,end=options.end-0.001,innerRadius=options.innerR,open=options.open,cosStart=mathCos(start),sinStart=mathSin(start),cosEnd=mathCos(end),sinEnd=mathSin(end),longArc=options.end-start<mathPI?0:1;return[M,x+radius*cosStart,y+radius*sinStart,'A',radius,radius,0,longArc,1,x+radius*cosEnd,y+radius*sinEnd,open?M:L,x+innerRadius*cosEnd,y+innerRadius*sinEnd,'A',innerRadius,innerRadius,0,longArc,0,x+innerRadius*cosStart,y+innerRadius*sinStart,open?'':'Z'];},callout:function(x,y,w,h,options){var arrowLength=6,halfDistance=6,r=mathMin((options&&options.r)||0,w,h),safeDistance=r+halfDistance,anchorX=options&&options.anchorX,anchorY=options&&options.anchorY,path,normalizer=mathRound(options.strokeWidth||0)%2/2;x+=normalizer;y+=normalizer;path=['M',x+r,y,'L',x+w-r,y,'C',x+w,y,x+w,y,x+w,y+r,'L',x+w,y+h-r,'C',x+w,y+h,x+w,y+h,x+w-r,y+h,'L',x+r,y+h,'C',x,y+h,x,y+h,x,y+h-r,'L',x,y+r,'C',x,y,x,y,x+r,y];if(anchorX&&anchorX>w&&anchorY>y+safeDistance&&anchorY<y+h-safeDistance){path.splice(13,3,'L',x+w,anchorY-halfDistance,x+w+arrowLength,anchorY,x+w,anchorY+halfDistance,x+w,y+h-r);}else if(anchorX&&anchorX<0&&anchorY>y+safeDistance&&anchorY<y+h-safeDistance){path.splice(33,3,'L',x,anchorY+halfDistance,x-arrowLength,anchorY,x,anchorY-halfDistance,x,y+r);}else if(anchorY&&anchorY>h&&anchorX>x+safeDistance&&anchorX<x+w-safeDistance){path.splice(23,3,'L',anchorX+halfDistance,y+h,anchorX,y+h+arrowLength,anchorX-halfDistance,y+h,x+r,y+h);}else if(anchorY&&anchorY<0&&anchorX>x+safeDistance&&anchorX<x+w-safeDistance){path.splice(3,3,'L',anchorX-halfDistance,y,anchorX,y-arrowLength,anchorX+halfDistance,y,w-r,y);}\nreturn path;}},clipRect:function(x,y,width,height){var wrapper,id=PREFIX+idCounter++,clipPath=this.createElement('clipPath').attr({id:id}).add(this.defs);wrapper=this.rect(x,y,width,height,0).add(clipPath);wrapper.id=id;wrapper.clipPath=clipPath;return wrapper;},text:function(str,x,y,useHTML){var renderer=this,fakeSVG=useCanVG||(!hasSVG&&renderer.forExport),wrapper,attr={};if(useHTML&&!renderer.forExport){return renderer.html(str,x,y);}\nattr.x=Math.round(x||0);if(y){attr.y=Math.round(y);}\nif(str||str===0){attr.text=str;}\nwrapper=renderer.createElement('text').attr(attr);if(fakeSVG){wrapper.css({position:ABSOLUTE});}\nif(!useHTML){wrapper.xSetter=function(value,key,element){var tspans=element.getElementsByTagName('tspan'),tspan,parentVal=element.getAttribute(key),i;for(i=0;i<tspans.length;i++){tspan=tspans[i];if(tspan.getAttribute(key)===parentVal){tspan.setAttribute(key,value);}}\nelement.setAttribute(key,value);};}\nreturn wrapper;},fontMetrics:function(fontSize,elem){fontSize=fontSize||this.style.fontSize;if(elem&&win.getComputedStyle){elem=elem.element||elem;fontSize=win.getComputedStyle(elem,\"\").fontSize;}\nfontSize=/px/.test(fontSize)?pInt(fontSize):/em/.test(fontSize)?parseFloat(fontSize)*12:12;var lineHeight=fontSize<24?fontSize+4:mathRound(fontSize*1.2),baseline=mathRound(lineHeight*0.8);return{h:lineHeight,b:baseline,f:fontSize};},label:function(str,x,y,shape,anchorX,anchorY,useHTML,baseline,className){var renderer=this,wrapper=renderer.g(className),text=renderer.text('',0,0,useHTML).attr({zIndex:1}),box,bBox,alignFactor=0,padding=3,paddingLeft=0,width,height,wrapperX,wrapperY,crispAdjust=0,deferredAttr={},baselineOffset,needsBox;function updateBoxSize(){var boxX,boxY,style=text.element.style;bBox=(width===undefined||height===undefined||wrapper.styles.textAlign)&&text.textStr&&text.getBBox();wrapper.width=(width||bBox.width||0)+2*padding+paddingLeft;wrapper.height=(height||bBox.height||0)+2*padding;baselineOffset=padding+renderer.fontMetrics(style&&style.fontSize,text).b;if(needsBox){if(!box){boxX=mathRound(-alignFactor*padding);boxY=baseline?-baselineOffset:0;wrapper.box=box=shape?renderer.symbol(shape,boxX,boxY,wrapper.width,wrapper.height,deferredAttr):renderer.rect(boxX,boxY,wrapper.width,wrapper.height,0,deferredAttr[STROKE_WIDTH]);box.attr('fill',NONE).add(wrapper);}\nif(!box.isImg){box.attr(extend({width:mathRound(wrapper.width),height:mathRound(wrapper.height)},deferredAttr));}\ndeferredAttr=null;}}\nfunction updateTextPadding(){var styles=wrapper.styles,textAlign=styles&&styles.textAlign,x=paddingLeft+padding*(1-alignFactor),y;y=baseline?0:baselineOffset;if(defined(width)&&bBox&&(textAlign==='center'||textAlign==='right')){x+={center:0.5,right:1}[textAlign]*(width-bBox.width);}\nif(x!==text.x||y!==text.y){text.attr('x',x);if(y!==UNDEFINED){text.attr('y',y);}}\ntext.x=x;text.y=y;}\nfunction boxAttr(key,value){if(box){box.attr(key,value);}else{deferredAttr[key]=value;}}\nwrapper.onAdd=function(){text.add(wrapper);wrapper.attr({text:str||'',x:x,y:y});if(box&&defined(anchorX)){wrapper.attr({anchorX:anchorX,anchorY:anchorY});}};wrapper.widthSetter=function(value){width=value;};wrapper.heightSetter=function(value){height=value;};wrapper.paddingSetter=function(value){if(defined(value)&&value!==padding){padding=value;updateTextPadding();}};wrapper.paddingLeftSetter=function(value){if(defined(value)&&value!==paddingLeft){paddingLeft=value;updateTextPadding();}};wrapper.alignSetter=function(value){alignFactor={left:0,center:0.5,right:1}[value];};wrapper.textSetter=function(value){if(value!==UNDEFINED){text.textSetter(value);}\nupdateBoxSize();updateTextPadding();};wrapper['stroke-widthSetter']=function(value,key){if(value){needsBox=true;}\ncrispAdjust=value%2/2;boxAttr(key,value);};wrapper.strokeSetter=wrapper.fillSetter=wrapper.rSetter=function(value,key){if(key==='fill'&&value){needsBox=true;}\nboxAttr(key,value);};wrapper.anchorXSetter=function(value,key){anchorX=value;boxAttr(key,value+crispAdjust-wrapperX);};wrapper.anchorYSetter=function(value,key){anchorY=value;boxAttr(key,value-wrapperY);};wrapper.xSetter=function(value){wrapper.x=value;if(alignFactor){value-=alignFactor*((width||bBox.width)+padding);}\nwrapperX=mathRound(value);wrapper.attr('translateX',wrapperX);};wrapper.ySetter=function(value){wrapperY=wrapper.y=mathRound(value);wrapper.attr('translateY',wrapperY);};var baseCss=wrapper.css;return extend(wrapper,{css:function(styles){if(styles){var textStyles={};styles=merge(styles);each(wrapper.textProps,function(prop){if(styles[prop]!==UNDEFINED){textStyles[prop]=styles[prop];delete styles[prop];}});text.css(textStyles);}\nreturn baseCss.call(wrapper,styles);},getBBox:function(){return{width:bBox.width+2*padding,height:bBox.height+2*padding,x:bBox.x-padding,y:bBox.y-padding};},shadow:function(b){if(box){box.shadow(b);}\nreturn wrapper;},destroy:function(){removeEvent(wrapper.element,'mouseenter');removeEvent(wrapper.element,'mouseleave');if(text){text=text.destroy();}\nif(box){box=box.destroy();}\nSVGElement.prototype.destroy.call(wrapper);wrapper=renderer=updateBoxSize=updateTextPadding=boxAttr=null;}});}};Renderer=SVGRenderer;extend(SVGElement.prototype,{htmlCss:function(styles){var wrapper=this,element=wrapper.element,textWidth=styles&&element.tagName==='SPAN'&&styles.width;if(textWidth){delete styles.width;wrapper.textWidth=textWidth;wrapper.updateTransform();}\nwrapper.styles=extend(wrapper.styles,styles);css(wrapper.element,styles);return wrapper;},htmlGetBBox:function(){var wrapper=this,element=wrapper.element,bBox=wrapper.bBox;if(!bBox){if(element.nodeName==='text'){element.style.position=ABSOLUTE;}\nbBox=wrapper.bBox={x:element.offsetLeft,y:element.offsetTop,width:element.offsetWidth,height:element.offsetHeight};}\nreturn bBox;},htmlUpdateTransform:function(){if(!this.added){this.alignOnAdd=true;return;}\nvar wrapper=this,renderer=wrapper.renderer,elem=wrapper.element,translateX=wrapper.translateX||0,translateY=wrapper.translateY||0,x=wrapper.x||0,y=wrapper.y||0,align=wrapper.textAlign||'left',alignCorrection={left:0,center:0.5,right:1}[align],shadows=wrapper.shadows;css(elem,{marginLeft:translateX,marginTop:translateY});if(shadows){each(shadows,function(shadow){css(shadow,{marginLeft:translateX+1,marginTop:translateY+1});});}\nif(wrapper.inverted){each(elem.childNodes,function(child){renderer.invertChild(child,elem);});}\nif(elem.tagName==='SPAN'){var width,rotation=wrapper.rotation,baseline,textWidth=pInt(wrapper.textWidth),currentTextTransform=[rotation,align,elem.innerHTML,wrapper.textWidth].join(',');if(currentTextTransform!==wrapper.cTT){baseline=renderer.fontMetrics(elem.style.fontSize).b;if(defined(rotation)){wrapper.setSpanRotation(rotation,alignCorrection,baseline);}\nwidth=pick(wrapper.elemWidth,elem.offsetWidth);if(width>textWidth&&/[ \\-]/.test(elem.textContent||elem.innerText)){css(elem,{width:textWidth+PX,display:'block',whiteSpace:'normal'});width=textWidth;}\nwrapper.getSpanCorrection(width,baseline,alignCorrection,rotation,align);}\ncss(elem,{left:(x+(wrapper.xCorr||0))+PX,top:(y+(wrapper.yCorr||0))+PX});if(isWebKit){baseline=elem.offsetHeight;}\nwrapper.cTT=currentTextTransform;}},setSpanRotation:function(rotation,alignCorrection,baseline){var rotationStyle={},cssTransformKey=isIE?'-ms-transform':isWebKit?'-webkit-transform':isFirefox?'MozTransform':isOpera?'-o-transform':'';rotationStyle[cssTransformKey]=rotationStyle.transform='rotate('+rotation+'deg)';rotationStyle[cssTransformKey+(isFirefox?'Origin':'-origin')]=rotationStyle.transformOrigin=(alignCorrection*100)+'% '+baseline+'px';css(this.element,rotationStyle);},getSpanCorrection:function(width,baseline,alignCorrection){this.xCorr=-width*alignCorrection;this.yCorr=-baseline;}});extend(SVGRenderer.prototype,{html:function(str,x,y){var wrapper=this.createElement('span'),element=wrapper.element,renderer=wrapper.renderer;wrapper.textSetter=function(value){if(value!==element.innerHTML){delete this.bBox;}\nelement.innerHTML=this.textStr=value;};wrapper.xSetter=wrapper.ySetter=wrapper.alignSetter=wrapper.rotationSetter=function(value,key){if(key==='align'){key='textAlign';}\nwrapper[key]=value;wrapper.htmlUpdateTransform();};wrapper.attr({text:str,x:mathRound(x),y:mathRound(y)}).css({position:ABSOLUTE,whiteSpace:'nowrap',fontFamily:this.style.fontFamily,fontSize:this.style.fontSize});wrapper.css=wrapper.htmlCss;if(renderer.isSVG){wrapper.add=function(svgGroupWrapper){var htmlGroup,container=renderer.box.parentNode,parentGroup,parents=[];this.parentGroup=svgGroupWrapper;if(svgGroupWrapper){htmlGroup=svgGroupWrapper.div;if(!htmlGroup){parentGroup=svgGroupWrapper;while(parentGroup){parents.push(parentGroup);parentGroup=parentGroup.parentGroup;}\neach(parents.reverse(),function(parentGroup){var htmlGroupStyle;htmlGroup=parentGroup.div=parentGroup.div||createElement(DIV,{className:attr(parentGroup.element,'class')},{position:ABSOLUTE,left:(parentGroup.translateX||0)+PX,top:(parentGroup.translateY||0)+PX},htmlGroup||container);htmlGroupStyle=htmlGroup.style;extend(parentGroup,{translateXSetter:function(value,key){htmlGroupStyle.left=value+PX;parentGroup[key]=value;parentGroup.doTransform=true;},translateYSetter:function(value,key){htmlGroupStyle.top=value+PX;parentGroup[key]=value;parentGroup.doTransform=true;},visibilitySetter:function(value,key){htmlGroupStyle[key]=value;}});});}}else{htmlGroup=container;}\nhtmlGroup.appendChild(element);wrapper.added=true;if(wrapper.alignOnAdd){wrapper.htmlUpdateTransform();}\nreturn wrapper;};}\nreturn wrapper;}});var VMLRenderer,VMLElement;if(!hasSVG&&!useCanVG){VMLElement={init:function(renderer,nodeName){var wrapper=this,markup=['<',nodeName,' filled=\"f\" stroked=\"f\"'],style=['position: ',ABSOLUTE,';'],isDiv=nodeName===DIV;if(nodeName==='shape'||isDiv){style.push('left:0;top:0;width:1px;height:1px;');}\nstyle.push('visibility: ',isDiv?HIDDEN:VISIBLE);markup.push(' style=\"',style.join(''),'\"/>');if(nodeName){markup=isDiv||nodeName==='span'||nodeName==='img'?markup.join(''):renderer.prepVML(markup);wrapper.element=createElement(markup);}\nwrapper.renderer=renderer;},add:function(parent){var wrapper=this,renderer=wrapper.renderer,element=wrapper.element,box=renderer.box,inverted=parent&&parent.inverted,parentNode=parent?parent.element||parent:box;if(inverted){renderer.invertChild(element,parentNode);}\nparentNode.appendChild(element);wrapper.added=true;if(wrapper.alignOnAdd&&!wrapper.deferUpdateTransform){wrapper.updateTransform();}\nif(wrapper.onAdd){wrapper.onAdd();}\nreturn wrapper;},updateTransform:SVGElement.prototype.htmlUpdateTransform,setSpanRotation:function(){var rotation=this.rotation,costheta=mathCos(rotation*deg2rad),sintheta=mathSin(rotation*deg2rad);css(this.element,{filter:rotation?['progid:DXImageTransform.Microsoft.Matrix(M11=',costheta,', M12=',-sintheta,', M21=',sintheta,', M22=',costheta,', sizingMethod=\\'auto expand\\')'].join(''):NONE});},getSpanCorrection:function(width,baseline,alignCorrection,rotation,align){var costheta=rotation?mathCos(rotation*deg2rad):1,sintheta=rotation?mathSin(rotation*deg2rad):0,height=pick(this.elemHeight,this.element.offsetHeight),quad,nonLeft=align&&align!=='left';this.xCorr=costheta<0&&-width;this.yCorr=sintheta<0&&-height;quad=costheta*sintheta<0;this.xCorr+=sintheta*baseline*(quad?1-alignCorrection:alignCorrection);this.yCorr-=costheta*baseline*(rotation?(quad?alignCorrection:1-alignCorrection):1);if(nonLeft){this.xCorr-=width*alignCorrection*(costheta<0?-1:1);if(rotation){this.yCorr-=height*alignCorrection*(sintheta<0?-1:1);}\ncss(this.element,{textAlign:align});}},pathToVML:function(value){var i=value.length,path=[];while(i--){if(isNumber(value[i])){path[i]=mathRound(value[i]*10)-5;}else if(value[i]==='Z'){path[i]='x';}else{path[i]=value[i];if(value.isArc&&(value[i]==='wa'||value[i]==='at')){if(path[i+5]===path[i+7]){path[i+7]+=value[i+7]>value[i+5]?1:-1;}\nif(path[i+6]===path[i+8]){path[i+8]+=value[i+8]>value[i+6]?1:-1;}}}}\nreturn path.join(' ')||'x';},clip:function(clipRect){var wrapper=this,clipMembers,cssRet;if(clipRect){clipMembers=clipRect.members;erase(clipMembers,wrapper);clipMembers.push(wrapper);wrapper.destroyClip=function(){erase(clipMembers,wrapper);};cssRet=clipRect.getCSS(wrapper);}else{if(wrapper.destroyClip){wrapper.destroyClip();}\ncssRet={clip:docMode8?'inherit':'rect(auto)'};}\nreturn wrapper.css(cssRet);},css:SVGElement.prototype.htmlCss,safeRemoveChild:function(element){if(element.parentNode){discardElement(element);}},destroy:function(){if(this.destroyClip){this.destroyClip();}\nreturn SVGElement.prototype.destroy.apply(this);},on:function(eventType,handler){this.element['on'+eventType]=function(){var evt=win.event;evt.target=evt.srcElement;handler(evt);};return this;},cutOffPath:function(path,length){var len;path=path.split(/[ ,]/);len=path.length;if(len===9||len===11){path[len-4]=path[len-2]=pInt(path[len-2])-10*length;}\nreturn path.join(' ');},shadow:function(shadowOptions,group,cutOff){var shadows=[],i,element=this.element,renderer=this.renderer,shadow,elemStyle=element.style,markup,path=element.path,strokeWidth,modifiedPath,shadowWidth,shadowElementOpacity;if(path&&typeof path.value!=='string'){path='x';}\nmodifiedPath=path;if(shadowOptions){shadowWidth=pick(shadowOptions.width,3);shadowElementOpacity=(shadowOptions.opacity||0.15)/shadowWidth;for(i=1;i<=3;i++){strokeWidth=(shadowWidth*2)+1-(2*i);if(cutOff){modifiedPath=this.cutOffPath(path.value,strokeWidth+0.5);}\nmarkup=['<shape isShadow=\"true\" strokeweight=\"',strokeWidth,'\" filled=\"false\" path=\"',modifiedPath,'\" coordsize=\"10 10\" style=\"',element.style.cssText,'\" />'];shadow=createElement(renderer.prepVML(markup),null,{left:pInt(elemStyle.left)+pick(shadowOptions.offsetX,1),top:pInt(elemStyle.top)+pick(shadowOptions.offsetY,1)});if(cutOff){shadow.cutOff=strokeWidth+1;}\nmarkup=['<stroke color=\"',shadowOptions.color||'black','\" opacity=\"',shadowElementOpacity*i,'\"/>'];createElement(renderer.prepVML(markup),null,null,shadow);if(group){group.element.appendChild(shadow);}else{element.parentNode.insertBefore(shadow,element);}\nshadows.push(shadow);}\nthis.shadows=shadows;}\nreturn this;},updateShadows:noop,setAttr:function(key,value){if(docMode8){this.element[key]=value;}else{this.element.setAttribute(key,value);}},classSetter:function(value){this.element.className=value;},dashstyleSetter:function(value,key,element){var strokeElem=element.getElementsByTagName('stroke')[0]||createElement(this.renderer.prepVML(['<stroke/>']),null,null,element);strokeElem[key]=value||'solid';this[key]=value;},dSetter:function(value,key,element){var i,shadows=this.shadows;value=value||[];this.d=value.join&&value.join(' ');element.path=value=this.pathToVML(value);if(shadows){i=shadows.length;while(i--){shadows[i].path=shadows[i].cutOff?this.cutOffPath(value,shadows[i].cutOff):value;}}\nthis.setAttr(key,value);},fillSetter:function(value,key,element){var nodeName=element.nodeName;if(nodeName==='SPAN'){element.style.color=value;}else if(nodeName!=='IMG'){element.filled=value!==NONE;this.setAttr('fillcolor',this.renderer.color(value,element,key,this));}},opacitySetter:noop,rotationSetter:function(value,key,element){var style=element.style;this[key]=style[key]=value;style.left=-mathRound(mathSin(value*deg2rad)+1)+PX;style.top=mathRound(mathCos(value*deg2rad))+PX;},strokeSetter:function(value,key,element){this.setAttr('strokecolor',this.renderer.color(value,element,key));},'stroke-widthSetter':function(value,key,element){element.stroked=!!value;this[key]=value;if(isNumber(value)){value+=PX;}\nthis.setAttr('strokeweight',value);},titleSetter:function(value,key){this.setAttr(key,value);},visibilitySetter:function(value,key,element){if(value==='inherit'){value=VISIBLE;}\nif(this.shadows){each(this.shadows,function(shadow){shadow.style[key]=value;});}\nif(element.nodeName==='DIV'){value=value===HIDDEN?'-999em':0;if(!docMode8){element.style[key]=value?VISIBLE:HIDDEN;}\nkey='top';}\nelement.style[key]=value;},xSetter:function(value,key,element){this[key]=value;if(key==='x'){key='left';}else if(key==='y'){key='top';}\nif(this.updateClipping){this[key]=value;this.updateClipping();}else{element.style[key]=value;}},zIndexSetter:function(value,key,element){element.style[key]=value;}};Highcharts.VMLElement=VMLElement=extendClass(SVGElement,VMLElement);VMLElement.prototype.ySetter=VMLElement.prototype.widthSetter=VMLElement.prototype.heightSetter=VMLElement.prototype.xSetter;var VMLRendererExtension={Element:VMLElement,isIE8:userAgent.indexOf('MSIE 8.0')>-1,init:function(container,width,height,style){var renderer=this,boxWrapper,box,css;renderer.alignedObjects=[];boxWrapper=renderer.createElement(DIV).css(extend(this.getStyle(style),{position:RELATIVE}));box=boxWrapper.element;container.appendChild(boxWrapper.element);renderer.isVML=true;renderer.box=box;renderer.boxWrapper=boxWrapper;renderer.cache={};renderer.setSize(width,height,false);if(!doc.namespaces.hcv){doc.namespaces.add('hcv','urn:schemas-microsoft-com:vml');css='hcv\\\\:fill, hcv\\\\:path, hcv\\\\:shape, hcv\\\\:stroke'+'{ behavior:url(#default#VML); display: inline-block; } ';try{doc.createStyleSheet().cssText=css;}catch(e){doc.styleSheets[0].cssText+=css;}}},isHidden:function(){return!this.box.offsetWidth;},clipRect:function(x,y,width,height){var clipRect=this.createElement(),isObj=isObject(x);return extend(clipRect,{members:[],left:(isObj?x.x:x)+1,top:(isObj?x.y:y)+1,width:(isObj?x.width:width)-1,height:(isObj?x.height:height)-1,getCSS:function(wrapper){var element=wrapper.element,nodeName=element.nodeName,isShape=nodeName==='shape',inverted=wrapper.inverted,rect=this,top=rect.top-(isShape?element.offsetTop:0),left=rect.left,right=left+rect.width,bottom=top+rect.height,ret={clip:'rect('+\nmathRound(inverted?left:top)+'px,'+\nmathRound(inverted?bottom:right)+'px,'+\nmathRound(inverted?right:bottom)+'px,'+\nmathRound(inverted?top:left)+'px)'};if(!inverted&&docMode8&&nodeName==='DIV'){extend(ret,{width:right+PX,height:bottom+PX});}\nreturn ret;},updateClipping:function(){each(clipRect.members,function(member){if(member.element){member.css(clipRect.getCSS(member));}});}});},color:function(color,elem,prop,wrapper){var renderer=this,colorObject,regexRgba=/^rgba/,markup,fillType,ret=NONE;if(color&&color.linearGradient){fillType='gradient';}else if(color&&color.radialGradient){fillType='pattern';}\nif(fillType){var stopColor,stopOpacity,gradient=color.linearGradient||color.radialGradient,x1,y1,x2,y2,opacity1,opacity2,color1,color2,fillAttr='',stops=color.stops,firstStop,lastStop,colors=[],addFillNode=function(){markup=['<fill colors=\"'+colors.join(',')+'\" opacity=\"',opacity2,'\" o:opacity2=\"',opacity1,'\" type=\"',fillType,'\" ',fillAttr,'focus=\"100%\" method=\"any\" />'];createElement(renderer.prepVML(markup),null,null,elem);};firstStop=stops[0];lastStop=stops[stops.length-1];if(firstStop[0]>0){stops.unshift([0,firstStop[1]]);}\nif(lastStop[0]<1){stops.push([1,lastStop[1]]);}\neach(stops,function(stop,i){if(regexRgba.test(stop[1])){colorObject=Color(stop[1]);stopColor=colorObject.get('rgb');stopOpacity=colorObject.get('a');}else{stopColor=stop[1];stopOpacity=1;}\ncolors.push((stop[0]*100)+'% '+stopColor);if(!i){opacity1=stopOpacity;color2=stopColor;}else{opacity2=stopOpacity;color1=stopColor;}});if(prop==='fill'){if(fillType==='gradient'){x1=gradient.x1||gradient[0]||0;y1=gradient.y1||gradient[1]||0;x2=gradient.x2||gradient[2]||0;y2=gradient.y2||gradient[3]||0;fillAttr='angle=\"'+(90-math.atan((y2-y1)/(x2-x1))*180/mathPI)+'\"';addFillNode();}else{var r=gradient.r,sizex=r*2,sizey=r*2,cx=gradient.cx,cy=gradient.cy,radialReference=elem.radialReference,bBox,applyRadialGradient=function(){if(radialReference){bBox=wrapper.getBBox();cx+=(radialReference[0]-bBox.x)/bBox.width-0.5;cy+=(radialReference[1]-bBox.y)/bBox.height-0.5;sizex*=radialReference[2]/bBox.width;sizey*=radialReference[2]/bBox.height;}\nfillAttr='src=\"'+defaultOptions.global.VMLRadialGradientURL+'\" '+'size=\"'+sizex+','+sizey+'\" '+'origin=\"0.5,0.5\" '+'position=\"'+cx+','+cy+'\" '+'color2=\"'+color2+'\" ';addFillNode();};if(wrapper.added){applyRadialGradient();}else{wrapper.onAdd=applyRadialGradient;}\nret=color1;}}else{ret=stopColor;}}else if(regexRgba.test(color)&&elem.tagName!=='IMG'){colorObject=Color(color);markup=['<',prop,' opacity=\"',colorObject.get('a'),'\"/>'];createElement(this.prepVML(markup),null,null,elem);ret=colorObject.get('rgb');}else{var propNodes=elem.getElementsByTagName(prop);if(propNodes.length){propNodes[0].opacity=1;propNodes[0].type='solid';}\nret=color;}\nreturn ret;},prepVML:function(markup){var vmlStyle='display:inline-block;behavior:url(#default#VML);',isIE8=this.isIE8;markup=markup.join('');if(isIE8){markup=markup.replace('/>',' xmlns=\"urn:schemas-microsoft-com:vml\" />');if(markup.indexOf('style=\"')===-1){markup=markup.replace('/>',' style=\"'+vmlStyle+'\" />');}else{markup=markup.replace('style=\"','style=\"'+vmlStyle);}}else{markup=markup.replace('<','<hcv:');}\nreturn markup;},text:SVGRenderer.prototype.html,path:function(path){var attr={coordsize:'10 10'};if(isArray(path)){attr.d=path;}else if(isObject(path)){extend(attr,path);}\nreturn this.createElement('shape').attr(attr);},circle:function(x,y,r){var circle=this.symbol('circle');if(isObject(x)){r=x.r;y=x.y;x=x.x;}\ncircle.isCircle=true;circle.r=r;return circle.attr({x:x,y:y});},g:function(name){var wrapper,attribs;if(name){attribs={'className':PREFIX+name,'class':PREFIX+name};}\nwrapper=this.createElement(DIV).attr(attribs);return wrapper;},image:function(src,x,y,width,height){var obj=this.createElement('img').attr({src:src});if(arguments.length>1){obj.attr({x:x,y:y,width:width,height:height});}\nreturn obj;},createElement:function(nodeName){return nodeName==='rect'?this.symbol(nodeName):SVGRenderer.prototype.createElement.call(this,nodeName);},invertChild:function(element,parentNode){var ren=this,parentStyle=parentNode.style,imgStyle=element.tagName==='IMG'&&element.style;css(element,{flip:'x',left:pInt(parentStyle.width)-(imgStyle?pInt(imgStyle.top):1),top:pInt(parentStyle.height)-(imgStyle?pInt(imgStyle.left):1),rotation:-90});each(element.childNodes,function(child){ren.invertChild(child,element);});},symbols:{arc:function(x,y,w,h,options){var start=options.start,end=options.end,radius=options.r||w||h,innerRadius=options.innerR,cosStart=mathCos(start),sinStart=mathSin(start),cosEnd=mathCos(end),sinEnd=mathSin(end),ret;if(end-start===0){return['x'];}\nret=['wa',x-radius,y-radius,x+radius,y+radius,x+radius*cosStart,y+radius*sinStart,x+radius*cosEnd,y+radius*sinEnd];if(options.open&&!innerRadius){ret.push('e',M,x,y);}\nret.push('at',x-innerRadius,y-innerRadius,x+innerRadius,y+innerRadius,x+innerRadius*cosEnd,y+innerRadius*sinEnd,x+innerRadius*cosStart,y+innerRadius*sinStart,'x','e');ret.isArc=true;return ret;},circle:function(x,y,w,h,wrapper){if(wrapper){w=h=2*wrapper.r;}\nif(wrapper&&wrapper.isCircle){x-=w/2;y-=h/2;}\nreturn['wa',x,y,x+w,y+h,x+w,y+h/2,x+w,y+h/2,'e'];},rect:function(x,y,w,h,options){return SVGRenderer.prototype.symbols[!defined(options)||!options.r?'square':'callout'].call(0,x,y,w,h,options);}}};Highcharts.VMLRenderer=VMLRenderer=function(){this.init.apply(this,arguments);};VMLRenderer.prototype=merge(SVGRenderer.prototype,VMLRendererExtension);Renderer=VMLRenderer;}\nSVGRenderer.prototype.measureSpanWidth=function(text,styles){var measuringSpan=doc.createElement('span'),offsetWidth,textNode=doc.createTextNode(text);measuringSpan.appendChild(textNode);css(measuringSpan,styles);this.box.appendChild(measuringSpan);offsetWidth=measuringSpan.offsetWidth;discardElement(measuringSpan);return offsetWidth;};var CanVGRenderer,CanVGController;if(useCanVG){Highcharts.CanVGRenderer=CanVGRenderer=function(){SVG_NS='http://www.w3.org/1999/xhtml';};CanVGRenderer.prototype.symbols={};CanVGController=(function(){var deferredRenderCalls=[];function drawDeferred(){var callLength=deferredRenderCalls.length,callIndex;for(callIndex=0;callIndex<callLength;callIndex++){deferredRenderCalls[callIndex]();}\ndeferredRenderCalls=[];}\nreturn{push:function(func,scriptLocation){if(deferredRenderCalls.length===0){getScript(scriptLocation,drawDeferred);}\ndeferredRenderCalls.push(func);}};}());Renderer=CanVGRenderer;}\nfunction Tick(axis,pos,type,noLabel){this.axis=axis;this.pos=pos;this.type=type||'';this.isNew=true;if(!type&&!noLabel){this.addLabel();}}\nTick.prototype={addLabel:function(){var tick=this,axis=tick.axis,options=axis.options,chart=axis.chart,horiz=axis.horiz,categories=axis.categories,names=axis.names,pos=tick.pos,labelOptions=options.labels,rotation=labelOptions.rotation,str,tickPositions=axis.tickPositions,width=(horiz&&categories&&!labelOptions.step&&!labelOptions.staggerLines&&!labelOptions.rotation&&chart.plotWidth/tickPositions.length)||(!horiz&&(chart.margin[3]||chart.chartWidth*0.33)),isFirst=pos===tickPositions[0],isLast=pos===tickPositions[tickPositions.length-1],css,attr,value=categories?pick(categories[pos],names[pos],pos):pos,label=tick.label,tickPositionInfo=tickPositions.info,dateTimeLabelFormat;if(axis.isDatetimeAxis&&tickPositionInfo){dateTimeLabelFormat=options.dateTimeLabelFormats[tickPositionInfo.higherRanks[pos]||tickPositionInfo.unitName];}\ntick.isFirst=isFirst;tick.isLast=isLast;str=axis.labelFormatter.call({axis:axis,chart:chart,isFirst:isFirst,isLast:isLast,dateTimeLabelFormat:dateTimeLabelFormat,value:axis.isLog?correctFloat(lin2log(value)):value});css=width&&{width:mathMax(1,mathRound(width-2*(labelOptions.padding||10)))+PX};css=extend(css,labelOptions.style);if(!defined(label)){attr={align:axis.labelAlign};if(isNumber(rotation)){attr.rotation=rotation;}\nif(width&&labelOptions.ellipsis){css.HcHeight=axis.len/tickPositions.length;}\ntick.label=label=defined(str)&&labelOptions.enabled?chart.renderer.text(str,0,0,labelOptions.useHTML).attr(attr).css(css).add(axis.labelGroup):null;axis.tickBaseline=chart.renderer.fontMetrics(labelOptions.style.fontSize,label).b;if(rotation&&axis.side===2){axis.tickBaseline*=mathCos(rotation*deg2rad);}}else if(label){label.attr({text:str}).css(css);}\ntick.yOffset=label?pick(labelOptions.y,axis.tickBaseline+(axis.side===2?8:-(label.getBBox().height/2))):0;},getLabelSize:function(){var label=this.label,axis=this.axis;return label?label.getBBox()[axis.horiz?'height':'width']:0;},getLabelSides:function(){var bBox=this.label.getBBox(),axis=this.axis,horiz=axis.horiz,options=axis.options,labelOptions=options.labels,size=horiz?bBox.width:bBox.height,leftSide=horiz?labelOptions.x-size*{left:0,center:0.5,right:1}[axis.labelAlign]:0,rightSide=horiz?size+leftSide:size;return[leftSide,rightSide];},handleOverflow:function(index,xy){var show=true,axis=this.axis,isFirst=this.isFirst,isLast=this.isLast,horiz=axis.horiz,pxPos=horiz?xy.x:xy.y,reversed=axis.reversed,tickPositions=axis.tickPositions,sides=this.getLabelSides(),leftSide=sides[0],rightSide=sides[1],axisLeft,axisRight,neighbour,neighbourEdge,line=this.label.line||0,labelEdge=axis.labelEdge,justifyLabel=axis.justifyLabels&&(isFirst||isLast),justifyToPlot;if(labelEdge[line]===UNDEFINED||pxPos+leftSide>labelEdge[line]){labelEdge[line]=pxPos+rightSide;}else if(!justifyLabel){show=false;}\nif(justifyLabel){justifyToPlot=axis.justifyToPlot;axisLeft=justifyToPlot?axis.pos:0;axisRight=justifyToPlot?axisLeft+axis.len:axis.chart.chartWidth;do{index+=(isFirst?1:-1);neighbour=axis.ticks[tickPositions[index]];}while(tickPositions[index]&&(!neighbour||!neighbour.label||neighbour.label.line!==line));neighbourEdge=neighbour&&neighbour.label.xy&&neighbour.label.xy.x+neighbour.getLabelSides()[isFirst?0:1];if((isFirst&&!reversed)||(isLast&&reversed)){if(pxPos+leftSide<axisLeft){pxPos=axisLeft-leftSide;if(neighbour&&pxPos+rightSide>neighbourEdge){show=false;}}}else{if(pxPos+rightSide>axisRight){pxPos=axisRight-rightSide;if(neighbour&&pxPos+leftSide<neighbourEdge){show=false;}}}\nxy.x=pxPos;}\nreturn show;},getPosition:function(horiz,pos,tickmarkOffset,old){var axis=this.axis,chart=axis.chart,cHeight=(old&&chart.oldChartHeight)||chart.chartHeight;return{x:horiz?axis.translate(pos+tickmarkOffset,null,null,old)+axis.transB:axis.left+axis.offset+(axis.opposite?((old&&chart.oldChartWidth)||chart.chartWidth)-axis.right-axis.left:0),y:horiz?cHeight-axis.bottom+axis.offset-(axis.opposite?axis.height:0):cHeight-axis.translate(pos+tickmarkOffset,null,null,old)-axis.transB};},getLabelPosition:function(x,y,label,horiz,labelOptions,tickmarkOffset,index,step){var axis=this.axis,transA=axis.transA,reversed=axis.reversed,staggerLines=axis.staggerLines;x=x+labelOptions.x-(tickmarkOffset&&horiz?tickmarkOffset*transA*(reversed?-1:1):0);y=y+this.yOffset-(tickmarkOffset&&!horiz?tickmarkOffset*transA*(reversed?1:-1):0);if(staggerLines){label.line=(index/(step||1)%staggerLines);y+=label.line*(axis.labelOffset/staggerLines);}\nreturn{x:x,y:y};},getMarkPath:function(x,y,tickLength,tickWidth,horiz,renderer){return renderer.crispLine([M,x,y,L,x+(horiz?0:-tickLength),y+(horiz?tickLength:0)],tickWidth);},render:function(index,old,opacity){var tick=this,axis=tick.axis,options=axis.options,chart=axis.chart,renderer=chart.renderer,horiz=axis.horiz,type=tick.type,label=tick.label,pos=tick.pos,labelOptions=options.labels,gridLine=tick.gridLine,gridPrefix=type?type+'Grid':'grid',tickPrefix=type?type+'Tick':'tick',gridLineWidth=options[gridPrefix+'LineWidth'],gridLineColor=options[gridPrefix+'LineColor'],dashStyle=options[gridPrefix+'LineDashStyle'],tickLength=options[tickPrefix+'Length'],tickWidth=options[tickPrefix+'Width']||0,tickColor=options[tickPrefix+'Color'],tickPosition=options[tickPrefix+'Position'],gridLinePath,mark=tick.mark,markPath,step=labelOptions.step,attribs,show=true,tickmarkOffset=axis.tickmarkOffset,xy=tick.getPosition(horiz,pos,tickmarkOffset,old),x=xy.x,y=xy.y,reverseCrisp=((horiz&&x===axis.pos+axis.len)||(!horiz&&y===axis.pos))?-1:1;opacity=pick(opacity,1);this.isActive=true;if(gridLineWidth){gridLinePath=axis.getPlotLinePath(pos+tickmarkOffset,gridLineWidth*reverseCrisp,old,true);if(gridLine===UNDEFINED){attribs={stroke:gridLineColor,'stroke-width':gridLineWidth};if(dashStyle){attribs.dashstyle=dashStyle;}\nif(!type){attribs.zIndex=1;}\nif(old){attribs.opacity=0;}\ntick.gridLine=gridLine=gridLineWidth?renderer.path(gridLinePath).attr(attribs).add(axis.gridGroup):null;}\nif(!old&&gridLine&&gridLinePath){gridLine[tick.isNew?'attr':'animate']({d:gridLinePath,opacity:opacity});}}\nif(tickWidth&&tickLength){if(tickPosition==='inside'){tickLength=-tickLength;}\nif(axis.opposite){tickLength=-tickLength;}\nmarkPath=tick.getMarkPath(x,y,tickLength,tickWidth*reverseCrisp,horiz,renderer);if(mark){mark.animate({d:markPath,opacity:opacity});}else{tick.mark=renderer.path(markPath).attr({stroke:tickColor,'stroke-width':tickWidth,opacity:opacity}).add(axis.axisGroup);}}\nif(label&&!isNaN(x)){label.xy=xy=tick.getLabelPosition(x,y,label,horiz,labelOptions,tickmarkOffset,index,step);if((tick.isFirst&&!tick.isLast&&!pick(options.showFirstLabel,1))||(tick.isLast&&!tick.isFirst&&!pick(options.showLastLabel,1))){show=false;}else if(!axis.isRadial&&!labelOptions.step&&!labelOptions.rotation&&!old&&opacity!==0){show=tick.handleOverflow(index,xy);}\nif(step&&index%step){show=false;}\nif(show&&!isNaN(xy.y)){xy.opacity=opacity;label[tick.isNew?'attr':'animate'](xy);tick.isNew=false;}else{label.attr('y',-9999);}}},destroy:function(){destroyObjectProperties(this,this.axis);}};Highcharts.PlotLineOrBand=function(axis,options){this.axis=axis;if(options){this.options=options;this.id=options.id;}};Highcharts.PlotLineOrBand.prototype={render:function(){var plotLine=this,axis=plotLine.axis,horiz=axis.horiz,halfPointRange=(axis.pointRange||0)/2,options=plotLine.options,optionsLabel=options.label,label=plotLine.label,width=options.width,to=options.to,from=options.from,isBand=defined(from)&&defined(to),value=options.value,dashStyle=options.dashStyle,svgElem=plotLine.svgElem,path=[],addEvent,eventType,xs,ys,x,y,color=options.color,zIndex=options.zIndex,events=options.events,attribs={},renderer=axis.chart.renderer;if(axis.isLog){from=log2lin(from);to=log2lin(to);value=log2lin(value);}\nif(width){path=axis.getPlotLinePath(value,width);attribs={stroke:color,'stroke-width':width};if(dashStyle){attribs.dashstyle=dashStyle;}}else if(isBand){from=mathMax(from,axis.min-halfPointRange);to=mathMin(to,axis.max+halfPointRange);path=axis.getPlotBandPath(from,to,options);if(color){attribs.fill=color;}\nif(options.borderWidth){attribs.stroke=options.borderColor;attribs['stroke-width']=options.borderWidth;}}else{return;}\nif(defined(zIndex)){attribs.zIndex=zIndex;}\nif(svgElem){if(path){svgElem.animate({d:path},null,svgElem.onGetPath);}else{svgElem.hide();svgElem.onGetPath=function(){svgElem.show();};if(label){plotLine.label=label=label.destroy();}}}else if(path&&path.length){plotLine.svgElem=svgElem=renderer.path(path).attr(attribs).add();if(events){addEvent=function(eventType){svgElem.on(eventType,function(e){events[eventType].apply(plotLine,[e]);});};for(eventType in events){addEvent(eventType);}}}\nif(optionsLabel&&defined(optionsLabel.text)&&path&&path.length&&axis.width>0&&axis.height>0){optionsLabel=merge({align:horiz&&isBand&&'center',x:horiz?!isBand&&4:10,verticalAlign:!horiz&&isBand&&'middle',y:horiz?isBand?16:10:isBand?6:-4,rotation:horiz&&!isBand&&90},optionsLabel);if(!label){attribs={align:optionsLabel.textAlign||optionsLabel.align,rotation:optionsLabel.rotation};if(defined(zIndex)){attribs.zIndex=zIndex;}\nplotLine.label=label=renderer.text(optionsLabel.text,0,0,optionsLabel.useHTML).attr(attribs).css(optionsLabel.style).add();}\nxs=[path[1],path[4],(isBand?path[6]:path[1])];ys=[path[2],path[5],(isBand?path[7]:path[2])];x=arrayMin(xs);y=arrayMin(ys);label.align(optionsLabel,false,{x:x,y:y,width:arrayMax(xs)-x,height:arrayMax(ys)-y});label.show();}else if(label){label.hide();}\nreturn plotLine;},destroy:function(){erase(this.axis.plotLinesAndBands,this);delete this.axis;destroyObjectProperties(this);}};AxisPlotLineOrBandExtension={getPlotBandPath:function(from,to){var toPath=this.getPlotLinePath(to),path=this.getPlotLinePath(from);if(path&&toPath){path.push(toPath[4],toPath[5],toPath[1],toPath[2]);}else{path=null;}\nreturn path;},addPlotBand:function(options){return this.addPlotBandOrLine(options,'plotBands');},addPlotLine:function(options){return this.addPlotBandOrLine(options,'plotLines');},addPlotBandOrLine:function(options,coll){var obj=new Highcharts.PlotLineOrBand(this,options).render(),userOptions=this.userOptions;if(obj){if(coll){userOptions[coll]=userOptions[coll]||[];userOptions[coll].push(options);}\nthis.plotLinesAndBands.push(obj);}\nreturn obj;},removePlotBandOrLine:function(id){var plotLinesAndBands=this.plotLinesAndBands,options=this.options,userOptions=this.userOptions,i=plotLinesAndBands.length;while(i--){if(plotLinesAndBands[i].id===id){plotLinesAndBands[i].destroy();}}\neach([options.plotLines||[],userOptions.plotLines||[],options.plotBands||[],userOptions.plotBands||[]],function(arr){i=arr.length;while(i--){if(arr[i].id===id){erase(arr,arr[i]);}}});}};function Axis(){this.init.apply(this,arguments);}\nAxis.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:'%H:%M:%S.%L',second:'%H:%M:%S',minute:'%H:%M',hour:'%H:%M',day:'%e. %b',week:'%e. %b',month:'%b \\'%y',year:'%Y'},endOnTick:false,gridLineColor:'#C0C0C0',labels:defaultLabelOptions,lineColor:'#C0D0E0',lineWidth:1,minPadding:0.01,maxPadding:0.01,minorGridLineColor:'#E0E0E0',minorGridLineWidth:1,minorTickColor:'#A0A0A0',minorTickLength:2,minorTickPosition:'outside',startOfWeek:1,startOnTick:false,tickColor:'#C0D0E0',tickLength:10,tickmarkPlacement:'between',tickPixelInterval:100,tickPosition:'outside',tickWidth:1,title:{align:'middle',style:{color:'#707070'}},type:'linear'},defaultYAxisOptions:{endOnTick:true,gridLineWidth:1,tickPixelInterval:72,showLastLabel:true,labels:{x:-8,y:3},lineWidth:0,maxPadding:0.05,minPadding:0.05,startOnTick:true,tickWidth:0,title:{rotation:270,text:'Values'},stackLabels:{enabled:false,formatter:function(){return numberFormat(this.total,-1);},style:defaultLabelOptions.style}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{x:0,y:null},title:{rotation:0}},defaultTopAxisOptions:{labels:{x:0,y:-15},title:{rotation:0}},init:function(chart,userOptions){var isXAxis=userOptions.isX,axis=this;axis.horiz=chart.inverted?!isXAxis:isXAxis;axis.isXAxis=isXAxis;axis.coll=isXAxis?'xAxis':'yAxis';axis.opposite=userOptions.opposite;axis.side=userOptions.side||(axis.horiz?(axis.opposite?0:2):(axis.opposite?1:3));axis.setOptions(userOptions);var options=this.options,type=options.type,isDatetimeAxis=type==='datetime';axis.labelFormatter=options.labels.formatter||axis.defaultLabelFormatter;axis.userOptions=userOptions;axis.minPixelPadding=0;axis.chart=chart;axis.reversed=options.reversed;axis.zoomEnabled=options.zoomEnabled!==false;axis.categories=options.categories||type==='category';axis.names=[];axis.isLog=type==='logarithmic';axis.isDatetimeAxis=isDatetimeAxis;axis.isLinked=defined(options.linkedTo);axis.tickmarkOffset=(axis.categories&&options.tickmarkPlacement==='between')?0.5:0;axis.ticks={};axis.labelEdge=[];axis.minorTicks={};axis.plotLinesAndBands=[];axis.alternateBands={};axis.len=0;axis.minRange=axis.userMinRange=options.minRange||options.maxZoom;axis.range=options.range;axis.offset=options.offset||0;axis.stacks={};axis.oldStacks={};axis.max=null;axis.min=null;axis.crosshair=pick(options.crosshair,splat(chart.options.tooltip.crosshairs)[isXAxis?0:1],false);var eventType,events=axis.options.events;if(inArray(axis,chart.axes)===-1){if(isXAxis&&!this.isColorAxis){chart.axes.splice(chart.xAxis.length,0,axis);}else{chart.axes.push(axis);}\nchart[axis.coll].push(axis);}\naxis.series=axis.series||[];if(chart.inverted&&isXAxis&&axis.reversed===UNDEFINED){axis.reversed=true;}\naxis.removePlotBand=axis.removePlotBandOrLine;axis.removePlotLine=axis.removePlotBandOrLine;for(eventType in events){addEvent(axis,eventType,events[eventType]);}\nif(axis.isLog){axis.val2lin=log2lin;axis.lin2val=lin2log;}},setOptions:function(userOptions){this.options=merge(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],merge(defaultOptions[this.coll],userOptions));},defaultLabelFormatter:function(){var axis=this.axis,value=this.value,categories=axis.categories,dateTimeLabelFormat=this.dateTimeLabelFormat,numericSymbols=defaultOptions.lang.numericSymbols,i=numericSymbols&&numericSymbols.length,multi,ret,formatOption=axis.options.labels.format,numericSymbolDetector=axis.isLog?value:axis.tickInterval;if(formatOption){ret=format(formatOption,this);}else if(categories){ret=value;}else if(dateTimeLabelFormat){ret=dateFormat(dateTimeLabelFormat,value);}else if(i&&numericSymbolDetector>=1000){while(i--&&ret===UNDEFINED){multi=Math.pow(1000,i+1);if(numericSymbolDetector>=multi&&numericSymbols[i]!==null){ret=numberFormat(value/multi,-1)+numericSymbols[i];}}}\nif(ret===UNDEFINED){if(mathAbs(value)>=10000){ret=numberFormat(value,0);}else{ret=numberFormat(value,-1,UNDEFINED,'');}}\nreturn ret;},getSeriesExtremes:function(){var axis=this,chart=axis.chart;axis.hasVisibleSeries=false;axis.dataMin=axis.dataMax=null;if(axis.buildStacks){axis.buildStacks();}\neach(axis.series,function(series){if(series.visible||!chart.options.chart.ignoreHiddenSeries){var seriesOptions=series.options,xData,threshold=seriesOptions.threshold,seriesDataMin,seriesDataMax;axis.hasVisibleSeries=true;if(axis.isLog&&threshold<=0){threshold=null;}\nif(axis.isXAxis){xData=series.xData;if(xData.length){axis.dataMin=mathMin(pick(axis.dataMin,xData[0]),arrayMin(xData));axis.dataMax=mathMax(pick(axis.dataMax,xData[0]),arrayMax(xData));}}else{series.getExtremes();seriesDataMax=series.dataMax;seriesDataMin=series.dataMin;if(defined(seriesDataMin)&&defined(seriesDataMax)){axis.dataMin=mathMin(pick(axis.dataMin,seriesDataMin),seriesDataMin);axis.dataMax=mathMax(pick(axis.dataMax,seriesDataMax),seriesDataMax);}\nif(defined(threshold)){if(axis.dataMin>=threshold){axis.dataMin=threshold;axis.ignoreMinPadding=true;}else if(axis.dataMax<threshold){axis.dataMax=threshold;axis.ignoreMaxPadding=true;}}}}});},translate:function(val,backwards,cvsCoord,old,handleLog,pointPlacement){var axis=this,sign=1,cvsOffset=0,localA=old?axis.oldTransA:axis.transA,localMin=old?axis.oldMin:axis.min,returnValue,minPixelPadding=axis.minPixelPadding,postTranslate=(axis.options.ordinal||(axis.isLog&&handleLog))&&axis.lin2val;if(!localA){localA=axis.transA;}\nif(cvsCoord){sign*=-1;cvsOffset=axis.len;}\nif(axis.reversed){sign*=-1;cvsOffset-=sign*(axis.sector||axis.len);}\nif(backwards){val=val*sign+cvsOffset;val-=minPixelPadding;returnValue=val/localA+localMin;if(postTranslate){returnValue=axis.lin2val(returnValue);}}else{if(postTranslate){val=axis.val2lin(val);}\nif(pointPlacement==='between'){pointPlacement=0.5;}\nreturnValue=sign*(val-localMin)*localA+cvsOffset+(sign*minPixelPadding)+\n(isNumber(pointPlacement)?localA*pointPlacement*axis.pointRange:0);}\nreturn returnValue;},toPixels:function(value,paneCoordinates){return this.translate(value,false,!this.horiz,null,true)+(paneCoordinates?0:this.pos);},toValue:function(pixel,paneCoordinates){return this.translate(pixel-(paneCoordinates?0:this.pos),true,!this.horiz,null,true);},getPlotLinePath:function(value,lineWidth,old,force,translatedValue){var axis=this,chart=axis.chart,axisLeft=axis.left,axisTop=axis.top,x1,y1,x2,y2,cHeight=(old&&chart.oldChartHeight)||chart.chartHeight,cWidth=(old&&chart.oldChartWidth)||chart.chartWidth,skip,transB=axis.transB;translatedValue=pick(translatedValue,axis.translate(value,null,null,old));x1=x2=mathRound(translatedValue+transB);y1=y2=mathRound(cHeight-translatedValue-transB);if(isNaN(translatedValue)){skip=true;}else if(axis.horiz){y1=axisTop;y2=cHeight-axis.bottom;if(x1<axisLeft||x1>axisLeft+axis.width){skip=true;}}else{x1=axisLeft;x2=cWidth-axis.right;if(y1<axisTop||y1>axisTop+axis.height){skip=true;}}\nreturn skip&&!force?null:chart.renderer.crispLine([M,x1,y1,L,x2,y2],lineWidth||1);},getLinearTickPositions:function(tickInterval,min,max){var pos,lastPos,roundedMin=correctFloat(mathFloor(min/tickInterval)*tickInterval),roundedMax=correctFloat(mathCeil(max/tickInterval)*tickInterval),tickPositions=[];if(min===max&&isNumber(min)){return[min];}\npos=roundedMin;while(pos<=roundedMax){tickPositions.push(pos);pos=correctFloat(pos+tickInterval);if(pos===lastPos){break;}\nlastPos=pos;}\nreturn tickPositions;},getMinorTickPositions:function(){var axis=this,options=axis.options,tickPositions=axis.tickPositions,minorTickInterval=axis.minorTickInterval,minorTickPositions=[],pos,i,len;if(axis.isLog){len=tickPositions.length;for(i=1;i<len;i++){minorTickPositions=minorTickPositions.concat(axis.getLogTickPositions(minorTickInterval,tickPositions[i-1],tickPositions[i],true));}}else if(axis.isDatetimeAxis&&options.minorTickInterval==='auto'){minorTickPositions=minorTickPositions.concat(axis.getTimeTicks(axis.normalizeTimeTickInterval(minorTickInterval),axis.min,axis.max,options.startOfWeek));if(minorTickPositions[0]<axis.min){minorTickPositions.shift();}}else{for(pos=axis.min+(tickPositions[0]-axis.min)%minorTickInterval;pos<=axis.max;pos+=minorTickInterval){minorTickPositions.push(pos);}}\nreturn minorTickPositions;},adjustForMinRange:function(){var axis=this,options=axis.options,min=axis.min,max=axis.max,zoomOffset,spaceAvailable=axis.dataMax-axis.dataMin>=axis.minRange,closestDataRange,i,distance,xData,loopLength,minArgs,maxArgs;if(axis.isXAxis&&axis.minRange===UNDEFINED&&!axis.isLog){if(defined(options.min)||defined(options.max)){axis.minRange=null;}else{each(axis.series,function(series){xData=series.xData;loopLength=series.xIncrement?1:xData.length-1;for(i=loopLength;i>0;i--){distance=xData[i]-xData[i-1];if(closestDataRange===UNDEFINED||distance<closestDataRange){closestDataRange=distance;}}});axis.minRange=mathMin(closestDataRange*5,axis.dataMax-axis.dataMin);}}\nif(max-min<axis.minRange){var minRange=axis.minRange;zoomOffset=(minRange-max+min)/2;minArgs=[min-zoomOffset,pick(options.min,min-zoomOffset)];if(spaceAvailable){minArgs[2]=axis.dataMin;}\nmin=arrayMax(minArgs);maxArgs=[min+minRange,pick(options.max,min+minRange)];if(spaceAvailable){maxArgs[2]=axis.dataMax;}\nmax=arrayMin(maxArgs);if(max-min<minRange){minArgs[0]=max-minRange;minArgs[1]=pick(options.min,max-minRange);min=arrayMax(minArgs);}}\naxis.min=min;axis.max=max;},setAxisTranslation:function(saveOld){var axis=this,range=axis.max-axis.min,pointRange=axis.axisPointRange||0,closestPointRange,minPointOffset=0,pointRangePadding=0,linkedParent=axis.linkedParent,ordinalCorrection,hasCategories=!!axis.categories,transA=axis.transA;if(axis.isXAxis||hasCategories||pointRange){if(linkedParent){minPointOffset=linkedParent.minPointOffset;pointRangePadding=linkedParent.pointRangePadding;}else{each(axis.series,function(series){var seriesPointRange=hasCategories?1:(axis.isXAxis?series.pointRange:(axis.axisPointRange||0)),pointPlacement=series.options.pointPlacement,seriesClosestPointRange=series.closestPointRange;if(seriesPointRange>range){seriesPointRange=0;}\npointRange=mathMax(pointRange,seriesPointRange);minPointOffset=mathMax(minPointOffset,isString(pointPlacement)?0:seriesPointRange/2);pointRangePadding=mathMax(pointRangePadding,pointPlacement==='on'?0:seriesPointRange);if(!series.noSharedTooltip&&defined(seriesClosestPointRange)){closestPointRange=defined(closestPointRange)?mathMin(closestPointRange,seriesClosestPointRange):seriesClosestPointRange;}});}\nordinalCorrection=axis.ordinalSlope&&closestPointRange?axis.ordinalSlope/closestPointRange:1;axis.minPointOffset=minPointOffset=minPointOffset*ordinalCorrection;axis.pointRangePadding=pointRangePadding=pointRangePadding*ordinalCorrection;axis.pointRange=mathMin(pointRange,range);axis.closestPointRange=closestPointRange;}\nif(saveOld){axis.oldTransA=transA;}\naxis.translationSlope=axis.transA=transA=axis.len/((range+pointRangePadding)||1);axis.transB=axis.horiz?axis.left:axis.bottom;axis.minPixelPadding=transA*minPointOffset;},setTickPositions:function(secondPass){var axis=this,chart=axis.chart,options=axis.options,startOnTick=options.startOnTick,endOnTick=options.endOnTick,isLog=axis.isLog,isDatetimeAxis=axis.isDatetimeAxis,isXAxis=axis.isXAxis,isLinked=axis.isLinked,tickPositioner=axis.options.tickPositioner,maxPadding=options.maxPadding,minPadding=options.minPadding,length,linkedParentExtremes,tickIntervalOption=options.tickInterval,minTickIntervalOption=options.minTickInterval,tickPixelIntervalOption=options.tickPixelInterval,tickPositions,keepTwoTicksOnly,categories=axis.categories;if(isLinked){axis.linkedParent=chart[axis.coll][options.linkedTo];linkedParentExtremes=axis.linkedParent.getExtremes();axis.min=pick(linkedParentExtremes.min,linkedParentExtremes.dataMin);axis.max=pick(linkedParentExtremes.max,linkedParentExtremes.dataMax);if(options.type!==axis.linkedParent.options.type){error(11,1);}}else{axis.min=pick(axis.userMin,options.min,axis.dataMin);axis.max=pick(axis.userMax,options.max,axis.dataMax);}\nif(isLog){if(!secondPass&&mathMin(axis.min,pick(axis.dataMin,axis.min))<=0){error(10,1);}\naxis.min=correctFloat(log2lin(axis.min));axis.max=correctFloat(log2lin(axis.max));}\nif(axis.range&&defined(axis.max)){axis.userMin=axis.min=mathMax(axis.min,axis.max-axis.range);axis.userMax=axis.max;axis.range=null;}\nif(axis.beforePadding){axis.beforePadding();}\naxis.adjustForMinRange();if(!categories&&!axis.axisPointRange&&!axis.usePercentage&&!isLinked&&defined(axis.min)&&defined(axis.max)){length=axis.max-axis.min;if(length){if(!defined(options.min)&&!defined(axis.userMin)&&minPadding&&(axis.dataMin<0||!axis.ignoreMinPadding)){axis.min-=length*minPadding;}\nif(!defined(options.max)&&!defined(axis.userMax)&&maxPadding&&(axis.dataMax>0||!axis.ignoreMaxPadding)){axis.max+=length*maxPadding;}}}\nif(isNumber(options.floor)){axis.min=mathMax(axis.min,options.floor);}\nif(isNumber(options.ceiling)){axis.max=mathMin(axis.max,options.ceiling);}\nif(axis.min===axis.max||axis.min===undefined||axis.max===undefined){axis.tickInterval=1;}else if(isLinked&&!tickIntervalOption&&tickPixelIntervalOption===axis.linkedParent.options.tickPixelInterval){axis.tickInterval=axis.linkedParent.tickInterval;}else{axis.tickInterval=pick(tickIntervalOption,categories?1:(axis.max-axis.min)*tickPixelIntervalOption/mathMax(axis.len,tickPixelIntervalOption));if(!defined(tickIntervalOption)&&axis.len<tickPixelIntervalOption&&!this.isRadial&&!this.isLog&&!categories&&startOnTick&&endOnTick){keepTwoTicksOnly=true;axis.tickInterval/=4;}}\nif(isXAxis&&!secondPass){each(axis.series,function(series){series.processData(axis.min!==axis.oldMin||axis.max!==axis.oldMax);});}\naxis.setAxisTranslation(true);if(axis.beforeSetTickPositions){axis.beforeSetTickPositions();}\nif(axis.postProcessTickInterval){axis.tickInterval=axis.postProcessTickInterval(axis.tickInterval);}\nif(axis.pointRange){axis.tickInterval=mathMax(axis.pointRange,axis.tickInterval);}\nif(!tickIntervalOption&&axis.tickInterval<minTickIntervalOption){axis.tickInterval=minTickIntervalOption;}\nif(!isDatetimeAxis&&!isLog){if(!tickIntervalOption){axis.tickInterval=normalizeTickInterval(axis.tickInterval,null,getMagnitude(axis.tickInterval),options);}}\naxis.minorTickInterval=options.minorTickInterval==='auto'&&axis.tickInterval?axis.tickInterval/5:options.minorTickInterval;axis.tickPositions=tickPositions=options.tickPositions?[].concat(options.tickPositions):(tickPositioner&&tickPositioner.apply(axis,[axis.min,axis.max]));if(!tickPositions){if(!axis.ordinalPositions&&(axis.max-axis.min)/axis.tickInterval>mathMax(2*axis.len,200)){error(19,true);}\nif(isDatetimeAxis){tickPositions=axis.getTimeTicks(axis.normalizeTimeTickInterval(axis.tickInterval,options.units),axis.min,axis.max,options.startOfWeek,axis.ordinalPositions,axis.closestPointRange,true);}else if(isLog){tickPositions=axis.getLogTickPositions(axis.tickInterval,axis.min,axis.max);}else{tickPositions=axis.getLinearTickPositions(axis.tickInterval,axis.min,axis.max);}\nif(keepTwoTicksOnly){tickPositions.splice(1,tickPositions.length-2);}\naxis.tickPositions=tickPositions;}\nif(!isLinked){var roundedMin=tickPositions[0],roundedMax=tickPositions[tickPositions.length-1],minPointOffset=axis.minPointOffset||0,singlePad;if(!startOnTick&&!endOnTick&&!categories&&tickPositions.length===2){tickPositions.splice(1,0,(roundedMax+roundedMin)/2);}\nif(startOnTick){axis.min=roundedMin;}else if(axis.min-minPointOffset>roundedMin){tickPositions.shift();}\nif(endOnTick){axis.max=roundedMax;}else if(axis.max+minPointOffset<roundedMax){tickPositions.pop();}\nif(tickPositions.length===1){singlePad=mathAbs(axis.max)>10e12?1:0.001;axis.min-=singlePad;axis.max+=singlePad;}}},setMaxTicks:function(){var chart=this.chart,maxTicks=chart.maxTicks||{},tickPositions=this.tickPositions,key=this._maxTicksKey=[this.coll,this.pos,this.len].join('-');if(!this.isLinked&&!this.isDatetimeAxis&&tickPositions&&tickPositions.length>(maxTicks[key]||0)&&this.options.alignTicks!==false){maxTicks[key]=tickPositions.length;}\nchart.maxTicks=maxTicks;},adjustTickAmount:function(){var axis=this,chart=axis.chart,key=axis._maxTicksKey,tickPositions=axis.tickPositions,maxTicks=chart.maxTicks;if(maxTicks&&maxTicks[key]&&!axis.isDatetimeAxis&&!axis.categories&&!axis.isLinked&&axis.options.alignTicks!==false&&this.min!==UNDEFINED){var oldTickAmount=axis.tickAmount,calculatedTickAmount=tickPositions.length,tickAmount;axis.tickAmount=tickAmount=maxTicks[key];if(calculatedTickAmount<tickAmount){while(tickPositions.length<tickAmount){tickPositions.push(correctFloat(tickPositions[tickPositions.length-1]+axis.tickInterval));}\naxis.transA*=(calculatedTickAmount-1)/(tickAmount-1);axis.max=tickPositions[tickPositions.length-1];}\nif(defined(oldTickAmount)&&tickAmount!==oldTickAmount){axis.isDirty=true;}}},setScale:function(){var axis=this,stacks=axis.stacks,type,i,isDirtyData,isDirtyAxisLength;axis.oldMin=axis.min;axis.oldMax=axis.max;axis.oldAxisLength=axis.len;axis.setAxisSize();isDirtyAxisLength=axis.len!==axis.oldAxisLength;each(axis.series,function(series){if(series.isDirtyData||series.isDirty||series.xAxis.isDirty){isDirtyData=true;}});if(isDirtyAxisLength||isDirtyData||axis.isLinked||axis.forceRedraw||axis.userMin!==axis.oldUserMin||axis.userMax!==axis.oldUserMax){if(!axis.isXAxis){for(type in stacks){for(i in stacks[type]){stacks[type][i].total=null;stacks[type][i].cum=0;}}}\naxis.forceRedraw=false;axis.getSeriesExtremes();axis.setTickPositions();axis.oldUserMin=axis.userMin;axis.oldUserMax=axis.userMax;if(!axis.isDirty){axis.isDirty=isDirtyAxisLength||axis.min!==axis.oldMin||axis.max!==axis.oldMax;}}else if(!axis.isXAxis){if(axis.oldStacks){stacks=axis.stacks=axis.oldStacks;}\nfor(type in stacks){for(i in stacks[type]){stacks[type][i].cum=stacks[type][i].total;}}}\naxis.setMaxTicks();},setExtremes:function(newMin,newMax,redraw,animation,eventArguments){var axis=this,chart=axis.chart;redraw=pick(redraw,true);eventArguments=extend(eventArguments,{min:newMin,max:newMax});fireEvent(axis,'setExtremes',eventArguments,function(){axis.userMin=newMin;axis.userMax=newMax;axis.eventArgs=eventArguments;axis.isDirtyExtremes=true;if(redraw){chart.redraw(animation);}});},zoom:function(newMin,newMax){var dataMin=this.dataMin,dataMax=this.dataMax,options=this.options;if(!this.allowZoomOutside){if(defined(dataMin)&&newMin<=mathMin(dataMin,pick(options.min,dataMin))){newMin=UNDEFINED;}\nif(defined(dataMax)&&newMax>=mathMax(dataMax,pick(options.max,dataMax))){newMax=UNDEFINED;}}\nthis.displayBtn=newMin!==UNDEFINED||newMax!==UNDEFINED;this.setExtremes(newMin,newMax,false,UNDEFINED,{trigger:'zoom'});return true;},setAxisSize:function(){var chart=this.chart,options=this.options,offsetLeft=options.offsetLeft||0,offsetRight=options.offsetRight||0,horiz=this.horiz,width=pick(options.width,chart.plotWidth-offsetLeft+offsetRight),height=pick(options.height,chart.plotHeight),top=pick(options.top,chart.plotTop),left=pick(options.left,chart.plotLeft+offsetLeft),percentRegex=/%$/;if(percentRegex.test(height)){height=parseInt(height,10)/100*chart.plotHeight;}\nif(percentRegex.test(top)){top=parseInt(top,10)/100*chart.plotHeight+chart.plotTop;}\nthis.left=left;this.top=top;this.width=width;this.height=height;this.bottom=chart.chartHeight-height-top;this.right=chart.chartWidth-width-left;this.len=mathMax(horiz?width:height,0);this.pos=horiz?left:top;},getExtremes:function(){var axis=this,isLog=axis.isLog;return{min:isLog?correctFloat(lin2log(axis.min)):axis.min,max:isLog?correctFloat(lin2log(axis.max)):axis.max,dataMin:axis.dataMin,dataMax:axis.dataMax,userMin:axis.userMin,userMax:axis.userMax};},getThreshold:function(threshold){var axis=this,isLog=axis.isLog;var realMin=isLog?lin2log(axis.min):axis.min,realMax=isLog?lin2log(axis.max):axis.max;if(realMin>threshold||threshold===null){threshold=realMin;}else if(realMax<threshold){threshold=realMax;}\nreturn axis.translate(threshold,0,1,0,1);},autoLabelAlign:function(rotation){var ret,angle=(pick(rotation,0)-(this.side*90)+720)%360;if(angle>15&&angle<165){ret='right';}else if(angle>195&&angle<345){ret='left';}else{ret='center';}\nreturn ret;},getOffset:function(){var axis=this,chart=axis.chart,renderer=chart.renderer,options=axis.options,tickPositions=axis.tickPositions,ticks=axis.ticks,horiz=axis.horiz,side=axis.side,invertedSide=chart.inverted?[1,0,3,2][side]:side,hasData,showAxis,titleOffset=0,titleOffsetOption,titleMargin=0,axisTitleOptions=options.title,labelOptions=options.labels,labelOffset=0,labelOffsetPadded,axisOffset=chart.axisOffset,clipOffset=chart.clipOffset,directionFactor=[-1,1,1,-1][side],n,i,autoStaggerLines=1,maxStaggerLines=pick(labelOptions.maxStaggerLines,5),sortedPositions,lastRight,overlap,pos,bBox,x,w,lineNo,lineHeightCorrection;axis.hasData=hasData=(axis.hasVisibleSeries||(defined(axis.min)&&defined(axis.max)&&!!tickPositions));axis.showAxis=showAxis=hasData||pick(options.showEmpty,true);axis.staggerLines=axis.horiz&&labelOptions.staggerLines;if(!axis.axisGroup){axis.gridGroup=renderer.g('grid').attr({zIndex:options.gridZIndex||1}).add();axis.axisGroup=renderer.g('axis').attr({zIndex:options.zIndex||2}).add();axis.labelGroup=renderer.g('axis-labels').attr({zIndex:labelOptions.zIndex||7}).addClass(PREFIX+axis.coll.toLowerCase()+'-labels').add();}\nif(hasData||axis.isLinked){axis.labelAlign=pick(labelOptions.align||axis.autoLabelAlign(labelOptions.rotation));each(tickPositions,function(pos){if(!ticks[pos]){ticks[pos]=new Tick(axis,pos);}else{ticks[pos].addLabel();}});if(axis.horiz&&!axis.staggerLines&&maxStaggerLines&&!labelOptions.rotation){sortedPositions=axis.reversed?[].concat(tickPositions).reverse():tickPositions;while(autoStaggerLines<maxStaggerLines){lastRight=[];overlap=false;for(i=0;i<sortedPositions.length;i++){pos=sortedPositions[i];bBox=ticks[pos].label&&ticks[pos].label.getBBox();w=bBox?bBox.width:0;lineNo=i%autoStaggerLines;if(w){x=axis.translate(pos);if(lastRight[lineNo]!==UNDEFINED&&x<lastRight[lineNo]){overlap=true;}\nlastRight[lineNo]=x+w;}}\nif(overlap){autoStaggerLines++;}else{break;}}\nif(autoStaggerLines>1){axis.staggerLines=autoStaggerLines;}}\neach(tickPositions,function(pos){if(side===0||side===2||{1:'left',3:'right'}[side]===axis.labelAlign){labelOffset=mathMax(ticks[pos].getLabelSize(),labelOffset);}});if(axis.staggerLines){labelOffset*=axis.staggerLines;axis.labelOffset=labelOffset;}}else{for(n in ticks){ticks[n].destroy();delete ticks[n];}}\nif(axisTitleOptions&&axisTitleOptions.text&&axisTitleOptions.enabled!==false){if(!axis.axisTitle){axis.axisTitle=renderer.text(axisTitleOptions.text,0,0,axisTitleOptions.useHTML).attr({zIndex:7,rotation:axisTitleOptions.rotation||0,align:axisTitleOptions.textAlign||{low:'left',middle:'center',high:'right'}[axisTitleOptions.align]}).addClass(PREFIX+this.coll.toLowerCase()+'-title').css(axisTitleOptions.style).add(axis.axisGroup);axis.axisTitle.isNew=true;}\nif(showAxis){titleOffset=axis.axisTitle.getBBox()[horiz?'height':'width'];titleOffsetOption=axisTitleOptions.offset;titleMargin=defined(titleOffsetOption)?0:pick(axisTitleOptions.margin,horiz?5:10);}\naxis.axisTitle[showAxis?'show':'hide']();}\naxis.offset=directionFactor*pick(options.offset,axisOffset[side]);lineHeightCorrection=side===2?axis.tickBaseline:0;labelOffsetPadded=labelOffset+titleMargin+\n(labelOffset&&(directionFactor*(horiz?pick(labelOptions.y,axis.tickBaseline+8):labelOptions.x)-lineHeightCorrection));axis.axisTitleMargin=pick(titleOffsetOption,labelOffsetPadded);axisOffset[side]=mathMax(axisOffset[side],axis.axisTitleMargin+titleOffset+directionFactor*axis.offset,labelOffsetPadded);clipOffset[invertedSide]=mathMax(clipOffset[invertedSide],mathFloor(options.lineWidth/2)*2);},getLinePath:function(lineWidth){var chart=this.chart,opposite=this.opposite,offset=this.offset,horiz=this.horiz,lineLeft=this.left+(opposite?this.width:0)+offset,lineTop=chart.chartHeight-this.bottom-(opposite?this.height:0)+offset;if(opposite){lineWidth*=-1;}\nreturn chart.renderer.crispLine([M,horiz?this.left:lineLeft,horiz?lineTop:this.top,L,horiz?chart.chartWidth-this.right:lineLeft,horiz?lineTop:chart.chartHeight-this.bottom],lineWidth);},getTitlePosition:function(){var horiz=this.horiz,axisLeft=this.left,axisTop=this.top,axisLength=this.len,axisTitleOptions=this.options.title,margin=horiz?axisLeft:axisTop,opposite=this.opposite,offset=this.offset,fontSize=pInt(axisTitleOptions.style.fontSize||12),alongAxis={low:margin+(horiz?0:axisLength),middle:margin+axisLength/2,high:margin+(horiz?axisLength:0)}[axisTitleOptions.align],offAxis=(horiz?axisTop+this.height:axisLeft)+\n(horiz?1:-1)*(opposite?-1:1)*this.axisTitleMargin+\n(this.side===2?fontSize:0);return{x:horiz?alongAxis:offAxis+(opposite?this.width:0)+offset+\n(axisTitleOptions.x||0),y:horiz?offAxis-(opposite?this.height:0)+offset:alongAxis+(axisTitleOptions.y||0)};},render:function(){var axis=this,horiz=axis.horiz,reversed=axis.reversed,chart=axis.chart,renderer=chart.renderer,options=axis.options,isLog=axis.isLog,isLinked=axis.isLinked,tickPositions=axis.tickPositions,sortedPositions,axisTitle=axis.axisTitle,ticks=axis.ticks,minorTicks=axis.minorTicks,alternateBands=axis.alternateBands,stackLabelOptions=options.stackLabels,alternateGridColor=options.alternateGridColor,tickmarkOffset=axis.tickmarkOffset,lineWidth=options.lineWidth,linePath,hasRendered=chart.hasRendered,slideInTicks=hasRendered&&defined(axis.oldMin)&&!isNaN(axis.oldMin),hasData=axis.hasData,showAxis=axis.showAxis,from,overflow=options.labels.overflow,justifyLabels=axis.justifyLabels=horiz&&overflow!==false,to;axis.labelEdge.length=0;axis.justifyToPlot=overflow==='justify';each([ticks,minorTicks,alternateBands],function(coll){var pos;for(pos in coll){coll[pos].isActive=false;}});if(hasData||isLinked){if(axis.minorTickInterval&&!axis.categories){each(axis.getMinorTickPositions(),function(pos){if(!minorTicks[pos]){minorTicks[pos]=new Tick(axis,pos,'minor');}\nif(slideInTicks&&minorTicks[pos].isNew){minorTicks[pos].render(null,true);}\nminorTicks[pos].render(null,false,1);});}\nif(tickPositions.length){sortedPositions=tickPositions.slice();if((horiz&&reversed)||(!horiz&&!reversed)){sortedPositions.reverse();}\nif(justifyLabels){sortedPositions=sortedPositions.slice(1).concat([sortedPositions[0]]);}\neach(sortedPositions,function(pos,i){if(justifyLabels){i=(i===sortedPositions.length-1)?0:i+1;}\nif(!isLinked||(pos>=axis.min&&pos<=axis.max)){if(!ticks[pos]){ticks[pos]=new Tick(axis,pos);}\nif(slideInTicks&&ticks[pos].isNew){ticks[pos].render(i,true,0.1);}\nticks[pos].render(i);}});if(tickmarkOffset&&axis.min===0){if(!ticks[-1]){ticks[-1]=new Tick(axis,-1,null,true);}\nticks[-1].render(-1);}}\nif(alternateGridColor){each(tickPositions,function(pos,i){if(i%2===0&&pos<axis.max){if(!alternateBands[pos]){alternateBands[pos]=new Highcharts.PlotLineOrBand(axis);}\nfrom=pos+tickmarkOffset;to=tickPositions[i+1]!==UNDEFINED?tickPositions[i+1]+tickmarkOffset:axis.max;alternateBands[pos].options={from:isLog?lin2log(from):from,to:isLog?lin2log(to):to,color:alternateGridColor};alternateBands[pos].render();alternateBands[pos].isActive=true;}});}\nif(!axis._addedPlotLB){each((options.plotLines||[]).concat(options.plotBands||[]),function(plotLineOptions){axis.addPlotBandOrLine(plotLineOptions);});axis._addedPlotLB=true;}}\neach([ticks,minorTicks,alternateBands],function(coll){var pos,i,forDestruction=[],delay=globalAnimation?globalAnimation.duration||500:0,destroyInactiveItems=function(){i=forDestruction.length;while(i--){if(coll[forDestruction[i]]&&!coll[forDestruction[i]].isActive){coll[forDestruction[i]].destroy();delete coll[forDestruction[i]];}}};for(pos in coll){if(!coll[pos].isActive){coll[pos].render(pos,false,0);coll[pos].isActive=false;forDestruction.push(pos);}}\nif(coll===alternateBands||!chart.hasRendered||!delay){destroyInactiveItems();}else if(delay){setTimeout(destroyInactiveItems,delay);}});if(lineWidth){linePath=axis.getLinePath(lineWidth);if(!axis.axisLine){axis.axisLine=renderer.path(linePath).attr({stroke:options.lineColor,'stroke-width':lineWidth,zIndex:7}).add(axis.axisGroup);}else{axis.axisLine.animate({d:linePath});}\naxis.axisLine[showAxis?'show':'hide']();}\nif(axisTitle&&showAxis){axisTitle[axisTitle.isNew?'attr':'animate'](axis.getTitlePosition());axisTitle.isNew=false;}\nif(stackLabelOptions&&stackLabelOptions.enabled){axis.renderStackTotals();}\naxis.isDirty=false;},redraw:function(){this.render();each(this.plotLinesAndBands,function(plotLine){plotLine.render();});each(this.series,function(series){series.isDirty=true;});},destroy:function(keepEvents){var axis=this,stacks=axis.stacks,stackKey,plotLinesAndBands=axis.plotLinesAndBands,i;if(!keepEvents){removeEvent(axis);}\nfor(stackKey in stacks){destroyObjectProperties(stacks[stackKey]);stacks[stackKey]=null;}\neach([axis.ticks,axis.minorTicks,axis.alternateBands],function(coll){destroyObjectProperties(coll);});i=plotLinesAndBands.length;while(i--){plotLinesAndBands[i].destroy();}\neach(['stackTotalGroup','axisLine','axisTitle','axisGroup','cross','gridGroup','labelGroup'],function(prop){if(axis[prop]){axis[prop]=axis[prop].destroy();}});if(this.cross){this.cross.destroy();}},drawCrosshair:function(e,point){if(!this.crosshair){return;}\nif((defined(point)||!pick(this.crosshair.snap,true))===false){this.hideCrosshair();return;}\nvar path,options=this.crosshair,animation=options.animation,pos;if(!pick(options.snap,true)){pos=(this.horiz?e.chartX-this.pos:this.len-e.chartY+this.pos);}else if(defined(point)){pos=(this.chart.inverted!=this.horiz)?point.plotX:this.len-point.plotY;}\nif(this.isRadial){path=this.getPlotLinePath(this.isXAxis?point.x:pick(point.stackY,point.y));}else{path=this.getPlotLinePath(null,null,null,null,pos);}\nif(path===null){this.hideCrosshair();return;}\nif(this.cross){this.cross.attr({visibility:VISIBLE})[animation?'animate':'attr']({d:path},animation);}else{var attribs={'stroke-width':options.width||1,stroke:options.color||'#C0C0C0',zIndex:options.zIndex||2};if(options.dashStyle){attribs.dashstyle=options.dashStyle;}\nthis.cross=this.chart.renderer.path(path).attr(attribs).add();}},hideCrosshair:function(){if(this.cross){this.cross.hide();}}};extend(Axis.prototype,AxisPlotLineOrBandExtension);Axis.prototype.getTimeTicks=function(normalizedInterval,min,max,startOfWeek){var tickPositions=[],i,higherRanks={},useUTC=defaultOptions.global.useUTC,minYear,minDate=new Date(min-timezoneOffset),interval=normalizedInterval.unitRange,count=normalizedInterval.count;if(defined(min)){if(interval>=timeUnits.second){minDate.setMilliseconds(0);minDate.setSeconds(interval>=timeUnits.minute?0:count*mathFloor(minDate.getSeconds()/count));}\nif(interval>=timeUnits.minute){minDate[setMinutes](interval>=timeUnits.hour?0:count*mathFloor(minDate[getMinutes]()/count));}\nif(interval>=timeUnits.hour){minDate[setHours](interval>=timeUnits.day?0:count*mathFloor(minDate[getHours]()/count));}\nif(interval>=timeUnits.day){minDate[setDate](interval>=timeUnits.month?1:count*mathFloor(minDate[getDate]()/count));}\nif(interval>=timeUnits.month){minDate[setMonth](interval>=timeUnits.year?0:count*mathFloor(minDate[getMonth]()/count));minYear=minDate[getFullYear]();}\nif(interval>=timeUnits.year){minYear-=minYear%count;minDate[setFullYear](minYear);}\nif(interval===timeUnits.week){minDate[setDate](minDate[getDate]()-minDate[getDay]()+\npick(startOfWeek,1));}\ni=1;if(timezoneOffset){minDate=new Date(minDate.getTime()+timezoneOffset);}\nminYear=minDate[getFullYear]();var time=minDate.getTime(),minMonth=minDate[getMonth](),minDateDate=minDate[getDate](),localTimezoneOffset=useUTC?timezoneOffset:(24*3600*1000+minDate.getTimezoneOffset()*60*1000)%(24*3600*1000);while(time<max){tickPositions.push(time);if(interval===timeUnits.year){time=makeTime(minYear+i*count,0);}else if(interval===timeUnits.month){time=makeTime(minYear,minMonth+i*count);}else if(!useUTC&&(interval===timeUnits.day||interval===timeUnits.week)){time=makeTime(minYear,minMonth,minDateDate+\ni*count*(interval===timeUnits.day?1:7));}else{time+=interval*count;}\ni++;}\ntickPositions.push(time);each(grep(tickPositions,function(time){return interval<=timeUnits.hour&&time%timeUnits.day===localTimezoneOffset;}),function(time){higherRanks[time]='day';});}\ntickPositions.info=extend(normalizedInterval,{higherRanks:higherRanks,totalRange:interval*count});return tickPositions;};Axis.prototype.normalizeTimeTickInterval=function(tickInterval,unitsOption){var units=unitsOption||[['millisecond',[1,2,5,10,20,25,50,100,200,500]],['second',[1,2,5,10,15,30]],['minute',[1,2,5,10,15,30]],['hour',[1,2,3,4,6,8,12]],['day',[1,2]],['week',[1,2]],['month',[1,2,3,4,6]],['year',null]],unit=units[units.length-1],interval=timeUnits[unit[0]],multiples=unit[1],count,i;for(i=0;i<units.length;i++){unit=units[i];interval=timeUnits[unit[0]];multiples=unit[1];if(units[i+1]){var lessThan=(interval*multiples[multiples.length-1]+\ntimeUnits[units[i+1][0]])/2;if(tickInterval<=lessThan){break;}}}\nif(interval===timeUnits.year&&tickInterval<5*interval){multiples=[1,2,5];}\ncount=normalizeTickInterval(tickInterval/interval,multiples,unit[0]==='year'?mathMax(getMagnitude(tickInterval/interval),1):1);return{unitRange:interval,count:count,unitName:unit[0]};};Axis.prototype.getLogTickPositions=function(interval,min,max,minor){var axis=this,options=axis.options,axisLength=axis.len,positions=[];if(!minor){axis._minorAutoInterval=null;}\nif(interval>=0.5){interval=mathRound(interval);positions=axis.getLinearTickPositions(interval,min,max);}else if(interval>=0.08){var roundedMin=mathFloor(min),intermediate,i,j,len,pos,lastPos,break2;if(interval>0.3){intermediate=[1,2,4];}else if(interval>0.15){intermediate=[1,2,4,6,8];}else{intermediate=[1,2,3,4,5,6,7,8,9];}\nfor(i=roundedMin;i<max+1&&!break2;i++){len=intermediate.length;for(j=0;j<len&&!break2;j++){pos=log2lin(lin2log(i)*intermediate[j]);if(pos>min&&(!minor||lastPos<=max)&&lastPos!==UNDEFINED){positions.push(lastPos);}\nif(lastPos>max){break2=true;}\nlastPos=pos;}}}else{var realMin=lin2log(min),realMax=lin2log(max),tickIntervalOption=options[minor?'minorTickInterval':'tickInterval'],filteredTickIntervalOption=tickIntervalOption==='auto'?null:tickIntervalOption,tickPixelIntervalOption=options.tickPixelInterval/(minor?5:1),totalPixelLength=minor?axisLength/axis.tickPositions.length:axisLength;interval=pick(filteredTickIntervalOption,axis._minorAutoInterval,(realMax-realMin)*tickPixelIntervalOption/(totalPixelLength||1));interval=normalizeTickInterval(interval,null,getMagnitude(interval));positions=map(axis.getLinearTickPositions(interval,realMin,realMax),log2lin);if(!minor){axis._minorAutoInterval=interval/5;}}\nif(!minor){axis.tickInterval=interval;}\nreturn positions;};var Tooltip=Highcharts.Tooltip=function(){this.init.apply(this,arguments);};Tooltip.prototype={init:function(chart,options){var borderWidth=options.borderWidth,style=options.style,padding=pInt(style.padding);this.chart=chart;this.options=options;this.crosshairs=[];this.now={x:0,y:0};this.isHidden=true;this.label=chart.renderer.label('',0,0,options.shape||'callout',null,null,options.useHTML,null,'tooltip').attr({padding:padding,fill:options.backgroundColor,'stroke-width':borderWidth,r:options.borderRadius,zIndex:8}).css(style).css({padding:0}).add().attr({y:-9999});if(!useCanVG){this.label.shadow(options.shadow);}\nthis.shared=options.shared;},destroy:function(){if(this.label){this.label=this.label.destroy();}\nclearTimeout(this.hideTimer);clearTimeout(this.tooltipTimeout);},move:function(x,y,anchorX,anchorY){var tooltip=this,now=tooltip.now,animate=tooltip.options.animation!==false&&!tooltip.isHidden&&(mathAbs(x-now.x)>1||mathAbs(y-now.y)>1),skipAnchor=tooltip.followPointer||tooltip.len>1;extend(now,{x:animate?(2*now.x+x)/3:x,y:animate?(now.y+y)/2:y,anchorX:skipAnchor?UNDEFINED:animate?(2*now.anchorX+anchorX)/3:anchorX,anchorY:skipAnchor?UNDEFINED:animate?(now.anchorY+anchorY)/2:anchorY});tooltip.label.attr(now);if(tooltip.chart.renderer.isVML){tooltip.label.toFront();}\nif(animate){clearTimeout(this.tooltipTimeout);this.tooltipTimeout=setTimeout(function(){if(tooltip){tooltip.move(x,y,anchorX,anchorY);}},32);}},hide:function(){var tooltip=this,hoverPoints;clearTimeout(this.hideTimer);if(!this.isHidden){hoverPoints=this.chart.hoverPoints;this.hideTimer=setTimeout(function(){tooltip.label.fadeOut();tooltip.isHidden=true;},pick(this.options.hideDelay,500));if(hoverPoints){each(hoverPoints,function(point){point.setState();});}\nthis.chart.hoverPoints=null;}},getAnchor:function(points,mouseEvent){var ret,chart=this.chart,inverted=chart.inverted,plotTop=chart.plotTop,plotX=0,plotY=0,yAxis;points=splat(points);ret=points[0].tooltipPos;if(this.followPointer&&mouseEvent){if(mouseEvent.chartX===UNDEFINED){mouseEvent=chart.pointer.normalize(mouseEvent);}\nret=[mouseEvent.chartX-chart.plotLeft,mouseEvent.chartY-plotTop];}\nif(!ret){each(points,function(point){if(!point.series){return;}\nyAxis=point.series.yAxis;plotX+=point.plotX;plotY+=(point.plotLow?(point.plotLow+point.plotHigh)/2:point.plotY)+\n(!inverted&&yAxis?yAxis.top-plotTop:0);});plotX/=points.length;plotY/=points.length;ret=[inverted?chart.plotWidth-plotY:plotX,this.shared&&!inverted&&points.length>1&&mouseEvent?mouseEvent.chartY-plotTop:inverted?chart.plotHeight-plotX:plotY];}\nreturn map(ret,mathRound);},getPosition:function(boxWidth,boxHeight,point){var chart=this.chart,distance=this.distance,ret={},swapped,first=['y',chart.chartHeight,boxHeight,point.plotY+chart.plotTop],second=['x',chart.chartWidth,boxWidth,point.plotX+chart.plotLeft],preferFarSide=point.ttBelow||(chart.inverted&&!point.negative)||(!chart.inverted&&point.negative),firstDimension=function(dim,outerSize,innerSize,point){var roomLeft=innerSize<point-distance,roomRight=point+distance+innerSize<outerSize,alignedLeft=point-distance-innerSize,alignedRight=point+distance;if(preferFarSide&&roomRight){ret[dim]=alignedRight;}else if(!preferFarSide&&roomLeft){ret[dim]=alignedLeft;}else if(roomLeft){ret[dim]=alignedLeft;}else if(roomRight){ret[dim]=alignedRight;}else{return false;}},secondDimension=function(dim,outerSize,innerSize,point){if(point<distance||point>outerSize-distance){return false;}else if(point<innerSize/2){ret[dim]=1;}else if(point>outerSize-innerSize/2){ret[dim]=outerSize-innerSize-2;}else{ret[dim]=point-innerSize/2;}},swap=function(count){var temp=first;first=second;second=temp;swapped=count;},run=function(){if(firstDimension.apply(0,first)!==false){if(secondDimension.apply(0,second)===false&&!swapped){swap(true);run();}}else if(!swapped){swap(true);run();}else{ret.x=ret.y=0;}};if(chart.inverted||this.len>1){swap();}\nrun();return ret;},defaultFormatter:function(tooltip){var items=this.points||splat(this),series=items[0].series,s;s=[tooltip.tooltipHeaderFormatter(items[0])];each(items,function(item){series=item.series;s.push((series.tooltipFormatter&&series.tooltipFormatter(item))||item.point.tooltipFormatter(series.tooltipOptions.pointFormat));});s.push(tooltip.options.footerFormat||'');return s.join('');},refresh:function(point,mouseEvent){var tooltip=this,chart=tooltip.chart,label=tooltip.label,options=tooltip.options,x,y,anchor,textConfig={},text,pointConfig=[],formatter=options.formatter||tooltip.defaultFormatter,hoverPoints=chart.hoverPoints,borderColor,shared=tooltip.shared,currentSeries;clearTimeout(this.hideTimer);tooltip.followPointer=splat(point)[0].series.tooltipOptions.followPointer;anchor=tooltip.getAnchor(point,mouseEvent);x=anchor[0];y=anchor[1];if(shared&&!(point.series&&point.series.noSharedTooltip)){chart.hoverPoints=point;if(hoverPoints){each(hoverPoints,function(point){point.setState();});}\neach(point,function(item){item.setState(HOVER_STATE);pointConfig.push(item.getLabelConfig());});textConfig={x:point[0].category,y:point[0].y};textConfig.points=pointConfig;this.len=pointConfig.length;point=point[0];}else{textConfig=point.getLabelConfig();}\ntext=formatter.call(textConfig,tooltip);currentSeries=point.series;this.distance=pick(currentSeries.tooltipOptions.distance,16);if(text===false){this.hide();}else{if(tooltip.isHidden){stop(label);label.attr('opacity',1).show();}\nlabel.attr({text:text});borderColor=options.borderColor||point.color||currentSeries.color||'#606060';label.attr({stroke:borderColor});tooltip.updatePosition({plotX:x,plotY:y,negative:point.negative,ttBelow:point.ttBelow});this.isHidden=false;}\nfireEvent(chart,'tooltipRefresh',{text:text,x:x+chart.plotLeft,y:y+chart.plotTop,borderColor:borderColor});},updatePosition:function(point){var chart=this.chart,label=this.label,pos=(this.options.positioner||this.getPosition).call(this,label.width,label.height,point);this.move(mathRound(pos.x),mathRound(pos.y),point.plotX+chart.plotLeft,point.plotY+chart.plotTop);},tooltipHeaderFormatter:function(point){var series=point.series,tooltipOptions=series.tooltipOptions,dateTimeLabelFormats=tooltipOptions.dateTimeLabelFormats,xDateFormat=tooltipOptions.xDateFormat,xAxis=series.xAxis,isDateTime=xAxis&&xAxis.options.type==='datetime'&&isNumber(point.key),headerFormat=tooltipOptions.headerFormat,closestPointRange=xAxis&&xAxis.closestPointRange,n;if(isDateTime&&!xDateFormat){if(closestPointRange){for(n in timeUnits){if(timeUnits[n]>=closestPointRange||(timeUnits[n]<=timeUnits.day&&point.key%timeUnits[n]>0)){xDateFormat=dateTimeLabelFormats[n];break;}}}else{xDateFormat=dateTimeLabelFormats.day;}\nxDateFormat=xDateFormat||dateTimeLabelFormats.year;}\nif(isDateTime&&xDateFormat){headerFormat=headerFormat.replace('{point.key}','{point.key:'+xDateFormat+'}');}\nreturn format(headerFormat,{point:point,series:series});}};var hoverChartIndex;hasTouch=doc.documentElement.ontouchstart!==UNDEFINED;var Pointer=Highcharts.Pointer=function(chart,options){this.init(chart,options);};Pointer.prototype={init:function(chart,options){var chartOptions=options.chart,chartEvents=chartOptions.events,zoomType=useCanVG?'':chartOptions.zoomType,inverted=chart.inverted,zoomX,zoomY;this.options=options;this.chart=chart;this.zoomX=zoomX=/x/.test(zoomType);this.zoomY=zoomY=/y/.test(zoomType);this.zoomHor=(zoomX&&!inverted)||(zoomY&&inverted);this.zoomVert=(zoomY&&!inverted)||(zoomX&&inverted);this.hasZoom=zoomX||zoomY;this.runChartClick=chartEvents&&!!chartEvents.click;this.pinchDown=[];this.lastValidTouch={};if(Highcharts.Tooltip&&options.tooltip.enabled){chart.tooltip=new Tooltip(chart,options.tooltip);this.followTouchMove=options.tooltip.followTouchMove;}\nthis.setDOMEvents();},normalize:function(e,chartPosition){var chartX,chartY,ePos;e=e||window.event;e=washMouseEvent(e);if(!e.target){e.target=e.srcElement;}\nePos=e.touches?(e.touches.length?e.touches.item(0):e.changedTouches[0]):e;if(!chartPosition){this.chartPosition=chartPosition=offset(this.chart.container);}\nif(ePos.pageX===UNDEFINED){chartX=mathMax(e.x,e.clientX-chartPosition.left);chartY=e.y;}else{chartX=ePos.pageX-chartPosition.left;chartY=ePos.pageY-chartPosition.top;}\nreturn extend(e,{chartX:mathRound(chartX),chartY:mathRound(chartY)});},getCoordinates:function(e){var coordinates={xAxis:[],yAxis:[]};each(this.chart.axes,function(axis){coordinates[axis.isXAxis?'xAxis':'yAxis'].push({axis:axis,value:axis.toValue(e[axis.horiz?'chartX':'chartY'])});});return coordinates;},getIndex:function(e){var chart=this.chart;return chart.inverted?chart.plotHeight+chart.plotTop-e.chartY:e.chartX-chart.plotLeft;},runPointActions:function(e){var pointer=this,chart=pointer.chart,series=chart.series,tooltip=chart.tooltip,followPointer,point,points,hoverPoint=chart.hoverPoint,hoverSeries=chart.hoverSeries,i,j,distance=chart.chartWidth,index=pointer.getIndex(e),anchor;if(tooltip&&pointer.options.tooltip.shared&&!(hoverSeries&&hoverSeries.noSharedTooltip)){points=[];i=series.length;for(j=0;j<i;j++){if(series[j].visible&&series[j].options.enableMouseTracking!==false&&!series[j].noSharedTooltip&&series[j].singularTooltips!==true&&series[j].tooltipPoints.length){point=series[j].tooltipPoints[index];if(point&&point.series){point._dist=mathAbs(index-point.clientX);distance=mathMin(distance,point._dist);points.push(point);}}}\ni=points.length;while(i--){if(points[i]._dist>distance){points.splice(i,1);}}\nif(points.length&&(points[0].clientX!==pointer.hoverX)){tooltip.refresh(points,e);pointer.hoverX=points[0].clientX;}}\nfollowPointer=hoverSeries&&hoverSeries.tooltipOptions.followPointer;if(hoverSeries&&hoverSeries.tracker&&!followPointer){point=hoverSeries.tooltipPoints[index];if(point&&point!==hoverPoint){point.onMouseOver(e);}}else if(tooltip&&followPointer&&!tooltip.isHidden){anchor=tooltip.getAnchor([{}],e);tooltip.updatePosition({plotX:anchor[0],plotY:anchor[1]});}\nif(tooltip&&!pointer._onDocumentMouseMove){pointer._onDocumentMouseMove=function(e){if(charts[hoverChartIndex]){charts[hoverChartIndex].pointer.onDocumentMouseMove(e);}};addEvent(doc,'mousemove',pointer._onDocumentMouseMove);}\neach(chart.axes,function(axis){axis.drawCrosshair(e,pick(point,hoverPoint));});},reset:function(allowMove){var pointer=this,chart=pointer.chart,hoverSeries=chart.hoverSeries,hoverPoint=chart.hoverPoint,tooltip=chart.tooltip,tooltipPoints=tooltip&&tooltip.shared?chart.hoverPoints:hoverPoint;allowMove=allowMove&&tooltip&&tooltipPoints;if(allowMove&&splat(tooltipPoints)[0].plotX===UNDEFINED){allowMove=false;}\nif(allowMove){tooltip.refresh(tooltipPoints);if(hoverPoint){hoverPoint.setState(hoverPoint.state,true);}}else{if(hoverPoint){hoverPoint.onMouseOut();}\nif(hoverSeries){hoverSeries.onMouseOut();}\nif(tooltip){tooltip.hide();}\nif(pointer._onDocumentMouseMove){removeEvent(doc,'mousemove',pointer._onDocumentMouseMove);pointer._onDocumentMouseMove=null;}\neach(chart.axes,function(axis){axis.hideCrosshair();});pointer.hoverX=null;}},scaleGroups:function(attribs,clip){var chart=this.chart,seriesAttribs;each(chart.series,function(series){seriesAttribs=attribs||series.getPlotBox();if(series.xAxis&&series.xAxis.zoomEnabled){series.group.attr(seriesAttribs);if(series.markerGroup){series.markerGroup.attr(seriesAttribs);series.markerGroup.clip(clip?chart.clipRect:null);}\nif(series.dataLabelsGroup){series.dataLabelsGroup.attr(seriesAttribs);}}});chart.clipRect.attr(clip||chart.clipBox);},dragStart:function(e){var chart=this.chart;chart.mouseIsDown=e.type;chart.cancelClick=false;chart.mouseDownX=this.mouseDownX=e.chartX;chart.mouseDownY=this.mouseDownY=e.chartY;},drag:function(e){var chart=this.chart,chartOptions=chart.options.chart,chartX=e.chartX,chartY=e.chartY,zoomHor=this.zoomHor,zoomVert=this.zoomVert,plotLeft=chart.plotLeft,plotTop=chart.plotTop,plotWidth=chart.plotWidth,plotHeight=chart.plotHeight,clickedInside,size,mouseDownX=this.mouseDownX,mouseDownY=this.mouseDownY,panKey=chartOptions.panKey&&e[chartOptions.panKey+'Key'];if(chartX<plotLeft){chartX=plotLeft;}else if(chartX>plotLeft+plotWidth){chartX=plotLeft+plotWidth;}\nif(chartY<plotTop){chartY=plotTop;}else if(chartY>plotTop+plotHeight){chartY=plotTop+plotHeight;}\nthis.hasDragged=Math.sqrt(Math.pow(mouseDownX-chartX,2)+\nMath.pow(mouseDownY-chartY,2));if(this.hasDragged>10){clickedInside=chart.isInsidePlot(mouseDownX-plotLeft,mouseDownY-plotTop);if(chart.hasCartesianSeries&&(this.zoomX||this.zoomY)&&clickedInside&&!panKey){if(!this.selectionMarker){this.selectionMarker=chart.renderer.rect(plotLeft,plotTop,zoomHor?1:plotWidth,zoomVert?1:plotHeight,0).attr({fill:chartOptions.selectionMarkerFill||'rgba(69,114,167,0.25)',zIndex:7}).add();}}\nif(this.selectionMarker&&zoomHor){size=chartX-mouseDownX;this.selectionMarker.attr({width:mathAbs(size),x:(size>0?0:size)+mouseDownX});}\nif(this.selectionMarker&&zoomVert){size=chartY-mouseDownY;this.selectionMarker.attr({height:mathAbs(size),y:(size>0?0:size)+mouseDownY});}\nif(clickedInside&&!this.selectionMarker&&chartOptions.panning){chart.pan(e,chartOptions.panning);}}},drop:function(e){var chart=this.chart,hasPinched=this.hasPinched;if(this.selectionMarker){var selectionData={xAxis:[],yAxis:[],originalEvent:e.originalEvent||e},selectionBox=this.selectionMarker,selectionLeft=selectionBox.attr?selectionBox.attr('x'):selectionBox.x,selectionTop=selectionBox.attr?selectionBox.attr('y'):selectionBox.y,selectionWidth=selectionBox.attr?selectionBox.attr('width'):selectionBox.width,selectionHeight=selectionBox.attr?selectionBox.attr('height'):selectionBox.height,runZoom;if(this.hasDragged||hasPinched){each(chart.axes,function(axis){if(axis.zoomEnabled){var horiz=axis.horiz,minPixelPadding=e.type==='touchend'?axis.minPixelPadding:0,selectionMin=axis.toValue((horiz?selectionLeft:selectionTop)+minPixelPadding),selectionMax=axis.toValue((horiz?selectionLeft+selectionWidth:selectionTop+selectionHeight)-minPixelPadding);if(!isNaN(selectionMin)&&!isNaN(selectionMax)){selectionData[axis.coll].push({axis:axis,min:mathMin(selectionMin,selectionMax),max:mathMax(selectionMin,selectionMax)});runZoom=true;}}});if(runZoom){fireEvent(chart,'selection',selectionData,function(args){chart.zoom(extend(args,hasPinched?{animation:false}:null));});}}\nthis.selectionMarker=this.selectionMarker.destroy();if(hasPinched){this.scaleGroups();}}\nif(chart){css(chart.container,{cursor:chart._cursor});chart.cancelClick=this.hasDragged>10;chart.mouseIsDown=this.hasDragged=this.hasPinched=false;this.pinchDown=[];}},onContainerMouseDown:function(e){e=this.normalize(e);if(e.preventDefault){e.preventDefault();}\nthis.dragStart(e);},onDocumentMouseUp:function(e){if(charts[hoverChartIndex]){charts[hoverChartIndex].pointer.drop(e);}},onDocumentMouseMove:function(e){var chart=this.chart,chartPosition=this.chartPosition,hoverSeries=chart.hoverSeries;e=this.normalize(e,chartPosition);if(chartPosition&&hoverSeries&&!this.inClass(e.target,'highcharts-tracker')&&!chart.isInsidePlot(e.chartX-chart.plotLeft,e.chartY-chart.plotTop)){this.reset();}},onContainerMouseLeave:function(){var chart=charts[hoverChartIndex];if(chart){chart.pointer.reset();chart.pointer.chartPosition=null;}},onContainerMouseMove:function(e){var chart=this.chart;hoverChartIndex=chart.index;e=this.normalize(e);e.returnValue=false;if(chart.mouseIsDown==='mousedown'){this.drag(e);}\nif((this.inClass(e.target,'highcharts-tracker')||chart.isInsidePlot(e.chartX-chart.plotLeft,e.chartY-chart.plotTop))&&!chart.openMenu){this.runPointActions(e);}},inClass:function(element,className){var elemClassName;while(element){elemClassName=attr(element,'class');if(elemClassName){if(elemClassName.indexOf(className)!==-1){return true;}else if(elemClassName.indexOf(PREFIX+'container')!==-1){return false;}}\nelement=element.parentNode;}},onTrackerMouseOut:function(e){var series=this.chart.hoverSeries,relatedTarget=e.relatedTarget||e.toElement,relatedSeries=relatedTarget&&relatedTarget.point&&relatedTarget.point.series;if(series&&!series.options.stickyTracking&&!this.inClass(relatedTarget,PREFIX+'tooltip')&&relatedSeries!==series){series.onMouseOut();}},onContainerClick:function(e){var chart=this.chart,hoverPoint=chart.hoverPoint,plotLeft=chart.plotLeft,plotTop=chart.plotTop;e=this.normalize(e);e.cancelBubble=true;if(!chart.cancelClick){if(hoverPoint&&this.inClass(e.target,PREFIX+'tracker')){fireEvent(hoverPoint.series,'click',extend(e,{point:hoverPoint}));if(chart.hoverPoint){hoverPoint.firePointEvent('click',e);}}else{extend(e,this.getCoordinates(e));if(chart.isInsidePlot(e.chartX-plotLeft,e.chartY-plotTop)){fireEvent(chart,'click',e);}}}},setDOMEvents:function(){var pointer=this,container=pointer.chart.container;container.onmousedown=function(e){pointer.onContainerMouseDown(e);};container.onmousemove=function(e){pointer.onContainerMouseMove(e);};container.onclick=function(e){pointer.onContainerClick(e);};addEvent(container,'mouseleave',pointer.onContainerMouseLeave);if(chartCount===1){addEvent(doc,'mouseup',pointer.onDocumentMouseUp);}\nif(hasTouch){container.ontouchstart=function(e){pointer.onContainerTouchStart(e);};container.ontouchmove=function(e){pointer.onContainerTouchMove(e);};if(chartCount===1){addEvent(doc,'touchend',pointer.onDocumentTouchEnd);}}},destroy:function(){var prop;removeEvent(this.chart.container,'mouseleave',this.onContainerMouseLeave);if(!chartCount){removeEvent(doc,'mouseup',this.onDocumentMouseUp);removeEvent(doc,'touchend',this.onDocumentTouchEnd);}\nclearInterval(this.tooltipTimeout);for(prop in this){this[prop]=null;}}};extend(Highcharts.Pointer.prototype,{pinchTranslate:function(pinchDown,touches,transform,selectionMarker,clip,lastValidTouch){if(this.zoomHor||this.pinchHor){this.pinchTranslateDirection(true,pinchDown,touches,transform,selectionMarker,clip,lastValidTouch);}\nif(this.zoomVert||this.pinchVert){this.pinchTranslateDirection(false,pinchDown,touches,transform,selectionMarker,clip,lastValidTouch);}},pinchTranslateDirection:function(horiz,pinchDown,touches,transform,selectionMarker,clip,lastValidTouch,forcedScale){var chart=this.chart,xy=horiz?'x':'y',XY=horiz?'X':'Y',sChartXY='chart'+XY,wh=horiz?'width':'height',plotLeftTop=chart['plot'+(horiz?'Left':'Top')],selectionWH,selectionXY,clipXY,scale=forcedScale||1,inverted=chart.inverted,bounds=chart.bounds[horiz?'h':'v'],singleTouch=pinchDown.length===1,touch0Start=pinchDown[0][sChartXY],touch0Now=touches[0][sChartXY],touch1Start=!singleTouch&&pinchDown[1][sChartXY],touch1Now=!singleTouch&&touches[1][sChartXY],outOfBounds,transformScale,scaleKey,setScale=function(){if(!singleTouch&&mathAbs(touch0Start-touch1Start)>20){scale=forcedScale||mathAbs(touch0Now-touch1Now)/mathAbs(touch0Start-touch1Start);}\nclipXY=((plotLeftTop-touch0Now)/scale)+touch0Start;selectionWH=chart['plot'+(horiz?'Width':'Height')]/scale;};setScale();selectionXY=clipXY;if(selectionXY<bounds.min){selectionXY=bounds.min;outOfBounds=true;}else if(selectionXY+selectionWH>bounds.max){selectionXY=bounds.max-selectionWH;outOfBounds=true;}\nif(outOfBounds){touch0Now-=0.8*(touch0Now-lastValidTouch[xy][0]);if(!singleTouch){touch1Now-=0.8*(touch1Now-lastValidTouch[xy][1]);}\nsetScale();}else{lastValidTouch[xy]=[touch0Now,touch1Now];}\nif(!inverted){clip[xy]=clipXY-plotLeftTop;clip[wh]=selectionWH;}\nscaleKey=inverted?(horiz?'scaleY':'scaleX'):'scale'+XY;transformScale=inverted?1/scale:scale;selectionMarker[wh]=selectionWH;selectionMarker[xy]=selectionXY;transform[scaleKey]=scale;transform['translate'+XY]=(transformScale*plotLeftTop)+(touch0Now-(transformScale*touch0Start));},pinch:function(e){var self=this,chart=self.chart,pinchDown=self.pinchDown,followTouchMove=self.followTouchMove,touches=e.touches,touchesLength=touches.length,lastValidTouch=self.lastValidTouch,hasZoom=self.hasZoom,selectionMarker=self.selectionMarker,transform={},fireClickEvent=touchesLength===1&&((self.inClass(e.target,PREFIX+'tracker')&&chart.runTrackerClick)||chart.runChartClick),clip={};if((hasZoom||followTouchMove)&&!fireClickEvent){e.preventDefault();}\nmap(touches,function(e){return self.normalize(e);});if(e.type==='touchstart'){each(touches,function(e,i){pinchDown[i]={chartX:e.chartX,chartY:e.chartY};});lastValidTouch.x=[pinchDown[0].chartX,pinchDown[1]&&pinchDown[1].chartX];lastValidTouch.y=[pinchDown[0].chartY,pinchDown[1]&&pinchDown[1].chartY];each(chart.axes,function(axis){if(axis.zoomEnabled){var bounds=chart.bounds[axis.horiz?'h':'v'],minPixelPadding=axis.minPixelPadding,min=axis.toPixels(pick(axis.options.min,axis.dataMin)),max=axis.toPixels(pick(axis.options.max,axis.dataMax)),absMin=mathMin(min,max),absMax=mathMax(min,max);bounds.min=mathMin(axis.pos,absMin-minPixelPadding);bounds.max=mathMax(axis.pos+axis.len,absMax+minPixelPadding);}});}else if(pinchDown.length){if(!selectionMarker){self.selectionMarker=selectionMarker=extend({destroy:noop},chart.plotBox);}\nself.pinchTranslate(pinchDown,touches,transform,selectionMarker,clip,lastValidTouch);self.hasPinched=hasZoom;self.scaleGroups(transform,clip);if(!hasZoom&&followTouchMove&&touchesLength===1){this.runPointActions(self.normalize(e));}}},onContainerTouchStart:function(e){var chart=this.chart;hoverChartIndex=chart.index;if(e.touches.length===1){e=this.normalize(e);if(chart.isInsidePlot(e.chartX-chart.plotLeft,e.chartY-chart.plotTop)){this.runPointActions(e);this.pinch(e);}else{this.reset();}}else if(e.touches.length===2){this.pinch(e);}},onContainerTouchMove:function(e){if(e.touches.length===1||e.touches.length===2){this.pinch(e);}},onDocumentTouchEnd:function(e){if(charts[hoverChartIndex]){charts[hoverChartIndex].pointer.drop(e);}}});if(win.PointerEvent||win.MSPointerEvent){var touches={},hasPointerEvent=!!win.PointerEvent,getWebkitTouches=function(){var key,fake=[];fake.item=function(i){return this[i];};for(key in touches){if(touches.hasOwnProperty(key)){fake.push({pageX:touches[key].pageX,pageY:touches[key].pageY,target:touches[key].target});}}\nreturn fake;},translateMSPointer=function(e,method,wktype,callback){var p;e=e.originalEvent||e;if((e.pointerType==='touch'||e.pointerType===e.MSPOINTER_TYPE_TOUCH)&&charts[hoverChartIndex]){callback(e);p=charts[hoverChartIndex].pointer;p[method]({type:wktype,target:e.currentTarget,preventDefault:noop,touches:getWebkitTouches()});}};extend(Pointer.prototype,{onContainerPointerDown:function(e){translateMSPointer(e,'onContainerTouchStart','touchstart',function(e){touches[e.pointerId]={pageX:e.pageX,pageY:e.pageY,target:e.currentTarget};});},onContainerPointerMove:function(e){translateMSPointer(e,'onContainerTouchMove','touchmove',function(e){touches[e.pointerId]={pageX:e.pageX,pageY:e.pageY};if(!touches[e.pointerId].target){touches[e.pointerId].target=e.currentTarget;}});},onDocumentPointerUp:function(e){translateMSPointer(e,'onContainerTouchEnd','touchend',function(e){delete touches[e.pointerId];});},batchMSEvents:function(fn){fn(this.chart.container,hasPointerEvent?'pointerdown':'MSPointerDown',this.onContainerPointerDown);fn(this.chart.container,hasPointerEvent?'pointermove':'MSPointerMove',this.onContainerPointerMove);fn(doc,hasPointerEvent?'pointerup':'MSPointerUp',this.onDocumentPointerUp);}});wrap(Pointer.prototype,'init',function(proceed,chart,options){proceed.call(this,chart,options);if(this.hasZoom||this.followTouchMove){css(chart.container,{'-ms-touch-action':NONE,'touch-action':NONE});}});wrap(Pointer.prototype,'setDOMEvents',function(proceed){proceed.apply(this);if(this.hasZoom||this.followTouchMove){this.batchMSEvents(addEvent);}});wrap(Pointer.prototype,'destroy',function(proceed){this.batchMSEvents(removeEvent);proceed.call(this);});}\nvar Legend=Highcharts.Legend=function(chart,options){this.init(chart,options);};Legend.prototype={init:function(chart,options){var legend=this,itemStyle=options.itemStyle,padding=pick(options.padding,8),itemMarginTop=options.itemMarginTop||0;this.options=options;if(!options.enabled){return;}\nlegend.itemStyle=itemStyle;legend.itemHiddenStyle=merge(itemStyle,options.itemHiddenStyle);legend.itemMarginTop=itemMarginTop;legend.padding=padding;legend.initialItemX=padding;legend.initialItemY=padding-5;legend.maxItemWidth=0;legend.chart=chart;legend.itemHeight=0;legend.lastLineHeight=0;legend.symbolWidth=pick(options.symbolWidth,16);legend.pages=[];legend.render();addEvent(legend.chart,'endResize',function(){legend.positionCheckboxes();});},colorizeItem:function(item,visible){var legend=this,options=legend.options,legendItem=item.legendItem,legendLine=item.legendLine,legendSymbol=item.legendSymbol,hiddenColor=legend.itemHiddenStyle.color,textColor=visible?options.itemStyle.color:hiddenColor,symbolColor=visible?(item.legendColor||item.color||'#CCC'):hiddenColor,markerOptions=item.options&&item.options.marker,symbolAttr={fill:symbolColor},key,val;if(legendItem){legendItem.css({fill:textColor,color:textColor});}\nif(legendLine){legendLine.attr({stroke:symbolColor});}\nif(legendSymbol){if(markerOptions&&legendSymbol.isMarker){symbolAttr.stroke=symbolColor;markerOptions=item.convertAttribs(markerOptions);for(key in markerOptions){val=markerOptions[key];if(val!==UNDEFINED){symbolAttr[key]=val;}}}\nlegendSymbol.attr(symbolAttr);}},positionItem:function(item){var legend=this,options=legend.options,symbolPadding=options.symbolPadding,ltr=!options.rtl,legendItemPos=item._legendItemPos,itemX=legendItemPos[0],itemY=legendItemPos[1],checkbox=item.checkbox;if(item.legendGroup){item.legendGroup.translate(ltr?itemX:legend.legendWidth-itemX-2*symbolPadding-4,itemY);}\nif(checkbox){checkbox.x=itemX;checkbox.y=itemY;}},destroyItem:function(item){var checkbox=item.checkbox;each(['legendItem','legendLine','legendSymbol','legendGroup'],function(key){if(item[key]){item[key]=item[key].destroy();}});if(checkbox){discardElement(item.checkbox);}},destroy:function(){var legend=this,legendGroup=legend.group,box=legend.box;if(box){legend.box=box.destroy();}\nif(legendGroup){legend.group=legendGroup.destroy();}},positionCheckboxes:function(scrollOffset){var alignAttr=this.group.alignAttr,translateY,clipHeight=this.clipHeight||this.legendHeight;if(alignAttr){translateY=alignAttr.translateY;each(this.allItems,function(item){var checkbox=item.checkbox,top;if(checkbox){top=(translateY+checkbox.y+(scrollOffset||0)+3);css(checkbox,{left:(alignAttr.translateX+item.checkboxOffset+checkbox.x-20)+PX,top:top+PX,display:top>translateY-6&&top<translateY+clipHeight-6?'':NONE});}});}},renderTitle:function(){var options=this.options,padding=this.padding,titleOptions=options.title,titleHeight=0,bBox;if(titleOptions.text){if(!this.title){this.title=this.chart.renderer.label(titleOptions.text,padding-3,padding-4,null,null,null,null,null,'legend-title').attr({zIndex:1}).css(titleOptions.style).add(this.group);}\nbBox=this.title.getBBox();titleHeight=bBox.height;this.offsetWidth=bBox.width;this.contentGroup.attr({translateY:titleHeight});}\nthis.titleHeight=titleHeight;},renderItem:function(item){var legend=this,chart=legend.chart,renderer=chart.renderer,options=legend.options,horizontal=options.layout==='horizontal',symbolWidth=legend.symbolWidth,symbolPadding=options.symbolPadding,itemStyle=legend.itemStyle,itemHiddenStyle=legend.itemHiddenStyle,padding=legend.padding,itemDistance=horizontal?pick(options.itemDistance,20):0,ltr=!options.rtl,itemHeight,widthOption=options.width,itemMarginBottom=options.itemMarginBottom||0,itemMarginTop=legend.itemMarginTop,initialItemX=legend.initialItemX,bBox,itemWidth,li=item.legendItem,series=item.series&&item.series.drawLegendSymbol?item.series:item,seriesOptions=series.options,showCheckbox=legend.createCheckboxForItem&&seriesOptions&&seriesOptions.showCheckbox,useHTML=options.useHTML;if(!li){item.legendGroup=renderer.g('legend-item').attr({zIndex:1}).add(legend.scrollGroup);item.legendItem=li=renderer.text(options.labelFormat?format(options.labelFormat,item):options.labelFormatter.call(item),ltr?symbolWidth+symbolPadding:-symbolPadding,legend.baseline||0,useHTML).css(merge(item.visible?itemStyle:itemHiddenStyle)).attr({align:ltr?'left':'right',zIndex:2}).add(item.legendGroup);if(!legend.baseline){legend.baseline=renderer.fontMetrics(itemStyle.fontSize,li).f+3+itemMarginTop;li.attr('y',legend.baseline);}\nseries.drawLegendSymbol(legend,item);if(legend.setItemEvents){legend.setItemEvents(item,li,useHTML,itemStyle,itemHiddenStyle);}\nlegend.colorizeItem(item,item.visible);if(showCheckbox){legend.createCheckboxForItem(item);}}\nbBox=li.getBBox();itemWidth=item.checkboxOffset=options.itemWidth||item.legendItemWidth||symbolWidth+symbolPadding+bBox.width+itemDistance+(showCheckbox?20:0);legend.itemHeight=itemHeight=mathRound(item.legendItemHeight||bBox.height);if(horizontal&&legend.itemX-initialItemX+itemWidth>(widthOption||(chart.chartWidth-2*padding-initialItemX-options.x))){legend.itemX=initialItemX;legend.itemY+=itemMarginTop+legend.lastLineHeight+itemMarginBottom;legend.lastLineHeight=0;}\nlegend.maxItemWidth=mathMax(legend.maxItemWidth,itemWidth);legend.lastItemY=itemMarginTop+legend.itemY+itemMarginBottom;legend.lastLineHeight=mathMax(itemHeight,legend.lastLineHeight);item._legendItemPos=[legend.itemX,legend.itemY];if(horizontal){legend.itemX+=itemWidth;}else{legend.itemY+=itemMarginTop+itemHeight+itemMarginBottom;legend.lastLineHeight=itemHeight;}\nlegend.offsetWidth=widthOption||mathMax((horizontal?legend.itemX-initialItemX-itemDistance:itemWidth)+padding,legend.offsetWidth);},getAllItems:function(){var allItems=[];each(this.chart.series,function(series){var seriesOptions=series.options;if(!pick(seriesOptions.showInLegend,!defined(seriesOptions.linkedTo)?UNDEFINED:false,true)){return;}\nallItems=allItems.concat(series.legendItems||(seriesOptions.legendType==='point'?series.data:series));});return allItems;},render:function(){var legend=this,chart=legend.chart,renderer=chart.renderer,legendGroup=legend.group,allItems,display,legendWidth,legendHeight,box=legend.box,options=legend.options,padding=legend.padding,legendBorderWidth=options.borderWidth,legendBackgroundColor=options.backgroundColor;legend.itemX=legend.initialItemX;legend.itemY=legend.initialItemY;legend.offsetWidth=0;legend.lastItemY=0;if(!legendGroup){legend.group=legendGroup=renderer.g('legend').attr({zIndex:7}).add();legend.contentGroup=renderer.g().attr({zIndex:1}).add(legendGroup);legend.scrollGroup=renderer.g().add(legend.contentGroup);}\nlegend.renderTitle();allItems=legend.getAllItems();stableSort(allItems,function(a,b){return((a.options&&a.options.legendIndex)||0)-((b.options&&b.options.legendIndex)||0);});if(options.reversed){allItems.reverse();}\nlegend.allItems=allItems;legend.display=display=!!allItems.length;each(allItems,function(item){legend.renderItem(item);});legendWidth=options.width||legend.offsetWidth;legendHeight=legend.lastItemY+legend.lastLineHeight+legend.titleHeight;legendHeight=legend.handleOverflow(legendHeight);if(legendBorderWidth||legendBackgroundColor){legendWidth+=padding;legendHeight+=padding;if(!box){legend.box=box=renderer.rect(0,0,legendWidth,legendHeight,options.borderRadius,legendBorderWidth||0).attr({stroke:options.borderColor,'stroke-width':legendBorderWidth||0,fill:legendBackgroundColor||NONE}).add(legendGroup).shadow(options.shadow);box.isNew=true;}else if(legendWidth>0&&legendHeight>0){box[box.isNew?'attr':'animate'](box.crisp({width:legendWidth,height:legendHeight}));box.isNew=false;}\nbox[display?'show':'hide']();}\nlegend.legendWidth=legendWidth;legend.legendHeight=legendHeight;each(allItems,function(item){legend.positionItem(item);});if(display){legendGroup.align(extend({width:legendWidth,height:legendHeight},options),true,'spacingBox');}\nif(!chart.isResizing){this.positionCheckboxes();}},handleOverflow:function(legendHeight){var legend=this,chart=this.chart,renderer=chart.renderer,options=this.options,optionsY=options.y,alignTop=options.verticalAlign==='top',spaceHeight=chart.spacingBox.height+(alignTop?-optionsY:optionsY)-this.padding,maxHeight=options.maxHeight,clipHeight,clipRect=this.clipRect,navOptions=options.navigation,animation=pick(navOptions.animation,true),arrowSize=navOptions.arrowSize||12,nav=this.nav,pages=this.pages,lastY,allItems=this.allItems;if(options.layout==='horizontal'){spaceHeight/=2;}\nif(maxHeight){spaceHeight=mathMin(spaceHeight,maxHeight);}\npages.length=0;if(legendHeight>spaceHeight&&!options.useHTML){this.clipHeight=clipHeight=mathMax(spaceHeight-20-this.titleHeight-this.padding,0);this.currentPage=pick(this.currentPage,1);this.fullHeight=legendHeight;each(allItems,function(item,i){var y=item._legendItemPos[1],h=mathRound(item.legendItem.getBBox().height),len=pages.length;if(!len||(y-pages[len-1]>clipHeight&&(lastY||y)!==pages[len-1])){pages.push(lastY||y);len++;}\nif(i===allItems.length-1&&y+h-pages[len-1]>clipHeight){pages.push(y);}\nif(y!==lastY){lastY=y;}});if(!clipRect){clipRect=legend.clipRect=renderer.clipRect(0,this.padding,9999,0);legend.contentGroup.clip(clipRect);}\nclipRect.attr({height:clipHeight});if(!nav){this.nav=nav=renderer.g().attr({zIndex:1}).add(this.group);this.up=renderer.symbol('triangle',0,0,arrowSize,arrowSize).on('click',function(){legend.scroll(-1,animation);}).add(nav);this.pager=renderer.text('',15,10).css(navOptions.style).add(nav);this.down=renderer.symbol('triangle-down',0,0,arrowSize,arrowSize).on('click',function(){legend.scroll(1,animation);}).add(nav);}\nlegend.scroll(0);legendHeight=spaceHeight;}else if(nav){clipRect.attr({height:chart.chartHeight});nav.hide();this.scrollGroup.attr({translateY:1});this.clipHeight=0;}\nreturn legendHeight;},scroll:function(scrollBy,animation){var pages=this.pages,pageCount=pages.length,currentPage=this.currentPage+scrollBy,clipHeight=this.clipHeight,navOptions=this.options.navigation,activeColor=navOptions.activeColor,inactiveColor=navOptions.inactiveColor,pager=this.pager,padding=this.padding,scrollOffset;if(currentPage>pageCount){currentPage=pageCount;}\nif(currentPage>0){if(animation!==UNDEFINED){setAnimation(animation,this.chart);}\nthis.nav.attr({translateX:padding,translateY:clipHeight+this.padding+7+this.titleHeight,visibility:VISIBLE});this.up.attr({fill:currentPage===1?inactiveColor:activeColor}).css({cursor:currentPage===1?'default':'pointer'});pager.attr({text:currentPage+'/'+pageCount});this.down.attr({x:18+this.pager.getBBox().width,fill:currentPage===pageCount?inactiveColor:activeColor}).css({cursor:currentPage===pageCount?'default':'pointer'});scrollOffset=-pages[currentPage-1]+this.initialItemY;this.scrollGroup.animate({translateY:scrollOffset});this.currentPage=currentPage;this.positionCheckboxes(scrollOffset);}}};var LegendSymbolMixin=Highcharts.LegendSymbolMixin={drawRectangle:function(legend,item){var symbolHeight=legend.options.symbolHeight||12;item.legendSymbol=this.chart.renderer.rect(0,legend.baseline-5-(symbolHeight/2),legend.symbolWidth,symbolHeight,legend.options.symbolRadius||0).attr({zIndex:3}).add(item.legendGroup);},drawLineMarker:function(legend){var options=this.options,markerOptions=options.marker,radius,legendOptions=legend.options,legendSymbol,symbolWidth=legend.symbolWidth,renderer=this.chart.renderer,legendItemGroup=this.legendGroup,verticalCenter=legend.baseline-mathRound(renderer.fontMetrics(legendOptions.itemStyle.fontSize,this.legendItem).b*0.3),attr;if(options.lineWidth){attr={'stroke-width':options.lineWidth};if(options.dashStyle){attr.dashstyle=options.dashStyle;}\nthis.legendLine=renderer.path([M,0,verticalCenter,L,symbolWidth,verticalCenter]).attr(attr).add(legendItemGroup);}\nif(markerOptions&&markerOptions.enabled!==false){radius=markerOptions.radius;this.legendSymbol=legendSymbol=renderer.symbol(this.symbol,(symbolWidth/2)-radius,verticalCenter-radius,2*radius,2*radius).add(legendItemGroup);legendSymbol.isMarker=true;}}};if(/Trident\\/7\\.0/.test(userAgent)||isFirefox){wrap(Legend.prototype,'positionItem',function(proceed,item){var legend=this,runPositionItem=function(){if(item._legendItemPos){proceed.call(legend,item);}};runPositionItem();setTimeout(runPositionItem);});}\nfunction Chart(){this.init.apply(this,arguments);}\nChart.prototype={init:function(userOptions,callback){var options,seriesOptions=userOptions.series;userOptions.series=null;options=merge(defaultOptions,userOptions);options.series=userOptions.series=seriesOptions;this.userOptions=userOptions;var optionsChart=options.chart;this.margin=this.splashArray('margin',optionsChart);this.spacing=this.splashArray('spacing',optionsChart);var chartEvents=optionsChart.events;this.bounds={h:{},v:{}};this.callback=callback;this.isResizing=0;this.options=options;this.axes=[];this.series=[];this.hasCartesianSeries=optionsChart.showAxes;var chart=this,eventType;chart.index=charts.length;charts.push(chart);chartCount++;if(optionsChart.reflow!==false){addEvent(chart,'load',function(){chart.initReflow();});}\nif(chartEvents){for(eventType in chartEvents){addEvent(chart,eventType,chartEvents[eventType]);}}\nchart.xAxis=[];chart.yAxis=[];chart.animation=useCanVG?false:pick(optionsChart.animation,true);chart.pointCount=chart.colorCounter=chart.symbolCounter=0;chart.firstRender();},initSeries:function(options){var chart=this,optionsChart=chart.options.chart,type=options.type||optionsChart.type||optionsChart.defaultSeriesType,series,constr=seriesTypes[type];if(!constr){error(17,true);}\nseries=new constr();series.init(this,options);return series;},isInsidePlot:function(plotX,plotY,inverted){var x=inverted?plotY:plotX,y=inverted?plotX:plotY;return x>=0&&x<=this.plotWidth&&y>=0&&y<=this.plotHeight;},adjustTickAmounts:function(){if(this.options.chart.alignTicks!==false){each(this.axes,function(axis){axis.adjustTickAmount();});}\nthis.maxTicks=null;},redraw:function(animation){var chart=this,axes=chart.axes,series=chart.series,pointer=chart.pointer,legend=chart.legend,redrawLegend=chart.isDirtyLegend,hasStackedSeries,hasDirtyStacks,hasCartesianSeries=chart.hasCartesianSeries,isDirtyBox=chart.isDirtyBox,seriesLength=series.length,i=seriesLength,serie,renderer=chart.renderer,isHiddenChart=renderer.isHidden(),afterRedraw=[];setAnimation(animation,chart);if(isHiddenChart){chart.cloneRenderTo();}\nchart.layOutTitles();while(i--){serie=series[i];if(serie.options.stacking){hasStackedSeries=true;if(serie.isDirty){hasDirtyStacks=true;break;}}}\nif(hasDirtyStacks){i=seriesLength;while(i--){serie=series[i];if(serie.options.stacking){serie.isDirty=true;}}}\neach(series,function(serie){if(serie.isDirty){if(serie.options.legendType==='point'){redrawLegend=true;}}});if(redrawLegend&&legend.options.enabled){legend.render();chart.isDirtyLegend=false;}\nif(hasStackedSeries){chart.getStacks();}\nif(hasCartesianSeries){if(!chart.isResizing){chart.maxTicks=null;each(axes,function(axis){axis.setScale();});}\nchart.adjustTickAmounts();}\nchart.getMargins();if(hasCartesianSeries){each(axes,function(axis){if(axis.isDirty){isDirtyBox=true;}});each(axes,function(axis){if(axis.isDirtyExtremes){axis.isDirtyExtremes=false;afterRedraw.push(function(){fireEvent(axis,'afterSetExtremes',extend(axis.eventArgs,axis.getExtremes()));delete axis.eventArgs;});}\nif(isDirtyBox||hasStackedSeries){axis.redraw();}});}\nif(isDirtyBox){chart.drawChartBox();}\neach(series,function(serie){if(serie.isDirty&&serie.visible&&(!serie.isCartesian||serie.xAxis)){serie.redraw();}});if(pointer){pointer.reset(true);}\nrenderer.draw();fireEvent(chart,'redraw');if(isHiddenChart){chart.cloneRenderTo(true);}\neach(afterRedraw,function(callback){callback.call();});},get:function(id){var chart=this,axes=chart.axes,series=chart.series;var i,j,points;for(i=0;i<axes.length;i++){if(axes[i].options.id===id){return axes[i];}}\nfor(i=0;i<series.length;i++){if(series[i].options.id===id){return series[i];}}\nfor(i=0;i<series.length;i++){points=series[i].points||[];for(j=0;j<points.length;j++){if(points[j].id===id){return points[j];}}}\nreturn null;},getAxes:function(){var chart=this,options=this.options,xAxisOptions=options.xAxis=splat(options.xAxis||{}),yAxisOptions=options.yAxis=splat(options.yAxis||{}),optionsArray,axis;each(xAxisOptions,function(axis,i){axis.index=i;axis.isX=true;});each(yAxisOptions,function(axis,i){axis.index=i;});optionsArray=xAxisOptions.concat(yAxisOptions);each(optionsArray,function(axisOptions){axis=new Axis(chart,axisOptions);});chart.adjustTickAmounts();},getSelectedPoints:function(){var points=[];each(this.series,function(serie){points=points.concat(grep(serie.points||[],function(point){return point.selected;}));});return points;},getSelectedSeries:function(){return grep(this.series,function(serie){return serie.selected;});},getStacks:function(){var chart=this;each(chart.yAxis,function(axis){if(axis.stacks&&axis.hasVisibleSeries){axis.oldStacks=axis.stacks;}});each(chart.series,function(series){if(series.options.stacking&&(series.visible===true||chart.options.chart.ignoreHiddenSeries===false)){series.stackKey=series.type+pick(series.options.stack,'');}});},setTitle:function(titleOptions,subtitleOptions,redraw){var chart=this,options=chart.options,chartTitleOptions,chartSubtitleOptions;chartTitleOptions=options.title=merge(options.title,titleOptions);chartSubtitleOptions=options.subtitle=merge(options.subtitle,subtitleOptions);each([['title',titleOptions,chartTitleOptions],['subtitle',subtitleOptions,chartSubtitleOptions]],function(arr){var name=arr[0],title=chart[name],titleOptions=arr[1],chartTitleOptions=arr[2];if(title&&titleOptions){chart[name]=title=title.destroy();}\nif(chartTitleOptions&&chartTitleOptions.text&&!title){chart[name]=chart.renderer.text(chartTitleOptions.text,0,0,chartTitleOptions.useHTML).attr({align:chartTitleOptions.align,'class':PREFIX+name,zIndex:chartTitleOptions.zIndex||4}).css(chartTitleOptions.style).add();}});chart.layOutTitles(redraw);},layOutTitles:function(redraw){var titleOffset=0,title=this.title,subtitle=this.subtitle,options=this.options,titleOptions=options.title,subtitleOptions=options.subtitle,requiresDirtyBox,renderer=this.renderer,autoWidth=this.spacingBox.width-44;if(title){title.css({width:(titleOptions.width||autoWidth)+PX}).align(extend({y:renderer.fontMetrics(titleOptions.style.fontSize,title).b-3},titleOptions),false,'spacingBox');if(!titleOptions.floating&&!titleOptions.verticalAlign){titleOffset=title.getBBox().height;}}\nif(subtitle){subtitle.css({width:(subtitleOptions.width||autoWidth)+PX}).align(extend({y:titleOffset+(titleOptions.margin-13)+renderer.fontMetrics(titleOptions.style.fontSize,subtitle).b},subtitleOptions),false,'spacingBox');if(!subtitleOptions.floating&&!subtitleOptions.verticalAlign){titleOffset=mathCeil(titleOffset+subtitle.getBBox().height);}}\nrequiresDirtyBox=this.titleOffset!==titleOffset;this.titleOffset=titleOffset;if(!this.isDirtyBox&&requiresDirtyBox){this.isDirtyBox=requiresDirtyBox;if(this.hasRendered&&pick(redraw,true)&&this.isDirtyBox){this.redraw();}}},getChartSize:function(){var chart=this,optionsChart=chart.options.chart,widthOption=optionsChart.width,heightOption=optionsChart.height,renderTo=chart.renderToClone||chart.renderTo;if(!defined(widthOption)){chart.containerWidth=adapterRun(renderTo,'width');}\nif(!defined(heightOption)){chart.containerHeight=adapterRun(renderTo,'height');}\nchart.chartWidth=mathMax(0,widthOption||chart.containerWidth||600);chart.chartHeight=mathMax(0,pick(heightOption,chart.containerHeight>19?chart.containerHeight:400));},cloneRenderTo:function(revert){var clone=this.renderToClone,container=this.container;if(revert){if(clone){this.renderTo.appendChild(container);discardElement(clone);delete this.renderToClone;}}else{if(container&&container.parentNode===this.renderTo){this.renderTo.removeChild(container);}\nthis.renderToClone=clone=this.renderTo.cloneNode(0);css(clone,{position:ABSOLUTE,top:'-9999px',display:'block'});if(clone.style.setProperty){clone.style.setProperty('display','block','important');}\ndoc.body.appendChild(clone);if(container){clone.appendChild(container);}}},getContainer:function(){var chart=this,container,optionsChart=chart.options.chart,chartWidth,chartHeight,renderTo,indexAttrName='data-highcharts-chart',oldChartIndex,containerId;chart.renderTo=renderTo=optionsChart.renderTo;containerId=PREFIX+idCounter++;if(isString(renderTo)){chart.renderTo=renderTo=doc.getElementById(renderTo);}\nif(!renderTo){error(13,true);}\noldChartIndex=pInt(attr(renderTo,indexAttrName));if(!isNaN(oldChartIndex)&&charts[oldChartIndex]&&charts[oldChartIndex].hasRendered){charts[oldChartIndex].destroy();}\nattr(renderTo,indexAttrName,chart.index);renderTo.innerHTML='';if(!optionsChart.skipClone&&!renderTo.offsetWidth){chart.cloneRenderTo();}\nchart.getChartSize();chartWidth=chart.chartWidth;chartHeight=chart.chartHeight;chart.container=container=createElement(DIV,{className:PREFIX+'container'+\n(optionsChart.className?' '+optionsChart.className:''),id:containerId},extend({position:RELATIVE,overflow:HIDDEN,width:chartWidth+PX,height:chartHeight+PX,textAlign:'left',lineHeight:'normal',zIndex:0,'-webkit-tap-highlight-color':'rgba(0,0,0,0)'},optionsChart.style),chart.renderToClone||renderTo);chart._cursor=container.style.cursor;chart.renderer=optionsChart.forExport?new SVGRenderer(container,chartWidth,chartHeight,optionsChart.style,true):new Renderer(container,chartWidth,chartHeight,optionsChart.style);if(useCanVG){chart.renderer.create(chart,container,chartWidth,chartHeight);}},getMargins:function(){var chart=this,spacing=chart.spacing,axisOffset,legend=chart.legend,margin=chart.margin,legendOptions=chart.options.legend,legendMargin=pick(legendOptions.margin,20),legendX=legendOptions.x,legendY=legendOptions.y,align=legendOptions.align,verticalAlign=legendOptions.verticalAlign,titleOffset=chart.titleOffset;chart.resetMargins();axisOffset=chart.axisOffset;if(titleOffset&&!defined(margin[0])){chart.plotTop=mathMax(chart.plotTop,titleOffset+chart.options.title.margin+spacing[0]);}\nif(legend.display&&!legendOptions.floating){if(align==='right'){if(!defined(margin[1])){chart.marginRight=mathMax(chart.marginRight,legend.legendWidth-legendX+legendMargin+spacing[1]);}}else if(align==='left'){if(!defined(margin[3])){chart.plotLeft=mathMax(chart.plotLeft,legend.legendWidth+legendX+legendMargin+spacing[3]);}}else if(verticalAlign==='top'){if(!defined(margin[0])){chart.plotTop=mathMax(chart.plotTop,legend.legendHeight+legendY+legendMargin+spacing[0]);}}else if(verticalAlign==='bottom'){if(!defined(margin[2])){chart.marginBottom=mathMax(chart.marginBottom,legend.legendHeight-legendY+legendMargin+spacing[2]);}}}\nif(chart.extraBottomMargin){chart.marginBottom+=chart.extraBottomMargin;}\nif(chart.extraTopMargin){chart.plotTop+=chart.extraTopMargin;}\nif(chart.hasCartesianSeries){each(chart.axes,function(axis){axis.getOffset();});}\nif(!defined(margin[3])){chart.plotLeft+=axisOffset[3];}\nif(!defined(margin[0])){chart.plotTop+=axisOffset[0];}\nif(!defined(margin[2])){chart.marginBottom+=axisOffset[2];}\nif(!defined(margin[1])){chart.marginRight+=axisOffset[1];}\nchart.setChartSize();},reflow:function(e){var chart=this,optionsChart=chart.options.chart,renderTo=chart.renderTo,width=optionsChart.width||adapterRun(renderTo,'width'),height=optionsChart.height||adapterRun(renderTo,'height'),target=e?e.target:win,doReflow=function(){if(chart.container){chart.setSize(width,height,false);chart.hasUserSize=null;}};if(!chart.hasUserSize&&width&&height&&(target===win||target===doc)){if(width!==chart.containerWidth||height!==chart.containerHeight){clearTimeout(chart.reflowTimeout);if(e){chart.reflowTimeout=setTimeout(doReflow,100);}else{doReflow();}}\nchart.containerWidth=width;chart.containerHeight=height;}},initReflow:function(){var chart=this,reflow=function(e){chart.reflow(e);};addEvent(win,'resize',reflow);addEvent(chart,'destroy',function(){removeEvent(win,'resize',reflow);});},setSize:function(width,height,animation){var chart=this,chartWidth,chartHeight,fireEndResize;chart.isResizing+=1;fireEndResize=function(){if(chart){fireEvent(chart,'endResize',null,function(){chart.isResizing-=1;});}};setAnimation(animation,chart);chart.oldChartHeight=chart.chartHeight;chart.oldChartWidth=chart.chartWidth;if(defined(width)){chart.chartWidth=chartWidth=mathMax(0,mathRound(width));chart.hasUserSize=!!chartWidth;}\nif(defined(height)){chart.chartHeight=chartHeight=mathMax(0,mathRound(height));}\n(globalAnimation?animate:css)(chart.container,{width:chartWidth+PX,height:chartHeight+PX},globalAnimation);chart.setChartSize(true);chart.renderer.setSize(chartWidth,chartHeight,animation);chart.maxTicks=null;each(chart.axes,function(axis){axis.isDirty=true;axis.setScale();});each(chart.series,function(serie){serie.isDirty=true;});chart.isDirtyLegend=true;chart.isDirtyBox=true;chart.layOutTitles();chart.getMargins();chart.redraw(animation);chart.oldChartHeight=null;fireEvent(chart,'resize');if(globalAnimation===false){fireEndResize();}else{setTimeout(fireEndResize,(globalAnimation&&globalAnimation.duration)||500);}},setChartSize:function(skipAxes){var chart=this,inverted=chart.inverted,renderer=chart.renderer,chartWidth=chart.chartWidth,chartHeight=chart.chartHeight,optionsChart=chart.options.chart,spacing=chart.spacing,clipOffset=chart.clipOffset,clipX,clipY,plotLeft,plotTop,plotWidth,plotHeight,plotBorderWidth;chart.plotLeft=plotLeft=mathRound(chart.plotLeft);chart.plotTop=plotTop=mathRound(chart.plotTop);chart.plotWidth=plotWidth=mathMax(0,mathRound(chartWidth-plotLeft-chart.marginRight));chart.plotHeight=plotHeight=mathMax(0,mathRound(chartHeight-plotTop-chart.marginBottom));chart.plotSizeX=inverted?plotHeight:plotWidth;chart.plotSizeY=inverted?plotWidth:plotHeight;chart.plotBorderWidth=optionsChart.plotBorderWidth||0;chart.spacingBox=renderer.spacingBox={x:spacing[3],y:spacing[0],width:chartWidth-spacing[3]-spacing[1],height:chartHeight-spacing[0]-spacing[2]};chart.plotBox=renderer.plotBox={x:plotLeft,y:plotTop,width:plotWidth,height:plotHeight};plotBorderWidth=2*mathFloor(chart.plotBorderWidth/2);clipX=mathCeil(mathMax(plotBorderWidth,clipOffset[3])/2);clipY=mathCeil(mathMax(plotBorderWidth,clipOffset[0])/2);chart.clipBox={x:clipX,y:clipY,width:mathFloor(chart.plotSizeX-mathMax(plotBorderWidth,clipOffset[1])/2-clipX),height:mathMax(0,mathFloor(chart.plotSizeY-mathMax(plotBorderWidth,clipOffset[2])/2-clipY))};if(!skipAxes){each(chart.axes,function(axis){axis.setAxisSize();axis.setAxisTranslation();});}},resetMargins:function(){var chart=this,spacing=chart.spacing,margin=chart.margin;chart.plotTop=pick(margin[0],spacing[0]);chart.marginRight=pick(margin[1],spacing[1]);chart.marginBottom=pick(margin[2],spacing[2]);chart.plotLeft=pick(margin[3],spacing[3]);chart.axisOffset=[0,0,0,0];chart.clipOffset=[0,0,0,0];},drawChartBox:function(){var chart=this,optionsChart=chart.options.chart,renderer=chart.renderer,chartWidth=chart.chartWidth,chartHeight=chart.chartHeight,chartBackground=chart.chartBackground,plotBackground=chart.plotBackground,plotBorder=chart.plotBorder,plotBGImage=chart.plotBGImage,chartBorderWidth=optionsChart.borderWidth||0,chartBackgroundColor=optionsChart.backgroundColor,plotBackgroundColor=optionsChart.plotBackgroundColor,plotBackgroundImage=optionsChart.plotBackgroundImage,plotBorderWidth=optionsChart.plotBorderWidth||0,mgn,bgAttr,plotLeft=chart.plotLeft,plotTop=chart.plotTop,plotWidth=chart.plotWidth,plotHeight=chart.plotHeight,plotBox=chart.plotBox,clipRect=chart.clipRect,clipBox=chart.clipBox;mgn=chartBorderWidth+(optionsChart.shadow?8:0);if(chartBorderWidth||chartBackgroundColor){if(!chartBackground){bgAttr={fill:chartBackgroundColor||NONE};if(chartBorderWidth){bgAttr.stroke=optionsChart.borderColor;bgAttr['stroke-width']=chartBorderWidth;}\nchart.chartBackground=renderer.rect(mgn/2,mgn/2,chartWidth-mgn,chartHeight-mgn,optionsChart.borderRadius,chartBorderWidth).attr(bgAttr).addClass(PREFIX+'background').add().shadow(optionsChart.shadow);}else{chartBackground.animate(chartBackground.crisp({width:chartWidth-mgn,height:chartHeight-mgn}));}}\nif(plotBackgroundColor){if(!plotBackground){chart.plotBackground=renderer.rect(plotLeft,plotTop,plotWidth,plotHeight,0).attr({fill:plotBackgroundColor}).add().shadow(optionsChart.plotShadow);}else{plotBackground.animate(plotBox);}}\nif(plotBackgroundImage){if(!plotBGImage){chart.plotBGImage=renderer.image(plotBackgroundImage,plotLeft,plotTop,plotWidth,plotHeight).add();}else{plotBGImage.animate(plotBox);}}\nif(!clipRect){chart.clipRect=renderer.clipRect(clipBox);}else{clipRect.animate({width:clipBox.width,height:clipBox.height});}\nif(plotBorderWidth){if(!plotBorder){chart.plotBorder=renderer.rect(plotLeft,plotTop,plotWidth,plotHeight,0,-plotBorderWidth).attr({stroke:optionsChart.plotBorderColor,'stroke-width':plotBorderWidth,fill:NONE,zIndex:1}).add();}else{plotBorder.animate(plotBorder.crisp({x:plotLeft,y:plotTop,width:plotWidth,height:plotHeight}));}}\nchart.isDirtyBox=false;},propFromSeries:function(){var chart=this,optionsChart=chart.options.chart,klass,seriesOptions=chart.options.series,i,value;each(['inverted','angular','polar'],function(key){klass=seriesTypes[optionsChart.type||optionsChart.defaultSeriesType];value=(chart[key]||optionsChart[key]||(klass&&klass.prototype[key]));i=seriesOptions&&seriesOptions.length;while(!value&&i--){klass=seriesTypes[seriesOptions[i].type];if(klass&&klass.prototype[key]){value=true;}}\nchart[key]=value;});},linkSeries:function(){var chart=this,chartSeries=chart.series;each(chartSeries,function(series){series.linkedSeries.length=0;});each(chartSeries,function(series){var linkedTo=series.options.linkedTo;if(isString(linkedTo)){if(linkedTo===':previous'){linkedTo=chart.series[series.index-1];}else{linkedTo=chart.get(linkedTo);}\nif(linkedTo){linkedTo.linkedSeries.push(series);series.linkedParent=linkedTo;}}});},renderSeries:function(){each(this.series,function(serie){serie.translate();if(serie.setTooltipPoints){serie.setTooltipPoints();}\nserie.render();});},renderLabels:function(){var chart=this,labels=chart.options.labels;if(labels.items){each(labels.items,function(label){var style=extend(labels.style,label.style),x=pInt(style.left)+chart.plotLeft,y=pInt(style.top)+chart.plotTop+12;delete style.left;delete style.top;chart.renderer.text(label.html,x,y).attr({zIndex:2}).css(style).add();});}},render:function(){var chart=this,axes=chart.axes,renderer=chart.renderer,options=chart.options;chart.setTitle();chart.legend=new Legend(chart,options.legend);chart.getStacks();each(axes,function(axis){axis.setScale();});chart.getMargins();chart.maxTicks=null;each(axes,function(axis){axis.setTickPositions(true);axis.setMaxTicks();});chart.adjustTickAmounts();chart.getMargins();chart.drawChartBox();if(chart.hasCartesianSeries){each(axes,function(axis){axis.render();});}\nif(!chart.seriesGroup){chart.seriesGroup=renderer.g('series-group').attr({zIndex:3}).add();}\nchart.renderSeries();chart.renderLabels();chart.showCredits(options.credits);chart.hasRendered=true;},showCredits:function(credits){if(credits.enabled&&!this.credits){this.credits=this.renderer.text(credits.text,0,0).on('click',function(){if(credits.href){location.href=credits.href;}}).attr({align:credits.position.align,zIndex:8}).css(credits.style).add().align(credits.position);}},destroy:function(){var chart=this,axes=chart.axes,series=chart.series,container=chart.container,i,parentNode=container&&container.parentNode;fireEvent(chart,'destroy');charts[chart.index]=UNDEFINED;chartCount--;chart.renderTo.removeAttribute('data-highcharts-chart');removeEvent(chart);i=axes.length;while(i--){axes[i]=axes[i].destroy();}\ni=series.length;while(i--){series[i]=series[i].destroy();}\neach(['title','subtitle','chartBackground','plotBackground','plotBGImage','plotBorder','seriesGroup','clipRect','credits','pointer','scroller','rangeSelector','legend','resetZoomButton','tooltip','renderer'],function(name){var prop=chart[name];if(prop&&prop.destroy){chart[name]=prop.destroy();}});if(container){container.innerHTML='';removeEvent(container);if(parentNode){discardElement(container);}}\nfor(i in chart){delete chart[i];}},isReadyToRender:function(){var chart=this;if((!hasSVG&&(win==win.top&&doc.readyState!=='complete'))||(useCanVG&&!win.canvg)){if(useCanVG){CanVGController.push(function(){chart.firstRender();},chart.options.global.canvasToolsURL);}else{doc.attachEvent('onreadystatechange',function(){doc.detachEvent('onreadystatechange',chart.firstRender);if(doc.readyState==='complete'){chart.firstRender();}});}\nreturn false;}\nreturn true;},firstRender:function(){var chart=this,options=chart.options,callback=chart.callback;if(!chart.isReadyToRender()){return;}\nchart.getContainer();fireEvent(chart,'init');chart.resetMargins();chart.setChartSize();chart.propFromSeries();chart.getAxes();each(options.series||[],function(serieOptions){chart.initSeries(serieOptions);});chart.linkSeries();fireEvent(chart,'beforeRender');if(Highcharts.Pointer){chart.pointer=new Pointer(chart,options);}\nchart.render();chart.renderer.draw();if(callback){callback.apply(chart,[chart]);}\neach(chart.callbacks,function(fn){fn.apply(chart,[chart]);});chart.cloneRenderTo(true);fireEvent(chart,'load');},splashArray:function(target,options){var oVar=options[target],tArray=isObject(oVar)?oVar:[oVar,oVar,oVar,oVar];return[pick(options[target+'Top'],tArray[0]),pick(options[target+'Right'],tArray[1]),pick(options[target+'Bottom'],tArray[2]),pick(options[target+'Left'],tArray[3])];}};Chart.prototype.callbacks=[];var CenteredSeriesMixin=Highcharts.CenteredSeriesMixin={getCenter:function(){var options=this.options,chart=this.chart,slicingRoom=2*(options.slicedOffset||0),handleSlicingRoom,plotWidth=chart.plotWidth-2*slicingRoom,plotHeight=chart.plotHeight-2*slicingRoom,centerOption=options.center,positions=[pick(centerOption[0],'50%'),pick(centerOption[1],'50%'),options.size||'100%',options.innerSize||0],smallestSize=mathMin(plotWidth,plotHeight),isPercent;return map(positions,function(length,i){isPercent=/%$/.test(length);handleSlicingRoom=i<2||(i===2&&isPercent);return(isPercent?[plotWidth,plotHeight,smallestSize,smallestSize][i]*pInt(length)/100:length)+(handleSlicingRoom?slicingRoom:0);});}};var Point=function(){};Point.prototype={init:function(series,options,x){var point=this,colors;point.series=series;point.applyOptions(options,x);point.pointAttr={};if(series.options.colorByPoint){colors=series.options.colors||series.chart.options.colors;point.color=point.color||colors[series.colorCounter++];if(series.colorCounter===colors.length){series.colorCounter=0;}}\nseries.chart.pointCount++;return point;},applyOptions:function(options,x){var point=this,series=point.series,pointValKey=series.options.pointValKey||series.pointValKey;options=Point.prototype.optionsToObject.call(this,options);extend(point,options);point.options=point.options?extend(point.options,options):options;if(pointValKey){point.y=point[pointValKey];}\nif(point.x===UNDEFINED&&series){point.x=x===UNDEFINED?series.autoIncrement():x;}\nreturn point;},optionsToObject:function(options){var ret={},series=this.series,pointArrayMap=series.pointArrayMap||['y'],valueCount=pointArrayMap.length,firstItemType,i=0,j=0;if(typeof options==='number'||options===null){ret[pointArrayMap[0]]=options;}else if(isArray(options)){if(options.length>valueCount){firstItemType=typeof options[0];if(firstItemType==='string'){ret.name=options[0];}else if(firstItemType==='number'){ret.x=options[0];}\ni++;}\nwhile(j<valueCount){ret[pointArrayMap[j++]]=options[i++];}}else if(typeof options==='object'){ret=options;if(options.dataLabels){series._hasPointLabels=true;}\nif(options.marker){series._hasPointMarkers=true;}}\nreturn ret;},destroy:function(){var point=this,series=point.series,chart=series.chart,hoverPoints=chart.hoverPoints,prop;chart.pointCount--;if(hoverPoints){point.setState();erase(hoverPoints,point);if(!hoverPoints.length){chart.hoverPoints=null;}}\nif(point===chart.hoverPoint){point.onMouseOut();}\nif(point.graphic||point.dataLabel){removeEvent(point);point.destroyElements();}\nif(point.legendItem){chart.legend.destroyItem(point);}\nfor(prop in point){point[prop]=null;}},destroyElements:function(){var point=this,props=['graphic','dataLabel','dataLabelUpper','group','connector','shadowGroup'],prop,i=6;while(i--){prop=props[i];if(point[prop]){point[prop]=point[prop].destroy();}}},getLabelConfig:function(){var point=this;return{x:point.category,y:point.y,key:point.name||point.category,series:point.series,point:point,percentage:point.percentage,total:point.total||point.stackTotal};},tooltipFormatter:function(pointFormat){var series=this.series,seriesTooltipOptions=series.tooltipOptions,valueDecimals=pick(seriesTooltipOptions.valueDecimals,''),valuePrefix=seriesTooltipOptions.valuePrefix||'',valueSuffix=seriesTooltipOptions.valueSuffix||'';each(series.pointArrayMap||['y'],function(key){key='{point.'+key;if(valuePrefix||valueSuffix){pointFormat=pointFormat.replace(key+'}',valuePrefix+key+'}'+valueSuffix);}\npointFormat=pointFormat.replace(key+'}',key+':,.'+valueDecimals+'f}');});return format(pointFormat,{point:this,series:this.series});},firePointEvent:function(eventType,eventArgs,defaultFunction){var point=this,series=this.series,seriesOptions=series.options;if(seriesOptions.point.events[eventType]||(point.options&&point.options.events&&point.options.events[eventType])){this.importEvents();}\nif(eventType==='click'&&seriesOptions.allowPointSelect){defaultFunction=function(event){point.select(null,event.ctrlKey||event.metaKey||event.shiftKey);};}\nfireEvent(this,eventType,eventArgs,defaultFunction);}};var Series=function(){};Series.prototype={isCartesian:true,type:'line',pointClass:Point,sorted:true,requireSorting:true,pointAttrToOptions:{stroke:'lineColor','stroke-width':'lineWidth',fill:'fillColor',r:'radius'},axisTypes:['xAxis','yAxis'],colorCounter:0,parallelArrays:['x','y'],init:function(chart,options){var series=this,eventType,events,chartSeries=chart.series,sortByIndex=function(a,b){return pick(a.options.index,a._i)-pick(b.options.index,b._i);};series.chart=chart;series.options=options=series.setOptions(options);series.linkedSeries=[];series.bindAxes();extend(series,{name:options.name,state:NORMAL_STATE,pointAttr:{},visible:options.visible!==false,selected:options.selected===true});if(useCanVG){options.animation=false;}\nevents=options.events;for(eventType in events){addEvent(series,eventType,events[eventType]);}\nif((events&&events.click)||(options.point&&options.point.events&&options.point.events.click)||options.allowPointSelect){chart.runTrackerClick=true;}\nseries.getColor();series.getSymbol();each(series.parallelArrays,function(key){series[key+'Data']=[];});series.setData(options.data,false);if(series.isCartesian){chart.hasCartesianSeries=true;}\nchartSeries.push(series);series._i=chartSeries.length-1;stableSort(chartSeries,sortByIndex);if(this.yAxis){stableSort(this.yAxis.series,sortByIndex);}\neach(chartSeries,function(series,i){series.index=i;series.name=series.name||'Series '+(i+1);});},bindAxes:function(){var series=this,seriesOptions=series.options,chart=series.chart,axisOptions;each(series.axisTypes||[],function(AXIS){each(chart[AXIS],function(axis){axisOptions=axis.options;if((seriesOptions[AXIS]===axisOptions.index)||(seriesOptions[AXIS]!==UNDEFINED&&seriesOptions[AXIS]===axisOptions.id)||(seriesOptions[AXIS]===UNDEFINED&&axisOptions.index===0)){axis.series.push(series);series[AXIS]=axis;axis.isDirty=true;}});if(!series[AXIS]&&series.optionalAxis!==AXIS){error(18,true);}});},updateParallelArrays:function(point,i){var series=point.series,args=arguments,fn=typeof i==='number'?function(key){var val=key==='y'&&series.toYData?series.toYData(point):point[key];series[key+'Data'][i]=val;}:function(key){Array.prototype[i].apply(series[key+'Data'],Array.prototype.slice.call(args,2));};each(series.parallelArrays,fn);},autoIncrement:function(){var series=this,options=series.options,xIncrement=series.xIncrement;xIncrement=pick(xIncrement,options.pointStart,0);series.pointInterval=pick(series.pointInterval,options.pointInterval,1);series.xIncrement=xIncrement+series.pointInterval;return xIncrement;},getSegments:function(){var series=this,lastNull=-1,segments=[],i,points=series.points,pointsLength=points.length;if(pointsLength){if(series.options.connectNulls){i=pointsLength;while(i--){if(points[i].y===null){points.splice(i,1);}}\nif(points.length){segments=[points];}}else{each(points,function(point,i){if(point.y===null){if(i>lastNull+1){segments.push(points.slice(lastNull+1,i));}\nlastNull=i;}else if(i===pointsLength-1){segments.push(points.slice(lastNull+1,i+1));}});}}\nseries.segments=segments;},setOptions:function(itemOptions){var chart=this.chart,chartOptions=chart.options,plotOptions=chartOptions.plotOptions,userOptions=chart.userOptions||{},userPlotOptions=userOptions.plotOptions||{},typeOptions=plotOptions[this.type],options;this.userOptions=itemOptions;options=merge(typeOptions,plotOptions.series,itemOptions);this.tooltipOptions=merge(defaultOptions.tooltip,defaultOptions.plotOptions[this.type].tooltip,userOptions.tooltip,userPlotOptions.series&&userPlotOptions.series.tooltip,userPlotOptions[this.type]&&userPlotOptions[this.type].tooltip,itemOptions.tooltip);if(typeOptions.marker===null){delete options.marker;}\nreturn options;},getCyclic:function(prop,value,defaults){var i,userOptions=this.userOptions,indexName='_'+prop+'Index',counterName=prop+'Counter';if(!value){if(defined(userOptions[indexName])){i=userOptions[indexName];}else{userOptions[indexName]=i=this.chart[counterName]%defaults.length;this.chart[counterName]+=1;}\nvalue=defaults[i];}\nthis[prop]=value;},getColor:function(){if(!this.options.colorByPoint){this.getCyclic('color',this.options.color||defaultPlotOptions[this.type].color,this.chart.options.colors);}},getSymbol:function(){var seriesMarkerOption=this.options.marker;this.getCyclic('symbol',seriesMarkerOption.symbol,this.chart.options.symbols);if(/^url/.test(this.symbol)){seriesMarkerOption.radius=0;}},drawLegendSymbol:LegendSymbolMixin.drawLineMarker,setData:function(data,redraw,animation,updatePoints){var series=this,oldData=series.points,oldDataLength=(oldData&&oldData.length)||0,dataLength,options=series.options,chart=series.chart,firstPoint=null,xAxis=series.xAxis,hasCategories=xAxis&&!!xAxis.categories,tooltipPoints=series.tooltipPoints,i,turboThreshold=options.turboThreshold,pt,xData=this.xData,yData=this.yData,pointArrayMap=series.pointArrayMap,valueCount=pointArrayMap&&pointArrayMap.length;data=data||[];dataLength=data.length;redraw=pick(redraw,true);if(updatePoints!==false&&dataLength&&oldDataLength===dataLength&&!series.cropped&&!series.hasGroupedData){each(data,function(point,i){oldData[i].update(point,false);});}else{series.xIncrement=null;series.pointRange=hasCategories?1:options.pointRange;series.colorCounter=0;each(this.parallelArrays,function(key){series[key+'Data'].length=0;});if(turboThreshold&&dataLength>turboThreshold){i=0;while(firstPoint===null&&i<dataLength){firstPoint=data[i];i++;}\nif(isNumber(firstPoint)){var x=pick(options.pointStart,0),pointInterval=pick(options.pointInterval,1);for(i=0;i<dataLength;i++){xData[i]=x;yData[i]=data[i];x+=pointInterval;}\nseries.xIncrement=x;}else if(isArray(firstPoint)){if(valueCount){for(i=0;i<dataLength;i++){pt=data[i];xData[i]=pt[0];yData[i]=pt.slice(1,valueCount+1);}}else{for(i=0;i<dataLength;i++){pt=data[i];xData[i]=pt[0];yData[i]=pt[1];}}}else{error(12);}}else{for(i=0;i<dataLength;i++){if(data[i]!==UNDEFINED){pt={series:series};series.pointClass.prototype.applyOptions.apply(pt,[data[i]]);series.updateParallelArrays(pt,i);if(hasCategories&&pt.name){xAxis.names[pt.x]=pt.name;}}}}\nif(isString(yData[0])){error(14,true);}\nseries.data=[];series.options.data=data;i=oldDataLength;while(i--){if(oldData[i]&&oldData[i].destroy){oldData[i].destroy();}}\nif(tooltipPoints){tooltipPoints.length=0;}\nif(xAxis){xAxis.minRange=xAxis.userMinRange;}\nseries.isDirty=series.isDirtyData=chart.isDirtyBox=true;animation=false;}\nif(redraw){chart.redraw(animation);}},processData:function(force){var series=this,processedXData=series.xData,processedYData=series.yData,dataLength=processedXData.length,croppedData,cropStart=0,cropped,distance,closestPointRange,xAxis=series.xAxis,i,options=series.options,cropThreshold=options.cropThreshold,activePointCount=0,isCartesian=series.isCartesian,xExtremes,min,max;if(isCartesian&&!series.isDirty&&!xAxis.isDirty&&!series.yAxis.isDirty&&!force){return false;}\nif(isCartesian&&series.sorted&&(!cropThreshold||dataLength>cropThreshold||series.forceCrop)){xExtremes=xAxis.getExtremes();min=xExtremes.min;max=xExtremes.max;if(processedXData[dataLength-1]<min||processedXData[0]>max){processedXData=[];processedYData=[];}else if(processedXData[0]<min||processedXData[dataLength-1]>max){croppedData=this.cropData(series.xData,series.yData,min,max);processedXData=croppedData.xData;processedYData=croppedData.yData;cropStart=croppedData.start;cropped=true;activePointCount=processedXData.length;}}\nfor(i=processedXData.length-1;i>=0;i--){distance=processedXData[i]-processedXData[i-1];if(!cropped&&processedXData[i]>min&&processedXData[i]<max){activePointCount++;}\nif(distance>0&&(closestPointRange===UNDEFINED||distance<closestPointRange)){closestPointRange=distance;}else if(distance<0&&series.requireSorting){error(15);}}\nseries.cropped=cropped;series.cropStart=cropStart;series.processedXData=processedXData;series.processedYData=processedYData;series.activePointCount=activePointCount;if(options.pointRange===null){series.pointRange=closestPointRange||1;}\nseries.closestPointRange=closestPointRange;},cropData:function(xData,yData,min,max){var dataLength=xData.length,cropStart=0,cropEnd=dataLength,cropShoulder=pick(this.cropShoulder,1),i;for(i=0;i<dataLength;i++){if(xData[i]>=min){cropStart=mathMax(0,i-cropShoulder);break;}}\nfor(;i<dataLength;i++){if(xData[i]>max){cropEnd=i+cropShoulder;break;}}\nreturn{xData:xData.slice(cropStart,cropEnd),yData:yData.slice(cropStart,cropEnd),start:cropStart,end:cropEnd};},generatePoints:function(){var series=this,options=series.options,dataOptions=options.data,data=series.data,dataLength,processedXData=series.processedXData,processedYData=series.processedYData,pointClass=series.pointClass,processedDataLength=processedXData.length,cropStart=series.cropStart||0,cursor,hasGroupedData=series.hasGroupedData,point,points=[],i;if(!data&&!hasGroupedData){var arr=[];arr.length=dataOptions.length;data=series.data=arr;}\nfor(i=0;i<processedDataLength;i++){cursor=cropStart+i;if(!hasGroupedData){if(data[cursor]){point=data[cursor];}else if(dataOptions[cursor]!==UNDEFINED){data[cursor]=point=(new pointClass()).init(series,dataOptions[cursor],processedXData[i]);}\npoints[i]=point;}else{points[i]=(new pointClass()).init(series,[processedXData[i]].concat(splat(processedYData[i])));}}\nif(data&&(processedDataLength!==(dataLength=data.length)||hasGroupedData)){for(i=0;i<dataLength;i++){if(i===cropStart&&!hasGroupedData){i+=processedDataLength;}\nif(data[i]){data[i].destroyElements();data[i].plotX=UNDEFINED;}}}\nseries.data=data;series.points=points;},getExtremes:function(yData){var xAxis=this.xAxis,yAxis=this.yAxis,xData=this.processedXData,yDataLength,activeYData=[],activeCounter=0,xExtremes=xAxis.getExtremes(),xMin=xExtremes.min,xMax=xExtremes.max,validValue,withinRange,dataMin,dataMax,x,y,i,j;yData=yData||this.stackedYData||this.processedYData;yDataLength=yData.length;for(i=0;i<yDataLength;i++){x=xData[i];y=yData[i];validValue=y!==null&&y!==UNDEFINED&&(!yAxis.isLog||(y.length||y>0));withinRange=this.getExtremesFromAll||this.cropped||((xData[i+1]||x)>=xMin&&(xData[i-1]||x)<=xMax);if(validValue&&withinRange){j=y.length;if(j){while(j--){if(y[j]!==null){activeYData[activeCounter++]=y[j];}}}else{activeYData[activeCounter++]=y;}}}\nthis.dataMin=pick(dataMin,arrayMin(activeYData));this.dataMax=pick(dataMax,arrayMax(activeYData));},translate:function(){if(!this.processedXData){this.processData();}\nthis.generatePoints();var series=this,options=series.options,stacking=options.stacking,xAxis=series.xAxis,categories=xAxis.categories,yAxis=series.yAxis,points=series.points,dataLength=points.length,hasModifyValue=!!series.modifyValue,i,pointPlacement=options.pointPlacement,dynamicallyPlaced=pointPlacement==='between'||isNumber(pointPlacement),threshold=options.threshold;for(i=0;i<dataLength;i++){var point=points[i],xValue=point.x,yValue=point.y,yBottom=point.low,stack=stacking&&yAxis.stacks[(series.negStacks&&yValue<threshold?'-':'')+series.stackKey],pointStack,stackValues;if(yAxis.isLog&&yValue<=0){point.y=yValue=null;}\npoint.plotX=xAxis.translate(xValue,0,0,0,1,pointPlacement,this.type==='flags');if(stacking&&series.visible&&stack&&stack[xValue]){pointStack=stack[xValue];stackValues=pointStack.points[series.index+','+i];yBottom=stackValues[0];yValue=stackValues[1];if(yBottom===0){yBottom=pick(threshold,yAxis.min);}\nif(yAxis.isLog&&yBottom<=0){yBottom=null;}\npoint.total=point.stackTotal=pointStack.total;point.percentage=pointStack.total&&(point.y/pointStack.total*100);point.stackY=yValue;pointStack.setOffset(series.pointXOffset||0,series.barW||0);}\npoint.yBottom=defined(yBottom)?yAxis.translate(yBottom,0,1,0,1):null;if(hasModifyValue){yValue=series.modifyValue(yValue,point);}\npoint.plotY=(typeof yValue==='number'&&yValue!==Infinity)?yAxis.translate(yValue,0,1,0,1):UNDEFINED;point.clientX=dynamicallyPlaced?xAxis.translate(xValue,0,0,0,1):point.plotX;point.negative=point.y<(threshold||0);point.category=categories&&categories[point.x]!==UNDEFINED?categories[point.x]:point.x;}\nseries.getSegments();},animate:function(init){var series=this,chart=series.chart,renderer=chart.renderer,clipRect,markerClipRect,animation=series.options.animation,clipBox=series.clipBox||chart.clipBox,inverted=chart.inverted,sharedClipKey;if(animation&&!isObject(animation)){animation=defaultPlotOptions[series.type].animation;}\nsharedClipKey=['_sharedClip',animation.duration,animation.easing,clipBox.height].join(',');if(init){clipRect=chart[sharedClipKey];markerClipRect=chart[sharedClipKey+'m'];if(!clipRect){chart[sharedClipKey]=clipRect=renderer.clipRect(extend(clipBox,{width:0}));chart[sharedClipKey+'m']=markerClipRect=renderer.clipRect(-99,inverted?-chart.plotLeft:-chart.plotTop,99,inverted?chart.chartWidth:chart.chartHeight);}\nseries.group.clip(clipRect);series.markerGroup.clip(markerClipRect);series.sharedClipKey=sharedClipKey;}else{clipRect=chart[sharedClipKey];if(clipRect){clipRect.animate({width:chart.plotSizeX},animation);}\nif(chart[sharedClipKey+'m']){chart[sharedClipKey+'m'].animate({width:chart.plotSizeX+99},animation);}\nseries.animate=null;}},afterAnimate:function(){var chart=this.chart,sharedClipKey=this.sharedClipKey,group=this.group,clipBox=this.clipBox;if(group&&this.options.clip!==false){if(!sharedClipKey||!clipBox){group.clip(clipBox?chart.renderer.clipRect(clipBox):chart.clipRect);}\nthis.markerGroup.clip();}\nfireEvent(this,'afterAnimate');setTimeout(function(){if(sharedClipKey&&chart[sharedClipKey]){if(!clipBox){chart[sharedClipKey]=chart[sharedClipKey].destroy();}\nif(chart[sharedClipKey+'m']){chart[sharedClipKey+'m']=chart[sharedClipKey+'m'].destroy();}}},100);},drawPoints:function(){var series=this,pointAttr,points=series.points,chart=series.chart,plotX,plotY,i,point,radius,symbol,isImage,graphic,options=series.options,seriesMarkerOptions=options.marker,seriesPointAttr=series.pointAttr[''],pointMarkerOptions,enabled,isInside,markerGroup=series.markerGroup,globallyEnabled=pick(seriesMarkerOptions.enabled,series.activePointCount<(0.5*series.xAxis.len/seriesMarkerOptions.radius));if(seriesMarkerOptions.enabled!==false||series._hasPointMarkers){i=points.length;while(i--){point=points[i];plotX=mathFloor(point.plotX);plotY=point.plotY;graphic=point.graphic;pointMarkerOptions=point.marker||{};enabled=(globallyEnabled&&pointMarkerOptions.enabled===UNDEFINED)||pointMarkerOptions.enabled;isInside=chart.isInsidePlot(mathRound(plotX),plotY,chart.inverted);if(enabled&&plotY!==UNDEFINED&&!isNaN(plotY)&&point.y!==null){pointAttr=point.pointAttr[point.selected?SELECT_STATE:NORMAL_STATE]||seriesPointAttr;radius=pointAttr.r;symbol=pick(pointMarkerOptions.symbol,series.symbol);isImage=symbol.indexOf('url')===0;if(graphic){graphic[isInside?'show':'hide'](true).animate(extend({x:plotX-radius,y:plotY-radius},graphic.symbolName?{width:2*radius,height:2*radius}:{}));}else if(isInside&&(radius>0||isImage)){point.graphic=graphic=chart.renderer.symbol(symbol,plotX-radius,plotY-radius,2*radius,2*radius).attr(pointAttr).add(markerGroup);}}else if(graphic){point.graphic=graphic.destroy();}}}},convertAttribs:function(options,base1,base2,base3){var conversion=this.pointAttrToOptions,attr,option,obj={};options=options||{};base1=base1||{};base2=base2||{};base3=base3||{};for(attr in conversion){option=conversion[attr];obj[attr]=pick(options[option],base1[attr],base2[attr],base3[attr]);}\nreturn obj;},getAttribs:function(){var series=this,seriesOptions=series.options,normalOptions=defaultPlotOptions[series.type].marker?seriesOptions.marker:seriesOptions,stateOptions=normalOptions.states,stateOptionsHover=stateOptions[HOVER_STATE],pointStateOptionsHover,seriesColor=series.color,normalDefaults={stroke:seriesColor,fill:seriesColor},points=series.points||[],i,point,seriesPointAttr=[],pointAttr,pointAttrToOptions=series.pointAttrToOptions,hasPointSpecificOptions=series.hasPointSpecificOptions,negativeColor=seriesOptions.negativeColor,defaultLineColor=normalOptions.lineColor,defaultFillColor=normalOptions.fillColor,turboThreshold=seriesOptions.turboThreshold,attr,key;if(seriesOptions.marker){stateOptionsHover.radius=stateOptionsHover.radius||normalOptions.radius+stateOptionsHover.radiusPlus;stateOptionsHover.lineWidth=stateOptionsHover.lineWidth||normalOptions.lineWidth+stateOptionsHover.lineWidthPlus;}else{stateOptionsHover.color=stateOptionsHover.color||Color(stateOptionsHover.color||seriesColor).brighten(stateOptionsHover.brightness).get();}\nseriesPointAttr[NORMAL_STATE]=series.convertAttribs(normalOptions,normalDefaults);each([HOVER_STATE,SELECT_STATE],function(state){seriesPointAttr[state]=series.convertAttribs(stateOptions[state],seriesPointAttr[NORMAL_STATE]);});series.pointAttr=seriesPointAttr;i=points.length;if(!turboThreshold||i<turboThreshold||hasPointSpecificOptions){while(i--){point=points[i];normalOptions=(point.options&&point.options.marker)||point.options;if(normalOptions&&normalOptions.enabled===false){normalOptions.radius=0;}\nif(point.negative&&negativeColor){point.color=point.fillColor=negativeColor;}\nhasPointSpecificOptions=seriesOptions.colorByPoint||point.color;if(point.options){for(key in pointAttrToOptions){if(defined(normalOptions[pointAttrToOptions[key]])){hasPointSpecificOptions=true;}}}\nif(hasPointSpecificOptions){normalOptions=normalOptions||{};pointAttr=[];stateOptions=normalOptions.states||{};pointStateOptionsHover=stateOptions[HOVER_STATE]=stateOptions[HOVER_STATE]||{};if(!seriesOptions.marker){pointStateOptionsHover.color=pointStateOptionsHover.color||(!point.options.color&&stateOptionsHover.color)||Color(point.color).brighten(pointStateOptionsHover.brightness||stateOptionsHover.brightness).get();}\nattr={color:point.color};if(!defaultFillColor){attr.fillColor=point.color;}\nif(!defaultLineColor){attr.lineColor=point.color;}\npointAttr[NORMAL_STATE]=series.convertAttribs(extend(attr,normalOptions),seriesPointAttr[NORMAL_STATE]);pointAttr[HOVER_STATE]=series.convertAttribs(stateOptions[HOVER_STATE],seriesPointAttr[HOVER_STATE],pointAttr[NORMAL_STATE]);pointAttr[SELECT_STATE]=series.convertAttribs(stateOptions[SELECT_STATE],seriesPointAttr[SELECT_STATE],pointAttr[NORMAL_STATE]);}else{pointAttr=seriesPointAttr;}\npoint.pointAttr=pointAttr;}}},destroy:function(){var series=this,chart=series.chart,issue134=/AppleWebKit\\/533/.test(userAgent),destroy,i,data=series.data||[],point,prop,axis;fireEvent(series,'destroy');removeEvent(series);each(series.axisTypes||[],function(AXIS){axis=series[AXIS];if(axis){erase(axis.series,series);axis.isDirty=axis.forceRedraw=true;}});if(series.legendItem){series.chart.legend.destroyItem(series);}\ni=data.length;while(i--){point=data[i];if(point&&point.destroy){point.destroy();}}\nseries.points=null;clearTimeout(series.animationTimeout);each(['area','graph','dataLabelsGroup','group','markerGroup','tracker','graphNeg','areaNeg','posClip','negClip'],function(prop){if(series[prop]){destroy=issue134&&prop==='group'?'hide':'destroy';series[prop][destroy]();}});if(chart.hoverSeries===series){chart.hoverSeries=null;}\nerase(chart.series,series);for(prop in series){delete series[prop];}},getSegmentPath:function(segment){var series=this,segmentPath=[],step=series.options.step;each(segment,function(point,i){var plotX=point.plotX,plotY=point.plotY,lastPoint;if(series.getPointSpline){segmentPath.push.apply(segmentPath,series.getPointSpline(segment,point,i));}else{segmentPath.push(i?L:M);if(step&&i){lastPoint=segment[i-1];if(step==='right'){segmentPath.push(lastPoint.plotX,plotY);}else if(step==='center'){segmentPath.push((lastPoint.plotX+plotX)/2,lastPoint.plotY,(lastPoint.plotX+plotX)/2,plotY);}else{segmentPath.push(plotX,lastPoint.plotY);}}\nsegmentPath.push(point.plotX,point.plotY);}});return segmentPath;},getGraphPath:function(){var series=this,graphPath=[],segmentPath,singlePoints=[];each(series.segments,function(segment){segmentPath=series.getSegmentPath(segment);if(segment.length>1){graphPath=graphPath.concat(segmentPath);}else{singlePoints.push(segment[0]);}});series.singlePoints=singlePoints;series.graphPath=graphPath;return graphPath;},drawGraph:function(){var series=this,options=this.options,props=[['graph',options.lineColor||this.color]],lineWidth=options.lineWidth,dashStyle=options.dashStyle,roundCap=options.linecap!=='square',graphPath=this.getGraphPath(),negativeColor=options.negativeColor;if(negativeColor){props.push(['graphNeg',negativeColor]);}\neach(props,function(prop,i){var graphKey=prop[0],graph=series[graphKey],attribs;if(graph){stop(graph);graph.animate({d:graphPath});}else if(lineWidth&&graphPath.length){attribs={stroke:prop[1],'stroke-width':lineWidth,fill:NONE,zIndex:1};if(dashStyle){attribs.dashstyle=dashStyle;}else if(roundCap){attribs['stroke-linecap']=attribs['stroke-linejoin']='round';}\nseries[graphKey]=series.chart.renderer.path(graphPath).attr(attribs).add(series.group).shadow(!i&&options.shadow);}});},clipNeg:function(){var options=this.options,chart=this.chart,renderer=chart.renderer,negativeColor=options.negativeColor||options.negativeFillColor,translatedThreshold,posAttr,negAttr,graph=this.graph,area=this.area,posClip=this.posClip,negClip=this.negClip,chartWidth=chart.chartWidth,chartHeight=chart.chartHeight,chartSizeMax=mathMax(chartWidth,chartHeight),yAxis=this.yAxis,above,below;if(negativeColor&&(graph||area)){translatedThreshold=mathRound(yAxis.toPixels(options.threshold||0,true));if(translatedThreshold<0){chartSizeMax-=translatedThreshold;}\nabove={x:0,y:0,width:chartSizeMax,height:translatedThreshold};below={x:0,y:translatedThreshold,width:chartSizeMax,height:chartSizeMax};if(chart.inverted){above.height=below.y=chart.plotWidth-translatedThreshold;if(renderer.isVML){above={x:chart.plotWidth-translatedThreshold-chart.plotLeft,y:0,width:chartWidth,height:chartHeight};below={x:translatedThreshold+chart.plotLeft-chartWidth,y:0,width:chart.plotLeft+translatedThreshold,height:chartWidth};}}\nif(yAxis.reversed){posAttr=below;negAttr=above;}else{posAttr=above;negAttr=below;}\nif(posClip){posClip.animate(posAttr);negClip.animate(negAttr);}else{this.posClip=posClip=renderer.clipRect(posAttr);this.negClip=negClip=renderer.clipRect(negAttr);if(graph&&this.graphNeg){graph.clip(posClip);this.graphNeg.clip(negClip);}\nif(area){area.clip(posClip);this.areaNeg.clip(negClip);}}}},invertGroups:function(){var series=this,chart=series.chart;if(!series.xAxis){return;}\nfunction setInvert(){var size={width:series.yAxis.len,height:series.xAxis.len};each(['group','markerGroup'],function(groupName){if(series[groupName]){series[groupName].attr(size).invert();}});}\naddEvent(chart,'resize',setInvert);addEvent(series,'destroy',function(){removeEvent(chart,'resize',setInvert);});setInvert();series.invertGroups=setInvert;},plotGroup:function(prop,name,visibility,zIndex,parent){var group=this[prop],isNew=!group;if(isNew){this[prop]=group=this.chart.renderer.g(name).attr({visibility:visibility,zIndex:zIndex||0.1}).add(parent);}\ngroup[isNew?'attr':'animate'](this.getPlotBox());return group;},getPlotBox:function(){var chart=this.chart,xAxis=this.xAxis,yAxis=this.yAxis;if(chart.inverted){xAxis=yAxis;yAxis=this.xAxis;}\nreturn{translateX:xAxis?xAxis.left:chart.plotLeft,translateY:yAxis?yAxis.top:chart.plotTop,scaleX:1,scaleY:1};},render:function(){var series=this,chart=series.chart,group,options=series.options,animation=options.animation,animDuration=(animation&&!!series.animate&&chart.renderer.isSVG&&pick(animation.duration,500))||0,visibility=series.visible?VISIBLE:HIDDEN,zIndex=options.zIndex,hasRendered=series.hasRendered,chartSeriesGroup=chart.seriesGroup;group=series.plotGroup('group','series',visibility,zIndex,chartSeriesGroup);series.markerGroup=series.plotGroup('markerGroup','markers',visibility,zIndex,chartSeriesGroup);if(animDuration){series.animate(true);}\nseries.getAttribs();group.inverted=series.isCartesian?chart.inverted:false;if(series.drawGraph){series.drawGraph();series.clipNeg();}\nif(series.drawDataLabels){series.drawDataLabels();}\nif(series.visible){series.drawPoints();}\nif(series.drawTracker&&series.options.enableMouseTracking!==false){series.drawTracker();}\nif(chart.inverted){series.invertGroups();}\nif(options.clip!==false&&!series.sharedClipKey&&!hasRendered){group.clip(chart.clipRect);}\nif(animDuration){series.animate();}\nif(!hasRendered){if(animDuration){series.animationTimeout=setTimeout(function(){series.afterAnimate();},animDuration);}else{series.afterAnimate();}}\nseries.isDirty=series.isDirtyData=false;series.hasRendered=true;},redraw:function(){var series=this,chart=series.chart,wasDirtyData=series.isDirtyData,group=series.group,xAxis=series.xAxis,yAxis=series.yAxis;if(group){if(chart.inverted){group.attr({width:chart.plotWidth,height:chart.plotHeight});}\ngroup.animate({translateX:pick(xAxis&&xAxis.left,chart.plotLeft),translateY:pick(yAxis&&yAxis.top,chart.plotTop)});}\nseries.translate();if(series.setTooltipPoints){series.setTooltipPoints(true);}\nseries.render();if(wasDirtyData){fireEvent(series,'updatedData');}}};function StackItem(axis,options,isNegative,x,stackOption){var inverted=axis.chart.inverted;this.axis=axis;this.isNegative=isNegative;this.options=options;this.x=x;this.total=null;this.points={};this.stack=stackOption;this.alignOptions={align:options.align||(inverted?(isNegative?'left':'right'):'center'),verticalAlign:options.verticalAlign||(inverted?'middle':(isNegative?'bottom':'top')),y:pick(options.y,inverted?4:(isNegative?14:-6)),x:pick(options.x,inverted?(isNegative?-6:6):0)};this.textAlign=options.textAlign||(inverted?(isNegative?'right':'left'):'center');}\nStackItem.prototype={destroy:function(){destroyObjectProperties(this,this.axis);},render:function(group){var options=this.options,formatOption=options.format,str=formatOption?format(formatOption,this):options.formatter.call(this);if(this.label){this.label.attr({text:str,visibility:HIDDEN});}else{this.label=this.axis.chart.renderer.text(str,null,null,options.useHTML).css(options.style).attr({align:this.textAlign,rotation:options.rotation,visibility:HIDDEN}).add(group);}},setOffset:function(xOffset,xWidth){var stackItem=this,axis=stackItem.axis,chart=axis.chart,inverted=chart.inverted,neg=this.isNegative,y=axis.translate(axis.usePercentage?100:this.total,0,0,0,1),yZero=axis.translate(0),h=mathAbs(y-yZero),x=chart.xAxis[0].translate(this.x)+xOffset,plotHeight=chart.plotHeight,stackBox={x:inverted?(neg?y:y-h):x,y:inverted?plotHeight-x-xWidth:(neg?(plotHeight-y-h):plotHeight-y),width:inverted?h:xWidth,height:inverted?xWidth:h},label=this.label,alignAttr;if(label){label.align(this.alignOptions,null,stackBox);alignAttr=label.alignAttr;label[this.options.crop===false||chart.isInsidePlot(alignAttr.x,alignAttr.y)?'show':'hide'](true);}}};Axis.prototype.buildStacks=function(){var series=this.series,reversedStacks=pick(this.options.reversedStacks,true),i=series.length;if(!this.isXAxis){this.usePercentage=false;while(i--){series[reversedStacks?i:series.length-i-1].setStackedPoints();}\nif(this.usePercentage){for(i=0;i<series.length;i++){series[i].setPercentStacks();}}}};Axis.prototype.renderStackTotals=function(){var axis=this,chart=axis.chart,renderer=chart.renderer,stacks=axis.stacks,stackKey,oneStack,stackCategory,stackTotalGroup=axis.stackTotalGroup;if(!stackTotalGroup){axis.stackTotalGroup=stackTotalGroup=renderer.g('stack-labels').attr({visibility:VISIBLE,zIndex:6}).add();}\nstackTotalGroup.translate(chart.plotLeft,chart.plotTop);for(stackKey in stacks){oneStack=stacks[stackKey];for(stackCategory in oneStack){oneStack[stackCategory].render(stackTotalGroup);}}};Series.prototype.setStackedPoints=function(){if(!this.options.stacking||(this.visible!==true&&this.chart.options.chart.ignoreHiddenSeries!==false)){return;}\nvar series=this,xData=series.processedXData,yData=series.processedYData,stackedYData=[],yDataLength=yData.length,seriesOptions=series.options,threshold=seriesOptions.threshold,stackOption=seriesOptions.stack,stacking=seriesOptions.stacking,stackKey=series.stackKey,negKey='-'+stackKey,negStacks=series.negStacks,yAxis=series.yAxis,stacks=yAxis.stacks,oldStacks=yAxis.oldStacks,isNegative,stack,other,key,pointKey,i,x,y;for(i=0;i<yDataLength;i++){x=xData[i];y=yData[i];pointKey=series.index+','+i;isNegative=negStacks&&y<threshold;key=isNegative?negKey:stackKey;if(!stacks[key]){stacks[key]={};}\nif(!stacks[key][x]){if(oldStacks[key]&&oldStacks[key][x]){stacks[key][x]=oldStacks[key][x];stacks[key][x].total=null;}else{stacks[key][x]=new StackItem(yAxis,yAxis.options.stackLabels,isNegative,x,stackOption);}}\nstack=stacks[key][x];stack.points[pointKey]=[stack.cum||0];if(stacking==='percent'){other=isNegative?stackKey:negKey;if(negStacks&&stacks[other]&&stacks[other][x]){other=stacks[other][x];stack.total=other.total=mathMax(other.total,stack.total)+mathAbs(y)||0;}else{stack.total=correctFloat(stack.total+(mathAbs(y)||0));}}else{stack.total=correctFloat(stack.total+(y||0));}\nstack.cum=(stack.cum||0)+(y||0);stack.points[pointKey].push(stack.cum);stackedYData[i]=stack.cum;}\nif(stacking==='percent'){yAxis.usePercentage=true;}\nthis.stackedYData=stackedYData;yAxis.oldStacks={};};Series.prototype.setPercentStacks=function(){var series=this,stackKey=series.stackKey,stacks=series.yAxis.stacks,processedXData=series.processedXData;each([stackKey,'-'+stackKey],function(key){var i=processedXData.length,x,stack,pointExtremes,totalFactor;while(i--){x=processedXData[i];stack=stacks[key]&&stacks[key][x];pointExtremes=stack&&stack.points[series.index+','+i];if(pointExtremes){totalFactor=stack.total?100/stack.total:0;pointExtremes[0]=correctFloat(pointExtremes[0]*totalFactor);pointExtremes[1]=correctFloat(pointExtremes[1]*totalFactor);series.stackedYData[i]=pointExtremes[1];}}});};extend(Chart.prototype,{addSeries:function(options,redraw,animation){var series,chart=this;if(options){redraw=pick(redraw,true);fireEvent(chart,'addSeries',{options:options},function(){series=chart.initSeries(options);chart.isDirtyLegend=true;chart.linkSeries();if(redraw){chart.redraw(animation);}});}\nreturn series;},addAxis:function(options,isX,redraw,animation){var key=isX?'xAxis':'yAxis',chartOptions=this.options,axis;axis=new Axis(this,merge(options,{index:this[key].length,isX:isX}));chartOptions[key]=splat(chartOptions[key]||{});chartOptions[key].push(options);if(pick(redraw,true)){this.redraw(animation);}},showLoading:function(str){var chart=this,options=chart.options,loadingDiv=chart.loadingDiv,loadingOptions=options.loading,setLoadingSize=function(){if(loadingDiv){css(loadingDiv,{left:chart.plotLeft+PX,top:chart.plotTop+PX,width:chart.plotWidth+PX,height:chart.plotHeight+PX});}};if(!loadingDiv){chart.loadingDiv=loadingDiv=createElement(DIV,{className:PREFIX+'loading'},extend(loadingOptions.style,{zIndex:10,display:NONE}),chart.container);chart.loadingSpan=createElement('span',null,loadingOptions.labelStyle,loadingDiv);addEvent(chart,'redraw',setLoadingSize);}\nchart.loadingSpan.innerHTML=str||options.lang.loading;if(!chart.loadingShown){css(loadingDiv,{opacity:0,display:''});animate(loadingDiv,{opacity:loadingOptions.style.opacity},{duration:loadingOptions.showDuration||0});chart.loadingShown=true;}\nsetLoadingSize();},hideLoading:function(){var options=this.options,loadingDiv=this.loadingDiv;if(loadingDiv){animate(loadingDiv,{opacity:0},{duration:options.loading.hideDuration||100,complete:function(){css(loadingDiv,{display:NONE});}});}\nthis.loadingShown=false;}});extend(Point.prototype,{update:function(options,redraw,animation){var point=this,series=point.series,graphic=point.graphic,i,data=series.data,chart=series.chart,seriesOptions=series.options;redraw=pick(redraw,true);point.firePointEvent('update',{options:options},function(){point.applyOptions(options);if(isObject(options)){series.getAttribs();if(graphic){if(options&&options.marker&&options.marker.symbol){point.graphic=graphic.destroy();}else{graphic.attr(point.pointAttr[point.state||'']);}}\nif(options&&options.dataLabels&&point.dataLabel){point.dataLabel=point.dataLabel.destroy();}}\ni=inArray(point,data);series.updateParallelArrays(point,i);seriesOptions.data[i]=point.options;series.isDirty=series.isDirtyData=true;if(!series.fixedBox&&series.hasCartesianSeries){chart.isDirtyBox=true;}\nif(seriesOptions.legendType==='point'){chart.legend.destroyItem(point);}\nif(redraw){chart.redraw(animation);}});},remove:function(redraw,animation){var point=this,series=point.series,points=series.points,chart=series.chart,i,data=series.data;setAnimation(animation,chart);redraw=pick(redraw,true);point.firePointEvent('remove',null,function(){i=inArray(point,data);if(data.length===points.length){points.splice(i,1);}\ndata.splice(i,1);series.options.data.splice(i,1);series.updateParallelArrays(point,'splice',i,1);point.destroy();series.isDirty=true;series.isDirtyData=true;if(redraw){chart.redraw();}});}});extend(Series.prototype,{addPoint:function(options,redraw,shift,animation){var series=this,seriesOptions=series.options,data=series.data,graph=series.graph,area=series.area,chart=series.chart,names=series.xAxis&&series.xAxis.names,currentShift=(graph&&graph.shift)||0,dataOptions=seriesOptions.data,point,isInTheMiddle,xData=series.xData,x,i;setAnimation(animation,chart);if(shift){each([graph,area,series.graphNeg,series.areaNeg],function(shape){if(shape){shape.shift=currentShift+1;}});}\nif(area){area.isArea=true;}\nredraw=pick(redraw,true);point={series:series};series.pointClass.prototype.applyOptions.apply(point,[options]);x=point.x;i=xData.length;if(series.requireSorting&&x<xData[i-1]){isInTheMiddle=true;while(i&&xData[i-1]>x){i--;}}\nseries.updateParallelArrays(point,'splice',i,0,0);series.updateParallelArrays(point,i);if(names){names[x]=point.name;}\ndataOptions.splice(i,0,options);if(isInTheMiddle){series.data.splice(i,0,null);series.processData();}\nif(seriesOptions.legendType==='point'){series.generatePoints();}\nif(shift){if(data[0]&&data[0].remove){data[0].remove(false);}else{data.shift();series.updateParallelArrays(point,'shift');dataOptions.shift();}}\nseries.isDirty=true;series.isDirtyData=true;if(redraw){series.getAttribs();chart.redraw();}},remove:function(redraw,animation){var series=this,chart=series.chart;redraw=pick(redraw,true);if(!series.isRemoving){series.isRemoving=true;fireEvent(series,'remove',null,function(){series.destroy();chart.isDirtyLegend=chart.isDirtyBox=true;chart.linkSeries();if(redraw){chart.redraw(animation);}});}\nseries.isRemoving=false;},update:function(newOptions,redraw){var series=this,chart=this.chart,oldOptions=this.userOptions,oldType=this.type,proto=seriesTypes[oldType].prototype,preserve=['group','markerGroup','dataLabelsGroup'],n;each(preserve,function(prop){preserve[prop]=series[prop];delete series[prop];});newOptions=merge(oldOptions,{animation:false,index:this.index,pointStart:this.xData[0]},{data:this.options.data},newOptions);this.remove(false);for(n in proto){if(proto.hasOwnProperty(n)){this[n]=UNDEFINED;}}\nextend(this,seriesTypes[newOptions.type||oldType].prototype);each(preserve,function(prop){series[prop]=preserve[prop];});this.init(chart,newOptions);chart.linkSeries();if(pick(redraw,true)){chart.redraw(false);}}});extend(Axis.prototype,{update:function(newOptions,redraw){var chart=this.chart;newOptions=chart.options[this.coll][this.options.index]=merge(this.userOptions,newOptions);this.destroy(true);this._addedPlotLB=UNDEFINED;this.init(chart,extend(newOptions,{events:UNDEFINED}));chart.isDirtyBox=true;if(pick(redraw,true)){chart.redraw();}},remove:function(redraw){var chart=this.chart,key=this.coll,axisSeries=this.series,i=axisSeries.length;while(i--){if(axisSeries[i]){axisSeries[i].remove(false);}}\nerase(chart.axes,this);erase(chart[key],this);chart.options[key].splice(this.options.index,1);each(chart[key],function(axis,i){axis.options.index=i;});this.destroy();chart.isDirtyBox=true;if(pick(redraw,true)){chart.redraw();}},setTitle:function(newTitleOptions,redraw){this.update({title:newTitleOptions},redraw);},setCategories:function(categories,redraw){this.update({categories:categories},redraw);}});var LineSeries=extendClass(Series);seriesTypes.line=LineSeries;defaultPlotOptions.area=merge(defaultSeriesOptions,{threshold:0});var AreaSeries=extendClass(Series,{type:'area',getSegments:function(){var series=this,segments=[],segment=[],keys=[],xAxis=this.xAxis,yAxis=this.yAxis,stack=yAxis.stacks[this.stackKey],pointMap={},plotX,plotY,points=this.points,connectNulls=this.options.connectNulls,i,x;if(this.options.stacking&&!this.cropped){for(i=0;i<points.length;i++){pointMap[points[i].x]=points[i];}\nfor(x in stack){if(stack[x].total!==null){keys.push(+x);}}\nkeys.sort(function(a,b){return a-b;});each(keys,function(x){var y=0,stackPoint;if(connectNulls&&(!pointMap[x]||pointMap[x].y===null)){return;}else if(pointMap[x]){segment.push(pointMap[x]);}else{for(i=series.index;i<=yAxis.series.length;i++){stackPoint=stack[x].points[i+','+x];if(stackPoint){y=stackPoint[1];break;}}\nplotX=xAxis.translate(x);plotY=yAxis.toPixels(y,true);segment.push({y:null,plotX:plotX,clientX:plotX,plotY:plotY,yBottom:plotY,onMouseOver:noop});}});if(segment.length){segments.push(segment);}}else{Series.prototype.getSegments.call(this);segments=this.segments;}\nthis.segments=segments;},getSegmentPath:function(segment){var segmentPath=Series.prototype.getSegmentPath.call(this,segment),areaSegmentPath=[].concat(segmentPath),i,options=this.options,segLength=segmentPath.length,translatedThreshold=this.yAxis.getThreshold(options.threshold),yBottom;if(segLength===3){areaSegmentPath.push(L,segmentPath[1],segmentPath[2]);}\nif(options.stacking&&!this.closedStacks){for(i=segment.length-1;i>=0;i--){yBottom=pick(segment[i].yBottom,translatedThreshold);if(i<segment.length-1&&options.step){areaSegmentPath.push(segment[i+1].plotX,yBottom);}\nareaSegmentPath.push(segment[i].plotX,yBottom);}}else{this.closeSegment(areaSegmentPath,segment,translatedThreshold);}\nthis.areaPath=this.areaPath.concat(areaSegmentPath);return segmentPath;},closeSegment:function(path,segment,translatedThreshold){path.push(L,segment[segment.length-1].plotX,translatedThreshold,L,segment[0].plotX,translatedThreshold);},drawGraph:function(){this.areaPath=[];Series.prototype.drawGraph.apply(this);var series=this,areaPath=this.areaPath,options=this.options,negativeColor=options.negativeColor,negativeFillColor=options.negativeFillColor,props=[['area',this.color,options.fillColor]];if(negativeColor||negativeFillColor){props.push(['areaNeg',negativeColor,negativeFillColor]);}\neach(props,function(prop){var areaKey=prop[0],area=series[areaKey];if(area){area.animate({d:areaPath});}else{series[areaKey]=series.chart.renderer.path(areaPath).attr({fill:pick(prop[2],Color(prop[1]).setOpacity(pick(options.fillOpacity,0.75)).get()),zIndex:0}).add(series.group);}});},drawLegendSymbol:LegendSymbolMixin.drawRectangle});seriesTypes.area=AreaSeries;defaultPlotOptions.spline=merge(defaultSeriesOptions);var SplineSeries=extendClass(Series,{type:'spline',getPointSpline:function(segment,point,i){var smoothing=1.5,denom=smoothing+1,plotX=point.plotX,plotY=point.plotY,lastPoint=segment[i-1],nextPoint=segment[i+1],leftContX,leftContY,rightContX,rightContY,ret;if(lastPoint&&nextPoint){var lastX=lastPoint.plotX,lastY=lastPoint.plotY,nextX=nextPoint.plotX,nextY=nextPoint.plotY,correction;leftContX=(smoothing*plotX+lastX)/denom;leftContY=(smoothing*plotY+lastY)/denom;rightContX=(smoothing*plotX+nextX)/denom;rightContY=(smoothing*plotY+nextY)/denom;correction=((rightContY-leftContY)*(rightContX-plotX))/(rightContX-leftContX)+plotY-rightContY;leftContY+=correction;rightContY+=correction;if(leftContY>lastY&&leftContY>plotY){leftContY=mathMax(lastY,plotY);rightContY=2*plotY-leftContY;}else if(leftContY<lastY&&leftContY<plotY){leftContY=mathMin(lastY,plotY);rightContY=2*plotY-leftContY;}\nif(rightContY>nextY&&rightContY>plotY){rightContY=mathMax(nextY,plotY);leftContY=2*plotY-rightContY;}else if(rightContY<nextY&&rightContY<plotY){rightContY=mathMin(nextY,plotY);leftContY=2*plotY-rightContY;}\npoint.rightContX=rightContX;point.rightContY=rightContY;}\nif(!i){ret=[M,plotX,plotY];}else{ret=['C',lastPoint.rightContX||lastPoint.plotX,lastPoint.rightContY||lastPoint.plotY,leftContX||plotX,leftContY||plotY,plotX,plotY];lastPoint.rightContX=lastPoint.rightContY=null;}\nreturn ret;}});seriesTypes.spline=SplineSeries;defaultPlotOptions.areaspline=merge(defaultPlotOptions.area);var areaProto=AreaSeries.prototype,AreaSplineSeries=extendClass(SplineSeries,{type:'areaspline',closedStacks:true,getSegmentPath:areaProto.getSegmentPath,closeSegment:areaProto.closeSegment,drawGraph:areaProto.drawGraph,drawLegendSymbol:LegendSymbolMixin.drawRectangle});seriesTypes.areaspline=AreaSplineSeries;defaultPlotOptions.column=merge(defaultSeriesOptions,{borderColor:'#FFFFFF',borderRadius:0,groupPadding:0.2,marker:null,pointPadding:0.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:0.1,shadow:false,halo:false},select:{color:'#C0C0C0',borderColor:'#000000',shadow:false}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:false,tooltip:{distance:6},threshold:0});var ColumnSeries=extendClass(Series,{type:'column',pointAttrToOptions:{stroke:'borderColor',fill:'color',r:'borderRadius'},cropShoulder:0,trackerGroups:['group','dataLabelsGroup'],negStacks:true,init:function(){Series.prototype.init.apply(this,arguments);var series=this,chart=series.chart;if(chart.hasRendered){each(chart.series,function(otherSeries){if(otherSeries.type===series.type){otherSeries.isDirty=true;}});}},getColumnMetrics:function(){var series=this,options=series.options,xAxis=series.xAxis,yAxis=series.yAxis,reversedXAxis=xAxis.reversed,stackKey,stackGroups={},columnIndex,columnCount=0;if(options.grouping===false){columnCount=1;}else{each(series.chart.series,function(otherSeries){var otherOptions=otherSeries.options,otherYAxis=otherSeries.yAxis;if(otherSeries.type===series.type&&otherSeries.visible&&yAxis.len===otherYAxis.len&&yAxis.pos===otherYAxis.pos){if(otherOptions.stacking){stackKey=otherSeries.stackKey;if(stackGroups[stackKey]===UNDEFINED){stackGroups[stackKey]=columnCount++;}\ncolumnIndex=stackGroups[stackKey];}else if(otherOptions.grouping!==false){columnIndex=columnCount++;}\notherSeries.columnIndex=columnIndex;}});}\nvar categoryWidth=mathMin(mathAbs(xAxis.transA)*(xAxis.ordinalSlope||options.pointRange||xAxis.closestPointRange||xAxis.tickInterval||1),xAxis.len),groupPadding=categoryWidth*options.groupPadding,groupWidth=categoryWidth-2*groupPadding,pointOffsetWidth=groupWidth/columnCount,optionPointWidth=options.pointWidth,pointPadding=defined(optionPointWidth)?(pointOffsetWidth-optionPointWidth)/2:pointOffsetWidth*options.pointPadding,pointWidth=pick(optionPointWidth,pointOffsetWidth-2*pointPadding),colIndex=(reversedXAxis?columnCount-(series.columnIndex||0):series.columnIndex)||0,pointXOffset=pointPadding+(groupPadding+colIndex*pointOffsetWidth-(categoryWidth/2))*(reversedXAxis?-1:1);return(series.columnMetrics={width:pointWidth,offset:pointXOffset});},translate:function(){var series=this,chart=series.chart,options=series.options,borderWidth=series.borderWidth=pick(options.borderWidth,series.activePointCount>0.5*series.xAxis.len?0:1),yAxis=series.yAxis,threshold=options.threshold,translatedThreshold=series.translatedThreshold=yAxis.getThreshold(threshold),minPointLength=pick(options.minPointLength,5),metrics=series.getColumnMetrics(),pointWidth=metrics.width,seriesBarW=series.barW=mathMax(pointWidth,1+2*borderWidth),pointXOffset=series.pointXOffset=metrics.offset,xCrisp=-(borderWidth%2?0.5:0),yCrisp=borderWidth%2?0.5:1;if(chart.renderer.isVML&&chart.inverted){yCrisp+=1;}\nif(options.pointPadding){seriesBarW=mathCeil(seriesBarW);}\nSeries.prototype.translate.apply(series);each(series.points,function(point){var yBottom=pick(point.yBottom,translatedThreshold),plotY=mathMin(mathMax(-999-yBottom,point.plotY),yAxis.len+999+yBottom),barX=point.plotX+pointXOffset,barW=seriesBarW,barY=mathMin(plotY,yBottom),right,bottom,fromTop,barH=mathMax(plotY,yBottom)-barY;if(mathAbs(barH)<minPointLength){if(minPointLength){barH=minPointLength;barY=mathRound(mathAbs(barY-translatedThreshold)>minPointLength?yBottom-minPointLength:translatedThreshold-(yAxis.translate(point.y,0,1,0,1)<=translatedThreshold?minPointLength:0));}}\npoint.barX=barX;point.pointWidth=pointWidth;point.tooltipPos=chart.inverted?[yAxis.len-plotY,series.xAxis.len-barX-barW/2]:[barX+barW/2,plotY];right=mathRound(barX+barW)+xCrisp;barX=mathRound(barX)+xCrisp;barW=right-barX;fromTop=mathAbs(barY)<0.5;bottom=mathRound(barY+barH)+yCrisp;barY=mathRound(barY)+yCrisp;barH=bottom-barY;if(fromTop){barY-=1;barH+=1;}\npoint.shapeType='rect';point.shapeArgs={x:barX,y:barY,width:barW,height:barH};});},getSymbol:noop,drawLegendSymbol:LegendSymbolMixin.drawRectangle,drawGraph:noop,drawPoints:function(){var series=this,chart=this.chart,options=series.options,renderer=chart.renderer,animationLimit=options.animationLimit||250,shapeArgs,pointAttr;each(series.points,function(point){var plotY=point.plotY,graphic=point.graphic,borderAttr;if(plotY!==UNDEFINED&&!isNaN(plotY)&&point.y!==null){shapeArgs=point.shapeArgs;borderAttr=defined(series.borderWidth)?{'stroke-width':series.borderWidth}:{};pointAttr=point.pointAttr[point.selected?SELECT_STATE:NORMAL_STATE]||series.pointAttr[NORMAL_STATE];if(graphic){stop(graphic);graphic.attr(borderAttr)[chart.pointCount<animationLimit?'animate':'attr'](merge(shapeArgs));}else{point.graphic=graphic=renderer[point.shapeType](shapeArgs).attr(pointAttr).attr(borderAttr).add(series.group).shadow(options.shadow,null,options.stacking&&!options.borderRadius);}}else if(graphic){point.graphic=graphic.destroy();}});},animate:function(init){var series=this,yAxis=this.yAxis,options=series.options,inverted=this.chart.inverted,attr={},translatedThreshold;if(hasSVG){if(init){attr.scaleY=0.001;translatedThreshold=mathMin(yAxis.pos+yAxis.len,mathMax(yAxis.pos,yAxis.toPixels(options.threshold)));if(inverted){attr.translateX=translatedThreshold-yAxis.len;}else{attr.translateY=translatedThreshold;}\nseries.group.attr(attr);}else{attr.scaleY=1;attr[inverted?'translateX':'translateY']=yAxis.pos;series.group.animate(attr,series.options.animation);series.animate=null;}}},remove:function(){var series=this,chart=series.chart;if(chart.hasRendered){each(chart.series,function(otherSeries){if(otherSeries.type===series.type){otherSeries.isDirty=true;}});}\nSeries.prototype.remove.apply(series,arguments);}});seriesTypes.column=ColumnSeries;defaultPlotOptions.bar=merge(defaultPlotOptions.column);var BarSeries=extendClass(ColumnSeries,{type:'bar',inverted:true});seriesTypes.bar=BarSeries;defaultPlotOptions.scatter=merge(defaultSeriesOptions,{lineWidth:0,tooltip:{headerFormat:'<span style=\"color:{series.color}\">\\u25CF<\/span> <span style=\"font-size: 10px;\"> {series.name}<\/span><br/>',pointFormat:'x: <b>{point.x}<\/b><br/>y: <b>{point.y}<\/b><br/>'},stickyTracking:false});var ScatterSeries=extendClass(Series,{type:'scatter',sorted:false,requireSorting:false,noSharedTooltip:true,trackerGroups:['markerGroup','dataLabelsGroup'],takeOrdinalPosition:false,singularTooltips:true,drawGraph:function(){if(this.options.lineWidth){Series.prototype.drawGraph.call(this);}}});seriesTypes.scatter=ScatterSeries;defaultPlotOptions.pie=merge(defaultSeriesOptions,{borderColor:'#FFFFFF',borderWidth:1,center:[null,null],clip:false,colorByPoint:true,dataLabels:{distance:30,enabled:true,formatter:function(){return this.point.name;}},ignoreHiddenPoint:true,legendType:'point',marker:null,size:null,showInLegend:false,slicedOffset:10,states:{hover:{brightness:0.1,shadow:false}},stickyTracking:false,tooltip:{followPointer:true}});var PiePoint=extendClass(Point,{init:function(){Point.prototype.init.apply(this,arguments);var point=this,toggleSlice;if(point.y<0){point.y=null;}\nextend(point,{visible:point.visible!==false,name:pick(point.name,'Slice')});toggleSlice=function(e){point.slice(e.type==='select');};addEvent(point,'select',toggleSlice);addEvent(point,'unselect',toggleSlice);return point;},setVisible:function(vis){var point=this,series=point.series,chart=series.chart;point.visible=point.options.visible=vis=vis===UNDEFINED?!point.visible:vis;series.options.data[inArray(point,series.data)]=point.options;each(['graphic','dataLabel','connector','shadowGroup'],function(key){if(point[key]){point[key][vis?'show':'hide'](true);}});if(point.legendItem){chart.legend.colorizeItem(point,vis);}\nif(!series.isDirty&&series.options.ignoreHiddenPoint){series.isDirty=true;chart.redraw();}},slice:function(sliced,redraw,animation){var point=this,series=point.series,chart=series.chart,translation;setAnimation(animation,chart);redraw=pick(redraw,true);point.sliced=point.options.sliced=sliced=defined(sliced)?sliced:!point.sliced;series.options.data[inArray(point,series.data)]=point.options;translation=sliced?point.slicedTranslation:{translateX:0,translateY:0};point.graphic.animate(translation);if(point.shadowGroup){point.shadowGroup.animate(translation);}},haloPath:function(size){var shapeArgs=this.shapeArgs,chart=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(chart.plotLeft+shapeArgs.x,chart.plotTop+shapeArgs.y,shapeArgs.r+size,shapeArgs.r+size,{innerR:this.shapeArgs.r,start:shapeArgs.start,end:shapeArgs.end});}});var PieSeries={type:'pie',isCartesian:false,pointClass:PiePoint,requireSorting:false,noSharedTooltip:true,trackerGroups:['group','dataLabelsGroup'],axisTypes:[],pointAttrToOptions:{stroke:'borderColor','stroke-width':'borderWidth',fill:'color'},singularTooltips:true,getColor:noop,animate:function(init){var series=this,points=series.points,startAngleRad=series.startAngleRad;if(!init){each(points,function(point){var graphic=point.graphic,args=point.shapeArgs;if(graphic){graphic.attr({r:series.center[3]/2,start:startAngleRad,end:startAngleRad});graphic.animate({r:args.r,start:args.start,end:args.end},series.options.animation);}});series.animate=null;}},setData:function(data,redraw,animation,updatePoints){Series.prototype.setData.call(this,data,false,animation,updatePoints);this.processData();this.generatePoints();if(pick(redraw,true)){this.chart.redraw(animation);}},generatePoints:function(){var i,total=0,points,len,point,ignoreHiddenPoint=this.options.ignoreHiddenPoint;Series.prototype.generatePoints.call(this);points=this.points;len=points.length;for(i=0;i<len;i++){point=points[i];total+=(ignoreHiddenPoint&&!point.visible)?0:point.y;}\nthis.total=total;for(i=0;i<len;i++){point=points[i];point.percentage=total>0?(point.y/total)*100:0;point.total=total;}},translate:function(positions){this.generatePoints();var series=this,cumulative=0,precision=1000,options=series.options,slicedOffset=options.slicedOffset,connectorOffset=slicedOffset+options.borderWidth,start,end,angle,startAngle=options.startAngle||0,startAngleRad=series.startAngleRad=mathPI/180*(startAngle-90),endAngleRad=series.endAngleRad=mathPI/180*((pick(options.endAngle,startAngle+360))-90),circ=endAngleRad-startAngleRad,points=series.points,radiusX,radiusY,labelDistance=options.dataLabels.distance,ignoreHiddenPoint=options.ignoreHiddenPoint,i,len=points.length,point;if(!positions){series.center=positions=series.getCenter();}\nseries.getX=function(y,left){angle=math.asin(mathMin((y-positions[1])/(positions[2]/2+labelDistance),1));return positions[0]+\n(left?-1:1)*(mathCos(angle)*(positions[2]/2+labelDistance));};for(i=0;i<len;i++){point=points[i];start=startAngleRad+(cumulative*circ);if(!ignoreHiddenPoint||point.visible){cumulative+=point.percentage/100;}\nend=startAngleRad+(cumulative*circ);point.shapeType='arc';point.shapeArgs={x:positions[0],y:positions[1],r:positions[2]/2,innerR:positions[3]/2,start:mathRound(start*precision)/precision,end:mathRound(end*precision)/precision};angle=(end+start)/2;if(angle>1.5*mathPI){angle-=2*mathPI;}else if(angle<-mathPI/2){angle+=2*mathPI;}\npoint.slicedTranslation={translateX:mathRound(mathCos(angle)*slicedOffset),translateY:mathRound(mathSin(angle)*slicedOffset)};radiusX=mathCos(angle)*positions[2]/2;radiusY=mathSin(angle)*positions[2]/2;point.tooltipPos=[positions[0]+radiusX*0.7,positions[1]+radiusY*0.7];point.half=angle<-mathPI/2||angle>mathPI/2?1:0;point.angle=angle;connectorOffset=mathMin(connectorOffset,labelDistance/2);point.labelPos=[positions[0]+radiusX+mathCos(angle)*labelDistance,positions[1]+radiusY+mathSin(angle)*labelDistance,positions[0]+radiusX+mathCos(angle)*connectorOffset,positions[1]+radiusY+mathSin(angle)*connectorOffset,positions[0]+radiusX,positions[1]+radiusY,labelDistance<0?'center':point.half?'right':'left',angle];}},drawGraph:null,drawPoints:function(){var series=this,chart=series.chart,renderer=chart.renderer,groupTranslation,graphic,shadow=series.options.shadow,shadowGroup,shapeArgs;if(shadow&&!series.shadowGroup){series.shadowGroup=renderer.g('shadow').add(series.group);}\neach(series.points,function(point){graphic=point.graphic;shapeArgs=point.shapeArgs;shadowGroup=point.shadowGroup;if(shadow&&!shadowGroup){shadowGroup=point.shadowGroup=renderer.g('shadow').add(series.shadowGroup);}\ngroupTranslation=point.sliced?point.slicedTranslation:{translateX:0,translateY:0};if(shadowGroup){shadowGroup.attr(groupTranslation);}\nif(graphic){graphic.animate(extend(shapeArgs,groupTranslation));}else{point.graphic=graphic=renderer[point.shapeType](shapeArgs).setRadialReference(series.center).attr(point.pointAttr[point.selected?SELECT_STATE:NORMAL_STATE]).attr({'stroke-linejoin':'round'}).attr(groupTranslation).add(series.group).shadow(shadow,shadowGroup);}\nif(point.visible!==undefined){point.setVisible(point.visible);}});},sortByAngle:function(points,sign){points.sort(function(a,b){return a.angle!==undefined&&(b.angle-a.angle)*sign;});},drawLegendSymbol:LegendSymbolMixin.drawRectangle,getCenter:CenteredSeriesMixin.getCenter,getSymbol:noop};PieSeries=extendClass(Series,PieSeries);seriesTypes.pie=PieSeries;Series.prototype.drawDataLabels=function(){var series=this,seriesOptions=series.options,cursor=seriesOptions.cursor,options=seriesOptions.dataLabels,points=series.points,pointOptions,generalOptions,str,dataLabelsGroup;if(options.enabled||series._hasPointLabels){if(series.dlProcessOptions){series.dlProcessOptions(options);}\ndataLabelsGroup=series.plotGroup('dataLabelsGroup','data-labels',options.defer?HIDDEN:VISIBLE,options.zIndex||6);if(!series.hasRendered&&pick(options.defer,true)){dataLabelsGroup.attr({opacity:0});addEvent(series,'afterAnimate',function(){if(series.visible){dataLabelsGroup.show();}\ndataLabelsGroup[seriesOptions.animation?'animate':'attr']({opacity:1},{duration:200});});}\ngeneralOptions=options;each(points,function(point){var enabled,dataLabel=point.dataLabel,labelConfig,attr,name,rotation,connector=point.connector,isNew=true;pointOptions=point.options&&point.options.dataLabels;enabled=pick(pointOptions&&pointOptions.enabled,generalOptions.enabled);if(dataLabel&&!enabled){point.dataLabel=dataLabel.destroy();}else if(enabled){options=merge(generalOptions,pointOptions);rotation=options.rotation;labelConfig=point.getLabelConfig();str=options.format?format(options.format,labelConfig):options.formatter.call(labelConfig,options);options.style.color=pick(options.color,options.style.color,series.color,'black');if(dataLabel){if(defined(str)){dataLabel.attr({text:str});isNew=false;}else{point.dataLabel=dataLabel=dataLabel.destroy();if(connector){point.connector=connector.destroy();}}}else if(defined(str)){attr={fill:options.backgroundColor,stroke:options.borderColor,'stroke-width':options.borderWidth,r:options.borderRadius||0,rotation:rotation,padding:options.padding,zIndex:1};for(name in attr){if(attr[name]===UNDEFINED){delete attr[name];}}\ndataLabel=point.dataLabel=series.chart.renderer[rotation?'text':'label'](str,0,-999,null,null,null,options.useHTML).attr(attr).css(extend(options.style,cursor&&{cursor:cursor})).add(dataLabelsGroup).shadow(options.shadow);}\nif(dataLabel){series.alignDataLabel(point,dataLabel,options,null,isNew);}}});}};Series.prototype.alignDataLabel=function(point,dataLabel,options,alignTo,isNew){var chart=this.chart,inverted=chart.inverted,plotX=pick(point.plotX,-999),plotY=pick(point.plotY,-999),bBox=dataLabel.getBBox(),visible=this.visible&&(point.series.forceDL||chart.isInsidePlot(plotX,mathRound(plotY),inverted)||(alignTo&&chart.isInsidePlot(plotX,inverted?alignTo.x+1:alignTo.y+alignTo.height-1,inverted))),alignAttr;if(visible){alignTo=extend({x:inverted?chart.plotWidth-plotY:plotX,y:mathRound(inverted?chart.plotHeight-plotX:plotY),width:0,height:0},alignTo);extend(options,{width:bBox.width,height:bBox.height});if(options.rotation){dataLabel[isNew?'attr':'animate']({x:alignTo.x+options.x+alignTo.width/2,y:alignTo.y+options.y+alignTo.height/2}).attr({align:options.align});}else{dataLabel.align(options,null,alignTo);alignAttr=dataLabel.alignAttr;if(pick(options.overflow,'justify')==='justify'){this.justifyDataLabel(dataLabel,options,alignAttr,bBox,alignTo,isNew);}else if(pick(options.crop,true)){visible=chart.isInsidePlot(alignAttr.x,alignAttr.y)&&chart.isInsidePlot(alignAttr.x+bBox.width,alignAttr.y+bBox.height);}}}\nif(!visible){dataLabel.attr({y:-999});dataLabel.placed=false;}};Series.prototype.justifyDataLabel=function(dataLabel,options,alignAttr,bBox,alignTo,isNew){var chart=this.chart,align=options.align,verticalAlign=options.verticalAlign,off,justified;off=alignAttr.x;if(off<0){if(align==='right'){options.align='left';}else{options.x=-off;}\njustified=true;}\noff=alignAttr.x+bBox.width;if(off>chart.plotWidth){if(align==='left'){options.align='right';}else{options.x=chart.plotWidth-off;}\njustified=true;}\noff=alignAttr.y;if(off<0){if(verticalAlign==='bottom'){options.verticalAlign='top';}else{options.y=-off;}\njustified=true;}\noff=alignAttr.y+bBox.height;if(off>chart.plotHeight){if(verticalAlign==='top'){options.verticalAlign='bottom';}else{options.y=chart.plotHeight-off;}\njustified=true;}\nif(justified){dataLabel.placed=!isNew;dataLabel.align(options,null,alignTo);}};if(seriesTypes.pie){seriesTypes.pie.prototype.drawDataLabels=function(){var series=this,data=series.data,point,chart=series.chart,options=series.options.dataLabels,connectorPadding=pick(options.connectorPadding,10),connectorWidth=pick(options.connectorWidth,1),plotWidth=chart.plotWidth,plotHeight=chart.plotHeight,connector,connectorPath,softConnector=pick(options.softConnector,true),distanceOption=options.distance,seriesCenter=series.center,radius=seriesCenter[2]/2,centerY=seriesCenter[1],outside=distanceOption>0,dataLabel,dataLabelWidth,labelPos,labelHeight,halves=[[],[]],x,y,visibility,rankArr,i,j,overflow=[0,0,0,0],sort=function(a,b){return b.y-a.y;};if(!series.visible||(!options.enabled&&!series._hasPointLabels)){return;}\nSeries.prototype.drawDataLabels.apply(series);each(data,function(point){if(point.dataLabel&&point.visible){halves[point.half].push(point);}});i=2;while(i--){var slots=[],slotsLength,usedSlots=[],points=halves[i],pos,bottom,length=points.length,slotIndex;if(!length){continue;}\nseries.sortByAngle(points,i-0.5);j=labelHeight=0;while(!labelHeight&&points[j]){labelHeight=points[j]&&points[j].dataLabel&&(points[j].dataLabel.getBBox().height||21);j++;}\nif(distanceOption>0){bottom=mathMin(centerY+radius+distanceOption,chart.plotHeight);for(pos=mathMax(0,centerY-radius-distanceOption);pos<=bottom;pos+=labelHeight){slots.push(pos);}\nslotsLength=slots.length;if(length>slotsLength){rankArr=[].concat(points);rankArr.sort(sort);j=length;while(j--){rankArr[j].rank=j;}\nj=length;while(j--){if(points[j].rank>=slotsLength){points.splice(j,1);}}\nlength=points.length;}\nfor(j=0;j<length;j++){point=points[j];labelPos=point.labelPos;var closest=9999,distance,slotI;for(slotI=0;slotI<slotsLength;slotI++){distance=mathAbs(slots[slotI]-labelPos[1]);if(distance<closest){closest=distance;slotIndex=slotI;}}\nif(slotIndex<j&&slots[j]!==null){slotIndex=j;}else if(slotsLength<length-j+slotIndex&&slots[j]!==null){slotIndex=slotsLength-length+j;while(slots[slotIndex]===null){slotIndex++;}}else{while(slots[slotIndex]===null){slotIndex++;}}\nusedSlots.push({i:slotIndex,y:slots[slotIndex]});slots[slotIndex]=null;}\nusedSlots.sort(sort);}\nfor(j=0;j<length;j++){var slot,naturalY;point=points[j];labelPos=point.labelPos;dataLabel=point.dataLabel;visibility=point.visible===false?HIDDEN:VISIBLE;naturalY=labelPos[1];if(distanceOption>0){slot=usedSlots.pop();slotIndex=slot.i;y=slot.y;if((naturalY>y&&slots[slotIndex+1]!==null)||(naturalY<y&&slots[slotIndex-1]!==null)){y=mathMin(mathMax(0,naturalY),chart.plotHeight);}}else{y=naturalY;}\nx=options.justify?seriesCenter[0]+(i?-1:1)*(radius+distanceOption):series.getX(y===centerY-radius-distanceOption||y===centerY+radius+distanceOption?naturalY:y,i);dataLabel._attr={visibility:visibility,align:labelPos[6]};dataLabel._pos={x:x+options.x+\n({left:connectorPadding,right:-connectorPadding}[labelPos[6]]||0),y:y+options.y-10};dataLabel.connX=x;dataLabel.connY=y;if(this.options.size===null){dataLabelWidth=dataLabel.width;if(x-dataLabelWidth<connectorPadding){overflow[3]=mathMax(mathRound(dataLabelWidth-x+connectorPadding),overflow[3]);}else if(x+dataLabelWidth>plotWidth-connectorPadding){overflow[1]=mathMax(mathRound(x+dataLabelWidth-plotWidth+connectorPadding),overflow[1]);}\nif(y-labelHeight/2<0){overflow[0]=mathMax(mathRound(-y+labelHeight/2),overflow[0]);}else if(y+labelHeight/2>plotHeight){overflow[2]=mathMax(mathRound(y+labelHeight/2-plotHeight),overflow[2]);}}}}\nif(arrayMax(overflow)===0||this.verifyDataLabelOverflow(overflow)){this.placeDataLabels();if(outside&&connectorWidth){each(this.points,function(point){connector=point.connector;labelPos=point.labelPos;dataLabel=point.dataLabel;if(dataLabel&&dataLabel._pos){visibility=dataLabel._attr.visibility;x=dataLabel.connX;y=dataLabel.connY;connectorPath=softConnector?[M,x+(labelPos[6]==='left'?5:-5),y,'C',x,y,2*labelPos[2]-labelPos[4],2*labelPos[3]-labelPos[5],labelPos[2],labelPos[3],L,labelPos[4],labelPos[5]]:[M,x+(labelPos[6]==='left'?5:-5),y,L,labelPos[2],labelPos[3],L,labelPos[4],labelPos[5]];if(connector){connector.animate({d:connectorPath});connector.attr('visibility',visibility);}else{point.connector=connector=series.chart.renderer.path(connectorPath).attr({'stroke-width':connectorWidth,stroke:options.connectorColor||point.color||'#606060',visibility:visibility}).add(series.dataLabelsGroup);}}else if(connector){point.connector=connector.destroy();}});}}};seriesTypes.pie.prototype.placeDataLabels=function(){each(this.points,function(point){var dataLabel=point.dataLabel,_pos;if(dataLabel){_pos=dataLabel._pos;if(_pos){dataLabel.attr(dataLabel._attr);dataLabel[dataLabel.moved?'animate':'attr'](_pos);dataLabel.moved=true;}else if(dataLabel){dataLabel.attr({y:-999});}}});};seriesTypes.pie.prototype.alignDataLabel=noop;seriesTypes.pie.prototype.verifyDataLabelOverflow=function(overflow){var center=this.center,options=this.options,centerOption=options.center,minSize=options.minSize||80,newSize=minSize,ret;if(centerOption[0]!==null){newSize=mathMax(center[2]-mathMax(overflow[1],overflow[3]),minSize);}else{newSize=mathMax(center[2]-overflow[1]-overflow[3],minSize);center[0]+=(overflow[3]-overflow[1])/2;}\nif(centerOption[1]!==null){newSize=mathMax(mathMin(newSize,center[2]-mathMax(overflow[0],overflow[2])),minSize);}else{newSize=mathMax(mathMin(newSize,center[2]-overflow[0]-overflow[2]),minSize);center[1]+=(overflow[0]-overflow[2])/2;}\nif(newSize<center[2]){center[2]=newSize;this.translate(center);each(this.points,function(point){if(point.dataLabel){point.dataLabel._pos=null;}});if(this.drawDataLabels){this.drawDataLabels();}}else{ret=true;}\nreturn ret;};}\nif(seriesTypes.column){seriesTypes.column.prototype.alignDataLabel=function(point,dataLabel,options,alignTo,isNew){var chart=this.chart,inverted=chart.inverted,dlBox=point.dlBox||point.shapeArgs,below=point.below||(point.plotY>pick(this.translatedThreshold,chart.plotSizeY)),inside=pick(options.inside,!!this.options.stacking);if(dlBox){alignTo=merge(dlBox);if(inverted){alignTo={x:chart.plotWidth-alignTo.y-alignTo.height,y:chart.plotHeight-alignTo.x-alignTo.width,width:alignTo.height,height:alignTo.width};}\nif(!inside){if(inverted){alignTo.x+=below?0:alignTo.width;alignTo.width=0;}else{alignTo.y+=below?alignTo.height:0;alignTo.height=0;}}}\noptions.align=pick(options.align,!inverted||inside?'center':below?'right':'left');options.verticalAlign=pick(options.verticalAlign,inverted||inside?'middle':below?'top':'bottom');Series.prototype.alignDataLabel.call(this,point,dataLabel,options,alignTo,isNew);};}\nvar TrackerMixin=Highcharts.TrackerMixin={drawTrackerPoint:function(){var series=this,chart=series.chart,pointer=chart.pointer,cursor=series.options.cursor,css=cursor&&{cursor:cursor},onMouseOver=function(e){var target=e.target,point;if(chart.hoverSeries!==series){series.onMouseOver();}\nwhile(target&&!point){point=target.point;target=target.parentNode;}\nif(point!==UNDEFINED&&point!==chart.hoverPoint){point.onMouseOver(e);}};each(series.points,function(point){if(point.graphic){point.graphic.element.point=point;}\nif(point.dataLabel){point.dataLabel.element.point=point;}});if(!series._hasTracking){each(series.trackerGroups,function(key){if(series[key]){series[key].addClass(PREFIX+'tracker').on('mouseover',onMouseOver).on('mouseout',function(e){pointer.onTrackerMouseOut(e);}).css(css);if(hasTouch){series[key].on('touchstart',onMouseOver);}}});series._hasTracking=true;}},drawTrackerGraph:function(){var series=this,options=series.options,trackByArea=options.trackByArea,trackerPath=[].concat(trackByArea?series.areaPath:series.graphPath),trackerPathLength=trackerPath.length,chart=series.chart,pointer=chart.pointer,renderer=chart.renderer,snap=chart.options.tooltip.snap,tracker=series.tracker,cursor=options.cursor,css=cursor&&{cursor:cursor},singlePoints=series.singlePoints,singlePoint,i,onMouseOver=function(){if(chart.hoverSeries!==series){series.onMouseOver();}},TRACKER_FILL='rgba(192,192,192,'+(hasSVG?0.0001:0.002)+')';if(trackerPathLength&&!trackByArea){i=trackerPathLength+1;while(i--){if(trackerPath[i]===M){trackerPath.splice(i+1,0,trackerPath[i+1]-snap,trackerPath[i+2],L);}\nif((i&&trackerPath[i]===M)||i===trackerPathLength){trackerPath.splice(i,0,L,trackerPath[i-2]+snap,trackerPath[i-1]);}}}\nfor(i=0;i<singlePoints.length;i++){singlePoint=singlePoints[i];trackerPath.push(M,singlePoint.plotX-snap,singlePoint.plotY,L,singlePoint.plotX+snap,singlePoint.plotY);}\nif(tracker){tracker.attr({d:trackerPath});}else{series.tracker=renderer.path(trackerPath).attr({'stroke-linejoin':'round',visibility:series.visible?VISIBLE:HIDDEN,stroke:TRACKER_FILL,fill:trackByArea?TRACKER_FILL:NONE,'stroke-width':options.lineWidth+(trackByArea?0:2*snap),zIndex:2}).add(series.group);each([series.tracker,series.markerGroup],function(tracker){tracker.addClass(PREFIX+'tracker').on('mouseover',onMouseOver).on('mouseout',function(e){pointer.onTrackerMouseOut(e);}).css(css);if(hasTouch){tracker.on('touchstart',onMouseOver);}});}}};if(seriesTypes.column){ColumnSeries.prototype.drawTracker=TrackerMixin.drawTrackerPoint;}\nif(seriesTypes.pie){seriesTypes.pie.prototype.drawTracker=TrackerMixin.drawTrackerPoint;}\nif(seriesTypes.scatter){ScatterSeries.prototype.drawTracker=TrackerMixin.drawTrackerPoint;}\nextend(Legend.prototype,{setItemEvents:function(item,legendItem,useHTML,itemStyle,itemHiddenStyle){var legend=this;(useHTML?legendItem:item.legendGroup).on('mouseover',function(){item.setState(HOVER_STATE);legendItem.css(legend.options.itemHoverStyle);}).on('mouseout',function(){legendItem.css(item.visible?itemStyle:itemHiddenStyle);item.setState();}).on('click',function(event){var strLegendItemClick='legendItemClick',fnLegendItemClick=function(){item.setVisible();};event={browserEvent:event};if(item.firePointEvent){item.firePointEvent(strLegendItemClick,event,fnLegendItemClick);}else{fireEvent(item,strLegendItemClick,event,fnLegendItemClick);}});},createCheckboxForItem:function(item){var legend=this;item.checkbox=createElement('input',{type:'checkbox',checked:item.selected,defaultChecked:item.selected},legend.options.itemCheckboxStyle,legend.chart.container);addEvent(item.checkbox,'click',function(event){var target=event.target;fireEvent(item,'checkboxClick',{checked:target.checked},function(){item.select();});});}});defaultOptions.legend.itemStyle.cursor='pointer';extend(Chart.prototype,{showResetZoom:function(){var chart=this,lang=defaultOptions.lang,btnOptions=chart.options.chart.resetZoomButton,theme=btnOptions.theme,states=theme.states,alignTo=btnOptions.relativeTo==='chart'?null:'plotBox';this.resetZoomButton=chart.renderer.button(lang.resetZoom,null,null,function(){chart.zoomOut();},theme,states&&states.hover).attr({align:btnOptions.position.align,title:lang.resetZoomTitle}).add().align(btnOptions.position,false,alignTo);},zoomOut:function(){var chart=this;fireEvent(chart,'selection',{resetSelection:true},function(){chart.zoom();});},zoom:function(event){var chart=this,hasZoomed,pointer=chart.pointer,displayButton=false,resetZoomButton;if(!event||event.resetSelection){each(chart.axes,function(axis){hasZoomed=axis.zoom();});}else{each(event.xAxis.concat(event.yAxis),function(axisData){var axis=axisData.axis,isXAxis=axis.isXAxis;if(pointer[isXAxis?'zoomX':'zoomY']||pointer[isXAxis?'pinchX':'pinchY']){hasZoomed=axis.zoom(axisData.min,axisData.max);if(axis.displayBtn){displayButton=true;}}});}\nresetZoomButton=chart.resetZoomButton;if(displayButton&&!resetZoomButton){chart.showResetZoom();}else if(!displayButton&&isObject(resetZoomButton)){chart.resetZoomButton=resetZoomButton.destroy();}\nif(hasZoomed){chart.redraw(pick(chart.options.chart.animation,event&&event.animation,chart.pointCount<100));}},pan:function(e,panning){var chart=this,hoverPoints=chart.hoverPoints,doRedraw;if(hoverPoints){each(hoverPoints,function(point){point.setState();});}\neach(panning==='xy'?[1,0]:[1],function(isX){var mousePos=e[isX?'chartX':'chartY'],axis=chart[isX?'xAxis':'yAxis'][0],startPos=chart[isX?'mouseDownX':'mouseDownY'],halfPointRange=(axis.pointRange||0)/2,extremes=axis.getExtremes(),newMin=axis.toValue(startPos-mousePos,true)+halfPointRange,newMax=axis.toValue(startPos+chart[isX?'plotWidth':'plotHeight']-mousePos,true)-halfPointRange;if(axis.series.length&&newMin>mathMin(extremes.dataMin,extremes.min)&&newMax<mathMax(extremes.dataMax,extremes.max)){axis.setExtremes(newMin,newMax,false,false,{trigger:'pan'});doRedraw=true;}\nchart[isX?'mouseDownX':'mouseDownY']=mousePos;});if(doRedraw){chart.redraw(false);}\ncss(chart.container,{cursor:'move'});}});extend(Point.prototype,{select:function(selected,accumulate){var point=this,series=point.series,chart=series.chart;selected=pick(selected,!point.selected);point.firePointEvent(selected?'select':'unselect',{accumulate:accumulate},function(){point.selected=point.options.selected=selected;series.options.data[inArray(point,series.data)]=point.options;point.setState(selected&&SELECT_STATE);if(!accumulate){each(chart.getSelectedPoints(),function(loopPoint){if(loopPoint.selected&&loopPoint!==point){loopPoint.selected=loopPoint.options.selected=false;series.options.data[inArray(loopPoint,series.data)]=loopPoint.options;loopPoint.setState(NORMAL_STATE);loopPoint.firePointEvent('unselect');}});}});},onMouseOver:function(e){var point=this,series=point.series,chart=series.chart,tooltip=chart.tooltip,hoverPoint=chart.hoverPoint;if(hoverPoint&&hoverPoint!==point){hoverPoint.onMouseOut();}\npoint.firePointEvent('mouseOver');if(tooltip&&(!tooltip.shared||series.noSharedTooltip)){tooltip.refresh(point,e);}\npoint.setState(HOVER_STATE);chart.hoverPoint=point;},onMouseOut:function(){var chart=this.series.chart,hoverPoints=chart.hoverPoints;this.firePointEvent('mouseOut');if(!hoverPoints||inArray(this,hoverPoints)===-1){this.setState();chart.hoverPoint=null;}},importEvents:function(){if(!this.hasImportedEvents){var point=this,options=merge(point.series.options.point,point.options),events=options.events,eventType;point.events=events;for(eventType in events){addEvent(point,eventType,events[eventType]);}\nthis.hasImportedEvents=true;}},setState:function(state,move){var point=this,plotX=point.plotX,plotY=point.plotY,series=point.series,stateOptions=series.options.states,markerOptions=defaultPlotOptions[series.type].marker&&series.options.marker,normalDisabled=markerOptions&&!markerOptions.enabled,markerStateOptions=markerOptions&&markerOptions.states[state],stateDisabled=markerStateOptions&&markerStateOptions.enabled===false,stateMarkerGraphic=series.stateMarkerGraphic,pointMarker=point.marker||{},chart=series.chart,radius,halo=series.halo,haloOptions,newSymbol,pointAttr;state=state||NORMAL_STATE;pointAttr=point.pointAttr[state]||series.pointAttr[state];if((state===point.state&&!move)||(point.selected&&state!==SELECT_STATE)||(stateOptions[state]&&stateOptions[state].enabled===false)||(state&&(stateDisabled||(normalDisabled&&markerStateOptions.enabled===false)))||(state&&pointMarker.states&&pointMarker.states[state]&&pointMarker.states[state].enabled===false)){return;}\nif(point.graphic){radius=markerOptions&&point.graphic.symbolName&&pointAttr.r;point.graphic.attr(merge(pointAttr,radius?{x:plotX-radius,y:plotY-radius,width:2*radius,height:2*radius}:{}));if(stateMarkerGraphic){stateMarkerGraphic.hide();}}else{if(state&&markerStateOptions){radius=markerStateOptions.radius;newSymbol=pointMarker.symbol||series.symbol;if(stateMarkerGraphic&&stateMarkerGraphic.currentSymbol!==newSymbol){stateMarkerGraphic=stateMarkerGraphic.destroy();}\nif(!stateMarkerGraphic){if(newSymbol){series.stateMarkerGraphic=stateMarkerGraphic=chart.renderer.symbol(newSymbol,plotX-radius,plotY-radius,2*radius,2*radius).attr(pointAttr).add(series.markerGroup);stateMarkerGraphic.currentSymbol=newSymbol;}}else{stateMarkerGraphic[move?'animate':'attr']({x:plotX-radius,y:plotY-radius});}}\nif(stateMarkerGraphic){stateMarkerGraphic[state&&chart.isInsidePlot(plotX,plotY,chart.inverted)?'show':'hide']();}}\nhaloOptions=stateOptions[state]&&stateOptions[state].halo;if(haloOptions&&haloOptions.size){if(!halo){series.halo=halo=chart.renderer.path().add(series.seriesGroup);}\nhalo.attr(extend({fill:Color(point.color||series.color).setOpacity(haloOptions.opacity).get()},haloOptions.attributes))[move?'animate':'attr']({d:point.haloPath(haloOptions.size)});}else if(halo){halo.attr({d:[]});}\npoint.state=state;},haloPath:function(size){var series=this.series,chart=series.chart,plotBox=series.getPlotBox(),inverted=chart.inverted;return chart.renderer.symbols.circle(plotBox.translateX+(inverted?series.yAxis.len-this.plotY:this.plotX)-size,plotBox.translateY+(inverted?series.xAxis.len-this.plotX:this.plotY)-size,size*2,size*2);}});extend(Series.prototype,{onMouseOver:function(){var series=this,chart=series.chart,hoverSeries=chart.hoverSeries;if(hoverSeries&&hoverSeries!==series){hoverSeries.onMouseOut();}\nif(series.options.events.mouseOver){fireEvent(series,'mouseOver');}\nseries.setState(HOVER_STATE);chart.hoverSeries=series;},onMouseOut:function(){var series=this,options=series.options,chart=series.chart,tooltip=chart.tooltip,hoverPoint=chart.hoverPoint;if(hoverPoint){hoverPoint.onMouseOut();}\nif(series&&options.events.mouseOut){fireEvent(series,'mouseOut');}\nif(tooltip&&!options.stickyTracking&&(!tooltip.shared||series.noSharedTooltip)){tooltip.hide();}\nseries.setState();chart.hoverSeries=null;},setState:function(state){var series=this,options=series.options,graph=series.graph,graphNeg=series.graphNeg,stateOptions=options.states,lineWidth=options.lineWidth,attribs;state=state||NORMAL_STATE;if(series.state!==state){series.state=state;if(stateOptions[state]&&stateOptions[state].enabled===false){return;}\nif(state){lineWidth=stateOptions[state].lineWidth||lineWidth+(stateOptions[state].lineWidthPlus||0);}\nif(graph&&!graph.dashstyle){attribs={'stroke-width':lineWidth};graph.attr(attribs);if(graphNeg){graphNeg.attr(attribs);}}}},setVisible:function(vis,redraw){var series=this,chart=series.chart,legendItem=series.legendItem,showOrHide,ignoreHiddenSeries=chart.options.chart.ignoreHiddenSeries,oldVisibility=series.visible;series.visible=vis=series.userOptions.visible=vis===UNDEFINED?!oldVisibility:vis;showOrHide=vis?'show':'hide';each(['group','dataLabelsGroup','markerGroup','tracker'],function(key){if(series[key]){series[key][showOrHide]();}});if(chart.hoverSeries===series){series.onMouseOut();}\nif(legendItem){chart.legend.colorizeItem(series,vis);}\nseries.isDirty=true;if(series.options.stacking){each(chart.series,function(otherSeries){if(otherSeries.options.stacking&&otherSeries.visible){otherSeries.isDirty=true;}});}\neach(series.linkedSeries,function(otherSeries){otherSeries.setVisible(vis,false);});if(ignoreHiddenSeries){chart.isDirtyBox=true;}\nif(redraw!==false){chart.redraw();}\nfireEvent(series,showOrHide);},setTooltipPoints:function(renew){var series=this,points=[],pointsLength,low,high,xAxis=series.xAxis,xExtremes=xAxis&&xAxis.getExtremes(),axisLength=xAxis?(xAxis.tooltipLen||xAxis.len):series.chart.plotSizeX,point,pointX,nextPoint,i,tooltipPoints=[];if(series.options.enableMouseTracking===false||series.singularTooltips){return;}\nif(renew){series.tooltipPoints=null;}\neach(series.segments||series.points,function(segment){points=points.concat(segment);});if(xAxis&&xAxis.reversed){points=points.reverse();}\nif(series.orderTooltipPoints){series.orderTooltipPoints(points);}\npointsLength=points.length;for(i=0;i<pointsLength;i++){point=points[i];pointX=point.x;if(pointX>=xExtremes.min&&pointX<=xExtremes.max){nextPoint=points[i+1];low=high===UNDEFINED?0:high+1;high=points[i+1]?mathMin(mathMax(0,mathFloor((point.clientX+(nextPoint?(nextPoint.wrappedClientX||nextPoint.clientX):axisLength))/2)),axisLength):axisLength;while(low>=0&&low<=high){tooltipPoints[low++]=point;}}}\nseries.tooltipPoints=tooltipPoints;},show:function(){this.setVisible(true);},hide:function(){this.setVisible(false);},select:function(selected){var series=this;series.selected=selected=(selected===UNDEFINED)?!series.selected:selected;if(series.checkbox){series.checkbox.checked=selected;}\nfireEvent(series,selected?'select':'unselect');},drawTracker:TrackerMixin.drawTrackerGraph});extend(Highcharts,{Axis:Axis,Chart:Chart,Color:Color,Point:Point,Tick:Tick,Renderer:Renderer,Series:Series,SVGElement:SVGElement,SVGRenderer:SVGRenderer,arrayMin:arrayMin,arrayMax:arrayMax,charts:charts,dateFormat:dateFormat,format:format,pathAnim:pathAnim,getOptions:getOptions,hasBidiBug:hasBidiBug,isTouchDevice:isTouchDevice,numberFormat:numberFormat,seriesTypes:seriesTypes,setOptions:setOptions,addEvent:addEvent,removeEvent:removeEvent,createElement:createElement,discardElement:discardElement,css:css,each:each,extend:extend,map:map,merge:merge,pick:pick,splat:splat,extendClass:extendClass,pInt:pInt,wrap:wrap,svg:hasSVG,canvas:useCanVG,vml:!hasSVG&&!useCanVG,product:PRODUCT,version:VERSION});}());","js/thirdparty/highcharts/map/highmap.js":"\n(function(Highcharts){var UNDEFINED,Axis=Highcharts.Axis,Chart=Highcharts.Chart,Color=Highcharts.Color,Point=Highcharts.Point,Pointer=Highcharts.Pointer,Legend=Highcharts.Legend,LegendSymbolMixin=Highcharts.LegendSymbolMixin,Renderer=Highcharts.Renderer,Series=Highcharts.Series,SVGRenderer=Highcharts.SVGRenderer,VMLRenderer=Highcharts.VMLRenderer,addEvent=Highcharts.addEvent,each=Highcharts.each,extend=Highcharts.extend,extendClass=Highcharts.extendClass,merge=Highcharts.merge,pick=Highcharts.pick,numberFormat=Highcharts.numberFormat,defaultOptions=Highcharts.getOptions(),seriesTypes=Highcharts.seriesTypes,defaultPlotOptions=defaultOptions.plotOptions,wrap=Highcharts.wrap,noop=function(){};wrap(Axis.prototype,'getSeriesExtremes',function(proceed){var isXAxis=this.isXAxis,dataMin,dataMax,xData=[],useMapGeometry;if(isXAxis){each(this.series,function(series,i){if(series.useMapGeometry){xData[i]=series.xData;series.xData=[];}});}\nproceed.call(this);if(isXAxis){dataMin=pick(this.dataMin,Number.MAX_VALUE);dataMax=pick(this.dataMax,Number.MIN_VALUE);each(this.series,function(series,i){if(series.useMapGeometry){dataMin=Math.min(dataMin,pick(series.minX,dataMin));dataMax=Math.max(dataMax,pick(series.maxX,dataMin));series.xData=xData[i];useMapGeometry=true;}});if(useMapGeometry){this.dataMin=dataMin;this.dataMax=dataMax;}}});wrap(Axis.prototype,'setAxisTranslation',function(proceed){var chart=this.chart,mapRatio,plotRatio=chart.plotWidth/chart.plotHeight,adjustedAxisLength,xAxis=chart.xAxis[0],padAxis,fixTo,fixDiff;proceed.call(this);if(chart.options.chart.preserveAspectRatio&&this.coll==='yAxis'&&xAxis.transA!==UNDEFINED){this.transA=xAxis.transA=Math.min(this.transA,xAxis.transA);mapRatio=plotRatio/((xAxis.max-xAxis.min)/(this.max-this.min));padAxis=mapRatio<1?this:xAxis;adjustedAxisLength=(padAxis.max-padAxis.min)*padAxis.transA;padAxis.pixelPadding=padAxis.len-adjustedAxisLength;padAxis.minPixelPadding=padAxis.pixelPadding/2;fixTo=padAxis.fixTo;if(fixTo){fixDiff=fixTo[1]-padAxis.toValue(fixTo[0],true);fixDiff*=padAxis.transA;if(Math.abs(fixDiff)>padAxis.minPixelPadding||(padAxis.min===padAxis.dataMin&&padAxis.max===padAxis.dataMax)){fixDiff=0;}\npadAxis.minPixelPadding-=fixDiff;}}});wrap(Axis.prototype,'render',function(proceed){proceed.call(this);this.fixTo=null;});var ColorAxis=Highcharts.ColorAxis=function(){this.isColorAxis=true;this.init.apply(this,arguments);};extend(ColorAxis.prototype,Axis.prototype);extend(ColorAxis.prototype,{defaultColorAxisOptions:{lineWidth:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:true,endOnTick:true,offset:0,marker:{animation:{duration:50},color:'gray',width:0.01},labels:{overflow:'justify'},minColor:'#EFEFFF',maxColor:'#003875',tickLength:5},init:function(chart,userOptions){var horiz=chart.options.legend.layout!=='vertical',options;options=merge(this.defaultColorAxisOptions,{side:horiz?2:1,reversed:!horiz},userOptions,{isX:horiz,opposite:!horiz,showEmpty:false,title:null,isColor:true});Axis.prototype.init.call(this,chart,options);if(userOptions.dataClasses){this.initDataClasses(userOptions);}\nthis.initStops(userOptions);this.isXAxis=true;this.horiz=horiz;this.zoomEnabled=false;},tweenColors:function(from,to,pos){var hasAlpha=(to.rgba[3]!==1||from.rgba[3]!==1);return(hasAlpha?'rgba(':'rgb(')+\nMath.round(to.rgba[0]+(from.rgba[0]-to.rgba[0])*(1-pos))+','+\nMath.round(to.rgba[1]+(from.rgba[1]-to.rgba[1])*(1-pos))+','+\nMath.round(to.rgba[2]+(from.rgba[2]-to.rgba[2])*(1-pos))+\n(hasAlpha?(','+(to.rgba[3]+(from.rgba[3]-to.rgba[3])*(1-pos))):'')+')';},initDataClasses:function(userOptions){var axis=this,chart=this.chart,dataClasses,colorCounter=0,options=this.options;this.dataClasses=dataClasses=[];this.legendItems=[];each(userOptions.dataClasses,function(dataClass,i){var colors;dataClass=merge(dataClass);dataClasses.push(dataClass);if(!dataClass.color){if(options.dataClassColor==='category'){colors=chart.options.colors;dataClass.color=colors[colorCounter++];if(colorCounter===colors.length){colorCounter=0;}}else{dataClass.color=axis.tweenColors(Color(options.minColor),Color(options.maxColor),i/(userOptions.dataClasses.length-1));}}});},initStops:function(userOptions){this.stops=userOptions.stops||[[0,this.options.minColor],[1,this.options.maxColor]];each(this.stops,function(stop){stop.color=Color(stop[1]);});},setOptions:function(userOptions){Axis.prototype.setOptions.call(this,userOptions);this.options.crosshair=this.options.marker;this.coll='colorAxis';},setAxisSize:function(){var symbol=this.legendSymbol,chart=this.chart,x,y,width,height;if(symbol){this.left=x=symbol.attr('x');this.top=y=symbol.attr('y');this.width=width=symbol.attr('width');this.height=height=symbol.attr('height');this.right=chart.chartWidth-x-width;this.bottom=chart.chartHeight-y-height;this.len=this.horiz?width:height;this.pos=this.horiz?x:y;}},toColor:function(value,point){var pos,stops=this.stops,from,to,color,dataClasses=this.dataClasses,dataClass,i;if(dataClasses){i=dataClasses.length;while(i--){dataClass=dataClasses[i];from=dataClass.from;to=dataClass.to;if((from===UNDEFINED||value>=from)&&(to===UNDEFINED||value<=to)){color=dataClass.color;if(point){point.dataClass=i;}\nbreak;}}}else{if(this.isLog){value=this.val2lin(value);}\npos=1-((this.max-value)/((this.max-this.min)||1));i=stops.length;while(i--){if(pos>stops[i][0]){break;}}\nfrom=stops[i]||stops[i+1];to=stops[i+1]||from;pos=1-(to[0]-pos)/((to[0]-from[0])||1);color=this.tweenColors(from.color,to.color,pos);}\nreturn color;},getOffset:function(){var group=this.legendGroup,sideOffset=this.chart.axisOffset[this.side];if(group){Axis.prototype.getOffset.call(this);if(!this.axisGroup.parentGroup){this.axisGroup.add(group);this.gridGroup.add(group);this.labelGroup.add(group);this.added=true;}\nthis.chart.axisOffset[this.side]=sideOffset;}},setLegendColor:function(){var grad,horiz=this.horiz,options=this.options;grad=horiz?[0,0,1,0]:[0,0,0,1];this.legendColor={linearGradient:{x1:grad[0],y1:grad[1],x2:grad[2],y2:grad[3]},stops:options.stops||[[0,options.minColor],[1,options.maxColor]]};},drawLegendSymbol:function(legend,item){var padding=legend.padding,legendOptions=legend.options,horiz=this.horiz,box,width=pick(legendOptions.symbolWidth,horiz?200:12),height=pick(legendOptions.symbolHeight,horiz?12:200),labelPadding=pick(legendOptions.labelPadding,horiz?16:30),itemDistance=pick(legendOptions.itemDistance,10);this.setLegendColor();item.legendSymbol=this.chart.renderer.rect(0,legend.baseline-11,width,height).attr({zIndex:1}).add(item.legendGroup);box=item.legendSymbol.getBBox();this.legendItemWidth=width+padding+(horiz?itemDistance:labelPadding);this.legendItemHeight=height+padding+(horiz?labelPadding:0);},setState:noop,visible:true,setVisible:noop,getSeriesExtremes:function(){var series;if(this.series.length){series=this.series[0];this.dataMin=series.valueMin;this.dataMax=series.valueMax;}},drawCrosshair:function(e,point){var newCross=!this.cross,plotX=point&&point.plotX,plotY=point&&point.plotY,crossPos,axisPos=this.pos,axisLen=this.len;if(point){crossPos=this.toPixels(point.value);if(crossPos<axisPos){crossPos=axisPos-2;}else if(crossPos>axisPos+axisLen){crossPos=axisPos+axisLen+2;}\npoint.plotX=crossPos;point.plotY=this.len-crossPos;Axis.prototype.drawCrosshair.call(this,e,point);point.plotX=plotX;point.plotY=plotY;if(!newCross&&this.cross){this.cross.attr({fill:this.crosshair.color}).add(this.labelGroup);}}},getPlotLinePath:function(a,b,c,d,pos){if(pos){return this.horiz?['M',pos-4,this.top-6,'L',pos+4,this.top-6,pos,this.top,'Z']:['M',this.left,pos,'L',this.left-6,pos+6,this.left-6,pos-6,'Z'];}else{return Axis.prototype.getPlotLinePath.call(this,a,b,c,d);}},update:function(newOptions,redraw){each(this.series,function(series){series.isDirtyData=true;});Axis.prototype.update.call(this,newOptions,redraw);if(this.legendItem){this.setLegendColor();this.chart.legend.colorizeItem(this,true);}},getDataClassLegendSymbols:function(){var axis=this,chart=this.chart,legendItems=this.legendItems,legendOptions=chart.options.legend,valueDecimals=legendOptions.valueDecimals,valueSuffix=legendOptions.valueSuffix||'',name;if(!legendItems.length){each(this.dataClasses,function(dataClass,i){var from=dataClass.from,to=dataClass.to;name='';if(from===UNDEFINED){name='< ';}else if(to===UNDEFINED){name='> ';}\nif(from!==UNDEFINED){name+=numberFormat(from,valueDecimals)+valueSuffix;}\nif(from!==UNDEFINED&&to!==UNDEFINED){name+=' - ';}\nif(to!==UNDEFINED){name+=numberFormat(to,valueDecimals)+valueSuffix;}\nlegendItems.push(extend({chart:chart,name:name,dataClass:i,options:{},drawLegendSymbol:LegendSymbolMixin.drawRectangle,visible:true,setState:noop,setVisible:function(){var vis=this.visible=!this.visible;each(axis.series,function(series){each(series.points,function(point){if(point.dataClass===i){point.setVisible(vis);}});});chart.legend.colorizeItem(this,vis);}},dataClass));});}\nreturn legendItems;},name:''});wrap(Chart.prototype,'getAxes',function(proceed){var options=this.options,chart=this,colorAxisOptions=options.colorAxis=Highcharts.splat(options.colorAxis||{});proceed.call(this);this.colorAxis=[];if(colorAxisOptions){each(colorAxisOptions,function(axis,i){axis.index=i;proceed=new ColorAxis(chart,axis);});}});wrap(Legend.prototype,'getAllItems',function(proceed){var allItems=[],chart=this.chart,colorAxes=this.chart.colorAxis;if(colorAxes){each(colorAxes,function(colorAxis){if(colorAxis.series&&colorAxis.series.length>0){var groupItem=colorAxis.getGroupLegendItem&&colorAxis.getGroupLegendItem();if(groupItem){allItems.push(groupItem);}\nif(colorAxis.options.dataClasses){allItems=allItems.concat(colorAxis.getDataClassLegendSymbols());}else{allItems.push(colorAxis);}\neach(colorAxis.series,function(series){series.options.showInLegend=false;});}})}\nreturn allItems.concat(proceed.call(this));});var colorSeriesMixin={pointAttrToOptions:{stroke:'borderColor','stroke-width':'borderWidth',fill:'color',dashstyle:'dashStyle'},pointArrayMap:['value'],axisTypes:['xAxis','yAxis','colorAxis'],optionalAxis:'colorAxis',trackerGroups:['group','markerGroup','dataLabelsGroup'],getSymbol:noop,parallelArrays:['x','y','value'],translateColors:function(){var series=this,nullColor=this.options.nullColor,colorAxis=this.colorAxis;each(this.data,function(point){var value=point.value,color;color=value===null?nullColor:(colorAxis&&value!==undefined)?colorAxis.toColor(value,point):point.color||series.color;if(color){point.color=color;}});}};wrap(SVGRenderer.prototype,'buildText',function(proceed,wrapper){var textStroke=wrapper.styles&&wrapper.styles.HcTextStroke;proceed.call(this,wrapper);if(textStroke&&wrapper.applyTextStroke){wrapper.applyTextStroke(textStroke);}});SVGRenderer.prototype.Element.prototype.applyTextStroke=function(textStroke){var elem=this.element,tspans,firstChild;textStroke=textStroke.split(' ');tspans=elem.getElementsByTagName('tspan');firstChild=elem.firstChild;this.ySetter=this.xSetter;each([].slice.call(tspans),function(tspan,y){var clone;if(y===0){tspan.setAttribute('x',elem.getAttribute('x'));if((y=elem.getAttribute('y'))!==null){tspan.setAttribute('y',y);}}\nclone=tspan.cloneNode(1);clone.setAttribute('stroke',textStroke[1]);clone.setAttribute('stroke-width',textStroke[0]);clone.setAttribute('stroke-linejoin','round');elem.insertBefore(clone,firstChild);});};extend(Chart.prototype,{renderMapNavigation:function(){var chart=this,options=this.options.mapNavigation,buttons=options.buttons,n,button,buttonOptions,attr,states,outerHandler=function(){this.handler.call(chart);};if(pick(options.enableButtons,options.enabled)&&!chart.renderer.forExport){for(n in buttons){if(buttons.hasOwnProperty(n)){buttonOptions=merge(options.buttonOptions,buttons[n]);attr=buttonOptions.theme;states=attr.states;button=chart.renderer.button(buttonOptions.text,0,0,outerHandler,attr,states&&states.hover,states&&states.select,0,n==='zoomIn'?'topbutton':'bottombutton').attr({width:buttonOptions.width,height:buttonOptions.height,title:chart.options.lang[n],zIndex:5}).css(buttonOptions.style).add();button.handler=buttonOptions.onclick;button.align(extend(buttonOptions,{width:button.width,height:2*button.height}),null,buttonOptions.alignTo);}}}},fitToBox:function(inner,outer){each([['x','width'],['y','height']],function(dim){var pos=dim[0],size=dim[1];if(inner[pos]+inner[size]>outer[pos]+outer[size]){if(inner[size]>outer[size]){inner[size]=outer[size];inner[pos]=outer[pos];}else{inner[pos]=outer[pos]+outer[size]-inner[size];}}\nif(inner[size]>outer[size]){inner[size]=outer[size];}\nif(inner[pos]<outer[pos]){inner[pos]=outer[pos];}});return inner;},mapZoom:function(howMuch,centerXArg,centerYArg,mouseX,mouseY){var chart=this,xAxis=chart.xAxis[0],xRange=xAxis.max-xAxis.min,centerX=pick(centerXArg,xAxis.min+xRange/2),newXRange=xRange*howMuch,yAxis=chart.yAxis[0],yRange=yAxis.max-yAxis.min,centerY=pick(centerYArg,yAxis.min+yRange/2),newYRange=yRange*howMuch,fixToX=mouseX?((mouseX-xAxis.pos)/xAxis.len):0.5,fixToY=mouseY?((mouseY-yAxis.pos)/yAxis.len):0.5,newXMin=centerX-newXRange*fixToX,newYMin=centerY-newYRange*fixToY,newExt=chart.fitToBox({x:newXMin,y:newYMin,width:newXRange,height:newYRange},{x:xAxis.dataMin,y:yAxis.dataMin,width:xAxis.dataMax-xAxis.dataMin,height:yAxis.dataMax-yAxis.dataMin});if(mouseX){xAxis.fixTo=[mouseX-xAxis.pos,centerXArg];}\nif(mouseY){yAxis.fixTo=[mouseY-yAxis.pos,centerYArg];}\nif(howMuch!==undefined){xAxis.setExtremes(newExt.x,newExt.x+newExt.width,false);yAxis.setExtremes(newExt.y,newExt.y+newExt.height,false);}else{xAxis.setExtremes(undefined,undefined,false);yAxis.setExtremes(undefined,undefined,false);}\nchart.redraw();}});wrap(Chart.prototype,'render',function(proceed){var chart=this,mapNavigation=chart.options.mapNavigation;chart.renderMapNavigation();proceed.call(chart);if(pick(mapNavigation.enableDoubleClickZoom,mapNavigation.enabled)||mapNavigation.enableDoubleClickZoomTo){addEvent(chart.container,'dblclick',function(e){chart.pointer.onContainerDblClick(e);});}\nif(pick(mapNavigation.enableMouseWheelZoom,mapNavigation.enabled)){addEvent(chart.container,document.onmousewheel===undefined?'DOMMouseScroll':'mousewheel',function(e){chart.pointer.onContainerMouseWheel(e);return false;});}});extend(Pointer.prototype,{onContainerDblClick:function(e){var chart=this.chart;e=this.normalize(e);if(chart.options.mapNavigation.enableDoubleClickZoomTo){if(chart.pointer.inClass(e.target,'highcharts-tracker')){chart.hoverPoint.zoomTo();}}else if(chart.isInsidePlot(e.chartX-chart.plotLeft,e.chartY-chart.plotTop)){chart.mapZoom(0.5,chart.xAxis[0].toValue(e.chartX),chart.yAxis[0].toValue(e.chartY),e.chartX,e.chartY);}},onContainerMouseWheel:function(e){var chart=this.chart,delta;e=this.normalize(e);delta=e.detail||-(e.wheelDelta/120);if(chart.isInsidePlot(e.chartX-chart.plotLeft,e.chartY-chart.plotTop)){chart.mapZoom(Math.pow(2,delta),chart.xAxis[0].toValue(e.chartX),chart.yAxis[0].toValue(e.chartY),e.chartX,e.chartY);}}});wrap(Pointer.prototype,'init',function(proceed,chart,options){proceed.call(this,chart,options);if(pick(options.mapNavigation.enableTouchZoom,options.mapNavigation.enabled)){this.pinchX=this.pinchHor=this.pinchY=this.pinchVert=true;}});wrap(Pointer.prototype,'pinchTranslate',function(proceed,pinchDown,touches,transform,selectionMarker,clip,lastValidTouch){var xBigger;proceed.call(this,pinchDown,touches,transform,selectionMarker,clip,lastValidTouch);if(this.chart.options.chart.type==='map'){xBigger=transform.scaleX>transform.scaleY;this.pinchTranslateDirection(!xBigger,pinchDown,touches,transform,selectionMarker,clip,lastValidTouch,xBigger?transform.scaleX:transform.scaleY);}});defaultPlotOptions.map=merge(defaultPlotOptions.scatter,{allAreas:true,animation:false,nullColor:'#F8F8F8',borderColor:'silver',borderWidth:1,marker:null,stickyTracking:false,dataLabels:{formatter:function(){return this.point.value;},verticalAlign:'middle',crop:false,overflow:false,padding:0,style:{color:'white',fontWeight:'bold',HcTextStroke:'3px rgba(0,0,0,0.5)'}},turboThreshold:0,tooltip:{followPointer:true,pointFormat:'{point.name}: {point.value}<br/>'},states:{normal:{animation:true},hover:{brightness:0.2,halo:null}}});var MapAreaPoint=extendClass(Point,{applyOptions:function(options,x){var point=Point.prototype.applyOptions.call(this,options,x),series=this.series,joinBy=series.joinBy,mapPoint;if(series.mapData){mapPoint=point[joinBy[1]]&&series.mapMap[point[joinBy[1]]];if(mapPoint){if(series.xyFromShape){point.x=mapPoint._midX;point.y=mapPoint._midY;}\nextend(point,mapPoint);}else{point.value=point.value||null;}}\nreturn point;},setVisible:function(vis){var point=this,method=vis?'show':'hide';each(['graphic','dataLabel'],function(key){if(point[key]){point[key][method]();}});},onMouseOver:function(e){clearTimeout(this.colorInterval);if(this.value!==null){Point.prototype.onMouseOver.call(this,e);}},onMouseOut:function(){var point=this,start=+new Date(),normalColor=Color(point.color),hoverColor=Color(point.pointAttr.hover.fill),animation=point.series.options.states.normal.animation,duration=animation&&(animation.duration||500),fill;if(duration&&normalColor.rgba.length===4&&hoverColor.rgba.length===4&&point.state!=='select'){fill=point.pointAttr[''].fill;delete point.pointAttr[''].fill;clearTimeout(point.colorInterval);point.colorInterval=setInterval(function(){var pos=(new Date()-start)/duration,graphic=point.graphic;if(pos>1){pos=1;}\nif(graphic){graphic.attr('fill',ColorAxis.prototype.tweenColors.call(0,hoverColor,normalColor,pos));}\nif(pos>=1){clearTimeout(point.colorInterval);}},13);}\nPoint.prototype.onMouseOut.call(point);if(fill){point.pointAttr[''].fill=fill;}},zoomTo:function(){var point=this,series=point.series;series.xAxis.setExtremes(point._minX,point._maxX,false);series.yAxis.setExtremes(point._minY,point._maxY,false);series.chart.redraw();}});seriesTypes.map=extendClass(seriesTypes.scatter,merge(colorSeriesMixin,{type:'map',pointClass:MapAreaPoint,supportsDrilldown:true,getExtremesFromAll:true,useMapGeometry:true,forceDL:true,getBox:function(paths){var MAX_VALUE=Number.MAX_VALUE,maxX=-MAX_VALUE,minX=MAX_VALUE,maxY=-MAX_VALUE,minY=MAX_VALUE,minRange=MAX_VALUE,xAxis=this.xAxis,yAxis=this.yAxis,hasBox;each(paths||[],function(point){if(point.path){if(typeof point.path==='string'){point.path=Highcharts.splitPath(point.path);}\nvar path=point.path||[],i=path.length,even=false,pointMaxX=-MAX_VALUE,pointMinX=MAX_VALUE,pointMaxY=-MAX_VALUE,pointMinY=MAX_VALUE,properties=point.properties;if(!point._foundBox){while(i--){if(typeof path[i]==='number'&&!isNaN(path[i])){if(even){pointMaxX=Math.max(pointMaxX,path[i]);pointMinX=Math.min(pointMinX,path[i]);}else{pointMaxY=Math.max(pointMaxY,path[i]);pointMinY=Math.min(pointMinY,path[i]);}\neven=!even;}}\npoint._midX=pointMinX+(pointMaxX-pointMinX)*(point.middleX||(properties&&properties['hc-middle-x'])||0.5);point._midY=pointMinY+(pointMaxY-pointMinY)*(point.middleY||(properties&&properties['hc-middle-y'])||0.5);point._maxX=pointMaxX;point._minX=pointMinX;point._maxY=pointMaxY;point._minY=pointMinY;point.labelrank=pick(point.labelrank,(pointMaxX-pointMinX)*(pointMaxY-pointMinY));point._foundBox=true;}\nmaxX=Math.max(maxX,point._maxX);minX=Math.min(minX,point._minX);maxY=Math.max(maxY,point._maxY);minY=Math.min(minY,point._minY);minRange=Math.min(point._maxX-point._minX,point._maxY-point._minY,minRange);hasBox=true;}});if(hasBox){this.minY=Math.min(minY,pick(this.minY,MAX_VALUE));this.maxY=Math.max(maxY,pick(this.maxY,-MAX_VALUE));this.minX=Math.min(minX,pick(this.minX,MAX_VALUE));this.maxX=Math.max(maxX,pick(this.maxX,-MAX_VALUE));if(xAxis&&xAxis.options.minRange===undefined){xAxis.minRange=Math.min(5*minRange,(this.maxX-this.minX)/5,xAxis.minRange||MAX_VALUE);}\nif(yAxis&&yAxis.options.minRange===undefined){yAxis.minRange=Math.min(5*minRange,(this.maxY-this.minY)/5,yAxis.minRange||MAX_VALUE);}}},getExtremes:function(){Series.prototype.getExtremes.call(this,this.valueData);if(this.chart.hasRendered&&this.isDirtyData){this.getBox(this.options.data);}\nthis.valueMin=this.dataMin;this.valueMax=this.dataMax;this.dataMin=this.minY;this.dataMax=this.maxY;},translatePath:function(path){var series=this,even=false,xAxis=series.xAxis,yAxis=series.yAxis,xMin=xAxis.min,xTransA=xAxis.transA,xMinPixelPadding=xAxis.minPixelPadding,yMin=yAxis.min,yTransA=yAxis.transA,yMinPixelPadding=yAxis.minPixelPadding,i,ret=[];if(path){i=path.length;while(i--){if(typeof path[i]==='number'){ret[i]=even?(path[i]-xMin)*xTransA+xMinPixelPadding:(path[i]-yMin)*yTransA+yMinPixelPadding;even=!even;}else{ret[i]=path[i];}}}\nreturn ret;},setData:function(data,redraw){var options=this.options,mapData=options.mapData,joinBy=options.joinBy,joinByNull=joinBy===null,dataUsed=[],mapPoint,props,i;if(joinByNull){joinBy='_i';}\njoinBy=this.joinBy=Highcharts.splat(joinBy);if(!joinBy[1]){joinBy[1]=joinBy[0];}\nif(data){each(data,function(val,i){if(typeof val==='number'){data[i]={value:val};}\nif(joinByNull){data[i]._i=i;}});}\nthis.getBox(data);if(mapData){if(mapData.type==='FeatureCollection'){mapData=Highcharts.geojson(mapData,this.type,this);}\nthis.getBox(mapData);this.mapData=mapData;this.mapMap={};for(i=0;i<mapData.length;i++){mapPoint=mapData[i];props=mapPoint.properties;mapPoint._i=i;if(joinBy[0]&&props&&props[joinBy[0]]){mapPoint[joinBy[0]]=props[joinBy[0]];}\nthis.mapMap[mapPoint[joinBy[0]]]=mapPoint;}\nif(options.allAreas){data=data||[];if(joinBy[1]){each(data,function(point){dataUsed.push(point[joinBy[1]]);});}\ndataUsed='|'+dataUsed.join('|')+'|';each(mapData,function(mapPoint){if(!joinBy[0]||dataUsed.indexOf('|'+mapPoint[joinBy[0]]+'|')===-1){data.push(merge(mapPoint,{value:null}));}});}}\nSeries.prototype.setData.call(this,data,redraw);},drawGraph:noop,drawDataLabels:noop,translate:function(){var series=this,xAxis=series.xAxis,yAxis=series.yAxis;series.generatePoints();each(series.data,function(point){point.plotX=xAxis.toPixels(point._midX,true);point.plotY=yAxis.toPixels(point._midY,true);if(series.isDirtyData||series.chart.renderer.isVML){point.shapeType='path';point.shapeArgs={d:series.translatePath(point.path),'vector-effect':'non-scaling-stroke'};}});series.translateColors();},drawPoints:function(){var series=this,xAxis=series.xAxis,yAxis=series.yAxis,group=series.group,chart=series.chart,renderer=chart.renderer,scaleX,scaleY,translateX,translateY,baseTrans=this.baseTrans;if(!series.transformGroup){series.transformGroup=renderer.g().attr({scaleX:1,scaleY:1}).add(group);}\nif(series.isDirtyData||renderer.isVML||!baseTrans){if(chart.hasRendered&&series.pointAttrToOptions.fill==='color'){each(series.points,function(point){if(point.graphic){point.graphic.attr('fill',point.color);}});}\nseries.group=series.transformGroup;seriesTypes.column.prototype.drawPoints.apply(series);series.group=group;each(series.points,function(point){if(point.graphic){if(point.name){point.graphic.addClass('highcharts-name-'+point.name.replace(' ','-').toLowerCase());}\nif(point.properties&&point.properties['hc-key']){point.graphic.addClass('highcharts-key-'+point.properties['hc-key'].toLowerCase());}}});this.baseTrans={originX:xAxis.min-xAxis.minPixelPadding/xAxis.transA,originY:yAxis.min-yAxis.minPixelPadding/yAxis.transA+(yAxis.reversed?0:yAxis.len/yAxis.transA),transAX:xAxis.transA,transAY:yAxis.transA};}else{scaleX=xAxis.transA/baseTrans.transAX;scaleY=yAxis.transA/baseTrans.transAY;if(scaleX>0.99&&scaleX<1.01&&scaleY>0.99&&scaleY<1.01){translateX=0;translateY=0;scaleX=1;scaleY=1;}else{translateX=xAxis.toPixels(baseTrans.originX,true);translateY=yAxis.toPixels(baseTrans.originY,true);}\nthis.transformGroup.animate({translateX:translateX,translateY:translateY,scaleX:scaleX,scaleY:scaleY});}\nthis.drawMapDataLabels();},drawMapDataLabels:function(){Series.prototype.drawDataLabels.call(this);if(this.dataLabelsGroup){this.dataLabelsGroup.clip(this.chart.clipRect);}\nthis.hideOverlappingDataLabels();},hideOverlappingDataLabels:function(){var points=this.points,len=points.length,i,j,label1,label2,intersectRect=function(pos1,pos2,size1,size2){return!(pos2.x>pos1.x+size1.width||pos2.x+size2.width<pos1.x||pos2.y>pos1.y+size1.height||pos2.y+size2.height<pos1.y);};each(points,function(point,label){label=point.dataLabel;if(label){label.oldOpacity=label.opacity;label.newOpacity=1;}});for(i=0;i<len-1;++i){label1=points[i].dataLabel;for(j=i+1;j<len;++j){label2=points[j].dataLabel;if(label1&&label2&&label1.newOpacity!==0&&label2.newOpacity!==0&&intersectRect(label1.alignAttr,label2.alignAttr,label1,label2)){(points[i].labelrank<points[j].labelrank?label1:label2).newOpacity=0;}}}\neach(points,function(point,label){label=point.dataLabel;if(label){if(label.oldOpacity!==label.newOpacity){label[label.isOld?'animate':'attr'](extend({opacity:label.newOpacity},label.alignAttr));}\nlabel.isOld=true;}});},render:function(){var series=this,render=Series.prototype.render;if(series.chart.renderer.isVML&&series.data.length>3000){setTimeout(function(){render.call(series);});}else{render.call(series);}},animate:function(init){var chart=this.chart,animation=this.options.animation,group=this.group,xAxis=this.xAxis,yAxis=this.yAxis,left=xAxis.pos,top=yAxis.pos;if(chart.renderer.isSVG){if(animation===true){animation={duration:1000};}\nif(init){group.attr({translateX:left+xAxis.len/2,translateY:top+yAxis.len/2,scaleX:0.001,scaleY:0.001});}else{group.animate({translateX:left,translateY:top,scaleX:1,scaleY:1},animation);this.animate=null;}}},animateDrilldown:function(init){var toBox=this.chart.plotBox,level=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],fromBox=level.bBox,animationOptions=this.chart.options.drilldown.animation,scale;if(!init){scale=Math.min(fromBox.width/toBox.width,fromBox.height/toBox.height);level.shapeArgs={scaleX:scale,scaleY:scale,translateX:fromBox.x,translateY:fromBox.y};each(this.points,function(point){point.graphic.attr(level.shapeArgs).animate({scaleX:1,scaleY:1,translateX:0,translateY:0},animationOptions);});this.animate=null;}},drawLegendSymbol:LegendSymbolMixin.drawRectangle,animateDrillupFrom:function(level){seriesTypes.column.prototype.animateDrillupFrom.call(this,level);},animateDrillupTo:function(init){seriesTypes.column.prototype.animateDrillupTo.call(this,init);}}));defaultPlotOptions.mapline=merge(defaultPlotOptions.map,{lineWidth:1,fillColor:'none'});seriesTypes.mapline=extendClass(seriesTypes.map,{type:'mapline',pointAttrToOptions:{stroke:'color','stroke-width':'lineWidth',fill:'fillColor',dashstyle:'dashStyle'},drawLegendSymbol:seriesTypes.line.prototype.drawLegendSymbol});defaultPlotOptions.mappoint=merge(defaultPlotOptions.scatter,{dataLabels:{enabled:true,formatter:function(){return this.point.name;},color:'black',crop:false,defer:false,overflow:false,style:{HcTextStroke:'3px rgba(255,255,255,0.5)'}}});seriesTypes.mappoint=extendClass(seriesTypes.scatter,{type:'mappoint',forceDL:true});if(seriesTypes.bubble){defaultPlotOptions.mapbubble=merge(defaultPlotOptions.bubble,{animationLimit:500,tooltip:{pointFormat:'{point.name}: {point.z}'}});seriesTypes.mapbubble=extendClass(seriesTypes.bubble,{pointClass:extendClass(Point,{applyOptions:MapAreaPoint.prototype.applyOptions}),xyFromShape:true,type:'mapbubble',pointArrayMap:['z'],getMapData:seriesTypes.map.prototype.getMapData,getBox:seriesTypes.map.prototype.getBox,setData:seriesTypes.map.prototype.setData});}\ndefaultOptions.plotOptions.heatmap=merge(defaultOptions.plotOptions.scatter,{animation:false,borderWidth:0,nullColor:'#F8F8F8',dataLabels:{formatter:function(){return this.point.value;},verticalAlign:'middle',crop:false,overflow:false,style:{color:'white',fontWeight:'bold',HcTextStroke:'1px rgba(0,0,0,0.5)'}},marker:null,tooltip:{pointFormat:'{point.x}, {point.y}: {point.value}<br/>'},states:{normal:{animation:true},hover:{brightness:0.2}}});seriesTypes.heatmap=extendClass(seriesTypes.scatter,merge(colorSeriesMixin,{type:'heatmap',pointArrayMap:['y','value'],hasPointSpecificOptions:true,supportsDrilldown:true,getExtremesFromAll:true,init:function(){seriesTypes.scatter.prototype.init.apply(this,arguments);this.pointRange=this.options.colsize||1;this.yAxis.axisPointRange=this.options.rowsize||1;},translate:function(){var series=this,options=series.options,xAxis=series.xAxis,yAxis=series.yAxis;series.generatePoints();each(series.points,function(point){var xPad=(options.colsize||1)/2,yPad=(options.rowsize||1)/2,x1=Math.round(xAxis.len-xAxis.translate(point.x-xPad,0,1,0,1)),x2=Math.round(xAxis.len-xAxis.translate(point.x+xPad,0,1,0,1)),y1=Math.round(yAxis.translate(point.y-yPad,0,1,0,1)),y2=Math.round(yAxis.translate(point.y+yPad,0,1,0,1));point.plotX=(x1+x2)/2;point.plotY=(y1+y2)/2;point.shapeType='rect';point.shapeArgs={x:Math.min(x1,x2),y:Math.min(y1,y2),width:Math.abs(x2-x1),height:Math.abs(y2-y1)};});series.translateColors();if(this.chart.hasRendered){each(series.points,function(point){point.shapeArgs.fill=point.color;});}},drawPoints:seriesTypes.column.prototype.drawPoints,animate:noop,getBox:noop,drawLegendSymbol:LegendSymbolMixin.drawRectangle,getExtremes:function(){Series.prototype.getExtremes.call(this,this.valueData);this.valueMin=this.dataMin;this.valueMax=this.dataMax;Series.prototype.getExtremes.call(this);}}));Highcharts.geojson=function(geojson,hType,series){var mapData=[],path=[],polygonToPath=function(polygon){var i=0,len=polygon.length;path.push('M');for(;i<len;i++){if(i===1){path.push('L');}\npath.push(polygon[i][0],-polygon[i][1]);}};hType=hType||'map';each(geojson.features,function(feature){var geometry=feature.geometry,type=geometry.type,coordinates=geometry.coordinates,properties=feature.properties,point;path=[];if(hType==='map'||hType==='mapbubble'){if(type==='Polygon'){each(coordinates,polygonToPath);path.push('Z');}else if(type==='MultiPolygon'){each(coordinates,function(items){each(items,polygonToPath);});path.push('Z');}\nif(path.length){point={path:path};}}else if(hType==='mapline'){if(type==='LineString'){polygonToPath(coordinates);}else if(type==='MultiLineString'){each(coordinates,polygonToPath);}\nif(path.length){point={path:path};}}else if(hType==='mappoint'){if(type==='Point'){point={x:coordinates[0],y:-coordinates[1]};}}\nif(point){mapData.push(extend(point,{name:properties.name||properties.NAME,properties:properties}));}});if(series){series.chart.mapCredits='<a href=\"http://www.highcharts.com\">Highcharts<\/a> \\u00A9 '+'<a href=\"'+geojson.copyrightUrl+'\">'+geojson.copyrightShort+'<\/a>';}\nreturn mapData;};wrap(Chart.prototype,'showCredits',function(proceed,credits){if(defaultOptions.credits.text===this.options.credits.text&&this.mapCredits){credits.text=this.mapCredits;credits.href=null;}\nproceed.call(this,credits);});extend(defaultOptions.lang,{zoomIn:'Zoom in',zoomOut:'Zoom out'});defaultOptions.mapNavigation={buttonOptions:{alignTo:'plotBox',align:'left',verticalAlign:'top',x:0,width:18,height:18,style:{fontSize:'15px',fontWeight:'bold',textAlign:'center'},theme:{'stroke-width':1}},buttons:{zoomIn:{onclick:function(){this.mapZoom(0.5);},text:'+',y:0},zoomOut:{onclick:function(){this.mapZoom(2);},text:'-',y:28}}};Highcharts.splitPath=function(path){var i;path=path.replace(/([A-Za-z])/g,' $1 ');path=path.replace(/^\\s*/,\"\").replace(/\\s*$/,\"\");path=path.split(/[ ,]+/);for(i=0;i<path.length;i++){if(!/[a-zA-Z]/.test(path[i])){path[i]=parseFloat(path[i]);}}\nreturn path;};Highcharts.maps={};function selectiveRoundedRect(attr,x,y,w,h,rTopLeft,rTopRight,rBottomRight,rBottomLeft){var normalize=(attr['stroke-width']%2/2);x-=normalize;y-=normalize;return['M',x+rTopLeft,y,'L',x+w-rTopRight,y,'C',x+w-rTopRight/2,y,x+w,y+rTopRight/2,x+w,y+rTopRight,'L',x+w,y+h-rBottomRight,'C',x+w,y+h-rBottomRight/2,x+w-rBottomRight/2,y+h,x+w-rBottomRight,y+h,'L',x+rBottomLeft,y+h,'C',x+rBottomLeft/2,y+h,x,y+h-rBottomLeft/2,x,y+h-rBottomLeft,'L',x,y+rTopLeft,'C',x,y+rTopLeft/2,x+rTopLeft/2,y,x+rTopLeft,y,'Z'];}\nSVGRenderer.prototype.symbols.topbutton=function(x,y,w,h,attr){return selectiveRoundedRect(attr,x,y,w,h,attr.r,attr.r,0,0);};SVGRenderer.prototype.symbols.bottombutton=function(x,y,w,h,attr){return selectiveRoundedRect(attr,x,y,w,h,0,0,attr.r,attr.r);};if(Renderer===VMLRenderer){each(['topbutton','bottombutton'],function(shape){VMLRenderer.prototype.symbols[shape]=SVGRenderer.prototype.symbols[shape];});}\nHighcharts.Map=function(options,callback){var hiddenAxis={endOnTick:false,gridLineWidth:0,lineWidth:0,minPadding:0,maxPadding:0,startOnTick:false,title:null,tickPositions:[]},seriesOptions;seriesOptions=options.series;options.series=null;options=merge({chart:{panning:'xy',type:'map'},xAxis:hiddenAxis,yAxis:merge(hiddenAxis,{reversed:true})},options,{chart:{inverted:false,alignTicks:false,preserveAspectRatio:true}});options.series=seriesOptions;return new Chart(options,callback);};}(Highcharts));","js/thirdparty/highcharts/map/highmapEx.js":"\n(function(Highcharts){var UNDEFINED,Axis=Highcharts.Axis,Chart=Highcharts.Chart,Color=Highcharts.Color,Point=Highcharts.Point,Pointer=Highcharts.Pointer,Legend=Highcharts.Legend,LegendSymbolMixin=Highcharts.LegendSymbolMixin,Renderer=Highcharts.Renderer,Series=Highcharts.Series,SVGRenderer=Highcharts.SVGRenderer,VMLRenderer=Highcharts.VMLRenderer,addEvent=Highcharts.addEvent,each=Highcharts.each,extend=Highcharts.extend,extendClass=Highcharts.extendClass,merge=Highcharts.merge,pick=Highcharts.pick,numberFormat=Highcharts.numberFormat,defaultOptions=Highcharts.getOptions(),seriesTypes=Highcharts.seriesTypes,defaultPlotOptions=defaultOptions.plotOptions,wrap=Highcharts.wrap,M='M',L='L',NORMAL_STATE='',HOVER_STATE='hover',SELECT_STATE='select',noop=function(){},colorAxis=Highcharts.ColorAxis,C='C';var mapScatterSymbols={\"triangle-banner\":function(x,y,w,h){return[M,x,y,L,x,y+h,x+w,y+h,'Z',M,x,y,L,x,y+h*2,'Z'];},\"banner\":function(x,y,w,h){return[M,x,y,L,x+w,y,x+w,y+h,x,y+h,'Z',M,x,y,L,x,y+h*2,'Z'];},\"square-banner\":function(x,y,w,h){return[M,x,y,L,x+w,y,x+w,y+h,x,y+h,'Z',M,x,y,L,x,y+h*2,'Z'];},\"figure\":function(x,y,w,h){var cpw=0.166*w;return[M,x+w/2,y,'C',x+w+cpw,y,x+w+cpw,y+h,x+w/2,y+h,'C',x-cpw,y+h,x-cpw,y,x+w/2,y,'Z',M,x,y+h,L,x+w,y+h,x+w,y+h*3/2,x,y+h*3/2,'Z'];},\"balloon\":function(x,y,w,h){var cpw=0.166*w;return[M,x+w/2,y,'C',x+w+cpw,y,x+w+cpw,y+h,x+w/2,y+h,'C',x-cpw,y+h,x-cpw,y,x+w/2,y,'Z',M,x+w/2,y+h,L,x+w/2,y+2*h,'Z'];},\"star\":function(x,y,w,h){var w1=3,h1=5,h2=12;return[M,x,y+h1,L,x+w1*6,y+h1,x+w1,y+h2,x+w1*3,y,x+w1*5,y+h2,'Z'];},\"bulb\":function(x,y,w,h){var cpw=0.166*w;return[M,x+w/2,y,'C',x+w+cpw,y,x+w+cpw,y+h,x+w/2,y+h,'C',x-cpw,y+h,x-cpw,y,x+w/2,y,'Z',M,x+w/4,y+h,L,x+w*3/4,y+h,x+w*3/4,y+h*3/2,x+w/4,y+h*3/2,'Z'];},\"square-star\":function(x,y,w,h){var w1=3,h1=5,h2=12;return[M,x+w/2,y,L,x+3*w/2,y,x+3*w/2,y+h,x+w/2,y+h,'Z',M,x,y+h1,L,x+w1*6,y+h1,x+w1,y+h2,x+w1*3,y,x+w1*5,y+h2];},\"heart\":function(x,y,w,h){return[M,x,y,L,x+w,y+h,x,y+h,x+1,y+h*2,'Z'];},\"map\":function(x,y,w,h){return[M,x,y,L,x+w,y,x+w,y+h,x,y+h,'Z'];}};extend(Highcharts.Renderer.prototype.symbols,mapScatterSymbols);var ColorSeriesMixin={axisTypes:seriesTypes.map.prototype.axisTypes,optionalAxis:seriesTypes.map.prototype.optionalAxis,translateColors:seriesTypes.map.prototype.translateColors,setVisible:function(vis,redraw){var series=this,chart=series.chart;Series.prototype.setVisible.call(this,vis,redraw);vis=series.visible;if(series.points&&series.points.length>0&&series.points[0].setVisible){each(series.points,function(point){point.setVisible(vis);});}\neach([series.colorAxis,series.lineSymbolAxis],function(axis){if(!axis)return;if(axis.groupLegendItem){chart.legend.colorizeItem(axis.groupLegendItem,vis);}\nif(axis.legendItems){each(axis.legendItems,function(legendItem){chart.legend.colorizeItem(legendItem,vis);});}});}};defaultPlotOptions.map_old=defaultPlotOptions.map;defaultPlotOptions.map=merge(defaultPlotOptions.map_old,{tooltip:{headerFormat:'',pointFormat:'<span style=\"font-size: 12px;\">{series.name}:'\n+'{point.displayValue}<\/span><br/>'}});extend(seriesTypes.map.prototype,{singularTooltips:false,setVisible:ColorSeriesMixin.setVisible,setTooltipPoints:function(renew){var series=this,points=[],pointsLength,low,high,xAxis=series.xAxis,xExtremes=xAxis&&xAxis.getExtremes(),axisLength=xAxis?(xAxis.tooltipLen||xAxis.len):series.chart.plotSizeX,point,pointX,nextPoint,i,tooltipPoints=[];if(series.options.enableMouseTracking===false||series.singularTooltips){return;}\nif(renew){series.tooltipPoints=null;}\neach(series.segments||series.points,function(segment){points=points.concat(segment);});if(xAxis&&xAxis.reversed){points=points.reverse();}\nif(series.orderTooltipPoints){series.orderTooltipPoints(points);}\npointsLength=points.length;for(i=0;i<pointsLength;i++){point=points[i];areaId=point.areaId||i;tooltipPoints[areaId]=point;}\nseries.tooltipPoints=tooltipPoints;}});wrap(seriesTypes.map.prototype.pointClass.prototype,'applyOptions',function(proceed,options,x){var point=proceed.call(this,options,x);if(undefined===point.value||point.value===null){point.isNull=true;}});wrap(seriesTypes.map.prototype,'getBox',function(proceed,paths){proceed.call(this,paths);var series=this;each(paths||[],function(point){if(point.point){point._midX=point.point[0];point._midY=point.point[1];}});});wrap(seriesTypes.map.prototype,'translate',function(proceed,paths){var series=this,baseTrans=series.baseTrans;if(baseTrans&&(baseTrans.transAX===0||baseTrans.transAY===0)){series.isDirtyData=true;}\nproceed.call(this,paths);});extend(seriesTypes.mapline.prototype,{setVisible:ColorSeriesMixin.setVisible})\ndefaultPlotOptions.mappoint_old=defaultPlotOptions.mappoint;defaultPlotOptions.mappoint=merge(defaultPlotOptions.mappoint_old,{tooltip:{pointFormat:'<span style=\"font-size: 12px;\">{series.name}:'\n+'{point.displayValue}<\/span><br/>'},marker:{offsetTop:15,lineColor:null,lineWidth:1,states:{hover:{enabled:false},select:{enabled:false}}}});var HighmapPoint=extendClass(Highcharts.Point,{setVisible:function(vis){var point=this;point.visible=vis;var key=\"graphic\";if(point[key]){point[key][vis?'show':'hide'](true);}}});extend(seriesTypes.mappoint.prototype,merge(ColorSeriesMixin,{singularTooltips:false,pointClass:HighmapPoint,setTooltipPoints:function(renew){seriesTypes.map.prototype.setTooltipPoints.apply(this,arguments);},translate:function(){var series=this,xAxis=series.xAxis,yAxis=series.yAxis;Highcharts.Series.prototype.translate.apply(series);each(series.points,function(point){point.plotX=point.plotX+(point.offseti||0)*14;point.plotY=point.plotY;var offsetTop=pick((point.options.marker&&point.options.marker.offsetTop),series.options.marker.offsetTop);if(point.plotY>offsetTop){point.plotY=point.plotY-offsetTop;}});series.translateColors();}}));if(seriesTypes.mapbubble){defaultPlotOptions.mapbubble_old=defaultPlotOptions.mapbubble;defaultPlotOptions.mapbubble=merge(defaultPlotOptions.mapbubble_old,{tooltip:{pointFormat:'<span style=\"font-size: 12px;\">{series.name}:'\n+'{point.z}<\/span><br/>'},marker:{states:{hover:{enabled:false},select:{enabled:false}}}});var HighmapbubblePoint=extendClass(Highcharts.Point,{});extend(seriesTypes.mapbubble.prototype,{singularTooltips:false,pointClass:HighmapbubblePoint,setTooltipPoints:function(renew){seriesTypes.map.prototype.setTooltipPoints.apply(this,arguments);}});}\nvar MapTooltip=function(){};MapTooltip.prototype={addSharePoint:function(tootip){var pThis=this,chart=pThis.series.chart,series=chart.series,point,points=[],j,areaId=pThis.point.areaId;i=series.length;for(j=0;j<i;j++){if(series[j].visible&&series[j].options.enableMouseTracking!==false){point=series[j].tooltipPoints&&series[j].tooltipPoints[areaId];if(point!=UNDEFINED&&point.visible!==false)\npoints.push(point);}}\nvar hoverPoints=chart.hoverPoints2,textConfig={},text,pointConfig=[];if(hoverPoints){each(hoverPoints,function(point){if(point!=UNDEFINED)\npoint.setState();});}\nchart.hoverPoints2=points;each(points,function(item){if(item!=UNDEFINED){item.setState(HOVER_STATE);pointConfig.push(item.getLabelConfig());}});textConfig={};if(points.length>0){textConfig.x=points[0].x;textConfig.y=points[0].y;textConfig.value=points[0].value;}\ntextConfig.points=pointConfig;return textConfig;},defaultFormatter:function(){var pThis=this,items=pThis.points||Highcharts.splat(pThis),series=items[0].series,tooltip=series.chart.tooltip,options=tooltip.options,s;s=[tooltip.tooltipHeaderFormatter(items[0])];each(items,function(item){series=item.series;if(!item.point.isNull){s.push((series.tooltipFormatter&&series.tooltipFormatter(item))||item.point.tooltipFormatter(series.tooltipOptions.pointFormat));}});s.push(options.footerFormat||'');return s.join('');}};extend(colorAxis.prototype,{getGroupLegendItem:function(){var chart=this.chart,axis=this;if(axis.series&&axis.series.length>0){if(!axis.groupLegendItem){var legendItem=axis.groupLegendItem={chart:chart,isGroup:true,name:axis.options.name||axis.series[0].name,options:{},drawLegendSymbol:noop,visible:true,setState:noop,setVisible:function(){var vis=this.visible=!this.visible;each(axis.series,function(series){series.setVisible(vis);});if(axis.legendItems&&axis.legendItems.length>0){each(axis.legendItems,function(dataClassLegendItem){dataClassLegendItem.visible=vis;chart.legend.colorizeItem(dataClassLegendItem,vis);});}\nchart.legend.colorizeItem(this,vis);}};}\nreturn axis.groupLegendItem}},getDataClassDrawLegendSymbol:function(){var axis=this;if(axis.series&&axis.series.length>0){return axis.series[0].drawLegendSymbol||LegendSymbolMixin.drawRectangle;}\nreturn LegendSymbolMixin.drawRectangle;},cascadeGroupLegendVisibility:function(legendItem){var axis=this,chart=axis.chart,legendItems=axis.legendItems||[];var change=true;if(legendItem.visible){change=axis.groupLegendItem&&!axis.groupLegendItem.visible;}else{for(var li in legendItems){if(legendItems[li].visible!=legendItem.visible){change=false;break;}}}\nif(change&&axis.groupLegendItem){axis.groupLegendItem.visible=legendItem.visible;chart.legend.colorizeItem(axis.groupLegendItem,legendItem.visible);}}});wrap(colorAxis.prototype,\"getDataClassLegendSymbols\",function(proceed){var axis=this,series=axis.series&&axis.series[0];if(!series){return[];}\nvar legendItems=proceed.call(this);for(var len=legendItems.length-1;len>=0;len--){var item=legendItems[len],newItem=item;if(series.type!=\"map\"){delete item.options;newItem=extend(extend({},series),item);newItem.options=extend(extend({},newItem.options),item);if(newItem.options.marker){newItem.options.marker=extend(extend({},newItem.options.marker),item)}\nnewItem.drawLegendSymbol=this.getDataClassDrawLegendSymbol();legendItems[len]=newItem;}\nnewItem.isSub=true;wrap(newItem,'setVisible',function(proceed){var legendItem=this,chart=legendItem.chart;proceed.call(legendItem);axis.cascadeGroupLegendVisibility(legendItem);});}\nreturn legendItems;});wrap(Legend.prototype,\"positionItem\",function(proceed,item){var legend=this,chart=legend.chart,options=legend.options;if(chart.options.chart&&chart.options.chart.type==\"map\"){if(!item.recaculate){var legendItemPos=item._legendItemPos,itemX=legendItemPos[0],itemY=legendItemPos[1];if(item.isSub){legendItemPos[0]=itemX+(options.subPadding||6);if(chart.renderer.isVML&&item.legendSymbol&&item.legendSymbol.isMarker){legendItemPos[1]=itemY-3;item.legendItem.css({top:6});}}else if(item.isGroup){item.legendItem.attr({x:-options.symbolPadding});}}}\nproceed.call(this,item);});wrap(colorAxis.prototype,'toColor',function(proceed,value,point){var color=proceed.call(this,value,point);if(color&&point.options){point.options.color=color;}\nreturn color;});defaultPlotOptions.mapimage=merge(defaultPlotOptions.scatter,{x:0,y:0,showInLegend:false,ignoreInGetSeriesExtremes:true});seriesTypes.mapimage=extendClass(seriesTypes.scatter,{type:'mapimage',forceDL:true,drawDataLabels:noop,translate:function(){var series=this,chart=series.chart,xAxis=series.xAxis,yAxis=series.yAxis,group=series.group,chart=series.chart,renderer=chart.renderer,scaleX,scaleY,translateX,translateY;series.generatePoints();each(series.data,function(point){var originWidth=(point.options.width||chart.plotWidth)-0,originHeight=(point.options.height||chart.plotHeight)-0,originX=point.options.x,originY=point.options.y;point.plotX=xAxis.toPixels(originX,true);point.plotY=yAxis.toPixels(originY,true);point.shapeType='image';point.shapeArgs={x:point.plotX,y:point.plotY,src:point.options.src,width:xAxis.toPixels((originX+originWidth),true)-point.plotX,height:yAxis.toPixels((originY+originHeight),true)-point.plotY};});},drawPoints:function(){var series=this,chart=this.chart,options=series.options,renderer=chart.renderer,animationLimit=options.animationLimit||250,shapeArgs,pointAttr;each(series.points,function(point){var plotY=point.plotY,graphic=point.graphic,borderAttr;if(plotY!==UNDEFINED&&!isNaN(plotY)&&point.y!==null){shapeArgs=point.shapeArgs;pointAttr=point.pointAttr[point.selected?SELECT_STATE:NORMAL_STATE]||series.pointAttr[NORMAL_STATE];if(graphic){graphic.attr(merge(shapeArgs));}else{point.graphic=graphic=renderer[point.shapeType](shapeArgs.src,shapeArgs.x,shapeArgs.y,shapeArgs.width,shapeArgs.height).attr(pointAttr).add(series.group).shadow(options.shadow,null,false);}}else if(graphic){point.graphic=graphic.destroy();}});}});wrap(Axis.prototype,'getSeriesExtremes',function(proceed){var isXAxis=this.isXAxis,dataMin,dataMax,xData=[],yData=[],useMapGeometry;each(this.series,function(series,i){if(series.type==\"mapimage\"&&series.options.ignoreInGetSeriesExtremes){xData[i]=series.xData;yData[i]=series.yData;series.xData=[];series.yData=[];}});proceed.call(this);each(this.series,function(series,i){if(series.type==\"mapimage\"&&series.options.ignoreInGetSeriesExtremes){series.xData=xData[i];series.yData=yData[i];}});});var LineSymbolAxis=Highcharts.LineSymbolAxis=function(){this.isWidthAxis=true;this.init.apply(this,arguments);};extend(LineSymbolAxis.prototype,colorAxis.prototype);extend(LineSymbolAxis.prototype,{toLineSymbol:function(value,point){var axis=this,pos,stops=this.stops,from,to,width,color,dashStyle,dataClasses=this.dataClasses,dataClass,i;if(dataClasses){i=dataClasses.length;while(i--){dataClass=dataClasses[i];from=dataClass.from;to=dataClass.to;if((from===UNDEFINED||value>=from)&&(to===UNDEFINED||value<=to)){width=dataClass.lineWidth;color=dataClass.color;dashStyle=dataClass.dashStyle;if(point){point[axis.dataClassColl]=i;if(width>=0){point.options.lineWidth=width;}else if(color){point.options.color=color;}else if(dashStyle){point.options.dashStyle=dashStyle;}}\nbreak;}}}\nreturn{lineWidth:width,color:color,dashStyle:dashStyle};},setOptions:function(userOptions){colorAxis.prototype.setOptions.call(this,userOptions);this.coll='lineSymbolAxis';this.dataClassColl=\"lineSymbolDataClass\";},initDataClasses:function(userOptions){var axis=this,chart=this.chart,dataClasses,colorCounter=0,options=this.options;this.dataClasses=dataClasses=userOptions.dataClasses||[];this.legendItems=[];}});wrap(LineSymbolAxis.prototype.getGroupLegendItem,function(proceed){var legendItem=null,series=this.series;legendItem=proceed.call(this);if(legendItem){legendItem.name=axis.series[0].lineSymbolName||axis.series[0].name;}});wrap(LineSymbolAxis.prototype,\"getDataClassLegendSymbols\",function(proceed){var axis=this,chart=axis.chart,series=axis.series&&axis.series[0];if(!series){return[];}\nvar legendItems=proceed.call(this);for(var len=legendItems.length-1;len>=0;len--){var item=legendItems[len],newItem=item;newItem.setVisible=function(){var vis=this.visible=!this.visible,legendItem=this;each(axis.series,function(series){each(series.points,function(point){if(point[axis.dataClassColl]===legendItem.dataClass){point.setVisible(vis);}});});chart.legend.colorizeItem(this,vis);axis.cascadeGroupLegendVisibility(this);}}\nreturn legendItems;});wrap(Chart.prototype,'getAxes',function(proceed){var options=this.options,chart=this,lineSymbolAxisOptions=options.lineSymbolAxis=Highcharts.splat(options.lineSymbolAxis||{});proceed.call(this);this.lineSymbolAxis=[];if(lineSymbolAxisOptions){each(lineSymbolAxisOptions,function(axis,i){axis.index=i;proceed=new LineSymbolAxis(chart,axis);});}});wrap(Legend.prototype,'getAllItems',function(proceed){var allItems=[],chart=this.chart,symbolAxes=this.chart.lineSymbolAxis;if(symbolAxes){each(symbolAxes,function(symbolAxis){if(symbolAxis.series&&symbolAxis.series.length>0){var groupItem=symbolAxis.getGroupLegendItem&&symbolAxis.getGroupLegendItem();if(groupItem){allItems.push(groupItem);}\nif(symbolAxis.options.dataClasses){allItems=allItems.concat(symbolAxis.getDataClassLegendSymbols());each(symbolAxis.series,function(series){series.options.showInLegend=false;});}}})}\nreturn allItems.concat(proceed.call(this));});var LineSymbolSeriesMixin={setVisible:ColorSeriesMixin.setVisible,bindAxes:function(){var series=this,seriesOptions=series.options,chart=series.chart,axisOptions;each(series.axisTypes||[],function(AXIS){each(chart[AXIS],function(axis){axisOptions=axis.options;if((seriesOptions[AXIS]===axisOptions.index)||(seriesOptions[AXIS]!==UNDEFINED&&seriesOptions[AXIS]===axisOptions.id)||(seriesOptions[AXIS]===UNDEFINED&&axisOptions.index===0)){axis.series.push(series);series[AXIS]=axis;axis.isDirty=true;}});});},translateColors:function(){this.translateSymbol();},translateSymbol:function(){var series=this,nullColor=this.options.nullColor,lineSymbol=null,lineWidth=this.options.lineWidth,lineSymbolAxis=this.lineSymbolAxis,colorAxis=this.colorAxis;each(this.data,function(point){var lineSymbolValue=point.lineSymbolValue,value=point.value,color,width;if(lineSymbolAxis){lineSymbol=lineSymbolValue===null?{}:(lineSymbolAxis&&lineSymbolValue!==undefined)?lineSymbolAxis.toLineSymbol(lineSymbolValue,point):{};if(lineSymbol.lineWidth){point.lineWidth=lineSymbol.lineWidth;}\nif(lineSymbol.color){point.color=lineSymbol.color}\nif(lineSymbol.dashStyle){point.dashStyle=lineSymbol.dashStyle;}}\nif(colorAxis){color=value===null?nullColor:(colorAxis&&value!==undefined)?colorAxis.toColor(value,point):point.color||series.color;if(color){point.color=color;}}});}};defaultPlotOptions.airline=merge(defaultPlotOptions.mapline,{drawPoint:true,tooltip:{headerFormat:'<span style=\"font-size: 12px\">{point.point.fromPoint.name}--{point.point.toPoint.name}<\/span><br/>',pointFormat:null}});var AirlinePoint=extendClass(seriesTypes.mapline.prototype.pointClass,{applyOptions:function(options,x){var point=Point.prototype.applyOptions.call(this,options,x),series=this.series,mapPoint;if(series.mapData){each([\"from\",\"to\"],function(key){var joinBy=key+\"Point\";mapPoint=series.mapMap[options[joinBy]];if(mapPoint){options[joinBy]=extend({},mapPoint);if(mapPoint.value===UNDEFINED){mapPoint.value=null;}}});point.value=point.value||null;point.options.path=point.options.path||AirlinePoint.prototype.generatorPath.call(point);point.path=point.options.path;}\nif((undefined===point.value||point.value===null)&&(undefined===point.lineSymbolValue||point.lineSymbolDisplayValue===null)){point.isNull=true;}\nreturn point;},generatorPath:function(){var options=this.options,pt1=options[\"fromPoint\"],pt2=options[\"toPoint\"],angle=140;if(!(pt1&&pt1.x&&pt1.y&&pt2&&pt2.x&&pt2.y)){return[];}\nvar tga=AirlinePoint.prototype.getAngle.call(this,pt1,pt2);var len=Math.sqrt(Math.pow((pt1.x-pt2.x),2)+Math.pow((pt1.y-pt2.y),2));var nAngle=(tga+(180-angle)/2);if(nAngle>360)nAngle=360-nAngle;var arc=nAngle/180*Math.PI;var rarc=Math.PI/180;var len1=(len/2)/Math.sin((angle/2)*rarc);var x3=pt2.x+len1*Math.cos(arc);var y3=pt2.y-len1*Math.sin(arc);return[M,pt1.x,pt1.y,C,pt1.x,pt1.y,x3,y3,pt2.x,pt2.y];},getAngle:function(pt1,pt2){var tga=90;var sy=0-(pt1.y-pt2.y),sx=pt1.x-pt2.x;if(sy==0&&sx==0)return null;if(sx!=0)tga=(Math.atan(sy/sx))*180/Math.PI;if(sy>=0){if(sx>0)tga=tga;else if(sx<0)tga=tga+180;}else if(sy<0){if(sx>0)tga=tga+360;else if(sx<=0)tga=tga+180;}else if(sy==0){if(sx>0)tga=0;else if(sx<0)tga=180;}\nreturn tga;},tooltipFormatter:function(pointFormat){var point=this,series=this.series;if(pointFormat===null){var tips=\"\";if(point.displayValue!==UNDEFINED){tips=tips+'<span style=\"font-size: 12px;\">'+series.name+':'\n+point.displayValue+'<\/span><br/>';}\nif(series.options.lineSymbolName!==UNDEFINED){tips=tips+'<span style=\"font-size: 12px;\">'+series.options.lineSymbolName+':'\n+point.lineSymbolDisplayValue+'<\/span><br/>';}\nreturn tips;}else{return Point.prototype.tooltipFormatter.call(this,pointFormat);}},onMouseOver:function(e){clearTimeout(this.colorInterval);if(!this.isNull){Point.prototype.onMouseOver.call(this,e);}}});seriesTypes.airline=extendClass(seriesTypes.mapline,merge(LineSymbolSeriesMixin,{type:'airline',singularTooltips:true,pointClass:AirlinePoint,axisTypes:['xAxis','yAxis','colorAxis','lineSymbolAxis'],setData:function(data,redraw){var series=this,options=series.options,mapData=options.mapData,joinBy=[\"areaId\"];if(mapData){if(mapData.type==='FeatureCollection'){mapData=Highcharts.geojson(mapData,this.type,this);}\nthis.mapData=mapData;this.mapMap={};for(i=0;i<mapData.length;i++){mapPoint=mapData[i];props=mapPoint.properties||mapPoint;mapPoint._i=i;if(joinBy[0]&&props&&props[joinBy[0]]){mapPoint[joinBy[0]]=props[joinBy[0]];}\nthis.mapMap[mapPoint[joinBy[0]]]=mapPoint;}}\nSeries.prototype.setData.call(this,data,redraw);this.getBox(this.options.data);},processAirlinePoints:function(){var series=this,options=series.options;if(options.drawPoint){if(options.mapData){var markerSeries={tooltip:{headerFormat:'',pointFormat:'{point.name}'},animation:options.animation,showCheckbox:options.showCheckbox,enableMouseTracking:options.enableMouseTracking,data:options.mapData,showInLegend:false,type:\"mappoint\",colorAxis:-1,marker:{offsetTop:0}};series.chart.addSeries(markerSeries,false);}}}}));Highcharts.Map=function(options,callback){var hiddenAxis={endOnTick:false,gridLineWidth:0,lineWidth:0,minPadding:0,maxPadding:0,startOnTick:false,title:null,tickPositions:[]},seriesOptions,originOptions;seriesOptions=options.series;options.series=null;originOptions=options;options=merge({chart:{panning:'xy',type:'map'},credits:{enabled:false},title:{text:''},legend:{floating:true,layout:'vertical',align:'left'},tooltip:{backgroundColor:\"#FFFFFF\"},xAxis:hiddenAxis,yAxis:merge(hiddenAxis,{reversed:true})},options,{chart:{inverted:false,alignTicks:false,preserveAspectRatio:true}});each(seriesOptions,function(seriesi,i){if(seriesi.colorAxis===UNDEFINED){seriesi.colorAxis=-1;}\nif(seriesi.lineSymbolAxis===UNDEFINED){seriesi.lineSymbolAxis=-1;}});options.series=seriesOptions;originOptions.series=seriesOptions;if(options.tooltip.shared!=false){options.tooltip.shared=false;var formatter=options.tooltip.formatter||MapTooltip.prototype.defaultFormatter;options.tooltip.formatter=function(tooltip){var shared=tooltip.shared,point=this.point,textConfig=this;if(!(point.series&&point.series.singularTooltips)){textConfig=MapTooltip.prototype.addSharePoint.call(this,tooltip);if(textConfig.points.length==0)\nreturn false;}\nvar text=formatter.call(textConfig);if(text==''){return false;}\nreturn text;}}else{var formatter=options.tooltip.formatter||MapTooltip.prototype.defaultFormatter;;options.tooltip.formatter=function(tooltip){if(this.point.isNull===true){return false;}\nvar text=formatter.call(this);if(text==''){return false;}\nreturn text;}}\nreturn new Chart(options,callback);};wrap(Chart.prototype,'init',function(proceed,options,callback){addEvent(this,'beforeRender',function(){var chart=this,chartSeries=chart.series;each(chartSeries,function(series){if(series.type=='airline'){series.processAirlinePoints();}});});proceed.call(this,options,callback);});}(Highcharts));","js/smartbi/map/MapView.js":"\nvar ChartView=jsloader.resolve(\"smartbi.chart.ChartView\");if(typeof Highcharts=='undefined'||!Highcharts){jsloader.resolve(\"thirdparty.highcharts.highcharts\",true);jsloader.resolve(\"thirdparty.highcharts.highcharts_more\",true);jsloader.resolve(\"thirdparty.highcharts.map.highmap\",true);jsloader.resolve(\"thirdparty.highcharts.map.highmapEx\",true);}\nif(typeof SmartbiMap=='undefined'){jsloader.resolve(\"smartbi.map.SmartbiMap\",true);}\nvar MapView=ChartView.extend({setChartRenderer:function(chartType,options){}});","js/smartbi/map/SmartbiMap.js":"\nvar SmartbiMap=AbstractChart.extend({init:function(viewOptions,chartType,chartClassName){this._super(chartType,chartClassName);if(arguments&&arguments.length>0){this.renderOnBrowser=arguments[0].renderOnBrowser;}\nthis._private={_chartObj:null,_options:null};},destroy:function(){if(this.getChart()){this._private._chartObj.options.containerElement=null;this._private._chartObj.destroy();this._private._chartObj=null;}\nthis._private._options=null;this._super();},getChart:function(){return this._private._chartObj;},setChart:function(hcChart){this._private._chartObj=hcChart;},getOptions:function(){return this._private._options;},getSVG:function(){var chart=this.getChart();if(chart){return chart.container.innerHTML;}\nreturn null;},showLoading:function(message,loadingDiv,conWidth,conHeight){var chartObj=this.getChart();var loadingContainer=null,width=300,height=300;if(loadingDiv&&message){loadingContainer=loadingDiv;width=conWidth||this.lastWidth||300;height=conHeight||this.lastHeight||300;}\nif(chartObj!=null&&message){chartObj.showLoading(message);}},hideLoading:function(loadingContainer){var chartObj=this.getChart();if(chartObj!=null){chartObj.hideLoading();}},refresh:function(container,chartOptions){if(this._private._chartObj){this._private._chartObj.destroy();this._private._chartObj=null;}\nif(!chartOptions.chart)\nchartOptions.chart={};chartOptions=this.mergerDefaultOptions(chartOptions,this.chartType);this._private._options=chartOptions;this.process(chartOptions);chartOptions.chart[\"renderTo\"]=container;this._private._chartObj=new Highcharts.Map(chartOptions);},resizeTo:function(w,h){var chartObj=this._private._chartObj;if(!chartObj){return;}\nchartObj.setSize(w,h);},mergerDefaultOptions:function(chartOptions,chartType){if(chartOptions._defaultOptionsSetted){delete chartOptions._defaultOptionsSetted;}else{var defaultOptions=eval(chartType),helper=eval('utils');chartOptions=helper.processDefaultOptions(defaultOptions,chartOptions,chartType,null);}\nreturn chartOptions;},preprocessServerChartOptions:function(chartOptions){var chartType=this.chartType;this.preprocessChartOptions(chartOptions);},preprocessChartOptions:function(options){if(!options.exporting)\noptions.exporting={};options.exporting.enabled=false;options.chart.animation=false;options.chart.forExport=true;if(!options.chart.width){options.chart.width=800;options.chart.height=400;}\nvar series=[];Highcharts.each(options.series,function(serie){serie=Highcharts.merge(serie,{animation:false,showCheckbox:false,enableMouseTracking:false});if(!serie.isInternal){if(serie&&serie.marker&&/^url\\(/.test(serie.marker.symbol)){serie.marker.symbol='circle';}\nseries.push(serie);}});options.series=series;},process:function(options){this.attachEvents(options);},attachEvents:function(options){if(!options.chart){options.chart={};}\nif(!options.chart.events)\noptions.chart.events={};var scope=this;var chartEvents=options.chart.events;var beforeRenderer=chartEvents.beforeRenderer;if(beforeRenderer){beforeRenderer.call(scope,scope);}\nscope.fire('BeforeRenderer',scope);var load=chartEvents.load;chartEvents.load=function(){if(load)\nload.apply(this,arguments);scope.setChart(this);var series=this.options.series;if(series==null||series.length==0){var r=this.renderer;this.emptyText=r.text('没有数据',r.width/2,r.height/2).css({'fontSize':\"16px\",color:'#ff0000','font-weight':'bold'}).add();}\nscope.fire('AfterRenderer',scope);}\nchartEvents.destroy=function(){if(typeof this.emptyText!=\"undefined\"&&this.emptyText)\nthis.emptyText.destroy();this.panes=null;}\nif(!options.plotOptions){options.plotOptions={series:{}};}\nif(!options.plotOptions.series){options.plotOptions.series={};}\nif(!options.plotOptions.series||!options.plotOptions.series.point)\noptions.plotOptions.series.point={events:{}};if(!options.plotOptions.series.point.events){options.plotOptions.series.point.events={};}\nvar pEvents=options.plotOptions.series.point.events;var pClick=pEvents.click;pEvents.click=function(e){if(pClick)\npClick.apply(this,arguments);if(e.point&&e.point.value!=null){scope.fire('PointClick',this,scope,e);}}}});","js/smartbi/map/MapTypeTemplates.js":"\nif(typeof AbstractChartTypeTemplates=='undefined'){jsloader.resolve(\"smartbi.chart.abstract.AbstractChartTypeTemplates\",true);}\nvar MapTypeTemplates=AbstractChartTypeTemplates.extend({getToTemplatesByChartOption:function(option,chartType,reportType){return[];},getTemplateByReportType:function(reportType){if(reportType==\"OLAP\"||reportType==\"INSIGHT\"){return{};}else{return this.templates;}},initTemplatesGroup:function(){this.templatesGroup={map:{name:'地图',iconUrl:'img/chart/charttype/map_group.png',templateKeys:['map']},airlinemap:{name:'航线图',iconUrl:'img/chart/charttype/airlinemap_group.png',templateKeys:['airlinemap']}}\nreturn this.templatesGroup;},initTemplates:function(){this.templates={'map':[{id:'map_common',name:'地图',type:'map',iconUrl:'img/chart/charttype/map_common.png',options:{plotOptions:{map:{dataLabels:{enabled:true}}}}}],'airlinemap':[{id:'airlinemap_common',name:'航线图',type:'airlinemap',iconUrl:'img/chart/charttype/airlinemap_common.png',options:{plotOptions:{map:{dataLabels:{enabled:false}}}}}]}\nreturn this.templates;}});","js/smartbi/map/ChartView.js":"HTTP Status 404 . filename not found: /vision/js/smartbi/map/ChartView.js","js/freequery/report/FreeReportProcessor.js":"HTTP Status 404 . filename not found: /vision/js/freequery/report/FreeReportProcessor.js","js/freequery/report/FreeReportStatusPanel.js":"HTTP Status 404 . filename not found: /vision/js/freequery/report/FreeReportStatusPanel.js","js/freequery/control/PagePanel.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var util=jsloader.resolve(\"freequery.common.util\");var PageItem=jsloader.resolve(\"freequery.control.PageItem\");var PagePanel=function(parentObject){this.parent=parentObject;this.tabs=new Array();this.tabs_show=new Array();this.tabOrientation=\"TOP\";this.activeTab=null;this.oldContentBannerDisplay=\"\";this.movePos=0;this.showCount=0;this.linkWidth=20;this.pageTable=document.createElement(\"table\");this.pageTable.cellPadding=0;this.pageTable.cellSpacing=0;this.pageTable.className=\"tab-pagetable\";this.pageTBody=document.createElement(\"tbody\");this.pageTabTr=document.createElement(\"tr\");this.pageTabTd=document.createElement(\"td\");this.pageTabTd.className=\"tab-pagetd\";this.pageContentTr=document.createElement(\"tr\");this.pageContentTd=document.createElement(\"td\");this.tabBanner=document.createElement(\"div\");this.tabBanner.className=\"tab-tabbanner\";this.contentBanner=document.createElement(\"div\");this.contentBanner.style.height=\"100%\";this.contentBanner.style.overflow=\"auto\";this.tabTable=document.createElement(\"table\");this.tabTable.cellPadding=0;this.tabTable.cellSpacing=0;this.tabTable.className=\"tab-tabtable\";this.tabTBody=document.createElement(\"tbody\");this.tabTr=document.createElement(\"tr\");this.tdHead=document.createElement(\"td\");this.tdHead.className=\"tab-head-top\";this.tdHead.noWrap=\"true\";this.contentTable=document.createElement(\"table\");this.contentTable.cellPadding=0;this.contentTable.cellSpacing=0;this.contentTable.className=\"contenttable-top\";this.contentTBody=document.createElement(\"tbody\");this.contentTr=document.createElement(\"tr\");this.contentTr.setAttribute(\"valign\",\"top\");this.contentTd=document.createElement(\"td\");this.tabBackward=document.createElement(\"td\");this.tabBackward.className=\"tab-backward-disable\";this.tabBackward.noWrap=\"true\";this.tabBackward.style.display=\"none\";this.tabForward=document.createElement(\"td\");this.tabForward.className=\"tab-forward\";this.tabForward.noWrap=\"true\";this.tabForward.style.display=\"none\";this.tdPadding=document.createElement(\"td\");this.tdPadding.width=\"100%\";this.tdPadding.noWrap=\"true\";this.tdPadding.className=\"tab-padding-top\";this.parent.appendChild(this.pageTable);this.pageTable.appendChild(this.pageTBody);this.pageTBody.appendChild(this.pageTabTr);this.pageTBody.appendChild(this.pageContentTr);this.pageTabTr.appendChild(this.pageTabTd);this.pageContentTr.appendChild(this.pageContentTd);this.pageTabTd.appendChild(this.tabBanner);this.tabBanner.appendChild(this.tabTable);this.tabTable.appendChild(this.tabTBody);this.tabTBody.appendChild(this.tabTr);this.tabTr.appendChild(this.tdHead);this.tabTr.appendChild(this.tabBackward);this.tabTr.appendChild(this.tabForward);this.tabTr.appendChild(this.tdPadding);this.pageContentTd.appendChild(this.contentBanner);this.contentBanner.appendChild(this.contentTable);this.contentTable.appendChild(this.contentTBody);this.contentTBody.appendChild(this.contentTr);this.contentTr.appendChild(this.contentTd);this.onTabClick=new CustomEvent(\"onTabClick\",this);this.onTabActive=new CustomEvent(\"onTabActive\",this);this.addListener(window,\"resize\",this.doResize,this);this.addListener(this.tabBackward,\"click\",this.doBackward,this);this.addListener(this.tabBackward,\"mousedown\",this.doBackwardMouseDown,this);this.addListener(this.tabBackward,\"mouseup\",this.doBackwardMouseUp,this);this.addListener(this.tabForward,\"click\",this.doForward,this);this.addListener(this.tabForward,\"mousedown\",this.doForwardMouseDown,this);this.addListener(this.tabForward,\"mouseup\",this.doForwardMouseUp,this);}\nlang.extend(PagePanel,Module);PagePanel.prototype.destroy=function(){if(this.pageTable&&this.pageTable.parentNode&&this.pageTable.parentNode==this.parent)\ndomutils.destroyNode(this.pageTable);for(var i=this.tabs.length-1;i>=0;i--)\nthis.tabs[i].destroy();this.tabs=null;this.activeTab=null;this.onClick=null;this.parent=null;PagePanel.superclass.destroy.call(this);};PagePanel.prototype.setContentBannerVisibled=function(value){if(value){this.contentBanner.style.display=this.oldContentBannerDisplay;}else{this.oldContentBannerDisplay=this.contentBanner.style.display;this.contentBanner.style.display=\"none\";}}\nPagePanel.prototype.setContentBannerWidth=function(value){this.contentBanner.style.width=value;}\nPagePanel.prototype.setContentBannerHeight=function(value){this.contentBanner.style.height=value;}\nPagePanel.prototype.setTabHeadWidth=function(value){this.tdHead.width=value;}\nPagePanel.prototype.setTabPanelVisibled=function(value){if(value){this.pageTabTr.style.display=\"\";this.contentTable.className=this.tabOrientation==\"BOTTOM\"?\"contenttable-bottom\":\"contenttable-top\";}else{this.pageTabTr.style.display=\"none\";this.contentTable.className=\"contenttable\";}}\nPagePanel.prototype.setActiveTab=function(value){if(this.activeTab!=null){this.activeTab.deActive();}\nthis.activeTab=value;}\nPagePanel.prototype.getActiveTab=function(){return this.activeTab;}\nPagePanel.prototype.appendTab=function(){var tab=new PageItem(this.tabTr,this.tdPadding,this.contentTd);this.tabs.push(tab);tab.onClick.subscribe(this.doClick,this);tab.onActive.subscribe(this.doActive,this);tab.onCaptionChange.subscribe(this.doCaptionChange,this);tab.onVisibled.subscribe(this.doVisibled,this);return tab;}\nPagePanel.prototype.deleteTab=function(tabIndex){var tab=this.tabs.splice(tabIndex,1)[0];if(tab)\ntab.destroy();}\nPagePanel.prototype.updateTabOrder=function(orders){if(!orders||orders.length!=this.tabs.length)\nthrow Error(\"updateTabOrder error!\");var oldTabs=this.tabs;this.tabs=[];for(var i=0;i<orders.length;i++){var j=orders[i];this.tabs.push(oldTabs[j]);}\nreturn this.tabs;}\nPagePanel.prototype.doClick=function(obj){this.onTabClick.fire(obj);}\nPagePanel.prototype.doActive=function(obj){this.setActiveTab(obj);this.onTabActive.fire(obj);}\nPagePanel.prototype.doCaptionChange=function(obj){this.autoFitResize();}\nPagePanel.prototype.doVisibled=function(obj){this.autoFitResize();}\nPagePanel.prototype.addLink=function(value){this.tdPadding.appendChild(value);this.linkWidth=this.getLinkAreaWidth();}\nPagePanel.prototype.setTabOrientation=function(value){if(this.tabOrientation!=value)\nthis.tabOrientation=value;if(this.tabOrientation==\"BOTTOM\"){domutils.destroyNode(this.pageContentTr);this.pageTBody.insertBefore(this.pageContentTr,this.pageTabTr);this.contentTable.className=\"contenttable-bottom\";this.tdHead.className=\"tab-head-bottom\";this.tdPadding.className=\"tab-padding-bottom\";}else{domutils.destroyNode(this.pageContentTr);this.pageTBody.appendChild(this.pageContentTr);this.contentTable.className=\"contenttable-top\";this.tdHead.className=\"tab-head-top\";this.tdPadding.className=\"tab-padding-top\";}\nfor(var i=0;i<this.tabs.length;i++){this.tabs[i].setOrientation(this.tabOrientation);}}\nPagePanel.prototype.autoFitResize=function(){if(this.parent&&this.parent.style.display==\"none\")\nreturn;var bs=true;this.tabBackward.style.display=\"none\";this.tabForward.style.display=\"none\";while(this.tdPadding.offsetWidth>this.linkWidth&&bs){for(var i=0;i<this.tabs.length;i++){if(i==this.tabs.length-1)\nbs=false;if(!this.tabs[i].getVisibled()&&!this.tabs[i].userHidden){this.tabs[i].setTempHidden(false);break;}}\nif(i==this.tabs.length)break;}\nwhile(this.tdPadding.offsetWidth<=this.linkWidth){this.tabBackward.style.display=\"\";this.tabForward.style.display=\"\";for(var i=this.tabs.length-1;i>=0;i--){if(this.tabs[i].getVisibled()){this.tabs[i].setTempHidden(true);break;}}\nif(i==-1)break;}\nthis.resetTabsShow();this.showCount=this.getTabShowCount();this.movePos=0;if(this.tabOrientation==\"BOTTOM\"){this.tabBackward.className=\"tab-backward-disable-bottom\";this.tabForward.className=\"tab-forward-bottom\";}else{this.tabBackward.className=\"tab-backward-disable-top\";this.tabForward.className=\"tab-forward-top\";}}\nPagePanel.prototype.doBackward=function(){if(this.movePos==0)return;this.movePos=this.movePos-1;this.tabs_show[this.movePos].setTempHidden(false);this.tabs_show[this.movePos+this.showCount].setTempHidden(true);if(this.movePos==0){if(this.tabOrientation==\"BOTTOM\")\nthis.tabBackward.className=\"tab-backward-disable-bottom\";else\nthis.tabBackward.className=\"tab-backward-disable-top\";}\nif(this.tabOrientation==\"BOTTOM\")\nthis.tabForward.className=\"tab-forward-bottom\";else\nthis.tabForward.className=\"tab-forward-top\";}\nPagePanel.prototype.doForward=function(){if(this.movePos+this.showCount==this.tabs_show.length)return;this.tabs_show[this.movePos].setTempHidden(true);this.tabs_show[this.movePos+this.showCount].setTempHidden(false);this.movePos=this.movePos+1;if(this.movePos+this.showCount==this.tabs_show.length){if(this.tabOrientation==\"BOTTOM\")\nthis.tabForward.className=\"tab-forward-disable-bottom\";else\nthis.tabForward.className=\"tab-forward-disable-top\";}\nif(this.tabOrientation==\"BOTTOM\")\nthis.tabBackward.className=\"tab-backward-bottom\";else\nthis.tabBackward.className=\"tab-backward-top\";}\nPagePanel.prototype.doBackwardMouseDown=function(){if(this.movePos==0)return;if(this.tabOrientation==\"BOTTOM\")\nthis.tabBackward.className=\"tab-backward-down-bottom\";else\nthis.tabBackward.className=\"tab-backward-down-top\";}\nPagePanel.prototype.doBackwardMouseUp=function(){if(this.movePos==0)return;if(this.tabOrientation==\"BOTTOM\")\nthis.tabBackward.className=\"tab-backward-bottom\";else\nthis.tabBackward.className=\"tab-backward-top\";}\nPagePanel.prototype.doForwardMouseDown=function(){if(this.movePos+this.showCount==this.tabs_show.length)return;if(this.tabOrientation==\"BOTTOM\")\nthis.tabForward.className=\"tab-forward-down-bottom\";else\nthis.tabForward.className=\"tab-forward-down-top\";}\nPagePanel.prototype.doForwardMouseUp=function(){if(this.movePos+this.showCount==this.tabs_show.length)return;if(this.tabOrientation==\"BOTTOM\")\nthis.tabForward.className=\"tab-forward-bottom\";else\nthis.tabForward.className=\"tab-forward-top\";}\nPagePanel.prototype.resetTabsShow=function(){this.tabs_show=new Array();for(var i=0;i<this.tabs.length;i++){if(!this.tabs[i].userHidden){this.tabs_show.push(this.tabs[i]);}}}\nPagePanel.prototype.getTabShowCount=function(){var count=0;for(var i=0;i<this.tabs.length;i++){if(this.tabs[i].getVisibled())\ncount=count+1;}\nreturn count;}\nPagePanel.prototype.getLinkAreaWidth=function(){var linkWidth=20;for(var i=0;i<this.tdPadding.childNodes.length;i++){node=this.tdPadding.childNodes[i];linkWidth=linkWidth+node.offsetWidth;}\nreturn linkWidth;}\nPagePanel.prototype.doResize=function(ev){if(this.parent&&this.parent.parentNode&&this.parent.parentNode.parentWindow!=window)this.autoFitResize();}\nPagePanel.prototype.clear=function(){if(this.tabs){for(var i=this.tabs.length;i>0;i--){var tab=this.tabs.pop();tab.destroy();}\nthis.activeTab=null;}};","js/freequery/control/PageItem.js":"\n﻿\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var util=jsloader.resolve(\"freequery.common.util\");var PageItem=function(trObject,afterObject,itemParentObject){this.tr=trObject;this.afterObj=afterObject;this.itemParent=itemParentObject;this.items=new Array();this.active=false;this.enabled=true;this.obj=null;this.userHidden=false;this.orientation=\"TOP\";this.needDestroyObjList=new Array();this.button=document.createElement(\"td\");this.button.noWrap=\"true\";this.tr.insertBefore(this.button,this.afterObj);this.buttonL=document.createElement(\"span\");this.buttonL.style.display=\"inline-block\";if(!domutils.isIE())\nthis.buttonL.innerHTML=\"&nbsp;\";this.button.appendChild(this.buttonL);this.buttonM=document.createElement(\"span\");this.buttonM.style.display=\"inline-block\";this.button.appendChild(this.buttonM);this.buttonR=document.createElement(\"span\");this.buttonR.style.display=\"inline-block\";if(!domutils.isIE())\nthis.buttonR.innerHTML=\"&nbsp;\";this.button.appendChild(this.buttonR);this.img=document.createElement(\"img\");this.img.align=\"absMiddle\";this.button.className=\"tab-button-container\";this.buttonL.className=\"tab-button-left-top\";this.buttonM.className=\"tab-button-middle-top\";this.buttonR.className=\"tab-button-right-top\";this.onClick=new CustomEvent(\"onClick\",this);this.onActive=new CustomEvent(\"onActive\",this);this.onDeActive=new CustomEvent(\"onDeActive\",this);this.onCaptionChange=new CustomEvent(\"onCaptionChange\",this);this.onVisibled=new CustomEvent(\"onVisibled\",this);this.addListener(this.button,\"click\",this.doClick,this);this.addListener(this.button,\"mouseover\",this.doMouseEnter,this);this.addListener(this.button,\"mouseout\",this.doMouseLeave,this);this.oldDisplay=this.button.style.display;this.transObj=null;}\nlang.extend(PageItem,Module);PageItem.prototype.destroy=function(){this.removeListener(this.button,\"click\",this.doClick);this.removeListener(this.button,\"mouseenter\",this.doMouseEnter);this.removeListener(this.button,\"mouseleave\",this.doMouseLeave);this.onClick=null;this.onActive=null;this.onDeActive=null;this.onCaptionChange=null;this.onVisibled=null;this.items=null;this.obj=null;this.transObj=null;if(this.needDestroyObjList){for(var i=this.needDestroyObjList.length;i>0;i--){this.needDestroyObjList[i-1].destroy();}}\nif(this.button&&this.button.parentNode&&this.button.parentNode==this.tr)\ndomutils.destroyNode(this.button);PageItem.superclass.destroy.call(this);};PageItem.prototype.appendItem=function(value){if(this.itemParent)\nthis.itemParent.appendChild(value);this.items[this.items.length]=value;value.oldVisible=value.style.display;value.style.display=\"none\";}\nPageItem.prototype.getElement=function(){return this.button;}\nPageItem.prototype.setCaption=function(value){this.buttonM.innerText=value;this.onCaptionChange.fire();}\nPageItem.prototype.getCaption=function(){return this.buttonM.innerText;}\nPageItem.prototype.setWidth=function(value){this.buttonM.style.width=value;}\nPageItem.prototype.getWidth=function(){return this.buttonM.offsetWidth;}\nPageItem.prototype.setVisibled=function(value){this.button.style.display=value?this.oldDisplay:\"none\";this.userHidden=!value;this.onVisibled.fire(this);}\nPageItem.prototype.setEnabled=function(value){this.enabled=value;this.buttonM.style.color=this.enabled?\"\":\"#A9A9A9\";this.buttonM.disabled=!value;}\nPageItem.prototype.setOrientation=function(value){if(this.orientation==value)return;this.orientation=value;this.resetClassName();}\nPageItem.prototype.resetClassName=function(){if(this.orientation==\"BOTTOM\"){if(this.active){this.buttonL.className=\"tab-sel-button-left-bottom\";this.buttonM.className=\"tab-sel-button-middle-bottom\";this.buttonR.className=\"tab-sel-button-right-bottom\";}else{this.buttonL.className=\"tab-button-left-bottom\";this.buttonM.className=\"tab-button-middle-bottom\";this.buttonR.className=\"tab-button-right-bottom\";}}else{if(this.active){this.buttonL.className=\"tab-sel-button-left-top\";this.buttonM.className=\"tab-sel-button-middle-top\";this.buttonR.className=\"tab-sel-button-right-top\";}else{this.buttonL.className=\"tab-button-left-top\";this.buttonM.className=\"tab-button-middle-top\";this.buttonR.className=\"tab-button-right-top\";}}}\nPageItem.prototype.getVisibled=function(){if(this.button.style.display==\"none\")\nreturn false;else\nreturn true;}\nPageItem.prototype.setTempHidden=function(value){this.button.style.display=value?\"none\":this.oldDisplay;}\nPageItem.prototype.setImage=function(value){this.img.src=value;oldtext=this.buttonM.innerText;this.buttonM.innerHTML=this.img.outerHTML+oldtext;}\nPageItem.prototype.setActive=function(){if(this.active||!this.enabled){return};this.active=true;this.resetClassName();for(var i=0;i<this.items.length;i++){this.items[i].style.display=this.items[i].oldVisible;}\nthis.onActive.fire(this);}\nPageItem.prototype.deActive=function(){if(!this.active||!this.enabled)\nreturn;this.active=false;this.resetClassName();for(var i=0;i<this.items.length;i++){this.items[i].style.display=\"none\";}\nthis.onDeActive.fire(this);}\nPageItem.prototype.doClick=function(){this.onClick.fire(this);this.setActive();}\nPageItem.prototype.doMouseEnter=function(){if(!this.active&&this.enabled){this.buttonM.className=(this.orientation==\"BOTTOM\")?\"tab-button-middle-hoover-bottom\":\"tab-button-middle-hoover-top\";}}\nPageItem.prototype.doMouseLeave=function(){if(!this.active){this.buttonM.className=(this.orientation==\"BOTTOM\")?\"tab-button-middle-bottom\":\"tab-button-middle-top\";}}\nPageItem.prototype.clear=function(){if(this.items){for(var i=this.items.length;i>0;i--){var item=this.items.pop();domutils.destroyNode(item);}}\nif(this.needDestroyObjList){for(var n=this.needDestroyObjList.length;n>0;n--){var obj=this.needDestroyObjList.pop;obj.destroy();}}\nthis.transObj=null;}","js/freequery/rule/FreeVerifyRule.js":"HTTP Status 404 . filename not found: /vision/js/freequery/rule/FreeVerifyRule.js","js/freequery/report/ReportRule.js":"HTTP Status 404 . filename not found: /vision/js/freequery/report/ReportRule.js","js/freequery/rule/FreeVerifyResult.js":"HTTP Status 404 . filename not found: /vision/js/freequery/rule/FreeVerifyResult.js","js/bof/managereport/ManageReportService.js":"HTTP Status 404 . filename not found: /vision/js/bof/managereport/ManageReportService.js","js/bof/managereport/ManageReportServiceStub.js.stub":"var util = imports(\"freequery.common.util\").getInstance();var ManageReportServiceStub = function() {\n};\n\nManageReportServiceStub.prototype.getInstance = function() {\n\treturn util.remoteInvokeEx2(\"ManageReportService\", \"getInstance\", []).result;\n};\n\nManageReportServiceStub.prototype.isReadOnly = function(arg0) {\n\treturn util.remoteInvokeEx2(\"ManageReportService\", \"isReadOnly\", [arg0]).result;\n};\n\nManageReportServiceStub.prototype.activate = function() {\n\treturn util.remoteInvokeEx2(\"ManageReportService\", \"activate\", []).result;\n};\n\nManageReportServiceStub.prototype.removeSessionInfo = function(arg0) {\n\treturn util.remoteInvokeEx2(\"ManageReportService\", \"removeSessionInfo\", [arg0]).result;\n};\n\nManageReportServiceStub.prototype.getParameterPanelService = function() {\n\treturn util.remoteInvokeEx2(\"ManageReportService\", \"getParameterPanelService\", []).result;\n};\n\nManageReportServiceStub.prototype.buildLinkInfo = function(arg0) {\n\treturn util.remoteInvokeEx2(\"ManageReportService\", \"buildLinkInfo\", [arg0]).result;\n};\n\nManageReportServiceStub.prototype.getFreeReportParamsInfoOnly = function(arg0) {\n\treturn util.remoteInvokeEx2(\"ManageReportService\", \"getFreeReportParamsInfoOnly\", [arg0]).result;\n};\n\nManageReportServiceStub.prototype.getParamsByMetricReport = function(arg0) {\n\treturn util.remoteInvokeEx2(\"ManageReportService\", \"getParamsByMetricReport\", [arg0]).result;\n};\n\nManageReportServiceStub.prototype.openReport = function(arg0) {\n\treturn util.remoteInvokeEx2(\"ManageReportService\", \"openReport\", [arg0]).result;\n};\n\nManageReportServiceStub.prototype.setParameterPanelService = function(arg0) {\n\treturn util.remoteInvokeEx2(\"ManageReportService\", \"setParameterPanelService\", [arg0]).result;\n};\n\n","js/bof/macro/FreeReportMacroExecutor.js":"\nvar MacroService=imports(\"bof.macro.services.MacroService\");var FreeReportMacroExecutor=function(resource,targetName,eventName,args,script){this.resource=resource;this.context=resource.queryNavigator;this.targetName=targetName;this.evenetType=eventName;this.args=args;this.script=script;};FreeReportMacroExecutor.prototype.run=function(module){var application={};eval(\"var \"+this.resource.getResourceType()+\" = this.resource;\");eval(\"application.\"+this.resource.getResourceType()+\" = \"+this.resource.getResourceType()+\";\");var event={arguments:this.args};application.event=event;application.application=application;application.module=module;var resourceId=this.resource.getResourceId();var use=function(moduleName){eval(MacroService.getInstance().findCommonModule(resourceId?resourceId:null,moduleName,\"ClientSide\"));return loadCommonModule();};eval(this.script);main.apply(null,this.args);};","js/ResourceAdapter.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var util=jsloader.resolve(\"freequery.common.util\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var ResourceAdapter=function(processor,type){this.processor=processor;this.resType=type;this.events=new Array();};lang.extend(ResourceAdapter,Module);ResourceAdapter.prototype.attachEvent=function(eventName,callback,thisObj){if(!this.events[eventName]){var customEvent=new CustomEvent(eventName);this.events[eventName]=customEvent;}\nthis.events[eventName].subscribe(callback,thisObj);};ResourceAdapter.prototype.fireEvent=function(eventName,cell){this.events[eventName].fire(cell);};ResourceAdapter.prototype.destroy=function(){ResourceAdapter.superclass.destroy.call(this);};ResourceAdapter.prototype.getResourceType=function(){return this.resType;};ResourceAdapter.prototype.refreshData=function(){if(this.processor){if(this.resType==\"SIMPLE_REPORT\"){this.processor.queryViewCommand.query.doRefresh();}\nelse if(this.resType==\"Dashboard\"||this.resType==\"DashboardMap\"){this.processor.dashboardAction.dashboard.refreshData(true);}\nelse if(this.resType==\"MetricReport\"){this.processor.doOnGetDataBefore();this.processor.doOnGetDataClick();}\nelse if(this.resType==\"FreeReport\"){this.processor.refreshData();}}};ResourceAdapter.prototype.save=function(){if(this.processor){if(this.resType==\"SIMPLE_REPORT\"){this.processor.queryViewCommand.query.doSave();}\nelse if(this.resType==\"Dashboard\"||this.resType==\"DashboardMap\"){this.processor.dashboardAction.dashboard.elemSave_click_handler();}\nelse if(this.resType==\"MetricReport\"){this.processor.doOnBefore();this.processor.doOnSaveClick();}\nelse if(this.resType==\"FreeReport\")\nthis.processor.save();}};ResourceAdapter.prototype.saveAs=function(){if(this.processor){if(this.resType==\"SIMPLE_REPORT\"){this.processor.queryViewCommand.query.doSaveAs();}\nelse if(this.resType==\"Dashboard\"||this.resType==\"DashboardMap\"){this.processor.dashboardAction.dashboard.elemSaveAs_click_handler();}}};ResourceAdapter.prototype.exportExcel=function(){if(this.processor){if(this.resType==\"SIMPLE_REPORT\"){if(!this.processor.queryViewCommand.query.exportMenu)\nthis.processor.queryViewCommand.query.initExportMenu();this.processor.queryViewCommand.query.exportMenu.selectedId=\"EXCEL\";this.processor.queryViewCommand.query.doExportMenuCloseUp();}\nelse if(this.resType==\"Dashboard\"||this.resType==\"DashboardMap\"){if(!this.processor.dashboardAction.dashboard.exportMenu)\nthis.processor.dashboardAction.dashboard.initExportMenu();this.processor.dashboardAction.dashboard.exportMenu.selectedId=\"EXCEL\";this.processor.dashboardAction.dashboard.doExportMenuCloseUp();}\nelse if(this.resType==\"MetricReport\"){this.processor.doExportBtnClick();}\nelse if(this.resType==\"FreeReport\"){this.processor.exportExcel();}}};ResourceAdapter.prototype.exportCSV=function(){if(this.processor){if(this.resType==\"SIMPLE_REPORT\"){if(!this.processor.queryViewCommand.query.exportMenu)\nthis.processor.queryViewCommand.query.initExportMenu();this.processor.queryViewCommand.query.exportMenu.selectedId=\"CSV\";this.processor.queryViewCommand.query.doExportMenuCloseUp();}}};ResourceAdapter.prototype.exportTXT=function(){if(this.processor){if(this.resType==\"SIMPLE_REPORT\"){if(!this.processor.queryViewCommand.query.exportMenu)\nthis.processor.queryViewCommand.query.initExportMenu();this.processor.queryViewCommand.query.exportMenu.selectedId=\"TXT\";this.processor.queryViewCommand.query.doExportMenuCloseUp();}}};ResourceAdapter.prototype.exportHTML=function(){if(this.processor){if(this.resType==\"SIMPLE_REPORT\"){if(!this.processor.queryViewCommand.query.exportMenu)\nthis.processor.queryViewCommand.query.initExportMenu();this.processor.queryViewCommand.query.exportMenu.selectedId=\"MHT\";this.processor.queryViewCommand.query.doExportMenuCloseUp();}}};ResourceAdapter.prototype.exportPDF=function(){if(this.processor){if(this.resType==\"Dashboard\"||this.resType==\"DashboardMap\"){if(!this.processor.dashboardAction.dashboard.exportMenu)\nthis.processor.dashboardAction.dashboard.initExportMenu();this.processor.dashboardAction.dashboard.exportMenu.selectedId=\"PDF\";this.processor.dashboardAction.dashboard.doExportMenuCloseUp();}else if(this.resType==\"MetricReport\"){this.processor.doExportPDFBtnClick();}else if(this.resType==\"FreeReport\"){this.processor.exportPDF();}}};ResourceAdapter.prototype.exportWord=function(){if(this.processor){if(this.resType==\"MetricReport\"){this.processor.doExportWordBtnClick();}else if(this.resType==\"FreeReport\"){this.processor.exportWord();}}};ResourceAdapter.prototype.exportJPEG=function(){if(this.processor){if(this.resType==\"Dashboard\"||this.resType==\"DashboardMap\"){if(!this.processor.dashboardAction.dashboard.exportMenu)\nthis.processor.dashboardAction.dashboard.initExportMenu();this.processor.dashboardAction.dashboard.exportMenu.selectedId=\"IMG\";this.processor.dashboardAction.dashboard.doExportMenuCloseUp();}}};ResourceAdapter.prototype.print=function(){if(this.processor){if(this.resType==\"SIMPLE_REPORT\"){this.processor.queryViewCommand.query.doPrint();}}};ResourceAdapter.prototype.showParamPanel=function(){if(this.processor){if(this.resType==\"FreeReport\")\nthis.processor.showParamPanel();else if(this.resType==\"MetricReport\")\nthis.processor.doOnChangeParamClick();else if(this.resType==\"SIMPLE_REPORT\"){if(this.processor.queryViewCommand.query.paramPanelObj&&this.processor.queryViewCommand.query.paramPanelObj.parent)\nthis.processor.queryViewCommand.query.paramPanelObj.parent.style.display=\"\";}}};ResourceAdapter.prototype.hideParamPanel=function(){if(this.processor){if(this.resType==\"SIMPLE_REPORT\"){if(this.processor.queryViewCommand.query.paramPanelObj&&this.processor.queryViewCommand.query.paramPanelObj.parent)\nthis.processor.queryViewCommand.query.paramPanelObj.parent.style.display=\"none\";}}};ResourceAdapter.prototype.setParam=function(paramName,paramValue,paramdisplayValue){if(this.processor){if(this.resType==\"SIMPLE_REPORT\"){var query=this.processor.queryViewCommand.query;var tmpid='OutputParameter.'+query.bizViewId+'.'+paramName;var b=query.doParamChange(query.paramPanelObj,{id:tmpid},null,paramValue,null,paramdisplayValue);if(!b)\nalert('参数'+paramName+'设置错误!');query.paramPanelObj.setParamValue(tmpid,paramValue,paramdisplayValue);query.refreshData(true,false);}}};ResourceAdapter.prototype.refreshOriginalData=function(){if(this.processor){if(this.resType==\"MetricReport\"){this.processor.doOnGetDataBefore();this.processor.doOnGetOriginalDataClick();}}};ResourceAdapter.prototype.summaryData=function(){if(this.processor){if(this.resType==\"MetricReport\"){this.processor.doOnSummaryBefore();return this.processor.doOnGetSummaryDataClick();}}};ResourceAdapter.prototype.changeStatusPanel=function(){if(this.processor){if(this.resType==\"MetricReport\"||this.resType==\"FreeReport\")\nthis.processor.doOnShowStatePanel();}};ResourceAdapter.prototype.verify=function(){if(this.processor){if(this.resType==\"MetricReport\"||this.resType==\"FreeReport\"){this.processor.doOnBefore();return this.processor.doOnVerifyClick();}}};ResourceAdapter.prototype.archive=function(){if(this.processor){if(this.resType==\"MetricReport\"){this.processor.doOnBefore();this.processor.doOnArchiveClick();}}};ResourceAdapter.prototype.archiveRollBack=function(){if(this.processor){if(this.resType==\"MetricReport\")\nthis.processor.doOnArchiveRollbackClick();}};ResourceAdapter.prototype.audit=function(){if(this.processor){if(this.resType==\"MetricReport\"){this.processor.doOnAuditClick();}}};ResourceAdapter.prototype.auditRollBack=function(){if(this.processor){if(this.resType==\"MetricReport\")\nthis.processor.doOnAuditRollbackClick();}};ResourceAdapter.prototype.currentAuditRollBack=function(){if(this.processor){if(this.resType==\"MetricReport\")\nthis.processor.doOnCurrentAuditRollbackClick();}};ResourceAdapter.prototype.rewrite=function(){if(this.processor){if(this.resType==\"MetricReport\"){this.processor.doOnBefore();this.processor.doWriteBackClick();}}};ResourceAdapter.prototype.search=function(){if(this.processor){if(this.resType==\"MetricReport\")\nthis.processor.doSearchClick();}};ResourceAdapter.prototype.getParams=function(){if(this.processor){if(this.resType==\"MetricReport\"||this.resType==\"FreeReport\")\nreturn this.processor.getParams();}\nreturn null;};ResourceAdapter.prototype.pageSetup=function(){if(this.processor){if(this.resType==\"MetricReport\"||this.resType==\"FreeReport\")\nthis.processor.pageSetup();}};ResourceAdapter.prototype.printPDF=function(){if(this.processor){if(this.resType==\"MetricReport\"||this.resType==\"FreeReport\")\nthis.processor.printPDF();}};ResourceAdapter.prototype.copy=function(){if(this.processor){if(this.resType==\"MetricReport\")\nthis.processor.copy();}};ResourceAdapter.prototype.setWriteData=function(flag){if(this.processor){if(this.resType==\"MetricReport\"||this.resType==\"FreeReport\")\nthis.processor.setWriteData(flag);}};ResourceAdapter.prototype.isWriteData=function(){if(this.processor){if(this.resType==\"MetricReport\"||this.resType==\"FreeReport\")\nreturn this.processor.isWriteData();}};ResourceAdapter.prototype.getCurrentSummaryFlag=function(){if(this.processor){if(this.resType==\"MetricReport\"||this.resType==\"FreeReport\")\nreturn this.processor.getCurrentSummaryFlag();}};ResourceAdapter.prototype.getModifyCells=function(){if(this.processor){var ret=util.remoteInvokeEx(\"ManageReportService\",\"getModifyCells\",[this.processor.sessionInfoId]);if(ret.succeeded)\nreturn ret.result;else\nreturn null;}\nreturn null;};ResourceAdapter.prototype.updateSnapShot=function(snapShot){if(this.processor){if(this.resType==\"MetricReport\"){if(!snapShot)\nsnapShot=\"default\";this.processor.snapShotFlag=snapShot;this.processor.updateSnapShot();}}};ResourceAdapter.prototype.displaySnapshotData=function(snapShot){if(this.processor){if(this.resType==\"MetricReport\"){if(!snapShot)\nsnapShot=\"default\";this.processor.snapShotFlag=snapShot;this.processor.showSnapShotData();}}};ResourceAdapter.prototype.displayModifidData=function(){this.refreshData();};ResourceAdapter.prototype.displayModifiedDataByFlag=function(summaryFlag){if(this.processor){if(this.resType==\"MetricReport\"){this.processor.snapShotFlag=\"default\";this.processor.displayModifiedDataByFlag(summaryFlag);}}};ResourceAdapter.prototype.displayOrginalData=function(){this.refreshOriginalData();};ResourceAdapter.prototype.summarizeSnapShotData=function(snapShot){if(this.processor){if(this.resType==\"MetricReport\"){if(!snapShot)\nsnapShot=\"default\";this.processor.snapShotFlag=snapShot;this.processor.summarizeSnapShotData();}}};ResourceAdapter.prototype.getSubDepartmentsWithoutSnapShot=function(snapShot){if(this.processor){if(this.resType==\"MetricReport\"){if(!snapShot)\nsnapShot=\"default\";this.processor.snapShotFlag=snapShot;return this.processor.getSubDepartmentsWithoutSnapShot();}}};ResourceAdapter.prototype.isSnapShotExist=function(snapShot,reportId,params){if(this.processor){if(this.resType==\"MetricReport\"){var newParams=new Array();for(var i=0;i<params.length;i++){newParams.push(params[i]);}\nvar ret=util.remoteInvokeEx(\"ManageReportService\",\"isSnapShotExist\",[snapShot,reportId,newParams]);if(ret)\nreturn ret.result;}}\nreturn false;};ResourceAdapter.prototype.verifyReportBySnapshot=function(snapShot){if(this.processor){if(this.resType==\"MetricReport\"){return this.processor.verifyReportBySnapShot(snapShot);}else if(this.resType==\"FreeReport\"){return this.processor.verifyReportBySnapShot(snapShot);}}};ResourceAdapter.prototype.clearReferableReportCache=function(){if(this.processor){return this.processor.clearReferableReportCache();}};ResourceAdapter.prototype.saveTabItemValue=function(itemKey,value,snapShot){if(this.processor){if(this.resType==\"MetricReport\"){return this.processor.saveTabItemValue(itemKey,value,snapShot);}else if(this.resType==\"FreeReport\"){return this.processor.saveTabItemValue(itemKey,value);}}};ResourceAdapter.prototype.firstPage=function(){if(this.processor&&(this.resType==\"MetricReport\"||this.resType==\"FreeReport\")){this.processor.firstPage();}};ResourceAdapter.prototype.previousPage=function(){if(this.processor&&(this.resType==\"MetricReport\"||this.resType==\"FreeReport\")){this.processor.previousPage();}};ResourceAdapter.prototype.nextPage=function(){if(this.processor&&(this.resType==\"MetricReport\"||this.resType==\"FreeReport\")){this.processor.nextPage();}};ResourceAdapter.prototype.lastPage=function(){if(this.processor&&(this.resType==\"MetricReport\"||this.resType==\"FreeReport\")){this.processor.lastPage();}};ResourceAdapter.prototype.showAll=function(){if(this.processor&&(this.resType==\"MetricReport\"||this.resType==\"FreeReport\")){this.processor.showAll();}};ResourceAdapter.prototype.showPage=function(){if(this.processor&&(this.resType==\"MetricReport\"||this.resType==\"FreeReport\")){this.processor.showPage();}};ResourceAdapter.prototype.getTotalPageNumber=function(){if(this.processor&&(this.resType==\"MetricReport\"||this.resType==\"FreeReport\")){return this.processor.getTotalPageNumber();}};ResourceAdapter.prototype.getPageIndex=function(){if(this.processor&&(this.resType==\"MetricReport\"||this.resType==\"FreeReport\")){return this.processor.getPageIndex();}};ResourceAdapter.prototype.getSessionInfoId=function(){if(this.processor&&(this.resType==\"MetricReport\"||this.resType==\"FreeReport\")){return this.processor.sessionInfoId;}};ResourceAdapter.prototype.getReportStatusPanel=function(){if(this.processor&&(this.resType==\"MetricReport\"||this.resType==\"FreeReport\")){return this.processor.reportStatusPanel;}};ResourceAdapter.prototype.getToolbarDiv=function(){if(this.processor&&(this.resType==\"MetricReport\"||this.resType==\"FreeReport\")){return this.processor.getToolbarDiv();}}\nResourceAdapter.prototype.getReportSaveBtn=function(){if(this.resType==\"FreeReport\"){return this.processor.getReportSaveBtn();}}\nResourceAdapter.prototype.isShowPage=function(){if(this.processor&&(this.resType==\"MetricReport\"||this.resType==\"FreeReport\")){return this.processor.isShowPage();}}","js/bof/decisionpanel/Portal/Dashlet/Portlet/FreeReportPortlet.js":"\n﻿var util=jsloader.resolve(\"freequery.common.util\");var domutils=jsloader.resolve(\"freequery.lang.domutils\");var BofPortlet=jsloader.resolve(\"bof.decisionpanel.Portal.Dashlet.Portlet.BofPortlet\");var globalPortletIFrameIndex=0;var module=null;var FreeReportPortlet=function(parentDiv,contextStr,dashletType){FreeReportPortlet.superclass.constructor.call(this,parentDiv,contextStr);this.portletIFrameIndex=globalPortletIFrameIndex++;var frameId=\"FreeReportIFrame\"+this.portletId||this.portletIFrameIndex;this.frameId=frameId;this.div.innerHTML='<table width=\"100%\" height=\"100%\" cellpadding=\"0\" cellspacing=\"0\">'+' <tr valign=\"top\">'+'  <td class=\"_mainTd\" valign=\"top\" align=\"center\">'+'   <iframe name=\"'+frameId+'\" id=\"'+frameId+'\" class=\"_iframe\" frameborder=\"3\" width=\"100%\" height=\"100%\" style=\"border-width:0px;\">'+'   <\/iframe>'+'  <\/td>'+' <\/tr>'+'<\/table>';this.frame=domutils.findElementByClassName([this.div],\"_iframe\");this.mainTd=domutils.findElementByClassName([this.div],\"_mainTd\");this.dashletType=dashletType;this.frame.fromPortal=true;this.checkCount=0;this.loadComplete=false;this.onHeightChanged=new CustomEvent(\"onHeightChanged\",this);var autoHeight=this.portletXml?domutils.getNodeAtrributeValueByName(this.portletXml,\"AUTOHEIGHT\"):null;this.autoHeight=autoHeight&&autoHeight.nodeValue==\"true\";};lang.extend(FreeReportPortlet,BofPortlet);FreeReportPortlet.prototype.render=function(){FreeReportPortlet.superclass.render.call(this);if(this.getPageObj().paramPanel){this.getPageObj().paramPanel.onDropDownTree.subscribe(this.doDropDownTree,this);this.getPageObj().paramPanel.onDropDown.subscribe(this.doDropDownTree,this);}\nif(!this.portletId)\nreturn;if(!this.paramValueFixed){this.paramValueFixed=new Array();}\nvar query,ret=util.remoteInvokeEx(\"ManageReportService\",\"openAndGetReport\",[this.portletId]);if(!ret)\nreturn;var params=ret.result[ret.result.length-1];var initParams=new Array();var ps=lang.toJSONString(params);this.initParams=lang.parseJSON(ps);var paramObj=this.getParamInfo(params);if(ret&&ret.result){this.clientId=ret.result[0];query=ret.result[1];}\nif(!this.clientId)\nreturn;if(\"undefined\"===typeof this.ishidetoolbar)\nthis.ishidetoolbar=true;if(this.autorefreshValue==\"template\"||this.autorefreshValue==\"delay\"){this.autorefresh=true;}\nvar url=\"component/report.jsp\"\n+\"?clientId=\"+this.clientId\n+\"&showtoolbar=\"+!this.ishidetoolbar;if(this.isReplace()){url=url+\"&refresh=false\";}else\nurl=url+\"&refresh=\"+this.autorefresh;if(\"undefined\"===typeof this.isHideShortTollBar)\nthis.isHideShortTollBar=true;if(\"undefined\"===typeof this.autorefresh)\nthis.autorefresh=true;url=url+\"&showShortToolbar=\"+\n(!this.isHideShortTollBar);url=url+\"&frompage=true\";if(this.autorefreshValue==\"template\")\nurl+=\"&nodata=true\";if(this.autoHeight){this.onFreeReportLoad(this);}\nthis.setFrameUrl(url,paramObj);this.hiddenParam();if(!this.getTitle()){this.setTitle(\"\");}\nif(this.isReplace()){this.setTitle(query.alias||query.name);}};FreeReportPortlet.prototype.setFrameUrl=function(url,paramObj){var that=this;var time=this.delayTime?this.delayTime*1000:100;if(paramObj){this.initParamForm();this.paramInput.value=lang.toJSONString(paramObj);this.freeReportForm.action=url;this.freeReportForm.target=this.frameId;if(this.autorefreshValue==\"delay\"){setTimeout(function(){that.freeReportSubmit();},time)}else{this.freeReportSubmit();}}else{url=url+\"&paramsInfo=0\";if(this.autorefreshValue==\"delay\"){setTimeout(function(){that.frame.src=url;},time)}else{this.frame.src=url;}}}\nFreeReportPortlet.prototype.destroy=function(){if(this.portalObj&&this.portalObj.paramPanel){delete this.portalObj;}\nif(this.frame){this.frame.src=\"\";delete this.frame;}\ntry{domutils.destroyNode(this.div)}catch(e){};try{this.div.removeNode();}catch(e){};delete this.div;FreeReportPortlet.superclass.destroy.call(this);delete this.dashletType;delete this.clientId;delete this.portletId;delete this.exportMenuPanel;};FreeReportPortlet.prototype.initParamForm=function(){if(!this.paramSpan){this.paramSpan=document.createElement(\"SPAN\");this.paramSpan.style.display=\"\";this.mainTd.appendChild(this.paramSpan);var form=document.createElement(\"FORM\");form.method=\"POST\";this.freeReportForm=form;this.paramSpan.appendChild(form);this.paramInput=document.createElement(\"INPUT\");this.paramInput.type=\"hidden\";this.paramInput.name=\"paramsInfo\";form.appendChild(this.paramInput);}}\nFreeReportPortlet.prototype.freeReportSubmit=function(){this.freeReportForm.submit();}\nFreeReportPortlet.prototype.onParamChange=function(paramPanel,param,newId,newValue,relateParam){if(!this.isLoadComplete())\nreturn;var tempParam;for(indx in this.params){var portletParam=this.params[indx];if(portletParam.name==param.name&&portletParam.type==param.type){tempParam=portletParam;break;}}\nif(!tempParam)\nreturn;tempParam.value=newId;tempParam.displayValue=newValue;var freeReport=this.frame.contentWindow;if(freeReport!=null){if(this.dashletType==\"MetricReport\"){if(!module)\nmodule=freeReport.getReportAdapter();if(this.paramValueFixed&&this.paramValueFixed[param.alias])\nreturn;freeReport.addSelectParams(tempParam.id,newId,newValue,param.alias,tempParam.bindingName,null);freeReport.refreshTableParamVle();freeReport.setParamValue();module.refreshData();}else{freeReport.setParamValueFromPage(paramPanel,tempParam,null,newId,null,newValue,\"PublicParameter\");var ret=util.remoteInvoke(\"ManageReportService\",\"getSimpleReportBeanList\",[freeReport.currentSessionID]);if(ret&&ret.succeeded&&ret.result&&ret.result.length>0){for(var i=0;i<ret.result.length;i++){var pClientId=ret.result[i].clientId;var params=ret.result[i].params;for(var j=0;j<params.length;j++){if(params[j].alias==tempParam.alias){freeReport.setParamValue(pClientId,params[j].id,newId,newValue);}}}}\nfreeReport.setParamValue(pClientId,tempParam.id,newId,newValue);if(!relateParam&&freeReport.autoRefreshAfterChangeParameter==\"true\"){freeReport.changeParam=true;freeReport.refreshReport();freeReport.changeParam=false;}}}}\nFreeReportPortlet.prototype.onParamChangeByName=function(paramName,newId,newValue){var tempParam;for(indx in this.params){var portletParam=this.params[indx];if(portletParam.name==paramName){tempParam=portletParam;break;}}\nif(!tempParam)\nreturn;tempParam.value=newId;tempParam.displayValue=newValue;var freeReport=this.frame.contentWindow;if(freeReport!=null){if(this.dashletType==\"MetricReport\"){if(!module)\nmodule=freeReport.getReportAdapter();if(this.paramValueFixed&&this.paramValueFixed[param.name])\nreturn;freeReport.addSelectParams(tempParam.id,newId,newValue,param.name,tempParam.bindingName,null);freeReport.refreshTableParamVle();freeReport.setParamValue();module.refreshData();}else{var ret=util.remoteInvoke(\"ManageReportService\",\"getSimpleReportBeanList\",[freeReport.currentSessionID]);var pClientId=null;if(ret&&ret.succeeded&&ret.result&&ret.result[0]){pClientId=ret.result[0].clientId;}\nif(!pClientId)\nreturn;freeReport.setParamValue(pClientId,tempParam.id,newId,newValue);freeReport.refreshReport();}}}\nFreeReportPortlet.prototype.fillParamValue=function(pName,pValue,pDisplayValue){for(indx in this.getParams()){var param=this.params[indx];if(pName==param.name){var paramObj={};paramObj.id=param.id;paramObj.name=pName;paramObj.type=param.type;paramObj.value=pValue;paramObj.displayValue=pDisplayValue;this.setPublicParamPanelValue(paramObj);}\nif(pName==param.name&&param.value!=pValue){param.value=pValue;param.displayValue=pDisplayValue;this.changeParams[param.id]=true;break;}}}\nFreeReportPortlet.prototype.setPublicParamPanelValue=function(param){var isPublic=this.isPublicParam(param.id,this.portletId);if(isPublic){var publicParams=this.portalObj.params;for(indx in publicParams){var publicParam=publicParams[indx];if(param.name==publicParam.name&&param.type==publicParam.type){if(param.value&&(param.value!=publicParam.value||null!=this.portalObj.InteractParamList)){this.setPublicParamValueById(publicParam.id,param.value,param.displayValue);this.doPublicParamChange(publicParam,param.value,param.displayValue);}\nbreak;}}}}\nFreeReportPortlet.prototype.setParamValueFixed=function(paramObj){if(this.dashletType==\"MetricReport\"){var ret=util.remoteInvoke(\"ManageReportService\",\"getReportPropertyById\",[this.portletId]);if(ret.succeeded&&ret.result){var result=ret.result;for(indx in paramObj){var param=paramObj[indx];if(null!=result.currency&&result.currency!=\"\"&&param.name==\"Currency\"){this.paramValueFixed[param.alias]=true;}\nif(null!=result.department&&result.department!=\"\"&&param.name==\"Organization\"){this.paramValueFixed[param.alias]=true;}\nif(null!=result.interval&&result.interval!=\"\"&&param.name==\"Interval\"){this.paramValueFixed[param.alias]=true;}\nif(null!=result.metric&&result.metric!=\"\"&&param.name==\"Time\"){this.paramValueFixed[param.alias]=true;}}}}}\nFreeReportPortlet.prototype.getPortletObject=function(){if(this.isFromView!=undefined&&this.isFromView==false)\nreturn;if(this.frame&&this.frame.contentWindow){var cw=this.frame.contentWindow;if(cw.classAction&&cw.classAction.reportCommand.iframe)\nreturn cw.classAction.reportCommand.iframe.contentWindow;else\nreturn cw;}}\nFreeReportPortlet.prototype.getReportParams=function(){return this.params;}\nFreeReportPortlet.prototype.getReportCurrentParams=function(){var freeReport=this.getPortletObject();if(!freeReport)\nreturn null;return freeReport.oldParamValues;}\nFreeReportPortlet.prototype.setParamValueByName=function(pName,pValue,pDisplayValue){for(indx in this.getParams()){var param=this.params[indx];if(pName==param.name&&param.value!=pValue){param.value=pValue;param.displayValue=pDisplayValue;}}}\nFreeReportPortlet.prototype.getParamInfo=function(){var ret=util.remoteInvoke(\"ManageReportService\",\"getParamsByReportId\",[this.portletId]);if(ret.succeeded&&ret.result){var result=ret.result;this.params=result;if(!this.params||!this.portalObj)\nreturn;this.setParamValueFixed(this.params);this.setParamValuesByURL();this.setParamValuesByPublicParams();var paramObj=new Array();for(indx in this.params){var param=this.params[indx];var parameter=new Object();parameter.name=param.name;parameter.displayValue=param.displayValue;if(param.name=='Time'&&this.dashletType==\"MetricReport\"){parameter.value=param.value.substring(0,10);}else{parameter.value=param.value;}\nparameter.alias=param.alias;parameter.enabled=true;if(!this.paramValueFixed[param.alias]&&this.initParams[indx].value!=parameter.value)\nparamObj.push(parameter);}\nreturn paramObj;}}\nFreeReportPortlet.prototype.hiddenParam=function(){this.hiddenParamFlag=false;if(!this.isLoadComplete()){this.hiddenParamFlag=true;this.checkLoadComplete();return;}\nif(!this.getPortletObject()||!this.portalObj)\nreturn;var query=this.getPortletObject();var paramsInfo=this.getPublicParamsConfig();if(null==paramsInfo){query.showParamPanel();return;}\nvar hiddenParamCount=0;for(var i=0;i<paramsInfo.length;i++){var param=paramsInfo[i];if(param.type==\"PARAM\"&&param.dashletId==this.portletId){for(indx in this.params){if(param.name==this.params[indx].name){try{query.hiddenParameterByName(this.params[indx].id);hiddenParamCount++;}catch(e){return;}}}}}\nif(hiddenParamCount!=this.params.length)\nquery.showParamPanel();this.hiddenParamFlag=false;};FreeReportPortlet.prototype.refresh=function(){this.refreshDataFlag=false;if(!this.isLoadComplete()){this.refreshDataFlag=true;this.checkLoadComplete();return;}\nvar freeReport=this.getPortletObject();if(freeReport!=null){if(this.dashletType==\"MetricReport\"){try{freeReport.refreshTableParamVle();freeReport.setParamValue();if(!module)\nmodule=freeReport.getReportAdapter();module.refreshData();}catch(e){}}else{if(this.getParamPanelObj()){this.getParamPanelObj().enableResetRelateParamsValue=false;}\ntry{freeReport.changeParam=true;freeReport.refreshReport(false);freeReport.changeParam=false;}catch(e){}finally{if(this.getParamPanelObj()){this.getParamPanelObj().enableResetRelateParamsValue=true;}}}}\nthis.refreshDataFlag=false;}\nFreeReportPortlet.prototype.checkLoadComplete=function(){if(!this.isLoadComplete()){var obj=this;window.setTimeout(function(){obj.checkLoadComplete();},2000);return;}\nif(this.hiddenParamFlag)\nthis.hiddenParam();if(this.commitParamValueFlag)\nthis.commitParamValue();if(this.refreshDataFlag&&this.autorefresh)\nthis.refresh();var freeReport=this.getPortletObject();if(freeReport!=null){if(this.dashletType==\"MetricReport\"){}else{if(freeReport.paramValues&&freeReport.paramValues.length>0){freeReport.paramValues.length=0;}\nfreeReport.request=false;}}}\nFreeReportPortlet.prototype.commitParamValue=function(){this.commitParamValueFlag=false;if(!this.isLoadComplete()){this.commitParamValueFlag=true;this.checkLoadComplete();return;}\nif(!this.getPortletObject()||!this.params)\nreturn;var paramPanelObj=this.getParamPanelObj();var report=this.getPortletObject();var ret=util.remoteInvoke(\"ManageReportService\",\"getSimpleReportBeanList\",[report.currentSessionID]);if(ret&&ret.succeeded&&ret.result&&ret.result[0]){var pClientId=ret.result[0].clientId;}\nif(this.params.length>0){if(paramPanelObj){paramPanelObj.setAutoCommit(false);}\nfor(indx in this.params){var param=this.params[indx];if(!this.changeParams[param.id])\ncontinue;if(param.value){report.setParamValueFromPage(null,param,\"\",param.value,\"\",param.displayValue,\"PublicParameter\");report.setParamValue(pClientId,param.id,param.value,param.displayValue);}\nthis.changeParams[param.id]=false;}\nif(paramPanelObj){paramPanelObj.enableResetRelateParamsValue=false;paramPanelObj.commit();paramPanelObj.enableResetRelateParamsValue=true;paramPanelObj.setAutoCommit(true);}}\nthis.commitParamValueFlag=false;}\nFreeReportPortlet.prototype.getParamPanelObj=function(){if(this.getPortletObject()){return this.getPortletObject().gparamPanel;}}\nFreeReportPortlet.prototype.getPortletType=function(){return\"freeReport\";}\nFreeReportPortlet.prototype.isLoadComplete=function(){if(!this.getPortletObject())\nreturn false;if(this.getPortletObject().document.readyState!=\"complete\"&&this.getPortletObject().document.readyState!=\"interactive\")\nreturn false;try{this.getPortletObject().isLoadComplete();}catch(e){return false;}\nreturn true;}\nFreeReportPortlet.prototype.setParamsValue=function(params){if(!params||this.getPortletObject()||!this.getParamPanelObj())\nreturn;var report=this.getPortletObject();var paramPanelObj=this.getParamPanelObj();this.params=params;this.commitParamValue();}\nFreeReportPortlet.prototype.getExportBean=function(){var portletBean=new Object();portletBean.portletId=this.portletId;portletBean.type=this.getPortletType().toUpperCase();var query=this.getPortletObject();portletBean.clientId=query.currentSessionID;portletBean.hiddenParamIdList=this.hiddenParamIdList;var extraConfigObj={\"dashboard\":{},\"simpleReport\":{},\"olapReport\":{},\"freeReport\":{},\"metricReport\":{}};portletBean.extraConfig=lang.toJSONString(extraConfigObj);return portletBean;}\nFreeReportPortlet.prototype.onFreeReportLoad=function(obj){var customEvent=new Object();customEvent.name=\"AFTERLOAD\";customEvent.func=obj.afterLoad;var arguments=new Array();arguments.push(this);customEvent.arguments=arguments;var data=new Array();data[0]=customEvent;obj.frame.customEvent=data;}\nFreeReportPortlet.prototype.afterLoad=function(obj){if(!obj)\nreturn;var thisObj=obj[0];thisObj.loadComplete=true;var pageTheme=registry.get(\"pageTheme\");if(pageTheme&&null!=pageTheme){var pageOption=pageTheme.page;if(pageOption){var background=pageOption.background;if(background){thisObj.frame.contentWindow.document.body.style.backgroundColor=background;}}}\nif(thisObj.autoHeight){if(domutils.isFirefox()){var grid=thisObj.frame.contentWindow.getGrid();var scrollDiv=grid.parentNode;scrollDiv.style.overflow=\"visible\";scrollDiv.style.height=\"1px\";var scrollTd=scrollDiv.parentNode;scrollTd.style.display=\"inline-block\";scrollTd.style.overflow=\"auto\";scrollTd.style.height=grid.offsetHeight;thisObj.frame.contentWindow.document.body.style.overflow=\"hidden\";var delta=grid.offsetHeight-thisObj.parentDiv.offsetHeight+11;if(delta<-10||delta>=0)\nthisObj.onHeightChanged.fire(delta+5);}else if(domutils.isIOS()||domutils.isAndroid()){var grid=thisObj.frame.contentWindow.getGrid();if(grid.clientHeight<thisObj.parentDiv.offsetHeight-11)\nthisObj.frame.height=grid.offsetHeight;if(delta<-10||delta>=0)\nthisObj.onHeightChanged.fire(delta+5);}else if(domutils.isChrome()||domutils.isSafari()){var grid=thisObj.frame.contentWindow.getGrid();var scrollDiv=grid.parentNode;scrollDiv.style.overflow=\"visible\";scrollDiv.style.height=\"1px\";var scrollTd=scrollDiv.parentNode;scrollTd.style.display=\"inline-block\";scrollTd.style.overflow=\"auto\";scrollTd.style.height=grid.offsetHeight;thisObj.frame.contentWindow.document.body.scrollTop=thisObj.frame.contentWindow.document.body.scrollHeight-grid.offsetHeight;thisObj.frame.contentWindow.document.body.style.overflow=\"hidden\";var delta=grid.offsetHeight-thisObj.parentDiv.offsetHeight+11;if(delta<-10||delta>=0)\nthisObj.onHeightChanged.fire(delta+5);}else{var scrollDiv=thisObj.frame.contentWindow.getGrid()&&thisObj.frame.contentWindow.getGrid().parentNode;if(scrollDiv){var delta=scrollDiv.scrollHeight-scrollDiv.clientHeight;if(delta<-10||delta>=0)\nthisObj.onHeightChanged.fire(delta+5);}}}}\nFreeReportPortlet.prototype.resolveCustomContentXml=function(portletXml){this.resolveReportContentXml(portletXml);}\nFreeReportPortlet.prototype.setBtnStatus=function(){this.getDashlet().setButtonLocateReportDisplay(\"\");this.getDashlet().setButtonExportDisplay(\"\");}\nFreeReportPortlet.prototype.isPublicParam=function(paramId,reportId){if(!reportId)\nreportId=this.portletId;var isPublic=false;var pageParamConfig=this.getPublicParamsConfig();for(ppcIndx in pageParamConfig){if(pageParamConfig[ppcIndx].type==\"PARAM\"&&pageParamConfig[ppcIndx].dashletId==reportId&&pageParamConfig[ppcIndx].public2){isPublic=true;break;}}\nreturn isPublic;}\nFreeReportPortlet.prototype.commitParameter=function(paramPanelObj){paramPanelObj.setEnableResetRelateParamsValue(false);paramPanelObj.setAutoCommit(true);paramPanelObj.commit();paramPanelObj.setEnableResetRelateParamsValue(true);}\nFreeReportPortlet.prototype.doDropDownTree=function(paramPanel,combo){if(combo){try{this.addListener(this.frame.contentWindow.document.body,\"mousedown\",this.doMouseDown,this);}catch(e){;}\nthis.parentCombo=combo;}}\nFreeReportPortlet.prototype.doMouseDown=function(){if(this.parentCombo){if(this.parentCombo.dropDownTreePanel)\n{this.parentCombo.dropDownTreePanel.closeUp();}\nelse\n{this.parentCombo.dropdownBox.closeUp();}}\ntry{this.removeListener(this.frame.contentWindow.document.body,\"mousedown\",this.doMouseDown,this);}catch(e){;}\nthis.parentCombo=null;}\nFreeReportPortlet.prototype.doOnDashletExport=function(ev,p,parentElem){var portletObj=this.getPortletObject();if(portletObj&&portletObj.doOnDashletExport){if(!this.exportMenuPanel){var panel=document.createElement(\"div\");panel.className=\"dropdown-div\";panel.style.position=\"absolute\";parentElem.appendChild(panel);panel.style.display=\"none\";this.exportMenuPanel=panel;}\nportletObj.doOnDashletExport(parentElem,p,this.exportMenuPanel);}}\nFreeReportPortlet.prototype.onSize=function(){var freeReport=this.getPortletObject();if(freeReport!=null){freeReport.refreshDisplay();}}\nFreeReportPortlet.prototype.restoreWindow=function(){if(this.autoHeight){this.afterLoad([this]);}}\nFreeReportPortlet.prototype.maximizeWindow=function(){this.maximizeWindowInAutoHeight();};FreeReportPortlet.prototype.__render=FreeReportPortlet.prototype.render;FreeReportPortlet.prototype.render=function(){this._oldWidth=this.frame.clientWidth;this._oldHeight=this.frame.clientHeight;if(domutils.isIOS()||domutils.isAndroid()){this.ishidetoolbar=true;this.isHideShortTollBar=true;}\nthis.__render();this.onFreeReportLoad(this);}\nFreeReportPortlet.prototype.__setFrameUrl=FreeReportPortlet.prototype.setFrameUrl;FreeReportPortlet.prototype.setFrameUrl=function(url,paramObj){if(window.bof_offline_xhr){var url=\"freeReport_\"+this.clientId+\".html\";var lastPos=location.href.lastIndexOf(\"/\");if(lastPos!=-1){this.frame.src=location.href.substring(0,lastPos+1)+url;}else{this.frame.src=url;}}else{this.__setFrameUrl(url,paramObj);}}\nFreeReportPortlet.prototype.__afterLoad=FreeReportPortlet.prototype.afterLoad;FreeReportPortlet.prototype.afterLoad=function(obj){if(!obj)\nreturn;var thisObj=obj[0];thisObj.__afterLoad(obj);thisObj.createScrollDiv();}\nFreeReportPortlet.prototype.__onParamChange=FreeReportPortlet.prototype.onParamChange;FreeReportPortlet.prototype.onParamChange=function(paramPanel,param,newId,newValue,relateParam){this.__onParamChange(paramPanel,param,newId,newValue,relateParam);this.updateScrollDiv(this._oldHeight,this._oldWidth);}\nFreeReportPortlet.prototype.updateScrollDiv=function(height,width){if(this.wrapperDiv){if(height){this.wrapperDiv.style.height=height;this._oldHeight=height;}\nif(width){this.wrapperDiv.style.width=width;this._oldWidth=width;}}\nif(this.wrapperDiv2){if(height)\nthis.wrapperDiv2.style.height=height;if(width)\nthis.wrapperDiv2.style.width=width;}}\nFreeReportPortlet.prototype.createScrollDiv=function(){if(domutils.isIOS()||domutils.isAndroid()){var slot=this.frame.contentWindow.getGrid();if(null==slot){return;}\nif(slot.clientWidth>this._oldWidth||slot.clientHeight>this._oldHeight){var parentDiv=slot.parentNode;this.wrapperDiv=this.frame.contentWindow.document.createElement(\"div\");this.wrapperDiv.id=\"ipadscrolldiv\"\nvar csstext=\"position:absolute;z-index:1;\";if(this.autoHeight)\ncsstext=csstext+\"width:\"+this._oldWidth+\";height:\"+slot.clientHeight+\";\";else\ncsstext=csstext+\"width:\"+this._oldWidth+\";height:\"+this._oldHeight+\";\";this.wrapperDiv.style.cssText=csstext;this.wrapperDiv.style.left=slot.style.left;parentDiv.insertBefore(this.wrapperDiv,slot);slot.style.position=\"relative\";this.wrapperDiv.appendChild(slot);var BofIPadScroll=jsloader.resolve(\"ext.IPad.BofIPadScroll\");this.iPadScroll=new BofIPadScroll(slot,null,this.wrapperDiv);this.iPadScroll.scrollContent.notStopEvent=true;this.iPadScroll.scrollContent.refresh()\nvar parentDiv2=parentDiv.parentNode.parentNode.firstChild.firstChild;var slot2=parentDiv2.firstChild;this.wrapperDiv2=this.frame.contentWindow.document.createElement(\"div\");this.wrapperDiv2.id=\"ipadscrolldiv\"\nthis.wrapperDiv2.style.cssText=csstext;parentDiv2.insertBefore(this.wrapperDiv2,slot2);slot2.style.position=\"relative\";this.wrapperDiv2.appendChild(slot2);this.iPadScroll2=new BofIPadScroll(slot2,null,this.wrapperDiv2);this.iPadScroll2.scrollContent.notStopEvent=true;this.iPadScroll2.scrollContent.refresh();var slot=document.getElementById(\"_viewdiv_\");if(typeof slot==\"undefined\"){return;}\nif(slot.scrollHeight<slot.parentNode.offsetHeight){slot.style.cssText=\"width: 100%; height: 100%; left: 0px; top: 0px; overflow: auto;\";}}}}","js/smartbi/spreadsheetreport/SpreadSheetReportCommand.js":"HTTP Status 404 . filename not found: /vision/js/smartbi/spreadsheetreport/SpreadSheetReportCommand.js","js/smartbi/spreadsheetreport/SpreadSheetReport.js":"HTTP Status 404 . filename not found: /vision/js/smartbi/spreadsheetreport/SpreadSheetReport.js","js/smartbi/spreadsheetreport/SpreadSheetReportForms.template":"HTTP Status 404 . filename not found: /vision/js/smartbi/spreadsheetreport/SpreadSheetReportForms.template","js/bof/decisionpanel/Portal/Dashlet/Portlet/SpreadSheetPortlet.js":"HTTP Status 404 . filename not found: /vision/js/bof/decisionpanel/Portal/Dashlet/Portlet/SpreadSheetPortlet.js","js/smartbi/spreadsheetreport/SpreadSheetReport.html":"HTTP Status 404 . filename not found: /vision/js/smartbi/spreadsheetreport/SpreadSheetReport.html","js/ext/portlet/PagingPortlet.js":"\nvar Portlet=jsloader.resolve(\"bof.decisionpanel.Portal.Dashlet.Portlet.Portlet\");var PagingPortlet=function(parentDiv,contextStr,type){PagingPortlet.superclass.constructor.call(this,parentDiv,contextStr);this.height=\"32px\";this.width=\"100%\";this.showModel=\"bull\";this.display=\"none\";this.controls=[];this.onTouchEnd=new CustomEvent(\"touchend\",this);if(contextStr)\nthis.resolveContentXml(contextStr);};lang.extend(PagingPortlet,Portlet);PagingPortlet.prototype.destroy=function(){var len=this.controls.length;for(var i=0;i<len;i++){this.controls[i].onActive.unsubscribe(this.onActive,this);this.controls[i].destroy();}\nthis.controls=[];if(domutils.isIOS()||domutils.isAndroid()){this.removeListener(this.slot,\"touchstart\",this.doTouchStart,this);this.removeListener(this.slot,\"touchmove\",this.doTouchMove,this);this.removeListener(this.slot,\"touchend\",this.doTouchEnd,this);}else{this.removeListener(this.slot,\"mousedown\",this.doTouchStart,this);this.removeListener(this.slot,\"mousemove\",this.doTouchMove,this);this.removeListener(this.slot,\"mouseup\",this.doTouchEnd,this);}\ntry{domutils.destroyNode(this.slotDiv);}catch(e){}\nPagingPortlet.superclass.destroy.call(this);}\nPagingPortlet.prototype.resolveContentXml=function(contentString){if(!contentString||contentString==\"\")\nreturn;var dom=domutils.parseXML(contentString);var layoutNode=dom.documentElement;var portletXml=layoutNode.firstChild;this.portletXml=portletXml;this.portletId=domutils.getNodeAtrributeValueByName(portletXml,\"ID\").nodeValue;var showModelNode=domutils.getNodeAtrributeValueByName(portletXml,\"SHOWMODEL\");if(showModelNode!=null){if(showModelNode.nodeValue==\"tab\")\nthis.showModel=\"tab\";if(showModelNode.nodeValue==\"other\")\nthis.showModel=\"other\";}}\nPagingPortlet.prototype.render=function(){PagingPortlet.superclass.render.call(this);this.setStyle();this._contendDiv=document.createElement(\"DIV\");this.div.appendChild(this._contendDiv);this._contendDiv.style.height=this.height;this._contendDiv.style.width=this.width;var pageObj=this.getPageObj();pageObj.onShowPage.subscribe(this.renderAfterShowPage,this);var dashlet=this.getDashlet();dashlet.onAfterShow.subscribe(this.activeAfterShow,this);}\nPagingPortlet.prototype.activeAfterShow=function(){var index=this.currentIndex?this.currentIndex:0;var obj={dashletId:this.controls[index].dashletId}\nthis.onActive(obj);}\nPagingPortlet.prototype.renderAfterShowPage=function(){var normalCss=\"h_bull_panel\";var selectCss=\"h_bull_panel_highlight\";if(this.showModel==\"tab\"){var normalCss=\"h_paging_panel\";var selectCss=\"h_paging_panel_highlight\";var normalCssLeft=\"h_paging_panel_left\";var normalCssRight=\"h_paging_panel_right\";var selectCssLeft=\"h_paging_panel_highlight_left\";var selectCssRight=\"h_paging_panel_highlight_right\";}else if(this.showModel==\"other\"){normalCss=\"other_panel\";selectCss=\"other_panel_highlight\";normalCssLeft=\"other_panel_left\";selectCssLeft=\"other_panel_highlight_left\";normalCssRight=\"other_panel_right\";selectCssRight=\"other_panel_highlight_right\";}\nvar soltName=this.getDashlet().layoutSlotName;var pageObj=this.getPageObj();var pageCount=0;for(var slotId in pageObj.slotList){if(pageObj.slotList[slotId].getAttribute(\"bofId\")==soltName){var slot=pageObj.slotList[slotId];this.slot=slot;if(domutils.isIOS()||domutils.isAndroid()){this.addListener(this.slot,\"touchstart\",this.doTouchStart,this);this.addListener(this.slot,\"touchmove\",this.doTouchMove,this);this.addListener(this.slot,\"touchend\",this.doTouchEnd,this);}else{this.addListener(this.slot,\"mousedown\",this.doTouchStart,this);this.addListener(this.slot,\"mousemove\",this.doTouchMove,this);this.addListener(this.slot,\"mouseup\",this.doTouchEnd,this);}\nvar len=slot.childNodes.length;for(var idxInSlot=0;idxInSlot<len;idxInSlot++){var bofid=slot.childNodes[idxInSlot].getAttribute(\"bofid\");for(var idx in pageObj.dashletList){if(pageObj.dashletList[idx].id==bofid){var dashlet=pageObj.dashletList[idx];var currPortlet=dashlet.currentPortlet;var id=dashlet.id;var title=this.showModel==\"bull\"?\"&bull;\":dashlet.getTitle();var currPortlet=dashlet.currentPortlet;if(currPortlet.getPortletType()!=\"PagingPortlet\"){var temp=new PanelTab(this._contendDiv,id,title,normalCssLeft,normalCss,normalCssRight,selectCssLeft,selectCss,selectCssRight);temp.onActive.subscribe(this.onActive,this);this.controls[this.controls.length]=temp;if(pageCount==0){temp.setActive(true);this.currentIndex=0;if(dashlet.currentPortlet.portletType==\"GraphReportPortlet\"){var obj=dashlet.currentPortlet.getPortletObject();if(domutils.isIOS()||domutils.isAndroid()){dashlet.currentPortlet.needRefreshChart=false;}}}else{this.hideDashletFrameDiv(dashlet);}\npageCount++;}else{this.myDashletFrame=dashlet.frameDiv;}}}}}}\nif(pageCount>0){if(this.showModel==\"bull\"){var margin=Math.round((this._contendDiv.offsetWidth-pageCount*22)/2);this.controls[0].setMarginLeft(margin);var len=this.controls.length;this.controls[len-1].setMarginRight(margin);}else if(this.showModel==\"tab\"){var width=Math.round((((this._contendDiv.offsetWidth)-(pageCount+1)*3)-((pageCount*2*7)-(pageCount*1)))/pageCount);var len=this.controls.length;for(var i=0;i<len;i++){this.controls[i].setWidth(width);this.controls[i].setHeight(31);}}else{;}}}\nPagingPortlet.prototype.hideDashletFrameDiv=function(dashlet){var currentPortlet=dashlet.currentPortlet;if((domutils.isIOS()||domutils.isAndroid())&&currentPortlet.portletType==\"GraphReportPortlet\"){var handle=window.setInterval(function(){if(currentPortlet.getPortletObject().refreshComplete){window.clearInterval(handle);dashlet.frameDiv.style.display=\"none\";}},500);}else{dashlet.frameDiv.style.display=\"none\";}}\nPagingPortlet.prototype.isScroller=function(event){var target=event.target||event.srcElement;var parent=target?target.parentNode:null;var className=parent?parent.className:null;if(className&&className.animVal&&(className.animVal.indexOf(\"highcharts-scroller\")>=0||(className.animVal.indexOf(\"highcharts-axis\")>=0))){return true;}\nreturn false;}\nPagingPortlet.prototype.doTouchStart=function(e){if(this.isScroller(e)){return;}\nif(this.scrolling&&this.currentDashletFrame||this.doTouchEnding||!e.touches||e.touches.length>1||e.changedTouches.length>1){if(this.currentDashletFrame){this.currentDashletFrame.style.MozTransform=this.currentDashletFrame.style.webkitTransform='translate3d(0px,0,0)';this.removeFromSlot();}\nthis.currentDashletFrame=null;return;}\nif(!domutils.isIOS()&&!domutils.isAndroid()){var target=e.target||e.srcElement;var parentTarget=target?target.parentNode:null;var grandTarget=parentTarget?parentTarget.parentNode:null;if(target==this._contendDiv||(parentTarget&&parentTarget==this._contendDiv)||(grandTarget&&grandTarget==this._contendDiv)){return;}}\nthis.touchBeginX=domutils.isIOS()||domutils.isAndroid()?e.changedTouches[0].pageX:e.pageX;var pageObj=this.getPageObj();var currentControl=this.controls[this.currentIndex];var dashlet=pageObj.pageUtil.findDashletById(currentControl.dashletId);if(this.newHeight==undefined){this.newHeight=dashlet.elemDashletCenterCenterTd.offsetHeight;}\nif(this.newWidth==undefined){this.newWidth=dashlet.currentPortlet.div.offsetWidth;}\nthis.currentDashletFrame=dashlet.frameDiv;if(this.currentDashletFrame.nextSibling)\nthis.insertBeforeNode=this.currentDashletFrame.nextSibling;else\nthis.insertBeforeNode=null;this.scrolling=true;}\nPagingPortlet.prototype.doTouchMove=function(e){if(this.isScroller(e)){return;}\nif(!e.touches)\nreturn;if(!this.scrolling||e.touches.length>1||e.changedTouches.length>1)\nreturn;var pageX=domutils.isIOS()||domutils.isAndroid()?e.changedTouches[0].pageX:e.pageX;var deltaX=pageX-this.touchBeginX;var pageObj=this.getPageObj();if(this.currentDashletFrame==undefined||this.currentDashletFrame==null){return;}\nif(!this.slotDiv&&(domutils.isIOS()||domutils.isAndroid())){this.slotDiv=document.createElement(\"div\");this.slotDiv.style.overflow=\"hidden\";this.slotDiv.id=\"wrapslotdiv\";this.slotDiv.style.display=\"none\";if(this.showModel==\"bull\"){this.slot.insertBefore(this.slotDiv,this.myDashletFrame);}else{this.slot.insertBefore(this.slotDiv,this.myDashletFrame.nextSibling);}\nthis.slotDiv.style.width=this.currentDashletFrame.clientWidth;this.slotDiv.style.height=this.currentDashletFrame.clientHeight;this.slotDiv.appendChild(this.currentDashletFrame);this.slotDiv.style.display=\"block\";}\ne.preventDefault();this.currentDashletFrame.style.MozTransform=this.currentDashletFrame.style.webkitTransform='translate3d('\n+deltaX+'px,0,0)';e.stopPropagation();}\nPagingPortlet.prototype.doTouchEnd=function(e){if(this.isScroller(e)){return;}\nif(!e.touches||e.touches.length>0||e.changedTouches.length>1||!this.currentDashletFrame)\nreturn;if(this.doTouchEnding)\nreturn;try{this.doTouchEnding=true;this.scrolling=false;var pageX=domutils.isIOS()||domutils.isAndroid()?e.changedTouches[0].pageX:e.pageX;var _deltra=Math.round(this._contendDiv.offsetWidth/4);var len=this.controls.length;var pageObj=this.getPageObj();if(pageX>this.touchBeginX&&pageX-this.touchBeginX>_deltra){if(this.currentIndex>0){var currentControl=this.controls[this.currentIndex];var dashlet=pageObj.pageUtil.findDashletById(currentControl.dashletId);var isMaxState=false;if(dashlet){if(dashlet.WindowState==dashlet.StateMax){isMaxState=true;dashlet.setWindowState(dashlet.StateNormal);}}\ncurrentControl.setUnActive(true);if(this.currentDashletFrame){this.currentDashletFrame.style.MozTransform=this.currentDashletFrame.style.webkitTransform='translate3d(0px,0,0)';this.currentDashletFrame.style.display=\"none\";this.removeFromSlot();}\nthis.currentIndex--;var currentControl=this.controls[this.currentIndex];currentControl.setActive(true);var dashlet=pageObj.pageUtil.findDashletById(currentControl.dashletId);var style=dashlet.frameDiv.style;style.display=\"block\";style.MozTransform=style.webkitTransform='translate3d(0px,0,0)';this.refreshDashlet(dashlet);if(isMaxState){dashlet.setWindowState(dashlet.StateMax);}\nreturn;}}else if(pageX<this.touchBeginX&&this.touchBeginX-pageX>_deltra){if(this.currentIndex<len-1){var currentControl=this.controls[this.currentIndex];var dashlet=pageObj.pageUtil.findDashletById(currentControl.dashletId);var isMaxState=false;if(dashlet){if(dashlet.WindowState==dashlet.StateMax){isMaxState=true;dashlet.setWindowState(dashlet.StateNormal);}}\ncurrentControl.setUnActive(true);if(this.currentDashletFrame){this.currentDashletFrame.style.MozTransform=this.currentDashletFrame.style.webkitTransform='translate3d(0px,0,0)';this.currentDashletFrame.style.display=\"none\";this.removeFromSlot();}\nthis.currentIndex++;var currentControl=this.controls[this.currentIndex];currentControl.setActive(true);var dashlet=pageObj.pageUtil.findDashletById(currentControl.dashletId);var style=dashlet.frameDiv.style;style.display=\"block\";style.MozTransform=style.webkitTransform='translate3d(0px,0,0)';this.refreshDashlet(dashlet);if(isMaxState){dashlet.setWindowState(dashlet.StateMax);}\nreturn;}}\nif(this.currentDashletFrame){this.currentDashletFrame.style.MozTransform=this.currentDashletFrame.style.webkitTransform='translate3d(0px,0,0)';this.removeFromSlot();}\nthis.currentDashletFrame=null;}finally{this.scrolling=false;this.doTouchEnding=false;this.onTouchEnd.fire(this,this.currentIndex);}}\nPagingPortlet.prototype.setIndex=function(newIndex){if(newIndex>=0&&newIndex<this.controls.length){var pageObj=this.getPageObj();var currentControl=this.controls[this.currentIndex];var dashlet=pageObj.pageUtil.findDashletById(currentControl.dashletId);this.currentDashletFrame=dashlet.frameDiv;if(this.currentDashletFrame.nextSibling)\nthis.insertBeforeNode=this.currentDashletFrame.nextSibling;else\nthis.insertBeforeNode=null;currentControl.setUnActive(true);if(this.currentDashletFrame){this.currentDashletFrame.style.display=\"none\";this.removeFromSlot();}\nthis.currentIndex=newIndex;var currentControl=this.controls[this.currentIndex];currentControl.setActive(true);dashlet=pageObj.pageUtil.findDashletById(currentControl.dashletId);var style=dashlet.frameDiv.style;style.display=\"block\";this.refreshDashlet(dashlet);if(this.currentDashletFrame){this.removeFromSlot();}\nthis.currentDashletFrame=null;return;}}\nPagingPortlet.prototype.removeFromSlot=function(){if(domutils.isIOS()||domutils.isAndroid()){if(this.insertBeforeNode!=undefined&&this.insertBeforeNode!=null){this.slot.insertBefore(this.currentDashletFrame,this.insertBeforeNode);}else{this.slot.appendChild(this.currentDashletFrame);}\nthis.currentDashletFrame.setAttribute(\"inPagingPortlet\",\"1\");this.currentDashletFrame=null;this.insertBeforeNode=null;if(this.slotDiv&&this.slotDiv.parentNode)\nthis.slotDiv.parentNode.removeChild(this.slotDiv);this.slotDiv=null;}}\nPagingPortlet.prototype.refreshDashlet=function(dashlet){if(dashlet.currentPortlet.portletType==\"GraphReportPortlet\"){var obj=dashlet.currentPortlet.getPortletObject();if(domutils.isIOS()||domutils.isAndroid()){if(dashlet.currentPortlet.needRefreshChart==undefined||dashlet.currentPortlet.needRefreshChart){obj.refreshData(false);dashlet.currentPortlet.needRefreshChart=false;}}else{obj.refreshData(true,true);}}else if(dashlet.dashletType==\"SimpleReport\"){var queryView=dashlet.getCurrentPortlet().getPortletObject();if(queryView.resizeIScroll){queryView.resizeIScroll();}\nif(dashlet.portletXml.getAttribute(\"autorefresh\")==\"false\"){if(dashlet.currentPortlet.needRefreshReport==undefined||dashlet.currentPortlet.needRefreshReport){var obj=dashlet.currentPortlet.getPortletObject();obj.refreshDataAsync();dashlet.currentPortlet.needRefreshReport=false;}}}else if(dashlet.dashletType==\"FreeReport\"){if(dashlet.currentPortlet.updateScrollDiv){dashlet.currentPortlet.updateScrollDiv(this.newHeight-this._contendDiv.offsetHeight);}}else if(dashlet.dashletType==\"URLPortlet\"){dashlet.currentPortlet.render();}}\nPagingPortlet.prototype.onActive=function(obj){var pageObj=this.getPageObj();var currentControl=this.controls[this.currentIndex];var dashlet=pageObj.pageUtil.findDashletById(currentControl.dashletId);var len=this.controls.length;for(var i=0;i<len;i++){var dashletId=this.controls[i].dashletId;if(obj.dashletId==this.controls[i].dashletId){}else{this.controls[i].setUnActive(true);var dashlet=pageObj.pageUtil.findDashletById(dashletId);dashlet.frameDiv.style.display=\"none\";}}\nfor(var i=0;i<len;i++){var dashletId=this.controls[i].dashletId;if(obj.dashletId==this.controls[i].dashletId){var dashlet=pageObj.pageUtil.findDashletById(dashletId);dashlet.frameDiv.style.MozTransform=dashlet.frameDiv.style.webkitTransform='translate3d(0px,0,0)';dashlet.frameDiv.style.display=\"block\";this.refreshDashlet(dashlet);this.currentIndex=i;}}}\nPagingPortlet.prototype.setStyle=function(){if(this.dashlet){this.dashlet.setHeight(this.height);this.dashlet.setWidth(this.width);this.dashlet.setStyle();this.dashlet.frameDiv.style.width=this.width;if(this.showModel==\"other\"){this.dashlet.frameDiv.style.background=\"url(img/ipad/panel/tab_bg.png)\";this.dashlet.frameDiv.style.whiteSpace=\"nowrap\";this.dashlet.frameDiv.style.overflow=\"hidden\";}}}\nPagingPortlet.prototype.isReplace=function(){return false;}\nPagingPortlet.prototype.getPortletType=function(){return\"PagingPortlet\";}\nPagingPortlet.prototype.getTitle=function(){return\"IPad/IPhone分页\";}\nvar PanelTab=function(container,dashletId,caption,normalCssLeft,normalCss,normalCssRight,selectCssLeft,selectCss,selectCssRight){this.doc=document;this.parentContainer=container;this.dashletId=dashletId;this.caption=caption;this.normalCssLeft=normalCssLeft;this.normalCss=normalCss;this.normalCssRight=normalCssRight;this.selectCssLeft=selectCssLeft;this.selectCss=selectCss;this.selectCssRight=selectCssRight;this.headerLeft=this.doc.createElement(\"span\");this.headerLeft.className=this.normalCssLeft;this.parentContainer.appendChild(this.headerLeft);this.addListener(this.headerLeft,\"click\",this.doClick,this);this.header=this.doc.createElement(\"span\");this.header.className=this.normalCss;this.parentContainer.appendChild(this.header);this.header.innerHTML=this.caption;this.addListener(this.header,\"click\",this.doClick,this);this.headerRight=this.doc.createElement(\"span\");this.headerRight.className=this.normalCssRight;this.parentContainer.appendChild(this.headerRight);this.addListener(this.headerRight,\"click\",this.doClick,this);this.onActive=new CustomEvent(\"onActive\",this);this.selectFlag=false;}\nlang.extend(PanelTab,\"freequery.widget.Module\");PanelTab.prototype.destroy=function(){this.removeListener(this.header,\"click\",this.doClick);try{domutils.destroyNode(this.header);delete this.header;}catch(e){}\nPanelTab.superclass.destroy.call(this);}\nPanelTab.prototype.doClick=function(){this.setActive(false);}\nPanelTab.prototype.isSelect=function(){return this.selectFlag;}\nPanelTab.prototype.setActive=function(flag){this.header.className=this.selectCss;this.headerLeft.className=this.selectCssLeft;this.headerRight.className=this.selectCssRight;this.selectFlag=true;if(flag){return;}\nthis.onActive.fire(this);}\nPanelTab.prototype.setUnActive=function(flag){this.header.className=this.normalCss;this.headerLeft.className=this.normalCssLeft;this.headerRight.className=this.normalCssRight;this.selectFlag=false;if(flag){return;}\nthis.onUnActive.fire(this);}\nPanelTab.prototype.setWidth=function(width){this.header.style.width=width;}\nPanelTab.prototype.setHeight=function(height){this.header.style.height=height;}\nPanelTab.prototype.setMarginLeft=function(width){this.header.style.marginLeft=width;}\nPanelTab.prototype.setMarginRight=function(width){this.header.style.marginRight=width;}","js/smartbi/parameterportlet/ParameterPortlet.js":"\nvar MacroService=null;var ParameterPortlet=function(parentDiv,contentString){ParameterPortlet.superclass.constructor.call(this,parentDiv,null);this.resolveContentXml(contentString);this.portletType=\"ParameterPortlet\";this.getPortletObject().portlet=this;this.isMultSelect=false;var pageTheme=registry.get(\"pageTheme\");if(pageTheme&&pageTheme.page){if(pageTheme.page.parameterFont){var fontcss=pageTheme.page.parameterFont;for(inx in fontcss){var cssv=fontcss[inx];this.div.style[inx]=cssv;}}}}\nlang.extend(ParameterPortlet,'bof.decisionpanel.Portal.Dashlet.Portlet.BofPortlet');ParameterPortlet.prototype.destroy=function(){ParameterPortlet.superclass.destroy.call(this);}\nParameterPortlet.prototype.render=function(){ParameterPortlet.superclass.render.call(this);this._contendDiv=document.createElement(\"DIV\");this.div.appendChild(this._contendDiv);this._contendDiv.style.height=this.height;this._contendDiv.style.width=this.width;this._contendDiv.valign=\"top\";this._contendDiv.align=\"center\";if(this.layoutmodel==\"hlayout\"){this._contendDiv.style.whiteSpace=\"nowrap\";this._contendDiv.style.overflowX=\"auto\";this._contendDiv.style.overflowY=\"hidden\";}else{this._contendDiv.style.overflowX=\"hidden\";this._contendDiv.style.overflowY=\"auto\";}\nthis.checkIsMultSelect();var pageObj=this.getPageObj();pageObj.onShowPage.subscribe(this.renderAfterShowPage,this);}\nParameterPortlet.prototype.renderAfterShowPage=function(){this.refresh();}\nParameterPortlet.prototype.checkIsMultSelect=function(){var result=util.remoteInvoke(\"ParameterPortletService\",\"getParameter\",[this.paramId]);if(result!=null&&result.succeeded){var paramInfo=result.result;this.isMultSelect=paramInfo.multSelect;}}\nParameterPortlet.prototype.refresh=function(){var pageObj=this.getPageObj();var panelClinetId=pageObj.paramPanel.clientId;var paramValues=pageObj.paramPanel.getParamStandbyValue(this.paramId,panelClinetId);if(paramValues!=null){var flag=true;if(this.paramValues&&this.paramValues.length==paramValues.length){var len=this.paramValues.length;flag=false;for(var i=0;i<len;i++){if(this.paramValues[i][0]!=paramValues[i][0]){flag=true;break;}}}\nif(flag){this.paramValues=paramValues;this.createControl(paramValues);var defaultValue=this.getParamValueFromPage(this.paramId,this.paramName);if(defaultValue==null){var vas=pageObj.paramPanel.getParamDefaultValue(this.paramId,panelClinetId);if(vas!=null){defaultValue=vas[0];}}\nif(defaultValue!=null){this.setCurrentValue(defaultValue);}}}}\nParameterPortlet.prototype.getParamValueFromPage=function(paramId,paramName){var rtn=null;var pageObj=this.getPageObj();if(pageObj.params){for(var indx in pageObj.params){var tmpParam=pageObj.params[indx];if(paramId==tmpParam.id||paramName==tmpParam.name){if(tmpParam.hasSetValue){rtn=tmpParam.value;}\nbreak;}}}\nreturn rtn;}\nParameterPortlet.prototype.collectValueAndRefreshPortlet=function(){var len=this.controls.length;var keyList=[];var captionList=[];for(var i=0;i<len;i++){if(this.controls[i].isSelect()){keyList[keyList.length]=this.controls[i].key;captionList[captionList.length]=this.controls[i].caption;}}\nvar key=keyList.join(\",\");var caption=captionList.join(\",\");this.refreshPortlet(key,caption);}\nParameterPortlet.prototype.refreshPortlet=function(key,caption){var pageObj=this.getPageObj();var panelClinetId=pageObj.paramPanel.clientId;pageObj.paramPanel.setParamValue(this.paramId,key,caption,panelClinetId);var publicParams=pageObj.pageUtil.getPublicParams();for(var i=0;i<publicParams.length;i++){var param=publicParams[i];if(param.name==this.paramName&&param.id==this.paramId){pageObj.doParamChange(pageObj.paramPanel,param,null,key,null,caption);}}}\nParameterPortlet.prototype.resolveCustomContentXml=function(portletXml){this.portletXml=portletXml;this.paramName=domutils.getNodeAtrributeValueByName(portletXml,\"PARAMNAME\").nodeValue;this.paramId=domutils.getNodeAtrributeValueByName(portletXml,\"PARAMID\").nodeValue;this.layoutmodel=domutils.getNodeAtrributeValueByName(portletXml,\"LAYOUTMODEL\").nodeValue;this.portletId=this.paramId;}\nParameterPortlet.prototype.getPortletObject=function(){return this;}\nParameterPortlet.prototype.fillParamValue=function(pName,pValue,pDisplayValue){return;}","js/smartbi/parameterportlet/panelportlet/PanelPortlet.js":"\nvar ParameterPortlet=jsloader.resolve('smartbi.parameterportlet.ParameterPortlet');var PanelPortlet=function(parentDiv,contentString){PanelPortlet.superclass.constructor.call(this,parentDiv,contentString);this.controls=[];}\nlang.extend(PanelPortlet,ParameterPortlet);PanelPortlet.prototype.destroy=function(){this.destroyControl();PanelPortlet.superclass.destroy.call(this);}\nPanelPortlet.prototype.createControl=function(data){this.destroyControl();this._contendDiv.style.height=this.parentDiv.clientHeight+\"px\";var normalCss=\"v_param_panel_headings\";var selectCss=\"v_param_panel_headings_highlight\";if(this.layoutmodel==\"hlayout\"){normalCss=\"h_param_panel_headings\";selectCss=\"h_param_panel_headings_highlight\";}\nif(this.title&&this.title!=\"\"){this.titleDiv=document.createElement(\"span\");this.titleDiv.className=\"v_panel_title\";this.titleDiv.innerHTML=this.title;this._contendDiv.appendChild(this.titleDiv);}\nvar len=data.length;for(var i=0;i<len;i++){var value=data[i][0];var display=data[i][1];var temp=new PanelTab(this._contendDiv,value,display,normalCss,selectCss,this.isMultSelect);if(this.itemWidth&&this.itemWidth!=\"\"){temp.setWidth(this.itemWidth);}\ntemp.onActive.subscribe(this.onActive,this);temp.onUnActive.subscribe(this.onUnActive,this);this.controls[this.controls.length]=temp;}\nif(this.itemWidth&&this.itemWidth!=\"\"){}else if(this.layoutmodel==\"hlayout\"){var width=this._contendDiv.clientWidth;if(this.titleDiv)\nwidth-=this.titleDiv.clientWidth;width=Math.round(width/this.controls.length)-10;if(width>0){for(var i=0;i<len;i++){this.controls[i].setWidth(width);}}}\nif(this.showArrows){if(this.layoutmodel==\"hlayout\"){if(this._contendDiv.scrollWidth>this._contendDiv.clientWidth){this._contendDiv.parentNode.removeChild(this._contendDiv);this._contentTable=document.createElement(\"TABLE\");this._contentTable.cellSpacing=0;this.div.appendChild(this._contentTable);var row=this._contentTable.insertRow(-1);if(this.titleDiv){var td=row.insertCell(-1);td.vAlign=\"top\";td.appendChild(this.titleDiv);}\nvar td=row.insertCell(-1);td.vAlign=\"top\";var left=this.leftArrow=new PanelTab(td,\"&lt;&lt;\",\"&lt;&lt;\",normalCss,normalCss);if(this.itemWidth&&this.itemWidth!=\"\"){left.setWidth(this.itemWidth/2);}\nthis.addListener(left.header,\"click\",this.doScrollLeft,this);var td=row.insertCell(-1);td.appendChild(this._contendDiv);var td=row.insertCell(-1);td.vAlign=\"top\";var right=this.rightArrow=new PanelTab(td,\">>\",\">>\",selectCss,selectCss);if(this.itemWidth&&this.itemWidth!=\"\"){right.setWidth(this.itemWidth/2);}\nthis.addListener(right.header,\"click\",this.doScrollRight,this);this.addListener(this._contendDiv,\"scroll\",this.doScroll,this);left.header.style.margin=right.header.style.margin=\"1px\";}}else{if(this._contendDiv.scrollHeight>this._contendDiv.clientHeight){this._contendDiv.parentNode.removeChild(this._contendDiv);this._contentTable=document.createElement(\"TABLE\");this._contentTable.cellSpacing=this._contentTable.cellPadding=0;this.div.appendChild(this._contentTable);if(this.titleDiv){var row=this._contentTable.insertRow(-1);var td=row.insertCell(-1);td.align=\"center\";td.appendChild(this.titleDiv);}\nvar row=this._contentTable.insertRow(-1);var td=row.insertCell(-1);td.align=\"center\";var up=this.upArrow=new PanelTab(td,\"^\",\"^\",normalCss,normalCss);if(this.itemWidth&&this.itemWidth!=\"\"){up.setWidth(this.itemWidth);}\nthis.addListener(up.header,\"click\",this.doScrollUp,this);row=this._contentTable.insertRow(-1);var td=row.insertCell(-1);td.appendChild(this._contendDiv);row=this._contentTable.insertRow(-1);var td=row.insertCell(-1);td.align=\"center\";var down=this.downArrow=new PanelTab(td,\"v\",\"v\",selectCss,selectCss);if(this.itemWidth&&this.itemWidth!=\"\"){down.setWidth(this.itemWidth);}\nthis.addListener(down.header,\"click\",this.doScrollDown,this);this.addListener(this._contendDiv,\"scroll\",this.doScroll,this);up.header.style.margin=down.header.style.margin=\"1px\";}}}}\nPanelPortlet.prototype.doScrollLeft=function(e){this._contendDiv.scrollLeft-=this._contendDiv.offsetWidth*2/3;}\nPanelPortlet.prototype.doScrollRight=function(e){this._contendDiv.scrollLeft+=this._contendDiv.offsetWidth*2/3;}\nPanelPortlet.prototype.doScrollUp=function(e){this._contendDiv.scrollTop-=this._contendDiv.offsetHeight*2/3;}\nPanelPortlet.prototype.doScrollDown=function(e){this._contendDiv.scrollTop+=this._contendDiv.offsetHeight*2/3;}\nPanelPortlet.prototype.doScroll=function(e){var normalCss=\"v_param_panel_headings\";var selectCss=\"v_param_panel_headings_highlight\";if(this.layoutmodel==\"hlayout\"){normalCss=\"h_param_panel_headings\";selectCss=\"h_param_panel_headings_highlight\";}\nif(this.leftArrow){if(this._contendDiv.scrollLeft<=0){this.leftArrow.header.className=normalCss;this.leftArrow.selectCss=normalCss;}else{this.leftArrow.header.className=selectCss;this.leftArrow.selectCss=selectCss;}\nif(this._contendDiv.scrollLeft>=this._contendDiv.scrollWidth-this._contendDiv.clientWidth){this.rightArrow.header.className=normalCss;this.rightArrow.selectCss=normalCss;}else{this.rightArrow.header.className=selectCss;this.rightArrow.selectCss=selectCss;}}else{if(this._contendDiv.scrollTop<=0){this.upArrow.header.className=normalCss;this.upArrow.selectCss=normalCss;}else{this.upArrow.header.className=selectCss;this.upArrow.selectCss=selectCss;}\nif(this._contendDiv.scrollTop>=this._contendDiv.scrollHeight-this._contendDiv.clientHeight){this.downArrow.header.className=normalCss;this.downArrow.selectCss=normalCss;}else{this.downArrow.header.className=selectCss;this.downArrow.selectCss=selectCss;}}}\nPanelPortlet.prototype.destroyControl=function(){var len=this.controls.length;for(var i=0;i<len;i++){this.controls[i].onActive.unsubscribe(this.onActive,this);this.controls[i].onUnActive.unsubscribe(this.onUnActive,this);this.controls[i].destroy();}\nthis.controls=[];if(this.titleDiv){try{domutils.destroyNode(this.titleDiv);}catch(e){}}}\nPanelPortlet.prototype.onActive=function(obj){if(!this.isMultSelect){var len=this.controls.length;for(var i=0;i<len;i++){if(this.controls[i]!=obj){this.controls[i].setUnActive(true);}}}\nthis.collectValueAndRefreshPortlet();}\nPanelPortlet.prototype.onUnActive=function(obj){if(!this.isMultSelect){return;}\nthis.collectValueAndRefreshPortlet();}\nPanelPortlet.prototype.resolveCustomContentXml=function(portletXml){PanelPortlet.superclass.resolveCustomContentXml.call(this,portletXml);if(domutils.getNodeAtrributeValueByName(portletXml,\"ITEMWIDTH\")){this.itemWidth=domutils.getNodeAtrributeValueByName(portletXml,\"ITEMWIDTH\").nodeValue;}\nif(domutils.getNodeAtrributeValueByName(portletXml,\"SHOWARROWS\")){this.showArrows=domutils.getNodeAtrributeValueByName(portletXml,\"SHOWARROWS\").nodeValue!=\"0\";}}\nPanelPortlet.prototype.setCurrentValue=function(keyStr){var keyList=keyStr.split(\",\");var len=this.controls.length;var keyLen=keyList.length;for(var i=0;i<len;i++){for(var j=0;j<keyLen;j++){if(this.controls[i].key==keyList[j]){this.controls[i].setActive(true);break;}}}}\nvar PanelTab=function(container,key,caption,normalCss,selectCss,isMultSelect){this.doc=document;this.parentContainer=container;this.key=key;this.caption=caption;this.normalCss=normalCss;this.selectCss=selectCss;this.isMultSelect=isMultSelect;this.header=this.doc.createElement(\"span\");this.header.className=this.normalCss;this.parentContainer.appendChild(this.header);this.header.innerHTML=this.caption;this.addListener(this.header,\"click\",this.doClick,this);this.onActive=new CustomEvent(\"onActive\",this);this.onUnActive=new CustomEvent(\"onUnActive\",this);this.selectFlag=false;}\nlang.extend(PanelTab,\"freequery.widget.Module\");PanelTab.prototype.destroy=function(){this.removeListener(this.header,\"click\",this.doClick);try{domutils.destroyNode(this.header);delete this.header;}catch(e){}\nPanelTab.superclass.destroy.call(this);}\nPanelTab.prototype.doClick=function(){if(this.isMultSelect&&this.isSelect()){this.setUnActive(false);}else{this.setActive(false);}}\nPanelTab.prototype.isSelect=function(){return this.selectFlag;}\nPanelTab.prototype.setActive=function(flag){this.header.className=this.selectCss;this.selectFlag=true;if(flag){return;}\nthis.onActive.fire(this);}\nPanelTab.prototype.setUnActive=function(flag){this.header.className=this.normalCss;this.selectFlag=false;if(flag){return;}\nthis.onUnActive.fire(this);}\nPanelTab.prototype.setWidth=function(width){this.header.style.width=width;}","js/smartbi/parameterportlet/selectportlet/SelectPortlet.js":"\nvar ParameterPortlet=jsloader.resolve('smartbi.parameterportlet.ParameterPortlet');var SelectPortlet=function(parentDiv,contentString){SelectPortlet.superclass.constructor.call(this,parentDiv,contentString);this.controls=[];}\nlang.extend(SelectPortlet,ParameterPortlet);SelectPortlet.prototype.destroy=function(){this.destroyControl();SelectPortlet.superclass.destroy.call(this);}\nSelectPortlet.prototype.createControl=function(data){this.destroyControl();this._contendDiv.style.height=this.parentDiv.clientHeight+\"px\";if(this.title&&this.title!=\"\"){this.titleDiv=document.createElement(\"span\");this.titleDiv.className=\"v_panel_title\";this.titleDiv.innerHTML=this.title;this._contendDiv.appendChild(this.titleDiv);}\nvar len=data.length;for(var i=0;i<len;i++){var value=data[i][0];var display=data[i][1];var cssName=\"v_checkbox_headings\";if(this.layoutmodel==\"hlayout\"){cssName=\"h_checkbox_headings\";}\nvar temp=null;if(this.isMultSelect){var temp=new CheckBoxElement(this._contendDiv,this.portletId,value,display,cssName);}else{var temp=new RadioBoxElement(this._contendDiv,this.portletId,value,display,cssName);}\ntemp.onSelectChange.subscribe(this.onSelectChange,this);this.controls[this.controls.length]=temp;}}\nSelectPortlet.prototype.destroyControl=function(){this._contendDiv.innerHTML=\"\";var len=this.controls.length;for(var i=0;i<len;i++){this.controls[i].onSelectChange.unsubscribe(this.onSelectChange,this);this.controls[i].destroy();}\nthis.controls=[];if(this.titleDiv){try{domutils.destroyNode(this.titleDiv);}catch(e){}}}\nSelectPortlet.prototype.onSelectChange=function(){this.collectValueAndRefreshPortlet();}\nSelectPortlet.prototype.setCurrentValue=function(keyStr){var keyList=keyStr.split(\",\");var len=this.controls.length;var keyLen=keyList.length;for(var i=0;i<len;i++){for(var j=0;j<keyLen;j++){if(this.controls[i].key==keyList[j]){this.controls[i].setSelect(true,false);break;}}}}\nCheckBoxElement=function(container,tag,value,display,css){this.container=container;this.key=value;this.caption=display;this.span=document.createElement(\"span\");this.span.className=css;this.input=document.createElement(\"input\");this.input.type=\"checkbox\";this.input.name=tag;this.input.id=tag;this.input.value=value;this.span.appendChild(this.input);this.addListener(this.input,\"click\",this.doClick,this);this.textSpan=document.createElement(\"font\");this.textSpan.appendChild(document.createTextNode(display));this.textSpan.size=\"+0\";this.addListener(this.textSpan,\"click\",this.doTextClick,this);this.span.appendChild(this.textSpan);this.container.appendChild(this.span);this.onSelectChange=new CustomEvent(\"onSelectChange\",this);}\nlang.extend(CheckBoxElement,\"freequery.widget.Module\");CheckBoxElement.prototype.destroy=function(){this.removeListener(this.textSpan,\"click\",this.doTextClick);this.removeListener(this.input,\"click\",this.doClick);try{domutils.destroyNode(this.span);delete this.span;delete this.input;delete this.textSpan;}catch(e){}\nCheckBoxElement.superclass.destroy.call(this);}\nCheckBoxElement.prototype.doTextClick=function(){this.setSelect(!this.input.checked,false);}\nCheckBoxElement.prototype.doClick=function(){this.onSelectChange.fire(this);}\nCheckBoxElement.prototype.setSelect=function(value,skipFlag){this.input.checked=value;if(skipFlag)\nreturn;this.onSelectChange.fire(this);}\nCheckBoxElement.prototype.isSelect=function(){return this.input.checked;}\nRadioBoxElement=function(container,tag,value,display,css){this.container=container;this.key=value;this.caption=display;this.span=document.createElement(\"span\");this.span.className=css;this.input=document.createElement(\"input\");this.input.type=\"radio\";this.input.name=tag;this.input.id=tag;this.input.value=value;this.span.appendChild(this.input)\nthis.addListener(this.input,\"click\",this.doClick,this);this.textSpan=document.createElement(\"font\");this.textSpan.appendChild(document.createTextNode(display));this.textSpan.size=\"+0\";this.addListener(this.textSpan,\"click\",this.doTextClick,this);this.span.appendChild(this.textSpan);this.container.appendChild(this.span);this.onSelectChange=new CustomEvent(\"onSelectChange\",this);}\nlang.extend(RadioBoxElement,\"freequery.widget.Module\");RadioBoxElement.prototype.destroy=function(){this.removeListener(this.textSpan,\"click\",this.doTextClick);this.removeListener(this.input,\"click\",this.doClick);try{domutils.destroyNode(this.span);delete this.span;delete this.input;delete this.textSpan;}catch(e){}\nRadioBoxElement.superclass.destroy.call(this);}\nRadioBoxElement.prototype.doTextClick=function(){if(!this.input.checked){this.setSelect(true,false);}}\nRadioBoxElement.prototype.doClick=function(){this.onSelectChange.fire(this);}\nRadioBoxElement.prototype.setSelect=function(value,skipFlag){this.input.checked=value;if(skipFlag)\nreturn;this.onSelectChange.fire(this);}\nRadioBoxElement.prototype.isSelect=function(){return this.input.checked;}","js/smartbi/control/Slider.js":"\nvar domutils=jsloader.resolve(\"freequery.lang.domutils\");var util=jsloader.resolve(\"freequery.common.util\");var Slider=function(parentNode,option,value,titleList){this.parent=parentNode;this.option={};this.option.size=option.size-0;this.option.min=option.min-0||0;this.option.max=option.max-0||100;this.option.step=option.step-0||1;this.option.skin=option.skin||\"default\";this.option.vMode=option.vMode||false;this.option.showInfo=option.showInfo||false;this.value=(value==\"undefined\"?(min||0):value);this.titleList=titleList;this.stepping=false;this.isInit=false;this.onChange=new CustomEvent(\"onChange\",this);this.onSlideEnd=new CustomEvent(\"onSlideEnd\",this);this.imgURL=\"img/slider/\";this._skinsImgs={\"default\":{ls:1,lz:1,rz:1,rs:1},ball:{ls:1,lz:1,rz:1,rs:1},zipper:{bg:1,lz:1,rz:1},arrow:{bg:1,ls:1,rs:1},arrowgreen:{bg:1,ls:1,rs:1},simplesilver:{lz:1,ls:1,rs:1,rz:1},simplegray:{lz:1,ls:1,rs:1,rz:1},bar:{bg:1,ls:1,rs:1},skyblue:{bg:1},ipad:{lz:1,ls:1,rs:1,rz:1}};}\nlang.extend(Slider,\"freequery.widget.Module\");Slider.prototype.destroy=function(){if(this.con){if(domutils.isIOS()||domutils.isAndroid()){this.removeListener(this.con,\"touchstart\",this._onMouseDown,this);this.removeListener(this.con,\"touchend\",this._onMouseUp,this);}else{this.removeListener(this.con,\"selectstart\",this.doSelectStart,this);this.removeListener(this.con,\"mousedown\",this._onMouseDown,this);this.removeListener(this.con,\"mouseup\",this._onMouseUp,this);this.removeListener(this.con,\"mouseout\",this._onMouseUp,this);}\ndomutils.destroyNode(this.con);}\nif(this._info){domutils.destroyNode(this._info);}\nSlider.superclass.destroy.call(this);}\nSlider.prototype.init=function(){this.isInit=true;this.createStructure();}\nSlider.prototype.createStructure=function(){if(this.con){this.con.parentNode.removeChild(this.con);this.con=null;}\nif(this.option.vMode){this._sW=\"height\";this._sH=\"width\";this._sL=\"top\";this._sT=\"left\";var skinImgPath=this.imgURL+this.option.skin+\"/vertical/\";}else{this._sW=\"width\";this._sH=\"height\";this._sL=\"left\";this._sT=\"top\";var skinImgPath=this.imgURL+this.option.skin+\"/\";}\nthis.con=document.createElement(\"DIV\");this.con._etype=\"slider\";this.con.className=\"slider_\"+this.option.skin;if(this._skinsImgs[this.option.skin]['bg'])\nthis.con.style.backgroundImage=\"url(\"+skinImgPath+\"bg.png)\";this.drag=document.createElement(\"DIV\");this.drag._etype=\"drag\";this.drag.className=\"selector\";this.drag.style.backgroundImage=\"url(\"+skinImgPath+\"selector.png)\";var leftSide=document.createElement(\"DIV\");leftSide.className=\"leftSide\";if(this._skinsImgs[this.option.skin]['ls'])\nleftSide.style.background=\"url(\"+skinImgPath+\"leftside_bg.png)\";this.leftZone=document.createElement(\"DIV\");this.leftZone.className=\"leftZone\";if(this._skinsImgs[this.option.skin]['lz'])\nthis.leftZone.style.background=\"url(\"+skinImgPath+\"leftzone_bg.png)\";var rightSide=document.createElement(\"DIV\");rightSide.className=\"rightSide\";if(this._skinsImgs[this.option.skin]['rs'])\nrightSide.style.background=\"url(\"+skinImgPath+\"rightside_bg.png)\";this.rightZone=document.createElement(\"DIV\");this.rightZone.className=\"rightZone\";if(this._skinsImgs[this.option.skin]['rz'])\nthis.rightZone.style.background=\"url(\"+skinImgPath+\"rightzone_bg.png)\";this.con.appendChild(leftSide);this.con.appendChild(this.leftZone);this.con.appendChild(this.rightZone);this.con.appendChild(rightSide);this.con.appendChild(this.drag);this.parent.appendChild(this.con);if(!this.parent.parentNode||!this.parent.parentNode.tagName)\ndocument.body.appendChild(this.parent);if(this.option.vMode){this._sW=\"height\";this._sH=\"width\";this._sL=\"top\";this._sT=\"left\";this.con.style.width=this.con.offsetHeight+'px';for(var i=0;i<this.con.childNodes.length;i++){this.con.childNodes[i].style.fontSize=\"0\";var tmp=this.con.childNodes[i].offsetWidth;this.con.childNodes[i].style.width=this.con.childNodes[i].offsetHeight+'px';this.con.childNodes[i].style.height=tmp+'px';tmp=this.con.childNodes[i].offsetLeft;this.con.childNodes[i].style.left=this.con.childNodes[i].offsetTop+'px';this.con.childNodes[i].style.top=tmp+'px';}\nrightSide.style.top=this.option.size-rightSide.offsetHeight+'px';this.zoneSize=this.option.size-rightSide.offsetHeight;this.dragLeft=this.drag.offsetTop;this.dragWidth=this.drag.offsetHeight;this.rightZone.style.height=this.zoneSize+'px';}else{this.zoneSize=this.option.size-rightSide.offsetWidth;this.dragLeft=this.drag.offsetLeft;this.dragWidth=this.drag.offsetWidth;this.rightZone.style.width=this.zoneSize+'px';}\nthis.con.style[this._sW]=this.option.size+\"px\";if(domutils.isIOS()||domutils.isAndroid()){this.addListener(this.con,\"touchstart\",this._onMouseDown,this);this.addListener(this.con,\"touchend\",this._onMouseUp,this);}else{this.addListener(this.con,\"selectstart\",this.doSelectStart,this);this.addListener(this.con,\"mousedown\",this._onMouseDown,this);this.addListener(this.con,\"mouseup\",this._onMouseUp,this);this.addListener(this.con,\"mouseout\",this._onMouseUp,this);}\nthis._aCalc();this._info=document.createElement(\"DIV\");this._info.className=\"slider_info\";this._minInfo=document.createElement(\"SPAN\");this._minInfo.innerText=this.getTitle(this.option.min);this._info.appendChild(this._minInfo);this._maxInfo=document.createElement(\"SPAN\");this._maxInfo.innerText=this.getTitle(this.option.max);this._info.appendChild(this._maxInfo);this._curInfo=document.createElement(\"SPAN\");this._curInfo.style.display=\"none\";this._curInfo.innerText=this.getTitle(this.value);this._info.appendChild(this._curInfo);this.parent.appendChild(this._info);var posParent=null;if(domutils.isIE()){posParent=this.parent;}\nif(this.option.vMode){var pos=util.getAbsolutePos(this.leftZone,posParent);this._minInfo.style.left=pos.x+this.con.offsetWidth;this._minInfo.style.top=pos.y;var pos=util.getAbsolutePos(this.rightZone,posParent);this._maxInfo.style.left=pos.x+this.con.offsetWidth;this._maxInfo.style.top=pos.y+this.rightZone.offsetHeight-this._maxInfo.offsetHeight;var pos=util.getAbsolutePos(this.drag,posParent);this._curInfo.style.left=pos.x+this.con.offsetWidth;var temp=pos.y+this.drag.offsetHeight/2;this._curInfo.style.top=temp-this._curInfo.offsetHeight/2;}else{var pos=util.getAbsolutePos(this.leftZone,posParent);this._minInfo.style.left=pos.x;var pos=util.getAbsolutePos(this.rightZone,posParent);this._maxInfo.style.left=pos.x+this.rightZone.offsetWidth-this._maxInfo.offsetWidth;var pos=util.getAbsolutePos(this.drag,posParent);var temp=pos.x+this.drag.offsetWidth/2;this._curInfo.style.left=temp-this._curInfo.offsetWidth/2;}\nif(!this.option.showInfo){this._minInfo.style.display=\"none\";this._maxInfo.style.display=\"none\";}}\nSlider.prototype._aCalc=function(){if(!this.isInit)\nreturn;this.shift=this.option.min;this.limit=this.option.max-this.shift;this._mod=(this.option.size-this.dragLeft*2-this.dragWidth)/this.limit;this._step=this.option.step;this.step=this._step*this._mod;this._xlimit=this.option.size-this.dragLeft*2-this.dragWidth;if(!this.posX){this.posX=this._xlimit*(this.value-this.shift)/this.limit;}\nthis._applyPos(true);return this;}\nSlider.prototype._applyPos=function(skip){if(!this.isInit)\nreturn;if(this.step!=1&&this.step)\nthis.posX=Math.round(this.posX/this.step)*this.step;if(this.posX<0)\nthis.posX=0;if(this.value<this.option.min)\nthis.value=this.option.min;if(this.value>this.option.max)\nthis.value=this.option.max;if(this.posX>this._xlimit)\nthis.posX=this._xlimit;var a_old=this.drag.style[this._sL];this.drag.style[this._sL]=this.posX+this.dragLeft*1+\"px\";this.leftZone.style[this._sW]=this.posX+this.dragLeft*1+\"px\";this.rightZone.style[this._sL]=this.posX+this.dragLeft*1+1+\"px\";this.rightZone.style[this._sW]=this.zoneSize-(this.posX+this.dragLeft*1)+\"px\";var nw=this.getValue();if(!skip&&a_old!=this.drag.style[this._sL]){this.onChange.fire(nw,this);}\nthis.value=this.getValue();if(!this._dttp)\nthis._setTooltip(nw);if(this._curInfo){if(this._hideInfo){clearTimeout(this._hideInfo);this._hideInfo=null;}\nthis._curInfo.innerText=this.getTitle(this.value);if(domutils.isIE())\nvar pos=util.getAbsolutePos(this.drag,this.parent);else\nvar pos=util.getAbsolutePos(this.drag);if(this.option.vMode){var temp=pos.y+this.drag.offsetHeight/2;this._curInfo.style.top=temp-this._curInfo.offsetHeight/2;}else{var temp=pos.x+this.drag.offsetWidth/2;this._curInfo.style.left=temp-this._curInfo.offsetWidth/2;}\nthis._curInfo.style.display=\"block\";var that=this;this._hideInfo=setTimeout(function(){that._curInfo.style.display=\"none\";that._hideInfo=null;},1500);}}\nSlider.prototype._setTooltip=function(nw){this.con.title=this.getTitle(nw);}\nSlider.prototype.doSelectStart=function(){return false;}\nSlider.prototype._onMouseUp=function(){if(this._int){clearInterval(this._int)}}\nSlider.prototype.startDrag=function(e){if(this._busy)\nreturn;if(domutils.isIOS()||domutils.isAndroid()){this.drag_mx=e.changedTouches[0].pageX;this.drag_my=e.changedTouches[0].pageY;this.drag_cx=this.posX;var that=this;if(domutils.isIOS()||domutils.isAndroid()){this.d_b_move=document.body.ontouchmove;document.body.ontouchmove=function(e){that.onDrag(e||event);}\nthis.d_b_up=document.body.ontouchend;document.body.ontouchend=function(e){that.stopDrag(e||event);that=null;}}\nthis._busy=true;}else if((e.button===0)||(e.button===1)){this.drag_mx=e.clientX;this.drag_my=e.clientY;this.drag_cx=this.posX;var that=this;this.d_b_move=document.body.onmousemove;this.d_b_up=document.body.onmouseup;document.body.onmouseup=function(e){that.stopDrag(e||event);that=null;}\ndocument.body.onmousemove=function(e){that.onDrag(e||event);}\nthis._busy=true;}}\nSlider.prototype.onDrag=function(e){if(this._busy){var eventX=e.clientX;var eventY=e.clientY;if(domutils.isIOS()||domutils.isAndroid()){eventX=e.changedTouches[0].pageX;eventY=e.changedTouches[0].pageY;}\nif(!this.option.vMode)\nthis.posX=this.drag_cx+eventX-this.drag_mx;else\nthis.posX=this.drag_cx+eventY-this.drag_my;this._applyPos(true);}}\nSlider.prototype.stopDrag=function(e){if(domutils.isIOS()||domutils.isAndroid()){document.body.ontouchmove=this.d_b_move?this.d_b_move:null;document.body.ontouchend=this.d_b_up?this.d_b_up:null;}else{document.body.onmousemove=this.d_b_move?this.d_b_move:null;document.body.onmouseup=this.d_b_up?this.d_b_up:null;}\nthis.d_b_move=this.d_b_up=null;this._busy=false;this.onSlideEnd.fire(this.getValue(),this);}\nSlider.prototype.getValue=function(){return Math.round((Math.round((this.posX/this._mod)/this._step)*this._step+this.shift*1)*10000)/10000;};Slider.prototype.setValue=function(val,skip){if(isNaN(val))\nreturn;this.value=val-0;this.posX=(Math.round(((val||0)-this.shift)*this._mod));this._applyPos(skip==null?true:skip);};Slider.prototype._getActionElement=function(nod){if(nod._etype)\nreturn nod;if(nod.parentNode)\nreturn this._getActionElement(nod.parentNode);return null;}\nSlider.prototype._onMouseDown=function(e){if(this.disabled)\nreturn;e=e||event;var that=this;var nod=that._getActionElement(domutils.isIE()?e.srcElement:e.target);if(domutils.isIE())\nvar pos=util.getAbsolutePos(that.con,this.parent);else\nvar pos=util.getAbsolutePos(that.con);var eventX=e.clientX;var eventY=e.clientY;if(domutils.isIOS()||domutils.isAndroid()){eventX=e.changedTouches[0].pageX;eventY=e.changedTouches[0].pageY;}\nswitch(nod._etype){case\"slider\":if(that.option.vMode)\nvar z=eventY-(pos.y-document.body.scrollTop);else\nvar z=eventX-(pos.x-document.body.scrollLeft);var posX=that.posX;that.posX=z-that.dragLeft-that.dragWidth/2;that.direction=that.posX>posX?1:-1;if(that.stepping){clearInterval(that._int);that.setValue(that.value+that._step*that.direction,false);that._int=setInterval(function(){that.setValue(that.value+that._step*that.direction,false)},600);}else{that._busy=true;that._applyPos();that._busy=false;}\nbreak;case\"drag\":that.startDrag(e||event);break;}\nreturn false;}\nSlider.prototype.enableTooltip=function(flag){this._dttp=flag;this._setTooltip(this._dttp?\"\":this.getValue());}\nSlider.prototype.getTitle=function(value){if(this.titleList&&this.titleList[value]){return this.titleList[value].display;}\nreturn value;}","js/smartbi/control/DoubleSlider.js":"\nvar domutils=jsloader.resolve(\"freequery.lang.domutils\");var util=jsloader.resolve(\"freequery.common.util\");var DoubleSlider=function(parentNode,option,valueA,valueB,titleList){this.parent=parentNode;this.option={};this.option.size=option.size-0;this.option.min=option.min-0||0;this.option.max=option.max-0||100;this.option.step=option.step-0||1;this.option.skin=option.skin||\"default\";this.option.vMode=option.vMode||false;this.option.showInfo=option.showInfo||false;this.valueA=(valueA==\"undefined\"?this.option.min:valueA);this.valueB=(valueB==\"undefined\"?this.option.max:valueB);this.titleList=titleList;this.isInit=false;this.onChange=new CustomEvent(\"onChange\",this);this.onSlideEnd=new CustomEvent(\"onSlideEnd\",this);this.imgURL=\"img/slider/\";this._skinsImgs={\"default\":{ls:1,lz:1,rz:1,rs:1,mz:1},ball:{ls:1,lz:1,rz:1,rs:1,mz:1},zipper:{bg:1,lz:1,rz:1},arrow:{bg:1,ls:1,rs:1},arrowgreen:{bg:1,ls:1,rs:1},simplesilver:{lz:1,ls:1,rs:1,rz:1,mz:1},simplegray:{lz:1,ls:1,rs:1,rz:1,mz:1},bar:{bg:1,ls:1,rs:1},skyblue:{bg:1},ipad:{lz:1,ls:1,rs:1,rz:1,mz:1}};}\nlang.extend(DoubleSlider,\"freequery.widget.Module\");DoubleSlider.prototype.destroy=function(){if(this.con){if(domutils.isIOS()||domutils.isAndroid()){this.removeListener(this.con,\"touchstart\",this._onMouseDown,this);}else{this.removeListener(this.con,\"selectstart\",this.doSelectStart,this);this.removeListener(this.con,\"mousedown\",this._onMouseDown,this);}\ndomutils.destroyNode(this.con);}\nif(this._curInfo){domutils.destroyNode(this._curInfo);}\nDoubleSlider.superclass.destroy.call(this);}\nDoubleSlider.prototype.init=function(){this.isInit=true;this.createStructure();}\nDoubleSlider.prototype.createStructure=function(){if(this.con){this.con.parentNode.removeChild(this.con);this.con=null;}\nif(this.option.vMode){this._sW=\"height\";this._sH=\"width\";this._sL=\"top\";this._sT=\"left\";var skinImgPath=this.imgURL+this.option.skin+\"/vertical/\";}else{this._sW=\"width\";this._sH=\"height\";this._sL=\"left\";this._sT=\"top\";var skinImgPath=this.imgURL+this.option.skin+\"/\";}\nthis.con=document.createElement(\"DIV\");this.con._etype=\"slider\";this.con.className=\"slider_\"+this.option.skin;if(this._skinsImgs[this.option.skin]['bg'])\nthis.con.style.backgroundImage=\"url(\"+skinImgPath+\"bg.png)\";this.dragA=document.createElement(\"DIV\");this.dragA._etype=\"dragA\";this.dragA.className=\"selector\";this.dragA.style.backgroundImage=\"url(\"+skinImgPath+\"selector.png)\";this.dragB=document.createElement(\"DIV\");this.dragB._etype=\"dragB\";this.dragB.className=\"selector\";this.dragB.style.backgroundImage=\"url(\"+skinImgPath+\"selector.png)\";this.leftSide=document.createElement(\"DIV\");this.leftSide.className=\"leftSide\";if(this._skinsImgs[this.option.skin]['ls'])\nthis.leftSide.style.background=\"url(\"+skinImgPath+\"leftside_bg.png)\";this.leftZone=document.createElement(\"DIV\");this.leftZone.className=\"leftZone\";if(this._skinsImgs[this.option.skin]['lz'])\nthis.leftZone.style.background=\"url(\"+skinImgPath+\"leftzone_bg.png)\";this.rightSide=document.createElement(\"DIV\");this.rightSide.className=\"rightSide\";if(this._skinsImgs[this.option.skin]['rs'])\nthis.rightSide.style.background=\"url(\"+skinImgPath+\"rightside_bg.png)\";this.rightZone=document.createElement(\"DIV\");this.rightZone.className=\"rightZone\";if(this._skinsImgs[this.option.skin]['rz'])\nthis.rightZone.style.background=\"url(\"+skinImgPath+\"rightzone_bg.png)\";this.middleZone=document.createElement(\"DIV\");this.middleZone.className=\"middleZone\";if(this._skinsImgs[this.option.skin]['mz'])\nthis.middleZone.style.background=\"url(\"+skinImgPath+\"middlezone_bg.png)\";this.con.appendChild(this.leftSide);this.con.appendChild(this.leftZone);this.con.appendChild(this.middleZone);this.con.appendChild(this.rightZone);this.con.appendChild(this.rightSide);this.con.appendChild(this.dragA);this.con.appendChild(this.dragB);this.parent.appendChild(this.con);if(this.option.vMode){this.con.style.width=this.con.offsetHeight+'px';for(var i=0;i<this.con.childNodes.length;i++){this.con.childNodes[i].style.fontSize=\"0\";var tmp=this.con.childNodes[i].offsetWidth;this.con.childNodes[i].style.width=this.con.childNodes[i].offsetHeight+'px';this.con.childNodes[i].style.height=tmp+'px';tmp=this.con.childNodes[i].offsetLeft;this.con.childNodes[i].style.left=this.con.childNodes[i].offsetTop+'px';this.con.childNodes[i].style.top=tmp+'px';}\nthis.rightSide.style.top=this.option.size-this.rightSide.offsetHeight+'px';this.zoneSize=this.option.size-this.rightSide.offsetHeight;this.dragLeft=this.dragA.offsetTop;this.dragWidth=this.dragA.offsetHeight;this.rightZone.style.height=this.zoneSize+'px';}else{this.zoneSize=this.option.size-this.rightSide.offsetWidth;this.dragLeft=this.dragA.offsetLeft;this.dragWidth=this.dragA.offsetWidth;this.rightZone.style.width=this.zoneSize+'px';}\nthis.con.style[this._sW]=this.option.size+\"px\";if(domutils.isIOS()||domutils.isAndroid()){this.addListener(this.con,\"touchstart\",this._onMouseDown,this);}else{this.addListener(this.con,\"selectstart\",this.doSelectStart,this);this.addListener(this.con,\"mousedown\",this._onMouseDown,this);}\nthis._aCalc();this._curInfo=document.createElement(\"SPAN\");this._curInfo.className=\"slider_currentinfo\";this._curInfo.style.display=\"none\";this._curInfo.innerText=this.getTitle(this.option.min)+\" : \"\n+this.getTitle(this.option.max);this.parent.appendChild(this._curInfo);var posParent=null;if(domutils.isIE())\nposParent=this.parent;if(this.option.vMode){var posA=util.getAbsolutePos(this.dragA,posParent);var posB=util.getAbsolutePos(this.dragB,posParent);this._curInfo.style.left=posA.x+this.con.offsetWidth;this._curInfo.style.top=posA.y+(posB.y-posA.y)/2-this._curInfo.offsetHeight/2;}else{var posA=util.getAbsolutePos(this.dragA,posParent);var posB=util.getAbsolutePos(this.dragB,posParent);this._curInfo.style.left=posA.x+(posB.x-posA.x)/2-this._curInfo.offsetWidth/2;var top=posA.y-10-this._curInfo.offsetHeight;if(top>0)\nthis._curInfo.style.top=top;else\nthis._curInfo.style.top=posA.y-this._curInfo.offsetHeight;}}\nDoubleSlider.prototype._aCalc=function(){if(!this.isInit)\nreturn;this.shift=this.option.min;this.limit=this.option.max-this.shift;this._mod=(this.option.size-this.dragLeft*2-this.dragWidth)/this.limit;this._step=this.option.step;this.step=this._step*this._mod;this._xlimit=this.option.size-this.dragLeft*2-this.dragWidth;if(!this.posA){this.posA=this._xlimit*(this.valueA-this.shift)/this.limit;}\nif(!this.posB){this.posB=this._xlimit*(this.valueB-this.shift)/this.limit;}\nthis._applyPos(true);return this;}\nDoubleSlider.prototype._applyPos=function(skip){if(!this.isInit)\nreturn;if(this.step!=1&&this.step){this.posA=Math.round(this.posA/this.step)*this.step;this.posB=Math.round(this.posB/this.step)*this.step;}\nif(this.posA<0)\nthis.posA=0;if(this.posA>this._xlimit)\nthis.posA=this._xlimit;if(this.posB<0)\nthis.posB=0;if(this.posB>this._xlimit)\nthis.posB=this._xlimit;if(this.posA>=this.posB){if(this.posA==this._xlimit){this.posA=this.posA-this.step;}else{this.posB=this.posA+this.step;}}\nvar oldValueA=this.dragA.style[this._sL];var oldValueB=this.dragB.style[this._sL];this.dragA.style[this._sL]=this.posA+this.dragLeft+\"px\";this.leftZone.style[this._sW]=this.posA+this.dragLeft+this.dragWidth/2+\"px\";this.middleZone.style[this._sL]=this.posA+this.dragLeft+this.dragWidth/2+\"px\";this.middleZone.style[this._sW]=(this.posB-this.posA+this.dragLeft*1)+\"px\";this.dragB.style[this._sL]=this.posB+this.dragLeft*1+\"px\";this.rightZone.style[this._sL]=this.posB+this.dragLeft*1+this.dragWidth/2+1+\"px\";this.rightZone.style[this._sW]=this.zoneSize\n-(this.posB+this.dragLeft*1+this.dragWidth/2)+\"px\";if(!skip&&(oldValueA!=this.dragA.style[this._sL]||oldValueB!=this.dragB.style[this._sL])){this.onChange.fire(this._getValue(this.posA),this._getValue(this.posB),this);}\nthis.valueA=this._getValue(this.posA);this.valueB=this._getValue(this.posB);this._setTooltip(this.dragA,this.valueA);this._setTooltip(this.dragB,this.valueB);if(this._curInfo){if(this._hideInfo){clearTimeout(this._hideInfo);this._hideInfo=null;}\nthis._curInfo.innerText=this.getTitle(this.valueA)+\" : \"+this.getTitle(this.valueB);var posParent=null;if(domutils.isIE())\nposParent=this.parent;if(this.option.vMode){var posA=util.getAbsolutePos(this.dragA,posParent);var posB=util.getAbsolutePos(this.dragB,posParent);var temp=posA.y+(posB.y-posA.y)/2;this._curInfo.style.top=temp-this._curInfo.offsetHeight/2;}else{var posA=util.getAbsolutePos(this.dragA,posParent);var posB=util.getAbsolutePos(this.dragB,posParent);temp=posA.x+(posB.x-posA.x)/2;this._curInfo.style.left=temp-this._curInfo.offsetWidth/2;}\nthis._curInfo.style.display=\"block\";var that=this;this._hideInfo=setTimeout(function(){that._curInfo.style.display=\"none\";that._hideInfo=null;},1500);}}\nDoubleSlider.prototype._getValue=function(pos){return Math.round((Math.round((pos/this._mod)/this._step)*this._step+this.shift*1)*10000)/10000;};DoubleSlider.prototype.getValueA=function(){return this.valueA;}\nDoubleSlider.prototype.getValueB=function(){return this.valueB;}\nDoubleSlider.prototype.setValueA=function(val,skip){if(isNaN(val))\nreturn;this.valueA=val-0;this.posA=(Math.round(((val||0)-this.shift)*this._mod));this._applyPos(skip==null?true:skip);};DoubleSlider.prototype.setValueB=function(val,skip){if(isNaN(val))\nreturn;this.valueB=val-0;this.posB=(Math.round(((val||0)-this.shift)*this._mod));this._applyPos(skip==null?true:skip);};DoubleSlider.prototype._setTooltip=function(obj,value){obj.title=this.getTitle(value);}\nDoubleSlider.prototype.getTitle=function(value){if(this.titleList&&this.titleList[value]){return this.titleList[value].display;}\nreturn value;}\nDoubleSlider.prototype.doSelectStart=function(){return false;}\nDoubleSlider.prototype.startDrag=function(e){if(this._busy)\nreturn;if(domutils.isIOS()||domutils.isAndroid()){this.drag_mx=e.changedTouches[0].pageX;this.drag_my=e.changedTouches[0].pageY;if(this.currentDrag==\"dragA\"){this.drag_cx=this.posA;}else{this.drag_cx=this.posB;}\nvar that=this;if(domutils.isIOS()||domutils.isAndroid()){this.d_b_move=document.body.ontouchmove;document.body.ontouchmove=function(e){that.onDrag(e||event);}\nthis.d_b_up=document.body.ontouchend;document.body.ontouchend=function(e){that.stopDrag(e||event);that=null;}}\nthis._busy=true;}else if((e.button===0)||(e.button===1)){this.drag_mx=e.clientX;this.drag_my=e.clientY;if(this.currentDrag==\"dragA\"){this.drag_cx=this.posA;}else{this.drag_cx=this.posB;}\nvar that=this;this.d_b_move=document.body.onmousemove;this.d_b_up=document.body.onmouseup;document.body.onmouseup=function(e){that.stopDrag(e||event);that=null;}\ndocument.body.onmousemove=function(e){that.onDrag(e||event);}\nthis._busy=true;}}\nDoubleSlider.prototype.onDrag=function(e){if(this._busy){var eventX=e.clientX;var eventY=e.clientY;if(domutils.isIOS()||domutils.isAndroid()){eventX=e.changedTouches[0].pageX;eventY=e.changedTouches[0].pageY;}\nif(!this.option.vMode){if(this.currentDrag==\"dragA\"){this.posA=this.drag_cx+eventX-this.drag_mx;}else{this.posB=this.drag_cx+eventX-this.drag_mx;}}else{if(this.currentDrag==\"dragA\"){this.posA=this.drag_cx+eventY-this.drag_my;}else{this.posB=this.drag_cx+eventY-this.drag_my;}}\nthis._applyPos(true);}}\nDoubleSlider.prototype.stopDrag=function(e){if(domutils.isIOS()||domutils.isAndroid()){document.body.ontouchmove=this.d_b_move?this.d_b_move:null;document.body.ontouchend=this.d_b_up?this.d_b_up:null;}else{document.body.onmousemove=this.d_b_move?this.d_b_move:null;document.body.onmouseup=this.d_b_up?this.d_b_up:null;}\nthis.d_b_move=this.d_b_up=null;this._busy=false;this.onSlideEnd.fire(this.valueA,this.valueB,this);}\nDoubleSlider.prototype._getActionElement=function(nod){if(nod._etype)\nreturn nod;if(nod.parentNode)\nreturn this._getActionElement(nod.parentNode);return null;}\nDoubleSlider.prototype._onMouseDown=function(e){if(this.disabled)\nreturn;var nod=this._getActionElement(domutils.isIE()?e.srcElement:e.target);switch(nod._etype){case\"slider\":break;case\"dragA\":this.currentDrag=\"dragA\";this.startDrag(e||event);break;case\"dragB\":this.currentDrag=\"dragB\";this.startDrag(e||event);break;}\nreturn false;}","js/smartbi/parameterportlet/doublesliderportlet/DoubleSliderPortlet.js":"\nvar ParameterPortlet=jsloader.resolve('smartbi.parameterportlet.ParameterPortlet');var DoubleSlider=jsloader.resolve('smartbi.control.DoubleSlider');var DoubleSliderPortlet=function(parentDiv,contentString){DoubleSliderPortlet.superclass.constructor.call(this,parentDiv,contentString);this.control=null;}\nlang.extend(DoubleSliderPortlet,ParameterPortlet);DoubleSliderPortlet.prototype.destroy=function(){this.destroyControl();this._contendDiv.innerHTML=\"\";DoubleSliderPortlet.superclass.destroy.call(this);}\nDoubleSliderPortlet.prototype.checkIsMultSelect=function(){this.isMultSelect=false;}\nDoubleSliderPortlet.prototype.refresh=function(){var pageObj=this.getPageObj();var panelClinetId=pageObj.paramPanel.clientId;if(this.isNumber){this.createControl(null);var defaultValue=this.getParamValueFromPage(this.paramIdA,this.paramNameA);if(defaultValue==null){var vas=pageObj.paramPanel.getParamDefaultValue(this.paramIdA,panelClinetId);if(vas!=null){defaultValue=vas[0];}}\nif(defaultValue!=null&&defaultValue!=\"\"){this.setCurrentValueA(defaultValue);}\ndefaultValue=this.getParamValueFromPage(this.paramIdB,this.paramNameB);if(defaultValue==null){var vas=pageObj.paramPanel.getParamDefaultValue(this.paramIdB,panelClinetId);if(vas!=null){defaultValue=vas[0];}}\nif(defaultValue!=null&&defaultValue!=\"\"){this.setCurrentValueB(defaultValue);}}else{var paramValues=pageObj.paramPanel.getParamStandbyValue(this.paramIdA,panelClinetId);if(paramValues!=null){var flag=true;if(this.paramValues&&this.paramValues.length==paramValues.length){var len=this.paramValues.length;flag=false;for(var i=0;i<len;i++){if(this.paramValues[i][0]!=paramValues[i][0]){flag=true;break;}}}\nif(flag){this.paramValues=paramValues;this.createControl(paramValues);var defaultValue=this.getParamValueFromPage(this.paramIdA,this.paramNameA);if(defaultValue==null){var vas=pageObj.paramPanel.getParamDefaultValue(this.paramIdA,panelClinetId);if(vas!=null){defaultValue=vas[0];}}\nif(defaultValue!=null&&defaultValue!=\"\"){this.setCurrentValueA(defaultValue);}\ndefaultValue=this.getParamValueFromPage(this.paramIdB,this.paramNameB);if(defaultValue==null){var vas=pageObj.paramPanel.getParamDefaultValue(this.paramIdB,panelClinetId);if(vas!=null){defaultValue=vas[0];}}\nif(defaultValue!=null&&defaultValue!=\"\"){this.setCurrentValueB(defaultValue);}}}}}\nDoubleSliderPortlet.prototype.collectValueAndRefreshPortlet=function(){var valueA=this.control.getValueA();var valueB=this.control.getValueB();if(this.isNumber){valueA=valueA+\"\";valueB=valueB+\"\";this.refreshPortlet(valueA,valueA,valueB,valueB);}else{var keyA=this.data[valueA].value;var captionA=this.data[valueA].display;var keyB=this.data[valueB].value;var captionB=this.data[valueB].display;this.refreshPortlet(keyA,captionA,keyB,captionB);}}\nDoubleSliderPortlet.prototype.refreshPortlet=function(keyA,captionA,keyB,captionB){var pageObj=this.getPageObj();var panelClinetId=pageObj.paramPanel.clientId;pageObj.paramPanel.setParamValue(this.paramIdA,keyA,captionA,panelClinetId);pageObj.pageUtil.setParamValueToPortlet(this.paramNameA,keyA,captionA);pageObj.paramPanel.setParamValue(this.paramIdB,keyB,captionB,panelClinetId);pageObj.pageUtil.setParamValueToPortlet(this.paramNameB,keyB,captionB);for(var index in pageObj.dashletList){var currPortlet=pageObj.dashletList[index].currentPortlet\nif(currPortlet.portletType==\"ParameterPortlet\"&&currPortlet.portletId!=this.portletId){currPortlet.refresh();}}}\nDoubleSliderPortlet.prototype.resolveCustomContentXml=function(portletXml){this.portletXml=portletXml;this.paramIdA=domutils.getNodeAtrributeValueByName(portletXml,\"PARAMIDA\").nodeValue;this.paramNameA=domutils.getNodeAtrributeValueByName(portletXml,\"PARAMNAMEA\").nodeValue;this.paramIdB=domutils.getNodeAtrributeValueByName(portletXml,\"PARAMIDB\").nodeValue;this.paramNameB=domutils.getNodeAtrributeValueByName(portletXml,\"PARAMNAMEB\").nodeValue;this.layoutmodel=domutils.getNodeAtrributeValueByName(portletXml,\"LAYOUTMODEL\").nodeValue;this.isNumber=false;if(domutils.getNodeAtrributeValueByName(portletXml,\"ISNUMBER\")){this.isNumber=domutils.getNodeAtrributeValueByName(portletXml,\"ISNUMBER\").nodeValue==\"true\";}\nif(this.isNumber){this.minValue=domutils.getNodeAtrributeValueByName(portletXml,\"MINVALUE\").nodeValue;this.maxValue=domutils.getNodeAtrributeValueByName(portletXml,\"MAXVALUE\").nodeValue;this.stepValue=domutils.getNodeAtrributeValueByName(portletXml,\"STEPVALUE\").nodeValue;}\nthis.portletId=this.paramIdA+\"-\"+this.paramIdB;}\nDoubleSliderPortlet.prototype.createControl=function(data){this.destroyControl();var width=this._contendDiv.clientWidth;var height=this._contendDiv.clientHeight;if(this.title&&this.title!=\"\"){if(this.titleDiv){;}else{this.titleDiv=document.createElement(\"span\");this.titleDiv.className=\"slider_title\";this._contendDiv.appendChild(this.titleDiv);}\nthis.titleDiv.innerHTML=this.title;if(this.layoutmodel==\"hlayout\"){this.titleDiv.style.height=height;width-=this.titleDiv.clientWidth;}else{this.titleDiv.style.width=width;height-=this.titleDiv.clientHeight;}}\nif(!this._oMiv){this._oMiv=document.createElement(\"span\");this._oMiv.style.display=\"table\";this._oMiv.style.overflowX=\"hidden\";this._oMiv.style.overflowY=\"hidden\";if(this.layoutmodel==\"hlayout\"){this._oMiv.style.display=\"inline-block\";this._oMiv.style.width=width-10;this._oMiv.style.height=height;}else{this._oMiv.style.width=width-10;this._oMiv.style.height=height;}\nthis._contendDiv.appendChild(this._oMiv);}\nif(!this._mDiv){this._mDiv=document.createElement(\"div\");this._mDiv.className=\"vci\";this._oMiv.appendChild(this._mDiv);}\nif(!this._cDiv){this._cDiv=document.createElement(\"div\");this._cDiv.className=\"vciContent\";this._mDiv.appendChild(this._cDiv);}\nif(this.isNumber){var option={min:this.minValue,max:this.maxValue,size:height-30,step:this.stepValue,skin:\"ipad\",vMode:true};if(this.layoutmodel==\"hlayout\"){option.vMode=false;option.size=width-30;}\nthis.control=new DoubleSlider(this._cDiv,option,this.minValue,this.maxValue,null);}else{var len=data.length;this.data=[];for(var i=0;i<len;i++){var value=data[i][0];var display=data[i][1];this.data[i]={value:value,display:display};}\nvar option={min:0,max:len-1||1,size:height-30,step:1,skin:\"ipad\",vMode:true};if(this.layoutmodel==\"hlayout\"){option.vMode=false;option.size=width-30;}\nthis.control=new DoubleSlider(this._cDiv,option,0,len-1||1,this.data);}\nthis.control.init();this.control.onSlideEnd.subscribe(this.onSelectChange,this);this.control.onChange.subscribe(this.onSelectChange,this);}\nDoubleSliderPortlet.prototype.destroyControl=function(){if(this.control){this.control.onSlideEnd.unsubscribe(this.onSelectChange,this);this.control.onChange.unsubscribe(this.onSelectChange,this);this.control.destroy();}\nthis.control=null;if(this._cDiv)\nthis._cDiv.innerHTML=\"\";}\nDoubleSliderPortlet.prototype.onSelectChange=function(valueA,valueB,control){if(this.data&&this.data[valueA]&&this.data[valueB]){var keyA=this.data[valueA].value;var captionA=this.data[valueA].display;var keyB=this.data[valueB].value;var captionB=this.data[valueB].display;this.refreshPortlet(keyA,captionA,keyB,captionB);}else{var valA=valueA+\"\";var valB=valueB+\"\";this.refreshPortlet(valA,valA,valB,valB);}}\nDoubleSliderPortlet.prototype.setCurrentValueA=function(keyStr){var keyList=keyStr.split(\",\");if(this.isNumber){this.control.setValueA(keyList[0],true);}else{var len=this.data.length;for(var i=0;i<len;i++){if(this.data[i].value==keyList[0]){this.control.setValueA(i,true);break;}}}}\nDoubleSliderPortlet.prototype.setCurrentValueB=function(keyStr){var keyList=keyStr.split(\",\");if(this.isNumber){this.control.setValueB(keyList[0],true);}else{var len=this.data.length;for(var i=0;i<len;i++){if(this.data[i].value==keyList[0]){this.control.setValueB(i,true);break;}}}}","js/smartbi/parameterportlet/sliderportlet/SliderPortlet.js":"\nvar ParameterPortlet=jsloader.resolve('smartbi.parameterportlet.ParameterPortlet');var Slider=jsloader.resolve('smartbi.control.Slider');var SliderPortlet=function(parentDiv,contentString){this.control=null;SliderPortlet.superclass.constructor.call(this,parentDiv,contentString);}\nlang.extend(SliderPortlet,ParameterPortlet);SliderPortlet.prototype.destroy=function(){this.destroyControl();this._contendDiv.innerHTML=\"\";SliderPortlet.superclass.destroy.call(this);}\nSliderPortlet.prototype.resolveCustomContentXml=function(portletXml){this.portletXml=portletXml;this.paramName=domutils.getNodeAtrributeValueByName(portletXml,\"PARAMNAME\").nodeValue;this.paramId=domutils.getNodeAtrributeValueByName(portletXml,\"PARAMID\").nodeValue;this.layoutmodel=domutils.getNodeAtrributeValueByName(portletXml,\"LAYOUTMODEL\").nodeValue;this.isNumber=false;if(domutils.getNodeAtrributeValueByName(portletXml,\"ISNUMBER\")){this.isNumber=domutils.getNodeAtrributeValueByName(portletXml,\"ISNUMBER\").nodeValue==\"true\";}\nif(this.isNumber){this.minValue=domutils.getNodeAtrributeValueByName(portletXml,\"MINVALUE\").nodeValue;this.maxValue=domutils.getNodeAtrributeValueByName(portletXml,\"MAXVALUE\").nodeValue;this.stepValue=domutils.getNodeAtrributeValueByName(portletXml,\"STEPVALUE\").nodeValue;}\nthis.portletId=this.paramId;}\nSliderPortlet.prototype.refresh=function(){if(this.isNumber){this.createControl(null);var pageObj=this.getPageObj();var panelClinetId=pageObj.paramPanel.clientId;var defaultValue=this.getParamValueFromPage(this.paramId,this.paramName);if(defaultValue==null){var vas=pageObj.paramPanel.getParamDefaultValue(this.paramId,panelClinetId);if(vas!=null){defaultValue=vas[0];}}\nif(defaultValue!=null&&defaultValue!=\"\"){this.setCurrentValue(defaultValue);}}else{SliderPortlet.superclass.refresh.call(this);}}\nSliderPortlet.prototype.createControl=function(data){this.destroyControl();var width=this._contendDiv.clientWidth;var height=this._contendDiv.clientHeight;if(this.title&&this.title!=\"\"){if(this.titleDiv){;}else{this.titleDiv=document.createElement(\"span\");this.titleDiv.className=\"slider_title\";this._contendDiv.appendChild(this.titleDiv);}\nthis.titleDiv.innerHTML=this.title;if(this.layoutmodel==\"hlayout\"){this.titleDiv.style.height=height;width-=this.titleDiv.clientWidth;}else{this.titleDiv.style.width=width;height-=this.titleDiv.clientHeight;}}\nif(!this._oMiv){this._oMiv=document.createElement(\"span\");this._oMiv.style.display=\"table\";this._oMiv.style.overflowX=\"hidden\";this._oMiv.style.overflowY=\"hidden\";if(this.layoutmodel==\"hlayout\"){this._oMiv.style.display=\"inline-block\";this._oMiv.style.width=width-10;this._oMiv.style.height=height;}else{this._oMiv.style.width=width-10;this._oMiv.style.height=height;}\nthis._contendDiv.appendChild(this._oMiv);}\nif(!this._mDiv){this._mDiv=document.createElement(\"div\");this._mDiv.className=\"vci\";this._oMiv.appendChild(this._mDiv);}\nif(!this._cDiv){this._cDiv=document.createElement(\"div\");this._cDiv.className=\"vciContent\";this._mDiv.appendChild(this._cDiv);}\nif(this.isNumber){var option={min:this.minValue,max:this.maxValue,size:height-30,step:this.stepValue,skin:\"ipad\",vMode:true};if(this.layoutmodel==\"hlayout\"){option.vMode=false;option.size=width-30;}\nthis.control=new Slider(this._cDiv,option,this.minValue,null);}else{var len=data.length;this.data=[];for(var i=0;i<len;i++){var value=data[i][0];var display=data[i][1];this.data[i]={value:value,display:display};}\nvar option={min:0,max:len-1||1,size:height-30,step:1,skin:\"ipad\",vMode:true};if(this.layoutmodel==\"hlayout\"){option.vMode=false;option.size=width-30;}\nthis.control=new Slider(this._cDiv,option,0,this.data);}\nthis.control.init();this.control.onSlideEnd.subscribe(this.onSelectChange,this);this.control.onChange.subscribe(this.onSelectChange,this);}\nSliderPortlet.prototype.destroyControl=function(){if(this.control){this.control.onSlideEnd.unsubscribe(this.onSelectChange,this);this.control.onChange.unsubscribe(this.onSelectChange,this);this.control.destroy();}\nthis.control=null;if(this._cDiv)\nthis._cDiv.innerHTML=\"\";}\nSliderPortlet.prototype.onSelectChange=function(value,control){if(this.data&&this.data[value]){var key=this.data[value].value;var caption=this.data[value].display;this.refreshPortlet(key,caption);}else{var val=value+\"\";this.refreshPortlet(val,val);}}\nSliderPortlet.prototype.setCurrentValue=function(keyStr){var keyList=keyStr.split(\",\");if(this.isNumber){this.control.setValue(keyList[0],true);}else{var len=this.data.length;for(var i=0;i<len;i++){if(this.data[i].value==keyList[0]){this.control.setValue(i,true);break;}}}}","js/bof/baseajax/common/Application.js":"\nvar SecurityService=imports(\"bof.baseajax.common.SecurityService\");var LoginAction=imports(\"bof.baseajax.common.actions.LoginAction\");var MainFrameAction=imports(\"bof.baseajax.common.actions.MainFrameAction\");var util=imports(\"freequery.common.util\").getInstance();var Application={serverAddr:null,loginAction:null,mainFrameAction:null,init:function(username,password){document.jsloader=jsloader;util.redefineAlert();this.initLogin(username,password);},showDownloadAddress:function(hide){var el=document.getElementById(\"ocxDownload\");if(el)\nel.style.display=hide?\"none\":\"\";},connectAp:function(server,user,password){if(util.licenses&&!util.licenses.BI3Insight)\nreturn null;var FBI_BIServerInterface=registry.get(\"FBI.BIServerInterface\");if(!FBI_BIServerInterface){try{FBI_BIServerInterface=new ActiveXObject(\"FBI.BIServerInterface\");if(server==null){if(registry.get(\"BI3ServerAddress\"))\nserver=registry.get(\"BI3ServerAddress\");else{server=this.serverAddr;registry.put(\"BI3ServerAddress\",server);}}\nFBI_BIServerInterface.SetServerAddress(server);FBI_BIServerInterface.ExternalHttp=new ActiveXObject(\"Microsoft.XMLHTTP\");registry.put(\"FBI.BIServerInterface\",FBI_BIServerInterface);if(user==null)\nuser=registry.get(\"User\");if(password==null)\npassword=registry.get(\"Password\");var logined=(FBI_BIServerInterface.Login(user,password)==0);if(logined){FBI_BIServerInterface.CurrentLanguage=\"SimplifiedChinese\";}else{return null;}}catch(e){return null;}}\nreturn FBI_BIServerInterface;},disconnectAp:function(){var FBI_BIServerInterface=registry.get(\"FBI.BIServerInterface\");if(FBI_BIServerInterface){try{FBI_BIServerInterface.close();}catch(e){}}},beforeDestroy:function(){this.disconnectAp();if(!this.mainFrameAction){return;}\nvar isCloseEnabled=this.mainFrameAction.isEnabled(\"close\");if(isCloseEnabled){;}else if(window.event){event.returnValue=\"---------------------------------------------\\n\\n\"+\"存在未保存的修改。\\n\"+\"建议先点击“取消”按钮，保存后再离开此页面。\\n\\n\\n\"+\"---------------------------------------------\";}},destroy:function(){if(this.loginAction){this.loginAction.destroy();this.loginAction=null;}\nif(this.mainFrameAction){this.mainFrameAction.destroy();this.mainFrameAction=null;}\nvar winHandler=window.reportCommentWinHandler;if(winHandler){winHandler.close();}\nclearInterval(this.loopTimerId);},initLogin:function(username,password){this.loginAction=new LoginAction(document.body);this.loginAction.execute(\"open\");this.loginAction.loginView.onLogined.subscribe(function(username,password){registry.put(\"User\",username);registry.put(\"Password\",password);this.loadMyAccountInfo();this.loadUIConfig();this.loadCommon();this.loopTimerId=setInterval(this.loopTask,1000*60*2);this.loginAction.destroy();this.loginAction=null;this.initMainFrame();util.clearCompositeInvokeCache(\"compositeLogin\",[username,password]);},this);this.loginAction.loginByParam(username,password);},initMainFrame:function(){this.doConfigurationPatch();this.mainFrameAction=new MainFrameAction(document.body);this.mainFrameAction.execute(\"open\");this.checkOcxVersion();},checkOcxVersion:function(){if(util.licenses&&!util.licenses.BI3Insight)\nreturn;try{var TempServerInterface=new ActiveXObject(\"FBI.BIServerInterface\");var v1=TempServerInterface.GetFileVersion(\"\")||\"0\";var v2=this.serverOcxVersion||\"0\";if(util.compareVersion(v1,v2)<0){this.showDownloadAddress();alert(\"服务器有新版本控件可以下载！下载后请关闭当前浏览器后再安装！\");}}catch(e){this.showDownloadAddress();alert(\"要使用分析报表功能必须先下载控件并完成安装！下载后请关闭当前浏览器后再安装！\");}},loadMyAccountInfo:function(){this.licenses=[];var expirationDate=null;var ret=util.remoteInvokeEx(\"CommonService\",\"checkLicenseExpiration\",[]);if(ret&&ret.succeeded&&ret.result){expirationDate=ret.result;}\nvar ret=util.remoteInvokeEx(\"UserService\",\"getMyAccountInfo\",[]);if(ret&&ret.succeeded&&ret.result){registry.put(\"opFunctions\",ret.result.allFunctionsOfCurrentUser);registry.put(\"currentUserId\",ret.result.userId);registry.put(\"currentUserAlias\",ret.result.userAlias);registry.put(\"currentUserName\",ret.result.userName);if(expirationDate){var allRolesOfUser=ret.result.allRolesOfUser;for(var i=0,len=allRolesOfUser.length;i<len;i++){var roles=allRolesOfUser[i].rolesList;for(var j=0,leng=roles.length;j<leng;j++){var roleId=roles[j].roleId;if(roleId=='ADMINS'){alert('License将在“'+expirationDate+'”到期！','到期提醒');break;}}}}\nret=ret.result.licenses;if(ret.length<1){throw new Error(\"License error!\");}else{util.licenses=util.licenses||[];for(var i=0;i<ret.length;i++){this.licenses[ret[i]]=true;util.licenses[ret[i]]=true;}\nregistry.put(\"licenses\",util.licenses);}}},loadUIConfig:function(){var ret=util.remoteInvoke(\"ConfigClientService\",\"getUIConfig\",[]);if(ret&&ret.succeeded&&ret.result){for(var ii=0;ii<ret.result.length;ii++){registry.put(ret.result[ii].name,ret.result[ii].value);}}\nvar ret=util.remoteInvoke(\"ConfigClientService\",\"getDefaultDialogTitle\",[]);if(ret&&ret.succeeded&&ret.result){registry.put(\"defaultDialogTitle\",ret.result);}},loadCommon:function(){var ret=util.remoteInvoke(\"CommonService\",\"getBI3ServerAddress\",[]);if(ret&&ret.succeeded&&ret.result){registry.put(\"BI3ServerAddress\",ret.result);}},loopTask:function(){try{domutils.doPost('noop.jsp');}catch(ex){;}},getPatchedConfiguration:function(){this.doConfigurationPatch();return imports(\"Configuration\").getInstance();},doConfigurationPatched:false,doConfigurationPatch:function(){if(this.doConfigurationPatched)\nreturn;var Configuration=imports(\"Configuration\").getInstance();var patches=Configuration.patches;if(!patches){return;}\nthis.doConfigurationPatched=true;for(var i=0;i<patches.length;i++){var path=patches[i].path.substring(1);var key=patches[i].key;var operation=patches[i].operation;var value=patches[i].value;var node=Configuration;var parent=null;var lastPath=null;if(path){var paths=path.split(\"/\");for(var z=0;z<paths.length;z++){parent=node;node=node[paths[z]];}\nlastPath=paths[paths.length-1];}\nif(operation==\"replace\"){if(!node){if(typeof key==\"number\")\nnode=parent[lastPath]=new Array();else\nnode=parent[lastPath]=new Object();}\nif(node instanceof Array){if(key<0)\nkey=node.length+key;}\nnode[key]=value;}else if(operation==\"insert\"){if(node instanceof Array){if(key<0)\nkey=node.length+key;node.splice(key,0,value);}else if(typeof node==\"object\"){node[key]=value;}else{;}}else if(operation==\"append\"){if(node){if(typeof value==\"Array\")\nparent[lastPath]=node=node.concat(value);else\nnode[node.length]=value;}else{node=parent[lastPath]=new Array();if(value instanceof Array){parent[lastPath]=node=node.concat(value);}else\nnode[node.length]=value;}}else if(operation==\"appendObject\"){if(node){for(var k in value){node[k]=value[k];}}else{node=parent[lastPath]=new Object();for(var k in value){node[k]=value[k];}}}else if(operation==\"remove\"){if(node instanceof Array){if(key<0)\nkey=node.length+key;node.splice(key,1);}else if(typeof node==\"object\"){delete node[key];}else{;}}else{;}}}};","js/ext/IPad/BofIPadScroll.js":"\nvar BofIPadScroll=function(container,options,oldWrapperDiv){if(!domutils.isIOS()&&!domutils.isAndroid()){return;}\nthis.container=container;var containerParent=this.container.parentNode;if(oldWrapperDiv){}else{var wrapperDiv=document.createElement(\"div\");wrapperDiv.style.cssText=\"position:relative;z-index:1;width:100%;height:100%;\";containerParent.insertBefore(wrapperDiv,container);wrapperDiv.appendChild(container);}\nthis.scrollContent=new iScroll(container,options);this.addListener(container,\"touchmove\",this.doTouchmove,this);}\nlang.extend(BofIPadScroll,\"freequery.widget.Module2\");BofIPadScroll.prototype.doTouchmove=function(e){}","js/ext/IPad/iscroll.js":"\n(function(){function iScroll(el,options){var that=this,i;that.element=typeof el=='object'?el:document.getElementById(el);that.wrapper=that.element.parentNode;that.element.style.webkitTransitionProperty='-webkit-transform';that.element.style.webkitTransitionTimingFunction='cubic-bezier(0,0,0.25,1)';that.element.style.webkitTransitionDuration='0';that.element.style.webkitTransform=translateOpen+'0,0'+translateClose;that.options={bounce:has3d,momentum:has3d,checkDOMChanges:true,topOnDOMChanges:false,hScrollbar:has3d,vScrollbar:has3d,fadeScrollbar:isIthing||!isTouch,shrinkScrollbar:isIthing||!isTouch,desktopCompatibility:false,overflow:'auto',snap:false,bounceLock:false,scrollbarColor:'rgba(0,0,0,0.5)',onScrollEnd:function(){}};if(typeof options=='object'){for(i in options){that.options[i]=options[i];}}\nif(that.options.desktopCompatibility){that.options.overflow='hidden';}\nthat.onScrollEnd=that.options.onScrollEnd;delete that.options.onScrollEnd;that.wrapper.style.overflow=that.options.overflow;that.refresh();window.addEventListener('onorientationchange'in window?'orientationchange':'resize',that,false);if(isTouch||that.options.desktopCompatibility){that.element.addEventListener(START_EVENT,that,false);that.element.addEventListener(MOVE_EVENT,that,false);that.element.addEventListener(END_EVENT,that,false);that.element.addEventListener(\"gesturestart\",that,false);that.element.addEventListener(\"gestureend\",that,false);}\nif(that.options.checkDOMChanges){that.element.addEventListener('DOMSubtreeModified',that,false);}}\niScroll.prototype={x:0,y:0,enabled:true,enableMove:true,handleEvent:function(e){var that=this;switch(e.type){case START_EVENT:that.touchStart(e);break;case MOVE_EVENT:that.touchMove(e);break;case END_EVENT:that.touchEnd(e);break;case'webkitTransitionEnd':that.transitionEnd();break;case'orientationchange':case'resize':that.refresh();break;case'DOMSubtreeModified':that.onDOMModified(e);break;case'gesturestart':that.enableMove=false;break;case'gestureend':that.enableMove=true;break;}},onDOMModified:function(e){var that=this;if(e.target.parentNode!=that.element){}\nsetTimeout(function(){that.refresh();},0);if(that.options.topOnDOMChanges&&(that.x!=0||that.y!=0)){that.scrollTo(0,0,'0');}},refresh:function(){var that=this,resetX=that.x,resetY=that.y,snap;that.scrollWidth=that.wrapper.clientWidth;that.scrollHeight=that.wrapper.clientHeight;that.scrollerWidth=that.element.offsetWidth;that.scrollerHeight=that.element.offsetHeight;that.maxScrollX=that.scrollWidth-that.scrollerWidth;that.maxScrollY=that.scrollHeight-that.scrollerHeight;that.directionX=0;that.directionY=0;if(that.scrollX){if(that.maxScrollX>=0){resetX=0;}else if(that.x<that.maxScrollX){resetX=that.maxScrollX;}}\nif(that.scrollY){if(that.maxScrollY>=0){resetY=0;}else if(that.y<that.maxScrollY){resetY=that.maxScrollY;}}\nif(that.options.snap){that.maxPageX=-Math.floor(that.maxScrollX/that.scrollWidth);that.maxPageY=-Math.floor(that.maxScrollY/that.scrollHeight);snap=that.snap(resetX,resetY);resetX=snap.x;resetY=snap.y;}\nif(resetX!=that.x||resetY!=that.y){that.setTransitionTime('0');that.setPosition(resetX,resetY,true);}\nthat.scrollX=that.scrollerWidth>that.scrollWidth;that.scrollY=!that.options.bounceLock&&!that.scrollX||that.scrollerHeight>that.scrollHeight;if(that.options.hScrollbar&&that.scrollX){that.scrollBarX=that.scrollBarX||new scrollbar('horizontal',that.wrapper,that.options.fadeScrollbar,that.options.shrinkScrollbar,that.options.scrollbarColor);that.scrollBarX.init(that.scrollWidth,that.scrollerWidth);}else if(that.scrollBarX){that.scrollBarX=that.scrollBarX.remove();}\nif(that.options.vScrollbar&&that.scrollY&&that.scrollerHeight>that.scrollHeight){that.scrollBarY=that.scrollBarY||new scrollbar('vertical',that.wrapper,that.options.fadeScrollbar,that.options.shrinkScrollbar,that.options.scrollbarColor);that.scrollBarY.init(that.scrollHeight,that.scrollerHeight);}else if(that.scrollBarY){that.scrollBarY=that.scrollBarY.remove();}},setPosition:function(x,y,hideScrollBars){var that=this;that.x=x;that.y=y;that.element.style.webkitTransform=translateOpen+that.x+'px,'+that.y+'px'+translateClose;if(!hideScrollBars){if(that.scrollBarX){that.scrollBarX.setPosition(that.x);}\nif(that.scrollBarY){that.scrollBarY.setPosition(that.y);}}},setTransitionTime:function(time){var that=this;time=time||'0';that.element.style.webkitTransitionDuration=time;if(that.scrollBarX){that.scrollBarX.bar.style.webkitTransitionDuration=time;that.scrollBarX.wrapper.style.webkitTransitionDuration=has3d&&that.options.fadeScrollbar?'300ms':'0';}\nif(that.scrollBarY){that.scrollBarY.bar.style.webkitTransitionDuration=time;that.scrollBarY.wrapper.style.webkitTransitionDuration=has3d&&that.options.fadeScrollbar?'300ms':'0';}},touchStart:function(e){var that=this,matrix;if(!that.enabled){return;}\nif(!that.enableMove){return;}\ne.stopPropagation();that.scrolling=true;that.moved=false;that.distX=0;that.distY=0;that.setTransitionTime('0');if(that.options.momentum||that.options.snap){matrix=new WebKitCSSMatrix(window.getComputedStyle(that.element).webkitTransform);if(matrix.e!=that.x||matrix.f!=that.y){document.removeEventListener('webkitTransitionEnd',that,false);that.setPosition(matrix.e,matrix.f);that.moved=true;}}\nthat.touchStartX=isTouch?e.changedTouches[0].pageX:e.pageX;that.scrollStartX=that.x;that.touchStartY=isTouch?e.changedTouches[0].pageY:e.pageY;that.scrollStartY=that.y;that.scrollStartTime=e.timeStamp;that.directionX=0;that.directionY=0;},touchMove:function(e){if(!this.scrolling){return;}\nif(!this.enableMove){return;}\nvar that=this,pageX=isTouch?e.changedTouches[0].pageX:e.pageX,pageY=isTouch?e.changedTouches[0].pageY:e.pageY,leftDelta=that.scrollX?pageX-that.touchStartX:0,topDelta=that.scrollY?pageY-that.touchStartY:0,newX=that.x+leftDelta,newY=that.y+topDelta;e.preventDefault();e.stopPropagation();that.touchStartX=pageX;that.touchStartY=pageY;if(newX>=0||newX<that.maxScrollX){newX=that.options.bounce?Math.round(that.x+leftDelta/3):(newX>=0||that.maxScrollX>=0)?0:that.maxScrollX;}\nif(newY>=0||newY<that.maxScrollY){newY=that.options.bounce?Math.round(that.y+topDelta/3):(newY>=0||that.maxScrollY>=0)?0:that.maxScrollY;}\nif(that.distX+that.distY>10){if(that.distX-3>that.distY){newY=that.y;topDelta=0;}else if(that.distY-3>that.distX){newX=that.x;leftDelta=0;}\nthat.setPosition(newX,newY);that.moved=true;that.directionX=leftDelta>0?-1:1;that.directionY=topDelta>0?-1:1;}else{that.distX+=Math.abs(leftDelta);that.distY+=Math.abs(topDelta);}},touchEnd:function(e){if(!this.scrolling){return;}\nif(!this.enableMove){return;}\nvar that=this,time=e.timeStamp-that.scrollStartTime,point=isTouch?e.changedTouches[0]:e,target,ev,momentumX,momentumY,newDuration=0,newPositionX=that.x,newPositionY=that.y,snap;that.scrolling=false;if(!that.moved){that.resetPosition();if(isTouch){}\nreturn;}\nif(!that.options.snap&&time>250){that.resetPosition();return;}\nif(that.options.momentum){momentumX=that.scrollX===true?that.momentum(that.x-that.scrollStartX,time,that.options.bounce?-that.x+that.scrollWidth/5:-that.x,that.options.bounce?that.x+that.scrollerWidth-that.scrollWidth+that.scrollWidth/5:that.x+that.scrollerWidth-that.scrollWidth):{dist:0,time:0};momentumY=that.scrollY===true?that.momentum(that.y-that.scrollStartY,time,that.options.bounce?-that.y+that.scrollHeight/5:-that.y,that.options.bounce?(that.maxScrollY<0?that.y+that.scrollerHeight-that.scrollHeight:0)+that.scrollHeight/5:that.y+that.scrollerHeight-that.scrollHeight):{dist:0,time:0};newDuration=Math.max(Math.max(momentumX.time,momentumY.time),1);newPositionX=that.x+momentumX.dist;newPositionY=that.y+momentumY.dist;}\nif(that.options.snap){snap=that.snap(newPositionX,newPositionY);newPositionX=snap.x;newPositionY=snap.y;newDuration=Math.max(snap.time,newDuration);}\nthat.scrollTo(newPositionX,newPositionY,newDuration+'ms');},transitionEnd:function(){var that=this;document.removeEventListener('webkitTransitionEnd',that,false);that.resetPosition();},resetPosition:function(){var that=this,resetX=that.x,resetY=that.y;if(that.x>=0){resetX=0;}else if(that.x<that.maxScrollX){resetX=that.maxScrollX;}\nif(that.y>=0||that.maxScrollY>0){resetY=0;}else if(that.y<that.maxScrollY){resetY=that.maxScrollY;}\nif(resetX!=that.x||resetY!=that.y){that.scrollTo(resetX,resetY);}else{if(that.moved){that.onScrollEnd();that.moved=false;}\nif(that.scrollBarX){that.scrollBarX.hide();}\nif(that.scrollBarY){that.scrollBarY.hide();}}},snap:function(x,y){var that=this,time;if(that.directionX>0){x=Math.floor(x/that.scrollWidth);}else if(that.directionX<0){x=Math.ceil(x/that.scrollWidth);}else{x=Math.round(x/that.scrollWidth);}\nthat.pageX=-x;x=x*that.scrollWidth;if(x>0){x=that.pageX=0;}else if(x<that.maxScrollX){that.pageX=that.maxPageX;x=that.maxScrollX;}\nif(that.directionY>0){y=Math.floor(y/that.scrollHeight);}else if(that.directionY<0){y=Math.ceil(y/that.scrollHeight);}else{y=Math.round(y/that.scrollHeight);}\nthat.pageY=-y;y=y*that.scrollHeight;if(y>0){y=that.pageY=0;}else if(y<that.maxScrollY){that.pageY=that.maxPageY;y=that.maxScrollY;}\ntime=Math.round(Math.max(Math.abs(that.x-x)/that.scrollWidth*500,Math.abs(that.y-y)/that.scrollHeight*500));return{x:x,y:y,time:time};},scrollTo:function(destX,destY,runtime){var that=this;if(that.x==destX&&that.y==destY){that.resetPosition();return;}\nthat.moved=true;that.setTransitionTime(runtime||'350ms');that.setPosition(destX,destY);if(runtime==='0'||runtime=='0s'||runtime=='0ms'){that.resetPosition();}else{document.addEventListener('webkitTransitionEnd',that,false);}},scrollToPage:function(pageX,pageY,runtime){var that=this,snap;if(!that.options.snap){that.pageX=-Math.round(that.x/that.scrollWidth);that.pageY=-Math.round(that.y/that.scrollHeight);}\nif(pageX=='next'){pageX=++that.pageX;}else if(pageX=='prev'){pageX=--that.pageX;}\nif(pageY=='next'){pageY=++that.pageY;}else if(pageY=='prev'){pageY=--that.pageY;}\npageX=-pageX*that.scrollWidth;pageY=-pageY*that.scrollHeight;snap=that.snap(pageX,pageY);pageX=snap.x;pageY=snap.y;that.scrollTo(pageX,pageY,runtime||'500ms');},scrollToElement:function(el,runtime){el=typeof el=='object'?el:this.element.querySelector(el);if(!el){return;}\nvar that=this,x=that.scrollX?-el.offsetLeft:0,y=that.scrollY?-el.offsetTop:0;if(x>=0){x=0;}else if(x<that.maxScrollX){x=that.maxScrollX;}\nif(y>=0){y=0;}else if(y<that.maxScrollY){y=that.maxScrollY;}\nthat.scrollTo(x,y,runtime);},momentum:function(dist,time,maxDistUpper,maxDistLower){var friction=2.5,deceleration=1.2,speed=Math.abs(dist)/time*1000,newDist=speed*speed/friction/1000,newTime=0;if(dist>0&&newDist>maxDistUpper){speed=speed*maxDistUpper/newDist/friction;newDist=maxDistUpper;}else if(dist<0&&newDist>maxDistLower){speed=speed*maxDistLower/newDist/friction;newDist=maxDistLower;}\nnewDist=newDist*(dist<0?-1:1);newTime=speed/deceleration;return{dist:Math.round(newDist),time:Math.round(newTime)};},destroy:function(full){var that=this;window.removeEventListener('onorientationchange'in window?'orientationchange':'resize',that,false);that.element.removeEventListener(START_EVENT,that,false);that.element.removeEventListener(MOVE_EVENT,that,false);that.element.removeEventListener(END_EVENT,that,false);document.removeEventListener('webkitTransitionEnd',that,false);if(that.options.checkDOMChanges){that.element.removeEventListener('DOMSubtreeModified',that,false);}\nif(that.scrollBarX){that.scrollBarX=that.scrollBarX.remove();}\nif(that.scrollBarY){that.scrollBarY=that.scrollBarY.remove();}\nif(full){that.wrapper.parentNode.removeChild(that.wrapper);}\nreturn null;}};function scrollbar(dir,wrapper,fade,shrink,color){var that=this,doc=document;that.dir=dir;that.fade=fade;that.shrink=shrink;that.uid=++uid;that.bar=doc.createElement('div');that.bar.style.cssText='position:absolute;top:0;left:0;-webkit-transition-timing-function:cubic-bezier(0,0,0.25,1);pointer-events:none;-webkit-transition-duration:0;-webkit-transition-delay:0;-webkit-transition-property:-webkit-transform;z-index:10;background:'+color+';'+'-webkit-transform:'+translateOpen+'0,0'+translateClose+';'+\n(dir=='horizontal'?'-webkit-border-radius:3px 2px;min-width:6px;min-height:5px':'-webkit-border-radius:2px 3px;min-width:5px;min-height:6px');that.wrapper=doc.createElement('div');that.wrapper.style.cssText='-webkit-mask:-webkit-canvas(scrollbar'+that.uid+that.dir+');position:absolute;z-index:10;pointer-events:none;overflow:hidden;opacity:1;-webkit-transition-duration:'+(fade?'300ms':'0')+';-webkit-transition-delay:0;-webkit-transition-property:opacity;'+\n(that.dir=='horizontal'?'bottom:2px;left:2px;right:7px;height:5px':'top:2px;right:2px;bottom:7px;width:5px;');that.wrapper.appendChild(that.bar);wrapper.appendChild(that.wrapper);}\nscrollbar.prototype={init:function(scroll,size){var that=this,doc=document,pi=Math.PI,ctx;if(that.dir=='horizontal'){if(that.maxSize!=that.wrapper.offsetWidth){that.maxSize=that.wrapper.offsetWidth;ctx=doc.getCSSCanvasContext(\"2d\",\"scrollbar\"+that.uid+that.dir,that.maxSize,5);ctx.fillStyle=\"rgb(0,0,0)\";ctx.beginPath();ctx.arc(2.5,2.5,2.5,pi/2,-pi/2,false);ctx.lineTo(that.maxSize-2.5,0);ctx.arc(that.maxSize-2.5,2.5,2.5,-pi/2,pi/2,false);ctx.closePath();ctx.fill();}}else{if(that.maxSize!=that.wrapper.offsetHeight){that.maxSize=that.wrapper.offsetHeight;ctx=doc.getCSSCanvasContext(\"2d\",\"scrollbar\"+that.uid+that.dir,5,that.maxSize);ctx.fillStyle=\"rgb(0,0,0)\";ctx.beginPath();ctx.arc(2.5,2.5,2.5,pi,0,false);ctx.lineTo(5,that.maxSize-2.5);ctx.arc(2.5,that.maxSize-2.5,2.5,0,pi,false);ctx.closePath();ctx.fill();}}\nthat.size=Math.max(Math.round(that.maxSize*that.maxSize/size),6);that.maxScroll=that.maxSize-that.size;that.toWrapperProp=that.maxScroll/(scroll-size);that.bar.style[that.dir=='horizontal'?'width':'height']=that.size+'px';},setPosition:function(pos){var that=this;if(that.wrapper.style.opacity!='1'){that.show();}\npos=Math.round(that.toWrapperProp*pos);if(pos<0){pos=that.shrink?pos+pos*3:0;if(that.size+pos<7){pos=-that.size+6;}}else if(pos>that.maxScroll){pos=that.shrink?pos+(pos-that.maxScroll)*3:that.maxScroll;if(that.size+that.maxScroll-pos<7){pos=that.size+that.maxScroll-6;}}\npos=that.dir=='horizontal'?translateOpen+pos+'px,0'+translateClose:translateOpen+'0,'+pos+'px'+translateClose;that.bar.style.webkitTransform=pos;},show:function(){if(has3d){this.wrapper.style.webkitTransitionDelay='0';}\nthis.wrapper.style.opacity='1';},hide:function(){},remove:function(){this.wrapper.parentNode.removeChild(this.wrapper);return null;}};var has3d=('WebKitCSSMatrix'in window&&'m11'in new WebKitCSSMatrix()),isIthing=(/iphone|ipad/gi).test(navigator.appVersion),isTouch=('ontouchstart'in window),START_EVENT=isTouch?'touchstart':'mousedown',MOVE_EVENT=isTouch?'touchmove':'mousemove',END_EVENT=isTouch?'touchend':'mouseup',translateOpen='translate'+(has3d?'3d(':'('),translateClose=has3d?',0)':')',uid=0;window.iScroll=iScroll;})();","js/ext/IPad/MobilePagePanel.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var util=jsloader.resolve(\"freequery.common.util\");var modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");var MobilePagePanel=function(parentObject,options){this.parent=parentObject;this.defaultRows=50;this.maxReturnRows=1000;var skip=this.parent.firstChild&&true;if(skip){this.parent=this.parent.parentNode;this.parent.parentNode.style.display=\"none\";this.parent.innerHTML=\"\";}\nthis.template=domutils.doGet(\"js/ext/IPad/MobilePagePanel.template\");this.parent.innerHTML=this.template;domutils.removeWhiteSpace(this.parent);this.firstpage=domutils.findElementByClassName(this.parent,\"_firstPage\");this.prevpage=domutils.findElementByClassName(this.parent,\"_prevPage\");this.nextpage=domutils.findElementByClassName(this.parent,\"_nextPage\");this.lastpage=domutils.findElementByClassName(this.parent,\"_lastPage\");this.curpage=domutils.findElementByClassName(this.parent,\"_curPage\");this.pagecount=domutils.findElementByClassName(this.parent,\"_pageCount\");this.rowcount=domutils.findElementByClassName(this.parent,\"_rowCount\");this.allRowCount=domutils.findElementByClassName(this.parent,\"_allRowCount\");this.prevpageBtn=domutils.findElementByClassName(this.parent,\"_prevPageBtn\");this.nextpageBtn=domutils.findElementByClassName(this.parent,\"_nextPageBtn\");this.addListener(this.prevpageBtn,\"click\",this.doPrevPage,this);this.addListener(this.nextpageBtn,\"click\",this.doNextPage,this);this.addListener(this.curpage,\"keydown\",this.doCurPageKeyPress,this);this.addListener(this.curpage,\"keyup\",this.doCurPageKeyUp,this);this.reset();this.onPage=new CustomEvent(\"page\",this);this.onNextPage=new CustomEvent(\"nextPage\",this);this.onRowCountChange=new CustomEvent(\"rowCountChange\",this);}\nlang.extend(MobilePagePanel,Module);MobilePagePanel.maxPageNumber=2147483647;MobilePagePanel.prototype.destroy=function(){this.firstpage=null;this.prevpage=null;this.nextpage=null;this.lastpage=null;this.curpage=null;this.pagecount=null;this.rowcount=null;this.onPage=null;this.parent=null;MobilePagePanel.superclass.destroy.call(this);}\nMobilePagePanel.prototype.generatePages=function(pages){if(MobilePagePanel.maxPageNumber!=pages){this.pagecount.innerText=pages;if(pages>1){this.parent.parentNode.style.display=\"\";}else{this.parent.parentNode.style.display=\"none\";}}\nelse\nthis.pagecount.innerText=\"未知\";this.setButtonStyle();}\nMobilePagePanel.prototype.getAllRowCount=function(){return parseInt(this.allRowCount.innerText,10);}\nMobilePagePanel.prototype.setAllRowCount=function(rowNum){if(MobilePagePanel.maxPageNumber!=rowNum)\nthis.allRowCount.innerHTML=rowNum;else\nthis.allRowCount.innerHTML=\"未知\";}\nMobilePagePanel.prototype.getCurPageNum=function(){if(this.curpage.value)\nreturn parseInt(this.curpage.value,10);else\nreturn-1;}\nMobilePagePanel.prototype.setCurPageNum=function(pageNum){this.curpage.value=pageNum;this.setButtonStyle();}\nMobilePagePanel.prototype.getPageRows=function(){return parseInt(this.rowcount.value,10);}\nMobilePagePanel.prototype.setPageRows=function(rows){this.rowcount.value=rows;}\nMobilePagePanel.prototype.getPages=function(){return parseInt(this.pagecount.innerText,10);}\nMobilePagePanel.prototype.doFirstPage=function(e){if(e&&e.target&&e.target.disabled||this.curpage.value==1)\nreturn;this.curpage.value=1;this.setButtonStyle();this.onPage.fire(this,this.getCurPageNum());}\nMobilePagePanel.prototype.doPrevPage=function(e){if(e&&e.target&&e.target.disabled||this.curpage.value==1)\nreturn;this.curpage.value--;this.setButtonStyle();this.onPage.fire(this,this.getCurPageNum());}\nMobilePagePanel.prototype.doNextPage=function(e){if(e&&e.target&&e.target.disabled||this.curpage.value==this.getPages())\nreturn;this.curpage.value++;this.setButtonStyle();this.onNextPage.fire();this.onPage.fire(this,this.getCurPageNum());}\nMobilePagePanel.prototype.doLastPage=function(e){var pages=this.getPages();if(e&&e.target&&e.target.disabled||!pages||this.curpage.value==pages)\nreturn;this.curpage.value=this.getPages();this.setButtonStyle();this.onPage.fire(this,this.getCurPageNum());}\nMobilePagePanel.prototype.doCurPageKeyPress=function(){var ev=eventutil.getEvent();var code=ev.charCode||ev.keyCode;var BACKSPACE=8;var DELETE=46;var LEFT=37;var RIGHT=39;var HOME=36;var END=35;var NUM_0=47;var NUM_9=58;var NUMLOCK_0=95;var NUMLOCK_9=106;if(NUM_0<code&&code<NUM_9||NUMLOCK_0<code&&code<NUMLOCK_9||BACKSPACE==code||LEFT==code||RIGHT==code||HOME==code||END==code||DELETE==code){}else{ev.preventDefault();}}\nMobilePagePanel.prototype.doCurPageKeyUp=function(){if(this.getPages()<=0){this.setCurPageNum(1);}\nvar ev=eventutil.getEvent();var code=ev.charCode||ev.keyCode;;if(code==13){if(this.getCurPageNum()<=0)\nthis.setCurPageNum(1)\nelse if(this.pagecount.innerText!=\"未知\"){var pageCount=this.getPages();if(this.getCurPageNum()>pageCount)\nthis.setCurPageNum(pageCount)}else if(this.getCurPageNum()>2147483647)\nthis.setCurPageNum(2147483647);this.setButtonStyle();this.onPage.fire(this,this.getCurPageNum(),true);}}\nMobilePagePanel.prototype.reset=function(){this.pagecount.innerText=\"\";this.rowcount.value=\"\";this.disabledButton();}\nMobilePagePanel.prototype.disabledButton=function(){this.curpage.value=\"1\";}\nMobilePagePanel.prototype.setButtonStyle=function(){if(this.getCurPageNum()==1){this.prevpageBtn.disabled=true;this.nextpageBtn.disabled=false;}else if(this.getPages()>this.getCurPageNum()){this.prevpageBtn.disabled=false;this.nextpageBtn.disabled=false;}else if(this.getPages()==this.getCurPageNum()){this.prevpageBtn.disabled=false;this.nextpageBtn.disabled=true;}else{this.prevpageBtn.disabled=true;this.nextpageBtn.disabled=true;}}\nMobilePagePanel.prototype.isUnknowPages=function(){return isNaN(parseInt(this.pagecount.innerText,10));}\nMobilePagePanel.prototype.setOnloadingDisplay=function(flag){};","js/ext/IPad/MobilePagePanel.template":"<div bofid=\"_navigation\" class=\"_navigation\" style=\"height:22px;\">\n\t\t<table style=\"width:300px;height:22px;\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n\t\t\t<tr>\n\t\t\t\t<td width=\"30%\"> <input type=\"button\" value=\"上一页\" style=\"width:100%;height:22px;-webkit-border-radius:.6em;border-radius:.6em;margin:0;border:1px solid #ccc;background:#eee;\" class=\"_prevPageBtn\"> <\/td>\n\t\t\t\t<td valign=\"middle\" style=\"font-size: 14px;\" width=\"40%\" align=\"center\">\n\t\t\t\t&nbsp;\n\t\t\t\t<span style=\"cursor: 'hand';display:none;\" class=\"_firstPage\">[首页]<\/span>\n\t\t\t\t<span style=\"cursor: 'hand';display:none;\" class=\"_prevPage\">[上页]<\/span>\n\t\t\t\t<span style=\"cursor: 'hand';display:none;\" class=\"_nextPage\">[下页]<\/span>\n\t\t\t\t<span style=\"cursor: 'hand';display:none;\" class=\"_lastPage\">[尾页]<\/span>\n\t\t\t\t&nbsp;\n\t\t\t\t<input type=\"text\" class=\"_curPage\" style=\"width: 34px; height: 20px; border: 0px; border-top: 1px solid #919B9C; border-bottom: 1px solid #919B9C; border-left: 1px solid #919B9C; border-right: 1px solid #919B9C;\">\n\t\t\t\t/\n\t\t\t\t<span class=\"_pageCount\">&nbsp;<\/span>\n\t\t\t<!-- 每页 -->\n\t\t\t\t<input type=\"text\" class=\"_rowCount\" style=\"display:none ;width: 34px; height: 20px; border: 0px; border-top: 1px solid #919B9C; border-bottom: 1px solid #919B9C; border-left: 1px solid #919B9C; border-right: 1px solid #919B9C;\">\n\t\t\t<!-- 行，共 -->\n\t\t\t\t<span class=\"_allRowCount\" style=\"display:none\">&nbsp;<\/span>\n\t\t\t<!-- 行 -->\n\t\t\t\t&nbsp;\n\t\t\t\t<\/td>\n\t\t\t\t<td width=\"30%\"> <input type=\"button\" value=\"下一页\" style=\"width:100%;height:22px;-webkit-border-radius:.6em;border-radius:.6em;margin:0;border:1px solid #ccc;background:#eee;\" class=\"_nextPageBtn\"> <\/td>\n\t\t\t<\/tr>\n\t\t<\/table>\n<\/div>","js/bof/baseajax/common/actions/MainFrameAction.js":"\n﻿﻿\nvar Configuration=imports(\"Configuration\");var MainView=imports(\"bof.baseajax.common.MainView\");var util=imports(\"freequery.common.util\").getInstance();var MainFrameAction=function(mainFrameSlot){this.mainFrameSlot=mainFrameSlot;this.mainFrameView=null;};lang.extend(MainFrameAction,\"bof.baseajax.common.CompositeAction\");MainFrameAction.prototype.open=function(){if(jsloader.getLang()===\"zhCN\"||(!jsloader.getLang()&&domutils.isZhCN()))\ndocument.title=Configuration.getInstance().applicationTitle_zhCN||Configuration.getInstance().applicationTitle;else\ndocument.title=Configuration.getInstance().applicationTitle_en||Configuration.getInstance().applicationTitle;this.mainFrameView=new MainView(this.mainFrameSlot);this.initActions();for(var i=0;i<this.actions.length;i++){this.mainFrameView.banner.addItem(this.actions[i]);}\nthis.defaultActionGroup.onChange.subscribe(function(){this.mainFrameView.banner.refresh();},this);this.loadUserFirstAction();this.validateInitialAction();this.initialAction.execute(\"open\");if(this.initialAction.className!=\"bof.decisionpanel.Portal.PortalAction\"||this.initialAction.functionCode=='DASHBOARD'){registry.put(\"LastSelectedActionNameBesidePortal\",this.initialAction.className);}\nthis.mainFrameView.banner.onChange.subscribe(function(){var alreadyLogout=false;try{if(window.opener){var parentRegistry=window.opener.document.jsloader.resolve(\"freequery.lang.registry\");window.opener.focus();var banner=parentRegistry.get(\"banner\");if(banner){banner.elemBtnLogout_click_handler();alreadyLogout=true;}}}catch(e){}\nif(alreadyLogout==false){var isCloseEnabled=this.isEnabled(\"close\");if(isCloseEnabled){this.logout();location.href=jsloader.baseHref;}}},this);return true;};MainFrameAction.prototype.close=function(){this.destroyActions();if(this.mainFrameView){this.mainFrameView.destroy();this.mainFrameView=null;;}\ndocument.title=\"\";return true;};MainFrameAction.prototype.readConfig=function(){var config=Configuration.getInstance().extensionPoints.MainFrame;var needAudit=util.getSystemConfig('RESOURCES_AUDIT')==='true';if(config&&config.actions&&!needAudit){var actions=config.actions,len=actions.length,i;for(i=0;i<len;i++){if(actions[i].className=='freequery.actions.ResAuditAction'){actions.splice(i,1);break;}}}\nreturn config;};MainFrameAction.prototype.getSlots=function(){return[this.mainFrameView.elemLeftCatalogTree,this.mainFrameView.elemRightToolbar,this.mainFrameView.elemRigthContent,this.mainFrameView.elemMainLeftTd,this.mainFrameView.elemMainHsTd,this.mainFrameView.elemTabPane,this.mainFrameView.elemRightLocationBar];};MainFrameAction.prototype.logout=function(){var logout=this.getLogouted();if(logout){var Logout=jsloader.resolve(logout.className);var logout=new Logout();logout.logout();}\nutil.remoteInvoke(\"UserService\",\"logout\",[]);if(util.getCookie(\"FQSavepassword\")!=\"true\"){document.cookie=\"FQPassword=\";}};MainFrameAction.prototype.loadUserFirstAction=function(){var actionNameFromCookie=util.getCookie(\"FQCurrentMainFrameActionName\");if(actionNameFromCookie&&actionNameFromCookie.indexOf(\"portal.jsp\")==-1){this.initialAction=this.getAction(actionNameFromCookie);document.cookie=\"FQCurrentMainFrameActionName=\";var selectedActionIdFromCookie=util.getCookie(\"FQSelectedTabActionId\");if(selectedActionIdFromCookie){this.initialAction.lastSavedActionId=selectedActionIdFromCookie;}\ndocument.cookie=\"FQSelectedTabActionId=\";return;}\nthis.userId=registry.get(\"currentUserId\");if(this.userId){var ret=util.remoteInvokeEx(\"ConfigClientService\",\"getUserConfigs\",[this.userId]);var actionName;if(ret&&ret.result){var userConfig=ret.result;for(var i in userConfig){if(userConfig[i]&&userConfig[i].key==\"FIREST_ACTION\"){actionName=userConfig[i].value;}}}\nif(!actionName){var ret=util.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfigs\",[]);if(ret&&ret.result){var systemConfig=ret.result;for(var i in systemConfig){if(systemConfig[i]&&systemConfig[i].key==\"FIREST_ACTION\"){actionName=systemConfig[i].value;}}}else{return;}\nif(actionName&&actionName==\"bof.decisionpanel.Portal.PortalAction\"){actionName=\"portal.jsp\";}}\nif(!actionName)\nif(this.initialAction.className==\"bof.decisionpanel.Portal.PortalAction\")\nactionName=\"portal.jsp\";else\nreturn;if(actionName.indexOf(\".jsp\")>0)\n{if(document.URL.indexOf(\"noredirect=1\")==-1)\n{if(domutils.isIE()){window.navigate(actionName);}else{window.location=actionName;}\nreturn;}\nelse\n{if(this.getAction(\"freequery.actions.BrowseAction\")&&this.getAction(\"freequery.actions.BrowseAction\").isValid(\"open\"))\nactionName=\"freequery.actions.BrowseAction\";else if(this.getAction(\"freequery.actions.CustomAction\")&&this.getAction(\"freequery.actions.CustomAction\").isValid(\"open\"))\nactionName=\"freequery.actions.CustomAction\";else\nactionName=\"freequery.actions.MyAccountAction\";}}\nthis.initialAction=this.getAction(actionName);}}\nMainFrameAction.prototype.getAction=function(actionName){for(var i=0;i<this.actions.length;i++)\n{if(this.actions[i].bofClassName==actionName)\n{return this.actions[i];}\nelse if((this.actions[i].bofClassName==\"bof.decisionpanel.Portal.PortalAction\"||this.actions[i].functionCode=='DASHBOARD')&&actionName==\"portal.jsp\")\nreturn this.actions[i];}}\nMainFrameAction.prototype.validateInitialAction=function(){if(this.initialAction&&this.initialAction.isValid(\"open\"))\nreturn;for(var i=0;i<this.actions.length;i++){if(\"freequery.actions.MyAccountAction\"==this.actions[i].className){this.initialAction=this.actions[i];break;}}}\nMainFrameAction.prototype.getLogouted=function(){var Configuration=imports(\"Configuration\").getInstance();if(Configuration.extensionPoints.logout)\nreturn Configuration.extensionPoints.logout;}","js/freequery/common/util.js":"\nvar modalWindow=null;var TransferData=null;var boflog=jsloader.resolve('freequery.control.logger');var printStackTrace=null;var util={debug:false,lastId:0,licenses:null,hasLogout:false,lazyCalls:new Array(),batchUpdate:false,beginLazyCalls:function(){this.batchUpdate=true;},commitLazyCalls:function(){this.batchUpdate=false;for(var i=0;i<this.lazyCalls.length;i++){var method=this.lazyCalls[i].theMethod;var thisObj=this.lazyCalls[i].thisObj;var argArray=this.lazyCalls[i].argArray;method.apply(thisObj,argArray);}\nthis.lazyCalls=new Array();},lazyCall:function(_thisObj,_method,_argArray){if(this.batchUpdate){this.lazyCalls.push({theMethod:_method,thisObj:_thisObj,argArray:_argArray});}\nelse\n_method.apply(_thisObj,_argArray);},setStyle:function(obj,prop,value){obj.style.cssText+=\";\"+prop+\":\"+value;},transferData:function(){var data=registry.get(\"TransferData\");if(data==null){if(!TransferData)\nTransferData=jsloader.resolve(\"freequery.common.TransferData\");data=new TransferData();registry.put(\"TransferData\",data);}\nreturn data;},getOwner:function(e){while((e!=null)&&(!e.owner)){e=e.parentNode;}\nif(e)\nreturn e.owner;},trim:function(src){if(src&&(typeof src=='string'))\nreturn src.replace(/^\\s+|\\s+$/g,\"\");else\nreturn src;},RTrim:function(src){if(src&&(typeof src=='string'))\nreturn src.replace(/(\\s*$)/g,\"\");else\nreturn src;},LTrim:function(src){if(src&&(typeof src=='string'))\nreturn src.replace(/(^\\s*)/g,\"\");else\nreturn src;},getMousePoint:function(e){var point={x:0,y:0};if(typeof window.pageYOffset!='undefined'){point.x=window.pageXOffset;point.y=window.pageYOffset;}\nelse if(typeof document.compatMode!='undefined'&&document.compatMode!='BackCompat'){point.x=document.documentElement.scrollLeft;point.y=document.documentElement.scrollTop;}\nelse if(typeof document.body!='undefined'){point.x=document.body.scrollLeft;point.y=document.body.scrollTop;}\npoint.x+=e.clientX;point.y+=e.clientY;return point;},getAbsolutePos:function(el,untilEl){var r={x:el.offsetLeft,y:el.offsetTop};while((el=el.offsetParent)&&(el!=untilEl))\n{r.y+=el.offsetTop;r.x+=el.offsetLeft;}\nreturn r;},getAbsolutePosScroll:function(el,untilEl){var e=el;var r={x:el.offsetLeft,y:el.offsetTop};while((el=el.offsetParent)&&(el!=untilEl))\n{r.y+=el.offsetTop;r.x+=el.offsetLeft;}\nwhile(e!=untilEl){r.y-=e.scrollTop;r.x-=e.scrollLeft;e=e.parentNode;}\nreturn r;},getAbsolutePosEx:function(element){if(!element||arguments.length!=1)\nreturn null;var elmt=element;var offsetTop=elmt.offsetTop;var offsetLeft=elmt.offsetLeft;while(elmt=elmt.offsetParent){if(elmt.style.position=='absolute'||elmt.style.position=='relative'||(elmt.style.overflow!='visible'&&elmt.style.overflow!='')){break;}\noffsetTop+=elmt.offsetTop;offsetLeft+=elmt.offsetLeft;}\nreturn{absoluteLeft:offsetLeft,absoluteTop:offsetTop,offsetWidth:element.offsetWidth,offsetHeight:element.offsetHeight,viewPort:elmt};},remoteInvokeEx2:function(className,methodName,paramArray,callback,that,noLookup){var result=this.remoteInvoke(className,methodName,paramArray,callback,that,noLookup);if(callback){return result;}\nif(result.succeeded){return result;}else{if(!modalWindow)\nmodalWindow=jsloader.resolve(\"freequery.common.modalWindow\");modalWindow.showServerError(result);result.result=null;return result;}},getRemoteModule:function(rmiModuleName){var cache=registry.get(\"classcache\");if(!cache){cache=new Array()\nregistry.put(\"classcache\",cache);}\nif(cache[rmiModuleName])\nreturn cache[rmiModuleName];var jscode=domutils.doGet(\"js/bof/service/\"+rmiModuleName+\"Stub.js.stub\",true);eval(jscode);var kclass=eval(rmiModuleName+\"Stub\");cache[rmiModuleName]=new kclass();return cache[rmiModuleName];},compositeInvoke:function(methodName,paramArray,async,callbackFunc,that){this.clearCompositeInvokeCache(methodName,paramArray);var ret=this.remoteInvoke(\"CompositeService\",methodName,paramArray,async?callback:null,[this,that]);function callback(ret){if(ret&&ret.succeeded){var tmpKey=methodName+\"_\"+lang.toJSONString(paramArray);if(!this[0].getInvokeCacheList()[tmpKey])\nthis[0].getInvokeCacheList()[tmpKey]=new Array();if(ret.result){for(var i=0;i<ret.result.length;i++)\nthis[0].getInvokeCacheList()[tmpKey].push(ret.result[i]);}}\nif(callbackFunc){if(this[1])\ncallbackFunc.call(this[1],ret);else\ncallbackFunc(ret)}}\nif(!async)\ncallback.call([this,that],ret);},clearCompositeInvokeCache:function(methodName,paramArray){var tmpKey;if(paramArray)\ntmpKey=methodName+\"_\"+lang.toJSONString(paramArray);var cachList=this.getInvokeCacheList();for(index in cachList){if(paramArray){if(index==tmpKey)\ncachList[index]=new Array();}\nelse{if(index.substr(0,methodName.length+1)==(methodName+\"_\"))\ncachList[index]=new Array();}}},clearInvokeCache:function(className,methodName,paramArray){var removedList=new Array();var list=this.getInvokeCacheList();for(index in list){var cache=list[index];for(resultIndex in cache){var invoker=cache[resultIndex];if(paramArray){if(invoker.serviceName==className&&invoker.methodName==methodName&&lang.toJSONString(invoker.params)==lang.toJSONString(paramArray))\ninvoker.serviceName=\"\";invoker.methodName=\"\";}\nelse{if(invoker.serviceName==className&&invoker.methodName==methodName)\ninvoker.serviceName=\"\";invoker.methodName=\"\";}}}},getInvokeCache:function(methodName,paramArray){var tmpKey=methodName+\"_\"+lang.toJSONString(paramArray);if(!this.getInvokeCacheList()[tmpKey])\nthis.getInvokeCacheList()[tmpKey]=new Array();return this.getInvokeCacheList()[tmpKey];},getInvokeCacheList:function(){var data=registry.get(\"InvokeCache\");if(data==null){data={};registry.put(\"InvokeCache\",data);}\nreturn data;},findResultFromInvokerCache:function(className,methodName,paramArray){var list=this.getInvokeCacheList();for(index in list){var cache=list[index];for(resultIndex in cache){var invoker=cache[resultIndex];if(invoker.serviceName==className&&invoker.methodName==methodName&&lang.toJSONString(invoker.params)==lang.toJSONString(paramArray))\nreturn{succeeded:true,retCode:0,result:invoker.result};}}},remoteInvokeMultipart:function(className,methodName,paramArray,callback,that,headers){headers=headers||{};if(!headers['Content-Type']){headers['Content-Type']='multipart/form-data;charset=UTF-8';}\nreturn this.remoteInvokeEx(className,methodName,paramArray,callback,that,headers);},remoteInvokeEx:function(className,methodName,paramArray,callback,that,headers){var result=this.remoteInvoke(className,methodName,paramArray,callback,that,null,headers);if(callback)\nreturn result;if(result.succeeded)\nreturn result;else{if(!modalWindow)\nmodalWindow=jsloader.resolve(\"freequery.common.modalWindow\");modalWindow.showServerError(result);return null;}},remoteInvoke:function(className,methodName,paramArray,callback,that,noLookup,headers){if(this.hasLogout){return{succeeded:true,result:null};}\nif(className==\"UserService\"&&methodName==\"logout\"){this.hasLogout=true;}\nvar utilThis=this;var paramsStr=lang.toJSONString([].slice.call(paramArray,0));var processResponseText=function(responseText){if(utilThis.encode){responseText=utilThis.coder.decode(responseText);}\nvar result={};var json=lang.parseJSON(responseText);try{if(boflog.getEnabled()){var maxLen=200;var s=className+' .'+methodName+' ('\n+paramsStr.replace(/\\[|\\]/g,'').replace(/,/g,', ')+')';if(utilThis.getCharLength(s)<maxLen){boflog.log(s.replace(/[ ]/g,' <wbr>'));}else{boflog.log('<textarea rows=\"4\" style=\"width:80%;\">'+s+'<\/textarea>');}\nif(utilThis.getCharLength(responseText)<maxLen){boflog.log(responseText.replace(/[ ]/g,' <wbr>'));}else{boflog.log('<textarea rows=\"4\" style=\"width:80%;\">'+responseText+'<\/textarea>');}}}catch(ex){if(window.console!=undefined){window.console.log(ex&&ex.message);}}\nresult.succeeded=json.retCode==0;result.retCode=json.retCode;result.result=json.result;result.detail=json.detail;result.stackTrace=json.stackTrace;return result;};var processError=function(xhr){var retCode=\"ERROR_INTERNET_ERROR_CODE\",result=\"\",detail=\"\",stackTrace=\"\";switch(xhr.status){case 12001:result=\"ERROR_INTERNET_OUT_OF_HANDLES\";detail=\"No more handles could be generated at this time.\";break;case 12002:result=\"ERROR_INTERNET_TIMEOUT\";detail=\"The request has timed out.\";stackTrace=\"WinInet HTTP 请求超时，与服务器间的连接已关闭。关于该错误的更详细信息，请参见：\\n\\n\"+\"http://askville.amazon.com/Error-status-code-%2312002-correct/AnswerViewer.do?requestId=51620322\";break;case 12004:result=\"ERROR_INTERNET_INTERNAL_ERROR\";detail=\"An internal error has occurred.\";break;case 12005:result=\"ERROR_INTERNET_INVALID_URL\";detail=\"The URL is invalid.\";break;case 12006:result=\"ERROR_INTERNET_UNRECOGNIZED_SCHEME\";detail=\"The URL scheme could not be recognized or is not supported.\";break;case 12007:result=\"ERROR_INTERNET_NAME_NOT_RESOLVED\";detail=\"The server name could not be resolved.\";break;default:result=xhr.status;detail=\"WinInet error occurred.\"+xhr.status;stackTrace=\"For more information, visit the following Microsoft Web site: \\n\"+\"http://msdn.microsoft.com/en-us/library/aa385483.aspx\";}\nreturn{succeeded:false,retCode:retCode,result:result,detail:detail,stackTrace:stackTrace};};var cachedResult=null;if(!noLookup){cachedResult=this.findResultFromInvokerCache(className,methodName,paramArray);}\nvar url=\"RMIServlet\";var data=null;if(this.encode){data=encodeURIComponent(className)+\"+\"+encodeURIComponent(methodName)+\"+\"+encodeURIComponent(paramsStr);data=this.coder.encode(data);}else{data=\"className=\"+encodeURIComponent(className)+\"&methodName=\"+encodeURIComponent(methodName)+\"&params=\"+encodeURIComponent(paramsStr);}\nif(callback){if(cachedResult){if(that)\ncallback.call(that,cachedResult);else\ncallback(cachedResult);return;}\ndomutils.doPost(url,data,function(responseText){var ret=processResponseText(responseText);if(that)\ncallback.call(that,ret);else\ncallback(ret);},function(xhr){var ret=processError(xhr);if(that)\ncallback.call(that,ret);else\ncallback(ret);},this,headers);}else{try{if(cachedResult){return cachedResult;}\nreturn processResponseText(domutils.doPost(url,data));}catch(ex){if(!printStackTrace){printStackTrace=jsloader.resolve('thirdparty.printStackTrace');}\nvar stackTrace=printStackTrace({e:ex}).join('\\n');return{succeeded:false,retCode:ex.message,result:ex.message,detail:'',stackTrace:stackTrace};}}\nreturn null;},remoteInvokeEx3:function(className,methodName,paramArray,callback,that){var result=this.remoteInvoke(className,methodName,paramArray,callback,that);if(callback){return result;}\nif(result.succeeded){return result;}else{if(!modalWindow)\nmodalWindow=jsloader.resolve(\"freequery.common.modalWindow\");modalWindow.showServerError(result);throw new Error(result.retCode);result.result=null;return result;}},getDataSourceId:function(dataNode){return this.getDataSourceIdByNodeId(dataNode.id);},getDataSourceIdByNodeId:function(id){var tmpDsID=registry.get(\"DSID_\"+id);if(tmpDsID)\nreturn tmpDsID;var ret=util.remoteInvoke(\"BusinessViewService\",\"getDataSourceIdByTreeId\",[id]);if(!ret.succeeded)\nreturn null;else if(ret.result){registry.put(\"DSID_\"+id,ret.result);return ret.result;}\nelse\nreturn null;},generateId:function(){this.lastId++;return\"_FQ\"+this.lastId;},getCookie:function(name)\n{var arg=name+\"=\";var alen=arg.length;var clen=document.cookie.length;var i=0;while(i<clen){var j=i+alen;if(document.cookie.substring(i,j)==arg)\n{if(name!=\"FQPassword\")\nreturn this.getCookieVal(j);else\nreturn unescape(this.getCookieVal(j));}\ni=document.cookie.indexOf(\" \",i)+1;if(i==0)\nbreak;}\nreturn\"\";},getCookieVal:function(offset)\n{var endstr=document.cookie.indexOf(\";\",offset);if(endstr==-1)\nendstr=document.cookie.length;return document.cookie.substring(offset,endstr);},_b64:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",encb64hlp:function(a,k,s,iFrom,iTo,fStr)\n{var d=0;for(var i=0;i+iFrom<=iTo;i++)\nd|=(fStr?s.charCodeAt(i+iFrom):s[i+iFrom])<<(16-8*i);for(var i=0;i<=iTo-iFrom+1;i++)\na[k++]=this._b64.charAt(d>>>(18-i*6)&0x3f);return k;},decb64hlp:function(a,ai,ca,iFrom,iTo)\n{var d=0;var l=iTo-iFrom;for(var i=0;i+iFrom<=iTo;i++)\nd|=ca[i+iFrom]<<(18-6*i);for(var i=0;i<l;i++)\na[ai+i]=(d>>>(16-i*8))&0xff;return ai+i;},encb64:function(s)\n{var fStr=typeof(s)==\"string\";var i;var l=s.length;var a=new Array();var k=0;for(i=2;i<l;i=i+3)\n{k=this.encb64hlp(a,k,s,i-2,i,fStr);if((i+1)%57==0)\na[k++]=\"\\r\\n\";}\nvar padd=l-i+2;if(padd>0)\n{k=this.encb64hlp(a,k,s,i-2,l-1,fStr);a[k]=(padd>1)?\"=\":\"==\";}\nreturn a.join(\"\");},decb64:function(s,fStr)\n{var i,j=0;var ip=s.indexOf('=');var l=ip>=0?ip:s.length;var ca=new Array();for(i=0;i<l;i++)\n{var c=s.charAt(i);if(\"\\n\\r\\t\".indexOf(c)>=0)\ncontinue;ca[j++]=this._b64.indexOf(c);}\nvar l=j;var a=new Array();var ai=0;for(i=3;i<l;i=i+4)\nai=this.decb64hlp(a,ai,ca,i-3,i);if(i-4<l)\nai=this.decb64hlp(a,ai,ca,i-3,l-1);if(!fStr)\nreturn a;var r='';try\n{r=String.fromCharCode.apply(r,a);}\ncatch(E)\n{for(i=0;i<a.length;i++)\nr+=String.fromCharCode(a[i]);}\nreturn r;},decb64Unicode:function(s,fStr)\n{var i,j=0;var ip=s.indexOf('=');var l=ip>=0?ip:s.length;var ca=new Array();for(i=0;i<l;i++)\n{var c=s.charAt(i);if(\"\\n\\r\\t\".indexOf(c)>=0)\ncontinue;ca[j++]=this._b64.indexOf(c);}\nvar l=j;var a=new Array();var ai=0;for(i=3;i<l;i=i+4)\nai=this.decb64hlp(a,ai,ca,i-3,i);if(i-4<l)\nai=this.decb64hlp(a,ai,ca,i-3,l-1);if(!fStr)\nreturn a;var r=new Array();var highFirst=(a[0]==254);for(var i=2;i<a.length;i+=2){if(highFirst)\nr.push(String.fromCharCode(a[i]*256+a[i+1]));else\nr.push(String.fromCharCode(a[i+1]*256+a[i]));}\nreturn r.join('');},parseCellPosition:function(cellPosition){var cellPos=cellPosition.toUpperCase();var charSeq=false;var numSeq=false;var firstNum=true;var row=0;var col=0;for(var i=0;i<cellPos.length;i++){var c=cellPos.charCodeAt(i);if(c>64&&c<91){charSeq=true;if(numSeq){alert(\"不合法的单元格位置,请参考Excel单元格位置定义\");return null;}\ncol=col*26+c-64;if(col>256){alert(\"列数过多,只支持256列\");return null;}}else if(c>=48&&c<58){if(!charSeq){alert(\"不合法的单元格位置,请参考Excel单元格位置定义\");return null;}\nnumSeq=true;if(c==48&&firstNum){alert(\"不合法的单元格位置,请参考Excel单元格位置定义\");return null;}\nrow=row*10+c-48;firstNum=false;}else{alert(\"不合法的单元格位置,请参考Excel单元格位置定义\");return null;}}\nif(!charSeq||!numSeq){alert(\"不合法的单元格位置,请参考Excel单元格位置定义\");return null;}\nvar cell={row:null,col:null};cell.row=row-1;cell.col=col-1;return cell;},toPosition:function(row,col){row=eval(row)+1;col=eval(col);if(col>256){alert(\"不合法的列号,最大列号为256\");return null;}\nvar ic=parseInt(col/26);var pos=\"\";if(ic>0){pos=String.fromCharCode(ic+64);}\nvar c=String.fromCharCode(col%26+65);pos=pos+c;pos=pos+row;return pos;},isUnsignedInt:function(num){if(num.match(/^[0-9]*[1-9][0-9]*$/)){return true;}else{return false;}},isUnsignedIntOrZero:function(num){if(num.match(/^[0-9]*[1-9][0-9]*$/)){return true;}else if(num==0){return true;}else{return false;}},checkStrLen:function(value){var str,Num=0;if(\"string\"==typeof value){for(var i=0;i<value.length;i++){str=value.substring(i,i+1);if(str<=\"~\")\nNum+=1;else\nNum+=2;}}\nreturn Num;},hasOpFunction:function(expectedFunctions){if(expectedFunctions instanceof Array){;}else{expectedFunctions=[expectedFunctions];}\nif(0==expectedFunctions.length)\nreturn false;var opFunctions=registry.get(\"opFunctions\");if(!opFunctions){var ret=util.remoteInvokeEx(\"UserService\",\"getAllFunctionsOfCurrentUser\",[]);if(ret&&ret.succeeded&&ret.result){registry.put(\"opFunctions\",ret.result);opFunctions=registry.get(\"opFunctions\");}}\nvar has=false;if(opFunctions){for(var i=0;i<expectedFunctions.length;i++){for(var j=0;j<opFunctions.length;j++){var foundOne=(opFunctions[j].id==expectedFunctions[i]);if(foundOne)\nreturn true;}}}\nreturn false;},checkDateTimeString:function(s,t){var strDate=/^((\\d{2}(([02468][048])|([13579][26]))\\-((((0?[13578])|(1[02]))\\-((0?[1-9])|([1-2][0-9])|(3[01])))|(((0?[469])|(11))\\-((0?[1-9])|([1-2][0-9])|(30)))|(0?2\\-((0?[1-9])|([1-2][0-9])))))|(\\d{2}(([02468][1235679])|([13579][01345789]))\\-((((0?[13578])|(1[02]))\\-((0?[1-9])|([1-2][0-9])|(3[01])))|(((0?[469])|(11))\\-((0?[1-9])|([1-2][0-9])|(30)))|(0?2\\-((0?[1-9])|(1[0-9])|(2[0-8]))))))$/;var strTime=/^(((([0-1]?[0-9])|(2[0-3]))\\:([0-5]?[0-9])((\\s)|(\\:([0-5]?[0-9])))?))$/;var strDT=/^((\\d{2}(([02468][048])|([13579][26]))\\-((((0?[13578])|(1[02]))\\-((0?[1-9])|([1-2][0-9])|(3[01])))|(((0?[469])|(11))\\-((0?[1-9])|([1-2][0-9])|(30)))|(0?2\\-((0?[1-9])|([1-2][0-9])))))|(\\d{2}(([02468][1235679])|([13579][01345789]))\\-((((0?[13578])|(1[02]))\\-((0?[1-9])|([1-2][0-9])|(3[01])))|(((0?[469])|(11))\\-((0?[1-9])|([1-2][0-9])|(30)))|(0?2\\-((0?[1-9])|(1[0-9])|(2[0-8]))))))(\\s((([0-1]?[0-9])|(2[0-3]))\\:([0-5]?[0-9])((\\s)|(\\:([0-5]?[0-9])))?))?$/;if(t==1)\nreturn strDate.test(s);else if(t==2)\nreturn strTime.test(s);else\nreturn strDT.test(s);},checkNumberString:function(n,t){var s=n+\"\";if(s.length<1)\nreturn false;else if(isNaN(s))\nreturn false;if(t==1)\nreturn/^-?\\d+$/.test(s);else if(t==2)\nreturn/^(-?\\d+)(\\.\\d+)?$/.test(s);else if(t==3){return/^\\d+$/.test(s)&&(parseInt(s)!=0);}else\nreturn true;},redefineAlert:function(){window.windowAlert=window.windowAlert||window.alert;window.alert=function(text,caption,flags){if(window.bof_offline_xhr){windowAlert(text);return;}\nvar returnValue=0;try{if(!modalWindow)\nmodalWindow=jsloader.resolve(\"freequery.common.modalWindow\");returnValue=modalWindow.open(text,caption,flags);}catch(ex){}\nif(!returnValue&&window.windowAlert!=undefined){try{returnValue=window.windowAlert(text);}catch(e){}}\nreturn returnValue;};},check_effect:function(obj){if(obj==\"\"){alert(\"宽或高输入不能为空\");return false;}\nif(!isNaN(obj))return true;if(isNaN(obj)){if(obj.indexOf(\"px\")!=-1&&obj.indexOf(\"px\")!=0){var sub_obj_before=obj.substring(0,obj.indexOf(\"px\"));var len=(\"\"+sub_obj_before).length+\"px\".length;if(!isNaN(sub_obj_before)&&obj.length==len)return true;}\nif(obj.indexOf(\"%\")!=-1&&obj.indexOf(\"%\")!=0){sub_obj_before=obj.substring(0,obj.indexOf(\"%\"));len=(\"\"+sub_obj_before).length+\"%\".length;if(!isNaN(sub_obj_before)&&obj.length==len&&eval(sub_obj_before)<=100)return true;}}\nreturn false;},getClean:function(o){var ret=o,b,k;if(o&&((b=Object.prototype.toString.call(o)==='[object Array]')||(Object.prototype.toString.call(o)==='[object Object]'&&'isPrototypeOf'in o))){ret=b?[]:{};for(k in o){if(o.hasOwnProperty(k)){ret[k]=util.getClean(o[k]);}}}\nreturn ret;},getCatalogNodeLocation:function(id){var result=new Array();var path=\"\";var name=\"\";var ret=this.remoteInvoke(\"CatalogService\",\"getCatalogElementPath\",[id]);if(ret.succeeded&&ret.result)\n{if(ret.result.length>1)\n{for(var i=0;i<ret.result.length-1;i++)\n{var alias=ret.result[i].alias;if(alias==null||alias==\"\")\nalias=ret.result[i].name;path=path+alias+\" > \";}\nname=ret.result[ret.result.length-1].alias||ret.result[ret.result.length-1].name}\nelse if(ret.result.length=1)\n{name=ret.result[0].alias||ret.result[0].name}}\nresult.push(path);result.push(name);return result;},getCharLength:function(s){return(\"string\"==typeof s)?s.replace(/[\\u4E00-\\u9FA5]|[\\uFE30-\\uFFA0]/g,'00').length:0;},getShortString:function(s,len,suffix){var ret=\"\";if(\"string\"==typeof s){len=len||40;var p=0,c=0;for(;p<s.length&&c<len;p++){c++;if(/[\\u4E00-\\u9FA5]|[\\uFE30-\\uFFA0]/.test(s.charAt(p)))\nc++;}\nif(p>0){ret=s.substring(0,p);if(suffix&&p<s.length)\nret+=suffix;}}\nreturn ret;},locateAction:function(actionIdPath){var isFinished=false;if(\"string\"!=typeof actionIdPath)\nreturn isFinished;var actionIds=actionIdPath.split(\"\\.\");if(actionIds.length<1)\nreturn isFinished;var app=imports(\"bof.baseajax.common.Application\").getInstance();var lastAction=app.mainFrameAction;if(!lastAction||!lastAction.isValid())\nreturn isFinished;var len=actionIds.length;for(var i=0;i<len;i++){var actions=lastAction.actions;if(!actions||!actions.length)\nbreak;var action=null;var regex=new RegExp(\"\\\\.\"+actionIds[i]+\"\\$\");for(var j=0;j<actions.length;j++){var act=actions[j];if(regex.test(act.className)){action=act;break;}}\nif(!action||!action.isValid())\nbreak;if(action.isOpenEnabled())\naction.execute(\"open\");lastAction=action;isFinished=(i==len-1);}\nreturn isFinished;},compareVersion:function(v1,v2){var a1=v1.split(\".\");var a2=v2.split(\".\");var l=a1.length>a2.length?a2.length:a1.length;for(var i=0;i<l;i++){if(a1[i]-0>a2[i]-0)\nreturn 1;else if(a1[i]-0<a2[i]-0)\nreturn-1;}\nreturn a1.length-a2.length;},getInnerText:function(html){var isElement=(html&&html.nodeType);var span=isElement?html:document.createElement(\"SPAN\");if(!isElement)\nspan.innerHTML=html;if(domutils.isFirefox()){function innerText(item){var text=new Array();var child=item.firstChild;while(child){if(child.nodeType==1){if(child.tagName==\"BR\")\ntext.push('\\n');else\ntext.push(innerText(child));}else if(child.nodeType==3)\ntext.push(child.nodeValue);child=child.nextSibling;}\nreturn text.join('');}\nreturn innerText(span);}\nreturn typeof span.textContent==\"string\"?span.textContent:span.innerText;},isArray:function(o){return Object.prototype.toString.call(o)===\"[object Array]\";},rebuildArray:function(o){var arr;try{arr=[].slice.call(o,0);}catch(err){arr=[];for(var i=0,length=o.length;i<length;i++){arr.push(o[i]);}}\nreturn arr;},isValidFileName:function(name){return this.trim(name)?!(/[\\/\\\\\\:\\*\\?\\\"\\<\\>\\|]/g.test(name)):false;},isImage:function(url){var reg=/\\.(jpg|bmp|gif|png)$/;return reg.test(url);},setSessionAttribute:function(key,value){this.remoteInvoke(\"CommonService\",\"setSessionAttribute\",[key,value]);},getSessionAttribute:function(key){var ret=this.remoteInvokeEx(\"CommonService\",\"getSessionAttribute\",[key]);if(ret){return ret.result;}},arrayContains:function(array,item){var length=array.length;if(length!=0)\n{for(var index=0;index<length;index++)\n{if(array[index]==item)\n{return index;}}}\nreturn-1;},getFirstValue:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==null&&arguments[i]!==undefined&&arguments[i]!==\"\")\n{return arguments[i];}}\nreturn\"\";},checkNameValid:function(str,text){return this.checkValid(str,text||\"名称\");},checkValid:function(nameStr,text){if(!nameStr||\"\"){alert(text+\"输入不允许为空!\");return false;}\nvar x=eval(\"/[\\\\\\\\/'\\\"*?%.><=:;()\\\\[\\\\]|]/\")\nvar ret=nameStr.match(x);if(ret){if(!modalWindow)\nmodalWindow=jsloader.resolve(\"freequery.common.modalWindow\");if(ret==\" \"){modalWindow.open(text+\"输入中不允许包含非法字符' []()\\*?%<>=:;|/\\\" '，该输入中包含非法字符：空格 。请更换为合法字符！\")}else{modalWindow.open(text+\"输入中不允许包含非法字符 ' []()\\*?%<>=:;|/\\\" '，该输入中包含非法字符：\"+ret+\" 。请更换为合法字符！\")}\nreturn false;}\nreturn true;},checkValid2:function(nameStr,text){if(!nameStr||\"\"){alert(text+\"输入不允许为空!\");return false;}\nvar x=eval(\"/[\\\\\\\\/\\\"*?%=:;\\\\[\\\\]|]/\")\nvar ret=nameStr.match(x);if(ret){if(!modalWindow)\nmodalWindow=jsloader.resolve(\"freequery.common.modalWindow\");if(ret==\" \"){modalWindow.open(text+\"输入中不允许包含非法字符“[]\\*?%=:;|/\\\"\\”，该输入中包含非法字符：空格  。请更换为合法字符！\")}else{modalWindow.open(text+\"输入中不允许包含非法字符“[]\\*?%=:;|/\\\"”，该输入中包含非法字符：\"+ret+\" 。请更换为合法字符！\")}\nreturn false;}\nreturn true;},checkValidEx:function(nameStr,text){var x=eval(\"/[\\\\\\\\/'\\\"*?%.=:;|]/\");var ret=nameStr.match(x);if(ret){if(!modalWindow)\nmodalWindow=jsloader.resolve(\"freequery.common.modalWindow\");modalWindow.open(text+\"输入中不允许包含非法字符 ' \\\\*?%=:;|/\\\" '，该输入中包含非法字符：\"+ret+\" 。请更换为合法字符！\")\nreturn false;}\nreturn true;},checkValidWithMsg:function(nameStr,text){if(!nameStr){return text+\"输入不允许为空!\";}\nvar x=eval(\"/[\\\\\\\\/'\\\"*?%.><=:;()\\\\[\\\\]|]/\");var ret=nameStr.match(x);if(ret){if(ret==\" \"){return text+\"输入中不允许包含非法字符 ' \\\\*?%=:;|/\\\" '，该输入中包含非法字符：空格  。请更换为合法字符！\";}else{return text+\"输入中不允许包含非法字符 ' \\\\*?%=:;|/\\\" '，该输入中包含非法字符：\"+ret+\" 。请更换为合法字符！\"}}\nreturn\"\";},dateFormat:function(date,fmt){var o={\"M+\":date.getMonth()+1,\"d+\":date.getDate(),\"h+\":date.getHours(),\"m+\":date.getMinutes(),\"s+\":date.getSeconds(),\"q+\":Math.floor((date.getMonth()+3)/3),\"S\":date.getMilliseconds()};if(/(y+)/.test(fmt))\nfmt=fmt.replace(RegExp.$1,(date.getFullYear()+\"\").substr(4-RegExp.$1.length));for(var k in o){if(new RegExp(\"(\"+k+\")\").test(fmt))\nfmt=fmt.replace(RegExp.$1,(RegExp.$1.length==1)?(o[k]):((\"00\"+o[k]).substr((\"\"+o[k]).length)));}\nreturn fmt;},checkFunctionValid:function(op){var opFunctions=registry.get(\"opFunctions\");if(!opFunctions){var w=window;try{do{if(w.registry)\nopFunctions=w.registry.get(\"opFunctions\");if(opFunctions||w.parent==w)\nbreak;w=w.parent;}while(true);}catch(e){}}\nif(!opFunctions){var ret=util.remoteInvoke(\"UserService\",\"getAllFunctionsOfCurrentUser\",[]);if(ret&&ret.succeeded&&ret.result){registry.put(\"opFunctions\",ret.result);opFunctions=registry.get(\"opFunctions\");window.registry=registry;}}\nif(opFunctions){for(var i=0;i<opFunctions.length;i++){if(opFunctions[i].id==op)\nreturn true;}}\nreturn false;},getSystemConfig:function(key){var systemConfigs=registry.get(\"systemConfigs\");if(!systemConfigs){var ret=this.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfigs\",[]);if(ret){systemConfigs=ret.result;registry.put(\"systemConfigs\",systemConfigs);}}\nif(systemConfigs){for(var i in systemConfigs){if(systemConfigs[i]&&systemConfigs[i].key==key){return systemConfigs[i].value;}}}\nreturn null;},toggleMaximize:function(){var ids=[\"mainTopTr\",\"spacerTr\",\"mainVsTr\",\"mainLeftTd\",\"mainHsTd\"];var isMax=document.body.maximizing=!document.body.maximizing;for(var i=0,len=ids.length;i<len;i++){var el=document.getElementById(ids[i]);if(el){if(isMax){el.oldDisplay=el.style.display;el.style.display=\"none\";}else{el.style.display=el.oldDisplay;}}}\nreturn document.body.maximizing;},isOLAPParam:function(param){if(!param)\nreturn false;if(param.id.indexOf(\"APPARAM.\")==0||param.id.indexOf(\"_SMARTBI_\")==0)\nreturn true;},getOffset:function(obj){var p=new Object();p.left=0;p.top=0;while(obj){p.left+=obj.offsetLeft-obj.scrollLeft;p.top+=obj.offsetTop-obj.scrollTop;obj=obj.offsetParent;}\nreturn p;},each:function(o,cb,s){var n,l;if(!o){return 0;}\ns=s||o;if(o.length!==undefined){for(n=0,l=o.length;n<l;n++){if(cb.call(s,o[n],n,o)===false)\nreturn 0;}}else{for(n in o){if(o.hasOwnProperty(n)){if(cb.call(s,o[n],n,o)===false)\nreturn 0;}}}\nreturn 1;},hasLicense:function(licenseName){if(!this.licenses){var ret=util.remoteInvokeEx(\"UserService\",\"getMyAccountInfo\",[]);if(ret&&ret.succeeded&&ret.result){registry.put(\"opFunctions\",ret.result.allFunctionsOfCurrentUser);ret=ret.result.licenses;if(ret.length<1){throw new Error(\"License error!\");}else{util.licenses=util.licenses||[];for(var i=0;i<ret.length;i++){this.licenses[ret[i]]=true;}\nregistry.put(\"licenses\",util.licenses);}}}\nreturn this.licenses[licenseName];},changeTdToFixSize:function(node,wDelta,hDelta){var p=node;var width=p.clientWidth+(wDelta==undefined?0:wDelta);var height=p.clientHeight+(hDelta==undefined?0:hDelta);p.style.display=\"inline-block\";p.style.overflow=\"auto\";p.style.width=width+\"px\";p.style.height=height+\"px\";},rgbaToHexColor:function(rgbaColor){var rgba=null;var result=/rgba\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]?(?:\\.[0-9]+)?)\\s*\\)/.exec(rgbaColor);if(result){rgba=[parseInt(result[1]).toString(16),parseInt(result[2]).toString(16),parseInt(result[3]).toString(16),parseFloat(result[4],10)];}\nresult=/rgb\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*\\)/.exec(rgbaColor);if(result){rgba=[parseInt(result[1]).toString(16),parseInt(result[2]).toString(16),parseInt(result[3]).toString(16)];}\nif(rgba!=null){if(rgba[0].length==1)\nrgba[0]=\"0\"+rgba[0];if(rgba[1].length==1)\nrgba[1]=\"0\"+rgba[1];if(rgba[2].length==1)\nrgba[2]=\"0\"+rgba[2];if(rgba.length==3)\nreturn{color:\"#\"+rgba.join('')};if(rgba.length==4)\nreturn{alpha:rgba.splice(3,1)[0]*100,color:\"#\"+rgba.join('')};}\nreturn{color:null,alpha:null};},getRgbColor:function(hexColor,alpha){var result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(hexColor);var rgb=null;if(result){rgb=[parseInt(result[1],16),parseInt(result[2],16),parseInt(result[3],16)];if(typeof alpha!=\"undefined\"&&alpha!=null){alpha=parseInt(alpha);if(alpha>=0&&alpha<=100){rgb.push(alpha/100);}}\nif(rgb.length==3)\nreturn\"rgb(\"+rgb.join(',')+\")\";if(rgb.length==4)\nreturn\"rgba(\"+rgb.join(',')+\")\";}\nreturn null;},getInverseColor:function(hexColor){var newHexColor=\"#ffffff\";var result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(hexColor);if(result){var r=255-parseInt(result[1],16);var g=255-parseInt(result[2],16);var b=255-parseInt(result[3],16);var rgb=[r,g,b];var hexColorObj=this.rgbaToHexColor(\"rgb(\"+rgb.join(',')+\")\");if(hexColorObj&&hexColorObj.color)\nnewHexColor=hexColorObj.color;}\nreturn newHexColor;},encode:function(){var w=window,pw=w.parent!=w?w.parent:(w.opener!=w?w.opener:null),args;try{if(pw&&pw.jsloader){return pw.jsloader.resolve(\"freequery.common.util\").encode;}else if((args=w.dialogArguments)&&typeof args!='string'){var loader=null,len,arg;if((len=args.length)&&(arg=args[len-1])&&arg!=w){loader=arg.jsloader;}else if(args.alertDialog){loader=args.alertDialog.getJSLoader();}\nif(loader)\nreturn loader.resolve(\"freequery.common.util\").encode;}}catch(e){}\nif(window.bof_offline_xhr)\nreturn false;return true;}(),coder:function(){var array=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,80,0,0,0,47,0,110,65,69,115,43,0,102,113,0,55,49,117,78,75,74,77,57,39,109,0,0,0,0,0,0,0,79,86,116,84,97,120,72,114,99,118,108,56,70,51,111,76,89,106,87,42,122,90,33,66,41,85,0,0,0,0,121,0,40,126,105,104,112,95,45,73,82,46,71,83,100,54,119,53,48,52,68,107,81,103,98,67,50,88,0,0,0,101,0];var encodeArray={};var decodeArray={};for(var i=0;i<array.length;i++){var c=array[i];if(c){var ic=String.fromCharCode(i);decodeArray[ic]=encodeArray[ic]=String.fromCharCode(c);}}\ndecodeArray['/']='/';decodeArray['%']='%';function encode(data){var dataArray=data.split('');for(var i=0,len=dataArray.length;i<len;i++){var e=encodeArray[dataArray[i]];dataArray[i]=e;}\nreturn\"encode=\"+dataArray.join('');};function decode(responseText){if(responseText.length>20000)\nreturn responseText;var responseArray=responseText.split('');for(var i=0,len=responseArray.length;i<len;i++){var d=decodeArray[responseArray[i]];if(d)\nresponseArray[i]=d;}\nreturn responseArray.join('');};return{encode:encode,decode:decode};}(),jsonp:(function(win,doc,undef){var counter=0;var head=doc.head||doc.getElementsByTagName('head')[0]||doc.documentElement;function load(url,timer,errorFn){var script=doc.createElement('script'),done=false;script.async=true;script.src=url;if(typeof errorFn==='function'){script.onerror=function(ex){if(timer){clearTimeout(timer);timer=undef;}\nerrorFn({url:url,event:ex});};}\nscript.onload=script.onreadystatechange=function(){var code=this.readyState;if(!done&&(!code||code==='loaded'||code==='complete')){done=true;if(timer){clearTimeout(timer);timer=undef;}\nscript.onload=script.onreadystatechange=null;if(script&&script.parentNode){script.parentNode.removeChild(script);}\nscript=undef;}};head.insertBefore(script,head.firstChild);}\nreturn function(url,params,callback,opts){params=params||{};opts=opts||{};var callbackName=opts.callbackName||'callback';var timeout=opts.timeout!=null?opts.timeout:60000;var context=opts.context||null;var uniqueName=callbackName+'_jp_'+(++counter);var queryStr=(url||'').indexOf('?')===-1?'?':'&';var timer,cleanup=function(){if(timer){clearTimeout(timer);}\nwin[uniqueName]=timer=undef;};for(var key in params){if(params.hasOwnProperty(key)){queryStr+=encodeURIComponent(key)+'='+encodeURIComponent(params[key])+'&';}}\nqueryStr+=callbackName+'='+uniqueName;win[uniqueName]=function(data){cleanup();callback&&callback.call(context,data);};if(timeout){timer=setTimeout(function(){win[uniqueName](new Error('Timeout'));},timeout);}\nload(url+queryStr,timer,opts.errorFn);return uniqueName;};})(window,document)};","js/freequery/thirdparty/connection.js":"\nconnection={_msxml_progid:['MSXML2.XMLHTTP.3.0','MSXML2.XMLHTTP','Microsoft.XMLHTTP'],_http_header:{},_has_http_headers:false,_use_default_post_header:true,_default_post_header:'application/x-www-form-urlencoded',_isFormSubmit:false,_isFileUpload:false,_formNode:null,_sFormData:null,_poll:{},_timeOut:{},_polling_interval:50,_transaction_id:0,setProgId:function(id)\n{this._msxml_progid.unshift(id);},setDefaultPostHeader:function(b)\n{this._use_default_post_header=b;},setPollingInterval:function(i)\n{if(typeof i=='number'&&isFinite(i)){this._polling_interval=i;}},createXhrObject:function(transactionId)\n{var obj,http;try\n{http=new XMLHttpRequest();obj={conn:http,tId:transactionId};}\ncatch(e)\n{for(var i=0;i<this._msxml_progid.length;++i){try\n{http=new ActiveXObject(this._msxml_progid[i]);obj={conn:http,tId:transactionId};break;}\ncatch(e){}}}\nfinally\n{return obj;}},getConnectionObject:function()\n{var o;var tId=this._transaction_id;try\n{o=this.createXhrObject(tId);if(o){this._transaction_id++;}}\ncatch(e){}\nfinally\n{return o;}},asyncRequest:function(method,uri,callback,postData)\n{var o=this.getConnectionObject();if(!o){return null;}\nelse{if(this._isFormSubmit){if(this._isFileUpload){this.uploadFile(o.tId,callback,uri);this.releaseObject(o);return;}\nif(method=='GET'){uri+=\"?\"+this._sFormData;}\nelse if(method=='POST'){postData=(postData?this._sFormData+\"&\"+postData:this._sFormData);}\nthis._sFormData='';}\no.conn.open(method,uri,true);if(this._isFormSubmit||(postData&&this._use_default_post_header)){this.initHeader('Content-Type',this._default_post_header);if(this._isFormSubmit){this._isFormSubmit=false;}}\nif(this._has_http_headers){this.setHeader(o);}\nthis.handleReadyState(o,callback);o.conn.send(postData?postData:null);return o;}},handleReadyState:function(o,callback)\n{var oConn=this;if(callback&&callback.timeout){this._timeOut[o.tId]=window.setTimeout(function(){oConn.abort(o,callback,true);},callback.timeout);}\nthis._poll[o.tId]=window.setInterval(function(){if(o.conn&&o.conn.readyState==4){window.clearInterval(oConn._poll[o.tId]);delete oConn._poll[o.tId];if(callback&&callback.timeout){delete oConn._timeOut[o.tId];}\noConn.handleTransactionResponse(o,callback);}},this._polling_interval);},handleTransactionResponse:function(o,callback,isAbort)\n{if(!callback){this.releaseObject(o);return;}\nvar httpStatus,responseObject;try\n{if(o.conn.status!==undefined&&o.conn.status!=0){httpStatus=o.conn.status;}\nelse{httpStatus=13030;}}\ncatch(e){httpStatus=13030;}\nif(httpStatus>=200&&httpStatus<300){try\n{responseObject=this.createResponseObject(o,callback.argument);if(callback.success){if(!callback.scope){callback.success(responseObject);}\nelse{callback.success.apply(callback.scope,[responseObject]);}}}\ncatch(e){}}\nelse{try\n{switch(httpStatus){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:responseObject=this.createExceptionObject(o.tId,callback.argument,(isAbort?isAbort:false));if(callback.failure){if(!callback.scope){callback.failure(responseObject);}\nelse{callback.failure.apply(callback.scope,[responseObject]);}}\nbreak;default:responseObject=this.createResponseObject(o,callback.argument);if(callback.failure){if(!callback.scope){callback.failure(responseObject);}\nelse{callback.failure.apply(callback.scope,[responseObject]);}}}}\ncatch(e){}}\nthis.releaseObject(o);responseObject=null;},createResponseObject:function(o,callbackArg)\n{var obj={};var headerObj={};try\n{var headerStr=o.conn.getAllResponseHeaders();var header=headerStr.split('\\n');for(var i=0;i<header.length;i++){var delimitPos=header[i].indexOf(':');if(delimitPos!=-1){headerObj[header[i].substring(0,delimitPos)]=header[i].substring(delimitPos+2);}}}\ncatch(e){}\nobj.tId=o.tId;obj.status=o.conn.status;obj.statusText=o.conn.statusText;obj.getResponseHeader=headerObj;obj.getAllResponseHeaders=headerStr;obj.responseText=o.conn.responseText;obj.responseXML=o.conn.responseXML;if(typeof callbackArg!==undefined){obj.argument=callbackArg;}\nreturn obj;},createExceptionObject:function(tId,callbackArg,isAbort)\n{var COMM_CODE=0;var COMM_ERROR='communication failure';var ABORT_CODE=-1;var ABORT_ERROR='transaction aborted';var obj={};obj.tId=tId;if(isAbort){obj.status=ABORT_CODE;obj.statusText=ABORT_ERROR;}\nelse{obj.status=COMM_CODE;obj.statusText=COMM_ERROR;}\nif(callbackArg){obj.argument=callbackArg;}\nreturn obj;},initHeader:function(label,value)\n{if(this._http_header[label]===undefined){this._http_header[label]=value;}\nelse{this._http_header[label]=value+\",\"+this._http_header[label];}\nthis._has_http_headers=true;},setHeader:function(o)\n{for(var prop in this._http_header){if(this._http_header.hasOwnProperty(prop)){o.conn.setRequestHeader(prop,this._http_header[prop]);}}\ndelete this._http_header;this._http_header={};this._has_http_headers=false;},setForm:function(formId,isUpload,secureUri)\n{this._sFormData='';if(typeof formId=='string'){var oForm=(document.getElementById(formId)||document.forms[formId]);}\nelse if(typeof formId=='object'){var oForm=formId;}\nelse{return;}\nif(isUpload){this.createFrame(secureUri?secureUri:null);this._isFormSubmit=true;this._isFileUpload=true;this._formNode=oForm;return;}\nvar oElement,oName,oValue,oDisabled;var hasSubmit=false;for(var i=0;i<oForm.elements.length;i++){oElement=oForm.elements[i];oDisabled=oForm.elements[i].disabled;oName=oForm.elements[i].name;oValue=oForm.elements[i].value;if(!oDisabled&&oName)\n{switch(oElement.type)\n{case'select-one':case'select-multiple':for(var j=0;j<oElement.options.length;j++){if(oElement.options[j].selected){if(window.ActiveXObject){this._sFormData+=encodeURIComponent(oName)+'='+encodeURIComponent(oElement.options[j].attributes['value'].specified?oElement.options[j].value:oElement.options[j].text)+'&';}\nelse{this._sFormData+=encodeURIComponent(oName)+'='+encodeURIComponent(oElement.options[j].hasAttribute('value')?oElement.options[j].value:oElement.options[j].text)+'&';}}}\nbreak;case'radio':case'checkbox':if(oElement.checked){this._sFormData+=encodeURIComponent(oName)+'='+encodeURIComponent(oValue)+'&';}\nbreak;case'file':case undefined:case'reset':case'button':break;case'submit':if(hasSubmit==false){this._sFormData+=encodeURIComponent(oName)+'='+encodeURIComponent(oValue)+'&';hasSubmit=true;}\nbreak;default:this._sFormData+=encodeURIComponent(oName)+'='+encodeURIComponent(oValue)+'&';break;}}}\nthis._isFormSubmit=true;this._sFormData=this._sFormData.substr(0,this._sFormData.length-1);},createFrame:function(secureUri){var frameId='yuiIO'+this._transaction_id;if(window.ActiveXObject){var io=document.createElement('<IFRAME id=\"'+frameId+'\" name=\"'+frameId+'\">');if(typeof secureUri=='boolean'){io.src='javascript:false';}\nelse{io.src=secureUri;}}\nelse{var io=document.createElement('IFRAME');io.id=frameId;io.name=frameId;}\nio.style.position='absolute';io.style.top='-1000px';io.style.left='-1000px';document.body.appendChild(io);},uploadFile:function(id,callback,uri){var frameId='yuiIO'+id;var io=document.getElementById(frameId);this._formNode.action=uri;this._formNode.enctype='multipart/form-data';this._formNode.method='POST';this._formNode.target=frameId;this._formNode.submit();this._formNode=null;this._isFileUpload=false;this._isFormSubmit=false;var uploadCallback=function()\n{var obj={};obj.tId=id;obj.responseText=io.contentWindow.document.body?io.contentWindow.document.body.innerHTML:null;obj.responseXML=io.contentWindow.document.XMLDocument?io.contentWindow.document.XMLDocument:io.contentWindow.document;obj.argument=callback.argument;if(callback.upload){if(!callback.scope){callback.upload(obj);}\nelse{callback.upload.apply(callback.scope,[obj]);}}\nif(YAHOO.util.Event){YAHOO.util.Event.removeListener(io,\"load\",uploadCallback);}\nelse if(window.ActiveXObject){io.detachEvent('onload',uploadCallback);}\nelse{io.removeEventListener('load',uploadCallback,false);}\nsetTimeout(function(){domutils.destroyNode(io);},100);};if(YAHOO.util.Event){YAHOO.util.Event.addListener(io,\"load\",uploadCallback);}\nelse if(window.ActiveXObject){io.attachEvent('onload',uploadCallback);}\nelse{io.addEventListener('load',uploadCallback,false);}},abort:function(o,callback,isTimeout)\n{if(this.isCallInProgress(o)){o.conn.abort();window.clearInterval(this._poll[o.tId]);delete this._poll[o.tId];if(isTimeout){delete this._timeOut[o.tId];}\nthis.handleTransactionResponse(o,callback,true);return true;}\nelse{return false;}},isCallInProgress:function(o)\n{if(o.conn){return o.conn.readyState!=4&&o.conn.readyState!=0;}\nelse{return false;}},releaseObject:function(o)\n{o.conn=null;o=null;}};","js/freequery/common/modalWindow.js":"\nvar domutils=jsloader.resolve(\"freequery.lang.domutils\");var modalWindow={ieVersion:window.ActiveXObject?(navigator.userAgent.toLowerCase().match(/msie ([\\d.]+)/)[1]-0):0,showServerError:function(result,win){if(window.bof_offline_xhr){if(window.bof_offline_xhr.debug){alert(result.detail);}\nreturn;}\nif(typeof result==\"undefined\"){this.open(\"未定义的错误\",this.getCaption(),this.MB_OK|this.MB_ICONERROR,null,win);return;}\nvar obj=result;if(typeof obj==\"string\"){this.open(obj,this.getCaption(),this.MB_OK|this.MB_ICONEXCLAMATION,null,win);return;}\nif(obj){var text=obj.result?obj.result:\"未知的错误\";if(obj.detail)\ntext+=\": \"+obj.detail;switch(obj.retCode){case\"CLIENT_USER_NOT_LOGIN\":case\"SESSION_INVALID\":{try{if(window.opener&&!window.opener.isDpWindow){alert(text);return;}}catch(e){}\nif(!window.__reLogining)\nthis.showMsg(text+\"\\n\"+\"系统将重新登录！\");window.__reLogining=true;try{window.location.href=window.location.href;}catch(e){}\nbreak;}\ncase\"ERROR_INTERNET_ERROR_CODE\":this.open(text,this.getCaption(),this.MB_OK|this.MB_ICONERROR,obj.stackTrace,win);break;case\"USER_CANNOT_DELETE_BUILTIN_USER\":case\"USER_CANNOT_CHANGED_BUILTIN_USER\":case\"USER_CANNOT_DELETE_BUILTIN_ROLE\":case\"USER_CANNOT_DELETE_BUILTIN_GROUP\":case\"USER_CANNOT_DELETE_BUILTIN_ROLE\":case\"USER_CANNOT_DELETE_SELF\":this.open(text,this.getCaption(),this.MB_OK|this.MB_ICONEXCLAMATION,obj.stackTrace,win);break;default:if(typeof obj.retCode!=\"undefined\")\nthis.open(text,this.getCaption(),this.MB_OK|this.MB_ICONEXCLAMATION,obj.stackTrace,win);else{if(!window.__reLogining){this.showMsg(\"未知的异常，可能服务器已经停止\");window.__reLogining=true;}}};}else{this.open(\"未知的错误\",this.getCaption(),this.MB_OK|this.MB_ICONERROR,null,win);}},showMsg:function(msg){if(window.windowAlert)\nwindow.windowAlert(msg);else\nalert(msg);},getCaption:function(){var caption=registry.get(\"defaultDialogTitle\");if(!caption){caption=\"提示信息\";registry.put(\"defaultDialogTitle\",caption);}\nreturn caption;},getJSLoader:function(){return jsloader;},open:function(text,caption,flags,extraInfo,win){var args={text:text,caption:caption||this.getCaption(),flags:flags||(this.MB_OK|this.MB_ICONINFORMATION|this.MB_DEFBUTTON1),alertDialog:this};if(!(args.flags&this.MB_DEFBUTTON1&this.MB_DEFBUTTON2&this.MB_DEFBUTTON3&this.MB_DEFBUTTON4))\nargs.flags=args.flags|this.MB_DEFBUTTON1;if(extraInfo){args.stackTrace='*** 若需要导出错误日志请联系管理员 ***\\r\\n\\r\\n'+extraInfo;args.showTrace=true;args.traceWidth='420px';args.traceHeight='220px';}\nvar features=['edge:raised;center:1;help:0;status:0;resizable:0;'];var size=this.ieVersion>6?[420,220]:[425,251];var sizeInfo='dialogWidth:'+size[0]+'px;dialogHeight:'+size[1]+'px;';features.push(sizeInfo);if(domutils.isFirefox()){var dialogLeft=(screen.width-size[0])/2;var dialogTop=(screen.height-size[1]-20)/2;features.push(\"dialogLeft:\"+dialogLeft+\"px;\");features.push(\"dialogTop:\"+dialogTop+\"px;\");}\nvar strUrl=jsloader.baseHref+'js/freequery/common/modalWindow.html';if(typeof win!=\"undefined\"){return win.showModalDialog(strUrl,args,features.join(''));}else{return window.showModalDialog(strUrl,args,features.join(''));}},MB_ICONEXCLAMATION:0x00000001,MB_ICONQUESTION:0x00000002,MB_ICONERROR:0x00000004,MB_ICONINFORMATION:0x00000010,MB_DEFBUTTON1:0x00000100,MB_DEFBUTTON2:0x00000200,MB_DEFBUTTON3:0x00000400,MB_DEFBUTTON4:0x00000800,MB_OK:0x00010000,MB_CANCEL:0x00020000,MB_ABORT:0x00040000,MB_RETRY:0x00080000,MB_IGNORE:0x00100000,MB_YES:0x00200000,MB_NO:0x00400000,MB_OKCANCEL:0x00030000,MB_ABORTRETRYIGNORE:0x001C0000,MB_YESNOCANCEL:0x00620000,MB_YESNO:0x00600000,MB_RETRYCANCEL:0x000A0000,ID_UNKNOWN:0x0000A000,ID_OK:0x0000A001,ID_CANCEL:0x0000A002,ID_ABORT:0x0000A003,ID_RETRY:0x0000A004,ID_IGNORE:0x0000A005,ID_YES:0x0000A006,ID_NO:0x0000A007};","js/freequery/common/TransferData.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var TransferData=function(){this.srcType=null;this.dataNode=null;this.dataNodes=null;this.srcElement=null;this.tagData=null;this.dataDropped=null;};lang.extend(TransferData,Module);TransferData.prototype.clear=function(){this.srcType=null;this.dataNode=null;this.dataNodes=null;this.srcElement=null;this.tagData=null;this.processed=null;};","js/freequery/widget/Module.js":"\nvar Module=function(){};Module.prototype.destroy=function(){if(this.eventGroups){var group;for(group in this.eventGroups){if(this.eventGroups[group]){this.removeListenersByGroup(group);}}\ndelete this.eventGroups;}};Module.prototype.addListener=function(element,type,handler,that,group){this._getEventAgent(group).addListener(element,type,handler,that);};Module.prototype.removeListener=function(element,type,handler,that,group){this._getEventAgent(group).removeListener(element,type,handler,that);};Module.prototype.removeListenersByGroup=function(group){if(this.eventGroups&&this.eventGroups[group]){this.eventGroups[group].removeAllListeners();delete this.eventGroups[group];}};Module.prototype._getEventAgent=function(group){group=group||\"DEFAULT_GROUP\";this.eventGroups=this.eventGroups||{};if(!this.eventGroups[group]){var EventAgent=jsloader.resolve(\"freequery.lang.EventAgent\");this.eventGroups[group]=new EventAgent();}\nreturn this.eventGroups[group];};","js/freequery/widget/Module2.js":"\n﻿var Module=jsloader.resolve(\"freequery.widget.Module\");var domutils=jsloader.resolve(\"freequery.lang.domutils\");var Module2=function(){};lang.extend(Module2,Module);Module2.prototype.destroy=function(){if(this.children){for(var prop in this.children){if(!this.children[prop]){continue;}\nif(!this.children[prop].destroy){continue;}\nthis.children[prop].destroy();delete this.children[prop];}}\nModule2.superclass.destroy.call(this);if(this.noWrapper){this.container.innerHTML=\"\";}else if(this.container){if(this.element){this.processTemplate(this.element,true);try{domutils.destroyNode(this.element);}catch(e){}}\nthis.container=null;this.element=null;}else{;}};Module2.prototype.init=function(container,url,noWrapper,noDoGet){this.children=[];this.applyTemplate(container,url,noWrapper,noDoGet);this.processTemplate(this.element);this.bindListeners();};Module2.prototype.applyTemplate=function(container,url,noWrapper,noDoGet){this.container=container;this.noWrapper=!!noWrapper;if(this.noWrapper){this.element=this.container;}else{this.element=this.createElement(container,\"div\");if(domutils.isBoxModel){this.element.style.height=\"100%\";}}\nif(noDoGet)\nthis.element.innerHTML=url;else\nthis.element.innerHTML=domutils.doGet(url.substring(0,url.lastIndexOf('.'))+\".html\");};Module2.prototype.processTemplate=function(element,isDestroy){if(1!=element.nodeType){return;}\nvar bofid=element.getAttribute(\"bofid\");if(bofid){var propName=this.getPropNameByBofid(bofid);if(isDestroy)\nthis[propName]=null;else\nthis[propName]=element;}\nfor(var child=element.firstChild;child;child=child.nextSibling){this.processTemplate(child,isDestroy);}};Module2.prototype.getPropNameByBofid=function(bofid){if(\"string\"==typeof bofid)\nreturn\"elem\"+bofid.charAt(0).toUpperCase()+bofid.substring(1);else\nreturn null;};Module2.prototype.getElementByBofid=function(bofid){var propName=this.getPropNameByBofid(bofid);return this[propName];};Module2.prototype.bindListeners=function(){for(var prop in this){if(\"function\"!=typeof this[prop]){continue;}\nvar lastUnderscoreIndex=prop.lastIndexOf(\"_\");var _handler=prop.substring(lastUnderscoreIndex);if(\"_handler\"!=_handler){continue;}\nvar firstUnderscoreIndex=prop.substring(0,lastUnderscoreIndex).lastIndexOf(\"_\");var propName=prop.substring(0,firstUnderscoreIndex);if(!this[propName]){continue;}\nvar event=prop.substring(firstUnderscoreIndex+1,lastUnderscoreIndex);this.addListener(this[propName],event,this[prop],this);}};Module2.prototype.createElement=function(parentNode,tagName){var element=document.createElement(tagName);parentNode.appendChild(element);return element;};Module2.prototype.createChild=function(klass){var child=new klass(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);this.children.push(child);return child;};","js/bof/decisionpanel/Portal/ExportPage.js":"\nvar CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var Module=jsloader.resolve(\"freequery.widget.Module\");var util=jsloader.resolve(\"freequery.common.util\");var ExportPage=function(pageInfo){this.pageInfo=pageInfo;this.chartSeq=0;this.allChart=0;this.dashletChart=new Array();this.dashboardHead=new Array();this.dashboardTail=new Array();this.simpleReportHeadtail=new Array();this.__portalExportForm=document.getElementById(\"_portalExportForm\");if(!this.__portalExportForm){var formTemplate=domutils.doGet(\"template/decisionpanel/dashboard/DashboardForms.template\");var span=document.body.appendChild(document.createElement(\"span\"));span.innerHTML=formTemplate;this.__portalExportForm=document.getElementById(\"_portalExportForm\");}\nthis.parentObj=document.getElementById('rigthContent');}\nlang.extend(ExportPage,Module);ExportPage.prototype.destroy=function(){try{if(this.pageInfo.pageId)\nutil.remoteInvoke(\"ExportService\",\"removeFromSession\",[this.pageInfo.pageId],function(){});}catch(e){}\ndelete this.pageInfo;delete this.chartSeq;delete this.allChart;delete this.dashletChart;delete this.dashboardHead;delete this.dashboardTail;delete this.simpleReportHeadtail;}\nExportPage.prototype.exportExcel=function(){this.exportAllPortlets(\"EXCEL\");}\nExportPage.prototype.exportMHT=function(){this.exportAllPortlets(\"MHT\");}\nExportPage.prototype.exportPDF=function(){this.exportAllPortlets(\"PDF\");}\nExportPage.prototype.exportWord=function(){this.exportAllPortlets(\"WORD\");}\nExportPage.prototype.exportAllPortlets=function(exportType){this.doExport(exportType);}\nExportPage.prototype.doExport=function(exportType){if(this.pageInfo.dashletList.length==0){alert(\"没有对象可以导出！\");return;}\nif(!exportType){alert(\"未指定导出类型！\");return;}\nvar pageClientId=this.pageInfo.pageBO.clientId;var portletBeanList=this.getPortletBeanList();if(portletBeanList.length){var ret=util.remoteInvokeEx(\"DPPortalService\",\"fillPageBOInfo\",[pageClientId,portletBeanList]);if(ret&&ret.succeeded){var exportForm=this.__portalExportForm;var input_exportType=domutils.findElementByClassName(exportForm,\"_exportType\");var input_clientId=domutils.findElementByClassName(exportForm,\"_clientId\");var input_pageId=domutils.findElementByClassName(exportForm,\"_pageId\");var input_pageWidth=domutils.findElementByClassName(exportForm,\"_pageWidth\");var input_pageHeaderHtml=domutils.findElementByClassName(exportForm,\"_pageHeaderHtml\");var input_pageHeaderText=domutils.findElementByClassName(exportForm,\"_pageHeaderText\");input_exportType.value=exportType;input_clientId.value=pageClientId;var rand=Math.floor(Math.random()*9999);exportForm.action=exportForm.action+\"?rand=\"+rand;input_pageId.value=this.pageInfo.pageId;var parentConDiv=document.getElementById(\"content\");if(parentConDiv&&parentConDiv.offsetWidth>0)\ninput_pageWidth.value=parentConDiv.offsetWidth;if(this.pageInfo.elemPortalHeader){input_pageHeaderHtml.value=this.pageInfo.elemPortalHeader.innerHTML;input_pageHeaderText.value=this.pageInfo.elemPortalHeader.innerText;}\nexportForm.submit();}}}\nExportPage.prototype.getPortletBeanList=function(){var portletBeanList=new Array();var dashletList=this.pageInfo.dashletList;var simpleGridCount=0,urlPortletCount=0;for(var idx in dashletList){if(dashletList[idx].currentPortlet.simpleGrid){simpleGridCount++;continue;}\nvar dashlet=dashletList[idx];if(!dashlet)\ncontinue;var dashletId=dashlet.id;var portlet=dashlet.currentPortlet;if(!portlet)\nreturn;if(portlet.getPortletType()==\"URL\"||portlet.getPortletType()==\"NESTEDPAGE\"){urlPortletCount++;continue;}\nvar portletBean=portlet.getExportBean();if(!portletBean)\ncontinue;portletBean.layoutSlotName=dashlet.layoutSlotName||\"\";if(portlet.getPortletObject()&&portlet.getPortletObject().skipExport==true){continue;}\nvar slotInfo=this.pageInfo.findSlot(portletBean.portletId);if(slotInfo){portletBean.indexInSlot=slotInfo.indexInSlot;}else{portletBean.indexInSlot=9999;}\nportletBean.width=dashlet.width+\"\";portletBean.height=dashlet.height+\"\";portletBean.title=dashlet.getTitle()||\"\";var showSkin=true;if(dashlet.options&&(dashlet.options.skinDisplay==\"none\"||dashlet.options.skinDisplay==\"button\")){showSkin=false;}\nportletBean.showSkin=showSkin;portletBeanList.push(portletBean);}\nif(simpleGridCount>0){var msg=\"导出文件内容不包含简单表格！\";if(portletBeanList.length<=0){msg=\"页面中只包含简单表格，无法导出！\";}\nalert(msg);}\nif(urlPortletCount>0){alert(\"不支持导出Web链接类型和内嵌页面的资源\");}\nreturn portletBeanList;}","js/bof/decisionpanel/Portal/PagePopupMenu.js":"\nvar PopupMenu=imports(\"freequery.menu.PopupMenu\");var ExportPage=imports(\"bof.decisionpanel.Portal.ExportPage\");var PagePopupMenu=function(parent,page){this.parent=parent;this.page=page;this.onHide=new CustomEvent(\"onHide\",this);};lang.extend(PagePopupMenu,\"bof.baseajax.common.AbstractAction\");PagePopupMenu.prototype.destroy=function(){if(this.exportMenu){this.exportMenu.onHide.unsubscribe(this.doMenuHide,this);this.exportMenu.destroy();}\nPagePopupMenu.superclass.destroy.call(this);}\nPagePopupMenu.prototype.execute=function(obj){this.elemItem=obj;var menuNotExists=!this.exportMenu;if(menuNotExists){this.exportMenu=new PopupMenu(document.body,this);this.exportMenu.setWidth(\"110px\");this.exportMenu.widthFix=\"114px\";this.exportExcelM=this.exportMenu.createMenuItem(\"导出EXCEL\",\"exportExcel\");this.exportMHTM=this.exportMenu.createMenuItem(\"导出HTML\",\"exportMHT\");this.exportPdfM=this.exportMenu.createMenuItem(\"导出PDF\",\"exportPDF\");this.exportWordM=this.exportMenu.createMenuItem(\"导出WORD\",\"exportWord\");this.exportMenu.onHide.subscribe(this.doMenuHide,this);}\nif(menuNotExists){var self=this;window.setTimeout(function(){self.exportMenu.showBelow(self.elemItem);},1);}else{this.exportMenu.showBelow(this.elemItem);}\nreturn true;};PagePopupMenu.prototype.doCmd=function(func){if(func==\"exportExcel\"){var exportManager=new ExportPage(this.page);exportManager.exportExcel();}else if(func==\"exportMHT\"){var exportManager=new ExportPage(this.page);exportManager.exportMHT();}else if(func==\"exportPDF\"){var exportManager=new ExportPage(this.page);exportManager.exportPDF();}else if(func==\"exportWord\"){var exportManager=new ExportPage(this.page);exportManager.exportWord();}};PagePopupMenu.prototype.doMenuHide=function(){this.onHide.fire();};PagePopupMenu.prototype.hideExportMenuItem=function(itemType){switch(itemType){case\"EXCEL\":this.exportExcelM.itemPane.style.display=\"none\";break;case\"HTML\":this.exportMHTM.itemPane.style.display=\"none\";break;case\"PDF\":this.exportPdfM.itemPane.style.display=\"none\";break;case\"WORD\":this.exportWordM.itemPane.style.display=\"none\";break;}}\nPagePopupMenu.prototype.resetPopupMenuStyle=function(styleUrl){exportMenu=this.exportMenu;if(!exportMenu)return;var styleSheets=exportMenu.popMenuFrame.contentWindow.document.styleSheets;for(var si=0;si<styleSheets.length;si++){if(styleSheets[si].href.indexOf(\"popupmenu.css\")!=-1){styleSheets[si].href=styleUrl;}}};","js/Configuration.js":"\nvar Configuration={\"loginTitle\":\"Primeton\",\"applicationTitle\":\"Primeton\",\"dashBoardTitle\":\"Primeton Dashboard\",\"extensionPoints\":{\"MainFrame\":{\"actions\":[{\"className\":\"freequery.actions.ResAuditAction\",\"groupId\":\"default\"},{\"className\":\"freequery.actions.BrowseAction\",\"groupId\":\"default\",\"functionCode\":\"BROWSE\"},{\"className\":\"freequery.actions.CustomAction\",\"groupId\":\"default\",\"functionCode\":\"CUSTOM\"},{\"className\":\"freequery.actions.ManagerAction\",\"groupId\":\"default\",\"functionCode\":\"MANAGE\"},{\"className\":\"bof.decisionpanel.Portal.PortalAction\",\"groupId\":\"default\",\"functionCode\":\"DASHBOARD\"},{\"className\":\"freequery.actions.MyAccountAction\",\"groupId\":\"default\"},{\"className\":\"freequery.actions.HelpAction\",\"groupId\":\"default\"}]},\"MyAccount\":{\"actions\":[{\"className\":\"freequery.actions.MyOptionAction\",\"groupId\":\"default\"},{\"className\":\"freequery.actions.MyInfoAction\",\"groupId\":\"default\"},{\"className\":\"freequery.actions.MyPurviewAction\",\"groupId\":\"default\"}]},\"userManager\":{\"actions\":[{\"className\":\"bof.usermanager.actions.UserAction\",\"groupId\":\"default\"},{\"className\":\"bof.usermanager.actions.RoleAction\",\"groupId\":\"default\"},{\"className\":\"bof.usermanager.actions.FunctionAction\",\"groupId\":\"default\",\"hide\":true}]},\"userAction\":{\"actions\":[{\"className\":\"bof.usermanager.actions.GroupAndUserListAction\",\"groupId\":\"default\",\"hide\":true},{\"className\":\"bof.usermanager.actions.GroupCreateManagerAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_DEPARTMENT_CREATE\",\"groupId\":\"default\"},{\"className\":\"bof.usermanager.actions.UserCreateManagerAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_USER_CREATE\",\"groupId\":\"default\"},{\"className\":\"bof.usermanager.actions.UserSearchAction\",\"groupId\":\"default\"},{\"className\":\"bof.usermanager.actions.UserEditManagerAction\",\"groupId\":\"default\",\"hide\":true},{\"className\":\"bof.usermanager.actions.UserDeleteAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_USER_DELETE\",\"groupId\":\"default\",\"hide\":true},{\"className\":\"bof.usermanager.actions.UserMoveAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_USER_MOVE\",\"groupId\":\"default\",\"hide\":true},{\"className\":\"bof.usermanager.actions.GroupEditManagerAction\",\"groupId\":\"default\",\"hide\":true},{\"className\":\"bof.usermanager.actions.GroupDeleteAction\",\"groupId\":\"default\",\"functionCode\":\"MANAGE_USERMANAGEMENT_DEPARTMENT_DELETE\",\"hide\":true},{\"className\":\"bof.usermanager.actions.SynchronizeUserAction\",\"groupId\":\"default\"}]},\"userCreateManagerAction\":{\"actions\":[{\"className\":\"bof.usermanager.actions.UserCreateAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_USER_CREATE\",\"groupId\":\"default\"},{\"className\":\"bof.usermanager.actions.AddRolesToUserAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_USER_ASSIGNROLES\",\"groupId\":\"default\"},{\"className\":\"bof.usermanager.actions.AddDepartmentsToUserAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_USER_ASSIGNDEPARTMENTS\",\"groupId\":\"default\"}]},\"userEditManagerAction\":{\"actions\":[{\"className\":\"bof.usermanager.actions.UserEditAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_USER_EDIT\",\"groupId\":\"default\"},{\"className\":\"bof.usermanager.actions.UpdateRolesOfUserAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_USER_ASSIGNROLES\",\"groupId\":\"default\"},{\"className\":\"bof.usermanager.actions.UpdateDepartmentsOfUserAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_USER_ASSIGNDEPARTMENTS\",\"groupId\":\"default\"}]},\"groupCreateManagerAction\":{\"actions\":[{\"className\":\"bof.usermanager.actions.DepartmentCreateAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_DEPARTMENT_CREATE\",\"groupId\":\"default\"},{\"className\":\"bof.usermanager.actions.AddRolesToGroupAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_DEPARTMENT_ASSIGNROLES\",\"groupId\":\"default\"}]},\"groupEditManagerAction\":{\"actions\":[{\"className\":\"bof.usermanager.actions.DepartmentEditAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_DEPARTMENT_EDIT\",\"groupId\":\"default\"},{\"className\":\"bof.usermanager.actions.UpdateRolesOfGroupAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_DEPARTMENT_ASSIGNROLES\",\"groupId\":\"default\"}]},\"roleAction\":{\"actions\":[{\"className\":\"bof.usermanager.actions.RoleListAction\",\"groupId\":\"default\",\"hide\":true},{\"className\":\"bof.usermanager.actions.RoleCreateManagerAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_ROLE_CREATE\",\"groupId\":\"default\"},{\"className\":\"bof.usermanager.actions.RoleEditManagerAction\",\"groupId\":\"default\",\"hide\":true},{\"className\":\"bof.usermanager.actions.RoleDeleteAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_ROLE_DELETE\",\"groupId\":\"default\",\"hide\":true},{\"className\":\"bof.usermanager.actions.RoleResourcePermissionAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_ROLE_RESOURCEPERMISSION\",\"groupId\":\"default\",\"hide\":true},{\"className\":\"bof.usermanager.actions.RoleSearchAction\",\"groupId\":\"default\"}]},\"roleCreateManagerAction\":{\"actions\":[{\"className\":\"bof.usermanager.actions.RoleCreateAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_ROLE_CREATE\",\"groupId\":\"default\"},{\"className\":\"bof.usermanager.actions.AddUsersToRoleAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_ROLE_ASSIGNUSERS\",\"groupId\":\"default\"},{\"className\":\"bof.usermanager.actions.AddFunctionPermissionToRoleAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_ROLE_ASSIGNFUNCTIONS\",\"groupId\":\"default\"}]},\"roleEditManagerAction\":{\"actions\":[{\"className\":\"bof.usermanager.actions.RoleEditAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_ROLE_EDIT\",\"groupId\":\"default\"},{\"className\":\"bof.usermanager.actions.UpdateUsersOfRoleAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_ROLE_ASSIGNUSERS\",\"groupId\":\"default\"},{\"className\":\"bof.usermanager.actions.FunctionPermissionAction\",\"functionCode\":\"MANAGE_USERMANAGEMENT_ROLE_ASSIGNFUNCTIONS\",\"groupId\":\"default\"}]},\"functionAction\":{\"actions\":[{\"className\":\"bof.usermanager.actions.FunctionListAction\",\"groupId\":\"default\",\"hide\":true},{\"className\":\"bof.usermanager.actions.FunctionCreateAction\",\"groupId\":\"default\"},{\"className\":\"bof.usermanager.actions.FunctionEditAction\",\"groupId\":\"default\",\"hide\":true},{\"className\":\"bof.usermanager.actions.FunctionDeleteAction\",\"groupId\":\"default\",\"hide\":true}]},\"groupEx\":{\"actions\":[]},\"MetadataAnalysis\":{\"actions\":[{\"className\":\"bof.metadata.actions.AnalysisAction\",\"groupId\":\"default\"}]},\"ConfigMainView\":{\"actions\":[{\"className\":\"bof.config.actions.SettingAction\",\"groupId\":\"default\"}],\"configItems\":[{\"groupName\":\"知识库\",\"className\":\"bof.config.configitems.repository.DBType\"},{\"groupName\":\"知识库\",\"className\":\"bof.config.configitems.repository.DBAddr\"},{\"groupName\":\"知识库\",\"className\":\"bof.config.configitems.repository.MaxCount\"},{\"groupName\":\"知识库\",\"className\":\"bof.config.configitems.repository.InitCount\"},{\"groupName\":\"知识库\",\"className\":\"bof.config.configitems.repository.DBName\"},{\"groupName\":\"知识库\",\"className\":\"bof.config.configitems.repository.DBUser\"},{\"groupName\":\"知识库\",\"className\":\"bof.config.configitems.repository.DBPass\"},{\"groupName\":\"知识库\",\"className\":\"bof.config.configitems.repository.VerInfo\"},{\"groupName\":\"授权文件\",\"className\":\"bof.config.configitems.license.LicenseFileDir\"},{\"groupName\":\"授权文件\",\"className\":\"bof.config.configitems.license.UploadLicenseFile\"},{\"groupName\":\"用户管理 \",\"className\":\"bof.config.configitems.usermanager.ShowFuncManager\"},{\"groupName\":\"用户管理 \",\"className\":\"bof.config.configitems.usermanager.EncryptType\"},{\"groupName\":\"用户管理 \",\"className\":\"bof.config.configitems.usermanager.ValidationClass\"},{\"groupName\":\"用户管理 \",\"className\":\"bof.config.configitems.usermanager.NotifierClasses\"},{\"groupName\":\"用户管理 \",\"className\":\"bof.config.configitems.usermanager.UserSynchronizationClass\"},{\"groupName\":\"用户管理 \",\"className\":\"bof.config.configitems.usermanager.ShowMyPasswordModifyBtn\"},{\"groupName\":\"服务器日志\",\"className\":\"bof.config.configitems.log.LogFileDir\"},{\"groupName\":\"服务器日志\",\"className\":\"bof.config.configitems.log.GlobalLogLevel\"},{\"groupName\":\"服务器日志\",\"className\":\"bof.config.configitems.log.BofLogLevel\"},{\"groupName\":\"服务器日志\",\"className\":\"bof.config.configitems.log.LogFileSize\"},{\"groupName\":\"服务器日志\",\"className\":\"bof.config.configitems.log.LogFileCount\"},{\"groupName\":\"服务器日志\",\"className\":\"bof.config.configitems.log.SkipLog4jHandler\"},{\"groupName\":\"其它信息\",\"className\":\"bof.config.configitems.scheduletask.RunAt\",\"licenseInfo\":\"ScheduleTask\"},{\"groupName\":\"其它信息\",\"className\":\"bof.config.configitems.scheduletask.BiofficeUrl\",\"licenseInfo\":\"ScheduleTask\"},{\"groupName\":\"其它信息\",\"className\":\"bof.config.configitems.scheduletask.RemoteUrl\",\"licenseInfo\":\"ScheduleTask\"},{\"groupName\":\"扩展包\",\"className\":\"bof.config.configitems.extensions.ExtensionSettings\"},{\"groupName\":\"其它信息\",\"className\":\"bof.config.configitems.other.DefaultTitle\"},{\"groupName\":\"其它信息\",\"className\":\"bof.config.configitems.other.ShowInternationalOption\"},{\"groupName\":\"其它信息\",\"className\":\"bof.config.configitems.other.ShowPCPageThemeSetting\"},{\"groupName\":\"其它信息\",\"className\":\"bof.config.configitems.other.ShowSubMenuStyleOption\",\"licenseInfo\":\"Portal\"},{\"groupName\":\"对象池\",\"className\":\"bof.config.configitems.objectpool.ScriptableObjectPoolMaxActive\"},{\"groupName\":\"对象池\",\"className\":\"bof.config.configitems.objectpool.ScriptableObjectPoolInitCount\"}]},\"catalogElementTypes\":{\"SPREADSHEET_REPORT\":\"电子表格\"},\"Browse\":{\"actions\":[{\"className\":\"freequery.actions.MyFavoriteAction\",\"groupId\":\"default\"},{\"className\":\"freequery.actions.PrivateFolderAction\",\"groupId\":\"default\"}],\"catalogDisplayTreeFilterTypes\":[\"PAGE\",\"SPREADSHEET_REPORT\"]},\"Custom\":{\"actions\":[{\"className\":\"freequery.actions.DisplayCustomAction\",\"groupId\":\"default\",\"functionCode\":\"CUSTOM_DISPLAYCUSTOM\"},{\"className\":\"freequery.actions.DefineDatasetAction\",\"groupId\":\"default\",\"functionCode\":\"CUSTOM_DEFINEDATASET\"},{\"className\":\"freequery.actions.CommonSettingsAction\",\"groupId\":\"default\",\"functionCode\":\"CUSTOM_COMMONSETTINGS\"},{\"className\":\"bof.macro.actions.MacroManagementAction\",\"groupId\":\"default\",\"functionCode\":\"MACRO_MANAGEMENT\",\"componentName\":\"Macro\"},{\"className\":\"bof.schedule.action.ScheduleTaskAction\",\"groupId\":\"default\",\"functionCode\":\"CUSTOM_SCHEDULETASK\",\"componentName\":\"ScheduleTask\"},{\"className\":\"bof.decisionpanel.Portal.PortalManagementAction\",\"groupId\":\"default\",\"functionCode\":\"CUSTOM_PORTALMANAGER\",\"componentName\":\"Portal\"},{\"className\":\"freequery.actions.CatalogPublishAction\",\"groupId\":\"default\",\"functionCode\":\"CUSTOM_CATALOGPUBLISH\",\"componentName\":\"UserManager\"}],\"DisplayCustomTaskPanel\":{\"config\":{\"handlers\":[{\"className\":\"bof.decisionpanel.page.DisplayCustomTaskPanelHandler\"}]}},\"CommonSettingsTaskPanel\":{\"config\":{\"handlers\":[{\"className\":\"bof.decisionpanel.Portal.pagetheme.handler.PageThemeCommonSettingTaskPanelHandler\"},{\"className\":\"smartbi.chart.handler.ChartCommonSettingTaskPanelHandler\"},{\"className\":\"smartbi.map.handler.MapCommonSettingTaskPanelHandler\"}]}},\"queryBrowserTreeFilterTypes\":[\"SPREADSHEET_REPORT\"],\"displayCustomTreeFilterTypes\":[\"SPREADSHEET_REPORT\"],\"macroIDETreeFilterTypes\":[\"SPREADSHEET_REPORT\"],\"macroModuleTreeWizardTypes\":[\"SPREADSHEET_REPORT\"],\"macroModuleTreeServerTypes\":[\"SPREADSHEET_REPORT\"],\"portalSearchTreeFilterTypes\":[\"SPREADSHEET_REPORT\"]},\"CatalogTree\":{\"businessViewHandler\":[{\"className\":\"freequery.businessview.BusinessViewHandler\"}],\"exportChooserHandler\":[{\"className\":\"freequery.migrate.ExportChooserTreePopupMenuHandler\"}],\"dragDropHandler\":[{\"className\":\"freequery.tree.FieldDragDropHandler\"}],\"groupActionPopupMenuHandler\":[{\"className\":\"bof.usermanager.menu.GroupTreePopupMenuHandler\"}],\"userActionPopupMenuHandler\":[{\"className\":\"bof.usermanager.menu.UserTreePopupMenuHandler\"}],\"departmentActionPopupMenuHandler\":[{\"className\":\"bof.usermanager.menu.DepartmentTreePopupMenuHandler\"}],\"roleActionPopupMenuHandler\":[{\"className\":\"bof.usermanager.menu.RoleTreePopupMenuHandler\"}],\"functionActionPopupMenuHandler\":[{\"className\":\"bof.usermanager.menu.FunctionTreePopupMenuHandler\"}],\"popupMenuHandler\":[{\"className\":\"freequery.tree.CatalogTreePopupMenuHandler\"}],\"indicatorsManagementHandler\":[{\"className\":\"bof.decisionpanel.IndicatorsManagement.IndicatorsManagementTreePopupMenuHandler\"}],\"resourceManagementHandler\":[{\"className\":\"bof.decisionpanel.ResourceManagement.ResourceManagementTreePopupMenuHandler\"}],\"searchPopupMenuHandler\":[{\"className\":\"bof.decisionpanel.Portal.SearchTree.SearchTreePopupMenuHandler\"}],\"queryDesignerHandler\":[{\"className\":\"freequery.tree.CatalogTreePopupMenuHandler\"},{\"className\":\"freequery.tree.QueryDesignerTreePopupMenuHandler\"},{\"className\":\"freequery.tree.FieldTreePopupMenuHandler\"},{\"className\":\"bof.decisionpanel.dashboard.DpQueryDesignerTreePopupMenuHandler\"},{\"className\":\"bof.metadata.tree.MetadataTreePopupMenuHandler\"}],\"systemResourceHandler\":[{\"className\":\"freequery.tree.SystemResourceTreePopupMenuHandler\"},{\"className\":\"bof.metadata.tree.MetadataTreePopupMenuHandler\"}],\"systemManagerHandler\":[{\"className\":\"freequery.tree.CatalogTreePopupMenuHandler\"},{\"className\":\"freequery.systemmanager.SystemManagerTreePopupMenuHandler\"},{\"className\":\"bof.metadata.tree.MetadataTreePopupMenuHandler\"},{\"className\":\"bof.olapquery.tree.OlapQuerySystemTreePopupMenuHandler\"}],\"olapWorkSpaceTreeHandler\":[{\"className\":\"bof.olapquery.olapquery.workspace.OlapWorkSpaceTreeHandler\"}],\"advancedSettingTreeHandler\":[{\"className\":\"bof.olapquery.olapquery.advancedsetting.AdvancedSettingTreeHandler\"}],\"olapQueryViewHandler\":[{\"className\":\"bof.olapquery.olapquery.OlapQueryViewHandler\"}],\"olapQueryPurviewFilterHandler\":[{\"className\":\"bof.olapquery.systemmanager.OlapQueryPurviewFilterHandler\"}],\"olapResourceCatalogTreeHandler\":[{\"className\":\"bof.olapquery.param.OlapResourceCatalogTreeHandler\"}],\"MemberAliasSettingTreeHandler\":[{\"className\":\"bof.olapquery.datasource.MemberAliasSettingTreeHandler\"}],\"commonSettingsHandler\":[{\"className\":\"freequery.tree.CatalogTreePopupMenuHandler\"},{\"className\":\"freequery.tree.CommonSettingsTreePopupMenuHandler\"},{\"className\":\"bof.decisionpanel.Portal.pagetheme.tree.PageThemeCommonSettingsTreePopupMenuHandler\"},{\"className\":\"bof.metadata.tree.MetadataTreePopupMenuHandler\"},{\"className\":\"smartbi.chart.tree.ChartCommonSettingsTreePopupMenuHandler\"},{\"className\":\"smartbi.map.tree.MapCommonSettingsTreePopupMenuHandler\"}],\"portalManagementHandler\":[{\"className\":\"bof.decisionpanel.Portal.PortalManagement.PortalManagementTreePopupMenuHandler\"},{\"className\":\"bof.metadata.tree.MetadataTreePopupMenuHandler\"},{\"className\":\"ext.offline.PortalManagementPopupMenuHandler\"}],\"queryBrowserHandler\":[{\"className\":\"freequery.tree.CatalogTreePopupMenuHandler\"},{\"className\":\"freequery.tree.QueryBrowserTreePopupMenuHandler\"},{\"className\":\"bof.decisionpanel.dashboard.DpQueryBrowserTreePopupMenuHandler\"},{\"className\":\"bof.decisionpanel.page.QueryBrowserTreePopupMenuHandler\"},{\"className\":\"bof.metadata.tree.MetadataTreePopupMenuHandler\"},{\"className\":\"smartbi.spreadsheetreport.handler.QueryBrowserTreePopupMenuHandler\"}],\"catalogDisplayHandler\":[{\"className\":\"freequery.tree.CatalogTreePopupMenuHandler\"},{\"className\":\"freequery.catalogdisplay.CatalogDisplayTreePopupMenuHandler\"},{\"className\":\"bof.decisionpanel.dashboard.DpCatalogDisplayTreePopupMenuHandler\"},{\"className\":\"bof.decisionpanel.page.QueryBrowserTreePopupMenuHandler\"},{\"className\":\"bof.metadata.tree.MetadataTreePopupMenuHandler\"},{\"className\":\"smartbi.spreadsheetreport.handler.QueryBrowserTreePopupMenuHandler\"}],\"displayCustomHandler\":[{\"className\":\"freequery.tree.CatalogTreePopupMenuHandler\"},{\"className\":\"freequery.tree.DisplayCustomTreePopupMenuHandler\"},{\"className\":\"bof.decisionpanel.dashboard.DashboardTreePopupMenuHandler\"},{\"className\":\"bof.decisionpanel.page.DisplayCustomTreePopupMenuHandler\"},{\"className\":\"bof.metadata.tree.MetadataTreePopupMenuHandler\"},{\"className\":\"ext.offline.PortalManagementPopupMenuHandler\"},{\"className\":\"smartbi.spreadsheetreport.handler.DisplayCustomTreePopupMenuHandler\"}],\"macroIDEHandler\":[{\"className\":\"smartbi.spreadsheetreport.handler.MacroIDETreePopupMenuHandler\"}],\"myFavoriteHandler\":[{\"className\":\"smartbi.spreadsheetreport.handler.MyFavoriteTreePopupMenuHandler\"}],\"exportChooser\":{\"checkableTypes\":[\"MAPAREA_MANAGE\",\"SPREADSHEET_REPORT\"],\"typeCanAddReference\":[\"SPREADSHEET_REPORT\"]},\"copyableTypes\":{\"PROC_BUSINESS_VIEW\":true,\"TEXT_BUSINESS_VIEW\":true,\"RAWSQL_BUSINESS_VIEW\":true,\"BUSINESS_VIEW\":true,\"JAVA_BUSINESS_VIEW\":true,\"SIMPLE_REPORT\":true,\"PARAM\":true,\"CALC_FIELD\":true,\"FILTER\":true,\"USER_PROPERTY\":true,\"TRANSFORMRULE\":true,\"URL\":true,\"FILE_RESOURCE\":true,\"TASK\":true,\"SCHEDULE\":true,\"DEFAULT_TREENODE\":false,\"SELF_TREENODE\":false,\"Dashboard\":true,\"DashboardMap\":true,\"PAGE\":true,\"PAGE_THEME\":true,\"OLAP_REPORT\":true,\"OLAP_PARAM\":true,\"OLAP_WARNING_STYLE\":true,\"CUSTOMMEMBER\":true,\"NAMEDSET\":true,\"CHART_COLORS\":true,\"MAP_INTERVALCOLOR\":true,\"SPREADSHEET_REPORT\":true},\"BusinessViewCatalogTree_DenyTypes\":[\"SPREADSHEET_REPORT\"]},\"Metadata\":{\"MResTreeNodeChooser\":{\"analysisNodeType\":{\"PAGE_THEME\":\"页面主题\",\"CHART_COLORS\":\"图形配色方案\",\"MAP_INTERVALCOLOR\":\"地图配色方案\"}},\"popupMenuFilterTypes\":[\"PAGE_THEME\",\"CHART_COLORS\",\"MAP_INTERVALCOLOR\",\"SPREADSHEET_REPORT\"],\"locationConfig\":{\"CustomAction\":{\"CommonSettingsAction\":{\"resTypes\":[\"PAGE_THEME\",\"CHART_COLORS\",\"MAP_INTERVALCOLOR\"]},\"DisplayCustomAction\":{\"resTypes\":[\"SPREADSHEET_REPORT\"]}}}},\"Macro\":{\"PageMacroResourceDialog\":{\"filterTypes\":[\"SPREADSHEET_REPORT\"],\"analysisTypes\":[\"SPREADSHEET_REPORT\"]},\"MacroIDETreePopupMenuHandler\":{\"analysisNodeTypes\":{\"SPREADSHEET_REPORT\":\"电子表格\"},\"filterTypes\":[\"SPREADSHEET_REPORT\"]},\"MacroExecutor\":[{\"resourceType\":\"SPREADSHEET_REPORT\",\"className\":\"smartbi.spreadsheetreport.macro.SpreadsheetMacroExecutor\"}],\"simpleReportRule\":{\"analysisTypes\":[\"SPREADSHEET_REPORT\"],\"filterTypes\":[\"SPREADSHEET_REPORT\"]},\"SimpleReportRuleTree\":{\"filterTypes\":[\"SPREADSHEET_REPORT\"]},\"ResourcePackHandler\":[{\"className\":\"smartbi.spreadsheetreport.macro.ResourcePackHandler\"}],\"MacroGuideHandler\":[{\"className\":\"smartbi.spreadsheetreport.macro.MacroGuideHandler\"}]},\"SelectResourceDialog\":{\"filterElementTypes\":[\"SPREADSHEET_REPORT\"]},\"OpenResource\":{\"SPREADSHEET_REPORT\":{\"forward\":\"spreadsheetreport.jsp\",\"className\":\"smartbi.spreadsheetreport.SpreadsheetReportAdapter\"}},\"Manager\":{\"actions\":[{\"className\":\"freequery.actions.SystemManagerAction\",\"groupId\":\"default\",\"functionCode\":\"MANAGE_SYSTEMMANAGEMENT\",\"id\":\"freequery.actions.SystemManagerAction\"},{\"className\":\"bof.usermanager.actions.UserManagerAction\",\"groupId\":\"default\",\"functionCode\":\"MANAGE_USERMANAGEMENT\",\"componentName\":\"UserManager\",\"id\":\"bof.usermanager.actions.UserManagerAction\"},{\"className\":\"bof.metadata.actions.MetadataAnalysisAction\",\"groupId\":\"default\",\"functionCode\":\"MANAGE_METADATAANALYSIS\",\"componentName\":\"Index\",\"id\":\"bof.metadata.actions.MetadataAnalysisAction\"},{\"className\":\"freequery.actions.SessionAction\",\"groupId\":\"default\",\"functionCode\":\"MANAGE_SESSION\",\"componentName\":\"SessionManager\",\"id\":\"freequery.actions.SessionAction\"},{\"className\":\"freequery.actions.ToolkitAction\",\"groupId\":\"default\",\"functionCode\":\"MANAGE_TOOLKIT\",\"id\":\"freequery.actions.ToolkitAction\"},{\"className\":\"ext.IPad.DevicesManagerAction\",\"groupId\":\"default\",\"componentName\":\"Mobile\",\"id\":\"ext.IPad.DevicesManagerAction\"}]},\"css\":[\"/vision/css/smartbi.css\",\"vision/css/ipad.css\",\"/vision/css/parameterportles.css\",\"/vision/css/slider.css\"],\"SystemConfig\":{\"configItem\":[{\"tabName\":\"公共设置\",\"groupName\":\"公共设置\",\"itemNumber\":101,\"className\":\"freequery.config.configitem.HideResTreeNode\"},{\"tabName\":\"公共设置\",\"groupName\":\"公共设置\",\"itemNumber\":109,\"className\":\"freequery.config.configitem.NotesFname\"},{\"tabName\":\"公共设置\",\"groupName\":\"公共设置\",\"itemNumber\":102,\"className\":\"freequery.config.configitem.AuditRes\"},{\"tabName\":\"查询设置\",\"groupName\":\"查询设置\",\"itemNumber\":501,\"className\":\"freequery.config.configitem.MemdbMaxRow\"},{\"tabName\":\"查询设置\",\"groupName\":\"查询设置\",\"itemNumber\":502,\"className\":\"freequery.config.configitem.QueryDefaultRow\"},{\"tabName\":\"查询设置\",\"groupName\":\"查询设置\",\"itemNumber\":503,\"className\":\"freequery.config.configitem.RetrieveCount\"},{\"tabName\":\"查询设置\",\"groupName\":\"查询设置\",\"itemNumber\":504,\"className\":\"freequery.config.configitem.FusionChartMaxRow\"},{\"tabName\":\"查询设置\",\"groupName\":\"查询设置\",\"itemNumber\":505,\"className\":\"freequery.config.configitem.AutoCache\"},{\"tabName\":\"查询设置\",\"groupName\":\"查询设置\",\"itemNumber\":506,\"className\":\"freequery.config.configitem.SystemPage\"},{\"tabName\":\"灵活分析设置\",\"groupName\":\"灵活分析设置\",\"itemNumber\":601,\"className\":\"freequery.config.configitem.CsvExportDelimiter\",\"licenseInfo\":[\"Query\"]},{\"tabName\":\"灵活分析设置\",\"groupName\":\"灵活分析设置\",\"itemNumber\":602,\"className\":\"freequery.config.configitem.NullShow\",\"licenseInfo\":[\"Query\"]},{\"tabName\":\"灵活分析设置\",\"groupName\":\"灵活分析设置\",\"itemNumber\":603,\"className\":\"freequery.config.configitem.BrowseAutoRefresh\",\"licenseInfo\":[\"Query\"]},{\"tabName\":\"灵活分析设置\",\"groupName\":\"灵活分析设置\",\"itemNumber\":604,\"className\":\"freequery.config.configitem.ReportAutoRefresh\",\"licenseInfo\":[\"Query\"]},{\"tabName\":\"灵活分析设置\",\"groupName\":\"灵活分析设置\",\"itemNumber\":605,\"className\":\"freequery.config.configitem.ParamDefault\",\"licenseInfo\":[\"Query\"]},{\"tabName\":\"灵活分析设置\",\"groupName\":\"灵活分析设置\",\"itemNumber\":606,\"className\":\"freequery.config.configitem.SingleJumpMenu\",\"licenseInfo\":[\"Query\"]},{\"tabName\":\"灵活分析设置\",\"groupName\":\"灵活分析设置\",\"itemNumber\":607,\"className\":\"freequery.config.configitem.ReportDefaultRow\",\"licenseInfo\":[\"Query\"]},{\"tabName\":\"灵活分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":608,\"className\":\"freequery.config.configitem.HeaderFontSetting\",\"licenseInfo\":[\"Query\"]},{\"tabName\":\"灵活分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":609,\"className\":\"freequery.config.configitem.ReportBackgroundSetting\",\"licenseInfo\":[\"Query\"]},{\"tabName\":\"灵活分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":610,\"className\":\"freequery.config.configitem.GridBorderColorSetting\",\"licenseInfo\":[\"Query\"]},{\"tabName\":\"灵活分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":611,\"className\":\"freequery.config.configitem.GridDataBackgroundSetting\",\"licenseInfo\":[\"Query\"]},{\"tabName\":\"灵活分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":612,\"className\":\"freequery.config.configitem.SpacingLineBackgroundSetting\",\"licenseInfo\":[\"Query\"]},{\"tabName\":\"灵活分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":613,\"className\":\"freequery.config.configitem.SelectedDataBackgroundSetting\",\"licenseInfo\":[\"Query\"]},{\"tabName\":\"灵活分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":614,\"className\":\"freequery.config.configitem.HeaderBackgroundSetting\",\"licenseInfo\":[\"Query\"]},{\"tabName\":\"灵活分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":615,\"className\":\"freequery.config.configitem.HeaderFontColorSetting\",\"licenseInfo\":[\"Query\"]},{\"tabName\":\"灵活分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":616,\"className\":\"freequery.config.configitem.DataFontColorSetting\",\"licenseInfo\":[\"Query\"]},{\"tabName\":\"灵活分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":617,\"className\":\"freequery.config.configitem.HeaderFontSizeSetting\",\"licenseInfo\":[\"Query\"]},{\"tabName\":\"灵活分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":618,\"className\":\"freequery.config.configitem.DataFontSizeSetting\",\"licenseInfo\":[\"Query\"]},{\"tabName\":\"灵活分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":619,\"className\":\"freequery.config.configitem.RowHeaderBackgroundSetting\",\"licenseInfo\":[\"Query\"]},{\"tabName\":\"灵活分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":620,\"className\":\"freequery.config.configitem.RowHeaderFontColorSetting\",\"licenseInfo\":[\"Query\"]},{\"tabName\":\"灵活分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":621,\"className\":\"freequery.config.configitem.ApplyDefaultFontSettings\",\"licenseInfo\":[\"Query\"]},{\"tabName\":\"公共设置\",\"groupName\":\"公共设置\",\"itemNumber\":103,\"className\":\"freequery.config.configitem.LoadUserFirstAction\"},{\"tabName\":\"公共设置\",\"groupName\":\"公共设置\",\"itemNumber\":104,\"className\":\"freequery.config.configitem.Detect\"},{\"tabName\":\"公共设置\",\"groupName\":\"公共设置\",\"itemNumber\":104,\"className\":\"freequery.config.configitem.GlobalTableLinks\",\"licenseInfo\":[\"Metadata\"]},{\"tabName\":\"公共设置\",\"groupName\":\"邮件设置\",\"itemNumber\":201,\"className\":\"freequery.config.configitem.SMTPServer\",\"licenseInfo\":[\"ScheduleTask\"]},{\"tabName\":\"公共设置\",\"groupName\":\"邮件设置\",\"itemNumber\":202,\"className\":\"freequery.config.configitem.EmailUser\",\"licenseInfo\":[\"ScheduleTask\"]},{\"tabName\":\"公共设置\",\"groupName\":\"邮件设置\",\"itemNumber\":203,\"className\":\"freequery.config.configitem.EmailPassword\",\"licenseInfo\":[\"ScheduleTask\"]},{\"tabName\":\"缓存设置\",\"groupName\":\"业务数据缓冲池\",\"itemNumber\":1101,\"className\":\"freequery.config.configitem.DBSQLResultStorePoolMaxTotal\"},{\"tabName\":\"缓存设置\",\"groupName\":\"业务数据缓冲池\",\"itemNumber\":1102,\"className\":\"freequery.config.configitem.DBSQLResultStorePoolMaxActive\"},{\"tabName\":\"缓存设置\",\"groupName\":\"数据集定义对象池\",\"itemNumber\":1201,\"className\":\"freequery.config.configitem.BusinessViewBOPoolMaxTotal\"},{\"tabName\":\"缓存设置\",\"groupName\":\"数据集定义对象池\",\"itemNumber\":1202,\"className\":\"freequery.config.configitem.BusinessViewBOPoolMaxActive\"},{\"tabName\":\"缓存设置\",\"groupName\":\"业务报表对象池\",\"itemNumber\":1301,\"className\":\"freequery.config.configitem.FixedReportPoolMaxTotal\",\"licenseInfo\":[\"ComplexReport\"]},{\"tabName\":\"缓存设置\",\"groupName\":\"业务报表对象池\",\"itemNumber\":1302,\"className\":\"freequery.config.configitem.FixedReportPoolMaxActive\",\"licenseInfo\":[\"ComplexReport\"]},{\"tabName\":\"缓存设置\",\"groupName\":\"复杂报表运行时对象池\",\"itemNumber\":1401,\"className\":\"freequery.config.configitem.ExecutedReportPoolMaxTotal\",\"licenseInfo\":[\"ComplexReport\"]},{\"tabName\":\"缓存设置\",\"groupName\":\"复杂报表运行时对象池\",\"itemNumber\":1402,\"className\":\"freequery.config.configitem.ExecutedReportPoolMaxActive\",\"licenseInfo\":[\"ComplexReport\"]},{\"tabName\":\"缓存设置\",\"groupName\":\"参数缓存\",\"itemNumber\":1501,\"className\":\"freequery.config.configitem.ParameterAutoCache\"},{\"tabName\":\"公共设置\",\"groupName\":\"公共设置\",\"itemNumber\":105,\"className\":\"freequery.config.configitem.MyFavoriteLayout\"},{\"tabName\":\"公共设置\",\"groupName\":\"公共设置\",\"itemNumber\":106,\"className\":\"freequery.config.configitem.PortalRenderingStyle\",\"licenseInfo\":[\"Portal\"]},{\"tabName\":\"公共设置\",\"groupName\":\"公共设置\",\"itemNumber\":107,\"className\":\"freequery.config.configitem.ChartStyle\"},{\"tabName\":\"公共设置\",\"groupName\":\"公共设置\",\"itemNumber\":108,\"className\":\"freequery.config.configitem.OperationLogSetting\"},{\"tabName\":\"公共设置\",\"groupName\":\"上传文件设置\",\"itemNumber\":2101,\"className\":\"freequery.config.configitem.UploadFileExtension\",\"licenseInfo\":[\"FileManager\"]},{\"tabName\":\"公共设置\",\"groupName\":\"上传文件设置\",\"itemNumber\":2102,\"className\":\"freequery.config.configitem.UploadFileMaxSize\",\"licenseInfo\":[\"FileManager\"]},{\"tabName\":\"用户管理设置\",\"groupName\":\"用户管理设置\",\"itemNumber\":301,\"className\":\"bof.usermanager.config.configitem.GroupOrderBySetting\",\"licenseInfo\":[\"UserManager\"]},{\"tabName\":\"用户管理设置\",\"groupName\":\"用户管理设置\",\"itemNumber\":302,\"className\":\"bof.usermanager.config.configitem.UserOrderBySetting\",\"licenseInfo\":[\"UserManager\"]},{\"tabName\":\"用户管理设置\",\"groupName\":\"用户管理设置\",\"itemNumber\":303,\"className\":\"bof.usermanager.config.configitem.RoleOrderBySetting\",\"licenseInfo\":[\"UserManager\"]},{\"tabName\":\"用户管理设置\",\"groupName\":\"用户管理设置\",\"itemNumber\":304,\"className\":\"bof.usermanager.config.configitem.UserExtendSetting\",\"licenseInfo\":[\"UserManager\"]},{\"tabName\":\"仪表盘设置\",\"groupName\":\"仪表盘设置\",\"className\":\"bof.decisionpanel.config.configitem.DashboardShowWay\",\"itemNumber\":901,\"licenseInfo\":[\"Portal\"]},{\"tabName\":\"仪表盘设置\",\"groupName\":\"仪表盘设置\",\"className\":\"bof.decisionpanel.config.configitem.TreeShowWay\",\"itemNumber\":902,\"licenseInfo\":[\"Portal\"]},{\"tabName\":\"仪表盘设置\",\"groupName\":\"仪表盘设置\",\"className\":\"bof.decisionpanel.config.configitem.SubPanelExpand\",\"itemNumber\":904,\"licenseInfo\":[\"Portal\"]},{\"tabName\":\"仪表盘设置\",\"groupName\":\"仪表盘设置\",\"className\":\"bof.decisionpanel.config.configitem.DashletTitleAndBorderDisplay\",\"itemNumber\":903,\"licenseInfo\":[\"Portal\"]},{\"tabName\":\"仪表盘设置\",\"groupName\":\"仪表盘设置\",\"className\":\"bof.decisionpanel.config.configitem.MyFolderDisplay\",\"itemNumber\":905,\"licenseInfo\":[\"Portal\"]},{\"tabName\":\"仪表盘设置\",\"groupName\":\"仪表盘设置\",\"className\":\"bof.decisionpanel.config.configitem.InitialViewSetting\",\"itemNumber\":906,\"licenseInfo\":[\"Portal\"]},{\"tabName\":\"仪表盘设置\",\"groupName\":\"仪表盘设置\",\"className\":\"bof.decisionpanel.config.configitem.DefaultDisplaySubPage\",\"itemNumber\":907,\"licenseInfo\":[\"Portal\"]},{\"tabName\":\"公共设置\",\"groupName\":\"公共设置\",\"className\":\"bof.decisionpanel.config.configitem.CompatiblityMode\",\"itemNumber\":1,\"licenseInfo\":[\"Portal\"]},{\"tabName\":\"公共设置\",\"groupName\":\"索引设置\",\"itemNumber\":401,\"className\":\"bof.metadata.config.configitem.IndexServerUrl\"},{\"tabName\":\"公共设置\",\"groupName\":\"索引设置\",\"itemNumber\":402,\"className\":\"bof.metadata.config.configitem.IndexSaveDirectory\"},{\"tabName\":\"公共设置\",\"groupName\":\"索引设置\",\"itemNumber\":403,\"className\":\"bof.metadata.config.configitem.IndexSearchRow\"},{\"tabName\":\"多维分析设置\",\"groupName\":\"多维分析设置\",\"className\":\"bof.olapquery.config.configitem.OlapAutoRefresh\",\"itemNumber\":801,\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"多维分析设置\",\"className\":\"bof.olapquery.config.configitem.OlapParamDefault\",\"itemNumber\":802,\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"多维分析设置\",\"className\":\"bof.olapquery.config.configitem.OlapPaging\",\"itemNumber\":803,\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"多维分析设置\",\"className\":\"bof.olapquery.config.configitem.OlapPagingRows\",\"itemNumber\":804,\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"多维分析设置\",\"className\":\"bof.olapquery.config.configitem.OlapColumnPaging\",\"itemNumber\":805,\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"多维分析设置\",\"className\":\"bof.olapquery.config.configitem.OlapPagingColumns\",\"itemNumber\":806,\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"多维分析设置\",\"className\":\"bof.olapquery.config.configitem.OlapCompressRow\",\"itemNumber\":807,\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"多维分析设置\",\"className\":\"bof.olapquery.config.configitem.OlapCompressColumn\",\"itemNumber\":808,\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"多维分析设置\",\"className\":\"bof.olapquery.config.configitem.OlapShowParent\",\"itemNumber\":809,\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"多维分析设置\",\"className\":\"bof.olapquery.config.configitem.OlapAxis0UsedHierarchize\",\"itemNumber\":810,\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"多维分析设置\",\"className\":\"bof.olapquery.config.configitem.OlapAxis1UsedHierarchize\",\"itemNumber\":811,\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"多维分析设置\",\"className\":\"bof.olapquery.config.configitem.OlapAxis0UsedDistinct\",\"itemNumber\":810,\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"多维分析设置\",\"className\":\"bof.olapquery.config.configitem.OlapAxis1UsedDistinct\",\"itemNumber\":811,\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"多维分析设置\",\"className\":\"bof.olapquery.config.configitem.OlapAlignCenter\",\"itemNumber\":812,\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"多维分析设置\",\"className\":\"bof.olapquery.config.configitem.OlapViewAutoRefresh\",\"itemNumber\":813,\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"多维分析设置\",\"className\":\"bof.olapquery.config.configitem.OlapDiscoverAutoRefresh\",\"itemNumber\":813,\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"多维分析设置\",\"className\":\"bof.olapquery.config.configitem.OlapWarningAlign\",\"itemNumber\":813,\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"多维分析设置\",\"className\":\"bof.olapquery.config.configitem.OlapFrozenRowHeader\",\"itemNumber\":813,\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"多维分析设置\",\"className\":\"bof.olapquery.config.configitem.OlapFrozenColumnHeader\",\"itemNumber\":813,\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"多维分析设置\",\"className\":\"bof.olapquery.config.configitem.DisplayChildrenOnDice\",\"itemNumber\":814,\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"多维分析设置\",\"className\":\"bof.olapquery.config.configitem.NullMemberCaptionDisplay\",\"itemNumber\":815,\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"多维分析设置\",\"className\":\"bof.olapquery.config.configitem.NullValueDisplay\",\"itemNumber\":816,\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":815,\"className\":\"bof.olapquery.config.configitem.OlapHeaderFontSetting\",\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":816,\"className\":\"bof.olapquery.config.configitem.OlapBackgroundSetting\",\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":818,\"className\":\"bof.olapquery.config.configitem.OlapGridDataBackgroundSetting\",\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":819,\"className\":\"bof.olapquery.config.configitem.OlapSpacingLineBackgroundSetting\",\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":820,\"className\":\"bof.olapquery.config.configitem.OlapHeaderBackgroundSetting\",\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":822,\"className\":\"bof.olapquery.config.configitem.OlapHeaderFontColorSetting\",\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":823,\"className\":\"bof.olapquery.config.configitem.OlapDataFontColorSetting\",\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":824,\"className\":\"bof.olapquery.config.configitem.OlapHeaderFontSizeSetting\",\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":825,\"className\":\"bof.olapquery.config.configitem.OlapDataFontSizeSetting\",\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"多维分析设置\",\"groupName\":\"字体|背景颜色设置\",\"itemNumber\":825.5,\"className\":\"bof.olapquery.config.configitem.ApplyDefaultFontSettings\",\"licenseInfo\":[\"Analysis\"]},{\"tabName\":\"公共设置\",\"groupName\":\"公共设置\",\"itemNumber\":107.51,\"className\":\"smartbi.sysconfig.ApplyDefaultChartColors\"},{\"tabName\":\"公共设置\",\"groupName\":\"公共设置\",\"itemNumber\":107.5,\"className\":\"smartbi.sysconfig.DefaultChartColors\"},{\"tabName\":\"公共设置\",\"groupName\":\"公共设置\",\"itemNumber\":107.6,\"className\":\"smartbi.sysconfig.ChartToolbarDisplay\"},{\"tabName\":\"公共设置\",\"groupName\":\"公共设置\",\"itemNumber\":9801,\"className\":\"ext.extension.JSPProcessorType\"},{\"tabName\":\"缓存设置\",\"groupName\":\"电子表格\",\"itemNumber\":1502,\"className\":\"smartbi.spreadsheetreport.config.SpreadsheetReportBOPool\"},{\"tabName\":\"缓存设置\",\"groupName\":\"电子表格\",\"itemNumber\":1503,\"className\":\"smartbi.spreadsheetreport.config.SpreadsheetReportExecutedReportPool\"},{\"tabName\":\"缓存设置\",\"groupName\":\"电子表格\",\"itemNumber\":1504,\"className\":\"smartbi.spreadsheetreport.config.SpreadsheetReportOutputPool\"},{\"tabName\":\"缓存设置\",\"groupName\":\"电子表格\",\"itemNumber\":1505,\"className\":\"smartbi.spreadsheetreport.config.SpreadsheetReportMaxDataSetRows\"},{\"tabName\":\"缓存设置\",\"groupName\":\"电子表格\",\"itemNumber\":1506,\"className\":\"smartbi.spreadsheetreport.config.SpreadsheetReportMaxCells\"},{\"tabName\":\"公共设置\",\"groupName\":\"公共设置\",\"itemNumber\":9101,\"licenseInfo\":[\"Mobile\"],\"className\":\"ext.IPad.IPadRegisterType\"},{\"tabName\":\"仪表盘设置\",\"groupName\":\"离线设置\",\"className\":\"bof.decisionpanel.config.configitem.OfflineMaxTotal\",\"itemNumber\":921,\"licenseInfo\":[\"Mobile\"]},{\"tabName\":\"仪表盘设置\",\"groupName\":\"离线设置\",\"className\":\"bof.decisionpanel.config.configitem.OfflineMaxPage\",\"itemNumber\":922,\"licenseInfo\":[\"Mobile\"]},{\"tabName\":\"仪表盘设置\",\"groupName\":\"仪表盘设置\",\"className\":\"bof.decisionpanel.config.configitem.DashletTitleDisplay\",\"itemNumber\":903,\"licenseInfo\":[\"Mobile\"]},{\"tabName\":\"公共设置\",\"groupName\":\"公共设置\",\"itemNumber\":200,\"className\":\"ext.configitems.ExcelExportCount\"},{\"tabName\":\"公共设置\",\"groupName\":\"公共设置\",\"itemNumber\":201,\"className\":\"ext.configitems.ExcelExportProtection\"}]}}};","js/bof/reportcomment/CommentForPageHandler.js":"HTTP Status 404 . filename not found: /vision/js/bof/reportcomment/CommentForPageHandler.js","js/bof/reportcomment/ReportCommentUtil.js":"HTTP Status 404 . filename not found: /vision/js/bof/reportcomment/ReportCommentUtil.js","js/freequery/common/FrameView.js":"\nvar Module2=jsloader.resolve(\"freequery.widget.Module2\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var LocationBar=jsloader.resolve(\"freequery.common.LocationBar\");var compatutil=jsloader.resolve(\"freequery.lang.compatutil\");var FrameView=function(container){FrameView.superclass.constructor.call(this);this._parent=container;this.onClose=new CustomEvent(\"onClose\",this);var template=domutils.doGet(\"js/freequery/common/FrameView.html\");if(domutils.isFirefox()){var regexp=/<div[^>]+class=\"_frameViewContainer\"[^>]+>.*?<\\/div>/g;template=compatutil.fixFirefoxScroll(template,regexp);}\nthis._parent.innerHTML=template;this.frameViewContainer=domutils.findElementByClassName(this._parent,\"_frameViewContainer\");this.titleArea=domutils.findElementByClassName(this._parent,\"_loc\");this.elemOuterFrame=domutils.findElementByClassName(this._parent,\"_outerFrame\");this.initLocationBar();};lang.extend(FrameView,Module2);FrameView.prototype.destroy=function(){if(this.frameViewContainer){this.frameViewContainer.innerHTML=\"\";this.frameViewContainer=null;}\nif(this.locationBar){this.frameCloseButton=null;this.locationBar.destroy();this.locationBar=null;}\nif(this._parent)\nthis._parent.innerHTML=\"\";this.titleArea=null;this.elemOuterFrame=null;this.onClose=null;FrameView.superclass.destroy.call(this);};FrameView.prototype.initLocationBar=function(){this.locationBar=new LocationBar(this.titleArea);this.locationBar.setCloseButtonFunction(this.doClose,this);this.frameCloseButton=this.locationBar.elemCloseButton;}\nFrameView.prototype.setFrameTitleLocal=function(titleLocal){this.locationBar.setCurrentPath(titleLocal);};FrameView.prototype.getFrameTitleLocal=function(){return this.locationBar.getCurrentPath();};FrameView.prototype.setFrameTitle=function(title){this.locationBar.setCurrentLocation(title);};FrameView.prototype.getFrameTitle=function(){return this.locationBar.getCurrentLocation();};FrameView.prototype.setFrameCloseButtonVisibility=function(visible){this.locationBar.setCloseButtonVisibility(visible);};FrameView.prototype.setFrameMaxButtonVisibility=function(visible){this.locationBar.setMaxButtonVisibility(visible);};FrameView.prototype.doClose=function(){this.onClose.fire(this);};FrameView.prototype.hideLocationBar=function(){if(this.titleArea.tagName==\"TD\"){this.titleArea.parentNode.style.display=\"none\";}else{this.titleArea.style.display=\"none\";}};FrameView.prototype.showLocationBar=function(){if(this.titleArea.tagName==\"TD\"){this.titleArea.parentNode.style.display=\"\";}else{this.titleArea.style.display=\"\";}};FrameView.prototype.setFrameBorder=function(flag){if(flag){this.elemOuterFrame.className=\"frame_border\";}else{this.elemOuterFrame.className=\"\";}};","js/freequery/common/LocationBar.js":"\nvar util=jsloader.resolve(\"freequery.common.util\");var LocationBar=function(container){this.init(container,__url);this.onMinFrame=new CustomEvent(\"onMinFrame\",this);this.onMaxFrame=new CustomEvent(\"onMaxFrame\",this);};lang.extend(LocationBar,\"freequery.widget.Module2\");LocationBar.prototype.setCloseButtonVisibility=function(visible){if(visible){this.elemCloseButton.style.visibility=\"visible\";}else{this.elemCloseButton.style.visibility=\"hidden\";}};LocationBar.prototype.setMaxButtonVisibility=function(visible){if(visible){this.elemMaxButton.style.visibility=\"visible\";}else{this.elemMaxButton.style.visibility=\"hidden\";}};LocationBar.prototype.setCloseButtonFunction=function(closefun,that){this.closeHandler=closefun;this.that=that;if(that.onClose){that.onClose.subscribe(this.reZoom,this);}}\nLocationBar.prototype.setCurrentPath=function(txt){this.elemCurPath.innerHTML=txt;}\nLocationBar.prototype.getCurrentPath=function(){return this.elemCurPath.innerHTML;}\nLocationBar.prototype.setCurrentLocation=function(txt){this.elemCurLocation.innerHTML=txt;this.elemFrameTitleBar.title=this.elemCurPath.innerText+this.elemCurLocation.innerText;}\nLocationBar.prototype.getCurrentLocation=function(){return this.elemCurLocation.innerHTML;}\nLocationBar.prototype.elemMaxButton_click_handler=function(e){this.doMaxFrame();}\nLocationBar.prototype.doMaxFrame=function(){var state=util.toggleMaximize();if(this.elemMaxButton){this.elemMaxButton.src=state?\"img/mainframe/original.gif\":\"img/mainframe/max.gif\";}\nif(state){this.onMaxFrame.fire();}else{this.onMinFrame.fire();}}\nLocationBar.prototype.elemCloseButton_click_handler=function(e){if(this.closeHandler){this.closeHandler.call(this.that);}}\nLocationBar.prototype.reZoom=function(){if(document.body.maximizing){this.doMaxFrame();}}\nLocationBar.prototype.clearCloseButtonFunction=function(closefun,that){this.closeHandler=closefun;this.that=that;if(that.onClose){that.onClose.unsubscribe(this.reZoom,this);}};LocationBar.prototype.elemBartr_dblclick_handler=function(e){this.doMaxFrame();}","js/freequery/lang/eventutil.js":"\nvar eventutil={addEventHandler:document.addEventListener?function(el,type,fn,cap){if(!el){return;}else if(el.addEventListener){el.addEventListener(type,fn,!!cap);}else{el['on'+type]=fn;}}:function(el,type,fn){if(!el){return;}else if(el.attachEvent){el.attachEvent('on'+type,fn);}else{el['on'+type]=fn;}},removeEventHandler:document.removeEventListener?function(el,type,fn,cap){if(!el){return;}else if(el.removeEventListener){el.removeEventListener(type,fn,!!cap);}else{el['on'+type]=null;}}:function(el,type,fn){if(!el){return;}else if(el.detachEvent){el.detachEvent('on'+type,fn);}else{el['on'+type]=null;}},getEvent:function(noFix,win){var p,fn,w=win||window,ev=w.event;if(!ev&&typeof Event!=\"undefined\"){fn=arguments.callee;while((fn=fn.caller)){p=fn.arguments[0];if(p&&(p.constructor===Event||p.constructor===MouseEvent||(p.preventDefault&&p.stopPropagation))){ev=p;break;}}}\nif(ev&&!noFix){ev=eventutil.fix(ev,w.document);}\nreturn ev;},fix:function(ev,docu){var d=docu||document;if(!ev.target){ev.target=ev.srcElement||d;}\nif(ev.target.nodeType===3){ev.target=ev.target.parentNode;}\nif(!ev.relatedTarget&&ev.fromElement){ev.relatedTarget=ev.fromElement===ev.target?ev.toElement:ev.fromElement;}\nif(ev.pageX==null&&ev.clientX!=null){var doc=d.documentElement,body=d.body;ev.pageX=ev.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)\n-(doc&&doc.clientLeft||body&&body.clientLeft||0);ev.pageY=ev.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)\n-(doc&&doc.clientTop||body&&body.clientTop||0);}\nif(ev.which==null&&(ev.charCode!=null||ev.keyCode!=null)){ev.which=ev.charCode!=null?ev.charCode:ev.keyCode;}\nif(!ev.metaKey&&ev.ctrlKey&&!domutils.isFirefox()){ev.metaKey=ev.ctrlKey;}\nif(!ev.which&&ev.button!==undefined){ev.which=(ev.button&1?1:(ev.button&2?3:(ev.button&4?2:0)));}\nif(ev.layerX==null&&ev.offsetX!=null){ev.layerX=ev.offsetX;}\nif(ev.layerY==null&&ev.offsetY!=null){ev.layerY=ev.offsetY;}\nif(ev.charCode==null&&ev.keyCode!=null){ev.charCode=ev.keyCode;}\nif(ev.eventPhase==null){ev.eventPhase=2;}\nif(!ev.preventDefault){ev.fixedPreventDefault=true;ev.preventDefault=this._preventDefault;}\nif(!ev.stopPropagation){ev.fixedStopPropagation=true;ev.stopPropagation=this._stopPropagation;}\nreturn ev;},_preventDefault:function(){this.returnValue=false;},_stopPropagation:function(){this.cancelBubble=true;}};","js/bof/macro/PageMacroExecutor.js":"\nvar MacroService=imports(\"bof.macro.services.MacroService\");var PageMacroExecutor=function(resource,targetName,eventName,args,script){this.resource=resource;this.context=resource.portal;this.targetName=targetName;this.evenetType=eventName;this.args=args;this.script=script;};PageMacroExecutor.prototype.run=function(module){var application={};var openOlapQuery=function(id,callback){if(callback){var ret=util.remoteInvokeEx(\"CatalogService\",\"getCatalogElementById\",[id]);if(ret&&ret.succeeded){if(!ret.result){alert(\"报表已被删除\");return;}}\nvar sBaseURL=jsloader.baseHref;if(typeof needToolBar==\"undefined\")\nneedToolBar=true;var url=sBaseURL+\"openresource.jsp?notNeedLogon=true&showtoolbar=\"+needToolBar+\"&resid=\"+id;var wnd=window.open(url);if(wnd.queryCmd){var olapQueryView=wnd.queryCmd.olapQueryView;callback(olapQueryView);}else{var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");eventutil.addEventHandler(wnd,'load',function(){var time=setInterval(function(){if(wnd&&wnd.classAction&&wnd.classAction.olapQueryCommand&&wnd.classAction.olapQueryCommand.olapQueryView&&wnd.classAction.olapQueryCommand.olapQueryView.clientId){clearInterval(time);var olapQueryView=wnd.classAction.olapQueryCommand.olapQueryView;callback(olapQueryView);}},100);});}}else{alert(\"not support in present\")}};application.openOlapQuery=openOlapQuery;eval(\"var \"+this.resource.getResourceType()+\" = this.resource;\");eval(\"application.\"+this.resource.getResourceType()+\" = \"+this.resource.getResourceType()+\";\");var event={arguments:this.args};application.event=event;application.application=application;application.module=module;var resourceId=this.resource.getResourceId();var use=function(moduleName){eval(MacroService.getInstance().findCommonModule(resourceId?resourceId:null,moduleName,\"ClientSide\"));return loadCommonModule();};eval(this.script);main.apply(null,this.args);};","js/freequery/menu/PopupMenu.js":"var Module = jsloader.resolve(\"freequery.widget.Module\");\r\nvar util = jsloader.resolve(\"freequery.common.util\");\r\nvar CustomEvent = jsloader.resolve(\"freequery.lang.CustomEvent\");\r\n\r\nvar menuid = 0;\r\nvar menuitemid = 0;\r\n\r\n/**\r\n * \r\n * @constructor\r\n * \r\n * @param parent\r\n * \t父对象\r\n * @param handler\r\n * \t命令处理对象，该对象应该符合freequery.menu.PopupMenuHandler的定义。\r\n * @param donotRemoveFromDOM\r\n */\r\nvar PopupMenu = function(parent, handler, donotRemoveFromDOM) {\r\n\t\r\n\tmenuid++;\r\n\tthis.CSS_MENUPANE = \"popupMenuPane\";\r\n\r\n\tthis.doc = (parent && parent.nodeType == 1) ? parent.ownerDocument : document;\r\n\tthis.popMenuFrame = this.doc.createElement(\"IFRAME\");\r\n\tthis.popMenuFrame.frameBorder = \"no\";\r\n\tthis.popMenuFrame.border = 0;\r\n\tthis.popMenuFrame.style.position = \"absolute\";\r\n\tthis.popMenuFrame.style.zIndex = \"999\";\r\n\tthis.popMenuFrame.style.display = \"none\";\r\n\tthis.doc.body.appendChild(this.popMenuFrame);\r\n\r\n\tvar template = domutils.doGet(\"popowner.html\");\r\n\tthis.popMenuFrame.contentWindow.document.write(template);\r\n\tthis.popMenuFrame.contentWindow.document.close();\r\n\t\r\n\tthis.parent = this.popMenuFrame.contentWindow.document.body;\r\n\r\n\tthis.menuPane = this.popMenuFrame.contentWindow.document.createElement(\"DIV\");\r\n\tthis.menuPane.className = this.CSS_MENUPANE;\r\n\tthis.menuid = \"Menu:\"+menuid;\r\n\tthis.menuPane.menuid = \"Menu:\"+menuid;\r\n\r\n\tif(donotRemoveFromDOM) {\r\n\t\tthis.donotRemoveFromDOM = true;\r\n\t\tthis.parent.appendChild(this.menuPane);\r\n\t\tthis.menuPane.style.display = \"none\";\r\n\t}\r\n\tthis.menuItems = new Array();\r\n\tthis.handler = handler;\r\n\tthis.onHide = new CustomEvent(\"onHide\", this);\r\n\t\r\n\tthis.initOther();\r\n};\r\n\r\nlang.extend(PopupMenu, Module);\r\n\r\nPopupMenu.prototype.initOther = function() {\r\n\t\r\n};\r\n\r\nPopupMenu.prototype.destroy = function() {\r\n\tfor(var i = 0; i < this.menuItems.length; i++)\r\n\t\tthis.menuItems[i].destroy();\r\n\tthis.parent = null;\r\n\tdomutils.destroyNode(this.menuPane);\r\n\tdomutils.destroyNode(this.fileref);\r\n\tthis.removeListener(this.doc, \"mousedown\", this.doOnMouseDown, this);\r\n\tthis.removeListener(this.doc, \"keydown\", this.doOnKeyDown, this);\r\n\ttry {\r\n\t\tthis.removeListener(this.popMenuFrame.contentWindow.document, \"keydown\", this.doOnKeyDown, this);\r\n\t\tthis.removeListener(this.popMenuFrame.contentWindow.document, \"contextmenu\", this.onContextMenu, this);\r\n\t\tthis.removeListener(this.popMenuFrame.contentWindow.document, \"selectstart\", this.doOnSelectStart, this);\r\n\t} catch (e){\r\n\t\t// 拒绝访问this.popMenuFrame.contentWindow.document\r\n\t}\r\n\tPopupMenu.superclass.destroy.call(this);\r\n\tdomutils.destroyNode(this.popMenuFrame);\r\n};\r\n\r\nPopupMenu.prototype.getDoc = function() {\r\n\treturn this.doc;\r\n};\r\n\r\nPopupMenu.prototype.doOnSelectStart = function(e) {\r\n\tdomutils.preventDefault(e);\r\n};\r\n\r\nPopupMenu.prototype.onContextMenu = function(e) {\r\n\tdomutils.preventDefault(e);\r\n};\r\n\r\nPopupMenu.prototype.createMenuItem = function(text, cmd, accessKey, icon, beforeText) {\r\n\tvar menuItem = new PopupMenuItem(this,this.menuPane, text, cmd, accessKey, icon, beforeText);\r\n\tif(this.width)\r\n\t\tmenuItem.itemPane.style.width = this.width;\r\n\t\t\t\r\n\tmenuItem.menu = this;\r\n\tmenuItem.handler = this.handler;\r\n\tthis.menuItems.push(menuItem);\r\n\treturn menuItem;\r\n};\r\n\r\nPopupMenu.prototype.removeMenuItem = function(text){\r\n\t\r\n}\r\n\r\nPopupMenu.prototype.createSeparator = function() {\r\n\tvar result = new PopupMenuSeparator(this);\r\n\tthis.menuPane.appendChild(result.separatorPane);\r\n\treturn result;\r\n};\r\n\r\nPopupMenu.prototype.clear = function(){\r\n\tthis.menuItems = new Array();\r\n\tthis.menuPane.innerHTML = \"\";\r\n};\r\n\r\nPopupMenu.prototype.getViewport = function() {\r\n\tvar mode = this.doc.compatMode;\r\n\tvar result = new Object();\r\n\r\n\tif (mode || domutils.isIE()) {\r\n\t\tswitch (mode) { // (IE, Gecko)\r\n\t\t\tcase 'CSS1Compat': // Standards mode\r\n\t\t\t\tresult.width = this.doc.documentElement.clientWidth;\r\n\t\t\t\tresult.height = this.doc.documentElement.clientHeight;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault: // Quirks\r\n\t\t\t\tresult.width = this.doc.body.clientWidth;\r\n\t\t\t\tresult.height = this.doc.body.clientHeight;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n};\r\n\r\nPopupMenu.prototype.popup = function(e) {\r\n\tvar x = e.clientX;\r\n\tvar y = e.clientY;\r\n\r\n\tif(this.donotRemoveFromDOM)\r\n\t\tthis.menuPane.style.display = \"\";\r\n\telse\r\n\t\tthis.parent.appendChild(this.menuPane);\r\n\r\n\tthis.popMenuFrame.style.display = \"\";\r\n\r\n\t// begin by Guo JingFeng 2011-02-18\r\n\t// 当浏览器为Firefox时，控件的宽度不会因为里面的文字的长度而改变\r\n\t// 为了适应文字的长度，不需要设置控件的宽度。因为样式表中已经设置有宽度，\r\n\t// 所以，不能只是设置为空，而是要设置为本来的默认值“auto”\r\n\tif (!domutils.isIE()) {\r\n\t\tthis.menuPane.style.width = \"auto\";\r\n\t\tvar optionSize = this.menuPane.childNodes.length;\r\n\t\tfor (var i = 0; i < optionSize; i++) {\r\n\t\t\tvar optionDiv = this.menuPane.childNodes[i];\r\n\t\t\toptionDiv.style.width = \"auto\";\r\n\t\t}\r\n\t}\r\n\t// end by Guo JingFeng 2011-02-18\r\n\t\r\n\tvar menuClientWidth = this.menuPane.clientWidth;\r\n\tmenuClientWidth += 2;\r\n\r\n\tvar menuClientHeight = this.menuPane.clientHeight;\r\n\tmenuClientHeight += 2;\r\n\r\n\tif(this.donotRemoveFromDOM)\r\n\t\tthis.menuPane.style.display = \"none\";\r\n\telse if(this.menuPane.parentNode == this.parent)\r\n\t\tthis.parent.removeChild(this.menuPane);\r\n\t\r\n\tif (menuClientWidth <= 2 || menuClientHeight <= 2) {\r\n\t\tvar self = this;\r\n\t\twindow.setTimeout(function(){\r\n\t\t\tself.popup({\r\n\t\t\t\tclientX: x,\r\n\t\t\t\tclientY: y\r\n\t\t\t});\r\n\t\t}, 1);\r\n\t\tdomutils.stopEvent(e);\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar view = this.getViewport();\r\n\tif(x + menuClientWidth > view.width) {\r\n//\t\tx -= menuClientWidth;\r\n//\t\tif(x < 0)\r\n//\t\t\tx = view.width - menuClientWidth;\r\n\t\tx = view.width - menuClientWidth;\r\n\t\tif (x<0)\r\n\t\t\tx =0 ;\r\n\t}\r\n\tif(y + menuClientHeight > view.height) {\r\n//\t\ty -= menuClientHeight;\r\n//\t\tif(y < 0)\r\n//\t\t\ty = view.height - menuClientHeight;\r\n\t\ty = view.height-menuClientHeight;\r\n\t\tif (y<0)\r\n\t\t\ty=0;\t\r\n\t}\r\n\tthis.show(x, y, menuClientWidth, menuClientHeight);\r\n\tdomutils.stopEvent(e);\r\n\t\r\n\t// begin by Guo JingFeng 2011-02-18\r\n\t// 当浏览器为Firefox时，控件的宽度不会因为里面的文字的长度而改变\r\n\t// 为了适应文字的长度，不需要设置控件的宽度。因为样式表中已经设置有宽度，\r\n\t// 所以，不能只是设置为空，而是要设置为本来的默认值“auto”\r\n\tif (!domutils.isIE()) {\r\n\t\tthis.popMenuFrame.style.width = \"auto\";\r\n\t}\r\n\t// end by Guo JingFeng 2011-02-18\r\n}\r\n\r\n\r\nPopupMenu.prototype.show = function(x, y, width, height) {\r\n\t\r\n\tthis.parent.appendChild(this.menuPane);\r\n\tthis.popMenuFrame.style.display = '';\r\n\t\r\n\tthis.popMenuFrame.style.left = x;\r\n\tthis.popMenuFrame.style.top = y;\r\n\t\r\n\tvar view = this.getViewport();\r\n\t\r\n\tvar n = this.menuPane.firstChild;\r\n\twhile(n) {\r\n\t\tif(!n._separator && n.style.display != \"none\")\r\n\t\t\tbreak;\r\n\t\tn.style.display = \"none\";\r\n\t\tn = n.nextSibling;\r\n\t}\r\n\tvar n = this.menuPane.lastChild;\r\n\twhile(n) {\r\n\t\tif(!n._separator && n.style.display != \"none\")\r\n\t\t\tbreak;\r\n\t\tn.style.display = \"none\";\r\n\t\tn = n.previousSibling;\r\n\t}\r\n\t\r\n\t\r\n\t/******************** 消灭分割线同时出现2条的情况***********************/\r\n\tvar n = this.menuPane.firstChild;\r\n\tvar count = 0;\r\n\tvar last_visiable_separator = -1;\r\n\twhile(n) \r\n\t{\r\n\t\tif(n.style.display != \"none\")\r\n\t\t{\r\n\t\t\tcount++;           //可是菜单项计数         \r\n\t\t\tif (n._separator)  //是分割条\r\n\t\t\t{\r\n\t\t\t\tif (last_visiable_separator!= count-1 )\r\n\t\t\t\t\tlast_visiable_separator = count;\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tn.style.display = \"none\";\r\n\t\t\t\t\tlast_visiable_separator = count;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tn = n.nextSibling;\r\n\t}\r\n\t/******************************************************************/\r\n//\tdebugger;\r\n\tif(this.donotRemoveFromDOM)\r\n\t\tthis.menuPane.style.display = \"\";\r\n\telse\r\n\t\tthis.parent.appendChild(this.menuPane);\r\n//\tthis.menuPane.style.left = x;\r\n//\tthis.menuPane.style.top = y;\r\n\t\t\r\n\tthis.addListener(this.doc, \"mousedown\", this.doOnMouseDown, this);\r\n\tthis.addListener(this.doc, \"keydown\", this.doOnKeyDown, this);\r\n\tthis.addListener(this.popMenuFrame.contentWindow.document, \"keydown\", this.doOnKeyDown, this);\r\n\tthis.addListener(this.popMenuFrame.contentWindow.document, \"contextmenu\", this.onContextMenu, this);\r\n\tthis.addListener(this.popMenuFrame.contentWindow.document, \"selectstart\", this.doOnSelectStart, this);\r\n\t\r\n\tthis.menuPane.style.display=\"none\";\r\n\tthis.menuPane.style.display=\"\";\r\n\t\r\n\tthis.menuPane.style.left = 0\r\n\tthis.menuPane.style.top = 0;\r\n\tthis.popMenuFrame.style.height = this.heightFix ? this.heightFix : (height ? height : this.menuPane.clientHeight + 2);\r\n\tthis.popMenuFrame.style.width = this.widthFix ? this.widthFix : (width ? width : this.menuPane.clientWidth + 2);\r\n};\r\n\r\nPopupMenu.prototype.doOnMouseDown = function(e) {\r\n\tvar obj = e.target;\r\n\twhile(obj != null && obj != this.menuPane) {\r\n\t\tobj = obj.parentNode;\r\n\t}\r\n\tif(obj == null) {\r\n\t\tthis.hide();\r\n\t}\r\n};\r\n\r\nPopupMenu.prototype.doOnKeyDown = function(e) {\r\n\tfor(var i = 0; i < this.menuItems.length; i++) {\r\n\t\tvar menuItem = this.menuItems[i];\r\n\t\tif(menuItem.accessKey && menuItem.accessKey == e.keyCode) {\r\n\t\t\tif(menuItem.enabled && menuItem.visible) {\r\n\t\t\t\tif(menuItem.menuItems) {\r\n\t\t\t\t\tmenuItem.showingChild = true;\r\n\t\t\t\t\tvar point = menuItem.getChildPopupPoint();\r\n\t\t\t\t\tmenuItem.menuItems.show(point.left, point.top);\r\n\t\t\t\t} else {\t\t\r\n\t\t\t\t\tthis.hideAll();\r\n\t\t\t\t\tif(menuItem.handler && menuItem.cmd)\r\n\t\t\t\t\t\tmenuItem.handler.doCmd(menuItem.cmd);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tdomutils.preventDefault(e);\r\n};\r\n\r\nPopupMenu.prototype.hide = function() {\r\n\tif(this.parentMenu)\r\n\t\tthis.parentMenu.showingChild = false;\r\n\t\r\n\tif(this.donotRemoveFromDOM)\r\n\t\tthis.menuPane.style.display = \"none\";\r\n\telse if(this.menuPane.parentNode == this.parent)\r\n\t\tthis.parent.removeChild(this.menuPane);\r\n\tthis.removeListener(this.doc, \"mousedown\", this.doOnMouseDown, this);\r\n\tthis.removeListener(this.doc, \"keydown\", this.doOnKeyDown, this);\r\n\tthis.removeListener(this.popMenuFrame.contentWindow.document, \"keydown\", this.doOnKeyDown, this);\r\n\tthis.removeListener(this.popMenuFrame.contentWindow.document, \"contextmenu\", this.onContextMenu, this);\r\n\tthis.removeListener(this.popMenuFrame.contentWindow.document, \"selectstart\", this.doOnSelectStart, this);\r\n\r\n\tfor (var i=0; i<this.menuItems.length; i++) {\r\n\t\tvar item = this.menuItems[i];\r\n\t\tdomutils.replaceClassName(item.itemPane, item.CSS_ITEMPANE, item.CSS_ITEMOVER);\r\n\t\titem.hideSubMenus();\r\n\t}\r\n\t\t\r\n\tthis.popMenuFrame.style.display = 'none';\r\n\ttry{\r\n\t\tthis.parent.removeChild(this.menuPane);\r\n\t}catch(e){}\r\n\tthis.onHide.fire();\r\n};\r\n\r\nPopupMenu.prototype.hideAll = function() {\r\n\tthis.hide();\r\n\tvar parent = this.parentMenu;\r\n\twhile(parent != null) {\r\n\t\tparent.hide();\r\n\t\tparent = parent.parentMenu;\r\n\t}\r\n\tthis.popMenuFrame.style.display = 'none';\r\n};\r\n\r\nPopupMenu.prototype.hideSubMenuExceptFor = function(item){\r\n\tfor(var i=0; i<this.menuItems.length; i++) {\r\n\t\tif (item!=this.menuItems[i])\r\n\t\t\tthis.menuItems[i].hideSubMenus();\r\n\t}\r\n};\r\n\r\nPopupMenu.prototype.showBelow = function(obj) {\r\n\tthis.popMenuFrame.style.display = '';\r\n\tvar view = this.getViewport();\r\n\tvar offset = this.getOffset(obj);\r\n\r\n\tif(this.donotRemoveFromDOM)\r\n\t\tthis.menuPane.style.display = \"\";\r\n\telse\r\n\t\tthis.parent.appendChild(this.menuPane);\r\n\r\n\tvar menuClientWidth = this.menuPane.clientWidth;\r\n\r\n\tvar menuClientHeight = this.menuPane.clientHeight;\r\n\r\n\tif(this.donotRemoveFromDOM)\r\n\t\tthis.menuPane.style.display = \"none\";\r\n\telse if(this.menuPane.parentNode == this.parent)\r\n\t\tthis.parent.removeChild(this.menuPane);\r\n\r\n\tvar x = offset.left;\r\n\tvar y = offset.top + obj.offsetHeight;\r\n\tif(x + menuClientWidth > view.width) {\r\n\t\tx -= menuClientWidth - obj.offsetWidth;\r\n\t\tif(x < 0)\r\n\t\t\tx = 0;\r\n\t}\r\n\tthis.show(x, y);\r\n};\r\n\r\nPopupMenu.prototype.getOffset = function(obj) {\r\n\tvar p = new Object();\r\n\tp.left = 0;\r\n\tp.top = 0;\r\n\twhile(obj) {\r\n\t\tp.left += obj.offsetLeft;\r\n\t\tp.top += obj.offsetTop;\r\n\t\tobj = obj.offsetParent;\r\n\t}\r\n\treturn p;\r\n};\r\n\r\n//避免出现滚动条时位置不准\r\nPopupMenu.prototype.getOffsetEx = function(obj) {\r\n\tvar p = new Object();\r\n\tp.left = 0;\r\n\tp.top = 0;\r\n\twhile(obj) {\r\n\t\tp.left += (obj.offsetLeft - obj.scrollLeft);\r\n\t\tp.top += (obj.offsetTop - obj.scrollTop);\r\n\t\tobj = obj.offsetParent;\r\n\t}\r\n\treturn p;\r\n};\r\n\r\n//向下显示，位置不够时向上显示\r\nPopupMenu.prototype.showBelowEx = function(obj) {\r\n\tthis.popMenuFrame.style.display = '';\r\n\tvar view = this.getViewport();\r\n\r\n\tvar offset = this.getOffsetEx(obj);\r\n\tif(this.donotRemoveFromDOM)\r\n\t\tthis.menuPane.style.display = \"\";\r\n\telse\r\n\t\tthis.parent.appendChild(this.menuPane);\r\n\r\n\tvar menuClientWidth = this.menuPane.clientWidth;\r\n\r\n\tvar menuClientHeight = this.menuPane.clientHeight;\r\n\r\n\tif(this.donotRemoveFromDOM)\r\n\t\tthis.menuPane.style.display = \"none\";\r\n\telse if(this.menuPane.parentNode == this.parent)\r\n\t\tthis.parent.removeChild(this.menuPane);\r\n\r\n\tvar x = offset.left;\r\n\tvar y = offset.top + obj.offsetHeight;\r\n\tif(x + menuClientWidth > view.width) {\r\n\t\tx -= menuClientWidth - obj.offsetWidth;\r\n\t\tif(x < 0)\r\n\t\t\tx = 0;\r\n\t}\r\n\tif(y + menuClientHeight > view.height) {\r\n\t\ty = y - menuClientHeight - obj.offsetHeight;\r\n\t\tif(y < 0)\r\n\t\t\ty = 0;\r\n\t}\t\r\n\tthis.show(x, y);\r\n};\r\n\r\nPopupMenu.prototype.setWidth = function(width) {\r\n\tthis.width = width;\r\n\tthis.menuPane.style.width = width;\r\n};\r\n\r\n//--------------------------------------------------------------------------------------\r\nvar PopupMenuSeparator = function(parentMenu) {\r\n\tthis.visible = true;\r\n\tthis.enabled = true;\r\n\tthis.separatorPane = parentMenu.popMenuFrame.contentWindow.document.createElement(\"DIV\");\r\n\tthis.separatorPane._separator = true; \r\n\tthis.separatorPane.innerHTML = \"<div style='margin:0px 0px 0px 0px;padding:0px 0px 0px 0px;color:#808080;border-style:solid;border-width:1px;border-color: #808080 #ffffff #ffffff #ffffff;'><\/div>\";\r\n};\r\n\r\nPopupMenuSeparator.prototype.setVisibility = function(visible) {\r\n\tthis.visible = visible;\r\n\tthis.separatorPane.style.display = visible ? \"\" : \"none\";\r\n};\r\n\r\n//--------------------------------------------------------------------------------------\r\nvar PopupMenuItem = function(parentMenu,parent, text, cmd, accessKey, icon, beforeText) {\r\n\tthis.parentMenu = parentMenu; \r\n\tthis.doc = parentMenu.doc || document;\r\n\t\r\n\tthis.CSS_ITEMPANE = \"popupMenuItemPane\";\r\n\tthis.CSS_ITEMDISABLED = \"popupMenuDisabled\";\r\n\tthis.CSS_ITEMICON = \"popupMenuItemIcon\";\r\n\tthis.CSS_ITEMTEXT = \"popupMenuItemTextSpan\";\r\n\tthis.CSS_ITEMOVER = \"popupMenuItemOver\";\r\n\tthis.CSS_CHILDARROW = \"popupMenuItemArrow\";\r\n\r\n\tthis.visible = true;\r\n\tthis.enabled = true;\r\n\t\r\n\tthis.itemPane = parentMenu.popMenuFrame.contentWindow.document.createElement(\"DIV\");\r\n\tvar inserted = false;\r\n\tif ( beforeText ) {\r\n\t\tfor ( var child = parent.firstChild; child; child = child.nextSibling ) {\r\n\t\t\tif ( child.getAttribute(\"_separator\") ) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tvar itemText = util.getInnerText(child.childNodes[1]);\r\n\t\t\tif ( itemText && itemText.indexOf(beforeText) == 0 ) {\r\n\t\t\t\tparent.insertBefore(this.itemPane, child);\r\n\t\t\t\tinserted = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif ( !inserted ) {\r\n\t\tparent.appendChild(this.itemPane);\t\t\r\n\t}\r\n\tthis.itemPane.className = this.CSS_ITEMPANE;\r\n\tthis.itemPane.noWrap = true;\r\n\t// begin by Guo JingFeng 2011-02-28\r\n\t// 当浏览器为Firefox时，控件的宽度不会因为里面的文字的长度而改变\r\n\t// 为了适应文字的长度，不需要设置控件的宽度。因为样式表中已经设置有宽度，\r\n\t// 所以，不能只是设置为空，而是要设置为本来的默认值“auto”\r\n\tif (!domutils.isIE()) {\r\n\t\tthis.itemPane.style.width = \"auto\";\r\n\t}\r\n\t// end by Guo JingFeng 2011-02-28\r\n\t\r\n\tthis.icon = parentMenu.popMenuFrame.contentWindow.document.createElement(\"IMG\");\r\n\tthis.icon.className = this.CSS_ITEMICON;\r\n\tif(icon)\r\n\t\tthis.icon.src = icon;\r\n\telse \r\n\t\tthis.icon.style.visibility = \"hidden\";\r\n\tthis.itemPane.appendChild(this.icon);\r\n\t\r\n\tthis.textSpan = parentMenu.popMenuFrame.contentWindow.document.createElement(\"SPAN\");\r\n\tthis.textSpan.className = this.CSS_ITEMTEXT;\r\n\tthis.itemPane.appendChild(this.textSpan);\r\n\r\n\tvar display = text;\r\n\tif(accessKey) {\r\n\t\tdisplay += \"(\" + accessKey + \")\";\r\n\t\tthis.accessKey = accessKey.charCodeAt(0);\r\n\t}\r\n\tthis.textSpan.appendChild(parentMenu.popMenuFrame.contentWindow.document.createTextNode(display));\r\n\r\n\tthis.addListener(this.itemPane, \"mouseover\", this.doOnMouseOver, this);\r\n\tthis.addListener(this.itemPane, \"mouseout\", this.doOnMouseOut, this);\r\n\r\n\tthis.addListener(this.itemPane, \"click\", this.doOnClick, this);\r\n\t\r\n\tthis.enabled = true;\r\n\tthis.cmd = cmd;\r\n\tthis.display = text;\r\n\tmenuitemid++;\r\n\tthis.menuitemid = \"MenuItem:\"+menuitemid;\r\n\tthis.itemPane.menuitemid = \"MenuItem:\"+menuitemid;\r\n\tthis.itemPane.display = this.display;\r\n};\r\n\r\nlang.extend(PopupMenuItem, Module);\r\n\r\nPopupMenuItem.prototype.destroy = function() {\r\n\tthis.parentMenu = null;\r\n\tif(this.menuItems)\r\n\t\tthis.menuItems.destroy();\r\n\tPopupMenuItem.superclass.destroy.call(this);\r\n};\r\n\r\nPopupMenuItem.prototype.hideSubMenus = function(){\r\n\tif (this.menuItems)\r\n\t\tthis.menuItems.hide();\r\n};\r\n\r\nPopupMenuItem.prototype.createMenuItem = function(text, cmd, accessKey, icon,beforeText) {\r\n\tif(!this.menuItems) {\r\n//\t\tthis.menuItems = new PopupMenu(this.itemPane, this.handler, true);\r\n\t\tthis.menuItems = new PopupMenu(this.doc.body, this.handler, true);\r\n\t\tthis.menuItems.parentMenu = this.menu;\r\n\t\tdomutils.addClassName(this.itemPane, this.CSS_CHILDARROW);\r\n\t}\r\n\tvar menuItem = this.menuItems.createMenuItem(text, cmd, accessKey, icon, beforeText);\r\n\r\n\tmenuItem.parent = this;\r\n\treturn menuItem;\r\n};\r\n\r\nPopupMenuItem.prototype.createSeparator = function() {\r\n\tif(!this.menuItems) {\r\n\t\tthis.menuItems = new PopupMenu(this.itemPane, this.handler);\r\n\t\tthis.menuItems.parentMenu = this.menu;\r\n\t\tdomutils.addClassName(this.itemPane, this.CSS_CHILDARROW);\r\n\t}\r\n\treturn this.menuItems.createSeparator();\r\n};\r\n\r\n\r\nPopupMenuItem.prototype.doOnMouseOver = function(e) {\r\n\tdomutils.replaceClassName(this.itemPane, this.CSS_ITEMOVER, this.CSS_ITEMPANE);\r\n\t\r\n\tthis.parentMenu.hideSubMenuExceptFor(this); \r\n\t\r\n\tif(this.menuItems && this.enabled) {\r\n//\t\tdebugger;\r\n\t\tthis.showingChild = true;\r\n\t\tvar point = this.getChildPopupPoint();\r\n\t\tif (this.menu&&this.menu.popMenuFrame){\r\n\t\t\tpoint.left += this.menu.popMenuFrame.offsetLeft\r\n\t\t\tpoint.top += this.menu.popMenuFrame.offsetTop\r\n\t\t}\r\n\t\tvar view = this.getViewport();\r\n\t\tvar visibilitySubItemLength = 0\r\n\t\tfor(var i = 0 ; i < this.menuItems.menuItems.length; i++) {\r\n\t\t\tif(this.menuItems.menuItems[i].getVisibility()) {\r\n\t\t\t\tvisibilitySubItemLength++;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar subMenuHeight = visibilitySubItemLength * 30;\r\n\t\tif(point.top + subMenuHeight > view.height) {\r\n\t\t\tvar mainMenuHeight = this.menu.menuPane.offsetHeight\r\n\t\t\tif(mainMenuHeight < subMenuHeight) {\r\n\t\t\t\tpoint.top = this.menu.popMenuFrame.offsetTop - ( subMenuHeight - mainMenuHeight);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar subMenuWidth = this.menuItems.menuPane.offsetWidth;\r\n\t\tif(point.left + subMenuWidth > view.width) {\r\n\t\t\tpoint.left = this.menu.popMenuFrame.offsetLeft - subMenuWidth;\r\n\t\t}\r\n\t\tthis.menuItems.show(point.left, point.top);\r\n\t\tsubMenuWidth = this.menuItems.menuPane.offsetWidth;\r\n\t\tif(point.left + subMenuWidth > view.width){\r\n\t\t\tpoint.left = this.menu.popMenuFrame.offsetLeft - subMenuWidth;\r\n\t\t\tthis.menuItems.show(point.left, point.top);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nPopupMenuItem.prototype.doOnMouseOut = function(e) {\r\n\tdomutils.replaceClassName(this.itemPane, this.CSS_ITEMPANE, this.CSS_ITEMOVER);\r\n//\tif(this.menuItems && this.showingChild) {\r\n//\t\tthis.showingChild = false;\r\n//\t\tthis.menuItems.hide();\r\n//\t}\r\n\t\r\n};\r\n\r\n\r\nPopupMenuItem.prototype.doOnClick = function(e) {\r\n\tif(this.parent)\r\n\t\tdomutils.replaceClassName(this.parent.itemPane, this.CSS_ITEMPANE, this.CSS_ITEMOVER);\r\n\tdomutils.replaceClassName(this.itemPane, this.CSS_ITEMPANE, this.CSS_ITEMOVER);\r\n\tif(!this.enabled || this.showingChild)\r\n\t\treturn;\r\n\r\n\tif(e.target == this.itemPane || e.target == this.icon || e.target == this.textSpan) {\r\n\t\tthis.menu.hideAll();\r\n\t\tif(this.handler && this.cmd)\r\n\t\t\tthis.handler.doCmd(this.cmd);\r\n\t}\r\n};\r\n\r\nPopupMenuItem.prototype.getChildPopupPoint = function() {\r\n\tif(!this.menuItems)\r\n\t\treturn null;\r\n\tvar result = new Object();\r\n\tresult.left = this.itemPane.clientWidth + 2;\r\n\tresult.top = this.itemPane.offsetTop;\r\n\r\n\tvar thisPos = this.getPosition();\r\n\r\n\tif(this.donotRemoveFromDOM)\r\n\t\tthis.menuItems.menuPane.style.display = \"\";\t\r\n\tvar childWidth = this.menuItems.menuPane.clientWidth;\r\n\tvar childHeight = this.menuItems.menuPane.clientHeight;\r\n\tchildWidth += 2;\r\n\tchildHeight += 2;\r\n\tif(this.donotRemoveFromDOM)\r\n\t\tthis.menuItems.menuPane.style.display = \"none\";\t\r\n\t\r\n\tvar view = this.getViewport();\r\n\r\n\tif(result.left + thisPos.left + childWidth > view.width) {\r\n\t\tif(thisPos.left > childWidth)\r\n\t\t\tresult.left-= childWidth;\r\n\t}\r\n\r\n\tif(result.top + thisPos.top + childHeight > view.height) {\r\n\t\tif(thisPos.top > childHeight)\r\n\t\t\tresult.top -= childHeight - 30;//30为菜单项默认高度\r\n\t\telse\r\n\t\t\tresult.top = -1 * thisPos.top;\r\n\t}\r\n\r\n\treturn result;\r\n};\r\n\r\nPopupMenuItem.prototype.getViewport = function() {\r\n\tvar mode = this.doc.compatMode;\r\n\tvar result = new Object();\r\n\r\n\tif (mode || domutils.isIE()) {\r\n\t\tswitch (mode) { // (IE, Gecko)\r\n\t\t\tcase 'CSS1Compat': // Standards mode\r\n\t\t\t\tresult.width = this.doc.documentElement.clientWidth;\r\n\t\t\t\tresult.height = this.doc.documentElement.clientHeight;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault: // Quirks\r\n\t\t\t\tresult.width = this.doc.body.clientWidth;\r\n\t\t\t\tresult.height = this.doc.body.clientHeight;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n};\r\n\r\nPopupMenuItem.prototype.getPosition = function() {\r\n\tvar left = 0;\r\n\tvar top = 0;\r\n\tvar obj = this.itemPane;\r\n\twhile(obj.offsetParent){\r\n\t\tleft += obj.offsetLeft;\r\n\t\ttop += obj.offsetTop;\r\n\t\tobj = obj.offsetParent;\r\n\t}\r\n\tvar result = new Object();\r\n\tresult.left = left;\r\n\tresult.top = top;\r\n\treturn result;\r\n};\r\n\r\nPopupMenuItem.prototype.setEnabled = function(enabled) {\r\n\tif(this.enabled == enabled)\r\n\t\treturn;\r\n\r\n\tthis.enabled = enabled;\r\n\r\n\tif(this.enabled)\r\n\t\tdomutils.removeClassName(this.itemPane, this.CSS_ITEMDISABLED);\r\n\telse\r\n\t\tdomutils.addClassName(this.itemPane, this.CSS_ITEMDISABLED);\r\n};\r\n\r\nPopupMenuItem.prototype.setVisibility = function(visible) {\r\n\tthis.visible = visible;\r\n\tif(visible)\r\n\t\tthis.itemPane.style.display = \"\";\r\n\telse\r\n\t\tthis.itemPane.style.display = \"none\";\r\n};\r\n\r\nPopupMenuItem.prototype.getVisibility = function() {\r\n\tif (this.itemPane.style.display == \"none\")\r\n\t\treturn false;\r\n\telse\r\n\t\treturn true;\t\r\n};\r\n\r\nPopupMenuItem.prototype.setTitle = function(title) {\r\n\tthis.itemPane.title = title;\r\n};","js/freequery/control/MultiCalendar.js":"\nvar CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var DateCalendarWrapper=jsloader.imports(\"freequery.control.DateCalendarWrapper\");var WeekCalendarWrapper=jsloader.imports(\"freequery.control.WeekCalendarWrapper\");var TenDaysCalendarWrapper=jsloader.imports(\"freequery.control.TenDaysCalendarWrapper\");var MonthCalendarWrapper=jsloader.imports(\"freequery.control.MonthCalendarWrapper\");var QuarterCalendarWrapper=jsloader.imports(\"freequery.control.QuarterCalendarWrapper\");var HalfYearCalendarWrapper=jsloader.imports(\"freequery.control.HalfYearCalendarWrapper\");var YearCalendarWrapper=jsloader.imports(\"freequery.control.YearCalendarWrapper\");var ComboBox=jsloader.resolve(\"freequery.control.ComboBox\");var MultiCalendar=function(container,types,displayType,hasBackground){if(!container)\nalert(\"缺少容器参数，请检查初始化方法！\");this.parent=container;this.div=document.createElement(\"div\");this.table=document.createElement(\"table\");var tbody=document.createElement(\"tbody\");var tr=document.createElement(\"tr\");this.tdFreq=document.createElement(\"td\");this.tdDateCtrl=document.createElement(\"td\");this.div.appendChild(this.table);this.table.appendChild(tbody);tbody.appendChild(tr);tr.appendChild(this.tdFreq);tr.appendChild(this.tdDateCtrl);this.parent.appendChild(this.div);if(types)\nthis.typeList=types;else\nthis.typeList=[\"Date\"];if(displayType)\nthis.displayType=displayType;else\nthis.displayType=1;if(hasBackground)\nthis.hasBackground=hasBackground;this.typeValues={\"Year\":\"年\",\"HalfYear\":\"半年\",\"Quarter\":\"季\",\"Month\":\"月\",\"TenDay\":\"旬\",\"Week\":\"周 \",\"Date\":\"日\"};if(this.typeList&&this.typeList.length>0){var items=[];for(var i=0;i<this.typeList.length;i++){var value=this.typeList[i];var alias=this.typeValues[value];if(alias!=null)\nitems.push([value,alias]);}\nif(items.length>1){var fWidth=45;if(domutils.isMobile()){fWidth=55;}\nthis.freqCombo=new ComboBox(this.tdFreq,this.tdFreq,fWidth,this.tdFreq);this.freqCombo.insertItems(items);if(!this.type)\nthis.type=items[items.length-1][0];this.freqCombo.setSelectedItem(this.type,this.typeValues[this.type]);this.freqCombo.setReadOnly(true);this.freqCombo.onselectChange.subscribe(this.doFreqComboChange,this);}else{if(!this.type)\nthis.type=items[0][0];}}\nthis.onEditChanged=new CustomEvent(\"editChange\",this);this.onFreqTypeChanged=new CustomEvent(\"freqTypeChanged\",this);this.initCalendarWrapper();};lang.extend(MultiCalendar,\"freequery.widget.Module2\");MultiCalendar.prototype.editFocus=function(e){this.removeListener(this.edit,\"change\",this.CalendarChange);if(this.CalendarWrapper.Calendar.displayObject){var v=this.getValue();if(v){this.CalendarWrapper.Calendar.displayObject.value=v;}}};MultiCalendar.prototype.editBlur=function(e){if(this.CalendarWrapper.Calendar.displayObject){var v=this.CalendarWrapper.Calendar.displayObject.value;this.setValue((v||\" \").replace(/\\s+/g,\"\"));}\nthis.CalendarChange();this.editChange();this.addListener(this.edit,\"change\",this.CalendarChange,this);};MultiCalendar.prototype.initCalendarWrapper=function(defaultType){if(defaultType)\nthis.type=defaultType;this.panel=document.createElement(\"div\");this.tdDateCtrl.appendChild(this.panel);this.edit=document.createElement(\"input\");this.edit.type=\"text\";this.panel.appendChild(this.edit);this.addListener(this.edit,\"keydown\",this.editKeyup,this);this.addListener(this.edit,\"change\",this.CalendarChange,this);this.addListener(this.edit,\"mousedown\",this.editFocus,this);this.addListener(this.edit,\"blur\",this.editBlur,this);this.buttonContainer=document.createElement(\"div\");this.button=document.createElement(\"input\");this.button.type=\"button\";this.button.nodefaultclass=true;if(this.hasBackground==true){if(this.displayType==1){this.panel.className=\"multicalendar-panel\";this.edit.className=\"multicalendar-edit\";this.buttonContainer.className=\"multicalendar-button-container\";this.button.className=\"multicalendar-button\";}else{this.panel.className=\"multicalendar-nobutton-panel\";this.edit.className=\"multicalendar-nobutton-edit\";this.buttonContainer.className=\"multicalendar-nobutton-button-container\";this.button.className=\"multicalendar-nobutton-button\";}}else{if(this.displayType==1){this.panel.className=\"multicalendar-nobackground-panel\";this.edit.className=\"multicalendar-nobackground-edit\";this.buttonContainer.className=\"multicalendar-nobackground-button-container\";this.button.className=\"multicalendar-nobackground-button\";}else{this.panel.className=\"multicalendar-nobackground-nobutton-panel\";this.edit.className=\"multicalendar-nobackground-nobutton-edit\";this.buttonContainer.className=\"multicalendar-nobackground-nobutton-button-container\";this.button.className=\"multicalendar-nobackground-nobutton-button\";}}\nthis.button.className+=\" print-hidden\";if(this.type==\"Date\"){this.CalendarWrapper=new DateCalendarWrapper(this.tdDateCtrl);}else if(this.type==\"Week\"){this.CalendarWrapper=new WeekCalendarWrapper(this.tdDateCtrl);}else if(this.type==\"TenDay\"){this.CalendarWrapper=new TenDaysCalendarWrapper(this.tdDateCtrl);}else if(this.type==\"Month\"){this.CalendarWrapper=new MonthCalendarWrapper(this.tdDateCtrl);}else if(this.type==\"Quarter\"){this.CalendarWrapper=new QuarterCalendarWrapper(this.tdDateCtrl);}else if(this.type==\"HalfYear\"){this.CalendarWrapper=new HalfYearCalendarWrapper(this.tdDateCtrl);}else if(this.type==\"Year\"){this.CalendarWrapper=new YearCalendarWrapper(this.tdDateCtrl);}else{alert(\"找不到控件类型，请检查初始化参数！\");}\nthis.CalendarWrapper.Calendar.displayObject=this.edit;if(parseInt(this.displayType)==1){this.panel.appendChild(this.buttonContainer);this.buttonContainer.appendChild(this.button);this.addListener(this.button,\"click\",this.show,this);this.CalendarWrapper.Calendar.srcButton=this.button;}else if(parseInt(this.displayType)==2){this.addListener(this.edit,\"click\",this.show,this);this.CalendarWrapper.Calendar.srcButton=this.edit;}else{alert(\"找不到展示类型，请检查初始化参数！\");}\nthis.setScrollYearOnClick(false);this.CalendarWrapper.Calendar.onRefresh.subscribe(this.editChange,this);if(this.readonly)\nthis.setReadOnly(this.readonly);};MultiCalendar.prototype.show=function(){if(this.CalendarWrapper.Calendar.Style.display==\"none\"){if(this.displayType==1){this.CalendarWrapper.Calendar.showCalendar(this.button,this.edit);}else if(this.displayType==2){this.CalendarWrapper.Calendar.showCalendar(this.edit);}else{alert(\"找不到展示类型，请检查初始化参数！\");}}else{this.CalendarWrapper.Calendar.close();}};MultiCalendar.prototype.destroyCalendarWrapperContainer=function(){if(this.edit){this.removeListener(this.edit,\"keyup\",this.editKeyup);this.removeListener(this.edit,\"change\",this.CalendarChange);this.removeListener(this.edit,\"mousedown\",this.editFocus);this.removeListener(this.edit,\"blur\",this.editBlur);if(parseInt(this.displayType)==2)\nthis.removeListener(this.edit,\"click\",this.show);domutils.destroyNode(this.edit);this.edit=null;}\nif(this.buttonContainer){if(parseInt(this.displayType)==1){this.removeListener(this.button,\"click\",this.show);if(this.button){domutils.destroyNode(this.button);}\ndomutils.destroyNode(this.buttonContainer);}\nif(this.button){this.button=null;}\nthis.buttonContainer.innerHTML=\"\";this.buttonContainer=null;}\ndomutils.destroyNode(this.panel);};MultiCalendar.prototype.destroy=function(){this.destroyCalendar();if(this.freqCombo)\nthis.freqCombo.destroy();if(this.div){domutils.destroyNode(this.table);domutils.destroyNode(this.div);this.div.innerHTML=\"\";this.div=null;}\nif(this.parent){this.parent.innerHTML=\"\";}\nMultiCalendar.superclass.destroy.call(this);};MultiCalendar.prototype.close=function(){this.CalendarWrapper.Calendar.close();};MultiCalendar.prototype.editChange=function(){this.onEditChanged.fire(this,this.getValue(),this.getValue(),this.getText(),this.getText());};MultiCalendar.prototype.editKeyup=function(e){if(event.keyCode==13){this.CalendarChange();this.editChange();}};MultiCalendar.prototype.CalendarChange=function(){this.CalendarWrapper.Calendar.onEditChange();};MultiCalendar.prototype.setAttribute=function(name,value){this.parent.setAttribute(name,value);};MultiCalendar.prototype.getAttribute=function(name){return this.parent.getAttribute(name);};MultiCalendar.prototype.setReadOnly=function(readonly){this.readonly=readonly;if(this.CalendarWrapper&&this.CalendarWrapper.Calendar)\nthis.CalendarWrapper.Calendar.setReadOnly(readonly);};MultiCalendar.prototype.getReadOnly=function(){return this.CalendarWrapper.Calendar.getReadOnly();};MultiCalendar.prototype.setEnabled=function(enable){this.enabled=enable;this.panel.disabled=!this.enabled;this.button.disabled=!this.enabled;this.edit.disabled=!this.enabled;};MultiCalendar.prototype.clear=function(){this.setValue(\"\");}\nMultiCalendar.prototype.getText=function(){return this.CalendarWrapper.Calendar.getText();};MultiCalendar.prototype.getValue=function(){return this.CalendarWrapper.Calendar.getValue();};MultiCalendar.prototype.setValue=function(value){if(!this.CalendarWrapper){var defaultType=\"Date\";if(value){var len=value.length;if(len==4)\ndefaultType=\"Year\";else if(len==6){var flag=value.substring(4,5);if(flag==\"H\")\ndefaultType=\"HalfYear\";else if(flag==\"Q\")\ndefaultType=\"Quarter\";else if(flag==\"W\")\ndefaultType=\"Week\";else\ndefaultType=\"Month\";}\nelse if(len==7)\ndefaultType=\"Week\";else if(len==8)\ndefaultType=\"TenDay\";else\ndefaultType=\"Date\";}else{if(this.type){defaultType=this.type;}}\nvar exist=false;if(this.typeList){for(var i=0;i<this.typeList.length;i++){if(defaultType==this.typeList[i]){exist=true;break;}}\nif(!exist)\ndefaultType=this.typeList[0];}\nthis.setType(defaultType);if(this.freqCombo)\nthis.freqCombo.setSelectedItem(defaultType,this.typeValues[defaultType]);}\nthis.CalendarWrapper.Calendar.setValue(value);};MultiCalendar.prototype.setScrollYearOnClick=function(scoll){this.CalendarWrapper.Calendar.setScrollYearOnClick(scoll);};MultiCalendar.prototype.getScrollYearOnClick=function(){return this.CalendarWrapper.Calendar.getScrollYearOnClick();};MultiCalendar.prototype.doFreqComboChange=function(obj,oldValue,newValue,oldText,newText){this.setType(newValue);}\nMultiCalendar.prototype.setType=function(type){this.type=type;this.doTypeChange(type);}\nMultiCalendar.prototype.doTypeChange=function(e){this.destroyCalendar();this.initCalendarWrapper();this.onFreqTypeChanged.fire(this);};MultiCalendar.prototype.destroyCalendar=function(){if(this.CalendarWrapper){this.CalendarWrapper.Calendar.onRefresh.unsubscribe(this.editChange,this);this.destroyCalendarWrapperContainer();if(this.CalendarWrapper){this.CalendarWrapper.destroy();this.CalendarWrapper=null;}}}","js/ext/IPad/IPadComboBox.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var DropDownBox=jsloader.resolve(\"freequery.control.DropDownBox\");var util=jsloader.resolve(\"freequery.common.util\");var PopupMenu=null;var IPadComboBox=function(parentObject,untilEl,width,dropdownParent,dropheight,defaultHeight){this.parent=parentObject;this.ondropDown=new CustomEvent(\"dropDown\",this);this.onselectChange=new CustomEvent(\"selectChange\",this);this.oneditChange=new CustomEvent(\"editChange\",this);this.onCloseUp=new CustomEvent(\"closeUp\",this);this.panel=document.createElement(\"select\");this.parent.appendChild(this.panel);this.addListener(this.panel,\"change\",this.doSelectChange,this);this.dropdownBox={clear:function(){}}\nthis.itemcount=0;this.iPadComboBox=true;if(width)\nthis.setWidth(width);}\nlang.extend(IPadComboBox,Module);IPadComboBox.prototype.destroy=function(){this.removeListener(this.panel,\"change\",this.doSelectChange);IPadComboBox.superclass.destroy.call(this);}\nIPadComboBox.prototype.btnClick=function(){this.ondropDown.fire(this);}\nIPadComboBox.prototype.setWidth=function(width){this.panel.style.width=width;}\nIPadComboBox.prototype.setNeedCheckBox=function(isNeed){}\nIPadComboBox.prototype.setDisplay=function(display){this.parent.style.display=display;}\nIPadComboBox.prototype.insertItem=function(id,name){if(id===null){id=\"\";name=\"\";}\nvar found=false;var optionLen=this.panel.options.length;for(var j=0;j<optionLen;j++){var option=this.panel.options[j];if(option.value==id||option.text==name){found=true;this.panel.remove(j);break;}}\nthis.panel.add(new Option(name,id));if(found){this.panel.options[this.panel.options.length-1].selected=true;}\nthis.itemcount++;}\nIPadComboBox.prototype.insertItems=function(data){this.itemcount=0;var len=data.length;var htmlStr='';var selected=null;if(this.panel.selectedIndex>=0)\nselected=this.panel.options[this.panel.selectedIndex].value;else\nselected=this.selectedId;for(var i=0;i<len;i++){var id=data[i][0];var name=data[i][1];if(id===null){id=\"\";name=\"\";}\nvar optionLen=this.panel.options.length;for(var j=0;j<optionLen;j++){var option=this.panel.options[j];if(option.value==id||option.text==name){found=true;this.panel.remove(j);break;}}\nhtmlStr+='<option value=\"'+id+'\" '+(id==selected?\"selected\":\"\")+'>'+name+'<\/option>';this.itemcount++;}\nthis.panel.innerHTML+=htmlStr;if(this.panel.selectedIndex>=0){this.selectedValue=this.panel.options[this.panel.selectedIndex].text;}}\nIPadComboBox.prototype.removeItem=function(id){}\nIPadComboBox.prototype.getOffset=function(obj){var p=new Object();p.left=0;p.top=0;while(obj){p.left+=obj.offsetLeft-obj.scrollLeft;p.top+=obj.offsetTop-obj.scrollTop;obj=obj.offsetParent;}\nreturn p;}\nIPadComboBox.prototype.getViewport=function(){var mode=document.compatMode;var result=new Object();if(mode||domutils.isIE()){switch(mode){case'CSS1Compat':result.width=document.documentElement.clientWidth;result.height=document.documentElement.clientHeight;break;default:result.width=document.body.clientWidth;result.height=document.body.clientHeight;break;}}\nreturn result;};IPadComboBox.prototype.setHightDomObject=function(hightDomObject){this.hightDomObject=hightDomObject;}\nIPadComboBox.prototype.getHightDomObject=function(){return this.hightDomObject;}\nIPadComboBox.prototype.getDropDownHight=function(){var ho=this.getHightDomObject();var DEFAULT_HEIGHT=100;var RESERVE_HEIGHT=30;var height=DEFAULT_HEIGHT;if(this.dropDownHeight)\nreturn this.dropDownHeight;if(ho!=null&&ho.style!=null&&ho.style.pixelHeight)\nheight=ho.style.pixelHeight-RESERVE_HEIGHT;if(height<0)\nheight=100;return height;}\nIPadComboBox.prototype.setDropDownHeight=function(dropHeight){}\nIPadComboBox.prototype.getDropDownWidth=function(){}\nIPadComboBox.prototype.setDropDownWidth=function(dropWidth){}\nIPadComboBox.prototype.getEditReadOnly=function(){}\nIPadComboBox.prototype.setEditReadOnly=function(readonly){}\nIPadComboBox.prototype.setSelectedItem=function(ids,names,add){add=true;var len=this.panel.options.length;var found=false;var selectedOption=null;for(var i=0;i<len;i++){var option=this.panel.options[i];if(option.value==ids||option.text==names){found=true;selectedOption=option;break;}}\nif(found){selectedOption.selected=true;this.selectedValue=selectedOption.text;}else{if(add){this.panel.add(new Option(names,ids));this.panel.options[this.panel.options.length-1].selected=true;}\nthis.selectedValue=names;this.selectedId=ids;}\ntry{if(this.panel.parentNode.parentNode.parentNode.parentNode.style.display!=\"none\"){var that=this;setTimeout(function(){if(that.panel.parentNode.parentNode.parentNode.parentNode.style.display!=\"none\"){that.btnClick();}},0.01);}}finally{}}\nIPadComboBox.prototype.matchItems=function(ids,names,add){}\nIPadComboBox.prototype.editBlur=function(){}\nIPadComboBox.prototype.getSelectedId=function(){var optionLen=this.panel.options.length;for(var j=0;j<optionLen;j++){var option=this.panel.options[j];if(option.selected==true){return option.value;}}\nreturn\"\";}\nIPadComboBox.prototype.getItemIdByIndex=function(index){}\nIPadComboBox.prototype.getSelectedText=function(){}\nIPadComboBox.prototype.setSelectedText=function(value){}\nIPadComboBox.prototype.clear=function(){var len=this.panel.options.length;for(var i=len-1;i>=0;i--){this.panel.remove(i);}}\nIPadComboBox.prototype.setAttribute=function(name,value){this.panel.setAttribute(name,value);}\nIPadComboBox.prototype.getAttribute=function(name){return this.panel.getAttribute(name);}\nIPadComboBox.prototype.itemsCount=function(){return this.itemcount;}\nIPadComboBox.prototype.setReadOnly=function(readonly){}\nIPadComboBox.prototype.getReadOnly=function(){}\nIPadComboBox.prototype.setCommonData=function(data){}\nIPadComboBox.prototype.disable=function(disabled){}\nIPadComboBox.prototype.setEnabled=function(value){this.enabled=value;}\nIPadComboBox.prototype.getEnabled=function(){}\nIPadComboBox.prototype.setChecked=function(values){}\nIPadComboBox.prototype.setForceToDropUpward=function(flag){}\nIPadComboBox.prototype.setComboBoxWidth=function(width){}\nIPadComboBox.prototype.doSelectChange=function(e){var id=this.panel.value;var oldId=this.oldId;this.onselectChange.fire(this,oldId,id,this.getOptionText(oldId),this.getOptionText(id));this.oldId=id;this.panel.blur();}\nIPadComboBox.prototype.getOptionText=function(id){if(!id)return;var len=this.panel.options.length;var selectedOption=null;for(var i=0;i<len;i++){var option=this.panel.options[i];if(option.value==id){selectedOption=option;break;}}\nif(selectedOption)\nreturn selectedOption.text;else\nreturn\"\";}","js/ext/IPad/IPadDatePicker.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");IPadDatePicker=function(parentObject,width){this.parent=parentObject;this.panel=document.createElement(\"div\");this.panel.style.height=26;this.panel.style.borderColor=\"transparent\";this.panel.className=\"combobox-panel\";this.parent.appendChild(this.panel);width=200;this.setWidth(width);this.oneditChange=new CustomEvent(\"editChange\",this);this.edit=document.createElement(\"input\");this.edit.style.width=width;this.edit.style.height=26;this.edit.type=\"date\";this.panel.appendChild(this.edit);this.addListener(this.edit,\"blur\",this.editChange,this);this.oldValue=\"\";this.tempValue=\"\";this.dataTimetype=\"DATE\";this.dataTimeDatatype=\"DATE\";this.onselectChange=new CustomEvent(\"selectChange\",this);}\nlang.extend(IPadDatePicker,Module);IPadDatePicker.prototype.destroy=function(){this.clear();this.onselectChange=null;this.removeListener(this.edit,\"blur\",this.editChange);try{domutils.destroyNode(this.edit);}catch(e){}\nthis.edit=null;try{domutils.destroyNode(this.panel);}catch(e){}\nthis.panel=null;this.parent=null;IPadDatePicker.superclass.destroy.call(this);}\nIPadDatePicker.prototype.setType=function(type){}\nIPadDatePicker.prototype.setDateType=function(type){}\nIPadDatePicker.prototype.setWidth=function(width){this.panel.style.width=width;}\nIPadDatePicker.prototype.editChange=function(){var obj=this;if(obj.oldValue==obj.edit.value){return;}\nsetTimeout(function(){obj.onselectChange.fire(obj,obj.oldValue,obj.edit.value,obj.oldValue,obj.edit.value);obj.oldValue=obj.edit.value;},0.01);}\nIPadDatePicker.prototype.setAttribute=function(name,value){this.panel.setAttribute(name,value);}\nIPadDatePicker.prototype.getAttribute=function(name){return this.panel.getAttribute(name);}\nIPadDatePicker.prototype.setValue=function(value){if(value.length>10){value=value.substring(0,10);}\nthis.oldValue=value;this.tempValue=value;this.edit.value=value;}\nIPadDatePicker.prototype.getValue=function(){return this.edit.value;}\nIPadDatePicker.prototype.setReadOnly=function(readonly){this.edit.readOnly=readonly;}\nIPadDatePicker.prototype.getReadOnly=function(){return this.edit.readOnly;}\nIPadDatePicker.prototype.setEnabled=function(enable){this.enabled=enable;this.panel.disabled=!this.enabled;this.edit.style.background=this.enabled?\"\":\"#F6F6F6\";}\nIPadDatePicker.prototype.clear=function(){this.setValue(\"\");}","js/freequery/lang/lang.js":"\nvar lang={extend:function(subclass,superclass){superclass=processSuperclass(superclass);var f=function(){};f.prototype=superclass.prototype;subclass.prototype=new f();subclass.prototype.constructor=subclass;subclass.superclass=superclass.prototype;if(superclass.prototype.constructor==Object.prototype.constructor){superclass.prototype.constructor=superclass;}},patch:function(subclass,superclass){this.extend(subclass,superclass);if(!superclass.patchedSubClasses)\nsuperclass.patchedSubClasses=new Array();superclass.patchedSubClasses.push(subclass);},parseJSON:function(jsonString){return eval('('+jsonString+')');},toJSONString:function(obj){var m={'\\b':'\\\\b','\\t':'\\\\t','\\n':'\\\\n','\\f':'\\\\f','\\r':'\\\\r','\"':'\\\\\"','\\\\':'\\\\\\\\'};var s={array:function(x){var a=['['],b,f,i,l=x.length,v;if(l==0){var isNull=true;for(var i in x){if(i==\"remove\"||i==\"indexOf\"){delete x[i];continue;}\nif(x.toJSON)\nreturn x.toJSON();isNull=false;break;}\nif(!isNull){var a=['{'],b,f,i,v;for(i in x){v=x[i];f=s[typeof v];if(f){v=f(v);if(typeof v=='string'){if(b){a[a.length]=',';}\na.push(s.string(i),':',v);b=true;}}}\na[a.length]='}';return a.join('');}}else{for(i=0;i<l;i+=1){v=x[i];f=s[typeof v];if(f){v=f(v);if(typeof v=='string'){if(b){a[a.length]=',';}\na[a.length]=v;b=true;}}}}\na[a.length]=']';return a.join('');},'boolean':function(x){return String(x);},'null':function(x){return\"null\";},number:function(x){return isFinite(x)?String(x):'null';},object:function(x){if(x){if(Object.prototype.toString.call(x)===\"[object Array]\"){return s.array(x);}\nvar a=['{'],b,f,i,v;for(i in x){v=x[i];f=s[typeof v];if(f){v=f(v);if(typeof v=='string'){if(b){a[a.length]=',';}\na.push(s.string(i),':',v);b=true;}}}\na[a.length]='}';return a.join('');}\nreturn'null';},string:function(x){if(/[\"\\\\\\x00-\\x1f]/.test(x)){x=x.replace(/([\\x00-\\x1f\\\\\"])/g,function(a,b){var c=m[b];if(c){return c;}\nc=b.charCodeAt();return'\\\\u00'+Math.floor(c/16).toString(16)+(c%16).toString(16);});}\nreturn'\"'+x+'\"';}};return s[typeof obj](obj);}};var processSuperclass=function(superclass){if(\"string\"==typeof superclass){superclass=jsloader.resolve(superclass);}else{;}\nreturn superclass;};","js/freequery/lang/domutils.js":"\nvar domutils={XHR_UNINITIALIZED:0,XHR_OPEN:1,XHR_SENT:2,XHR_RECEIVING:3,XHR_LOADED:4,id_counter:0,isBoxModel:document.compatMode==='CSS1Compat',DOM_DATA:{expando:'_bof_data_'+(new Date().getTime()),dataCache:{},winDataCache:{},noData:{EMBED:1,OBJECT:1,APPLET:1},gid:0,guid:function(pre){var id=(this.gid++)+'';return pre?pre+id:id;}},data:function(elem,name,data){try{var b=elem&&elem.nodeName;}catch(e){return;}\nif(!elem||this.DOM_DATA.noData[elem.nodeName])\nreturn;if(name&&Object.prototype.toString.call(name)==='[object Object]'&&!name['nodeType']&&!name['setInterval']){for(var k in name){this.data(elem,k,name[k]);}\nreturn;}\nvar expando=this.DOM_DATA.expando;if(elem==window)\nelem=this.DOM_DATA.winDataCache;var isNode=elem&&elem.nodeType;var cache=isNode?this.DOM_DATA.dataCache:elem;if(data===undefined){var key=isNode?elem[expando]:expando;var thisCache=cache[key];if((Object.prototype.toString.call(name)==='[object String]')&&thisCache){return thisCache[name];}\nreturn thisCache;}else{var key;if(!isNode){key=expando;}else if(!(key=elem[expando])){key=elem[expando]=this.DOM_DATA.guid();}\nif(name&&data!==undefined){if(!cache[key])\ncache[key]={};cache[key][name]=data;}}},removeData:function(elem,name){try{var b=elem&&elem.nodeName;}catch(e){return;}\nif(!elem)\nreturn;if(elem==window)\nelem=this.DOM_DATA.winDataCache;var expando=this.DOM_DATA.expando;var isNode=elem&&elem.nodeType;var cache=isNode?this.DOM_DATA.dataCache:elem;var key=isNode?elem[expando]:expando;if(!key)\nreturn;var thisCache=cache[key];if(name){if(thisCache){delete thisCache[name];var isEmpty=true;for(var p in thisCache){isEmpty=false;break;}\nif(isEmpty){this.removeData(elem);}}}\nelse{if(!isNode){try{delete elem[expando];}catch(ex){}}else if(elem.removeAttribute){elem.removeAttribute(expando);}\nif(isNode){delete cache[key];}}},destroyNode:function(child,tmpRemoveChild){try{var b=child&&child.nodeName;}catch(e){return;}\nif(!child){return;}\nif(tmpRemoveChild){try{child.parentNode.removeChild(child);}catch(e){}\nreturn;}\nif(child.nodeType==3){this.removeNode(child);}else if(child.tagName==\"TBODY\"){child.parentNode.removeChild(child);}else if(child.tagName==\"TABLE\"){var garbageBin=document.getElementById('IELeakGarbageBin');if(!garbageBin){garbageBin=document.createElement('DIV');garbageBin.id='IELeakGarbageBin';garbageBin.style.display='none';document.body.appendChild(garbageBin);}\ngarbageBin.appendChild(child);garbageBin.innerHTML='';}else if(child.tagName==\"TR\"){var td=child.firstChild;while(td){var tmpTd=td.nextSibling;td.innerHTML=\"\";this.removeNode(td);td=tmpTd;}\nthis.removeNode(child);}else{try{child.innerHTML=\"\";}catch(e){}\nthis.removeNode(child);}},removeNode:function(node,removeChildren){if(!node)\nreturn;if(node.removeNode)\nnode.removeNode(removeChildren);else if(node.parentNode&&node.parentNode.removeChild)\nnode.parentNode.removeChild(node);},doGet:function(url,notUseGBKJSP){var key='urlcache',cache=registry.get(key);var boflog=jsloader.resolve('freequery.control.logger');var enableLocalStorage=window._enable_localStorage&&typeof sessionStorage!='undefined'&&typeof localStorage!='undefined';try{boflog.log('doGet: '+url);}catch(ex){if(window.console!=undefined){window.console.log(ex&&ex.message);}}\nif(enableLocalStorage){var localStorageFile;if(!notUseGBKJSP&&jsloader.getLang()){localStorageFile=localStorage.getItem(jsloader.getLang()+\"&\"+url);}else{localStorageFile=localStorage.getItem(url);}\nif(localStorageFile){return localStorageFile;}}\nif(!cache){cache={};registry.put(key,cache);}\nif(cache[url]){return cache[url];}\nvar xhr=jsloader.getXHR(),sUrl=notUseGBKJSP?url:('gbk.jsp?name=vision/'+url);if(!notUseGBKJSP&&jsloader.getLang()){sUrl+=\"&l=\"+jsloader.getLang();}\ntry{try{boflog.profile('doGet');}catch(ex){if(window.console!=undefined){window.console.log(ex&&ex.message);}}\nxhr.open('GET',sUrl,false);xhr.send('');var txt=(cache[url]=xhr.responseText);if(enableLocalStorage){if(!notUseGBKJSP&&jsloader.getLang()){try{localStorage.setItem(jsloader.getLang()+\"&\"+url,txt);}catch(e){}}else{try{localStorage.setItem(url,txt);}catch(e){}}}\ntry{boflog.profile('doGet');}catch(ex){if(window.console!=undefined){window.console.log(ex&&ex.message);}}\nreturn txt;}catch(ex){throw new Error(ex.message+': '+url);}},doPost:function(url,data,callback,errorHandler,scope,headers){var xhr=jsloader.getXHR(),isAsync=!!callback;var boflog=jsloader.resolve('freequery.control.logger');var label='doPost'+(isAsync?'_'+(new Date().getTime()):'')+'_'+url;try{boflog.profile(label);}catch(ex){if(window.console!=undefined){window.console.log(ex&&ex.message);}}\nif(isAsync){xhr.onreadystatechange=function(){if(!xhr||domutils.XHR_LOADED!=xhr.readyState){return;}\ntry{boflog.profile(label);}catch(ex){if(window.console!=undefined){window.console.log(ex&&ex.message);}}\nif(xhr.status!=200){if(errorHandler){errorHandler.call(scope,xhr);}}else{var ret=xhr.responseText;xhr.abort();callback.call(scope,ret);}\nxhr=null;};}\nvar fullURL=(jsloader.baseURL?jsloader.baseURL:'')+url,times=5;for(;(times--);){try{xhr.open('POST',fullURL,isAsync);xhr.setRequestHeader('If-Modified-Since','0');xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded;charset=UTF-8');try{if(headers){for(var i in headers){xhr.setRequestHeader(i,headers[i]);}}}catch(err){}\nxhr.send(data||'');if(isAsync){return;}else if(xhr.status==200){try{boflog.profile(label);}catch(ex){if(window.console!=undefined){window.console.log(ex&&ex.message);}}\nreturn xhr.responseText;}}catch(e){if(!times){throw new Error(e.message+': '+url);}}}},getBrowserType:function(){return this.Browser.name;},getBrowserVersion:function(){return this.Browser.version;},isFirefox:function(){return this.Browser.firefox===true;},isIE:function(){return this.Browser.ie===true;},isIE6:function(){return this.Browser.ie6===true;},isChrome:function(){return this.Browser.chrome===true;},isSafari:function(){return this.Browser.safari===true;},isOpera:function(){return this.Browser.opera===true;},isIE7:function(){return this.Browser.ie7===true;},isIOS:function(){return this.Browser.Platform.ios;},isAndroid:function(){return this.Browser.Platform.android;},isZhCN:function(){return/\\bzh\\-/.test(this.Browser.Lang);},isMobile:function(){var userAgent=navigator.userAgent.toLowerCase();if(userAgent==null){userAgent=\"mobile\";}\nvar isIPad=userAgent.indexOf(\"ipad\")>-1;var isIPhone=userAgent.indexOf(\"iphone\")>-1;var isIPod=userAgent.indexOf(\"ipod\")>-1;var isSymbianos=userAgent.indexOf(\"symbianos\")>-1;var isAndroid=userAgent.indexOf(\"android\")>-1;var isWebos=userAgent.indexOf(\"webos\")>-1;var isSymbianos=userAgent.indexOf(\"symbianos\")>-1;var isWP=userAgent.indexOf(\"Windows Phone\")>-1;if(isIPad||isIPhone||isIPod||isSymbianos||isAndroid||isWebos||isSymbianos||isWP||userAgent.indexOf(\"mobile\")>-1){return true;}else{return false;}},trim:function(src){if(src&&(typeof src=='string'))\nreturn src.replace(/^\\s+|\\s+$/g,\"\");else\nreturn src;},removeWhiteSpace:function(dom){var child=dom.firstChild;while(child){if(child.nodeType==3){if(this.trim(child.nodeValue).length==0){var tmp=child.nextSibling;child.parentNode.removeChild(child);child=tmp;}else\nchild=child.nextSibling;}else{this.removeWhiteSpace(child);child=child.nextSibling;}}},createDom:function(){var dom;if(this.isIE()&&this.Browser.version<11){dom=new ActiveXObject(\"microsoft.XMLDOM\");}else{dom=new DOMParser().parseFromString(\"<A/>\",\"text/xml\");}\nreturn dom;},parseXML:function(xmlStr){var result;if(this.isIE()&&this.Browser.version<11){if(this.xmldom){result=this.xmldom;}else{result=new ActiveXObject(\"Microsoft.XMLDOM\");this.xmldom=result;}\nresult.loadXML(xmlStr);}else if(this.isAndroid()){var parser=new DOMParser();var tempStr=xmlStr.replace(\" encoding=\\\"GBK\\\"\",\" encoding=\\\"utf-8\\\"\");result=parser.parseFromString(tempStr,\"text/xml\");}else{var parser=new DOMParser();result=parser.parseFromString(xmlStr,\"text/xml\");}\nreturn result;},nodeToString:function(node){var result;if(this.isIE()&&this.Browser.version<11){result=\"<?xml version=\\\"1.0\\\" encoding=\\\"GBK\\\"?>\"+node.xml;}else{var xmlserial=new XMLSerializer();result=xmlserial.serializeToString(node);}\nreturn result;},getXmlNodeChildren:function(parentXmlNode,childNodeNames){var result=[],names=(childNodeNames||'*').toLowerCase();var tags=names.split(','),len=tags.length,isAll=names==='*';if(parentXmlNode){var node=parentXmlNode.firstChild,nodeName,i;while(node){if(isAll){result.push(node);}else{nodeName=node.nodeName.toLowerCase();if(len==1){if(nodeName===names){result.push(node);}}else{for(i=0;i<len;i++){if(nodeName===tags[i]){result.push(node);break;}}}}\nnode=node.nextSibling;}}\nreturn result;},getNodeAtrributeValueByName:function(node,name){var attributes=node.attributes;for(var i=0;i<attributes.length;i++){if(attributes.item(i).nodeName.toUpperCase()==name){return attributes.item(i);}}},getValueByAttributeName:function(node,attrName){var attributes=node.attributes;for(var i=0;i<attributes.length;i++){if(attributes.item(i).nodeName.toUpperCase()==attrName.toUpperCase()){return attributes.item(i).nodeValue;}}},isLeftButton:function(button){if(this.isIE()&&this.Browser.version<10)\nreturn button==1;else\nreturn button==0;},isRightButton:function(button){if(this.isIE()&&this.Browser.version<11)\nreturn button==2;else\nreturn button==2;},findAncElementByClassName:function(baseElements,className,maxDepth){if(!(baseElements instanceof Array))\nbaseElements=[baseElements];if(0===baseElements.length)\nreturn null;var re=new RegExp(\"( |\\t|^)\"+className+\"( |\\t|$)\");var nextBaseElements=[];for(var i=0;i<baseElements.length;i++){var baseElement=baseElements[i];if(!baseElement.tagName)\ncontinue;if(re.test(baseElement.className))\nreturn baseElement;if(baseElement.parentNode)\nnextBaseElements.push(baseElement.parentNode);}\nif(\"undefined\"===typeof maxDepth)\nreturn this.findAncElementByClassName(nextBaseElements,className);else if(maxDepth>0)\nreturn this.findAncElementByClassName(nextBaseElements,className,maxDepth-1);else\nreturn null;},findElementByClassName:function(baseElements,className,maxDepth){if(!(baseElements instanceof Array))\nbaseElements=[baseElements];if(0===baseElements.length)\nreturn null;var re=new RegExp(\"( |\\t|^)\"+className+\"( |\\t|$)\");var nextBaseElements=[];for(var i=0;i<baseElements.length;i++){var baseElement=baseElements[i];if(!baseElement.tagName)\ncontinue;if(re.test(baseElement.className))\nreturn baseElement;var nodes=baseElement.childNodes.length;var tmpNode=baseElement.childNodes[0];for(var j=0;j<nodes;j++){nextBaseElements.push(tmpNode);tmpNode=tmpNode.nextSibling;if(!tmpNode&&j+1<nodes)\ntmpNode=baseElement.childNodes[j+1];}}\nif(\"undefined\"===typeof maxDepth)\nreturn this.findElementByClassName(nextBaseElements,className);else if(maxDepth>0)\nreturn this.findElementByClassName(nextBaseElements,className,maxDepth-1);else\nreturn null;},getElementByClassName:function(clzName,rootNode,tag){return this.getElementsByClassName(clzName,rootNode,tag)[0];},getElementsByClassName:document.getElementsByClassName?function(clzName,rootNode,tag){var ret=[],nodes=(rootNode||document).getElementsByClassName(clzName),i=0,node;tag=tag?tag.toUpperCase():'*';for(;node=nodes[i++];){if(tag==='*'||node.tagName===tag){ret.push(node);}}\nreturn ret;}:function(clzName,rootNode,tag){var ret=[],names=clzName.split(/[ ]+/),len=names.length,i=len;var nodes=(rootNode||document).getElementsByTagName(tag||'*'),j=0;var patterns=[],node,nodeClz,match,k;while(--i>-1){patterns.push(new RegExp('(^|\\\\s)'+names[i]+'(\\\\s|$)'));}\nfor(;node=nodes[j++];){match=false;nodeClz=node.className;for(k=0;k<len;k++){if(!(match=patterns[k].test(nodeClz))){break;}}\nif(match){ret.push(node);}}\nreturn ret;},findElementByBofid:function(baseElements,targetBofid,maxDepth){if(!(baseElements instanceof Array))\nbaseElements=[baseElements];if(0===baseElements.length)\nreturn null;var nextBaseElements=[];for(var i=0;i<baseElements.length;i++){var baseElement=baseElements[i];if(!baseElement.tagName)\ncontinue;var bofid=baseElement.getAttribute(\"bofid\");if(bofid==targetBofid)\nreturn baseElement;var nodes=baseElement.childNodes.length;var tmpNode=baseElement.childNodes[0];for(var j=0;j<nodes;j++){nextBaseElements.push(tmpNode);tmpNode=tmpNode.nextSibling;if(!tmpNode&&j+1<nodes)\ntmpNode=baseElement.childNodes[j+1];}}\nif(\"undefined\"===typeof maxDepth)\nreturn this.findElementByBofid(nextBaseElements,targetBofid);else if(maxDepth>0)\nreturn this.findElementByBofid(nextBaseElements,targetBofid,maxDepth-1);else\nreturn null;},hasClassName:function(elem,value){var elemClass=elem&&elem.className;if(elemClass){var classNames=(value+'').split(/[\\.\\s]\\s*\\.?/),cl=classNames.length;var SPACE=' ',clzName=SPACE+elemClass+SPACE,j=0,ret=cl&&true;for(;j<cl;j++){if(clzName.indexOf(SPACE+classNames[j]+SPACE)<0){ret=false;break;}}\nif(ret){return true;}}\nreturn false;},addClassName:function(elem,value){if(!elem){return;}\nvar elemClass=elem.className;if(!elemClass){elem.className=value;}else{var classNames=(value+'').split(/[\\.\\s]\\s*\\.?/),cl=classNames.length;var SPACE=' ',clzName=SPACE+elemClass+SPACE,setClass=elemClass,j=0;for(;j<cl;j++){if(clzName.indexOf(SPACE+classNames[j]+SPACE)<0){setClass+=SPACE+classNames[j];}}\nelem.className=setClass.replace(/^\\s+|\\s+$/g,'');}},removeClassName:function(elem,value){if(!elem||!elem.className){return;}\nvar elemClass=elem.className;var classNames=(value+'').split(/[\\.\\s]\\s*\\.?/),cl=classNames.length;if(!cl){elem.className='';}else{var SPACE=' ',clzName=(SPACE+elemClass+SPACE).replace(/[\\n\\t]/g,SPACE),j=0,needle;for(;j<cl;j++){needle=SPACE+classNames[j]+SPACE;while(clzName.indexOf(needle)>=0){clzName=clzName.replace(needle,SPACE);}}\nelem.className=clzName.replace(/^\\s+|\\s+$/g,'');}},replaceClassName:function(elem,newClassName,oldClassName){this.removeClassName(elem,oldClassName);this.addClassName(elem,newClassName);},generateId:function(el,prefix){prefix=prefix||'freequery-gen';el=el||{};if(!el.id){el.id=prefix+domutils.id_counter++;}\nreturn el.id;},stopPropagation:function(ev){if(ev.stopPropagation){ev.stopPropagation();}else{ev.cancelBubble=true;}},preventDefault:function(ev){if(ev.preventDefault){ev.preventDefault();}else{ev.returnValue=false;}},stopEvent:function(ev){if(!ev)\nreturn;this.preventDefault(ev);this.stopPropagation(ev);},saveCheckboxStatus:function(elem){if(!elem||!elem.getElementsByTagName)\nreturn;var inputList=elem.getElementsByTagName(\"input\");var len=inputList.length;for(var i=0;i<len;i++){var type=inputList[i].type;if((type.toUpperCase()!==\"CHECKBOX\")&&(type.toUpperCase()!==\"RADIO\"))\ncontinue;var checkbox=inputList[i];checkbox.setAttribute(\"__checked\",checkbox.checked);}},restoreCheckboxStatus:function(elem){if(!elem||!elem.getElementsByTagName)\nreturn;var inputList=elem.getElementsByTagName(\"input\");var len=inputList.length;for(var i=0;i<len;i++){var type=inputList[i].type;if((type.toUpperCase()!==\"CHECKBOX\")&&(type.toUpperCase()!==\"RADIO\"))\ncontinue;var checkbox=inputList[i];var checked=checkbox.getAttribute(\"__checked\");if(true===checked||\"true\"==checked){checkbox.checked=true;}else if(false===checked||\"false\"==checked){checkbox.checked=false;}else{;}}},getCumulativeOffset:function(element){var top=0,left=0;do{top+=element.offsetTop||0;left+=element.offsetLeft||0;element=element.offsetParent;}while(element);return{left:left,top:top,toString:function(){return\"[left:\"+left+\", top:\"+top+\"]\";}};},getViewport:function(){var width=document.body.clientWidth;var height=document.body.clientHeight;return{width:width,height:height,toString:function(){return\"[width:\"+width+\", height:\"+height+\"]\";}};},createElement:function(tagName,elId){var tag=tagName||\"div\";var id=elId||this.generateId();var obj=document.createElement(tag);obj.id=id;obj.bofid=id;return obj;},createOption:function(text,value){if(this.isFirefox()){var o=document.createElement(\"OPTION\");o.value=value;o.appendChild(document.createTextNode(text));return o;}else\nreturn new Option(text,value);},checkFunctionValid:function(op){var util=jsloader.resolve(\"freequery.common.util\");return util.checkFunctionValid(op);},getRadioCheckedValue:function(container,buttonName){var radioArray=this.findRadioArray(container,buttonName);if(radioArray&&radioArray!=\"\"){for(var i=0;i<radioArray.length;i++){if(radioArray[i].checked)\nreturn radioArray[i].value;}}},setRadioChecked:function(container,buttonName,radioValue){var radioArray=this.findRadioArray(container,buttonName);if(radioArray&&radioArray!=\"\"){for(var i=0;i<radioArray.length;i++){if(radioArray[i].value==radioValue){radioArray[i].checked=true;return;}}}},findRadioArray:function(container,buttonName){var inputList=container.getElementsByTagName(\"input\");var radioArray=[];for(var idx in inputList){if(inputList[idx].type==\"radio\"&&inputList[idx].name==buttonName){radioArray[radioArray.length]=inputList[idx];break;}else if(inputList[idx][0]&&inputList[idx][0].type&&inputList[idx][0].type==\"radio\"&&inputList[idx][0].name==buttonName){var len=inputList[idx].length\nfor(var subIdx=0;subIdx<len;subIdx++){if(inputList[idx][subIdx].type==\"radio\"&&inputList[idx][subIdx].name==buttonName){radioArray[radioArray.length]=inputList[idx][subIdx];}}\nbreak;}}\nreturn radioArray;}};(function(exporter){var ua=navigator.userAgent.toLowerCase();var platform=navigator.platform.toLowerCase();var regex=/(opera|ie|firefox|chrome|version)[\\s\\/:]([\\w\\d\\.]+)?.*?(safari|version[\\s\\/:]([\\w\\d\\.]+)|$)/;var UA=ua.match(regex)||[null,'unknown',0];var mode=null;var Browser={name:(UA[1]=='version')?UA[3]:UA[1],version:mode||parseFloat((UA[1]=='opera'&&UA[4])?UA[4]:UA[2]),Platform:{name:ua.match(/ip(?:ad|od|hone)/)?'ios':(ua.match(/(?:webos|android)/)||platform.match(/mac|win|linux/)||['other'])[0]}};if(Browser.name=='unknown'){if((UA=/(msie\\s|trident.*rv:)([\\w.]+)/.exec(ua))){Browser.name='ie';Browser.version=parseFloat(UA[2]||'0');}}\nBrowser[Browser.name]=true;Browser[Browser.name+parseInt(Browser.version,10)]=true;Browser.Platform[Browser.Platform.name]=true;Browser.Lang=(navigator.userLanguage||navigator.language||'').toLowerCase();exporter['Browser']=Browser;})(domutils);","js/freequery/lang/compatutil.js":"\nvar eventutil=jsloader.resolve('freequery.lang.eventutil');var CustomEvent=jsloader.resolve('freequery.lang.CustomEvent');var domutils=jsloader.resolve('freequery.lang.domutils');var compatutil=(function(window){var doc=window.document,isCSS1=doc.compatMode==='CSS1Compat',isIE=domutils.isIE(),_docElem=null,getDocElem=function(){if(_docElem==null){_docElem=isCSS1?doc.documentElement:doc.body;}\nreturn _docElem;}\nvar tid,onWinResize=new CustomEvent('onWinResize');eventutil.addEventHandler(window,'resize',function(ev){if(tid){clearTimeout(tid);}\ntid=setTimeout(function(){onWinResize.fire(ev,compatutil.getViewSize());},400);});return{debug:false,onWinResize:onWinResize,onActionOpen:new CustomEvent('onActionOpen'),onActionClose:new CustomEvent('onActionClose'),getViewWidth:function(full){return full?this.getDocWidth():this.getViewportWidth();},getViewHeight:function(full){return full?this.getDocHeight():this.getViewportHeight();},getDocHeight:function(){return Math.max(getDocElem().scrollHeight,this.getViewportHeight());},getDocWidth:function(){return Math.max(getDocElem().scrollWidth,this.getViewportWidth());},getViewportHeight:isIE?function(){return getDocElem().clientHeight;}:function(){return self.innerHeight;},getViewportWidth:isIE?function(){return getDocElem().clientWidth;}:function(){return self.innerWidth;},getViewSize:function(full){return{width:this.getViewWidth(full),height:this.getViewHeight(full)};},fixFirefoxScroll:function(template,regexp){if(domutils.isFirefox()){var fullFill='width:100%;height:100%;';var styleOuter=fullFill+'position:relative;';var styleInner=fullFill+'position:absolute;overflow:auto;';if(typeof template=='string'){var func=function(lines){var buf=[];buf.push('<div style=\"'+styleOuter+'\">');buf.push('<div style=\"'+styleInner+'\">');buf.push(lines);buf.push('<\/div>');buf.push('<\/div>');return buf.join('');};if(!regexp){template=func(template);}else{template=template.replace(regexp,func);}}else if(template&&template.nodeType===1){var elem=template,parentEl=elem.parentNode;var outerDiv=doc.createElement('div');var innerDiv=doc.createElement('div');outerDiv.style.cssText=styleOuter;innerDiv.style.cssText=styleInner;parentEl.insertBefore(outerDiv,elem);outerDiv.appendChild(innerDiv);parentEl.removeChild(elem);innerDiv.appendChild(elem);}}\nreturn template;},fixFirefoxScroll2:function(template){if(domutils.isFirefox()||(domutils.isIE()&&domutils.getBrowserVersion()>9)){var styleOuter='width:100%;height:100%;position:relative;';if(template&&template.nodeType===1){var elem=template,parentEl=elem.parentNode;var outerDiv=doc.createElement('div');outerDiv.style.cssText=styleOuter;parentEl.insertBefore(outerDiv,elem);parentEl.removeChild(elem);outerDiv.appendChild(elem);elem.style.position=\"absolute\";elem.style.overflow=\"auto\";elem.style.height=\"100%\";elem.style.width=\"100%\";}}\nreturn template;},getWindow:function(node){var d=node&&node.ownerDocument||node||doc;return d.defaultView||d.parentWindow;},getSeleciton:function(){return isIE?doc.selection:this.getWindow(doc).getSelection();}};})(window);if(compatutil.debug){var log=function(msg){window.console&&window.console.log(msg);};compatutil.onWinResize.subscribe(function(ev,size){log('window resize to: [ '+size.width+', '+size.height+' ]');});compatutil.onActionOpen.subscribe(function(action){log('Open action: '+(action.id||action.bofClassName));});compatutil.onActionClose.subscribe(function(action){log('Close action: '+(action.id||action.bofClassName));});}","js/freequery/lang/EventAgent.js":"\nvar EventAgent=function(){this._listeners={};};EventAgent.prototype.destroy=function(){this.removeAllListeners();this._listeners=null;};EventAgent.prototype.addListener=function(element,type,handler,scope){if(type==\"dblclick\"&&domutils.isIOS()){type=\"click\";}\nvar eid=this.add(element,type,handler,scope);if(eid){this._listeners[eid]={target:element,type:type,fn:handler,scope:scope};}};EventAgent.prototype.removeListener=function(element,type,handler,scope){var eid=this.remove(element,type,handler,scope);if(eid&&this._listeners[eid]){delete this._listeners[eid];}};EventAgent.prototype.removeAllListeners=function(){for(var eid in this._listeners){var listener=this._listeners[eid];this.remove(listener.target,listener.type,listener.fn,listener.scope);delete this._listeners[eid];}};EventAgent.prototype.add=function(target,type,fn,scope){var id=helper.getID(target),events,eventHandle,i,len,listeners,that=this,listener;if(id===-1||!type||helper.getConstructorName(fn)!='Function'){return;}\nif(!id){helper.setID(target,(id=helper.guid++));helper.cache[id]={target:target,events:{}};}\nevents=helper.cache[id].events;if(!events[type]){var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");eventHandle=function(event){event=event?eventutil.fix(event):eventutil.getEvent();that._handle(target,event);};events[type]={handle:eventHandle,listeners:[]};eventutil.addEventHandler(target,type,eventHandle);}\nlisteners=events[type].listeners;for(i=0,len=listeners.length;i<len;i++){if(listeners[i].fn===fn&&listeners[i].scope===scope){return;}}\nlistener={fn:fn,scope:scope};domutils.generateId(listener,'ea-gen');events[type].listeners.push(listener);return listener.id;};EventAgent.prototype.remove=function(target,type,fn,scope){var events=this._getEvents(target),id=helper.getID(target);var eventsType,listeners,len,i,p,isEmpty,undef,eid;if(events===undef){return;}\nif((eventsType=events[type])){listeners=eventsType.listeners;i=len=listeners.length;if(helper.getConstructorName(fn)=='Function'&&len){for(;--i>=0;){if(fn===listeners[i].fn){if(scope===undef||scope===listeners[i].scope){if(!eid){eid=listeners[i].id;}else{eid=[eid].concat(listeners[i].id);}\nlisteners.splice(i,1);len--;}}}}\nif(fn===undef||len===0){var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");eventutil.removeEventHandler(target,type,eventsType.handle);delete events[type];}}\nisEmpty=true;for(p in events){isEmpty=false;break;}\nif(type===undef||isEmpty){for(type in events){this.remove(target,type);}\ndelete helper.cache[id];helper.removeID(target);}\nreturn eid;};EventAgent.prototype._handle=function(target,ev){var listeners=this._getListeners(target,ev.type).slice(0);var ret,i=0,len=listeners.length,listener,undef;for(;i<len;++i){listener=listeners[i];ret=listener.fn.call(listener.scope||target,ev);if(ret===false){domutils.stopEvent(ev);}}\nif(ev.fixedPreventDefault){if(ev.removeAttribute){ev.removeAttribute(\"preventDefault\");}else{ev.preventDefault=null;}\nev.fixedPreventDefault=false;}\nif(ev.fixedStopPropagation){if(ev.removeAttribute){ev.removeAttribute(\"stopPropagation\");}else{ev.stopPropagation=null;}\nev.fixedStopPropagation=false;}\nreturn ret;};EventAgent.prototype._getEvents=function(target){var id=helper.getID(target),c,events;if(id===-1){return;}\nif(!id||!(c=helper.cache[id])){return;}\nif(c.target!==target){return;}\nevents=c.events||{};return events;};EventAgent.prototype._getListeners=function(target,type){var events=this._getEvents(target)||{},eventsType,listeners=[];if((eventsType=events[type])){listeners=eventsType.listeners;}\nreturn listeners;};var helper={cache:{},guid:(new Date).getTime(),EVENT_GUID:'bofEventTargetId',getID:function(target){return helper.isValidTarget(target)?domutils.data(target,helper.EVENT_GUID):-1;},setID:function(target,id){if(helper.isValidTarget(target)){domutils.data(target,helper.EVENT_GUID,id);}},removeID:function(target){domutils.removeData(target,helper.EVENT_GUID);},isValidTarget:function(target){var nodeType=0;try{nodeType=target&&target.nodeType;}catch(e){return false;}\nreturn target&&nodeType!==3&&nodeType!==8;},getConstructorName:function(o){return o&&Object.prototype.toString.call(o).slice(8,-1);}};","js/freequery/lang/registry.js":"\nvar Registry=function(){this.root={};};Registry.prototype.put=function(name,obj){this.root[name]=obj;};Registry.prototype.get=function(name){return this.root[name];};Registry.prototype.has=function(name){return name in this.root;};Registry.prototype.remove=function(name){var obj=this.root[name];delete this.root[name];return obj;};Registry.prototype.clear=function(){for(var name in this.root)\nthis.remove(name);};var registry=new Registry();","js/freequery/lang/CustomEvent.js":"\nvar CustomEvent=function(name,obj){this.name=name;this.obj=obj;this.subscribers=[];};CustomEvent.prototype={subscribe:function(func,obj){if(!obj){obj=this.obj;}\nfor(var i=0,len=this.subscribers.length;i<len;++i){var s=this.subscribers[i];if(!s){continue;}\nif(s[0]==func&&s[1]==obj){return;}}\nthis.subscribers.push([func,obj]);},unsubscribe:function(func,obj){var found=false;if(!obj){obj=this.obj;}\nfor(var i=0,len=this.subscribers.length;i<len;++i){var s=this.subscribers[i];if(s&&s[0]==func&&s[1]==obj){this.deleteSubscriber(i);found=true;}}\nreturn found;},unsubscribeAll:function(){var s=this.subscribers;if(s&&s.length>0){for(var i=s.length-1;i>=0;i--){this.deleteSubscriber(i);}}},deleteSubscriber:function(index){var s=this.subscribers[index];if(s){delete s[0];delete s[1];}\nthis.subscribers.splice(index,1);},fire:function(){var len=this.subscribers.length;if(!len&&this.silent){return;}\nvar terminateOnFalse=(this.terminateOnFalse===true);for(var i=0;i<len;++i){var s=this.subscribers[i];if(s){var v=s[0].apply(s[1],arguments);if(terminateOnFalse&&v===false){return false;}}}\nreturn true;}};","js/freequery/control/logger.js":"\nvar logger=(function(ns,win){var exportWin=win;try{exportWin=(win.top!=win&&'object'==typeof win.top.jsloader)?win.top:win;}catch(e){}\nvar exportLogger=exportWin[ns];var doc=win.document,elWrapper,elList,elEnable,elCopy,elClear,elClose,logEnabled=false,profiler={},msgBuff=[],isEven=false,IDs={logger:'blLogger',enable:'blEnable'},addEvent=doc.addEventListener?function(el,type,fn,capture){if(el.addEventListener){el.addEventListener(type,fn,!!capture);}}:function(el,type,fn){if(el.attachEvent){el.attachEvent('on'+type,fn);}},removeEvent=doc.removeEventListener?function(el,type,fn,capture){if(el.removeEventListener){el.removeEventListener(type,fn,!!capture);}}:function(el,type,fn){if(el.detachEvent){el.detachEvent('on'+type,fn);}};function initUI(){if(elWrapper&&doc.getElementById(IDs.logger)){return;}\nelWrapper=doc.createElement('DIV');elWrapper.id=IDs.logger;elWrapper.innerHTML=['<div class=\"header\">',' <div class=\"left\">','  <label for=\"'+IDs.enable+'\" title=\"logging enable\"><input type=\"checkbox\" id=\"'+IDs.enable+'\">Log<\/label>',' <\/div>',' <div class=\"right\">','  <input type=\"button\" value=\"Copy\" title=\"copy all messages\">','  <input type=\"button\" value=\"Clear\" title=\"clear all messages\">','  <input type=\"button\" value=\"Close\" title=\"close\">',' <\/div>','<\/div>','<div class=\"main\">',' <ul><\/ul>','<\/div>'].join('');var body=doc.getElementsByTagName('BODY')[0];body.appendChild(elWrapper);elList=elWrapper.getElementsByTagName('UL')[0];var elems=elWrapper.getElementsByTagName('INPUT');elEnable=elems[0];elCopy=elems[1];elClear=elems[2];elClose=elems[3];addEvent(elEnable,'click',function(){logEnabled=elEnable.checked;});addEvent(elCopy,'click',copyMsgs);addEvent(elClear,'click',clearMsgs);addEvent(elClose,'click',hide);var Drag=(function(){var x0=0,y0=0,x1=0,y1=0,movable=false,left,top;var win=elWrapper,elem=win.getElementsByTagName('DIV')[0];return{elem:elem,start:function(ev){ev=ev||win.event;if(ev&&(ev.button==1||ev.which==1)&&elem){if(elem.setCapture){elem.setCapture();}\nx0=ev.x?ev.x:ev.pageX;y0=ev.y?ev.y:ev.pageY;x1=parseInt(win.offsetLeft,10);y1=parseInt(win.offsetTop,10);movable=true;}},move:function(ev){ev=ev||win.event;if(ev&&movable&&elem){left=x1+(ev.x?ev.x:ev.pageX)-x0;top=y1+(ev.y?ev.y:ev.pageY)-y0;if(!isNaN(left)){win.style.left=left+'px';}\nif(!isNaN(top)){win.style.top=top+'px';}}},stop:function(ev){if(movable&&elem){if(elem.releaseCapture){elem.releaseCapture();}\nmovable=false;}}};})();addEvent(Drag.elem,'mousedown',Drag.start);addEvent(Drag.elem,'mouseup',Drag.stop);addEvent(Drag.elem,'mousemove',Drag.move);}\nfunction addToUI(msg,type){type=type||'log';msg='['+(type+'   ').substr(0,5).toUpperCase().replace(/[ ]/g,'&nbsp;')+']&nbsp;'\n+msg;if(elList){var newMsg=doc.createElement('LI');newMsg.className=isEven?'even':'odd';isEven=!isEven;newMsg.innerHTML='<span class=\"'+type+'\">'+msg+'<\/span>';elList.appendChild(newMsg);}}\nfunction addMsg(msg,type){if(!logEnabled){return;}\nif(isVisible()){addToUI(msg,type);}else{msgBuff.push([msg,type]);}}\nfunction getInnerText(html){var isElement=(html&&html.nodeType);var span=isElement?html:doc.createElement(\"SPAN\");if('undefined'==typeof span.innerText&&'object'==typeof HTMLElement){HTMLElement.prototype.__defineGetter__(\"innerText\",function(){return this.textContent;});HTMLElement.prototype.__defineSetter__(\"innerText\",function(sText){this.textContent=sText;});}\nif(!isElement){span.innerHTML=html;}\nreturn span.innerText;}\nfunction copyMsgs(){if(elList){var data=getInnerText(elList);win.clipboardData.setData('Text',data);}}\nfunction clearMsgs(){if(elList){elList.innerHTML='';}\nmsgBuff.length=0;isEven=false;}\nfunction isVisible(){return(elWrapper&&elWrapper.clientWidth&&elWrapper.style.display=='block')||false;}\nfunction hide(){if(elWrapper){elWrapper.style.display='none';}}\nfunction show(){initUI();if(elWrapper){elWrapper.style.display='block';}\nif(elEnable){elEnable.checked=logEnabled;}\nwhile(msgBuff.length){var info=msgBuff.shift();addToUI(info[0],info[1]);}}\nfunction readKey(ev){ev=ev||win.event;var code=113;if(ev&&ev.keyCode==code&&exportLogger){var visible=exportLogger._isVisible();if(visible&&ev.shiftKey&&ev.altKey){exportLogger._clearMsgs();}else if(ev.shiftKey&&!ev.altKey&&ev.ctrlKey){if(visible){exportLogger._hide();}else{exportLogger._show();}}}}\nfunction winLoaded(){addEvent(doc,'keyup',readKey);addEvent(win,'unload',winUnloaded);removeEvent(win,'load',winLoaded);}\nfunction winUnloaded(){removeEvent(doc,'keyup',readKey);removeEvent(win,'unload',winUnloaded);if(win[ns]){win[ns]=null;try{delete win[ns];}catch(e){}}}\nif(!exportLogger||win!=exportWin){addEvent(win,'load',winLoaded);}\nif(!exportLogger){exportLogger=exportWin[ns]={_isVisible:isVisible,_clearMsgs:clearMsgs,_show:show,_hide:hide,log:addMsg,clear:clearMsgs,profile:function(){var currTime=new Date();if(logEnabled){var args=[].slice.apply(arguments),l=args.length,i=0,m={},label,s;for(;i<l;i++){label=args[i];if(label&&!m[label]){if(profiler[label]){s=[label,': ',currTime-profiler[label],'ms'].join('');addMsg(s,'profile');delete profiler[label];}else{profiler[label]=currTime;}\nm[label]=true;}}}\nreturn currTime;},toggle:function(){if(isVisible()){hide();}else{show();}},getEnabled:function(){return logEnabled;},setEnabled:function(enabled){logEnabled=('boolean'===typeof enabled)?enabled:false;if(elEnable){elEnable.checked=logEnabled;}}};}\nreturn exportLogger;})('boflog',window);","js/bof/baseajax/common/AbstractAction.js":"\nvar BaseActionGroup=imports(\"bof.baseajax.common.BaseActionGroup\");var HistoryManager=imports(\"bof.baseajax.common.HistoryManager\");var util=jsloader.resolve(\"freequery.common.util\");var compatutil=jsloader.resolve(\"freequery.lang.compatutil\");var AbstractAction=function(){this.id=null;this.text=null;this.iconUrl=null;this.actionGroup=null;};AbstractAction.prototype.execute=function(operation,arg){if(!this.isEnabled(operation,arg)){return false;}\nif(this.getActionGroup()){return this.getActionGroup().execute(this,operation,arg);}else{return this.executeIntern(operation,arg);}};AbstractAction.prototype.executeIntern=function(operation,arg){var result=false;if(\"open\"==operation){pushAction(this);if(this.open){result=this.open(arg);this.openDisabled=result;}else{result=false;}\npopAction(this);}else if(\"close\"==operation){if(this.close){result=this.close(arg);this.openDisabled=!result;}else{result=false;}}else{result=false;}\nif(result){var t=this;setTimeout(function(){if(\"open\"==operation){compatutil.onActionOpen.fire(t);}else if(\"close\"==operation){compatutil.onActionClose.fire(t);}},0);}\nreturn result;};AbstractAction.prototype.isValid=function(){if(this.functionCode){return util.checkFunctionValid(this.functionCode);}else{return true;}};AbstractAction.prototype.isEnabled=function(operation,arg){if(\"open\"==operation){return this.isOpenEnabled(arg);}else if(\"close\"==operation){return this.isCloseEnabled(arg);}else{throw new Error(\"Unknown operation: \"+operation);}};AbstractAction.prototype.isOpenEnabled=function(arg){return!this.openDisabled;};AbstractAction.prototype.isCloseEnabled=function(){return true;};AbstractAction.prototype.destroy=function(){this.close();};AbstractAction.prototype.getActionGroup=function(){return this.actionGroup;};AbstractAction.prototype.setActionGroup=function(actionGroup){this.actionGroup=actionGroup;};AbstractAction.prototype.open=function(arg){};AbstractAction.prototype.close=function(arg){};AbstractAction.prototype.restore=function(){var doRestore=function(action){if(action.parentAction){doRestore(action.parentAction);}\naction.execute(\"open\",{ignoreSubActions:true});};doRestore(this);};var stack=[];var counter=0;var pushAction=function(action){if(!action){return;}\nstack.push(action);counter++;};var popAction=function(action){if(!action){return;}\ncounter--;if(counter==0){var AbstractTabAction=jsloader.resolve(\"freequery.actions.AbstractTabAction\");var MainFrameAction=jsloader.resolve(\"bof.baseajax.common.actions.MainFrameAction\");action=stack.pop();while(action){if(action.parentAction instanceof AbstractTabAction){break;}\nif(action.parentAction instanceof MainFrameAction){break;}\naction=action.parentAction;}\nstack=[];if(action&&action.id){var historyManager=HistoryManager.getInstance()\nhistoryManager.addHistoryState(action);}}};","js/bof/baseajax/common/BasicAction.js":"\nvar modalWindow=imports(\"freequery.common.modalWindow\");var BasicAction=function(){this.isOpen=false;this.view=null;};lang.extend(BasicAction,\"bof.baseajax.common.AbstractAction\");BasicAction.prototype.open=function(){this.view=this.createView();if(!this.view){return false;}\nthis.view.onChange.subscribe(function(ev){var result=false;if(ev){result=this.save();}else{result=this.discard();}\nif(result){this.execute(\"close\");}},this);this.isOpen=true;return true;};BasicAction.prototype.close=function(){if(this.view){this.view.destroy();this.view=null;}\nthis.isOpen=false;return true;};BasicAction.prototype.isCloseEnabled=function(){if(!this.view){return true;}\nif(this.view.discarded){return true;}\nif(!this.view.isDirty()){return true;}\nreturn this.confirm();};BasicAction.prototype.confirm=function(){var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");var event=eventutil.getEvent();if(event&&\"beforeunload\"==event.type){return false;}\nvar ModalWindow=modalWindow.getInstance();var result=ModalWindow.open(\"存在未保存的修改，是否保存？\",\"保存确认\",ModalWindow.MB_YES|ModalWindow.MB_NO|ModalWindow.MB_CANCEL);var doClose=true;if(result==ModalWindow.ID_YES){doClose=this.save();}else if(result==ModalWindow.ID_NO){this.discard();}else{doClose=false;}\nreturn doClose;};BasicAction.prototype.createView=function(arg){};BasicAction.prototype.save=function(arg){};BasicAction.prototype.discard=function(arg){if(this.view){this.view.discarded=true;}\nreturn true;};","js/bof/baseajax/common/CompositeAction.js":"\nvar BaseActionGroup=imports(\"bof.baseajax.common.BaseActionGroup\");var util=jsloader.resolve(\"freequery.common.util\");var CompositeAction=function(){};lang.extend(CompositeAction,\"bof.baseajax.common.AbstractAction\");CompositeAction.prototype.initActions=function(){this.defaultActionGroup=new BaseActionGroup();this.actionGroupMap={\"default\":this.defaultActionGroup};this.actions=[];this.refreshActions();};CompositeAction.prototype.refreshActions=function(){this.config=this.readConfig();if(!this.config||!this.config.actions||0==this.config.actions.length){return;}\nthis.slots=this.getSlots();if(!this.slots){return;}\nif(this.config.actionGroups){for(var i=0;i<this.config.actionGroups.length;i++){var actionGroupDef=this.config.actionGroups[i];this.actionGroupMap[actionGroupDef.id]=imports(actionGroupDef.className)();}}\nvar newActions=new Array();for(var i=0;i<this.config.actions.length;i++){var actionDef=this.config.actions[i];if(actionDef.componentName){var names=actionDef.componentName.split(\"|\");var invalid=true;for(var j=0;j<names.length&&invalid;j++){if(util.licenses[names[j]])\ninvalid=false;}\nif(invalid)\ncontinue;}\nnewActions.push(actionDef);}\nthis.config.actions=newActions;for(var i=0;i<this.config.actions.length;i++){var actionDef=this.config.actions[i];var action=imports(actionDef.className)(this.slots[0],this.slots[1],this.slots[2],this.slots[3],this.slots[4],this.slots[5],this.slots[6],this.slots[7]);if(!actionDef.id){actionDef.id=actionDef.className;}\nif(!action.id){action.id=actionDef.id;}\nif(actionDef.text){action.text=actionDef.text;}\nif(actionDef.textWidth){action.textWidth=actionDef.textWidth;}\nif(actionDef.iconUrl){action.iconUrl=actionDef.iconUrl;}\nif(actionDef.functionCode){action.functionCode=actionDef.functionCode;}\nif(actionDef.hide){action.hide=actionDef.hide;}\naction.parentAction=this;action.className=actionDef.className;var index=this.getActionIndexById(action.id);if(index>=i){var oldAction=this.actions.splice(index,1)[0];this.separateActionFromGroup(oldAction);if(action.text)\noldAction.text=action.text;if(action.textWidth)\noldAction.textWidth=action.textWidth;if(action.iconUrl)\noldAction.iconUrl=action.iconUrl;if(action.functionCode)\noldAction.functionCode=action.functionCode;if(action.hide)\noldAction.hide=action.hide;action=oldAction;}\nthis.actions.splice(i,0,action);if(actionDef.isInitial){this.initialAction=action;}\nif(!actionDef.groupId){continue;}\nvar actionGroup=this.actionGroupMap[actionDef.groupId];if(!actionGroup){continue;}\nactionGroup.addAction(action,actionDef.isDefault);if(!actionGroup.getDefaultAction()&&action.isValid()){actionGroup.setDefaultAction(action);}}\nfor(var i=this.actions.length-this.config.actions.length;i>0;i--){var action=this.actions.pop();this.separateActionFromGroup(action);action.destroy();}\nif(!this.initialAction){this.initialAction=this.defaultActionGroup.getDefaultAction();}}\nCompositeAction.prototype.separateActionFromGroup=function(action){if(action&&action.getActionGroup){var tempGroup=action.getActionGroup();if(tempGroup.currentAction&&tempGroup.currentAction.id==action.id)\ntempGroup.currentAction=null;if(tempGroup.defaultAction&&tempGroup.defaultAction.id==action.id)\ntempGroup.defaultAction=null;action.setActionGroup(null);}}\nCompositeAction.prototype.getActionById=function(actionId){var index=this.getActionIndexById(actionId);return(index==-1)?null:this.actions[index];}\nCompositeAction.prototype.getActionIndexById=function(actionId){if(this.actions&&actionId!=undefined){for(var i=0;i<this.actions.length;i++){if(this.actions[i].id==actionId)\nreturn i;}}\nreturn-1;}\nCompositeAction.prototype.destroyActions=function(){this.initialAction=null;if(this.actions){for(var i=0;i<this.actions.length;i++){this.actions[i].destroy();}\nthis.actions=null;}\nthis.actionGroupMap=null;this.defaultActionGroup=null;this.slots=null;this.config=null;};CompositeAction.prototype.isCloseEnabled=function(){if(!this.actions){return true;}\nvar enabled=true;for(var i=0;enabled&&i<this.actions.length;i++){enabled=this.actions[i].isEnabled(\"close\");}\nreturn enabled;};CompositeAction.prototype.getCurrentAction=function(groupId){var action=null;if(this.actionGroupMap){var actionGroup=this.actionGroupMap[groupId||\"default\"];action=actionGroup&&actionGroup.getCurrentAction();}\nreturn action;};CompositeAction.prototype.readConfig=function(){};CompositeAction.prototype.getSlots=function(){};","js/bof/baseajax/control/ScrollToolbar.js":"\nvar ScrollToolbar=function(toolbar,skip){if(skip){this.table=toolbar;this.tr=this.table.rows[0];this.moveTd=this.tr.cells[1];this.parentDiv=this.tr.cells[0].firstChild;this.childDiv=this.parentDiv.firstChild;this.moveLeft=this.moveTd.firstChild;this.moveRight=this.moveLeft.nextSibling;}else{var table=document.createElement(\"TABLE\");table.style.width=\"100%\";table.style.tableLayout=\"fixed\";table.cellSpacing=0;table.cellPadding=0;toolbar.parentNode.insertBefore(table,toolbar);var tBody=document.createElement(\"TBODY\");table.appendChild(tBody);var tr=document.createElement(\"TR\");tBody.appendChild(tr);var td=document.createElement(\"TD\");tr.appendChild(td);td.noWrap=true;var parentDiv=document.createElement(\"DIV\");parentDiv.style.overflow=\"hidden\";parentDiv.style.width=\"100%\";td.appendChild(parentDiv);var childDiv=document.createElement(\"DIV\");childDiv.style.position=\"relative\";childDiv.style.width=\"100%\";parentDiv.appendChild(childDiv);childDiv.appendChild(toolbar);td=document.createElement(\"TD\");td.style.width=\"40px\";tr.appendChild(td);td.noWrap=true;var moveLeft=document.createElement(\"SPAN\");moveLeft.className=\"tab-scroll-left-disabled\";td.appendChild(moveLeft);var moveRight=document.createElement(\"SPAN\");moveRight.className=\"tab-scroll-right-enabled\";td.appendChild(moveRight);this.table=table;this.tr=tr;this.moveTd=td;this.parentDiv=parentDiv;this.childDiv=childDiv;this.moveLeft=moveLeft;this.moveRight=moveRight;}\nthis.addListener(this.table,\"resize\",this.doOnTableResize,this);this.addListener(this.moveLeft,\"click\",this.doOnMoveLeft,this);this.addListener(this.moveRight,\"click\",this.doOnMoveRight,this);};lang.extend(ScrollToolbar,\"freequery.widget.Module2\");ScrollToolbar.prototype.destroy=function(){this.table=null;this.tr=null;this.moveTd=null;this.parentDiv=null;this.childDiv=null;this.moveLeft=null;this.moveRight=null;return ScrollToolbar.superclass.destroy.call(this);}\nScrollToolbar.prototype.doOnTableResize=function(e){if(!this.childDiv.__left)\nthis.childDiv.__left=0;if(this.tr.clientWidth<this.childDiv.clientWidth){var left=Math.max(this.childDiv.__left,this.parentDiv.clientWidth-this.childDiv.clientWidth-4);if(this.childDiv.__left!=left)\nthis.moveRight.className=\"tab-scroll-right-disabled\";else\nthis.moveRight.className=\"tab-scroll-right-enabled\";this.childDiv.__left=left;this.childDiv.style.left=this.childDiv.__left;this.moveTd.style.display='';}else{this.childDiv.__left=0;this.moveRight.className=\"tab-scroll-right-enabled\";this.moveLeft.className=\"tab-scroll-left-disabled\";this.childDiv.style.left=0;this.moveTd.style.display='none';}}\nScrollToolbar.prototype.doOnMoveLeft=function(e){if(!this.childDiv.__left)\nthis.childDiv.__left=0;this.childDiv.__left+=100;this.moveRight.className=\"tab-scroll-right-enabled\";var left=Math.min(this.childDiv.__left,0);if(left==0)\nthis.moveLeft.className=\"tab-scroll-left-disabled\";this.childDiv.__left=left;this.childDiv.style.left=this.childDiv.__left;}\nScrollToolbar.prototype.doOnMoveRight=function(e){if(!this.childDiv.__left)\nthis.childDiv.__left=0;this.childDiv.__left-=100;if(this.childDiv.__left<0)\nthis.moveLeft.className=\"tab-scroll-left-enabled\";var left=Math.max(this.childDiv.__left,this.parentDiv.clientWidth-this.childDiv.clientWidth-4);if(left!=this.childDiv.__left)\nthis.moveRight.className=\"tab-scroll-right-disabled\";this.childDiv.__left=left;this.childDiv.style.left=this.childDiv.__left;}","js/bof/decisionpanel/newportal/NewPage.js":"\nvar util=jsloader.resolve(\"freequery.common.util\");var PortalService=imports(\"bof.decisionpanel.Portal.PortalService\");var modalWindow=imports(\"freequery.common.modalWindow\");var NewDashletContent=jsloader.resolve(\"bof.decisionpanel.newportal.NewDashletContent\");var URLLinkCommand=imports(\"freequery.sysresource.URLLinkCommand\");var ParameterPanel=null;var PageUtil=jsloader.resolve(\"bof.decisionpanel.Portal.PageUtil\");var MacroService=null;var MacroMenuCommand=null;var compatutil=jsloader.resolve(\"freequery.lang.compatutil\");var NewPage=function(viewSlot,pageId,pageName,isPublic,parentObj,pageBO){window.lastWidth=window.document.body.clientWidth;window.lastHeight=window.document.body.clientHeight;this.viewSlot=viewSlot;this.pageId=pageId;this.pageName=pageName;this.parentDesktop=parentObj;this.pageBO=pageBO;var viewdiv=document.getElementById(\"_viewdiv_\");compatutil.fixFirefoxScroll2(viewdiv);this.dashletSkinDisplay=true;this.dashletSkinVisibilitySwitchEnable=true;this.pageUtil=new PageUtil(this);this.initDashletSkinDisplay();this.slotList=new Array();this.dashletList=new Array();this.countOfParamInitedDashlet=0;this.dpParamConfig=null;this.isDp=true;this.isFromView=true;this.justPublic=isPublic;this.paramSumList=new Array();this.reportList=new Array();this.paramToPortlets=new Array();this.paramAlreadInits=new Array();this.loadComplete=false;this.loadingImgDisplay=true;this.modules=[];this.onShowPage=new CustomEvent(\"showPage\",this);if(!MacroMenuCommand)\nMacroMenuCommand=jsloader.resolve(\"bof.decisionpanel.Portal.macro.MacroMenuCommand\");this.handler=new MacroMenuCommand();this.handler.onDoCmd.subscribe(this.doCmd,this);this.initHandlers();this.isNeedSetTempSize(false);}\nlang.extend(NewPage,\"freequery.widget.Module2\");NewPage.prototype.loadLayout=function(){if(!this.pageId)\nreturn;if(!this.pageBO){var result=PortalService.getInstance().getPageBO(this.pageId);if(!result)\nreturn;this.pageBO=result;}\nthis.readableList=[];if(this.pageBO.readable){for(var count in this.pageBO.readable){var arr=this.pageBO.readable[count].split(\":\");this.readableList[arr[0]]=true;if(arr[1]==\"false\"){this.readableList[arr[0]]=false;}}}\nvar result;if(!this.justPublic){this.layout=this.pageBO.privateLayout;}else{this.layout=this.pageBO.publicLayout;}\nif(this.layout&&(this.layout.type==\"custom\"||this.layout.type==\"\")&&this.layout.layoutContent){this.layoutObj=lang.parseJSON(this.layout.layoutContent);}\nif(!this.justPublic){this.dashletLayoutInfoList=this.pageBO.privateDashletLayout;}else{this.dashletLayoutInfoList=this.pageBO.publicDashletLayout;}\nthis.dashletInfoList=this.pageBO.dashletInfo;this.paramBean=this.pageBO.paramList;this.paramPanelId=this.pageBO.parameterPanelId;this.params=this.pageBO.publicParamList;this.paramAligh=\"center\";if(this.pageBO.pageInfo.paramLayout){this.paramLayout=lang.parseJSON(this.pageBO.pageInfo.paramLayout);if(null!=this.paramLayout){var paramAligh=this.paramLayout[this.paramLayout.length-1];if(typeof paramAligh==\"string\"){this.paramAligh=this.paramLayout.pop();}}}}\nNewPage.prototype.initLayout=function(){var tdList=this.viewSlot.getElementsByTagName(\"td\");var i=0;var flag=false;do{var propName=\"layout\"+i;flag=false;for(var j=0,len=tdList.length;j<len;j++){var bofId=tdList[j].getAttribute(\"bofId\");if(bofId!=null&&bofId==propName){this.slotList[i]=tdList[j];this.slotList[i].scrollObj=this.viewSlot;flag=true;break;}}\ni++;}while(flag);for(var j=0;j<tdList.length;j++){var bofId=tdList[j].getAttribute(\"bofId\");if(bofId!=null&&bofId==\"paramPanel\"){this.elemParamPanel=tdList[j];break;}}\nfor(var j=0;j<tdList.length;j++){var bofId=tdList[j].getAttribute(\"bofId\");if(bofId!=null&&bofId==\"portalHeader\"){this.elemPortalHeader=tdList[j];break;}}}\nNewPage.prototype.setHiddenParams=function(hiddenParamList){this.hiddenParamList=hiddenParamList;}\nNewPage.prototype.show=function(paramList){this.InteractParamList=paramList;this.loadComplete=false;var that=this;if(!this.setTimeoutCount)\nthis.setTimeoutCount=0;this.setTimeoutCount++;setTimeout(function(){try{that.loadLayout();that.initLayout();that.runBeforeRanderMacro();that.showAgent();that.runMacro();that.onShowPage.fire(that);}finally{that.setTimeoutCount--;}},100);return;}\nNewPage.prototype.showAgent=function(){if(!this.dashletInfoList){return false;}else{this.addAllParamToPanel();}\nvar needSetTempSize=this.needSetTempSize;if(domutils.isIOS()||domutils.isAndroid()){needSetTempSize=true;}else{if(this.layoutObj){for(tri in this.layoutObj.layout){var tro=this.layoutObj.layout[tri];for(tdi in tro){var tdo=tro[tdi];if(tdo.rowspan>1){needSetTempSize=true;break;}}}}}\nfor(dashletLayoutInfoIdx in this.dashletLayoutInfoList){var slotIndex=this.dashletLayoutInfoList[dashletLayoutInfoIdx].layoutPosition;if(slotIndex<0||slotIndex>=this.slotList.length)\nslotIndex=this.slotList.length-1;var dashletInfo=null;for(dashletIndex in this.dashletInfoList){if(this.dashletInfoList[dashletIndex].id==this.dashletLayoutInfoList[dashletLayoutInfoIdx].dashletId){dashletInfo=this.dashletInfoList[dashletIndex];break;}}\nif(dashletInfo!=null){var tempDashlet=new NewDashletContent(this,this.slotList[slotIndex],dashletInfo,null);tempDashlet.onBackward.subscribe(this.onBackwardClick,this);tempDashlet.onForward.subscribe(this.onForwardClick,this);this.dashletList.push(tempDashlet);if(needSetTempSize){tempDashlet.setTempSize(tempDashlet.frameDiv.clientWidth,tempDashlet.frameDiv.clientHeight);}}}\nfor(dashletIndex in this.dashletInfoList){var dashletInfo=this.dashletInfoList[dashletIndex];var flag=false;for(dashletLayoutInfoIdx in this.dashletLayoutInfoList){if(this.dashletInfoList[dashletIndex].id==this.dashletLayoutInfoList[dashletLayoutInfoIdx].dashletId){flag=true;break;}}\nif(!flag){var slotIndex=this.slotList.length-1;var tempDashlet=new NewDashletContent(this,this.slotList[slotIndex],dashletInfo,null);tempDashlet.onBackward.subscribe(this.onBackwardClick,this);tempDashlet.onForward.subscribe(this.onForwardClick,this);this.dashletList.push(tempDashlet);if(needSetTempSize){tempDashlet.setTempSize(tempDashlet.frameDiv.clientWidth,tempDashlet.frameDiv.clientHeight);}}}\nif(!window.bof_offline_xhr){util.compositeInvoke(\"setAndGetDefaultParamValuesInPage\",[this.pageBO.clientId]);}\nfor(index in this.dashletList){var tempDashlet=this.dashletList[index];tempDashlet.openView();}\nif(!window.bof_offline_xhr){util.clearCompositeInvokeCache(\"setAndGetDefaultParamValuesInPage\",[this.pageBO.clientId]);}\nthis.checkCount=0;this.checkLoadComplete();}\nNewPage.prototype.checkLoadComplete=function(){this.checkCount++;if(this.checkCount<8){if(!this.isLoadComplete()){var obj=this;window.setTimeout(function(){obj.checkLoadComplete();},1000);return;}}\nthis.loadComplete=true;if(this.isFromView){this.setStyleForReport();}\nvar viewDiv=domutils.findElementByClassName(this.viewSlot,\"_viewdiv\");if(!window.__Portlet_is_hybrid&&viewDiv){viewDiv.style.overflow=\"hidden\";setTimeout(function(){viewDiv.style.overflow=\"auto\";},100);}\nutil.clearCompositeInvokeCache(\"openPage\",[this.pageId]);if(domutils.isFirefox()){this.pageUtil.refreshSize();}}\nNewPage.prototype.isLoadComplete=function(){for(idx in this.dashletList){var dashlet=this.dashletList[idx];if(this.isFromView){if(dashlet.dashletType=='SimpleReport'){if(dashlet.portlet&&dashlet.portlet.queryCmd&&dashlet.portlet.queryCmd.query&&!dashlet.portlet.queryCmd.query.readyForUse){this.loadComplete=false;return false;}}else if((dashlet.dashletType=='Dashboard'||dashlet.dashletType=='DashboardMap')){if(dashlet.portlet.command&&dashlet.portlet.command.dashboard&&dashlet.portlet.command.dashboard.chartView&&dashlet.portlet.command.dashboard.chartView.flash&&(domutils.isIE()&&dashlet.portlet.command.dashboard.dpChart.flash.readyState!=4)){this.loadComplete=false;return false;}}else if(dashlet.dashletType=='MetricReport'||dashlet.dashletType=='FreeReport'){var frm=dashlet.portlet.frame;if(null!=frm&&frm.contentWindow.document&&frm.contentWindow.document.readyState!=\"complete\"){this.loadComplete=false;return false;}}}}\nthis.loadComplete=true;return true;}\nNewPage.prototype.checkPublicParamsValueInited=function(){this.countOfParamInitedDashlet++;if(this.countOfParamInitedDashlet==this.getTotalCountOfhasParamInitedCheckDashlet()){this.runAfterInitedAllPublicParamsMacro();}}\nNewPage.prototype.getTotalCountOfhasParamInitedCheckDashlet=function(){if(this.totalCountOfparamInitedCheckDashlet===undefined){var count=0;for(idx in this.dashletList){var dashlet=this.dashletList[idx];if(this.isFromView){if(dashlet.dashletType=='SimpleReport'||dashlet.dashletType=='Dashboard'||dashlet.dashletType=='DashboardMap'){count++;}}}\nthis.totalCountOfparamInitedCheckDashlet=count;}\nreturn this.totalCountOfparamInitedCheckDashlet;}\nNewPage.prototype.getPortletInfo=function(portletId){return this.pageUtil.getPortletInfo(portletId);}\nNewPage.prototype.newDashletView=function(nodeId,type,slot,indexInSlot){var tempDashlet=null;var idx=0;for(;idx<this.slotList.length;idx++){if(slot==this.slotList[idx])\nbreak;}\nif(!indexInSlot)\nindexInSlot=0;var dashletInfo=new Object();dashletInfo.type=type;dashletInfo.content=null;dashletInfo.portletId=nodeId;var oldSlot=null;for(indx=0;indx<this.slotList[idx].childNodes.length;indx++){if(indx==indexInSlot){oldSlot=this.slotList[idx].childNodes[indx];break;}}\nif(oldSlot){var tempDashlet=new NewDashletContent(this,null,dashletInfo,null);var newSlot=this.slotList[idx].insertBefore(tempDashlet.frameDiv,oldSlot);tempDashlet.parentDiv=newSlot;tempDashlet.layoutSlotName=this.slotList[idx].getAttribute(\"bofId\");}else{var tempDashlet=new NewDashletContent(this,this.slotList[idx],dashletInfo,null);}\nthis.dashletList.push(tempDashlet);return tempDashlet;}\nNewPage.prototype.setReplaceDashlet=function(tempDashlet,nodeId,type,slot){var result=util.remoteInvoke(\"DPPortalService\",\"getTempId\",[]);tempDashlet.id=result.result;tempDashlet.bofid=result.result;}\nNewPage.prototype.getNewDashletSlot=function(selfDashletId){return this.pageUtil.getNewDashletSlot(selfDashletId);}\nNewPage.prototype.deleteReplacePortlet=function(){if(this.newDashlet&&this.deleteResId)\nthis.deleteDashletParam(this.newDashlet,true,this.deleteResId);}\nNewPage.prototype.replaceDashlet=function(portletId,dashletType,openMode,paramObjList,dashlet){var dashletId=dashlet.tarDashletId;var selfDashletId=dashlet.srcDashletId;var deleteResId=dashlet.srcResId;var isDeleteRes=false;if(openMode==0||openMode==1){var newDashlet;if(dashletId){for(idx in this.dashletList){var dashlet=this.dashletList[idx];if(dashlet.id==dashletId){newDashlet=dashlet;isDeleteRes=true;var oldDathletType=dashlet.dashletType;deleteResId=dashlet.portlet.portletId;break;}}}else{if(this.urlReplaceDashlet&&dashletType==\"URL\"){var oldPortletId=this.urlReplaceDashlet.portletId;if(oldPortletId==portletId){this.destroyOrRefreshInnerPage(true,paramObjList);return;}\nthis.destroyOrRefreshInnerPage();this.deleteDashlet(this.urlReplaceDashlet);this.urlReplaceDashlet=null;}\nvar slot=this.getNewDashletSlot(selfDashletId);newDashlet=this.newDashletView(portletId,dashletType,slot);if(dashletType==\"URL\")\nthis.urlReplaceDashlet=newDashlet;this.setReplaceDashlet(newDashlet,portletId,dashletType,slot);}\nvar portlet=newDashlet.replacePortlet(portletId,dashletType,paramObjList);this.addPortletToPublic(paramObjList,portletId,portlet);if(openMode==1||isDeleteRes){if(dashletType==\"Dashboard\"||dashletType==\"DashboardMap\"||dashletType==\"SimpleReport\"){this.deleteDashletParam(newDashlet,true,deleteResId,oldDathletType);}}}else if(openMode==2&&portletId){if(paramObjList.id)\nvar name=paramObjList.id.split(\".\")[2];paramObjList.name=name;var paramObj=lang.toJSONString(paramObjList);if(dashletType==\"SimpleReport\"){var url=\"openresource.jsp?notNeedLogon=true&refresh=true\"\n+\"&needToolBar=true&resid=\"+portletId}else if(dashletType==\"Dashboard\"||dashletType==\"DashboardMap\"){var url=\"openresource.jsp?notNeedLogon=true&refresh=true\"\n+\"&showtoolbar=true&ingress=portal&resid=\"+portletId}\nvar setting={autoLogin:true,isBrowseModule:true,params:paramObj};if(!this.urlLinkCommand)\nthis.urlLinkCommand=new URLLinkCommand();this.urlLinkCommand.openInNewWindow(url,setting);}}\nNewPage.prototype.addPortletToPublic=function(paramObjList,portletId,portlet,defaultGroupType){for(indx in paramObjList){var param=paramObjList[indx];var groupType=param.groupType;if(defaultGroupType==\"groupByName\"||groupType==\"groupByName\"||groupType==\"groupById\"){for(pubIndx in this.paramBean){var publicParam=this.paramBean[pubIndx];if(param.name==publicParam.name&&publicParam.type==\"PARAMGROUP\"){param.dashletId=portletId;param.public2=true;param.type=\"PARAM\";this.paramBean.push(param);portlet.hiddenParam();break;}}}}}\nNewPage.prototype.showSingle=function(dashlet){return this.pageUtil.showSingle(dashlet);}\nNewPage.prototype.showWhole=function(dashlet){return this.pageUtil.showWhole(dashlet);}\nNewPage.prototype.fqReportRef=function(dashlet){return this.pageUtil.fqReportRef(dashlet);;}\nNewPage.prototype.deleteDashlet=function(dashlet){this.deleteDashletParam(dashlet);var tempArray=new Array();var temp;while(temp=this.dashletList.pop()){if(temp.id!=dashlet.id)\ntempArray.push(temp);}\nthis.dashletList=tempArray;tempArray=new Array();while(temp=this.dashletInfoList.pop()){if(temp.id!=dashlet.id)\ntempArray.push(temp);}\nthis.dashletInfoList=tempArray;tempArray=new Array();while(temp=this.dashletLayoutInfoList.pop()){if(temp.id!=dashlet.id)\ntempArray.push(temp);}\nthis.dashletLayoutInfoList=tempArray;dashlet.destroy();}\nNewPage.prototype.deleteDashletParam=function(dashlet,isEdit,deleteResId){var nodeId=dashlet.portletId;if(deleteResId)\nnodeId=deleteResId;var params;if(!deleteResId){params=dashlet.portlet.getReportParams();}else{params=dashlet.queryReportParams(nodeId);}\nif(!params&&null==params)\nreturn;for(pind in params){var param=params[pind];if(this.paramBean){var publicParamPortletId=\"\";var pubPrarmLeng=0;for(indx in this.paramBean){var pageParam=this.paramBean[indx];if((pageParam.id==param.id||pageParam.name==param.name)&&pageParam.type==\"PARAM\"&&pageParam.public2){pubPrarmLeng=pubPrarmLeng+1;publicParamPortletId=pageParam.dashletId;}}\nif(pubPrarmLeng==1&&publicParamPortletId==nodeId){this.removeParamFromParamPanel(param);if(!isEdit){this.removeParamFromParamConfig(param);}}}}}\nNewPage.prototype.removeParamFromParamConfig=function(param){for(indx in this.paramBean){var pageParam=this.paramBean[indx];if(pageParam.name==param.name&&pageParam.type==\"PARAMGROUP\"){this.paramBean.splice(indx,1);}}}\nNewPage.prototype.setParamDisplayStyle=function(param,display){this.paramPanel.setParamDisplayStyle(param,display);}\nNewPage.prototype.removeParamFromParamPanel=function(param){this.setParamDisplayStyle(param,false);}\nNewPage.prototype.createXML=function(){var dom=domutils.createDom();var paramNode=dom.createElement(\"param\");paramNode.setAttribute(\"config\",this.paramList);return paramNode;};NewPage.prototype.hidden=function(){while(this.dashletList.length>0){var tempDashlet=this.dashletList.pop();tempDashlet.destroy();}}\nNewPage.prototype.clickHandler=function(){this.onClick.fire();};NewPage.prototype.removeQuery=function(query){var tempList=new Array();while(this.reportList.length>0){var tempObj=this.reportList.pop();if(tempObj!=query){tempList.push(tempObj);}}\nthis.reportList=tempList;}\nNewPage.prototype.dummy=function(){}\nNewPage.prototype.destroy=function(){this.runDestroyPageMacro();if(this.pageBO&&this.pageBO.parameterPanelId)\nutil.remoteInvoke(\"DPPortalService\",\"removeParameterPanelId\",[this.pageBO.parameterPanelId]);util.clearCompositeInvokeCache(\"openPage\",[this.pageId]);if(this.urlReplaceDashlet){this.destroyOrRefreshInnerPage();}\ndelete this.urlReplaceDashlet;if(this.dashBoardList){while(this.dashBoardList.length>0){this.dashBoardList.pop();}}\nif(this.reportList){while(this.reportList.length>0){this.reportList.pop();}}\nif(this.dashletList){while(this.dashletList.length>0){var dashlet=this.dashletList.pop();dashlet.destroy();}}\nif(this.paramPanel){this.paramPanel.destroy();}\ndelete this.slotList;delete this.dashletList;delete this.pageId;delete this.pageName;delete this.dpParamConfig;delete this.isDp;delete this.paramSumList;delete this.isFromView;delete this.justPublic;delete this.paramAlreadInits;delete this.changePortlet;delete this.InteractParamList;delete this.newDashlet;delete this.deleteResId;delete this.elemheight;delete this.showBorderValue;delete this.params;delete this.changeParamMap;if(this.pageBO&&this.pageBO.clientId){util.remoteInvoke(\"DPPortalService\",\"removePageBO\",[this.pageBO.clientId]);}else{}\nif(this.dashboardClientIds){var ss=lang.toJSONString(this.dashboardClientIds);util.remoteInvoke(\"DPPortalService\",\"removeFromSession\",[ss],this.dummy,this);while(this.dashboardClientIds.length>0){this.dashboardClientIds.pop();}}\ndelete this.paramBean;delete this.paramPanelId;if(this.handlers){for(var i=0;i<this.handlers.length;i++)\nif(this.handlers[i].destroy)\nthis.handlers[i].destroy();delete this.handlers;}\nNewPage.superclass.destroy.call(this);}\nNewPage.prototype.initParamPanel=function(){return this.pageUtil.initParamPanel();}\nNewPage.prototype.addAllParamToPanel=function(){return this.pageUtil.addAllParamToPanel();}\nNewPage.prototype.setUrlParamValue=function(){return this.pageUtil.setUrlParamValue();}\nNewPage.prototype.addParam=function(param,isReplace){return this.pageUtil.addParam(param,isReplace);}\nNewPage.prototype.getParamDefaultValue=function(paramId){return this.pageUtil.getParamDefaultValue(paramId);}\nNewPage.prototype.setParamDefaultValue=function(param,onlyClient){return this.pageUtil.setParamDefaultValue(param,onlyClient);}\nNewPage.prototype.setParamValue=function(paramId,paramValue,paramDisplayValue){return this.pageUtil.setParamValue(paramId,paramValue,paramDisplayValue);}\nNewPage.prototype.doParamComboEditChange=function(paramPanel,combo,param,value){return this.pageUtil.doParamComboEditChange(paramPanel,combo,param,value);}\nNewPage.prototype.doParamChange=function(paramPanel,param,oldId,newId,oldValue,newValue,relateParam){var ret=this.pageUtil.doParamChange(paramPanel,param,oldId,newId,oldValue,newValue,relateParam);this.fireParamChanged(param);return ret;}\nNewPage.prototype.fireParamChanged=function(param){try{MacroService=imports(\"bof.macro.services.MacroService\").getInstance();}catch(ex){;}\nMacroService.fire(this,\"page\",\"onParamValueChange\",[this,this.parentDesktop,param]);MacroService.fire(this,\"page\",\"onParamValueChanged\",[this,this.parentDesktop,param]);}\nNewPage.prototype.setDeshletParamValue=function(paramName,newId,newValue){for(var i=0;i<this.dashletList.length;i++){var dashlet=this.dashletList[i];if(dashlet&&dashlet.dashletType=='FreeReport'){var inv=window.setInterval(function(){if(dashlet.currentPortlet.isLoadComplete()){window.clearInterval(inv);dashlet.currentPortlet.onParamChangeByName(paramName,newId,newValue);}},500);}\nelse\ndashlet.currentPortlet.onParamChangeByName(paramName,newId,newValue);}}\nNewPage.prototype.hiddenParameterById=function(paramId){return this.pageUtil.hiddenParameterById(paramId);};NewPage.prototype.hiddenParameterByName=function(paramName){return this.pageUtil.hiddenParameterByName(paramName);};NewPage.prototype.setStyleForReport=function(){return this.pageUtil.setStyleForReport();}\nNewPage.prototype.hasDashlet=function(){return this.pageUtil.hasDashlet();}\nNewPage.prototype.showDashletSkin=function(showOrHide){return this.pageUtil.showDashletSkin(showOrHide);}\nNewPage.prototype.switchDashletSkinVisibility=function(){this.pageUtil.switchDashletSkinVisibility();}\nNewPage.prototype.initDashletSkinDisplay=function(){return this.pageUtil.initDashletSkinDisplay();}\nNewPage.prototype.isDashletSkinDisplay=function(){return this.pageUtil.isDashletSkinDisplay();}\nNewPage.prototype.verticalScrollBarAppeared=function(){return this.pageUtil.verticalScrollBarAppeared();}\nNewPage.prototype.setRefPortlet=function(param,alias){return this.pageUtil.setRefPortlet(param,alias);}\nNewPage.prototype.refSelfPage=function(paramObjList){return this.pageUtil.refSelfPage(paramObjList);}\nNewPage.prototype.refSelfPagePortlet=function(paramObjList,query){return this.pageUtil.refSelfPagePortlet(paramObjList,query);}\nNewPage.prototype.getDashletFrameHeight=function(){return this.pageUtil.getDashletFrameHeight();}\nNewPage.prototype.destroyOrRefreshInnerPage=function(isRefresh,paramObjList){return this.pageUtil.destroyOrRefreshInnerPage(isRefresh,paramObjList);}\nNewPage.prototype.refreshSize=function(){if(window.document.body.clientWidth==window.lastWidth&&window.document.body.clientHeight==window.lastHeight)\nreturn;window.lastWidth=window.document.body.clientWidth;window.lastHeight=window.document.body.clientHeight;return this.pageUtil.refreshSize();};NewPage.prototype.showBorder=function(showBorder){return this.pageUtil.showBorder(showBorder);};NewPage.prototype.setInnerPage=function(innerPage,publicParams){return this.pageUtil.setInnerPage(innerPage,publicParams);};NewPage.prototype.isInnerPage=function(){return this.innerPage===true;};NewPage.prototype.showNestedPage=function(reportId,nestedPageId,paramObjList){return this.pageUtil.showNestedPage(reportId,nestedPageId,paramObjList);}\nNewPage.prototype.findDashletByReportId=function(id){return this.pageUtil.findDashletByReportId(id);}\nNewPage.prototype.findDashletById=function(id){return this.pageUtil.findDashletById(id);}\nNewPage.prototype.findDashletBySlotId=function(slotId,indexInSlot){return this.pageUtil.findDashletBySlotId(slotId,indexInSlot);}\nNewPage.prototype.findSlot=function(resourceId){return this.pageUtil.findSlot(resourceId);}\nNewPage.prototype.addDashletToSlot=function(slotId,indexInSlot){return this.pageUtil.addDashletToSlot(slotId,indexInSlot);}\nNewPage.prototype.openPortletInSlot=function(nodeId,type,slotId,indexInSlot){return this.pageUtil.createPortletInSlot(nodeId,type,slotId,indexInSlot);}\nNewPage.prototype.createPortletInSlot=function(nodeId,type,slotId,indexInSlot){return this.pageUtil.createPortletInSlot(nodeId,type,slotId,indexInSlot);}\nNewPage.prototype.openResourceInNewWindow=function(portletId,paramObjList,isFullWindow){return this.pageUtil.openResourceInNewWindow(portletId,paramObjList,isFullWindow);}\nNewPage.prototype.openPageInNewWindowWithExternalCall=function(portletId,paramObjList){return this.pageUtil.openPageInNewWindowWithExternalCall(portletId,paramObjList);}\nNewPage.prototype.fillParamValueFromObj=function(pName,param){return this.pageUtil.fillParamValueFromObj(pName,param);}\nNewPage.prototype.fillParamValue=function(pName,value,displayValue){return this.pageUtil.fillParamValue(pName,value,displayValue);}\nNewPage.prototype.setParamValueToPortlet=function(pName,pValue,pDisplayValue){return this.pageUtil.setParamValueToPortlet(pName,pValue,pDisplayValue);}\nNewPage.prototype.commitParamValue=function(){return this.pageUtil.commitParamValue();}\nNewPage.prototype.refreshData=function(){return this.pageUtil.refreshData();}\nNewPage.prototype.getParamValueByName=function(pName){return this.pageUtil.getParamValueByName(pName);};NewPage.prototype.getParamTagByName=function(pName){return this.pageUtil.getParamTagByName(pName);};NewPage.prototype.getPublicParams=function(){return this.pageUtil.getPublicParams();}\nNewPage.prototype.openPageInSlot=function(nodeId,type,slotId,indexInSlot,paramObjList){return this.pageUtil.openPageInSlot(nodeId,type,slotId,indexInSlot,paramObjList);}\nNewPage.prototype.mergeParamToPublic=function(paramName,portletId,portlet,mergeType){return this.pageUtil.mergeParamToPublic(paramName,portletId,portlet,mergeType);}\nNewPage.prototype.getClientId=function(){return this.clientId;}\nNewPage.prototype.getResourceId=function(){return this.pageId;}\nNewPage.prototype.getResourceType=function(){return\"page\";}\nNewPage.prototype.runMacro=function(){try{MacroService=imports(\"bof.macro.services.MacroService\").getInstance();}catch(ex){;}\nif(MacroService)\nMacroService.fire(this,\"page\",\"onRenderPage\",[this,this.parentDesktop]);};NewPage.prototype.runDestroyPageMacro=function(){try{MacroService=imports(\"bof.macro.services.MacroService\").getInstance();}catch(ex){;}\nif(MacroService)\nMacroService.fire(this,\"page\",\"onDestroyPage\",[this,this.parentDesktop]);};NewPage.prototype.runAfterInitedAllPublicParamsMacro=function(){try{MacroService=imports(\"bof.macro.services.MacroService\").getInstance();}catch(ex){;}\nif(MacroService)\nMacroService.fire(this,\"page\",\"onAfterAllParamValueInited\",[this,this.parentDesktop]);};NewPage.prototype.doCmd=function(){}\nNewPage.prototype.runBeforeRanderMacro=function(){try{MacroService=imports(\"bof.macro.services.MacroService\").getInstance();}catch(ex){;}\nif(MacroService)\nMacroService.fire(this,\"page\",\"onBeforeRenderPage\",[this,this.parentDesktop]);};NewPage.prototype.initHandlers=function(){var Configuration=jsloader.resolve(\"Configuration\");var configPoint=Configuration.extensionPoints.Page;var handlerList=configPoint&&configPoint.handlers;if(!handlerList||!handlerList.length)\nreturn;this.appendHandlers(handlerList);};NewPage.prototype.appendHandlers=function(handlerList){if(!handlerList||!handlerList.length)\nreturn;if(!this.handlers)\nthis.handlers=[];for(var i=0;i<handlerList.length;i++){var clz=jsloader.resolve(handlerList[i].className);var handler=new clz(this);this.handlers.push(handler);}};NewPage.prototype.onForwardClick=function(dashlet){try{MacroService=imports(\"bof.macro.services.MacroService\").getInstance();}catch(ex){;}\nif(MacroService)\nMacroService.fire(this,\"page\",\"onForwardDashlet\",[this,this.parentDesktop,dashlet]);};NewPage.prototype.onBackwardClick=function(dashlet){try{MacroService=imports(\"bof.macro.services.MacroService\").getInstance();}catch(ex){;}\nif(MacroService)\nMacroService.fire(this,\"page\",\"onBackwardDashlet\",[this,this.parentDesktop,dashlet]);};NewPage.prototype.getContext=function(){return this.parentDesktop;};NewPage.prototype.doResetRelateParamsValue=function(tmpParamId,value,displayValue,parameterPanelId){for(var indx in this.params){var tmpParam=this.params[indx];if(tmpParamId==tmpParam.id||tmpParamId==tmpParam.name){tmpParam.hasSetValue=true;tmpParam.refreshReport=true;}}};NewPage.prototype.openResInCurrentWindow=function(targetResId,paramsInfo,urlparams,userUrlOnly){if(domutils.isIOS()||domutils.isAndroid()){showSubPage(targetResId,paramsInfo);}else{var url=userUrlOnly?urlparams:\"openresource.jsp?&resid=\"+targetResId+(urlparams?urlparams:\"\");var form=document.getElementById(\"__openReportURLForm\");if(!form){var form=document.createElement(\"FORM\");document.body.appendChild(form);}\nform.innerHTML=\"\";form.style.display=\"none\";form.id=\"__openReportURLForm\";form.action=url;if(window.parent.name==\"\")window.parent.name=\"URLLinkIFrame\";form.target=\"_self\";var params=document.createElement(\"input\");params.type=\"hidden\";params.name=\"paramsInfo\";params.id=\"params\";if(null!=paramsInfo){params.value=lang.toJSONString(paramsInfo);}\nform.appendChild(params);form.method=\"POST\";form.submit();}};NewPage.prototype.isNeedSetTempSize=function(needSetTempSize){this.needSetTempSize=needSetTempSize;}\nNewPage.prototype.beforeClick=function(){this.currentDashletState={};for(idx in this.dashletList){var dashlet=this.dashletList[idx];this.currentDashletState[dashlet.id]=dashlet.portletContainer.portletList.length;}}\nNewPage.prototype.afterClick=function(){var changeDashletState=[];var flag=false;for(idx in this.dashletList){var dashlet=this.dashletList[idx];if(this.currentDashletState[dashlet.id]&&this.currentDashletState[dashlet.id]!=dashlet.portletContainer.portletList.length){changeDashletState[changeDashletState.length]=dashlet.id;flag=true;}}\nif(flag){if(this.changeDashletList==undefined||this.changeDashletList==null){this.changeDashletList=[];}\nthis.changeDashletList[this.changeDashletList.length]=changeDashletState;pushSubPage();}}\nNewPage.prototype.backwordClick=function(){if(this.changeDashletList!=undefined&&this.changeDashletList!=null&&this.changeDashletList.length>0){var changeDashletState=this.changeDashletList[this.changeDashletList.length-1];for(var i=0;i<changeDashletState.length;i++){var id=changeDashletState[i];for(idx in this.dashletList){var dashlet=this.dashletList[idx];if(dashlet.id==id){dashlet.elemBackward_click_handler();dashlet.portletContainer.portletList=dashlet.portletContainer.portletList.slice(0,dashlet.portletContainer.curStep+1);break;}}}\nthis.changeDashletList=this.changeDashletList.slice(0,this.changeDashletList.length-1);return true;}\nreturn false;}\nNewPage.prototype.showLoadingDiv=function(flag){}\nNewPage.prototype.show_mb=NewPage.prototype.show;NewPage.prototype.show=function(paramList){if(domutils.isAndroid()){this.addListener(window,\"orientationchange\",this.doResize,this);}\nthis.show_mb(paramList);}\nNewPage.prototype.doResize=function(){if(this.resizeTimer){clearTimeout(this.resizeTimer)}\nvar obj=this;this.resizeTimer=setTimeout(function(){var orientation=window.orientation;if(orientation==\"0\"||orientation==\"90\"||orientation==\"-90\"){obj.refreshSize();}},300);}","js/bof/decisionpanel/newportal/DashletView.js":"\nvar modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var util=jsloader.resolve(\"freequery.common.util\");var DashletUtil=jsloader.resolve(\"bof.decisionpanel.Portal.Dashlet.util.DashletUtil\");var domutil=imports(\"freequery.lang.domutils\").getInstance();var DashletView=function(pageContext,parentDiv,dashletInfo,myselfConfig){this.onBackward=new CustomEvent(\"onBackward\",this);this.onForward=new CustomEvent(\"onForward\",this);if(parentDiv&&dashletInfo.id)\nthis.frameDiv=domutil.findElementByBofid(parentDiv,dashletInfo.id,2);if(!this.frameDiv){DashletView.superclass.constructor.call(this,pageContext,parentDiv,dashletInfo,myselfConfig);return;}\nthis.parentDiv=parentDiv;this.element=this.frameDiv;this.pageContext=pageContext;this.myselfConfig=myselfConfig;this.WindowState=this.StateNormal;this.id=dashletInfo.id;this.contentString=dashletInfo.content;this.dashletType=dashletInfo.type;this.height=300;this.width=\"100%\";domutils.removeWhiteSpace(this.frameDiv);this.elemDashletFrame=this.frameDiv.firstChild;this.elemDashletTable=this.elemDashletFrame.rows[0].cells[0].firstChild;this.elemDashletTopTr=this.elemDashletTable.rows[0];this.elemDashletCenterTopTd=this.elemDashletTable.rows[0].cells[0];this.elemDashletTitle=this.elemDashletCenterTopTd.firstChild.rows[0].cells[0];this.elemDashletToolBar=this.elemDashletCenterTopTd.firstChild.rows[0].cells[1];for(var child=this.elemDashletToolBar.firstChild;child;child=child.nextSibling){if(1!=child.nodeType){continue;}\nvar bofid=child.getAttribute(\"bofid\");var propName=this.getPropNameByBofid(bofid);this[propName]=child;}\nthis.elemDashletCenterCenterTd=this.elemDashletTable.rows[1].cells[0];this.elemDashletContent=this.elemDashletCenterCenterTd.firstChild;this.elemDashletBottomSpaceTr=this.elemDashletFrame.rows[1];this.addListener(this.elemMin,\"click\",this.elemMin_click_handler,this);this.addListener(this.elemMax,\"click\",this.elemMax_click_handler,this);this.addListener(this.elemForward,\"click\",this.elemForward_click_handler,this);this.addListener(this.elemBackward,\"click\",this.elemBackward_click_handler,this);this.addListener(this.elemExport,\"click\",this.elemExport_click_handler,this);this.addListener(this.elemLocateReport,\"click\",this.elemLocateReport_click_handler,this);if(this.elemChangeResource){this.addListener(this.elemChangeResource,\"click\",this.elemChangeResource_click_handler,this);if(page.isInnerPage()||window.bof_offline_xhr){this.elemChangeResource.style.display=\"none\";}}\nthis.loadOptions();this.custom();this.onAfterShow=new CustomEvent(\"onAfterShow\",this);};lang.extend(DashletView,\"bof.decisionpanel.Portal.Dashlet.Dashlet\");DashletView.prototype.replacePortlet=function(portletId,dashletType){util.clearCompositeInvokeCache(\"openPage\",[this.pageContext.pageId]);this.isReplace=true;this.oldPortlet=this.currentPortlet;if(portletId&&dashletType){var isRead=this.isRead();if(!isRead)\nreturn;var portlet=this.portletContainer.openPortlet(portletId,dashletType);}\nif(!portlet)\nreturn;this.resetForwardBackwardState();return portlet;}\nDashletView.prototype.elemForward_click_handler=function(){var oldDashletType=this.currentPortlet.getPortletType();var oldportletId=this.currentPortletId;this.oldPortlet=this.currentPortlet;this.portletContainer.goForward();this.setCurrObjState(oldportletId,oldDashletType);if(this.onForward)\nthis.onForward.fire(this);};DashletView.prototype.elemBackward_click_handler=function(){var oldDashletType=this.currentPortlet.getPortletType();var oldportletId=this.currentPortletId;this.oldPortlet=this.currentPortlet;this.portletContainer.goBackward();this.setCurrObjState(oldportletId,oldDashletType);if(this.onBackward)\nthis.onBackward.fire(this);};DashletView.prototype.elemLocateReport_click_handler=function(){var actionUrl=\"openresource.jsp?resid=\"+this.currentPortlet.portletId;var hidetoolbaritems=\"BACKWARD FORWARD SAVE SAVEAS MYFAVORITE\";var publicParamsList=this.pageContext.params;var reportParamsList=this.currentPortlet.getReportParams();if(this.dashletType=='FreeReport'){var reportCurrentParamsList=this.currentPortlet.getReportCurrentParams();var paramsList=new Array();for(var i=0;i<reportCurrentParamsList.length;i++){var param=reportCurrentParamsList[i];var paramInfo={id:param.paramId,value:param.paramValue,displayValue:param.paramDisplayValue}\nparamsList[i]=paramInfo;}\nreportParamsList=paramsList;}\nif(!publicParamsList&&!reportParamsList){window.open(actionUrl+\"&hidetoolbaritems=\"+encodeURIComponent(hidetoolbaritems));return;}\nvar formId=\"locateReportForm\";var elems=this.parentDiv.getElementsByTagName(\"form\");if(elems.length>0){for(var i=0;i<elems.length;i++){if(elems[i].id==formId){domutils.destroyNode(elems[i]);break;}}}\nvar form=document.createElement(\"form\");form.style.display=\"none\";form.id=formId;form.method=\"POST\";this.parentDiv.appendChild(form);var paramsInfo=document.createElement(\"input\");paramsInfo.type=\"hidden\";paramsInfo.id=\"paramsInfo\";paramsInfo.name=\"paramsInfo\";form.appendChild(paramsInfo);var elRefresh=document.createElement(\"input\");elRefresh.type=\"hidden\";elRefresh.id=\"refresh\";elRefresh.name=\"refresh\";elRefresh.value=true;form.appendChild(elRefresh);var hidetoolbaritems=document.createElement(\"input\");hidetoolbaritems.type=\"hidden\";hidetoolbaritems.id=\"hidetoolbaritems\";hidetoolbaritems.name=\"hidetoolbaritems\";hidetoolbaritems.value=hidetoolbaritems;form.appendChild(hidetoolbaritems);var paramsInfoList=new Array();var publicParamsLength=0;if(publicParamsList){publicParamsLength=publicParamsList.length;for(var i=0;i<publicParamsLength;i++){var param=publicParamsList[i];var name=param.name;var value=param.value;var displayValue=param.displayValue;var paramInfo=new Object();paramInfo.name=name;paramInfo.value=value;paramInfo.displayValue=displayValue;paramsInfoList[i]=paramInfo;}}\nif(reportParamsList){for(var i=0;i<reportParamsList.length;i++){var param=reportParamsList[i];var paramInfo={id:param.id,name:param.name,value:param.value,displayValue:param.displayValue}\nparamsInfoList[publicParamsLength+i]=paramInfo;}}\nparamsInfo.value=lang.toJSONString(paramsInfoList);form.action=actionUrl;form.target=\"_blank\";form.submit();}\nDashletView.prototype.destroy=function(){this.removeListener(this.elemMin,\"click\",this.elemMin_click_handler);this.removeListener(this.elemMax,\"click\",this.elemMax_click_handler);this.removeListener(this.elemForward,\"click\",this.elemForward_click_handler);this.removeListener(this.elemBackward,\"click\",this.elemBackward_click_handler);this.removeListener(this.elemExport,\"click\",this.elemExport_click_handler);this.removeListener(this.elemLocateReport,\"click\",this.elemLocateReport_click_handler);this.removeListener(this.elemChangeResource,\"click\",this.elemChangeResource_click_handler);delete this.oldPortlet;DashletView.superclass.destroy.call(this);}\nDashletView.prototype.setDivId=function(id){return this.frameDiv.id=id;}\nDashletView.prototype.setCurrObjState=function(oldportletId){this.currentPortlet.setCurrObjState();this.currentPortlet.setBtnStatus();this.pageContext.deleteDashletParam(this,true,oldportletId);this.setAutoRefreshFlag();this.refreshSize();}\nDashletView.prototype.setAutoRefreshFlag=function(){if(this.currentPortlet){this.currentPortlet.setAutoRefreshValue(this.currentPortlet.AutoRefreshFlag);}}\nDashletView.prototype.getCurrObj=function(){return this.currentPortlet.getPortletObject();}\nDashletView.prototype.resetForwardBackwardState=function(){if(window.__Portlet_is_hybrid){;}else{this.displayForward(false);this.displayBackward(false);}\nif(this.portletContainer){if(this.portletContainer.getQueryCount()>=1){this.displayForward(false);this.displayBackward(false);if(this.portletContainer.curStep>=1){this.displayBackward(true);}\nif(this.portletContainer.curStep<this.portletContainer.getQueryCount()-1){this.displayForward(true);}}}};DashletView.prototype.displayForward=function(b){if(b)\nthis.elemForward.style.display=\"\";else\nthis.elemForward.style.display=\"none\";};DashletView.prototype.displayBackward=function(b){if(b)\nthis.elemBackward.style.display=\"\";else\nthis.elemBackward.style.display=\"none\";};DashletView.prototype.setPublicParaValue=function(toParam){this.publicParam=toParam;};DashletView.prototype.setCurrPortlet=function(toPortlet){this.portlet=toPortlet;this.currentPortlet=toPortlet;this.currentPortletId=toPortlet.portletId;if(window.__Portlet_is_hybrid){;}else{this.frameDiv.id=this.currentPortletId||this.portletId;}};DashletView.prototype.refreshSize=function(){this.currentPortlet.onSize();};DashletView.prototype.elemExport_click_handler=function(ev){var viewdiv=document.getElementById(\"_viewdiv_\");var p=null;if(domutils.isIE())\np=util.getAbsolutePos(this.elemExport,viewdiv);else\np=util.getAbsolutePosScroll(this.elemExport,document.body);p.y+=this.elemExport.offsetHeight;this.currentPortlet.doOnDashletExport(ev,p,this.elemDashletToolBar);}\nDashletView.prototype.doParamChange=function(paramPanel,param,newId,newValue,relateParam){this.currentPortlet.onParamChange(paramPanel,param,newId,newValue,relateParam);}\nDashletView.prototype.openOtherPortlet=function(portletId,reportType){var oldportletId=this.currentPortletId;this.currentPortletId=portletId;var type=DashletUtil.conversionType(reportType);this.currentPortlet=this.replacePortlet(portletId,type);this.pageContext.deleteDashletParam(this,true,oldportletId);}\nDashletView.prototype.setReplace=function(isReplace){this.isReplace=isReplace;}\nDashletView.prototype.getReplace=function(){return this.isReplace;}\nDashletView.prototype.setMacroParams=function(paramObjList){this.macroParams=paramObjList;}\nDashletView.prototype.getMacroParams=function(){return this.macroParams;}\nDashletView.prototype.resizeTo=function(width,height){if(width){this.frameDiv.style.width=width;this.elemDashletFrame.style.width=width;}\nif(height){this.frameDiv.style.height=height;this.elemDashletFrame.style.height=height;}}\nDashletView.prototype.applyPageTheme=function(){var pageTheme=registry.get(\"pageTheme\");if(!pageTheme||null==pageTheme)\nreturn;var pageOption=pageTheme.page;if(pageOption&&pageOption.dashlet){var option=pageOption.dashlet;var background=option.background;if(background){var endColor=background;if(domutils.isIE()){var style=\"progid:DXImageTransform.Microsoft.Gradient(GradientType=1,startColorStr='\"+background\n+\"',endColorStr='\"+endColor+\"');\";this.elemDashletCenterTopTd.style.filter=style;style=\"progid:DXImageTransform.Microsoft.Gradient(GradientType=1,startColorStr='\"+background\n+\"',endColorStr='\"+background+\"')\";}else if(domutils.isFirefox()){var style=\" -moz-linear-gradient(left,\"+background+\", \"+endColor+\")\";this.elemDashletCenterTopTd.style.background=style;}else if(domutils.isSafari()||domutils.isChrome()){var style=\" -webkit-gradient(linear, 0 0, 100% 0, from(\"+background+\"), to(\"+endColor+\"))\";this.elemDashletCenterTopTd.style.background=style;}else if(domutils.isMobile()){var style=\" -webkit-gradient(linear, 0 0, 100% 0, from(\"+background+\"), to(\"+endColor+\"))\";this.elemDashletCenterTopTd.style.background=style;}else{this.elemDashletCenterTopTd.style.backgroundColor=background;}}\nvar borderColor=option.borderColor;if(borderColor&&this.options.skinDisplay!=\"none\"&&this.options.button!=\"button\"){var lineWidth=\"1\";var st=borderColor+\" \"+lineWidth+\" solid\";if(this.elemDashletTable)\nthis.elemDashletTable.style.border=st;}}}\nDashletView.prototype.elemChangeResource_click_handler=function(){if(!this.elemTreeDiv){var elemFolderTreeDiv=this.elemDashletFrame.nextSibling;var elemTreeDiv=domutils.findElementByBofid(elemFolderTreeDiv,\"treeDiv\");this.elemTreeDiv=elemTreeDiv;this.elemFolderTreeDiv=elemFolderTreeDiv;}\nif(this.elemFolderTreeDiv.style.display==\"\")\nthis.elemFolderTreeDiv.style.display=\"none\";else\nthis.elemFolderTreeDiv.style.display=\"\";var viewdiv=document.getElementById(\"_viewdiv_\");var p=null;if(domutils.isIE())\np=util.getAbsolutePos(this.elemExport,viewdiv);else\np=util.getAbsolutePosScroll(this.elemExport,document.body);p.y+=this.elemExport.offsetHeight;this.elemFolderTreeDiv.style.left=p.x>200?p.x-200:p.x;this.elemFolderTreeDiv.style.top=p.y;this.elemFolderTreeDiv.style.overflow=\"auto\";if(!this.tree){var SearchTree=jsloader.resolve(\"bof.decisionpanel.Portal.SearchTree.SearchTree\");this.tree=new SearchTree(this.elemTreeDiv);this.tree.onDblClick.subscribe(this.doOnTreeNodeDblClick,this);this.tree.render();}}\nDashletView.prototype.doOnTreeNodeDblClick=function(tree,node){this.elemFolderTreeDiv.style.display=\"none\";var targetResId=node._id;var type=node._type;var pageParams=page.params;if(type==\"PAGE\"){type=\"NESTEDPAGE\";var paramsInfo=new Array();for(var ix in pageParams){var pagep=pageParams[ix];var paramInfo=new Object();paramInfo.name=pagep.name;paramInfo.value=pagep.value;paramInfo.displayValue=pagep.displayValue;paramInfo.groupType=\"groupByName\";paramsInfo.push(paramInfo);}\nthis.setMacroParams(paramsInfo);}\nvar oportletId=this.currentPortlet.portletId;if(!this.firstPortletId){this.firstPortletId=oportletId;}\nif(oportletId==targetResId){return;}\nthis.openOtherPortlet(targetResId,type);this.displayBackward(false);var portlet=this.currentPortlet;var pageParamC=new Array();if(type!=\"NESTEDPAGE\"){var params=portlet.getParams();for(var indx in params){var param=params[indx];for(var ix in pageParams){var pagep=pageParams[ix];if(param.name==pagep.name){page.mergeParamToPublic(param.name,targetResId,portlet,\"groupByName\");portlet.fillParamValueFromObj(param.name,pagep);var paramc=new Object();paramc.id=param.id;paramc.name=param.name;paramc.alias=node._name+\".\"+param.name;paramc.publicParamId=pagep.id;paramc.type=\"PARAM\";paramc.public2=true;paramc.hidden=false;paramc.dashletId=targetResId;pageParamC.push(paramc);break;}}}\nportlet.commitParamValue();portlet.refreshData();}\nvar tempd=new Object();tempd.type=type;tempd.portletId=targetResId;tempd.name=\"\";tempd.dashletName=node._name;tempd.id=this.id;var tempPortlet=new Object();tempPortlet.oldPortletId=this.firstPortletId;tempPortlet.changeTempDashlet=tempd;tempPortlet.publicParamsConfig=pageParamC;this.setTempPortlet(tempPortlet);}\nDashletView.prototype.getTempPortlet=function(){return this.tempPortlet;}\nDashletView.prototype.setTempPortlet=function(tempPortlet){this.tempPortlet=tempPortlet;}\nDashletView.prototype.__custom=DashletView.prototype.custom;DashletView.prototype.custom=function(){this.__custom();if(!this.isMobile)\nreturn;if(!this.skinOptionValidate())\nreturn;if(this.options.skinDisplay==\"title_only\"){this.elemDashletTitle.style.width=\"100%\";this.elemDashletTopTr.style.display=\"\";this.elemDashletToolBar.style.display=\"none\";}\nif(domutils.isIOS()){}}\nDashletView.prototype.doTouchStart=function(event){if(this.canMove){this.touchStartX=event.touches[0].clientX;}}\nDashletView.prototype.doTouchMove=function(event){if(this.canMove){this.touchMoveX=event.touches[0].clientX;}}\nDashletView.prototype.doTouchEnd=function(event){if(this.canMove){var moveX=this.touchMoveX-this.touchStartX;if(moveX>200||moveX<-200){if(this.elemForward.style.display==\"\"){this.elemForward_click_handler();}}else{if(this.elemBackward.style.display==\"\"){this.elemBackward_click_handler();}}}}\nDashletView.prototype.doGestureStart=function(e){this.canMove=false;}\nDashletView.prototype.doGestureEnd=function(e){this.canMove=true;}\nDashletView.prototype.__ipad_openOtherPortlet=DashletView.prototype.openOtherPortlet;DashletView.prototype.openOtherPortlet=function(portletId,reportType){if(domutils.isIOS()){this.portlet.getPageObj().beforeClick();}\nthis.__ipad_openOtherPortlet(portletId,reportType);if(domutils.isIOS()){this.portlet.getPageObj().afterClick();}}","js/bof/decisionpanel/newportal/NewDashletContent.js":"\nvar util=jsloader.resolve(\"freequery.common.util\");var modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var PortletContainer=jsloader.resolve(\"bof.decisionpanel.Portal.Dashlet.Portlet.PortletContainer\");var NewDashletContent=function(pageContext,parentDiv,dashletInfo,myselfConfig){NewDashletContent.superclass.constructor.call(this,pageContext,parentDiv,dashletInfo,myselfConfig);if(parentDiv)\nthis.layoutSlotName=parentDiv.getAttribute(\"bofId\");this.portletContainer=new PortletContainer(this);};lang.extend(NewDashletContent,\"bof.decisionpanel.newportal.DashletView\");NewDashletContent.prototype.destroy=function(){if(this.portletContainer){this.portletContainer.clear();this.portletContainer.destroy();this.portletContainer=null;}\ndelete this.height;delete this.width;delete this.portlet;delete this.portletName;delete this.portletId;NewDashletContent.superclass.destroy.call(this);}\nNewDashletContent.prototype.openView=function(){this.currentPortletId=this.portletId;this.portletContainer.clear();var portlet=this.portletContainer.borrowPortlet(this.elemDashletContent,this.dashletType,this.contentString);if(!portlet)\nreturn;this.portletContainer.addPortlet(portlet);portlet.setPageObj(this.pageContext);portlet.setDashlet(this);if(portlet.onHeightChanged)\nportlet.onHeightChanged.subscribe(this.doOnHeightChanged,this);this.setStyle();if(!this.contentString&&this.portletId&&portlet.systemPortlet)\nportlet.setPortletId(this.portletId);portlet.render();this.portlet=portlet;this.currentPortlet=portlet;};NewDashletContent.prototype.doOnHeightChanged=function(deltaHeight){this.height=this.frameDiv.offsetHeight+deltaHeight;this.frameDiv.style.height=this.height;var viewdiv=document.getElementById(\"_viewdiv_\");if(this.height<viewdiv.offsetHeight){viewdiv.firstChild.height=\"100%\";}};NewDashletContent.prototype.navigateToPortlet=function(portletId,dashletType){if(dashletType)\nthis.dashletType=dashletType;var portlet=this.portletContainer.borrowPortlet(this.elemDashletContent,this.dashletType,this.contentString);if(!portlet)\nreturn;this.portletContainer.addPortlet(portlet);portlet.portletId=portletId;portlet.setPageObj(this.pageContext);portlet.setDashlet(this);portlet.render();this.setTitle(portlet.getTitle());this.setDivId(portletId);this.currentPortlet=portlet;this.portlet=portlet;this.currentPortletId=portletId;this.portletId=portletId;}\nNewDashletContent.prototype.isRead=function(){if(this.pageContext.readableList){isRead=this.pageContext.readableList[this.portletId];}\nif(!isRead){var ret=util.remoteInvoke(\"CatalogService\",\"isCatalogElementAccessible\",[this.currentPortletId,\"REF\"]);if(!ret||!ret.succeeded||!ret.result){this.setErrorMess();return false;}}\nreturn true;}\nNewDashletContent.prototype.setErrorMess=function(isResourceExist){this.isErrorDashlet=true;this.elemDashletFrame.style.height=70;if(isResourceExist==false){this.elemDashletTitle.innerHTML=\"资源不存在\";this.elemDashletContent.innerHTML=\"<font color='red'> 资源\\“\"+this.portletId+\"\\“不存在<\/font>\";}else{if(this.portletName){var portletName=this.portletName.split(\"> \");this.elemDashletTitle.innerHTML=portletName.pop();}else{this.portletName=\"未知节点类型\";}\nthis.elemDashletContent.innerHTML=\"<font color='red'> 您对\\“\"+this.portletName+\"\\“没有引用权限或该资源已经被删除<\/font>\";}}\nNewDashletContent.prototype.queryReportParams=function(retportId){for(indx in this.portletContainer.portletList){var portlet=this.portletContainer.portletList[indx];if(portlet.portletId==retportId){return portlet.params;}}}\nNewDashletContent.prototype.setTempSize=function(tempWidth,tempHeight){this.tempWidth=tempWidth;this.tempHeight=tempHeight;}\nNewDashletContent.prototype.getCurrentPortlet=function(){return this.currentPortlet;}\nNewDashletContent.prototype.getCurrentReportId=function(){return this.currentPortletId;}\nNewDashletContent.prototype.old_setTempSize=NewDashletContent.prototype.setTempSize;NewDashletContent.prototype.setTempSize=function(tempWidth,tempHeight){this.old_setTempSize(tempWidth,tempHeight);if(domutils.isAndroid()){this.tempHeight=this.tempHeight-45;}else if(domutils.isIOS()){try{var userAgent=navigator.userAgent.toLowerCase();if(window.top.location.href.indexOf(\"#path\")>-1){if(this.options&&this.options.width.indexOf(\"%\")>0){}\nif(this.options&&this.options.height.indexOf(\"%\")>0){this.tempHeight=window.top.innerHeight*parseInt(this.options.height.replace(\"%\",\"\"))/100;this.tempHeight=this.tempHeight-45;}}}catch(e){alert(\" top window Error!\");}}}","js/bof/decisionpanel/newportal/Right.js":"\nvar ExportPage=jsloader.imports(\"bof.decisionpanel.Portal.ExportPage\");var PagePopupMenu=jsloader.imports(\"bof.decisionpanel.Portal.PagePopupMenu\");var dialogFactory=null;var Right=function(){this.maximization=null,this.hrShow=true,this.lfShow=true,this.lf2Show=true;}\nlang.extend(Right,\"freequery.widget.Module\");Right.prototype.destroy=function(){Right.superclass.destroy.call(this);}\nRight.prototype.openPageById=function(pageId,paramList){if(window.parent&&window.parent.window.frameView){window.parent.window.frameView.openPageById(pageId,paramList);}}\nRight.prototype.getFrameView=function(){return window.parent&&window.parent.window.frameView;}\nRight.prototype.btnPagePopupMenu_click_handler=function(page){if(!popupMenu){popupMenu=new PagePopupMenu(null,page);}\npopupMenu.execute(btnPagePopupMenuDiv);}\nRight.prototype.btnPageSaveAs_click_handler=function(page){var data=new Array();data[0]=[\"PUBLIC_PAGES\",\"PAGE\"];data[1]=[];data[2]=[\"页面 \"];data[3]=\"SAVE\";data[4]={};var titleName=\"保存页面\";if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var dialogConfig={title:titleName,fullName:\"freequery.dialog.OpenSaveDialog\"};dialogFactory.showDialog(dialogConfig,data,this.saveAsCallback,this);}\nRight.prototype.saveAsCallback=function(ret,dialog){if(!ret){return false;}\nvar folderId=ret.folderId;var pageName=ret.fileName;var tempDashletList=new Array();var pageParamCList=new Array();var layoutInfoList=new Array();var dashletList=new Array();var oldPortletList=new Array();for(var i in page.dashletList){var dashlet=page.dashletList[i];if(dashlet.getTempPortlet()){var tempPortlet=dashlet.getTempPortlet();pageParamCList=pageParamCList.concat(tempPortlet.publicParamsConfig);dashletList=dashletList.concat(tempPortlet.changeTempDashlet);oldPortletList.push(tempPortlet.oldPortletId);}}\nvar pageo=new Object();pageo.name=pageName;pageo.desc=ret.fileDesc;var result=util.remoteInvoke(\"DPPortalService\",\"saveAsPageBO\",[page.pageId,folderId,pageo,true,dashletList,pageParamCList,oldPortletList]);if(result&&result.succeeded){alert(\"另存成功\");var newPageId=result.result;if(window.parent){var frameView=this.getFrameView();if(frameView){frameView.refreshHeadFrame();var that=this;setTimeout(function(){that.openPageById(newPageId);},500);}}}else{modalWindow.showServerError(ret);return false;}}\nRight.prototype.btnPageMaximize_click_handler=function(){if(!window.parent){return;}\nvar hr=window.parent.window.document.getElementById(\"headFrameTr\");var lf=window.parent.window.document.getElementById(\"subPagesPane\");var lf2=window.parent.window.document.getElementById(\"hsplitter\");if(null==this.maximization){if(hr&&hr.style.display==\"none\"){this.hrShow=false;}\nif(lf&&lf.style.display==\"none\"){this.lfShow=false;}\nif(lf2&&lf2.style.display==\"none\"){this.lf2Show=false;}}\nvar srcE=event.srcElement;if(!this.maximization){this.maximization=true;if(hr){hr.style.display=\"none\";}\nif(lf){lf.style.display=\"none\";}\nif(lf2){lf2.style.display=\"none\";}\nif(srcE){srcE.className=\"pageOriginal\";srcE.title=\"还原\";}}else{this.maximization=false;if(hr&&this.hrShow){hr.style.display=\"\";}\nif(lf&&this.lfShow){lf.style.display=\"\";}\nif(lf2&&this.lf2Show){lf2.style.display=\"\";}\nif(srcE){srcE.className=\"pageMaximize\";srcE.title=\"最大化\";}}}\nRight.prototype.setBgImage=function(pageId,bgImageName){document.body.style.backgroundImage=\"url('UploadPageBgImgServlet?type=view&downloadResId=\"+pageId+\"')\";}","js/bof/decisionpanel/dashboard/DashboardAction.js":"\nvar Dashboard=jsloader.resolve(\"bof.decisionpanel.dashboard.Dashboard\");var dialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var util=jsloader.resolve(\"freequery.common.util\");var modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var FrameView=imports(\"freequery.common.FrameView\");var ChartType=jsloader.resolve(\"smartbi.ChartType\");var DashboardAction=function(){this.container=document.getElementById('rigthContent');this.openRefresh=true;this.onClose=new CustomEvent(\"onClose\",this);this.onRunMacro=new CustomEvent(\"onRunMacro\",this);this.btnStatus=new Array();};lang.extend(DashboardAction,\"bof.baseajax.common.BasicAction\");DashboardAction.prototype.destroy=function(){this.destroySelf();DashboardAction.superclass.destroy.call(this);};DashboardAction.prototype.destroySelf=function(){delete this.openRefresh;delete this.container;delete this.isOpenInPortalPage;this.isOpenInPortalPage=null;this.openRefresh=null;this.hidetoolbar=null;this.portalObj=null;this.portletHeight=null;this.portletWidth=null;this.unLoadFrameView();delete this.btnStatus;delete this.chartType;delete this.chooseBusinessDone;delete this.chooseChartDone;this.openDisabled=false;delete this.nodeId;if(this.dashboard){this.dashboard.destroy();this.dashboard=null;}}\nDashboardAction.prototype.open=function(node){if(typeof node==\"undefined\"){this.folderNode=null;this.createView(\"DEFAULT_TREENODE\");}else{this.node=node;if(node._type==\"DEFAULT_TREENODE\"||node._type==\"SELF_TREENODE\"){this.folderNode=node;this.createView(node._id);}else if(node._type==\"BUSINESS_VIEW\"||node._type==\"TEXT_BUSINESS_VIEW\"||node._type==\"PROC_BUSINESS_VIEW\"||node._type==\"RAWSQL_BUSINESS_VIEW\"||node._type==\"JAVA_BUSINESS_VIEW\"){this.folderNode=node.parentNode;this.nodeId=node._id;this.chooseChartType();this.createDashboard(this.nodeId);}else if(node._type==\"Dashboard\"||node._type==\"DashboardMap\"){this.folderNode=node.parentNode;this.openDashboard(node._id,node._type,node.paramsSetByUrl);}}\nreturn true;};DashboardAction.prototype.createView=function(nodeId){this.chooseBusinessView(nodeId);if(this.nodeId){this.chooseChartType();this.createDashboard(this.nodeId);}};DashboardAction.prototype.chooseBusinessView=function(nodeId){var data=new Array();data.push(nodeId);var dialogConfig={};dialogConfig.title=\"选择业务查询\";dialogConfig.forceCallback=true;dialogConfig.fullName=\"freequery.query.ChooseBusinessViewDialog\";dialogFactory.showDialog(dialogConfig,data,this.chooseBusinessViewDone,this);};DashboardAction.prototype.chooseBusinessViewDone=function(nodeId,node){if(typeof nodeId==\"undefined\"){if(!this.chooseBusinessDone){this.onClose.fire(this);}\nreturn;}\nthis.chooseBusinessDone=true;this.nodeId=nodeId;this.parentNode=node.parentNode;}\nDashboardAction.prototype.chooseChartType=function(){this.chartType=\"\";this.chooseChartDone=true;}\nDashboardAction.prototype.setCommandFactoryName=function(commandFactoryName){this.commandFactoryName=commandFactoryName;};DashboardAction.prototype.newDashboard=function(nodeId,isNew){if(!this.nodeId){this.nodeId=nodeId;}\nif(!window.__Portlet_is_hybrid&&window.__Chart_is_hybrid&&nodeId){var wrapper=document.createElement(\"div\");this.container.appendChild(wrapper);wrapper.style.height=\"100%\";var xhr=jsloader.getXHR();if(isNew){xhr.open(\"POST\",\"Chart.jsp?browserType=\"+domutils.getBrowserType(),false);}else{xhr.open(\"POST\",\"Chart.jsp?queryId=\"+nodeId+\"&browserType=\"+domutils.getBrowserType(),false);}\nxhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded;charset=UTF-8');xhr.send(\"\");wrapper.innerHTML=xhr.responseText;}\nvar isHybrid=window.__Chart_is_hybrid&&nodeId&&true;this.dashboard=new Dashboard(nodeId,this.container,isHybrid);this.dashboard.isOpenInPortalPage=this.isOpenInPortalPage;this.dashboard.onClose.subscribe(this.doClose,this);this.dashboard.onSave.subscribe(this.save,this);this.dashboard.onRunMacro.subscribe(this.runMacro,this);this.dashboard.onRefreshTreeNode.subscribe(this.doRefreshTreeNode,this);};DashboardAction.prototype.runMacro=function(dashboard,actionName){this.onRunMacro.fire(dashboard,actionName);}\nDashboardAction.prototype.createDashboard=function(nodeId){this.newDashboard(nodeId,true);this.setBtnStatus();if(this.frame){this.frame.setFrameTitle(this.chartType===ChartType.map?\"新建地图分析\":\"新建仪表分析\");}\nif(!this.folderNode&&this.parentNode){this.folderNode=this.parentNode;}\nvar folderNodeData=this.folderNode?{id:this.folderNode._id,text:this.folderNode.text}:null;this.folderNode=null;var flag=this.dashboard.initFromBizView(this.chartType,folderNodeData);if(flag){this.operationFilter(true);return this.dashboard;}};DashboardAction.prototype.openDashboard=function(nodeId,nodeType,paramsSetByUrl){if(this.container&&this.container.firstChild&&this.container.firstChild.firstChild&&this.container.firstChild.firstChild.boftype==\"msg\"){return;}\nthis.newDashboard(nodeId);if(\"DashboardMap\"==nodeType)\nthis.chartType=\"map\";this.setBtnStatus();if(this.frame){this.frame.setFrameTitleLocal(this.node.getNodePath());this.frame.setFrameTitle(this.node._alias||this.node._name);}\nthis.operationFilter(false,nodeId);this.setInPortalPage();this.dashboard.openDashBoardView(nodeId,paramsSetByUrl);this.refreshData();return this.dashboard;};DashboardAction.prototype.getDashboardType=function(nodeId){if(!this.chartType){var dashboardInfo=util.remoteInvoke(\"DashboardService\",\"getDashboard\",[nodeId]);if(dashboardInfo.succeeded){var chartObj=dashboardInfo.result[4];this.chartType=chartObj.chartType;}else{modalWindow.showServerError(dashboardInfo);return false;}}\nreturn true;}\nDashboardAction.prototype.doRefreshTreeNode=function(sender,id,type){this.catalogTree=registry.get(\"DisplayCustomTree\");var tree=this.catalogTree;if(\"LOCATE_BIZVIEW\"==type){if(!util.checkFunctionValid(\"CUSTOM_DEFINEDATASET\"))\nreturn;var app=imports(\"bof.baseajax.common.Application\").getInstance();if(app.mainFrameAction==null)\nreturn;var topAction=null;var regex=new RegExp(\"\\\\.CustomAction\\$\");for(var i=0;i<app.mainFrameAction.actions.length;i++){var act=app.mainFrameAction.actions[i];if(regex.test(act.id)){topAction=act;break;}}\nif(!topAction||!topAction.isValid())\nreturn;if(topAction.isOpenEnabled())\ntopAction.execute(\"open\");var action=null;var regex=new RegExp(\"\\\\.DefineDatasetAction\\$\");for(var i=0;i<topAction.actions.length;i++){var act=topAction.actions[i];if(regex.test(act.id)){action=act;break;}}\nif(!action||!action.isValid())\nreturn;if(action.isOpenEnabled())\naction.execute(\"open\");tree=registry.get(\"DatasetTree\");}\nif(tree){var leftPane=document.getElementById(\"mainLeftTd\");if(leftPane.style.display==\"none\"){leftPane.style.display=\"block\";}\ntree.expandToId(id);tree.refreshNode(id);}}\nDashboardAction.prototype.doClose=function(){if(this.confirm()){this.destroy();this.onClose.fire(this);}}\nDashboardAction.prototype.close=function(){this.destroySelf();}\nDashboardAction.prototype.mydes=function(){this.openDisabled=false;delete this.nodeId;if(this.dashboard){this.dashboard.destroy();this.dashboard=null;}}\nDashboardAction.prototype.doDelete=function(nodeId){if(this.confirm()){this.destroy();this.onClose.fire(this);}};DashboardAction.prototype.isOpenEnabled=function(node){if(!node)\nreturn true;var nodeId=node._id;if(this.nodeId==nodeId){return false;}else{if(!this.dashboard){return true;}\nreturn this.confirm();}};DashboardAction.prototype.confirmClose=function(){return this.confirm();};DashboardAction.prototype.equal=function(obj,obj2){if(!obj2||!obj)\nreturn true;var result=util.remoteInvokeEx(\"DashboardService\",\"hasChange\",[this.dashboard.clientId,obj,obj]);if(result&&result.succeeded)\nreturn result.result}\nDashboardAction.prototype.confirm=function(){if(this.dashboard){if(!this.dashboard.alreadySaved&&this.dashboard.elemTdSave.style.display!=\"none\"){if(this.dashboard.chartObjInfo)\nvar oldConfig=this.dashboard.chartObjInfo.configCont;var newConfig=this.dashboard.creatConfigXml();if(!oldConfig)\nvar configDity=true\nelse\nvar configDity=(oldConfig!=newConfig);if(this.dashboard.chartConfig)\nvar newChart=this.dashboard.chartConfig.getChartObjVaule();else\nnewChart=this.dashboard.ChartDefine;var oldChart=this.dashboard.oldChartDefine;var isDity=this.equal(newChart,oldChart);if(isDity){var result=modalWindow.open(\"存在未保存的更改，确实要保存？\",\"保存确认\",modalWindow.MB_YES|modalWindow.MB_NO|modalWindow.MB_CANCEL);if(result==modalWindow.ID_YES){if(this.dashboard.elemSave.style.display==\"none\")\nthis.dashboard.elemSaveAs_click_handler();else\nthis.dashboard.elemSave_click_handler();}else if(result==modalWindow.ID_CANCEL||result==modalWindow.ID_UNKNOWN){return false;}}}}\nthis.mydes();return true;};DashboardAction.prototype.setPortalInfo=function(openRefresh,showtoolbar,portalObj,portletHeight,portletWidth,dashletDiv,ingress){this.isOpenInPortalPage=true;this.openRefresh=openRefresh;this.hidetoolbar=!showtoolbar;this.portalObj=portalObj;this.portletHeight=portletHeight;this.portletWidth=portletWidth;this.dashletDiv=dashletDiv;this.ingress=ingress;};DashboardAction.prototype.setInPortalPage=function(){if(this.isOpenInPortalPage&&this.portalObj){this.dashboard.portalObj=this.portalObj;this.dashboard.newHeight=parseInt(this.portletHeight);this.dashboard.newWidth=parseInt(this.portletWidth);}\nif(this.hidetoolbar){this.dashboard.elemTrToolbar.style.display=\"none\";}else{if(this.isOpenInPortalPage&&(this.portalObj||this.ingress==\"portal\"))\nthis.setButtonHidden();this.dashboard.elemTrToolbar.style.display=\"\";}\nthis.dashboard.hiddenParams=this.hiddenParams;}\nDashboardAction.prototype.setButtonHidden=function(){this.dashboard.elemTdSave.style.display=\"none\";this.dashboard.elemTdSaveAs.style.display=\"none\";this.dashboard.elemTdCharConfig.style.display=\"none\";this.dashboard.elemTdBView.style.display=\"none\";this.dashboard.elemTdBHeader.style.display=\"none\";this.dashboard.elemTdReportParam.style.display=\"none\";this.dashboard.elemTdMyfavorite.style.display=\"none\";this.dashboard.elemTdBLocate.style.display=\"none\";this.dashboard.elemSpace1.parentNode.style.display=\"none\";this.dashboard.elemSpace2.parentNode.style.display=\"none\";this.dashboard.elemSpace3.parentNode.style.display=\"none\";this.dashboard.elemSpace5.parentNode.style.display=\"none\";}\nDashboardAction.prototype.refreshData=function(){var isRefresh=false;if(this.isOpenInPortalPage){if(this.openRefresh){if(this.portalObj){if(this.portalObj.isFromView&&!this.portalObj.isReplace){isRefresh=true;}}else{isRefresh=true;}}}\nif(isRefresh){this.dashboard.refreshData(true);}}\nDashboardAction.prototype.doChartSeriesClick=function(chart,triggerCol,xaixs,rowdatas){this.onChartSeriesClick.fire(chart,triggerCol,xaixs,rowdatas);}\nDashboardAction.prototype.loadFrameView=function(){this.frame=new FrameView(document.getElementById('rigthContent'));this.container=this.frame.frameViewContainer;this.frame.onClose.subscribe(this.closeDashboard,this);}\nDashboardAction.prototype.unLoadFrameView=function(){if(this.frame)\nthis.frame.destroy();this.frame=null;this.container=document.getElementById('rigthContent');}\nDashboardAction.prototype.save=function(nodeId){if(this.frame){this.frame.setFrameTitleLocal(util.getCatalogNodeLocation(nodeId)[0]);this.frame.setFrameTitle(util.getCatalogNodeLocation(nodeId)[1]);}}\nDashboardAction.prototype.closeDashboard=function(){if(this.dashboard)\nthis.dashboard.onClose.fire();}\nDashboardAction.prototype.operationFilter=function(isCreate,nodeId){var showCount=0;if(\"DisplayCustomCommandFactory\"!=this.commandFactoryName&&this.isBrowseModule){this.dashboard.elemSave.parentNode.style.display=\"none\";this.dashboard.fromPrivateFolder=true;}else{if(!isCreate&&nodeId){}}\nif(this.dashboard.elemSave.parentNode.style.display!=\"none\"||this.dashboard.elemSaveAs.parentNode.style.display!=\"none\"||this.dashboard.elemMyfavorite.parentNode.style.display!=\"none\")\n++showCount;this.dashboard.elemSpace2.parentNode.style.display=(showCount==0)?\"none\":\"block\";return true;}\nDashboardAction.prototype.setBtnStatus=function(){function setDisplay(el,functionCode){var visible=false;if(el.parentNode.style.display!=\"none\"){visible=util.checkFunctionValid(functionCode);if(!visible)\nel.parentNode.style.display=\"none\";}\nreturn visible;}\nfunction setShortcutDisplay(el,functionCode){var visible=false;if(el&&el.parentNode&&el.parentNode.parentNode&&el.parentNode.parentNode){visible=util.checkFunctionValid(functionCode);if(!visible)\nel.parentNode.style.display=\"none\";}\nreturn visible;}\nvar showCount=0;if(setDisplay(this.dashboard.elemRefresh,this.chartType===ChartType.map?\"BROWSE_DMAP_MREFRESH\":\"BROWSE_DASHBOARD_DREFRESH\"))\n++showCount;this.dashboard.elemSpace1.parentNode.style.display=(showCount==0)?\"none\":\"block\";showCount=0;if(setDisplay(this.dashboard.elemSave,this.chartType===ChartType.map?\"BROWSE_DMAP_MSAVE\":\"BROWSE_DASHBOARD_DSAVE\"))\n++showCount;if(setDisplay(this.dashboard.elemSaveAs,this.chartType===ChartType.map?\"BROWSE_DMAP_MSAVEAS\":\"BROWSE_DASHBOARD_DSAVEAS\"))\n++showCount;if(setDisplay(this.dashboard.elemMyfavorite,this.chartType===ChartType.map?\"BROWSE_DMAP_MADDTOFAVORITE\":\"BROWSE_DASHBOARD_DADDTOFAVORITE\"))\n++showCount;this.dashboard.elemSpace2.parentNode.style.display=(showCount==0)?\"none\":\"block\";showCount=0;if(setDisplay(this.dashboard.elemCharConfig,this.chartType===ChartType.map?\"BROWSE_DMAP_MGRAPHSETTING\":\"BROWSE_DASHBOARD_DGRAPHSETTING\"))\n++showCount;if(setDisplay(this.dashboard.elemBView,this.chartType===ChartType.map?\"BROWSE_DMAP_MCHOOSEVIEWPANEL\":\"BROWSE_DASHBOARD_DCHOOSEVIEWPANEL\"))\n++showCount;this.dashboard.elemSpace3.parentNode.style.display=(showCount==0)?\"none\":\"block\";if(this.chartType==\"map\"){this.dashboard.elemBHeader.title=\"地图设置\";}\nshowCount=0;if(setDisplay(this.dashboard.elemBHeader,this.chartType===ChartType.map?\"BROWSE_DMAP_MAPSETTING\":\"BROWSE_DASHBOARD_DDASHBOASETTING\"))\n++showCount;if(setDisplay(this.dashboard.elemReportParam,this.chartType===ChartType.map?\"BROWSE_DMAP_MPARAMETERSETTING\":\"BROWSE_DASHBOARD_DPARAMETERSETTING\"))\n++showCount;this.dashboard.elemSpace4.parentNode.style.display=(showCount==0)?\"none\":\"\";showCount=0;if(setDisplay(this.dashboard.elemExportImage,this.chartType===ChartType.map?\"BROWSE_DMAP_EXPORTIMAGE\":\"BROWSE_DASHBOARD_EXPORTIMAGE\"))\n++showCount;this.dashboard.elemSpace5.parentNode.style.display=(showCount==0)?\"none\":\"block\";showCount=0;if(setDisplay(this.dashboard.elemBLocate,this.chartType===ChartType.map?\"BROWSE_DMAP_LOCATE\":\"BROWSE_DASHBOARD_LOCATE\"))\n++showCount;showCount=0;if(setShortcutDisplay(this.dashboard.elem_btnQuery,this.chartType===ChartType.map?\"BROWSE_DMAP_MREFRESH\":\"BROWSE_DASHBOARD_DREFRESH\"))\n++showCount;}\nDashboardAction.prototype.setParamsHidden=function(hiddenParams){this.hiddenParams=hiddenParams;};","js/bof/decisionpanel/dashboard/Dashboard.js":"\njsloader.resolveMany([\"freequery.control.DropDownCheckList\",\"freequery.control.Listbox\",\"freequery.control.DropDownPanel\",\"freequery.tree.TreeView\",\"freequery.tree.TreeNode\",\"freequery.actions.AbstractTabAction\",\"bof.baseajax.common.CompositeAction\",\"smartbi.chart.options.utils\",\"smartbi.chart.ChartMacroMenuCmd\",\"smartbi.ChartType\"]);var modalWindow=resolve(\"freequery.common.modalWindow\");var CustomEvent=resolve(\"freequery.lang.CustomEvent\");var util=jsloader.resolve(\"freequery.common.util\");var DropDownBox=jsloader.resolve(\"freequery.control.DropDownBox\");var ParameterPanel=null;var dialogFactory=null;var DropDownCheckList=null;var comutil=null;var ChartSettingWizardWindow=imports(\"smartbi.chartsetting.ChartSettingWizardWindow\");var MapSettingWizardWindow=imports(\"smartbi.map.mapsetting.MapSettingWizardWindow\");var ChartViewUtil=jsloader.resolve(\"smartbi.chart.ChartViewUtil\");var URLLinkCommand=imports(\"freequery.sysresource.URLLinkCommand\");var ChartType=jsloader.resolve(\"smartbi.ChartType\");var MacroService=imports(\"bof.macro.services.MacroService\").getInstance();var Dashboard=function(nodeId,container,isHybrid){this.settingControl=null;this.chartView=null;this.isHybrid=isHybrid;if(this.isHybrid){this.element=container.firstChild;domutils.removeWhiteSpace(this.element);var table=this.element.firstChild;this.elemTrToolbar=table.rows[0];var table2=this.elemTrToolbar.cells[0].firstChild;this.elemTdViewToolbar=table2.rows[0].cells[0];var table3=this.elemTdViewToolbar.firstChild;this.elemViewToolbar=table3.rows[0];this.elemRefresh=this.elemViewToolbar.cells[0].firstChild;this.elemTdSpace1=this.elemViewToolbar.cells[1];this.elemSpace1=this.elemTdSpace1.firstChild;this.elemTdSave=this.elemViewToolbar.cells[2];this.elemSave=this.elemTdSave.firstChild;this.elemTdSaveAs=this.elemViewToolbar.cells[3];this.elemSaveAs=this.elemTdSaveAs.firstChild;this.elemTdMyfavorite=this.elemViewToolbar.cells[4];this.elemMyfavorite=this.elemTdMyfavorite.firstChild;this.elemTdSpace2=this.elemViewToolbar.cells[5];this.elemSpace2=this.elemTdSpace2.firstChild;this.elemTdCharConfig=this.elemViewToolbar.cells[6];this.elemCharConfig=this.elemTdCharConfig.firstChild;this.elemTdBView=this.elemViewToolbar.cells[7];this.elemBView=this.elemTdBView.firstChild;this.elemTdSpace3=this.elemViewToolbar.cells[8];this.elemSpace3=this.elemTdSpace3.firstChild;this.elemTdBHeader=this.elemViewToolbar.cells[9];this.elemBHeader=this.elemTdBHeader.firstChild;this.elemTdReportParam=this.elemViewToolbar.cells[10];this.elemReportParam=this.elemTdReportParam.firstChild;this.elemAutoRefresh=this.elemReportParam.nextSibling;this.elemTdSpace4=this.elemViewToolbar.cells[11];this.elemSpace4=this.elemTdSpace4.firstChild;this.elemTdExportImage=this.elemViewToolbar.cells[12];this.elemExportImage=this.elemTdExportImage.firstChild;this.elemTdSpace5=this.elemViewToolbar.cells[13];this.elemSpace5=this.elemTdSpace5.firstChild;this.elemTdBLocate=this.elemViewToolbar.cells[14];this.elemBLocate=this.elemTdBLocate.firstChild;this.elemToolbarLastTd=this.elemViewToolbar.cells[15];this.elemContenttr=table.rows[1];this.elem_contentDiv=this.elemContenttr.cells[0].firstChild;var table5=this.elem_contentDiv.firstChild;this.elemTrHeader=table5.rows[0];this.elemVHeader=this.elemTrHeader.cells[0].firstChild;this.elemShortCutTr=table5.rows[1];this.elem_btnQuery=this.elemShortCutTr.cells[0].firstChild;this.elemParamDis=table5.rows[2];if(domutils.isSafari()){this.elemParamDis.cells[0].style.height=\"1px\";}\nthis.elemParamPanel=this.elemParamDis.cells[0].firstChild;this.elemGraphDis=table5.rows[3];this.elemGraph=this.elemGraphDis.cells[0].firstChild;this.elemTrTail=table5.rows[4];this.elemVTail=this.elemTrTail.cells[0].firstChild;this.elemTrFillBlank=table5.rows[5];this.addListener(this.elemBHeader,\"click\",this.elemBHeader_click_handler,this);this.addListener(this.elemSave,\"click\",this.elemSave_click_handler,this);this.addListener(this.elemSaveAs,\"click\",this.elemSaveAs_click_handler,this);this.addListener(this.elemRefresh,\"click\",this.elemRefresh_click_handler,this);this.addListener(this.elemCharConfig,\"click\",this.elemCharConfig_click_handler,this);this.addListener(this.elemAutoRefresh,\"click\",this.elemAutoRefresh_click_handler,this);this.addListener(this.elemReportParam,\"click\",this.elemReportParam_click_handler,this);this.addListener(this.elemBView,\"click\",this.elemBView_click_handler,this);this.addListener(this.elemBLocate,\"click\",this.elemBLocate_click_handler,this);this.addListener(this.elemMyfavorite,\"click\",this.elemMyfavorite_click_handler,this);this.addListener(this.elemExportImage,\"click\",this.elemExportImage_click_handler,this);}else{this.init(container,__url);}\nthis.element.style.height=\"100%\";this.container=container;this.bizViewId=nodeId;this.paramAlreadInits=new Array();this.isOpenQuery=false;this.alreadySaved=true;this.onRefreshTreeNode=new CustomEvent(\"refreshTreeNode\",this);this.onChartSeriesClick=new CustomEvent(\"onChartSeriesClick\",this);this.onParamChange=new CustomEvent(\"onParamChange\",this);this.onOpenDashboard=new CustomEvent(\"openDashboard\",this);this.onPointClick=new CustomEvent(\"onPointClick\",this);this.onChartClick=new CustomEvent(\"onChartClick\",this);this.onSeriesClick=new CustomEvent(\"onSeriesClick\",this);this.onRunMacro=new CustomEvent();this.onSave=new CustomEvent();this.onClose=new CustomEvent();this.refreshComplete=true;this.params=new Array();this.hiddenViewId=new Array();this.initHandlers();this.bindEvent();}\nlang.extend(Dashboard,\"freequery.widget.Module2\");Dashboard.prototype.destroy=function(){this.unBindEvent();try{if(this.clientId&&!this.portalObj)\nutil.remoteInvoke(\"DashboardService\",\"removeFromSession\",[this.clientId]);}catch(e){}\nif(this.paramPanelObj){if(window.WebCalendar){window.WebCalendar.getObjectById(\"meizzCalendarLayer\").style.display=\"none\";window.WebCalendar.getObjectById(\"meizzCalendarLayer\").parentNode.style.display=\"none\";}\nthis.paramPanelObj.destroy();this.exportProgressBar=null;}\nif(this.element.parentNode==this.container){domutils.destroyNode(this.element);}\nif(this.chartConfig){this.chartConfig.destroy();this.chartConfig=null;}\nif(comutil)\ncomutil=null;if(this.chartDefine){this.chartDefine=null;}\nif(this.settingControl){this.settingControl.destroy();this.settingControl=null;}\nif(this.chartView){this.chartView.destroy();this.chartView=null;}\ndelete this.bizViewId;delete this.chartSettedFlag;delete this.paramAlreadInits;delete this.isOpenQuery;delete this.clientId;delete this.paramAlreadInits;delete this.alreadySaved;delete this.params;this.dashboardId=null;this.dashHeard=null;this.dtail=null;if(this.paramSetting){delete this.paramSetting.applyDefaultValueParams;delete this.paramSetting;}\ndelete this.alias;delete this.publicParams;delete this.refreshComplete;delete this.isCreate;delete this.DashboardOtherVaule;delete this.initOtherParamsValueList;delete this.hiddenViewId;this.onPointClick=null;this.onChartClick=null;this.onSeriesClick=null;delete this.chartWidthInPage;delete this.chartHeightInPage;Dashboard.superclass.destroy.call(this);}\nDashboard.prototype.initFromBizView=function(chartType,folderNodeData){var ret=util.remoteInvokeEx(\"DashboardService\",\"initFromBizViewByType\",[this.bizViewId,chartType]),result;if(ret&&ret.succeeded&&ret.result){result=ret.result;}else{this.elemClose_click_handler();this.clientId=null;return false;}\nthis.isCreate=true;this.folderNodeData=folderNodeData;this.chartType=chartType;this.clientId=result.clientId;this.paramPanelId=result.paramPanelId;this.isEnabledCache=result.isEnabledCache;var paramResult=result.paramsList;this.paramLayout=lang.parseJSON(result.paramLayout);this.initParamPanel(this.bizViewId,paramResult,this.paramLayout,true);this.setHeader(\"CurrentReportName()\");this.initTailBlank();this.setSystemConfig();this.chartDefine=result.chartDefine;if(this._isMapType()){if(!this._showMapSettingWindow(0)){this.elemClose_click_handler();return false;};}else{if(!this._showSettingWindow(0)){this.elemClose_click_handler();return false;};}\nreturn true;}\nDashboard.prototype.doLocate=function(){this.onRefreshTreeNode.fire(this,this.dashboardId,\"Dashboard\");}\nDashboard.prototype.setSystemConfig=function(){var refresh=\"true\";var ret=util.remoteInvokeEx(\"UserService\",\"getCurrentUser\",[]);if(ret){this.userId=ret.result.id;}\nvar ret=util.remoteInvokeEx(\"ConfigClientService\",\"getUserConfigs\",[this.userId]);if(ret){var selfConfig=ret.result;for(var i in selfConfig){if(selfConfig[i].key==\"REPORT_AUTO_REFRESH\"){refresh=selfConfig[i].value;break;}}\nif(selfConfig.length==0){ret=util.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfigs\",[]);if(ret){var systemConfig=ret.result;for(var i in systemConfig){if(systemConfig[i].key==\"REPORT_AUTO_REFRESH\"){refresh=systemConfig[i].value;break;}}}}}\nthis.setAutoRefresh(refresh==\"true\"?true:false);};Dashboard.prototype.openDashBoardView=function(dashboardId,paramsSetByUrl){if(domutils.isIE()&&!this.isInPage()){this.elemGraph.style.overflow=\"auto\";}\nif(!this.isHybrid){var tt=util.compositeInvoke(\"openDashboard\",[dashboardId]);}\nif(!this.isHybrid){if(this.elemTrToolbar.style.display!=\"none\"){var ret=util.remoteInvoke(\"CatalogService\",\"isCatalogElementAccessible\",[dashboardId,\"WRITE\"]);if(ret.succeeded){if(!ret.result){this.elemSave.parentNode.style.display=\"none\";}}else{modalWindow.showServerError(ret);return false;}}}\nvar dashboardInfo=null;this.modules={},__clientReportView=null;for(var invoke=this.element.firstChild;invoke;invoke=invoke.nextSibling){if(invoke.nodeType!=1){continue;}\nif(invoke.tagName!=\"TEXTAREA\"){continue;}\nif(\"modules\"==invoke.getAttribute(\"boftype\")){var eventName=invoke.getAttribute(\"bofid\");if(invoke.value&&invoke.value!=\"null\")\nthis.modules[eventName]=lang.parseJSON(invoke.value);invoke.value=null;}else if(\"DashboardService.getDashboard\"==invoke.getAttribute(\"__invoke_id\")){if(invoke.value&&invoke.value!=\"null\")\n__clientReportView=lang.parseJSON(invoke.value);invoke.value=null;}else{;}\nif(null!=__clientReportView){dashboardInfo={result:__clientReportView,succeeded:true};}\nif(!window.bof_offline_xhr)\ninvoke.value=null;}\nif(null==dashboardInfo){dashboardInfo=util.remoteInvoke(\"DashboardService\",\"getDashboard\",[dashboardId]);}\nif(!dashboardInfo.succeeded){modalWindow.showServerError(dashboardInfo);this.elemClose_click_handler();return;}\ndashboardInfo=dashboardInfo.result;this.clientId=dashboardInfo.clientId;this.chartClientId=dashboardInfo.chartClientId;this.bizViewId=dashboardInfo.businessViewId;var result=dashboardInfo.allParams;this.chartObjInfo=dashboardInfo.dashboardObj;this.paramPanelId=dashboardInfo.paramPanelId;this.isEnabledCache=dashboardInfo.isEnabledCache;if(this.portalObj){if(!this.portalObj.dashboardClientIds){this.portalObj.dashboardClientIds=new Array();}\nthis.portalObj.dashboardClientIds.push(this.clientId);}\nthis.isOpenQuery=true;this.dashboardId=dashboardId;var alias=this.chartObjInfo.alias;if(!alias)\nalias=this.chartObjInfo.name;this.alias=alias;if(!dashboardInfo){this.elemClose_click_handler();return;}\nvar configCont=dashboardInfo.configCont;if(configCont){this.setOpenConfig(configCont);}\nresult=dashboardInfo.reportParams;this.getParamsInfo(result);this.paramLayout=lang.parseJSON(dashboardInfo.paramLayout);this.initParamPanel(this.bizViewId,this.params,this.paramLayout);this.hasValueMap={};var oldCharDefine=dashboardInfo.chartDefine;this.oldCharDefine=oldCharDefine;if(oldCharDefine)\nthis.chartType=oldCharDefine.chartType;this.chartDefine=dashboardInfo.chartDefine;this.initTailBlank();if(!this.isHybrid){util.clearCompositeInvokeCache(\"openDashboard\",[dashboardId]);}\nthis.initAfterOpenHandlers();this.onOpenDashboard.fire(this,this.dashboardId);if(!paramsSetByUrl){util.remoteInvoke(\"DashboardService\",\"setAndGetDefaultParamValuesWithFuture\",[this.clientId,null,null],this.callbackSetAndGetDefaultParamValues,this);}\nthis.runRenderMacro();}\nDashboard.prototype.callbackSetAndGetDefaultParamValues=function(ret){if(!ret.succeeded){modalWindow.showServerError(ret);return;}\nvar params=ret.result;for(var i=0;i<params.length;i++){var name=params[i].name;var hasValue=this.hasValueMap[name];if(!hasValue)\nthis.setParamDefaultValue(params[i],true);}\nif(this.portlet){this.portlet.setParamValuesByPublicParams();if(this.hasRefreshDataFromPage){this.refreshData();this.hasRefreshDataFromPage=false;}}};Dashboard.prototype.getParamsInfo=function(result){var testParams=new Array();for(indx in result){var name=result[indx].name\nif(!testParams[name]){testParams[name]=name;this.params.push(result[indx]);}}\ndelete testParams;}\nDashboard.prototype.setOpenConfig=function(configCont){var dom=domutils.parseXML(configCont);var dashboardNode=dom.documentElement;if(dashboardNode){var autoRefresh=domutils.getNodeAtrributeValueByName(dashboardNode,\"REFRESH\").nodeValue;this.autoRefresh=autoRefresh==\"true\"?true:false;this.elemAutoRefresh.checked=this.autoRefresh;var paramsXml=dashboardNode.firstChild;if(null!=paramsXml){var len=paramsXml.childNodes.length;if(!this.paramSetting){this.paramSetting=new Array();}\nif(!this.paramSetting.applyDefaultValueParams){this.paramSetting.applyDefaultValueParams=new Array();}\nfor(var i=0;i<len;i++){var paraNode=paramsXml.childNodes[i];var paraId=domutils.getNodeAtrributeValueByName(paraNode,\"ID\").nodeValue;this.paramSetting.applyDefaultValueParams.push(paraId);}}\nif(dashboardNode.childNodes.length>2){var headerXml=dashboardNode.childNodes[2];if(headerXml.attributes.length>0){var headerId;var headerIdNode=domutils.getNodeAtrributeValueByName(headerXml,\"ID\");if(headerIdNode&&headerIdNode.nodeValue)\nheaderId=headerIdNode.nodeValue;var displayValue;var displayValueNode=domutils.getNodeAtrributeValueByName(headerXml,\"DISPLAYVALUE\");if(displayValueNode&&displayValueNode.nodeValue)\ndisplayValue=displayValueNode.nodeValue;this.setHeader(headerId,displayValue);}else{this.setHeader(\"\");}}\nif(dashboardNode.childNodes.length>3){var tailXml=dashboardNode.childNodes[3];if(tailXml.attributes.length>0){var tailId;var tailIdNode=domutils.getNodeAtrributeValueByName(tailXml,\"ID\");if(tailIdNode&&tailIdNode.nodeValue)\ntailId=tailIdNode.nodeValue;var displayValue=null;var displayValueNode=domutils.getNodeAtrributeValueByName(tailXml,\"DISPLAYVALUE\");if(displayValueNode&&displayValueNode.nodeValue)\ndisplayValue=displayValueNode.nodeValue;if(domutils.isFirefox()&&this.isOpenInPortalPage){this.elemTrTail.style.height=\"100%\";this.isHiddenElemGraphDisInFireFox=true;}\nthis.setTail(tailId,displayValue);}else{this.setTail(\"\");}}\nif(dashboardNode.childNodes.length>1){var viewXml=dashboardNode.childNodes[1];var len2=viewXml.childNodes.length;for(var i=0;i<len2;i++){var viewNode=viewXml.childNodes[i];var viewId=domutils.getNodeAtrributeValueByName(viewNode,\"ID\").nodeValue;this.hiddenViewId[viewId]=true;if(!this.isHybrid){this.resetViewItem(viewId,false);}}}}}\nDashboard.prototype.hiddenTr=function(refresh,noExecuteQuery){if(!this.paramPanelObj||this.paramPanelObj.paramObjList.length==0){this.elemParamDis.style.display=\"none\";}\nif(this.elemTrHeader.style.display!=\"none\"){if(this.dashHeard){var paraVa=this.dashHeard.match(\"GetParamValue\");var timeVa=this.dashHeard.match(\"CurrentTime\");if(null!=paraVa||null!=timeVa)\nthis.setHeader(this.dashHeard);}}\nif(this.elemTrTail.style.display!=\"none\"){if(this.dtail){var paraVa=this.dtail.match(\"GetParamValue\");var timeVa=this.dtail.match(\"CurrentTime\");if(null!=paraVa||null!=timeVa)\nthis.setTail(this.dtail);}}}\nDashboard.prototype.refreshData=function(refresh,onlyChangeSize){if(typeof refresh=='undefined'){refresh=true;}\nthis.hiddenTr();if(this.getAutoRefresh()||refresh){if(this.chartDefine){this._refreshChart(true);}else{alert(this.getTypeName(false)+\"图形未设定\");if(this._isMapType()){this._showMapSettingWindow(0);}else{this._showSettingWindow(0);}}}else{this.refreshComplete=true;}}\nDashboard.prototype.getAutoRefresh=function(){return this.autoRefresh;};Dashboard.prototype.setAutoRefresh=function(refresh){this.autoRefresh=refresh;this.elemAutoRefresh.checked=refresh;};Dashboard.prototype.getEmptyParamNames=function(){var ret=new Array();if(this.params){for(var i=0;i<this.params.length;i++){var tmpParam=this.params[i];var noNull=lang.parseJSON(tmpParam.componentDefine).noNull;if(!noNull&&!(tmpParam.value||tmpParam.currentValue)){ret.push(tmpParam.alias);}}}\nreturn ret;}\nDashboard.prototype.initParamPanel=function(bizViewId,defaultParams,paramLayout,isNew){if(paramLayout){this.paramLayout=paramLayout;if(this.paramPanelObj){this.paramPanelObj.initLayout(paramLayout);}}\nvar params=null;if(defaultParams){params=defaultParams;}else{params=this.getParameterList(bizViewId);}\nif(params){if(!this.paramPanelObj)\nthis.initParamPanelObj();this.paramPanelObj.setEnableResetRelateParamsValue(false);this.params=params;for(var i=0;i<params.length;i++){var param=params[i];this.addParam(param);var userDefaultValue=false;if(this.paramSetting){for(indx in this.paramSetting.applyDefaultValueParams){if(this.paramSetting.applyDefaultValueParams[indx]==param.id){userDefaultValue=true;break;}}}\nif(isNew){var values=this.getParamDefaultValue(param.id);if(values){this.setParamDataValue(param,values);this.setParamDefaultValue(param,false);}}else{this.setParamDefaultValue(param,true);}}\nthis.paramPanelObj.setEnableResetRelateParamsValue(true);}}\nDashboard.prototype.addParam=function(param){if(!this.paramPanelObj)\nthis.initParamPanelObj();if(param.display){this.paramPanelObj.addParam(param);}\nif(!this.isOpenQuery){this.addParamToReport(param.id,param.alias);}}\nDashboard.prototype.getParameterList=function(bizViewId){var ret=util.remoteInvoke(\"DashboardService\",\"getParamList\",[bizViewId]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nDashboard.prototype.addParamToReport=function(paramId,paramAlias){var ret=util.remoteInvoke(\"DashboardService\",\"addNewParam\",[this.clientId,paramId,paramAlias]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nDashboard.prototype.initParamPanelObj=function(){if(!ParameterPanel)\nParameterPanel=jsloader.resolve(\"freequery.query.ParameterPanel\");if(!this.paramPanelObj){this.paramPanelObj=new ParameterPanel(this.elemParamPanel,this.element,this.paramLayout);this.paramPanelObj.clientId=this.paramPanelId;this.paramPanelObj.onEditChange.subscribe(this.doParamComboEditChange,this);this.paramPanelObj.onSelectChange.subscribe(this.doParamChange,this);}}\nDashboard.prototype.getParamDefaultValue=function(paramId){return this.paramPanelObj.getParamDefaultValue(paramId);}\nDashboard.prototype.getParamValueFromDashboard=function(paramId){var ret=util.remoteInvoke(\"DashboardService\",\"getParamValueFromDashboard\",[this.clientId,paramId]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nDashboard.prototype.setParamDataValue=function(param,values){param.value=values[0];param.displayValue=values[1];}\nDashboard.prototype.setParamDefaultValue=function(param,onlyClient){if(!this.paramPanelObj)\nreturn;if(onlyClient){var pTag=this.paramPanelObj.getParamTagByParamId(param.id);if(param.paramType==\"OLAP\")\nthis.paramPanelObj.setParamCtrlValue(pTag,param.currentValue,param.currentDisplayValue);else\nthis.paramPanelObj.setParamCtrlValue(pTag,param.value,param.displayValue);}\nelse{this.setParamValue(param.id,param.value,param.displayValue);}}\nDashboard.prototype.setParamValue=function(paramId,paramValue,paramDisplayValue){if(this.DashboardOtherVaule)\nutil.clearCompositeInvokeCache(\"beforeRefreshDashboard\",[this.clientId,this.DashboardOtherVaule]);for(var i=0;i<this.params.length;i++){var tmpParam=this.params[i];if(paramId==tmpParam.id){if(this.hasValueMap)\nthis.hasValueMap[tmpParam.name]=true;if(tmpParam.value!=paramValue){tmpParam.value=paramValue;tmpParam.displayValue=paramDisplayValue;}\nbreak;}}\nif(this.paramPanelObj){var pPanelV=this.paramPanelObj.setParamValue(paramId,paramValue,paramDisplayValue);MacroService.fire(this,\"meterReport\",\"onParamValueChanged\",[this],true);return pPanelV;}\nutil.remoteInvoke(\"DashboardService\",\"setParamValue\",[this.clientId,paramId,paramValue,paramDisplayValue]);return true;}\nDashboard.prototype.doParamComboEditChange=function(paramPanel,combo,param,value){if(combo.needChecked){var retV=this.checkedValue(combo,value);if(retV){this.doParamChange(paramPanel,param,null,value,null,value);}else{alert(\"输入的值在下拉列表中不存在！\");}}else{this.doParamChange(paramPanel,param,null,value,null,value);}}\nDashboard.prototype.doParamChange=function(paramPanel,param,oldId,newId,oldValue,newValue,notRefresh){if(!notRefresh){this.refreshData(false);}\nthis.onParamChange.fire(this,this.chartView);MacroService.fire(this,\"meterReport\",\"onParamValueChanged\",[this],true);return true;}\nDashboard.prototype.doReportParam=function(e){var dialogConfig={};dialogConfig.title=\"设置\"+this.getTypeName(false)+\"参数\";dialogConfig.fullName=\"bof.decisionpanel.dashboard.ParamSettingDialog\";if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var isNew=false;if(!this.paramSetting){isNew=true;}\ndialogFactory.showDialog(dialogConfig,[this.paramSetting,this.params,isNew,this.autoRefresh],this.doParamOK,this);}\nDashboard.prototype.doParamOK=function(succeed,setting){if(!succeed)\nreturn;if(!this.clientConfig){this.clientConfig={};}\nthis.paramSetting=setting;this.autoRefresh=setting.autoRefresh;this.elemAutoRefresh.checked=setting.autoRefresh;this.alreadySaved=false;}\nDashboard.prototype.elemBHeader_click_handler=function(e){if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var dialogConfig={};dialogConfig.size=[550,425];dialogConfig.title=\"设置表头表尾\";dialogConfig.fullName=\"bof.decisionpanel.dashboard.DashboardSettingDialog\";var reportHeader={htmlCode:this.dashHeard,reportId:this.clientId};var reportTail={htmlCode:this.dtail,reportId:this.clientId};var params=[reportHeader,reportTail];dialogFactory.showDialog(dialogConfig,params,this.doDashboardSettingOK,this);}\nDashboard.prototype.doDashboardSettingOK=function(succeed,setting){if(!succeed)\nreturn;if(setting.header&&this.getViewMenuItemCheckedById(\"_trHeader\"))\nthis.elemTrHeader.style.display=\"\";if(setting.tail&&this.getViewMenuItemCheckedById(\"_trTail\"))\nthis.elemTrTail.style.display=\"\";this.setHeader(setting.header);this.setTail(setting.tail);this.alreadySaved=false;}\nDashboard.prototype.setHeader=function(title,displayValue){if(typeof title==\"undefined\"||title==\"\"){this.elemTrHeader.style.display=\"none\";if(this.viewMenu)\nthis.viewMenu.setItemChecked(\"_trHeader\",false);this.hiddenViewId[\"_trHeader\"]=true;this.dashHeard=\"\";delete this.dashHeard;this.elemVHeader.innerHTML=\"\";}else{this.dashHeard=title;var t=null;if(this.isHybrid){if(this.isCreate&&title==\"CurrentReportName()\")\nt=\"新建\"+this.getTypeName(false);else if(displayValue)\nt=displayValue;else\nt=this.replaceAllFunc(title);}else{if(displayValue)\nt=this.replaceAllFunc(displayValue);else\nt=this.replaceAllFunc(title);}\nt=this.replaceHeaderAndTailFontStyle(t,\"header\");this.elemVHeader.innerHTML=t;if(this.elemVHeader.innerText==\" \"){this.elemVHeader.style.display=\"none\";this.dashHeard=\"\";delete this.dashHeard;this.elemVHeader.innerHTML=\"\";}else{this.elemVHeader.style.display=\"block\";if(this.isCreate&&title==\"CurrentReportName()\")\nthis.elemTrHeader.style.height=\"16px\";else if(0!=this.elemVHeader.offsetHeight)\nthis.elemTrHeader.style.height=this.elemVHeader.offsetHeight;}}};Dashboard.prototype.setTail=function(title,displayValue){if(typeof title==\"undefined\"||title==\"\"){this.elemTrTail.style.display=\"none\";if(domutils.isFirefox()){this.elemTrFillBlank.style.display=\"none\";}\nif(this.viewMenu)\nthis.viewMenu.setItemChecked(\"_trTail\",false);this.hiddenViewId[\"_trTail\"]=true;this.dtail=\"\";delete this.dtail;this.elemVTail.innerHTML=\"\";}else{this.dtail=title;var t=null;if(this.isHybrid){if(this.isCreate&&title==\"CurrentReportName()\")\nt=\"新建\"+this.getTypeName(false);else if(displayValue)\nt=displayValue;else\nt=this.replaceAllFunc(title);}else{if(displayValue)\nt=this.replaceAllFunc(displayValue);else\nt=this.replaceAllFunc(title);}\nt=this.replaceHeaderAndTailFontStyle(t,\"tail\");this.elemVTail.innerHTML=t;if(this.elemVTail.innerText==\" \"){this.elemTrTail.style.display=\"none\";if(domutils.isFirefox()){this.elemTrFillBlank.style.display=\"none\";}\nthis.dtail=\"\";delete this.dtail;this.elemVTail.innerHTML=\"\";}else{var height=this.elemVTail.offsetHeight;if(height!=0)\nthis.elemTrTail.style.height=height;}}};Dashboard.prototype.getViewMenuItemCheckedById=function(id){this.initViewMenu();var item=this.viewMenu.checkList.getItemCheckboxById(id);if(item)\nreturn item.checked;else\nreturn false;}\nDashboard.prototype.replaceAllFunc=function(title,funcName){var t1,t2,t3,t4,t5,t6,t7,t8;t1=this.replaceFunc(title,\"CurrentUserAlias\");t2=this.replaceFunc(t1,\"CurrentUserName\");t3=this.replaceFunc(t2,\"CurrentReportName\");t4=this.replaceFunc(t3,\"CurrentUserDefaultDepartmentName\");t5=this.replaceFunc(t4,\"CurrentUserID\");t6=this.replaceFunc(t5,\"CurrentTime\");t7=this.replaceFunc(t6,\"GetParamValue\");t8=this.replaceFunc(t7,\"CurrentUserGroupName\");return t8;}\nDashboard.prototype.replaceHeaderAndTailFontStyle=function(text,flag){var pageTheme=registry.get(\"pageTheme\");if(!pageTheme||!pageTheme.report)\nreturn text;var style=\"\";if(flag==\"header\"&&pageTheme.report.reportHeaderFont){style=\"<span style='font-size:\"+pageTheme.report.reportHeaderFont.fontSize+\";color:\"+pageTheme.report.reportHeaderFont.color+\"'>\";}else if(flag==\"tail\"&&pageTheme.report.reportTailFont){style=\"<span style='font-size:\"+pageTheme.report.reportTailFont.fontSize+\";color:\"+pageTheme.report.reportTailFont.color+\"'>\";}else{return text;}\nvar s1=\"<FONT size=\";while(text.indexOf(s1)!=-1){var t=text.indexOf(s1);var news=text.substring(0,t);var news2=text.substring(t);var l=news2.indexOf(\">\");news2=news2.substring(l+1);text=news+news2;}\ns1=\"<FONT color=\";while(text.indexOf(s1)!=-1){var t=text.indexOf(s1);var news=text.substring(0,t);var news2=text.substring(t);var l=news2.indexOf(\">\");news2=news2.substring(l+1);text=news+news2;}\ntext=text.replace(/<\\/FONT>/ig,\"\")\ntext=style+text+\"<\/span>\";return text;}\nDashboard.prototype.replaceFunc=function(title,func){var re=new RegExp(func+\"\\\\(.*?\\\\)\",\"g\");var r=title.match(re);var t=title;if(r){for(var i=0;i<r.length;i++){if(r[i].indexOf(\"GetParamValue\")==0){var displayValue=this.getFuncParamValue(r[i]);if(displayValue){t=t.replace(r[i],displayValue);continue;}}\nvar ret=util.remoteInvokeEx(\"DashboardService\",\"getFunctionValue\",[this.clientId,r[i]]);if(ret&&ret.succeeded){t=t.replace(r[i],ret.result);}}}\nreturn t;}\nDashboard.prototype.save=function(){var data=new Array();data[0]=[\"DEFAULT_TREENODE\",\"SELF_TREENODE\"];if(this.fromPrivateFolder){data[0]=[\"SELF_TREENODE\"];}\ndata[1]=[this.getTypeName(true)];data[2]=[this.getTypeName(false)];data[3]=\"SAVE\";data[4]=this.folderNodeData;var titleName=\"保存\"+this.getTypeName(false);if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var dialogConfig={title:titleName,fullName:\"freequery.dialog.OpenSaveDialog\"};dialogFactory.showDialog(dialogConfig,data,this.saveDashCallback,this);}\nDashboard.prototype.saveDashCallback=function(ret,dialog){if(!ret){return false;}\nvar folderId=ret.folderId;if(ret.actionType==\"override\"){var saved=this.overwriteQuery(ret.fileId,ret.fileDesc);this.dashboardId=ret.fileId;if(saved){dialog.alert(\"覆盖保存\"+this.getTypeName(false)+\"成功！\");this.alreadySaved=true;this.onSave.fire(this.dashboardId);}else{this.dashboardId='';}}else{this.dashboardId=this.saveAsDashb(ret.fileName,ret.fileName,ret.fileDesc,folderId);if(this.dashboardId){dialog.alert(\"保存\"+this.getTypeName(false)+\"成功！\");this.alreadySaved=true;this.onRefreshTreeNode.fire(this,this.dashboardId,this.getTypeName(true));this.onSave.fire(this.dashboardId);}else{this.dashboardId='';}}\nret.fileName&&(this.alias=ret.fileName);this.isCreate=false;}\nDashboard.prototype.getTypeName=function(isType){if(this._isMapType()){return isType?\"DashboardMap\":\"地图分析\";}else\nreturn isType?\"Dashboard\":\"仪表分析\";}\nDashboard.prototype.saveAsDashb=function(dashName,dashAlias,dashDesc,folderId){var result=util.remoteInvokeEx(\"DashboardService\",\"createChartDefine\",[this.clientId,dashName,dashAlias,dashDesc,folderId,this.getTypeName(true)]);if(result&&result.succeeded){if(this.dashHeard==\"CurrentReportName()\"){this.elemVHeader.innerHTML=dashAlias;}\nreturn result.result;}else{return false;}}\nDashboard.prototype.updateDashb=function(){var result=util.remoteInvokeEx(\"DashboardService\",\"updateDashboard\",[this.clientId,this.dashboardId]);if(result&&result.succeeded){alert(\"保存\"+this.getTypeName(false)+\"成功！\");this.alreadySaved=true;}else{modalWindow.showServerError(result);}}\nDashboard.prototype.setConfigCont=function(){var configCont=this.creatConfigXml();var result=util.remoteInvokeEx(\"DashboardService\",\"setConfigCont\",[this.clientId,configCont]);if(result&&result.succeeded){return true;}else{modalWindow.showServerError(result);return false;}}\nDashboard.prototype.overwriteQuery=function(replacedReportId,fileDesc){var ret=util.remoteInvoke(\"DashboardService\",\"overwriteChartDefine\",[this.clientId,replacedReportId,fileDesc]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);return false;}}\nDashboard.prototype.creatConfigXml=function(){var dom=domutils.createDom();var portletNode=dom.createElement(\"dashboard\");portletNode.setAttribute(\"refresh\",this.getAutoRefresh()?\"true\":\"false\");var params=dom.createElement(\"params\");portletNode.appendChild(params);if(this.paramSetting){if(this.paramSetting.applyDefaultValueParams){for(inx in this.paramSetting.applyDefaultValueParams){var param=dom.createElement(\"defValueParam\");params.appendChild(param);param.setAttribute(\"id\",this.paramSetting.applyDefaultValueParams[inx]);}}}else{var result=util.remoteInvokeEx(\"ConfigClientService\",\"getConfigValue\",[\"PARAMETER_DEFAULT\"]);if(result&&result.result==\"true\"){for(index in this.params){var param=dom.createElement(\"defValueParam\");params.appendChild(param);param.setAttribute(\"id\",this.params[index].id);}}}\nvar viewDis=dom.createElement(\"viewDis\");portletNode.appendChild(viewDis);if(!this.viewMenu){this.initViewMenu();}\nvar views=this.viewMenu.getCheckboxList(true);var v_len=views.length;for(var i=0;i<v_len;i++){var item=views[i];var id=item.id;var check=item.checked;if(!check){var disp=dom.createElement(\"noDisplay\");viewDis.appendChild(disp);disp.setAttribute(\"id\",id);}}\nvar header=dom.createElement(\"header\");portletNode.appendChild(header);if(this.dashHeard&&this.dashHeard!=''){header.setAttribute(\"id\",this.dashHeard);}\nvar tail=dom.createElement(\"tail\");portletNode.appendChild(tail);if(this.dtail&&this.dtail!=''){tail.setAttribute(\"id\",this.dtail);}\nvar xml=domutils.nodeToString(portletNode);return xml;};Dashboard.prototype.initViewMenu=function(){if(!this.viewMenu){if(!DropDownCheckList)\nDropDownCheckList=jsloader.resolve(\"freequery.control.DropDownCheckList\");if(this.isHybrid){this.viewMenu=new DropDownCheckList(this.element,this.element.firstChild.nextSibling);}else{this.viewMenu=new DropDownCheckList(this.element);this.viewMenu.addItem(\"_trParam\",\"显示参数\");this.viewMenu.setItemChecked(\"_trParam\",this.elemParamDis.style.display!=\"none\");this.viewMenu.addItem(\"_trHeader\",\"显示表头\");this.viewMenu.setItemChecked(\"_trHeader\",!this.hiddenViewId[\"_trHeader\"]);this.viewMenu.addItem(\"_trTail\",\"显示表尾\");this.viewMenu.setItemChecked(\"_trTail\",!this.hiddenViewId[\"_trTail\"]);}\nthis.viewMenu.onCloseUp.subscribe(this.doViewMenuCloseUp,this);}}\nDashboard.prototype.doViewMenuCloseUp=function(){var views=this.viewMenu.getCheckboxList(true);var v_len=views.length;for(var i=0;i<v_len;i++){var item=views[i];var el=domutils.findElementByClassName(this.element,item.id);if(el){this.setViewVisible(el,item.checked);}}\nthis.alreadySaved=false;}\nDashboard.prototype.setViewVisible=function(el,v){if(el){if(v){el.style.display=\"\";}else{el.style.display=\"none\";}}}\nDashboard.prototype.resetViewItem=function(className,visible){if(!this.viewMenu)\nthis.initViewMenu();this.viewMenu.setItemChecked(className,visible);var el=domutils.findElementByClassName(this.element,className);if(el)\nthis.setViewVisible(el,visible);}\nDashboard.prototype.elemSave_click_handler=function(){this.alreadySaved=false;var ret=this.setConfigCont();if(ret){if(this.dashboardId&&this.dashboardId!=''){this.updateDashb();}else{this.save();}}}\nDashboard.prototype.elemSaveAs_click_handler=function(){var ret=this.setConfigCont();if(ret){this.save();}}\nDashboard.prototype.elemRefresh_click_handler=function(){if(this.elemContenttr.style.display==\"none\"){return;}\nif(!this.refreshComplete){return;}\nif(!this.isEnabledCache){util.remoteInvokeEx(\"DashboardService\",\"clearSQLResultStore\",[this.clientId]);}\nthis.refreshData(true);}\nDashboard.prototype.elemCharConfig_click_handler=function(){if(this._isMapType()){this._showMapSettingWindow(0);}else{this._showSettingWindow(1);}}\nDashboard.prototype.elemClose_click_handler=function(){this.onClose.fire();}\nDashboard.prototype.elemAutoRefresh_click_handler=function(){this.alreadySaved=false;}\nDashboard.prototype.elemReportParam_click_handler=function(){this.doReportParam();}\nDashboard.prototype.elemBView_click_handler=function(){var p=util.getAbsolutePos(this.elemBView,this.element);if(!this.viewMenu)\nthis.initViewMenu();this.viewMenu.dropDown(p.x,p.y+this.elemBView.offsetHeight);}\nDashboard.prototype.elemBLocate_click_handler=function(){this.onRefreshTreeNode.fire(this,this.bizViewId,\"LOCATE_BIZVIEW\");}\nDashboard.prototype.setChartType=function(flag,type){if(flag){this.chartType=type;this.chooseChartDone=true;}else{return;}}\nDashboard.prototype.elemMyfavorite_click_handler=function(){if(this.dashboardId){var node={};node._id=this.dashboardId;node._alias=this.alias;var dialogConfig={};dialogConfig.title=\"添加到收藏夹\";dialogConfig.fullName=\"freequery.myfavorite.AddMyFavorite\";if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");dialogFactory.showDialog(dialogConfig,[node],null,this);}else{alert(\"请先保存\"+this.getTypeName(false));}}\nDashboard.prototype.elemExportImage_click_handler=function(){var pos=null\nvar p=null;if(domutils.isIE()){p=util.getAbsolutePosEx(this.elemExportImage);pos={x:p.absoluteLeft,y:p.absoluteTop+p.offsetHeight};}else{p=util.getAbsolutePosScroll(this.elemExportImage,document.body);pos={x:p.x,y:p.y+this.elemExportImage.offsetHeight};}\nif(!this.exportMenu)\nthis.initExportMenu();this.exportMenu.dropDown(pos.x,pos.y,50,100);}\nDashboard.prototype.initExportMenu=function(){if(!this.exportMenu){this.exportMenu=new DropDownBox(this.element);this.exportMenu.onCloseUp.subscribe(this.doExportMenuCloseUp,this);this.exportMenu.insertItem(\"EXCEL\",\"EXCEL\");this.exportMenu.insertItem(\"WORD\",\"WORD\");this.exportMenu.insertItem(\"PDF\",\"PDF\");this.exportMenu.insertItem(\"JPEG\",\"JPEG\");}}\nDashboard.prototype.doExportMenuCloseUp=function(exportType){var typeId=(exportType&&typeof exportType==\"string\")?exportType:(this.exportMenu?this.exportMenu.selectedId:null);if(typeId){this.prepareExport(typeId);}}\nDashboard.prototype.prepareExport=function(exportType){var args=[exportType,null];if(exportType!=\"MHT\"){var callbackOptions={'func':this.executeExport,'thisobj':this,'args':args,'targetArgIndex':1,'forceCallback':false};this.exportChartToImage(callbackOptions);}else{this.executeExport.apply(this,args);}}\nDashboard.prototype.exportChartToImage=function(cbOptions){if(cbOptions.func instanceof Function||typeof cbOptions.func=='function'){cbOptions.func.apply(cbOptions.thisobj,cbOptions.args);}};Dashboard.prototype.setLocationQuery=function(){if(this.elemTdSpace5)\nthis.elemTdSpace5.style.display=\"none\";this.elemTdBLocate.style.display=\"none\";}\nDashboard.prototype.initTailBlank=function(){if(this.elemTrFillBlank&&true==this.isOpenInPortalPage){this.elemTrFillBlank.style.display=\"none\";}}\nDashboard.prototype.getDashboardOtherVaule=function(){var clientDashboardBean=new Object();clientDashboardBean[\"param\"]=this.initOtherParamsValueList;clientDashboardBean[\"chartType\"]=this.chartType;return clientDashboardBean;}\nDashboard.prototype.hiddenParameterByName=function(paramName){var paramId=this.getParamIdByName(paramName);this.paramPanelObj.hiddenParameterById(paramId);}\nDashboard.prototype.paramPanelIsHidden=function(){return this.paramPanelObj.allParamsIsHidden();}\nDashboard.prototype.getClientSize=function(){var w='',h='';if(this.elemGraph){var elem=domutils.findElementByClassName(this.elemGraph,'_chartRenderTo');if(elem){w=elem.clientWidth+'';h=elem.clientHeight+'';}}\nreturn{width:w,height:h};}\nDashboard.prototype.initExportForm=function(){if(!this.__dashboardExportForm){var formTemplate=domutils.doGet(\"template/decisionpanel/dashboard/DashboardForms.template\");var span=document.body.appendChild(document.createElement(\"span\"));span.innerHTML=formTemplate;this.__dashboardExportForm=document.getElementById(\"_dashboardExportForm\");}}\nDashboard.prototype.executeExport=function(exportType,chartDataInfo){exportType=exportType||(this.exportMenu&&this.exportMenu.selectedId);if(!exportType)\nreturn;this.initExportForm();var exportForm=this.__dashboardExportForm;var input_exportType=domutils.findElementByClassName(exportForm,\"_exportType\");var input_clientId=domutils.findElementByClassName(exportForm,\"_clientId\");var input_headerHtml=domutils.findElementByClassName(exportForm,\"_headerHtml\");var input_headerText=domutils.findElementByClassName(exportForm,\"_headerText\");var input_tailHtml=domutils.findElementByClassName(exportForm,\"_tailHtml\");var input_tailText=domutils.findElementByClassName(exportForm,\"_tailText\");var input_clientWidth=domutils.findElementByClassName(exportForm,\"_clientWidth\");var input_clientHeight=domutils.findElementByClassName(exportForm,\"_clientHeight\");input_exportType.value=exportType;input_clientId.value=this.clientId;input_headerHtml.value=this.elemVHeader&&this.elemVHeader.innerHTML||\"\";input_headerText.value=this.elemVHeader&&this.elemVHeader.innerText||\"\";input_tailHtml.value=this.elemVTail&&this.elemVTail.innerHTML||\"\";input_tailText.value=this.elemVTail&&this.elemVTail.innerText||\"\";var clientSize=this.isInPage()?this.getClientSize():{width:\"\",height:\"\"};input_clientWidth.value=clientSize.width;input_clientHeight.value=clientSize.height;exportForm.submit();};Dashboard.prototype.getClientId=function(){return this.clientId;}\nDashboard.prototype.getResourceId=function(){return this.dashboardId;}\nDashboard.prototype.getResourceType=function(){return\"dashboard\";}\nDashboard.prototype.getPageId=function(){if(this.portalObj&&this.portalObj.pageId)\nreturn this.portalObj.pageId;else\nreturn null;}\nDashboard.prototype.isInPage=function(){if(this.portalObj)\nreturn true;return false;}\nDashboard.prototype.getPageObj=function(){if(this.portalObj)\nreturn this.portalObj;else\nreturn null;}\nDashboard.prototype.getCurrentParamValue=function(paramName){var pid=this.getParamIdByName(paramName);var paramValue=this.paramPanelObj.getParamValue(pid);return paramValue;}\nDashboard.prototype.getCurrentParamDisplayValue=function(paramName){var pid=this.getParamIdByName(paramName);return this.paramPanelObj.getParamDisplayValue(pid);}\nDashboard.prototype.getCurrentParamValueInfo=function(paramName){var pid=this.getParamIdByName(paramName);var value=this.getCurrentParamValue(paramName);var displayValue=this.getCurrentParamDisplayValue(paramName);if(value||displayValue){}else{var pid=this.getParamIdByName(paramName);var valueAndDis=this.paramPanelObj.getServerParamValueAndDisplayValue(pid);value=valueAndDis[0];displayValue=valueAndDis[1];}\nreturn{\"name\":paramName,\"value\":value,\"displayValue\":displayValue};}\nDashboard.prototype.getParamIdByName=function(pName){try{var params=this.paramPanelObj.paramObjList;for(var i=0;i<params.length;i++){var paramTag=params[i].paramTag;var param=paramTag.param;if(param.name==pName||param.alias==pName){return param.id;}}}catch(e){}\nreturn'OutputParameter.'+this.bizViewId+'.'+pName;};Dashboard.prototype.fillParamValue=function(pName,pValue,pDisplayValue){if(!this.paramPanelObj)\nreturn;var pid=this.getParamIdByName(pName);var b=true;var combox=this.paramPanelObj.findComboxByParamId(pid);if(combox&&combox.needChecked){b=this.checkedValue(combox,pValue,pDisplayValue)\nif(!b){alert('参数'+pName+'输入值校验失败!');return;}}\nb=b&&this.setParamValue(pid,pValue,pDisplayValue);if(!b){alert('参数'+pName+'设置错误!');return;}};Dashboard.prototype.fillParamValueFromObj=function(pName,paramObj){if(paramObj.value){if(!paramObj.displayValue)\nparamObj.displayValue=paramObj.value;this.fillParamValue(pName,paramObj.value,paramObj.displayValue);}else\nalert('paramObj参数无效');};Dashboard.prototype.checkedValue=function(combo,value,display){var param=combo.paramTag.param;if(!combo.alreadInit){if(param.componentType==\"COMBOBOX\"||param.componentType==\"LISTDIALOG\"){if(this.paramPanelObj){var paramValues=this.paramPanelObj.getParamStandbyValue(param.id,param.clientId);if(paramValues!=null)\ncombo.insertItems(paramValues);}\ncombo.alreadInit=true;}}\nvar comBoxData=combo.getStandByData();if(param.multSelect){var valueArray=value.split(\",\");if(display){var displayArray=display.split(\",\");if(valueArray.length!=displayArray.length){alert(\"等待检验的id数目和展现名数目不匹配！\");return false;}\nfor(var i=0;i<valueArray.length;i++){if(!this.valueChecked(comBoxData,valueArray[i],displayArray[i])){return false;}}\nreturn true;}else{for(var i=0;i<valueArray.length;i++){if(!this.valueChecked(comBoxData,valueArray[i])){return false;}}\nreturn true;}}else{return this.valueChecked(comBoxData,value,display);}}\nDashboard.prototype.valueChecked=function(comBoxData,value,display){for(var i=0;i<comBoxData.length;i++){if(comBoxData[i].id==value){if(display){if(comBoxData[i].name==display)\nreturn true;else\nreturn false;}else{return true;}}}\nif(!display){for(var n=0;n<comBoxData.length;n++){if(comBoxData[n].name==value){return true;}}}\nreturn false;}\nDashboard.prototype.setShortCutDisplay=function(flag){if(flag==true){if(this.elem_btnQuery.parentNode.style.display.toUpperCase()!=\"NONE\"){this.elemShortCutTr.style.display=\"\";}}else if(flag==false){this.elemShortCutTr.style.display=\"none\";}\nreturn}\nDashboard.prototype.bindEvent=function(){this.addListener(this.elem_btnQuery,\"click\",this.refreshData,this);}\nDashboard.prototype.unBindEvent=function(){this.removeListener(this.elem_btnQuery,\"click\",this.refreshData);}\nDashboard.prototype.getFuncParamValue=function(formula){var start=formula.indexOf(\"(\");var end=formula.indexOf(\")\");var paramAlias=formula.substring(start+2,end-1);for(indx in this.params){if(paramAlias==this.params[indx].alias){var pid=this.params[indx].id;break;}}\nif(this.paramPanelObj&&pid)\nreturn this.paramPanelObj.getParamDisplayValue(pid);}\nDashboard.prototype.getChartType=function(){return this.chartType;}\nDashboard.prototype.appendHandlers=function(handlerList){if(!handlerList||!handlerList.length)\nreturn;this.processTemplate(this.element);var parentElem=this.elemViewToolbar;if(!this.handlers)\nthis.handlers=[];for(var i=0;i<handlerList.length;i++){var clz=jsloader.resolve(handlerList[i].className);var handler=new clz(this);this.handlers.push(handler);if(\"function\"!=typeof handler.readConfig)\ncontinue;var config=handler.readConfig();var items=config&&config.toolbar&&config.toolbar.items;if(!items)\ncontinue;for(var j=0;j<items.length;j++){var item=items[j];var bofid=item.bofid;var image=item.image;if(!bofid||!image)\ncontinue;if(this.getElementByBofid(bofid))\ncontinue;var isSpace=(image==\"img/banner/toolbar_tab_space.gif\");var beforeElem=this.getElementByBofid(item.before||\"toolbarLastTd\");var tdElem=document.createElement(\"td\");tdElem.noWrap=true;parentElem.insertBefore(tdElem,beforeElem);var itemElem=null;if(isSpace){itemElem=document.createElement(\"span\");itemElem.style.width=\"2px\";itemElem.style.height=\"12px\";}else{itemElem=document.createElement(\"input\");itemElem.type=\"button\";itemElem.className=\"queryview-toolbar-button\";this.addBtnClickListener(handler,item.command,itemElem);}\ntdElem.appendChild(itemElem);if((item.visible===false)||(item.functionCode&&!util.checkFunctionValid(item.functionCode)))\ntdElem.style.display=\"none\";itemElem.style.background=\"#FFFFFF url(\"+image+\") no-repeat left center\";for(var k in item){if(k==\"image\"||k==\"before\")\ncontinue;itemElem.setAttribute(k,item[k]);}\nvar propName=this.getPropNameByBofid(bofid);this[propName]=itemElem;}\nif(\"function\"==typeof handler.initItemsVisible)\nhandler.initItemsVisible();}};Dashboard.prototype.initHandlers=function(){var Configuration=jsloader.resolve(\"Configuration\");var configPoint=Configuration.extensionPoints.Dashboard;var handlerList=configPoint&&configPoint.handlers;if(!handlerList||!handlerList.length)\nreturn;this.appendHandlers(handlerList);};Dashboard.prototype.initAfterOpenHandlers=function(){var Configuration=jsloader.resolve(\"Configuration\");var configPoint=null;if(Configuration.extensionPoints.Dashboard)\nconfigPoint=Configuration.extensionPoints.Dashboard.AfterOpen;var handlerList=configPoint&&configPoint.handlers;if(!handlerList||!handlerList.length)\nreturn;this.appendHandlers(handlerList);};Dashboard.prototype.addBtnClickListener=function(handler,cmd,btn){if(!btn||!handler||\"function\"!=typeof handler.execute)\nreturn;this.addListener(btn,\"click\",function(){handler.execute(cmd,btn);},this);};Dashboard.prototype.runRenderMacro=function(){MacroService=imports(\"bof.macro.services.MacroService\").getInstance();MacroService.fire(this,\"meterReport\",\"onRender\",[this],true);this.onRunMacro.fire(this,\"onRender\");}\nDashboard.prototype._isMapType=function(){return this.chartType===ChartType.map||this.chartType===ChartType.airlinemap||this.chartType===ChartType.fusionmap;};Dashboard.prototype._showSettingWindow=function(step){var settingOk=true;if(typeof step==\"undefined\"||step==null)step=0;if(this.settingControl==null){var ret1=util.remoteInvokeEx(\"DashboardService\",\"getOutputFieldList\",[this.clientId]);if(!ret1.succeeded){alert(\"取输出字段错误\");return false;}\nvar fields=ret1.result;if(fields.length==0){alert(\"没有输出字段\");return false;}\nvar data={};var provider={fields:fields,getFields:function(){return this.fields;}}\nif(this.chartDefine)\ndata.chartDefine=this.chartDefine;data.provider=provider;data.reportType=\"Dashboard\";var cwin=new ChartSettingWizardWindow(data);cwin.onSave.subscribe(function(obj){var define=obj.chartDefine;this.chartDefine=define;if(this.chartView&&this.chartView.chartDefine){this.chartView.chartDefine=define;}\nthis._syncAndRefreshChart(define);this.alreadySaved=false;},this);cwin.onClose.subscribe(function(obj){settingOk=false;if(!this.chartDefine){this.elemClose_click_handler();}},this);this.settingControl=cwin;}\nthis.settingControl.show(step);return settingOk;};Dashboard.prototype._showMapSettingWindow=function(step){var settingOk=true;if(typeof step==\"undefined\"||step==null)step=0;if(this.settingControl==null){var ret1=util.remoteInvokeEx(\"DashboardService\",\"getOutputFieldList\",[this.clientId]);if(!ret1.succeeded){alert(\"取输出字段错误\");return false;}\nvar fields=ret1.result;if(fields.length==0){alert(\"没有输出字段\");return false;}\nvar data={};var that=this;var provider={fields:fields,getFields:function(){return this.fields;},getAllParameters:function(){return that.getParameterList(that.bizViewId);}}\nif(this.chartDefine)\ndata.chartDefine=this.chartDefine;data.provider=provider;var cwin=new MapSettingWizardWindow(data);cwin.onSave.subscribe(function(obj){var define=obj.chartDefine;this.chartDefine=define;if(this.chartView&&this.chartView.chartDefine){this.chartView.chartDefine=define;}\nthis._syncAndRefreshChart(define);},this);cwin.onClose.subscribe(function(obj){settingOk=false;if(!this.chartDefine){this.elemClose_click_handler();}},this);this.settingControl=cwin;}\nthis.settingControl.show(step);return settingOk;};Dashboard.prototype._syncAndRefreshChart=function(chartDefine,enableToolBar){if(!chartDefine||!chartDefine.chartDefine){this.showLoading(\"目前不支持该种图形，请重新设置\");return;}\nvar pageId=this.getPageId();this.refreshComplete=false;this.showLoading('正在加载数据');var ret=util.remoteInvokeEx(\"DashboardService\",\"syncAndGetOptions\",[this.clientId,pageId,chartDefine],function callback(ret){this.refreshChart(ret,enableToolBar);},this);};Dashboard.prototype._refreshChart=function(enableToolBar){var chartDefine=this.chartDefine;if(!chartDefine||!chartDefine.chartDefine){this.showLoading(\"目前不支持该种图形，请重新设置\");return;}\nthis.refreshComplete=false;this.showLoading('正在加载数据');var pageId=this.getPageId();if(!pageId){var ret=util.remoteInvokeEx(\"DashboardService\",\"getChartOptions\",[this.clientId],function callback(ret){this.refreshChart(ret,enableToolBar);},this);}else{var ret=util.remoteInvokeEx(\"DashboardService\",\"getChartOptionsInPage\",[this.clientId,pageId],function callback(ret){this.refreshChart(ret,enableToolBar);},this);}};Dashboard.prototype.refreshChart=function(chartDefineString,enableToolBar){this.showLoading('');if(chartDefineString==null||!chartDefineString.succeeded){modalWindow.showServerError(chartDefineString);return;}\nvar chartDefine=chartDefineString.result;if(chartDefine==null)return;if(this.chartView==null){this._initChartView(enableToolBar);}\nvar chart=lang.parseJSON(chartDefine);if(this.isInPage()){this._setChartSizeInPage(chart);}else{this._setChartPaneSize(chart);}\nthis.chartView.refresh(this.chartDefine.chartType||\"line\",chart);this.refreshComplete=true;}\nDashboard.prototype._setChartSizeInPage=function(chart){var star=(new Date()).getTime();var gdiv=this.elemGraph,width,height;if(this.newWidth&&this.newHeight){width=this.newWidth;height=this.newHeight;}else{width=gdiv.clientWidth-1;width=width>0?width:0;height=gdiv.clientHeight-2;height=height>0?height:0;}\nvar end=(new Date()).getTime();if(height==0||width==0){this._setChartPaneSize(chart);}else{chart.chart.width=this.chartWidthInPage=width;chart.chart.height=this.chartHeightInPage=height;}}\nDashboard.prototype._setChartPaneSize=function(chartDefine){if(!chartDefine||!this.chartPane)return;var def=('string'===typeof chartDefine)?lang.parseJSON(chartDefine):chartDefine;var chartDef=def.chart||def||{},width=chartDef.width,height=chartDef.height;if(width){this.chartPane.style.width=width+'px';}\nif(height){this.chartPane.style.height=height+'px';}};Dashboard.prototype._initChartView=function(enableToolBar){if(this.chartView==null){var isInPage=this.isInPage();var chartPane=this.chartPane=document.createElement('div');chartPane.id=\"chartPane\";chartPane.className=\"_chartPane\";chartPane.style.cssText=\"position:relative;\"+(isInPage?\"width:100%; height: 100%;\":\"\");var renderTo=document.createElement('div');renderTo.id=\"chartRenderTo\";renderTo.className=\"_chartRenderTo\";if(isInPage){renderTo.style.cssText=\"width:100%; height: 100%;\";}\nchartPane.appendChild(renderTo);this.elemGraph.appendChild(chartPane);if(typeof enableToolBar==\"undefined\"||enableToolBar==null)enableToolBar=true;var buttonsOption={deleteButton:{enabled:false}};if(this._isMapType()){buttonsOption={chartTypeButton:{enabled:false},legendButton:{enabled:false},colorsButton:{enabled:false},deleteButton:{enabled:false}};}\nvar dashboardScope=this;var toolbarOption={enabled:enableToolBar,events:{onSetting:function(showTypeWindowFirst){if(dashboardScope._isMapType())\ndashboardScope._showMapSettingWindow(showTypeWindowFirst?0:1)\nelse\ndashboardScope._showSettingWindow(showTypeWindowFirst?0:1);}},buttons:buttonsOption};var chartType=this.chartDefine&&this.chartDefine.chartType;this.chartView=ChartViewUtil.initChartView(chartType,renderTo,this.chartClientId,this.chartDefine,toolbarOption,null,this);this.chartView.on('SettingChanged',function(type,needRefresh,chartView){var chartDefine=chartView.chartDefine;if(needRefresh){dashboardScope._syncAndRefreshChart(chartDefine);}else{util.remoteInvokeEx(\"DashboardService\",\"syncChartDefine\",[dashboardScope.clientId,chartDefine]);}});this.chartView.on('PointClick',function(type,e,point,chart){dashboardScope.onPointClick.fire(e,point,chart,dashboardScope)});}};Dashboard.prototype.changeChartTypeTemplate=function(typeTemplate){this.chartDefine.chartType=typeTemplate.type;if(!this.chartDefine.chartDefine){alert(\"没有图形数据\");return;}\nvar defObj=lang.parseJSON(this.chartDefine.chartDefine);jQuery.extend(defObj,typeTemplate.options);defObj.chartTemplate=typeTemplate;this.chartDefine.chartDefine=lang.toJSONString(defObj);this.refreshData();}\nDashboard.prototype.accessChartType=function(type){var chartTypes=\"line,column,area,bar,pie,donut,combination,dualYCombination,scatter\";if(type&&　chartTypes.indexOf(type)>=0){return true;}\nreturn false;}\nDashboard.prototype.showLoading=function(message){var chartView=this.chartView;if(message){message=message+'...';if(chartView){chartView.showLoading(message);return;}\nvar width=this.chartDefine.width;var height=this.chartDefine.height;if(!width){width=200;}\nif(!height){height=200;}\nthis.elemGraph.innerHTML='<div class=\"dashboard_loading\" style=\"text-align:center; width:'+width+'px; padding-top:'+height/2+'px\">'+message+'<\/div>';}else{if(chartView){chartView.hideLoading();return;}\nthis.elemGraph.innerHTML='';}}\nDashboard.prototype.openResourceInNewWindow=function(resid,paramObjList,showtoolbar,refresh){var paramObj=null;if(paramObjList&&paramObjList.length>0)\nparamObj=lang.toJSONString(paramObjList);if(!resid)\nreturn;var url=\"openresource.jsp?notNeedLogon=true&op=simplewrite&refresh=\"+refresh\n+\"&showtoolbar=\"+showtoolbar+\"&resid=\"+resid;var setting={autoLogin:true,isBrowseModule:true,params:paramObj};if(!this.urlLinkCommand)\nthis.urlLinkCommand=new URLLinkCommand();this.urlLinkCommand.openInNewWindow(url,setting);}\nDashboard.prototype.getAllMapAreas=function(){var ret=util.remoteInvokeEx(\"MapAreaService\",\"getHasMapMapAreas\",[]);if(ret&&ret.result){return ret.result;}\nreturn null;}\nDashboard.prototype.resizeChart=function(w,h){if(!this.chartView)return;this.chartView.resizeTo(w,h);}","js/bof/decisionpanel/Portal/Dashlet/Portlet/GraphReportPortlet.js":"\njsloader.resolveMany([\"bof.decisionpanel.Portal.Dashlet.Portlet.BofPortlet\",\"bof.decisionpanel.Portal.macro.MacroMenuCommand\",\"bof.baseajax.common.actions.MainFrameAction\"]);var util=jsloader.resolve(\"freequery.common.util\");var modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var domutils=jsloader.resolve(\"freequery.lang.domutils\");var BofPortlet=jsloader.resolve(\"bof.decisionpanel.Portal.Dashlet.Portlet.BofPortlet\");var DashboardAction=jsloader.resolve(\"bof.decisionpanel.dashboard.DashboardAction\");var dialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var MacroService=imports(\"bof.macro.services.MacroService\").getInstance();var GraphReportPortlet=function(parentDiv,contextStr){GraphReportPortlet.superclass.constructor.call(this,parentDiv,contextStr);this.portletType=\"GraphReportPortlet\";if(window.__Portlet_is_hybrid){this.modules={};this.div=parentDiv.firstChild;for(var node=this.div.nextSibling;node;node=node.nextSibling){if(1!=node.nodeType)continue;if(\"TEXTAREA\"!=node.tagName)continue;if(\"modules\"==node.getAttribute(\"boftype\")){var eventName=node.getAttribute(\"bofid\");this.modules[eventName]=lang.parseJSON(node.value);}else{;}}}};lang.extend(GraphReportPortlet,BofPortlet);GraphReportPortlet.prototype.render=function(){GraphReportPortlet.superclass.render.call(this);var queryCmd=new DashboardAction();this.command=queryCmd;queryCmd.container=this.div;if(\"undefined\"===typeof this.ishidetoolbar)\nthis.ishidetoolbar=true;var height,width;height=width=null;if(this.heightOption==\"chart\"){height=this.height;width=this.width;}\nqueryCmd.setPortalInfo(false,!this.ishidetoolbar,this.getPageObj(),height,width,this.parentDiv);var node=new Object();node._id=this.portletId;node._type=\"Dashboard\";queryCmd.openDisabled=false;queryCmd.onRunMacro.subscribe(this.runMacro,this);queryCmd.execute(\"open\",node);var portletObj=queryCmd.dashboard;if(portletObj){var autoRefresh=portletObj.getAutoRefresh();portletObj.setAutoRefresh(false);try{portletObj.onParamChange.subscribe(this.onGraphParamChange,this);this.addChartSubscribe(portletObj);if(\"undefined\"===typeof this.isHideShortTollBar)\nthis.isHideShortTollBar=true;if(!this.getTitle()){this.setTitle(\"\");}\nif(this.isReplace()){this.setTitle(portletObj.alias||portletObj.name);}\nportletObj.setShortCutDisplay(!this.isHideShortTollBar);this.hiddenParam();this.getPortletObject().portlet=this;var urlParams=this.getURLParamValues();if(urlParams!=null)\nthis.setParamsInfo(true);this.setParamValuesByPublicParams();this.getPageObj().checkPublicParamsValueInited();if(this.autorefresh&&!this.isReplace()){this._refreshData_(portletObj);}else if(this.autorefreshValue==\"delay\"){this._refreshData_(portletObj,this.delayTime);}\nelse{if(portletObj.clientId)\nutil.remoteInvokeEx(\"DashboardService\",\"removeBlockingQueue\",[portletObj.clientId]);}}finally{portletObj.setAutoRefresh(autoRefresh);}}};GraphReportPortlet.prototype._refreshData_=function(portletObj,outTime){var time=outTime?outTime*1000:100;setTimeout(function(){portletObj.refreshData();},time)}\nGraphReportPortlet.prototype.getPortletObject=function(){if(this.command)\nreturn this.command.dashboard;}\nGraphReportPortlet.prototype.destroy=function(){this.elemChartType=null;if(this.chartTypePanel){this.chartTypePanel.destroy();this.chartTypePanel=null;}\nif(this.portalObj&&this.portalObj.paramPanel)\ndelete this.portalObj;if(this.command){this.command.destroy();delete this.command;}\ntry{domutils.destroyNode(this.div)}catch(e){};try{this.div.removeNode();}catch(e){};delete this.div;GraphReportPortlet.superclass.destroy.call(this);};GraphReportPortlet.prototype.refresh=function(flag){if(this.getPortletObject())\nthis.getPortletObject().refreshData(flag);}\nGraphReportPortlet.prototype.maximizeWindow=function(){var obj=this.getPortletObject();var gdiv=obj.elemGraph,width,height;width=gdiv.clientWidth-1;height=gdiv.clientHeight-2;if(domutils.isChrome()){width=width-10;height=height-15;}else if(domutils.isSafari()){width=width-20;height=height-15;}\nif(this.heightOption!==\"chart\"){obj.resizeChart(width,height);}}\nGraphReportPortlet.prototype.minimizeWindow=function(){}\nGraphReportPortlet.prototype.restoreWindow=function(){var obj=this.getPortletObject();var gdiv=obj.elemGraph;obj.resizeChart(obj.chartWidthInPage||gdiv.clientWidth-1,obj.chartHeightInPage||gdiv.clientHeight-1);}\nGraphReportPortlet.prototype.onSize=function(){var obj=this.getPortletObject();if(!obj)\nreturn;var gdiv=obj.chartPane&&obj.chartPane.firstChild;if(gdiv.id!=\"chartRenderTo\"){gdiv=obj.chartPane.firstChild.nextSibling;}\nif(gdiv){if(domutils.isIE6()){obj.resizeChart(10,10);setTimeout(function(){var width=obj.elemGraph.clientWidth-1;var height=obj.elemGraph.clientHeight-1;obj.resizeChart(width,height);},100);}else{gdiv.style.display=\"none\";setTimeout(function(){var width=obj.elemGraph.clientWidth-1,height=obj.elemGraph.clientHeight-1;gdiv.style.display=\"\";obj.resizeChart(width,height);},10)}}}\nGraphReportPortlet.prototype.getExportBean=function(){var portletBean=new Object();portletBean.portletId=this.portletId;portletBean.type=this.getPortletType().toUpperCase();var dashboard=this.getPortletObject();portletBean.clientId=dashboard.clientId;portletBean.headerHtml=dashboard.elemVHeader.innerHTML||\"\";portletBean.tailHtml=dashboard.elemVTail.innerHTML||\"\";portletBean.headerText=dashboard.elemVHeader.innerText||\"\";portletBean.tailText=dashboard.elemVTail.innerText||\"\";var clientSize=dashboard.getClientSize();portletBean.clientWidth=clientSize.width;portletBean.clientHeight=clientSize.height;portletBean.hiddenParamIdList=this.hiddenParamIdList;var extraConfigObj={\"dashboard\":{},\"simpleReport\":{},\"olapReport\":{},\"freeReport\":{},\"metricReport\":{}};portletBean.extraConfig=lang.toJSONString(extraConfigObj);return portletBean;}\nGraphReportPortlet.prototype.onGraphParamChange=function(portletObject,chart){MacroService.fire(this,this.getPortletObject().getResourceId(),\"onParamValueChanged\",[this.getPortletObject()]);}\nGraphReportPortlet.prototype.getPortletType=function(){return\"Dashboard\";}\nGraphReportPortlet.prototype.runMacro=function(portletObject,actionName){if(actionName==\"onRender\"){MacroService.fire(this,portletObject.getResourceId(),\"onRender\",[portletObject]);}}\nGraphReportPortlet.prototype.setAutoRefreshValue=function(refreshValue){if(this.getPortletObject())\nthis.getPortletObject().elemAutoRefresh.checked=refreshValue;}\nGraphReportPortlet.prototype.commitParamValue=function(){GraphReportPortlet.superclass.commitParamValue.call(this);}\nGraphReportPortlet.prototype.setBtnStatus=function(){this.getDashlet().setButtonExportDisplay(\"\");if(!this.__btnStatusAction){var h=new Array();var btnStatusAction=this.getBtnStatusAction();if(btnStatusAction){for(var i=0;i<btnStatusAction.length;i++){var clz=jsloader.resolve(btnStatusAction[i].className);h[i]=new clz(this);}}\nthis.__btnStatusAction=h;}\nfor(var i=0;i<this.__btnStatusAction.length;i++){this.__btnStatusAction[i].setBtnStatus(this);}}\nGraphReportPortlet.prototype.getBtnStatusAction=function(){var Configuration=imports(\"Configuration\").getInstance();return Configuration.extensionPoints.GraphReportPortletBtnStatusAction;}\nGraphReportPortlet.prototype.resolveCustomContentXml=function(portletXml){try{this.heightOption=domutils.getNodeAtrributeValueByName(portletXml,\"HEIGHTOPTION\").nodeValue;}catch(e){this.heightOption=\"dashlet\";}\nreturn this.resolveReportContentXml(portletXml);}\nGraphReportPortlet.prototype.setCurrObjStateAfter=function(){this.commitParamValue();}\nGraphReportPortlet.prototype.isDefultParamValue=function(param){if(param.isDefultParamValue!=undefined)\nreturn param.isDefultParamValue;var dashboard=this.getPortletObject();var defultParamValue=dashboard.paramSetting;if(defultParamValue&&defultParamValue.applyDefaultValueParams){for(index in defultParamValue.applyDefaultValueParams){pid=defultParamValue.applyDefaultValueParams[index];if(pid==param.id){param.isDefultParamValue=true;return true;}}}\nparam.isDefultParamValue=false;return false;}\nGraphReportPortlet.prototype.initSelfExportMenu=function(){if(this.exportMenu){this.exportMenu.insertItem(\"JPEG\",\"JPEG\");}}\nGraphReportPortlet.prototype.__chartClick=GraphReportPortlet.prototype.chartClick;GraphReportPortlet.prototype.chartClick=function(e,chart,eventType,clieckInfo){if(domutils.isIOS()){}\nthis.__chartClick(e,chart,eventType,clieckInfo);if(domutils.isIOS()){}}\nGraphReportPortlet.prototype.__onParamChange=GraphReportPortlet.prototype.onParamChange;GraphReportPortlet.prototype.onParamChange=function(paramPanel,param,newValue,newDispValue,relateParam){if(domutils.isIOS()||domutils.isAndroid()){var paramList=this.getParams();for(indx in paramList){var portletParam=paramList[indx];if(portletParam.name==param.name&&portletParam.type==param.type){this.getPortletObject().setParamValue(portletParam.id,newValue,newDispValue);if(relateParam!=\"RELATEPARAM\"){if(this.getDashlet().frameDiv.style.display!=\"none\"){this.refresh(true,true);}else{this.needRefreshChart=true;}}\nbreak;}}}else{this.__onParamChange(paramPanel,param,newValue,newDispValue,relateParam);}}\nGraphReportPortlet.prototype._ipad_maximizeWindow=GraphReportPortlet.prototype.maximizeWindow;GraphReportPortlet.prototype.maximizeWindow=function(){var obj=this.getPortletObject();this.chartWidthInPage=obj.chartWidthInPage;this.chartHeightInPage=obj.chartHeightInPage;this._ipad_maximizeWindow();}\nGraphReportPortlet.prototype._ipad_restoreWindow=GraphReportPortlet.prototype.restoreWindow;GraphReportPortlet.prototype.restoreWindow=function(){var obj=this.getPortletObject();if(this.chartWidthInPage){obj.chartWidthInPage=this.chartWidthInPage}\nif(this.chartHeightInPage){obj.chartHeightInPage=this.chartHeightInPage}\nthis._ipad_restoreWindow();}\nGraphReportPortlet.prototype.onSize_android=GraphReportPortlet.prototype.onSize;GraphReportPortlet.prototype.onSize=function(){var obj=this.getPortletObject();if(!obj)\nreturn;var gdiv=obj.chartPane;if(gdiv&&domutils.isAndroid()){gdiv.style.display=\"none\";setTimeout(function(){var width=obj.elemGraph.clientWidth-1,height=obj.elemGraph.clientHeight-1;gdiv.style.display=\"\";obj.resizeChart(width,height);},500)}else{this.onSize_android();}}\nGraphReportPortlet.prototype.initSelfExportMenu_ex2007=GraphReportPortlet.prototype.initSelfExportMenu;GraphReportPortlet.prototype.initSelfExportMenu=function(){this.initSelfExportMenu_ex2007();var portalObj=this.getPortletObject();if(this.exportMenu&&!portalObj._isMapType()){}}","js/bof/decisionpanel/Portal/Dashlet/Portlet/GraphReportPortletEdit.js":"\n﻿var domutils=jsloader.resolve(\"freequery.lang.domutils\");var BofPortletEdit=jsloader.resolve(\"bof.decisionpanel.Portal.Dashlet.Portlet.BofPortletEdit\");var util=jsloader.resolve(\"freequery.common.util\");var GraphReportPortletEdit=function(parentDiv){GraphReportPortletEdit.superclass.constructor.call(this,parentDiv);};lang.extend(GraphReportPortletEdit,BofPortletEdit);GraphReportPortletEdit.prototype.render=function(contentString){this.init(this.parentDiv,__url);GraphReportPortletEdit.superclass.render.call(this,contentString);this.updatePortletName(this.portletId);};GraphReportPortletEdit.prototype.destroy=function(){try{domutils.destroyNode(this.element);}catch(e){}\nGraphReportPortletEdit.superclass.destroy.call(this);};GraphReportPortletEdit.prototype.resolveCustomContentXml=function(portletXml){this.resolveReportContentXml(portletXml);try{this.heightOption=domutils.getNodeAtrributeValueByName(portletXml,\"HEIGHTOPTION\").nodeValue;}catch(e){this.heightOption=\"dashlet\";}}\nGraphReportPortletEdit.prototype.setCustomInputValue=function(){this.setReportInputValue();this.heightOptionName=this.updateRaidoName(this.portletId,\"_heightOption\");var radios=this.setRadioChecked(this.heightOptionName,this.heightOption,\"dashlet\");for(var i=0;i<radios.length;i++){var radio=radios[i];if(radio.value==\"chart\"){this.elemHeightChart=radio;}\nthis.addListener(radio,\"click\",this.doHeightChartClick,this);}}\nGraphReportPortletEdit.prototype.getCustomContentXml=function(portletNode){portletNode=this.getReportContentXML(portletNode);portletNode.setAttribute(\"heightOption\",(this.getRadioCheckedValue(this.heightOptionName)));return portletNode;}\nGraphReportPortletEdit.prototype.getParams=function(){var result=util.remoteInvoke(\"DPPortalService\",\"getParamCataolgInfoByReportId\",[this.portletId,\"Dashboard\"]);return result;}\nGraphReportPortletEdit.prototype.doHeightChartClick=function(e){if(e.srcElement.value==\"chart\"){this.elemWidth.value=this.elemWidth.value.replace(\"%\",\"\");this.elemHeight.value=this.elemHeight.value.replace(\"%\",\"\");}}\nGraphReportPortletEdit.prototype.validateInput=function(){if(this.elemHeightChart&&this.elemHeightChart.checked){if(this.elemWidth.value.indexOf(\"%\")!=-1){alert(\"图形高宽不支持百分比！\");this.elemWidth.focus();return false;}\nif(this.elemHeight.value.indexOf(\"%\")!=-1){alert(\"图形高宽不支持百分比！\");this.elemHeight.focus();return false;}}\nreturn GraphReportPortletEdit.superclass.validateInput.call(this);}\nGraphReportPortletEdit.prototype.render_ipad=GraphReportPortletEdit.prototype.render;GraphReportPortletEdit.prototype.render=function(contentString){this.render_ipad(contentString);this.elemIpadFrameDisplayTr.style.display=\"\";};","js/bof/decisionpanel/Portal/Dashlet/Portlet/FolderPortlet.js":"\n﻿var util=jsloader.resolve(\"freequery.common.util\");var modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var domutils=jsloader.resolve(\"freequery.lang.domutils\");var FolderObject=jsloader.resolve(\"bof.decisionpanel.Portal.Dashlet.Portlet.FolderObject\");var BofPortlet=jsloader.resolve(\"bof.decisionpanel.Portal.Dashlet.Portlet.BofPortlet\");var FolderPortlet=function(parentDiv,contextStr,type){FolderPortlet.superclass.constructor.call(this,parentDiv,contextStr);};lang.extend(FolderPortlet,BofPortlet);FolderPortlet.prototype.render=function(){FolderPortlet.superclass.render.call(this);this.getDashlet().elemDashletContent.style.overflow=\"auto\";var folderObject=new FolderObject(this.div,this.filter,this);folderObject.itemId=this.portletId;folderObject.itemName=this.portletName;folderObject.width=this.width;folderObject.height=this.height;folderObject.styleWise=this.styleWise;folderObject.autoRefresh=this.autoRefresh;folderObject.resNameWidth=this.resNameWidth;folderObject.show();this.folderObject=folderObject;};FolderPortlet.prototype.setChartSizeDisp=function(height,width){this.folderObject.width=(parseInt(this.width)+width)+\"\";this.folderObject.height=(parseInt(this.height)+height)+\"\";}\nFolderPortlet.prototype.refresh=function(){if(this.styleWise==\"list\"){this.folderObject.show();}}\nFolderPortlet.prototype.resolveCustomContentXml=function(portletXml){try{this.filter=domutils.getNodeAtrributeValueByName(portletXml,\"FILTER\").nodeValue.split(\";\");}catch(e){this.filter=new Array()\nthis.filter.push(\"ALL\");}\ntry{this.styleWise=domutils.getNodeAtrributeValueByName(portletXml,\"STYLEWISE\").nodeValue;}catch(e){this.styleWise=\"icon\";}\ntry{this.autoRefresh=domutils.getNodeAtrributeValueByName(portletXml,\"AUTOREFRESH\").nodeValue;}catch(e){this.autoRefresh=\"true\";}\ntry{this.resNameWidth=domutils.getNodeAtrributeValueByName(portletXml,\"RESNAMEWIDTH\").nodeValue;}catch(e){this.resNameWidth=\"24\";}}\nFolderPortlet.prototype.destroy=function(){try{domutils.destroyNode(this.div)}catch(e){};if(this.folderObject)\nthis.folderObject.destroy();FolderPortlet.superclass.destroy.call(this);delete this.filter;delete this.portletName;delete this.height;delete this.width;this.portletId;this.portletchanged=false;this.styleWise=\"icon\";};FolderPortlet.prototype.isDelete=function(portletId){var result=util.remoteInvokeEx(\"ConfigClientService\",\"getConfigValue\",[\"QUERY_BROWSER_TREE_PURVIEW\"]);if(result&&result.result){this.treePurview=result.result;}\nif(this.treePurview){ret=util.remoteInvoke(\"CatalogService\",\"getOperableChildElementsWithPurviewType\",[portletId,this.treePurview]);}else{ret=util.remoteInvoke(\"CatalogService\",\"getOperableChildElements\",[portletId]);}\nthis.ret=ret;return ret;};FolderPortlet.prototype.runMacro=function(itemId,itemType){var MacroService=null;try{MacroService=imports(\"bof.macro.services.MacroService\").getInstance();}catch(ex){}\nif(MacroService){var param=new Array();param.push(this);param.push(this.pageContext);param.push(itemId);param.push(itemType);MacroService.fire(this.pageContext,\"folderDashlet\",\"onDBLClick\",param);}}\nFolderPortlet.prototype.setStopEvent=function(flag){this.stopEvent=flag;}\nFolderPortlet.prototype.getDashletId=function(){return this.portletId}\nFolderPortlet.prototype.getDashletType=function(){return\"FOLDER\";}\nFolderPortlet.prototype.getPortletObject=function(){return this.folderObject;}\nFolderPortlet.prototype.onSize=function(){var obj=this.getPortletObject();var dashlet=this.getDashlet();if(dashlet.WindowState==dashlet.StateNormal){this.divHeight=this.div.offsetHeight;this.divWidth=this.div.offsetWidth;}\nobj.newHeight=dashlet.elemDashletCenterCenterTd.offsetHeight;obj.newWidth=this.div.offsetWidth;}","js/bof/decisionpanel/Portal/Dashlet/Portlet/FolderObject.js":"\nvar modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var dialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var LocationBar=jsloader.resolve(\"freequery.common.LocationBar\");var util=jsloader.resolve(\"freequery.common.util\");var PopupMenu=jsloader.resolve(\"freequery.menu.PopupMenu\");var URLLinkCommand=jsloader.resolve(\"freequery.sysresource.URLLinkCommand\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");var FolderObject=function(parentDiv,filter,portletObj){this.init(parentDiv,__url);this.filter=filter;this.styleWise=\"icon\";this.height=null;this.reportObjList=new Array();this.upFolderObj=null;this.dblClickEvent=new CustomEvent();this.portletObj=portletObj;};lang.extend(FolderObject,\"freequery.widget.Module2\");FolderObject.prototype.destroy=function(){if(this.urlLinkCommand)\nthis.urlLinkCommand.destroy();if(this.itemPopupMenu)\nthis.itemPopupMenu.destroy();if(this.popupMenu)\nthis.popupMenu.destroy();if(this.styleWise==\"icon\"){while(this.elemViewport.childNodes.length>1){this.removeListener(this.elemViewport.childNodes[1],\"mousemove\",this.labelMousemove);this.removeListener(this.elemViewport.childNodes[1],\"mouseout\",this.labelMouseout);this.removeListener(this.elemViewport.childNodes[1],\"dblclick\",this.doDBclickItem);this.removeListener(this.elemViewport.childNodes[1],\"click\",this.doClickItem);domutils.destroyNode(this.elemViewport.childNodes[1]);}}else{for(var i=this.elemViewport.childNodes.length-1;i>0;i--){while(this.elemViewport.childNodes[i].childNodes.length>0){this.removeListener(this.elemViewport.childNodes[1],\"mousemove\",this.labelMousemove);this.removeListener(this.elemViewport.childNodes[1],\"mouseout\",this.labelMouseout);this.removeListener(this.elemViewport.childNodes[1],\"dblclick\",this.doDBclickItem);this.removeListener(this.elemViewport.childNodes[1],\"click\",this.doClickItem);domutils.destroyNode(this.elemViewport.childNodes[i].childNodes[0]);}\ndomutils.destroyNode(this.elemViewport.childNodes[i]);}}\nFolderObject.superclass.destroy.call(this);return true;};FolderObject.prototype.show=function(){this.itemTemplate=domutils.doGet(\"js/bof/decisionpanel/Portal/Dashlet/Portlet/FolderView.html\");this.firstpageid=this.itemId;this.curpageid=this.itemId;this.uppageid=this.curpageid;isB=this.height.indexOf(\"%\");var height=this.height;if(isB!=-1){var winHeight=parseInt(window.screen.clientHeight);height=winHeight*(this.height.substring(0,isB))/100;}\nthis.height=height;this.addItems(this.itemId);};FolderObject.prototype.isFilterType=function(type){if(!util.hasLicense(\"Query\")&&type==\"SIMPLE_REPORT\"){return true;}\nif(!util.hasLicense(\"MetricReport\")&&type==\"METRIC_REPORT\"){return true;}\nif(!util.hasLicense(\"ComplexReport\")&&type==\"FREE_REPORT\"){return true;}\nif(!util.hasLicense(\"Chart\")&&type==\"Dashboard\"){return true;}\nif(!util.hasLicense(\"Map\")&&type==\"DashboardMap\"){return true;}\nif(!util.hasLicense(\"Portal\")&&(type==\"PUBLIC_PAGES\"||type==\"SELF_PAGES\")){return true;}\nif(!util.hasLicense(\"Analysis\")&&type==\"OLAP_REPORT\"){return true;}\nif(!util.hasLicense(\"FileManager\")&&type==\"FILE_RESOURCE\"){return true;}\nreturn false;}\nFolderObject.prototype.addItems=function(curid){if(curid)\nthis.ret=util.remoteInvoke(\"CatalogService\",\"getOperableChildElements\",[curid]);if(this.ret&&this.ret.succeeded&&this.ret.result){var listTdDiv=this.removeItems();var　folderItem=this.ret.result;if(this.filter[0]==\"ALL\"){var m=0;for(var h=0;h<folderItem.length;h++){if(this.isFilterType(folderItem[h].type)){continue;}\nif(folderItem[h].type!=\"BUSINESS_VIEW\"&&folderItem[h].type!=\"TEXT_BUSINESS_VIEW\"&&folderItem[h].type!=\"PROC_BUSINESS_VIEW\"&&folderItem[h].type!=\"RAWSQL_BUSINESS_VIEW\"&&folderItem[h].type!=\"JAVA_BUSINESS_VIEW\"){var listTdDivNew=this.createNewSpan(m++);if(listTdDivNew)\nlistTdDiv=listTdDivNew;this.appendItem(folderItem[h],listTdDiv);}}}else{var m=0;for(var h=0;h<folderItem.length;h++){for(var g=0;g<this.filter.length;g++){if(folderItem[h].type==this.filter[g]){m++;var listTdDivNew=this.createNewSpan(m);if(listTdDivNew)\nlistTdDiv=listTdDivNew;this.appendItem(folderItem[h],listTdDiv);}}}}}else{modalWindow.showServerError(this.ret);}};FolderObject.prototype.removeItems=function(){if(this.styleWise==\"icon\"){while(this.elemViewport.childNodes.length>1){this.removeListener(this.elemViewport.childNodes[1],\"mousemove\",this.labelMousemove);this.removeListener(this.elemViewport.childNodes[1],\"mouseout\",this.labelMouseout);this.removeListener(this.elemViewport.childNodes[1],\"dblclick\",this.doDBclickItem);this.removeListener(this.elemViewport.childNodes[1],\"click\",this.doClickItem);domutils.destroyNode(this.elemViewport.childNodes[1]);}}else{for(var i=this.elemViewport.childNodes.length-1;i>0;i--){while(this.elemViewport.childNodes[i].childNodes.length>0){this.removeListener(this.elemViewport.childNodes[1],\"mousemove\",this.labelMousemove);this.removeListener(this.elemViewport.childNodes[1],\"mouseout\",this.labelMouseout);this.removeListener(this.elemViewport.childNodes[1],\"dblclick\",this.doDBclickItem);this.removeListener(this.elemViewport.childNodes[1],\"click\",this.doClickItem);domutils.destroyNode(this.elemViewport.childNodes[i].childNodes[0]);}\ndomutils.destroyNode(this.elemViewport.childNodes[i]);}\nvar listTdDiv=document.createElement(\"span\");listTdDiv.style.display=\"inline-block\";this.elemViewport.appendChild(listTdDiv);return listTdDiv;}}\nFolderObject.prototype.createNewSpan=function(h){var rows=parseInt((parseInt(this.height)-80)/25);if(this.styleWise==\"list\"&&h>0){var listTdDiv=document.createElement(\"span\");listTdDiv.style.display=\"inline-block\";this.elemViewport.appendChild(listTdDiv);listTdDiv.className=\"listTdDiv\"+h;return listTdDiv;}}\nFolderObject.prototype.appendItem=function(sElem,listTdDiv){if(this.itemTemplate){var item=this.createItemSpan(sElem,listTdDiv);var src;if(sElem.customImage){src=\"img/myfavorite/\"+sElem.customImage;}else{src=\"img/myfavorite/\"+sElem.type+\"_32.gif\";}\nif(this.styleWise==\"list\"){src=\"img/catalogtree/\"+sElem.type+\".gif\";}\nitem.innerHTML=this.itemTemplate;item._id=sElem.id;item._name=sElem.name;item._type=sElem.type;item._alias=sElem.alias;item._desc=sElem.desc;var itemImg=domutils.findElementByClassName(item,\"_img\");itemImg.src=src;var itemName=domutils.findElementByClassName(item,\"_name\");itemName.innerHTML=this.gbtrim(sElem.alias)\nitem.title=sElem.alias;itemImg.style.cursor=\"pointer\";itemName.style.cursor=\"pointer\";this.addListener(item,\"dblclick\",this.doDBclickItem,this);this.addListener(item,\"click\",this.doClickItem,this);this.addListener(item,\"mousemove\",this.labelMousemove,this);this.addListener(item,\"mouseout\",this.labelMouseout,this);}}\nFolderObject.prototype.createItemSpan=function(sElem,listTdDiv){var spanWidth=this.resNameWidth*7+60;var item=document.createElement(\"span\");item.className=\"_itemspan\";item.style.width=spanWidth;item.style.height=\"40px\";item.style.display=\"inline-block\";if(this.styleWise==\"icon\"){this.elemViewport.appendChild(item);}else{var spanWidth=this.resNameWidth*7+60;item=document.createElement(\"div\");item.className=\"_itemspan\";item.style.width=spanWidth;item.style.height=\"25px\";listTdDiv.appendChild(item);listTdDiv.style.width=spanWidth;}\nreturn item;}\nFolderObject.prototype.doClickItem=function(e){e=eventutil.getEvent();this.unSelectItem();this.selecteditem=null;var item=domutils.findAncElementByClassName(e.target,\"_itemspan\");if(item==null)\nitem=e.target;this.selecteditem=item;var textarea=domutils.findElementByClassName(item,\"_textarea\").firstChild;var img=domutils.findElementByClassName(item,\"_img\");textarea.className=\"select_letter\";img.parentElement.className=\"select_img\";domutils.stopEvent(e);}\nFolderObject.prototype.unSelectItem=function(e){if(this.selecteditem)\n{var textarea=domutils.findElementByClassName(this.selecteditem,\"_textarea\")\nif(!textarea)\nreturn;textarea=textarea.firstChild;var img=domutils.findElementByClassName(this.selecteditem,\"_img\");textarea.className=\"unselect_letter\";img.parentElement.className=\"unselect_img\";}}\nFolderObject.prototype.checkUpBtnDisable=function(){if(this.curpageid==this.firstpageid){this.elemUpButton.disabled=true;this.elemUpimg.src=\"img/myfavorite/UP_fade.gif\";}else{this.elemUpButton.disabled=false;this.elemUpimg.src=\"img/myfavorite/UP.gif\";}}\nFolderObject.prototype.labelMousemove=function(ev){ev.target.style.color=\"#FF9999\";};FolderObject.prototype.labelMouseout=function(ev){ev.target.style.color=\"#000000\";};FolderObject.prototype.doDBclickItem=function(e){e=eventutil.getEvent();var item=domutils.findAncElementByClassName(e.target,\"_itemspan\");if(item){if(item._type==\"DEFAULT_TREENODE\"||item._type==\"SELF_TREENODE\"){this.uppageid=this.curpageid;this.curpageid=item._id;this.addItems(this.curpageid);this.checkUpBtnDisable();}else{this.portletObj.stopEvent=false;this.dblClickEvent.fire(item._id,item._type);if(this.portletObj.stopEvent)\nreturn;if(!this.urlLinkCommand)\nthis.urlLinkCommand=new URLLinkCommand();if(item._type==\"URL\"||item._type==\"BI3OLAP_REPORT\"){var node={};node._id=item._id;this.urlLinkCommand.openLink(node,\"NewWindow\");return;}\nvar url=\"openresource.jsp?refresh=\"+this.autoRefresh+\"&showtoolbar=true\"\n+\"&resid=\"+item._id;var setting={};this.urlLinkCommand.openInNewWindow(url,setting,true);}}}\nFolderObject.prototype.elemUpButton_click_handler=function(e){if(this.elemUpButton.disabled){return;}\nvar ret=util.remoteInvoke(\"CatalogService\",\"getCatalogElementPath\",[this.uppageid]);if(ret.succeeded&&ret.result){this.curpageid=this.uppageid;this.addItems(this.curpageid);var path=ret.result;if(path.length>=2)\nthis.uppageid=path[path.length-2].id;;}\nthis.checkUpBtnDisable();}\nFolderObject.prototype.gbtrim=function(oldStr){var len=this.resNameWidth;var otherStr=\"...\";var newStr=\"\";var len2=0;var lasts=0;var isLast=false;for(var i=0;i<oldStr.length;i++){if(oldStr.charCodeAt(i)>127||oldStr.charCodeAt(i)==94){len2+=2;}else{len2++;}\nif(len2>=len){if(!isLast){isLast=true;lasts=i+1;}}}\nif(len2<=len){newStr=oldStr;}else{var news=oldStr.substring(0,lasts);newStr=news+otherStr;}\nreturn newStr;}\nFolderObject.prototype.getPortletType=function(){return\"folder\";}","js/bof/decisionpanel/Portal/Dashlet/Portlet/FolderPortletEdit.js":"\nvar domutils=jsloader.resolve(\"freequery.lang.domutils\");var util=jsloader.resolve(\"freequery.common.util\");var BofPortletEdit=jsloader.resolve(\"bof.decisionpanel.Portal.Dashlet.Portlet.BofPortletEdit\");var FolderPortletEdit=function(parentDiv){FolderPortletEdit.superclass.constructor.call(this,parentDiv);if(parentDiv){this.init(parentDiv,__url);if(domutils.isFirefox()){this.elemFolderFilter.parentNode.style.position=\"relative\";}}\nvar showTypes=new Array();var hiddenTypes=new Array();if(util.hasLicense(\"Query\")){showTypes.push({type:\"SIMPLE_REPORT\",bofid:\"report\",labelName:\"灵活分析\"});}else{hiddenTypes.push({type:\"SIMPLE_REPORT\",bofid:\"report\",labelName:\"灵活分析\"});}\nshowTypes.push({type:\"URL\",bofid:\"url\",labelName:\"web链接\"});if(util.hasLicense(\"Map\")){showTypes.push({type:\"DashboardMap\",bofid:\"dashboardMap\",labelName:\"地图分析\"});}else{hiddenTypes.push({type:\"DashboardMap\",bofid:\"dashboardMap\",labelName:\"地图分析\"});}\nif(util.hasLicense(\"Chart\")){showTypes.push({type:\"Dashboard\",bofid:\"dashboard\",labelName:\"仪表分析\"});}else{hiddenTypes.push({type:\"Dashboard\",bofid:\"dashboard\",labelName:\"仪表分析\"});}\nif(util.hasLicense(\"MetricReport\")){showTypes.push({type:\"METRIC_REPORT\",bofid:\"metricReport\",labelName:\"指标报表\"});}else{hiddenTypes.push({type:\"METRIC_REPORT\",bofid:\"metricReport\",labelName:\"指标报表\"});}\nif(util.hasLicense(\"ComplexReport\")){showTypes.push({type:\"FREE_REPORT\",bofid:\"freeReport\",labelName:\"复杂报表\"});}else{hiddenTypes.push({type:\"FREE_REPORT\",bofid:\"freeReport\",labelName:\"复杂报表\"});}\nif(util.hasLicense(\"Analysis\")){showTypes.push({type:\"OLAP_REPORT\",bofid:\"olapReport\",labelName:\"多维分析 \"});}else{hiddenTypes.push({type:\"OLAP_REPORT\",bofid:\"olapReport\",labelName:\"多维分析 \"});}\nif(util.hasLicense(\"FileManager\")){showTypes.push({type:\"FILE_RESOURCE\",bofid:\"fileResource\",labelName:\"本地文档\"});}else{hiddenTypes.push({type:\"FILE_RESOURCE\",bofid:\"fileResource\",labelName:\"本地文档\"});}\nif(this.elemFilterTable){domutils.removeWhiteSpace(this.elemFilterTable);this.checkTypes(showTypes,hiddenTypes);var curTr=null;for(var i=0;i<showTypes.length;i++){if(i%2==0){curTr=this.createElement(this.elemFilterTable.firstChild,\"Tr\");curTr.parentNode.insertBefore(curTr,this.elemFilterOKTr);}\nthis.createFilterTableTd(curTr,showTypes[i]);}\nfor(var i=0;i<hiddenTypes.length;i++){if(i%2==0){curTr=this.createElement(this.elemFilterTable.firstChild,\"Tr\");curTr.parentNode.insertBefore(curTr,this.elemFilterOKTr);curTr.style.display=\"none\";}\nthis.createFilterTableTd(curTr,hiddenTypes[i]);}}};lang.extend(FolderPortletEdit,BofPortletEdit);FolderPortletEdit.prototype.checkTypes=function(showTypes,hiddenTypes){};FolderPortletEdit.prototype.createFilterTableTd=function(parentTr,typeInfo){var td=this.createElement(parentTr,\"TD\");td.innerHTML='<INPUT type=\"checkbox\" value=\"'+typeInfo.type\n+'\" bofid=\"'+typeInfo.bofid\n+'\"/>'\n+'<LABEL>'+typeInfo.labelName+'<\/LABEL>';var propName=this.getPropNameByBofid(typeInfo.bofid);this[propName]=td.firstChild;}\nFolderPortletEdit.prototype.destroy=function(){try{domutils.destroyNode(this.element);}catch(e){}\ndelete this.styleWise;delete this.autoRefresh;delete this.resNameWidth;delete this.filterStr;delete this.uniqueStyleWiseName;FolderPortletEdit.superclass.destroy.call(this);};FolderPortletEdit.prototype.render=function(contentString){FolderPortletEdit.superclass.render.call(this,contentString);this.setFilterChecked(false);this.initFilterSet();this.setFilterAly=true;this.registerFilterSetInit=false;this.updatePortletName(this.portletId);};FolderPortletEdit.prototype.resolveCustomContentXml=function(portletXml){this.styleWise=domutils.getNodeAtrributeValueByName(portletXml,\"STYLEWISE\").nodeValue;try{this.autoRefresh=domutils.getNodeAtrributeValueByName(portletXml,\"AUTOREFRESH\").nodeValue;}catch(e){this.autoRefresh=\"true\";}\ntry{this.filterStr=domutils.getNodeAtrributeValueByName(portletXml,\"FILTER\").nodeValue;}catch(e){this.filterStr=\"icon\";}\ntry{this.resNameWidth=domutils.getNodeAtrributeValueByName(portletXml,\"RESNAMEWIDTH\").nodeValue;}catch(e){this.resNameWidth=\"24\";}}\nFolderPortletEdit.prototype.setCustomInputValue=function(){this.uniqueStyleWiseName=this.updateRaidoName(this.portletId,\"_styleWise\");this.setRadioChecked(this.uniqueStyleWiseName,this.styleWise,\"icon\");this.uniqueOpenSelectName=this.updateRaidoName(this.portletId,\"_openSelect\");this.setRadioChecked(this.uniqueOpenSelectName,this.autoRefresh,\"true\");if(this.resNameWidth)\nthis.elemResNameWidth.value=this.resNameWidth;}\nFolderPortletEdit.prototype.validateInput=function(){if(this.elemResNameWidth.value==\"\"){alert(\"资源名称宽度输入不能为空\");return false;}\nif(!util.isUnsignedInt(this.elemResNameWidth.value)){alert(\"资源名称宽度输入格式不正确,请输入整型信息\");return false;}\nreturn FolderPortletEdit.superclass.validateInput.call(this);}\nFolderPortletEdit.prototype.getCustomContentXml=function(portletNode){var strFilter=\"\";if(this.elemAll.checked){strFilter=this.elemAll.value;}else{if(this.elemFolder.checked){strFilter=strFilter+\"DEFAULT_TREENODE;\";strFilter=strFilter+\"SELF_TREENODE;\";}\nif(this.elemReport.checked)\nstrFilter=strFilter+this.elemReport.value+\";\";if(this.elemUrl.checked)\nstrFilter=strFilter+this.elemUrl.value+\";\";if(this.elemDashboard.checked)\nstrFilter=strFilter+this.elemDashboard.value+\";\";if(this.elemDashboardMap.checked)\nstrFilter=strFilter+this.elemDashboardMap.value+\";\";if(this.elemFreeReport.checked)\nstrFilter=strFilter+this.elemFreeReport.value+\";\";if(this.elemMetricReport.checked)\nstrFilter=strFilter+this.elemMetricReport.value+\";\";if(this.elemOlapReport.checked)\nstrFilter=strFilter+this.elemOlapReport.value+\";\";if(this.elemFileResource.checked)\nstrFilter=strFilter+this.elemFileResource.value+\";\";}\nif(strFilter!=this.elemAll.value)\nstrFilter=strFilter.substring(0,strFilter.lastIndexOf(\";\"));portletNode.setAttribute(\"filter\",strFilter);portletNode.setAttribute(\"styleWise\",this.getRadioCheckedValue(this.uniqueStyleWiseName));portletNode.setAttribute(\"autoRefresh\",this.getRadioCheckedValue(this.uniqueOpenSelectName));portletNode.setAttribute(\"resNameWidth\",this.elemResNameWidth.value);return portletNode;}\nFolderPortletEdit.prototype.getParams=function(){return new Array();}\nFolderPortletEdit.prototype.elemFilterSet_click_handler=function(){this.elemFolderFilter.style.display=\"\";this.elemFolderFilter.style.left=100;this.elemFolderFilter.style.top=173;this.reInitFilterSet();};FolderPortletEdit.prototype.reInitFilterSet=function(){if(false==this.registerFilterSetInit){this.initFilterSet();this.registerFilterSetInit=true;}}\nFolderPortletEdit.prototype.initFilterSet=function(){if(this.filterStr){var fitlerArray=this.filterStr.split(\";\")\nfor(index in fitlerArray){if(fitlerArray[index]==\"ALL\"){this.setFilterChecked(true);fitlerArray.push(\"\");}else if(fitlerArray[index]==\"DEFAULT_TREENODE\"||fitlerArray[index]==\"SELF_TREENODE\"){this.elemFolder.checked=\"checked\";}else if(fitlerArray[index]==\"SIMPLE_REPORT\"){this.elemReport.checked=\"checked\";}else if(fitlerArray[index]==\"URL\"||fitlerArray[index]==\"BI3OLAP_REPORT\"){this.elemUrl.checked=\"checked\";}else if(fitlerArray[index]==\"Dashboard\"){this.elemDashboard.checked=\"checked\";}else if(fitlerArray[index]==\"DashboardMap\"){this.elemDashboardMap.checked=\"checked\";}else if(fitlerArray[index]==\"FREE_REPORT\"){this.elemFreeReport.checked=\"checked\";}else if(fitlerArray[index]==\"METRIC_REPORT\"){this.elemMetricReport.checked=\"checked\";}else if(fitlerArray[index]==\"OLAP_REPORT\"){this.elemOlapReport.checked=\"checked\";}else if(fitlerArray[index]==\"FILE_RESOURCE\"){this.elemFileResource.checked=\"checked\";}}}else{this.setFilterChecked(true);}}\nFolderPortletEdit.prototype.setFilterChecked=function(checkedValue){this.elemAll.checked=checkedValue;this.elemFolder.checked=checkedValue;this.elemReport.checked=checkedValue;this.elemUrl.checked=checkedValue;this.elemDashboard.checked=checkedValue;this.elemDashboardMap.checked=checkedValue;this.elemFreeReport.checked=checkedValue;this.elemMetricReport.checked=checkedValue;this.elemOlapReport.checked=checkedValue;this.elemFileResource.checked=checkedValue;};FolderPortletEdit.prototype.doOtherFilter=function(ev){if(!ev.target.checked){this.elemAll.checked=false;}else{if(this.elemFolder.checked&&this.elemReport.checked&&this.elemUrl.checked&&this.elemDashboard.checked&&this.elemDashboardMap.checked&&this.elemFreeReport.checked&&this.elemMetricReport.checked&&this.elemOlapReport.checked&&this.elemFileResource.checked){this.elemAll.checked=true;}}\nthis.portletchanged=true;};FolderPortletEdit.prototype.elemAll_click_handler=function(){if(this.elemAll.checked){this.setFilterChecked(true);}else{this.setFilterChecked(false);}\nthis.portletchanged=true;};FolderPortletEdit.prototype.elemFolder_click_handler=function(ev){this.doOtherFilter(ev);}\nFolderPortletEdit.prototype.elemReport_click_handler=function(ev){this.doOtherFilter(ev);}\nFolderPortletEdit.prototype.elemUrl_click_handler=function(ev){this.doOtherFilter(ev);}\nFolderPortletEdit.prototype.elemDashboardMap_click_handler=function(ev){this.doOtherFilter(ev);}\nFolderPortletEdit.prototype.elemDashboard_click_handler=function(ev){this.doOtherFilter(ev);}\nFolderPortletEdit.prototype.elemFreeReport_click_handler=function(ev){this.doOtherFilter(ev);}\nFolderPortletEdit.prototype.elemMetricReport_click_handler=function(ev){this.doOtherFilter(ev);}\nFolderPortletEdit.prototype.elemOlapReport_click_handler=function(ev){this.doOtherFilter(ev);}\nFolderPortletEdit.prototype.elemFileResource_click_handler=function(ev){this.doOtherFilter(ev);}\nFolderPortletEdit.prototype.elemFilterOK_click_handler=function(ev){this.elemFolderFilter.style.display=\"none\";}\nFolderPortletEdit.prototype.render_ipad=FolderPortletEdit.prototype.render;FolderPortletEdit.prototype.render=function(contentString){this.render_ipad(contentString);this.elemIpadFrameDisplayTr.style.display=\"\";};","js/bof/decisionpanel/Portal/Dashlet/Portlet/FreeReportPortletEdit.js":"\n﻿var domutils=jsloader.resolve(\"freequery.lang.domutils\");var BofPortletEdit=jsloader.resolve(\"bof.decisionpanel.Portal.Dashlet.Portlet.BofPortletEdit\");var util=jsloader.resolve(\"freequery.common.util\");var FreeReportPortletEdit=function(parentDiv){FreeReportPortletEdit.superclass.constructor.call(this,parentDiv);if(parentDiv)\nthis.init(parentDiv,__url);};lang.extend(FreeReportPortletEdit,BofPortletEdit);FreeReportPortletEdit.prototype.render=function(contentString){FreeReportPortletEdit.superclass.render.call(this,contentString);this.updatePortletName(this.portletId);};FreeReportPortletEdit.prototype.destroy=function(){try{domutils.destroyNode(this.element);}catch(e){}\nFreeReportPortletEdit.superclass.destroy.call(this);};FreeReportPortletEdit.prototype.resolveCustomContentXml=function(portletXml){var autoHeight=domutils.getNodeAtrributeValueByName(portletXml,\"AUTOHEIGHT\");this.elemAutoHeight.checked=autoHeight&&autoHeight.nodeValue==\"true\";this.elemHeight.disabled=this.elemAutoHeight.checked;this.resolveReportContentXml(portletXml);}\nFreeReportPortletEdit.prototype.elemAutoHeight_click_handler=function(){this.elemHeight.disabled=this.elemAutoHeight.checked;}\nFreeReportPortletEdit.prototype.setCustomInputValue=function(){this.setReportInputValue();}\nFreeReportPortletEdit.prototype.getCustomContentXml=function(portletNode){portletNode=this.getReportContentXML(portletNode);if(this.elemAutoHeight.checked)\nportletNode.setAttribute(\"AutoHeight\",\"true\");return portletNode;}\nFreeReportPortletEdit.prototype.getParams=function(portletId){var result=util.remoteInvoke(\"DPPortalService\",\"getParamCataolgInfoByReportId\",[this.portletId,\"FreeReport\"]);return result;}\nFreeReportPortletEdit.prototype.render_ipad=FreeReportPortletEdit.prototype.render;FreeReportPortletEdit.prototype.render=function(contentString){this.render_ipad(contentString);this.elemIpadFrameDisplayTr.style.display=\"\";};","js/bof/decisionpanel/Portal/Dashlet/Portlet/URLPortlet.js":"\nvar util=jsloader.resolve(\"freequery.common.util\");var domutils=jsloader.resolve(\"freequery.lang.domutils\");var BofPortlet=jsloader.resolve(\"bof.decisionpanel.Portal.Dashlet.Portlet.BofPortlet\");var globalPortletIFrameIndex=0;var URLPortlet=function(parentDiv,contextStr){URLPortlet.superclass.constructor.call(this,parentDiv,contextStr);this.FreamName=\"网页展现\";if(!this.autoLogin)\nthis.autoLogin=false;this.portletIFrameIndex=globalPortletIFrameIndex++;this.div.innerHTML='<table width=\"100%\" height=\"100%\" cellpadding=\"0\" cellspacing=\"0\">'+' <tr valign=\"top\">'+'  <td class=\"_mainTd\" valign=\"top\" align=\"center\">'+'   <iframe name=\"URLLinkIFrame'+(this.portletId||this.portletIFrameIndex)+'\" class=\"_iframe\" frameborder=\"3\" width=\"100%\" height=\"100%\" style=\"border-width:0px;\">'+'   <\/iframe>'+'  <\/td>'+' <\/tr>'+'<\/table>';this.frame=domutils.findElementByClassName([this.div],\"_iframe\");this.mainTd=domutils.findElementByClassName([this.div],\"_mainTd\");};lang.extend(URLPortlet,BofPortlet);URLPortlet.prototype.destroy=function(){try{domutils.destroyNode(this.div)}catch(e){};if(this.frame&&null!=this.frame){this.frame.src=\"\";delete this.frame;}\nURLPortlet.superclass.destroy.call(this);};URLPortlet.prototype.render=function(){URLPortlet.superclass.render.call(this);this.isInnerPage=false;if(this.portletId.indexOf(\"http\")==0){this.frame.src=this.portletId;return;}\nvar isInnerPage=false;if(this.dashlet.isInnerPage){var ret=util.remoteInvoke(\"CatalogService\",\"getResourceNodeById\",[this.portletId]);if(ret&&ret.succeeded&&ret.result){if(ret.result.type==\"PAGE\")\nisInnerPage=true;}else{modalWindow.showServerError(ret);return;}}else{var ret=util.remoteInvoke(\"UrlLinkService\",\"getURLLink\",[this.portletId]);if(ret&&ret.succeeded&&ret.result){this.url=ret.result.url;this.title=ret.result.alias||ret.result.name;this.setTitle(this.title);}else{this.mainTd.innerText=ret.detail;}}\nif(this.isReplace()&&isInnerPage){this.isInnerPage=true;this.getDashlet().setHeight(\"100%\");this.getDashlet().setStyle();this.div.style.height=\"100%\";var showBorder=registry.get(\"dashletOptions\")?registry.get(\"dashletOptions\").skinDisplay:\"null\";this.url=jsloader.baseHref\n+\"openresource.jsp\"\n+\"?resid=\"+this.portletId\n+\"&nested=true\"\n+\"&showPath=false\"\n+\"&showBorderValue=\"+showBorder;var ret=util.remoteInvoke(\"CatalogService\",\"getResourceNodeById\",[this.portletId]);if(ret&&ret.succeeded&&ret.result)\nthis.setTitle(ret.result.alias);}\nvar macroParams=this.getMacroParams();if(this.autoLogin&&this.autoLogin==true){this.initAutoLoginForm(\"commonUrl\");this.user.value=registry.get(\"User\");this.password.value=registry.get(\"Password\");this.autoLoginForm.action=this.url;this.autoLoginForm.target=this.frame.name;this.netPageSubmit();}else if((this.isReplace()&&isInnerPage)||(macroParams&&macroParams.length>0)){this.initAutoLoginForm(\"showPageUrl\");this.user.value=registry.get(\"User\");this.password.value=registry.get(\"Password\");if(macroParams&&macroParams.length>0){this.paramInput.value=lang.toJSONString(macroParams);this.getPageObj().addPortletToPublic(macroParams,this.portletId,this);for(var indx in macroParams){this.setPublicParamPanelValue(macroParams[indx]);}}\nthis.publicParamsInput.value=lang.toJSONString(this.createNewParam());this.autoLoginForm.action=this.url;this.autoLoginForm.target=this.frame.name;this.autoLoginForm.submit();}else{if(this.url)\nthis.frame.src=this.url;else\nreturn;}};URLPortlet.prototype.hiddenParam=function(){};URLPortlet.prototype.isPublicParam=function(paramId,reportId){if(!reportId)\nreportId=this.portletId;var isPublic=false;var pageParamConfig=this.getPublicParamsConfig();if(paramId.split(\".\").length>2){paramId=paramId.split(\".\")[2];}\nfor(var ppcIndx in pageParamConfig){var config=pageParamConfig[ppcIndx];if(config.type==\"PARAM\"&&config.dashletId==reportId&&config.public2&&config.name==paramId){isPublic=true;break;}}\nreturn isPublic;}\nURLPortlet.prototype.setPublicParamPanelValue=function(param){var isPublic=this.isPublicParam(param.id||param.name,this.portletId);if(isPublic){var publicParams=this.portalObj.params;for(indx in publicParams){var publicParam=publicParams[indx];if(param.name==publicParam.name&&(\"PARAM\"==param.type||param.type==publicParam.type)){if(param.value&&(param.value!=publicParam.value||null!=this.portalObj.InteractParamList)){this.setPublicParamValueById(publicParam.id,param.value,param.displayValue);this.doPublicParamChange(publicParam,param.value,param.displayValue);}\nbreak;}}}}\nURLPortlet.prototype.resolveCustomContentXml=function(portletXml){try{var autoLogin=domutils.getNodeAtrributeValueByName(portletXml,\"AUTOLOGIN\").nodeValue;this.autoLogin=autoLogin==\"false\"?false:true}catch(e){this.autoLogin=false;}}\nURLPortlet.prototype.netPageSubmit=function(user,password){if((this.autoLogin&&this.autoLogin==true)||(this.getMacroParams()&&this.getMacroParams().length>0)){this.autoLoginForm.submit();}}\nURLPortlet.prototype.initAutoLoginForm=function(type){if(!this.autoLoginSpan){this.autoLoginSpan=document.createElement(\"SPAN\");this.autoLoginSpan.style.display=\"\";this.mainTd.appendChild(this.autoLoginSpan);var form=document.createElement(\"FORM\");form.method=\"POST\";this.autoLoginForm=form;this.autoLoginSpan.appendChild(form);if(type==\"commonUrl\"){this.user=document.createElement(\"INPUT\");this.user.type=\"hidden\";this.user.name=\"user\";form.appendChild(this.user);this.password=document.createElement(\"INPUT\");this.password.type=\"hidden\";this.password.name=\"password\";form.appendChild(this.password);this.isNewWindow=document.createElement(\"INPUT\");this.isNewWindow.type=\"hidden\";this.isNewWindow.name=\"isNewWindow\";form.appendChild(this.isNewWindow);}else{this.user=document.createElement(\"INPUT\");this.user.type=\"hidden\";this.user.name=\"user\";form.appendChild(this.user);this.password=document.createElement(\"INPUT\");this.password.type=\"hidden\";this.password.name=\"password\";form.appendChild(this.password);this.paramInput=document.createElement(\"INPUT\");this.paramInput.type=\"hidden\";this.paramInput.name=\"params\";form.appendChild(this.paramInput);this.publicParamsInput=document.createElement(\"INPUT\");this.publicParamsInput.type=\"hidden\";this.publicParamsInput.name=\"paramsInfo\";form.appendChild(this.publicParamsInput);}}}\nURLPortlet.prototype.hide=function(){URLPortlet.superclass.hide.call(this);};URLPortlet.prototype.getPortletObject=function(){if(this.isInnerPage){try{if(this.frame&&this.frame.contentWindow&&this.frame.contentWindow.page){return this.frame.contentWindow.page;}else if(this.frame&&this.frame.contentWindow){var rightFrame=this.frame.contentWindow.document.getElementById(\"rightFrame\");if(rightFrame){return rightFrame.contentWindow.page;}}}catch(e){}}\nreturn null;}\nURLPortlet.prototype.getParamPanelObj=function(){if(this.getPortletObject())\nreturn this.getPortletObject().paramPanel;}\nURLPortlet.prototype.refresh=function(){if(this.getPortletObject())\nthis.getPortletObject().refreshData();}\nURLPortlet.prototype.refreshSize=function(){if(this.getPortletObject())\nthis.getPortletObject().refreshSize();}\nURLPortlet.prototype.refreshInnerPage=function(){var macroParams=this.getMacroParams();if(macroParams&&macroParams.length>0){var params=this.getParams();for(idx1 in params){for(idx2 in macroParams){if(params[idx1].name==macroParams[idx2].name){if(util.isOLAPParam(params[idx1])){macroParams[idx2].value=params[idx1].currentValue;macroParams[idx2].displayValue=params[idx1].currentDisplayValue;}else{macroParams[idx2].value=params[idx1].value;macroParams[idx2].displayValue=params[idx1].displayValue;}}}}\nthis.paramInput.value=lang.toJSONString(macroParams);this.publicParamsInput.value=lang.toJSONString(this.createNewParam());}\nif(this.isReplace()&&this.autoLoginForm){this.autoLoginForm.submit();}}\nURLPortlet.prototype.commitParamValue=function(){if(!this.getParams()||!this.getPortletObject()||!this.getParamPanelObj())\nreturn;var page=this.getPortletObject();var paramPanelObj=this.getParamPanelObj();if(this.params.length>0){paramPanelObj.setAutoCommit(false);for(indx in this.params){var param=this.params[indx];if(!this.changeParams[param.id])\ncontinue;if(util.isOLAPParam(param))\npage.setParamValueToPortlet(param.id,param.currentValue,param.currentDisplayValue);else\npage.setParamValueToPortlet(param.id,param.value,param.displayValue);this.changeParams[param.id]=false;}\nparamPanelObj.commit();paramPanelObj.setAutoCommit(true);}\npage.commitParamValue();}\nURLPortlet.prototype.getPortletType=function(){return\"URL\";}\nURLPortlet.prototype.createNewParam=function(){var params=this.getPublicParams();if(!params)\nreturn\"\";var pList=new Array();for(indx in params){var param=new Object();param.id=params[indx].id;param.name=params[indx].name;param.alias=params[indx].alias;pList.push(param);}\nreturn pList;}\nURLPortlet.prototype.getMacroParams=function(){if(this.getDashlet())\nreturn this.getDashlet().getMacroParams();}\nURLPortlet.prototype.maximizeWindow=function(){if(!this.divTempHeight){this.divTempHeight=this.div.style.height;this.div.style.height=\"100%\";}\nthis.refreshSize();}\nURLPortlet.prototype.minimizeWindow=function(){}\nURLPortlet.prototype.restoreWindow=function(){if(this.divTempHeight){this.div.style.height=this.divTempHeight;this.divTempHeight=null;}\nthis.refreshSize();}\nURLPortlet.prototype.render_pc=URLPortlet.prototype.render;URLPortlet.prototype.render=function(){if(domutils.isIOS()){this.div.height=this.div.clientHeight-30;this.div.style.height=this.div.clientHeight-30;}\nthis.render_pc();}","js/bof/decisionpanel/Portal/Dashlet/Portlet/URLPortletEdit.js":"\n﻿var domutils=jsloader.resolve(\"freequery.lang.domutils\");var BofPortletEdit=jsloader.resolve(\"bof.decisionpanel.Portal.Dashlet.Portlet.BofPortletEdit\");var URLPortletEdit=function(parentDiv){URLPortletEdit.superclass.constructor.call(this,parentDiv);if(parentDiv)\nthis.init(parentDiv,__url);};lang.extend(URLPortletEdit,BofPortletEdit);URLPortletEdit.prototype.render=function(contentString){URLPortletEdit.superclass.render.call(this,contentString);this.updatePortletName(this.portletId);};URLPortletEdit.prototype.destroy=function(){delete this.autoLoginValue;delete this.offlineHandler;try{domutils.destroyNode(this.element);}catch(e){}\nURLPortletEdit.superclass.destroy.call(this);};URLPortletEdit.prototype.resolveCustomContentXml=function(portletXml){this.autoLoginValue=domutils.getNodeAtrributeValueByName(portletXml,\"AUTOLOGIN\").nodeValue;var n=domutils.getNodeAtrributeValueByName(portletXml,\"OFFLINEHANDLER\");if(n)\nthis.offlineHandler=n.nodeValue;}\nURLPortletEdit.prototype.setCustomInputValue=function(){if(this.autoLoginValue&&this.autoLoginValue==\"true\")\nthis.elemAutoLogin.checked=true;if(this.offlineHandler)\nthis.elemOfflineHandler.value=this.offlineHandler;}\nURLPortletEdit.prototype.getCustomContentXml=function(portletNode){if(this.elemAutoLogin.checked)\nportletNode.setAttribute(\"autologin\",\"true\");else\nportletNode.setAttribute(\"autologin\",\"false\");portletNode.setAttribute(\"offlineHandler\",this.elemOfflineHandler.value);return portletNode;}\nURLPortletEdit.prototype.getParams=function(){return new Array();}\nURLPortletEdit.prototype.render_ipad=URLPortletEdit.prototype.render;URLPortletEdit.prototype.render=function(contentString){this.render_ipad(contentString);this.elemIpadFrameDisplayTr.style.display=\"\";};","js/bof/decisionpanel/Portal/Dashlet/Portlet/OlapReportPortlet.js":"\nvar util=jsloader.resolve(\"freequery.common.util\");var modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var domutils=jsloader.resolve(\"freequery.lang.domutils\");var BofPortlet=jsloader.resolve(\"bof.decisionpanel.Portal.Dashlet.Portlet.BofPortlet\");var OlapQueryCommand=null;var PopupMenu=null;var MacroService=null;var OlapReportPortlet=function(parentDiv,contextStr){OlapReportPortlet.superclass.constructor.call(this,parentDiv,contextStr);this.searchBannerDiv=document.createElement(\"div\");this.searchBannerDiv.innerHTML=\"<div bofid='SearchBannerTr' \"\n+\"id='SearchBannerTr' class='SearchBannerTr'  style ='height:0%;display:none'>\"\n+\"<span bofid='SearchBanner' id='SearchBanner' class='SearchBanner'><\/span>\"\n+\"<\/div>\";this.searchBannerDiv.style.height=\"0%\";this.searchBannerDiv.style.display=\"none\";parentDiv.appendChild(this.searchBannerDiv);this.onHeightChanged=new CustomEvent(\"onHeightChanged\",this);this.onOpenOlapQueryView=new CustomEvent(\"onOpenOlapQueryView\",this);var autoHeight=this.portletXml?domutils.getNodeAtrributeValueByName(this.portletXml,\"AUTOHEIGHT\"):null;this.autoHeight=autoHeight&&autoHeight.nodeValue==\"true\";};lang.extend(OlapReportPortlet,BofPortlet);OlapReportPortlet.prototype.render=function(){OlapReportPortlet.superclass.render.call(this);if(!util.hasLicense(\"Analysis\")){return;}\nif(!OlapQueryCommand){try{OlapQueryCommand=jsloader.resolve(\"bof.olapquery.OlapQueryCommand\");}catch(e){alert(\"找不到bof.olapquery.OlapQueryCommand！没有包含多维分析组件\"+\"，多维分析报表将无法显示。\");return;}}\nvar queryCmd=new OlapQueryCommand();queryCmd.commandFactoryName=\"QueryBrowserCommandFactory\";queryCmd.isBrowseModule=true;queryCmd.parent=this.div;var node=new Object();node._id=this.portletId;node._type=\"OLAP_REPORT\";node._isInPage_=true;queryCmd.execute(\"VIEWNOTREFRESH\",node);this.queryCmd=queryCmd;var query=queryCmd.olapQueryView;if(!query)\nreturn;if(query.error){this.div.innerHTML=\"<font color='red'> 您对该资源没有引用权限或该资源已经被删除<\/font>\";return;}\nif(query.onBeforeClickOlapTable){query.onBeforeClickOlapTable.subscribe(this.doOnBeforeClickOlapTable,this);}\nquery.onClickOlapTable.subscribe(this.doOnClickOlapTable,this);if(query.onAfterClickOlapTable){query.onAfterClickOlapTable.subscribe(this.doOnAfterClickOlapTable,this);}\nquery.onAfterRefrshTable.subscribe(this.doOnAfterRefrshTable,this);query.onDoCmd.subscribe(this.doCmd,this);query.afterRefresh.subscribe(this.doAfterRefresh,this);query.onOpenOlapQueryView.subscribe(this.doOpenOlapQueryView,this);query.setPortalObject(this.portalObj);query.setShowShotCut(!this.isHideShortTollBar);query.setTableRightClickEnable(this.rightmenu);query.titleArea.style.display=\"none\";this.isMaxFirstChart=false;this.runMacro(query,null,\"onRender\");};OlapReportPortlet.prototype.doOpenOlapQueryView=function(query){var query=this.queryCmd.olapQueryView;if(!query)\nreturn;this.addChartSubscribe(query.chartTool);this.hiddenParam();this.setParamsInfo();query.setFrameBorder(false);try{if(!MacroService)\nMacroService=imports(\"bof.macro.services.MacroService\").getInstance();MacroService.addAssociatedModule(query.clientId,this.portalObj.pageId);}catch(ex){;}\nif(this.ishidetoolbar){query.toolbar.showToolBar(false);if(!this.isHideShortTollBar){query.toolbar.domAgent.getElementByBofid(\"olapViewShotCut\").style.display=\"\";}}else{query.toolbar.domAgent.getElementByBofid(\"saveAsOlapQuery\").parentNode.style.display=\"NONE\";}\nif(!this.isMaxFirstChart){if(this.maxfirstchart==\"forever\"){var query=this.getPortletObject();if(query){query.maxFirstChart();}}\nthis.isMaxFirstChart=true;}\nif(this.autorefresh&&!this.isReplace()){query.refreshData();}else if(this.autorefreshValue==\"delay\"){var time=this.delayTime?this.delayTime*1000:100;setTimeout(function(){query.refreshData();},time)}\nif(this.autoHeight){query.onAfterRefrshTable.subscribe(this.doOnQueryViewResize,this);}\nif(this.isReplace()){this.setTitle(query.reportAlias);this.getDashlet().setTitle(query.reportAlias);}\nthis.onOpenOlapQueryView.fire(this);}\nOlapReportPortlet.prototype.doOnQueryViewResize=function(){var query=this.queryCmd.olapQueryView;var scrollDiv=query.domAgent.getElementByBofid(\"scrollDiv\");if(domutils.isFirefox())\nscrollDiv=scrollDiv.parentNode;var delta=scrollDiv.scrollHeight-scrollDiv.clientHeight;if(delta<-10||delta>=0)\nthis.onHeightChanged.fire(delta+5);}\nOlapReportPortlet.prototype.resizeFirstChart=function(isMax){if(this.getPortletObject()){if((isMax&&this.maxfirstchart==\"justMax\")||this.maxfirstchart==\"forever\"){this.getPortletObject().maxFirstChart();}else if(this.maxfirstchart==\"justMax\"){this.getPortletObject().resizeFirstChart();}}}\nOlapReportPortlet.prototype.renderShow=function(pageContext){OlapReportPortlet.superclass.renderShow.call(this,pageContext);this.resizeFirstChart(true);}\nOlapReportPortlet.prototype.resolveCustomContentXml=function(portletXml){this.resolveReportContentXml(portletXml);try{var rightmenu=domutils.getNodeAtrributeValueByName(portletXml,\"RIGHTMENU\").nodeValue;this.rightmenu=rightmenu==\"true\"?true:false;}catch(e){this.rightmenu=true;}\ntry{this.maxfirstchart=domutils.getNodeAtrributeValueByName(portletXml,\"MAXFIRSTCHART\").nodeValue;}catch(e){this.maxfirstchart=\"no\";}}\nOlapReportPortlet.prototype.destroy=function(){var portlet=this;this.popupMenu=null;var query=this.getPortletObject();if(query){try{if(!MacroService)\nMacroService=imports(\"bof.macro.services.MacroService\").getInstance();if(this.getPortletObject().clientId){MacroService.removeAssociatedModule(this.getPortletObject().clientId);}}catch(ex){;}\nif(query.onBeforeClickOlapTable){query.onBeforeClickOlapTable.unsubscribe(this.doOnBeforeClickOlapTable,this);}\nquery.onClickOlapTable.unsubscribe(this.doOnClickOlapTable,this);if(query.onAfterClickOlapTable){query.onAfterClickOlapTable.unsubscribe(this.doOnAfterClickOlapTable,this);}\nquery.onAfterRefrshTable.unsubscribe(this.doOnAfterRefrshTable,this);query.onDoCmd.unsubscribe(this.doCmd,this);query.afterRefresh.unsubscribe(this.doAfterRefresh,this);query.destroy();}\nsetTimeout(function(){if(portlet.queryCmd){portlet.queryCmd.close();portlet.queryCmd.destroy();}},10);if(this.editPortlet)\nthis.editPortlet.destroy();try{domutils.destroyNode(this.div)}catch(e){};delete this.div;try{domutils.destroyNode(this.searchBannerDiv)}catch(e){};delete this.searchBannerDiv;if(this.portalObj){delete this.portalObj;}\nthis.afterRefresh=null;OlapReportPortlet.superclass.destroy.call(this);};OlapReportPortlet.prototype.onParamChange=function(paramPanel,param,value,alias,relateParam){if(this.isSetParamValuesByPublicParams){var isPublic=this.isPublicParam(param.id,this.portletId);return;}\nvar paramList=this.getReportParams();for(indx in paramList){var portletParam=paramList[indx];if(portletParam.id==param.id||(portletParam.id.indexOf(\"OutputParameter.\")!=-1&&param.name==portletParam.name)){if(relateParam!=\"RELATEPARAM\")\nthis.getPortletObject().setParamValue(portletParam.id,value,alias,true);if(this.getPortletObject().autoRefresh&&relateParam!=\"RELATEPARAM\")\nvar hasRefresh=this.refresh(false);break;}}\nif(this.params){for(var i=0;i<this.params.length;i++){if(this.params[i].id==param.id||(this.params[i].id.indexOf(\"OutputParameter.\")!=-1&&param.name==this.params[i].name)){if(this.params[i].paramType==\"OLAP\"){this.params[i].currentValue=value;this.params[i].currentDisplayValue=alias;}else{this.params[i].value=value;this.params[i].displayValue=alias;}}}}}\nOlapReportPortlet.prototype.getPortletObject=function(){if(this.queryCmd)\nreturn this.queryCmd.olapQueryView;}\nOlapReportPortlet.prototype.doAfterRefresh=function(){for(indx in this.getPortletObject().params){var param=this.getPortletObject().params[indx];if(param.paramType==\"OLAP\"){this.portalObj.setParamValue(param.id,param.currentValue,param.currentDisplayValue);}else{this.portalObj.setParamValue(param.id,param.value,param.displayValue);}}};OlapReportPortlet.prototype.hiddenParam=function(){if(!this.getPortletObject()||!this.getPublicParamsConfig())\nreturn;var query=this.getPortletObject();var paramsInfo=this.getPublicParamsConfig();for(var i=0;i<paramsInfo.length;i++){var param=paramsInfo[i];if(param.type==\"PARAM\"&&param.dashletId==this.portletId){query.hiddenParameterByName(param.name);}}};OlapReportPortlet.prototype.checkLoadComplete=function(flag){if(!this.isLoadComplete()){var obj=this;window.setTimeout(function(){obj.checkLoadComplete(flag);},2000);return false;}\nthis.refresh(flag);}\nOlapReportPortlet.prototype.isLoadComplete=function(){if(!this.getPortletObject())\nreturn false;if(typeof this.getPortletObject().clientId==\"undefined\")\nreturn false;return true;}\nOlapReportPortlet.prototype.refresh=function(flag){if(!this.isLoadComplete()){this.checkLoadComplete(flag);return;}\nif(this.getPortletObject())\nthis.getPortletObject().refreshData(flag);}\nOlapReportPortlet.prototype.doOnClickOlapTable=function(currentCell,queryView,e,popupMenu){if(!this.handler.resourceType)\nthis.handler.resourceType=this.getResourceType();this.handler.currentCell=currentCell;if(!this.handler.page)\nthis.handler.page=this.portalObj;if(!this.handler.srcReport)\nthis.handler.srcReport=queryView;this.popupMenu=popupMenu?popupMenu:queryView.popupMenu;this.handler.menuItems=new Array();try{if(!MacroService)\nMacroService=imports(\"bof.macro.services.MacroService\").getInstance();}catch(ex){;}\nMacroService.fire(this,this.getPortletObject().getResourceId(),\"onInitPopupMenu\",[this,currentCell]);}\nOlapReportPortlet.prototype.doOnAfterClickOlapTable=function(that){}\nOlapReportPortlet.prototype.doOnBeforeClickOlapTable=function(that){}\nOlapReportPortlet.prototype.doCmd=function(cmd){if(!cmd){this.doAutoCmd();}else\nthis.handler.doCmd(cmd);}\nOlapReportPortlet.prototype.doOnAfterRefrshTable=function(queryView){this.hiddenParam();try{if(!MacroService)\nMacroService=imports(\"bof.macro.services.MacroService\").getInstance();}catch(ex){;}\nif(!this.isMaxFirstChart){if(this.maxfirstchart==\"forever\"){var query=this.getPortletObject();if(query){query.maxFirstChart();}}\nthis.isMaxFirstChart=true;}\nMacroService.fire(this,this.getPortletObject().getResourceId(),\"afterRefreshTable\",[queryView]);}\nOlapReportPortlet.prototype.getPortletType=function(){return\"OlapReport\";}\nOlapReportPortlet.prototype.setParamValueByName=function(pName,pValue,pDisplayValue){for(indx in this.params){var param=this.params[indx];if(pName==param.name&&param.value!=pValue){param.currentValue=pValue;param.currentDisplayValue=pDisplayValue;break;}}}\nOlapReportPortlet.prototype.fillParamValue=function(pName,pValue,pDisplayValue){for(indx in this.params){var param=this.params[indx];if(pName==param.name){if(param.paramType==\"OLAP\"&&param.currentValue!=pValue){param.currentValue=pValue;param.currentDisplayValue=pDisplayValue;this.changeParams[param.id]=true;this.setPublicParamPanelValue(param,true);}else if(param.value!=pValue){param.value=pValue;param.displayValue=pDisplayValue;this.changeParams[param.id]=true;this.setPublicParamPanelValue(param,true);}\nbreak;}}}\nOlapReportPortlet.prototype.setPublicParamPanelValue=function(param,doChangeFlag){var isPublic=this.isPublicParam(param.id,this.portletId);if(isPublic){var publicParams=this.portalObj.params;for(indx in publicParams){var publicParam=publicParams[indx];if(param.name==publicParam.name&&param.type==publicParam.type){if(param.currentValue!=publicParam.currentValue||null!=this.getURLParamValues()){this.setPublicParamValueById(publicParam.id,param.currentValue,param.currentDisplayValue);if(doChangeFlag){}else{this.doPublicParamChange(publicParam,param.currentValue,param.currentDisplayValue);}}\nbreak;}}}}\nOlapReportPortlet.prototype.setParamsValue=function(params){if(!params||!this.getPortletObject()||!this.getParamPanelObj())\nreturn;var report=this.getPortletObject();var paramPanelObj=this.getParamPanelObj();paramPanelObj.setAutoCommit(false);for(indx in params){var param=params[indx];if(param.paramType==\"OLAP\")\nreport.setParamValue(param.id,param.currentValue,param.currentDisplayValue,true);else\nreport.setParamValue(param.id,param.value,param.displayValue,true);this.changeParams[param.id]=false;}\nparamPanelObj.commit();paramPanelObj.setAutoCommit(true);}\nOlapReportPortlet.prototype.commitParamValue=function(){var report=this.getPortletObject();var paramPanelObj=this.getParamPanelObj();if(!report||!this.params||!paramPanelObj)\nreturn;if(this.params.length>0){paramPanelObj.setAutoCommit(false);for(indx in this.params){var param=this.params[indx];if(param.paramType==\"OLAP\")\nreport.setParamValue(param.id,param.currentValue,param.currentDisplayValue,true);else\nreport.setParamValue(param.id,param.value,param.displayValue,true);}\nparamPanelObj.commit();paramPanelObj.setAutoCommit(true);}}\nOlapReportPortlet.prototype.setParamValuesByPublicParams=function(){this.isSetParamValuesByPublicParams=true;var reportParamList=this.params;var paramPanelObj=this.getPageObj().paramPanel;if(paramPanelObj)\nparamPanelObj.setAutoCommit(false);var publicParams=this.getPublicParams();for(indx in publicParams){var publicParam=publicParams[indx];if(!publicParam.hasSetValue){for(reportIndx in reportParamList){var portletParam=reportParamList[reportIndx];if(portletParam.name==publicParam.name){var isPublic=this.isPublicParam(portletParam.id,this.portletId);if(isPublic){if(portletParam.currentValue)\nthis.setPublicParamValueById(publicParam.id,portletParam.currentValue,portletParam.currentDisplayValue);else if(portletParam.value)\nthis.setPublicParamValueById(publicParam.id,portletParam.value,portletParam.displayValue);}\nbreak;}}}\nelse{for(reportIndx in reportParamList){var portletParam=reportParamList[reportIndx];if(portletParam.name==publicParam.name&&portletParam.type==publicParam.type&&portletParam.currentValue!=publicParam.currentValue){var isPublic=this.isPublicParam(portletParam.id,this.portletId);if(isPublic){portletParam.currentValue=publicParam.currentValue;portletParam.currentDisplayValue=publicParam.currentDisplayValue;}\nbreak;}}}}\nif(paramPanelObj){paramPanelObj.commit();paramPanelObj.setAutoCommit(true);}\nthis.isSetParamValuesByPublicParams=false;}\nOlapReportPortlet.prototype.maximizeWindow=function(){if(this.autoHeight){this.doOnQueryViewResize();}\nthis.resizeFirstChart(true);}\nOlapReportPortlet.prototype.minimizeWindow=function(){}\nOlapReportPortlet.prototype.restoreWindow=function(){this.resizeFirstChart(false);if(this.autoHeight){this.doOnQueryViewResize();}}\nOlapReportPortlet.prototype.getExportBean=function(){var portletBean=new Object();portletBean.portletId=this.portletId;portletBean.type=this.getPortletType().toUpperCase();var query=this.getPortletObject();portletBean.clientId=query.clientId;portletBean.headerHtml=query.elemReportHeader.innerHTML||\"\";portletBean.tailHtml=query.elemReportTail.innerHTML||\"\";portletBean.headerText=query.elemReportHeader.innerText||\"\";portletBean.tailText=query.elemReportTail.innerText||\"\";portletBean.hiddenParamIdList=this.hiddenParamIdList;var extraConfigObj={\"dashboard\":{},\"simpleReport\":{},\"olapReport\":{},\"freeReport\":{},\"metricReport\":{}};extraConfigObj.olapReport['maxFirstChart']=this.maxfirstchart||\"\";portletBean.extraConfig=lang.toJSONString(extraConfigObj);return portletBean;}\nOlapReportPortlet.prototype.setBtnStatus=function(){this.getDashlet().setButtonLocateReportDisplay(\"\");this.getDashlet().setButtonExportDisplay(\"\");}\nOlapReportPortlet.prototype.initSelfExportMenu=function(){if(this.exportMenu){this.exportMenu.insertItem(\"CSV\",\"CSV\");this.exportMenu.insertItem(\"TXT\",\"TXT\");this.exportMenu.insertItem(\"MHT\",\"HTML\");}}\nOlapReportPortlet.prototype.runMacro=function(query,queryContext,actionName,param){try{if(!MacroService)\nMacroService=imports(\"bof.macro.services.MacroService\").getInstance();}catch(ex){;}\nif(actionName&&actionName==\"onRender\"){MacroService.fire(this,this.getPortletObject().getResourceId(),\"onRender\",[query]);}}\nOlapReportPortlet.prototype.doOnAfterClickOlapTable=function(that){if(domutils.isIOS()){this.getPageObj().afterClick();}}\nOlapReportPortlet.prototype.doOnBeforeClickOlapTable=function(that){if(domutils.isIOS()){this.getPageObj().beforeClick();}}\nOlapReportPortlet.prototype.__chartClick=OlapReportPortlet.prototype.chartClick;OlapReportPortlet.prototype.chartClick=function(e,chart,eventType,clieckInfo){this.__chartClick(e,chart,eventType,clieckInfo);}\nOlapReportPortlet.prototype.initSelfExportMenu_ex2007=OlapReportPortlet.prototype.initSelfExportMenu;OlapReportPortlet.prototype.initSelfExportMenu=function(){this.initSelfExportMenu_ex2007();if(this.exportMenu){this.exportMenu.insertItem(\"EXCEL2007\",\"EXCEL\");}}","js/bof/decisionpanel/Portal/Dashlet/Portlet/OlapReportPortletEdit.js":"\n﻿var domutils=jsloader.resolve(\"freequery.lang.domutils\");var BofPortletEdit=jsloader.resolve(\"bof.decisionpanel.Portal.Dashlet.Portlet.BofPortletEdit\");var util=jsloader.resolve(\"freequery.common.util\");var OlapReportPortletEdit=function(parentDiv){OlapReportPortletEdit.superclass.constructor.call(this,parentDiv);if(parentDiv)\nthis.init(parentDiv,__url);};lang.extend(OlapReportPortletEdit,BofPortletEdit);OlapReportPortletEdit.prototype.render=function(contentString){OlapReportPortletEdit.superclass.render.call(this,contentString);this.updatePortletName(this.portletId);};OlapReportPortletEdit.prototype.destroy=function(){try{domutils.destroyNode(this.element);}catch(e){}\ndelete this.rightmenu;delete this.maxfirstchart;delete this.uniqueRightMenuSelectName;delete this.uniqueMaxFirstChartSelectName;OlapReportPortletEdit.superclass.destroy.call(this);};OlapReportPortletEdit.prototype.resolveCustomContentXml=function(portletXml){var autoHeight=domutils.getNodeAtrributeValueByName(portletXml,\"AUTOHEIGHT\");this.elemAutoHeight.checked=autoHeight&&autoHeight.nodeValue==\"true\";this.elemHeight.disabled=this.elemAutoHeight.checked;this.resolveReportContentXml(portletXml);try{this.rightmenu=domutils.getNodeAtrributeValueByName(portletXml,\"RIGHTMENU\").nodeValue;}catch(e){this.rightmenu=\"true\";}\ntry{this.maxfirstchart=domutils.getNodeAtrributeValueByName(portletXml,\"MAXFIRSTCHART\").nodeValue;}catch(e){this.maxfirstchart=\"no\";}}\nOlapReportPortletEdit.prototype.elemAutoHeight_click_handler=function(){this.elemHeight.disabled=this.elemAutoHeight.checked;}\nOlapReportPortletEdit.prototype.setCustomInputValue=function(){this.setReportInputValue();this.uniqueRightMenuSelectName=this.updateRaidoName(this.portletId,\"_rightMenuSelect\");this.uniqueMaxFirstChartSelectName=this.updateRaidoName(this.portletId,\"_maxFirstChartSelect\");this.setRadioChecked(this.uniqueRightMenuSelectName,this.rightmenu,\"true\");this.setRadioChecked(this.uniqueMaxFirstChartSelectName,this.maxfirstchart,\"no\");}\nOlapReportPortletEdit.prototype.getCustomContentXml=function(portletNode){portletNode=this.getReportContentXML(portletNode);portletNode.setAttribute(\"rightmenu\",(this.getRadioCheckedValue(this.uniqueRightMenuSelectName)));portletNode.setAttribute(\"maxfirstchart\",(this.getRadioCheckedValue(this.uniqueMaxFirstChartSelectName)));if(this.elemAutoHeight.checked)\nportletNode.setAttribute(\"AutoHeight\",\"true\");return portletNode;}\nOlapReportPortletEdit.prototype.getParams=function(){var result=util.remoteInvoke(\"DPPortalService\",\"getParamCataolgInfoByReportId\",[this.portletId,\"OlapReport\"]);return result;}\nOlapReportPortletEdit.prototype.render_ipad=OlapReportPortletEdit.prototype.render;OlapReportPortletEdit.prototype.render=function(contentString){this.render_ipad(contentString);this.elemIpadFrameDisplayTr.style.display=\"\";};","js/bof/decisionpanel/Portal/Dashlet/Portlet/Portlet.js":"\n﻿var Module=jsloader.resolve(\"freequery.widget.Module2\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var MacroMenuCommand=null;var Portlet=function(parentDiv,contentString){Portlet.superclass.constructor.call(this);this.parentDiv=parentDiv;this.height=\"300px\";this.width=\"100%\";this.contentString=contentString;if(window.__Portlet_is_hybrid){this.div=this.parentDiv.firstChild;}\nif(!this.div){this.div=document.createElement(\"div\");this.div.style.height=\"100%\";this.div.className=\"portletDiv\";}\nthis.onClick=new CustomEvent(\"click\",this);};lang.extend(Portlet,Module);Portlet.prototype.render=function(){}\nPortlet.prototype.destroy=function(){delete this.parentDiv;delete this.params;Portlet.superclass.destroy.call(this);};Portlet.prototype.refresh=function(){}\nPortlet.prototype.getParams=function(){}\nPortlet.prototype.setParamsValue=function(params){}\nPortlet.prototype.setParamValueByName=function(pName,pValue,pDisplayValue){}\nPortlet.prototype.maximizeWindow=function(){}\nPortlet.prototype.minimizeWindow=function(){}\nPortlet.prototype.restoreWindow=function(){}\nPortlet.prototype.onSize=function(){}\nPortlet.prototype.getPortletType=function(){}\nPortlet.prototype.onParamChange=function(paramPanel,param,pValue,pDisplayValue){}\nPortlet.prototype.getExportBean=function(){}\nPortlet.prototype.setTitle=function(title){this.title=title;}\nPortlet.prototype.setDashlet=function(dashlet){this.dashlet=dashlet;}\nPortlet.prototype.getDashlet=function(){return this.dashlet;}\nPortlet.prototype.setPageObj=function(pageObj){this.portalObj=pageObj;}\nPortlet.prototype.getPageObj=function(){return this.portalObj;}\nPortlet.prototype.setPortletDivHeight=function(height){this.div.style.height=height;}\nPortlet.prototype.getPublicParams=function(){if(this.portalObj)\nreturn this.portalObj.params;}\nPortlet.prototype.getPublicParamsConfig=function(){if(this.portalObj)\nreturn this.portalObj.paramBean;}\nPortlet.prototype.getURLParamValues=function(){if(this.portalObj)\nreturn this.portalObj.InteractParamList;}\nPortlet.prototype.setPublicParamValueById=function(pid,pValue,pDisplayValue){if(this.portalObj){this.portalObj.setParamValue(pid,pValue,pDisplayValue);paramPanelObj=this.portalObj.paramPanel;var pTag=paramPanelObj.getParamTagByParamId(pid);paramPanelObj.setParamCtrlValue(pTag,pValue,pDisplayValue);}}\nPortlet.prototype.doPublicParamChange=function(param,pValue,pDisplayValue){var portalObj=this.getPageObj();if(portalObj)\nportalObj.doParamChange(portalObj.paramPanel,param,null,pValue,null,pDisplayValue);}\nPortlet.prototype.renderShow=function(pageContext){if(this.rendered)\nreturn;if(!window.__Portlet_is_hybrid){this.parentDiv.appendChild(this.div);}else if(pageContext.isReplace){this.parentDiv.appendChild(this.div);}\nvar dashlet=pageContext;dashlet.resetForwardBackwardState();if(pageContext){pageContext.setTitle(this.getTitle());}\nthis.rendered=true;}\nPortlet.prototype.unrenderShow=function(){if(this.rendered&&this.parentDiv&&this.div&&this.div.parentNode&&this.parentDiv==this.div.parentNode){domutils.destroyNode(this.div,true);this.rendered=false;}}\nPortlet.prototype.doOnDashletExport=function(ev,p,parentElem){}\nPortlet.prototype.initSelfExportMenu=function(){}","js/bof/decisionpanel/Portal/Dashlet/Portlet/PortletEdit.js":"\n﻿var util=jsloader.resolve(\"freequery.common.util\");var Module2=jsloader.resolve(\"freequery.widget.Module2\");var PortletEdit=function(parentDiv){this.height=\"300\";this.width=\"100%\";this.title=\"\";this.parentDiv=parentDiv;};lang.extend(PortletEdit,Module2);PortletEdit.prototype.render=function(contentString){this.contentString=contentString;}\nPortletEdit.prototype.validateInput=function(){}\nPortletEdit.prototype.getContentString=function(){}\nPortletEdit.prototype.getParams=function(){}\nPortletEdit.prototype.destroy=function(){delete this.height;delete this.width;delete this.title;delete this.contentString;PortletEdit.superclass.destroy.call(this);};PortletEdit.prototype.doClose=function(){};PortletEdit.prototype.getHeight=function(){return this.height;}\nPortletEdit.prototype.getWidth=function(){return this.width;}\nPortletEdit.prototype.getTitle=function(){return this.title;}\nPortletEdit.prototype.setPortletId=function(portletId){this.portletId=portletId;}\nPortletEdit.prototype.maximizeWindow=function(){}\nPortletEdit.prototype.minimizeWindow=function(){}\nPortletEdit.prototype.restoreWindow=function(){}","js/bof/decisionpanel/Portal/Dashlet/Portlet/PortletContainer.js":"\nvar DashletUtil=jsloader.resolve(\"bof.decisionpanel.Portal.Dashlet.util.DashletUtil\");var PortletPool=function(pageContext){this.MAXSIZE=1;this._objs=new Array();this._states=new Array();this.resize=function(){if(this._states.length<=this.MAXSIZE)\nreturn;else{for(var i=this._objs.length;i>=this.MAXSIZE;i--){if(this._states[i]&&this._states[i]==\"available\"){if(this._objs[i]){this._objs[i].destroy();delete this._objs[i];delete this._states[i];}}}\nvar tmpObjs=new Array();var tmpStates=new Array();for(var i=0;i<this._objs.length;i++){if(this._objs[i]){tmpObjs.push(this._objs[i]);tmpStates.push(this._states[i]);}}\nthis._objs=tmpObjs;this._states=tmpStates;}};this.borrowPortlet=function(parentDiv,dashletType,contextStr){for(var i=0;i<this._objs.length;i++){var portlet=this._objs[i];if(portlet&&this._states[i]==\"available\"){this._states[i]=\"busy\";return portlet;}}\nvar portlet;var dashletId=pageContext.id;var portletDefine=DashletUtil.getPortletDefinByName(dashletType);if(portletDefine){var ExtendPortlet=jsloader.imports(portletDefine.viewerJs);portlet=new ExtendPortlet(parentDiv,contextStr,dashletType);portlet.systemPortlet=portletDefine.systemPortlet;}else{alert(dashletType+\"的portlet定义不存在\");}\nthis._objs.push(portlet);this._states.push(\"busy\");return portlet;};this.returnQueryView=function(queryObj){for(var i=0;i<this._objs.length;i++){var portlet=this._objs[i];if(portlet==queryObj){portlet.unrenderShow();this._states[i]=\"available\";}}\nthis.resize();};this.destroy=function(){for(var i=this._objs.length-1;i>=0;i--){var portlet=this._objs[i];if(portlet){portlet.unrenderShow();portlet.destroy();delete this._objs[i];}}\nthis._objs=null;this._states=null;}};var PortletContainer=function(pageContext){this.elems=new Array();this.portletList=new Array();this.paramObjList=new Array();this.portletParamList=new Array();this.portletPool=new PortletPool(pageContext);this.curStep=-1;this.pageContext=pageContext;this.put=function(name,obj){this.elems[name]=obj;};this.get=function(name){return this.elems[name];};this.borrowPortlet=function(parentDiv,dashletType,contextStr){var ret=this.portletPool.borrowPortlet(parentDiv,dashletType,contextStr,this);return ret;};this.returnQueryView=function(obj){this.portletPool.returnQueryView(obj);};this.openPortlet=function(portletId,dashletType,paramObjList){return this.navigateTo(portletId,dashletType);};this.navigateTo=function(portletId,dashletType){for(var i=this.curStep+1;i<this.portletList.length;i++){var tmpQuery=this.portletList[i];if(tmpQuery&&this.portletPool)\nthis.portletPool.returnQueryView(tmpQuery);}\nthis.portletList=this.portletList.slice(0,this.curStep+1);var dashlet=this.pageContext;if(dashletType=='SimpleReport'||dashletType=='Dashboard'||dashletType=='DashboardMap'){dashlet.pageContext.isReplace=true;}\ndashlet.navigateToPortlet(portletId,dashletType);return dashlet.portlet;};this.getActiveQuery=function(){return this.portletList[this.curStep];};this.clear=function(){for(var i=this.portletList.length-1;i>=0;i--){var tmpQuery=this.portletList[i];if(this.portletPool)\nthis.portletPool.returnQueryView(tmpQuery);}\nthis.portletList=new Array();this.curStep=-1;};this.setStep=function(step){var curQuery=this.portletList[this.curStep];var toQuery=this.portletList[step];if(curQuery&&toQuery){this.curStep=step;this.addPortletSeriesFlag(curQuery);curQuery.unrenderShow();toQuery.renderShow(pageContext);}else if(toQuery){this.curStep=step;toQuery.renderShow(pageContext);}\nthis.setCurrPortlet(step);this.setPublicParaStep(step);};this.setPublicParaStep=function(step){var toParam=this.portletParamList[step];if(toParam){pageContext.setPublicParaValue(toParam);}};this.setCurrPortlet=function(step){var toPortlet=this.portletList[step];if(toPortlet){pageContext.setCurrPortlet(toPortlet);}};this.addPortlet=function(portlet){this.portletList.push(portlet);this.setStep(this.portletList.length-1);this.addPortletParam();};this.addPortletParam=function(paramObjList){if(!this.portletParamList){this.portletParamList=new Array();}\nif(this.portletParamList.length<1){this.portletParamList.push(\"0\");}\nif(pageContext.pageContext.isReplace){this.portletParamList.push(this.paramObjList);}};this.addPortletAutoRefreshFlag=function(flag){var curQuery=this.portletList[this.curStep];curQuery.AutoRefreshFlag=flag;};this.getQueryCount=function(){return this.portletList.length;};this.isFirstStep=function(){if(this.curStep==0)\nreturn true;else\nreturn false;};this.isLastStep=function(){if(this.curStep==this.portletList.length-1)\nreturn true;else\nreturn false;};this.goForward=function(){if(this.curStep<this.portletList.length-1&&this.curStep>=0){return this.setStep(this.curStep+1);}};this.goBackward=function(){if(this.curStep<=this.portletList.length-1&&this.curStep>0){return this.setStep(this.curStep-1);}};this.destroy=function(){if(this.portletPool)\nthis.portletPool.destroy();this.pageContext=null;};this.addPortletSeriesFlag=function(curQuery){if(curQuery.command&&curQuery.command.dashboard&&curQuery.command.dashboard.seriesRadios){for(indx in curQuery.command.dashboard.seriesRadios){if(curQuery.command.dashboard.seriesRadios[indx].checked){curQuery.command.dashboard.seriesRadios[indx].setAttribute(\"checked1\",true)}else{curQuery.command.dashboard.seriesRadios[indx].setAttribute(\"checked1\",false)}}}};};","js/bof/decisionpanel/Portal/Dashlet/Portlet/SimpleReportPortlet.js":"\n﻿﻿﻿var util=jsloader.resolve(\"freequery.common.util\");var modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var domutils=jsloader.resolve(\"freequery.lang.domutils\");var BofPortlet=jsloader.resolve(\"bof.decisionpanel.Portal.Dashlet.Portlet.BofPortlet\");var QueryViewCommand=jsloader.resolve(\"freequery.query.QueryViewCommand\");var PopupMenu=null;var MacroService=null;var SimpleReportPortlet=function(parentDiv,contextStr){SimpleReportPortlet.superclass.constructor.call(this,parentDiv,contextStr);this.afterRefresh=new CustomEvent(\"afterRefresh\",this);this.onHeightChanged=new CustomEvent(\"onHeightChanged\",this);var autoHeight=this.portletXml?domutils.getNodeAtrributeValueByName(this.portletXml,\"AUTOHEIGHT\"):null;this.autoHeight=autoHeight&&autoHeight.nodeValue==\"true\";if(window.__Portlet_is_hybrid){this.modules={};this.div=parentDiv.firstChild;for(var node=this.div.nextSibling;node;node=node.nextSibling){if(1!=node.nodeType)continue;if(\"TEXTAREA\"!=node.tagName)continue;if(\"modules\"==node.getAttribute(\"boftype\")){var eventName=node.getAttribute(\"bofid\");this.modules[eventName]=lang.parseJSON(node.value);}else{;}}}\nthis.div.style.overflow=\"hidden\";};lang.extend(SimpleReportPortlet,BofPortlet);SimpleReportPortlet.prototype.render=function(){SimpleReportPortlet.superclass.render.call(this);if(!util.hasLicense(\"Query\")){return;}\nthis.openQueryView(this.portletId);this.setAutoHeight();};SimpleReportPortlet.prototype.setAutoHeight=function(){if(this.autoHeight){if(this.queryCmd){this.queryCmd.query.onAfterFillData.subscribe(this.doOnQueryViewResize,this);}else{this.simpleGrid.onAfterFillData.subscribe(this.doOnQueryViewResize,this);}}};SimpleReportPortlet.prototype.doOnQueryViewResize=function(){var content=this.queryCmd?this.queryCmd.query.content:this.simpleGrid.content;if(domutils.isFirefox())\ncontent=content.parentNode;var delta=content.scrollHeight-content.clientHeight;if(domutils.isSafari()||domutils.isIOS()){if(content.firstChild.clientHeight<content.clientHeight)\ndelta=content.firstChild.clientHeight-content.scrollHeight;}\nif(delta<-10||delta>=0)\nthis.onHeightChanged.fire(delta+5);}\nSimpleReportPortlet.prototype.openQueryView=function(queryId){var simpleGrid=this.portletXml?domutils.getNodeAtrributeValueByName(this.portletXml,\"SIMPLEGRID\"):null;if(simpleGrid&&simpleGrid.nodeValue==\"true\"){var SimpleGrid=jsloader.resolve(\"bof.decisionpanel.Portal.Dashlet.Portlet.SimpleGrid\");var grid=new SimpleGrid(this,queryId,this.modules);grid.onRunMacro.subscribe(this.runMacro,this);grid.render(this.div);this.simpleGrid=grid;this.getDashlet().setButtonLocateReportDisplay(\"\");return;}\nthis.openQueryViewInternal(queryId);};SimpleReportPortlet.prototype.openQueryViewInternal=function(queryId,fromSimpleGrid){boflog.profile(\"A\");var queryCmd=new QueryViewCommand();queryCmd.isBrowseModule=true;queryCmd.isOpenInPortalPage=true;queryCmd.parent=this.div;queryCmd.btnStatus['btnLocate']=\"none\";queryCmd.btnStatus['btnClose']=\"none\";queryCmd.btnStatus['btnSave']=\"none\";queryCmd.btnStatus['btnSaveAs']=\"none\";if(this.isReplace()){if(\"undefined\"===typeof this.ishidetoolbar)\nthis.ishidetoolbar=true;}\nqueryCmd.setPortalInfo(false,this.ishidetoolbar,this.getPageObj());var node=new Object();node._id=queryId;node._type=\"SIMPLE_REPORT\";boflog.profile(\"A\");boflog.profile(\"B\");queryCmd.execute(\"OPEN\",node);boflog.profile(\"B\");boflog.profile(\"C\");this.queryCmd=queryCmd;var query=queryCmd.query;if(!query||!query.grid)\nreturn;var autoRefresh=query.getAutoRefresh();query.setAutoRefresh(false);this.runMacro(query,query.queryNavigator,\"onRender\");try{if(\"undefined\"===typeof this.isHideShortTollBar||this.ishidetoolbar===false)\nthis.isHideShortTollBar=true;query.setShowShotCut(!this.isHideShortTollBar);if(!this.getTitle()){this.setTitle(\"\");}\nif(this.isReplace()){this.setTitle(query.alias||query.name);}\nthis.hiddenParam();this.setParamsInfo(true);}finally{query.setAutoRefresh(autoRefresh);}\nquery.afterRefresh.subscribe(this.doAfterRefresh,this);query.onClick.subscribe(this.doOnReportClick,this);query.onLinkClick.subscribe(this.doLinkClick,this);query.onRunMacro.subscribe(this.runMacro,this);query.setTableRightClickEnable(this.rightmenu);this.addChartSubscribe(query);if(!fromSimpleGrid&&this.autorefresh&&!this.isReplace()){if(window.__Portlet_is_hybrid){query.refreshDataAsync();}else{query.refreshDataSync();}}else if(this.autorefreshValue==\"delay\"){var time=this.delayTime?this.delayTime*1000:100;setTimeout(function(){if(window.__Portlet_is_hybrid){query.refreshDataAsync();}else{query.refreshDataSync();}},time)\nquery.readyForUse=true;}\nelse if(!this.autorefresh){query.readyForUse=true;}\nif(fromSimpleGrid){query.setViewVisible(query.graphPanel,false);query.setViewVisible(query.trTail,false);query.setViewVisible(query.trHeader,false);query.setShowShotCut(false);this.getDashlet().setButtonExportDisplay(\"none\");}\nthis.setParamPanelDisplay(query);query.navigationLay.height=\"15\";this.clearBlankSpace();boflog.profile(\"C\");}\nSimpleReportPortlet.prototype.destroy=function(){if(this.simpleGrid)\nthis.simpleGrid.destroy();if(this.queryCmd){this.queryCmd.destroy();delete this.queryCmd;}\ntry{domutils.destroyNode(this.div)}catch(e){};delete this.div;if(this.portalObj){delete this.portalObj;}\ndelete this.afterRefresh;if(this.jumpRuleMenu){this.jumpRuleMenu.destroy();}\nSimpleReportPortlet.superclass.destroy.call(this);};SimpleReportPortlet.prototype.getPortletObject=function(){if(this.queryCmd&&this.queryCmd.queryNavigator){return this.queryCmd.queryNavigator.getActiveQuery();}else if(this.simpleGrid)\nreturn this.simpleGrid;};SimpleReportPortlet.prototype.doAfterRefresh=function(){};SimpleReportPortlet.prototype.setAutoRefreshValue=function(refreshValue){if(this.getPortletObject())\nthis.getPortletObject().autoRefresh=refreshValue;};SimpleReportPortlet.prototype.doOnReportClick=function(queryView,grid,cellObj,e,head,row){if(!(cellObj&&cellObj.jumpRules)){return;}\nvar tempArr=cellObj.jumpRules;var interArr=[];for(var t in tempArr){interArr[tempArr[t].alias]=tempArr[t];}\nvar retArr=[];for(var s in interArr){retArr.push(interArr[s]);}\ncellObj.jumpRules=retArr;this.currentLinkCell=cellObj;if(this.getPortletObject()){this.getPortletObject().setCurrentLinkCol(cellObj);}\nif(!this.handler.srcReport)\nthis.handler.srcReport=this.getPortletObject();if(!this.handler.reportContext)\nthis.handler.reportContext=this.getPortletObject().queryNavigator;if(!this.handler.page)\nthis.handler.page=this.portalObj;if(!PopupMenu)\nPopupMenu=jsloader.resolve(\"freequery.menu.PopupMenu\");if(this.popupMenu){this.popupMenu.clear();}else{this.popupMenu=new PopupMenu(document.body,this.handler);}\nthis.handler.menuItems=new Array();this.cellObj=cellObj;var fieldAlias=util.trim(head.innerText);var field=queryView.getFieldByIndx(queryView.grid.getColumnIndex(cellObj));var fieldName=fieldAlias;if(field)\nfieldName=field.name;this.currentFieldAlias=fieldAlias;this.currentFieldName=fieldName;for(var i=0;i<cellObj.jumpRules.length;i++){var tmpRule=cellObj.jumpRules[i];this.handler.menuItems[tmpRule.alias]=tmpRule;if(!queryView.autoCmd||(!queryView.autoCmd[fieldAlias]||!queryView.autoCmd[fieldAlias][tmpRule.alias])&&(!queryView.autoCmd[fieldName]||!queryView.autoCmd[fieldName][tmpRule.alias])){this.popupMenu.createMenuItem(tmpRule.alias,tmpRule.alias);}}\nif(this.popupMenu.menuItems.length==1){var needJumpMenu=this.getSystemNeedJumpMenu();if(!needJumpMenu){this.handler.doCmd(this.popupMenu.menuItems[0].cmd);this.popupMenu.clear();}else{this.doPopupMenuCmd(e);}}else{this.doPopupMenuCmd(e);}\nqueryView.alreadyClick=true;};SimpleReportPortlet.prototype.runMacro=function(query,queryContext,actionName,param){try{if(!MacroService)\nMacroService=imports(\"bof.macro.services.MacroService\").getInstance();}catch(ex){;}\nif(actionName&&actionName==\"onRenderTable\"){MacroService.fire(this,this.getPortletObject().getResourceId(),\"onRenderTable\",[this.getPortletObject(),this.getPortletObject().queryNavigator]);}else if(actionName==\"onRender\"){MacroService.fire(this,this.getPortletObject().getResourceId(),\"onRender\",[this.getPortletObject(),this.getPortletObject().queryNavigator]);}else if(actionName==\"onParamValueChanged\"){MacroService.fire(this,this.getPortletObject().getResourceId(),\"onParamValueChanged\",[this.getPortletObject(),this.getPortletObject().queryNavigator,param]);}}\nSimpleReportPortlet.prototype.doAutoCmd=function(){var cellObj=this.cellObj;if(!cellObj||!cellObj.jumpRules)\nreturn;var queryView=this.getPortletObject();if(!queryView)\nreturn;this.handler.isDoAutoCmdFire=true;for(var i=0;i<cellObj.jumpRules.length;i++){var tmpRule=cellObj.jumpRules[i];this.handler.menuItems[tmpRule.alias]=tmpRule;if(queryView.autoCmd&&((queryView.autoCmd[this.currentFieldAlias]&&queryView.autoCmd[this.currentFieldAlias][tmpRule.alias])||(queryView.autoCmd[this.currentFieldName]&&queryView.autoCmd[this.currentFieldName][tmpRule.alias]))){this.handler.doCmd(tmpRule.alias);}}\nthis.handler.isDoAutoCmdFire=false;};SimpleReportPortlet.prototype.getPortletType=function(){return\"SimpleReport\";};SimpleReportPortlet.prototype.setParamPanelDisplay=function(query){if(!query)return;var params=this.getReportParams();if(!params)return;if(params.length<1){query.paramLay.style.display=\"none\";return;}\nif(this.hiddenParamIdList.length==params.length){query.paramLay.style.display=\"none\";}};SimpleReportPortlet.prototype.doLinkClick=function(obj){if(obj.callback)\nobj.callback(this.getPortletObject(),this.getPortletObject().queryNavigator,this.portalObj,this.portalObj.parentDesktop);};SimpleReportPortlet.prototype.refresh=function(flag){if(this.getPortletObject())\nthis.getPortletObject().refreshData(flag);};SimpleReportPortlet.prototype.maximizeWindow=function(){this.maximizeWindowInAutoHeight();this.onSize();};SimpleReportPortlet.prototype.minimizeWindow=function(){var obj=this.getPortletObject();var dashlet=this.getDashlet();obj.StateNormalWidth=dashlet.elemDashletContent.offsetWidth;}\nSimpleReportPortlet.prototype.restoreWindow=function(){var obj=this.getPortletObject();var dashlet=this.getDashlet();if(dashlet.WindowState==dashlet.StateNormal){obj.StateNormalWidth=dashlet.elemDashletContent.offsetWidth;}\nthis.setAutoHeight();this.onSize();}\nSimpleReportPortlet.prototype.onSize=function(){var obj=this.getPortletObject();var dashlet=this.getDashlet();if(parseInt(dashlet.frameDiv.offsetWidth)-20>0&&obj.elem_contentDiv){obj.elem_contentDiv.style.width=parseInt(dashlet.frameDiv.offsetWidth)-20;}}\nSimpleReportPortlet.prototype.getExportBean=function(){var portletBean=new Object();portletBean.portletId=this.portletId;portletBean.type=this.getPortletType().toUpperCase();var query=this.getPortletObject();portletBean.clientId=query.clientId;portletBean.headerHtml=query.reportHeader.innerHTML||\"\";portletBean.tailHtml=query.reportTail.innerHTML||\"\";portletBean.headerText=query.reportHeader.innerText||\"\";portletBean.tailText=query.reportTail.innerText||\"\";portletBean.hiddenParamIdList=this.hiddenParamIdList;var extraConfigObj={\"dashboard\":{},\"simpleReport\":{},\"olapReport\":{},\"freeReport\":{},\"metricReport\":{}};var chartAlign=(query.clientConfig&&query.clientConfig.chartAlign)||\"bottom\";extraConfigObj.simpleReport['chartAlign']=chartAlign;portletBean.extraConfig=lang.toJSONString(extraConfigObj);return portletBean;}\nSimpleReportPortlet.prototype.resolveCustomContentXml=function(portletXml){this.resolveReportContentXml(portletXml);try{var rightmenu=domutils.getNodeAtrributeValueByName(portletXml,\"RIGHTMENU\").nodeValue;this.rightmenu=rightmenu==\"true\"?true:false;}catch(e){this.rightmenu=true;}}\nSimpleReportPortlet.prototype.setBtnStatus=function(){this.getDashlet().setButtonLocateReportDisplay(\"\");if(!this.simpleGrid)\nthis.getDashlet().setButtonExportDisplay(\"\");if(!this.__btnStatusAction){var h=new Array();var btnStatusAction=this.getBtnStatusAction();if(btnStatusAction){for(var i=0;i<btnStatusAction.length;i++){var clz=jsloader.resolve(btnStatusAction[i].className);h[i]=new clz(this);}}\nthis.__btnStatusAction=h;}\nfor(var i=0;i<this.__btnStatusAction.length;i++){this.__btnStatusAction[i].setBtnStatus(this);}}\nSimpleReportPortlet.prototype.getBtnStatusAction=function(){var Configuration=imports(\"Configuration\").getInstance();return Configuration.extensionPoints.simpleReportPortletBtnStatusAction;}\nSimpleReportPortlet.prototype.clearBlankSpace=function(){var Configuration=imports(\"Configuration\").getInstance();var extPoint=Configuration.extensionPoints.Dashboard;if(!extPoint)return;if(extPoint.SimpleReportPortlet&&extPoint.SimpleReportPortlet.clearBlankSpaceAction&&extPoint.SimpleReportPortlet.clearBlankSpaceAction.className){var clz=jsloader.resolve(extPoint.SimpleReportPortlet.clearBlankSpaceAction.className);var h=new clz(this);h.clearBlankSpace(this);}}\nSimpleReportPortlet.prototype.isDefultParamValue=function(param){if(param.isDefultParamValue!=undefined)\nreturn param.isDefultParamValue;var simpleReport=this.getPortletObject();var defultParamValue=simpleReport.paramSetting;if(defultParamValue&&defultParamValue.applyDefaultValueParams){for(index in defultParamValue.applyDefaultValueParams){pid=defultParamValue.applyDefaultValueParams[index];if(pid==param.id){param.isDefultParamValue=true;return true;}}}\nparam.isDefultParamValue=false;return false;}\nSimpleReportPortlet.prototype.initSelfExportMenu=function(){if(this.exportMenu){this.exportMenu.insertItem(\"CSV\",\"CSV\");this.exportMenu.insertItem(\"TXT\",\"TXT\");this.exportMenu.insertItem(\"MHT\",\"HTML\");}}\nvar globalPortletIFrameIndex=0;var SimpleReportPortlet2=function(parentDiv,contextStr){SimpleReportPortlet2.superclass.constructor.call(this,parentDiv,contextStr);if(!this.autoLogin)\nthis.autoLogin=false;this.portletIFrameIndex=globalPortletIFrameIndex++;this.div.innerHTML='<table width=\"100%\" height=\"100%\" cellpadding=\"0\" cellspacing=\"0\">'+' <tr valign=\"top\">'+'  <td class=\"_mainTd\" valign=\"top\" align=\"center\">'+'   <iframe name=\"SimpleReportIFrame'+this.portletIFrameIndex+'\" class=\"_iframe\" frameborder=\"3\" width=\"100%\" height=\"100%\">'+'   <\/iframe>'+'  <\/td>'+' <\/tr>'+'<\/table>';this.frame=domutils.findElementByClassName([this.div],\"_iframe\");this.mainTd=domutils.findElementByClassName([this.div],\"_mainTd\");};lang.extend(SimpleReportPortlet2,BofPortlet);SimpleReportPortlet2.prototype.render=function(){this.frame.src=\"http://localhost:8080/bioffice/vision/openresource.jsp?resid=\"+this.portletId;};SimpleReportPortlet2.prototype.getTitle=function(){};SimpleReportPortlet2.prototype.getPortletType=function(){};SimpleReportPortlet.prototype.__doOnReportClick=SimpleReportPortlet.prototype.doOnReportClick;SimpleReportPortlet.prototype.doOnReportClick=function(queryView,grid,cellObj,e,head,row){if(domutils.isIOS()){}\nqueryView.alreadyClick=true;this.__doOnReportClick(queryView,grid,cellObj,e,head,row);if(domutils.isIOS()){}}\nSimpleReportPortlet.prototype.__chartClick=SimpleReportPortlet.prototype.chartClick;SimpleReportPortlet.prototype.chartClick=function(e,chart,eventType,clieckInfo){if(domutils.isIOS()){}\nthis.__chartClick(e,chart,eventType,clieckInfo);if(domutils.isIOS()){}}\nSimpleReportPortlet.prototype.initSelfExportMenu_ex2007=SimpleReportPortlet.prototype.initSelfExportMenu;SimpleReportPortlet.prototype.initSelfExportMenu=function(){this.initSelfExportMenu_ex2007();if(this.exportMenu){this.exportMenu.insertItem(\"EXCEL2007\",\"EXCEL\");}}","js/bof/decisionpanel/Portal/Dashlet/Portlet/SimpleReportPortletEdit.js":"\n﻿var domutils=jsloader.resolve(\"freequery.lang.domutils\");var BofPortletEdit=jsloader.resolve(\"bof.decisionpanel.Portal.Dashlet.Portlet.BofPortletEdit\");var util=jsloader.resolve(\"freequery.common.util\");var SimpleReportPortletEdit=function(parentDiv){SimpleReportPortletEdit.superclass.constructor.call(this,parentDiv);if(parentDiv)\nthis.init(parentDiv,__url);};lang.extend(SimpleReportPortletEdit,BofPortletEdit);SimpleReportPortletEdit.prototype.render=function(contentString){SimpleReportPortletEdit.superclass.render.call(this,contentString);this.updatePortletName(this.portletId);};SimpleReportPortletEdit.prototype.destroy=function(){try{domutils.destroyNode(this.element);}catch(e){}\nSimpleReportPortletEdit.superclass.destroy.call(this);};SimpleReportPortletEdit.prototype.resolveCustomContentXml=function(portletXml){var autoHeight=domutils.getNodeAtrributeValueByName(portletXml,\"AUTOHEIGHT\");this.elemAutoHeight.checked=autoHeight&&autoHeight.nodeValue==\"true\";this.elemHeight.disabled=this.elemAutoHeight.checked;this.resolveReportContentXml(portletXml);var simpleGrid=domutils.getNodeAtrributeValueByName(portletXml,\"SIMPLEGRID\");this.elemShowSimpleGridTrue.checked=simpleGrid&&simpleGrid.nodeValue==\"true\";try{this.rightmenu=domutils.getNodeAtrributeValueByName(portletXml,\"RIGHTMENU\").nodeValue;}catch(e){this.rightmenu=\"true\";}}\nSimpleReportPortletEdit.prototype.elemAutoHeight_click_handler=function(){this.elemHeight.disabled=this.elemAutoHeight.checked;}\nSimpleReportPortletEdit.prototype.setCustomInputValue=function(){this.uniqueRightMenuSelectName=this.updateRaidoName(this.portletId,\"_rightMenuSelect\");this.setRadioChecked(this.uniqueRightMenuSelectName,this.rightmenu,\"true\");this.uniqueSimpleGridName=this.updateRaidoName(this.portletId,\"_showSimpleGrid\");this.setReportInputValue();}\nSimpleReportPortletEdit.prototype.getCustomContentXml=function(portletNode){portletNode=this.getReportContentXML(portletNode);if(this.elemAutoHeight.checked)\nportletNode.setAttribute(\"AutoHeight\",\"true\");portletNode.setAttribute(\"rightmenu\",(this.getRadioCheckedValue(this.uniqueRightMenuSelectName)));if(this.getRadioCheckedValue(this.uniqueSimpleGridName)==\"true\")\nportletNode.setAttribute(\"SimpleGrid\",\"true\");return portletNode;}\nSimpleReportPortletEdit.prototype.getParams=function(){var result=util.remoteInvoke(\"DPPortalService\",\"getParamCataolgInfoByReportId\",[this.portletId,\"SimpleReport\"]);return result;}\nSimpleReportPortletEdit.prototype.render_ipad=SimpleReportPortletEdit.prototype.render;SimpleReportPortletEdit.prototype.render=function(contentString){this.render_ipad(contentString);if(this.elemIpadFrameDisplayTr){this.elemIpadFrameDisplayTr.style.display=\"\";}};","js/bof/decisionpanel/Portal/Dashlet/Dashlet.js":"\nvar modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var util=jsloader.resolve(\"freequery.common.util\");var DashletUtil=jsloader.resolve(\"bof.decisionpanel.Portal.Dashlet.util.DashletUtil\");var DropDownBox=null;var Dashlet=function(pageContext,parentDiv,dashletInfo,myselfConfig){if(!pageContext||!dashletInfo)\nreturn;this.frameDiv=document.createElement(\"div\");this.frameDiv.className=\"frameDiv\";this.init(this.frameDiv,__url,true);if(parentDiv){parentDiv.appendChild(this.frameDiv);}\nthis.parentDiv=parentDiv;this.elemDashletFrame.style.height=\"100%\";this.elemDashletFrame.style.width=\"100%\";this.pageContext=pageContext;this.myselfConfig=myselfConfig;this.WindowState=this.StateNormal;this.id=dashletInfo.id;this.contentString=dashletInfo.content;this.dashletType=dashletInfo.type;this.portletId=dashletInfo.portletId;this.height=300;this.width=\"100%\";if(this.pageContext.showBorderValue){this.loadOptions({skinDisplay:this.pageContext.showBorderValue});}else{this.loadOptions();}\nthis.custom();this.onAfterShow=new CustomEvent(\"onAfterShow\",this);};lang.extend(Dashlet,\"freequery.widget.Module2\");Dashlet.prototype.StateMax=2;Dashlet.prototype.StateNormal=1;Dashlet.prototype.StateMin=0;Dashlet.prototype.getPageViewDiv=function(){var viewDiv=null;for(var node=this.frameDiv;node&&node.nodeType==1;node=node.parentNode){if(node.getAttribute(\"flag\")==\"NewPage\"){viewDiv=node;break;}}\nreturn viewDiv;};Dashlet.prototype.loadOptions=function(options){var tOpts=null;if(options){tOpts=options;}else{tOpts=registry.get(\"dashletOptions\");if(!tOpts){tOpts=DashletUtil.loadDashletOptions();}}\nthis.options={skinDisplay:\"title_border\"};if(!this.pageContext.isFromView)\nreturn;if(tOpts&&tOpts.skinDisplay){this.options.skinDisplay=tOpts.skinDisplay;}\ntry{var dom=domutils.parseXML(this.contentString);var layoutNode=dom.documentElement;var portletXml=this.portletXml=layoutNode.firstChild;var xml=domutils.nodeToString(portletXml);if(xml.indexOf(\"height\")!=-1){this.options.height=domutils.getNodeAtrributeValueByName(portletXml,\"HEIGHT\").nodeValue;}\nif(xml.indexOf(\"width\")!=-1){this.options.width=domutils.getNodeAtrributeValueByName(portletXml,\"WIDTH\").nodeValue;}\nif(xml.indexOf(\"display\")!=-1){var display=domutils.getNodeAtrributeValueByName(portletXml,\"DISPLAY\").nodeValue;this.options.skinDisplay=display;}\nif(xml.indexOf(\"heightOption\")!=-1){var heightOption=domutils.getNodeAtrributeValueByName(portletXml,\"HEIGHTOPTION\").nodeValue;this.options.heightOption=heightOption;}}catch(e){this.options.height=\"300\";this.options.width=\"100%\";this.options.heightOption=\"dashlet\";}}\nDashlet.prototype.hideSkin=function(){if(this.options.skinDisplay==\"none\"||this.options.skinDisplay==\"title_border\"){this.elemDashletTopTr.style.display=\"none\";this.elemDashletTable.style.borderStyle=\"none\";this.elemDashletBottomSpaceTr.style.display=\"none\";}\nelse if(this.options.skinDisplay==\"button\"||this.options.skinDisplay==\"border_only\"){domutils.removeClassName(this.elemDashletCenterTopTd,\"dashletTopCenter\");this.elemDashletTitle.style.color=\"white\";this.elemDashletBottomSpaceTr.style.display=\"none\";this.elemDashletTable.style.borderStyle=\"none\";}}\nDashlet.prototype.skinOptionValidate=function(){var val=this.options.skinDisplay;return val&&(val==\"title_border\"||val==\"button\"||val==\"none\"||val==\"border_only\");}\nDashlet.prototype.showSkin=function(){if(this.options.skinDisplay==\"button\"){domutils.addClassName(this.elemDashletCenterTopTd,\"dashletTopCenter\");this.elemDashletTitle.style.color=\"black\";}else if(this.options.skinDisplay==\"border_only\"){domutils.addClassName(this.elemDashletCenterTopTd,\"dashletTopCenter\");this.elemDashletTitle.style.color=\"black\";this.elemDashletToolBar.style.display=\"block\";}else{this.elemDashletTopTr.style.display=\"block\";this.elemDashletCenterCenterTd.width=\"\";}\nthis.elemDashletBottomSpaceTr.style.display=\"block\";}\nDashlet.prototype.custom=function(){if(!this.skinOptionValidate())return;if(this.options.skinDisplay==\"none\"){this.elemDashletTopTr.style.display=\"none\";this.elemDashletTable.style.borderStyle=\"none\";this.elemDashletBottomSpaceTr.style.display=\"none\";}else if(this.options.skinDisplay==\"button\"){domutils.removeClassName(this.elemDashletCenterTopTd,\"dashletTopCenter\");this.elemDashletTitle.style.color=\"white\";this.elemDashletBottomSpaceTr.style.display=\"none\";this.elemDashletTable.style.borderStyle=\"none\";}else if(this.options.skinDisplay==\"border_only\"){this.elemDashletToolBar.style.display=\"none\";}\nthis.applyPageTheme();}\nDashlet.prototype.applyPageTheme=function(){}\nDashlet.prototype.getWindowState=function(){return this.WindowState;};Dashlet.prototype.setWindowState=function(state){if(!this.currentPortlet)\nthis.currentPortlet=this.portlet;if(state==this.StateMin&&this.WindowState==this.StateNormal){this.currentPortlet.minimizeWindow();this.frameDiv.style.height=\"22\";this.frameDiv.style.width=this.options.width||\"100%\";this.hiddenView();domutils.removeClassName(this.elemMin,\"dashletMin\");domutils.addClassName(this.elemMin,\"dashletOriginal\");this.elemMin.title=\"还原\";this.WindowState=this.StateMin;}else if(state==this.StateMin&&this.WindowState==this.StateMax){this.pageContext.showWhole(this);this.hiddenView();this.frameDiv.style.height=\"22\";this.frameDiv.style.width=this.options.width||\"100%\";domutils.removeClassName(this.elemMin,\"dashletMin\");domutils.addClassName(this.elemMin,\"dashletOriginal\");this.elemMin.title=\"还原\";domutils.removeClassName(this.elemMax,\"dashletOriginal\");domutils.addClassName(this.elemMax,\"dashletMax\");this.elemMax.title=\"最大化\";this.WindowState=this.StateMin;}else if(state==this.StateNormal&&this.WindowState==this.StateMin){var width=this.options.width||\"100%\";if(this.options.heightOption==\"chart\"&&this.options.width.indexOf(\"%\")==-1){width=parseInt(this.options.width)+2;}\nthis.frameDiv.style.width=width;this.frameDiv.style.height=this.options.height||\"300px\";this.showView();domutils.removeClassName(this.elemMin,\"dashletOriginal\");domutils.addClassName(this.elemMin,\"dashletMin\");this.elemMin.title=\"最小化\";this.WindowState=this.StateNormal;this.currentPortlet.restoreWindow();}else if(state==this.StateNormal&&this.WindowState==this.StateMax){var width=this.options.width||\"100%\";if(this.options.heightOption==\"chart\"&&this.options.width.indexOf(\"%\")==-1){width=parseInt(this.options.width)+2;}\nthis.frameDiv.style.width=width;this.frameDiv.style.height=this.options.height||\"300px\";this.pageContext.showWhole(this);domutils.removeClassName(this.elemMax,\"dashletOriginal\");domutils.addClassName(this.elemMax,\"dashletMax\");this.elemMax.title=\"最大化\";this.WindowState=this.StateNormal;this.currentPortlet.restoreWindow();}else if(state==this.StateMax&&this.WindowState==this.StateNormal){this.pageContext.showSingle(this);domutils.removeClassName(this.elemMax,\"dashletMax\");domutils.addClassName(this.elemMax,\"dashletOriginal\");this.elemMax.title=\"还原\";this.WindowState=this.StateMax;var tdCellNode=this.frameDiv.parentNode;var tableNode=tdCellNode.parentNode.parentNode.parentNode;this.frameDiv.style.height=tableNode.offsetHeight-10;this.frameDiv.style.width=tableNode.offsetWidth-10;this.currentPortlet.maximizeWindow();}else if(state==this.StateMax&&this.WindowState==this.StateMin){this.showView();this.pageContext.showSingle(this);domutils.removeClassName(this.elemMin,\"dashletOriginal\");domutils.addClassName(this.elemMin,\"dashletMin\");this.elemMin.title=\"最小化\";domutils.removeClassName(this.elemMax,\"dashletMax\");domutils.addClassName(this.elemMax,\"dashletOriginal\");this.elemMax.title=\"还原\";var tdCellNode=this.frameDiv.parentNode;var tableNode=tdCellNode.parentNode.parentNode.parentNode;this.frameDiv.style.height=tableNode.offsetHeight-10;this.frameDiv.style.width=tableNode.offsetWidth-10;this.WindowState=this.StateMax;this.currentPortlet.maximizeWindow();}};Dashlet.prototype.resetPortletsSize=function(){var dashletList=this.pageContext.dashletList;var len=dashletList.length;for(var i=0;i<len;i++){var dashlet=dashletList[i];var portlet=dashlet.currentPortlet;if(portlet&&portlet.onSize)\nportlet.onSize();}}\nDashlet.prototype.elemDelete_click_handler=function(){var mess=\"\";try{mess=this.portlet.getTitle();}catch(e){mess=\"资源\";}\nvar result=modalWindow.open(\"确认要删除 \\\"\"+mess+\"\\\"吗？\",\"删除确认\",modalWindow.MB_YES|modalWindow.MB_NO);if(result==modalWindow.ID_YES){this.pageContext.deleteDashlet(this);}else{return false;}};Dashlet.prototype.openView=function(){};Dashlet.prototype.closeConfigView=function(){this.elemConfig.src=\"themes/default/images/configuration.gif\";}\nDashlet.prototype.hidden=function(){this.frameDiv.style.display=\"none\";}\nDashlet.prototype.show=function(){if(this.visibleFlag===false)return;this.frameDiv.style.display=\"block\";}\nDashlet.prototype.afterShow=function(){this.onAfterShow.fire();}\nDashlet.prototype.setVisibility=function(flag){if(flag){this.visibleFlag=true;this.show();}else{this.visibleFlag=false;this.hidden();}}\nDashlet.prototype.hiddenView=function(){this.elemDashletContent.style.display=\"none\";}\nDashlet.prototype.showView=function(){this.elemDashletContent.style.display=\"block\";}\nDashlet.prototype.elemConfig_click_handler=function(){alert(\"打开配置界面\");}\nDashlet.prototype.elemMin_click_handler=function(){if(this.WindowState==this.StateMin)\nthis.setWindowState(this.StateNormal);else\nthis.setWindowState(this.StateMin);}\nDashlet.prototype.elemMax_click_handler=function(){if(this.WindowState==this.StateMax)\nthis.setWindowState(this.StateNormal);else\nthis.setWindowState(this.StateMax);}\nDashlet.prototype.destroy=function(){if(this.frameDiv){if(this.parentDiv)\ndomutils.destroyNode(this.frameDiv);}\nif(this.options)delete this.options;delete this.elemMin;delete this.elemMax;delete this.elemForward;delete this.elemBackward;delete this.elemExport;delete this.elemLocateReport;delete this.elemConfig;delete this.elemDelete;delete this.myselfConfig;delete this.frameDiv;delete this.parentDiv;delete this.pageContext;delete this.WindowState;delete this.id;delete this.dashletType;delete this.portletId;delete this.contentString;delete this.height;delete this.width;Dashlet.superclass.destroy.call(this);}\nDashlet.prototype.applyStyle=function(){this.setStyle();}\nDashlet.prototype.setStyle=function(){if(window.__Portlet_is_hybrid&&!this.isReplace){if(this.tempHeight){this.frameDiv.style.height=this.tempHeight||this.frameDiv.clientHeight;}\nreturn;}\nthis.frameDiv.style.width=this.width;this.frameDiv.style.height=this.height;}\nDashlet.prototype.setButtonExportDisplay=function(display){if(this.elemExport)\nthis.elemExport.style.display=display;}\nDashlet.prototype.setButtonLocateReportDisplay=function(display){this.elemLocateReport.style.display=display;}\nDashlet.prototype.setButtonMaxDisplay=function(display){this.elemMax.style.display=display;}\nDashlet.prototype.setButtonMinDisplay=function(display){this.elemMin.style.display=display;}\nDashlet.prototype.setTitle=function(title){this.elemDashletTitle.className=\"dashletTitle\";var pageTheme=registry.get(\"pageTheme\");if(null!=pageTheme){var newOption=pageTheme.page;if(newOption&&newOption.dashlet){style=newOption.dashlet.tileFont;for(key in style){this.elemDashletTitle.style[key]=style[key];}}}\nthis.elemDashletTitle.innerHTML=title||'';}\nDashlet.prototype.getTitle=function(){return this.elemDashletTitle.innerText;}\nDashlet.prototype.setHeight=function(height){this.height=height;}\nDashlet.prototype.setWidth=function(width){this.width=width;}\nDashlet.prototype.getDashletType=function(){return this.dashletType;}\nDashlet.prototype.__loadOptions=Dashlet.prototype.loadOptions;Dashlet.prototype.loadOptions=function(options){this.__loadOptions(options);this.isMobile=domutils.isMobile();if(this.isMobile){try{var display=domutils.getNodeAtrributeValueByName(this.portletXml,\"IPADDISPLAY\").nodeValue;if(display)\nthis.options.skinDisplay=display;}catch(e){}}}\nDashlet.prototype.skinOptionValidate=function(){var val=this.options.skinDisplay;return val&&(val==\"title_border\"||val==\"button\"||val==\"none\"||val==\"border_only\"||val==\"title_only\");}\nDashlet.prototype._setStyle_=Dashlet.prototype.setStyle;Dashlet.prototype.setStyle=function(){this._setStyle_();var userAgent=navigator.userAgent.toLowerCase();var isIPad=userAgent.indexOf(\"ipad\")>-1;if(isIPad){this.frameDiv.style.width=this.tempWidth||this.frameDiv.clientWidth;this.frameDiv.style.height=this.tempHeight||this.frameDiv.clientHeight;this.addListener(this.frameDiv,\"touchend\",this.doTap,this);}}\nDashlet.prototype.doTap=function(){var currentTime=new Date().getTime();if(this.lastTapTime&&currentTime-this.lastTapTime<500){var portletType=this.currentPortlet.getPortletType();if(portletType==undefined||portletType==\"\"||portletType==\"PagingPortlet\"||portletType==\"ParameterPortlet\"||portletType==\"SimpleReport\"){return;}\nif(this.WindowState==this.StateMax){this.setWindowState(this.StateNormal);var slot=document.getElementById(\"_viewdiv_\");if(this.scrollTop){slot.scrollTop=this.scrollTop;delete this.scrollTop;}}else{var slot=document.getElementById(\"_viewdiv_\");this.scrollTop=slot.scrollTop;this.setWindowState(this.StateMax);}\nthis.lastTapTime=null;}else{this.lastTapTime=currentTime;}}","js/bof/decisionpanel/Portal/Dashlet/util/DashletUtil.js":"\nvar PortalService=imports(\"bof.decisionpanel.Portal.PortalService\");var util=jsloader.resolve(\"freequery.common.util\");var Configuration=imports(\"Configuration\");var DashletUtil={conversionType:function(type){switch(type){case\"SIMPLE_REPORT\":case\"灵活分析\":case\"灵活分析\":return\"SimpleReport\";break;case\"URL\":case\"BI3OLAP_REPORT\":case\"web链接\":case\"web链接\":return\"URL\";break;case\"DEFAULT_TREENODE\":case\"SELF_TREENODE\":return\"FOLDER\";break;case\"Dashboard\":case\"仪表分析\":case\"仪表分析\":return\"Dashboard\";break;case\"DashboardMap\":case\"地图分析\":case\"地图分析\":return\"DashboardMap\";break;case\"FREE_REPORT\":case\"复杂报表\":case\"复杂报表\":return\"FreeReport\";break;case\"METRIC_REPORT\":case\"指标报表\":case\"指标报表\":return\"MetricReport\";break;case\"OLAP_REPORT\":case\"多维分析 \":case\"多维分析\":return\"OlapReport\";break;default:if(extDashletTypes){for(var key in extDashletTypes){var types=extDashletTypes[key];for(var k in types){if(types[k]==type){return key;}}}}\nreturn type;}},reverseType:function(type){if(type=='SimpleReport'){return\"SIMPLE_REPORT\";}else if(type=='URL'){return\"URL\";}else if(type=='FOLDER'){return\"DEFAULT_TREENODE\";}else if(type=='FreeReport'){return\"FREE_REPORT\";}else if(type=='MetricReport'){return\"METRIC_REPORT\";}else if(type=='OlapReport'){return\"OLAP_REPORT\";}else{if(extDashletTypes&&extDashletTypes[type]){var types=extDashletTypes[type];if(types.length>0){return types[0];}}\nreturn type;}},loadDashletOptions:function(){var dashletOptions={};dashletOptions.skinDisplay=\"title_border\";var result=null;result=util.remoteInvokeEx(\"ConfigClientService\",\"getConfigValue\",[\"DASHLET_TITLE_AND_BORDER_DISPLAY\"]);if(result){var val=result.result;if(val==\"title_border\"||val==\"button\"||val==\"none\"||val==\"border_only\")\ndashletOptions.skinDisplay=val;}else\nthrow null;registry.put(\"dashletOptions\",dashletOptions);return dashletOptions;},getPortletsDefin:function(){var portletsDefiniens=registry.get(\"portletsDefiniens\");if(null==portletsDefiniens){portletsDefiniens=PortalService.getInstance().getPortletsDefiniens();registry.put(\"portletsDefiniens\",portletsDefiniens);}\nreturn portletsDefiniens;},getPortletDefinByName:function(name){var portletConfigList=this.getPortletsDefin();for(indx in portletConfigList){if(name==portletConfigList[indx].name){return portletConfigList[indx];}}\nreturn null;}};var extDashletTypes=function(){var app=imports(\"bof.baseajax.common.Application\").getInstance();app.doConfigurationPatch();return Configuration.getInstance().extensionPoints.extDashletTypes;}();DashletUtil.loadDashletOptions=function(){var dashletOptions={};dashletOptions.skinDisplay=\"title_border\";var result=util.remoteInvokeEx(\"ConfigClientService\",\"getConfigValue\",[\"DASHLET_TITLE_AND_BORDER_DISPLAY\"]);if(result){var val=result.result;if(val==\"title_border\"||val==\"button\"||val==\"none\"||val==\"border_only\")\ndashletOptions.skinDisplay=val;}else{throw null;}\ndashletOptions.ipadSkinDisplay=\"none\";result=util.remoteInvokeEx(\"ConfigClientService\",\"getConfigValue\",[\"IPAD_DASHLET_TITLE_DISPLAY\"]);if(result){var val=result.result;if(val==\"title_only\"||val==\"none\")\ndashletOptions.ipadSkinDisplay=val;}else{throw null;}\nregistry.put(\"dashletOptions\",dashletOptions);return dashletOptions;}","js/bof/decisionpanel/Portal/macro/MacroMenuCommand.js":"\nvar Module2=jsloader.resolve(\"freequery.widget.Module2\");var MacroMenuCommand=function(){this.menuItems={};this.srcReport=null;this.reportContext=null;this.page=null;this.autoCmd=new Array();this.onDoCmd=new CustomEvent(\"onDoCmd\",this);};lang.extend(MacroMenuCommand,Module2);MacroMenuCommand.prototype.destroy=function(){delete this.menuItems;delete this.srcReport;delete this.reportContext;delete this.page;delete this.autoCmd;delete this.isDoAutoCmdFire;};MacroMenuCommand.prototype.doCmd=function(cmd){if(this.menuItems&&this.menuItems[cmd]){var callback=this.menuItems[cmd];var srcReport=this.srcReport;var reportContext=this.reportContext;if(this.resourceType==\"olapQuery\"){eval(this.menuItems[cmd].action);callback(this.currentCell,this.page,this.page.parentDesktop,this.srcReport);}else if(this.resourceType==\"dashboard\"||this.resourceType==\"dashboardMap\"){eval(this.menuItems[cmd].action);callback(this.srcReport,this.page,this.page.parentDesktop);}else\nthis.executeAction(this.menuItems[cmd].action,callback,srcReport,reportContext,this.page,this.page.parentDesktop);if(!this.isDoAutoCmdFire)\nthis.onDoCmd.fire();}};MacroMenuCommand.prototype.executeAction=function(action,callback,srcReport,reportContext,page,pageContext){if(page&&page.loadingImgDisplay)\nreturn;eval(action);if(callback.callback){callback.callback(srcReport,reportContext,page,pageContext);}}","js/bof/decisionpanel/Portal/PortalManagement/PortalManagementTreeNode.js":"\nvar CatalogTreeNode=jsloader.resolve(\"freequery.tree.CatalogTreeNode\");var PortalService=imports(\"bof.decisionpanel.Portal.PortalService\");var util=jsloader.resolve(\"freequery.common.util\");var modalWindow=resolve(\"freequery.common.modalWindow\");var PortalManagementTreeNode=function(){PortalManagementTreeNode.superclass.constructor.apply(this,arguments);};lang.extend(PortalManagementTreeNode,CatalogTreeNode);PortalManagementTreeNode.prototype.setCatalogInfo=function(catalog){PortalManagementTreeNode.superclass.setCatalogInfo.call(this,catalog);if(catalog.icon){this._icon=catalog.icon;}\nif(catalog.type==\"PAGE\"){var hasChild=catalog.hasChild||this._hasChild;this.setExpanderImg(hasChild);}\nthis.openInNewWindows=catalog.openInNewWindows;};PortalManagementTreeNode.prototype.remoteCallback=function(result){result=this.reInitChildren(result);if(result.succeeded){for(var i=0;i<result.result.length;i++){if(this.tree.searchCondition){if(this.tree.searchNodeIdArray[result.result[i].id]){this.addCatalogTreeNode(result.result[i]);}}else{var node=this.addCatalogTreeNode(result.result[i]);if(node)\nnode.setCheckBoxType(0);}}}else{modalWindow.showServerError(result);}\nthis.isLoading=false;this.initExpanderImg();this.tree.onNodeInitComplete.fire(this.tree,this);};PortalManagementTreeNode.prototype.refreshChildren=function(){var result=util.remoteInvoke(\"CatalogService\",\"getCatalogElementById\",[this._id]);if(result.succeeded){if(result.result)\nthis.setCatalogInfo(result.result);}else\nmodalWindow.showServerError(result);this.initChildren();};PortalManagementTreeNode.prototype.initChildren=function(){this.isLoading=true;this.removeAllChildren();if(this.tree.dynamicLoad){if(this.tree.treePurview)\nutil.remoteInvoke(\"CatalogService\",\"getChildElementsWithPurviewType\",[this._id,this.tree.treePurview],this.remoteCallback,this);else\nutil.remoteInvoke(\"CatalogService\",\"getChildElements\",[this._id],this.remoteCallback,this);}else{var result=null\nif(this.tree.treePurview)\nresult=util.remoteInvoke(\"CatalogService\",\"getChildElementsWithPurviewType\",[this._id,this.tree.treePurview]);else\nresult=util.remoteInvoke(\"CatalogService\",\"getChildElements\",[this._id]);this.remoteCallback(result);this.isLoading=false;this.initExpanderImg();}\nthis._isInitChild=true;};","js/bof/decisionpanel/Portal/PageTree.js":"\nvar CatalogTree=jsloader.resolve(\"freequery.tree.CatalogTree\");var PortalService=imports(\"bof.decisionpanel.Portal.PortalService\");var util=jsloader.resolve(\"freequery.common.util\");var PageTreeNode=jsloader.resolve(\"bof.decisionpanel.Portal.PageTreeNode\");var PageTree=function(parent,desktop){PageTree.superclass.constructor.call(this,parent);this.filterTypes=[\"PUBLIC_PAGES\",\"SELF_PAGES\",\"PAGE\"];this.desktop=desktop;this.dynamicLoad=false;this.isOpenPage=true;};lang.extend(PageTree,CatalogTree);PageTree.prototype.doOnPopupMenu=function(){return false;}\nPageTree.prototype.getPath=function(node){if(node.parentNode&&node.parentNode.text!=\"\"){return this.getPath(node.parentNode)+\" >> \"+node.text;}else{return node.text;}}\nPageTree.prototype.render=function(id){if(!this._isInit){if(!id){if(this.treePurview)\nresult=util.remoteInvokeEx(\"CatalogService\",\"getChildElementsWithPurviewType\",[\"\",this.treePurview]);else\nresult=util.remoteInvokeEx(\"CatalogService\",\"getChildElements\",[\"\"]);if(result){for(var i=0;i<result.result.length;i++){switch(result.result[i].type){case\"PUBLIC_PAGES\":this.rootNode.addCatalogTreeNode(result.result[i]);break;case\"SELF_PAGES\":if(result.result[i].type==\"SELF_PAGES\"){var hasSelfPageManager=util.checkFunctionValid(\"CUSTOM_PORTALMANAGER_SELFPAGEMANAGER\");if(hasSelfPageManager){var isSelfPagesRoot=util.remoteInvokeEx(\"CatalogService\",\"isSelfPagesRoot\",[result.result[i].id]);if(isSelfPagesRoot.result)\nthis.rootNode.addCatalogTreeNode(result.result[i]);}}\nbreak;}}}\nthis.rootNode._isInitChild=true;this.rootNode.setExpanded(true);}else{this.rootNode._id=id;this.rootNode.initChildren();this.rootNode._isInitChild=true;}\nthis._isInit=true;this.dragEnabled=false;}};PageTree.prototype.hideNode=function(node){if(!node){return;}\nnode.prefixSpan.style.display=\"none\";node.expander.style.display=\"none\";node.icon.style.display=\"none\";node.textSpan.style.display=\"none\";}\nPageTree.prototype.hideSecondPageNode=function(){this.hideNode(this.secondPageNode);}\nPageTree.prototype.expandAllDescendant=function(parentId){}\nPageTree.prototype.expandToId=function(id){var ret=util.remoteInvoke(\"CatalogService\",\"getCatalogElementPath\",[id]);if(ret.succeeded){var oldDynamicLoad=this.dynamicLoad;this.dynamicLoad=false;var node=this.rootNode;var fromIndex=0;if(ret.result===undefined){return null;}\nif(node._id!=\"\"){for(fromIndex=0;fromIndex<ret.result.length;fromIndex++)\nif(node._id==ret.result[fromIndex].id)\nbreak;}\nfor(var i=fromIndex;i<ret.result.length;i++){var tmp=node.getChildNodeByNodeId(ret.result[i].id);if(tmp==null)\ncontinue;node.setExpanded(true);node=tmp;}\nthis.selectNode(node);this.dynamicLoad=oldDynamicLoad;return node;}\nreturn null;};PageTree.prototype.doOnMouseDown=function(e){var node=this.getTreeNode(e.target);if(node!=null){if(e.target.className==\"tree_textSpan\"){node.doOnTextSpanMouseDown(e);if(node.openInNewWindows)\nthis.desktop.openPageInNewWindows(node._id);else if(this.isOpenPage)\nthis.desktop.openSubPage(node._id);}else{node.doOnMouseDown(e,e.target);}}}\nPageTree.prototype.createTreeNode=function(text,level,mayHasChild,parent,id){return new PageTreeNode(text,level,mayHasChild,parent,id);};","js/bof/decisionpanel/Portal/PageUtil.js":"\nvar mylang=jsloader.resolve(\"freequery.lang.lang\");var URLLinkCommand=imports(\"freequery.sysresource.URLLinkCommand\");var ParameterPanel=null;var DashletUtil=jsloader.resolve(\"bof.decisionpanel.Portal.Dashlet.util.DashletUtil\");var util=jsloader.resolve(\"freequery.common.util\");var PageUtil=function(pageObj){this.pageObj=pageObj;}\nPageUtil.prototype.initParamPanel=function(){if(!ParameterPanel){jsloader.resolveMany([\"freequery.query.ParameterPanel\",\"freequery.control.ComboBox\",\"freequery.control.DropDownBox\",\"freequery.control.DropDownPanel\",\"freequery.control.DateTimePicker\",\"freequery.thirdparty.Calendar\",\"freequery.control.ReportDatePicker\",\"freequery.control.FreqDatePicker\",\"freequery.control.DropDownTree\",\"freequery.control.DropDownTreePanel\",\"freequery.tree.ParameterTree\",\"freequery.tree.TreeView\",\"freequery.tree.TreeNode\",\"freequery.tree.ParameterTreeNode\",\"freequery.control.ListDialog\",\"freequery.control.TreeDialog\"]);ParameterPanel=jsloader.resolve(\"freequery.query.ParameterPanel\");}\nif(!this.pageObj.paramPanel){if(!this.pageObj.elemParamPanel)\nreturn;this.pageObj.elemParamPanel.height=\"20\";this.pageObj.elemParamPanel.align=this.pageObj.paramAligh;this.pageObj.paramPanel=new ParameterPanel(this.pageObj.elemParamPanel,this.pageObj.viewSlot,(this.pageObj.paramLayout&&this.pageObj.paramLayout.length>0)?this.pageObj.paramLayout:null);this.pageObj.paramPanel.clientId=this.pageObj.paramPanelId;this.pageObj.paramPanel.onEditChange.subscribe(this.pageObj.doParamComboEditChange,this.pageObj);this.pageObj.paramPanel.onSelectChange.subscribe(this.pageObj.doParamChange,this.pageObj);this.pageObj.paramPanel.onResetRelateParamsValue.subscribe(this.pageObj.doResetRelateParamsValue,this.pageObj);this.pageObj.paramPanel.pageBOClient=this.pageObj.pageBO.clientId;this.pageObj.paramPanel.setParamValuesCompositeInvoke=this.setParamValuesCompositeInvoke;this.pageObj.paramPanel.clearSetParamValuesCompositeInvokeCache=this.clearSetParamValuesCompositeInvokeCache;}}\nPageUtil.prototype.setParamValuesCompositeInvoke=function(params){params.splice(0,0,this.pageBOClient);this.setParamValuesCompositeInvokeArrays=params;util.compositeInvoke(\"setParamValuesWithRelatedInPage\",params);}\nPageUtil.prototype.clearSetParamValuesCompositeInvokeCache=function(){util.clearCompositeInvokeCache(\"setParamValuesWithRelatedInPage\",this.setParamValuesCompositeInvokeArrays);}\nPageUtil.prototype.addAllParamToPanel=function(){this.initParamPanel();var paramNum=0;for(var indx in this.pageObj.params){var param=this.pageObj.params[indx];if(param.olapType&&null!=param.olapType&&param.olapType!=\"\")\nparam.type=param.olapType;this.pageObj.addParam(param);if(param.display){paramNum++;}else{this.pageObj.paramPanel.setParamDisplayStyle(param,false);}}\nvar hiddenPNum=0;var hiddenParamList=this.pageObj.hiddenParamList;if(hiddenParamList){for(var ind in hiddenParamList){var p=hiddenParamList[ind];this.pageObj.paramPanel.hiddenParameterByName(p);hiddenPNum++;}}\nif((paramNum==0||hiddenPNum==paramNum)&&this.pageObj.elemParamPanel){this.pageObj.elemParamPanel.style.display=\"none\";}\nthis.pageObj.setUrlParamValue();}\nPageUtil.prototype.setUrlParamValue=function(){var urlParams=this.pageObj.InteractParamList;if(!urlParams)\nreturn;if(!this.pageObj.changeParamMap){this.pageObj.changeParamMap=new Array();}\nthis.pageObj.paramPanel.setAutoCommit(false);var tmpManualParamStandByValues=new Array();var i=0;for(indx2 in this.pageObj.params){var pid=\"\";for(indx in urlParams){urlParam=urlParams[indx];if(!urlParam.id)\nurlParam.id=urlParam.name;if(urlParam.name==this.pageObj.params[indx2].name){pid=this.pageObj.params[indx2].id;break;}}\nif(pid==\"\")\ncontinue;this.pageObj.setParamValue(pid,urlParam.value,urlParam.displayValue);tmpManualParamStandByValues[pid]=urlParam.stanbyValue;var supParams=this.pageObj.supperPublicParams;if(urlParam.groupType==\"groupById\"){for(sIndx in supParams){var sParam=supParams[sIndx];if(sParam.id==urlParam.id){this.pageObj.hiddenParameterById(pid);this.pageObj.changeParamMap[pid]=pid;i++;break;}}}else if(urlParam.groupType==\"groupByName\"){for(sIndx in supParams){var sParam=supParams[sIndx];if(sParam.name==urlParam.name){this.pageObj.hiddenParameterById(pid);this.pageObj.changeParamMap[urlParam.name]=urlParam.name;i++;break;}}}}\nif(this.pageObj.params&&i==this.pageObj.params.length){this.pageObj.elemParamPanel.style.display=\"none\";}\nthis.pageObj.paramPanel.manualParamStandByValues=tmpManualParamStandByValues;this.pageObj.paramPanel.commit();this.pageObj.paramPanel.setAutoCommit(true);}\nPageUtil.prototype.addParam=function(param,isReplace){if(!this.pageObj.paramPanel)\nthis.pageObj.initParamPanel();this.pageObj.paramPanel.addParam(param);}\nPageUtil.prototype.getParamDefaultValue=function(paramId){return this.pageObj.paramPanel.getParamDefaultValue(paramId);}\nPageUtil.prototype.setParamDefaultValue=function(param,onlyClient){if(!this.pageObj.paramPanel)\nreturn;if(onlyClient){this.pageObj.paramPanel.setParamValue(param.id,param.value,param.displayValue);}else{this.pageObj.setParamValue(param.id,param.value,param.displayValue);}}\nPageUtil.prototype.setParamValue=function(paramId,paramValue,paramDisplayValue){if(null==this.pageObj.params)\nreturn;for(indx in this.pageObj.params){var tmpParam=this.pageObj.params[indx];if(paramId==tmpParam.id||paramId==tmpParam.name){paramId=tmpParam.id;if(tmpParam.value!=paramValue){if(tmpParam.olapType!=\"\"){tmpParam.currentValue=paramValue;tmpParam.currentDisplayValue=paramDisplayValue;}else{tmpParam.value=paramValue;tmpParam.displayValue=paramDisplayValue;}\ntmpParam.hasSetValue=true;}\nbreak;}}\nif(this.pageObj.paramPanel){var ret=this.pageObj.paramPanel.setParamValue(paramId,paramValue,paramDisplayValue);return ret;}\nreturn true;}\nPageUtil.prototype.doParamComboEditChange=function(paramPanel,combo,param,value){if(combo.needChecked){if(!ParamUtil)\nvar ParamUtil=jsloader.resolve(\"bof.decisionpanel.dashboard.parameter.ParamUtil\");if(!paramUtil)\nvar paramUtil=new ParamUtil();var retV=paramUtil.checkedValue(combo,value);if(retV){this.pageObj.doParamChange(paramPanel,param,null,value,null,value);}else{alert(\"输入的值在下拉列表中不存在！\");}}else{this.pageObj.doParamChange(paramPanel,param,null,value,null,value);}}\nPageUtil.prototype.doParamChange=function(paramPanel,param,oldId,newId,oldValue,newValue,relateParam){var dashletIsRefresh=new Array();for(dashletIndx in this.pageObj.dashletList){var dashlet=this.pageObj.dashletList[dashletIndx];for(indx in this.pageObj.paramBean){var dashletParam=this.pageObj.paramBean[indx];if(dashletParam.type==\"PARAM\"&&dashletParam.name==param.name&&dashlet.portlet&&dashletParam.dashletId==dashlet.portlet.portletId&&dashletParam.public2&&!dashletIsRefresh[dashlet.id]){dashletIsRefresh[dashlet.id]=true;dashlet.doParamChange(paramPanel,param,newId,newValue,relateParam);}}}\nfor(indx in this.pageObj.dashletList){var currPortlet=this.pageObj.dashletList[indx].portlet\nif(this.pageObj.dashletList[indx].dashletType==\"URL\"){if(currPortlet&&currPortlet.frame&&currPortlet.frame.contentWindow&&currPortlet.frame.contentWindow.page){var page=currPortlet.frame.contentWindow.page;if(page.changeParamMap&&(page.changeParamMap[param.id]||page.changeParamMap[param.name]))\npage.doParamChange(paramPanel,param,oldId,newId,oldValue,newValue);}}}}\nPageUtil.prototype.hiddenParameterById=function(paramId){this.pageObj.paramPanel.hiddenParameterById(paramId);};PageUtil.prototype.hiddenParameterByName=function(paramName){this.pageObj.paramPanel.hiddenParameterByName(paramName);};PageUtil.prototype.showNestedPage=function(reportId,nestedPageId,paramObjList){var newParamList=null;if(paramObjList){newParamList=new Array();;for(var i=0;i<paramObjList.length;i++){var obj=new Object();obj.id=paramObjList[i].id;obj.name=paramObjList[i].name;obj.value=paramObjList[i].value;obj.displayValue=paramObjList[i].displayValue;newParamList.push(obj);}}\nobj={};obj.tarDashletId=null;obj.srcResId=reportId;var src=\"\";for(idx in this.pageObj.dashletList){var dashlet=this.pageObj.dashletList[idx];if(reportId==dashlet.portlet.portletId){src=dashlet.id\nbreak;}}\nobj.srcDashletId=src;this.pageObj.replaceDashlet(nestedPageId,\"URL\",\"0\",newParamList,obj)}\nPageUtil.prototype.getResourceId=function(){return this.pageObj.pageId;}\nPageUtil.prototype.getResourceType=function(){return\"dashboard\";}\nPageUtil.prototype.findDashletByReportId=function(id){for(var dashLetId in this.pageObj.dashletList){if(this.pageObj.dashletList[dashLetId].currentPortletId==id)\nreturn this.pageObj.dashletList[dashLetId];if(this.pageObj.dashletList[dashLetId].currentPortlet.portletId==id)\nreturn this.pageObj.dashletList[dashLetId];}}\nPageUtil.prototype.findDashletById=function(id){for(var inx in this.pageObj.dashletList){if(this.pageObj.dashletList[inx].id==id)\nreturn this.pageObj.dashletList[inx];}}\nPageUtil.prototype.findDashletBySlotId=function(slotId,indexInSlot){if(slotId<0)\nslotId=0;if(slotId>this.pageObj.slotList.length-1)\nslotId=this.pageObj.slotList.length-1;if(indexInSlot<0)\nindexInSlot=0;if(indexInSlot>this.pageObj.slotList[slotId].childNodes.length)\nindexInSlot=this.pageObj.slotList[slotId].childNodes.length;var dashletSlot=this.pageObj.slotList[slotId].childNodes[indexInSlot];if(dashletSlot&&(dashletSlot.getAttribute(\"bofid\")||dashletSlot.id)){for(var inx in this.pageObj.dashletList){if((this.pageObj.dashletList[inx].id==dashletSlot.getAttribute(\"bofid\"))||(this.pageObj.dashletList[inx].currentPortlet.portletId==dashletSlot.id))\nreturn this.pageObj.dashletList[inx];}}}\nPageUtil.prototype.findSlot=function(resourceId){if(!resourceId){return;}\nfor(slotId in this.pageObj.slotList){var slot=this.pageObj.slotList[slotId];for(indexInSlot=0;indexInSlot<this.pageObj.slotList[slotId].childNodes.length;indexInSlot++){var slotInfo=this.pageObj.slotList[slotId].childNodes[indexInSlot];if(slotInfo.id==resourceId){return{\"slotId\":parseInt(slotId),\"indexInSlot\":parseInt(indexInSlot)};}}}\nfor(var index in this.pageObj.dashletList){if(this.pageObj.dashletList[index].currentPortlet.portletId==resourceId){var dashletId=this.pageObj.dashletList[index].id;for(indx in this.pageObj.dashletLayoutInfoList){var dashletLayoutInfo=this.pageObj.dashletLayoutInfoList[indx];if(dashletLayoutInfo.dashletId==dashletId){return{slotId:parseInt(dashletLayoutInfo.layoutPosition),indexInSlot:parseInt(dashletLayoutInfo.indexInLayout)};}}}}}\nPageUtil.prototype.addDashletToSlot=function(slotId,indexInSlot){if(slotId<0)\nslotId=0;if(slotId>this.pageObj.slotList.length-1)\nslotId=this.pageObj.slotList.length-1;if(indexInSlot<0)\nindexInSlot=0;if(indexInSlot>this.pageObj.slotList[slotId].childNodes.length)\nindexInSlot=this.pageObj.slotList[slotId].childNodes.length;if(slotId>=0&&slotId<this.pageObj.slotList.length){var tempDashlet=this.pageObj.newDashletView(nodeId,type,this.pageObj.slotList[slotId],indexInSlot);return tempDashlet;}else{alert(\"布局位置编号不正确\")}\nreturn null;}\nPageUtil.prototype.openPortletInSlot=function(nodeId,type,slotId,indexInSlot){this.createPortletInSlot(nodeId,type,slotId,indexInSlot);}\nPageUtil.prototype.createPortletInSlot=function(nodeId,type,slotId,indexInSlot){if(slotId<0)\nslotId=0;if(slotId>this.pageObj.slotList.length-1)\nslotId=this.pageObj.slotList.length-1;if(indexInSlot<0)\nindexInSlot=0;if(indexInSlot>this.pageObj.slotList[slotId].childNodes.length)\nindexInSlot=this.pageObj.slotList[slotId].childNodes.length;if(slotId>=0&&slotId<this.pageObj.slotList.length){var oldType=type;var type=DashletUtil.conversionType(type);if(!type)\nalert(\"资源类型不正确\")\nvar tempDashlet=this.pageObj.newDashletView(nodeId,type,this.pageObj.slotList[slotId],indexInSlot);this.pageObj.setReplaceDashlet(tempDashlet,nodeId,type,this.pageObj.slotList[slotId]);tempDashlet.setReplace(true);tempDashlet.openView();this.refreshOther(slotId,tempDashlet.currentPortlet.portletId);return tempDashlet;}\nreturn null;}\nPageUtil.prototype.refreshOther=function(slotId,currentId){if(slotId<0)\nslotId=0;if(slotId>this.pageObj.slotList.length-1)\nslotId=this.pageObj.slotList.length-1;var slot=this.pageObj.slotList[slotId];var len=slot.childNodes.length\nfor(var indexInSlot=0;indexInSlot<len;indexInSlot++){var dashletSlot=slot.childNodes[indexInSlot];if(dashletSlot&&(dashletSlot.getAttribute(\"bofid\")||dashletSlot.id)){for(var inx in this.pageObj.dashletList){if((this.pageObj.dashletList[inx].id==dashletSlot.getAttribute(\"bofid\")&&currentId!=this.pageObj.dashletList[inx].id)||(this.pageObj.dashletList[inx].currentPortlet.portletId==dashletSlot.id&&currentId!=dashletSlot.id)){if(this.pageObj.dashletList[inx].refreshSize){this.pageObj.dashletList[inx].refreshSize();}}}}}}\nPageUtil.prototype.openResourceInNewWindow=function(portletId,paramObjList,isFullWindow){var paramObj=null;if(paramObjList&&paramObjList.length>0)\nparamObj=mylang.toJSONString(paramObjList);if(!portletId)\nreturn;try{var Configuration=imports(\"Configuration\").getInstance();if(Configuration.extensionPoints.PageUtil){var cls=Configuration.extensionPoints.PageUtil;var clsObj=jsloader.resolve(cls.className);var clsInst=new clsObj();if(clsInst.openResourceInNewWindow(portletId,paramObj))\nreturn;}}catch(e){}\nvar url=\"openresource.jsp?notNeedLogon=true&refresh=true\"\n+\"&showtoolbar=true&ingress=portal&resid=\"+portletId;var setting={autoLogin:true,isBrowseModule:true,params:paramObj,isFullWindow:isFullWindow};if(!this.pageObj.urlLinkCommand)\nthis.pageObj.urlLinkCommand=new URLLinkCommand();this.pageObj.urlLinkCommand.openInNewWindow(url,setting);}\nPageUtil.prototype.openPageInNewWindowWithExternalCall=function(portletId,paramObjList){var obj=window;var maxLevel=10;while(obj&&!obj.onBiOfficeInteractionOpenNewPage&&maxLevel>0){obj=obj.parent;maxLevel=maxLevel-1;}\nif(obj.onBiOfficeInteractionOpenNewPage){var tPageId=portletId;var url=jsloader.baseHref\n+\"openresource.jsp?restype=PAGE\"\n+\"&resid=\"+tPageId\nvar urlParamStr=\"\";if(paramObjList){for(var paraIndx in paramObjList){paramObjList[paraIndx].groupType=\"\";}\nvar paramObjStr=lang.toJSONString(paramObjList);var encodedParamObjStr=escape(encodeURIComponent(paramObjStr));urlParamStr=\"&urlParams=\"+encodedParamObjStr;}\nvar tPageAlias=\"临时页面\";var ret=util.remoteInvokeEx(\"DPPortalService\",\"getPageById\",[tPageId]);if(ret.succeeded&&ret.result){tPageAlias=ret.result.alias;}\ntry{var uid=tPageId;obj.onBiOfficeInteractionOpenNewPage(uid,tPageAlias,url,urlParamStr);}catch(e){}}else{this.openResourceInNewWindow(portletId,paramObjList);}}\nPageUtil.prototype.fillParamValueFromObj=function(pName,param){if(!param.value){alert(\"参数格式不正确\");return;}\nthis.pageObj.fillParamValue(pName,param.value,param.displayValue);}\nPageUtil.prototype.fillParamValue=function(pName,value,displayValue){this.pageObj.setParamValue(pName,value,displayValue);}\nPageUtil.prototype.setParamValueToPortlet=function(pName,pValue,pDisplayValue){for(dashletIndx in this.pageObj.dashletList){var currPortlet=this.pageObj.dashletList[dashletIndx].currentPortlet;if(!currPortlet)\ncontinue;if(this.pageObj.dashletList[dashletIndx].dashletType==\"URL\"){if(currPortlet&&currPortlet.frame&&currPortlet.frame.contentWindow&&currPortlet.frame.contentWindow.page){var page=currPortlet.frame.contentWindow.page;if(page.changeParamMap&&page.changeParamMap[param.id]){page.setParamValueToPortlet(paramPanel,param,oldId,pValue,oldValue,pDisplayValue);continue;}}}\nfor(indx in this.pageObj.paramBean){var param=this.pageObj.paramBean[indx];if(param.type==\"PARAM\"&&param.name==pName&&param.dashletId==currPortlet.portletId&&param.public2){currPortlet.fillParamValue(param.name,pValue,pDisplayValue);}}}}\nPageUtil.prototype.commitParamValue=function(){for(indx in this.pageObj.params){var param=this.pageObj.params[indx];if(util.isOLAPParam(param))\nthis.pageObj.setParamValueToPortlet(param.name,param.currentValue,param.currentDisplayValue);else\nthis.pageObj.setParamValueToPortlet(param.name,param.value,param.displayValue);}\nfor(dashletIndx in this.pageObj.dashletList){var currPortlet=this.pageObj.dashletList[dashletIndx].currentPortlet;if(this.pageObj.dashletList[dashletIndx].dashletType==\"URL\"){if(currPortlet&&currPortlet.frame&&currPortlet.frame.contentWindow&&currPortlet.frame.contentWindow.page){var page=currPortlet.frame.contentWindow.page;page.commitParamValue();}}else{if(currPortlet.commitParamValue){currPortlet.commitParamValue();}}}}\nPageUtil.prototype.refreshData=function(){for(indx in this.pageObj.dashletList){var currPortlet=this.pageObj.dashletList[indx].currentPortlet\ncurrPortlet.refresh();}}\nPageUtil.prototype.getParamValueByName=function(pName){for(indx in this.pageObj.params){var param=this.pageObj.params[indx];if(pName==param.name){if(!param.display){var valAndDisplay=this.pageObj.paramPanel.getServerParamValueAndDisplayValue(param.id);param.value=valAndDisplay[0];param.displayValue=valAndDisplay[1];}\nreturn param;}}};PageUtil.prototype.getParamTagByName=function(pName){return this.pageObj.paramPanel.getParamTagByParamName(pName);};PageUtil.prototype.getPublicParams=function(){return this.pageObj.params;}\nPageUtil.prototype.openPageInSlot=function(nodeId,type,slotId,indexInSlot,paramObjList){if(!type){alert(\"资源类型不正确\");return;}\nif(slotId<0)\nslotId=0;if(slotId>this.pageObj.slotList.length-1)\nslotId=this.pageObj.slotList.length-1;if(indexInSlot<0)\nindexInSlot=0;if(indexInSlot>this.pageObj.slotList[slotId].childNodes.length)\nindexInSlot=this.pageObj.slotList[slotId].childNodes.length;if(slotId>=0&&slotId<this.pageObj.slotList.length){var tempDashlet=this.pageObj.newDashletView(nodeId,type,this.pageObj.slotList[slotId],indexInSlot);tempDashlet.setReplace(true);tempDashlet.setMacroParams(paramObjList);this.pageObj.setReplaceDashlet(tempDashlet,nodeId,type,this.pageObj.slotList[slotId]);tempDashlet.isInnerPage=true;tempDashlet.openView();return tempDashlet;}\nreturn null;}\nPageUtil.prototype.mergeParamToPublic=function(paramName,portletId,portlet,mergeType){if(!paramName||!portlet||!portletId)\nreturn;for(pubIndx in this.pageObj.paramBean){var publicParam=this.pageObj.paramBean[pubIndx];if(paramName==publicParam.name&&publicParam.type==\"PARAMGROUP\"){var reportParams=portlet.getReportParams();for(indx in reportParams){var param=reportParams[indx];if(param.name==paramName){var paramId=\"\";if(param.dataSource)\nparamId=\"PARAM.\"+(param.dataSource.id).split(\".\")[1]+\".\"+paramName;if(param.id==publicParam.id||(param.dataSource&&paramId==publicParam.id)){var param2=new Object();param2.name=paramName;param2.dashletId=portletId;param2.public2=true;param2.type=\"PARAM\";param2.id=param.id;this.pageObj.paramBean.push(param2);portlet.hiddenParam();if(!publicParam.hidden)\nthis.pageObj.setParamDisplayStyle(publicParam,true);}\nbreak;}}\nbreak;}}}\nPageUtil.prototype.showSingle=function(dashlet){var dParentNode=dashlet.frameDiv.parentNode;for(var slotId in this.pageObj.slotList){var slotDiv=this.pageObj.slotList[slotId];if(slotDiv!=dParentNode){slotDiv.style.display=\"none\";}\nif(slotDiv.parentNode!=dParentNode.parentNode){slotDiv.parentNode.style.display=\"none\";}}\nfor(var dashLetId in this.pageObj.dashletList){if(dashlet!=this.pageObj.dashletList[dashLetId]){this.pageObj.dashletList[dashLetId].hidden();}}}\nPageUtil.prototype.showWhole=function(dashlet){for(var slotId in this.pageObj.slotList){var slotDiv=this.pageObj.slotList[slotId];slotDiv.parentNode.style.display=\"\";slotDiv.style.display=\"\";}\nfor(var dashLetId in this.pageObj.dashletList){this.pageObj.dashletList[dashLetId].show();}\nfor(var dashLetId in this.pageObj.dashletList){this.pageObj.dashletList[dashLetId].afterShow();}}\nPageUtil.prototype.showDashletSkin=function(showOrHide){var isVisible=(showOrHide==false)?false:true;var dashlet=null;for(idx in this.pageObj.dashletList){dashlet=this.pageObj.dashletList[idx];if(!dashlet)continue;if(isVisible){if(dashlet.showSkin)dashlet.showSkin();}else{if(dashlet.hideSkin)dashlet.hideSkin();}\ndashlet=null;}}\nPageUtil.prototype.switchDashletSkinVisibility=function(){if(false==this.pageObj.dashletSkinVisibilitySwitchEnable)return;if(this.pageObj.dashletSkinDisplay){this.pageObj.showDashletSkin(false);this.pageObj.dashletSkinDisplay=false;}else{this.pageObj.showDashletSkin(true);this.pageObj.dashletSkinDisplay=true;}\nthis.pageObj.refreshSize();}\nPageUtil.prototype.initDashletSkinDisplay=function(){var tOpts=registry.get(\"dashletOptions\");if(tOpts&&tOpts.skinDisplay){if(tOpts.skinDisplay==\"title_border\"){this.pageObj.dashletSkinDisplay=true;this.pageObj.dashletSkinVisibilitySwitchEnable=false;}else{this.pageObj.dashletSkinDisplay=false;}}}\nPageUtil.prototype.isDashletSkinDisplay=function(){return(this.pageObj.dashletSkinDisplay==true);}\nPageUtil.prototype.showBorder=function(showBorder){this.pageObj.showBorderValue=showBorder;this.pageObj.dashletSkinDisplay=false;var tOpts=registry.get(\"dashletOptions\");if(!tOpts){var dashletOptions={};dashletOptions.skinDisplay=showBorder;registry.put(\"dashletOptions\",dashletOptions);}};PageUtil.prototype.fqReportRef=function(dashlet){dashlet.destroy();dashlet.openView();}\nPageUtil.prototype.getPortletInfo=function(portletId){if(this.pageObj.pageBO&&this.pageObj.pageBO.resList&&this.pageObj.pageBO.resList.length>0){for(i in this.pageObj.pageBO.resList){if(this.pageObj.pageBO.resList[i]&&this.pageObj.pageBO.resList[i].id==portletId)\nreturn this.pageObj.pageBO.resList[i];}}}\nPageUtil.prototype.hasDashlet=function(){return(this.pageObj.dashletList&&this.pageObj.dashletList.length>0);}\nPageUtil.prototype.getDashletFrameHeight=function(){if(!this.pageObj.elemheight)\nthis.pageObj.elemheight=this.pageObj.viewSlot.offsetHeight;var height=this.pageObj.elemheight;if(this.hasVisibleParameter()){height=height-parseInt(this.pageObj.elemParamPanel.offsetHeight);}\nvar hiddenDivHeight=15;height=height-hiddenDivHeight;return height;}\nPageUtil.prototype.hasVisibleParameter=function(){if(this.pageObj.params&&this.pageObj.params.length>0){for(var idx in this.pageObj.params){if(this.pageObj.params[idx].display==true){return true;}}}\nreturn false;}\nPageUtil.prototype.refreshSize=function(){for(indx in this.pageObj.dashletList){this.pageObj.dashletList[indx].refreshSize();}};PageUtil.prototype.setInnerPage=function(innerPage,publicParams){this.pageObj.innerPage=innerPage;this.pageObj.supperPublicParams=publicParams;};PageUtil.prototype.setStyleForReport=function(){for(idx in this.pageObj.dashletList){var reportPortlet=this.pageObj.dashletList[idx].portlet;if(reportPortlet&&reportPortlet.getPortletType()==\"SimpleReport\"){if(!reportPortlet.getPortletObject())\nreturn;var query=reportPortlet.getPortletObject();query.outerTable.style.tableLayout=\"fixed\";query.outerTable.style.height=\"100%\";}}}\nPageUtil.prototype.destroyOrRefreshInnerPage=function(isRefresh,paramObjList){if(this.pageObj.urlReplaceDashlet){var frm=this.pageObj.urlReplaceDashlet.portlet.frame;if((frm&&frm.contentWindow)){var page=frm.contentWindow.page;if(page){if(isRefresh)\npage.refSelfPage(paramObjList);else\npage.destroy();}}}}\nPageUtil.prototype.getNewDashletSlot=function(selfDashletId){if(!selfDashletId){selfDashletId=this.pageObj.dashletInfoList[this.pageObj.dashletInfoList.length-1].id;}\nfor(dashletLayoutInfoIdx in this.pageObj.dashletLayoutInfoList){var slotIndex=this.pageObj.dashletLayoutInfoList[dashletLayoutInfoIdx].layoutPosition+1;if(slotIndex<0||slotIndex>=this.pageObj.slotList.length)\nslotIndex=this.pageObj.slotList.length-1;if(selfDashletId==this.pageObj.dashletLayoutInfoList[dashletLayoutInfoIdx].dashletId){var slot=this.pageObj.slotList[slotIndex];return slot;}}\nreturn this.pageObj.slotList[this.pageObj.slotList.length-1];}\nPageUtil.prototype.setRefPortlet=function(param,alias){if(!this.pageObj.changePortlet)\nthis.pageObj.changePortlet=new Array();var publicParam=this.pageObj.paramToPortlets[param.alias];if(publicParam&&publicParam.length!=0){for(var i=0;i<publicParam.length;i++){var paraId=publicParam[i].id;if(paraId==param.id){publicParam[i].value=param.value;var portlet=publicParam[i].portlet;if(portlet.clientId&&portlet.alias!=alias){if(!this.pageObj.changePortlet[portlet.alias]){this.pageObj.changePortlet[portlet.alias]=new Array();this.pageObj.changePortlet[portlet.alias].push(portlet);}\nportlet.setParamDefaultValue(param,true);}}}}}\nPageUtil.prototype.refSelfPage=function(paramObjList){var portlet=null;for(dashletIndex in this.pageObj.dashletList){portlet=this.pageObj.dashletList[dashletIndex].portlet;var query=portlet.getPortletObject();if(query){this.pageObj.refSelfPagePortlet(paramObjList,query);}}}\nPageUtil.prototype.refSelfPagePortlet=function(paramObjList,query){var hasRefresh=false;for(inx in paramObjList){var param=paramObjList[inx];if(param){var portletParam=null;for(index in query.params){portletParam=query.params[index];if(param.name==portletParam.name){if(portletParam.value!=param.value){var hasSetParamValue=true;}\nportletParam.value=param.value;portletParam.displayValue=param.displayValue;hasRefresh=true;break;}}\nif(hasRefresh){query.setParamDefaultValue(portletParam,true);if(hasSetParamValue)\nquery.setParamValue(portletParam.id,portletParam.value,portletParam.displayValue);if(this.pageObj.paramPanel){this.pageObj.paramPanel.setParamValue\n(portletParam.id,portletParam.value,portletParam.displayValue);}}}}\nif(hasRefresh)\nquery.refreshData(true);}\nPageUtil.prototype.verticalScrollBarAppeared=function(){var viewSlot=this.pageObj.viewSlot;if(viewSlot){return viewSlot&&(viewSlot.offsetTop>0||viewSlot.scrollHeight>viewSlot.offsetHeight);}else{return false;}}\nPageUtil.prototype.initParamPanel=function(){if(!ParameterPanel){jsloader.resolveMany([\"freequery.query.ParameterPanel\",\"freequery.control.ComboBox\",\"freequery.control.DropDownBox\",\"freequery.control.DropDownPanel\",\"freequery.control.DateTimePicker\",\"freequery.thirdparty.Calendar\",\"freequery.control.ReportDatePicker\",\"freequery.control.FreqDatePicker\",\"freequery.control.DropDownTree\",\"freequery.control.DropDownTreePanel\",\"freequery.tree.ParameterTree\",\"freequery.tree.TreeView\",\"freequery.tree.TreeNode\",\"freequery.tree.ParameterTreeNode\",\"freequery.control.ListDialog\",\"freequery.control.TreeDialog\"]);ParameterPanel=jsloader.resolve(\"freequery.query.ParameterPanel\");}\nif(!this.pageObj.paramPanel){if(!this.pageObj.elemParamPanel)\nreturn;if(domutils.isMobile()){var mobileDiv=document.createElement(\"div\");mobileDiv.style.width=document.body.clientWidth;mobileDiv.style.overflow=\"auto\";this.pageObj.elemParamPanel.appendChild(mobileDiv);this.pageObj.elemParamPanel=mobileDiv;}\nthis.pageObj.elemParamPanel.height=\"20\";this.pageObj.elemParamPanel.align=this.pageObj.paramAligh;this.pageObj.paramPanel=new ParameterPanel(this.pageObj.elemParamPanel,this.pageObj.viewSlot,(this.pageObj.paramLayout&&this.pageObj.paramLayout.length>0)?this.pageObj.paramLayout:null);this.pageObj.paramPanel.clientId=this.pageObj.paramPanelId;this.pageObj.paramPanel.onEditChange.subscribe(this.pageObj.doParamComboEditChange,this.pageObj);this.pageObj.paramPanel.onSelectChange.subscribe(this.pageObj.doParamChange,this.pageObj);this.pageObj.paramPanel.onResetRelateParamsValue.subscribe(this.pageObj.doResetRelateParamsValue,this.pageObj);if(!window.bof_offline_xhr){this.pageObj.paramPanel.pageBOClient=this.pageObj.pageBO.clientId;this.pageObj.paramPanel.setParamValuesCompositeInvoke=this.setParamValuesCompositeInvoke;this.pageObj.paramPanel.clearSetParamValuesCompositeInvokeCache=this.clearSetParamValuesCompositeInvokeCache;}}}","js/bof/decisionpanel/Portal/PortalService.js":"\nvar PortalService=function()\n{};lang.extend(PortalService,\"bof.decisionpanel.portal.DPPortalServiceStub\");","js/bof/decisionpanel/Portal/ScrollableWrapper.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var ScrollableWrapper=function(originalElement,options,debugSlot){this.originalElement=originalElement;this.parent=this.originalElement.parentNode;this.debugSlot=debugSlot||null;this.options=options||{};this.classNames=this.options.classNames||{};this.scrollStep=this.options.scrollStep||100;this.buttonPosition=this.options.buttonPosition?this.options.buttonPosition.toUpperCase():\"ALL_RIGHT\";this.enableMarquee=this.options.enableMarquee||false;this.marqueeSpeed=this.options.marqueeSpeed||100;this.marqueeStep=this.options.marqueeStep||20;this.container=domutils.createElement(\"div\");if(this.classNames.container)\nthis.container.className=this.classNames.container;this.parent.appendChild(this.container);if(this.options.containerWidth)\nthis.container.style.width=this.options.containerWidth;if(this.options.containerHeight)\nthis.container.style.height=this.options.containerHeight;this.swStripSpacer=domutils.createElement(\"div\");if(this.classNames.swStripSpacer)\nthis.swStripSpacer.className=this.classNames.swStripSpacer;this.container.appendChild(this.swStripSpacer);this.swScrollLeft=null;this.btnScrollRight=null;this.swScrollLeft=null;this.btnScrollLeft=null;if(\"ALL_LEFT\"==this.buttonPosition){this.createScrollLeftHandle();this.createScrollRightHandle();}else{this.createScrollRightHandle();this.createScrollLeftHandle();}\nthis.swStripWrap=domutils.createElement(\"div\");if(domutils.isChrome()||domutils.isSafari()){this.swStripWrap.style.width=\"inherit\";}\nif(domutils.isIE()&&domutils.getBrowserVersion()>9&&document.documentMode&&document.documentMode>9){this.swStripWrap.style.width=\"inherit\";}\nif(this.classNames.swStripWrap)\nthis.swStripWrap.className=this.classNames.swStripWrap;this.container.appendChild(this.swStripWrap);this.swStripWrap.appendChild(this.originalElement);this.refreshScrollButton();this.addListener(this.btnScrollLeft,\"click\",this.scrollToLeft,this);this.addListener(this.btnScrollRight,\"click\",this.scrollToRight,this);if(this.enableMarquee){this.addListener(this.btnScrollLeft,\"mousedown\",this.startMarqueeLeft,this);this.addListener(this.btnScrollLeft,\"mouseup\",this.stopMarqueeLeft,this);this.addListener(this.btnScrollRight,\"mousedown\",this.startMarqueeRight,this);this.addListener(this.btnScrollRight,\"mouseup\",this.stopMarqueeRight,this);}}\nlang.extend(ScrollableWrapper,Module);ScrollableWrapper.prototype.destroy=function(){this.removeListener(this.btnScrollLeft,\"click\",this.scrollToLeft);this.removeListener(this.btnScrollRight,\"click\",this.scrollToRight);if(this.enableMarquee){this.stopAllMarquee();this.removeListener(this.btnScrollLeft,\"mousedown\",this.startMarqueeLeft);this.removeListener(this.btnScrollLeft,\"mouseup\",this.stopMarqueeLeft);this.removeListener(this.btnScrollRight,\"mousedown\",this.startMarqueeRight);this.removeListener(this.btnScrollRight,\"mouseup\",this.stopMarqueeRight);}\nScrollableWrapper.superclass.destroy.call(this);}\nScrollableWrapper.prototype.createScrollRightHandle=function(){this.swScrollRight=domutils.createElement(\"div\");if(this.classNames.swScrollRight)\nthis.swScrollRight.className=this.classNames.swScrollRight;if(this.buttonPosition==\"ALL_LEFT\"){this.swScrollRight.style.styleFloat=\"left\";}else{this.swScrollRight.style.styleFloat=\"right\";}\nthis.container.appendChild(this.swScrollRight);this.btnScrollRight=domutils.createElement(\"span\");if(this.classNames.btnScrollRightEnabled)\nthis.btnScrollRight.className=this.classNames.btnScrollRightEnabled;this.swScrollRight.appendChild(this.btnScrollRight);}\nScrollableWrapper.prototype.createScrollLeftHandle=function(){this.swScrollLeft=domutils.createElement(\"div\");if(this.classNames.swScrollLeft)\nthis.swScrollLeft.className=this.classNames.swScrollLeft;if(this.buttonPosition==\"ALL_RIGHT\"){this.swScrollLeft.style.styleFloat=\"right\";}else{this.swScrollLeft.style.styleFloat=\"left\";}\nthis.container.appendChild(this.swScrollLeft);this.btnScrollLeft=domutils.createElement(\"span\");if(this.classNames.btnScrollLeftEnabled)\nthis.btnScrollLeft.className=this.classNames.btnScrollLeftEnabled;this.swScrollLeft.appendChild(this.btnScrollLeft);}\nScrollableWrapper.prototype.refreshScrollButton=function(){var eTarget=this.swStripWrap;var btnScrollLeft=this.btnScrollLeft;var btnScrollRight=this.btnScrollRight;var canScrollLeft=(eTarget.clientWidth>0)&&(eTarget.scrollLeft>0);var canScrollRight=(eTarget.clientWidth>0)&&(eTarget.scrollWidth>eTarget.scrollLeft+eTarget.clientWidth);if(!canScrollLeft&&!canScrollRight)\n{btnScrollLeft.style.display='none';btnScrollRight.style.display='none';return;}else\n{btnScrollLeft.style.display='block';btnScrollRight.style.display='block';}\nif(canScrollLeft)\n{btnScrollLeft.className=this.classNames.btnScrollLeftEnabled;}else\n{btnScrollLeft.className=this.classNames.btnScrollLeftDisabled;}\nif(canScrollRight)\n{btnScrollRight.className=this.classNames.btnScrollRightEnabled;}\nelse\n{btnScrollRight.className=this.classNames.btnScrollRightDisabled;}}\nScrollableWrapper.prototype.swScroll=function(direction,step)\n{var eTarget=this.swStripWrap;var tStep=step||this.scrollStep;if(direction=='left'){eTarget.scrollLeft-=eval(tStep);}else if(direction=='right')\n{eTarget.scrollLeft+=eval(tStep);}\nthis.writeDebugInfo();this.refreshScrollButton();}\nScrollableWrapper.prototype.scrollToRightMost=function(){var eTarget=this.swStripWrap;var canScrollRight=(eTarget.clientWidth>0)&&(eTarget.scrollWidth>eTarget.scrollLeft+eTarget.clientWidth);var maxLoop=999;while(canScrollRight&&maxLoop>0){eTarget.scrollLeft+=eval(this.scrollStep);canScrollRight=(eTarget.clientWidth>0)&&(eTarget.scrollWidth>eTarget.scrollLeft+eTarget.clientWidth);maxLoop=maxLoop-1;}\nthis.refreshScrollButton();}\nScrollableWrapper.prototype.scrollToLeft=function(){this.swScroll('left');}\nScrollableWrapper.prototype.scrollToRight=function(){this.swScroll('right');}\nScrollableWrapper.prototype.startMarqueeLeft=function(){this.stopAllMarquee();var obj=this;this.marLeft=window.setInterval(function(){obj.swScroll('left',obj.marqueeStep);},obj.marqueeSpeed);}\nScrollableWrapper.prototype.stopMarqueeLeft=function(){if(this.marLeft){window.clearInterval(this.marLeft);}}\nScrollableWrapper.prototype.startMarqueeRight=function(){this.stopAllMarquee();var obj=this;this.marRight=window.setInterval(function(){obj.swScroll('right',obj.marqueeStep);},obj.marqueeSpeed);}\nScrollableWrapper.prototype.stopMarqueeRight=function(){if(this.marRight){window.clearInterval(this.marRight);}}\nScrollableWrapper.prototype.stopAllMarquee=function(){this.stopMarqueeLeft();this.stopMarqueeRight();}\nScrollableWrapper.prototype.writeDebugInfo=function(){if(!this.isDebug())return;this.debugSlot.innerHTML=\"scrollLeft = \"+this.swStripWrap.scrollLeft;}\nScrollableWrapper.prototype.isDebug=function(){return(this.debugSlot);}","js/freequery/actions/AbstractTabAction.js":"\nvar AbstractTabAction=function(treeSlot,toolbarSlot,viewSlot,leftPane,splitter,tabSlot,locationSlot,viewClass){this.treeSlot=treeSlot;this.toolbarSlot=toolbarSlot;this.viewSlot=viewSlot;this.leftPane=leftPane;this.splitter=splitter;this.tabSlot=tabSlot;this.locationSlot=locationSlot;this.viewClass=viewClass;this.status=\"hidden\";this.tabView=null;};lang.extend(AbstractTabAction,\"bof.baseajax.common.CompositeAction\");AbstractTabAction.prototype.open=function(arg){if(this.resolveMany){jsloader.resolveMany(this.resolveMany);this.resolveMany=null;}\nvar isNew=!this.tabView;if(isNew){var Klass=this.viewClass;this.tabView=new Klass(this.tabSlot);this.initActions();}\nif(this.status==\"hidden\"){if(!isNew)\nthis.refreshActions();if(this.lastSavedActionId){for(var i=0;i<this.actions.length;i++){if(this.actions[i].id==this.lastSavedActionId){this.initialAction=this.actions[i];break;}}\nthis.lastSavedActionId=null;}\nvar initialAction=this.initialAction;if(arg&&arg.ignoreSubActions){initialAction=null;}\nthis.tabView.updateActions(this.actions,initialAction);this.defaultActionGroup.onChange.subscribe(this.doDefaultActionGroupChange,this);var shown=this.tabView.show();if(initialAction==null){;}else if(shown){;}else{var found=false;for(var i=0;i<this.actions.length;i++){if(this.actions[i].isValid(\"open\")){found=true;this.actions[i].execute(\"open\");break;}}\nif(!found)\nreturn false;}\nthis.status=\"shown\";}\nreturn true;};AbstractTabAction.prototype.close=function(arg){if(this.defaultActionGroup){this.defaultActionGroup.defaultAction=null;if(this.defaultActionGroup.currentAction){this.lastSavedActionId=this.defaultActionGroup.currentAction.id;this.defaultActionGroup.onChange.unsubscribe(this.doDefaultActionGroupChange,this);this.defaultActionGroup.currentAction.execute(\"close\");}}\nif(this.tabView&&this.status==\"shown\"){this.tabView.hide();this.status=\"hidden\";}\nreturn true;};AbstractTabAction.prototype.destroy=function(){AbstractTabAction.superclass.destroy.call(this);this.destroyActions();if(this.tabView){this.tabView.destroy();this.tabView=null;}};AbstractTabAction.prototype.doDefaultActionGroupChange=function(){this.tabView.refresh();}","js/freequery/control/BaseGrid.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var util=jsloader.resolve(\"freequery.common.util\");var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");var BaseGrid=function(parentObject,mainTable){this.parent=parentObject;this.mainTable=mainTable;if(this.mainTable){this.initFromHTML=true;}else{this.mainTable=document.createElement(\"table\");this.mainTable.setAttribute(\"id\",\"_baseGrid\");this.tBody=document.createElement(\"tbody\");this.mainTable.className=\"table-grid\";this.mainTable.cellSpacing=0;this.mainTable.cellpadding=1;this.parent.appendChild(this.mainTable);this.mainTable.appendChild(this.tBody);}\nthis.colVisible=new Array();this.tmpCellObj;this.tmpCellData;this.headerClassNames=[\"table-grid-top\",\"table-grid-top-cell\",\"table-grid-top-span\",\"table-grid-top-resizeDivClass\",\"table-grid-top-span-sp\"];this.selectedRow=null;this.rowHeight=null;this.fontSize=null;this.onDelColumn=new CustomEvent(\"delColumn\",this);this.onNewColumn=new CustomEvent(\"newColumn\",this);this.onResizeend=new CustomEvent(\"onResizeend\",this);this.onClick=new CustomEvent(\"onClick\",this);this.onDblClick=new CustomEvent(\"onDblClick\",this);this.addListener(this.mainTable,\"click\",this.doOnCellClick,this);this.addListener(this.mainTable,\"click\",this.doRowSelect,this);this.addListener(this.mainTable,\"dblclick\",this.doOnCellDblClick,this);this.backupMainTable=this.mainTable;this.backupOnDelColumn=this.onDelColumn;}\nlang.extend(BaseGrid,Module);BaseGrid.prototype.getTBody=function(){if(!this.tBody&&this.initFromHTML)\nthis.tBody=this.mainTable.tBodies[0];return this.tBody;};BaseGrid.prototype.getGroupCol=function(fieldId){var cols=this.mainTable.getElementsByTagName(\"COL\");if(cols){for(var i=0,len=cols.length;i<len;i++){if(cols[i].fid==fieldId)\nreturn cols[i];}}\nreturn null;};BaseGrid.prototype.destroy=function(){this.removeListener(this.mainTable,\"click\",this.doOnCellClick);this.removeListener(this.mainTable,\"dblclick\",this.doOnCellDblClick);this.removeListener(this.mainTable,\"click\",this.doRowSelect);this.selectedRow=null;this.onDelColumn=null;this.backupOnDelColumn=null;this.onNewColumn=null;this.colVisible=null;try{domutils.destroyNode(this.mainTable);}catch(e){}\nthis.mainTable=null;this.parent=null;BaseGrid.superclass.destroy.call(this);};BaseGrid.prototype.getHeaderRowIndex=function(){return 0;};BaseGrid.prototype.newHeader=function(colCaption){var r=null;if(this.mainTable.rows.length<=0)\n{r=document.createElement(\"TR\");this.getTBody().appendChild(r);r.className=this.headerClassNames[0];this.setDomAttribute(r,\"isHeader\",\"true\");}else{r=this.mainTable.rows[this.getHeaderRowIndex()];}\nvar c=document.createElement(\"TD\");r.appendChild(c);c.isHeader=true;var col=document.createElement(\"span\");col.style.width=\"100%\";c.appendChild(col);var resizeTag=document.createElement(\"font\");col.appendChild(resizeTag);resizeTag.className=this.headerClassNames[3];this.addListener(resizeTag,\"mousedown\",this.doResizeTagMouseDown,this);this.addListener(resizeTag,\"mousemove\",this.doResizeTagMouseMove,this);this.addListener(resizeTag,\"mouseup\",this.doResizeTagMouseUp,this);col.className=this.headerClassNames[2];var sp=document.createElement(\"span\");col.appendChild(sp);sp.innerHTML=colCaption;sp.className=this.headerClassNames[4];c.className=this.headerClassNames[1];this.recruitCell();this.onNewColumn.fire(this,c);return c;}\nBaseGrid.prototype.appendCols=function(cols){for(var i=0;i<cols;i++)\n{this.newHeader(\"\");}}\nBaseGrid.prototype.appendRows=function(rows){var cols=this.getColCount();var x=false;var count=this.getTBody().childNodes.length;var rowIndex=this.getHeaderRowIndex();var newTr=null;for(var i=0;i<rows;i++)\n{if(newTr){var r=newTr.cloneNode(true);this.getTBody().appendChild(r);this.resetRowClass(r,i+count);}else{var r=document.createElement(\"TR\");this.getTBody().appendChild(r);this.resetRowClass(r,i+count);for(var j=0;j<cols;j++)\n{var c=document.createElement(\"TD\");r.appendChild(c);if(this.gridBorderColor){c.style.borderRightColor=this.gridBorderColor;c.style.borderBottomColor=this.gridBorderColor;}\nif(this.colVisible[j]===false)\nc.style.display=\"none\";var header=this.getCell(rowIndex,j);if(header){if(header.alignProp)\nc.align=header.alignProp;if(header.style.display==\"none\")\nc.style.display=\"none\";}}\nnewTr=r;}}}\nBaseGrid.prototype.doRowSelect=function(){this.disableOnBlur=false;if(this.selectedRow)\n{this.resetRowClass(this.selectedRow);}\nvar r=this.getClickRow();if((r)&&(!r.cells[0].isHeader))\n{r.className=\"table-grid-row-select table-grid-row\";this.selectedRow=r;}}\nBaseGrid.prototype.doOnCellClick=function(e){if(this.lastClickTime&&(new Date()-this.lastClickTime<500)){return;}\nvar tmpCell=this.getClickCell(e);if(!tmpCell)\nreturn;var index=this.getColumnIndex(tmpCell);var head=this.getColHeader(index);this.lastClickTime=new Date();var row=this.getClickRow(e);this.doRowSelect(e);this.onClick.fire(this,tmpCell,e,head,row);}\nBaseGrid.prototype.doOnCellDblClick=function(){var tmpCell=this.getClickCell();this.onDblClick.fire(this,tmpCell);}\nBaseGrid.prototype.resetRowClass=function(r,index){if(index){rowIndex=index;}else{rowIndex=r.rowIndex;}\nif(rowIndex>0){if(rowIndex%2==0)\nr.className=\"talbe-grid-row-blue table-grid-row\";else\nr.className=\"table-grid-row-green table-grid-row\";}}\nBaseGrid.prototype.getColumnIndex=function(cell){var index=0;var child=cell.previousSibling;while(child){index++;child=child.previousSibling;}\nreturn index;}\nBaseGrid.prototype.setColVisible=function(colIndex,visible){var len=this.getRowCount();for(var i=0;i<len;i++)\n{var r=this.mainTable.rows[i];var index=0;for(var c=0;c<colIndex;){if(r.cells[index].colSpan&&r.cells[index].colSpan>1)\nc+=r.cells[index].colSpan;else\n++c;++index;}\nif(!r.cells[index]){continue;}\nif(!visible){r.cells[index].style.display=\"none\";}else if(domutils.isIE6()||domutils.isIE7()){r.cells[index].style.display=\"block\";}else{r.cells[index].style.display=\"table-cell\";}}\nthis.colVisible[colIndex]=visible;}\nBaseGrid.prototype.resetColsWidth=function(){var count=this.getColCount();for(var i=0;i<count;i++){var c=this.getColHeader(i);if(c){var col=domutils.findElementByClassName([c],this.headerClassNames[2]);var sp=domutils.findElementByClassName([c],this.headerClassNames[4]);var rs=domutils.findElementByClassName([c],this.headerClassNames[3]);var bigWidth=sp.offsetWidth+rs.offsetWidth;if(BaseGrid.MiniColWidth>bigWidth){bigWidth=BaseGrid.MiniColWidth;}\ncol.style.width=bigWidth;}}};BaseGrid.prototype.setColWidth=function(colIndex,width){var c=this.getColHeader(colIndex);if(c)\n{c.style.width=width;}}\nBaseGrid.prototype.getColVisible=function(colIndex){var v=this.colVisible[colIndex];if(v!=null)\nreturn v;else\nreturn true;}\nBaseGrid.prototype.setCellVisible=function(row,col,visible){var c=this.getCell(row,col);if(c)\n{if(visible){if(domutils.isIE6())\nc.style.display=\"block\";}else\nc.style.display=\"none\";}}\nBaseGrid.prototype.getColCount=function(){try\n{return this.getTBody().childNodes[this.getHeaderRowIndex()].childNodes.length;}\ncatch(e)\n{return 0;}}\nBaseGrid.prototype.getRowCount=function(){try\n{return this.getTBody().childNodes.length;}\ncatch(e)\n{return 0;}}\nBaseGrid.prototype.deleteCol=function(colNum){if((colNum>=0)&&(colNum<this.getColCount())){if(this.onDelColumn==null){this.onDelColumn=this.backupOnDelColumn;}\nif(this.mainTable==null){this.mainTable=this.backupMainTable;}\nthis.onDelColumn.fire(this,colNum);this.clearMultiHeader&&this.clearMultiHeader();var rows=this.getRowCount();for(var i=rows-1;i>=0;i--){var r=this.getTBody().childNodes[i];var c=r.childNodes[colNum];domutils.destroyNode(c);if(r.cells.length==0)\ndomutils.destroyNode(r);}\nthis.refreshMultiHeader&&this.refreshMultiHeader();}}\nBaseGrid.prototype.deleteRow=function(rowNum,deleteRowCount){if((rowNum>=0)&&(rowNum<this.getRowCount())){if((deleteRowCount==null)||(deleteRowCount<1)){deleteRowCount=1;}\nvar maxCount=this.getRowCount()-rowNum;if(deleteRowCount>maxCount){deleteRowCount=maxCount;}\nfor(var i=0;i<deleteRowCount;i++){var r=this.getTBody().childNodes[rowNum];domutils.destroyNode(r);}}}\nBaseGrid.prototype.moveRow=function(fromIndex,toIndex){if(fromIndex==toIndex)\nreturn false;var startIndex=this.getHeaderRows();var endIndex=this.getRowCount()-1;if(fromIndex<startIndex||fromIndex>endIndex)\nreturn false;if(toIndex<startIndex||toIndex>endIndex)\nreturn false;var table=this.getTBody();var sourceRow=table.rows[fromIndex];var targetRow=table.rows[toIndex];if(sourceRow==null||targetRow==null)\nreturn false;var targetRowNextRow=fromIndex>toIndex?false:this.getTRNode(targetRow,'nextSibling');if(targetRowNextRow===false)\ntable.insertBefore(sourceRow,targetRow);else{if(targetRowNextRow==null)\ntable.appendChild(sourceRow);else\ntable.insertBefore(sourceRow,targetRowNextRow);}\nreturn true;}\nBaseGrid.prototype.getTRNode=function(nowTR,sibling){while(nowTR=nowTR[sibling]){if(nowTR.tagName=='TR')\nbreak;}\nreturn nowTR;}\nBaseGrid.prototype.recruitCell=function(){var rows=this.getRowCount();var cols=this.getColCount();var r=null;for(var i=0;i<rows;i++)\n{r=this.mainTable.rows[i];var real_tds=0;var cur_cell=null;for(var col=0;col<r.cells.length;col++)\n{cur_cell=r.cells[col];if(cur_cell.className==this.headerClassNames[1])\n{if(cur_cell.colSpan&&cur_cell.colSpan>1)\nreal_tds+=r.cells[col].colSpan;else\n++real_tds;}\nelse\n{real_tds=r.cells.length;break;}}\nif(real_tds<cols)\n{for(var j=real_tds;j<cols;j++)\n{var c=r.insertCell(-1);c.style.cssText=cur_cell.style.cssText;c.innerHTML=\"&nbsp;\";}}}}\nBaseGrid.prototype.getOffsetCell=function(c,offsetRow,offsetCol){var colIndex=this.getColumnIndex(c);var row=c.parentNode;if(offsetRow<0){while(offsetRow++!=0&&row)\nrow=row.previousSibling;}else{while(offsetRow--!=0&&row)\nrow=row.nextSibling;}\nif(!row)\nreturn null;var cell=row.firstChild;while(colIndex--!=0&&cell)\ncell=cell.nextSibling;return cell;}\nBaseGrid.prototype.getCell=function(row,col){if(col>=this.getColCount())\nthrow\"beyond column number!\";if(row>=this.getRowCount())\nthrow\"beyond row number!\";var r=this.getTBody().childNodes[row];try{return r.childNodes[col];}catch(e){return null;}}\nBaseGrid.prototype.getCellText=function(row,col){var cell=this.getCell(row,col);return cell?util.trim(cell.innerText):null;}\nBaseGrid.prototype.setCellText=function(row,col,text){var cell=this.getCell(row,col);this.setCellInnerText(cell,text);var v=this.getColVisible(col);this.setCellVisible(row,col,v);}\nBaseGrid.prototype.setCellInnerText=function(cell,text){if(cell){if((text==''||text==' ')&&domutils.isFirefox()){cell.innerHTML='&nbsp;';}else{cell.innerText=text;}}}\nBaseGrid.prototype.getColHeader=function(colNum){return this.getCell(this.getHeaderRowIndex(),colNum);}\nBaseGrid.prototype.getColHeaders=function(){var heads=new Array();var count=this.getColCount();for(var i=0;i<count;i++)\nheads.push(this.getColHeader(i));return heads;}\nBaseGrid.prototype.setColHeader=function(colNum,caption){var c=this.getColHeader(colNum);var spans=c.getElementsByTagName(\"span\");spans[spans.length-1].innerText=caption;return c;}\nBaseGrid.prototype.getHeaderRows=function(){return 1;}\nBaseGrid.prototype.getClickCell=function(e){var e=eventutil.getEvent(),el=e.target;while((el!=null)&&(el.tagName&&el.tagName.toLowerCase()!=\"td\"))\nel=el.parentNode;if(el)\n{var p=el;while((p!=null)&&(p.tagName&&p.tagName.toLowerCase()!=\"table\"))\np=p.parentNode;if(p!=this.mainTable)\nreturn null;}\nreturn el;}\nBaseGrid.prototype.getClickRow=function(e){var el=this.getClickCell(e);if(el)\nreturn el.parentNode;else\nreturn null;}\nBaseGrid.prototype.getCellByXY=function(x,y,untilEl){var oTable=this.mainTable;var len=oTable.cells.length;for(var i=0;i<len;i++)\n{var p=util.getAbsolutePos(oTable.cells[i],untilEl);if(x>p.x-this.parent.scrollLeft&&x<p.x+oTable.cells[i].offsetWidth-this.parent.scrollLeft&&y>p.y-this.parent.scrollTop&&y<p.y+oTable.cells[i].offsetHeight-this.parent.scrollTop)\n{if(oTable.cells[i].tagName.toLowerCase()==\"td\")\n{return oTable.cells[i];}}}\nreturn null;}\nBaseGrid.prototype.resetTmpCellObj=function(){this.tmpCellObj=new Array();var tr=this.getTBody().childNodes[0];for(var i=0,len=this.getTBody().rows.length;i<len;i++){var td=tr.firstChild;var cellObj=new Array();while(td){cellObj.push(td);td=td.nextSibling;}\nthis.tmpCellObj.push(cellObj);tr=tr.nextSibling;}}\nBaseGrid.prototype.fillData=function(data,realData){var isAppendRows=false;var headerRows=this.getHeaderRows();var row_data_count=data.length;if(row_data_count==0){this.deleteRow(headerRows,this.getRowCount()-headerRows);return true;}\nvar r_data=data[0];var col_data_count=r_data.length;var col_tbl_count=this.getColCount();if(this.getRowCount()-headerRows<row_data_count){domutils.destroyNode(this.getTBody());this.appendRows(row_data_count-this.getRowCount()+headerRows);isAppendRows=true;}\nthis.tmpCellObj=new Array();this.tmpCellData=new Array();var tr=this.getTBody().childNodes[0];for(var i=0;i<headerRows;i++){var td=tr.firstChild;var cellObj=new Array();var cellData=new Array();while(td){cellObj.push(td);cellData.push(td.innerText);td=td.nextSibling;}\nthis.tmpCellObj.push(cellObj);this.tmpCellData.push(cellData);tr=tr.nextSibling;}\nvar tr=this.getTBody().childNodes[headerRows];for(var i=0;i<row_data_count;i++){var td=tr.firstChild;var cellObj=new Array();var cellData=new Array();for(var j=0;j<col_tbl_count;j++){while(td&&td.discardData){cellObj.push(td);td=td.nextSibling;}\nif(!td)\nbreak;var str=data[i][j];if(str===null||str==undefined)\nstr=\"\";var text=str;if(typeof str==\"string\"){str=util.RTrim(str);text=str.replace(/(\\n)|(\\r)/g,function(c){return(c==='\\n')?'<br>':'';}).replace(/[ ]/g,'&nbsp;');}\nif(realData)\ntd.realValue=realData[i][j];td.innerHTML=text;if(typeof str==\"string\"&&!str)\ntd.innerHTML=\"&nbsp;\";cellObj.push(td);cellData.push(str);if(this.fontSize)\ntd.style.fontSize=this.fontSize;td=td.nextSibling;}\nthis.tmpCellObj.push(cellObj);this.tmpCellData.push(cellData);if(this.rowHeight)\ntr.style.height=this.rowHeight;tr=tr.nextSibling;}\nif(row_data_count<this.getRowCount()-headerRows){this.deleteRow(headerRows+row_data_count,this.getRowCount()-row_data_count-headerRows);}\nif(!this.mainTable.tBodies[0])\nthis.mainTable.appendChild(this.getTBody());return isAppendRows;}\nBaseGrid.prototype.getGridData=function(){var data=new Array();var row_data_count=this.getRowCount();var col_data_count=this.getColCount();var dataIndex=this.getHeaderRows();for(var i=dataIndex;i<row_data_count;i++)\n{var r_data=new Array();for(var j=0;j<col_data_count;j++)\n{r_data.push(this.getCellText(i,j));}\ndata.push(r_data);}\nreturn data;}\nBaseGrid.prototype.clear=function(clearHeader){if(clearHeader)\nthis.deleteRow(0,this.getRowCount());else\nthis.deleteRow(this.getHeaderRows(),this.getRowCount()-this.getHeaderRows());}\nBaseGrid.prototype.doResizeTagMouseDown=function(){var ev=eventutil.getEvent();var obj=ev.target;this.resizingObj=obj;obj.mouseDownX=ev.pageX;obj.pareneTdW=obj.parentNode.parentNode.offsetWidth;obj.pareneTableW=this.mainTable.offsetWidth;obj.moving=true;obj.setCapture();}\nBaseGrid.prototype.doResizeTagMouseMove=function(){var ev=eventutil.getEvent();if((!this.resizingObj)||(!domutils.isLeftButton(ev.button)))return false;var obj=this.resizingObj;if(!obj.moving)return false;var newWidth=obj.pareneTdW*1+ev.pageX*1-obj.mouseDownX;if(newWidth>BaseGrid.MiniColWidth)\n{var groupCol=this.getGroupCol(obj.parentNode.parentNode.id);if(groupCol)\ngroupCol.style.width=newWidth;obj.parentNode.style.width=newWidth;}}\nBaseGrid.prototype.doResizeTagMouseUp=function(){var obj=this.resizingObj;obj.releaseCapture();obj.mouseDownX=0;obj.moving=false;this.onResizeend.fire(this,obj.parentElement);}\nBaseGrid.MiniColWidth=10;BaseGrid.prototype.getGridCells=function(){var gridCells=new Array();var rows=this.getTBody().childNodes.length;var row=this.getTBody().firstChild;for(var i=0;i<rows;i++){var cols=row.childNodes.length;var col=row.firstChild;var colCells=new Array();for(var j=0;j<cols;j++){colCells.push(col);col=col.nextSibling;}\ngridCells.push(colCells);row=row.nextSibling;}\nreturn gridCells;}\nBaseGrid.prototype.MergeHeader=function(){if(!this.gridProp)return;var mergeZ=this.gridProp.mergeZ;var mergeH=this.gridProp.mergeH;if(mergeZ||mergeH){var maxCols=this.gridProp.mergeMaxCol;var rowB=this.getHeaderRows();var rowE=this.getTBody().childNodes.length-1;var colB=0;if(!this.tmpCellObj[rowB])return;if(this.tmpCellObj[rowB].length<maxCols)\nmaxCols=this.tmpCellObj[rowB].length;var colE=maxCols-1;domutils.destroyNode(this.tBody);this.initRowHeader(false);if(mergeZ)\nthis.MergeRowHeader(rowB,rowE,colB,colE);if(mergeH){this.MergeColHeader(rowB,rowE,colB,colE);this.MergeColHeaderG(rowB,rowE,colB,colE);}\nthis.mainTable.appendChild(this.getTBody());}else{this.initRowHeader(true);}}\nBaseGrid.prototype.initRowHeader=function(optimize){var rowB=this.getHeaderRows();if(!this.tmpCellObj[rowB])return;var rowE=this.getTBody().childNodes.length-1;var colB=0;var colE=this.tmpCellObj[rowB].length-1;var maxCol=this.gridProp.mergeMaxCol-1;if(!this.gridProp.mergeZ&&!this.gridProp.mergeH)maxCol=-1;var bs=false;for(var i=colB;i<=colE;i++){for(var j=rowB;j<=rowE;j++){var cell=this.tmpCellObj[j][i];if(i>maxCol&&!cell.isRowHeader)\nbreak;if(optimize&&!bs&&this.mainTable.tBodies[0]){domutils.destroyNode(this.tBody);bs=true;}\nif(i<=maxCol){cell.style.backgroundColor=\"#CEDDF0\";if(cell.style.textDecoration==\"underline\")\ncell.style.color=\"blue\";else\ncell.style.color=\"black\";cell.isRowHeader=true;}else{cell.style.backgroundColor=\"\";cell.isRowHeader=false;}\nif(cell.hidder){cell.style.display=\"\";cell.hidder=false;}\nif(cell.rowSpanChange){cell.rowSpan=1;cell.span=1;cell.rowSpanChange=false;}\nif(cell.colSpanChange){cell.colSpan=1;cell.colSpanChange=false;}}}\nif(optimize&&bs)\nthis.mainTable.appendChild(this.getTBody());}\nBaseGrid.prototype.getColumnFieldByCell=function(cell){var ind=this.getColumnIndex(cell)\nvar row=this.mainTable.rows[this.getHeaderRows()-1];return row.cells[ind].field;}\nBaseGrid.prototype.MergeRowHeader=function(rowB,rowE,colB,colE){if(colB>colE)return;var pB=rowB;var tempValueB=this.tmpCellData[rowB][colB];for(var i=rowB+1;i<=rowE;i++){var tempValue=this.tmpCellData[i][colB];if(tempValueB!=tempValue){if(i>pB+1){this.MergeRowHeaderCells(pB,i-1,colB);this.MergeRowHeader(pB,i-1,colB+1,colE);}\npB=i;tempValueB=tempValue;}}\nif(i-1>=pB+1){this.MergeRowHeaderCells(pB,i-1,colB);this.MergeRowHeader(pB,i-1,colB+1,colE);}}\nBaseGrid.prototype.MergeRowHeaderCells=function(rowB,rowE,col){var cell=this.tmpCellObj[rowB][col];var span=rowE-rowB+1;cell.rowSpan=span;cell.span=span;cell.rowSpanChange=true;for(var i=rowB+1;i<=rowE;i++){cell=this.tmpCellObj[i][col];cell.style.display=\"none\";cell.hidder=true;}}\nBaseGrid.prototype.MergeColHeader=function(rowB,rowE,colB,colE){for(var i=rowB;i<=rowE;i++){var tmpColB=0;for(var k=colB;k<=colE;k++){tmpColB=k;var cell=this.tmpCellObj[i][k];if(cell.hidder!=true&&cell.rowSpanChange!=true){break;}}\nif(tmpColB>=colE)continue;var pB=tmpColB;var tempValueB=this.tmpCellData[i][tmpColB];for(var j=tmpColB+1;j<=colE;j++){var tempValue=this.tmpCellData[i][j];var cell=this.tmpCellObj[i][j];if(tempValueB!=tempValue||cell.hidder||cell.rowSpanChange){if(j>pB+1)\nthis.MergeColHeaderCells(i,pB,j-1);pB=j;tempValueB=tempValue;}}\nif(j-1>=pB+1){this.MergeColHeaderCells(i,pB,j-1);}}}\nBaseGrid.prototype.MergeColHeaderG=function(rowB,rowE,colB,colE){for(var i=rowB;i<=rowE;i++){var tmpColB=colB;var pB=tmpColB;var tempValueB=this.tmpCellData[i][tmpColB];var rowSpanB=this.tmpCellObj[i][tmpColB].span;for(var j=tmpColB+1;j<=colE;j++){var tempValue=this.tmpCellData[i][j];var cell=this.tmpCellObj[i][j];var tempRowSpan=cell.span;if(!rowSpanB||rowSpanB<=1){pB=j;tempValueB=tempValue;rowSpanB=tempRowSpan;continue;}\nif(tempValueB!=tempValue||rowSpanB!=tempRowSpan){if(j>pB+1)\nthis.MergeColHeaderCells(i,pB,j-1);pB=j;tempValueB=tempValue;rowSpanB=tempRowSpan;}}\nif(j-1>=pB+1){this.MergeColHeaderCells(i,pB,j-1);}}}\nBaseGrid.prototype.MergeColHeaderCells=function(row,colB,colE){var cell=this.tmpCellObj[row][colB];var span=colE-colB+1;cell.colSpan=span;cell.colSpanChange=true;for(var i=colB+1;i<=colE;i++){cell=this.tmpCellObj[row][i];cell.style.display=\"none\";cell.hidder=true;}}\nBaseGrid.prototype.setRowHeight=function(height){this.rowHeight=height;var start=this.getHeaderRows();var end=this.getRowCount();for(var i=start;i<end;i++){var tr=this.getTBody().childNodes[i];if(this.rowHeight)\ntr.style.height=this.rowHeight;else\ntr.style.height=\"15px\";}}\nBaseGrid.prototype.setFontSize=function(size){this.fontSize=size;var end=this.getRowCount();for(var i=0;i<end;i++){var tr=this.getTBody().childNodes[i];var td=tr.firstChild;if(td.isHeader)\ncontinue;while(td){if(this.fontSize)\ntd.style.fontSize=this.fontSize;else\ntd.style.fontSize=\"12px\";td=td.nextSibling;}}}\nBaseGrid.prototype.setDomAttribute=function(dom,attr,val){if(dom.attributes[attr]==null){if(val==null){return;}\nvar namedItem=document.createAttribute(attr);dom.attributes.setNamedItem(namedItem);}\nif(val==null){dom.attributes.removeNamedItem(attr);}else{dom.attributes[attr].nodeValue=val;}}\nBaseGrid.prototype.deleteSelectedRow=function(){domutils.destroyNode(this.selectedRow);this.selectedRow=null;}","js/freequery/control/ComboBox.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var DropDownBox=jsloader.resolve(\"freequery.control.DropDownBox\");var util=jsloader.resolve(\"freequery.common.util\");var PopupMenu=null;var ComboBox=function(parentObject,untilEl,width,dropdownParent,dropheight,defaultHeight){if(domutils.isMobile()){ComboBox.ButtonWidth=24;}\nthis.parent=parentObject;this.untilEl=untilEl;this.ondropDown=new CustomEvent(\"dropDown\",this);this.onselectChange=new CustomEvent(\"selectChange\",this);this.oneditChange=new CustomEvent(\"editChange\",this);this.onCloseUp=new CustomEvent(\"closeUp\",this);if(defaultHeight)\nComboBox.DefaultHeight=defaultHeight;else\nComboBox.DefaultHeight=16;if(!domutils.isIE()){this.panel=document.createElement(\"div\");this.panel.style.display='inline-block';}else{this.panel=document.createElement(\"span\");}\nthis.panel.className=\"combobox-panel\";this.setWidth(width);this.parent.appendChild(this.panel);this.edit=document.createElement(\"input\");var editWidth=width-ComboBox.ButtonWidth-2;if(domutils.isFirefox()||domutils.isChrome()||domutils.isSafari())\neditWidth=width-ComboBox.ButtonWidth;this.edit.style.width=editWidth;this.edit.type=\"text\";this.edit.nodefaultclass=\"true\";this.edit.className=\"combobox-edit\";this.panel.appendChild(this.edit);this.forceToDropUpward=false;this.addListener(this.edit,\"keyup\",this.editKeyup,this);this.addListener(this.edit,\"change\",this.editChange,this);this.addListener(this.edit,\"paste\",this.doOnPaste,this);this.addListener(this.edit,\"mouseenter\",this.doOnEditMouseEnter,this);this.btn=document.createElement(\"input\");this.btn.type=\"button\";this.btn.nodefaultclass=\"true\";this.btn.style.width=ComboBox.ButtonWidth;this.btn.className=\"combobox-button\";this.panel.appendChild(this.btn);this.addListener(this.btn,\"click\",this.btnClick,this);this.setHeight(ComboBox.DefaultHeight);this.dropdownBox=new DropDownBox(dropdownParent?dropdownParent:this.parent);this.dropdownBox.ondropDown.subscribe(this.doDropDown,this);this.dropdownBox.onCloseUp.subscribe(this.doCloseUp,this);this.dropdownBox.onMouseDown.subscribe(this.doPanelMouseDown,this);this.addListener(this.dropdownBox.parent,\"contextmenu\",this.doContextmenu,this);this.needCheckBox=false;this.enabled=true;}\nlang.extend(ComboBox,Module);ComboBox.prototype.destroy=function(){this.clear();this.ondropDown=null;this.onselectChange=null;this.untilEl=null;this.dropdownBox.ondropDown.unsubscribe(this.doDropDown,this);this.dropdownBox.onCloseUp.unsubscribe(this.doCloseUp,this);this.dropdownBox.destroy();this.dropdownBox=null;this.removeListener(this.edit,\"paste\",this.doOnPaste);this.removeListener(this.edit,\"change\",this.editChange);this.removeListener(this.edit,\"keyup\",this.editKeyup);this.removeListener(this.edit,\"blur\",this.editBlur);try{domutils.destroyNode(this.edit);}catch(e){}\nthis.edit=null;this.removeListener(this.btn,\"click\",this.btnClick);try{domutils.destroyNode(this.btn);}catch(e){}\nthis.btn=null;try{domutils.destroyNode(this.panel);}catch(e){}\nthis.panel=null;this.parent=null;ComboBox.superclass.destroy.call(this);}\nComboBox.prototype.doContextmenu=function(ev){domutils.stopEvent(ev);};ComboBox.ButtonWidth=15;ComboBox.DefaultHeight=16;ComboBox.prototype.setWidth=function(width){this.panel.style.width=width;}\nComboBox.prototype.setHeight=function(height){this.panel.style.height=height;this.edit.style.height=height;this.btn.style.height=height;}\nComboBox.prototype.setNeedCheckBox=function(isNeed){this.needCheckBox=isNeed;this.dropdownBox.needCheckBox=isNeed;}\nComboBox.prototype.setDisplay=function(display){this.parent.style.display=display;}\nComboBox.prototype.insertItem=function(id,name){this.dropdownBox.insertItem(id,name);}\nComboBox.prototype.insertItems=function(data){this.dropdownBox.insertItems(data);}\nComboBox.prototype.removeItem=function(id){this.dropdownBox.removeItem(id);}\nComboBox.prototype.getOffset=function(obj){var p=new Object();p.left=0;p.top=0;while(obj){p.left+=obj.offsetLeft-obj.scrollLeft;p.top+=obj.offsetTop-obj.scrollTop;obj=obj.offsetParent;}\nreturn p;}\nComboBox.prototype.getViewport=function(){var mode=document.compatMode;var result=new Object();if(mode||domutils.isIE()){switch(mode){case'CSS1Compat':result.width=document.documentElement.clientWidth;result.height=document.documentElement.clientHeight;break;default:result.width=document.body.clientWidth;result.height=document.body.clientHeight;break;}}\nvar obj=this.edit.offsetParent;while(obj){if(obj.scrollTop!=0&&obj.scrollHeight>this.getDropDownHight()){result.height=obj.scrollHeight;break;}\nobj=obj.offsetParent;}\nreturn result;};ComboBox.prototype.setHightDomObject=function(hightDomObject){this.hightDomObject=hightDomObject;}\nComboBox.prototype.getHightDomObject=function(){return this.hightDomObject;}\nComboBox.prototype.getDropDownHight=function(){var ho=this.getHightDomObject();var DEFAULT_HEIGHT=100;var RESERVE_HEIGHT=30;var height=DEFAULT_HEIGHT;if(this.dropDownHeight)\nreturn this.dropDownHeight;if(ho!=null&&ho.style!=null&&ho.style.pixelHeight)\nheight=ho.style.pixelHeight-RESERVE_HEIGHT;if(height<0)\nheight=100;return height;}\nComboBox.prototype.setDropDownHeight=function(dropHeight){this.dropDownHeight=dropHeight;}\nComboBox.prototype.getDropDownWidth=function(){return this.dropDownWidth;}\nComboBox.prototype.setDropDownWidth=function(dropWidth){this.dropDownWidth=dropWidth;}\nComboBox.prototype.btnClick=function(){if(!this.enabled)return;try{if(this.edit.createTextRange){var range=this.edit.createTextRange();range.moveStart('character',0);range.collapse(true);range.select();}}catch(ex){;}\nvar editOffset=this.getOffset(this.edit);var dropPanelOffset=this.getOffset(this.dropdownBox.panel.offsetParent);var pos=util.getAbsolutePosScroll(this.edit,document.body);editOffset.left=pos.x;editOffset.top=pos.y;this.dropdownBox.panel.style.display=\"block\";var pos2=util.getAbsolutePosScroll(this.dropdownBox.panel.offsetParent,document.body);dropPanelOffset.left=pos2.x;dropPanelOffset.top=pos2.y;var x=editOffset.left-dropPanelOffset.left;if(x==0)x=1;var y=editOffset.top-dropPanelOffset.top+this.edit.offsetHeight+3;var width=this.getDropDownWidth()!=null?this.getDropDownWidth():this.panel.style.width;this.dropdownBox.dropDown(x,y,width,this.getDropDownHight());var view=this.getViewport();var dropPanelWidth=this.dropdownBox.panel.clientWidth;if(editOffset.left+dropPanelWidth>view.width){x-=this.panel.clientWidth;if(x<0)\nx=editOffset.left-(view.width-dropPanelWidth);}\nvar dropPanelHeight=this.dropdownBox.panel.clientHeight;var calcOffset=2+this.edit.offsetHeight;if((y>editOffset.top?y:editOffset.top)+dropPanelHeight+calcOffset>view.height){var newY=y-(dropPanelHeight+this.edit.clientHeight+6);if(newY>=0||this.forceToDropUpward==true)\ny=newY;else;}\nthis.dropdownBox.panel.style.left=x;this.dropdownBox.panel.style.top=y;if(domutils.isIOS()){var e=this.edit;var flag=false;while(e!=document.body){if(e.getAttribute(\"inPagingPortlet\")==\"1\"){this.dropdownBox.panel.style.top=\"\";break;}\ne=e.parentNode;}}}\nComboBox.prototype.doCloseUp=function(){var dropdownBoxSelectedValue=(this.needCheckBox)?this.dropdownBox.getSelectedValue():this.dropdownBox.backupValue;var dropdownBoxSelectedId=(this.needCheckBox)?this.dropdownBox.getSelectedId():this.dropdownBox.backupId;if(dropdownBoxSelectedValue!=null&&dropdownBoxSelectedId!=null){dropdownBoxSelectedValue=util.getInnerText(dropdownBoxSelectedValue);if(this.selectedId!=dropdownBoxSelectedId){this.onselectChange.fire(this,this.selectedId,this.dropdownBox.selectedId,this.selectedValue,dropdownBoxSelectedValue);}\nif(this.edit){if(this.needCheckBox){this.edit.value=dropdownBoxSelectedValue;this.selectedId=this.dropdownBox.selectedId;this.selectedValue=dropdownBoxSelectedValue;}else{this.edit.value=dropdownBoxSelectedValue;this.selectedId=this.dropdownBox.backupId;this.selectedValue=dropdownBoxSelectedValue;}}}\nif(this.popupMenu){this.popupMenu.hide();}\nthis.onCloseUp.fire(this);}\nComboBox.prototype.doOnPaste=function(e){e.returnValue=false;if(this.itemsCount()<=0)\nthis.ondropDown.fire(this);this.dropdownBox.clearChecked();var text=clipboardData.getData(\"Text\");if(text&&text.length>0){var caption=\"\";var value=\"\";var data=text.split(\";\");if(data.length==1){var item=data[0].split(\",\");for(var i=0;i<item.length;i++){if(i==0)\nvalue=item[i];else\nvalue+=\",\"+item[i];}}\nelse{for(var i=0;i<data.length;i++){if(data[i]){var item=data[i].split(\",\");if(i==0){value=item[0];caption=item[1];}\nelse\n{value+=\",\"+item[0];caption+=\",\"+item[1];}}}}\nthis.setSelectedItem(value,caption,false);if(this.old_selected_id!=this.selectedId)\nthis.onselectChange.fire(this,this.old_selected_id,this.selectedId,this.old_selected_id,this.selectedValue);this.old_selected_id=this.selectedId;}}\nComboBox.prototype.doOnEditMouseEnter=function(e){var showTitle=this.getAttribute(\"showValueTitle\")+\"\";if(\"true\"==showTitle||\"1\"==showTitle)\nthis.edit.title=this.edit.value;}\nComboBox.prototype.doDropDown=function(){if(this.needCheckBox&&(this.edit.value==\"\"))\nthis.dropdownBox.clearChecked();this.ondropDown.fire(this);}\nComboBox.prototype.doPanelMouseDown=function(ev){if(this.needCheckBox&&ev.button==2){if(!this.popupMenu){if(!PopupMenu)\nPopupMenu=jsloader.resolve(\"freequery.menu.PopupMenu\");this.handler=new DropDownBoxMenuCommand();this.handler.src=this;this.popupMenu=new PopupMenu(document.body,this.handler);this.popupMenu.widthFix=\"155px\";if(domutils.isIE())\nthis.popupMenu.heightFix=\"82px\";else\nthis.popupMenu.heightFix=\"86px\";this.popupMenu.createMenuItem(\"全选\",\"ALL\");this.popupMenu.createMenuItem(\"反选\",\"REVERSE\");this.popupMenu.createMenuItem(\"清空\",\"CLEAR\");}\nthis.popupMenu.popup(ev);}\ndomutils.stopEvent(ev);}\nComboBox.prototype.getEditReadOnly=function(){return this.edit.readOnly;}\nComboBox.prototype.setEditReadOnly=function(readonly){this.edit.readOnly=readonly;}\nComboBox.prototype.setSelectedItem=function(ids,names,add){this.matchItems(ids,names,add);}\nComboBox.prototype.matchItems=function(ids,names,add){if(this.needCheckBox)\nthis.dropdownBox.clearChecked();if(ids!==0&&(ids==null||ids==undefined||ids==\"\"))\nids=\"\";var single=false;ids=String(ids);if(names==null||names==undefined||names==\"\"){names=ids;single=true;}\nnames=String(names);if(add==null||add==undefined)\nadd=false;var aryIDs=ids.split(\",\");var aryNames=names.split(\",\");var strIDs=\"\";var strNames=\"\";if(this.itemsCount()){for(var i=0;i<aryIDs.length;i++){id=aryIDs[i];name=aryNames[i];var itemName=this.dropdownBox.getItemNameById(id);if(itemName==null&&add)\nthis.insertItem(id,name);if(strIDs==\"\")\nstrIDs=id;else\nstrIDs=strIDs+\",\"+id;if(strNames.length==0){if(itemName!=null)\nstrNames=itemName;else if(add)\nstrNames=name;}\nelse{if(itemName!=null)\nstrNames=strNames+\",\"+itemName;else if(add)\nstrNames=strNames+\",\"+name;}\nif(this.needCheckBox){this.dropdownBox.setItemCheckedById(id,true);}}\nif(strIDs!=\"\"&&strNames==\"\")strNames=names;}\nelse{strIDs=ids;strNames=names;}\nthis.old_selected_id=this.selectedId;this.selectedId=strIDs;this.dropdownBox.backupId=strIDs;this.selectedValue=strNames;this.edit.value=util.getInnerText(strNames);if(!this.needCheckBox)\nthis.dropdownBox.backupValue=strNames;}\nComboBox.prototype.setSelectedItemAndFired=function(id,name,add){if(id==null||id==undefined)\nreturn false;if(add==null)\nadd=false;var oldId=this.selectedId;var itemName=this.dropdownBox.getItemNameById(id);if((itemName==null)&&add)\nthis.insertItem(id,name);this.selectedId=id;if((itemName)&&((name==null)||(name==\"\")||(itemName==name)))\n{this.selectedValue=itemName;this.edit.value=util.getInnerText(itemName);}\nelse if(name)\n{this.selectedValue=name;this.edit.value=util.getInnerText(name);}\nif(!this.needCheckBox)\nthis.dropdownBox.backupValue=itemName;this.onselectChange.fire(this,oldId,id);}\nComboBox.prototype.editBlur=function(){if(this.itemsCount()<=0)\nthis.ondropDown.fire(this);}\nComboBox.prototype.editKeyup=function(){var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");var ev=eventutil.getEvent();if(ev.charCode==13){this.editChange();}}\nComboBox.prototype.getSelectedId=function(){if(this.selectedId!=null)\nreturn this.selectedId;else\nreturn this.edit.value;}\nComboBox.prototype.getItemIdByIndex=function(index){return this.dropdownBox.getItemIdByIndex(index);}\nComboBox.prototype.getSelectedText=function(){return this.edit.value;}\nComboBox.prototype.setSelectedText=function(value){this.dropdownBox.backupValue=value;this.edit.value=util.getInnerText(value);}\nComboBox.prototype.clear=function(){this.dropdownBox.clear();this.edit.value=\"\";this.selectedId=null;this.selectedValue=\"\";}\nComboBox.prototype.setAttribute=function(name,value){this.panel.setAttribute(name,value);}\nComboBox.prototype.getAttribute=function(name){return this.panel.getAttribute(name);}\nComboBox.prototype.itemsCount=function(){return this.dropdownBox.itemsCount();}\nComboBox.prototype.setReadOnly=function(readonly){this.edit.readOnly=readonly;this.edit.style.backgroundColor=\"white\";}\nComboBox.prototype.getReadOnly=function(){return this.edit.readOnly;}\nComboBox.prototype.setCommonData=function(data){for(var i=0;i<data.length;i++)\n{var tmp=data[i];this.insertItem(tmp.value,tmp.text);}\nthis.setSelectedItem(data[0].value,data[0].text);}\nComboBox.prototype.editChange=function(){this.needBlur=false;this.selectedValue=null;var editValue=null;if(this.edit.value)\neditValue=this.edit.value;if(this.itemsCount()<=0)\nthis.ondropDown.fire(this);this.matchItems(editValue)\nif(this.dropdownBox.selectItem)\nthis.dropdownBox.resetItemClass(this.dropdownBox.selectItem);if(this.selectedId==null||this.selectedId==\"\")\nthis.oneditChange.fire(this,this.edit.value,this.edit.value);else\nthis.oneditChange.fire(this,this.selectedId,this.edit.value);}\nComboBox.prototype.getStandByData=function(){return this.dropdownBox.getStandByData();}\nComboBox.prototype.disable=function(disabled){this.panel.disabled=disabled;this.btn.disabled=disabled;}\nComboBox.prototype.setEnabled=function(value){this.enabled=value;this.btn.disabled=!this.enabled;this.edit.style.backgroundColor=this.enabled?\"\":\"#ECE9D8\";this.edit.disabled=!this.enabled;}\nComboBox.prototype.getEnabled=function(){return this.enabled;}\nComboBox.prototype.setChecked=function(values){this.dropdownBox.setChecked(values);}\nComboBox.prototype.setForceToDropUpward=function(flag){this.forceToDropUpward=(flag==true)?true:false;}\nComboBox.prototype.setComboBoxWidth=function(width){this.setWidth(width);this.edit.style.width=width-ComboBox.ButtonWidth-2;}\nComboBox.prototype.clearSelected=function(){this.dropdownBox.selectedId=\"\";this.dropdownBox.selectedValue=\"\";this.edit.value=\"\";this.selectedId=null;this.selectedValue=\"\";}\nvar DropDownBoxMenuCommand=function(){this.src=null;};DropDownBoxMenuCommand.prototype.destroy=function(){};DropDownBoxMenuCommand.prototype.doCmd=function(cmd){if(cmd==\"ALL\"){this.src.dropdownBox.allChecked();}else if(cmd==\"REVERSE\"){this.src.dropdownBox.reverseChecked();}else if(cmd==\"CLEAR\"){this.src.dropdownBox.clearChecked();}};","js/freequery/control/DropDownCheckList.js":"\n﻿\nvar Listbox=jsloader.resolve(\"freequery.control.Listbox\");var DropDownPanel=jsloader.resolve(\"freequery.control.DropDownPanel\");var DropDownCheckList=function(parentObject,panel){DropDownCheckList.superclass.constructor.call(this,parentObject,panel);this.panel.className=\"dropdown-checklist-div\";this.checkList=new Listbox(this.panel,this.panel.firstChild);}\nlang.extend(DropDownCheckList,DropDownPanel);DropDownCheckList.prototype.destroy=function(){this.checkList.destroy();this.checkList=null;DropDownCheckList.superclass.destroy.call(this);}\nDropDownCheckList.prototype.addItem=function(id,name,checked,disabled){this.checkList.insertItem(id,name,checked,disabled);}\nDropDownCheckList.prototype.getSelectedIdList=function(){return this.checkList.getSelectedIdList();}\nDropDownCheckList.prototype.getSelectedList=function(){return this.checkList.getSelectedList();}\nDropDownCheckList.prototype.setItemChecked=function(id,checked){this.checkList.setItemChecked(id,checked);}\nDropDownCheckList.prototype.getItemChecked=function(id){return this.checkList.getItemChecked(id);}\nDropDownCheckList.prototype.setItemDisable=function(id,disabled){this.checkList.setItemDisable(id,disabled);}\nDropDownCheckList.prototype.getCheckboxList=function(withDisabled){return this.checkList.getCheckboxList(withDisabled);}\nDropDownCheckList.prototype.clear=function(){this.checkList.clear();}\nDropDownCheckList.prototype.dropDown=function(x,y,width,height){if(width)\nthis.panel.style.width=width;DropDownCheckList.superclass.dropDown.call(this,x,y);if(height&&this.panel.offsetHeight>height)\n{this.panel.style.height=height;}}","js/freequery/control/DropDownPanel.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var DropDownPanel=function(parentObject,panel){this.parent=parentObject;if(panel){this.panel=panel;}else{this.panel=document.createElement(\"div\");this.panel.className=\"dropdown-div\";this.panel.style.position=\"absolute\";this.parent.appendChild(this.panel);this.setVisible(false);}\nthis.onCloseUp=new CustomEvent(\"closeUp\",this);this.ondropDown=new CustomEvent(\"dropDown\",this);this.onMouseDown=new CustomEvent(\"mouseDown\",this);}\nlang.extend(DropDownPanel,Module);DropDownPanel.prototype.destroy=function(){try{domutils.destroyNode(this.panel);}catch(e){}\nthis.panel=null;this.parent=null;this.onCloseUp=null;this.ondropDown=null;this.onMouseDown=null;DropDownPanel.superclass.destroy.call(this);}\nDropDownPanel.prototype.isVisible=function(){if(this.panel.style.display==\"none\")\nreturn false;else\nreturn true;}\nDropDownPanel.prototype.setVisible=function(v){if(!this.panel)\nreturn;if(v)\nthis.panel.style.display=\"block\";else\nthis.panel.style.display=\"none\";}\nDropDownPanel.prototype.addIFrameListener=function(doc){var list=doc.getElementsByTagName(\"IFRAME\");for(var i=0;i<list.length;i++){try{var frameDoc=list[i].contentWindow.document;this.addListener(frameDoc.body,\"mousedown\",this.doMouseDown,this);this.addListener(frameDoc.documentElement,\"mousedown\",this.doMouseDown,this);this.addIFrameListener(frameDoc);}catch(e){}}\nvar list=doc.getElementsByTagName(\"FRAME\");for(var i=0;i<list.length;i++){try{var frameDoc=list[i].contentWindow.document;this.addListener(frameDoc.body,\"mousedown\",this.doMouseDown,this);this.addListener(frameDoc.documentElement,\"mousedown\",this.doMouseDown,this);this.addIFrameListener(frameDoc);}catch(e){}}}\nDropDownPanel.prototype.removeIFrameListener=function(doc){var list=doc.getElementsByTagName(\"IFRAME\");for(var i=0;i<list.length;i++){try{var frameDoc=list[i].contentWindow.document;this.removeListener(frameDoc.body,\"mousedown\",this.doMouseDown);this.removeListener(frameDoc.documentElement,\"mousedown\",this.doMouseDown);this.removeIFrameListener(frameDoc);}catch(e){}}\nvar list=doc.getElementsByTagName(\"FRAME\");for(var i=0;i<list.length;i++){try{var frameDoc=list[i].contentWindow.document;this.removeListener(frameDoc.body,\"mousedown\",this.doMouseDown);this.removeListener(frameDoc.documentElement,\"mousedown\",this.doMouseDown);this.removeIFrameListener(frameDoc);}catch(e){}}}\nDropDownPanel.prototype.dropDown=function(x,y){if(x>=0&&y>=0)\n{this.addListener(document.body,\"mousedown\",this.doMouseDown,this);var editors=domutils.getElementsByClassName(\"EditorBody\",document.body);for(var i=0;i<editors.length;i++){this.addListener(editors[i].contentWindow.document.body,\"mousedown\",this.doMouseDown,this);}\nthis.addIFrameListener(document);this.ondropDown.fire(this);this.panel.style.left=x;this.panel.style.top=y;this.setVisible(true);}}\nDropDownPanel.prototype.closeUp=function(itemClick){this.setVisible(false);this.removeListener(document.body,\"mousedown\",this.doMouseDown);var editors=domutils.getElementsByClassName(\"EditorBody\",document.body);for(var i=0;i<editors.length;i++){this.removeListener(editors[i].contentWindow.document.body,\"mousedown\",this.doMouseDown);}\nthis.removeIFrameListener(document);this.onCloseUp.fire(this,itemClick);}\nDropDownPanel.prototype.doMouseDown=function(ev){this.onMouseDown.fire(ev);if((this.isVisible())&&!this.pointInPanel(ev.target)){this.closeUp(false);}}\nDropDownPanel.prototype.pointInPanel=function(el){while(el!=null)\n{if(el==this.panel){return true;}else if(el.className&&el.className.indexOf&&el.className.indexOf(\"popupMenu\")!=-1){return true;}else\nel=el.parentNode;}}","js/freequery/control/DropDownBox.js":"\nvar DropDownPanel=jsloader.resolve(\"freequery.control.DropDownPanel\");var util=jsloader.resolve(\"freequery.common.util\");var DropDownBox=function(parentObject,panel){DropDownBox.superclass.constructor.call(this,parentObject,panel);this.selectItem=null;this.selectedId=null;this.selectedValue=null;this.panel.className=\"dropdown-box-div\";this.panel.owner=this;this.needCheckBox=false;this.needDivClick=true;this.backupId=null;this.backupValue=\"\";this.panel.style.height=20;}\nlang.extend(DropDownBox,DropDownPanel);DropDownBox.prototype.destroy=function(){this.clear();this.selectItem=null;this.selectedId=null;this.selectedValue=null;this.panel.owner=null;DropDownBox.superclass.destroy.call(this);}\nDropDownBox.prototype.dropDown=function(x,y,width,height){DropDownBox.superclass.dropDown.call(this,x,y);this.selectedId=null;if(width!=undefined)\nthis.panel.style.width=width;if(height!=undefined)\nthis.panel.style.height=height;else\nthis.panel.style.height=Math.max(this.panel.offsetHeight,DropDownBox.DEFAULT_HEIGHT);}\nDropDownBox.prototype.itemsCount=function(){return this.panel.children.length;}\nDropDownBox.ItemClass=\"dropdown-box-span\";DropDownBox.DEFAULT_HEIGHT=100;DropDownBox.prototype.createItemHTML=function(id,caption,data,imgs,colors){var itemHtml=new Array();itemHtml.push(\"<div NOWRAP class=\");itemHtml.push(\"'\"+DropDownBox.ItemClass+\"' \");itemHtml.push(\"onclick=\\\"jsloader.resolve('freequery.common.util').getOwner(this).doItemClick(this);\\\" \");itemHtml.push(\"onmouseover=\\\"jsloader.resolve('freequery.common.util').getOwner(this).doMouseOver(this);\\\" \");if(id||id==\"0\"){itemHtml.push(\" id=\");if(typeof(id)==\"string\")\nid=id.replace(/&/g,\"&#38\").replace(/'/g,\"&#39;\");itemHtml.push(\"'\"+id+\"'\");}\nif(data){itemHtml.push(\" data=\");itemHtml.push(data.toJSONString());}\nitemHtml.push(\" ><nobr>\");if(this.needCheckBox){itemHtml.push(\"<input type='checkbox' onclick=\\\"jsloader.resolve('freequery.common.util').getOwner(this).doCheckItemClick(this);\\\" />\")}\nif(imgs){var len=imgs.length\nfor(var i=0;i<len;i++){itemHtml.push(\"<img src='\");itemHtml.push(imgs[i]);itemHtml.push(\"'>\");}}\nif(colors){var len=colors.length\nfor(var i=0;i<len;i++){var color=colors[i],transparent=1,title=color,style;if(color==\"\"){title=\"未设置\";style=\"height:12px;width:12px;border:1px solid #6B656B;\"\n+\"background:url(img/chart/toolbar/null.png) no-repeat 1px 1px;\"\n+\"margin-left:2px;\";}else if(color.toLowerCase().indexOf(\"rgb\")!=-1){var colours=util.rgbaToHexColor(color);color=colours[\"color\"];transparent=(colours[\"alpha\"]||100)/100;style=\"cursor:point;height:12px;width:12px;background-color:\"\n+color+\";opacity:\"+transparent\n+\";border:1px solid #6B656B;border-spacing:2;margin-left:2px;\";}\nitemHtml.push(\"<input title='\"+title+\"' style='\"+style+\"'>\")}\nitemHtml.push(\"&nbsp;\");}\nitemHtml.push(\"<span style='cursor:default'>\");itemHtml.push(caption);itemHtml.push(\"<\/span>\");itemHtml.push(\"<\/nobr><\/div>\");return itemHtml.join(\"\");}\nDropDownBox.prototype.insertItem=function(id,caption,data,imgs){var tmp=this.createItemHTML(id,caption,data,imgs);this.panel.innerHTML+=tmp;}\nDropDownBox.prototype.insertItems=function(data){var len=data.length;var items=new Array();for(var i=0;i<len;i++){var item_data=data[i];var item=null;if(item_data.length==5)\nitem=this.createItemHTML(item_data[0],item_data[1],item_data[2],item_data[3],item_data[4]);if(item_data.length==4)\nitem=this.createItemHTML(item_data[0],item_data[1],item_data[2],item_data[3],[]);else if(item_data.length==3)\nitem=this.createItemHTML(item_data[0],item_data[1],item_data[2],[]);else if(item_data.length==2)\nitem=this.createItemHTML(item_data[0],item_data[1],\"\",[]);items.push(item);}\nthis.panel.innerHTML+=items.join(\"\");}\nDropDownBox.prototype.removeItem=function(id){var item=document.getElementById(id);if(item){domutils.destroyNode(item);}}\nDropDownBox.prototype.doMouseOver=function(e){if(this.selectItem)\n{this.resetItemClass(this.selectItem);}\ne.className=\"dropdown-box-span-select\";this.selectItem=e;}\nDropDownBox.prototype.doItemClick=function(e){if(e.getAttribute(\"disabled\")==\"true\")\nreturn;if(this.needDivClick){if(this.needCheckBox){var checkbox=e.getElementsByTagName(\"input\")[0];checkbox.checked=!checkbox.checked;checkbox.parentNode.checked=checkbox.checked;}else{var s=e.getElementsByTagName(\"span\")[0];this.selectedId=e.getAttribute(\"id\")?e.getAttribute(\"id\"):\"\";this.selectedValue=s.innerHTML;this.backupId=this.selectedId;this.backupValue=this.selectedValue;this.closeUp(true);return this.selectedId;}}\nthis.needDivClick=true;}\nDropDownBox.prototype.doCheckItemClick=function(e){this.needDivClick=false;e.parentNode.checked=e.checked;}\nDropDownBox.prototype.resetItemClass=function(s){s.className=\"dropdown-box-span\";}\nDropDownBox.prototype.setItemCheckedById=function(id,checked){var len=this.itemsCount();var divs=this.panel.getElementsByTagName(\"div\");for(var i=0;i<len;i++)\n{var e=divs[i];if(String(e.getAttribute(\"id\"))==String(id))\n{e.firstChild.checked=checked;e.children[0].firstChild.checked=checked;}}}\nDropDownBox.prototype.getItemCheckedById=function(id){var len=this.itemsCount();var divs=this.panel.getElementsByTagName(\"div\");for(var i=0;i<len;i++)\n{var e=divs[i];if(String(e.getAttribute(\"id\"))==String(id))\n{return e.firstChild.checked;}}\nreturn false;}\nDropDownBox.prototype.getItemNameById=function(id){var len=this.itemsCount();var divs=this.panel.getElementsByTagName(\"div\");for(var i=0;i<len;i++)\n{var e=divs[i];if(String(e.getAttribute(\"id\")?e.getAttribute(\"id\"):\"\")==String(id))\n{var s=e.getElementsByTagName(\"span\")[0];return s.innerHTML;}}\nreturn null;}\nDropDownBox.prototype.getItemNameByName=function(name){var len=this.itemsCount();var divs=this.panel.getElementsByTagName(\"div\");for(var i=0;i<len;i++)\n{var e=divs[i];var s=e.getElementsByTagName(\"span\")[0];var eName=\"\";if(navigator.appName.indexOf(\"Explorer\")>-1){eName=s.innerText;}else{eName=s.textContent;}\nif(eName==name)\nreturn e.getAttribute(\"id\");}\nreturn null;}\nDropDownBox.prototype.getItemIdByIndex=function(index){var len=this.itemsCount();if(index<len){var e=this.panel.getElementsByTagName(\"div\")[index];return e.getAttribute(\"id\");}else{return null;}}\nDropDownBox.prototype.getSelectedId=function(){if(this.needCheckBox){this.selectedId=\"\";for(var i=0;i<this.panel.children.length;i++){var tmpObj=this.panel.children[i];if(tmpObj.firstChild.checked){if(this.selectedId==\"\")\nthis.selectedId=tmpObj.id;else\nthis.selectedId+=\",\"+tmpObj.id;}}}\nreturn this.selectedId;}\nDropDownBox.prototype.getSelectedValue=function(){if(this.needCheckBox){this.selectedValue=\"\";this.selectedId=\"\";for(var i=0;i<this.panel.children.length;i++){var tmpObj=this.panel.children[i];if(tmpObj.firstChild.checked){if(this.selectedValue==\"\"){if(navigator.appName.indexOf(\"Explorer\")>-1){this.selectedValue=tmpObj.lastChild.innerText;}else{this.selectedValue=tmpObj.lastChild.textContent;}\nthis.selectedId=tmpObj.id;}else{if(navigator.appName.indexOf(\"Explorer\")>-1){this.selectedValue+=\",\"+tmpObj.lastChild.innerText;}else{this.selectedValue+=\",\"+tmpObj.lastChild.textContent;}\nthis.selectedId+=\",\"+tmpObj.id;}}}}\nreturn this.selectedValue;}\nDropDownBox.prototype.allChecked=function(){if(this.needCheckBox){for(var i=0;i<this.panel.children.length;i++){var tmpObj=this.panel.children[i];tmpObj.firstChild.checked=true;tmpObj.children[0].firstChild.checked=true;}}}\nDropDownBox.prototype.clearChecked=function(){if(this.needCheckBox){for(var i=0;i<this.panel.children.length;i++){var tmpObj=this.panel.children[i];tmpObj.firstChild.checked=false;tmpObj.children[0].firstChild.checked=false;}}}\nDropDownBox.prototype.setChecked=function(values){if(this.needCheckBox&&values){var selValues=\",\"+values+\",\";for(var i=0;i<this.panel.children.length;i++){var tmpObj=this.panel.children[i];if(selValues.indexOf(\",\"+tmpObj.id+\",\")!=-1){tmpObj.firstChild.checked=true;tmpObj.children[0].firstChild.checked=true;}}}}\nDropDownBox.prototype.reverseChecked=function(){if(this.needCheckBox){for(var i=0;i<this.panel.children.length;i++){var tmpObj=this.panel.children[i];tmpObj.firstChild.checked=!tmpObj.firstChild.checked;tmpObj.children[0].firstChild.checked=tmpObj.firstChild.checked;}}}\nDropDownBox.prototype.getStandByData=function(){var ret=new Array();for(var i=0;i<this.panel.children.length;i++){var tmpObj=this.panel.children[i];var tmp=new Object();tmp.id=tmpObj.id?tmpObj.id:'null';tmp.data=tmpObj.data?tmpObj.data:'null';var tmpObjChild=tmpObj.lastChild;if(navigator.appName.indexOf(\"Explorer\")>-1){tmp.name=tmpObjChild.innerText;}else{tmp.name=tmpObjChild.textContent;}\nvar imgs=\"\";if(this.needCheckBox){while(tmpObjChild.previousSibling&&tmpObjChild.previousSibling.previousSibling){tmpObjChild=tmpObjChild.previousSibling;imgs+=tmpObjChild.src+\";\";}\ntmp.imgs=imgs;tmp.checked=tmpObjChild.checked;}else{while(tmpObjChild.previousSibling){tmpObjChild=tmpObjChild.previousSibling;imgs+=tmpObjChild.src+\";\";}\ntmp.imgs=imgs;}\nret.push(tmp);}\nreturn ret;}\nDropDownBox.prototype.clear=function(){this.panel.innerHTML=\"\";this.selectedId=\"\";this.selectedValue=\"\";}\nDropDownBox.prototype.cancelDiv=function(e){return false;}\nDropDownBox.prototype.setItemReadOnly=function(id,readOnly){var len=this.itemsCount();var divs=this.panel.getElementsByTagName(\"div\");for(var i=0;i<len;i++){var e=divs[i];if(String(e.getAttribute(\"id\"))==String(id)){e.setAttribute(\"disabled\",readOnly);if(!domutils.isIE()){e.style.color=readOnly?\"gray\":\"\";}}}}","js/freequery/control/DropDownTree.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var DropDownTreePanel=jsloader.resolve(\"freequery.control.DropDownTreePanel\");var util=jsloader.resolve(\"freequery.common.util\");var DropDownTree=function(parentObject,untilEl,width,dropdownParent){this.parent=parentObject;this.untilEl=untilEl;this.ondropDown=new CustomEvent(\"dropDown\",this);this.onselectChange=new CustomEvent(\"selectChange\",this);this.oneditChange=new CustomEvent(\"editChange\",this);if(domutils.isFirefox()||domutils.isChrome()||domutils.isSafari())\nthis.panel=document.createElement(\"div\");else\nthis.panel=document.createElement(\"span\");this.panel.style.height=DropDownTree.DefaultHeight;this.panel.className=\"combobox-panel\";this.setWidth(width);this.parent.appendChild(this.panel);this.edit=document.createElement(\"input\");var editWidth=width-DropDownTree.ButtonWidth-2;if(domutils.isFirefox()||domutils.isChrome()||domutils.isSafari())\neditWidth=width-DropDownTree.ButtonWidth;this.edit.style.width=editWidth;this.edit.style.height=DropDownTree.DefaultHeight;this.edit.type=\"text\";this.edit.className=\"combobox-edit\";this.panel.appendChild(this.edit);this.addListener(this.edit,\"keyup\",this.editKeyup,this);this.addListener(this.edit,\"blur\",this.editBlur,this);this.addListener(this.edit,\"change\",this.editChange,this);this.btn=document.createElement(\"input\");this.btn.type=\"button\";this.btn.style.width=DropDownTree.ButtonWidth;this.btn.style.height=DropDownTree.DefaultHeight;this.btn.className=\"combobox-button\";this.panel.appendChild(this.btn);this.addListener(this.btn,\"click\",this.btnClick,this);this.dropDownTreePanel=new DropDownTreePanel(dropdownParent?dropdownParent:this.parent,this);this.dropDownTreePanel.ondropDown.subscribe(this.doDropDown,this);this.dropDownTreePanel.onCloseUp.subscribe(this.doCloseUp,this);this.multSelect=false;}\nlang.extend(DropDownTree,Module);DropDownTree.prototype.destroy=function(){this.clear();this.ondropDown=null;this.onselectChange=null;this.untilEl=null;this.dropDownTreePanel.ondropDown.unsubscribe(this.doDropDown,this);this.dropDownTreePanel.onCloseUp.unsubscribe(this.doCloseUp,this);this.dropDownTreePanel.destroy();this.dropDownTreePanel=null;this.removeListener(this.edit,\"change\",this.editChange);this.removeListener(this.edit,\"keyup\",this.editKeyup);this.removeListener(this.edit,\"blur\",this.editBlur);try{domutils.destroyNode(this.edit);}catch(e){}\nthis.edit=null;this.removeListener(this.btn,\"click\",this.btnClick);try{domutils.destroyNode(this.btn);}catch(e){}\nthis.btn=null;try{domutils.destroyNode(this.panel);}catch(e){}\nthis.panel=null;this.parent=null;DropDownTree.superclass.destroy.call(this);}\nDropDownTree.ButtonWidth=15;DropDownTree.DefaultHeight=16;DropDownTree.MinWidth=250;DropDownTree.prototype.setWidth=function(width){this.panel.style.width=width;}\nDropDownTree.prototype.initTree=function(clientId,noNull){this.dropDownTreePanel.initTree(clientId,this.paramId,this.parentFieldName,this.multSelect,this.checkDescendents,noNull);}\nDropDownTree.prototype.initOrgTree=function(param){this.dropDownTreePanel.initOrgTree(param);}\nDropDownTree.prototype.getOffset=function(obj){var p=new Object();p.left=0;p.top=0;while(obj){p.left+=obj.offsetLeft-obj.scrollLeft;p.top+=obj.offsetTop-obj.scrollTop;obj=obj.offsetParent;}\nreturn p;}\nDropDownTree.prototype.getViewport=function(){var mode=document.compatMode;var result=new Object();if(mode||domutils.isIE()){switch(mode){case'CSS1Compat':result.width=document.documentElement.clientWidth;result.height=document.documentElement.clientHeight;break;default:result.width=document.body.clientWidth;result.height=document.body.clientHeight;break;}}\nreturn result;};DropDownTree.prototype.setHightDomObject=function(hightDomObject){this.hightDomObject=hightDomObject;}\nDropDownTree.prototype.getHightDomObject=function(){return this.hightDomObject;}\nDropDownTree.prototype.getDropDownHight=function(){var ho=this.getHightDomObject();var DEFAULT_HEIGHT=100;var RESERVE_HEIGHT=30;var height=DEFAULT_HEIGHT;if(this.dropDownHeight){return this.dropDownHeight;}\nif(ho!=null&&ho.style!=null){var pixelHeight=ho.style.pixelHeight;if(pixelHeight)\nheight=ho.style.pixelHeight-RESERVE_HEIGHT;}\nif(height<0)\nreturn DEFAULT_HEIGHT;else\nreturn height;}\nDropDownTree.prototype.setDropDownHeight=function(dropheight){this.dropDownHeight=dropheight;}\nDropDownTree.prototype.getDropDownWidth=function(){if(this.dropDownWidth)\nreturn this.dropDownWidth;}\nDropDownTree.prototype.setDropDownWidth=function(dropWidth){this.dropDownWidth=dropWidth;}\nDropDownTree.prototype.btnClick=function(){try{var range=this.edit.createTextRange();range.moveStart('character',0);range.collapse(true);range.select();}catch(e){}\nvar editOffset=this.getOffset(this.edit);this.dropDownTreePanel.panel.style.display=\"block\";var dropPanelOffset=this.getOffset(this.dropDownTreePanel.panel.offsetParent);var x=editOffset.left-dropPanelOffset.left;var y=editOffset.top-dropPanelOffset.top+this.edit.offsetHeight+3;this.dropDownTreePanel.dropDown(x,y,this.getDropDownWidth(),this.getDropDownHight());}\nDropDownTree.prototype.doCloseUp=function(){var newValue=this.dropDownTreePanel.selectedValue;var newId=this.dropDownTreePanel.selectedId;if(null==newId)\nreturn;if(newValue!=null){if(this.selectedValue!=newValue)\nthis.onselectChange.fire(this,this.selectedId,newId,this.selectedValue,newValue);this.edit.value=newValue;this.selectedId=newId;this.selectedValue=newValue;}}\nDropDownTree.prototype.doDropDown=function(){this.ondropDown.fire(this);}\nDropDownTree.prototype.getEditReadOnly=function(){return this.edit.readOnly;}\nDropDownTree.prototype.setEditReadOnly=function(readonly){this.edit.readOnly=readonly;}\nDropDownTree.prototype.setSelectedItem=function(id,name,add){if(!id&&id!=\"\")\nreturn false;if(add==null)\nadd=false;this.selectedId=id;this.selectedValue=name;this.edit.value=name;if(id&&!this.defaultId){this.defaultId=id;this.defaultValue=name;}}\nDropDownTree.prototype.editBlur=function(){if(!this.old_selected_id)\nthis.old_selected_id=this.selectedId;this.old_selected_id=this.selectedId;}\nDropDownTree.prototype.editChange=function(){this.oneditChange.fire(this,this.edit.value);}\nDropDownTree.prototype.editKeyup=function(){this.selectedId=this.edit.value;this.selectedValue=this.edit.value;var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");var ev=eventutil.getEvent();if(ev.charCode==13)\n{this.old_selected_id=this.selectedId;}}\nDropDownTree.prototype.getSelectedId=function(){if(this.selectedId!=\"\")\nreturn this.selectedId;else\nreturn this.edit.value;}\nDropDownTree.prototype.getSelectedText=function(){return this.edit.value;}\nDropDownTree.prototype.clear=function(){this.dropDownTreePanel.clear();}\nDropDownTree.prototype.setAttribute=function(name,value){this[name]=value;}\nDropDownTree.prototype.getAttribute=function(name){return this[name];}\nDropDownTree.prototype.itemsCount=function(){return this.dropDownTreePanel.itemsCount();}\nDropDownTree.prototype.setReadOnly=function(readonly){this.edit.readOnly=readonly;}\nDropDownTree.prototype.getReadOnly=function(){return this.edit.readOnly;}\nDropDownTree.prototype.setEnabled=function(enable){this.enabled=enable;this.panel.disabled=!this.enabled;this.btn.disabled=!this.enabled;this.edit.style.background=this.enabled?\"\":\"#F6F6F6\";}\nDropDownTree.prototype.setLazyLoadChild=function(lazy){this.dropDownTreePanel.lazyLoadChild=lazy;}\nvar domutils=jsloader.resolve(\"freequery.lang.domutils\");if(domutils.isMobile()){DropDownTreePanel=jsloader.resolve(\"freequery.control.MobileDropDownTreePanel\");}","js/freequery/control/DropDownTreePanel.js":"\nvar DropDownPanel=jsloader.resolve(\"freequery.control.DropDownPanel\");var util=jsloader.resolve(\"freequery.common.util\");var ParameterTree=jsloader.resolve(\"freequery.tree.ParameterTree\");var DropDownTreePanel=function(parentObject,dropDownTree){DropDownTreePanel.superclass.constructor.call(this,parentObject);this.dropDownTree=dropDownTree;this.selectedId=null;this.selectedValue=null;this.panel.className=\"dropdown-box-div\";this.addListener(this.panel,\"resize\",this.panelResize,this);this.panel.owner=this;this.tree=new ParameterTree(this.panel,this.dropDownTree);this.multSelect=false;}\nlang.extend(DropDownTreePanel,DropDownPanel);DropDownTreePanel.prototype.destroy=function(){if(this.tree){if(!this.multSelect){this.tree.onSelectNode.unsubscribe(this.selectedTree,this);}\nthis.tree.unrender();this.tree.destroy();this.tree=null;}\nthis.selectedId=null;this.selectedValue=null;this.panel.owner=null;DropDownTreePanel.superclass.destroy.call(this);}\nDropDownTreePanel.prototype.dropDown=function(x,y,width,height){if(!width)\nthis.panel.style.width=150;else\nthis.panel.style.width=width;if(!height)\n{this.height=300;this.panel.style.height=300;}else{this.height=height;this.panel.style.height=height;}\nDropDownTreePanel.superclass.dropDown.call(this,x,y);}\nDropDownTreePanel.prototype.panelResize=function(obj){if(this.height)\nif(obj.screenY>this.height)this.panel.style.height=this.height;}\nDropDownTreePanel.prototype.doItemClick=function(e){var s=e.getElementsByTagName(\"span\")[0];this.selectedId=e.getAttribute(\"id\");this.selectedValue=s.innerText;this.closeUp(true);return this.selectedId;}\nDropDownTreePanel.prototype.getSelectedId=function(){return this.selectedId;}\nDropDownTreePanel.prototype.clear=function(){if(!this.multSelect){this.tree.onSelectNode.unsubscribe(this.selectedTree,this);}\nthis.tree.unrender();this.tree.destroy();this.tree=new ParameterTree(this.panel,this.dropDownTree);this.tree.setLazyLoadChild(this.lazyLoadChild);this.selectedId=null;this.selectedValue=\"\";}\nDropDownTreePanel.prototype.selectedTree=function(sender,selected,oldSelected){this.selectedValue=selected._alias||selected._name;this.selectedId=selected._id;this.closeUp(true);}\nDropDownTreePanel.prototype.closeUp=function(itemClick){if(this.multSelect){var checkedNodes=this.tree.getCheckedNodes();var oldCheckedNodesId=null;if(this.dropDownTree.selectedId)\noldCheckedNodesId=this.dropDownTree.selectedId.split(\",\");var oldCheckedNodesName=null;if(this.dropDownTree.selectedValue)\noldCheckedNodesName=this.dropDownTree.selectedValue.split(\",\");if(checkedNodes){this.selectedValue=\"\";this.selectedId=\"\";for(var i=0;i<checkedNodes.length;i++){if(i==0){this.selectedValue=checkedNodes[i]._alias||checkedNodes[i]._name;this.selectedId=checkedNodes[i]._id;}else{this.selectedValue+=\",\"+(checkedNodes[i]._alias||checkedNodes[i]._name);this.selectedId+=\",\"+checkedNodes[i]._id;}}\nif(oldCheckedNodesId&&this.lazyLoadChild){for(var i=0;i<oldCheckedNodesId.length;i++){var oldCheckedNodeId=oldCheckedNodesId[i];var oldCheckedNodeName=oldCheckedNodesName[i];var hasNode=false;for(var id in this.tree.nodes){var node=this.tree.nodes[id];if(node._id==oldCheckedNodeId){hasNode=true;break;}}\nif(!hasNode){if(this.selectedId){this.selectedId+=\",\"+oldCheckedNodeId;this.selectedValue+=\",\"+oldCheckedNodeName;}else{this.selectedId=oldCheckedNodeId;this.selectedValue=oldCheckedNodeName;}}}}}}\nthis.onCloseUp.fire(this,itemClick);this.setVisible(false);this.removeListener(document.body,\"mousedown\",DropDownTreePanel.superclass.doMouseDown);DropDownTreePanel.superclass.closeUp.call(this,itemClick);}\nDropDownTreePanel.prototype.itemsCount=function(){return this.tree.rootNode.firstChild?1:0;}\nDropDownTreePanel.prototype.initTree=function(clientId,paramId,parentFieldName,multSelect,checkDescendents,noNull){this.multSelect=multSelect;if(this.multSelect){this.tree.setCheckBoxType(1);}else{this.tree.setCheckBoxType(0);this.tree.onSelectNode.subscribe(this.selectedTree,this);}\nthis.tree.render(clientId,paramId,parentFieldName,checkDescendents,noNull);}","js/freequery/control/DateTimePicker.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var DropDownPanel=jsloader.resolve(\"freequery.control.DropDownPanel\");var ComboBox=jsloader.resolve(\"freequery.control.ComboBox\");var util=jsloader.resolve(\"freequery.common.util\");var Calendar=jsloader.resolve(\"freequery.thirdparty.Calendar\");DateTimePicker=function(parentObject,width){this.parent=parentObject;if(domutils.isFirefox()||domutils.isChrome()||domutils.isSafari())\nthis.panel=document.createElement(\"div\");else\nthis.panel=document.createElement(\"span\");this.panel.style.height=ComboBox.DefaultHeight;this.panel.className=\"combobox-panel\";this.parent.appendChild(this.panel);this.setWidth(width);this.oneditChange=new CustomEvent(\"editChange\",this);this.edit=document.createElement(\"input\");var editWidth=width-ComboBox.ButtonWidth-2;if(domutils.isFirefox()||domutils.isChrome()||domutils.isSafari())\neditWidth=width-ComboBox.ButtonWidth;this.edit.style.width=editWidth;this.edit.style.height=ComboBox.DefaultHeight;this.edit.type=\"text\";this.edit.className=\"combobox-edit\";this.panel.appendChild(this.edit);this.addListener(this.edit,\"keyup\",this.editKeyup,this);this.addListener(this.edit,\"blur\",this.doEditBlur,this);this.addListener(this.edit,\"change\",this.editChange,this);this.btn=document.createElement(\"input\");this.btn.type=\"button\";this.btn.style.width=ComboBox.ButtonWidth;this.btn.style.height=ComboBox.DefaultHeight;this.btn.className=\"combobox-button\";this.panel.appendChild(this.btn);this.addListener(this.btn,\"click\",this.btnClick,this);this.oldValue=\"\";this.tempValue=\"\";this.calendar=new Calendar();this.dataTimetype=\"DATE\";this.dataTimeDatatype=\"DATE\";this.onselectChange=new CustomEvent(\"selectChange\",this);}\nlang.extend(DateTimePicker,Module);DateTimePicker.prototype.destroy=function(){this.clear();this.onselectChange=null;this.removeListener(this.edit,\"change\",this.editChange);this.removeListener(this.edit,\"keyup\",this.editKeyup);this.removeListener(this.edit,\"blur\",this.editBlur);try{domutils.destroyNode(this.edit);}catch(e){}\nthis.edit=null;this.removeListener(this.btn,\"click\",this.btnClick);try{domutils.destroyNode(this.btn);}catch(e){}\nthis.btn=null;try{domutils.destroyNode(this.panel);}catch(e){}\nthis.panel=null;this.parent=null;if(window.WebCalendar){window.WebCalendar.doCancelClick();}\nthis.calendar=null;DateTimePicker.superclass.destroy.call(this);}\nDateTimePicker.prototype.setType=function(type){this.dataTimetype=type;var date=new Date();var d=date.getFullYear()+\"-\"+(date.getMonth()+1)+\"-\"+date.getDate();var t=date.getHours()+\":\"+date.getMinutes();var value=null;if(type=='DATETIME')\nvalue=d+' '+t;else if(type=='DATE')\nvalue=d;else if(type=='TIME')\nvalue=t;if(value){this.setValue(value);}}\nDateTimePicker.prototype.setDateType=function(type){this.dataTimeDatatype=type;}\nDateTimePicker.prototype.setWidth=function(width){this.panel.style.width=width;}\nDateTimePicker.prototype.btnClick=function(e){if(this.calendar){this.calendar.docOnClick(e);this.calendar.calendar(e,this.edit,this.dataTimetype);}}\nDateTimePicker.prototype.editKeyup=function(){var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");var ev=eventutil.getEvent();if(ev.charCode==13)\nthis.edit.blur();}\nDateTimePicker.prototype.doEditBlur=function(){if(this.edit.value==\"\"&&this.edit.value!=this.tempValue){var transValue=this.edit.value;this.tempValue=transValue;this.onselectChange.fire(this,this.oldValue,transValue,this.oldValue,transValue);this.oldValue=transValue;}\nif(this.edit.value!=this.tempValue){var transValue=this.edit.value;if(this.dataTimetype==\"DATE\"){if(!util.checkDateTimeString(transValue,1)){alert(\"日期格式不正确，请重新输入！\");return;}\nvar d=new Date(Date.parse(transValue.replace(/-/g,\"/\")));transValue=d.getFullYear()+\"-\"+this.appendZero(d.getMonth()+1)+\"-\"+this.appendZero(d.getDate());}else if(this.dataTimetype==\"TIME\"){if(!util.checkDateTimeString(transValue,2)){alert(\"时间格式不正确，请重新输入！\");return;}\nvar t=transValue.split(\":\");transValue=this.appendZero(t[0])+\":\"+this.appendZero(t[1])+\":\"+\"00\";}else if(this.dataTimetype==\"DATETIME\"){if(!util.checkDateTimeString(transValue,3)){alert(\"日期时间格式不正确，请重新输入！\");return;}\nvar d=new Date(Date.parse(transValue.replace(/-/g,\"/\")));transValue=d.getFullYear()+\"-\"+this.appendZero(d.getMonth()+1)+\"-\"+this.appendZero(d.getDate())\n+\" \"+this.appendZero(d.getHours())+\":\"+this.appendZero(d.getMinutes())+\":\"+\"00\";}\nthis.tempValue=transValue;if(this.dataTimeDatatype!=this.dataTimetype){var date=new Date();if(this.dataTimeDatatype==\"DATE\"&&this.dataTimetype==\"TIME\"){transValue=date.getFullYear()+\"-\"+this.appendZero((date.getMonth()+1))+\"-\"+this.appendZero(date.getDate());}else if(this.dataTimeDatatype==\"DATE\"&&this.dataTimetype==\"DATETIME\"){transValue=(transValue.split(\" \"))[0];}else if(this.dataTimeDatatype==\"TIME\"&&this.dataTimetype==\"DATETIME\"){transValue=(transValue.split(\" \"))[1];}else if(this.dataTimeDatatype==\"TIME\"&&this.dataTimetype==\"DATE\"){transValue=this.appendZero(date.getHours())+\":\"+this.appendZero(date.getMinutes());}else if(this.dataTimeDatatype==\"DATETIME\"&&this.dataTimetype==\"DATE\"){transValue=transValue+\" \"+this.appendZero(date.getHours())+\":\"+this.appendZero(date.getMinutes());}else if(this.dataTimeDatatype==\"DATETIME\"&&this.dataTimetype==\"TIME\"){transValue=date.getFullYear()+\"-\"+this.appendZero((date.getMonth()+1))+\"-\"+this.appendZero(date.getDate())+\" \"+transValue;}}\nthis.onselectChange.fire(this,this.oldValue,transValue,this.oldValue,transValue);this.oldValue=transValue;}}\nDateTimePicker.prototype.appendZero=function(value){return((\"00\"+value).substr((\"00\"+value).length-2));}\nDateTimePicker.prototype.editChange=function(){this.oneditChange.fire(this,this.edit.value);}\nDateTimePicker.prototype.setAttribute=function(name,value){this.panel.setAttribute(name,value);}\nDateTimePicker.prototype.getAttribute=function(name){return this.panel.getAttribute(name);}\nDateTimePicker.prototype.setValue=function(value){this.oldValue=value;this.tempValue=value;this.edit.value=value;}\nDateTimePicker.prototype.getValue=function(){return this.edit.value;}\nDateTimePicker.prototype.setReadOnly=function(readonly){this.edit.readOnly=readonly;}\nDateTimePicker.prototype.getReadOnly=function(){return this.edit.readOnly;}\nDateTimePicker.prototype.setEnabled=function(enable){this.enabled=enable;this.panel.disabled=!this.enabled;this.btn.disabled=!this.enabled;this.edit.style.background=this.enabled?\"\":\"#F6F6F6\";}\nDateTimePicker.prototype.clear=function(){this.setValue(\"\");}","js/freequery/control/DragTable.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var util=jsloader.resolve(\"freequery.common.util\");var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");DragTable=function(tableObj,parentObj,flagdrag,dragDiv){this.parent=parentObj;this.dragTable=tableObj;if(flagdrag)\nthis.flag_drag=flagdrag;else\nthis.flag_drag=DragTable.FLAGDRAG;if(dragDiv){this.dragDiv=dragDiv;}else{this.dragDiv=document.createElement(\"div\");this.dragDiv.onselectstart=function(){return false};this.dragDiv.className=\"dragDiv\";this.dragDiv.style.display=\"none\";this.dragDiv.style.cursor=\"default\";this.parent.appendChild(this.dragDiv);}\nthis.onHeadClick=new CustomEvent();this.addListener(this.dragTable,\"mousedown\",this.doMouseDown,this);this.onDragEndColumn=new CustomEvent(\"dragEndColumn\",this);}\nlang.extend(DragTable,Module);DragTable.prototype.destroy=function(){this.dragTable=null;this.flag_drag=null;this.dragDiv=null;this.onDragEndColumn=null;this.parent=null;DragTable.superclass.destroy.call(this);}\nDragTable.FLAGDRAG=\"_drag_\";DragTable.PRECOLOR=\"lavender\";DragTable.ENDCOLOR=\"lightslategray\";DragTable.prototype.canDrag=function(c){if(!c)\nreturn false;return c.getAttribute(this.flag_drag)==true||c.getAttribute(this.flag_drag)==\"true\";}\nDragTable.prototype.registerDragObj=function(c){this.addListener(c,\"mousedown\",this.doMouseDown,this);}\nDragTable.prototype.reset=function(){if(this.preCell)\nthis.preCell.style.backgroundColor=this.drageTable_oldBKColor;this.moveable=false;this.dragDiv.style.display=\"none\";this.removeListener(this.parent,\"mouseup\",this.doMouseUp);this.removeListener(this.parent,\"mousemove\",this.doMouseMove);this.parent.onselectstart=this.oldonselectstart;this.dragTable.parentNode.onselectstart=this.oldonselectstart2;this.dragTable.onselectstart=this.oldonselectstart3;}\nDragTable.prototype.doMouseUp=function(){this.hideMaskDiv();this.reset();}\nDragTable.prototype.doMouseMove=function(){if(this.moveable)\n{this.dragMaskDiv();this.resetDragDiv();}}\nDragTable.prototype.getParentCell=function(node){if(node.tagName==\"TD\")\nreturn node;else if(node.parentNode&&node.parentNode.tagName==\"TD\"){return node.parentNode;}\nelse if(node.parentNode.parentNode&&node.parentNode.parentNode.tagName==\"TD\"){return node.parentNode.parentNode;}\nreturn null;}\nDragTable.prototype.doMouseDown=function(){var ev=eventutil.getEvent();if(domutils.isLeftButton(ev.button)){var cell=null;if(ev.target.tagName==\"TD\")\ncell=ev.target;else if(ev.target.name==\"headerCell\"||ev.target.name==\"header\")\ncell=this.getParentCell(ev.target);if(!this.canDrag(cell))\nreturn;this.onHeadClick.fire(ev.target,ev);this.addListener(this.parent,\"mouseup\",this.doMouseUp,this);this.addListener(this.parent,\"mousemove\",this.doMouseMove,this);this.oldonselectstart=this.parent.onselectstart;this.parent.onselectstart=\"return false;\";this.oldonselectstart2=this.dragTable.parentNode.onselectstart;this.dragTable.parentNode.onselectstart=\"return false;\";this.oldonselectstart3=this.dragTable.onselectstart;this.dragTable.onselectstart=\"return false;\";this.showMaskDiv();}}\nDragTable.prototype.resetDragDiv=function(){var ev=eventutil.getEvent();var mouseX=ev.pageX;var mouseY=ev.pageY;var p=util.getAbsolutePos(this.dragTable);if(!(p.x<mouseX&&mouseX<p.x+this.dragTable.offsetWidth+50&&p.y-50<mouseY&&mouseY<p.y+this.dragTable.parentNode.offsetHeight))\nthis.reset();}\nDragTable.prototype.getContentDiv=function(){var pNode=this.dragTable.parentNode;var contentDiv=null;while(pNode&&pNode.bofid!=\"_contentDiv\"){pNode=pNode.parentNode;}\nif(pNode&&pNode.bofid==\"_contentDiv\"){contentDiv=pNode;}else{var alignControlorTable=this.dragTable.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;var contentDiv=alignControlorTable.parentNode.parentNode.parentNode.parentNode.parentNode;}\nreturn contentDiv;}\nDragTable.prototype.showMaskDiv=function(){var ev=eventutil.getEvent();var obj=ev.target;if(obj.tagName.toLowerCase()==\"span\")\nobj=obj.parentNode;if(obj.tagName.toLowerCase()==\"span\")\nobj=obj.parentNode;if((obj.tagName.toLowerCase()==\"td\")&&(this.canDrag(obj)))\n{obj.style.cursor=\"default\";var p=util.getAbsolutePos(obj,this.parent);this.dragDiv.style.width=obj.offsetWidth;this.dragDiv.style.height=obj.offsetHeight;var contentDiv=this.getContentDiv();if(contentDiv.scrollTop)\nthis.dragDiv.style.top=p.y-contentDiv.scrollTop;else\nthis.dragDiv.style.top=p.y;if(contentDiv.scrollLeft)\nthis.dragDiv.style.left=p.x-contentDiv.scrollLeft;else\nthis.dragDiv.style.left=p.x;this.dragDiv.innerHTML=obj.innerHTML;this.dragDiv.style.display=\"\";this.drageTable_x0=p.x;this.drageTable_y0=p.y;this.drageTable_x1=ev.pageX;this.drageTable_y1=ev.pageY;this.drageTable_oldBKColor=obj.style.backgroundColor;obj.style.backgroundColor=DragTable.PRECOLOR;this.preCell=obj;this.moveable=true;}}\nDragTable.prototype.dragMaskDiv=function(){var ev=eventutil.getEvent();if(this.moveable)\n{var contentDiv=this.getContentDiv();this.dragDiv.style.top=ev.pageY-this.drageTable_y1+this.drageTable_y0-contentDiv.scrollTop;this.dragDiv.style.left=ev.pageX-this.drageTable_x1+this.drageTable_x0-contentDiv.scrollLeft;if(this.mouseOverCell)\nthis.mouseOverCell.style.backgroundColor=this.mouseOverColor;var targetCell=this.getTargetCell();if((targetCell)&&(targetCell!=this.preCell)){this.mouseOverCell=targetCell;this.mouseOverColor=this.mouseOverCell.style.backgroundColor;this.mouseOverCell.style.backgroundColor=DragTable.ENDCOLOR;}}}\nDragTable.prototype.hideMaskDiv=function(){if(this.moveable)\n{if(this.preCell!=null)\n{var targetCell=this.getTargetCell();if(targetCell)\n{if(this.preCell==targetCell)\nreturn;var preCellWidth=this.preCell.style.width!=\"\"?this.preCell.style.width:this.preCell.clientWidth-2;var targetCellWidth=targetCell.style.width!=\"\"?targetCell.style.width:targetCell.clientWidth-2;this.preCell.style.backgroundColor=this.drageTable_oldBKColor;targetCell.style.backgroundColor=this.mouseOverColor;targetCell.style.cursor=\"default\";this.preCell.style.cursor=\"default\";this.swithTableCol(this.preCell,targetCell);this.swithTableGroupCol(this.preCell,targetCell,preCellWidth,targetCellWidth)\nthis.preCell.style.backgroundColor=this.drageTable_oldBKColor;this.onDragEndColumn.fire(this,this.preCell,targetCell);}else\nthis.preCell.style.backgroundColor=this.drageTable_oldBKColor;}\nthis.moveable=false;this.dragDiv.style.display=\"none\";}}\nDragTable.prototype.getGroupCol=function(fieldId){var cols=this.dragTable.getElementsByTagName(\"COL\");if(cols){for(var i=0,len=cols.length;i<len;i++){if(cols[i].fid==fieldId)\nreturn cols[i];}}\nreturn null;};DragTable.prototype.swithTableGroupCol=function(col1,col2,width1,width2){var dragGroupCol=this.getGroupCol(col1.id);var targetGroupCol=this.getGroupCol(col2.id);if(dragGroupCol&&targetGroupCol){var index1=this.getColumnIndex(col1);var index2=this.getColumnIndex(col2);var flag=(index1>index2);if(!flag)\ntargetGroupCol.insertAdjacentElement(\"beforeBegin\",dragGroupCol);else\ntargetGroupCol.insertAdjacentElement(\"afterEnd\",dragGroupCol);}\ndragGroupCol.style.width=width1;targetGroupCol.style.width=width2;}\nDragTable.prototype.getTargetCell=function(){var ev=eventutil.getEvent();this.dragDiv.style.display=\"none\";var oTable=this.dragTable;var element=document.elementFromPoint(ev.pageX,ev.pageY);var parent=element.parentNode;while(parent!=null){if(parent==oTable){var tdObj=element;while(tdObj!=null&&tdObj.tagName.toLowerCase()!=\"td\")\ntdObj=tdObj.parentNode;if(tdObj!=null&&this.canDrag(tdObj)){this.dragDiv.style.display=\"\";this.flag_doing=false;return tdObj;}\nelse{this.dragDiv.style.display=\"\";return null;}}\nparent=parent.parentNode;}\nthis.dragDiv.style.display=\"\";return null;}\nDragTable.prototype.swithTableCol=function(col1,col2){var index1=this.getColumnIndex(col1);var index2=this.getColumnIndex(col2);var flag=(index1>index2);var startIndex=0;if(this.dragTable.getAttribute(\"_headerRowIndex\"))\nstartIndex=this.dragTable.getAttribute(\"_headerRowIndex\");var r=this.dragTable.rows[startIndex];var tBody=this.dragTable.tBodies[0];this.dragTable.removeChild(tBody);while(r!=null){var index=0;var c=r.firstChild;var c1=null;var c2=null;while(c!=null){if(index==index1){c1=c;if(flag)\nbreak;}\nif(index==index2){c2=c;if(!flag)\nbreak;}\nindex++;c=c.nextSibling;}\nif(flag)\nc2.insertAdjacentElement(\"beforeBegin\",c1);else\nc2.insertAdjacentElement(\"afterEnd\",c1);r=r.nextSibling;}\nthis.dragTable.appendChild(tBody);}\nDragTable.prototype.getColumnIndex=function(cell){var index=0;var child=cell.previousSibling;while(child){index++;child=child.previousSibling;}\nreturn index;}","js/freequery/control/FreqDatePicker.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var ComboBox=jsloader.resolve(\"freequery.control.ComboBox\");var ReportDatePicker=jsloader.resolve(\"freequery.control.ReportDatePicker\");FreqDatePicker=function(parentObject,width,type,typeList){this.div=document.createElement(\"div\");var table=document.createElement(\"table\");var tbody=document.createElement(\"tbody\");var tr=document.createElement(\"tr\");this.tdFreq=document.createElement(\"td\");this.tdDateCtrl=document.createElement(\"td\");this.div.appendChild(table);table.appendChild(tbody);tbody.appendChild(tr);tr.appendChild(this.tdFreq);tr.appendChild(this.tdDateCtrl);parentObject.appendChild(this.div);FreqDatePicker.superclass.constructor.call(this,this.tdDateCtrl,width,type);this.onEditChanged=new CustomEvent(\"EditChanged\",this);this.oneditChange.subscribe(this.doEditChanged,this);this.onSelectChanged=new CustomEvent(\"SelectChanged\",this);this.onselectChange.subscribe(this.doSelectChanged,this);this.edit.contentEditable=false;this.typeValues={\"YEAR\":\"年\",\"HALFYEAR\":\"半年\",\"QUARTER\":\"季\",\"MONTH\":\"月\",\"TENDAYS\":\"旬\",\"WEEK\":\"周 \",\"FIVEDAYS\":\"五日\",\"DAY\":\"日\"};if(typeList&&typeList.length>0){var items=[];for(var i=0;i<typeList.length;i++){var v1=typeList[i];var v2=this.typeValues[v1];if(v2!=null)\nitems.push([v1,v2]);}\nif(items.length>0){this.freqCombo=new ComboBox(this.tdFreq,this.tdFreq,45,this.tdFreq);this.freqCombo.insertItems(items);if(!this.type)\nthis.type=items[items.length-1][0];this.freqCombo.setSelectedItem(this.type,this.typeValues[this.type]);this.freqCombo.setReadOnly(true);this.freqCombo.onselectChange.subscribe(this.doFreqComboChange,this);}}}\nlang.extend(FreqDatePicker,ReportDatePicker);FreqDatePicker.VALUE_DELIMITER=\"#\";FreqDatePicker.prototype.destroy=function(){FreqDatePicker.superclass.destroy.call(this);}\nFreqDatePicker.prototype.doFreqComboChange=function(obj,oldValue,newValue,oldText,newText){this.setType(newValue);}\nFreqDatePicker.prototype.setValue=function(value){if(this.valueIsChanging)\nreturn;this.valueIsChanging=true;var values=(value||\"\").split(FreqDatePicker.VALUE_DELIMITER);FreqDatePicker.superclass.setValue.call(this,values[0]?values[0]:\"\");if(values.length>1){this.setType(values[1]);if(this.freqCombo)\nthis.freqCombo.setSelectedItem(this.type,this.typeValues[this.type]);}\nthis.valueIsChanging=false;}\nFreqDatePicker.prototype.getValue=function(){var result=[];result.push(this.edit.value);result.push(this.type);result.push(this.typeValues[this.type]);var value=result.join(FreqDatePicker.VALUE_DELIMITER);return value;}\nFreqDatePicker.prototype.doSelectChanged=function(){}\nFreqDatePicker.prototype.doEditChanged=function(obj,value){if(this.valueIsChanging)\nreturn;var newValue=this.getValue();this.onEditChanged.fire(obj,newValue);}\nFreqDatePicker.prototype.getSelectedId=function(){return this.getValue();}\nFreqDatePicker.prototype.getSelectedText=function(){return this.getValue();}","js/freequery/control/Listbox.js":"\n﻿\nvar Module=jsloader.resolve('freequery.widget.Module');var Listbox=function(parentObject,mainTable){this.parent=parentObject;this.enableHead=false;this.id2box={};if(mainTable){this.mainTable=mainTable;var allinput=this.mainTable.getElementsByTagName(\"input\");for(var i=0;i<allinput.length;i++){if(allinput[i].type==\"checkbox\"){var id=allinput[i].id;this.id2box[id]=allinput[i];}}}else{this.mainTable=document.createElement('table');this.mainTable.style.width='100%';this.parent.appendChild(this.mainTable);}};lang.extend(Listbox,Module);Listbox.prototype.destroy=function(){this.clear();this.id2box=null;if(this.parent){try{domutils.destroyNode(this.mainTable);}catch(e){}}\nthis.mainTable=null;this.parent=null;Listbox.superclass.destroy.call(this);};Listbox.prototype.visible=function(value){this.mainTable.style.display=value?'':'none';}\nListbox.prototype.insertItem=function(id,name,checked,disabled){var r=this.mainTable.insertRow(-1);var c1=r.insertCell(-1);c1.style.height='26px';c1.innerHTML=''\nvar check=document.createElement('input');check.type='checkbox';check.id=id;check.setAttribute('itemName',name);c1.appendChild(check);this.id2box[id]=check;check.checked=checked;if(typeof disabled!='undefined'){check.disabled=disabled;}\nvar text1=document.createElement('span');c1.appendChild(text1);text1.innerHTML='&nbsp;'+name;return r;};Listbox.prototype.insertSplit=function(){var r=this.mainTable.insertRow(-1);var c1=r.insertCell(-1);c1.innerHTML=c1.innerHTML+'<hr>';};Listbox.prototype.getSelectedByType=function(withDisabled,type){var selected=[],map=this.id2box;for(var id in map){var box=map[id];if(box&&box.checked){if(!box.disabled||withDisabled){switch(type){case 0:selected.push(id);break;case 1:selected.push({id:id,alias:box.itemName});break;case 2:selected.push(box);break;default:selected.push(box);break;}}}}\nreturn selected;};Listbox.prototype.getSelectedIdList=function(withDisabled){return this.getSelectedByType(withDisabled,0);};Listbox.prototype.getSelectedList=function(withDisabled){return this.getSelectedByType(withDisabled,1);};Listbox.prototype.getCheckboxList=function(withDisabled){var selected=[],map=this.id2box;for(var id in map){var box=map[id];if(box){if(!box.disabled){selected.push(box);}else if(withDisabled&&box.disabled){selected.push(box);}}}\nreturn selected;};Listbox.prototype.getRowItemById=function(id){var box=this.id2box[id];if(box&&box.parentNode){return box.parentNode.parentNode;}else{return null;}};Listbox.prototype.getItemCheckboxById=function(id){return this.id2box[id]||null;};Listbox.prototype.setItemChecked=function(id,checked){var box=this.getItemCheckboxById(id);if(box){box.checked=checked;}};Listbox.prototype.getItemChecked=function(id){var box=this.getItemCheckboxById(id);if(box){return box.checked;}else{return false;}};Listbox.prototype.addItemDesc=function(id,text){var r=this.getRowItemById(id);var c1=null;var text1=null;if(r.cells.length>1){c1=r.cells[1];text1=c1.getElementsByTagName('span')[0];}else{c1=r.insertCell(-1);text1=document.createElement('span');c1.appendChild(text1);}\ntext1.innerText=text;};Listbox.prototype.setItemDisable=function(id,disabled){var box=this.getItemCheckboxById(id);if(box){box.disabled=disabled;}};Listbox.prototype.clearChecked=function(){var selected=[],map=this.id2box;for(var id in map){var box=map[id];if(box&&box.checked){box.checked=false;}}};Listbox.prototype.clearDisabled=function(){var selected=[],map=this.id2box;for(var id in map){var box=map[id];if(box&&box.disabled){box.disabled=false;}}};Listbox.prototype.reset=function(){var selected=[],map=this.id2box;for(var id in map){var box=map[id];if(box){if(box.checked){box.checked=false;}\nif(box.disabled){box.disabled=false;}\nvar r=box.parentNode.parentNode;var c2=r.cells[1];if(c2){var tmp=c2.getElementsByTagName('span');if(tmp&&tmp.length>0){var text1=tmp[0];text1.innerText='';}}}}};Listbox.prototype.clear=function(){if(this.mainTable&&this.mainTable.rows){var rowCount=this.mainTable.rows.length;var startRowCount=this.enableHead?1:0;for(var i=rowCount-1;i>=startRowCount;i--){this.mainTable.deleteRow(i);}\nthis.id2box={};}};Listbox.prototype.setEnableHead=function(enableHead){this.enableHead=enableHead;};","js/freequery/control/ListPanel.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var util=jsloader.resolve(\"freequery.common.util\");var dialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var ListPanel=function(parent){this.parent=parent;this.onselectChange=new CustomEvent(\"selectChange\",this);this.onlistpanelinited=new CustomEvent(\"listpanelinited\",this);this.panel=document.createElement(\"DIV\");this.parent.appendChild(this.panel);this.addListener(this.panel,\"click\",this.onClick,this);this.items=[];this.selectedItems={};}\nlang.extend(ListPanel,Module);ListPanel.uid=0;ListPanel.prototype.destroy=function(){try{domutils.destroyNode(this.panel);}catch(e){}\nListPanel.superclass.destroy.call(this);}\nListPanel.prototype.clear=function(){this.items=[]\nthis.selectedItems={};this.panel.innerHTML=\"\";}\nListPanel.prototype.setAllowMultiSelect=function(allow){this.allowMultiSelect=allow;}\nListPanel.prototype.isAllowMultiSelect=function(){return this.allowMultiSelect;}\nListPanel.prototype.setReadOnly=function(readOnly){this.panel.readOnly=readOnly;}\nListPanel.prototype.isReadOnly=function(){return this.panel.readOnly;}\nListPanel.prototype.setEnabled=function(enabled){this.enabled=enabled;this.panel.disabled=!this.enabled;}\nListPanel.prototype.isEnabled=function(){return this.enabled;}\nListPanel.prototype.setWidth=function(width){this.panel.style.width=width;}\nListPanel.prototype.setComponentDefine=function(componentDefine){this.componentDefine=componentDefine;}\nListPanel.prototype.getItemById=function(id){for(var i=0;i<this.items.length;i++){var item=this.items[i];var tempId=item[0];if(tempId!=null&&tempId==id)\nreturn item;}\nreturn null;}\nListPanel.prototype.getItemByText=function(text){if(this.itemsCount()==0){for(var id in this.selectedItems){var item=this.selectedItems[id];var tempText=item[1];if(tempText!=null&&tempText==text)\nreturn item;}}else{for(var i=0;i<this.items.length;i++){var item=this.items[i];var tempText=item[1];if(tempText!=null&&tempText==text)\nreturn item;}}\nreturn null;}\nListPanel.prototype.setSelectedItem=function(ids,names,add){if(!this.inited){this.onlistpanelinited.fire(this);}\nif(!ids)\nids=names;ids=ids?(ids+\"\"):\"\";if(!names)\nnames=ids;add=!!add;var idList=ids.split(\",\");var nameList=names.split(\",\");this.selectedItems={};var texts=[];for(var i=0;i<idList.length;i++){var item=this.getItemById(idList[i]);if(!item&&add)\nitem=this.insertItem(idList[i],nameList[i]);if(!item&&this.itemsCount()==0){item=[idList[i],nameList[i]];}\nif(item){this.selectedItems[item[0]]=item;texts.push(item[1]);}}\nthis.render();}\nListPanel.prototype.itemsCount=function(){return this.items.length;}\nListPanel.prototype.insertItem=function(id,text){var item=[id,text];this.items.push(item);return item;}\nListPanel.prototype.insertItems=function(datas){var items=[];if(datas&&datas.length){var len=datas.length;for(var i=0;i<len;i++){var data=datas[i];var item=this.insertItem(data[0],data[1]);items.push(item);}}\nreturn items;}\nListPanel.prototype.getSelectedId=function(){var ids=[];for(var id in this.selectedItems){ids.push(id);}\nreturn ids.join(\",\");}\nListPanel.prototype.getSelectedText=function(){var texts=[];for(var id in this.selectedItems){var item=this.selectedItems[id];texts.push(item[1]);}\nreturn texts.join(\",\");}\nListPanel.prototype.setChecked=function(value){this.selectedItems={};var values={};if(this.paramTag.param.multSelect){var list=value.split(\",\");for(var i=0;i<list.length;i++){values[list[i]]=true;}}else{values[value]=true;}\nfor(var i=0;i<this.items.length;i++){var item=this.items[i];if(values[item[0]])\nthis.selectedItems[item[0]]=item;}}\nListPanel.prototype.render=function(){this.panel.innerHTML=\"\";var def=lang.parseJSON(this.componentDefine);var table=document.createElement(\"TABLE\");table.cellPadding=table.cellSpacing=0;if(def.panelColumnsAuto===false){table.style.width=def.width;}else{table.style.width=\"100%\";}\nvar tbody=document.createElement(\"TBODY\");this.panel.appendChild(table);table.appendChild(tbody);var columns=def.panelColumns;var tr=null;var param=this.paramTag.param;var pageTheme=registry.get(\"pageTheme\");var fontSize=null;var color=null;if(pageTheme&&pageTheme.page&&pageTheme.page.parameterFont){fontSize=pageTheme.page.parameterFont.fontSize;color=pageTheme.page.parameterFont.color;}\nvar d=new Date().getTime()+(ListPanel.uid++);for(var i=0,index=0;i<this.items.length;i++,index++){if(index==0){tr=document.createElement(\"TR\");tbody.appendChild(tr);}\nif(index==columns-1)\nindex=-1;var td=document.createElement(\"TD\");tr.appendChild(td);if(def.panelColumnsAuto==false){td.style.width=(100/columns)+\"%\";}\nif(color){td.style.color=color;}\nif(fontSize){td.style.fontSize=fontSize;}\nvar input=document.createElement(\"INPUT\");input.type=param.multSelect?\"CHECKBOX\":\"RADIO\";input.name=d+\"_\"+param.name;input.style.verticalAlign=td.style.verticalAlign=\"middle\";td.__id=input.value=this.items[i][0];td.__item=this.items[i];input.style.vAlign=\"middle\";td.appendChild(input);input.checked=!!this.selectedItems[this.items[i][0]];var text=document.createTextNode(this.items[i][1]);td.appendChild(text);}\nif(def.panelColumnsAuto==false){for(var i=this.items.length;i<columns;i++){var td=document.createElement(\"TD\");tr.appendChild(td);td.innerHTML=\"&nbsp;\";td.style.width=(100/columns)+\"%\";}}}\nListPanel.prototype.onClick=function(e){var target=e.target;if(target.tagName!=\"INPUT\")\nreturn;while(target&&!target.__item&&target!=this.panel)\ntarget=target.parentNode;if(!target.__item)\nreturn;var oldId=this.getSelectedId();var oldValue=this.getSelectedText();if(!this.paramTag.param.multSelect)\nthis.selectedItems={};if(target.firstChild.type.toLowerCase()==\"radio\"||target.firstChild.checked)\nthis.selectedItems[target.__id]=target.__item;else\ndelete this.selectedItems[target.__id];var newId=this.getSelectedId();var newValue=this.getSelectedText();this.onselectChange.fire(this,oldId,newId,oldValue,newValue);}\nListPanel.prototype.resetPanel=function(){this.clear();this.inited=false;this.onlistpanelinited.fire(this);this.render();}","js/freequery/control/ListDialog.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var util=jsloader.resolve(\"freequery.common.util\");var dialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var ListDialog=function(parentObject,untilEl,width){this.parent=parentObject;this.untilEl=untilEl;this.onselectChange=new CustomEvent(\"selectChange\",this);this.oneditChange=new CustomEvent(\"editChange\",this);this.onpopupDialog=new CustomEvent(\"popupDialog\",this);if(domutils.isFirefox()||domutils.isChrome()||domutils.isSafari())\nthis.panel=document.createElement(\"div\");else\nthis.panel=document.createElement(\"span\");this.panel.style.height=ListDialog.BUTTON_HEIGHT;this.panel.className=\"combobox-panel\";this.setWidth(width);this.parent.appendChild(this.panel);this.edit=document.createElement(\"input\");var editWidth=width-ListDialog.BUTTON_WIDTH-2;if(domutils.isFirefox()||domutils.isChrome()||domutils.isSafari())\neditWidth=width-ListDialog.BUTTON_WIDTH;this.edit.style.width=editWidth;this.edit.style.height=ListDialog.BUTTON_HEIGHT;this.edit.type=\"text\";this.edit.nodefaultclass=\"true\";this.edit.className=\"combobox-edit\";this.panel.appendChild(this.edit);this.addListener(this.edit,\"change\",this.editChange,this);this.btn=document.createElement(\"input\");this.btn.type=\"button\";this.btn.nodefaultclass=\"true\";this.btn.style.width=ListDialog.BUTTON_WIDTH;this.btn.style.height=ListDialog.BUTTON_HEIGHT;this.btn.className=\"combobox-button\";this.panel.appendChild(this.btn);this.addListener(this.btn,\"click\",this.btnClick,this);this.enabled=true;this.allowMultiSelect=false;this.items=[];this.selectedItems={};}\nlang.extend(ListDialog,Module);ListDialog.BUTTON_WIDTH=15;ListDialog.BUTTON_HEIGHT=16;ListDialog.prototype.destroy=function(){this.clear();this.onselectChange=null;this.oneditChange=null;this.onpopupDialog=null;this.untilEl=null;this.removeListener(this.edit,\"change\",this.editChange);try{domutils.destroyNode(this.edit);}catch(e){}\nthis.edit=null;this.removeListener(this.btn,\"click\",this.btnClick);try{domutils.destroyNode(this.btn);}catch(e){}\nthis.btn=null;try{domutils.destroyNode(this.panel);}catch(e){}\nthis.panel=null;this.parent=null;ListDialog.superclass.destroy.call(this);}\nListDialog.prototype.editChange=function(){var id=null;var text=this.edit.value;if(text!=null){var ids=[];var texts=[];var inputs=text.split(\",\");for(var i=0;i<inputs.length;i++){var item=this.getItemByText(inputs[i]);if(item){ids.push(item[0]);texts.push(item[1]);if(!this.isAllowMultiSelect())\nbreak;}}\nid=ids.join(\",\");text=texts.join(\",\");}\nthis.setSelectedItem(id,text,false);this.oneditChange.fire(this,id,text);}\nListDialog.prototype.btnClick=function(){if(!this.enabled)\nreturn;this.onpopupDialog.fire(this);var dialogConfig={};dialogConfig.title=\"设置选中值\";dialogConfig.size=dialogFactory.size.LARGE;dialogConfig.fullName=\"freequery.control.DialogSelector\";var optionsFullName=\"freequery.control.ListOptions\";var optionsParams=[util.getClean(this.items)];var isMultiSelect=this.isAllowMultiSelect();var selectedItems=util.getClean(this.selectedItems);var noNull=lang.parseJSON(this.componentDefine).noNull;var datas=[optionsFullName,optionsParams,isMultiSelect,selectedItems,noNull];dialogFactory.showDialog(dialogConfig,datas,this.doCloseSelector,this);}\nListDialog.prototype.doCloseSelector=function(success,selectedItems,callbackInfo){if(!success)\nreturn;var oldId=this.getSelectedId();var oldText=this.getSelectedText();var ids=[];var names=[];if(selectedItems){for(var id in selectedItems){ids.push(id);names.push(selectedItems[id][1]);}}\nids=ids.join(\",\");this.setSelectedItem(ids,names.join(\",\"),false);var newId=this.getSelectedId();var newText=this.getSelectedText();this.onselectChange.fire(this,oldId,newId,oldText,newText);}\nListDialog.prototype.clear=function(){this.items=[]\nthis.selectedItems={};this.edit.value=\"\";}\nListDialog.prototype.setAttribute=function(name,value){this.panel.setAttribute(name,value);}\nListDialog.prototype.getAttribute=function(name){return this.panel.getAttribute(name);}\nListDialog.prototype.setAllowMultiSelect=function(allow){this.allowMultiSelect=allow;}\nListDialog.prototype.isAllowMultiSelect=function(){return this.allowMultiSelect;}\nListDialog.prototype.setReadOnly=function(readOnly){this.edit.readOnly=readOnly;}\nListDialog.prototype.isReadOnly=function(){return this.edit.readOnly;}\nListDialog.prototype.setEnabled=function(enabled){this.enabled=enabled;this.panel.disabled=!this.enabled;this.btn.disabled=!this.enabled;this.edit.style.background=this.enabled?\"\":\"#F6F6F6\";}\nListDialog.prototype.isEnabled=function(){return this.enabled;}\nListDialog.prototype.setWidth=function(width){this.panel.style.width=width;}\nListDialog.prototype.setComponentDefine=function(componentDefine){this.componentDefine=componentDefine;}\nListDialog.prototype.getItemById=function(id){for(var i=0;i<this.items.length;i++){var item=this.items[i];var tempId=item[0];if(tempId!=null&&tempId==id)\nreturn item;}\nreturn null;}\nListDialog.prototype.getItemByText=function(text){if(this.itemsCount()==0){for(var id in this.selectedItems){var item=this.selectedItems[id];var tempText=item[1];if(tempText!=null&&tempText==text)\nreturn item;}}else{for(var i=0;i<this.items.length;i++){var item=this.items[i];var tempText=item[1];if(tempText!=null&&tempText==text)\nreturn item;}}\nreturn null;}\nListDialog.prototype.setSelectedItem=function(ids,names,add){if(!ids)\nids=names;ids=ids?(ids+\"\"):\"\";if(!names)\nnames=ids;add=!!add;var idList=ids.split(\",\");var nameList=names.split(\",\");this.selectedItems={};var texts=[];for(var i=0;i<idList.length;i++){var item=this.getItemById(idList[i]);if(!item&&add)\nitem=this.insertItem(idList[i],nameList[i]);if(!item&&this.itemsCount()==0){item=[idList[i],nameList[i]];}\nif(item){this.selectedItems[item[0]]=item;texts.push(item[1]);}}\nthis.edit.value=texts.join(\",\");}\nListDialog.prototype.itemsCount=function(){return this.items.length;}\nListDialog.prototype.insertItem=function(id,text,data,imgs){var item=[id,text,data,imgs];this.items.push(item);return item;}\nListDialog.prototype.insertItems=function(datas){var items=[];if(datas&&datas.length){var len=datas.length;for(var i=0;i<len;i++){var data=datas[i];var item=this.insertItem(data[0],data[1],data[2],data[3]);items.push(item);}}\nreturn items;}\nListDialog.prototype.getSelectedId=function(){var ids=[];for(var id in this.selectedItems){ids.push(id);}\nreturn ids.join(\",\");}\nListDialog.prototype.getSelectedText=function(){var texts=[];for(var id in this.selectedItems){var item=this.selectedItems[id];texts.push(item[1]);}\nreturn texts.join(\",\");}\nListDialog.prototype._mobile_btnClick=ListDialog.prototype.btnClick;ListDialog.prototype.btnClick=function(){if(domutils.isIOS()||domutils.isAndroid()){alert('无法在移动设备上使用列表对话框！')\nreturn;}\nthis._mobile_btnClick();}","js/freequery/control/QueryGrid.js":"\nvar CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var BaseGrid=jsloader.resolve(\"freequery.control.BaseGrid\");var util=jsloader.resolve(\"freequery.common.util\");var PopupMenu=jsloader.resolve(\"freequery.menu.PopupMenu\");var QueryGrid=function(parentObject,showBtn,mainTable,clientConfig,rightClickEnable){QueryGrid.superclass.constructor.call(this,parentObject,mainTable);this.doubluePropMark=false;this.opbutton=domutils.findElementByClassName([parentObject],\"_OPBUTTON\");if(mainTable){this.doubluePropMark=true;this.addListener(parentObject,\"click\",this.doParentClick,this);this.addListener(parentObject,\"mousedown\",this.doParentMouseDown,this);var evName=\"mouseover\";this.addListener(parentObject,evName,this.showOperateBtn,this);}\nthis.gridProp=null;this.onSort=new CustomEvent(\"sort\",this);this.onProp=new CustomEvent(\"prop\",this);this.onFormula=new CustomEvent(\"formula\",this);this.onFilter=new CustomEvent(\"filter\",this);this.onDelField=new CustomEvent(\"delField\",this);this.onDelField.terminateOnFalse=true;this.onCheckColClick=new CustomEvent(\"checkColClick\",this);this.afterNewCol=new CustomEvent(\"afternewcol\",this);this.selectedRowColor=\"\";this.addListener(this.mainTable,\"click\",this.doRowSelect,this);this.showButton=showBtn;this.clientConfig=clientConfig;this._headerRowIndex=0;this.popupMenu=new PopupMenu(document.body,this);this.orderMemu=this.popupMenu.createMenuItem(\"排序\");this.ascMemu=this.orderMemu.createMenuItem(\"升序\",\"ASC\");this.descMemu=this.orderMemu.createMenuItem(\"降序\",\"DESC\");this.noneMemu=this.orderMemu.createMenuItem(\"无\",\"NONE\");this.filteringMenu=this.popupMenu.createMenuItem(\"过滤\");this.showAllMemu=this.filteringMenu.createMenuItem(\"显示所有\",\"SHOWALL\");this.customFilterMemu=this.filteringMenu.createMenuItem(\"定制过滤\",\"CUSTOMFILTER\");this.formulaMenu=this.popupMenu.createMenuItem(\"聚合\");this.nullMemu=this.formulaMenu.createMenuItem(\"原始值\",\"NULL\");this.sumMemu=this.formulaMenu.createMenuItem(\"合计值\",\"SUM\");this.maxMemu=this.formulaMenu.createMenuItem(\"最大值\",\"MAX\");this.minMemu=this.formulaMenu.createMenuItem(\"最小值\",\"MIN\");this.avgMemu=this.formulaMenu.createMenuItem(\"平均值\",\"AVG\");this.countMemu=this.formulaMenu.createMenuItem(\"计数\",\"COUNT\");this.onlyCountMemu=this.formulaMenu.createMenuItem(\"唯一计数\",\"DISTINCT_COUNT\");this.propertyMenu=this.popupMenu.createMenuItem(\"属性\",\"PROPERTY\");this.delFieldMemu=this.popupMenu.createMenuItem(\"删除\",\"DELETEFIELD\");this.rightClickEnable=rightClickEnable==undefined?true:rightClickEnable;}\nlang.extend(QueryGrid,BaseGrid);QueryGrid.prototype.clearMenuState=function(){this.delFieldMemu.setVisibility(false);this.filteringMenu.setVisibility(false);this.formulaMenu.setVisibility(false);this.propertyMenu.setVisibility(false);this.orderMemu.setVisibility(false);this.nullMemu.setVisibility(false);this.sumMemu.setVisibility(false);this.maxMemu.setVisibility(false);this.minMemu.setVisibility(false);this.avgMemu.setVisibility(false);this.countMemu.setVisibility(false);this.onlyCountMemu.setVisibility(false);}\nQueryGrid.prototype.showPopupMenu=function(e){this.clearMenuState();var c=e.target;while(c&&c.tagName!='TD')\nc=c.parentNode;this.fieldTD=c;if(e.target.getAttribute(\"bofclass\")==\"OPBUTTON\"){this.resetMenuState();this.popupMenu.popup(e);}}\nQueryGrid.prototype.resetMenuState=function(){if(util.hasOpFunction(\"BROWSE_FLEXIBLEREPORT_TABLECOLMBUTTON_DELETE\")&&this.bizViewType!=\"RAWSQL_BUSINESS_VIEW\"){this.delFieldMemu.setVisibility(true);}\nif(util.hasOpFunction(\"BROWSE_FLEXIBLEREPORT_TABLECOLMBUTTON_FILTER\")&&this.bizViewType!=\"RAWSQL_BUSINESS_VIEW\"){this.filteringMenu.setVisibility(true);}\nif(util.hasOpFunction(\"BROWSE_FLEXIBLEREPORT_TABLECOLMBUTTON_FORMULA\")&&this.bizViewType!=\"RAWSQL_BUSINESS_VIEW\"){this.formulaMenu.setVisibility(true);}\nif(util.hasOpFunction(\"BROWSE_FLEXIBLEREPORT_TABLECOLMBUTTON_PROPERTIES\")){this.propertyMenu.setVisibility(true);}\nif(util.hasOpFunction(\"BROWSE_FLEXIBLEREPORT_TABLECOLMBUTTON_SORT\")&&this.bizViewType!=\"RAWSQL_BUSINESS_VIEW\"){this.orderMemu.setVisibility(true);}\nif(this.fieldTD&&this.fieldTD.field){var reportField=this.fieldTD.field,bizViewField=reportField.businessViewField;var dataType=bizViewField&&bizViewField.dataType||reportField.dataType;dataType=dataType.toUpperCase();if(dataType==\"REAL\"||dataType.indexOf(\"INT\")>=0||dataType==\"DOUBLE\"||dataType==\"FLOAT\"){this.nullMemu.setVisibility(true);this.sumMemu.setVisibility(true);this.maxMemu.setVisibility(true);this.minMemu.setVisibility(true);this.avgMemu.setVisibility(true);this.countMemu.setVisibility(true);this.onlyCountMemu.setVisibility(true);}else if(dataType==\"DATE\"||dataType==\"TIME\"||dataType==\"DATETIME\"){this.nullMemu.setVisibility(true);this.countMemu.setVisibility(true);this.onlyCountMemu.setVisibility(true);}else{this.nullMemu.setVisibility(true);this.countMemu.setVisibility(true);this.onlyCountMemu.setVisibility(true);}}}\nQueryGrid.prototype.doCmd=function(cmd){if(!this.fieldTD||!this.fieldTD.field)\nreturn;switch(cmd){case\"ASC\":this.onSort.fire(this,this.fieldTD.field,\"ASC\");break;case\"DESC\":this.onSort.fire(this,this.fieldTD.field,\"DESC\");break;case\"NONE\":this.onSort.fire(this,this.fieldTD.field,\"NONE\");break;case\"PROPERTY\":this.onProp.fire(this,this.fieldTD.field);break;case\"NULL\":this.onFormula.fire(this.fieldTD.field,\"NULL\",\"原始值\");break;case\"SUM\":this.onFormula.fire(this.fieldTD.field,\"SUM\",\"合计值\");break;case\"MAX\":this.onFormula.fire(this.fieldTD.field,\"MAX\",\"最大值\");break;case\"MIN\":this.onFormula.fire(this.fieldTD.field,\"MIN\",\"最小值\");break;case\"AVG\":this.onFormula.fire(this.fieldTD.field,\"AVG\",\"平均值\");break;case\"COUNT\":this.onFormula.fire(this.fieldTD.field,\"COUNT\",\"计数\");break;case\"DISTINCT_COUNT\":this.onFormula.fire(this.fieldTD.field,\"DISTINCT_COUNT\",\"唯一计数\");break;case\"SHOWALL\":this.onFilter.fire(this.fieldTD.field.id,\"SHOWALL\",this.fieldTD.field.alias,this.fieldTD.field.dataType);break;case\"CUSTOMFILTER\":this.onFilter.fire(this.fieldTD.field.id,\"CUSTOMFILTER\",this.fieldTD.field.alias,this.fieldTD.field.dataType);break;case\"DELETEFIELD\":this.deleteColByFieldId(this.fieldTD.field.id);break;}}\nQueryGrid.prototype.getHeaderTD=function(target){if(!target)\nreturn;var tdClass=\"table-grid-top-cell\";var tableClass=\"table-grid _query_grid\";while(target&&!domutils.hasClassName(target,tdClass)){if(domutils.hasClassName(target,tableClass))\nbreak;target=target.parentNode;}\nreturn target;}\nQueryGrid.prototype.showOperateBtn=function(e){if(this.opbuttonVisible==false||!util.hasOpFunction(\"BROWSE_FLEXIBLEREPORT_TABLECOLMBUTTON\"))\nreturn;if(!this.rightClickEnable)\nreturn;var tdClass=\"table-grid-top-cell\";var target=this.getHeaderTD(e.target);if(target&&domutils.hasClassName(target,tdClass)){this.onOpBtnMouseover(target);if(!target.hasBindEvent){this.addListener(target,\"mouseup\",this.showPopupMenu,this);var evName=domutils.isIE()?\"mouseout\":\"mouseleave\";this.addListener(target,evName,this.onOpBtnMouseout,this);target.hasBindEvent=true;}}}\nQueryGrid.prototype.onOpBtnMouseover=function(target){var btn=domutils.findElementByClassName(target,\"_OPBUTTON\");if(btn){btn.style.visibility=\"visible\";}}\nQueryGrid.prototype.onOpBtnMouseout=function(e){var tdClass=\"table-grid-top-cell\";var target=this.getHeaderTD(e.target);while(target&&!domutils.hasClassName(target,tdClass)){if(domutils.hasClassName(target,\"table-grid _query_grid\"))\nbreak;target=target.parentNode;}\nif(target&&domutils.hasClassName(target,tdClass)){var btn=domutils.findElementByClassName(target,\"_OPBUTTON\");if(btn){btn.style.visibility=\"hidden\";}}}\nQueryGrid.prototype.doParentMouseDown=function(e){if(e.target&&domutils.hasClassName(e.target,\"table-grid-top-resizeDivClass\")){if(!e.target.hasBindEvent){this.addListener(e.target,\"mousedown\",this.doResizeTagMouseDown,this);this.addListener(e.target,\"mousemove\",this.doResizeTagMouseMove,this);this.addListener(e.target,\"mouseup\",this.doResizeTagMouseUp,this);e.target.hasBindEvent=true;this.doResizeTagMouseDown(e);}}}\nQueryGrid.prototype.doParentClick=function(e){var clz=e.target.className;if(clz){clz=clz.match(new RegExp(\"(?! )table-grid-button-.*\"));if(!clz)\nreturn;clz=clz[0];var c=e.target;while(c&&c.tagName!='TD')\nc=c.parentNode;switch(clz){case\"table-grid-button-sort\":case\"table-grid-top-span-sp-asc\":case\"table-grid-top-span-sp-desc\":if(!e.target.getAttribute(\"sort\"))\ne.target.setAttribute(\"sort\",\"NONE\");this.doSort.call([this,c,e.target]);return;case\"table-grid-button-prop\":this.doProp.call([this,c]);return;case\"table-grid-button-formula\":this.doFormula.call([this,c,e.target]);return;case\"table-grid-button-filter\":this.doFilter.call([this,c,e.target]);return;case\"table-grid-button-del\":this.doDel.call([this,c]);return;}}}\nQueryGrid.prototype.destroy=function(){this.gridProp=null;this.onSort=null;this.onProp=null;this.onFormula=null;this.onFilter=null;this.onDelField=null;this.onCheckColClick=null;this.showButton=null;if(this.popupMenu){this.popupMenu.destroy();this.popupMenu=null;}\nQueryGrid.superclass.destroy.call(this);};QueryGrid.prototype.newHeader=function(caption,fieldObj,multiHeaderModel){var checkIndex=this.getCheckColumnIndex();var showCheckColumn=(checkIndex!=-1);if(showCheckColumn)\nthis.deleteCol(checkIndex);var m1=(new Date()).getTime();var c=QueryGrid.superclass.newHeader.call(this,caption);c.style.width=80;if(fieldObj){c.field=fieldObj;if(fieldObj.id)\nc.id=fieldObj.id;if(fieldObj.desc&&fieldObj.desc!=caption){c.firstChild.title=fieldObj.desc;c.fieldDesc=fieldObj.desc;}}\nvar panel=document.createElement(\"div\");c.appendChild(panel);var m2=(new Date()).getTime();var isJava=this.bizViewType==\"JAVA_BUSINESS_VIEW\";var orderSupport=false;var aggregateSupport=false;if(isJava){for(var i=0;i<this.javaQuerySupports.length;i++){switch(this.javaQuerySupports[i]){case\"ORDER\":orderSupport=true;break;case\"AGGREGATE\":aggregateSupport=true;break;case\"SIMPLEDATA\":orderSupport=true;aggregateSupport=true;break;}}}\nvar m3=(new Date()).getTime();this.multiHeaderModel=null;if(multiHeaderModel){this.refreshMultiHeader(multiHeaderModel);}\nvar m4=(new Date()).getTime();if(showCheckColumn)\nthis.displayCheckColumn(true);this.resetTmpCellObj();this.afterNewCol.fire(c);return c;}\nQueryGrid.prototype.clearMultiHeader=function(){var rowCount=this.getHeaderRowIndex();while(rowCount>0){this.mainTable.deleteRow(0);this.setHeaderRowIndex(--rowCount);}};QueryGrid.prototype.getMultiHeaderMatrix=function(multiHeaderModel){var matrix=[];var headerRow=this.mainTable.rows[this.getHeaderRowIndex()];if(!headerRow)\nreturn null;var headers=headerRow.cells;for(var i=0;i<headers.length;i++){var field=headers[i].field;var visible=\"\";if(headers[i].style.display==\"none\")\nvisible=\"none\";var multiHeader=this.getMultiHeader(field,visible,multiHeaderModel);matrix.push(multiHeader);}\nreturn matrix;};QueryGrid.calcRows=function(matrix){var rows=[];for(var i=0;i<matrix.length;i++){var multiHeader=matrix[i];for(var j=0;j<multiHeader.length;j++){if(!rows[j]){rows[j]=[];}\nvar row=rows[j];var noborder=multiHeader[j+1]&&(multiHeader[j].id==multiHeader[j+1].id);if(row.length>0){for(var k=row.length-1;k>=0&&(row[k].blank||row[k].visible==\"none\");k--);if(k>=0&&row[k].id==multiHeader[j].id&&multiHeader.visible!=\"none\"){row[k].colspan++;if(row[k].noborder&&!noborder){row[k].noborder=false;}\nrow.push({blank:true,visible:\"\",label:multiHeader[j].label});continue;}}\nrow.push({id:multiHeader[j].id,label:multiHeader[j].label,fieldid:multiHeader[j].fieldid||null,fieldlabel:multiHeader[j].fieldlabel||null,noborder:noborder,colspan:1,rowspan:1,rowindex:j,colindex:i,visible:multiHeader.visible});}}\nfor(var i=0;i<matrix.length;i++){var groups=[];var group=null;for(var j=0;j<rows.length;j++){if(rows[j]&&rows[j][i].noborder){if(!group){group={start:j,end:j};}\ngroup.end++;}else{group&&group.end++&&groups.push(group);group=null;}}\nfor(var j=0;j<groups.length;j++){var m=(groups[j].end-groups[j].start)/2;var n=(groups[j].end-groups[j].start)%2;m+=groups[j].start;m=Math.floor(m);for(var k=groups[j].start;k<groups[j].end;k++){if(k==m){if(n==0)\nrows[k][i].moveup=true;}else{rows[k][i].hidelabel=true;}\nif(k==groups[j].start){rows[k][i].rowspan=groups[j].end-groups[j].start;rows[k][i].fieldlabel=(groups[j].end==rows.length)?rows[rows.length-1][i].fieldlabel:null;}else{rows[k][i].rowspan=0;}}}}\nreturn rows;};QueryGrid.prototype.refreshMultiHeader=function(multiHeaderModel){if(!this.multiHeaderModel){this.multiHeaderModel=multiHeaderModel;}\nif(!this.multiHeaderModel)\nreturn;this.clearMultiHeader();var matrix=this.getMultiHeaderMatrix(this.multiHeaderModel);if(!matrix)\nreturn;var rows=QueryGrid.calcRows(matrix);var rowCount=this.getHeaderRowIndex();var tr=this.mainTable.tBodies[0].firstChild;for(var i=0;i<rows.length;i++){if(i+1==rows.length){this._testModifyRow(tr,this.getHeaderRowIndex(),rows[i]);}else{this._testAddRow(tr,this.getHeaderRowIndex(),rows[i],i==0);this.setHeaderRowIndex(++rowCount);}\nif(tr)\ntr=tr.nextSibling;}\nvar i=this.getCheckColumnIndex();if(i!=-1){var p=this.mainTable.rows[this.getHeaderRowIndex()].childNodes[i];p.setAttribute(DragTable.FLAGDRAG,false);var checkBox=domutils.findElementByClassName(p,\"_checkColumn\");if(checkBox){checkBox.owner=this;this.headerCheckBox=checkBox;checkBox.onclick=this.doHeaderCheckboxClick;}}\nthis.resetFrozenHeader();}\nQueryGrid.prototype.getMultiHeader=function(field,visible,multiHeaderModel){var displayName=field.alias||field.name;if(multiHeaderModel){var rowCount=multiHeaderModel[0].length;for(var i=0;i<multiHeaderModel.length;i++){if(multiHeaderModel[i][rowCount-1].fieldid==field.id){multiHeaderModel[i].visible=visible;return multiHeaderModel[i];}}\nvar multiHeader=[];for(var i=0;i<rowCount;i++){multiHeader.push({id:\"_id_deleted_field\",label:displayName,visible:visible});}\nreturn multiHeader;}else{return[{id:displayName,label:displayName,visible:visible}];}};QueryGrid.prototype._testModifyRow=function(tr,headerRowIndex,cells){if(!tr)\nreturn;var tmpCell=tr.previousSibling.firstChild;var len=cells.length;for(var i=0;i<len;i++){var spans=tmpCell.getElementsByTagName(\"span\");if(spans&&spans.length>0){var span=spans[0].getElementsByTagName(\"span\")[0];span.innerHTML=cells[i].hidelabel?\"&nbsp\":((!cells[i].label||cells[i].label==\"\")?\"&nbsp;\":cells[i].label);if(cells[i].moveup){if(span.offsetParent!=null){span.style.top=span.offsetParent.scrollTop-12;}\nelse{span.style.top=span.parentNode.scrollTop-12;}}\ntmpCell=tmpCell.nextSibling;}}};QueryGrid.prototype._testAddRow=function(tr,headerRowIndex,cells,isFirstRow){var row=document.createElement(\"TR\");this.addListener(row,\"click\",function(ev){ev.cancelBubble=true;});row.className=\"table-grid-top\";this.setDomAttribute(row,\"isHeader\",\"true\");for(var i=0;i<cells.length;i++){if(cells[i].blank)\ncontinue;var cell=document.createElement(\"TD\");row.appendChild(cell);cell.className=\"table-grid-top-cell\";cell.align=\"center\";if(isFirstRow){cell.style.borderTopColor=\"#CBC7B8\";cell.style.borderTopStyle=\"solid\";cell.style.borderTopWidth=\"1px\";}\nvar span=document.createElement(\"span\");span.innerHTML=cells[i].hidelabel?\"&nbsp\":((!cells[i].label||cells[i].label==\"\")?\"&nbsp;\":cells[i].label);cell.appendChild(span);cell.colSpan=cells[i].colspan||1;if(cells[i].visible==undefined)\ncells[i].visible=\"\";cell.style.display=cells[i].visible;if(cells[i].noborder){cell.style.borderBottomWidth=\"0px\";}\nif(cells[i].moveup){var offset=-7;span.style.position=\"relative\";span.style.top=span.offsetParent.scrollTop+offset;}}\nvar tBody=tr.parentNode;tBody.insertBefore(row,tr);};QueryGrid.prototype.setHeaderRowIndex=function(index){this._headerRowIndex=index;this._headerRows=this._headerRowIndex+1;this.mainTable._headerRowIndex=this._headerRowIndex;};QueryGrid.prototype.getHeaderRows=function(){if(\"number\"==typeof this._headerRows)\nreturn this._headerRows;else\nreturn 1;}\nQueryGrid.prototype.getHeaderRowIndex=function(){return this._headerRowIndex;}\nQueryGrid.prototype.setColHeader=function(colNum,caption,fieldObj){var c=QueryGrid.superclass.setColHeader.call(this,colNum,caption);c.field=fieldObj;return c;}\nQueryGrid.prototype.createColBtn=function(colObj,btn_className,btn_title,btn_name){var btn=document.createElement(\"input\");btn.type=\"button\";colObj.appendChild(btn);btn.className=btn_className;btn.title=btn_title;btn.setAttribute(\"buttonname\",btn_name);return btn;}\nQueryGrid.prototype.setCellSortStyle=function(cell,sort_flag){if(!cell)\nreturn false;if(sort_flag==\"NONE\")\n{this.setCellSortStyle2(cell,\"ASC\");}\nelse if(sort_flag==\"ASC\")\n{this.setCellSortStyle2(cell,\"DESC\");}\nelse if(sort_flag==\"DESC\")\n{this.setCellSortStyle2(cell,\"NONE\");}}\nQueryGrid.prototype.setCellSortStyle2=function(cell,sort_flag){if(!cell)\nreturn false;if(sort_flag==\"NONE\")\n{cell.className=\"table-grid-button table-grid-button-sort\";cell.setAttribute(\"sort\",\"NONE\");}\nelse if(sort_flag==\"ASC\")\n{cell.className=\"table-grid-button table-grid-top-span-sp-asc\";cell.setAttribute(\"sort\",\"ASC\");}\nelse if(sort_flag==\"DESC\")\n{cell.className=\"table-grid-button table-grid-top-span-sp-desc\";cell.setAttribute(\"sort\",\"DESC\");}}\nQueryGrid.prototype.doDel=function(ev){var field=this[1].field;if(field&&field.id)\nthis[0].deleteColByFieldId(field.id);else\nthis[0].deleteCol(this[1].cellIndex);domutils.stopEvent(ev);}\nQueryGrid.prototype.doSort=function(){this[0].setCellSortStyle(this[2],this[2].getAttribute(\"sort\"));var field=this[1].field;this[0].onSort.fire(this[0],field,this[2].getAttribute(\"sort\"));}\nQueryGrid.prototype.doProp=function(){var field=this[1].field;this[0].onProp.fire(this[0],field);}\nQueryGrid.prototype.doFormula=function(){var field=this[1].field;var caption=this[1].getElementsByTagName(\"span\")[0];this[0].onFormula.fire(this[0],field,this[2],caption);}\nQueryGrid.prototype.doFilter=function(){var field=this[1].field;this[0].onFilter.fire(this[0],field,this[2]);}\nQueryGrid.prototype.getColHeaderBtn=function(colNum,btnName){var c=this.getColHeader(colNum);if(c){var btns=c.getElementsByTagName(\"input\");var btnCount=btns.length;for(var i=0;i<btnCount;i++)\n{if(btns[i].getAttribute(\"buttonname\")==btnName)\nreturn btns[i];}}\nreturn null;}\nQueryGrid.prototype.setColHeaderBtnVisible=function(colNum,btnTitle,visible){var btn=this.getColHeaderBtn(colNum,btnTitle);if(btn)\n{btn.style.display=visible;}}\nQueryGrid.prototype.btnCanShow=function(btnName){if(this.showButton)\n{var btnCount=this.showButton.length;for(var i=0;i<btnCount;i++)\n{if(btnName==this.showButton[i])\nreturn true;}}\nelse\nreturn true;}\nQueryGrid.prototype.setAllButtonVisible=function(flag){if(flag){this.opbuttonVisible=true;}else{this.opbuttonVisible=false;}}\nQueryGrid.prototype.getHeadIndexByFieldId=function(fieldId){var count=this.getColCount();for(var i=0;i<count;i++)\n{var head=this.getColHeader(i);if(head.field&&head.field.id==fieldId)\n{return i;}}\nreturn-1;}\nQueryGrid.prototype.getHeadByFieldId=function(fieldId){return this.getColHeader(this.getHeadIndexByFieldId(fieldId));}\nQueryGrid.prototype.getFieldByFieldId=function(fieldId){if(this.getHeadByFieldId(fieldId))\nreturn this.getHeadByFieldId(fieldId).field;}\nQueryGrid.prototype.deleteColByFieldId=function(fieldId){var ret=this.onDelField.fire(this,this.getFieldByFieldId(fieldId));if(ret===false)\nreturn;this.deleteCol(this.getHeadIndexByFieldId(fieldId));}\nQueryGrid.prototype.clear=function(){this.clearMultiHeader&&this.clearMultiHeader();domutils.destroyNode(this.tBody);this.tBody=document.createElement(\"tbody\");this.mainTable.appendChild(this.tBody);}\nQueryGrid.prototype.getFieldByColNum=function(colNum){var c=this.getColHeader(colNum);if(c&&!c.isCheckColumn)\nreturn c.field;}\nQueryGrid.prototype.setFieldSortStyle=function(fieldId,sort_flag){var colIndex=this.getHeadIndexByFieldId(fieldId);this.setCellSortStyle2(this.getColHeaderBtn(colIndex,\"sort\"),sort_flag);}\nQueryGrid.prototype.getFieldObjects=function(ignoreStatic){var len=this.getColCount();var fields=new Array();for(var i=0;i<len;i++)\n{var f=this.getFieldByColNum(i);if(f){if(ignoreStatic&&f.isStatic)\ncontinue;fields.push(f);}}\nreturn fields;}\nQueryGrid.prototype.getFieldIndexByAlias=function(fieldAlias){var len=this.getColCount();for(var i=0;i<len;i++)\n{var f=this.getFieldByColNum(i);if(f){if(f.isStatic)\ncontinue;if(f.alias==fieldAlias){return i;}}}\nreturn-1;}\nQueryGrid.prototype.getFieldIndexByName=function(fieldName){var len=this.getColCount();for(var i=0;i<len;i++)\n{var f=this.getFieldByColNum(i);if(f){if(f.isStatic)\ncontinue;if(f.name==fieldName||(f.businessViewField&&f.businessViewField.name==fieldName)){return i;}}}\nreturn-1;}\nQueryGrid.prototype.getFields=function(ignoreStatic){var len=this.getColCount();var fields=new Array();for(var i=0;i<len;i++)\n{var f=this.getFieldByColNum(i);if(f){if(ignoreStatic&&f.isStatic)\ncontinue;fields.push(f.id);}}\nreturn fields;}\nQueryGrid.prototype.swithGridColByFieldId=function(fieldId1,fieldId2){var col1=this.getHeadByFieldId(fieldId1);var col2=this.getHeadByFieldId(fieldId2);this.swithGridColByCol(col1,col2);}\nQueryGrid.prototype.swithGridColByCol=function(col1,col2){var len=this.mainTable.rows.length;var index1=col1.cellIndex;var index2=col2.cellIndex;var flag=(index1>index2);var start=this.getHeaderRowIndex();var r=this.mainTable.rows[start];for(var i=start;i<len;i++){var c1=r.cells[index1];var c2=r.cells[index2];if(!c1||!c2)\nbreak;if(flag)\nc2.insertAdjacentElement(\"beforeBegin\",c1);else\nc2.insertAdjacentElement(\"afterEnd\",c1);r=r.nextSibling;}\nif(start>0)\nthis.refreshMultiHeader();};QueryGrid.prototype.cancelWarning=function(column){var len=this.mainTable.rows.length;for(var i=0;i<len;i++){var r=this.mainTable.rows[i];var col=r.cells[column];col.style.backgroundColor=\"\";}};QueryGrid.prototype.doRowSelect=function(){this.disableOnBlur=false;var selectedColor=\"#A0A0FF\";var useSystemDefaultValue=this.clientConfig.gridProp.useSystemDefaultValue;if(useSystemDefaultValue){var ret=util.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfig\",[\"REPORT_SELECTEDDATA_BACKGROUND\"]);if(ret&&ret.result)\nselectedColor=ret.result!=null?ret.result.value:slectedColor;}else if(this.clientConfig.gridProp.selectedBgColor){selectedColor=this.clientConfig.gridProp.selectedBgColor;}\nvar pageTheme=registry.get(\"pageTheme\");if(null!=pageTheme){var grid=pageTheme.grid;if(grid&&grid.selectedBgColor){selectedColor=grid.selectedBgColor;}}\nvar r=this.getClickRow();if((r)&&(!r.cells[0].isHeader)){if(r!=this.selectedRow){if(this.selectedRow)\nthis.selectedRow.style.backgroundColor=this.selectedRowColor;this.selectedRowColor=r.style.backgroundColor;r.style.backgroundColor=selectedColor;this.selectedRow=r;}}}\nQueryGrid.prototype.resetRowClass=function(r,rowIndex){QueryGrid.superclass.resetRowClass(r,rowIndex);if(rowIndex%2)\n{r.style.backgroundColor=this.gridProp&&this.gridProp.bgColor;}\nelse\n{r.style.backgroundColor=this.gridProp&&this.gridProp.spColor;}\nif(!r.cells)\nreturn;for(var i=0;i<r.cells.length;i++){var cell=r.cells[i];cell.style.borderRightColor=this.gridBorderColor;cell.style.borderBottomColor=this.gridBorderColor;}}\nQueryGrid.prototype.resetBGColor=function(){var rows=this.tBody.childNodes.length;var r=this.tBody.firstChild;for(var i=0;i<rows;i++){this.resetRowClass(r,i);r=r.nextSibling;}\nthis.selectedRowColor=\"\";this.selectedRow=\"\";};QueryGrid.prototype.resetGridBorderColor=function(){this.setGridBorderColor(this.gridProp.gridBorderColor);this.mainTable.style.backgroundColor=this.gridBorderColor;this.mainTable.style.borderLeftColor=this.gridBorderColor;this.mainTable.style.borderTopColor=this.gridBorderColor;};QueryGrid.prototype.setGridBorderColor=function(color){this.gridBorderColor=color;}\nQueryGrid.prototype.getGridBorderColor=function(){if(!this.gridBorderColor)\nthis.gridBorderColor=\"#87B3E0\";return this.gridBorderColor;}\nQueryGrid.prototype.resetHeaders=function(){var headerRowIndex=this.getHeaderRowIndex()+1;for(var i=0;i<headerRowIndex;i++){var headerRow=this.mainTable.rows[i];var cells=null;if(headerRow&&headerRow.cells)\ncells=headerRow.cells;if(!cells)\nreturn;for(var j=0;j<cells.length;j++){var cell=cells[j];if(this.gridBorderColor){cell.style.borderRightColor=this.gridBorderColor;cell.style.borderBottomColor=this.gridBorderColor;}\nif(this.gridProp.headerBackgroundColor)\ncell.style.backgroundColor=this.gridProp.headerBackgroundColor;else\ncell.style.backgroundColor=\"\";if(this.gridProp.headerFontColor)\ncell.style.color=this.gridProp.headerFontColor;else\ncell.style.color=\"\";if(this.gridProp.headerFontSize)\ncell.style.fontSize=this.gridProp.headerFontSize;if(this.gridProp.headerFontStyle&&this.gridProp.headerFontStyle==\"bold\"){cell.style.fontWeight=\"bold\";cell.style.fontStyle=\"\";}\nelse if(this.gridProp.headerFontStyle&&this.gridProp.headerFontStyle==\"italic\"){cell.style.fontWeight=\"\";cell.style.fontStyle=\"italic\";}\nelse if(this.gridProp.headerFontStyle&&this.gridProp.headerFontStyle==\"bi\"){cell.style.fontWeight=\"bold\";cell.style.fontStyle=\"italic\";}\nelse{cell.style.fontWeight=\"\";cell.style.fontStyle=\"\";}}}};QueryGrid.prototype.setColVisibleByFieldID=function(fieldID,visible){var index=this.getHeadIndexByFieldId(fieldID);if(index==-1)\nreturn;var rows=this.tBody.childNodes;var len=rows.length;for(var i=this._headerRowIndex;i<len;i++){var row=rows[i];var td=row.firstChild;var count=0;while(td){count+=td.colSpan;if(count>index){if(td.colSpan>1)\ntd.colSpan=td.colSpan+(visible?1:-1);else\ntd.style.display=visible?\"\":\"none\";break;}\ntd=td.nextSibling;}}}\nQueryGrid.prototype.appendRows=function(rows){QueryGrid.superclass.appendRows.call(this,rows);this.updateCheckColumnCell();}\nQueryGrid.prototype.displayCheckColumn=function(visible,index,replaceTd,allChecked){if(this.getRowCount()==0)\nreturn;if(allChecked!=false){allChecked=true;}\nvar show=(visible!==false);var newIndex=index||0;var headerRowIndex=this.getHeaderRowIndex();var oldIndex=this.getCheckColumnIndex();var tBody=this.mainTable.tBodies[0];this.mainTable.removeChild(tBody);if(oldIndex==-1){if(!show)\nreturn;var checkColumn=null;if(!replaceTd){var r=tBody.firstChild;for(var i=0;i<headerRowIndex;i++){var d=document.createElement(\"TD\");r.insertBefore(d,r.firstChild);d.isHeader=true;d.isCheckColumn=true;d.className=\"table-grid-top-cell\";if(this.clientConfig.gridProp.frozenCol){d.className+=\" scrollCellColHead\";d.style.borderTop=\"1px \"+this.gridBorderColor+\" solid\";}\nif(this.clientConfig.gridProp.frozenRow>0){d.className+=\" scrollCellRowHead scrollCR\";d.style.borderLeft=\"1px \"+this.gridBorderColor+\" solid\";d.style.borderRightWidth=\"0px\";}\nd.style.borderBottomWidth=\"0px\";r=r.nextSibling;}\nvar colgroup=this.mainTable.firstChild;var checkcolGroup=document.createElement(\"COL\");checkcolGroup.style.width=\"20px\";checkcolGroup.fid=\"_checkColumn\";var tr=r;checkColumn=document.createElement(\"TD\");if(tr.firstChild){tr.insertBefore(checkColumn,tr.firstChild);colgroup.insertBefore(checkcolGroup,colgroup.firstChild);}else{tr.appendChild(checkColumn);colgroup.appendChild(checkcolGroup);}\ncheckColumn.isHeader=true;checkColumn.style.width=\"20px\";checkColumn.className=\"table-grid-top-cell\";if(this.clientConfig.gridProp.frozenCol){checkColumn.className+=\" scrollCellColHead\";checkColumn.style.borderTop=\"1px \"+this.gridBorderColor+\" solid\";}\nif(this.clientConfig.gridProp.frozenRow>0){checkColumn.className+=\" scrollCellRowHead scrollCR\";checkColumn.style.borderLeft=\"1px \"+this.gridBorderColor+\" solid\";checkColumn.style.borderRightWidth=\"0px\";}}else{checkColumn=tBody.childNodes[headerRowIndex].childNodes[newIndex];checkColumn.isCheckColumn=true;checkColumn.innerHTML=\"\";}\nvar col=document.createElement(\"span\");checkColumn.appendChild(col);col.className=\"table-grid-top-span\";var sp=document.createElement(\"span\");col.appendChild(sp);var innerhtml='<input type=\"checkbox\"';if(allChecked)\ninnerhtml+=' checked=\"true\" flag=\"1\"';else\ninnerhtml+=' flag=\"0\"';innerhtml+=' class=\"_checkColumn\">';sp.innerHTML=innerhtml;sp.className=\"table-grid-top-span-sp\";checkColumn.isCheckColumn=true;checkColumn.align=\"center\";if(headerRowIndex>0){sp.style.position=\"relative\";if(sp.offsetParent){sp.style.top=sp.offsetParent.scrollTop-7;}\nif(this.mainTable.rows[0]){var topTd=this.mainTable.rows[0].firstChild;topTd.style.borderTopColor=\"#CBC7B8\";topTd.style.borderTopStyle=\"solid\";topTd.style.borderTopWidth=\"1px\";}}\nif(!replaceTd){for(var i=0;i<=headerRowIndex;i++){var cellObj=this.tmpCellObj[i];var td=tr.firstChild;cellObj.splice(0,0,td);}\nthis.onNewColumn.fire(this,checkColumn);}\nvar inputObj=sp.firstChild;inputObj.owner=this;this.headerCheckBox=inputObj;inputObj.onclick=this.doHeaderCheckboxClick;oldIndex=0;var alias='<input type=\"checkbox\" ';if(allChecked)\nalias+=' checked=\"true\" flag=\"1\"';else\nalias+=' flag=\"0\"';alias+=' class=\"_checkColumn\">';var c=this.getCell(headerRowIndex,oldIndex);c.setAttribute(DragTable.FLAGDRAG,false);c.setAttribute(\"field\",{id:null,alias:alias});}\nthis.updateCheckColumnCell(replaceTd);this.mainTable.appendChild(tBody);if(oldIndex!=newIndex&&!replaceTd){var col1=this.getColHeader(oldIndex);var col2=this.getColHeader(newIndex);this.swithGridColByCol(col1,col2);col1.setAttribute(DragTable.FLAGDRAG,false);}\nthis.colVisible[newIndex]=true;if(this.colVisible[newIndex]!=show){this.setColVisible(newIndex,show);}}\nQueryGrid.prototype.updateCheckColumnCell=function(replaceTd){var checkIndex=this.getCheckColumnIndex();if(checkIndex==-1)\nreturn;var headerChecked=this.headerCheckBox.checked;var lastIndex=this.getColCount()-1;var tr=this.tBody.childNodes[this.getHeaderRows()];for(var i=this.getHeaderRows(),j=this.getRowCount();i<j;i++){while(tr.childNodes.length-1<lastIndex){var td=tr.childNodes[checkIndex];if(td)\ntr.insertBefore(document.createElement(\"TD\"),td);else\ntr.appendChild(document.createElement(\"TD\"));}\nif(!replaceTd){var cellObj=this.tmpCellObj[i];var td=tr.firstChild;cellObj.splice(0,0,td);}\nvar cell=this.getCell(i,checkIndex);cell.style.width=\"20px\";cell.isCheckColumn=true;cell.discardData=true;if(this.clientConfig.gridProp.frozenRow>0){cell.className+=\" scrollCellRowHead\";cell.style.borderLeft=\"1px \"+this.gridBorderColor+\" solid\";cell.style.borderRightWidth=\"0px\";}\nvar child=cell.firstChild;if(!child||!child.tagName||(child.tagName.toLowerCase()!=\"input\")||(child.type.toLowerCase()!=\"checkbox\")){var txt='<input type=\"checkbox\" style=\"width:14;height=14\"';if(headerChecked)\ntxt=txt+' checked=\"true\"';txt=txt+'>';cell.innerHTML=txt;child=cell.firstChild;}\nchild.onclick=this.doCellCheckboxClick;child.rowIndex=i;child.owner=this;tr=tr.nextSibling;}}\nQueryGrid.prototype.getCheckColumnIndex=function(){var index=this.getHeaderRowIndex();for(var i=0,c=this.getColCount();i<c;i++){if(this.tBody.childNodes[index].childNodes[i].isCheckColumn)\nreturn i;}\nreturn-1;}\nQueryGrid.prototype.doHeaderCheckboxClick=function(){var headerCheckbox=this;var flag=headerCheckbox.flag-0;switch(flag){case 0:headerCheckbox.checked=true;headerCheckbox.indeterminate=true;headerCheckbox.flag=\"2\";break;case 1:headerCheckbox.checked=false;headerCheckbox.indeterminate=false;headerCheckbox.flag=\"0\";break;case 2:headerCheckbox.checked=true;headerCheckbox.indeterminate=false;headerCheckbox.flag=\"1\";break;}\nvar checked=headerCheckbox.checked;var grid=headerCheckbox.owner;var index=grid.getCheckColumnIndex();for(var i=grid.getHeaderRowIndex()+1,j=grid.getRowCount();i<j;i++){var cell=grid.getCell(i,index);if(cell&&cell.firstChild)\ncell.firstChild.checked=checked;}\ngrid.onCheckColClick.fire(grid,headerCheckbox,true);}\nQueryGrid.prototype.doCellCheckboxClick=function(){var checkBox=this;var grid=checkBox.owner;grid.onCheckColClick.fire(grid,checkBox,false);}\nQueryGrid.prototype.getCheckedRowsIndex=function(){var ret=[];var colIndex=this.getCheckColumnIndex();if(colIndex!=-1){var rows=this.getRowCount();for(var i=this.getHeaderRows();i<rows;i++){var cell=this.getCell(i,colIndex);if(cell&&cell.firstChild&&cell.firstChild.checked)\nret.push(i);}}\nreturn ret;}\nQueryGrid.prototype.resetFrozenHeader=function(){if(!(this.clientConfig&&this.clientConfig.gridProp))\nreturn;if(this.clientConfig.gridProp.frozenCol||this.clientConfig.gridProp.frozenRow>0){var rows=this.tBody.childNodes.length;var row=this.tBody.firstChild;var frow=0;var rowFind=false;var colFind=false;var headerArray=new Array();if(this.clientConfig.gridProp.frozenRow)\nfrow=parseInt(this.clientConfig.gridProp.frozenRow);if(this.clientConfig.gridProp.gridBorderColor)\nthis.setGridBorderColor(this.clientConfig.gridProp.gridBorderColor);for(var r=0;r<rows;r++){var isHeader=row.getAttribute(\"isHeader\");if(isHeader&&isHeader==\"true\"){isHeader=true;}\nvar cells=row.childNodes.length;var tmpCell=row.firstChild;rowFind=false;for(var index=0;index<cells;index++){colFind=this.clearCellFrozenClass(tmpCell);if(this.clientConfig.gridProp.frozenCol&&r==0)\ntmpCell.style.borderTop=\"1px solid \"+this.getGridBorderColor();if(this.clientConfig.gridProp.frozenRow>0&&index==0)\ntmpCell.style.borderLeft=\"1px solid \"+this.getGridBorderColor();rowFind=colFind||rowFind||isHeader;if(isHeader&&this.clientConfig.gridProp.frozenCol){tmpCell.className=tmpCell.className+\" scrollCellColHead scrollCellColTop\";rowFind=true;colFind=true;}\nvar colSpan=row.colSpan;var rowSpan=row.rowSpan;headerArray[r]=(headerArray[r]?headerArray[r]:0)+1+(colSpan?(colSpan-1):0);if(rowSpan){for(var rindex=1;rindex<parseInt(rowSpan);rindex++){headerArray[r+rindex]=(headerArray[r+rindex]?headerArray[r+rindex]:0)+1+(colSpan?(colSpan-1):0);}}\nif(headerArray[r]<=frow){tmpCell.className=tmpCell.className+\" scrollCellRowHead\";rowFind=true;colFind=true;if(isHeader){tmpCell.setAttribute(DragTable.FLAGDRAG,false);}}\nif(isHeader&&this.clientConfig.gridProp.frozenCol&&headerArray[r]<=frow)\ntmpCell.className=tmpCell.className+\" scrollCR\";if(!colFind)\nbreak;tmpCell=tmpCell.nextSibling;}\nif(!rowFind)\nbreak;row=row.nextSibling;}}};QueryGrid.prototype.clearCellFrozenClass=function(cell){var findClass=false;if(cell.className){if(cell.className.indexOf(\"scrollCellColHead\")!=-1){cell.className=this.stringReplaceAll(cell.className,\" scrollCellColHead\",\"\");findClass=true;}\nif(cell.className.indexOf(\"scrollCellRowHead\")!=-1){cell.className=this.stringReplaceAll(cell.className,\" scrollCellRowHead\",\"\");findClass=true;}\nif(cell.className.indexOf(\"scrollCR\")!=-1){cell.className=this.stringReplaceAll(cell.className,\" scrollCR\",\"\");findClass=true;}\nif(cell.className.indexOf(\"scrollCellColTop\")!=-1){cell.className=this.stringReplaceAll(cell.className,\" scrollCellColTop\",\"\");findClass=true;}\nreturn findClass;}\nreturn false;}\nQueryGrid.prototype.stringReplaceAll=function(src,AFindText,ARepText){raRegExp=new RegExp(AFindText,\"g\");return src.replace(raRegExp,ARepText);}\nQueryGrid.prototype.getCell=function(row,col){if(!this.tmpCellObj)\nthis.resetTmpCellObj();if(this.tmpCellObj[row]&&this.tmpCellObj[row][col])\nreturn this.tmpCellObj[row][col];}\nQueryGrid.prototype.resetHeadersStyle=function(){if(this.clientConfig&&this.clientConfig.gridProp&&this.clientConfig.gridProp.fieldProps){for(indx in this.clientConfig.gridProp.fieldProps){var hearderStyle=this.clientConfig.gridProp.fieldProps[indx];var count=this.getColCount();for(var i=0;i<count;i++){var headRow=this.getColHeader(i);if(headRow.id==indx){if(hearderStyle.width<80)\nthis.setColWidth(i,hearderStyle.width);else\nheadRow.firstChild.style.width=hearderStyle.width;break;}}}}}\nQueryGrid.prototype.setBizViewType=function(type){this.bizViewType=type;}","js/freequery/control/ReportDatePicker.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var DropDownPanel=jsloader.resolve(\"freequery.control.DropDownPanel\");var ComboBox=jsloader.resolve(\"freequery.control.ComboBox\");var util=jsloader.resolve(\"freequery.common.util\");var Calendar=jsloader.resolve(\"freequery.thirdparty.Calendar\");ReportDatePicker=function(parentObject,width,type){this.parent=parentObject;this.panel=document.createElement(\"div\");this.panel.className=\"combobox-panel\";this.parent.appendChild(this.panel);this.width=width;this.setWidth(width);this.type=type;this.oneditChange=new CustomEvent(\"editChange\",this);this.ontypeChange=new CustomEvent(\"typeChange\",this);this.ontypeChange.subscribe(this.doTypeChange,this);this.edit=document.createElement(\"input\");this.panel.appendChild(this.edit);this.edit.style.width=width-ComboBox.ButtonWidth-2;this.edit.style.height=ComboBox.DefaultHeight;this.edit.type=\"text\";this.edit.className=\"combobox-edit\";this.addListener(this.edit,\"blur\",this.doEditBlur,this);this.btn=document.createElement(\"input\");this.btn.type=\"button\";this.btn.style.width=ComboBox.ButtonWidth;this.btn.style.height=ComboBox.DefaultHeight;this.btn.className=\"combobox-button\";this.panel.appendChild(this.btn);this.addListener(this.btn,\"click\",this.btnClick,this);this.oldValue=\"\";this.onselectChange=new CustomEvent(\"selectChange\",this);}\nlang.extend(ReportDatePicker,Module);ReportDatePicker.prototype.doEditBlur=function(){if(this.edit.value==this.blurValue)\nreturn;this.blurValue=this.edit.value;this.oneditChange.fire(this,this.edit.value);};ReportDatePicker.prototype.setWidth=function(width){this.panel.style.width=width;}\nReportDatePicker.prototype.setType=function(type){if(this.type===type){if(!this.calendar&&!this.dayCalendar){this.btnClick();}\nif(this.dayCalendar){if(window.WebCalendar)\nwindow.WebCalendar.hiddenCalendar();}\nif(this.calendar){try{this.calendar.doCloseUpByTypeChange();}catch(e){this.calendar.doCloseUp();}}\nreturn;}\nthis.type=type;this.ontypeChange.fire(this,type);}\nReportDatePicker.prototype.doTypeChange=function(obj,type){this.btnClick();if(this.dayCalendar){if(window.WebCalendar)\nwindow.WebCalendar.hiddenCalendar();}\nif(this.calendar){try{this.calendar.doCloseUpByTypeChange();}catch(e){this.calendar.doCloseUp();}}}\nReportDatePicker.prototype.btnClick=function(e){var date=new Date();var drange=15;var width=this.width;this.destroyCalendar();if(this.type==\"YEAR\"){if(!this.calendar){this.calendar=new YearCalendar(this,this.parent);this.calendar.init(date.getFullYear(),drange,width);}}else if(this.type==\"HALFYEAR\"){if(!this.calendar){this.calendar=new HalfYearCalendar(this,this.parent);this.calendar.init(date.getFullYear(),drange,width);}}else if(this.type==\"QUARTER\"){if(!this.calendar){this.calendar=new QuarterCalendar(this,this.parent);this.calendar.init(date.getFullYear(),drange,width);}}else if(this.type==\"MONTH\"){if(!this.calendar){this.calendar=new MonthCalendar(this,this.parent);this.calendar.init(date.getFullYear(),drange,width);}}else if(this.type==\"TENDAYS\"){if(!this.calendar){this.calendar=new TenDaysCalendar(this,this.parent);this.calendar.init(date.getFullYear(),drange,width);}}else if(this.type==\"WEEK\"){if(!this.calendar){this.calendar=new WeekCalendar(this,this.parent);this.calendar.init(date.getFullYear(),drange,width);}}else if(this.type==\"FIVEDAYS\"){if(!this.calendar){this.calendar=new FiveDaysCalendar(this,this.parent);this.calendar.init(date.getFullYear(),drange,width);}}\nelse if(this.type==\"DAY\"){if(!this.dayCalendar){this.dayCalendar=new Calendar();this.dayCalendar.calendar(e,this.edit,\"DATE\");}}\nif(this.type!=\"DAY\"){this.panel.style.display=\"none\";if(this.calendar){this.calendar.offset();}}else{this.panel.style.display=\"block\";}};ReportDatePicker.prototype.destroy=function(){}\nReportDatePicker.prototype.destroyCalendar=function(){if(this.calendar){this.calendar.destroy();this.calendar=null;}\nif(this.dayCalendar){this.dayCalendar=null;}}\nReportDatePicker.prototype.setAttribute=function(name,value){this.panel.setAttribute(name,value);}\nReportDatePicker.prototype.getAttribute=function(name){return this.panel.getAttribute(name);}\nReportDatePicker.prototype.setValue=function(value){this.edit.value=value;}\nReportDatePicker.prototype.getValue=function(){return this.edit.value;}\nReportDatePicker.prototype.setReadOnly=function(readonly){this.edit.readOnly=readonly;}\nReportDatePicker.prototype.getReadOnly=function(){return this.edit.readOnly;}\nReportDatePicker.prototype.setEnabled=function(enable){this.enabled=enable;this.panel.disabled=!this.enabled;this.btn.disabled=!this.enabled;this.edit.style.background=this.enabled?\"\":\"#F6F6F6\";}\nReportDatePicker.prototype.getSelectedId=function(){return this.edit.value;}\nReportDatePicker.prototype.getSelectedText=function(){return this.edit.value;}\nReportDatePicker.prototype.clear=function(){this.setValue(\"\");}\nvar dateToStr=function(date){var year=date.getFullYear();var month=date.getMonth()+1>9?date.getMonth()+1:\"0\"+(date.getMonth()+1);var day=date.getDate()>9?date.getDate():\"0\"+date.getDate();return year+\"-\"+month+\"-\"+day;}\nvar getDateByIntervalAndOldDate=function(interval,poldDate,date){var ret=util.remoteInvokeEx(\"FreeQueryManageReportService\",\"getDateByIntervalAndOldDate\",[interval,poldDate]);if(ret!=null&&ret.succeeded){if(ret.result==\"error\")\nreturn dateToStr(date);else\nreturn ret.result;}}\nvar getDateByOldDateString=function(poldDate){if(poldDate.length==19)\npoldDate=poldDate.substr(0,10);if(poldDate.length!=10)\nreturn null;var year=poldDate.substr(0,4);var month=poldDate.substr(5,2);var date=poldDate.substr(8,2);return{year:year,month:month,date:date};}\nYearCalendar=function(clientObj,parentEl){this.clientObj=clientObj;this.parentEl=parentEl;};lang.extend(YearCalendar,Module);YearCalendar.prototype.init=function(initYear,range,width){var odate=getDateByOldDateString(this.clientObj.edit.value);if(odate!=null){initYear=parseInt(odate.year);}\nthis.combo=new ComboBox(this.parentEl,this.parentEl,width,this.parentEl);this.combo.panel.style.position=\"relative\";for(var i=-range;i<range;i++){this.combo.insertItem(initYear+i,initYear+i);}\nthis.combo.setSelectedItem(initYear,initYear);this.combo.onselectChange.subscribe(this.doChange,this);this.combo.oneditChange.subscribe(this.doEditChange,this);this.combo.dropdownBox.onCloseUp.subscribe(this.doCloseUp,this);this.doCloseUp();};YearCalendar.prototype.destroy=function(){this.combo.destroy();this.combo=null;this.parentEl=null;this.clientObj=null;YearCalendar.superclass.destroy.call(this);};YearCalendar.prototype.doCloseUp=function(panel,itemClick){if(itemClick===false)\nreturn;var date=new Date(this.combo.getSelectedId(),11,31);this.clientObj.oldValue=this.clientObj.edit.value;this.clientObj.edit.value=dateToStr(date);this.clientObj.oneditChange.fire(this.clientObj,this.clientObj.edit.value);};YearCalendar.prototype.doCloseUpByTypeChange=function(){var date=new Date(this.combo.getSelectedId(),11,31);this.clientObj.oldValue=this.clientObj.edit.value;this.clientObj.edit.value=getDateByIntervalAndOldDate(\"YEAR\",this.clientObj.oldValue,date);this.clientObj.oneditChange.fire(this.clientObj,this.clientObj.edit.value);};YearCalendar.prototype.doEditChange=function(obj,value){this.doCloseUp();};YearCalendar.prototype.doChange=function(obj,oldId,newId){};YearCalendar.prototype.offset=function(){};YearCalendar.prototype.show=function(){this.combo.panel.style.display=\"block\";};QuarterCalendar=function(clientObj,parentEl){this.clientObj=clientObj;this.parentEl=parentEl;};lang.extend(QuarterCalendar,Module);QuarterCalendar.prototype.init=function(initYear,range,width){this.div=document.createElement(\"div\");this.parentEl.appendChild(this.div);var table=document.createElement(\"table\");table.cellPadding=0;table.cellSpacing=0;var tbody=document.createElement(\"tbody\");var tr=document.createElement(\"tr\");var tdyear=document.createElement(\"td\");var tdquarter=document.createElement(\"td\");this.div.appendChild(table);table.appendChild(tbody);tbody.appendChild(tr);tr.appendChild(tdyear);tr.appendChild(tdquarter);var odate=getDateByOldDateString(this.clientObj.edit.value);if(odate!=null){initYear=parseInt(odate.year);}\nthis.yearCombo=new ComboBox(tdyear,tdyear,width/2,tdyear);this.yearCombo.dropdownBox.onCloseUp.subscribe(this.doCloseUp,this);for(var i=-range;i<range;i++){this.yearCombo.insertItem(initYear+i,initYear+i);}\nthis.yearCombo.setSelectedItem(initYear,initYear);this.quarterCombo=new ComboBox(tdquarter,tdquarter,width/2,tdquarter);this.quarterCombo.insertItem(\"1\",\"1季\");this.quarterCombo.insertItem(\"2\",\"2季\");this.quarterCombo.insertItem(\"3\",\"3季\");this.quarterCombo.insertItem(\"4\",\"4季\");this.quarterCombo.setEditReadOnly(true);if(odate!=null){var quarterInt=1;if(odate.month<\"04\")\nquarterInt=1;else if(odate.month<\"07\")\nquarterInt=2;else if(odate.month<\"10\")\nquarterInt=3;else\nquarterInt=4;this.quarterCombo.setSelectedItem(\"\"+quarterInt,quarterInt+\"季\");}else{this.quarterCombo.setSelectedItem(\"1\",\"1季\");}\nthis.quarterCombo.onselectChange.subscribe(this.doChange,this);this.quarterCombo.dropdownBox.onCloseUp.subscribe(this.doCloseUp,this);this.daysMonth=new Array(31,28,31,30,31,30,31,31,30,31,30,31);this.doCloseUp();};QuarterCalendar.prototype.destroy=function(){try{domutils.destroyNode(this.div);}catch(e){}\nthis.yearCombo.destroy();this.yearCombo=null;this.quarterCombo.destroy();this.quarterCombo=null;this.parentEl=null;this.clientObj=null;QuarterCalendar.superclass.destroy.call(this);};QuarterCalendar.prototype.doChange=function(obj,oldId,newId){};QuarterCalendar.prototype.offset=function(){};QuarterCalendar.prototype.getDate=function(){var year=this.yearCombo.getSelectedId();var q=this.quarterCombo.getSelectedId();var m;if(q==1){m=2;}else if(q==2){m=5;}else if(q==3){m=8;}else if(q==4){m=11;}\nreturn new Date(year,m,this.daysMonth[m]);};QuarterCalendar.prototype.doCloseUp=function(panel,itemClick){if(itemClick===false)\nreturn;var date=this.getDate();this.clientObj.oldValue=this.clientObj.edit.value;this.clientObj.edit.value=dateToStr(date);this.clientObj.oneditChange.fire(this.clientObj,this.clientObj.edit.value);};QuarterCalendar.prototype.doCloseUpByTypeChange=function(){var date=this.getDate();this.clientObj.oldValue=this.clientObj.edit.value;this.clientObj.edit.value=getDateByIntervalAndOldDate(\"QUARTER\",this.clientObj.oldValue,date);this.clientObj.oneditChange.fire(this.clientObj,this.clientObj.edit.value);};HalfYearCalendar=function(clientObj,parentEl){this.clientObj=clientObj;this.parentEl=parentEl;};lang.extend(HalfYearCalendar,Module);HalfYearCalendar.prototype.init=function(initYear,range,width){this.div=document.createElement(\"div\");this.parentEl.appendChild(this.div);var table=document.createElement(\"table\");table.cellPadding=0;table.cellSpacing=0;var tbody=document.createElement(\"tbody\");var tr=document.createElement(\"tr\");var tdyear=document.createElement(\"td\");var tdhalfyear=document.createElement(\"td\");this.div.appendChild(table);table.appendChild(tbody);tbody.appendChild(tr);tr.appendChild(tdyear);tr.appendChild(tdhalfyear);var odate=getDateByOldDateString(this.clientObj.edit.value);if(odate!=null){initYear=parseInt(odate.year);}\nthis.yearCombo=new ComboBox(tdyear,tdyear,width/2,tdyear);this.yearCombo.dropdownBox.onCloseUp.subscribe(this.doCloseUp,this);for(var i=-range;i<range;i++){this.yearCombo.insertItem(initYear+i,initYear+i);}\nthis.yearCombo.setSelectedItem(initYear,initYear);this.halfyearCombo=new ComboBox(tdhalfyear,tdhalfyear,width/2,tdhalfyear);this.halfyearCombo.insertItem(\"1\",\"上半年\");this.halfyearCombo.insertItem(\"2\",\"下半年\");this.halfyearCombo.setEditReadOnly(true);if(odate!=null){if(odate<\"07\")\nthis.halfyearCombo.setSelectedItem(\"1\",\"上半年\");else\nthis.halfyearCombo.setSelectedItem(\"2\",\"下半年\");}else{this.halfyearCombo.setSelectedItem(\"1\",\"上半年\");}\nthis.halfyearCombo.onselectChange.subscribe(this.doChange,this);this.halfyearCombo.dropdownBox.onCloseUp.subscribe(this.doCloseUp,this);this.daysMonth=new Array(31,28,31,30,31,30,31,31,30,31,30,31);this.doCloseUp();};HalfYearCalendar.prototype.destroy=function(){try{domutils.destroyNode(this.div);}catch(e){}\nthis.yearCombo.destroy();this.yearCombo=null;this.halfyearCombo.destroy();this.halfyearCombo=null;this.parentEl=null;this.clientObj=null;HalfYearCalendar.superclass.destroy.call(this);};HalfYearCalendar.prototype.doChange=function(obj,oldId,newId){};HalfYearCalendar.prototype.offset=function(){};HalfYearCalendar.prototype.getDate=function(){var year=this.yearCombo.getSelectedId();var q=this.halfyearCombo.getSelectedId();var m;if(q==1){m=5;}else if(q==2){m=11;}\nreturn new Date(year,m,this.daysMonth[m]);};HalfYearCalendar.prototype.doCloseUp=function(panel,itemClick){if(itemClick===false)\nreturn;var date=this.getDate();this.clientObj.oldValue=this.clientObj.edit.value;this.clientObj.edit.value=dateToStr(date);this.clientObj.oneditChange.fire(this.clientObj,this.clientObj.edit.value);};HalfYearCalendar.prototype.doCloseUpByTypeChange=function(){var date=this.getDate();this.clientObj.oldValue=this.clientObj.edit.value;this.clientObj.edit.value=getDateByIntervalAndOldDate(\"HALFYEAR\",this.clientObj.oldValue,date);this.clientObj.oneditChange.fire(this.clientObj,this.clientObj.edit.value);};MonthCalendar=function(clientObj,parentEl){this.clientObj=clientObj;this.parentEl=parentEl;};lang.extend(MonthCalendar,Module);MonthCalendar.prototype.init=function(initYear,range,width){this.div=document.createElement(\"div\");this.parentEl.appendChild(this.div);var table=document.createElement(\"table\");table.cellPadding=0;table.cellSpacing=0;var tbody=document.createElement(\"tbody\");var tr=document.createElement(\"tr\");var tdyear=document.createElement(\"td\");var tdmonth=document.createElement(\"td\");this.div.appendChild(table);table.appendChild(tbody);tbody.appendChild(tr);tr.appendChild(tdyear);tr.appendChild(tdmonth);var odate=getDateByOldDateString(this.clientObj.edit.value);if(odate!=null){initYear=parseInt(odate.year);}\nthis.yearCombo=new ComboBox(tdyear,tdyear,width/2,tdyear);this.yearCombo.dropdownBox.onCloseUp.subscribe(this.doCloseUp,this);for(var i=-range;i<range;i++){this.yearCombo.insertItem(initYear+i,initYear+i);}\nthis.monthCombo=new ComboBox(tdmonth,tdmonth,width/2,tdmonth);for(var i=1;i<13;i++){this.monthCombo.insertItem(i,this.retrieveSpecifiedMonthByNo(i));}\nif(odate!=null){this.yearCombo.setSelectedItem(odate.year,odate.year);this.monthCombo.setSelectedItem(odate.month,this.retrieveSpecifiedMonthByNo(odate.month));}else{this.yearCombo.setSelectedItem(initYear,initYear);this.monthCombo.setSelectedItem(1,this.retrieveSpecifiedMonthByNo(1));}\nthis.monthCombo.setEditReadOnly(true);this.monthCombo.onselectChange.subscribe(this.doChange,this);this.monthCombo.dropdownBox.onCloseUp.subscribe(this.doCloseUp,this);this.daysMonth=new Array(31,28,31,30,31,30,31,31,30,31,30,31);this.doCloseUp();};MonthCalendar.prototype.retrieveSpecifiedMonthByNo=function(no){var monthName=\"\";no=parseInt(no,10);switch(no){case 1:monthName=\"1月\";break;case 2:monthName=\"2月\";break;case 3:monthName=\"3月\";break;case 4:monthName=\"4月\";break;case 5:monthName=\"5月\";break;case 6:monthName=\"6月\";break;case 7:monthName=\"7月\";break;case 8:monthName=\"8月\";break;case 9:monthName=\"9月\";break;case 10:monthName=\"10月\";break;case 11:monthName=\"11月\";break;case 12:monthName=\"12月\";break;}\nreturn monthName;};MonthCalendar.prototype.destroy=function(){try{domutils.destroyNode(this.div);}catch(e){}\nthis.yearCombo.destroy();this.yearCombo=null;this.monthCombo.destroy();this.monthCombo=null;this.parentEl=null;this.clientObj=null;MonthCalendar.superclass.destroy.call(this);};MonthCalendar.prototype.adjustDaysMonth=function(){var y=this.yearCombo.getSelectedId();this.daysMonth[1]=(0==y%4&&(y%100!=0||y%400==0))?29:28;}\nMonthCalendar.prototype.doChange=function(obj,oldId,newId){};MonthCalendar.prototype.getDate=function(){var year=this.yearCombo.getSelectedId();var m=this.monthCombo.getSelectedId();this.adjustDaysMonth();return new Date(year,m-1,this.daysMonth[m-1]);};MonthCalendar.prototype.doCloseUp=function(panel,itemClick){if(itemClick===false)\nreturn;var date=this.getDate();this.clientObj.oldValue=this.clientObj.edit.value;this.clientObj.edit.value=dateToStr(date);this.clientObj.oneditChange.fire(this.clientObj,this.clientObj.edit.value);};MonthCalendar.prototype.doCloseUpByTypeChange=function(){var date=this.getDate();this.clientObj.oldValue=this.clientObj.edit.value;this.clientObj.edit.value=getDateByIntervalAndOldDate(\"MONTH\",this.clientObj.oldValue,date);this.clientObj.oneditChange.fire(this.clientObj,this.clientObj.edit.value);};MonthCalendar.prototype.show=function(){this.div.style.display=\"block\";};MonthCalendar.prototype.offset=function(){};TenDaysCalendar=function(clientObj,parentEl){this.clientObj=clientObj;this.parentEl=parentEl;};lang.extend(TenDaysCalendar,Module);TenDaysCalendar.prototype.init=function(initYear,range,width){this.div=document.createElement(\"div\");this.parentEl.appendChild(this.div);var table=document.createElement(\"table\");table.cellPadding=0;table.cellSpacing=0;var tbody=document.createElement(\"tbody\");var tr=document.createElement(\"tr\");var tdyear=document.createElement(\"td\");var tdmonth=document.createElement(\"td\");var tdtendays=document.createElement(\"td\");this.div.appendChild(table);table.appendChild(tbody);tbody.appendChild(tr);tr.appendChild(tdyear);tr.appendChild(tdmonth);tr.appendChild(tdtendays);var odate=getDateByOldDateString(this.clientObj.edit.value);if(odate!=null){initYear=parseInt(odate.year);}\nthis.yearCombo=new ComboBox(tdyear,tdyear,width/3,tdyear);this.yearCombo.dropdownBox.onCloseUp.subscribe(this.doCloseUp,this);for(var i=-range;i<range;i++){this.yearCombo.insertItem(initYear+i,initYear+i);}\nthis.yearCombo.setSelectedItem(initYear,initYear);this.monthCombo=new ComboBox(tdmonth,tdmonth,width/3,tdmonth);for(var i=1;i<13;i++){this.monthCombo.insertItem(i,i+\"月\");}\nthis.monthCombo.setEditReadOnly(true);this.tendaysCombo=new ComboBox(tdtendays,tdtendays,width/3,tdtendays);this.tendaysCombo.dropdownBox.onCloseUp.subscribe(this.doCloseUp,this);this.tendaysCombo.insertItem(\"1\",\"上旬\");this.tendaysCombo.insertItem(\"2\",\"中旬\");this.tendaysCombo.insertItem(\"3\",\"下旬\");this.tendaysCombo.setEditReadOnly(true);if(odate!=null){var m=parseInt(odate.month);this.monthCombo.setSelectedItem(m,m+\"月\");if(odate.date<11)\nthis.tendaysCombo.setSelectedItem(\"1\",\"上旬\");else if(odate.date<21)\nthis.tendaysCombo.setSelectedItem(\"2\",\"中旬\");else\nthis.tendaysCombo.setSelectedItem(\"3\",\"下旬\");}else{this.monthCombo.setSelectedItem(1,\"1月\");this.tendaysCombo.setSelectedItem(\"1\",\"上旬\");}\nthis.yearCombo.onselectChange.subscribe(this.doChange,this);this.yearCombo.dropdownBox.onCloseUp.subscribe(this.doCloseUp,this);this.monthCombo.onselectChange.subscribe(this.doChange,this);this.monthCombo.dropdownBox.onCloseUp.subscribe(this.doCloseUp,this);this.tendaysCombo.onselectChange.subscribe(this.doChange,this);this.tendaysCombo.dropdownBox.onCloseUp.subscribe(this.doCloseUp,this);this.daysMonth=new Array(31,28,31,30,31,30,31,31,30,31,30,31);this.doCloseUp();};TenDaysCalendar.prototype.destroy=function(){try{domutils.destroyNode(this.div);}catch(e){}\nthis.yearCombo.destroy();this.yearCombo=null;this.monthCombo.destroy();this.monthCombo=null;this.tendaysCombo.destroy();this.tendaysCombo=null;this.parentEl=null;this.clientObj=null;TenDaysCalendar.superclass.destroy.call(this);};TenDaysCalendar.prototype.adjustDaysMonth=function(){var y=this.yearCombo.getSelectedId();this.daysMonth[1]=(0==y%4&&(y%100!=0||y%400==0))?29:28;}\nTenDaysCalendar.prototype.doChange=function(obj,oldId,newId){};TenDaysCalendar.prototype.getDate=function(){var year=this.yearCombo.getSelectedId();var m=this.monthCombo.getSelectedId();var t=this.tendaysCombo.getSelectedId();this.adjustDaysMonth();if(t==1)\nt=10;else if(t==2)\nt=20;else if(t==3)\nt=this.daysMonth[m-1];return new Date(year,m-1,t);};TenDaysCalendar.prototype.doCloseUp=function(panel,itemClick){if(itemClick===false)\nreturn;var date=this.getDate();this.clientObj.oldValue=this.clientObj.edit.value;this.clientObj.edit.value=dateToStr(date);this.clientObj.oneditChange.fire(this.clientObj,this.clientObj.edit.value);};TenDaysCalendar.prototype.doCloseUpByTypeChange=function(){var date=this.getDate();this.clientObj.oldValue=this.clientObj.edit.value;this.clientObj.edit.value=getDateByIntervalAndOldDate(\"TENDAYS\",this.clientObj.oldValue,date);this.clientObj.oneditChange.fire(this.clientObj,this.clientObj.edit.value);};TenDaysCalendar.prototype.offset=function(){};WeekCalendar=function(clientObj,parentEl){this.clientObj=clientObj;this.parentEl=parentEl;};lang.extend(WeekCalendar,Module);WeekCalendar.prototype.init=function(initYear,range,width){this.div=document.createElement(\"div\");this.parentEl.appendChild(this.div);var table=document.createElement(\"table\");table.cellPadding=0;table.cellSpacing=0;var tbody=document.createElement(\"tbody\");var tr=document.createElement(\"tr\");var tdyear=document.createElement(\"td\");var tdweek=document.createElement(\"td\");this.div.appendChild(table);table.appendChild(tbody);tbody.appendChild(tr);tr.appendChild(tdyear);tr.appendChild(tdweek);var odate=getDateByOldDateString(this.clientObj.edit.value);if(odate!=null){initYear=parseInt(odate.year);}\nthis.yearCombo=new ComboBox(tdyear,tdyear,width/2,tdyear);this.yearCombo.dropdownBox.onCloseUp.subscribe(this.doCloseUp,this);for(var i=-range;i<range;i++){this.yearCombo.insertItem(initYear+i,initYear+i);}\nthis.yearCombo.setSelectedItem(initYear,initYear);this.yearCombo.onselectChange.subscribe(this.doYearChange,this);this.weekCombo=new ComboBox(tdweek,tdweek,115,tdweek);this.weekCombo.setEditReadOnly(true);var dateList=this.getLastDateByYear(initYear);for(var i=0;i<dateList.length;i++){this.weekCombo.insertItem(i+1,(i+1)+\"周 \"+dateList[i]);}\nvar week=this.dateToWeek(this.clientObj.edit.value);this.weekCombo.setSelectedItem(week);this.weekCombo.onselectChange.subscribe(this.doChange,this);this.weekCombo.dropdownBox.onCloseUp.subscribe(this.doCloseUp,this);this.doCloseUp();};WeekCalendar.prototype.destroy=function(){try{domutils.destroyNode(this.div);}catch(e){}\nthis.yearCombo.destroy();this.yearCombo=null;this.weekCombo.destroy();this.weekCombo=null;this.parentEl=null;this.clientObj=null;WeekCalendar.superclass.destroy.call(this);};WeekCalendar.prototype.offset=function(){};WeekCalendar.prototype.doYearChange=function(obj,oldId,newId){var year=this.yearCombo.getSelectedId();if(newId)\nyear=newId;this.weekCombo.clear();var dateList=this.getLastDateByYear(year);for(var i=0;i<dateList.length;i++){this.weekCombo.insertItem(i+1,(i+1)+\"周  \"+dateList[i]);}\nthis.weekCombo.setSelectedItem(1,1+\"周  \"+(this.calStartDayByYearWeek(year,1)));};WeekCalendar.prototype.calStartDayByYearWeek=function(year,numWeek){var ret=util.remoteInvokeEx(\"FreeQueryManageReportService\",\"getLastDateByYearWeek\",[parseInt(year),parseInt(numWeek)]);if(ret!=null&&ret.succeeded){return ret.result;}\nreturn\"\";}\nWeekCalendar.prototype.getLastDateByYear=function(year){var ret=util.remoteInvokeEx(\"FreeQueryManageReportService\",\"getLastDateByYear\",[parseInt(year)]);if(ret!=null&&ret.succeeded){return ret.result;}\nreturn new Array();}\nWeekCalendar.prototype.dateToWeek=function(datestr){if(datestr!=null&&datestr.length==10){var ret=util.remoteInvokeEx(\"FreeQueryManageReportService\",\"dateToWeek\",[datestr]);if(ret!=null&&ret.succeeded){return ret.result;}}\nreturn\"1\";};WeekCalendar.prototype.doChange=function(obj,oldId,newId){};WeekCalendar.prototype.doCloseUp=function(panel,itemClick){if(itemClick===false)\nreturn;var year=this.yearCombo.getSelectedId();var week=this.weekCombo.getSelectedId();var date=this.calStartDayByYearWeek(year,week);this.clientObj.oldValue=this.clientObj.edit.value;this.clientObj.edit.value=date;this.clientObj.oneditChange.fire(this.clientObj,this.clientObj.edit.value);};WeekCalendar.prototype.doCloseUpByTypeChange=function(){var year=this.yearCombo.getSelectedId();var week=this.weekCombo.getSelectedId();var date=this.calStartDayByYearWeek(year,week);this.clientObj.oldValue=this.clientObj.edit.value;this.clientObj.edit.value=getDateByIntervalAndOldDate(\"WEEK\",this.clientObj.oldValue,date);this.clientObj.oneditChange.fire(this.clientObj,this.clientObj.edit.value);};WeekCalendar.prototype.show=function(){this.div.style.display=\"block\";};FiveDaysCalendar=function(clientObj,parentEl){this.clientObj=clientObj;this.parentEl=parentEl;};lang.extend(FiveDaysCalendar,Module);FiveDaysCalendar.prototype.init=function(initYear,range,width){this.div=document.createElement(\"div\");this.parentEl.appendChild(this.div);var table=document.createElement(\"table\");table.cellPadding=0;table.cellSpacing=0;var tbody=document.createElement(\"tbody\");var tr=document.createElement(\"tr\");var tdyear=document.createElement(\"td\");var tdfivedays=document.createElement(\"td\");this.div.appendChild(table);table.appendChild(tbody);tbody.appendChild(tr);tr.appendChild(tdyear);tr.appendChild(tdfivedays);var odate=getDateByOldDateString(this.clientObj.edit.value);if(odate!=null){initYear=parseInt(odate.year);}\nthis.yearCombo=new ComboBox(tdyear,tdyear,width/2,tdyear);this.yearCombo.dropdownBox.onCloseUp.subscribe(this.doCloseUp,this);for(var i=-range;i<range;i++){this.yearCombo.insertItem(initYear+i,initYear+i);}\nthis.yearCombo.setSelectedItem(initYear,initYear);this.yearCombo.onselectChange.subscribe(this.doYearChange,this);this.fivedaysCombo=new ComboBox(tdfivedays,tdfivedays,130,tdfivedays);this.fivedaysCombo.setEditReadOnly(true);for(var i=1;i<73;i++){this.fivedaysCombo.insertItem(i,i+\"五日\"+dateToStr(this.calStartDayByYearFiveDays(initYear,i)));}\nvar fivedays=this.dateToFiveDays(new Date());var strDate=dateToStr(this.calStartDayByYearFiveDays(initYear,fivedays));this.fivedaysCombo.setSelectedItem(fivedays,fivedays+\"五日 \"+strDate);this.fivedaysCombo.onselectChange.subscribe(this.doChange,this);this.fivedaysCombo.dropdownBox.onCloseUp.subscribe(this.doCloseUp,this);this.doCloseUp();};FiveDaysCalendar.prototype.destroy=function(){try{domutils.destroyNode(this.div);}catch(e){}\nthis.yearCombo.destroy();this.yearCombo=null;this.fivedaysCombo.destroy();this.fivedaysCombo=null;this.parentEl=null;this.clientObj=null;FiveDaysCalendar.superclass.destroy.call(this);};FiveDaysCalendar.prototype.offset=function(){};FiveDaysCalendar.prototype.doYearChange=function(obj,oldId,newId){var year=this.yearCombo.getSelectedId();if(newId)\nyear=newId;this.fivedaysCombo.clear();for(var i=1;i<73;i++){this.fivedaysCombo.insertItem(i,i+\"五日 \"+dateToStr(this.calStartDayByYearFiveDays(year,i)));}\nthis.fivedaysCombo.setSelectedItem(1,1+\"五日 \"+dateToStr(this.calStartDayByYearFiveDays(year,1)));};FiveDaysCalendar.prototype.calStartDayByYearFiveDays=function(year,numFiveDay){var date=new Date(year,0,1);var ww=(5-date.getDay())%5;var date=date.valueOf();var dateEnd=date+(((numFiveDay)*5)*24*3600*1000-1);dateEnd=new Date(dateEnd);return dateEnd;}\nFiveDaysCalendar.prototype.dateToFiveDays=function(date){var firstDate=new Date(date.getFullYear(),0,1);var num=date.valueOf()-firstDate.valueOf();var fiveDays=parseInt((num/1000/3600/24)/5,10);return fiveDays;};FiveDaysCalendar.prototype.doChange=function(obj,oldId,newId){};FiveDaysCalendar.prototype.doCloseUp=function(panel,itemClick){if(itemClick===false)\nreturn;var year=this.yearCombo.getSelectedId();var fiveDays=this.fivedaysCombo.getSelectedId();var date=this.calStartDayByYearFiveDays(year,fiveDays);this.clientObj.oldValue=this.clientObj.edit.value;this.clientObj.edit.value=dateToStr(date);this.clientObj.oneditChange.fire(this.clientObj,this.clientObj.edit.value);};FiveDaysCalendar.prototype.doCloseUpByTypeChange=function(){var year=this.yearCombo.getSelectedId();var fiveDays=this.fivedaysCombo.getSelectedId();var date=this.calStartDayByYearFiveDays(year,fiveDays);this.clientObj.oldValue=this.clientObj.edit.value;this.clientObj.edit.value=getDateByIntervalAndOldDate(\"FIVEDAYS\",this.clientObj.oldValue,date);this.clientObj.oneditChange.fire(this.clientObj,this.clientObj.edit.value);};FiveDaysCalendar.prototype.show=function(){this.div.style.display=\"block\";};","js/freequery/control/TreeDialog.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var util=jsloader.resolve(\"freequery.common.util\");var dialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var TreeDialog=function(parentObject,untilEl,width){this.parent=parentObject;this.untilEl=untilEl;this.onselectChange=new CustomEvent(\"selectChange\",this);this.oneditChange=new CustomEvent(\"editChange\",this);this.onpopupDialog=new CustomEvent(\"popupDialog\",this);if(domutils.isFirefox()||domutils.isChrome()||domutils.isSafari())\nthis.panel=document.createElement(\"div\");else\nthis.panel=document.createElement(\"span\");this.panel.style.height=TreeDialog.BUTTON_HEIGHT;this.panel.className=\"combobox-panel\";this.setWidth(width);this.parent.appendChild(this.panel);this.edit=document.createElement(\"input\");var editWidth=width-TreeDialog.BUTTON_WIDTH-2;if(domutils.isFirefox()||domutils.isChrome()||domutils.isSafari())\neditWidth=width-TreeDialog.BUTTON_WIDTH;this.edit.style.width=editWidth;this.edit.style.height=TreeDialog.BUTTON_HEIGHT;this.edit.type=\"text\";this.edit.nodefaultclass=\"true\";this.edit.className=\"combobox-edit\";this.panel.appendChild(this.edit);this.addListener(this.edit,\"keyup\",this.editKeyup,this);this.addListener(this.edit,\"change\",this.editChange,this);this.btn=document.createElement(\"input\");this.btn.type=\"button\";this.btn.nodefaultclass=\"true\";this.btn.style.width=TreeDialog.BUTTON_WIDTH;this.btn.style.height=TreeDialog.BUTTON_HEIGHT;this.btn.className=\"combobox-button\";this.panel.appendChild(this.btn);this.addListener(this.btn,\"click\",this.btnClick,this);this.allowMultiSelect=false;this.enabled=true;this.hasFirstChild=false;this.selectedItems={};}\nlang.extend(TreeDialog,Module);TreeDialog.BUTTON_WIDTH=15;TreeDialog.BUTTON_HEIGHT=16;TreeDialog.prototype.destroy=function(){this.clear();this.onselectChange=null;this.oneditChange=null;this.onpopupDialog=null;this.untilEl=null;this.removeListener(this.edit,\"change\",this.editChange);this.removeListener(this.edit,\"keyup\",this.editKeyup);try{domutils.destroyNode(this.edit);}catch(e){}\nthis.edit=null;this.removeListener(this.btn,\"click\",this.btnClick);try{domutils.destroyNode(this.btn);}catch(e){}\nthis.btn=null;try{domutils.destroyNode(this.panel);}catch(e){}\nthis.panel=null;this.parent=null;TreeDialog.superclass.destroy.call(this);}\nTreeDialog.prototype.editKeyup=function(){}\nTreeDialog.prototype.editChange=function(){this.oneditChange.fire(this,this.edit.value);}\nTreeDialog.prototype.btnClick=function(){if(!this.enabled)\nreturn;this.onpopupDialog.fire(this);var dialogConfig={};dialogConfig.title=\"设置选中值\";dialogConfig.size=dialogFactory.size.LARGE;dialogConfig.fullName=\"freequery.control.DialogSelector\";var isMultiSelect=this.isAllowMultiSelect();var selectedItems=util.getClean(this.selectedItems);var treeParams={\"hasFirstChild\":this.hasFirstChild,\"allowMultiSelect\":this.allowMultiSelect,\"parameterPanelId\":this.parameterPanelId,\"paramId\":this.paramId,\"parentFieldName\":this.parentFieldName,\"checkDescendents\":this.checkDescendents};var optionsFullName=\"freequery.control.TreeOptions\";var optionsParams=[selectedItems,treeParams];var noNull=lang.parseJSON(this.componentDefine).noNull;var datas=[optionsFullName,optionsParams,isMultiSelect,selectedItems,noNull];dialogFactory.showDialog(dialogConfig,datas,this.doCloseSelector,this);}\nTreeDialog.prototype.doCloseSelector=function(success,selectedItems,callbackInfo){if(!success)\nreturn;var oldId=this.getSelectedId();var oldText=this.getSelectedText();if(callbackInfo!=null)\nthis.hasFirstChild=callbackInfo.hasFirstChild;var ids=[];var names=[];if(selectedItems){for(var id in selectedItems){ids.push(id);names.push(selectedItems[id][1]);}}\nids=ids.join(\",\");this.setSelectedItem(ids,names.join(\",\"),false);var newId=this.getSelectedId();var newText=this.getSelectedText();this.onselectChange.fire(this,oldId,newId,oldText,newText);}\nTreeDialog.prototype.setSelectedItem=function(ids,names,add){if(!ids)\nids=names;ids=ids?(ids+\"\"):\"\";if(!names)\nnames=ids;var idList=ids.split(\",\");var nameList=names.split(\",\");this.selectedItems={};var texts=[];for(var i=0;i<idList.length;i++){var item=[idList[i],nameList[i]];this.selectedItems[item[0]]=item;texts.push(item[1]);}\nthis.edit.value=texts.join(\",\");}\nTreeDialog.prototype.setWidth=function(width){this.panel.style.width=width;}\nTreeDialog.prototype.setAllowMultiSelect=function(allow){this.allowMultiSelect=allow;}\nTreeDialog.prototype.isAllowMultiSelect=function(){return this.allowMultiSelect;}\nTreeDialog.prototype.setReadOnly=function(readOnly){this.edit.readOnly=readOnly;}\nTreeDialog.prototype.isReadOnly=function(){return this.edit.readOnly;}\nTreeDialog.prototype.setEnabled=function(enabled){this.enabled=enabled;this.panel.disabled=!this.enabled;this.btn.disabled=!this.enabled;this.edit.style.background=this.enabled?\"\":\"#F6F6F6\";}\nTreeDialog.prototype.isEnabled=function(){return this.enabled;}\nTreeDialog.prototype.setAttribute=function(name,value){this.panel.setAttribute(name,value);}\nTreeDialog.prototype.getAttribute=function(name){return this.panel.getAttribute(name);}\nTreeDialog.prototype.clear=function(){this.hasFirstChild=false;this.selectedItems={};this.edit.value=\"\";}\nTreeDialog.prototype.itemsCount=function(){return this.hasFirstChild?1:0;}\nTreeDialog.prototype.setCheckDescendents=function(checkDescendents){this.checkDescendents=checkDescendents;}\nTreeDialog.prototype.setParentFieldName=function(parentFieldName){this.parentFieldName=parentFieldName;}\nTreeDialog.prototype.setParamId=function(paramId){this.paramId=paramId;}\nTreeDialog.prototype.setComponentDefine=function(componentDefine){this.componentDefine=componentDefine;}\nTreeDialog.prototype.initTree=function(parameterPanelId){this.parameterPanelId=parameterPanelId;}\nTreeDialog.prototype.getSelectedId=function(){var ids=[];for(var id in this.selectedItems){ids.push(id);}\nreturn ids.join(\",\");}\nTreeDialog.prototype.getSelectedText=function(){var texts=[];for(var id in this.selectedItems){var item=this.selectedItems[id];texts.push(item[1]);}\nreturn texts.join(\",\");}","js/freequery/dialog/BaseDialog.js":"\n﻿\nvar Module2=jsloader.resolve(\"freequery.widget.Module2\");var domutils=jsloader.resolve(\"freequery.lang.domutils\");var util=imports(\"freequery.common.util\").getInstance();var BaseDialog=function(){if(!window.windowAlert){util.redefineAlert();}};lang.extend(BaseDialog,Module2);BaseDialog.prototype.init=function(parent,data,fn,obj){this.parent=parent;this.data=data;this.fn=fn;this.obj=obj;};BaseDialog.prototype.close=function(){if(this.closeBeforeCallback)\nwindow.close();if(this.fn){this.fn.call(this.obj,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);}\nif(!this.closeBeforeCallback)\nwindow.close();};BaseDialog.prototype.hide=function(){};BaseDialog.prototype.destroy=function(){this.parent=null;this.data=null;this.fn=null;this.obj=null;BaseDialog.superclass.destroy.call(this);};","js/freequery/dialog/dialogFactory.js":"\n﻿var util=jsloader.resolve(\"freequery.common.util\");var modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var domutils=jsloader.resolve(\"freequery.lang.domutils\");var dialogFactory={size:{POCKET:[510,150],SMALL:[420,251],MIDDLE:[500,380],LARGE:[800,520],NODE_PROPERTY:[500,400]},fixSize:function(size,type){if(modalWindow.ieVersion&&modalWindow.ieVersion<7&&'string'==typeof type){if('W'==type.toUpperCase().charAt(0))\nreturn size+5;else if('H'==type.toUpperCase().charAt(0))\nreturn size+31;}\nreturn size;},showDialog:function(dialogConfig,params,fn,obj){var size=dialogConfig.size||[];if(size.length==0){size.push(dialogConfig.width);size.push(dialogConfig.height);}\nvar dialogWidth=parseInt(size[0]);var dialogHeight=parseInt(size[1]);if(isNaN(dialogWidth)||isNaN(dialogHeight)){dialogWidth=this.size.MIDDLE[0];dialogHeight=this.size.MIDDLE[1];}\ndialogWidth=this.fixSize(dialogWidth,'W');dialogHeight=this.fixSize(dialogHeight,'H');var resizable=dialogConfig.resizable||(dialogWidth>500?'yes':'no');var title=dialogConfig.title||modalWindow.getCaption();var dialogType=(dialogConfig.dialogType=='modeless')?'modeless':'modal';var dialogLeft=dialogConfig.dialogLeft;var dialogTop=dialogConfig.dialogTop;dialogConfig.transferData=util.transferData();var features=['dialogHeight:'+dialogHeight+'px','dialogWidth: '+dialogWidth+'px','resizable:'+resizable,'scroll:no;status:no;center:yes;help:no;edge:raised'];if(dialogLeft)\nfeatures[features.length]=\"dialogLeft:\"+dialogLeft+\"px\";if(dialogTop)\nfeatures[features.length+1]=\"dialogTop:\"+dialogTop+\"px\";if(domutils.isFirefox()&&(!dialogLeft&&!dialogTop)){var left=(screen.width-dialogWidth)/2;var top=(screen.height-dialogHeight-20)/2;features[features.length]=\"dialogLeft:\"+left+\"px\";features[features.length]=\"dialogTop:\"+top+\"px\";}\nvar path=null;if(dialogConfig.path){path=dialogConfig.path;}else{var url=document.URL;var ext=(url.substring(url.lastIndexOf('.'))=='.debug')?'.debug':'.html';path=jsloader.baseHref+'js/freequery/dialog/Dialog'+ext;}\nif(domutils.isIE()||(dialogType=='modal'&&'function'==typeof window.showModalDialog)){var _m=(dialogType=='modal')?window.showModalDialog:window.showModelessDialog;return _m(path,[title,dialogConfig,params,fn,obj,window],features.join(';'));}else{features.push('modal:'+(dialogType=='modal'?'yes':'no'));return window.open(path,title,features.join(';'));}}};","js/freequery/query/Axis.js":"\nAxis=function(){}\nAxis.Row=\"row\";Axis.Col=\"col\";Axis.Page=\"page\";Axis.Group=\"group\";Axis.Other=\"other\";","js/freequery/query/FieldSelectPanel.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var util=jsloader.resolve(\"freequery.common.util\");var FieldSelectPanel=function(container,refElement,queryView){this.container=container;this.refElement=refElement;this.queryView=queryView;if(this.queryView)\nthis.availableFieldList=this.queryView.availableFieldList\nthis.MAX_HEIGHT=200;this.element=document.createElement(\"div\");this.element.style.position=\"absolute\";this.element.style.zIndex=20;this.element.style.backgroundColor=\"white\";this.element.style.borderStyle=\"solid\";this.element.style.borderWidth=\"1px\";this.element.style.borderColor=\"black\";this.container.appendChild(this.element);this.element.style.overflowY=\"auto\";this.selectedFieldList=this.queryView.selectedFieldList;this.initFromFieldList(this.getAvailableFieldList());this.refreshCheckList();this.hide();};lang.extend(FieldSelectPanel,Module);FieldSelectPanel.prototype.destroy=function(){FieldSelectPanel.superclass.destroy.call(this);try{domutils.destroyNode(this.element)}catch(e){};};FieldSelectPanel.prototype.addField=function(fieldId){this.selectedFieldList[fieldId]=true;this.refreshCheckList();};FieldSelectPanel.prototype.delField=function(fieldId){this.selectedFieldList[fieldId]=false;this.refreshCheckList();};FieldSelectPanel.prototype.refreshCheckList=function(){var props=this.queryView.clientConfig.gridProp.fieldProps;for(var i=0;i<this.checkList.length;i++){var fieldId=this.checkList[i].getAttribute(\"__fieldId\");if(this.selectedFieldList[fieldId]){var prop=props[fieldId];if(!prop||typeof prop.visible==\"undefined\"||prop.visible){this.checkList[i].flag=\"2\";}else{this.checkList[i].flag=\"1\";}\nthis.checkList[i].checked=true;}else{this.checkList[i].checked=false;this.checkList[i].flag=\"0\";}}\nvar props=this.queryView.clientConfig.gridProp.fieldProps;for(var i=0;i<this.folderCheckList.length;i++){var notAllChecked=false;var checked=false;var visible=false;var parentId=this.folderCheckList[i].getAttribute(\"__fieldId\");for(var j=0;j<this.checkList.length;j++){var fieldId=this.checkList[j].getAttribute(\"__fieldId\");var pfieldId=this.checkList[j].getAttribute(\"__parentId\");if(parentId==pfieldId){if(this.selectedFieldList[fieldId]){var prop=props[fieldId];visible=true;if(!prop||typeof prop.visible==\"undefined\"||prop.visible){checked=true;}else{notAllChecked=true;}}else{notAllChecked=true;}}}\nif(checked&&notAllChecked){this.folderCheckList[i].checked=true;this.folderCheckList[i].indeterminate=true;this.folderCheckList[i].flag=\"0\";}\nelse if(!checked&&notAllChecked){if(visible){this.folderCheckList[i].checked=true;this.folderCheckList[i].indeterminate=true;this.folderCheckList[i].flag=\"0\";}else{this.folderCheckList[i].checked=false;this.folderCheckList[i].indeterminate=false;this.folderCheckList[i].flag=\"2\";}}else{this.folderCheckList[i].checked=true;this.folderCheckList[i].indeterminate=false;this.folderCheckList[i].flag=\"1\";}}};FieldSelectPanel.prototype.isVisible=function(){return\"block\"===this.element.style.display;};FieldSelectPanel.prototype.show=function(pos){if(this.element.getAttribute(\"needRefresh\")===true){this.element.removeAttribute(\"needRefresh\");this.refreshCheckList();}\nthis.element.style.display=\"block\";var p=pos||util.getAbsolutePos(this.refElement,this.container);this.element.style.left=p.x+\"px\";this.element.style.top=(p.y+this.refElement.offsetHeight)+\"px\";this.addListener(document,\"mousedown\",this.onDocumentMousedown,this);this.addListener(this.element,\"mousedown\",this.onMousedown);};FieldSelectPanel.prototype.onMousedown=function(ev){ev.cancelBubble=true;};FieldSelectPanel.prototype.onDocumentMousedown=function(ev){this.hide();this.removeListener(document,\"mousedown\",this.onDocumentMousedown);this.removeListener(this.element,\"mousedown\",this.onMousedown);};FieldSelectPanel.prototype.hide=function(){this.element.style.display=\"none\";};FieldSelectPanel.prototype.gray=function(c,fieldId,fieldName)\n{switch(c.flag)\n{case\"0\":c.checked=true;c.indeterminate=false;c.flag=\"2\";if(domutils.isChrome()||domutils.isSafari()){c.nextSibling.style.color=\"\";}\nthis.selectedFieldList[fieldId]=c.checked;this.queryView.addFieldToQueryView(fieldId,fieldName,fieldName,this.queryView.bizViewId);var props=this.queryView.clientConfig.gridProp.fieldProps;var prop=props[fieldId];delete prop.visible;this.queryView.updateClientConfig();var colGroups=this.queryView.grid.mainTable.getElementsByTagName(\"colgroup\");if(colGroups){var colGroup=colGroups[0];var col=document.createElement(\"COL\");col.style.width=prop.width;col.fid=fieldId;colGroup.appendChild(col);}\nbreak;case\"2\":c.checked=true;c.indeterminate=true;c.flag=\"1\";if(domutils.isChrome()||domutils.isSafari()){c.indeterminate=false;c.nextSibling.style.color=\"gray\";}\nthis.selectedFieldList[fieldId]=c.checked;this.queryView.setFieldVisible(fieldId,false);var props=this.queryView.clientConfig.gridProp.fieldProps;var prop=props[fieldId];prop.visible=false;this.queryView.grid.refreshMultiHeader(this.queryView.grid.multiHeaderModel);this.queryView.updateClientConfig();this.delColGroup(fieldId);break;case\"1\":if(domutils.isChrome()||domutils.isSafari()){c.nextSibling.style.color=\"\";}\nif(this.getCheckedCount()<2||this.queryView.bizViewType==\"RAWSQL_BUSINESS_VIEW\"){c.checked=true;c.indeterminate=false;c.flag=\"2\";this.selectedFieldList[fieldId]=c.checked;this.queryView.setFieldVisible(fieldId,true);this.queryView.grid.MergeHeader();var props=this.queryView.clientConfig.gridProp.fieldProps;var prop=props[fieldId];prop.visible=true;this.queryView.grid.refreshMultiHeader(this.queryView.grid.multiHeaderModel);if(this.queryView.bizViewType!=\"RAWSQL_BUSINESS_VIEW\")\nalert(\"不能删除所有字段！\");this.queryView.updateClientConfig();return;}\nc.checked=false;c.indeterminate=false;c.flag=\"0\";this.selectedFieldList[fieldId]=c.checked;this.queryView.grid.deleteColByFieldId(fieldId);this.queryView.refreshSelectedFieldList(false,fieldId);var props=this.queryView.clientConfig.gridProp.fieldProps;var prop=props[fieldId];delete prop.visible;this.queryView.updateClientConfig();this.delColGroup(fieldId);break;}\nthis.queryView.refreshData();}\nFieldSelectPanel.prototype.delColGroup=function(fieldId){var colGroups=this.queryView.grid.mainTable.getElementsByTagName(\"colgroup\");if(colGroups){var colGroup=colGroups[0];var col=this.queryView.grid.getGroupCol(fieldId);if(col){colGroup.removeChild(col);}}}\nFieldSelectPanel.prototype.onCheck=function(ev){var fieldId=ev.target.getAttribute(\"__fieldId\");var fieldName=ev.target.getAttribute(\"__fieldName\");var isFolder=ev.target.getAttribute(\"__isFolder\");if(isFolder)\nthis.checkFolder(ev.target,fieldId,fieldName);else\nthis.gray(ev.target,fieldId,fieldName);this.refreshCheckList();};FieldSelectPanel.prototype.checkFolder=function(c,fieldId,fieldName){var tmpFlage=c.flag;var fieldId=c.getAttribute(\"__fieldId\");for(var i=0;i<this.checkList.length;i++){var el=this.checkList[i];var pfieldId=el.getAttribute(\"__parentId\");var id=el.getAttribute(\"__fieldId\");var name=el.getAttribute(\"__fieldName\");if(pfieldId==fieldId){this.gray2(el,id,name,tmpFlage);}}\nswitch(c.flag){case\"0\":c.checked=true;c.indeterminate=false;c.flag=\"1\";break;case\"2\":c.checked=true;c.indeterminate=true;c.flag=\"1\";break;case\"1\":c.checked=false;c.indeterminate=false;c.flag=\"0\";break;}\nthis.queryView.refreshData();}\nFieldSelectPanel.prototype.gray2=function(c,fieldId,fieldName,flag){switch(flag){case\"0\":c.checked=true;c.indeterminate=false;c.flag=\"2\";if(domutils.isChrome()||domutils.isSafari()){c.nextSibling.style.color=\"\";}\nthis.selectedFieldList[fieldId]=c.checked;this.queryView.addFieldToQueryView(fieldId,fieldName,fieldName,this.queryView.bizViewId);var props=this.queryView.clientConfig.gridProp.fieldProps;var prop=props[fieldId];delete prop.visible;this.queryView.updateClientConfig();var colGroups=this.queryView.grid.mainTable.getElementsByTagName(\"colgroup\");if(colGroups){var colGroup=colGroups[0];var col=document.createElement(\"COL\");col.style.width=prop.width;col.fid=fieldId;colGroup.appendChild(col);}\nbreak;case\"2\":c.checked=true;c.indeterminate=true;c.flag=\"1\";if(domutils.isChrome()||domutils.isSafari()){c.indeterminate=false;c.nextSibling.style.color=\"gray\";}\nthis.selectedFieldList[fieldId]=c.checked;this.queryView.setFieldVisible(fieldId,false);var props=this.queryView.clientConfig.gridProp.fieldProps;var prop=props[fieldId];prop.visible=false;this.queryView.grid.refreshMultiHeader(this.queryView.grid.multiHeaderModel);this.queryView.updateClientConfig();this.delColGroup(fieldId);break;case\"1\":if(domutils.isChrome()||domutils.isSafari()){c.nextSibling.style.color=\"\";}\nif(this.getCheckedCount()<2||this.queryView.bizViewType==\"RAWSQL_BUSINESS_VIEW\"){c.checked=true;c.indeterminate=false;c.flag=\"2\";this.selectedFieldList[fieldId]=c.checked;this.queryView.setFieldVisible(fieldId,true);this.queryView.grid.MergeHeader();var props=this.queryView.clientConfig.gridProp.fieldProps;var prop=props[fieldId];prop.visible=true;this.queryView.grid.refreshMultiHeader(this.queryView.grid.multiHeaderModel);if(this.queryView.bizViewType!=\"RAWSQL_BUSINESS_VIEW\")\nalert(\"不能删除所有字段！\");this.queryView.updateClientConfig();return;}\nc.checked=false;c.indeterminate=false;c.flag=\"0\";this.selectedFieldList[fieldId]=c.checked;this.queryView.grid.deleteColByFieldId(fieldId);this.queryView.refreshSelectedFieldList(false,fieldId);var props=this.queryView.clientConfig.gridProp.fieldProps;var prop=props[fieldId];delete prop.visible;this.queryView.updateClientConfig();this.delColGroup(fieldId);break;}}\nFieldSelectPanel.prototype.initFromFieldList=function(fieldList){this.folderList=[];this.checkList=[],this.folderCheckList=[];var ret=util.remoteInvoke(\"CatalogService\",\"getChildElements\",[this.queryView.bizViewId]);if(ret&&ret.result&&ret.succeeded){for(var i=0;i<ret.result.length;i++){var element=ret.result[i];if(element&&element.type==\"DEFAULT_TREENODE\"){this.folderList.push(element);this.createInput(element,true,true);var ret2=util.remoteInvoke(\"CatalogService\",\"getChildElements\",[element.id]);if(ret2&&ret2.result&&ret2.succeeded){for(var j=0;j<ret2.result.length;j++){this.createInputs(fieldList,ret2.result[j],false,false,element.id);var obj=ret2.result[j];obj.parentId=element.id;}}}else{this.createInputs(fieldList,element,true,false);}}}\nif(this.element.offsetHeight>this.MAX_HEIGHT){this.element.style.height=this.MAX_HEIGHT+\"px\";this.element.style.width=this.element.offsetWidth+20;}};FieldSelectPanel.prototype.createInputs=function(fieldList,element,isRoot,isFolder,parentId){for(var j=0;j<fieldList.length;j++){var fieldInfo=fieldList[j];if(fieldInfo&&fieldInfo.id==element.id){this.createInput(fieldInfo,isRoot,isFolder,parentId);break;}}}\nFieldSelectPanel.prototype.createInput=function(fieldInfo,isRoot,isFolder,parentId){var line=document.createElement(\"div\");this.element.appendChild(line);if(!isRoot)\nline.style.paddingLeft=\"16px\";var check=document.createElement(\"input\");check.type=\"checkbox\";check.setAttribute(\"__fieldId\",fieldInfo.id);check.setAttribute(\"__fieldName\",fieldInfo.alias||fieldInfo.name);check.setAttribute(\"__parentId\",parentId);line.appendChild(check);this.addListener(check,\"click\",this.onCheck,this);this.addListener(check,\"mousedown\",function(ev){ev.cancelBubble=true;},this);var span=document.createElement(\"span\");if(isFolder){this.folderCheckList.push(check);check.setAttribute(\"__isFolder\",true);span.style.fontWeight=\"bold\";}else{this.checkList.push(check);}\nspan.innerHTML=fieldInfo.alias+\"&nbsp;&nbsp;&nbsp;\"||fieldInfo.name+\"&nbsp;&nbsp;&nbsp;\";span.style.cursor=\"default\";line.appendChild(span);}\nFieldSelectPanel.prototype.getCheckedCount=function(ignoreGrayChecked){var includeGrayChecked=!ignoreGrayChecked;var c=0;for(var i=0;i<this.checkList.length;i++){var flag=this.checkList[i].flag;if(flag==\"2\")\n++c;else if(flag==\"1\"&&includeGrayChecked)\n++c;}\nreturn c;};FieldSelectPanel.prototype.getAvailableFieldList=function(){var ret=null;if(this.availableFieldList)\nreturn this.availableFieldList;else{ret=util.remoteInvokeEx(\"ClientReportService\",\"getAvailableFieldList\",[this.queryView.clientId,this.queryView.bizViewId]);if(ret&&ret.result){this.availableFieldList=ret.result;return this.availableFieldList;}else{return null;}}};","js/freequery/query/GridPropData.js":"\nvar GridPropData=function(){this.fieldProps=new Array();this.bgColor=\"#fcfaf6\";this.spColor=\"#E6EBFF\";this.mergeZ=false;this.mergeH=false;this.mergeMaxCol=1;}","js/freequery/query/PagePanel.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var util=jsloader.resolve(\"freequery.common.util\");var modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");var PagePanel=function(parentObject,options){this.parent=parentObject;this.defaultRows=100;this.maxReturnRows=1000;var pageTheme=registry.get(\"pageTheme\");this.pagePanelFont=this.pagePanelDisableFont={};if(pageTheme&&pageTheme.report){if(pageTheme.report.pagePanelFont)\nthis.pagePanelFont=pageTheme.report.pagePanelFont\nif(pageTheme.report.pagePanelDisableFont)\nthis.pagePanelDisableFont=pageTheme.report.pagePanelDisableFont;}\nvar skip=this.parent.firstChild&&true;if(skip){var td=this.parent.firstChild.firstChild.rows[0].cells[0];this.firstpage=td.firstChild;this.prevpage=this.firstpage.nextSibling;this.nextpage=this.prevpage.nextSibling;this.lastpage=this.nextpage.nextSibling;this.curpage=this.lastpage.nextSibling.nextSibling;this.pagecount=this.curpage.nextSibling.nextSibling;this.rowcount=this.pagecount.nextSibling.nextSibling;this.allRowCount=this.rowcount.nextSibling.nextSibling;this.onloading=this.allRowCount.nextSibling.nextSibling;}else{this.options=options||{};if(this.options.template){this.template=domutils.doGet(this.options.template);}else{this.template=domutils.doGet(\"template/freequery/query/PagePanel.template\");}\nthis.parent.innerHTML=this.template;domutils.removeWhiteSpace(this.parent);this.firstpage=domutils.findElementByClassName(this.parent,\"_firstPage\");this.prevpage=domutils.findElementByClassName(this.parent,\"_prevPage\");this.nextpage=domutils.findElementByClassName(this.parent,\"_nextPage\");this.lastpage=domutils.findElementByClassName(this.parent,\"_lastPage\");this.curpage=domutils.findElementByClassName(this.parent,\"_curPage\");this.pagecount=domutils.findElementByClassName(this.parent,\"_pageCount\");this.rowcount=domutils.findElementByClassName(this.parent,\"_rowCount\");this.allRowCount=domutils.findElementByClassName(this.parent,\"_allRowCount\");this.onloading=domutils.findElementByClassName(this.parent,\"_onloading\");this.curpage.style.fontSize=this.pagePanelFont.fontSize||\"\";this.curpage.style.color=this.pagePanelFont.color||\"\";this.rowcount.style.fontSize=this.pagePanelFont.fontSize||\"\";this.rowcount.style.color=this.pagePanelFont.color||\"\";}\nthis.addListener(this.firstpage,\"click\",this.doFirstPage,this);this.addListener(this.prevpage,\"click\",this.doPrevPage,this);this.addListener(this.nextpage,\"click\",this.doNextPage,this);this.addListener(this.lastpage,\"click\",this.doLastPage,this);this.addListener(this.curpage,\"keydown\",this.doCurPageKeyPress,this);this.addListener(this.rowcount,\"keydown\",this.doCurPageKeyPress,this);this.addListener(this.rowcount,\"keydown\",this.doCurPageKeyDown,this);this.addListener(this.curpage,\"keyup\",this.doCurPageKeyUp,this);this.addListener(this.rowcount,\"keyup\",this.doRowCountKeyUp,this);this.addListener(this.rowcount,\"blur\",this.doRowCountChange,this);this.attachMouseOverOut(this.firstpage);this.attachMouseOverOut(this.prevpage);this.attachMouseOverOut(this.nextpage);this.attachMouseOverOut(this.lastpage);this.reset();this.onPage=new CustomEvent(\"page\",this);this.onNextPage=new CustomEvent(\"nextPage\",this);this.onRowCountChange=new CustomEvent(\"rowCountChange\",this);}\nlang.extend(PagePanel,Module);PagePanel.prototype.destroy=function(){this.firstpage=null;this.prevpage=null;this.nextpage=null;this.lastpage=null;this.curpage=null;this.pagecount=null;this.rowcount=null;this.onPage=null;this.parent=null;PagePanel.superclass.destroy.call(this);}\nPagePanel.maxPageNumber=2147483647;PagePanel.prototype.generatePages=function(pages){this.parent.style.display=\"\";if(PagePanel.maxPageNumber!=pages)\nthis.pagecount.innerText=pages;else\nthis.pagecount.innerText=\"未知\";this.setButtonStyle();}\nPagePanel.prototype.getAllRowCount=function(){return parseInt(this.allRowCount.innerText,10);}\nPagePanel.prototype.setAllRowCount=function(rowNum){if(PagePanel.maxPageNumber!=rowNum)\nthis.allRowCount.innerHTML=rowNum;else\nthis.allRowCount.innerHTML=\"未知\";}\nPagePanel.prototype.getCurPageNum=function(){if(this.curpage.value)\nreturn parseInt(this.curpage.value,10);else\nreturn-1;}\nPagePanel.prototype.setCurPageNum=function(pageNum){this.curpage.value=pageNum;this.setButtonStyle();}\nPagePanel.prototype.getPageRows=function(){return parseInt(this.rowcount.value,10);}\nPagePanel.prototype.setPageRows=function(rows){this.rowcount.value=rows;}\nPagePanel.prototype.getPages=function(){return parseInt(this.pagecount.innerText,10);}\nPagePanel.prototype.doFirstPage=function(e){if(e&&e.target&&e.target.disabled||this.curpage.value==1)\nreturn;this.curpage.value=1;this.setButtonStyle();this.onPage.fire(this,this.getCurPageNum());}\nPagePanel.prototype.doPrevPage=function(e){if(e&&e.target&&e.target.disabled||this.curpage.value==1)\nreturn;this.curpage.value--;this.setButtonStyle();this.onPage.fire(this,this.getCurPageNum());}\nPagePanel.prototype.doNextPage=function(e){if(e&&e.target&&e.target.disabled||this.curpage.value==this.getPages())\nreturn;this.curpage.value++;this.setButtonStyle();this.onNextPage.fire();this.onPage.fire(this,this.getCurPageNum());}\nPagePanel.prototype.doLastPage=function(e){var pages=this.getPages();if(e&&e.target&&e.target.disabled||!pages||this.curpage.value==pages)\nreturn;this.curpage.value=this.getPages();this.setButtonStyle();this.onPage.fire(this,this.getCurPageNum());}\nPagePanel.prototype.doCurPageKeyDown=function(){};PagePanel.prototype.doCurPageKeyPress=function(){var ev=eventutil.getEvent();var code=ev.charCode||ev.keyCode;var BACKSPACE=8;var DELETE=46;var LEFT=37;var RIGHT=39;var HOME=36;var END=35;var NUM_0=47;var NUM_9=58;var NUMLOCK_0=95;var NUMLOCK_9=106;if(NUM_0<code&&code<NUM_9||NUMLOCK_0<code&&code<NUMLOCK_9||BACKSPACE==code||LEFT==code||RIGHT==code||HOME==code||END==code||DELETE==code){}else{ev.preventDefault();}}\nPagePanel.prototype.doCurPageKeyUp=function(){if(this.getPages()<=0){this.setCurPageNum(1);}\nvar ev=eventutil.getEvent();var code=ev.charCode||ev.keyCode;;if(code==13){if(this.getCurPageNum()<=0)\nthis.setCurPageNum(1)\nelse if(this.pagecount.innerText!=\"未知\"){var pageCount=this.getPages();if(this.getCurPageNum()>pageCount)\nthis.setCurPageNum(pageCount)}else if(this.getCurPageNum()>2147483647)\nthis.setCurPageNum(2147483647);this.setButtonStyle();this.onPage.fire(this,this.getCurPageNum(),true);}}\nPagePanel.prototype.doRowCountKeyUp=function(){if(this.getPageRows(\"\")>this.maxReturnRows)\nthis.setPageRows(this.maxReturnRows);if(this.getPageRows(\"\")<=0)\n{this.setPageRows(1);}\nvar ev=eventutil.getEvent();var code=ev.charCode||ev.keyCode;;if(code==13){if(isNaN(parseInt(this.rowcount.value,10))){alert(\"分页输入有误，请重新输入\");return;}\nthis.rowcount.value=parseInt(this.rowcount.value,10);this.curpage.value=1;this.setButtonStyle();this.onPage.fire(this,this.getCurPageNum(),true);}}\nPagePanel.prototype.doRowCountChange=function(){if(!this.rowcount.value){this.setPageRows(this.defaultRows);}else{var rowCount=parseInt(this.rowcount.value,10);if(isNaN(rowCount)){alert(\"分页输入有误，请重新输入\");return;}\nthis.onRowCountChange.fire(this,rowCount);}}\nPagePanel.prototype.reset=function(){this.pagecount.innerText=\"\";this.rowcount.value=\"\";this.disabledButton();}\nPagePanel.prototype.disabledButton=function(){var fontSize=this.pagePanelDisableFont.fontSize||\"\";var color=this.pagePanelDisableFont.color||\"gray\";this.curpage.value=\"1\";this.firstpage.disabled=true;this.firstpage.style.color=color;this.prevpage.disabled=true;this.prevpage.style.color=color;this.nextpage.disabled=true;this.nextpage.style.color=color;this.lastpage.disabled=true;this.lastpage.style.color=color;this.firstpage.style.fontSize=fontSize;this.prevpage.style.fontSize=fontSize;this.nextpage.style.fontSize=fontSize;this.lastpage.style.fontSize=fontSize;}\nPagePanel.prototype.setButtonStyle=function(){var fontSize=this.pagePanelDisableFont.fontSize||\"\";var disabledColor=this.pagePanelDisableFont.color||\"gray\";if(this.getCurPageNum()==1)\n{this.firstpage.disabled=true;this.firstpage.style.color=disabledColor;this.prevpage.disabled=true;this.prevpage.style.color=disabledColor;this.firstpage.style.fontSize=fontSize;this.prevpage.style.fontSize=fontSize;}\nelse{this.firstpage.disabled=false;this.firstpage.style.color=\"\";this.prevpage.disabled=false;this.prevpage.style.color=\"\";}\nif(this.getPages()<=this.getCurPageNum())\n{this.nextpage.disabled=true;this.nextpage.style.color=disabledColor;this.lastpage.disabled=true;this.lastpage.style.color=disabledColor;this.nextpage.style.fontSize=fontSize;this.lastpage.style.fontSize=fontSize;}\nelse{this.nextpage.disabled=false;this.nextpage.style.color=\"\";this.lastpage.disabled=false;this.lastpage.style.color=\"\";}\nif(this.isUnknowPages())\n{this.lastpage.disabled=true;this.lastpage.style.color=disabledColor;this.lastpage.style.fontSize=fontSize;}\nif(this.getCurPageNum()==0){this.disabledButton();}}\nPagePanel.prototype.isUnknowPages=function(){return isNaN(parseInt(this.pagecount.innerText,10));}\nPagePanel.prototype.attachMouseOverOut=function(element){this.addListener(element,'mouseover',this.doMouseOver,this);this.addListener(element,'mouseout',this.doMouseOut,this);};PagePanel.prototype.doMouseOver=function(e){if(!e||!e.target)\nreturn;if(!e.target.disabled){e.target.style.color=\"#0000FF\";e.target.style.textDecorationUnderline=true;}};PagePanel.prototype.doMouseOut=function(e){if(!e||!e.target)\nreturn;if(e.target.disabled)\ne.target.style.color=this.pagePanelDisableFont.color||\"gray\";else\ne.target.style.color=this.pagePanelFont.color||\"#000000\";e.target.style.textDecorationUnderline=false;};PagePanel.prototype.setOnloadingDisplay=function(flag){if(flag){this.onloading.style.display=\"\";}else{this.onloading.style.display=\"NONE\";}};","js/freequery/query/ParameterPanel.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var ComboBox=imports(\"freequery.control.ComboBox\");var DateTimePicker=imports(\"freequery.control.DateTimePicker\");var ReportDatePicker=imports(\"freequery.control.ReportDatePicker\");var FreqDatePicker=imports(\"freequery.control.FreqDatePicker\");var DropDownTree=imports(\"freequery.control.DropDownTree\");var util=jsloader.resolve(\"freequery.common.util\");var modalWindow=null;var OlapParamDropDownTree=imports(\"bof.olapquery.param.OlapParamDropDownTree\");var OlapParamMemberChoose=imports(\"bof.olapquery.param.OlapParamMemberChoose\");var ListDialog=imports(\"freequery.control.ListDialog\");var ListPanel=imports(\"freequery.control.ListPanel\");var TreeDialog=imports(\"freequery.control.TreeDialog\");var MultiCalendar=imports(\"freequery.control.MultiCalendar\");var ParameterPanel=function(parentObject,untilEl,paramLayout){this.parent=parentObject;this.untilEl=untilEl;this.paramRow=0;this.autoCommit=true;this.notCommitedParamBeans=new Array();this.initParamLayout=false;this.paramDefine=null;this.paramLayout=null;this.paramObjList=new Array();this.layoutTable=document.createElement(\"table\");this.currentRow=null;this.parent.appendChild(this.layoutTable);this.layoutTable.className=\"layoutTable\";this.layoutTable.cellSpacing=0;this.layoutTable.cellPadding=0;this.layoutTable.border=0;if(paramLayout){this.initLayout(paramLayout);}\nthis.isReportPane=false;this.enableResetRelateParamsValue=true;this.onDropDownTree=new CustomEvent(\"dropDownTree\");this.onDropDown=new CustomEvent(\"panelDropDown\");this.onSelectChange=new CustomEvent(\"selectChange\");this.onEditChange=new CustomEvent(\"editChange\");this.onResetRelateParamsValue=new CustomEvent();this.paramsInited=new Array();this.paramValues=new Array();}\nlang.extend(ParameterPanel,Module);ParameterPanel.prototype.setAutoCommit=function(auto){this.autoCommit=auto;}\nParameterPanel.prototype.commit=function(queryView){if(this.notCommitedParamBeans.length>0){this.autoCommit=true;util.compositeInvoke(\"setParamValues\",[this.notCommitedParamBeans[0].clientId,this.notCommitedParamBeans]);for(var i=0;i<this.notCommitedParamBeans.length;i++){var paramBean=this.notCommitedParamBeans[i];this.setParamValue(paramBean.id,paramBean.value,paramBean.displayValue,paramBean.clientId,true);if(queryView&&!this.getParamTagByParamId(paramBean.id)){var paramsInQueryView=queryView.params;for(var z=0;z<paramsInQueryView.length;z++){if(paramsInQueryView[z].id==paramBean.id){paramsInQueryView[z].value=paramBean.value;paramsInQueryView[z].displayValue=paramBean.displayValue;break;}}}}\nutil.clearCompositeInvokeCache(\"setParamValues\",[this.notCommitedParamBeans[0].clientId,this.notCommitedParamBeans]);this.notCommitedParamBeans=new Array();}}\nParameterPanel.prototype.initLayout=function(paramLayout){this.paramLayout=paramLayout;while(this.layoutTable.rows.length>0){this.layoutTable.deleteRow(0);}\nvar rows=paramLayout;for(var i=0;i<rows.length;i++){var row=this.layoutTable.insertRow(i);for(var j=0;j<rows[i].length;j++){if(typeof rows[i]==\"string\")\ncontinue;if(0==rows[i][j].colspan)\ncontinue;var cell=row.insertCell(-1);domutils.addClassName(cell,\"_mt_cell\");cell.colSpan=rows[i][j].colspan;cell._id=rows[i][j].id;if(rows[i][j].id!=\"EMPTY\")\nrow.noEmpty=\"true\";else if(rows[i][j].name&&rows[i][j].name!=\"&nbsp;\")\ncell.innerText=rows[i][j].name;cell.align=\"left\";if(rows[i][j].align){cell.titleAlign=rows[i][j].align;}else{cell.titleAlign=\"left\";}\nif(rows[i][j].width)\ncell.style.width=rows[i][j].width;cell.row=i;cell.col=j;}}\nthis.initParamLayout=true;};ParameterPanel.prototype.addLayout=function(param){if(!this.paramLayout){this.paramLayout=new Array();this.paramLayout.push([]);this.paramLayout[0]=new Array();}\nif(!this.paramLayout[this.paramRow]){this.paramLayout[this.paramRow]=new Array();}\nthis.paramLayout[this.paramRow].push({id:param.id,name:param.name,colspan:1});var row=null;if(!this.currentRow||this.currentRow.childNodes.length==2){row=this.layoutTable.insertRow(this.paramRow);this.currentRow=row;}else{row=this.currentRow;}\nvar col=row.length;var cell=row.insertCell(-1);domutils.addClassName(cell,\"_mt_cell\");cell.colSpan=1;cell._id=param.id;cell.align=\"left\";cell.row=this.paramRow;cell.col=col;if(this.dpHiddenPara){cell.style.display=\"none\";}\nif(!this.currentRow||this.currentRow.childNodes.length==2){this.paramRow++;}};ParameterPanel.prototype.destroy=function(){this.clear();this.paramObjList=null;this.untilEl=null;domutils.destroyNode(this.layoutTable);this.onSelectChange=null;this.parent=null;this.onEditChange=null;ParameterPanel.superclass.destroy.call(this);}\nParameterPanel.ComboBox=\"COMBOBOX\";ParameterPanel.DropDownTree=\"DROPDOWNTREE\";ParameterPanel.DateTimePicker=\"DATETIMEPICK\";ParameterPanel.ReportDatePicker=\"REPORTDATEPICK\";ParameterPanel.FreqDatePicker=\"FREQDATEPICK\";ParameterPanel.TextInput=\"TEXTINPUT\";ParameterPanel.OlapMemberParam=\"OLAPMEMBERPARAM\";ParameterPanel.OlapMemberDialog=\"OLAPMEMBERDIALOG\";ParameterPanel.ListDialog=\"LISTDIALOG\";ParameterPanel.ListPanel=\"LISTPANEL\";ParameterPanel.TreeDialog=\"TREEDIALOG\";ParameterPanel.MultiCalendar=\"MULTICALENDAR\";ParameterPanel.prototype.addParams=function(params){for(var i=0;i<params.length;i++){this.addParam(params[i]);}}\nParameterPanel.prototype.addParam=function(param){if(!this.initParamLayout)\nthis.addLayout(param);var p=null;switch(param.componentType){case ParameterPanel.ComboBox:p=this.addParamComboBox(param);break;case ParameterPanel.ListDialog:p=this.addParamListDialog(param);break;case ParameterPanel.ListPanel:p=this.addParamListPanel(param);break;case ParameterPanel.DropDownTree:p=this.addParamDropDownTree(param);break;case ParameterPanel.TreeDialog:p=this.addParamTreeDialog(param);break;case ParameterPanel.DateTimePicker:p=this.addParamDateTimePick(param);break;case ParameterPanel.ReportDatePicker:p=this.addParamReportDatePick(param);break;case ParameterPanel.FreqDatePicker:p=this.addParamFreqDatePick(param);break;case ParameterPanel.TextInput:p=this.addParamTextInput(param);break;case ParameterPanel.OlapMemberParam:p=this.addParamOlapMember(param);break;case ParameterPanel.OlapMemberDialog:p=this.addParamOlapMemberDialog(param);break;case ParameterPanel.MultiCalendar:p=this.addParamMultiCalendar(param);break;default:p=this.addParamComboBox(param);break;}\nthis.paramObjList.push(p);if(p.edit){this.applyParameterFontTheme(p.edit);}\nreturn p;}\nParameterPanel.prototype.findComboxByParamId=function(id){for(var i=0;i<this.paramObjList.length;i++){var paramTag=this.paramObjList[i].paramTag;if(paramTag.controlType==ParameterPanel.ComboBox){var param=paramTag.param;if(param.id==id)return this.paramObjList[i];}}\nreturn null;}\nParameterPanel.prototype.findListDialogByParamId=function(id){for(var i=0;i<this.paramObjList.length;i++){var paramTag=this.paramObjList[i].paramTag;if(paramTag.controlType==ParameterPanel.ListDialog){var param=paramTag.param;if(param.id==id)return this.paramObjList[i];}}\nreturn null;}\nParameterPanel.prototype.removeParam=function(id){var paramArray=new Array();for(var i=0;i<this.paramObjList.length;i++){var paramTag=this.paramObjList[i].paramTag;var param=paramTag.param;if(param.id!=id)\nparamArray.push(this.paramObjList[i]);}\nthis.paramObjList=paramArray;};ParameterPanel.prototype.getParam=function(id){for(var i=0;i<this.paramObjList.length;i++){var paramTag=this.paramObjList[i].paramTag;var param=paramTag.param;if(param.id==id)\nreturn param;}\nreturn null;};ParameterPanel.prototype.findParam=function(id){for(var i=0;i<this.paramObjList.length;i++){var paramTag=this.paramObjList[i].paramTag;var param=paramTag.param;if(param.id==id)return i;}\nreturn-1;};ParameterPanel.prototype.findParamByName=function(name){for(var i=0;i<this.paramObjList.length;i++){var paramTag=this.paramObjList[i].paramTag;var param=paramTag.param;if(param.name==name)\nreturn param;}\nreturn null;};ParameterPanel.prototype.addParamComboBox=function(param){var pTag=this.newParamTag(param.id);this.setParamCaption(param,pTag);var combo=this.setParamComboBox(lang.parseJSON(param.componentDefine),pTag);pTag.param=param;pTag.control=combo;pTag.controlType=ParameterPanel.ComboBox;combo.setNeedCheckBox(param.multSelect);combo.needChecked=(param.checkedInStandby==\"true\");combo.setReadOnly(!param.manual);combo.paramTag=pTag;combo.ondropDown.subscribe(this.doComboDropDown,this);combo.onselectChange.subscribe(this.doParamValueChange,this);combo.oneditChange.subscribe(this.doParamEditChange,this);return combo;}\nParameterPanel.prototype.addParamListDialog=function(param){var pTag=this.newParamTag(param.id);this.setParamCaption(param,pTag);var list=this.setParamListDialog(lang.parseJSON(param.componentDefine),pTag);pTag.param=param;pTag.control=list;pTag.controlType=ParameterPanel.ListDialog;list.needChecked=(param.checkedInStandby==\"true\");list.paramTag=pTag;list.setAllowMultiSelect(param.multSelect);list.setReadOnly(!param.manual);list.setComponentDefine(param.componentDefine);list.onpopupDialog.subscribe(this.doListDialogPopup,this);list.onselectChange.subscribe(this.doParamValueChange,this);list.oneditChange.subscribe(this.doParamEditChange,this);return list;}\nParameterPanel.prototype.addParamListPanel=function(param){var pTag=this.newParamTag(param.id);this.setParamCaption(param,pTag);var list=this.setParamListPanel(lang.parseJSON(param.componentDefine),pTag);pTag.param=param;pTag.control=list;pTag.controlType=ParameterPanel.ListPanel;list.needChecked=(param.checkedInStandby==\"true\");list.paramTag=pTag;list.setAllowMultiSelect(param.multSelect);list.setReadOnly(!param.manual);list.setComponentDefine(param.componentDefine);list.onlistpanelinited.subscribe(this.doInitListPanel,this);list.onselectChange.subscribe(this.doParamValueChange,this);return list;}\nParameterPanel.prototype.doInitListPanel=function(listPanel){var paramTag=listPanel.paramTag;var param=paramTag.param;if(!this.paramsInited[param.id]){listPanel.clear();this.paramsInited[param.id]=true;}\nif(!listPanel.inited){listPanel.inited=true;var paramValues=this.getParamStandbyValue(param.id,param.clientId);if(!paramValues){return false;}\nif(paramValues!=null){listPanel.insertItems(paramValues);listPanel.setChecked(param.value);}}else{listPanel.setChecked(param.value);}}\nParameterPanel.prototype.addParamDropDownTree=function(param){var pTag=this.newParamTag(param.id);var def=lang.parseJSON(param.componentDefine);this.setParamCaption(param,pTag);var tree=this.setParamDropDownTree(def,pTag);tree.parentFieldName=def.standby_parent;tree.paramId=param.id;pTag.param=param;pTag.control=tree;pTag.controlType=ParameterPanel.DropDownTree;tree.paramTag=pTag;tree.checkDescendents=param.checkDescendents;tree.multSelect=param.multSelect;tree.ondropDown.subscribe(this.doComboDropDown,this);tree.onselectChange.subscribe(this.doParamValueChange,this);tree.oneditChange.subscribe(this.doParamEditChange,this);tree.setReadOnly(!param.manual);return tree;}\nParameterPanel.prototype.addParamTreeDialog=function(param){var pTag=this.newParamTag(param.id);this.setParamCaption(param,pTag);var tree=this.setParamTreeDialog(lang.parseJSON(param.componentDefine),pTag);pTag.param=param;pTag.control=tree;pTag.controlType=ParameterPanel.TreeDialog;tree.paramTag=pTag;tree.setParentFieldName(lang.parseJSON(param.componentDefine).standby_parent);tree.setParamId(param.id);tree.setCheckDescendents(param.checkDescendents);tree.setAllowMultiSelect(param.multSelect);tree.setReadOnly(!param.manual);tree.setComponentDefine(param.componentDefine);tree.onpopupDialog.subscribe(this.doListDialogPopup,this);tree.onselectChange.subscribe(this.doParamValueChange,this);tree.oneditChange.subscribe(this.doParamEditChange,this);return tree;}\nParameterPanel.prototype.addParamDateTimePick=function(param){var pTag=this.newParamTag(param.id);this.setParamCaption(param,pTag);var textDate=this.setParamDateTimePicker(lang.parseJSON(param.componentDefine),pTag);var dateType=lang.parseJSON(param.componentDefine).dateType;textDate.setType(dateType);textDate.setDateType(param.type);pTag.param=param;pTag.control=textDate;pTag.controlType=ParameterPanel.DateTimePicker;textDate.paramTag=pTag;textDate.onselectChange.subscribe(this.doParamValueChange,this);textDate.oneditChange.subscribe(this.doParamEditChange,this);textDate.setReadOnly(!param.manual);return textDate;}\nParameterPanel.prototype.addParamReportDatePick=function(param){var pTag=this.newParamTag(param.id);this.setParamCaption(param,pTag);var textDate=this.setParamReportDatePicker(lang.parseJSON(param.componentDefine),pTag);var dateType=lang.parseJSON(param.componentDefine).dateType;pTag.param=param;pTag.control=textDate;pTag.controlType=ParameterPanel.ReportDatePicker;textDate.paramTag=pTag;textDate.onselectChange.subscribe(this.doParamValueChange,this);textDate.oneditChange.subscribe(this.doParamEditChange,this);textDate.setReadOnly(!param.manual);return textDate;}\nParameterPanel.prototype.addParamFreqDatePick=function(param){var pTag=this.newParamTag(param.id);this.setParamCaption(param,pTag);var textDate=this.setParamFreqDatePicker(lang.parseJSON(param.componentDefine),pTag);var dateType=lang.parseJSON(param.componentDefine).dateType;pTag.param=param;pTag.control=textDate;pTag.controlType=ParameterPanel.FreqDatePicker;textDate.paramTag=pTag;textDate.onSelectChanged.subscribe(this.doParamValueChange,this);textDate.onEditChanged.subscribe(this.doParamEditChange,this);textDate.setReadOnly(!param.manual);return textDate;}\nParameterPanel.prototype.addParamTextInput=function(param){var pTag=this.newParamTag(param.id);this.setParamCaption(param,pTag);var textDate=this.setParamTextInput(lang.parseJSON(param.componentDefine),pTag);pTag.param=param;pTag.control=textDate;pTag.controlType=ParameterPanel.TextInput;textDate.paramTag=pTag;textDate.disabled=!param.manual;this.addListener(textDate,\"change\",this.doParamTextInputValueChange,this);this.addListener(textDate,\"keyup\",this.doEditKeyup,this);this.addListener(textDate,\"mousedown\",this.doTextInputMousedown,this);return textDate;}\nParameterPanel.prototype.addParamOlapMember=function(param){var pTag=this.newParamTag(param.id);this.setParamCaption(param,pTag);var tree=this.setParamOlapMember(param,pTag);tree.render(param);pTag.param=param;pTag.control=tree;pTag.controlType=ParameterPanel.OlapMemberParam;tree.paramTag=pTag;tree.ondropDown.subscribe(this.doComboDropDown,this);tree.onselectChange.subscribe(this.doParamValueChange,this);tree.oneditChange.subscribe(this.doParamEditChange,this);return tree;}\nParameterPanel.prototype.addParamOlapMemberDialog=function(param){var pTag=this.newParamTag(param.id);this.setParamCaption(param,pTag);var dialog=this.setParamOlapMemberDialog(param.displayWidth,pTag);dialog.render(param);pTag.param=param;pTag.control=dialog;pTag.controlType=ParameterPanel.OlapMemberDialog;dialog.paramTag=pTag;dialog.onselectChange.subscribe(this.doParamValueChange,this);return dialog;}\nParameterPanel.prototype.doComboDropDown=function(combo){var paramTag=combo.paramTag;var param=paramTag.param;if(!this.paramsInited[param.id]){if(param.componentType==\"COMBOBOX\")\ncombo.dropdownBox.clear();else\ncombo.clear();this.paramsInited[param.id]=true;}\nif(combo.itemsCount()<=0){if(param.componentType==\"DROPDOWNTREE\"){var parameterPanelId=param.clientId||this.clientId;var noNull=lang.parseJSON(param.componentDefine).noNull;if(typeof(noNull)==\"string\"){noNull=(noNull==\"true\");}\ncombo.initTree(parameterPanelId,noNull);}else if(param.componentType==\"COMBOBOX\"){var paramValues=this.getParamStandbyValue(param.id,param.clientId);if(!paramValues){return false;}\nif(paramValues!=null){var noNull=lang.parseJSON(param.componentDefine).noNull;if(typeof(noNull)==\"string\")\nnoNull=(noNull==\"true\");if((!param.multSelect)&&noNull)\ncombo.insertItem(null,null);combo.insertItems(paramValues);combo.setChecked(param.value);}\ncombo.inited=true;}}else{if(param.componentType==\"COMBOBOX\"){combo.setChecked(param.value);}}\nif(ParameterPanel.DropDownTree)\nthis.onDropDownTree.fire(this,combo,paramTag.param);else\nthis.onDropDown.fire(this,combo,paramTag.param);}\nParameterPanel.prototype.addParamMultiCalendar=function(param){var pTag=this.newParamTag(param.id);this.setParamCaption(param,pTag);multiCalendar=this.setParamMultiCalendar(lang.parseJSON(param.componentDefine),pTag);var dateType=lang.parseJSON(param.componentDefine).dateType;pTag.param=param;pTag.control=multiCalendar;pTag.controlType=ParameterPanel.MultiCalendar;multiCalendar.paramTag=pTag;multiCalendar.onEditChanged.subscribe(this.doParamValueChange,this);multiCalendar.onFreqTypeChanged.subscribe(this.doFreqTypeChanged,this);multiCalendar.setReadOnly(!param.manual);if(multiCalendar.freqCombo){this.applyParameterFontTheme(multiCalendar.freqCombo.edit);}\nreturn multiCalendar;}\nParameterPanel.prototype.doFreqTypeChanged=function(calendar){if(calendar.edit){this.applyParameterFontTheme(calendar.edit);}}\nParameterPanel.prototype.doListDialogPopup=function(combo){var paramTag=combo.paramTag;var param=paramTag.param;if(!this.paramsInited[param.id]){if(param.componentType!=ParameterPanel.TreeDialog)\ncombo.clear();this.paramsInited[param.id]=true;}\nif(combo.itemsCount()<=0){if(param.componentType==ParameterPanel.TreeDialog){var parameterPanelId=param.clientId||this.clientId;combo.initTree(parameterPanelId);}else if(param.componentType==ParameterPanel.ListDialog){var paramValues=this.getParamStandbyValue(param.id,param.clientId);if(paramValues!=null){var noNull=lang.parseJSON(param.componentDefine).noNull;if(typeof(noNull)==\"string\")\nnoNull=(noNull==\"true\");if((!param.multSelect)&&noNull)\ncombo.insertItem(null,null);combo.insertItems(paramValues);combo.setSelectedItem(param.value);combo.inited=true;}}}}\nParameterPanel.prototype.getParamStandbyValue=function(paramId,clientId){if(this.manualParamStandByValues&&this.manualParamStandByValues[paramId]){return this.manualParamStandByValues[paramId];}\nvar parameterPanelId=clientId||this.clientId;var ret=util.remoteInvoke(\"ParameterPanelService\",\"getParamStandbyValue\",[parameterPanelId,paramId]);if(ret&&ret.succeeded){return ret.result;}else{modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");modalWindow.showServerError(ret);return null;}}\nParameterPanel.prototype.doParamValueChange=function(combo,oldId,newId,oldValue,newValue){var paramTag=combo.paramTag;var param=paramTag.param;var isAlertInfo=true;if(newId==\"\"){switch(param.componentType){case ParameterPanel.DropDownTree:isAlertInfo=false;break;case ParameterPanel.TreeDialog:isAlertInfo=false;break;case ParameterPanel.DateTimePicker:isAlertInfo=false;break;case ParameterPanel.MultiCalendar:isAlertInfo=false;break;}}\nif(!this.checkParamInputValid(param,newId)){if(isAlertInfo){var info=\"[\"+param.name+\"]输入类型不匹配!\"\nalert(info);}\nreturn;}\nswitch(param.componentType){case ParameterPanel.ComboBox:this.setParamValue(param.id,newId,newValue,param.clientId,true);this.onSelectChange.fire(this,param,oldId,newId,oldValue,newValue);break;case ParameterPanel.ListDialog:this.setParamValue(param.id,newId,newValue,param.clientId,true);this.onSelectChange.fire(this,param,oldId,newId,oldValue,newValue);break;case ParameterPanel.ListPanel:this.setParamValue(param.id,newId,newValue,param.clientId,true);this.onSelectChange.fire(this,param,oldId,newId,oldValue,newValue);break;case ParameterPanel.DropDownTree:this.setParamValue(param.id,newId,newValue,param.clientId,true);this.onSelectChange.fire(this,param,oldId,newId,oldValue,newValue);break;case ParameterPanel.TreeDialog:this.setParamValue(param.id,newId,newValue,param.clientId,true);this.onSelectChange.fire(this,param,oldId,newId,oldValue,newValue);break;case ParameterPanel.DateTimePicker:this.setParamValue(param.id,newId,newValue,param.clientId,true);this.onSelectChange.fire(this,param,oldId,newId,oldValue,newValue);break;case ParameterPanel.ReportDatePicker:this.setParamValue(param.id,newId,newValue,param.clientId,true);this.onSelectChange.fire(this,param,oldId,newId,oldValue,newValue);break;case ParameterPanel.FreqDatePicker:this.setParamValue(param.id,newId,newValue,param.clientId,true);this.onSelectChange.fire(this,param,oldId,newId,oldValue,newValue);break;case ParameterPanel.TextInput:this.setParamValue(param.id,newId,newValue,param.clientId,true);this.onSelectChange.fire(this,param,oldId,newId,oldValue,newValue);break;case ParameterPanel.OlapMemberParam:this.setParamValue(param.id,newId,newValue,param.clientId,true);this.onSelectChange.fire(this,param,oldId,newId,oldValue,newValue);break;case ParameterPanel.OlapMemberDialog:this.setParamValue(param.id,newId,newValue,param.clientId,true);this.onSelectChange.fire(this,param,oldId,newId,oldValue,newValue);break;case ParameterPanel.MultiCalendar:this.setParamValue(param.id,newId,newValue,param.clientId,true);this.onSelectChange.fire(this,param,oldId,newId,oldValue,newValue);break;}\nthis.clearSetParamValuesCompositeInvokeCache();}\nParameterPanel.prototype.doParamEditChange=function(combo,value,name){try{var paramTag=combo.paramTag;var param=paramTag.param;var isAlertInfo=true;switch(param.componentType){case ParameterPanel.DropDownTree:isAlertInfo=false;break;case ParameterPanel.TreeDialog:isAlertInfo=false;break;case ParameterPanel.DateTimePicker:isAlertInfo=false;break;case ParameterPanel.MultiCalendar:isAlertInfo=false;break;}\nif(!this.checkParamInputValid(param,value)){if(isAlertInfo){var info=\"[\"+param.name+\"]输入类型不匹配!\"\nalert(info);}\nreturn;}\nswitch(param.componentType){case ParameterPanel.ComboBox:this.setParamValue(param.id,value,name,param.clientId,true);this.onEditChange.fire(this,combo,param,value);break;case ParameterPanel.ListDialog:this.setParamValue(param.id,value,name,param.clientId,true);this.onEditChange.fire(this,combo,param,value);break;case ParameterPanel.DropDownTree:break;case ParameterPanel.TreeDialog:break;case ParameterPanel.DateTimePicker:break;case ParameterPanel.ReportDatePicker:this.onEditChange.fire(this,combo,param,value);break;case ParameterPanel.FreqDatePicker:this.setParamValue(param.id,value,value,param.clientId,true);this.onEditChange.fire(this,combo,param,value);break;case ParameterPanel.TextInput:break;case ParameterPanel.MultiCalendar:break;}}catch(e){}\nthis.clearSetParamValuesCompositeInvokeCache();}\nParameterPanel.prototype.doEditKeyup=function(ev){var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");ev=eventutil.getEvent();var code=ev.charCode;switch(code){case 13:try{ev.target.blur();ev.target.focus();}catch(e){}\nbreak;default:return code;}}\nParameterPanel.prototype.doTextInputMousedown=function(ev){var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");ev=eventutil.getEvent();if(ev&&ev.target)\nev.target.focus();}\nParameterPanel.prototype.doParamTextInputValueChange=function(ev){var obtain=ev.target;var paramTag=obtain.paramTag;var param=paramTag.param;if(!this.checkParamInputValid(param,obtain.value)){var info=\"[\"+param.name+\"]输入类型不匹配!\"\nalert(info);return;}\nthis.setParamValue(param.id,obtain.value,obtain.value,param.clientId,true);this.onSelectChange.fire(this,param,obtain.value,obtain.value,obtain.value,obtain.value);this.clearSetParamValuesCompositeInvokeCache();}\nParameterPanel.prototype.checkParamInputValid=function(param,inputValue){if(!param||!param.manual||(param.type==\"STRING\"))\nreturn true;if(param.componentType==ParameterPanel.FreqDatePicker&&inputValue!=null){inputValue=(inputValue.split(FreqDatePicker.VALUE_DELIMITER))[0];}\nif(inputValue==\"\")\nreturn true;var value;if(param.multSelect)\nvalue=inputValue.split(\",\");else\nvalue=new Array(inputValue);for(var i=0;i<value.length;i++){var tempValue=value[i];switch(param.type){case\"INTEGER\":if(!util.checkNumberString(tempValue,1))\nreturn false;break;case\"DOUBLE\":if(!util.checkNumberString(tempValue,2))\nreturn false;break;case\"DATE\":if(!util.checkDateTimeString(tempValue,1))\nreturn false;break;case\"TIME\":if(!util.checkDateTimeString(tempValue,2))\nreturn false;break;case\"DATETIME\":if(!util.checkDateTimeString(tempValue))\nreturn false;break;default:return true;}}\nreturn true;}\nParameterPanel.prototype.newParamTag=function(paramID){var c=this.getLayoutTableCell(paramID);var cellTable=document.createElement(\"table\");cellTable.className=\"cellTable\";cellTable.style.width=\"100%\";var r=cellTable.insertRow(-1);var cell_Alias=r.insertCell(-1);var cell_Control=r.insertCell(-1);cell_Control.noWrap=true;cell_Alias.className=\"cellAlias\";cell_Alias.noWrap=true;cell_Control.className=\"cellControl\";if(c!=null){if(c.titleAlign){cell_Alias.align=c.titleAlign;}\nc.appendChild(cellTable);}\nreturn cellTable;}\nParameterPanel.prototype.getLayoutTableCell=function(paramID){for(var i=0;i<this.paramLayout.length;i++){for(var j=0;j<this.paramLayout[i].length;j++){if(paramID==this.paramLayout[i][j].id||(paramID.indexOf(\"_SMARTBI_Dice_CustomerMember\")==0&&paramID.lastIndexOf(this.paramLayout[i][j].name+\"_\")!=-1)||(this.paramLayout[i][j].id.indexOf(\"BusinessViewCustomParameter\")==0&&paramID.lastIndexOf(this.paramLayout[i][j].name)!=-1)){var r=this.layoutTable.rows[i];var c=r.cells[j];return c;}}}\nreturn null;}\nParameterPanel.prototype.getLayoutTableLastRowIndex=function(){return this.layoutTable.rows.length-1;}\nParameterPanel.prototype.canAddCellInRow=function(rowIndex){var row=this.getLayoutTableRow(rowIndex);return((row!=null)&&(row.cells.length<this.tableCols));}\nParameterPanel.prototype.addLayoutTableRow=function(){return this.layoutTable.insertRow(-1);}\nParameterPanel.prototype.getLayoutTableRow=function(rowIndex){return this.layoutTable.rows[rowIndex];}\nParameterPanel.prototype.setParamCaption=function(param,paramTag){if(this.hiddenParamCaption){return;}\nvar noNull=lang.parseJSON(param.componentDefine).noNull;var r=paramTag.rows[0];var c=r.cells[0];var s=document.createElement(\"span\");c.appendChild(s);s.className=\"aliasSpan\";var text=(param.alias==\"\")?param.name:param.alias;if(!this.isReportPane){var define=lang.parseJSON(param.componentDefine);if(define.noTitle){text=\"\";}}\nif(param.componentType==ParameterPanel.OlapMemberParam||param.componentType==ParameterPanel.OlapMemberDialog){if(param.noTitle==true)\ntext=\"\";}\nthis.applyParameterFontTheme(s);if(noNull||text==\"\")\ns.innerHTML=text;else\ns.innerHTML=text+\"<font color='red'>*<\/font>\";return s;}\nParameterPanel.prototype.applyParameterFontTheme=function(target){var pageTheme=registry.get(\"pageTheme\");if(pageTheme&&pageTheme.page&&pageTheme.page.parameterFont){var fontSize=pageTheme.page.parameterFont.fontSize;var color=pageTheme.page.parameterFont.color;if(color){target.style.color=color;}\nif(fontSize){target.style.fontSize=fontSize;}}}\nParameterPanel.prototype.setIsReportPane=function(isReportPane){this.isReportPane=isReportPane;}\nParameterPanel.prototype.setParamComboBox=function(paramDefine,paramTag){var paramWidth=150;if(paramDefine&&paramDefine.width)\nparamWidth=paramDefine.width;var r=paramTag.rows[0];var c=r.cells[1];var combo=new ComboBox(c,this.untilEl,paramWidth);if(paramDefine&&paramDefine.dropWidth)\ncombo.setDropDownWidth(paramDefine.dropWidth);if(paramDefine&&paramDefine.dropHeight)\ncombo.setDropDownHeight(paramDefine.dropHeight);combo.setHightDomObject(this.getHightDomObject());return combo;}\nParameterPanel.prototype.setParamListDialog=function(paramDefine,paramTag){var paramWidth=150;if(paramDefine&&paramDefine.width)\nparamWidth=paramDefine.width;var r=paramTag.rows[0];var c=r.cells[1];var list=new ListDialog(c,this.untilEl,paramWidth);return list;}\nParameterPanel.prototype.setParamListPanel=function(paramDefine,paramTag){var paramWidth=150;if(paramDefine&&paramDefine.width)\nparamWidth=paramDefine.width;var r=paramTag.rows[0];var c=r.cells[0];c.style.width=paramDefine.panelAliasWidth;c=r.cells[1];var list=new ListPanel(c);return list;}\nParameterPanel.prototype.setParamDropDownTree=function(paramDefine,paramTag){var paramWidth=150;if(paramDefine&&paramDefine.width)\nparamWidth=paramDefine.width;var r=paramTag.rows[0];var c=r.cells[1];jsloader.resolveMany([\"freequery.control.DropDownTree\",\"freequery.control.DropDownTreePanel\",\"freequery.control.DropDownPanel\",\"freequery.tree.ParameterTree\",\"freequery.tree.TreeView\",\"freequery.tree.TreeNode\",\"freequery.tree.ParameterTreeNode\",\"freequery.common.modalWindow\",\"freequery.menu.PopupMenu\"]);var tree=new DropDownTree(c,this.untilEl,paramWidth);tree.setHightDomObject(this.getHightDomObject());tree.setDropDownWidth(paramDefine.dropWidth);tree.setDropDownHeight(paramDefine.dropHeight);tree.setLazyLoadChild(paramDefine.lazyLoadChild!==false);return tree;}\nParameterPanel.prototype.setParamTreeDialog=function(paramDefine,paramTag){var paramWidth=150;if(paramDefine&&paramDefine.width)\nparamWidth=paramDefine.width;var r=paramTag.rows[0];var c=r.cells[1];var tree=new TreeDialog(c,this.untilEl,paramWidth);return tree;}\nParameterPanel.prototype.setParamTextInput=function(paramDefine,paramTag){var paramWidth=150;if(paramDefine&&paramDefine.width)\nparamWidth=paramDefine.width;var r=paramTag.rows[0];var c=r.cells[1];var textInput=document.createElement(\"input\");textInput.type=\"text\";textInput.tmpType=\"textInput\";textInput.style.width=paramWidth;textInput.className=\"paramTextInput\";c.appendChild(textInput);return textInput;}\nParameterPanel.prototype.setParamOlapMember=function(param,paramTag){var paramWidth=150;var dropHeight=200;if(param&&param.displayWidth)\nparamWidth=param.displayWidth;var r=paramTag.rows[0];var c=r.cells[1];var tree=new OlapParamDropDownTree(c,paramWidth,this.untilEl);tree.paramPanel=this;if(param&&param.dropHeight)\ndropHeight=param.dropHeight;tree.setDropDownHeight(dropHeight);if(param&&param.dropWidth){tree.setDropDownWidth(param.dropWidth);}else{tree.setDropDownWidth(paramWidth);}\nreturn tree;}\nParameterPanel.prototype.setParamOlapMemberDialog=function(displayWidth,paramTag){var paramWidth=150;if(displayWidth)\nparamWidth=displayWidth;var r=paramTag.rows[0];var c=r.cells[1];var tree=new OlapParamMemberChoose(c,paramWidth,this.untilEl);tree.paramPanel=this;return tree;}\nParameterPanel.prototype.setParamDateTimePicker=function(paramDefine,paramTag){var paramWidth=150;if(paramDefine&&paramDefine.width)\nparamWidth=paramDefine.width;var r=paramTag.rows[0];var c=r.cells[1];var textDate=new DateTimePicker(c,paramWidth);return textDate;}\nParameterPanel.prototype.setParamReportDatePicker=function(paramDefine,paramTag){var paramWidth=150;if(paramDefine&&paramDefine.width)\nparamWidth=paramDefine.width;var r=paramTag.rows[0];var c=r.cells[1];var textDate=new ReportDatePicker(c,paramWidth);return textDate;}\nParameterPanel.prototype.setParamFreqDatePicker=function(paramDefine,paramTag){var paramWidth=150;if(paramDefine&&paramDefine.width)\nparamWidth=paramDefine.width;var freqType=255;if(paramDefine&&paramDefine.freqType){freqType=paramDefine.freqType;if(typeof freqType==\"string\")\nfreqType-=0;if(typeof freqType!=\"number\"||freqType<1||freqType>255)\nfreqType=255;}\nvar items=[\"YEAR\",\"HALFYEAR\",\"QUARTER\",\"MONTH\",\"TENDAYS\",\"WEEK\",\"FIVEDAYS\",\"DAY\"];var list=new Array();for(var i=0;i<items.length;i++){var k=Math.pow(2,i)&freqType;if(k!=0)\nlist.push(items[i]);}\nvar r=paramTag.rows[0];var c=r.cells[1];var textDate=new FreqDatePicker(c,paramWidth,null,list);return textDate;}\nParameterPanel.prototype.setParamMultiCalendar=function(paramDefine,paramTag){var paramWidth=175;if(paramDefine&&paramDefine.width)\nparamWidth=paramDefine.width;var multiCalendarType=255;if(paramDefine&&paramDefine.multiCalendarType){multiCalendarType=paramDefine.multiCalendarType;if(typeof multiCalendarType==\"string\")\nmultiCalendarType-=0;if(typeof multiCalendarType!=\"number\"||multiCalendarType<1||multiCalendarType>127)\nmultiCalendarType=255;}\nvar items=[\"Year\",\"HalfYear\",\"Quarter\",\"Month\",\"TenDay\",\"Week\",\"Date\"];var list=new Array();for(var i=0;i<items.length;i++){var k=Math.pow(2,i)&multiCalendarType;if(k!=0)\nlist.push(items[i]);}\nvar r=paramTag.rows[0];var c=r.cells[1];var multiCalendar=new MultiCalendar(c,list,1,false);return multiCalendar;}\nParameterPanel.prototype.clear=function(){if(null==this.paramObjList)\nreturn;var paramCount=this.paramObjList.length;for(var i=0;i<paramCount;i++)\n{var p=this.paramObjList.pop();if(p.tmpType&&p.tmpType==\"textInput\"){if(p.paramTag)\np.paramTag=null;}else{p.destroy();p.paramTag=null;}\np=null;}\nvar len=this.layoutTable.rows.length;for(var i=len-1;i>=0;i--)\n{this.layoutTable.deleteRow(i);}\nthis.currentRow=null;this.initParamLayout=false;}\nParameterPanel.prototype.getParamTagByParamId=function(paramId){var tr=this.layoutTable.tBodies[0]&&this.layoutTable.tBodies[0].firstChild;while(tr){var td=tr.firstChild;while(td){var pTag=td.getElementsByTagName(\"table\")[0];if(pTag){var p=pTag.param;if((p!=null)&&(p.id==paramId))\nreturn pTag;}\ntd=td.nextSibling;}\ntr=tr.nextSibling;}};ParameterPanel.prototype.getParamTagByParamName=function(paramName){var p=this.findParamByName(paramName);if(p){return this.getParamTagByParamId(p.id);}else{return null;}};ParameterPanel.prototype.setParamValue=function(paramId,value,alias,clientId,isInner){var parameterPanelId=clientId||this.clientId;if(!parameterPanelId)\nreturn;if(value==undefined)\nvalue=null;if(alias==undefined)\nalias=null;if(this.autoCommit==false){var paramBean={id:paramId,value:value,displayValue:alias,clientId:parameterPanelId};this.notCommitedParamBeans.push(paramBean);if(parameterPanelId!=this.notCommitedParamBeans[0].clientId){throw new Error('Could not setParamValue with different ParameterPanel-Client-ID while autocommit is false');this.notCommitedParamBeans=new Array();}\nreturn;}\nvar pTag=this.getParamTagByParamId(paramId);if(pTag){var newAlias=alias;this.setParamCtrlValue(pTag,value,newAlias);}\nvar c=util.findResultFromInvokerCache(\"ParameterPanelService\",\"setParamValue\",[parameterPanelId,paramId,value,alias]);if(!c&&!!isInner){this.setParamValuesCompositeInvoke([parameterPanelId,paramId,value,alias]);}\nvar ret=util.remoteInvoke(\"ParameterPanelService\",\"setParamValue\",[parameterPanelId,paramId,value,alias]);if(ret&&ret.succeeded){this.paramValues[paramId]={value:value,displayValue:alias};var param=this.getParam(paramId)||{clientId:parameterPanelId,id:paramId};if(this.enableResetRelateParamsValue){this.resetRelateParamsValue(param);}\nif(!c&&!!isInner){if(this.setParamValuesCompositeInvokeArrays!=undefined&&this.setParamValuesCompositeInvokeArrays!=null&&this.setParamValuesCompositeInvokeArrays.length==4){this.clearSetParamValuesCompositeInvokeCache();}}\nreturn ret.result;}else{modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");modalWindow.showServerError(ret);}}\nParameterPanel.prototype.setParamValuesCompositeInvoke=function(params){this.setParamValuesCompositeInvokeArrays=params;util.compositeInvoke(\"setParamValuesWithRelated\",params);}\nParameterPanel.prototype.clearSetParamValuesCompositeInvokeCache=function(){util.clearCompositeInvokeCache(\"setParamValuesWithRelated\",this.setParamValuesCompositeInvokeArrays);}\nParameterPanel.prototype.getPanelParamValues=function(){for(var i=0;i<this.paramObjList.length;i++){var paramTag=this.paramObjList[i].paramTag;var param=paramTag.param;this.paramValues[param.id]={value:param.value,displayValue:param.displayValue};}\nreturn this.paramValues;}\nParameterPanel.prototype.getServerParamValueAndDisplayValue=function(paramId,clientId){var parameterPanelId=clientId||this.clientId;if(!parameterPanelId)\nreturn;var ret=util.remoteInvoke(\"ParameterPanelService\",\"getParameterValue\",[parameterPanelId,paramId]);if(ret&&ret.succeeded){return ret.result;}}\nParameterPanel.prototype.setEnableResetRelateParamsValue=function(enabled){this.enableResetRelateParamsValue=enabled!==false;};ParameterPanel.prototype.getEnableResetRelateParamsValue=function(){return this.enableResetRelateParamsValue;};ParameterPanel.prototype.setParamCtrlValue=function(pTag,value,alias){if(!pTag)\nreturn;if(pTag.param){if(util.isOLAPParam(pTag.param)){pTag.param.currentValue=value;pTag.param.currentDisplayValue=alias;}else{pTag.param.value=value;pTag.param.displayValue=alias;}}\nvar controlType=pTag.controlType;var control=pTag.control;switch(controlType){case ParameterPanel.ComboBox:control.setSelectedItem(value,alias,false);break;case ParameterPanel.ListDialog:control.setSelectedItem(value,alias,false);break;case ParameterPanel.ListPanel:control.setSelectedItem(value,alias,false);break;case ParameterPanel.DropDownTree:control.setSelectedItem(value,alias,false);break;case ParameterPanel.TreeDialog:control.setSelectedItem(value,alias,false);break;case ParameterPanel.DateTimePicker:control.setValue(value);break;case ParameterPanel.ReportDatePicker:control.setValue(value);break;case ParameterPanel.FreqDatePicker:control.setValue(value);break;case ParameterPanel.TextInput:control.value=value;break;case ParameterPanel.OlapMemberParam:control.setCurrentValue(value,alias);if(value==\"[NULL]\"){control.setEnabled(false);}else{control.setEnabled(true);}\nbreak;case ParameterPanel.OlapMemberDialog:control.setCurrentValue(value,alias);break;case ParameterPanel.MultiCalendar:control.setValue(value);break;}}\nParameterPanel.prototype.resetRelateParamsValue=function(param){var parameterPanelId=param.clientId||this.clientId;var rt=util.remoteInvokeEx(\"ParameterPanelService\",\"getRelatedOutputParameterIdList\",[parameterPanelId,param.id]);if(rt.succeeded&&rt.result){rt=rt.result;for(var i=0;i<rt.length;i++){var tmpParamId=rt[i];this.resetRelateParamsValueEx(tmpParamId);var values=this.getParamDefaultValue(tmpParamId,parameterPanelId);if(!values||values.length<1){if(!values)\nvalues=new Array();values[0]=\"[NULL]\";values[1]=\"[NULL]\";}\nvar notSetValue=true;for(var j=0;j<this.notCommitedParamBeans.length;j++){var paramBean=this.notCommitedParamBeans[j];if(paramBean.id==tmpParamId){notSetValue=false;}}\nvar tmpParam=this.getParam(tmpParamId);if(tmpParam&&tmpParam.componentType==\"LISTPANEL\"){var pTag=this.getParamTagByParamId(tmpParamId);var control=pTag.control;control.resetPanel();}\nif(tmpParam&&tmpParam.componentType==\"DROPDOWNTREE\"){var parameterPanelId=param.clientId||this.clientId;var noNull=false;if(param&&param.componentDefine)\nnoNull=lang.parseJSON(param.componentDefine).noNull;if(typeof(noNull)==\"string\"){noNull=(noNull==\"true\");}\nvar pTag=this.getParamTagByParamId(tmpParamId);var control=pTag.control;control.initTree(parameterPanelId,noNull);}\nif(notSetValue){this.setParamValue(tmpParamId,values[0],values[1],parameterPanelId,true);this.onResetRelateParamsValue.fire(tmpParamId,values[0],values[1],parameterPanelId);}\nif(this.paramsInited[tmpParamId])\nthis.paramsInited[tmpParamId]=false;if(tmpParam){if(tmpParam.paramType&&tmpParam.paramType==\"OLAP\"){if(values[0]==\"[NULL]\")\nthis.setEnabled(tmpParamId,false);else\nthis.setEnabled(tmpParamId,true);}\nthis.onSelectChange.fire(this,tmpParam,values[0],values[0],values[1],values[1],\"RELATEPARAM\");}}}}\nParameterPanel.prototype.resetRelateParamsValueEx=function(tmpParamId){}\nParameterPanel.prototype.getParamValue=function(paramId){var pTag=this.getParamTagByParamId(paramId);if(pTag)\n{var controlType=pTag.controlType;var control=pTag.control;switch(controlType){case ParameterPanel.ComboBox:return control.getSelectedId();case ParameterPanel.ListDialog:return control.getSelectedId();case ParameterPanel.ListPanel:return control.getSelectedId();case ParameterPanel.DropDownTree:return control.getSelectedId();case ParameterPanel.TreeDialog:return control.getSelectedId();case ParameterPanel.DateTimePicker:return control.getValue();case ParameterPanel.ReportDatePicker:return control.getValue();case ParameterPanel.FreqDatePicker:return control.getValue();case ParameterPanel.TextInput:return control.value;case ParameterPanel.OlapMemberParam:return control.getSelectedObject();case ParameterPanel.OlapMemberDialog:return control.getSelectedId();case ParameterPanel.MultiCalendar:return control.getValue();}}};ParameterPanel.prototype.getParamDisplayValue=function(paramId){var pTag=this.getParamTagByParamId(paramId);if(pTag)\n{var controlType=pTag.controlType;var control=pTag.control;switch(controlType){case ParameterPanel.ComboBox:return control.selectedValue?control.selectedValue:control.getSelectedId();case ParameterPanel.ListDialog:return control.getSelectedText();case ParameterPanel.ListPanel:return control.getSelectedText();case ParameterPanel.DropDownTree:return control.getSelectedText();case ParameterPanel.TreeDialog:return control.getSelectedText();case ParameterPanel.DateTimePicker:return control.getValue();case ParameterPanel.ReportDatePicker:return control.getValue();case ParameterPanel.FreqDatePicker:return control.getValue();case ParameterPanel.TextInput:return control.value;case ParameterPanel.OlapMemberParam:return control.getSelectedText();case ParameterPanel.OlapMemberDialog:return control.getSelectedText();case ParameterPanel.MultiCalendar:return control.getText();}}}\nParameterPanel.prototype.setEnabled=function(paramId,enable){var pTag=this.getParamTagByParamId(paramId);if(pTag)\n{var controlType=pTag.controlType;var control=pTag.control;switch(controlType){case ParameterPanel.ComboBox:control.setEnabled(enable);break;case ParameterPanel.ListDialog:control.setEnabled(enable);break;case ParameterPanel.ListPanel:control.setEnabled(enable);break;case ParameterPanel.DropDownTree:control.setEnabled(enable);break;case ParameterPanel.TreeDialog:control.setEnabled(enable);break;case ParameterPanel.DateTimePicker:control.setEnabled(enable);break;case ParameterPanel.ReportDatePicker:control.setEnabled(enable);break;case ParameterPanel.FreqDatePicker:control.setEnabled(enable);break;case ParameterPanel.TextInput:control.disabled=!enable;break;case ParameterPanel.MultiCalendar:control.setEnabled(enable);break;}}}\nParameterPanel.prototype.setHightDomObject=function(hightDomObj){this.hightDomObj=hightDomObj;}\nParameterPanel.prototype.getHightDomObject=function(){return this.hightDomObj;}\nParameterPanel.prototype.getParamDefaultValue=function(paramId,clientId){var parameterPanelId=clientId||this.clientId;var ret=util.remoteInvoke(\"ParameterPanelService\",\"getParamDefaultValue\",[parameterPanelId,paramId]);if(ret&&ret.succeeded){return ret.result;}else{modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");modalWindow.showServerError(ret);}}\nParameterPanel.prototype.getOlapParamDefaultValue=function(paramId,clientId){var parameterPanelId=clientId||this.clientId;var ret=util.remoteInvoke(\"ParameterPanelService\",\"getOlapParamDefaultValue\",[parameterPanelId,paramId]);if(ret&&ret.succeeded){return ret.result;}else{modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");modalWindow.showServerError(ret);}}\nParameterPanel.prototype.getParamDisplayValueByValue=function(paramId,value,alias,clientId){var pTag=this.getParamTagByParamId(paramId);if(pTag){var controlType=pTag.controlType;var control=pTag.control;switch(controlType){case ParameterPanel.ComboBox:case ParameterPanel.ListDialog:case ParameterPanel.ListPanel:case ParameterPanel.DropDownTree:case ParameterPanel.TreeDialog:if(!this.paramStandbyValue)\nthis.paramStandbyValue=new Array();if(!this.paramStandbyValue[paramId])\nthis.paramStandbyValue[paramId]=this.getParamStandbyValue(paramId,clientId);var paramValues=this.paramStandbyValue[paramId];for(indx in paramValues){var paramValue=paramValues[indx];if(util.trim(paramValue[0])==util.trim(value)){return paramValue[1];}}\ndefault:return value;}}\nreturn value;}\nParameterPanel.prototype.getVisibleParamCount=function(){var ret=0;for(var i=0;i<this.paramObjList.length;i++){var paramTag=this.paramObjList[i].paramTag;var param=paramTag.param;if(paramTag.style.display!=\"none\"){ret++;}}\nreturn ret;}\nParameterPanel.prototype.hiddenParameterById=function(paramId){for(var i=0;i<this.paramObjList.length;i++){var paramTag=this.paramObjList[i].paramTag;var param=paramTag.param;if(param.id==paramId){paramTag.style.display=\"none\";break;}}};ParameterPanel.prototype.hiddenParameterByName=function(paramName){var p=this.findParamByName(paramName);if(p){this.hiddenParameterById(p.id);}};ParameterPanel.prototype.setParamDisplayStyle=function(param,display){for(var i=0;i<this.paramObjList.length;i++){var paramTag=this.paramObjList[i].paramTag;var parameter=paramTag.param;if(param.name==parameter.name){if(display)\nparamTag.style.display=\"block\";else\nparamTag.style.display=\"none\";}}}\nParameterPanel.prototype.allParamsIsHidden=function(){if(!this.paramObjList)\nreturn true;for(var i=0;i<this.paramObjList.length;i++){var paramTag=this.paramObjList[i].paramTag;if(paramTag&&paramTag.style.display!=\"none\"){return false;}}\nreturn true;}\nvar IPadComboBox=imports(\"ext.IPad.IPadComboBox\");var IPadDatePicker=imports(\"ext.IPad.IPadDatePicker\");ParameterPanel.prototype.addParamComboBox=function(param){var pTag=this.newParamTag(param.id);this.setParamCaption(param,pTag);var combo=this.setParamComboBox(lang.parseJSON(param.componentDefine),pTag,param);pTag.param=param;pTag.control=combo;pTag.controlType=ParameterPanel.ComboBox;combo.setNeedCheckBox(param.multSelect);combo.needChecked=(param.checkedInStandby==\"true\");combo.setReadOnly(!param.manual);combo.paramTag=pTag;combo.ondropDown.subscribe(this.doComboDropDown,this);combo.onselectChange.subscribe(this.doParamValueChange,this);combo.oneditChange.subscribe(this.doParamEditChange,this);return combo;}\nParameterPanel.prototype.setParamComboBox=function(paramDefine,paramTag,param){var paramWidth=150;if(paramDefine&&paramDefine.width)\nparamWidth=paramDefine.width;var r=paramTag.rows[0];var c=r.cells[1];var combo=null;var userAgent=navigator.userAgent;var index=userAgent.indexOf(\"Android \");var androidVer=null;if(index>0){index+=\"Android \".length;var endIndex=userAgent.indexOf('.',index);androidVer=userAgent.substring(index,endIndex).trim();}\nif(androidVer!=\"3\"&&domutils.isMobile()&&!param.multSelect){combo=new IPadComboBox(c,this.untilEl,paramWidth);}else{jsloader.resolveMany([\"freequery.control.ComboBox\",\"freequery.control.DropDownBox\",\"freequery.control.DropDownPanel\"]);combo=new ComboBox(c,this.untilEl,paramWidth);}\nif(paramDefine&&paramDefine.dropWidth)\ncombo.setDropDownWidth(paramDefine.dropWidth);if(paramDefine&&paramDefine.dropHeight)\ncombo.setDropDownHeight(paramDefine.dropHeight);combo.setHightDomObject(this.getHightDomObject());return combo;}\nParameterPanel.prototype.resetRelateParamsValue_smi=ParameterPanel.prototype.resetRelateParamsValue;ParameterPanel.prototype.resetRelateParamsValueEx=function(tmpParamId){var pTag=this.getParamTagByParamId(tmpParamId);if(pTag&&pTag.control&&pTag.control.iPadComboBox)\n{var combo=pTag.control;combo.clear();var paramValues=this.getParamStandbyValue(pTag.param.id,pTag.param.clientId);if(!paramValues){return false;}\nif(paramValues!=null){var noNull=lang.parseJSON(pTag.param.componentDefine).noNull;if(typeof(noNull)==\"string\")\nnoNull=(noNull==\"true\");combo.insertItems(paramValues);}\ncombo.inited=true;}}\nParameterPanel.prototype.__addParamDateTimePick=ParameterPanel.prototype.addParamDateTimePick;ParameterPanel.prototype.addParamDateTimePick=function(param){var dateType=lang.parseJSON(param.componentDefine).dateType;if(window.bof_offline_xhr){return this.addParamComboBox(param);}\nif(dateType=='DATE'&&param.paramType==\"PAGE\"&&domutils.isIOS()&&navigator.userAgent.match(/OS [5-9]_\\d/)){var pTag=this.newParamTag(param.id);this.setParamCaption(param,pTag);var textDate=this.setIPadDateTimePicker(lang.parseJSON(param.componentDefine),pTag);textDate.setType(dateType);textDate.setDateType(param.type);pTag.param=param;pTag.control=textDate;pTag.controlType=ParameterPanel.DateTimePicker;textDate.paramTag=pTag;textDate.onselectChange.subscribe(this.doParamValueChange,this);textDate.oneditChange.subscribe(this.doParamEditChange,this);textDate.setReadOnly(!param.manual);return textDate;}\nreturn this.__addParamDateTimePick(param);}\nParameterPanel.prototype.setIPadDateTimePicker=function(paramDefine,paramTag){var paramWidth=150;if(paramDefine&&paramDefine.width)\nparamWidth=paramDefine.width;var r=paramTag.rows[0];var c=r.cells[1];var textDate=new IPadDatePicker(c,paramWidth);return textDate;}\nParameterPanel.prototype.__doComboDropDown=ParameterPanel.prototype.doComboDropDown;ParameterPanel.prototype.doComboDropDown=function(combo){this.__doComboDropDown(combo);var paramTag=combo.paramTag;var param=paramTag.param;if(combo.itemsCount()<=0){if(param.componentType==\"DATETIMEPICK\"){var paramValues=this.getParamStandbyValue(param.id,param.clientId);if(!paramValues){return false;}\nif(paramValues!=null){var noNull=lang.parseJSON(param.componentDefine).noNull;if(typeof(noNull)==\"string\")\nnoNull=(noNull==\"true\");if((!param.multSelect)&&noNull)\ncombo.insertItem(null,null);combo.insertItems(paramValues);combo.setChecked(param.value);}\ncombo.inited=true;}}}\nParameterPanel.prototype.__applyParameterFontTheme=ParameterPanel.prototype.applyParameterFontTheme;ParameterPanel.prototype.applyParameterFontTheme=function(target){if(target.type=='date'){return;}\nthis.__applyParameterFontTheme(target);};ParameterPanel.prototype.setParamValuesCompositeInvoke=function(params){if(!window.bof_offline_xhr){this.setParamValuesCompositeInvokeArrays=params;util.compositeInvoke(\"setParamValuesWithRelated\",params);}}\nParameterPanel.prototype.clearSetParamValuesCompositeInvokeCache=function(){if(!window.bof_offline_xhr){util.clearCompositeInvokeCache(\"setParamValuesWithRelated\",this.setParamValuesCompositeInvokeArrays);}}\nParameterPanel.prototype.doParamChangeNext=function(pId){var combox=this.paramObjList[0];if(pId){var pTag=this.getParamTagByParamId(pId);if(pTag)\ncombox=pTag.control;}\nvar index=this.getComboxCurrentIndex(combox);if(index!=-1){index++;var oldId=combox.getSelectedId();var oldValue=combox.getSelectedText();var paramId=combox.paramTag.param.id;var paramValues=this.paramStandbyValue[paramId];if(index<paramValues.length){this.doParamValueChange(combox,oldId,paramValues[index][0],oldValue,paramValues[index][1]);}}}\nParameterPanel.prototype.doParamChangePrev=function(pId){var combox=this.paramObjList[0];if(pId){var pTag=this.getParamTagByParamId(pId);if(pTag)\ncombox=pTag.control;}\nvar index=this.getComboxCurrentIndex(combox);if(index!=-1){index--;var oldId=combox.getSelectedId();var oldValue=combox.getSelectedText();var paramId=combox.paramTag.param.id;var paramValues=this.paramStandbyValue[paramId];if(index>=0){this.doParamValueChange(combox,oldId,paramValues[index][0],oldValue,paramValues[index][1]);}}}\nParameterPanel.prototype.getComboxCurrentIndex=function(combox){var index=-1;if(combox&&(combox.paramTag.controlType==ParameterPanel.ComboBox||combox.pTag.control.iPadComboBox)){var oldId=combox.getSelectedId();var oldValue=combox.getSelectedText();var paramId=combox.paramTag.param.id;var panelId=this.clientId;this.getParamDisplayValueByValue(paramId,\"\",\"\",panelId);var paramValues=this.paramStandbyValue[paramId];for(var i=0;i<paramValues.length;i++){if(paramValues[i][0]==oldId){index=i;break;}}}\nreturn index;}","js/freequery/query/QueryViewCommand.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var util=jsloader.resolve(\"freequery.common.util\");var modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var dialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var QueryNavigator=jsloader.resolve(\"freequery.query.QueryNavigator\");var QueryView=null;var FrameView=imports(\"freequery.common.FrameView\");var QueryViewCommand=function(){if(window.__Portlet_is_hybrid){this.parent=null;this.treePane=null;}else{this.parent=document.getElementById('rigthContent');this.treePane=document.getElementById('leftCatalogTree');}\nthis.queryViewOpened=false;this.btnStatus=new Array();this.queryNavigator=new QueryNavigator(this);this.lockToolBar=false;this.onClose=new CustomEvent(\"onClose\",this);this.fieldsToDisplayInTheBeginning=null;};lang.extend(QueryViewCommand,Module);QueryViewCommand.prototype.destroy=function(){if(this.queryNavigator){this.queryNavigator.destroy();this.queryNavigator=null;}\nthis.catalogTree=null;this.queryViewOpened=null;this.onClose=null;QueryViewCommand.superclass.destroy.call(this);if(this.portalObj&&this.portalObj.reportList){this.portalObj.removeQuery(this.query);}\nthis.unLoadFrameView();};QueryViewCommand.prototype.setCommandFactoryName=function(commandFactoryName){this.commandFactoryName=commandFactoryName;this.isBrowseModule=(\"QueryBrowserCommandFactory\"==this.commandFactoryName||/^CatalogDisplayCommandFactory/.test(this.commandFactoryName));if(this.isBrowseModule){this.btnStatus['btnLocate']=\"none\";}\nif(\"QueryBrowserCommandFactory\"==this.commandFactoryName){this.catalogTree=registry.get(\"QueryBrowserTree\");}\nif(\"DisplayCustomCommandFactory\"==this.commandFactoryName){this.catalogTree=registry.get(\"DisplayCustomTree\");}};QueryViewCommand.prototype.execute=function(action,node){switch(action){case\"CREATE\":if(typeof node==\"undefined\"){this.folderNode=null;this.chooseBusinessView(\"DEFAULT_TREENODE\");}else{if(node._type==\"DEFAULT_TREENODE\"||node._type==\"SELF_TREENODE\"){this.folderNode=node;this.chooseBusinessView(node._id);}else if(node._type==\"BUSINESS_VIEW\"||node._type==\"TEXT_BUSINESS_VIEW\"||node._type==\"RAWSQL_BUSINESS_VIEW\"||node._type==\"PROC_BUSINESS_VIEW\"||node._type==\"JAVA_BUSINESS_VIEW\"){this.folderNode=node.parentNode;this.createQuery(node._id,node);}}\nbreak;case\"OPEN\":this.queryNavigator.clear();this.open(node._id,node._type,null,null,null,null,node.paramsSetByUrl);if(this.frame){if(node.getNodePath){this.frame.setFrameTitleLocal(node.getNodePath());this.frame.setFrameTitle(node._alias);}else{try{var pathandname=util.getCatalogNodeLocation(node._id);this.frame.setFrameTitleLocal(pathandname[0]);this.frame.setFrameTitle(pathandname[1]);}catch(e){}}}\nbreak;case\"SAVE\":break;case\"NAVIGATE\":this.open(node._id,node._type,true,node._fieldDatas,node._relatedFields,node._srcClientId);break;default:alert(\"Wrong action type\");break;}};QueryViewCommand.prototype.setPortalInfo=function(openRefresh,hidetoolbar,portalObj){this.isOpenInPortalPage=true;this.openRefresh=openRefresh;this.hidetoolbar=hidetoolbar;this.portalObj=portalObj;};QueryViewCommand.prototype.chooseBusinessView=function(nodeId){var data=new Array();data.push(nodeId);var dialogConfig={};dialogConfig.title=\"选择业务查询\";dialogConfig.forceCallback=true;dialogConfig.fullName=\"freequery.query.ChooseBusinessViewDialog\";dialogConfig.size=dialogFactory.size.MIDDLE;dialogFactory.showDialog(dialogConfig,data,this.createQuery,this);};QueryViewCommand.prototype.createQuery=function(businessViewId,node){if(typeof businessViewId==\"undefined\"){if(!this.queryViewOpened)\nthis.onClose.fire(this);return;}\nif(this.frame)\nthis.frame.setFrameTitle(\"新建灵活分析\");this.createQueryObj();this.queryNavigator.addQuery(this.query);this.query.render();if(this.catalogTree)\n{this.catalogTree.onSelectNode.subscribe(this.addField,this);}\nif(!this.folderNode&&node){this.folderNode=node.parentNode;}\nvar folderNodeData=this.folderNode?{id:this.folderNode._id,text:this.folderNode.text}:null;this.folderNode=null;this.query.initFromBizView(businessViewId,folderNodeData,this.fieldsToDisplayInTheBeginning);if(!(node&&node._isPreview)){this.btnStatus['btnSave']=\"\";this.btnStatus['btnSaveAs']=\"\";}\nthis.setBtnStatus();this.queryViewOpened=true;};QueryViewCommand.prototype.createQueryObj=function(id){this.query=this.queryNavigator.borrowQueryView(this.parent,id);if(null==this.query){return;}\nthis.query.onRefreshTreeNode.subscribe(this.doRefreshTreeNode,this);this.query.onClose.subscribe(this.doClose,this);if(this.portalObj&&this.portalObj.reportList){this.portalObj.reportList.push(this.query);}}\nQueryViewCommand.prototype.create=function(args){this.createQueryObj();this.queryNavigator.addQuery(this.query);this.query.render();this.query.show();this.setBtnStatus();if(this.catalogTree)\nthis.catalogTree.onSelectNode.subscribe(this.addField,this);this.queryViewOpened=true;}\nQueryViewCommand.prototype.open=function(id,type,isNavigate,fieldDatas,relatedFields,srcClientId,paramsSetByUrl){if(type==\"SIMPLE_REPORT\"){if(!window.__QueryView_is_hybrid){util.compositeInvoke(\"openSimpleReport\",[id]);}\nvar accessible=false;if(window.__Portlet_is_hybrid){accessible=(\"true\"==this.parent.getAttribute(\"__accessible\"));}else{var ret=util.remoteInvoke(\"UserService\",\"isCurUserFuncTypeAccessible\",[\"CUSTOM_DISPLAYCUSTOM_FLEXIBLEREPORT\"]);if(!ret.result)\nret=util.remoteInvoke(\"UserService\",\"isCurUserFuncTypeAccessible\",[\"BROWSE_FLEXIBLEREPORT\"]);if(!ret.result)\nret=util.remoteInvoke(\"UserService\",\"isCurUserFuncTypeAccessible\",[\"DASHBOARD\"]);accessible=ret.result;}\nif(!accessible){alert(\"您没有权限访问灵活分析!\",null,modalWindow.MB_OK|modalWindow.MB_ICONERROR);this.onClose.fire(this);return;}\nvar writable=false;if(window.__Portlet_is_hybrid){writable=(\"true\"==this.parent.getAttribute(\"__writable\"));}else{var ret=util.remoteInvoke(\"CatalogService\",\"isCatalogElementAccessible\",[id,\"WRITE\"]);writable=ret.succeeded&&ret.result;}\nif(this.parent&&this.parent.firstChild&&this.parent.firstChild.firstChild&&this.parent.firstChild.firstChild.boftype==\"msg\"){return;}\nif(writable){this.btnStatus['btnSave']=this.isBrowseModule?\"none\":\"\";}else{this.btnStatus['btnSave']=\"none\";}\nthis.createQueryObj(id);if(null==this.query){this.onClose.fire(this);return;}\nvar skipRender=window.__QueryView_is_hybrid&&!this.query.__isBorrowed;this.queryNavigator.addQuery(this.query,skipRender);this.query.isBrowseModule=this.isBrowseModule;if(!skipRender){this.query.render();this.query.hide();}\nif(this.catalogTree)\n{this.catalogTree.onSelectNode.subscribe(this.addField,this);}\nthis.query.portalObj=this.portalObj;this.query.openQueryView(id,paramsSetByUrl);if(!this.query.clientId)\nreturn;if(relatedFields)\nthis.addRelatedExtraFields(fieldDatas,relatedFields,srcClientId);else\nthis.addExtraFields(fieldDatas);this.queryViewOpened=true;this.setBtnStatus();if(this.isOpenInPortalPage){if(this.hidetoolbar){this.query.toolbarLay.style.display=\"none\";this.query.shortcut.style.display=\"none\";}else{this.query.toolbarLay.style.display=\"\";}\nif(this.portalObj&&this.portalObj.isReplace){}\nelse if(this.openRefresh&&!isNavigate){var isRefresh=true;if(this.portalObj){if(this.portalObj.isDp){if(!this.portalObj.isFromView&&this.portalObj.isReplace){isRefresh=false;}}}\nif(isRefresh){this.query.needRefreshCharts=true;this.query.refreshDataSync();}else{this.query.readyForUse=true;}}else{this.query.readyForUse=true;}}\nelse if(this.isBrowseModule){var refresh=false;if(this.query.clientConfig.gridProp.browseAutoRefresh>0){refresh=true;}\nelse if(this.query.clientConfig.gridProp.browseAutoRefresh!=0){var ret=util.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfig\",[\"REPORT_BROWSE_AUTO_REFRESH\"]);if(ret&&ret.result)\nrefresh=(ret.result.value==\"true\")?true:false;}\nif(refresh){this.query.needRefreshCharts=true;this.query.refreshDataSync();}}\nthis.query.show();util.clearCompositeInvokeCache(\"openSimpleReport\",[id]);}}\nQueryViewCommand.prototype.setBtnStatus=function(){if(this.btnStatus['btnBackward'])\nthis.query.btnBackward.parentNode.style.display=this.btnStatus['btnBackward'];if(this.btnStatus['btnForward'])\nthis.query.btnForward.parentNode.style.display=this.btnStatus['btnForward'];if(this.btnStatus['btnSave'])\nthis.query.btnSave.parentNode.style.display=this.btnStatus['btnSave'];if(this.btnStatus['btnSaveAs'])\nthis.query.btnSaveAs.parentNode.style.display=this.btnStatus['btnSaveAs'];if(this.btnStatus['btnMyFavorite'])\nthis.query.btnMyFavorite.parentNode.style.display=this.btnStatus['btnMyFavorite'];if(this.btnStatus['btnRefresh'])\nthis.query.btnRefresh.parentNode.style.display=this.btnStatus['btnRefresh'];if(this.btnStatus['btnPrint'])\nthis.query.btnPrint.parentNode.style.display=this.btnStatus['btnPrint'];if(this.btnStatus['btnExport'])\nthis.query.btnExport.parentNode.style.display=this.btnStatus['btnExport'];if(this.btnStatus['btnChart'])\nthis.query.btnChart.parentNode.style.display=this.btnStatus['btnChart'];if(this.btnStatus['btnView'])\nthis.query.btnView.parentNode.style.display=this.btnStatus['btnView'];if(this.btnStatus['btnSelectField'])\nthis.query.btnSelectField.parentNode.style.display=this.btnStatus['btnSelectField'];if(this.btnStatus['btnSubtotal'])\nthis.query.btnSubtotal.parentNode.style.display=this.btnStatus['btnSubtotal'];if(this.btnStatus['btnReportParam'])\nthis.query.btnReportParam.parentNode.style.display=this.btnStatus['btnReportParam'];if(this.btnStatus['btnQueryViewSetting'])\nthis.query.btnQueryViewSetting.parentNode.style.display=this.btnStatus['btnQueryViewSetting'];if(this.btnStatus['btnLocate']){this.query.btnLocate.parentNode.style.display=this.btnStatus['btnLocate'];this.query.space5.parentNode.style.display=this.btnStatus['btnLocate'];}\nif(this.btnStatus['btnReportHeader'])\nthis.query.btnReportHeader.parentNode.style.display=this.btnStatus['btnReportHeader'];if(this.btnStatus['btnReportTail'])\nthis.query.btnReportTail.parentNode.style.display=this.btnStatus['btnReportTail'];if(this.btnStatus['outerTable'])\nthis.query.outerTable.parentNode.style.tableLayout=this.btnStatus['outerTable'];if(this.lockToolBar){this.query.content.style.overflow=\"auto\";this.query.content.style.height=\"100%\";this.query.content.style.width=\"100%\";}\nthis.operationFilter();}\nQueryViewCommand.prototype.operationFilter=function(){function setDisplay(el,functionCode){var visible=false;if(el&&el.parentNode&&el.parentNode.style.display!=\"none\"){visible=util.checkFunctionValid(functionCode);if(!visible)\nel.parentNode.style.display=\"none\";}\nreturn visible;}\nfunction setShortcutDisplay(el,functionCode){var visible=false;if(el&&el.parentNode&&el.parentNode.parentNode){visible=util.checkFunctionValid(functionCode);if(!visible)\nel.style.display=\"none\";}\nreturn visible;}\nif(this.query.queryId==\"I2c94902b1637b197011637b5e69a0016\")\nreturn;setDisplay(this.query.btnRefresh,\"BROWSE_FLEXIBLEREPORT_REFRESH\");var showCount=0;if(setDisplay(this.query.btnSave,\"BROWSE_FLEXIBLEREPORT_SAVE\"))\n++showCount;if(setDisplay(this.query.btnSaveAs,\"BROWSE_FLEXIBLEREPORT_SAVEAS\"))\n++showCount;if(setDisplay(this.query.btnMyFavorite,\"BROWSE_FLEXIBLEREPORT_ADDTOFAVORITE\"))\n++showCount;this.query.space1.parentNode.style.display=(showCount==0)?\"none\":\"\";showCount=0;if(setDisplay(this.query.btnChart,\"BROWSE_FLEXIBLEREPORT_GRAPH\"))\n++showCount;if(setDisplay(this.query.btnView,\"BROWSE_FLEXIBLEREPORT_CHOOSEVIEWPANEL\"))\n++showCount;if(setDisplay(this.query.btnSelectField,\"BROWSE_FLEXIBLEREPORT_CHOOSEFIELDS\"))\n++showCount;this.query.space2.parentNode.style.display=(showCount==0)?\"none\":\"\";showCount=0;if(setDisplay(this.query.btnQueryViewSetting,\"BROWSE_FLEXIBLEREPORT_REPORTSETTING\"))\n++showCount;if(this.query.bizViewType==\"RAWSQL_BUSINESS_VIEW\"){if(this.query.btnSubtotal&&this.query.btnSubtotal.parentNode){this.query.btnSubtotal.parentNode.style.display=\"none\";}}else if(setDisplay(this.query.btnSubtotal,\"BROWSE_FLEXIBLEREPORT_SUMMARY\")){++showCount;}\nif(setDisplay(this.query.btnReportParam,\"BROWSE_FLEXIBLEREPORT_PARAMETERSETTING\"))\n++showCount;this.query.space3.parentNode.style.display=(showCount==0)?\"none\":\"\";showCount=0;if(setDisplay(this.query.btnExport,\"BROWSE_FLEXIBLEREPORT_EXPORT\"))\n++showCount;if(setDisplay(this.query.btnPrint,\"BROWSE_FLEXIBLEREPORT_PRINT\"))\n++showCount;this.query.space4.parentNode.style.display=(showCount==0)?\"none\":\"\";showCount=0;if(setDisplay(this.query.btnLocate,\"CUSTOM_DEFINEDATASET\")&&setDisplay(this.query.btnLocate,\"BROWSE_FLEXIBLEREPORT_GOTOQUERY\"))\n++showCount;this.query.space5.parentNode.style.display=(showCount==0)?\"none\":\"\";showCount=0;if(setShortcutDisplay(this.query.btnSearchEx,\"BROWSE_FLEXIBLEREPORT_REFRESH\"))\n++showCount;if(setShortcutDisplay(this.query.btnChartEx,\"BROWSE_FLEXIBLEREPORT_GRAPH\"))\n++showCount;if(setShortcutDisplay(this.query.btnExportEx,\"BROWSE_FLEXIBLEREPORT_EXPORT\"))\n++showCount;}\nQueryViewCommand.prototype.close=function(){if(this.queryNavigator)\nthis.queryNavigator.clear();if(this.catalogTree)\nthis.catalogTree.onSelectNode.unsubscribe(this.addField,this);this.unLoadFrameView();this.queryViewOpened=false;}\nQueryViewCommand.prototype.confirmClose=function(){if(this.query&&this.query.isDirty()&&this.queryViewOpened&&!this.isBrowseModule){var flags=modalWindow.MB_YESNOCANCEL|modalWindow.MB_ICONQUESTION;var ret=alert(\"报表已更改，是否保存后再退出该页面？\",\"确认\",flags);if(ret==modalWindow.ID_CANCEL||ret==modalWindow.ID_UNKNOWN){return false;}else if(ret==modalWindow.ID_YES){this.query.render();this.query.doSave();}}\nreturn true;}\nQueryViewCommand.prototype.addField=function(tree,selected,oldSelected){if(selected._type==\"BUSINESS_VIEW_FIELD\")\nthis.query.addFieldToQueryView(selected._id,selected.text,selected.text,selected.parentNode._id);}\nQueryViewCommand.prototype.doRefreshTreeNode=function(sender,id,type){var tree=this.catalogTree;if(\"LOCATE_BIZVIEW\"==type){if(!util.checkFunctionValid(\"CUSTOM_DEFINEDATASET\"))\nreturn;var app=imports(\"bof.baseajax.common.Application\").getInstance();if(app.mainFrameAction==null)\nreturn;var topAction=null;var regex=new RegExp(\"\\\\.CustomAction\\$\");for(var i=0;i<app.mainFrameAction.actions.length;i++){var act=app.mainFrameAction.actions[i];if(regex.test(act.id)){topAction=act;break;}}\nif(!topAction||!topAction.isValid())\nreturn;if(topAction.isOpenEnabled())\ntopAction.execute(\"open\");var action=null;var regex=new RegExp(\"\\\\.DefineDatasetAction\\$\");for(var i=0;i<topAction.actions.length;i++){var act=topAction.actions[i];if(regex.test(act.id)){action=act;break;}}\nif(!action||!action.isValid())\nreturn;if(action.isOpenEnabled())\naction.execute(\"open\");tree=registry.get(\"DatasetTree\");}\nif(tree){var leftPane=document.getElementById(\"mainLeftTd\");if(leftPane&&leftPane.style.display==\"none\"){leftPane.style.display=\"block\";}\ntree.expandToId(id);tree.refreshNode(id);}}\nQueryViewCommand.prototype.doClose=function(){this.onClose.fire(this);}\nQueryViewCommand.prototype.addRelatedExtraFields=function(fieldDatas,relatedFields,srcClientId){if(!fieldDatas||!fieldDatas.length||!relatedFields||!srcClientId||!this.query||!this.query.clientId)\nreturn;this.query.transmitInfo={relatedFields:relatedFields,transmitFields:fieldDatas};this.query.updateExtraHeader();this.btnStatus['btnSave']='none';this.btnStatus['btnSaveAs']='none';var srcFieldIds=[];for(var i=0;i<relatedFields.srcFieldIds.length;i++)\nsrcFieldIds.push(relatedFields.srcFieldIds[i]);var destFieldIds=[];for(var i=0;i<relatedFields.destFieldIds.length;i++)\ndestFieldIds.push(relatedFields.destFieldIds[i]);var transmitFieldList=[];for(var i=0;i<fieldDatas.length;i++){var fieldDataList=[];fieldDataList.push(fieldDatas[i].id);fieldDataList.push(fieldDatas[i].alias);fieldDataList.push(fieldDatas[i].position);fieldDataList.push(fieldDatas[i].format);fieldDataList.push(fieldDatas[i].dataType);fieldDataList.push(fieldDatas[i].sort);fieldDataList.push(fieldDatas[i].aggregateMethod);transmitFieldList.push(fieldDataList);}\nutil.remoteInvokeEx(\"ClientReportService\",\"saveColJumpData\",[srcClientId,this.query.clientId,srcFieldIds,destFieldIds,transmitFieldList]);}\nQueryViewCommand.prototype.addExtraFields=function(fieldDatas){if(!fieldDatas||!fieldDatas.length||!this.query||!this.query.clientId)\nreturn;if(this.query.bizViewType!=\"BUSINESS_VIEW\"){alert(\"目标报表所对应的查询不是可视化查询，列数据传递无效!\");return;}\nvar fields=this.query.getFieldSelectPanel().getAvailableFieldList();var fieldIds=[];var preStr=\"\";for(var i=0;i<fields.length;i++){if(!preStr){var id=fields[i].id;preStr=id.split(\"\\.\",2).join(\".\")+\".\";}\nfieldIds.push(fields[i].id);}\nfor(var i=0;i<fieldDatas.length;i++)\nfieldIds.push(fieldDatas[i].id);this.btnStatus['btnSave']='none';this.btnStatus['btnSaveAs']='none';var ret=util.remoteInvokeEx(\"ClientReportService\",\"addExtraFields\",[this.query.clientId,fieldIds]);if(ret&&ret.result){var newFields=ret.result;for(var i=newFields.length-1;i>=0;i--){var field=newFields[i];this.query.addFieldToQueryView(field.id,field.alias,field.alias,this.query.bizViewId);}}}\nQueryViewCommand.prototype.doExportTo=function(node,typeId){if(node._type!=\"SIMPLE_REPORT\")\nreturn;var exportEl=document.createElement(\"div\");exportEl.style.display=\"none\";exportEl.style.height=\"1px\";var parentEl=document.getElementById('rigthContent');parentEl.appendChild(exportEl);if(this.query&&this.query.queryId==node._id){if(this.query.clientId){var ret=util.remoteInvoke(\"ClientReportService\",\"getTotalRows\",[this.query.clientId]);if(ret&&ret.succeeded&&ret.result!=2147483647)\n{this.query.allRowCount=ret.result;}\nif(!this.query.exportMenu)\nthis.query.initExportMenu();this.query.exportMenu.selectedId=typeId;this.query.doExportMenuCloseUp();return;}}\nif(QueryView==null)\nQueryView=jsloader.resolve(\"freequery.query.QueryView\");var tmpNavigator=new QueryNavigator();var tmpQuery=new QueryView(exportEl,tmpNavigator);tmpQuery.render();tmpQuery.openQueryView(node._id);if(tmpQuery.clientId){var ret=util.remoteInvoke(\"ClientReportService\",\"getTotalRows\",[tmpQuery.clientId]);if(ret&&ret.succeeded&&ret.result!=2147483647)\n{tmpQuery.allRowCount=ret.result;}\nif(!tmpQuery.exportMenu)\ntmpQuery.exportMenu={};tmpQuery.exportMenu.selectedId=typeId;tmpQuery.exportMenu.setCloseAfterExported=true;tmpQuery.doExportMenuCloseUp();tmpQuery.exportMenu=null;}\ntmpQuery.unrender();tmpNavigator.destroy();tmpQuery.destroy();domutils.destroyNode(exportEl);}\nQueryViewCommand.prototype.setViewContainer=function(container){this.parent=container;}\nQueryViewCommand.prototype.setTreeContainer=function(container){this.treePane=container;}\nQueryViewCommand.prototype.closeQueryView=function(){if(!this.confirmClose())\nreturn false;if(this.query){this.query.onClose.fire();this.query=null;}}\nQueryViewCommand.prototype.loadFrameView=function(node){this.frame=new FrameView(document.getElementById('rigthContent'));this._lastParent=this.parent;this.parent=this.frame.frameViewContainer;this.frame.onClose.subscribe(this.closeQueryView,this);}\nQueryViewCommand.prototype.unLoadFrameView=function(){if(this.frame)\nthis.frame.destroy();this.frame=null;if(this._lastParent)\nthis.parent=this._lastParent;else\nthis.parent=document.getElementById('rigthContent');}\nQueryViewCommand.prototype.setFieldsToDisplayInTheBeginning=function(fields){this.fieldsToDisplayInTheBeginning=fields;}","js/freequery/query/QueryNavigator.js":"\nvar util=jsloader.resolve(\"freequery.common.util\");var modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var QueryNavigator=function(parentQueryViewCommander){this.parentQueryViewCommander=parentQueryViewCommander;this.elems=new Array();this.queryList=new Array();this.queryPool=new QueryPool();this.curStep=-1;this.onClear=new CustomEvent(\"clear\",this);this.onGoForward=new CustomEvent(\"goForward\",this);this.onGoBackward=new CustomEvent(\"goBackward\",this);this.onNavigateTo=new CustomEvent(\"navigateTo\",this);this.onAddQuery=new CustomEvent(\"addQuery\",this);};lang.extend(QueryNavigator,\"freequery.widget.Module2\");QueryNavigator.prototype.destroy=function(){if(this.queryPool){this.queryPool.destroy();this.queryPool=null;}\nthis.parentQueryViewCommander=null;};QueryNavigator.prototype.put=function(name,obj){this.elems[name]=obj;};QueryNavigator.prototype.get=function(name){return this.elems[name];};QueryNavigator.prototype.borrowQueryView=function(parentContainer,id){var ret=this.queryPool.borrowQueryView(parentContainer,this,id);return ret;};QueryNavigator.prototype.returnQueryView=function(obj){this.queryPool.returnQueryView(obj);};QueryNavigator.prototype.openURL=function(url,postData,name,spec){try{var Configuration=imports(\"Configuration\").getInstance();if(Configuration.extensionPoints.QueryNavigator){var cls=Configuration.extensionPoints.QueryNavigator;var clsObj=jsloader.resolve(cls.className);var clsInst=new clsObj();if(clsInst.openURL(url,postData))\nreturn;}}catch(e){}\nif(postData&&postData.length>0){var form=document.getElementById(\"__openURLForm\");if(!form){var form=document.createElement(\"FORM\");document.body.appendChild(form);}\nform.innerHTML=\"\";form.style.display=\"none\";form.id=\"__openURLForm\";form.action=url;form.method='POST';if(name){form.target=name;}else{form.target=\"_blank\";}\nfor(var i=0;i<postData.length;i++){var input=document.createElement(\"input\");input.name=postData[i].name;input.value=postData[i].value;form.appendChild(input);}\nform.submit();}else{if(name&&spec){window.open(url,name,spec);}else if(name){window.open(url,name)}else{window.open(url);}}};QueryNavigator.prototype.openReport=function(reportId){return this.navigateTo(reportId);};QueryNavigator.prototype.openReportWithExtraFields=function(reportId,fieldDatas,relatedFields,srcClientId){return this.navigateTo(reportId,fieldDatas,relatedFields,srcClientId);};QueryNavigator.prototype.openReportInNewWindow=function(reportId,callbackFunc){var args=new Object();args.elems=this.elems;args.fn=callbackFunc;args.oldQuery=this.getActiveQuery();args.id=reportId;var features=\"resizable=yes,status=yes,scrollbars=no, toolbar=no,menubar=no,location=no,width=800,height=600\";var w=window.open(\"\",\"_blank\",features);var template=domutils.doGet(\"template/freequery/openquery.template\");w.document.write(\"<base href='\"+jsloader.baseHref+\"'/>\");w.document.write(template);w.document.close();w.args=args;};QueryNavigator.prototype.navigateTo=function(reportId,fieldDatas,relatedFields,srcClientId){var ret=util.remoteInvokeEx(\"CatalogService\",\"isCatalogElementAccessible\",[reportId,\"REF\"]);if(!ret)\nreturn;if(!ret.result){alert(\"您对该资源没有“查看”权限！\");return;}\nvar fromQuery=this.getActiveQuery();for(var i=this.curStep+1;i<this.queryList.length;i++){var tmpQuery=this.queryList[i];if(tmpQuery&&this.queryPool)\nthis.queryPool.returnQueryView(tmpQuery);}\nthis.queryList=this.queryList.slice(0,this.curStep+1);var queryViewCommand=this.parentQueryViewCommander;var tmpNode=new Object();tmpNode._id=reportId;tmpNode._type='SIMPLE_REPORT';tmpNode._fieldDatas=fieldDatas;tmpNode._relatedFields=relatedFields;tmpNode._srcClientId=srcClientId;queryViewCommand.execute('NAVIGATE',tmpNode,true);var toQuery=queryViewCommand.query;this.onNavigateTo.fire(this,fromQuery,toQuery);return toQuery;};QueryNavigator.prototype.getActiveQuery=function(){return this.queryList[this.curStep];};QueryNavigator.prototype.getCurrentStep=function(){return this.curStep;};QueryNavigator.prototype.clear=function(){for(var i=this.queryList.length-1;i>=0;i--){var tmpQuery=this.queryList[i];if(this.queryPool)\nthis.queryPool.returnQueryView(tmpQuery);}\nthis.queryList=new Array();this.curStep=-1;this.onClear.fire(this);};QueryNavigator.prototype.setStep=function(step,skip){var curQuery=this.queryList[this.curStep];var toQuery=this.queryList[step];if(curQuery&&toQuery){this.curStep=step;curQuery.unrender();toQuery.render();}else if(toQuery){this.curStep=step;toQuery.render(skip);}};QueryNavigator.prototype.addQuery=function(query,skip){this.queryList.push(query);this.setStep(this.queryList.length-1,skip);this.onAddQuery.fire(this);};QueryNavigator.prototype.getQueryCount=function(){return this.queryList.length;};QueryNavigator.prototype.isFirstStep=function(){if(this.curStep==0)\nreturn true;else\nreturn false;};QueryNavigator.prototype.isLastStep=function(){if(this.curStep==this.queryList.length-1)\nreturn true;else\nreturn false;};QueryNavigator.prototype.goForward=function(){if(this.curStep<this.queryList.length-1&&this.curStep>=0){this.setStep(this.curStep+1);this.onGoForward.fire(this);}};QueryNavigator.prototype.goBackward=function(){if(this.curStep<=this.queryList.length-1&&this.curStep>0){this.setStep(this.curStep-1);this.onGoBackward.fire(this);}};QueryNavigator.prototype.getQueryClass=function(){return jsloader.resolve(\"freequery.query.QueryView\");};var QueryPool=function(){this.MAXSIZE=1;this._objs=new Array();this._states=new Array();this.onBorrowQueryView=new CustomEvent(\"borrowQueryView\",this);this.onReturnQueryView=new CustomEvent(\"returnQueryView\",this);};lang.extend(QueryPool,\"freequery.widget.Module2\");QueryPool.prototype.destroy=function(){for(var i=this._objs.length-1;i>=0;i--){var query=this._objs[i];if(query){query.unrender();query.destroy();}}\nthis._objs=null;this._states=null;};QueryPool.prototype.resize=function(){for(var i=0;i<this.MAXSIZE;i++){if(this._states[i]&&this._states[i]==\"available\"){if(this._objs[i]&&this._objs[i].clear){this._objs[i].clear();}}}\nif(this._states.length<=this.MAXSIZE)\nreturn;else{for(var i=this._objs.length;i>=this.MAXSIZE;i--){if(this._states[i]&&this._states[i]==\"available\"){if(this._objs[i]){this._objs[i].unrender();this._objs[i].destroy();delete this._objs[i];delete this._states[i];}}}\nvar tmpObjs=new Array();var tmpStates=new Array();for(var i=0;i<this._objs.length;i++){if(this._objs[i]){tmpObjs.push(this._objs[i]);tmpStates.push(this._states[i]);}}\nthis._objs=tmpObjs;this._states=tmpStates;}};QueryPool.prototype.borrowQueryView=function(parentContainer,queryNavigator,id){var queryView=null,found=false;for(var i=0;i<this._objs.length;i++){var query=this._objs[i];if(query&&query.parent==parentContainer&&this._states[i]==\"available\"){this._states[i]=\"busy\";this.onBorrowQueryView.fire(this,query);queryView=query;found=true;break;}}\nif(!found){var QueryView=queryNavigator.getQueryClass();if(!window.__Portlet_is_hybrid&&window.__QueryView_is_hybrid&&id){var wrapper=document.createElement(\"div\");parentContainer.appendChild(wrapper);wrapper.style.height=\"100%\";var xhr=jsloader.getXHR();xhr.open(\"POST\",\"QueryView.jsp?queryId=\"+id+\"&browserType=\"+domutils.getBrowserType(),false);xhr.setRequestHeader('If-Modified-Since','0');xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded;charset=UTF-8');xhr.send(\"\");wrapper.innerHTML=xhr.responseText;}\nvar isHybrid=window.__QueryView_is_hybrid&&id&&true;if(isHybrid&&!parentContainer.lastChild){found=true;isHybrid=false;}\nif(isHybrid&&parentContainer.lastChild.firstChild.getAttribute(\"boftype\")==\"error\"){var json=parentContainer.lastChild.firstChild.value;var ex=lang.parseJSON(json);modalWindow.showServerError(ex);return null;}\nvar query=new QueryView(parentContainer,queryNavigator,isHybrid);this._objs.push(query);this._states.push(\"busy\");this.onBorrowQueryView.fire(this,query);queryView=query;}\nif(queryView){queryView.__isBorrowed=found;}\nreturn queryView;};QueryPool.prototype.returnQueryView=function(queryObj){for(var i=0;i<this._objs.length;i++){var query=this._objs[i];if(query==queryObj){query.unrender();this._states[i]=\"available\";if(query.isLargeGrid()){query.destroy();this._objs[i]=null;}\nthis.onReturnQueryView.fire(this,query);}}\nthis.resize();};","js/freequery/query/QueryView.js":"\njsloader.resolveMany([\"freequery.control.QueryGrid\",\"freequery.control.BaseGrid\",\"freequery.control.DragTable\",\"freequery.query.Axis\",\"freequery.query.PagePanel\",\"freequery.query.GridPropData\",\"freequery.common.FrameView\",\"freequery.common.LocationBar\",\"bof.baseajax.control.ScrollToolbar\",\"freequery.menu.PopupMenu\",\"freequery.control.DropDownCheckList\",\"freequery.control.Listbox\",\"freequery.control.DropDownPanel\",\"freequery.query.ParameterPanel\",\"freequery.control.ComboBox\",\"freequery.control.DropDownBox\",\"freequery.control.DateTimePicker\",\"freequery.thirdparty.Calendar\",\"freequery.control.ReportDatePicker\",\"freequery.control.FreqDatePicker\",\"freequery.control.DropDownTree\",\"freequery.control.DropDownTreePanel\",\"freequery.tree.ParameterTree\",\"freequery.tree.TreeView\",\"freequery.tree.TreeNode\",\"freequery.tree.ParameterTreeNode\",\"freequery.control.ListDialog\",\"freequery.control.TreeDialog\",\"bof.macro.services.MacroService\",\"freequery.lang.eventutil\",\"bof.macro.SimpleReportMacroExecutor\",\"freequery.lang.compatutil\"]);var modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var util=jsloader.resolve(\"freequery.common.util\");var FrameView=jsloader.resolve(\"freequery.common.FrameView\");var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");var compatutil=jsloader.resolve(\"freequery.lang.compatutil\");var ChartViewUtil=jsloader.resolve(\"smartbi.chart.ChartViewUtil\");var PagePanel=null;var ParameterPanel=null;var JumpRuleLinkPanel=null;var Axis=null;var QueryGrid=null;var FilterPanels=null;var FilterPanel=null;var DragPanel=null;var DragTable=jsloader.resolve(\"freequery.control.DragTable\");var DropDownCheckList=null;var DropDownBox=null;var dialogFactory=null;var FieldData=null;var ParamData=null;var PopupMenu=null;var MacroService=null;var QueryView=function(parentObject,queryNavigator,isHybrid,isReadOnly){QueryView.superclass.constructor.call(this,parentObject);this.callDataErrorFlag=false;this.callRowCountErrorFlag=false;this.isReadOnly=!!isReadOnly;this.isHybrid=isHybrid;this.parent=parentObject;this.folderNode=null;this.folderId=\"\";this.isOpenQuery=false;this.curNode=null;this.canWrite=true;this.allWarnings=null;this.jumpRuleMenu=null;if(this.isHybrid){this.panel=this.parent.lastChild;domutils.removeWhiteSpace(this.panel);}else{var template=domutils.doGet(\"template/freequery/query/QueryView.template\");this.panel=document.createElement(\"div\");this.panel.innerHTML=template;domutils.removeWhiteSpace(this.panel);this.panel.style.height=\"100%\";this.panel.style.overflow=\"hidden\";}\nthis.__queryExcelForm=document.getElementById(\"_queryExcelForm\");if(!this.__queryExcelForm){var formTemplate=domutils.doGet(\"template/freequery/query/QueryViewForms.template\");var span=document.createElement(\"SPAN\");document.body.appendChild(span);span.style.display=\"none\";span.innerHTML=formTemplate;this.__queryExcelForm=document.getElementById(\"_queryExcelForm\");}\nthis.__queryExportForm=document.getElementById(\"_queryExportForm\");this.enabled=true;this.reportTypes=[\"SIMPLE_REPORT\",\"STORED_REPORT\"];this.params=null;this.fields=null;this.clientConfig={};this.initGridProp();this.queryNavigator=queryNavigator;this.onReset=new CustomEvent(\"reset\",this);this.onRender=new CustomEvent(\"render\",this);this.onOpenQueryView=new CustomEvent(\"openQueryView\",this);this.onOverwriteQuery=new CustomEvent(\"overwriteQuery\",this);this.onSaveAsQuery=new CustomEvent(\"saveAsQuery\",this);this.onExecuteJumpRule=new CustomEvent(\"executeJumpRule\",this);this.onSaveChooseRowIndexs=new CustomEvent(\"saveChooseRowIndexs\",this);this.onShowFieldSelectDialog=new CustomEvent(\"showFieldSelectDialog\",this);this.onAfterFillData=new CustomEvent(\"afterFillData\",this);this.onChartSeriesClick=new CustomEvent(\"onChartSeriesClick\",this);this.onPointClick=new CustomEvent(\"onPointClick\",this);this.onChartClick=new CustomEvent(\"onChartClick\",this);this.onSeriesClick=new CustomEvent(\"onSeriesClick\",this);this.onClick=new CustomEvent();this.onRunMacro=new CustomEvent();this.onLinkClick=new CustomEvent();this.onReportHeadClick=new CustomEvent();this.afterRefresh=new CustomEvent(\"afterRefresh\",this);this.onRefreshTreeNode=new CustomEvent(\"refreshTreeNode\",this);this.onClose=new CustomEvent(\"close\",this);this.loadView();this.gridFrmulaPanel=null;this.setDirty(true);this.manualParamStandByValues=new Array();this.paramAlreadInits=new Array();this.selectedFieldList={};this.LARGEGRIDCOUNT=300;this.autoRefresh=false;this.originalData=null;this.readyForUse=false;this.paramHasChangedSinceLastRefresh=false;this.countTotalRows=-1;this.handler=new JumpRuleMenuCommand();this.handler.srcQuery=this;this.handler.context=this.queryNavigator;if(!PopupMenu)\nPopupMenu=jsloader.resolve(\"freequery.menu.PopupMenu\");this.jumpRuleMenu=new PopupMenu(document.body,this.handler);this.jumpRuleMenu.setWidth(\"100px\");this.needJumpMenu=this.isNeedJumpMenu();this.needDetect=this.isNeedDetect();this.initHandlers();this.onFilterPanelClick=new CustomEvent();this.onCustomFilterClick=new CustomEvent();};lang.extend(QueryView,\"freequery.widget.Module2\");QueryView.prototype.destroy=function(){if(this.jumpRulesCells){for(var x in this.jumpRulesCells){var cell=this.jumpRulesCells[x];cell.jumpRules=null;}\nthis.jumpRulesCells=null;}\nif(this.handlers){for(var i=0,len=this.handlers.length;i<len;i++)\nthis.handlers[i].destroy();this.handlers=null;}\nif(this.scrollToolbar)\nthis.scrollToolbar.destroy();this.scrollToolbar=null;this.clear();if(this.exportProgressBar){clearInterval(this.exportInterval);this.showCancelMaskDiv(false);this.exportProgressBar.destroy();this.exportProgressBar=null;}\nif(this.cancelMaskDiv){this.cancelMaskDiv_CancelButton.owner=null;domutils.destroyNode(this.cancelMaskDiv_CancelButton);this.cancelMaskDiv_CancelButton=null;if(this.cancelMaskDiv.parentNode==this.parent)\ndomutils.destroyNode(this.cancelMaskDiv);this.cancelMaskDiv=null;}\nif(this.jumpRuleMenu){this.jumpRuleMenu.destroy();}\nif(this.jumpRuleLinkPanel){this.jumpRuleLinkPanel.onClick.unsubscribe(this.doTitleLinkClick,this);this.jumpRuleLinkPanel.destroy();this.jumpRuleLinkPanel=null;}\nif(this.gridFormulaPanel){this.gridFormulaPanel.onCloseUp.unsubscribe(this.doFormulaCloseUp,this);this.gridFormulaPanel.destroy();this.gridFormulaPanel=null;}\nif(this.maskDiv){this.maskDiv_CancelButton.owner=null;try{domutils.destroyNode(this.maskDiv_CancelButton);}catch(e){}\nthis.maskDiv_CancelButton=null;try{domutils.destroyNode(this.maskDiv);}catch(e){}\nthis.maskDiv=null;}\nthis.disposeCharts();domutils.destroyNode(this.gridLay);domutils.destroyNode(this.graphPanel);this.unLoadView();domutils.destroyNode(this.panel);this.__queryExcelForm=null;this.__queryExportForm=null;this.panel=null;this.parent=null;this.setDirty(true);this.onChartSeriesClick=null;QueryView.superclass.destroy.call(this);if(this.fieldSelectPanel){this.fieldSelectPanel.destroy();this.fieldSelectPanel=null;}\ndelete this.publicParams;this.curPageNum=null;this.onPointClick=null;this.onChartClick=null;this.onSeriesClick=null;};QueryView.prototype.disposeCharts=function(){if(this.charts){for(var i=0,len=this.charts.length;i<len;i++){this.charts[i].destroy();}\nthis.charts=null;this.graphPanel.innerHTML=\"\";}};QueryView.prototype.clear=function(){try{if(this.queryId)\nutil.clearCompositeInvokeCache(\"openSimpleReport\",[this.queryId]);if(this.clientId){util.remoteInvoke(\"ClientReportService\",\"removeFromSession\",[this.clientId],function(){});this.clientId=null;}}catch(e){}};QueryView.prototype.render=function(skip){if(this.rendered)\nreturn;if(skip){this.rendered=true;return;}\nthis.parent.appendChild(this.panel);this.resetForwardBackwardState();if(this.curNode)\nthis.canWrite=this.curNode.canWrite();this.rendered=true;this.onRender.fire(this);}\nQueryView.prototype.unrender=function(){if(this.rendered&&this.parent&&this.panel&&this.panel.parentNode&&this.parent==this.panel.parentNode){this.saveCheckBoxStates();var meizzCalendarLayer=document.getElementById(\"meizzCalendarLayer\");if(meizzCalendarLayer)\nmeizzCalendarLayer.style.display=\"none\";this.parent.removeChild(this.panel);this.rendered=false;}}\nQueryView.prototype.saveCheckBoxStates=function(){var elems=this.panel.getElementsByTagName(\"INPUT\");for(var i=0,len=elems.length;i<len;i++){if(elems[i].type==\"checkbox\")\nelems[i].isChecked=elems[i].checked;}}\nQueryView.prototype.restoreCheckBoxStates=function(){var elems=this.panel.getElementsByTagName(\"INPUT\");for(var i=0,len=elems.length;i<len;i++){if(elems[i].type==\"checkbox\")\nelems[i].checked=elems[i].isChecked;}}\nQueryView.prototype.show=function(noNewQuery){this.parent.style.display='';};QueryView.prototype.hide=function(){this.parent.style.display='none';};QueryView.prototype.hideDomElem=function(elem){if(elem._display!='false'||elem.style.display!='none'){elem._display='false';elem.style.display=\"none\";}};QueryView.prototype.showDomElem=function(elem){if(elem._display!='true'||elem.style.display=='none'){elem._display='true';elem.style.display=\"\";}};QueryView.prototype.loadView=function(){this.initContext();this.bindEvent();this.initOk=true;};QueryView.prototype.unLoadView=function(){this.unBindEvent();if(this.dragFieldsPanel)\nthis.dragFieldsPanel.destroy();if(this.grid)\nthis.grid.destroy();if(this.dragGrid)\nthis.dragGrid.destroy();if(this.pagePanel)\nthis.pagePanel.destroy();if(this.filterPanels)\nthis.filterPanels.destroy();if(this.paramPanelObj)\nthis.paramPanelObj.destroy();this.reportHeader=null;this.reportTail=null;this.dragFieldsPanel=null;this.grid=null;this.dragGrid=null;this.pagePanel=null;this.filterPanels=null;this.paramPanelObj=null;this.initOk=null;this.unInitContext();this.curPageNum=null;}\nQueryView.prototype.isLargeGrid=function(){if(this.grid){if(this.grid.getRowCount()>=this.LARGEGRIDCOUNT){return true;}}\nreturn false;}\nQueryView.prototype.reset=function(skip){var m1=(new Date()).getTime();if(this.spBusinessViewName){this.spBusinessViewName.innerHTML=\"\";this.spBusinessViewName.title=\"\";}\nthis.clientConfig={};this.initGridProp();if(this.grid){this.grid.destroy();this.grid=null;}\nif(this.dragGrid)\nthis.dragGrid.destroy();this.dragGrid=null;var m2=(new Date()).getTime();this.resetViewMenu();var m3=(new Date()).getTime();this.multiHeadersGot=false;if(this.clientId){try{util.remoteInvoke(\"ClientReportService\",\"removeFromSession\",[this.clientId]);}catch(e){}\nthis.fDontRemoveFromQueryInClear=true;this.fDontRemoveFromQueryInClear=false;}\nvar m4=(new Date()).getTime();if(this.filterPanels)\nthis.filterPanels.clear();var m5=(new Date()).getTime();if(this.pagePanel)\nthis.pagePanel.reset();var m6=(new Date()).getTime();if(this.paramPanelObj){this.paramPanelObj.clear();}\nvar m7=(new Date()).getTime();this.bizViewId=\"\";this.queryId=\"\";this.resetPurview();var m8=(new Date()).getTime();this.disposeCharts();var m9=(new Date()).getTime();if(this.fieldSelectPanel){this.fieldSelectPanel.destroy();this.fieldSelectPanel=null;this.selectedFieldList={};}\nif(!skip){this.setHeader(\"\");}\nvar m10=(new Date()).getTime();this.setTail(\"\");var m11=(new Date()).getTime();if(this.uncheckedRowIndexs)\nthis.uncheckedRowIndexs=null;this.onReset.fire(this);if(util.debug){document.title=\"initGrid:\"+(m2-m1)+\"  resetViewMenu:\"+(m3-m2)\n+\"  removeFromSession:\"+(m4-m3)+\"  filterPanels:\"+(m5-m4)\n+\"  pagePanel:\"+(m6-m5)+\"  paramPanelObj:\"+(m7-m6)+\"  resetPurview:\"\n+(m8-m7)+\"  charts:\"+(m9-m8)+\"  setHeader:\"+(m10-m9)+\"  setTail:\"\n+(m11-m10);}};QueryView.prototype.resetPurview=function(){if(this.btnSave)\nthis.btnSave.disabled=!(this.canWrite)||!this.enabled;if(this.btnSaveAs)\nthis.btnSaveAs.disabled=!(this.canWrite)||!this.enabled;}\nQueryView.prototype.initContext=function(){if(!this.isHybrid){this.frameViewContainer=domutils.findElementByClassName(this.parent,\"_frameViewContainer\");if(this.frameViewContainer)\nthis.frameViewContainer.style.overflow=\"hidden\";}\nthis.outerTable=this.panel.firstChild.nextSibling;this.toolbarLay=this.outerTable.rows[0];this.elemToolbarBg=this.toolbarLay.cells[0];this.elemToolbarTr=this.elemToolbarBg.firstChild.rows[0].cells[0].firstChild.firstChild.firstChild.rows[0];this.btnBackward=this.elemToolbarTr.cells[0].firstChild;this.btnForward=this.elemToolbarTr.cells[1].firstChild;this.btnRefresh=this.elemToolbarTr.cells[2].firstChild;this.space1=this.elemToolbarTr.cells[3].firstChild;this.btnSave=this.elemToolbarTr.cells[4].firstChild;this.btnSaveAs=this.elemToolbarTr.cells[5].firstChild;this.btnMyFavorite=this.elemToolbarTr.cells[6].firstChild;this.space2=this.elemToolbarTr.cells[7].firstChild;this.btnChart=this.elemToolbarTr.cells[8].firstChild;this.btnView=this.elemToolbarTr.cells[9].firstChild;this.btnSelectField=this.elemToolbarTr.cells[10].firstChild;this.space3=this.elemToolbarTr.cells[11].firstChild;this.btnQueryViewSetting=this.elemToolbarTr.cells[12].firstChild;this.btnSubtotal=this.elemToolbarTr.cells[13].firstChild;this.btnReportParam=this.elemToolbarTr.cells[14].firstChild;this.space4=this.elemToolbarTr.cells[15].firstChild;this.btnExport=this.elemToolbarTr.cells[17].firstChild;this.btnPrint=this.elemToolbarTr.cells[18].firstChild;this.space5=this.elemToolbarTr.cells[19].firstChild;this.btnLocate=this.elemToolbarTr.cells[20].firstChild;this.contentTr=this.outerTable.rows[1];this.contentTd=this.contentTr.cells[0];this.content=this.contentTd.firstChild;this.contentTable=this.content.firstChild;this.trHeader=this.contentTable.rows[1];this.reportHeader=this.trHeader.cells[0].lastChild;this.maskDiv=this.contentTable.rows[0].cells[0].firstChild;this.maskDiv_CancelButton=this.maskDiv.firstChild.nextSibling;this.elem_alignControlor=this.contentTable.rows[2].cells[0];this.elem_alignControlorTable=this.elem_alignControlor.firstChild;this.paramLay=this.elem_alignControlorTable.rows[0];this.paramPanel=this.paramLay.cells[0].lastChild;this.shortcut=this.elem_alignControlorTable.rows[1];this.btnSearchEx=this.shortcut.cells[0].firstChild;this.btnChartEx=this.btnSearchEx.nextSibling;this.btnExportEx=this.btnChartEx.nextSibling;this.jumpRuleLinkLay=this.elem_alignControlorTable.rows[2];this.elem_trJumpRuleLink=this.jumpRuleLinkLay;this.jumpRulePanel=this.jumpRuleLinkLay.cells[0].lastChild;this.orderbyLay=this.elem_alignControlorTable.rows[3];this.orderbyPanel=this.orderbyLay.cells[0].lastChild;this.orderByLay=this.elem_alignControlorTable.rows[4];this.orderByPriority=this.orderByLay.cells[0].lastChild;this.navigationLay=this.elem_alignControlorTable.rows[5];this.navigationPanel=this.navigationLay.cells[0].lastChild;this.gridLay=this.elem_alignControlorTable.rows[7];this.gridPanel=this.gridLay.cells[0].lastChild;this.tablePanel=this.gridPanel.firstChild;this.graphLay=this.elem_alignControlorTable.rows[8];this.graphPanel=this.graphLay.cells[0].lastChild;this.trTail=this.contentTable.rows[3];this.reportTail=this.trTail.cells[0].lastChild;if(this.isReadOnly){this.hideDomElem(this.btnSave);this.hideDomElem(this.btnSaveAs);this.hideDomElem(this.btnChart);this.hideDomElem(this.btnSelectField);this.hideDomElem(this.btnView);this.hideDomElem(this.space2);this.hideDomElem(this.space1);this.hideDomElem(this.space3);;this.hideDomElem(this.space4);this.hideDomElem(this.btnQueryViewSetting);this.hideDomElem(this.space5);this.hideDomElem(this.btnSubtotal);this.hideDomElem(this.btnReportParam);}\nif(!util.checkFunctionValid(\"BROWSE_FLEXIBLEREPORT_EXPORT\"))\nthis.btnExport.parentNode.style.display=\"none\";this.fieldPanel=this.elem_fieldPanel;var ScrollToolbar=jsloader.resolve(\"bof.baseajax.control.ScrollToolbar\");this.scrollToolbar=new ScrollToolbar(this.elemToolbarBg.getElementsByTagName(\"TABLE\")[0],true);this.scrollToolbar.doOnTableResize();if(!util.checkFunctionValid(\"BROWSE_FLEXIBLEREPORT_EXPORT\"))\nthis.btnExportEx.style.display=\"none\";if(domutils.isFirefox()){this.contentTd.style.height=\"100%\";this.contentTd.style.display=\"inline-block\";this.contentTd.style.overflow=\"auto\";this.contentTr.style.paddingTop=0;this.contentTd.style.padding=0;this.content.style.overflow=\"visible\"\nthis.content.style.height=\"1px\";}\nif(domutils.isIE()&&domutils.getBrowserVersion()>9){compatutil.fixFirefoxScroll2(this.content);}}\nQueryView.prototype.unInitContext=function(){this.btnSave=null;this.btnSaveAs=null;this.btnMyFavorite=null;this.btnRefresh=null;this.btnExport=null;this.btnView=null;this.btnChart=null;this.btnPrint=null;this.gridPanel=null;this.paramPanel=null;this.orderbyPanel=null;this.jumpRulePanel=null;this.fieldPanel=null;this.graphPanel=null;this.navigationPanel=null;this.toolbarLay=null;this.gridLay=null;this.paramLay=null;this.orderbyLay=null;this.jumpRuleLinkLay=null;this.fieldLay=null;this.graphLay=null;this.navigationLay=null;this.shortcut=null;this.btnSearchEx=null;this.btnChartEx=null;this.btnExportEx=null;this.unInitViewMenu();this.unInitExportMenu();}\nQueryView.prototype.bindEvent=function(){this.addListener(this.btnSave,\"click\",this.doSave,this);this.addListener(this.btnSaveAs,\"click\",this.doSaveAs,this);this.addListener(this.btnMyFavorite,\"click\",this.doAddToFavorite,this);this.addListener(this.btnRefresh,\"click\",this.doRefresh,this);this.addListener(this.btnView,\"click\",this.doView,this);this.addListener(this.btnLocate,\"click\",this.doLocate,this);this.addListener(this.btnSelectField,\"click\",this.doSelectField,this);this.addListener(this.btnChart,\"click\",this.doCreateChart,this);this.addListener(this.btnExport,\"click\",this.doExport,this);this.addListener(this.btnForward,\"click\",this.goForward,this);this.addListener(this.btnBackward,\"click\",this.goBackward,this);this.addListener(this.btnPrint,\"click\",this.doPrint,this);this.addListener(this.btnReportParam,\"click\",this.doReportParam,this);this.addListener(this.btnSubtotal,\"click\",this.doSubtotal,this);this.addListener(this.btnQueryViewSetting,\"click\",this.doQueryViewSetting,this);this.addListener(this.btnSearchEx,\"click\",this.doRefresh,this);this.addListener(this.btnChartEx,\"click\",this.doCreateChart,this);this.addListener(this.btnExportEx,\"click\",this.prepareExcelExport,this);this.addListener(this.maskDiv_CancelButton,\"click\",this.doMaskDivCancel,this);}\nQueryView.prototype.initParamPanelObj=function(){if(!ParameterPanel)\nParameterPanel=jsloader.resolve(\"freequery.query.ParameterPanel\");if(!this.paramPanelObj){this.paramPanelObj=new ParameterPanel(this.paramPanel,this.panel,this.paramLayout);this.paramPanelObj.clientId=this.paramPanelId;this.paramPanelObj.onEditChange.subscribe(this.doParamComboEditChange,this);this.paramPanelObj.onSelectChange.subscribe(this.doParamChange,this);}}\nQueryView.prototype.resolveClass=function(className){return jsloader.resolve(className);}\nQueryView.prototype.proxyRemoteInvokeEx=function(){var args=Array.prototype.slice.call(arguments,0);return util.remoteInvokeEx.apply(util,args);}\nQueryView.prototype.initGridPanel=function(mainTable){if(!mainTable)\nreturn;boflog.profile(\"initGridPanel\");if(!QueryGrid)\nQueryGrid=this.resolveClass(\"freequery.control.QueryGrid\");if(!this.grid){this.grid=new QueryGrid(this.gridPanel,null,mainTable,this.clientConfig,this.rightClickEnable);this.grid.onClick.subscribe(function(grid,cell,e,head,row){this.onClick.fire(this,grid,cell,e,head,row);},this);if(!this.isHybrid){if(this.clientConfig.gridProp){this.grid.gridProp=this.clientConfig.gridProp;if(this.clientConfig.gridProp.rowHeight!=null)\nthis.grid.setRowHeight(this.clientConfig.gridProp.rowHeight+\"px\");if(this.clientConfig.gridProp.fontSize!=null)\nthis.grid.setFontSize(this.clientConfig.gridProp.fontSize+\"px\");}}\nif(this.viewState){for(var i=0,len=this.viewState.length;i<len;i++){if(this.viewState[i].id==\"grid_showBtn\"){this.grid.setAllButtonVisible(this.viewState[i].checked);break;}}}\nthis.grid.onDelField.subscribe(this.doDelFieldGrid,this);this.grid.onSort.subscribe(this.doGridSort,this);this.grid.onProp.subscribe(this.doGridProp,this);this.grid.onFormula.subscribe(this.doGridFormula,this);this.grid.onFilter.subscribe(this.doGridFilter,this);this.grid.onNewColumn.subscribe(this.doGridNewColumn,this);this.grid.afterNewCol.subscribe(this.doAfterNewCol,this);this.grid.onClick.subscribe(this.doOnLinkClick,this);this.grid.onResizeend.subscribe(this.doOnResizeend,this);this.grid.onCheckColClick.subscribe(this.doCheckColClick,this);}\nif(!this.dragGrid&&!this.isReadOnly){var dragDiv=this.panel.childNodes[2];if(!domutils.hasClassName(dragDiv,'dragDiv')){dragDiv=null;}\nthis.dragGrid=new DragTable(this.grid.mainTable,this.panel,null,dragDiv);this.dragGrid.onDragEndColumn.subscribe(this.doGridDrag,this);this.dragGrid.onHeadClick.subscribe(function(cell,e){this.onClick.fire(this,this.grid,cell,e);this.onReportHeadClick.fire(this,this.grid,cell,e);},this);}\nif(this.isHybrid){;}else{if(this.clientConfig.gridProp&&this.clientConfig.gridProp.tableWidthAuto){util.lazyCall(this,this.setTableWidthAuto,[this.clientConfig.gridProp.tableWidthAuto]);}}\nboflog.profile(\"initGridPanel\");var dataTable=this.grid.mainTable;;var　backgroundColor=\"\";if(this.clientConfig.gridProp&&this.clientConfig.gridProp.queryViewBackgroundColor){backgroundColor=this.clientConfig.gridProp.queryViewBackgroundColor;if(backgroundColor.toUpperCase()!=\"#FFFFFF\"){dataTable.style.backgroundColor=backgroundColor;}}}\nQueryView.prototype.initPagePanel=function(){if(!PagePanel)\nPagePanel=jsloader.resolve(\"freequery.query.PagePanel\");if(!this.pagePanel){this.pagePanel=new PagePanel(this.navigationPanel||this.navigationLay.cells[0]);this.pagePanel.setPageRows(this.defaultPageRows);this.pagePanel.onPage.subscribe(this.doPage,this);}}\nQueryView.prototype.setQueryViewBackgroundColor=function(){var backgroundColor=this.clientConfig.gridProp.queryViewBackgroundColor?this.clientConfig.gridProp.queryViewBackgroundColor:\"#ffffff\";var useSystemDefaultValue=this.clientConfig.gridProp.useSystemDefaultValue;if(useSystemDefaultValue){var value=util.getSystemConfig(\"REPORT_BACKGROUND\");if(value){backgroundColor=value;}else{backgroundColor=\"#ffffff\";}}\nvar pageTheme=registry.get(\"pageTheme\");if(null!=pageTheme){var grid=pageTheme.grid;if(grid&&grid.queryViewBackgroundColor){backgroundColor=grid.queryViewBackgroundColor;}}\nthis.setBackgroundColor(backgroundColor);}\nQueryView.prototype.setBackgroundColor=function(backgroundColor){if(!backgroundColor)\nreturn;var outerTable=this.elem_outerTable||this.outerTable;if(outerTable){outerTable.style.backgroundColor=backgroundColor;}}\nQueryView.prototype.initFilterPanel=function(){if(!FilterPanels)\nFilterPanels=jsloader.resolve(\"freequery.control.FilterPanels\");if(!this.filterPanels)\nthis.filterPanels=new FilterPanels(this.panel);}\nQueryView.prototype.unBindGridEvent=function(){if(this.grid){this.grid.onDelField.unsubscribe(this.doDelFieldGrid,this);this.grid.onSort.unsubscribe(this.doGridSort,this);this.grid.onProp.unsubscribe(this.doGridProp,this);this.grid.onFormula.unsubscribe(this.doGridFormula,this);this.grid.onFilter.unsubscribe(this.doGridFilter,this);this.grid.onCheckColClick.unsubscribe(this.doCheckColClick,this);this.grid.onNewColumn.unsubscribe(this.doGridNewColumn,this);this.grid.onClick.unsubscribe(this.doOnLinkClick,this);this.grid.afterNewCol.unsubscribe(this.doAfterNewCol,this);}}\nQueryView.prototype.unBindEvent=function(){this.onRefreshTreeNode=null;this.onClose=null;this.removeListener(this.btnSave,\"click\",this.doSave);this.removeListener(this.btnSaveAs,\"click\",this.doSaveAs);this.removeListener(this.btnMyFavorite,\"click\",this.doAddToFavorite);this.removeListener(this.btnRefresh,\"click\",this.doRefresh);this.removeListener(this.btnView,\"click\",this.doView);this.removeListener(this.btnLocate,\"click\",this.doLocate);this.removeListener(this.btnSelectField,\"click\",this.doSelectField);this.removeListener(this.btnChart,\"click\",this.doCreateChart);this.removeListener(this.btnExport,\"click\",this.doExport);this.removeListener(this.btnPrint,\"click\",this.doPrint);this.removeListener(this.btnReportParam,\"click\",this.doReportParam);this.removeListener(this.btnSubtotal,\"click\",this.doSubtotal);this.removeListener(this.btnSearchEx,\"click\",this.doRefresh);this.removeListener(this.btnChartEx,\"click\",this.doCreateChart);this.removeListener(this.btnExportEx,\"click\",this.prepareExcelExport);this.removeListener(this.maskDiv_CancelButton,\"click\",this.doMaskDivCancel);this.unBindGridEvent();if(this.pagePanel){this.pagePanel.onPage.unsubscribe(this.doPage,this);}\nif(this.dragGrid){this.dragGrid.onDragEndColumn.unsubscribe(this.doGridDrag,this);}\nif(this.dragFieldsPanel){this.dragFieldsPanel.onDragEnd.unsubscribe(this.doGridDrag,this);}\nif(this.paramPanelObj){this.paramPanelObj.onEditChange.unsubscribe(this.doParamComboEditChange,this)\nthis.paramPanelObj.onSelectChange.unsubscribe(this.doParamChange,this);}}\nQueryView.prototype.initViewMenu=function(){if(!this.viewMenu){if(!DropDownCheckList)\nDropDownCheckList=jsloader.resolve(\"freequery.control.DropDownCheckList\");if(this.isHybrid){this.viewMenu=new DropDownCheckList(this.panel,this.panel.childNodes[3]);}else{this.viewMenu=new DropDownCheckList(this.panel);this.viewMenu.addItem(\"_trHeader\",\"显示表头\");this.viewMenu.addItem(\"_trTail\",\"显示表尾\");this.viewMenu.addItem(\"_trParam\",\"显示参数\");this.viewMenu.addItem(\"_query_grid\",\"显示表格\");this.viewMenu.addItem(\"_graph\",\"显示图形\");this.viewMenu.addItem(\"_trNavigation\",\"显示分页控制器\");if(this.bizViewType!=\"JAVA_BUSINESS_VIEW\"){if(this.hasCustomOrderRule!=true){this.viewMenu.addItem(\"_trOrderByPriority\",\"显示排序优先级\");}}\nthis.viewMenu.checkList.insertSplit();this.viewMenu.addItem(\"grid_showBtn\",\"显示表头按钮\");}\nthis.viewMenu.onCloseUp.subscribe(this.doViewMenuCloseUp,this);if(this.reportType==this.reportTypes[1]){var ids=[\"_trParam\",\"_trOrderByPriority\",\"grid_showBtn\"];for(var i in ids){this.viewMenu.setItemChecked(ids[i],false);this.viewMenu.setItemDisable(ids[i],false);}}}}\nQueryView.prototype.unInitViewMenu=function(){if(this.viewMenu){this.viewMenu.onCloseUp.unsubscribe(this.doViewMenuCloseUp,this);this.viewMenu.destroy();this.viewMenu=null;}}\nQueryView.prototype.initExportMenu=function(){if(!this.exportMenu){if(!DropDownBox)\nDropDownBox=jsloader.resolve(\"freequery.control.DropDownBox\");this.exportMenu=new DropDownBox(this.panel);this.exportMenu.onCloseUp.subscribe(this.doExportMenuCloseUp,this);this.exportMenu.insertItem(\"TXT\",\"TXT\");this.exportMenu.insertItem(\"CSV\",\"CSV\");this.exportMenu.insertItem(\"MHT\",\"MHT\");this.exportMenu.insertItem(\"PDF\",\"PDF\");this.exportMenu.insertItem(\"WORD\",\"WORD\");this.exportMenu.insertItem(\"EXCEL\",\"EXCEL2003\");}}\nQueryView.prototype.unInitExportMenu=function(){if(this.exportMenu){this.exportMenu.onCloseUp.unsubscribe(this.doExportMenuCloseUp,this);this.exportMenu.destroy();this.exportMenu=null;}}\nQueryView.prototype.resetViewMenu=function(){if(!this.viewMenu)\nthis.initViewMenu();var visible=this.reportType!=this.reportTypes[1];this.resetViewItem(\"_trHeader\",true);this.resetViewItem(\"_trTail\",true);this.resetViewItem(\"_trParam\",visible);this.resetViewItem(\"_query_grid\",true);this.resetViewItem(\"_graph\",true);this.resetViewItem(\"_trNavigation\",true);this.resetViewItem(\"_trOrderByPriority\",false);this.resetViewItem(\"grid_showBtn\",visible);this.viewMenu.setItemDisable(\"_trParam\",!visible);this.viewMenu.setItemDisable(\"_trOrderByPriority\",!visible);this.viewMenu.setItemDisable(\"grid_showBtn\",!visible);}\nQueryView.prototype.resetViewItem=function(className,visible,skip){if(!this.curViewItemState)\nthis.curViewItemState=new Array();if(typeof this.curViewItemState[className]!='undefined'&&this.curViewItemState[className]==visible){return;}\nthis.curViewItemState[className]=visible;var needDisable=false;if(this.reportType==this.reportTypes[1]){if(className==\"_trParam\"||className==\"_trOrderByPriority\"||className==\"grid_showBtn\"){visible=false;needDisable=true;}}\nif(this.grid&&className==\"grid_showBtn\"){if(this.gridHeadBtnVisible&&this.gridHeadBtnVisible==visible)\nreturn;else{this.viewMenu.setItemChecked(className,visible);if(!skip){this.grid.setAllButtonVisible(visible);}\nthis.gridHeadBtnVisible=visible;return;}}\nif(!this.viewMenu)\nthis.initViewMenu();this.viewMenu.setItemChecked(className,visible);if(!skip){var el=domutils.findElementByClassName(this.parent,className);if(el)\nthis.setViewVisible(el,visible);}\nif(needDisable)\nthis.viewMenu.setItemDisable(className,true);}\nQueryView.prototype.doViewMenuCloseUp=function(){var views=this.viewMenu.getCheckboxList(true);this.setDirty(true);var v_len=views.length;for(var i=0;i<v_len;i++){var item=views[i];if(item.id==\"grid_showBtn\"&&this.grid){this.grid.setAllButtonVisible(item.checked);}\nvar el=domutils.findElementByClassName(this.parent,item.id);if(el)\nthis.setViewVisible(el,item.checked);if(el&&item.id==\"_trHeader\"&&this.header==\"\"){this.setViewVisible(el,false);}\nif(el&&item.id==\"_trParam\"&&(!this.params||!this.params.length)){this.setViewVisible(el,false);}}\nthis.updateLayout();}\nQueryView.prototype.getDelimiter=function(){var ret=util.remoteInvokeEx(\"UserService\",\"getCurrentUser\",[]);if(ret){this.userId=ret.result.id;}\nret=util.remoteInvokeEx(\"ConfigClientService\",\"getUserConfigs\",[this.userId]);if(ret){var userConfig=ret.result;for(var i in userConfig){if(userConfig[i].key==\"CSV_EXPORT_DELIMITER\"){return userConfig[i].value;}}}\nvar ret=util.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfigs\",[]);if(ret){var systemConfig=ret.result;for(var i in systemConfig){if(systemConfig[i].key==\"CSV_EXPORT_DELIMITER\"){return systemConfig[i].value;}}}\nreturn null;};QueryView.prototype.doExportMenuCloseUp=function(exportType){if(!this.__queryExportForm)\nreturn;var typeId=(exportType&&typeof exportType==\"string\")?exportType:(this.exportMenu?this.exportMenu.selectedId:null);if(!typeId)\nreturn;var ret=util.remoteInvoke(\"ClientReportService\",\"beforeExecute\",[this.queryId]);if(ret&&(ret.result==false)){var status=alert(\"后台在跑批，查询有可能有误，是否继续查询？\",null,modalWindow.MB_YESNO|modalWindow.MB_ICONQUESTION);if(modalWindow.ID_YES!=status)\nreturn;}\nif(!dialogFactory){dialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");}\nif(typeId==\"CSV\"){var data={rowCount:this.allRowCount,delimiter:\",\",exportType:typeId};var dialogConfig={title:\"设置导出CSV参数\",size:dialogFactory.size.MIDDLE,fullName:\"freequery.query.ExportCSVDialog\",closeBeforeCallback:true};dialogFactory.showDialog(dialogConfig,data,this.executeExport,this);}else if(typeId==\"TXT\"){var data={rowCount:this.allRowCount,delimiter:this.getDelimiter(),exportType:typeId};var dialogConfig={title:\"设置导出TXT参数\",size:dialogFactory.size.MIDDLE,fullName:\"freequery.query.ExportTxtDialog\",closeBeforeCallback:true};dialogFactory.showDialog(dialogConfig,data,this.executeExport,this);}else if(typeId==\"EXCEL\"){var data={rowCount:this.allRowCount,exportType:typeId,contentType:this.getExportContentType()};var dialogConfig={title:\"设置导出EXCEL参数\",size:dialogFactory.size.MIDDLE,fullName:\"freequery.query.ExportExcelDialog\",closeBeforeCallback:true};dialogFactory.showDialog(dialogConfig,data,this.prepareExcelExport,this);}else if(typeId==\"MHT\"||typeId==\"PDF\"||typeId==\"WORD\"){var data={rowCount:this.allRowCount,exportType:typeId,contentType:this.getExportContentType()};var dialogConfig={title:\"设置导出\"+typeId+\"参数\",size:dialogFactory.size.MIDDLE,fullName:\"freequery.query.ExportExcelDialog\",closeBeforeCallback:true};dialogFactory.showDialog(dialogConfig,data,this.executeExport,this);}}\nQueryView.prototype.prepareExcelExport=function(exportType,submitOptions){if(!exportType){return;}\nif(!submitOptions){submitOptions={};}\nvar maxCount=65536;var intMaxValue=2147483647;var msg=(this.allRowCount==null||this.allRowCount==intMaxValue)?\"无法预知查询结果总行数，如果记录集过大\":((this.allRowCount>maxCount)?\"查询结果记录集过大(\"+this.allRowCount+\")\":null);if(msg)\nmsg+=\"，只能导出\"+maxCount+\"行数据，是否继续？\";if(msg&&modalWindow.open(msg,\"导出EXCEL\",modalWindow.MB_YESNO|modalWindow.MB_ICONQUESTION)!=modalWindow.ID_YES)\nreturn;this.executeExport('EXCEL',submitOptions);}\nQueryView.prototype.executeExport=function(exportType,submitOptions){if(submitOptions&&submitOptions.exportType){exportType=submitOptions.exportType;}\nif(!exportType||!submitOptions){return;}\nvar options=submitOptions||{};if(!this.__queryExportForm||!this.__queryExcelForm){var formTemplate=domutils.doGet(\"template/freequery/query/QueryViewForms.template\");var span=document.createElement(\"SPAN\");document.body.appendChild(span);span.innerHTML=formTemplate;this.__queryExportForm=document.getElementById(\"_queryExportForm\");this.__queryExcelForm=document.getElementById(\"_queryExcelForm\");}\nvar exportForm=this.__queryExportForm;this.setExportFormInputValues(exportForm,exportType,submitOptions);if(this.exportMenu&&this.exportMenu.setCloseAfterExported)\nutil.remoteInvokeEx(\"ClientReportService\",\"setCloseAfterExported\",[this.clientId,true]);exportForm.submit();this.showCancelMaskDiv(true);};QueryView.prototype.setExportFormInputValues=function(exportForm,exportType,submitOptions){if(submitOptions&&submitOptions.exportType){exportType=submitOptions.exportType;}\nif(!exportType||!submitOptions){return;}\nvar options=submitOptions||{};var input_exportType=domutils.findElementByClassName(exportForm,\"_exportType\");var input_clientId=domutils.findElementByClassName(exportForm,\"_clientId\");var input_delimiter=domutils.findElementByClassName(exportForm,\"_delimiter\");var input_maxRow=domutils.findElementByClassName(exportForm,\"_maxRow\");var input_mode=domutils.findElementByClassName(exportForm,\"_mode\");var input_valueType=domutils.findElementByClassName(exportForm,\"_valueType\");var input_headerHtml=domutils.findElementByClassName(exportForm,\"_headerHtml\");var input_tailHtml=domutils.findElementByClassName(exportForm,\"_tailHtml\");var input_result=domutils.findElementByClassName(exportForm,\"_result\");var input_contentType=domutils.findElementByClassName(exportForm,\"_contentType\");var input_pageId=domutils.findElementByClassName(exportForm,\"_pageId\");var input_exportHiddenField=domutils.findElementByClassName(exportForm,\"_exportHiddenField\");var UNDEFINED_VALUE;input_exportType.value=exportType;input_clientId.value=this.clientId;if(options.delimiter!==UNDEFINED_VALUE)\ninput_delimiter.value=options.delimiter;if(options.rowCount!==UNDEFINED_VALUE)\ninput_maxRow.value=options.rowCount;if(options.mode!==UNDEFINED_VALUE)\ninput_mode.value=options.mode;if(options.valueType!==UNDEFINED_VALUE)\ninput_valueType.value=options.valueType;if(options.contentType!==UNDEFINED_VALUE)\ninput_contentType.value=options.contentType;input_headerHtml.value=this.reportHeader&&this.reportHeader.innerHTML||\"\";input_tailHtml.value=this.reportTail&&this.reportTail.innerHTML||\"\";input_pageId.value=this.getPageId()||\"\";var headerText=this.reportHeader&&this.reportHeader.innerText||\"\";this.setExportFormInputValue(exportForm,\"headerText\",headerText);var tailText=this.reportHeader&&this.reportTail.innerText||\"\";this.setExportFormInputValue(exportForm,\"tailText\",tailText);input_result.value=options.result||'';input_exportHiddenField.value=options.exportHiddenField;};QueryView.prototype.getExportContentType=function(){var viewState=this.getLayout().viewState,showGrid=false,showChart=false;for(var i=0,len=viewState.length;i<len;i++){if(viewState[i].id==\"_query_grid\"){showGrid=viewState[i].checked;}else if(viewState[i].id==\"_graph\"){if(viewState[i].checked&&this.charts&&this.charts.length>0){showChart=true;}}}\nif(showGrid){if(showChart){return null;}else{return\"gridOnly\";}}else{if(showChart){return\"pageByPage\";}else{return null;}}};QueryView.prototype.setExportFormInputValue=function(parentEl,inputName,value){var inputEl=null;var elems=parentEl.getElementsByTagName(\"INPUT\");for(var i=0,len=elems.length;i<len;i++){if(elems[i].name==inputName){inputEl=elems[i];break;}}\nif(inputEl==null){inputEl=document.createElement(\"INPUT\");inputEl.type=\"hidden\";inputEl.name=inputName;parentEl.appendChild(inputEl);}\nvar x=String.fromCharCode(160);value=value.replace(new RegExp(x,\"g\"),' ');inputEl.value=value;};QueryView.prototype.hideAllView=function(){this.setViewVisible(this.trHeader,false);this.setViewVisible(this.trTail,false);this.setViewVisible(this.paramLay,false);this.setViewVisible(this.fieldLay,false);this.setViewVisible(this.gridLay,false);this.setViewVisible(this.graphLay,false);this.setViewVisible(this.navigationLay,false);}\nQueryView.prototype.setViewVisible=function(el,v){if(el){if(v)\nthis.showDomElem(el);else\nthis.hideDomElem(el);}}\nQueryView.prototype.doOnresize=function(newHeight){this.body.style.height=(newHeight-40)+\"px\";};QueryView.prototype.save=function(){var data=new Array();data[0]=[\"DEFAULT_TREENODE\",\"SELF_TREENODE\"];if(registry.get(\"PrivateFolderAction_actived\")){data[0]=[\"SELF_TREENODE\"];}\ndata[1]=[\"SIMPLE_REPORT\"]\ndata[2]=[\"报表\"];data[3]=\"SAVE\";data[4]=this.folderNodeData;var ret=util.remoteInvokeEx(\"UserService\",\"getCurrentUser\",[]);if(ret&&ret.result){uid=ret.result.id;}\nif(this.isBrowseModule)\ndata.rootNodeId=\"SELF_\"+uid;if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var dialogConfig={title:\"保存报表\",fullName:\"freequery.dialog.OpenSaveDialog\"};dialogConfig.size=[500,341];dialogFactory.showDialog(dialogConfig,data,this.saveQueryCallback,this);}\nQueryView.prototype.saveQueryCallback=function(ret,dialog){if(!ret)\nreturn false;this.updateLayout();this.updateParamSetting(this.params);this.updateClientConfig();if(ret.actionType==\"override\"){var saved=this.overwriteQuery(ret.fileId,ret.fileDesc);this.queryId=ret.fileId;if(saved){this.name=ret.fileName;this.alias=ret.fileName;this.disableButton(this.btnMyFavorite,\"myfavorite\",false);this.setDirty(false);dialog.alert(\"保存灵活分析成功！\");}else{this.queryId='';}}else{this.folderId=ret.folderId;this.queryId=this.saveAsQuery(ret.fileName,ret.fileName,ret.fileDesc,this.folderId,\"\");if(this.queryId){dialog.alert(\"保存灵活分析成功！\");this.name=ret.fileName;this.alias=ret.fileName;this.disableButton(this.btnMyFavorite,\"myfavorite\",false);this.setDirty(false);this.onRefreshTreeNode.fire(this,this.queryId,\"SIMPLE_REPORT\");}else{this.queryId='';}}\nif(this.queryId){if(this.charts&&this.charts.length){var rtn=util.remoteInvokeEx(\"ClientReportService\",\"getCharts\",[this.clientId]);var charts,chartId;if(rtn&&rtn.succeeded&&(charts=rtn.result)){for(var i=0,len=this.charts.length;i<len;i++){if(charts[i]&&(chartId=charts[i].chartDefine.id)){this.charts[i]._chartId=chartId;}}}}\nif(this.clientConfig.header){this.setHeader(this.clientConfig.header);}\ntry{var pathandname=util.getCatalogNodeLocation(this.queryId);this.queryNavigator.parentQueryViewCommander.frame.setFrameTitleLocal(pathandname[0]);this.queryNavigator.parentQueryViewCommander.frame.setFrameTitle(pathandname[1]);}catch(e){}}}\nQueryView.prototype.publish=function(){var data=new Array();data[0]=this.queryId;data[1]=this.alias;if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var dialogConfig={title:\"发布\",fullName:\"freequery.dialog.PublishSaveDialog\"};dialogFactory.showDialog(dialogConfig,data);}\nQueryView.prototype.getLayout=function(){if(!this.viewMenu)\nthis.initViewMenu();var views=this.viewMenu.getCheckboxList(true);var viewState=new Array();var v_len=views.length;for(var i=0;i<v_len;i++){var item=views[i];viewState.push({id:item.id,checked:item.checked});}\nvar layout={viewState:viewState};return layout;}\nQueryView.prototype.updateLayout=function(){var layout=this.getLayout();var ret=util.remoteInvokeEx(\"ClientReportService\",\"setLayout\",[this.clientId,lang.toJSONString(layout)]);if(ret&&ret.succeeded){this.viewState=layout.viewState;}}\nQueryView.prototype.doSave=function(){util.redefineAlert();if(this.queryId!=\"\"){if(this.grid.getFields().length<1){alert(\"输出字段不能为空!\");return;}\nthis.updateLayout();this.updateParamSetting(this.params);this.updateClientConfig();var fileDesc=(this.fileDesc)?this.fileDesc:\"\";if(this.overwriteQuery(this.queryId,fileDesc)){this.setDirty(false);alert(\"保存报表成功！\");}else\nthis.queryId='';}else{this.save();}}\nQueryView.prototype.doSaveAs=function(){if(this.grid.getFields().length<1){alert(\"输出字段不能为空!\");return;}\nthis.save();}\nQueryView.prototype.doPublish=function(){this.publish();}\nQueryView.prototype.enableRefreshTimer=function(){var _this=this,n=2*1000;_this.refreshTimerId=setTimeout(function(){clearTimeout(_this.refreshTimerId);_this.refreshTimerId=null;},n);}\nQueryView.prototype.doRefresh=function(){if(!this.clientId||this.refreshTimerId){return;}\nthis.enableRefreshTimer();if(!this.isEnabledCache){util.remoteInvokeEx(\"ClientReportService\",\"clearSQLResultStore\",[this.clientId]);}\nif(!this.pagePanel){this.initPagePanel();}else{this.pagePanel.setCurPageNum(\"1\");if(isNaN(this.pagePanel.getPageRows())){this.pagePanel.setPageRows(this.defaultPageRows);}}\nutil.beginLazyCalls();this.refreshData(true);}\nQueryView.prototype.disableRefreshButton=function(value){this.btnRefresh.disabled=value;this.btnSearchEx.disabled=value;}\nQueryView.prototype.getDropDownPos=function(el,untilEl){var p;if(domutils.isFirefox()){var op=el.offsetParent;p={x:el.offsetLeft+op.offsetLeft,y:el.offsetTop+op.offsetTop};}else{p=util.getAbsolutePos(el,untilEl);}\nreturn p;}\nQueryView.prototype.doView=function(){var p=this.getDropDownPos(this.btnView,this.panel);if(!this.viewMenu)\nthis.initViewMenu();this.viewMenu.dropDown(p.x,p.y+this.btnView.offsetHeight);}\nQueryView.prototype.doLocate=function(){this.onRefreshTreeNode.fire(this,this.bizViewId,\"LOCATE_BIZVIEW\");}\nQueryView.prototype.getFieldSelectPanel=function(){if(!this.fieldSelectPanel){this.fieldSelectPanel=new(this.resolveClass(\"freequery.query.FieldSelectPanel\"))(this.panel,this.btnSelectField,this);var panel=this.getFieldSelectPanel();var cl=panel.checkList;if(this.grid&&this.grid.mainTable){var rowIndex=this.grid.getHeaderRowIndex();var colCount=this.grid.getColCount();for(var i=0,len=cl.length;i<len;i++){for(var j=0;j<colCount;j++){var cell=this.grid.getCell(rowIndex,j);if(cl[i].getAttribute(\"__fieldId\")==cell.field.id){cl[i].checked=true;var isHidden=cell.style.display==\"none\"\ncl[i].indeterminate=isHidden;if(isHidden&&(domutils.isChrome()||domutils.isSafari())){cl[i].indeterminate=false;cl[i].nextSibling.style.color=\"gray\";}\ncl[i].flag=isHidden?\"1\":\"2\";}}}}}\nreturn this.fieldSelectPanel;};QueryView.prototype.doSelectField=function(){this.fieldSelectPanel=this.getFieldSelectPanel();this.setDirty(true);if(this.fieldSelectPanel.isVisible()){this.fieldSelectPanel.hide();}else{var p=this.getDropDownPos(this.btnSelectField,this.panel);this.fieldSelectPanel.show(p);}}\nQueryView.prototype.doClose=function(){this.onClose.fire(this);}\nQueryView.prototype.doExport=function(ev){var p=this.getDropDownPos(this.btnExport,this.panel);if(!this.exportMenu)\nthis.initExportMenu();var y=p.y+this.btnExport.offsetHeight;this.exportMenu.dropDown(p.x,y,50,100);}\nQueryView.prototype.doParamComboEditChange=function(paramPanel,combo,param,value){if(combo&&combo.needChecked){var retV=this.checkedValue(combo,value);if(retV){this.doParamChange(paramPanel,param,null,value,null,value);}else{alert(\"输入的值在下拉列表中不存在！\");}}else{this.doParamChange(paramPanel,param,null,value,null,value);}}\nQueryView.prototype.checkedValue=function(combo,value,display){var param=combo.paramTag.param;var enabledNull=lang.parseJSON(param.componentDefine).noNull;if(enabledNull&&!value)\nreturn true;if(!combo.alreadInit){if(param.componentType==\"COMBOBOX\"||param.componentType==\"LISTDIALOG\"){if(this.paramPanelObj){var paramValues=this.paramPanelObj.getParamStandbyValue(param.id,param.clientId);if(paramValues!=null){combo.dropdownBox.panel.innerHTML=\"\";combo.insertItems(paramValues);}}\ncombo.alreadInit=true;}}\nvar comBoxData=combo.getStandByData();if(param.multSelect){var valueArray=value.split(\",\");if(display){var displayArray=display.split(\",\");if(valueArray.length!=displayArray.length){alert(\"等待检验的id数目和展现名数目不匹配！\");return false;}\nfor(var i=0,len=valueArray.length;i<len;i++){if(!this.valueChecked(comBoxData,valueArray[i],displayArray[i])){return false;}}\nreturn true;}else{for(var i=0,len=valueArray.length;i<len;i++){if(!this.valueChecked(comBoxData,valueArray[i])){return false;}}\nreturn true;}}else{return this.valueChecked(comBoxData,value,display);}}\nQueryView.prototype.valueChecked=function(comBoxData,value,display){for(var i=0,len=comBoxData.length;i<len;i++){if(comBoxData[i].id==value){if(display){if(comBoxData[i].name==display)\nreturn true;else\nreturn false;}else{return true;}}}\nif(!display){for(var n=0,len=comBoxData.length;n<len;n++){if(comBoxData[n].name==value){return true;}}}\nreturn false;}\nQueryView.prototype.addParam=function(param){if(!this.paramPanelObj)\nthis.initParamPanelObj();if(param.display){this.paramPanelObj.addParam(param);}\nif(!this.isOpenQuery)\nthis.addParamToReport(param.id,param.alias);}\nQueryView.prototype.setParamDataValue=function(param,values){param.value=values[0];param.displayValue=values[1];}\nQueryView.prototype.initParamPanel2=function(bizViewId,defaultParams,paramLayout){if(!this.paramPanelObj)\nthis.initParamPanelObj();if(paramLayout){this.paramLayout=paramLayout;if(this.paramPanelObj){this.paramPanelObj.initLayout(paramLayout);}}\nvar params=null;if(defaultParams)\nparams=defaultParams;else\nparams=this.getParameterList(bizViewId);if(params){this.params=params;for(var i=0,len=params.length;i<len;i++){if(params[i].display)\nthis.paramPanelObj.addParam(params[i]);}\nvar enabled;if(this.paramPanelObj){enabled=this.paramPanelObj.getEnableResetRelateParamsValue();this.paramPanelObj.setEnableResetRelateParamsValue(false);}\ntry{for(var i=0,len=params.length;i<len;i++){this.setParamDefaultValue(params[i],true);}}finally{if(this.paramPanelObj)\nthis.paramPanelObj.setEnableResetRelateParamsValue(enabled);}}}\nQueryView.prototype.initParamPanel=function(bizViewId,defaultParams,paramLayout){if(paramLayout){this.paramLayout=paramLayout;if(this.paramPanelObj){this.paramPanelObj.initLayout(paramLayout);}}\nvar params=null;if(defaultParams)\nparams=defaultParams;else\nparams=this.getParameterList(bizViewId);if(params){this.params=params;for(var i=0,len=params.length;i<len;i++){this.addParam(params[i]);}\nvar enabled;if(this.paramPanelObj){enabled=this.paramPanelObj.getEnableResetRelateParamsValue();this.paramPanelObj.setEnableResetRelateParamsValue(false);}\ntry{for(var i=0,len=params.length;i<len;i++){var values=this.getParamDefaultValue(params[i].id);if(values){this.setParamDataValue(params[i],values);this.setParamDefaultValue(params[i]);}}}finally{if(this.paramPanelObj)\nthis.paramPanelObj.setEnableResetRelateParamsValue(enabled);}}}\nQueryView.prototype.doParamChange=function(paramPanel,param,oldId,newId,oldValue,newValue,notRefresh){this.setDirty(true);this.fireParamChange(param);if(this.filterPanels)\nthis.filterPanels.resetFlagRefresh(true);if(!notRefresh)\nthis.refreshData(false);return true;}\nQueryView.prototype.setParamDefaultValue=function(param,onlyClient){if(!this.paramPanelObj)\nreturn;if(onlyClient){var pTag=this.paramPanelObj.getParamTagByParamId(param.id);if(param.paramType==\"OLAP\")\nthis.paramPanelObj.setParamCtrlValue(pTag,param.currentValue,param.currentDisplayValue);else\nthis.paramPanelObj.setParamCtrlValue(pTag,param.value,param.displayValue);}\nelse if(this.setParamValue(param.id,param.value,param.displayValue)){this.paramPanelObj.setParamValue(param.id,param.value,param.displayValue);}}\nQueryView.prototype.openQueryView=function(queryId,paramsSetByUrl){this.openQueryViewEx(queryId,paramsSetByUrl);}\nQueryView.prototype.openQueryViewHybrid=function(queryId){this.clientId=this.gridPanel.clientId;var result=this.getQuery(this.clientId);this.defaultPageRows=result.rowsPerPage;if(!this.grid){var mainTable=this.gridPanel.firstChild;if(!QueryGrid)\nQueryGrid=this.resolveClass(\"freequery.control.QueryGrid\");this.grid=new QueryGrid(this.gridPanel,null,mainTable,this.clientConfig,this.rightClickEnable);this.grid.onClick.subscribe(function(grid,cell,e,head,row){this.onClick.fire(this,grid,cell,e,head,row);},this);this.grid.onDelField.subscribe(this.doDelFieldGrid,this);this.grid.onSort.subscribe(this.doGridSort,this);this.grid.onProp.subscribe(this.doGridProp,this);this.grid.onFormula.subscribe(this.doGridFormula,this);this.grid.onFilter.subscribe(this.doGridFilter,this);this.grid.onNewColumn.subscribe(this.doGridNewColumn,this);this.grid.afterNewCol.subscribe(this.doAfterNewCol,this);this.grid.onClick.subscribe(this.doOnLinkClick,this);this.grid.onResizeend.subscribe(this.doOnResizeend,this);this.grid.onCheckColClick.subscribe(this.doCheckColClick,this);}\nif(!this.dragGrid){if(!DragTable)\nDragTable=jsloader.resolve(\"freequery.control.DragTable\");this.dragGrid=new DragTable(this.grid.mainTable,this.panel,null,this.panel.childNodes[2]);this.dragGrid.onDragEndColumn.subscribe(this.doGridDrag,this);this.dragGrid.onHeadClick.subscribe(function(cell,e){this.onClick.fire(this,this.grid,cell,e);this.onReportHeadClick.fire(this,this.grid,cell,e);},this);}\nthis.multiHeaders=result.multiHeaders&&lang.parseJSON(result.multiHeaders);this.multiHeadersGot=true;if(this.multiHeaders)\nthis.grid.setHeaderRowIndex(this.multiHeaders[0].length-1);var queryData=result.reportBean;for(var i=0;i<this.grid.getColCount();i++){var cell=this.grid.getCell(this.grid.getHeaderRowIndex(),i);cell.field=queryData.fields[i];}\nthis.addFieldsProp(queryData.fields);this.initGridProp();this.grid.gridProp=this.clientConfig.gridProp;return true;};QueryView.prototype.openQueryViewEx=function(queryId,paramsSetByUrl){if(!this.isHybrid){this.content.style.overflow=\"hidden\";}\nthis.reset(this.isHybrid);this.isOpenQuery=true;this.queryId=queryId;var result=null;var clientId=this.gridPanel.getAttribute(\"clientId\");if(clientId){var __clientReportView=null;this.modules={};for(var node=this.panel.firstChild;node;node=node.nextSibling){if(1!=node.nodeType)continue;if(\"TEXTAREA\"!=node.tagName)continue;if(\"modules\"==node.getAttribute(\"boftype\")){var eventName=node.getAttribute(\"bofid\");if(node.value&&node.value!=\"null\")\nthis.modules[eventName]=lang.parseJSON(node.value);node.value=null;}else if(\"clientReportView\"==node.getAttribute(\"boftype\")){if(node.value&&node.value!=\"null\")\n__clientReportView=lang.parseJSON(node.value);node.value=null;}else if(\"availableFieldList\"==node.getAttribute(\"boftype\")){if(node.value&&node.value!=\"null\")\nthis.availableFieldList=lang.parseJSON(node.value);node.value=null;}else{;}}\nif(null!=__clientReportView){result=__clientReportView;}}\nif(!result){var r=this.openQueryEx(queryId);if(!r){this.doClose();return;}\nresult=r[0];}\nthis.clientId=result.clientId;var layout=result.reportBean.layout;layout=lang.parseJSON(layout);this.viewState=layout.viewState;var clientReportView=result;var html=null;if(clientId);else{html=r[1];this.emptyGridHeaderHTML=html;}\nthis.hasValueMap={};var len=result.reportBean.params.length;for(var i=0;i<len;i++){var name=result.reportBean.params[i].name;this.hasValueMap[name]=false;}\nif(!paramsSetByUrl){util.remoteInvoke(\"ClientReportService\",\"setAndGetDefaultParamValuesWithFuture\",[this.clientId,null,null],this.callbackSetAndGetDefaultParamValues,this);}\nthis.resetWithReportViewAndHtml(clientReportView,html,true,true,true);this.initPagePanel();this.runRenderMacro();this.setDirty(false);this.initAfterOpenHandlers();this.onOpenQueryView.fire(this);}\nQueryView.prototype.callbackSetAndGetDefaultParamValues=function(ret){if(!ret.succeeded){modalWindow.showServerError(ret);return;}\nvar params=ret.result;this.params=params;for(var i=0,len=params.length;i<len;i++){var name=params[i].name;var hasValue=this.hasValueMap[name];if(hasValue){}else{this.setParamDefaultValue(params[i],true);}}\nif(this.portlet){this.portlet.setParamValuesByPublicParams();if(this.hasRefreshDataFromPage){this.refreshData();this.hasRefreshDataFromPage=false;}\nthis.portlet.getPageObj().checkPublicParamsValueInited();}else{this.resetPublicParamsValue=true;}};QueryView.prototype.resetWithReportViewAndHtml=function(clientReportView,html,updateParamPanel,updateChartAlign,updateLayout){boflog.profile(\"resetWithReportViewAndHtml\");this.oldFieldList=clientReportView.reportBean.fields;this.paramPanelId=clientReportView.parameterPanelId;if(this.paramPanelObj)\nthis.paramPanelObj.clientId=clientReportView.parameterPanelId;this.defaultPageRows=clientReportView.rowsPerPage;this.orderBys=lang.parseJSON(clientReportView.orderBys);this.hasCustomOrderRule=clientReportView.hasValidCustomOrderRule;if(!this.clientId){this.doClose();return;}\nif(html){boflog.profile(\"2\");this.tablePanel.innerHTML=html;boflog.profile(\"2\");}\nthis.allWarnings=clientReportView.warnings;this.multiHeaders=clientReportView.multiHeaders&&lang.parseJSON(clientReportView.multiHeaders);this.multiHeadersGot=true;boflog.profile(\"4\");if(!this.isHybrid){if(this.jumpRuleLinkPanel)\nthis.jumpRuleLinkPanel.clear();if(this.jumpRuleLinkLay)\nthis.hideDomElem(this.jumpRuleLinkLay);}\nvar queryData=clientReportView.reportBean;if(queryData==null)\nreturn;this.fileDesc=queryData.desc;this.fields=queryData.fields;this.clientConfig=queryData.clientConfig;this.params=queryData.params;if(updateParamPanel){this.paramLayout=clientReportView.paramLayout&&lang.parseJSON(clientReportView.paramLayout);if(this.paramPanelObj){this.paramPanelObj.initLayout(this.paramLayout);}\nfor(var i=0,len=queryData.params.length;i<len;i++){var para=queryData.params[i];if(this.paramPanelObj&&this.paramPanelObj.getParam(para.id)!=null)\ncontinue;para.clientId=this.paramPanelId;this.addParam(para);this.setParamDefaultValue(para,true);}\nif(clientReportView.parameterPanelDisable&&this.paramPanelObj){for(var i=0,len=this.paramPanelObj.paramObjList.length;i<len;i++){var paramTag=this.paramPanelObj.paramObjList[i].paramTag;var param=paramTag.param;this.paramPanelObj.setEnabled(param.id,false);}}}\nif(!this.clientConfig){this.clientConfig={};}else{this.clientConfig=lang.parseJSON(this.clientConfig);if(updateChartAlign)\nthis.resetChartAlign(this.clientConfig.chartAlign,this.isHybrid);this.paramSetting=this.clientConfig.paramSetting;}\nthis.initGridPanel(this.tablePanel.firstChild);this.grid.resetTmpCellObj();if(this.multiHeaders)\nthis.grid.setHeaderRowIndex(this.multiHeaders[0].length-1);this.initGridProp();boflog.profile(\"4\");boflog.profile(\"10\");for(var i=0,len=queryData.fields.length;i<len;i++){this.grid.getCell(this.grid.getHeaderRowIndex(),i).field=queryData.fields[i];}\nthis.addFieldsProp(queryData.fields);if(this.grid){this.grid.gridProp=this.clientConfig.gridProp;this.grid.setGridBorderColor(this.grid.gridProp.gridBorderColor);}\nif(!this.isHybrid){if(this.clientConfig.gridProp&&this.clientConfig.gridProp.paddingLeft!=null)\nthis.contentTr.firstChild.style.paddingLeft=this.clientConfig.gridProp.paddingLeft+\"px\";}\nthis.grid.multiHeaderModel=this.multiHeaders;this.bizViewType=queryData.businessViewType;this.grid.setBizViewType(this.bizViewType);this.javaQuerySupports=queryData.javaQuerySupports;this.reportType=queryData.reportType;this.bizViewId=queryData.businessViewId;this.autoRefresh=queryData.autoRefresh;this.countTotalRows=clientReportView.retrieveCountSettingValue-0;if(!Axis)\nAxis=jsloader.resolve(\"freequery.query.Axis\");this.fDontGetOrderBy=true;for(var i=0,len=queryData.fields.length;i<len;i++)\nthis.selectedFieldList[queryData.fields[i].id]=true;this.fDontGetOrderBy=false;this.subtotalSetting=clientReportView.reportBean.subtotalSetting;if(this.bizViewType==\"RAWSQL_BUSINESS_VIEW\"){this.clientConfig.gridProp.lockDragHeader=true;}\nif(!this.isReadOnly){if(!this.clientConfig.gridProp.lockDragHeader){this.lockDragColumns(true);var len=Math.min(this.clientConfig.gridProp.mergeMaxCol,this.grid.getColCount());for(var i=0;i<len;i++){var x=this.grid.getCell(this.grid.getHeaderRowIndex(),i);x&&x.setAttribute(DragTable.FLAGDRAG,!this.clientConfig.gridProp.lockDrag);}}else{this.lockDragColumns(false);}}\nthis.initCharts(clientReportView.charts,clientReportView.chartOptions);if(updateLayout){this.initLayout(queryData.layout);}\nif(this.clientConfig.header){this.setHeader(this.clientConfig.header,true,this.clientConfig.displayheader);}\nif(this.clientConfig.tail){this.setTail(this.clientConfig.tail);}\nthis.isOpenQuery=false;this.alias=queryData.alias||queryData.name;this.name=queryData.name;this.disableButton(this.btnMyFavorite,\"myfavorite\",false);boflog.profile(\"10\");boflog.profile(\"20\");if(!this.isHybrid){if(!domutils.isFirefox())\nutil.lazyCall(this,util.setStyle,[this.content,\"overflow\",\"auto\"]);else\nutil.lazyCall(this,util.setStyle,[this.content,\"overflow\",\"visible\"]);}\nboflog.profile(\"20\");boflog.profile(\"21\");this.setAlignCenter(this.clientConfig.gridProp.alignCenter);this.setQueryViewBackgroundColor();if(this.reportType==this.reportTypes[1]){if(this.grid){this.grid.setAllButtonVisible(false);this.lockDragColumns(false);}\nif(!this.isHybrid){this.paramLay.style.display=\"none\";var btns=[this.btnSelectField,this.btnSubtotal,this.btnReportParam];for(var i in btns)\nbtns[i].parentNode.style.display=\"none\";}}\nboflog.profile(\"21\");this.isEnabledCache=clientReportView.isEnabledCache;boflog.profile(\"resetWithReportViewAndHtml\");}\nQueryView.prototype.initLayout=function(layout){var skip=this.isHybrid;if(layout){layout=lang.parseJSON(layout);var viewState=layout.viewState;for(var i=0,len=viewState.length;i<len;i++){var item=viewState[i];this.resetViewItem(item.id,item.checked);}\nif(this.reportType==this.reportTypes[1])\nthis.viewMenu.setItemDisable(\"grid_showBtn\",true);}\nif(this.hasCustomOrderRule){this.setViewVisible(this.orderByLay,false);}}\nQueryView.prototype.setHeader=function(title,skip,displayTitle){if(!skip){if(typeof title==\"undefined\"||title==\"\"){this.trHeader.style.display=\"none\";}else{if(!this.viewMenu)\nthis.initViewMenu();if(this.viewMenu.getItemChecked(\"_trHeader\")){if(domutils.isIE6()||domutils.isIE7())\nthis.trHeader.style.display=\"block\";else\nthis.trHeader.style.display=\"table-row\";}}}\nif(typeof title==\"undefined\"||title==\"\"){this.header=\"\";delete this.clientConfig.header;this.reportHeader.innerHTML=\"\";}else{this.header=title;if(!this.clientConfig){this.clientConfig={};}\nthis.clientConfig.header=title;var t=this.replaceAllFunc(title,skip,displayTitle,\"header\");this.reportHeader.innerHTML=t;}};QueryView.prototype.setTail=function(title){if(typeof title==\"undefined\"||title==\"\"){this.tail=\"\";delete this.clientConfig.tail;this.reportTail.innerHTML=\"\";}else{this.tail=title;if(!this.clientConfig){this.clientConfig={};}\nthis.clientConfig.tail=title;var t=this.replaceAllFunc(title,null,null,\"tail\");this.reportTail.innerHTML=t;}};QueryView.prototype.replaceAllFunc=function(title,skip,displayTitle,headerFlag){var t1,t2,t3,t4,t5,t6,t7,t8,t9,t10;if(skip){t8=displayTitle;}else{t1=this.replaceFunc(title,\"CurrentUserAlias\");t2=this.replaceFunc(t1,\"CurrentUserName\");t3=this.replaceFunc(t2,\"CurrentReportName\");t4=this.replaceFunc(t3,\"CurrentUserGroupName\");t5=this.replaceFunc(t4,\"CurrentUserID\");t6=this.replaceFunc(t5,\"CurrentTime\");t7=this.replaceFunc(t6,\"GetParamValue\");t8=this.replaceFunc(t7,\"CurrentUserDefaultDepartmentName\");}\nt9=this.replaceEvalString(t8);t10=this.replaceFontStyle(t9,headerFlag);return t10;}\nQueryView.prototype.replaceFontStyle=function(text,headerFlag){var pageTheme=registry.get(\"pageTheme\");if(!pageTheme||!pageTheme.report)\nreturn text;var style=\"\";if(headerFlag==\"header\"&&pageTheme.report.reportHeaderFont){style=\"<span style='font-size:\"+pageTheme.report.reportHeaderFont.fontSize+\";color:\"+pageTheme.report.reportHeaderFont.color+\"'>\";}else if(headerFlag==\"tail\"&&pageTheme.report.reportTailFont){style=\"<span style='font-size:\"+pageTheme.report.reportTailFont.fontSize+\";color:\"+pageTheme.report.reportTailFont.color+\"'>\";}else{return text;}\nvar s1=\"<FONT size=\";while(text.indexOf(s1)!=-1){var t=text.indexOf(s1);var news=text.substring(0,t);var news2=text.substring(t);var l=news2.indexOf(\">\");news2=news2.substring(l+1);text=news+news2;}\ns1=\"<FONT color=\";while(text.indexOf(s1)!=-1){var t=text.indexOf(s1);var news=text.substring(0,t);var news2=text.substring(t);var l=news2.indexOf(\">\");news2=news2.substring(l+1);text=news+news2;}\ntext=text.replace(/<\\/FONT>/ig,\"\")\ntext=style+text+\"<\/span>\";return text;}\nQueryView.prototype.replaceEvalString=function(text){var ret=[];var txt=text;var pat=/EvalString\\([\"|']/g;var temp;var startIndex=0;while((temp=pat.exec(txt))!=null){var head=txt.substring(startIndex,temp.index);ret.push(head);var param=this.getEvalStrParam(txt,pat.lastIndex);var ev=this.evalString(param);ret.push(ev);startIndex=pat.lastIndex+param.length+2;pat.lastIndex=startIndex;}\nif(startIndex<txt.length)\nret.push(txt.substring(startIndex));return ret.join(\"\");}\nQueryView.prototype.getEvalStrParam=function(s,beginIndex){var toIndex=s.length;var c=1;for(var i=beginIndex;i<toIndex;i++){if(s.charAt(i)==\"(\")\n++c;else if(s.charAt(i)==\")\")\n--c;if(c==0){toIndex=i-1;break;}}\nreturn s.substring(beginIndex,toIndex);}\nQueryView.prototype.evalString=function(s){var objDiv=document.createElement(\"div\");objDiv.innerHTML=s;var text=objDiv.innerText;objDiv=null;try{text=eval(text);}catch(ex){text=\"null\";}\nreturn text;}\nQueryView.prototype.replaceFunc=function(title,func){var re=new RegExp(func+\"\\\\(.*?\\\\)\",\"g\");var r=title.match(re);var t=title;if(r){for(var i=0,len=r.length;i<len;i++){if(func==\"GetParamValue\"){var txt=\"\";var paramAlias=r[i].substr(15,r[i].length-17);for(var j=0,lenj=this.params.length;j<lenj;j++){var tmpParam=this.params[j];if(tmpParam.alias==paramAlias){txt=tmpParam.currentDisplayValue||tmpParam.displayValue;if(!txt)\ntxt=tmpParam.currentValue||tmpParam.value;t=t.replace(r[i],txt);break;}}}\nelse{var ret=util.remoteInvoke(\"ClientReportService\",\"getFunctionValue\",[this.clientId,r[i]]);if(ret&&ret.succeeded){var txt=\"\";if(ret.result)\ntxt=ret.result;t=t.replace(r[i],txt);}}}}\nreturn t;}\nQueryView.prototype.afterHeaderEditor=function(ret){if(ret==-1)\nreturn;this.setHeader(ret);};QueryView.prototype.afterTailEditor=function(ret){if(ret==-1)\nreturn;this.setTail(ret);};QueryView.prototype.getAlias=function(){return this.alias;};QueryView.prototype.getName=function(){return this.name;};QueryView.prototype.getAutoRefresh=function(){return this.autoRefresh;};QueryView.prototype.setAutoRefresh=function(auto){this.autoRefresh=auto;};QueryView.prototype.doMaskDivCancel=function(){this.canceling=true;this.cancelQuery();this.printClick=false;this.showMaskDiv(false);};QueryView.prototype.showMaskDiv=function(show){if(show){this.maskDiv.style.display=\"block\";this.canceling=false;}else{setTimeout(function(){util.commitLazyCalls();},50);this.maskDiv.style.display=\"none\";}}\nQueryView.prototype.getExportProgress=function(){var ret=util.remoteInvokeEx(\"ClientReportService\",\"getExportStatus\",[]);if(ret){if(ret.result){var value=parseFloat(ret.result.progress);var msg=ret.result.message;if(msg){this.lastExportMessage=this.lastExportMessage||{};if(this.lastExportMessage.msg==msg){var ext=this.lastExportMessage.ext||\"\";if(ext.length<6)\next+=\".\";else\next=\"\";this.lastExportMessage.ext=ext;}else{this.lastExportMessage.msg=msg;this.lastExportMessage.ext=\"\";}\nmsg+=this.lastExportMessage.ext;}\nthis.exportProgressBar.setProgress(value*100,msg);}else{this.lastExportMessage=null;clearInterval(this.exportInterval);this.showCancelMaskDiv(false);}}}\nQueryView.prototype.showCancelMaskDiv=function(show){if(!this.cancelMaskDiv){this.cancelMaskDiv=document.createElement(\"div\");this.parent.appendChild(this.cancelMaskDiv);this.cancelMaskDiv.style.position=\"absolute\";this.cancelMaskDiv.style.width=\"400\";this.cancelMaskDiv.style.height=\"200\";var offsetp=this.getOffset(this.parent);this.cancelMaskDiv.style.left=offsetp.left+(this.parent.offsetWidth-400)/2;this.cancelMaskDiv.style.top=offsetp.top+(this.parent.offsetHeight-200)/2;this.cancelMaskDiv.style.zIndex=100;this.cancelMaskDiv.style.backgroundColor=\"lightsteelblue\";this.cancelMaskDiv.style.filter=\"progid:DXImageTransform.Microsoft.Alpha(opacity=80)\";var Progress=jsloader.resolve(\"freequery.control.Progress\");var div=document.createElement(\"DIV\");this.cancelMaskDiv.appendChild(div);div.style.width=\"100%\";div.style.height=\"30px\";this.exportProgressBar=new Progress(div);this.cancelMaskDiv_CancelButton=document.createElement(\"button\");this.cancelMaskDiv.appendChild(this.cancelMaskDiv_CancelButton);this.cancelMaskDiv_CancelButton.style.position=\"absolute\";this.cancelMaskDiv_CancelButton.style.width=\"100\";this.cancelMaskDiv_CancelButton.style.height=\"50\";this.cancelMaskDiv_CancelButton.style.left=\"150\";this.cancelMaskDiv_CancelButton.style.top=\"80\";this.cancelMaskDiv_CancelButton.value=\"取消导出\";this.cancelMaskDiv_CancelButton.innerText=\"取消导出\";this.cancelMaskDiv_CancelButton.owner=this;this.cancelMaskDiv_CancelButton.onclick=function(){this.owner.canceling=true;this.owner.cancelExport();this.owner.printClick=false;clearInterval(this.exportInterval);this.owner.showCancelMaskDiv(false);};}\nif(show){var currentQueryView=this;this.exportProgressBar.setProgress(0);this.exportInterval=setInterval(function(){currentQueryView.getExportProgress();},200);this.cancelMaskDiv.style.display=\"block\";this.canceling=false;}else{this.cancelMaskDiv.style.display=\"none\";}}\nQueryView.prototype.cancelExport=function(){util.remoteInvokeEx(\"ClientReportService\",\"setCloseAfterExported\",[this.clientId,false]);util.remoteInvokeEx(\"ClientReportService\",\"interruptExport\",[]);var exportForm=this.__queryExportForm;var t=exportForm.action;exportForm.action=\"\";exportForm.submit();exportForm.action=t;}\nQueryView.prototype.getOffset=function(obj){var p=new Object();p.left=0;p.top=0;while(obj&&(obj.offsetLeft||obj.offsetTop||obj.scrollLeft||obj.scrollTop)){p.left+=obj.offsetLeft-obj.scrollLeft;p.top+=obj.offsetTop-obj.scrollTop;obj=obj.offsetParent;}\nreturn p;}\nQueryView.prototype.getEmptyParamNames=function(){var ret=new Array();if(this.params){for(var i=0,len=this.params.length;i<len;i++){var tmpParam=this.params[i];var noNull=lang.parseJSON(tmpParam.componentDefine).noNull;if(!noNull){if(tmpParam.id.indexOf('APPARAM.')==0){if(!tmpParam.currentValue)\nret.push(tmpParam.alias);}else if(!tmpParam.value){if(this.paramPanelObj&&this.paramPanelObj.paramValues){var pv=this.paramPanelObj.paramValues[tmpParam.id];if(pv&&pv.value){continue;}}\nret.push(tmpParam.alias);}}}}\nreturn ret;}\nQueryView.prototype.refreshDataSync=function(){var replaceParamValue;if(this.paramHasChangedSinceLastRefresh)\nreplaceParamValue=false;else\nreplaceParamValue=true;util.compositeInvoke(\"refreshDataWithDefault\",[this.clientId,replaceParamValue]);this.refreshData();}\nQueryView.prototype.refreshDataAsync=function(){this.curPage=this.pagePanel.getCurPageNum()-1;this.callRowCountErrorFlag=false;if(this.countTotalRows!=0){util.remoteInvoke(\"ClientReportService\",\"getTotalRowsCountWithFuture\",[this.clientId,this.curPage],this.callbackGetTotalRowsCount,this);}\nvar that=this;this.callDataErrorFlag=false;setTimeout(function(){if(that.getPageId()){var needGetDataFromJob=true;if(that.hasRefreshDataFromPage){that.hasRefreshDataFromPage=false;needGetDataFromJob=false;}\nutil.remoteInvoke(\"ClientReportService\",\"getReportDataWithFutureInPage\",[that.clientId,0,that.getPageId(),needGetDataFromJob],that.callbackGetReportData,that);}else{util.remoteInvoke(\"ClientReportService\",\"getReportDataWithFuture\",[that.clientId,0],that.callbackGetReportData,that);}},500);};QueryView.prototype.refreshData=function(refresh,noExecuteQuery,executeInMem){if(this.grid.getFields().length<1){return;}\nif(typeof refresh=='undefined')\nrefresh=true;if(this.notRefresh)\nreturn;if(this.getAutoRefresh()||refresh){var emptyParamNames=this.getEmptyParamNames();if(emptyParamNames.length>0){alert(\"参数尚未设定：\"+emptyParamNames[0]);return;}\nthis.dateA=new Date();boflog.profile('刷新数据总耗时');boflog.profile('refreshData');this.showMaskDiv(true);this.finishedRefreshData=false;if(!this.pagePanel)\nthis.initPagePanel();this.curPage=this.pagePanel.getCurPageNum()-1;if(noExecuteQuery){this.getReportData(this.curPage);}else if(this.defaultPageRows==this.pagePanel.getPageRows()||this.setRowsPerPage(this.pagePanel.getPageRows())){if(this.needDetect){var ret=util.remoteInvoke(\"ClientReportService\",\"beforeExecute\",[this.queryId]);if(ret&&(ret.result==false)){var status=alert(\"后台在跑批，查询有可能有误，是否继续查询？\",null,modalWindow.MB_YESNO|modalWindow.MB_ICONQUESTION);if(modalWindow.ID_YES!=status){this.showMaskDiv(false);return;}}}\nthis.executeQuery(executeInMem);}}\nthis.afterRefresh.fire(this);if(this.pagePanel)\nthis.curPageNum=this.pagePanel.getCurPageNum()-1;boflog.profile('refreshData');}\nQueryView.prototype.callbackGetTotalRowsCount=function(ret){if(!this.rendered){return;}\nboflog.profile('getTotalRowsCount');boflog.profile('callbackExecuteQuery');util.clearCompositeInvokeCache(\"openSimpleReport\",[this.clientId,false,false,this.pagePanel.getPageRows(),this.curPage,this.queryId]);this.finishedRefreshData=true;if(!ret.succeeded){this.showMaskDiv(false);if(this.canceling)\nalert(\"查询已被取消！\");else{this.callRowCountErrorFlag=true;if(!this.callDataErrorFlag)\nmodalWindow.showServerError(ret);}\nreturn false;}\nvar allRowNums=ret.result;this.allRowCount=allRowNums;this.pagePanel.setAllRowCount(allRowNums);var tmpPages=allRowNums/(this.pagePanel.getPageRows());var pages=PagePanel.maxPageNumber;if(allRowNums!=PagePanel.maxPageNumber){pages=(allRowNums%this.pagePanel.getPageRows()==0)?Math.floor(tmpPages):(Math.floor(tmpPages)+1);}\nif(pages==0)\npages=1;if(pages>0){this.pagePanel.generatePages(pages);}}\nQueryView.prototype.callbackGetReportData=function(ret){if(!this.rendered){return;}\nif(!domutils.isFirefox())\nthis.content.style.overflow=\"hidden\";if(!this.clientId)return;boflog.profile(\"RemoteGetReportData\");boflog.profile(\"callbackGetReportData\");util.clearCompositeInvokeCache(\"refreshDataWithDefault\",[this.clientId,true]);util.clearCompositeInvokeCache(\"refreshDataWithDefault\",[this.clientId,false]);this.paramHasChangedSinceLastRefresh=false;if(!ret.succeeded){this.showMaskDiv(false);if(this.canceling)\nalert(\"查询已被取消！\");else{this.callDataErrorFlag=true;if(!this.callRowCountErrorFlag)\nmodalWindow.showServerError(ret);}\nthis.readyForUse=true;this.onAfterFillData.fire(this);return false;}\nvar dateB=new Date();var queryTime=dateB-this.dateA;var data=ret.result;if(data){if(data[0].length==0&&this.curPage!=0&&!this.printClick){this.curPage=0;this.pagePanel.setCurPageNum(this.curPage+1);this.getReportData(this.curPage);return;}\nvar tmpCurPage=this.pagePanel.getCurPageNum()-1;var tmpPages=this.pagePanel.getPages()-1;this.curPage=null;if(data&&data[0]){if(!tmpPages&&data[0].length<this.pagePanel.getPageRows()){var allRowNums=tmpCurPage*this.pagePanel.getPageRows()+data[0].length;if(this.pagePanel.allRowCount.innerText==\"未知\")\nthis.pagePanel.setAllRowCount(allRowNums);var tmpPages=allRowNums/(this.pagePanel.getPageRows());var pages=PagePanel.maxPageNumber;if(allRowNums!=PagePanel.maxPageNumber)\npages=(allRowNums%this.pagePanel.getPageRows()==0)?Math.floor(tmpPages):(Math.floor(tmpPages)+1);if(pages==0)\npages=1;if(pages>0){this.pagePanel.generatePages(pages);}}\nif(this.grid){this.grid.destroy();this.grid=null;}\nif(this.dragGrid)\nthis.dragGrid.destroy();this.dragGrid=null;this.parent.style.overflow=\"hidden\";this.resetWithReportViewAndHtml(data[4],data[5],false,false,false);this.grid.tmpCellData=data[0];var fields=data[4].reportBean.fields;var cellData=[];for(var i=0,len=fields.length;i<len;i++){cellData.push(fields[i].alias);}\nvar headerRows=this.grid.getHeaderRows();for(var tp=1;tp<headerRows;tp++)\nthis.grid.tmpCellData.splice(0,0,null);this.grid.tmpCellData.splice(0,0,cellData);this.resetCharts();if(this.jumpRuleLinkPanel){this.jumpRuleLinkPanel.clear();}\nthis.runRenderTableMacro();if(this.jumpRuleLinkPanel){if(this.jumpRuleLinkPanel.linkObjList.length>0){this.showDomElem(this.jumpRuleLinkLay);}else{this.hideDomElem(this.jumpRuleLinkLay);}}\nvar date6=new Date();var date7=new Date();this.setOrderBys(data[2]);var t=this,options;if(this.charts&&(options=data[4].chartOptions)){setTimeout(function(){boflog.profile('refreshChartOptions');var optLen=options.length,len=Math.min(t.charts.length,optLen),chart,i;for(i=0;i<len;i++){chart=t.charts[i];chart._chartOptions=lang.parseJSON(options[i]);chart.refresh(chart.chartDefine.chartType,chart._chartOptions);}\nboflog.profile('refreshChartOptions');},0);}\nif(domutils.isIE6()){this.parent.style.overflow=\"auto\";}}}\nthis.showMaskDiv(false);if(!domutils.isFirefox())\nthis.content.style.overflow=\"auto\";this.readyForUse=true;this.onAfterFillData.fire(this);boflog.profile('callbackGetReportData');boflog.profile('刷新数据总耗时');if(this.printClick){var reportHeaderDisplay=this.trHeader.style.display;var reportTailDisplay=this.trTail.style.display;try{if(this.clientConfig.header){if(this.clientConfig.gridProp.headerShowFirstPage&&tmpCurPage!=null){if(tmpCurPage==0){this.trHeader.style.display=reportHeaderDisplay;this.setHeader(this.clientConfig.header);}else{this.trHeader.style.display=\"none\";}}else\nthis.setHeader(this.clientConfig.header);}\nif(this.clientConfig.tail){if(this.clientConfig.gridProp.tailShowLastPage&&tmpCurPage!=null&&tmpPages!=null){if(tmpCurPage==tmpPages){this.trTail.style.display=reportTailDisplay;this.setTail(this.clientConfig.tail);}else{this.trTail.style.display=\"none\";}}else\nthis.setTail(this.clientConfig.tail);}\nif(data[0].length!=0){this.printHTML.push(\"<div id=\\\"_frameWith\\\" width=\\\"100%\\\"><\/div>\");var oldHeight1=this.contentTable.style.height,oldHeight2=this.gridPanel.style.height;this.contentTable.style.height=\"\";this.gridPanel.style.height=\"\";this.printHTML.push(this.content.parentNode.innerHTML);this.contentTable.style.height=oldHeight1;this.gridPanel.style.height=oldHeight2;}\nvar canGetNextPage=true;var ret=util.remoteInvokeEx(\"UserService\",\"getCurrentUserQueryMaxRow\",[]);if(ret&&ret.succeeded){var maxRow=ret.result;var integerMaxVlaue=2147483647;if(maxRow!=integerMaxVlaue){if(maxRow<(this.pagePanel.getCurPageNum()+1)*this.pagePanel.getPageRows()){canGetNextPage=false;}}}\nthis.printChartOptions.push(data[4].chartOptions);if(data[0].length!=0&&this.pagePanel.nextpage.disabled==false&&canGetNextPage)\n{this.printHTML.push('<div style=\"page-break-before: always;\"><br style=\"height:0; line-height:0\"><\/div>');this.pagePanel.doNextPage();}else{this.printClick=false;var template=domutils.doGet(\"template/freequery/query/Print.template\");var printWindow=window.open(\"\",\"_blank\",\"resizable=yes,status=yes,scrollbars=yes, toolbar=no,menubar=yes,location=no\");var printDoc=printWindow.document;var cssFiles=[\"querygrid.css\",\"dropdowncontrol.css\",\"dragTable.css\",\"popupmenu.css\",\"base.css\",\"OlapQuery.css\"];this.writeCssFiles(printDoc,cssFiles);if(this.charts&&this.charts.length>0){this.writeChartsHtml(printDoc,this.charts,this.printChartOptions);}\nthis.printChartOptions=null;var targetHTML=this.printHTML.join('');var tpl=template.replace('<div id=\"container\" />','<div id=\"container\">'+targetHTML+'<\/div>');this.printHTML=null;printDoc.write(tpl);printDoc.close();if(this.content.style.overflow==\"auto\"){var container=null;try{container=printDoc.all.container;}catch(ex){}\nif(container){var griddiv=domutils.findElementByClassName(printDoc.body,\"_contentDiv\");if(griddiv){griddiv.style.overflow=\"\";griddiv.style.height=\"\";griddiv.style.width=\"\";}}}}}finally{this.trHeader.style.display=reportHeaderDisplay;this.trTail.style.display=reportTailDisplay;}}};QueryView.prototype.writeChartsHtml=function(doc,charts,printChartOptions){var jsText=domutils.doGet(\"js/freequery/lang/JSLoader.js\"),buf=[];var clen=charts.length,chartDefines=[];for(var i=0;i<clen;i++){chartDefines.push(charts[i].chartDefine);}\nbuf.push('<script type=\"text/javascript\">');buf.push(jsText);buf.push('');buf.push('(function(chartDefines, printChartOptions) {');buf.push(' var onloadFn = window.onload, jsloader;');buf.push(' var setChartPaneSize = function(chartPane, chartDefine) {');buf.push('  if (!chartPane || !chartDefine)');buf.push('   return;');buf.push('  var chartDef = chartDefine.chart || {};');buf.push('  var width = chartDef.width, height = chartDef.height;');buf.push('  if (width) {');buf.push('   chartPane.style.width = width + \"px\";');buf.push('  }');buf.push('  if (height) {');buf.push('   chartPane.style.height = height + \"px\";');buf.push('  }');buf.push(' };');buf.push(' window.onload = function() {');buf.push('  jsloader = new JSLoader({');buf.push('   lang : \"'+jsloader.getLang()+'\"');buf.push('  });');buf.push('  var lang = jsloader.resolve(\"freequery.lang.lang\");');buf.push('  var domutils = jsloader.resolve(\"freequery.lang.domutils\");');buf.push('  var ChartViewUtil = jsloader.resolve(\"smartbi.chart.ChartViewUtil\");');buf.push('  var containerElem = document.getElementById(\"container\");');buf.push('  var graphEls = domutils.getElementsByClassName(\"_graph\", containerElem, \"div\");');buf.push('  var chartCount = chartDefines.length, defs = [];');buf.push('  for ( var index = 0, pageCount = graphEls.length; index < pageCount; index++) {');buf.push('   var chartOptions = printChartOptions[index] || [];');buf.push('   var graphEl = graphEls[index];');buf.push('   graphEl.innerHTML = \"\";');buf.push('   for ( var i = 0; i < chartCount; i++) {');buf.push('    (function(chartDefine, options) {');buf.push('     var def = defs[i] = defs[i] || chartDefine;');buf.push('     var opt = lang.parseJSON(options);');buf.push('     var chartType = def.chartType;');buf.push('     var chartPane = document.createElement(\"div\");');buf.push('     var renderer = document.createElement(\"div\");');buf.push('     chartPane.style.position = \"relative\";');buf.push('     setChartPaneSize(chartPane, def);');buf.push('     graphEl.appendChild(chartPane);');buf.push('     chartPane.appendChild(renderer);');buf.push('     var chart = ChartViewUtil.initChartView(chartType,renderer,null,null,{ enabled : false },null,null);');buf.push('     if(opt.chartex && opt.chartex.chartId) {');buf.push('      opt.chartex.chartId = opt.chartex.chartId + index + i;');buf.push('     }');buf.push('     chart.refresh(chartType, opt);');buf.push('    })(chartDefines[i], chartOptions[i]);');buf.push('   }');buf.push('  }');buf.push('  if (typeof onloadFn === \"function\") {');buf.push('   onloadFn.call(this);');buf.push('  }');buf.push(' };');buf.push('})('+lang.toJSONString(chartDefines)+', '+lang.toJSONString(printChartOptions)+');');buf.push('');buf.push('<\\/script>');doc.write(buf.join('\\n'));};QueryView.prototype.writeCssFiles=function(doc,files){var base=jsloader.baseHref;if(doc&&files&&files.length){for(var i=0,len=files.length;i<len;i++){var cssStr=domutils.doGet(\"css/\"+files[i]);cssStr=cssStr.replace(/url\\(\\.\\.\\/([^)]+)\\)/g,\"url(\"+base+\"\\./$1)\");doc.write(\"<style>\"+cssStr+\"<\/style>\");}}};QueryView.prototype.openWarnings=function(){this.allWarnings=this.getAllWarningsByQVId(this.clientId);}\nQueryView.prototype.getAllWarningsByQVId=function(queryViewClientId){var ret=util.remoteInvokeEx(\"ClientReportService\",\"getWarnings\",[queryViewClientId]);if(ret){return ret.result;}};QueryView.prototype.getAllWarningsByBVId=function(businessViewClientId){var ret=util.remoteInvokeEx(\"BusinessViewService\",\"getWarnings\",[businessViewClientId]);if(ret){return ret.result;}};QueryView.prototype.getWarningById=function(warningId){for(var i=0,len=this.allWarnings.length;i<len;i++){if(this.allWarnings[i].id.toUpperCase()==warningId.toUpperCase()){return this.allWarnings[i];}}\nreturn null;};QueryView.prototype.fireParamChange=function(param){this.onRunMacro.fire(this,this.queryNavigator,\"onParamValueChange\",param);this.onRunMacro.fire(this,this.queryNavigator,\"onParamValueChanged\",param);if(this.selfMacroDisabled)\nreturn;try{MacroService=imports(\"bof.macro.services.MacroService\").getInstance();}catch(ex){;}\nMacroService.fire(this,\"simpleReport\",\"onParamValueChange\",[this,this.queryNavigator,param]);MacroService.fire(this,\"simpleReport\",\"onParamValueChanged\",[this,this.queryNavigator,param]);}\nQueryView.prototype.runRenderTableMacro=function(){this.onRunMacro.fire(this,this.queryNavigator,\"onRenderTable\");if(this.selfMacroDisabled)\nreturn;try{MacroService=imports(\"bof.macro.services.MacroService\").getInstance();}catch(ex){;}\nMacroService.fire(this,\"simpleReport\",\"onRenderTable\",[this,this.queryNavigator]);};QueryView.prototype.runRenderMacro=function(){this.onRunMacro.fire(this,this.queryNavigator,\"onRender\");if(this.selfMacroDisabled)\nreturn;try{MacroService=imports(\"bof.macro.services.MacroService\").getInstance();}catch(ex){;}\nMacroService.fire(this,\"simpleReport\",\"onRender\",[this,this.queryNavigator],true);}\nQueryView.prototype.resetCells=function(){var rows=this.grid.tBody.childNodes.length;var row=this.grid.tBody.firstChild;for(var r=0;r<rows;r++){var cells=row.childNodes.length;var tmpCell=row.firstChild;for(var index=0;index<cells;index++){if(tmpCell.hasAlert||tmpCell.jumpRules){tmpCell.hasSetJumpStyle=false;tmpCell.style.textDecoration='none';tmpCell.style.backgroundColor=\"\";tmpCell.style.color=\"\";if(domutils.hasClassName(tmpCell,\"scrollCellRowHead\")){tmpCell.className=\"scrollCellRowHead\";}else{tmpCell.className=\"\";}\ntmpCell.style.cursor='default';tmpCell.hasAlert=null;tmpCell.jumpRules=null;}\ntmpCell=tmpCell.nextSibling;}\nrow=row.nextSibling;}};QueryView.prototype.resetCharts=function(){if(!this.charts)\nreturn;for(var i=0,len=this.charts.length;i<len;i++){var chart=this.charts[i];chart.jumpRules=null;}}\nQueryView.prototype.setWarning=function(warnings){var fieldId2IndexMap=new Array();for(w in warnings){var r=this.grid.tBody.childNodes[eval(w)+this.grid.getHeaderRows()];var tempWarnings=warnings[w];do{var warningId=null;if(tempWarnings.indexOf(\",\")>0){warningId=tempWarnings.substring(0,tempWarnings.indexOf(\",\"));tempWarnings=tempWarnings.substring(tempWarnings.indexOf(\",\")+1);}else{warningId=tempWarnings;tempWarnings=null;}\nvar warning=this.getWarningById(warningId);if(!warning)\ncontinue;var fm=lang.parseJSON(warning.format);var cols=fm.columns;if(cols){var empty=true;for(var c in cols){var index;if(fieldId2IndexMap[cols[c].id])\nindex=fieldId2IndexMap[cols[c].id];else{index=this.grid.getHeadIndexByFieldId(cols[c].id);fieldId2IndexMap[cols[c].id]=index;}\nvar tmpCell=r.childNodes[index];if(tmpCell){tmpCell.style.backgroundColor=fm.backColor;tmpCell.style.color=fm.frontColor;if(fm.fontSize)\ntmpCell.style.fontSize=fm.fontSize;if(fm.fontStyle&&fm.fontStyle==\"bold\"){tmpCell.style.fontWeight=\"bold\";tmpCell.style.fontStyle=\"\";}else if(fm.fontStyle&&fm.fontStyle==\"italic\"){tmpCell.style.fontWeight=\"\";tmpCell.style.fontStyle=\"italic\";}else if(fm.fontStyle&&fm.fontStyle==\"bi\"){tmpCell.style.fontWeight=\"bold\";tmpCell.style.fontStyle=\"italic\";}else{tmpCell.style.fontWeight=\"\";tmpCell.style.fontStyle=\"\";}\ntmpCell.hasAlert=true;}\nempty=false;}\nif(empty){r.hasAlert=true;r.style.backgroundColor=fm.backColor;r.style.color=fm.frontColor;}}else{r.style.backgroundColor=fm.backColor;r.style.color=fm.frontColor;}}while(tempWarnings)}}\nQueryView.prototype.addField=function(fieldCaption,fieldObj,noRefreshMultiHeader){if(!this.grid)\nthis.initGridPanel();this.doAddField(null,fieldObj,null,noRefreshMultiHeader);this.addFieldProp(fieldObj);this.refreshSelectedFieldList(true,fieldObj.id);}\nQueryView.prototype.deleteField=function(fieldId){this.grid.deleteColByFieldId(fieldId);}\nQueryView.prototype.doFilterCloseUp=function(filter,itemClick){if(filter.fieldId&&itemClick){var selectedId=filter.getSelectedId();if(selectedId==\"更多……\")\nreturn;var ret=false;if(!FilterPanel)\nFilterPanel=jsloader.resolve(\"freequery.control.FilterPanel\");if(FilterPanel.SHOWALL==selectedId)\nret=this.removeAutoCondition(filter.fieldId);else if(FilterPanel.CUSTOMFILTER==selectedId){var filterData=this.getAutoCondition(filter.fieldId);var param={fieldId:filter.fieldId,fieldAlias:filter.fieldObj.alias,dataType:filter.fieldObj.dataType,dropdownValue:\"dropdownValue\",desc:\"\",filterData:filterData};if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var dialogConfig={title:\"定制过滤\",fullName:\"freequery.query.CustomFilterDialog\"};dialogFactory.showDialog(dialogConfig,param,this.refreshCustomFilter,this);if(this.filterPanels)\nthis.filterPanels.resetFlagRefresh(true);return;}else\nret=this.setAutoCondition(filter.fieldId,\"=\",selectedId)\nif(ret)\nthis.refreshData(true);this.setDirty(true);var isFiltering=(FilterPanel.SHOWALL!==selectedId);this.refreshIsFiltering(filter.fieldId,isFiltering);if(this.filterPanels)\nthis.filterPanels.resetFlagRefresh(true);this.onFilterPanelClick.fire(this,filter.fieldId,selectedId);}}\nQueryView.prototype.refreshCustomFilter=function(filterData,fieldId){if(filterData){this.setDirty(true);if(this.setCustomCondition(filterData)){this.refreshData(true);}\nthis.refreshIsFiltering(fieldId,true);this.onCustomFilterClick.fire(this,fieldId,filterData);}}\nQueryView.prototype.refreshIsFiltering=function(fieldId,isFiltering){var gridObj=this.grid.getHeadByFieldId(fieldId);var spans=gridObj.getElementsByTagName(\"span\");var span=null;for(var i=0,len=spans.length;i<len;i++){if(spans[i].className.indexOf(\"table-grid-top-span-sp\")>=0){span=spans[i];break;}}\nif(span){if(isFiltering){span.style.backgroundImage=\"url(img/querygrid/opFilter2.gif)\";span.style.backgroundRepeat=\"no-repeat\";span.style.paddingLeft=\"20px\";}else{span.style.backgroundImage=\"\";span.style.paddingLeft=\"\";}}}\nQueryView.prototype.initFromBizView=function(bizViewId,folderNodeData,fieldsToDisplayInTheBeginning){this.folderNodeData=folderNodeData;var createOK=this.newQuery();if(!createOK)\nreturn;var ret=this.proxyRemoteInvokeEx(\"ClientReportService\",\"initFromBizViewEx\",[this.clientId,bizViewId,true]);if(!(ret&&ret.result)){this.initFail=true;this.doClose();return;}\nthis.bizViewId=bizViewId;this.allWarnings=ret.result[1];this.multiHeaders=ret.result[2]&&lang.parseJSON(ret.result[2]);this.multiHeadersGot=true;this.bizViewType=ret.result[4];this.javaQuerySupports=ret.result[7];this.reportType=this.reportTypes[0];this.paramLayout=ret.result[5]&&lang.parseJSON(ret.result[5]);this.initParamPanel2(this.bizViewId,ret.result[3],this.paramLayout);this.isBatchAddingField=true;this.fDontGetOrderBy=true;this.hasCustomOrderRule=ret.result[9];if(this.hasCustomOrderRule==true){this.viewMenu.setItemDisable(\"_trOrderByPriority\",true);}\nif(this.bizViewType==\"RAWSQL_BUSINESS_VIEW\"||this.bizViewType==\"JAVA_BUSINESS_VIEW\"){if(this.bizViewType==\"RAWSQL_BUSINESS_VIEW\"){this.lockDragColumns(false);}}\nif(this.gridPanel){this.gridPanel.removeAttribute(\"clientId\");}\nif(this.grid){if(this.dragGrid){this.dragGrid.destroy();this.dragGrid=null;}\nthis.grid.destroy();this.grid=null;}\nthis.tablePanel.innerHTML=ret.result[8];this.initGridPanel(this.tablePanel.firstChild);if(this.multiHeaders)\nthis.grid.setHeaderRowIndex(this.multiHeaders[0].length-1);this.initGridProp();var fieldIndex=0;var fieldList=ret.result[0];this.fields=[];for(var fieldId in fieldList){var fieldObj=fieldList[fieldId];this.selectedFieldList[fieldId]=true;this.grid.getCell(this.grid.getHeaderRowIndex(),fieldIndex).field=fieldObj;this.fields.push(fieldObj);fieldIndex++;}\nthis.addFieldsProp(fieldList);if(this.grid){this.grid.gridProp=this.clientConfig.gridProp;this.grid.resetGridBorderColor();this.grid.resetHeaders();}\nif(this.clientConfig.gridProp&&this.clientConfig.gridProp.paddingLeft!=null)\nthis.contentTr.firstChild.style.paddingLeft=this.clientConfig.gridProp.paddingLeft+\"px\";this.grid.multiHeaderModel=this.multiHeaders;this.oldFieldList=fieldList;this.fDontGetOrderBy=false;this.isBatchAddingField=false;this.hasValueMap={};if(fieldsToDisplayInTheBeginning){this.hideFieldsNotIn(fieldsToDisplayInTheBeginning);}\nreturn ret.result;}\nQueryView.prototype.hideFieldsNotIn=function(fieldsToDisplay){if(!fieldsToDisplay)return;var ids=[],delimiter=';';for(var idx in fieldsToDisplay){var id=fieldsToDisplay[idx].id;if(id){ids.push(id);}}\nids=delimiter+ids.join(delimiter)+delimiter;var fieldSelectPanel=this.getFieldSelectPanel();var checkList=fieldSelectPanel.checkList;for(var i=0,len=checkList.length;i<len;i++){var check=checkList[i];var fieldId=check.getAttribute(\"__fieldId\");var key=delimiter+fieldId+delimiter;if(ids.indexOf(key)>-1)continue;if(check.flag===\"2\")check.click();}}\nQueryView.prototype.addFieldToQueryView=function(fieldId,fieldAlias,fieldDesc,bizViewId){var fieldIds=this.grid.getFields();for(var tmpId in fieldIds){if(fieldIds[tmpId]==fieldId)\nreturn;}\nif(!FieldData)\nFieldData=jsloader.resolve(\"freequery.query.FieldData\");var field=new FieldData();field.id=fieldId;field.alias=fieldAlias;field.desc=fieldDesc;if(!Axis)\nAxis=jsloader.resolve(\"freequery.query.Axis\");field.position=Axis.Col;if(this.fieldSelectPanel&&this.fieldSelectPanel.availableFieldList){var fieldList=this.fieldSelectPanel.availableFieldList,originalField;for(var i=0,len=fieldList.length;i<len;i++){if(fieldList[i].id==fieldId){originalField=fieldList[i];break;}}\nif(originalField){for(var p in originalField){if(!field[p])\nfield[p]=originalField[p];}}}\nif((this.bizViewId!=null)&&(this.bizViewId!=\"\")&&(this.bizViewId!=bizViewId)){alert(\"目前不能添加来源于不同可视化查询的字段！\");return false;}\nvar flag=false;if(this.bizViewId==\"\")\nflag=true;this.bizViewId=bizViewId;if(flag){this.setBusinessViewId(this.bizViewId);this.initParamPanel(this.bizViewId);}\nthis.addField(field.alias,field);}\nQueryView.prototype.doFormulaCloseUp=function(gridFormulaPanel){if((gridFormulaPanel.field)&&(gridFormulaPanel.getSelectedId())){this.setDirty(true);var selectedId=gridFormulaPanel.getSelectedId();var selectedText=gridFormulaPanel.selectedValue;this.setFormulaTip(gridFormulaPanel.field.id,selectedId,selectedText);var ret=false;ret=this.setFieldAggregate(gridFormulaPanel.field.id,selectedId);if(ret){if(this.filterPanels)\nthis.filterPanels.resetFlagRefresh(true);this.refreshData(true)}}}\nQueryView.prototype.setFormulaTip=function(fieldId,aggregate,tip){var cell=this.grid.getHeadByFieldId(fieldId);gridObj=cell.getElementsByTagName(\"span\")[0];if(aggregate==\"NULL\"){if(gridObj.isAggregate)\ngridObj.style.fontWeight=\"normal\";gridObj.isAggregate=false;var desc=cell.fieldDesc;if(!desc)\ndesc=\"\";gridObj.title=desc;}else{if(!gridObj.isAggregate)\ngridObj.style.fontWeight=\"bold\";gridObj.isAggregate=true;if(cell.fieldDesc)\ngridObj.title=\"聚合函数:\"+tip+\"\\n\"+cell.fieldDesc;else\ngridObj.title=\"聚合函数:\"+tip;}}\nQueryView.prototype.getMultiHeaders=function(){if(!this.multiHeadersGot){var ret=util.remoteInvokeEx(\"ClientReportService\",\"getMultiHeaders\",[this.clientId]);if(!ret.succeeded){this.multiHeaders=null;}else if(!ret.result){this.multiHeaders=null;}else{this.multiHeaders=lang.parseJSON(ret.result);}\nthis.multiHeadersGot=true;}\nreturn this.multiHeaders;};QueryView.prototype.doAddField=function(fieldSelector,field,fieldDiv,noRefreshMultiHeader){if(!this.isOpenQuery){var f=this.addFieldToQuery(field);if(f){field.dataType=f.dataType;field.aggregateMethod=f.aggregateMethod;}}\nthis.grid.bizViewType=this.bizViewType;this.grid.hasCustomOrderRule=this.hasCustomOrderRule;this.grid.javaQuerySupports=this.javaQuerySupports;var multiHeaders=null;if(!noRefreshMultiHeader||noRefreshMultiHeader==false){var multiHeaders=this.getMultiHeaders();}\nif(fieldDiv){fieldDiv.setAttribute(DragPanel.FlagDragItem,true);this.dragFieldsPanel.registerDragObj(fieldDiv);}\nif(!this.isBatchAddingField)\nvar filterData=this.getAutoCondition(field.id);if(filterData&&filterData.fieldId){var headObj=this.grid.getHeadByFieldId(filterData.fieldId);var spans=headObj.getElementsByTagName(\"span\");for(var i=0,len=spans.length;i<len;i++){if(spans[i].className.indexOf(\"table-grid-top-span-sp\")>=0){var span=spans[i];span.style.backgroundImage=\"url(img/querygrid/opFilter2.gif)\";span.style.backgroundRepeat=\"no-repeat\";span.style.paddingLeft=\"20px\";break;}}}\nif(!this.isBatchAddingField)\nfield.sort=this.getFieldOrderby(field.id);else\nfield.sort=this.getFieldOrderbyFromMem(field.id);this.grid.setFieldSortStyle(field.id,field.sort);var index1=this.getFirstStaticColumnIndex();if(index1!=-1){var index2=this.grid.getColCount()-1;var len=this.grid.mainTable.rows.length;var start=this.grid.getHeaderRowIndex();for(var i=start;i<len;i++){var r=this.grid.mainTable.rows[i];var c1=r.children[index1];var c2=r.children[index2];c1.insertAdjacentElement(\"beforeBegin\",c2);}\nif(start>0){for(var i=start-1;i>-1;i--){var r=this.grid.mainTable.rows[i];var index=0;for(var c=0;c<index1;){if(r.children[index].colSpan&&r.children[index].colSpan>1)\nc+=r.children[index].colSpan;else\n++c;++index;}\nvar index2=r.children.length-1;var c1=r.children[index];var c2=r.children[index2];c1.insertAdjacentElement(\"beforeBegin\",c2);}\nthis.grid.refreshMultiHeader();}}\nthis.setDirty(true);}\nQueryView.prototype.getFieldOrderbyFromMem=function(fieldId){if(this.orderBys){for(var i=0,len=this.orderBys.length;i<len;i++){var orderBy=this.orderBys[i];if(fieldId==orderBy.id)\nreturn orderBy.orderby;}}\nreturn\"NONE\";}\nQueryView.AggregateMethods={\"NULL\":\"原始值\",\"SUM\":\"合计值\",\"MAX\":\"最大值\",\"MIN\":\"最小值\",\"AVG\":\"平均值\",\"COUNT\":\"计数\",\"DISTINCT_COUNT\":\"唯一计数\"}\nQueryView.prototype.doFieldSelectSimpleModel=function(fieldSelector){}\nQueryView.prototype.doGridDrag=function(dragControl,dragObj,targetObj,dragType){if(dragObj==targetObj)\nreturn;if(dragControl==this.dragFieldsPanel){if(dragType!=DragPanel.DragType_AppendChild){var field1=dragObj.field;var field2=targetObj.field;this.grid.swithGridColByFieldId(field1.id,field2.id);}else{}}else if(dragControl==this.dragGrid){var field1=dragObj.field;var field2=targetObj.field;}\nthis.grid.resetTmpCellObj();this.swapFields(this.grid.getFields(true));this.grid.refreshMultiHeader();this.setDirty(true);}\nQueryView.prototype.doDelFieldGrid=function(grid,field){if(!field)\nreturn;if(!this.fDontRemoveFromQueryInClear){if(this.grid.getFields().length<=1){alert(\"不能删除所有字段！\");return false;}\nthis.setDirty(true);this.removeFieldFromQuery(field.id);this.refreshSelectedFieldList(false,field.id);this.refreshData();}}\nQueryView.prototype.refreshSelectedFieldList=function(addField,fieldId){if(addField){this.selectedFieldList[fieldId]=true;this.fieldSelectPanel&&this.fieldSelectPanel.addField(fieldId);}else{this.selectedFieldList[fieldId]=false;this.fieldSelectPanel&&this.fieldSelectPanel.delField(fieldId);}}\nQueryView.prototype.doGridSort=function(obj,field,sort){this.setDirty(true);this.grid.setFieldSortStyle(field.id,sort);if(this.setOrderby(field.id,sort)){this.refreshData(true,false,true);}}\nQueryView.prototype.doGridProp=function(obj,field){if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var prop=this.clientConfig.gridProp.fieldProps[field.id];if(typeof prop==\"undefined\"){if(field.dataType==\"INTEGER\"||field.dataType==\"DOUBLE\")\nprop={width:\"\",align:\"RIGHT\"};else\nprop={width:\"\",align:\"LEFT\"};prop.visible=true;this.clientConfig.gridProp.fieldProps[field.id]=prop;}\nif(typeof prop.visible==\"undefined\"){prop.visible=true;}\nvar fieldCount=0;for(var f in this.selectedFieldList){fieldCount++;}\nvar param=[field,prop,this.clientConfig.gridProp.tableWidthAuto];var gridPropDialog={title:\"自定义字段属性\",fullName:\"freequery.query.CustomGridPropDialog\"};dialogFactory.showDialog(gridPropDialog,param,this.setGridProp,this);}\nQueryView.prototype.setGridProp=function(data){if(data==false)\nreturn;this.setDirty(true);var field=data[0];var gridPropData=data[1];var fieldProps=this.clientConfig.gridProp.fieldProps;var fieldPropTmp={width:gridPropData.fieldWidth,align:gridPropData.alignH,visible:gridPropData.visible};fieldProps[field.id]=fieldPropTmp;this.resetGridProp();this.updateClientConfig();}\nQueryView.prototype.setFieldVisible=function(fieldID,visible){if(visible){this.grid.setColVisibleByFieldID(fieldID,true);}else{this.grid.setColVisibleByFieldID(fieldID,false);var panel=this.getFieldSelectPanel();var cl=panel.checkList;for(var i=0,len=cl.length;i<len;i++){var fieldId=cl[i].getAttribute(\"__fieldId\");if(fieldId==fieldID){cl[i].checked=true;cl[i].indeterminate=true;if(domutils.isChrome()||domutils.isSafari()){cl[i].indeterminate=false;cl[i].nextSibling.style.color=\"gray\";}\ncl[i].flag=\"1\";}}}}\nQueryView.prototype.initGridProp=function(){if(!this.clientConfig.gridProp){var bgColor=\"#FFFFFF\",tableBgColor=\"#fcfaf6\",gridBorderColor=\"#87B3E0\",headerBgColor=\"#CEDDF0\",rowHeaderBgColor=\"#CEDDF0\",headerFontStyle=\"normal\",headerFontColor=\"#000000\",rowHeaderFontColor=\"#000000\",headerFontSize=\"12\",spacingLineBgColor=\"#E6EBFF\",selectedDataBgColor=\"#A0A0FF\",gridDataFontColor=\"#000000\",gridDataFontSize=\"12\";if(!this.gridPropOfSystem){var config=util.getSystemConfig(\"REPORT_BACKGROUND\");if(config)\nbgColor=config;config=util.getSystemConfig(\"REPORT_GRIDDATA_BACKGROUND\");if(config)\ntableBgColor=config;config=util.getSystemConfig(\"REPORT_GRIDBORDER_COLOR\");if(config)\ngridBorderColor=config;config=util.getSystemConfig(\"REPORT_HEADER_BACKGROUND\");if(config)\nheaderBgColor=config;config=util.getSystemConfig(\"REPORT_ROW_HEADER_BACKGROUND\");if(config)\nrowHeaderBgColor=config;config=util.getSystemConfig(\"REPORT_HEADERFONT\");if(config)\nheaderFontStyle=config;config=util.getSystemConfig(\"REPORT_HEADER_FONT_COLOR\");if(config)\nheaderFontColor=config;config=util.getSystemConfig(\"REPORT_ROW_HEADER_FONT_COLOR\");if(config)\nrowHeaderFontColor=config;config=util.getSystemConfig(\"REPORT_HEADER_FONT_SIZE\");if(config)\nheaderFontSize=config;config=util.getSystemConfig(\"REPORT_SPACINGLINE_BACKGROUND\");if(config)\nspacingLineBgColor=config;config=util.getSystemConfig(\"REPORT_SELECTEDDATA_BACKGROUND\");if(config)\nselectedDataBgColor=config;config=util.getSystemConfig(\"REPORT_DATA_FONT_COLOR\");if(config)\ngridDataFontColor=config;config=util.getSystemConfig(\"REPORT_DATA_FONT_SIZE\");if(config)\ngridDataFontSize=config;this.gridPropOfSystem={queryViewBackgroundColor:bgColor,bgColor:tableBgColor,gridBorderColor:gridBorderColor,headerBackgroundColor:headerBgColor,rowHeaderBackgroundColor:rowHeaderBgColor,headerFontSize:headerFontSize,headerFontStyle:headerFontStyle,headerFontColor:headerFontColor,rowHeaderFontColor:rowHeaderFontColor,spColor:spacingLineBgColor,selectedBgColor:selectedDataBgColor,gridDataFontColor:gridDataFontColor,fontSize:gridDataFontSize};}\nvar gridProp={fieldProps:[],queryViewBackgroundColor:this.gridPropOfSystem.queryViewBackgroundColor,bgColor:this.gridPropOfSystem.bgColor,gridBorderColor:this.gridPropOfSystem.gridBorderColor,headerBackgroundColor:this.gridPropOfSystem.headerBackgroundColor,rowHeaderBackgroundColor:this.gridPropOfSystem.rowHeaderBackgroundColor,headerFontSize:this.gridPropOfSystem.headerFontSize,headerFontStyle:this.gridPropOfSystem.headerFontStyle,headerFontColor:this.gridPropOfSystem.headerFontColor,rowHeaderFontColor:this.gridPropOfSystem.rowHeaderFontColor,spColor:this.gridPropOfSystem.spColor,selectedBgColor:this.gridPropOfSystem.selectedBgColor,gridDataFontColor:this.gridPropOfSystem.gridDataFontColor,fontSize:this.gridPropOfSystem.fontSize,mergeZ:false,mergeH:false,mergeMaxCol:1,useSystemDefaultValue:true};this.setBackgroundColor(gridProp.queryViewBackgroundColor);this.clientConfig.gridProp=gridProp;}}\nQueryView.prototype.resetGridProp=function(cells,doOpt){var headerCells=this.grid.mainTable.rows[this.grid.getHeaderRowIndex()].cells;for(var i=0,len=headerCells.length;i<len;i++){var fonts=headerCells[i].getElementsByTagName(\"font\");if(!fonts)\ncontinue;var font=fonts[0];if(!font)\ncontinue;if(this.clientConfig.gridProp&&this.clientConfig.gridProp.tableWidthAuto){domutils.replaceClassName(font,\"table-grid-top-noResizeDivClass\",\"table-grid-top-resizeDivClass\");}else{domutils.replaceClassName(font,\"table-grid-top-resizeDivClass\",\"table-grid-top-noResizeDivClass\");}}\nthis.setAlignCenter(this.clientConfig.gridProp.alignCenter);this.setQueryViewBackgroundColor();if(!doOpt){this.setTableWidthAuto(this.clientConfig.gridProp.tableWidthAuto);}\nif(this.clientConfig.gridProp.paddingLeft!=null)\nthis.contentTr.firstChild.style.paddingLeft=this.clientConfig.gridProp.paddingLeft+\"px\";if(!doOpt){var size=null;if(this.clientConfig.gridProp.fontSize!=null)\nsize=this.clientConfig.gridProp.fontSize+\"px\";this.grid.setFontSize(size);var height=null;if(this.clientConfig.gridProp.rowHeight!=null)\nheight=this.clientConfig.gridProp.rowHeight+\"px\";this.grid.setRowHeight(height);}\nvar fieldProps=this.clientConfig.gridProp.fieldProps;this.resetFieldsVisible();var rows=this.grid.tBody.childNodes.length;var gridCells=cells;if(!gridCells)\ngridCells=this.grid.getGridCells();if(this.bizViewType==\"RAWSQL_BUSINESS_VIEW\"||this.clientConfig.gridProp.lockDragHeader){this.lockDragColumns(false);}else{this.lockDragColumns(true);var mergeMaxCol=this.clientConfig.gridProp.mergeMaxCol;for(var i=0;i<mergeMaxCol;i++){try{var x=this.grid.getCell(this.grid.getHeaderRowIndex(),i);}catch(ex){continue;}\nif(!x)\ncontinue;if(x.isCheckColumn)\nx.setAttribute(DragTable.FLAGDRAG,false);else\nx.setAttribute(DragTable.FLAGDRAG,!this.clientConfig.gridProp.lockDrag);}\nif(this.clientConfig.gridProp.frozenRow&&parseInt(this.clientConfig.gridProp.frozenRow)>0)\nthis.lockDragColumnsOfFrozen(parseInt(this.clientConfig.gridProp.frozenRow));}\nvar rowHeaderIndex=this.grid.getHeaderRows()-1;if(rowHeaderIndex<0)\nreturn;var fieldIndexArr={};for(var id in fieldProps){colIndex=this.grid.getHeadIndexByFieldId(id);fieldIndexArr[id]=colIndex;}\nrow=gridCells[rowHeaderIndex];if(row){for(var id in fieldProps){var fieldProp=fieldProps[id];var colIndex=fieldIndexArr[id];if(colIndex==-1)\ncontinue;if(row[colIndex])\nrow[colIndex].firstChild.style.width=fieldProp.width;}\nthis.resetTableWidth();}\nif(rowHeaderIndex==rows-1)\nreturn;var tmpRow=gridCells[rowHeaderIndex+1];var count=0;for(var id in fieldProps){var fieldProp=fieldProps[id];var colIndex=fieldIndexArr[id];if(colIndex==-1)\ncontinue;cellAlign=tmpRow[colIndex].align;if((cellAlign==\"\"&&fieldProp.align==\"LEFT\")||(cellAlign==fieldProp.align))\ncontinue;for(var i=rowHeaderIndex+1;i<rows;i++){gridCells[i][colIndex].align=fieldProp.align;}}\nthis.grid.resetHeaders();}\nQueryView.prototype.resetFieldsVisible=function(){var fieldProps=this.clientConfig.gridProp.fieldProps;for(var id in fieldProps){var fieldProp=fieldProps[id];if(typeof fieldProp.visible==\"undefined\"||fieldProp.visible){}else{this.setFieldVisible(id,false);}}}\nQueryView.prototype.resetTableWidth=function(){if(!this.clientConfig.gridProp||!this.clientConfig.gridProp.tableWidthAuto)\nthis.grid.mainTable.style.width=50;}\nQueryView.prototype.resetFieldPropWidth=function(){var fieldProps=this.clientConfig.gridProp.fieldProps;var rows=this.grid.mainTable.rows;var rowHeaderIndex=this.grid.getHeaderRows()-1;if(rowHeaderIndex<0)\nreturn;var row=rows[rowHeaderIndex];for(var id in fieldProps){var fieldProp=fieldProps[id];var colIndex=this.grid.getHeadIndexByFieldId(id);if(colIndex==-1)\ncontinue;var tmpWidth=row.cells[colIndex].offsetWidth-3;if(tmpWidth>=0)\nfieldProp.width=tmpWidth;}\nthis.updateClientConfig();}\nQueryView.prototype.updateClientConfig=function(){util.remoteInvokeEx(\"ClientReportService\",\"setClientConfig\",[this.clientId,lang.toJSONString(this.clientConfig)]);}\nQueryView.prototype.addFieldProp=function(fieldObj){if(this.clientConfig.gridProp.fieldProps)\nvar prop=this.clientConfig.gridProp.fieldProps[fieldObj.id];else\nthis.clientConfig.gridProp.fieldProps=[];if(typeof prop==\"undefined\"){var tmpWidth=80;var rowHeaderIndex=this.grid.getHeaderRows()-1;var colIndex=this.grid.getHeadIndexByFieldId(fieldObj.id);if(rowHeaderIndex>=0&&colIndex!=-1){var rows=this.grid.mainTable.rows;tmpWidth=rows[rowHeaderIndex].cells[colIndex].firstChild.offsetWidth;}\nif(tmpWidth<80)\ntmpWidth=80;if(fieldObj.dataType==\"INTEGER\"||fieldObj.dataType==\"DOUBLE\")\nprop={width:tmpWidth,align:\"RIGHT\"};else\nprop={width:tmpWidth,align:\"LEFT\"};this.clientConfig.gridProp.fieldProps[fieldObj.id]=prop;this.updateClientConfig();}}\nQueryView.prototype.addFieldsProp=function(fieldsObj){if(!this.clientConfig.gridProp.fieldProps)\nthis.clientConfig.gridProp.fieldProps=[];var props=[];var rowHeaderIndex=this.grid.getHeaderRows()-1;var rows=this.grid.mainTable.rows;var row=rows[rowHeaderIndex];var cells=[];var cell=row.firstChild;var colIndexes={};while(cell){if(cell.field)\ncolIndexes[cell.field.id]=cells.length;cells.push(cell);cell=cell.nextSibling;}\nvar updated=false;for(var fieldId in fieldsObj){var fieldObj=fieldsObj[fieldId];var prop=this.clientConfig.gridProp.fieldProps[fieldObj.id];if(typeof prop==\"undefined\"){var tmpWidth=80;var colIndex=colIndexes[fieldObj.id];if(rowHeaderIndex>=0&&colIndex!=-1){tmpWidth=cells[colIndex].firstChild.offsetWidth;}\nif(tmpWidth<80)\ntmpWidth=80;if(fieldObj.dataType==\"INTEGER\"||fieldObj.dataType==\"DOUBLE\")\nprop={width:tmpWidth,align:\"RIGHT\"};else\nprop={width:tmpWidth,align:\"LEFT\"};this.clientConfig.gridProp.fieldProps[fieldObj.id]=prop;updated=true;}}\nif(updated)\nthis.updateClientConfig();}\nQueryView.prototype.doOnResizeend=function(obj,span){this.resetFieldPropWidth();}\nQueryView.prototype.doGridFormula_old=function(obj,field,btn,caption){if(!this.gridFormulaPanel){if(!DropDownBox)\nDropDownBox=jsloader.resolve(\"freequery.control.DropDownBox\");this.gridFormulaPanel=new DropDownBox(this.panel);this.gridFormulaPanel.onCloseUp.subscribe(this.doFormulaCloseUp,this);}\nthis.gridFormulaPanel.clear();var dataType=\"\";if(field.businessViewField){dataType=field.businessViewField.dataType;}\nelse{dataType=field.dataType;}\nif(dataType.toUpperCase()==\"REAL\"||dataType.toUpperCase().indexOf(\"INT\")>=0||dataType.toUpperCase()==\"DOUBLE\"||dataType.toUpperCase()==\"FLOAT\"){this.gridFormulaPanel.insertItem(\"NULL\",\"原始值\");this.gridFormulaPanel.insertItem(\"SUM\",\"合计值\");this.gridFormulaPanel.insertItem(\"MAX\",\"最大值\");this.gridFormulaPanel.insertItem(\"MIN\",\"最小值\");this.gridFormulaPanel.insertItem(\"AVG\",\"平均值\");this.gridFormulaPanel.insertItem(\"COUNT\",\"计数\");this.gridFormulaPanel.insertItem(\"DISTINCT_COUNT\",\"唯一计数\");}else if(dataType.toUpperCase()==\"DATE\"||dataType.toUpperCase()==\"TIME\"||dataType.toUpperCase()==\"DATETIME\"){this.gridFormulaPanel.insertItem(\"NULL\",\"原始值\");this.gridFormulaPanel.insertItem(\"COUNT\",\"计数\");this.gridFormulaPanel.insertItem(\"DISTINCT_COUNT\",\"唯一计数\");}else{this.gridFormulaPanel.insertItem(\"NULL\",\"原始值\");this.gridFormulaPanel.insertItem(\"COUNT\",\"计数\");this.gridFormulaPanel.insertItem(\"DISTINCT_COUNT\",\"唯一计数\");}\nthis.gridFormulaPanel.field=field;this.gridFormulaPanel.captionObj=caption;var el=btn.parentNode;var p=util.getAbsolutePos(el,this.panel);var os=Math.max(this.contentTr.firstChild.style.paddingLeft.match(/\\d+/g)[0]-10,0);var p;if(domutils.isIE())\np=util.getAbsolutePos(el,this.panel);else\np=util.getAbsolutePosScroll(el,document.body);var y=p.y+el.offsetHeight;if(domutils.isIE()){y-=(this.content.scrollTop-5);}\nthis.gridFormulaPanel.dropDown(p.x-this.content.scrollLeft+1+os,y,el.offsetWidth,150);}\nQueryView.prototype.doGridFormula=function(field,selectedId,selectedText){this.setDirty(true);this.setFormulaTip(field.id,selectedId,selectedText);var ret=false;ret=this.setFieldAggregate(field.id,selectedId);if(ret){if(this.filterPanels)\nthis.filterPanels.resetFlagRefresh(true);this.refreshData(true)}}\nQueryView.prototype.doGridFilter_old=function(obj,field,btn){if(!this.filterPanels)\nthis.initFilterPanel();var filter=this.filterPanels.getItemByFieldId(field.id);if(!filter){filter=this.filterPanels.addItem(field);filter.onCloseUp.subscribe(this.doFilterCloseUp,this);if(this.pagePanel){var data=this.getFieldDistinctValues(field.id);if(data)\nfilter.fillData(data);}}\nif(filter.flag_Refresh){filter.clear();filter.initData();filter.flag_Refresh=false;var data=this.getFieldDistinctValues(field.id);if(data)\nfilter.fillData(data);}\nvar el=btn.parentNode;var p;if(domutils.isIE())\np=util.getAbsolutePos(el,this.panel);else\np=util.getAbsolutePosScroll(el,document.body);var y=p.y+el.offsetHeight;if(domutils.isIE()){y-=(this.content.scrollTop-5);}\nif(this.contentTr.firstChild.style.paddingLeft){var os=Math.max(this.contentTr.firstChild.style.paddingLeft.match(/\\d+/g)[0]-10,0);filter.dropDown(p.x-this.content.scrollLeft+1+os,y,el.offsetWidth,150);}else\nfilter.dropDown(p.x-this.content.scrollLeft+1,y,el.offsetWidth,150);}\nQueryView.prototype.doGridFilter=function(fieldId,selectedId,fieldAlias,fieldDataType){if(selectedId==\"更多……\")\nreturn;var ret=false;if(\"SHOWALL\"==selectedId)\nret=this.removeAutoCondition(fieldId);else if(\"CUSTOMFILTER\"==selectedId){var filterData=this.getAutoCondition(fieldId);var param={fieldId:fieldId,fieldAlias:fieldAlias,dataType:fieldDataType,dropdownValue:\"dropdownValue\",desc:\"\",filterData:filterData};if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var dialogConfig={title:\"定制过滤\",fullName:\"freequery.query.CustomFilterDialog\"};dialogFactory.showDialog(dialogConfig,param,this.refreshCustomFilter,this);if(this.filterPanels)\nthis.filterPanels.resetFlagRefresh(true);return;}else\nret=this.setAutoCondition(fieldId,\"=\",selectedId)\nif(ret)\nthis.refreshData(true);this.setDirty(true);var isFiltering=(\"SHOWALL\"!==selectedId);this.refreshIsFiltering(fieldId,isFiltering);if(this.filterPanels)\nthis.filterPanels.resetFlagRefresh(true);this.onFilterPanelClick.fire(this,fieldId,selectedId);}\nQueryView.prototype.doGridNewColumn=function(grid,cellObj){cellObj.setAttribute(DragTable.FLAGDRAG,true);this.dragGrid.registerDragObj(cellObj);}\nQueryView.prototype.doAfterNewCol=function(cellObj){if(this.viewMenu){this.doViewMenuCloseUp();}}\nQueryView.prototype.isNeedJumpMenu=function(){var value=util.getSystemConfig(\"SINGLE_JUMP_NEED_MENU\");return(value==\"true\");}\nQueryView.prototype.isNeedDetect=function(){var value=util.getSystemConfig(\"RESOURCES_DETECT\");return(value==\"true\");}\nQueryView.prototype.doOnLinkClick=function(grid,cellObj,e){if(this.alreadyClick)\nreturn;if(!(cellObj&&cellObj.jumpRules)){return;}\nvar tempArr=cellObj.jumpRules;var interArr=[];for(var t in tempArr){interArr[tempArr[t].alias]=tempArr[t];}\nvar retArr=[];for(var s in interArr){retArr.push(interArr[s]);}\ncellObj.jumpRules=retArr;this.setCurrentLinkCol(cellObj);this.checkedRowsIndex=this.showCheckColumn?this.grid.getCheckedRowsIndex():null;if((cellObj.jumpRules.length==1)&&(!this.needJumpMenu)){var me=cellObj.jumpRules[0];if(!this.showFieldSelectDialog(me))\nreturn;var srcQuery=this;var context=this.queryNavigator;if(domutils.isIE7()){executeAction(me.action,me,srcQuery,context);}else{setTimeout(function(){executeAction(me.action,me,srcQuery,context);},1);}\nreturn;}\nthis.jumpRuleMenu.clear();this.handler.jumpRules=new Array();for(var i=0,len=cellObj.jumpRules.length;i<len;i++){var tmpRule=cellObj.jumpRules[i];this.jumpRuleMenu.createMenuItem(tmpRule.alias,tmpRule.alias);this.handler.jumpRules[tmpRule.alias]=tmpRule;}\nthis.jumpRuleMenu.popup(e);}\nQueryView.prototype.doTitleLinkClick=function(panel,e){e=eventutil.getEvent();linkObj=e.target;this.doOnLinkClick(this.grid,linkObj,e);}\nQueryView.prototype.showFieldSelectDialog=function(jumpRule){if(!jumpRule||!(jumpRule.isStaticTransmitData||jumpRule.showSelectReportFieldsDialog))\nreturn true;this.fieldSelectDialogIsOkClicked=false;if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var dialogConfig={};dialogConfig.title=\"设置列数据传递的相关信息\";dialogConfig.fullName=\"freequery.query.FieldSelectDialog\";dialogConfig.size=dialogFactory.size.MIDDLE;var fields=this.grid.getFieldObjects();var params=[fields,jumpRule];this.onShowFieldSelectDialog.fire(this,params);dialogFactory.showDialog(dialogConfig,params,this.doFieldSelectOK,this);return this.fieldSelectDialogIsOkClicked;}\nQueryView.prototype.doFieldSelectOK=function(succeed,selectedFields,relatedFieldIds,jumpRule){this.fieldSelectDialogIsOkClicked=!!succeed;if(this.fieldSelectDialogIsOkClicked&&jumpRule){jumpRule.selectedFieldDatas=selectedFields;if(relatedFieldIds)\njumpRule.relatedFieldDatas=relatedFieldIds;if(this.showCheckColumn){jumpRule.checkColumnFlag=this.uncheckedRowIndexs?this.uncheckedRowIndexs.flag:1;jumpRule.uncheckedRowIndexs=this.getUncheckedRowIndexs();}}}\nQueryView.prototype.doCheckColClick=function(grid,checkbox,isHeader){this.uncheckedRowIndexs=this.uncheckedRowIndexs||[];if(this.rowSelectRelatedField)\nthis.rowSelectRelatedField.values=this.rowSelectRelatedField.values||[];if(isHeader){var headerBox=checkbox;var flag=headerBox.flag-0;switch(flag){case 0:this.uncheckedRowIndexs=[];if(this.rowSelectRelatedField)\nthis.rowSelectRelatedField.values=[];break;case 1:this.uncheckedRowIndexs=[];if(this.rowSelectRelatedField)\nthis.rowSelectRelatedField.values=[];break;case 2:break;}\nthis.uncheckedRowIndexs.flag=flag;}else{var headerBox=grid.headerCheckBox;if(headerBox&&headerBox.flag==1){headerBox.checked=true;headerBox.indeterminate=true;headerBox.flag=\"2\";}\nthis.uncheckedRowIndexs.flag=headerBox.flag-0;var currPage=this.pagePanel.getCurPageNum();var pageRows=this.pagePanel.getPageRows();var rowIndex=checkbox.rowIndex-grid.getHeaderRowIndex()-1;rowIndex=rowIndex+(currPage-1)*pageRows;this.uncheckedRowIndexs[rowIndex]=!checkbox.checked;if(this.rowSelectRelatedField&&(this.rowSelectRelatedField.colIndex!==undefined)){var col=this.rowSelectRelatedField.colIndex;var row=checkbox.rowIndex;var value=this.grid.tmpCellData[row][col];this.rowSelectRelatedField.values[rowIndex]=value;}}}\nQueryView.prototype.updateCheckedStatus=function(){if(!this.uncheckedRowIndexs||this.uncheckedRowIndexs.flag==1)\nreturn;var checkColIndex=this.grid.getCheckColumnIndex();if(checkColIndex==-1)\nreturn;var currPage=this.pagePanel.getCurPageNum();var pageRows=this.pagePanel.getPageRows();var rows=(currPage-1)*pageRows;var headerRows=this.grid.getHeaderRows();for(var i=headerRows,j=this.grid.getRowCount();i<j;i++){var headerChecked=this.grid.headerCheckBox.checked;var rowIndex=i-headerRows+rows;var cell=this.grid.getCell(i,checkColIndex);var child=cell.firstChild;if(child&&child.type&&child.type.toLowerCase()==\"checkbox\"){if(this.uncheckedRowIndexs[rowIndex]===undefined)\nchild.checked=headerChecked;else\nchild.checked=!this.uncheckedRowIndexs[rowIndex];}}}\nQueryView.prototype.doPage=function(pagePanel,page,refresh){if(isNaN(pagePanel.getAllRowCount())){this.callRowCountErrorFlag=false;util.remoteInvokeEx(\"ClientReportService\",\"getTotalRowsCountWithFuture\",[this.clientId,page-1],this.callbackGetTotalRowsCount,this);}\nthis.refreshData(true,!refresh,false);this.setDirty(true);}\nQueryView.prototype.newQuery=function(){var ret=this.proxyRemoteInvokeEx(\"ClientReportService\",\"createSimpleReport\",[]);if(ret&&ret.succeeded){this.reset();this.clientId=ret.result.clientId;this.paramPanelId=ret.result.parameterPanelId;if(this.paramPanelObj)\nthis.paramPanelObj.clientId=ret.result.parameterPanelId;this.defaultPageRows=ret.result.rowsPerPage;var queryData=ret.result.reportBean;var tempClientConfig=queryData.clientConfig;if(!tempClientConfig){tempClientConfig={};}else{tempClientConfig=lang.parseJSON(tempClientConfig);}\nif(tempClientConfig&&tempClientConfig.gridProp&&this.clientConfig&&this.clientConfig.gridProp){this.clientConfig.gridProp.defaultRow=tempClientConfig.gridProp.defaultRow;}\nthis.setHeader(\"CurrentReportName()\");this.autoRefresh=queryData.autoRefresh;if(queryData.layout){var layout=lang.parseJSON(queryData.layout);this.viewState=layout.viewState;this.initLayout(queryData.layout);}\nreturn ret.result;}else{return null;}}\nQueryView.prototype.openQueryEx=function(queryId){var ret;if(this.getPageId()){ret=util.remoteInvoke(\"ClientReportService\",\"openReportHTMLInPage\",[queryId,this.getPageId()]);}else{ret=util.remoteInvoke(\"ClientReportService\",\"openReportHTML\",[queryId]);}\nif(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.getQuery=function(clientId){var ret=util.remoteInvoke(\"ClientReportService\",\"getQuery\",[clientId]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.openQuery=function(queryId){var ret=util.remoteInvoke(\"ClientReportService\",\"openQuery\",[queryId]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.getReportBean=function(){var ret=util.remoteInvoke(\"ClientReportService\",\"getReportBean\",[this.clientId]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.setBusinessViewId=function(bizViewId){var ret=util.remoteInvoke(\"ClientReportService\",\"setBusinessViewId\",[this.clientId,bizViewId]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.addFieldToQuery=function(field){if(this.isBatchAddingField)\nreturn this.tmpAddedFieldList[field.id];var ret=util.remoteInvoke(\"ClientReportService\",\"createReportField\",[this.clientId,field.id]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.removeFieldFromQuery=function(fieldId){var ret=util.remoteInvoke(\"ClientReportService\",\"removeField\",[this.clientId,fieldId]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.removeAllFieldsFromQuery=function(){var ret=util.remoteInvoke(\"ClientReportService\",\"removeAllFields\",[this.clientId]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.executeQuery=function(executeInMem){if(this.curPage==null)\nthis.curPage=0;if(this.countTotalRows!=0){boflog.profile(\"getTotalRowsCount\");this.callRowCountErrorFlag=false;util.remoteInvoke(\"ClientReportService\",\"getTotalRowsCountWithFuture\",[this.clientId,this.curPage],this.callbackGetTotalRowsCount,this);}\nthis.pagePanel.setAllRowCount(PagePanel.maxPageNumber);this.pagePanel.generatePages(PagePanel.maxPageNumber);var allRowNums=PagePanel.maxPageNumber;var pages=PagePanel.maxPageNumber;this.curPage=this.pagePanel.getCurPageNum()-1;if(!(0<=this.curPage&&this.curPage<pages)){this.curPage=0;this.pagePanel.setCurPageNum(this.curPage+1);}\nif(0<=this.curPage&&this.curPage<pages){this.getReportData(this.curPage);}else{alert(\"输入的页码超过范围，请重新输入页码！\");}\nif(this.clientConfig.header){this.setHeader(this.clientConfig.header);}\nif(this.clientConfig.tail){this.setTail(this.clientConfig.tail);}\nboflog.profile('callbackExecuteQuery');}\nQueryView.prototype.getReportData=function(pageNum){pageNum=pageNum||0;boflog.profile(\"RemoteGetReportData\");this.callDataErrorFlag=false;if(!this.params||!this.params.length){this.setViewVisible(this.paramLay,false);}\nif(this.getPageId()){var ret=util.remoteInvoke(\"ClientReportService\",\"getReportDataWithFutureInPage\",[this.clientId,pageNum,this.getPageId(),true],this.callbackGetReportData,this);}else{var ret=util.remoteInvoke(\"ClientReportService\",\"getReportDataWithFuture\",[this.clientId,pageNum],this.callbackGetReportData,this);}}\nQueryView.prototype.getOriginalData=function(){var ret=util.remoteInvoke(\"ClientReportService\",\"getRawLastReportData\",[this.clientId]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.cancelQuery=function(){var ret=util.remoteInvoke(\"ClientReportService\",\"cancelQuery\",[this.clientId]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.setRowsPerPage=function(pageRows){if(isNaN(pageRows)&&!isNaN(this.defaultPageRows)){pageRows=this.defaultPageRows;this.pagePanel.setPageRows(pageRows);}\nvar ret=util.remoteInvoke(\"ClientReportService\",\"setRowsPerPage\",[this.clientId,pageRows]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.setOrderby=function(fieldId,orderType){var ret=util.remoteInvoke(\"ClientReportService\",\"setOrderByType\",[this.clientId,fieldId,orderType]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.swapFields=function(fieldIds){var ret=util.remoteInvoke(\"ClientReportService\",\"swapFields\",[this.clientId,fieldIds]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.saveAsQuery=function(queryName,queryAlias,queryDesc,folderId,preview){var ret=util.remoteInvoke(\"ClientReportService\",\"saveAs\",[this.clientId,queryName,queryAlias,queryDesc,folderId]);this.onSaveAsQuery.fire(this,ret.succeeded&&ret.result);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);return false;}}\nQueryView.prototype.overwriteQuery=function(replacedReportId,fileDesc){var ret=util.remoteInvoke(\"ClientReportService\",\"overwriteQuery\",[this.clientId,replacedReportId,fileDesc]);this.onOverwriteQuery.fire(this,ret.succeeded&&ret.result);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);return false;}}\nQueryView.prototype.updateDesc=function(reportId,desc){var ret=util.remoteInvoke(\"ClientReportService\",\"updateDesc\",[this.clientId,reportId,desc]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);return false;}}\nQueryView.prototype.setFieldAggregate=function(fieldId,aggregate){var ret=util.remoteInvoke(\"ClientReportService\",\"setFieldAggregate\",[this.clientId,fieldId,aggregate]);if(ret.succeeded){this.initSubtotalSetting();var found=false;for(var i=0,len=this.subtotalSetting.YAxis.length;i<len;i++){var axis=this.subtotalSetting.YAxis[i];if(axis.id==fieldId){found=true;axis.type=aggregate;break;}}\nif(!found){this.subtotalSetting.YAxis.push({'id':fieldId,'type':aggregate});}\nreturn ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.getFieldOrderby=function(fieldId){if(this.fDontGetOrderBy){for(var i=0,len=this.orderBys.length;i<len;i++){if(this.orderBys[i].id==fieldId)\nreturn this.orderBys[i].orderby;}}else{var ret=util.remoteInvoke(\"ClientReportService\",\"getOrderByType\",[this.clientId,fieldId]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}}\nQueryView.prototype.setAutoRefreshStatus=function(autoRefresh){if(!this.clientId)\nreturn;var ret=util.remoteInvoke(\"ClientReportService\",\"setAutoRefresh\",[this.clientId,autoRefresh]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.hiddenParameterByName=function(paramName){var paramId='OutputParameter.'+this.bizViewId+'.'+paramName;this.paramPanelObj.hiddenParameterById(paramId);}\nQueryView.prototype.getParameterList=function(){var ret=util.remoteInvoke(\"ClientReportService\",\"getParameterList\",[this.clientId]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.addParamToReport=function(paramId,paramAlias){var ret=util.remoteInvoke(\"ClientReportService\",\"addNewParam\",[this.clientId,paramId,paramAlias]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.getParamDefaultValue=function(paramId){return this.paramPanelObj.getParamDefaultValue(paramId);}\nQueryView.prototype.setParamValue=function(paramId,paramValue,paramDisplayValue){this.paramHasChangedSinceLastRefresh=true;for(var i=0,len=this.params.length;i<len;i++){var tmpParam=this.params[i];if(paramId==tmpParam.id){tmpParam.value=paramValue;tmpParam.displayValue=paramDisplayValue;this.hasValueMap[tmpParam.name]=true;}}\nif(this.paramPanelObj)\nreturn this.paramPanelObj.setParamValue(paramId,paramValue,paramDisplayValue);else\nutil.remoteInvoke(\"ClientReportService\",\"setParamValue\",[this.clientId,paramId,paramValue,paramDisplayValue]);}\nQueryView.prototype.getFieldDistinctValues=function(fieldId){var maxShowNum=30;var ret=util.remoteInvoke(\"ClientReportService\",\"getFieldUniqueValues\",[this.clientId,fieldId,maxShowNum]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.setAutoCondition=function(fieldId,operator,value){var ret=util.remoteInvoke(\"ClientReportService\",\"setAutoCondition\",[this.clientId,fieldId,operator,value]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.setCustomCondition=function(filterData){var ret=util.remoteInvoke(\"ClientReportService\",\"setCustomCondition\",[this.clientId,filterData]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.addFilterCondition=function(fieldId,filterValue){var ret=util.remoteInvoke(\"ClientReportService\",\"addFilterCondition\",[this.clientId,fieldId,filterValue]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.removeAutoCondition=function(fieldId){var ret=util.remoteInvoke(\"ClientReportService\",\"removeAutoCondition\",[this.clientId,fieldId]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.getAutoCondition=function(fieldId){var ret=util.remoteInvoke(\"ClientReportService\",\"getAutoConditon\",[this.clientId,fieldId]);if(ret.succeeded){return ret.result;}else{modalWindow.showServerError(ret);}}\nQueryView.prototype.doPrint=function(e){var ret=util.remoteInvoke(\"ClientReportService\",\"beforeExecute\",[this.queryId]);if(ret&&(ret.result===false)){var status=alert(\"后台在跑批，查询有可能有误，是否继续查询？\",null,modalWindow.MB_YESNO|modalWindow.MB_ICONQUESTION);if(modalWindow.ID_YES!=status){return;}}\nthis.printHTML=new Array();this.printChartOptions=new Array();this.printClick=true;if(this.pagePanel&&this.pagePanel.curpage.value!=1){this.pagePanel.doFirstPage();}\nvar ret=util.remoteInvoke(\"ClientReportService\",\"isNeedRefresh\",[this.clientId]);var needExecuteQuery=ret&&ret.result;this.refreshData(true,!needExecuteQuery);};QueryView.prototype.getChartSettingWindow=function(options){var ChartSettingWindow=jsloader.resolve(\"smartbi.chartsetting.ChartSettingWizardWindow\");var t=this,settingWindow;options=options||{};options.provider={getFields:function(){return t.fields;}};options.reportType=\"SIMPLE_REPORT\";settingWindow=new ChartSettingWindow(options);return settingWindow;};QueryView.prototype.doCreateChart=function(e){var t=this,settingWindow=this.getChartSettingWindow(),step=0;settingWindow.onSave.subscribe(function(win){var chartType=win.chartDefine.chartType,chartDefine=win.chartDefine.chartDefine;var ret=util.remoteInvokeEx(\"ClientReportService\",\"createChart\",[t.clientId,chartType,chartDefine]),rtn;if(ret&&(rtn=ret.result)){var chartOptions=lang.parseJSON(rtn[0]),chartId=rtn[1];var chart=t.addChart(chartType,chartOptions,chartId,chartDefine,settingWindow,rtn[2]);chart.refresh(chartType,chartOptions);t.setDirty(true);t.setViewVisible(t.graphPanel,true);if(!t.viewMenu)\nt.initViewMenu();t.viewMenu.setItemChecked(\"_graph\",true);}},t);settingWindow.show(step);};QueryView.prototype.addChart=function(chartType,options,chartId,chartDefine,settingWindow,chartClientId){if(!this.charts){this.resetChartAlign(this.clientConfig.chartAlign);this.charts=[];}\nif(!settingWindow){settingWindow=this.getChartSettingWindow({chartDefine:{chartType:chartType,chartDefine:chartDefine,id:chartId,resId:this.getResourceId()}});}\nsettingWindow.onSave.unsubscribeAll();var t=this,chart;var chartPane=document.createElement('div'),renderTo=document.createElement('div');chartPane.style.position='relative';t.setChartPaneSize(chartPane,chartDefine);t.graphPanel.appendChild(chartPane);chartPane.appendChild(renderTo);chart=ChartViewUtil.initChartView(chartType,renderTo,chartClientId,null,null,settingWindow,this);chart._chartType=chartType;chart._chartOptions=options;chart._chartId=chartId;chart._chartDefine=chartDefine;chart._chartClientId=chartClientId;t.charts.push(chart);var doChartSettingChanged=function(needRefresh,define){var ret,chartType=define.chartType,chartDefine=define.chartDefine;chart._chartType=chartType;ret=util.remoteInvokeEx(\"ClientReportService\",\"updateChart\",[t.clientId,chart._chartId,chartType,chartDefine]);if(ret&&ret.result){t.setChartPaneSize(chartPane,chartDefine);if(needRefresh){var options=lang.parseJSON(ret.result);chart._chartOptions=options;chart.refresh(chartType,options);}}};var test={};chart.on('ChartClick',function(type,e,chart){t.doChartClick(type,e,chart);});chart.on('PointClick',function(type,e,point,chart){t.doChartPointClick(type,e,point,chart)});chart.on('SeriesClick',function(type,e,series,chart){t.doSeriesClick(type,e,series,chart);});chart.on('SettingChanged',function(type,needRefresh,chart){doChartSettingChanged(needRefresh,chart.chartDefine);});chart.on('Delete',function(type,chart){t.doDeleteChart(chart,chartId);});chart.on('BeforeRenderer',function(type,chart){});chart.on('AfterRenderer',function(type,chart){});return chart;}\nQueryView.prototype.setChartPaneSize=function(chartPane,chartDefine){if(!chartPane||!chartDefine)return;var def=('string'===typeof chartDefine)?lang.parseJSON(chartDefine):chartDefine;var chartDef=def.chart||{},width=chartDef.width,height=chartDef.height;if(width){chartPane.style.width=width+'px';}\nif(height){chartPane.style.height=height+'px';}}\nQueryView.prototype.getChartById=function(id){if(this.charts){for(var i=0,len=this.charts.length;i<len;i++){var chart=this.charts[i];if(chart.chartDefine.id==id)\nreturn chart;}}\nreturn null;}\nQueryView.prototype.doChartClick=function(type,e,chart){this.onChartClick.fire(e,chart);}\nQueryView.prototype.doChartPointClick=function(type,e,point,chart){this.onPointClick.fire(e,point,chart);}\nQueryView.prototype.doSeriesClick=function(type,e,series,chart){this.onSeriesClick.fire(e,series,chart);}\nQueryView.prototype.doDeleteChart=function(chart,chartId){if(this.charts){for(var i=0,len=this.charts.length;i<len;i++){if(this.charts[i]==chart){util.remoteInvokeEx(\"ClientReportService\",\"removeChart\",[this.clientId,chartId]);var chartRootPane=eval(chart.viewOptions.renderTo).parentNode;chart.destroy();this.charts.splice(i,1);if(chartRootPane){domutils.destroyNode(chartRootPane);chartRootPane=null;}\nthis.setDirty(true);break;}}}};QueryView.prototype.initCharts=function(charts,chartOptions){if(!charts||!chartOptions){return;}\nvar isUpdate=!!this.charts;for(var i=0,len=chartOptions.length;i<len;i++){var chartDefine=charts[i].chartDefine;var chartId=chartDefine.id;if(isUpdate){var chart=this.charts[i];if(chart){chart._chartId=chartId;if(chart.chartDefine){chart.chartDefine.id=chartId;}}}else{var chartType=chartDefine.chartType,options=lang.parseJSON(chartOptions[i]);this.addChart(chartType,options,chartId,chartDefine.chartDefine,null,charts[i].clientId);}}};QueryView.prototype.goForward=function(){this.queryNavigator.goForward();var activeQuery=this.queryNavigator.getActiveQuery();if(activeQuery){activeQuery.refreshAllChart();}};QueryView.prototype.goBackward=function(){this.queryNavigator.goBackward();var activeQuery=this.queryNavigator.getActiveQuery();if(activeQuery){activeQuery.refreshAllChart();}};QueryView.prototype.resetForwardBackwardState=function(){this.disableForward(false);this.disableBackward(false);if(this.queryNavigator){if(this.queryNavigator.getQueryCount()<=1){this.disableForward(true);this.disableBackward(true);return;}else{if(this.queryNavigator.curStep<=0){this.disableBackward(true);}\nif(this.queryNavigator.curStep>=this.queryNavigator.getQueryCount()-1){this.disableForward(true);}}}};QueryView.prototype.disableForward=function(b){this.btnForward.disabled=b;if(b)\ndomutils.replaceClassName(this.btnForward,'disable-queryview-toolbar-forward','queryview-toolbar-forward');else\ndomutils.replaceClassName(this.btnForward,'queryview-toolbar-forward','disable-queryview-toolbar-forward');};QueryView.prototype.disableBackward=function(b){this.btnBackward.disabled=b;if(b)\ndomutils.replaceClassName(this.btnBackward,'disable-queryview-toolbar-backward','queryview-toolbar-backward');else\ndomutils.replaceClassName(this.btnBackward,'queryview-toolbar-backward','disable-queryview-toolbar-backward');};QueryView.prototype.disablePublish=function(b){this.btnMyFavorite.disabled=b||!this.enabled;if(this.btnMyFavorite.disabled)\ndomutils.replaceClassName(this.btnPublish,'disable-queryview-toolbar-myfavorite','queryview-toolbar-publish');else\ndomutils.replaceClassName(this.btnPublish,'queryview-toolbar-myfavorite','disable-queryview-toolbar-publish');}\nQueryView.prototype.disableButton=function(btn,key,b){if(btn.disabled==(b||!this.enabled))\nreturn;btn.disabled=!btn.disabled;if(btn.disabled)\ndomutils.replaceClassName(btn,'disable-queryview-toolbar-'+key,'queryview-toolbar-'+key);else\ndomutils.replaceClassName(btn,'queryview-toolbar-'+key,'disable-queryview-toolbar-'+key);}\nQueryView.prototype.addCellLink=function(row,col,jumpRule){var currentRowCount=this.grid.getRowCount();var currentColCount=this.grid.getColCount();if(row>currentRowCount||col>currentColCount){return;}\nvar cell=this.grid.getCell(row,col);if(!cell)\nreturn;if(!cell.jumpRules){cell.jumpRules=new Array();}\nif(jumpRule){if(!this.jumpRulesCells)\nthis.jumpRulesCells=new Array();if(!this.jumpRulesCells[row+\"_\"+col])\nthis.jumpRulesCells[row+\"_\"+col]=cell;cell.jumpRules.push(jumpRule);}\nthis.setLinkStyle(cell);};QueryView.prototype.addTitleLink=function(title,jumpRule){if(!this.jumpRuleLinkPanel){if(!JumpRuleLinkPanel)\nJumpRuleLinkPanel=jsloader.resolve(\"freequery.query.JumpRuleLinkPanel\");this.jumpRuleLinkPanel=new JumpRuleLinkPanel(this.jumpRulePanel);this.jumpRuleLinkPanel.onClick.subscribe(this.doTitleLinkClick,this);}\nthis.jumpRuleLinkPanel.addLink(title,jumpRule);}\nQueryView.prototype.addTitleLinkByAlias=function(title,jumpRule){if(!this.jumpRuleLinkPanel){if(!JumpRuleLinkPanel)\nJumpRuleLinkPanel=jsloader.resolve(\"freequery.query.JumpRuleLinkPanel\");this.jumpRuleLinkPanel=new JumpRuleLinkPanel(this.jumpRulePanel);this.jumpRuleLinkPanel.onClick.subscribe(this.doTitleLinkClick,this);}\nthis.jumpRuleLinkPanel.addLink(title,jumpRule);}\nQueryView.prototype.getCellsValueFromField=function(fieldAlias){var colIndex=this.getFieldIndexByAlias(fieldAlias);var rowB=this.grid.getHeaderRows();var rowCount=this.grid.getRowCount();var str=\"\";for(var i=rowB;i<rowCount;i++){if(str==\"\"){str=str+this.grid.tmpCellData[i][colIndex];}else{str=str+\",\"+this.grid.tmpCellData[i][colIndex];}}\nreturn str;}\nQueryView.prototype.getCellsValueByFieldName=function(fieldName){var colIndex=this.getFieldIndexByName(fieldName);var rowB=this.grid.getHeaderRows();var rowCount=this.grid.getRowCount();var str=\"\";for(var i=rowB;i<rowCount;i++){if(str==\"\"){str=str+this.grid.tmpCellData[i][colIndex];}else{str=str+\",\"+this.grid.tmpCellData[i][colIndex];}}\nreturn str;}\nQueryView.prototype.getCheckedCellsValueFromField=function(fieldAlias){var ret=[];var rowsIndex=this.checkedRowsIndex||this.grid.getCheckedRowsIndex();var colIndex=this.getFieldIndexByAlias(fieldAlias);colIndex=colIndex-1;for(var i=0,len=rowsIndex.length;i<len;i++){var rowIndex=rowsIndex[i];var data=this.grid.tmpCellData[rowIndex][colIndex];ret.push(data);}\nreturn ret;}\nQueryView.prototype.getCheckedCellsValueByFieldName=function(fieldName){var ret=[];var rowsIndex=this.checkedRowsIndex||this.grid.getCheckedRowsIndex();var colIndex=this.getFieldIndexByName(fieldName);colIndex=colIndex-1;for(var i=0,len=rowsIndex.length;i<len;i++){var rowIndex=rowsIndex[i];var data=this.grid.tmpCellData[rowIndex][colIndex];ret.push(data);}\nreturn ret;}\nQueryView.prototype.getCheckedCellsValue=function(orders){var ret=[];var rowsIndex=this.checkedRowsIndex||this.grid.getCheckedRowsIndex();for(var i=0,le=rowsIndex.length;i<le;i++){var rowIndex=rowsIndex[i];var rowData=[];var len=Math.min(orders.length,this.grid.tmpCellData[rowIndex].length);for(var j=0;j<len;j++){var data=this.grid.tmpCellData[rowIndex][orders[j]];rowData.push(data);}\nret.push(rowData);}\nreturn ret;}\nQueryView.prototype.getCheckedAllCellsValue=function(){var ret=[];var rowsIndex=this.checkedRowsIndex||this.grid.getCheckedRowsIndex();for(var i=0,le=rowsIndex.length;i<le;i++){var rowIndex=rowsIndex[i];var rowData=[];var len=this.grid.tmpCellData[rowIndex].length;for(var j=0;j<len;j++){var data=this.grid.tmpCellData[rowIndex][j];rowData.push(data);}\nret.push(rowData);}\nreturn ret;}\nQueryView.prototype.getUncheckedRowIndexs=function(useValue){var flag=this.uncheckedRowIndexs?this.uncheckedRowIndexs.flag:1;var rowIndexList=[];if(flag!=1){for(var i=0,len=this.uncheckedRowIndexs.length;i<len;i++){if(flag==0){if(this.uncheckedRowIndexs[i]===false){if(useValue&&this.rowSelectRelatedField&&this.rowSelectRelatedField.values)\nrowIndexList.push(this.rowSelectRelatedField.values[i]);else\nrowIndexList.push(i);}}else{if(this.uncheckedRowIndexs[i]===true){if(useValue&&this.rowSelectRelatedField&&this.rowSelectRelatedField.values)\nrowIndexList.push(this.rowSelectRelatedField.values[i]);else\nrowIndexList.push(i);}}}}\nreturn rowIndexList;}\nQueryView.prototype.setRowSelectRelatedField=function(relatedFieldAlias){var fields=this.grid.getFieldObjects();for(var i=0,len=fields.length;i<len;i++){if(fields[i].alias==relatedFieldAlias||fields[i].name==relatedFieldAlias){this.rowSelectRelatedField=fields[i];this.rowSelectRelatedField.colIndex=i;return;}}\nthis.rowSelectRelatedField=null;}\nQueryView.prototype.saveChooseRowIndexs=function(destClientId,destRelatedFieldAlias){if(!this.rowSelectRelatedField||!destRelatedFieldAlias){alert(\"找不到设置的关联字段!\");return;}\nvar srcRelatedFieldAlias=this.rowSelectRelatedField.alias;if(srcRelatedFieldAlias==null||srcRelatedFieldAlias.length==0)\nsrcRelatedFieldAlias=this.rowSelectRelatedField.name;var flag=this.uncheckedRowIndexs?this.uncheckedRowIndexs.flag:1;var rowIndexList=this.getUncheckedRowIndexs(true);var params=[this.clientId,destClientId,rowIndexList,flag,srcRelatedFieldAlias,destRelatedFieldAlias];this.onSaveChooseRowIndexs.fire(this,params);util.remoteInvokeEx(\"ClientReportService\",\"saveChooseRowIndexs\",params);}\nQueryView.prototype.addColumnLink=function(col,jumpRule){for(var i=this.grid.getHeaderRows();i<this.grid.getRowCount();i++){this.addCellLink(i,col,jumpRule);}};QueryView.prototype.addColumnLinkByAlias=function(colAlias,jumpRule){var i=this.getFieldIndexByAlias(colAlias);return this.addColumnLink(i,jumpRule);};QueryView.prototype.addColumnLinkByName=function(colName,jumpRule){var i=this.getFieldIndexByName(colName);return this.addColumnLink(i,jumpRule);};QueryView.prototype.addRowLink=function(row,jumpRule){for(var i=0;i<this.grid.getColCount();i++){this.addCellLink(row,i,jumpRule);}};QueryView.prototype.getFieldIndexByAlias=function(fieldAlias){return this.grid.getFieldIndexByAlias(fieldAlias);};QueryView.prototype.getFieldIndexByName=function(fieldName){return this.grid.getFieldIndexByName(fieldName);};QueryView.prototype.getFieldAliasByIndx=function(col){var allFields=this.grid.getFieldObjects();return allFields[col].alias;};QueryView.prototype.getFieldByIndx=function(col){var allFields=this.grid.getFieldObjects();return allFields[col];};QueryView.prototype.getCurrentLinkCell=function(){return this.currentLinkCell;};QueryView.prototype.getCurrentLinkCol=function(){return this.currentLinkCol;};QueryView.prototype.setCurrentLinkCol=function(cellObj){this.currentLinkCell=cellObj;this.currentLinkCol=cellObj.cellIndex;this.currentLinkRow=cellObj.parentNode.rowIndex;};QueryView.prototype.getCurrentLinkRow=function(){return this.currentLinkRow;};QueryView.prototype.getCellValue=function(row,col){var cell=this.grid.getCell(row,col);if(cell)\nif(navigator.appName.indexOf(\"Explorer\")>-1){return cell.innerText;}else{return cell.textContent;}\nelse\nreturn null;};QueryView.prototype.getCellRealValue=function(row,col){var cell=this.grid.getCell(row,col);if(cell){var v=cell.realValue;if(!v)\nv=cell.getAttribute(\"realValue\");if(v){return v;}else{if(navigator.appName.indexOf(\"Explorer\")>-1){return cell.innerText;}else{return cell.textContent;}}}else\nreturn null;};QueryView.prototype.getCurrentCellValue=function(){if(navigator.appName.indexOf(\"Explorer\")>-1){return this.currentLinkCell.innerText;}else{return this.currentLinkCell.textContent;}};QueryView.prototype.getCurrentFieldValue=function(fieldAlias){return this.getCellValue(this.getCurrentLinkRow(),this.getFieldIndexByAlias(fieldAlias));;};QueryView.prototype.getCurrentFieldRealValue=function(fieldAlias){return this.getCellRealValue(this.getCurrentLinkRow(),this.getFieldIndexByAlias(fieldAlias));};QueryView.prototype.getCurrentParamValue=function(paramName){var pid=this.getParamIdByName(paramName);return this.paramPanelObj.getParamValue(pid);}\nQueryView.prototype.getCurrentParamValueById=function(paramId){return this.paramPanelObj.getParamValue(paramId);}\nQueryView.prototype.writeParamsToContext=function(){if(this.params){for(var i=0,len=this.params.length;i<len;i++){var tmpParam=this.params[i];this.queryNavigator.put(tmpParam.name,tmpParam);}}};QueryView.prototype.autoFillParams=function(){if(this.params){for(var i=0,len=this.params.length;i<len;i++){var tmpParam=this.params[i];var envParam=this.queryNavigator.get(tmpParam.name);if(envParam){this.fillParamValueFromObj(tmpParam.name,envParam);}}}};QueryView.prototype.fillParamValue=function(pName,pValue,pDisplayValue){if(!this.paramPanelObj)\nreturn;var pid=this.getParamIdByName(pName);var b=true;var combox=this.paramPanelObj.findComboxByParamId(pid);if(combox&&combox.needChecked){b=this.checkedValue(combox,pValue,pDisplayValue)\nif(!b){alert('参数'+pName+'输入值校验失败!');return;}}\nb=b&&this.setParamValue(pid,pValue,pDisplayValue);if(!b){alert('参数'+pName+'设置错误!');return;}\nthis.paramPanelObj.setParamValue(pid,pValue,pDisplayValue);};QueryView.prototype.fillParamValueFromObj=function(pName,paramObj){if(!paramObj.displayValue)\nparamObj.displayValue=paramObj.value;this.fillParamValue(pName,paramObj.value,paramObj.displayValue);};QueryView.prototype.addChartLink=function(chart,jumpRule){if(!chart)\nreturn;if(!chart.jumpRules){chart.jumpRules=new Array();}\nif(jumpRule)\nchart.jumpRules.push(jumpRule);};QueryView.prototype.getChartByTitle=function(title){if(this.charts){for(var i=0,len=this.charts.length;i<len;i++){var chart=this.charts[i];if(chart.title&&chart.title.text===title){return chart;}}}\nreturn null;}\nQueryView.prototype.getChartByIndex=function(index){if(this.charts&&this.charts.length>index){return this.charts[index];}\nreturn null;}\nQueryView.prototype.getCurrentChartSeriesParamObj=function(fieldAlias){}\nQueryView.prototype.addChartLinkByTitle=function(title,jumpRule){var chart=this.getChartByTitle(title);this.addChartLink(chart,jumpRule);}\nQueryView.prototype.addChartLinkByIndex=function(index,jumpRule){var chart=this.getChartByIndex(index);this.addChartLink(chart,jumpRule);}\nQueryView.prototype.displayCheckColumn=function(show,index,replaceTd){if(this.grid){this.grid.displayCheckColumn(show,index,replaceTd);this.showCheckColumn=show;}}\nQueryView.prototype.showSelectReportFieldsDialog=function(jumpRule,destQueryId,hideTransFields){if(jumpRule){jumpRule.showSelectReportFieldsDialog=true;if(destQueryId){jumpRule.isStaticTransmitData=true;jumpRule.destQueryId=destQueryId;if(hideTransFields===true)\njumpRule.hideTransmitFields=true;}}}\nQueryView.prototype.getFieldDatasByJump=function(jumpRule){if(!jumpRule||!jumpRule.showSelectReportFieldsDialog)\nreturn null;else\nreturn jumpRule.selectedFieldDatas;}\nQueryView.prototype.getRelatedFieldsByJump=function(jumpRule){if(!jumpRule||!jumpRule.isStaticTransmitData)\nreturn null;else\nreturn jumpRule.relatedFieldDatas;}\nQueryView.prototype.addAutoCmdByAlias=function(colAlias,menuAlias){if(!this.autoCmd)\nthis.autoCmd=new Array();if(!this.autoCmd[colAlias]){this.autoCmd[colAlias]=new Array();}\nthis.autoCmd[colAlias][menuAlias]=true;};QueryView.prototype.addAutoCmdByName=function(colName,menuAlias){if(!this.autoCmd)\nthis.autoCmd=new Array();if(!this.autoCmd[colName]){this.autoCmd[colName]=new Array();}\nthis.autoCmd[colName][menuAlias]=true;};QueryView.prototype.addFilterLinkByAlias=function(colAlias,jumpRule,filterStr){var linkColIndex=this.getFieldIndexByAlias(colAlias);for(var rowIndx=this.grid.getHeaderRows();rowIndx<this.grid.getRowCount();rowIndx++){var filterS=filterStr;for(var colIndex=0;colIndex<this.grid.getColCount();colIndex++){var head=this.grid.getColHeader(colIndex);var colName=head.innerText;var cell=this.grid.getCell(rowIndx,colIndex);var cellValue=cell.getAttribute('realValue');if(filterStr.indexOf(colName)!=-1){var reg=new RegExp(colName,\"g\");var testNumber=new Number(cellValue);if(isNaN(testNumber)){filterS=filterS.replace(reg,\"'\"+cellValue+\"'\");}else{filterS=filterS.replace(reg,cellValue);}}}\ntry{if(eval(filterS)){this.addCellLink(rowIndx,linkColIndex,jumpRule);}}catch(e){}}};QueryView.prototype.getParamIdByName=function(pName){return'OutputParameter.'+this.bizViewId+'.'+pName;};QueryView.prototype.setLinkStyle=function(cell){if(cell.hasSetJumpStyle)\nreturn;cell.hasSetJumpStyle=true;if(util.trim(cell.innerText)==\"\"){return;}\nif(domutils.hasClassName(cell,\"scrollCellRowHead\")){cell.className=\"jump-link scrollCellRowHead\";}else{if(this.multiHeaders){cell.style.textDecoration=\"underline\";cell.style.cursor=\"pointer\";}else{cell.className=\"jump-link\";}}\ncell.style.color=\"blue\";};QueryView.prototype.setOrderBys=function(orderBys){this.orderByPriority.innerHTML=\"\";for(var i=0,len=orderBys.length;i<len;i++){var fieldName=this.getFieldAlias(orderBys[i].fieldId);if(!fieldName||fieldName==\"\"){fieldName=orderBys[i].fieldId.substring(orderBys[i].fieldId.lastIndexOf('.')+1);}\nvar span=document.createElement(\"span\");if(\"ASC\"==orderBys[i].orderByType){span.className=\"table-grid-button-nowidth table-grid-button-sort-asc\";}else if(\"DESC\"==orderBys[i].orderByType){span.className=\"table-grid-button-nowidth table-grid-button-sort-desc\";}else{span.className=\"table-grid-button-nowidth table-grid-button-sort\";}\nspan.style.paddingLeft=\"17px\";span.style.marginLeft=\"5px\";span.innerHTML=fieldName;this.orderByPriority.appendChild(span);}};QueryView.prototype.getFieldAlias=function(fieldid){var fields;if(this.availableFieldList)\nfields=this.availableFieldList;else\nfields=this.getFieldSelectPanel().getAvailableFieldList();var fieldName;for(var i=0,len=fields.length;i<len;i++){if(fields[i].id==fieldid){if(fields[i].alias!=null&&fields[i].alias!=\"\"){fieldName=fields[i].alias\nbreak;}}}\nreturn fieldName;};QueryView.prototype.resetChartAlign=function(chartAlign,skip){if(skip){return;}\nvar hasResetChartAlign=false;if(chartAlign&&chartAlign==this.chartAlignState){return hasResetChartAlign;}\nvar node=this.gridLay.firstChild;if(this.gridPanel.parentNode!=null)\nthis.gridPanel.parentNode.removeChild(this.gridPanel);if(this.graphPanel.parentNode!=null)\nthis.graphPanel.parentNode.removeChild(this.graphPanel);while(node){var tmp=node.nextSibling;domutils.destroyNode(node);node=tmp;}\nif(chartAlign==\"right\"){this.clientConfig.chartAlign=\"right\";var td=document.createElement(\"TD\");td.width=\"1\";this.gridLay.appendChild(td);td.appendChild(this.gridPanel);td=document.createElement(\"TD\");td.align=\"left\";this.gridLay.appendChild(td);td.appendChild(this.graphPanel);this.chartAlignState=\"right\";}else{this.clientConfig.chartAlign=\"bottom\";var td=document.createElement(\"TD\");td.width=\"100%\";td.colSpan=2;this.gridLay.appendChild(td);td.appendChild(this.gridPanel);this.graphLay.cells[0].appendChild(this.graphPanel);this.chartAlignState=\"bottom\";}\nhasResetChartAlign=true;return hasResetChartAlign;};QueryView.prototype.refreshAllChart=function(){if(this.charts){for(var i=0,len=this.charts.length;i<len;i++){var chart=this.charts[i];chart.refresh(chart._chartType,chart._chartOptions);}}else{this.refreshData(true);}}\nQueryView.prototype.updateParamSetting=function(params){if(this.clientConfig&&(!this.clientConfig.paramSetting||!this.paramSetting)&&params&&params.length>0){this.paramSetting=new Object();this.paramSetting.applyDefaultValueParams=new Array();this.paramSetting.noApplyDefaultValueParams=new Array();this.paramSetting.attributes=new Array();var useDefault=false;var result=util.remoteInvokeEx(\"ConfigClientService\",\"getConfigValue\",[\"PARAMETER_DEFAULT\"]);if(result&&result.result==\"true\"){useDefault=true;}\nfor(var i=0,len=params.length;i<len;i++){if(useDefault){this.paramSetting.applyDefaultValueParams.push(params[i].id);}else{this.paramSetting.noApplyDefaultValueParams.push(params[i].id);}}\nthis.clientConfig.paramSetting=this.paramSetting;}}\nQueryView.prototype.doReportParam=function(e){if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var dialogConfig={};dialogConfig.title=\"设置报表参数\";dialogConfig.fullName=\"freequery.query.ParamSettingDialog\";dialogConfig.size=dialogFactory.size.MIDDLE;var isNew=false;if(!this.paramSetting){this.paramSetting=new Object();this.paramSetting.applyDefaultValueParams=new Array();this.paramSetting.noApplyDefaultValueParams=new Array();this.paramSetting.attributes=new Array();isNew=true;}\nif(!this.paramSetting.applyDefaultValueParams)\nthis.paramSetting.applyDefaultValueParams=new Array();if(!this.paramSetting.noApplyDefaultValueParams)\nthis.paramSetting.noApplyDefaultValueParams=new Array();if(!this.paramSetting.attributes){this.paramSetting.attributes=new Array();}\nfor(var i=0,len=this.params.length;i<len;i++){var bs=false;for(var j=0,lenj=this.paramSetting.attributes.length;j<lenj;j++){if(this.params[i].id==this.paramSetting.attributes[j].id){bs=true;break;}}\nif(!bs){var param=new Object();param.id=this.params[i].id;param.display=this.params[i].display;param.manual=this.params[i].manual;param.multSelect=this.params[i].multSelect;param.checkedInStandby=(this.params[i].checkedInStandby==\"true\")?true:false;this.paramSetting.attributes.push(param);}}\ndialogFactory.showDialog(dialogConfig,[this.paramSetting,this.params,isNew,this.autoRefresh],this.doParamOK,this);}\nQueryView.prototype.doParamOK=function(succeed,setting){if(!succeed)\nreturn;this.setDirty(true);this.clientConfig.paramSetting=setting;this.paramSetting=setting;this.autoRefresh=setting.autoRefresh;this.setAutoRefreshStatus(this.autoRefresh);this.updateClientConfig();}\nQueryView.prototype.initSubtotalSetting=function(){if(!this.subtotalSetting){this.subtotalSetting=new Object();this.subtotalSetting.XAxis=new Array();this.subtotalSetting.YAxis=new Array();}}\nQueryView.prototype.doSubtotal=function(e){var dialogConfig={};dialogConfig.title=\"设置分类汇总\";dialogConfig.fullName=\"freequery.query.SubtotalDialog\";this.initSubtotalSetting();if(!dialogFactory){dialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");}\ndialogFactory.showDialog(dialogConfig,[this.subtotalSetting,this.grid.getFieldObjects(true),this.bizViewType],this.doSubtotalOK,this);}\nQueryView.prototype.doSubtotalOK=function(succeed,setting){if(!succeed)\nreturn;this.setDirty(true);if(setting.subtotal){this.clientConfig.gridProp.mergeH=true;this.clientConfig.gridProp.mergeZ=true;this.clientConfig.gridProp.lockDrag=true;this.clientConfig.gridProp.mergeMaxCol=setting.XAxis.length;for(var i=0,len=setting.XAxis.length;i<len;i++){var x=this.grid.getCell(this.grid.getHeaderRowIndex(),i);x.setAttribute(DragTable.FLAGDRAG,false);}\nfor(var i=setting.XAxis.length,len=this.grid.getColCount();i<len;i++){var x=this.grid.getCell(this.grid.getHeaderRowIndex(),i);x.setAttribute(DragTable.FLAGDRAG,true);}}else{this.clientConfig.gridProp.mergeH=false;this.clientConfig.gridProp.mergeZ=false;this.clientConfig.gridProp.lockDrag=false;for(var i=0;i<this.grid.getColCount();i++){var x=this.grid.getCell(this.grid.getHeaderRowIndex(),i);x.setAttribute(DragTable.FLAGDRAG,true);}}\nutil.remoteInvoke(\"ClientReportService\",\"updateSubtotalSetting\",[this.clientId,setting]);}\nQueryView.prototype.doQueryViewSetting=function(e){if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var dialogConfig={};dialogConfig.title=\"报表设置\";dialogConfig.fullName=\"freequery.query.QueryViewSettingDialog\";dialogConfig.resizable='no';dialogConfig.size=[550,425];var fieldCount=0;for(var f in this.selectedFieldList){fieldCount++;}\nvar reportProp={bgColor:this.clientConfig.gridProp.bgColor,spColor:this.clientConfig.gridProp.spColor,selectedDataBackgroundColor:this.clientConfig.gridProp.selectedBgColor,mergeZ:this.clientConfig.gridProp.mergeZ,mergeH:this.clientConfig.gridProp.mergeH,mergeMaxCol:this.clientConfig.gridProp.mergeMaxCol,rowHeight:this.clientConfig.gridProp.rowHeight,paddingLeft:this.clientConfig.gridProp.paddingLeft,fontSize:this.clientConfig.gridProp.fontSize,alignCenter:this.clientConfig.gridProp.alignCenter,lockDrag:this.clientConfig.gridProp.lockDrag,lockDragHeader:this.clientConfig.gridProp.lockDragHeader,fieldCount:fieldCount,headerShowFirstPage:this.clientConfig.gridProp.headerShowFirstPage,tailShowLastPage:this.clientConfig.gridProp.tailShowLastPage,tableWidthAuto:this.clientConfig.gridProp.tableWidthAuto,frozenRow:this.clientConfig.gridProp.frozenRow,frozenCol:this.clientConfig.gridProp.frozenCol,headerFontSize:this.clientConfig.gridProp.headerFontSize,headerFontColor:this.clientConfig.gridProp.headerFontColor,rowHeaderFontColor:this.clientConfig.gridProp.rowHeaderFontColor,headerFontStyle:this.clientConfig.gridProp.headerFontStyle,headerBackgroundColor:this.clientConfig.gridProp.headerBackgroundColor,rowHeaderBackgroundColor:this.clientConfig.gridProp.rowHeaderBackgroundColor,gridDataFontColor:this.clientConfig.gridProp.gridDataFontColor,gridBorderColor:this.clientConfig.gridProp.gridBorderColor,queryViewBackgroundColor:this.clientConfig.gridProp.queryViewBackgroundColor,useSystemDefaultValue:this.clientConfig.gridProp.useSystemDefaultValue,browseAutoRefresh:this.clientConfig.gridProp.browseAutoRefresh,chartAlign:this.clientConfig.chartAlign,reportTypes:this.reportTypes,reportType:this.reportType,defaultRow:this.clientConfig.gridProp.defaultRow,countTotalRows:this.countTotalRows};var reportHeader={htmlCode:this.header,reportId:this.clientId};var reportTail={htmlCode:this.tail,reportId:this.clientId};var params=[reportProp,reportHeader,reportTail,this.bizViewType];dialogFactory.showDialog(dialogConfig,params,this.doQueryViewSettingOK,this);}\nQueryView.prototype.doQueryViewSettingOK=function(succeed,setting){if(!succeed)\nreturn;this.setDirty(true);var cFrozenHeader=(this.clientConfig.gridProp.frozenCol!=setting.gridPropData.frozenCol||this.clientConfig.gridProp.frozenRow!=setting.gridPropData.frozenRow)\nthis.clientConfig.gridProp.bgColor=setting.gridPropData.gridBackgroundColor;this.clientConfig.gridProp.spColor=setting.gridPropData.gridSplitColor;this.clientConfig.gridProp.selectedBgColor=setting.gridPropData.selectedDataBackgroundColor;this.clientConfig.gridProp.mergeZ=setting.gridPropData.mergeZ;this.clientConfig.gridProp.mergeH=setting.gridPropData.mergeH;this.clientConfig.gridProp.mergeMaxCol=setting.gridPropData.mergeMaxCol;this.clientConfig.gridProp.rowHeight=setting.gridPropData.rowHeight;this.clientConfig.gridProp.paddingLeft=setting.gridPropData.paddingLeft;this.clientConfig.gridProp.fontSize=setting.gridPropData.fontSize;this.clientConfig.gridProp.alignCenter=setting.gridPropData.alignCenter;this.clientConfig.gridProp.lockDrag=setting.gridPropData.lockDrag;this.clientConfig.gridProp.lockDragHeader=setting.gridPropData.lockDragHeader;this.clientConfig.gridProp.headerShowFirstPage=setting.gridPropData.headerShowFirstPage;this.clientConfig.gridProp.tailShowLastPage=setting.gridPropData.tailShowLastPage;this.clientConfig.gridProp.tableWidthAuto=setting.gridPropData.tableWidthAuto;this.clientConfig.gridProp.frozenRow=setting.gridPropData.frozenRow;this.clientConfig.gridProp.frozenCol=setting.gridPropData.frozenCol;this.clientConfig.gridProp.headerFontSize=setting.gridPropData.headerFontSize;this.clientConfig.gridProp.headerFontStyle=setting.gridPropData.headerFontStyle;this.clientConfig.gridProp.headerFontColor=setting.gridPropData.headerFontColor;this.clientConfig.gridProp.rowHeaderFontColor=setting.gridPropData.rowHeaderFontColor;this.clientConfig.gridProp.headerBackgroundColor=setting.gridPropData.headerBackgroundColor;this.clientConfig.gridProp.rowHeaderBackgroundColor=setting.gridPropData.rowHeaderBackgroundColor;this.clientConfig.gridProp.gridDataFontColor=setting.gridPropData.gridDataFontColor;this.clientConfig.gridProp.gridBorderColor=setting.gridPropData.gridBorderColor;this.clientConfig.gridProp.defaultRow=setting.gridPropData.defaultRow;this.clientConfig.gridProp.queryViewBackgroundColor=setting.gridPropData.queryViewBackgroundColor;this.clientConfig.gridProp.useSystemDefaultValue=setting.gridPropData.useSystemDefaultValue;this.clientConfig.gridProp.browseAutoRefresh=setting.gridPropData.browseAutoRefresh;this.clientConfig.chartAlign=setting.gridPropData.chartAlign;if(this.clientConfig.gridProp.paddingLeft!=null)\nthis.contentTr.firstChild.style.paddingLeft=this.clientConfig.gridProp.paddingLeft+\"px\";if(cFrozenHeader)\nutil.lazyCall(this,this.handleFrozenHeader,[false]);this.setTableWidthAuto(setting.gridPropData.tableWidthAuto);this.setHeader(setting.header);this.setTail(setting.tail);this.updateClientConfig();this.countTotalRows=setting.gridPropData.countTotalRows-0;this.setCountTotalRowsValue(this.countTotalRows);this.resetChartAlign(this.clientConfig.chartAlign);this.doRefresh();}\nQueryView.prototype.setEnabled=function(enabled){this.enabled=enabled;if(this.toolbarLay)\nthis.toolbarLay.style.display=this.enabled?\"\":\"none\";if(this.shortcut)\nthis.shortcut.style.display=this.enabled?\"none\":\"\";}\nQueryView.prototype.getEnabled=function(){return this.enabled;}\nQueryView.prototype.updateExtraHeader=function(){if(!this.grid||!this.transmitInfo||!this.transmitInfo.transmitFields)\nreturn;var fieldDatas=this.transmitInfo.transmitFields;for(var i=0,len=fieldDatas.length;i<len;i++){var field=fieldDatas[i];var td=QueryGrid.superclass.newHeader.call(this.grid,field.alias);td.setAttribute(DragTable.FLAGDRAG,false);td.noWrap=true;field.isStatic=true;td.field=field;td.id=field.id;td.isStaticColumn=true;var align=(\"INTEGER\"==field.dataType||\"DOUBLE\"==field.dataType)?\"right\":\"left\";td.alignProp=align;var panel=document.createElement(\"div\");td.appendChild(panel);var btn_del=this.grid.createColBtn(panel,\"table-grid-button table-grid-button-del\",\"删除\",\"delete\");this.addListener(btn_del,\"click\",this.doHideExtraCol,[this.grid,td]);}\nif(this.grid.getHeaderRowIndex()>0){this.grid.refreshMultiHeader();}}\nQueryView.prototype.doAddToFavorite=function(){if(this.queryId){var node={};node._id=this.queryId;node._alias=this.alias;if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var dialogConfig={};dialogConfig.title=\"添加到收藏夹\";dialogConfig.size=dialogFactory.size.MIDDLE;dialogConfig.fullName=\"freequery.myfavorite.AddMyFavorite\";dialogFactory.showDialog(dialogConfig,[node],null,this);}else{alert(\"请先保存资源，然后再添加到收藏夹！\");}}\nQueryView.prototype.doHideExtraCol=function(ev){var grid=this[0];var td=this[1];var colNum=grid.getColumnIndex(td);var rows=grid.getRowCount();for(var i=rows-1;i>=0;i--){var r=grid.tBody.childNodes[i];var c=r.childNodes[colNum];if(c)\nc.style.display=\"none\";else{var index=0;for(var cn=0;cn<colNum;){if(r.childNodes[index].colSpan&&r.childNodes[index].colSpan>1)\ncn+=r.childNodes[index].colSpan;else\n++cn;++index;}\nc=r.childNodes[index];if(c)\nc.style.display=\"none\";}}\nev.cancelBubble=true;ev.returnValue=true;}\nQueryView.prototype.getFirstStaticColumnIndex=function(){var grid=this.grid;if(grid){var count=grid.getColCount();for(var i=0;i<count;i++){var head=grid.getColHeader(i);if(head.isStaticColumn)\nreturn i;}}\nreturn-1;}\nQueryView.prototype.lockDragColumns=function(isCanDrag){if(!this.grid){return;}\nvar colCount=this.grid.getColCount();var headerIndex=this.grid.getHeaderRowIndex();for(var i=0;i<colCount;i++){var x=this.grid.getCell(headerIndex,i);x.setAttribute(DragTable.FLAGDRAG,isCanDrag);}}\nQueryView.prototype.lockDragColumnsOfFrozen=function(count){var colCount=this.grid.getColCount()>count?count:this.grid.getColCount();var headerIndex=this.grid.getHeaderRowIndex();for(var i=0;i<colCount;i++){var x=this.grid.getCell(headerIndex,i);x.setAttribute(DragTable.FLAGDRAG,false);}}\nQueryView.prototype.setTableRightClickEnable=function(flag){this.rightClickEnable=flag;}\nQueryView.prototype.getClientId=function(){return this.clientId;}\nQueryView.prototype.getResourceId=function(){return this.queryId;}\nQueryView.prototype.getResourceType=function(){return\"simpleReport\";}\nQueryView.prototype.getPageId=function(){if(this.portalObj)\nreturn this.portalObj.pageId;}\nQueryView.prototype.getContext=function(){return this.queryNavigator;}\nQueryView.prototype.handleFrozenHeader=function(skip){var alignControlorTable=this.elem_alignControlorTable;var trGrid=this.gridLay;if(this.clientConfig.gridProp.frozenCol||this.clientConfig.gridProp.frozenRow>0){alignControlorTable.style.height=\"100%\";this.contentTable.style.height=\"100%\";trGrid.style.height=\"100%\";trGrid.style.width=\"100%\";var divWidth=document.all._leftFrameWith.offsetWidth;var tableWidth=this.grid.mainTable.offsetWidth;this.gridPanel.className=this.gridPanel.className+\" left_frame_with\";this.gridPanel.style.height=\"100%\";this.gridPanel.style.overflow=\"auto\";this.gridPanel.style.position=\"relative\";if(this.grid.mainTable){if(this.clientConfig.gridProp.frozenCol){this.grid.mainTable.style.borderTop=\"0px solid \"+this.grid.getGridBorderColor();}else{this.grid.mainTable.style.borderTop=\"1px solid \"+this.grid.getGridBorderColor();}\nif(this.clientConfig.gridProp.frozenRow>0){this.grid.mainTable.style.borderLeft=\"0px solid \"+this.grid.getGridBorderColor();}else{this.grid.mainTable.style.borderLeft=\"1px solid \"+this.grid.getGridBorderColor();}}\nthis.contentTable.rows[2].style.height=\"100%\";}else{if(skip){;}else{alignControlorTable.style.height=\"\";this.contentTable.style.height=\"\";trGrid.style.height=\"\";trGrid.style.width=\"\";this.gridPanel.className=stringReplaceAll(\"\"+this.gridPanel.className,\"left_frame_with\",\"\");this.gridPanel.style.height=\"\";this.gridPanel.style.overflow=\"\";this.gridPanel.style.position=\"\";if(this.grid.mainTable){this.grid.mainTable.style.borderTop=\"1px solid \"+this.grid.getGridBorderColor();this.grid.mainTable.style.borderLeft=\"1px solid \"+this.grid.getGridBorderColor();}}}}\nfunction stringReplaceAll(src,AFindText,ARepText){raRegExp=new RegExp(AFindText,\"g\");return src.replace(raRegExp,ARepText);}\nQueryView.prototype.setAlignCenter=function(flag){var alignString=(flag)?\"CENTER\":\"\";this.elem_alignControlor.align=alignString;};QueryView.prototype.setTableWidthAuto=function(flag){if(flag){this.grid.mainTable.style.width=\"100%\";this.elem_alignControlorTable.style.width=\"100%\";}else{this.grid.mainTable.style.width=\"\";this.elem_alignControlorTable.style.width=\"\";}}\nQueryView.prototype.setShowShotCut=function(flag){if(flag){if(this.shortcut){if(this.btnSearchEx.style.display.toUpperCase()!=\"NONE\"||this.btnChartEx.style.display.toUpperCase()!=\"NONE\"||this.btnExportEx.style.display.toUpperCase()!=\"NONE\"){this.shortcut.style.display=\"block\";}}}else{if(this.shortcut)\nthis.shortcut.style.display=\"none\";}}\nQueryView.prototype.setCountTotalRowsValue=function(v){var val=(undefined===v)?-1:(v-0);util.remoteInvokeEx(\"ClientReportService\",\"setRetrieveCountSettingValue\",[this.clientId,val]);}\nQueryView.prototype.setDirty=function(v){this.modified=!!v;}\nQueryView.prototype.isDirty=function(){return this.modified;}\nQueryView.prototype.addColumnImgLinkByAlias=function(colAlias,jumpRule,imgSrc){if(!this.nullShow){var ret=util.remoteInvokeEx(\"ConfigClientService\",\"getConfigValue\",[\"NULL_SHOW\"]);if(ret&&ret.succeeded){this.nullShow=ret.result;}}\nvar col=this.getFieldIndexByAlias(colAlias);if(col<0||col>this.grid.getColCount()){return;}\nthis.grid.setColWidth(col,10);var header=this.grid.getColHeader(col);var panel=header.getElementsByTagName(\"div\")[0];if(panel){panel.style.display=\"none\";}\nfor(var row=this.grid.getHeaderRows();row<this.grid.getRowCount();row++){var cell=this.grid.getCell(row,col);if(!cell){continue;}\nvar cellValue=cell.realValue;if(!cellValue||this.nullShow==cellValue){continue;}\ncell.innerHTML=\"<img src= '\"+imgSrc+\"' style = 'margin-left:10px,margin-right:10px'/>\";if(!cell.jumpRules){cell.jumpRules=new Array();}\nif(jumpRule){cell.jumpRules.push(jumpRule);}\nthis.setLinkStyle(cell);}};QueryView.prototype.setSelfMacroDisabled=function(disabled){this.selfMacroDisabled=disabled;}\nQueryView.prototype.initHandlers=function(){var Configuration=jsloader.resolve(\"Configuration\");var configPoint=Configuration.extensionPoints.QueryView;var handlerList=configPoint&&configPoint.handlers;if(!handlerList||!handlerList.length)\nreturn;this.appendHandlers(handlerList);};QueryView.prototype.addBtnClickListener=function(handler,cmd,btn){if(!btn||!handler||\"function\"!=typeof handler.execute)\nreturn;this.addListener(btn,\"click\",function(){handler.execute(cmd,btn);},this);};QueryView.prototype.getAllFilterConditons=function(){var ret=util.remoteInvoke(\"ClientReportService\",\"getAllFilterConditons\",[this.clientId]);if(ret&&ret.succeeded){return ret.result;}}\nQueryView.prototype.appendHandlers=function(handlerList){if(!handlerList||!handlerList.length)\nreturn;this.processTemplate(this.panel);var parentElem=this.elemToolbarTr;if(!this.handlers)\nthis.handlers=[];for(var i=0,len=handlerList.length;i<len;i++){var clz=null;try{clz=jsloader.resolve(handlerList[i].className);}catch(e){continue;}\nvar handler=new clz(this);this.handlers.push(handler);if(\"function\"!=typeof handler.readConfig)\ncontinue;var config=handler.readConfig();var items=config&&config.toolbar&&config.toolbar.items;if(!items)\ncontinue;for(var j=0,lenj=items.length;j<lenj;j++){var item=items[j];var bofid=item.bofid;var image=item.image;if(!bofid||!image)\ncontinue;if(this.getElementByBofid(bofid))\ncontinue;var isSpace=(image==\"img/banner/toolbar_tab_space.gif\");var beforeElem=this.getElementByBofid(item.before||\"toolbarLastTd\");var tdElem=document.createElement(\"td\");tdElem.noWrap=true;parentElem.insertBefore(tdElem,beforeElem);var itemElem=null;if(isSpace){itemElem=document.createElement(\"span\");itemElem.style.width=\"2px\";itemElem.style.height=\"12px\";}else{itemElem=document.createElement(\"input\");itemElem.type=\"button\";itemElem.className=\"queryview-toolbar-button\";this.addBtnClickListener(handler,item.command,itemElem);}\ntdElem.appendChild(itemElem);if((item.visible===false)||(item.functionCode&&!util.checkFunctionValid(item.functionCode)))\ntdElem.style.display=\"none\";itemElem.style.background=\"#FFFFFF url(\"+image+\") no-repeat left center\";for(var k in item){if(k==\"image\"||k==\"before\")\ncontinue;itemElem.setAttribute(k,item[k]);}\nvar propName=this.getPropNameByBofid(bofid);this[propName]=itemElem;}\nif(\"function\"==typeof handler.initItemsVisible)\nhandler.initItemsVisible();}};QueryView.prototype.initAfterOpenHandlers=function(){var Configuration=jsloader.resolve(\"Configuration\");var configPoint=null;if(Configuration.extensionPoints.QueryView)\nconfigPoint=Configuration.extensionPoints.QueryView.AfterOpen;var handlerList=configPoint&&configPoint.handlers;this.appendHandlers(handlerList);};QueryView.prototype.refreshParameterPanel=function(){if(!this.clientId)\nreturn false;var ret=util.remoteInvokeEx(\"ClientReportService\",\"refreshParameterPanel\",[this.clientId]);if(!ret||!ret.succeeded||!ret.result)\nreturn false;var result=ret.result;this.paramLayout=result[0]&&lang.parseJSON(result[0]);if(this.paramPanelObj){this.paramPanelObj.clear();this.paramPanelObj.initLayout(this.paramLayout);}else{this.initParamPanelObj();}\nthis.params=result[1];for(var i=0,len=this.params.length;i<len;i++){var para=this.params[i];para.clientId=this.paramPanelId;this.addParam(para);this.setParamDefaultValue(para,true);}\nreturn true;};QueryView.prototype.getGrid=function(){return this.grid;};QueryView.prototype.getParameterPanel=function(){return this.paramPanelObj;};QueryView.prototype.getPagePanel=function(){return this.pagePanel;};QueryView.prototype.getQueryNavigator=function(){return this.queryNavigator;};QueryView.prototype.getParams=function(){return this.params;};QueryView.prototype.getFields=function(){return this.fields;};QueryView.prototype.getBizViewType=function(){return this.bizViewType;};QueryView.prototype.getBizViewId=function(){return this.bizViewId;};var JumpRuleMenuCommand=function(){this.jumpRules=null;this.srcQuery=null;this.context=null;};JumpRuleMenuCommand.prototype.destroy=function(){};JumpRuleMenuCommand.prototype.doCmd=function(cmd){if(this.jumpRules&&this.jumpRules[cmd]){var me=this.jumpRules[cmd];if(!this.srcQuery.showFieldSelectDialog(me))\nreturn;var srcQuery=this.srcQuery;var context=this.context;srcQuery.checkedRowsIndex=srcQuery.showCheckColumn?srcQuery.grid.getCheckedRowsIndex():null;executeAction(this.jumpRules[cmd].action,me,srcQuery,context);}};function executeAction(action,me,srcQuery,context){if(srcQuery&&srcQuery.onExecuteJumpRule)\nsrcQuery.onExecuteJumpRule.fire(srcQuery,me);eval(action);if(me.callback){me.callback(srcQuery,context);}}\nQueryView.prototype.__callbackGetReportData=QueryView.prototype.callbackGetReportData;QueryView.prototype.callbackGetReportData=function(ret){this.__callbackGetReportData(ret);this.resizeIScroll();}\nQueryView.prototype.resizeIScroll=function(){if(domutils.isIOS()||domutils.isAndroid()){if(this.iPadScroll){this.iPadScroll.scrollContent.refresh();}else if(this.iPadScroll2){this.iPadScroll2.scrollContent.refresh();}else{if(this.clientConfig.gridProp.frozenCol||this.clientConfig.gridProp.frozenRow>0){var _contentDiv=domutils.findElementByClassName(this.panel,\"_contentDiv\");var _contentTable=_contentDiv.firstChild;_contentTable.style.width=_contentDiv.clientWidth;this.elem_alignControlorTable.style.width=_contentDiv.clientWidth;this.elem_grid.style.width=_contentDiv.clientWidth;this.elem_tablepanel.style.width=this.elem_tablepanel.firstChild.clientWidth;var options={};options.onScrollEnd=this.onScrollEnd;options.onScrollEndObject=this;var BofIPadScroll=jsloader.resolve(\"ext.IPad.BofIPadScroll\");this.iPadScroll2=new BofIPadScroll(this.elem_tablepanel,options);this.iPadScroll2.scrollContent.notStopEvent=true;this.iPadScroll2.scrollContent.refresh();this.setCellBackground();}else{var slot=domutils.findElementByClassName(this.panel,\"_contentDiv\");if(slot)\nslot=slot.firstChild;if(slot){var BofIPadScroll=jsloader.resolve(\"ext.IPad.BofIPadScroll\");this.iPadScroll=new BofIPadScroll(slot);this.iPadScroll.scrollContent.notStopEvent=true;this.iPadScroll.scrollContent.refresh();}}}}}\nQueryView.prototype.onScrollEnd=function(x,y){var rows=this.grid.tBody.childNodes.length;var row=this.grid.tBody.firstChild;var frow=0;if(this.clientConfig.gridProp.frozenRow)\nfrow=parseInt(this.clientConfig.gridProp.frozenRow);var headerArray=new Array();for(var r=0;r<rows;r++){var isHeader=row.getAttribute(\"isheader\");if(isHeader&&isHeader==\"true\"){isHeader=true;}\nvar cells=row.childNodes.length;var tmpCell=row.firstChild;for(var index=0;index<cells;index++){var colSpan=tmpCell.colSpan;var rowSpan=tmpCell.rowSpan;headerArray[r]=(headerArray[r]?headerArray[r]:0)+1\n+(colSpan?(colSpan-1):0);if(rowSpan){for(var rindex=1;rindex<parseInt(rowSpan);rindex++){headerArray[r+rindex]=(headerArray[r+rindex]?headerArray[r+rindex]:0)\n+1+(colSpan?(colSpan-1):0);}}\nif(headerArray[r]<=frow){if(isHeader&&this.clientConfig.gridProp.frozenCol){tmpCell.style.webkitTransform=\"translate3D(\"+(-x)+\"px,\"+(-y)+\"px,0)\";}else{tmpCell.style.webkitTransform=\"translate3D(\"+(-x)+\"px,0,0)\";}}else if(isHeader&&this.clientConfig.gridProp.frozenCol){tmpCell.style.webkitTransform=\"translate3D(0, \"+(-y)+\"px,0)\";}\ntmpCell=tmpCell.nextSibling;}\nrow=row.nextSibling;}}\nQueryView.prototype.setCellBackground=function(){var rows=this.grid.tBody.childNodes.length;var row=this.grid.tBody.firstChild;var frow=0;if(this.clientConfig.gridProp.frozenRow)\nfrow=parseInt(this.clientConfig.gridProp.frozenRow);var headerArray=new Array();for(var r=0;r<rows;r++){var isHeader=row.getAttribute(\"isheader\");if(isHeader&&isHeader==\"true\"){isHeader=true;}\nvar cells=row.childNodes.length;var tmpCell=row.firstChild;for(var index=0;index<cells;index++){var colSpan=tmpCell.colSpan;var rowSpan=tmpCell.rowSpan;headerArray[r]=(headerArray[r]?headerArray[r]:0)+1\n+(colSpan?(colSpan-1):0);if(rowSpan){for(var rindex=1;rindex<parseInt(rowSpan);rindex++){headerArray[r+rindex]=(headerArray[r+rindex]?headerArray[r+rindex]:0)\n+1+(colSpan?(colSpan-1):0);}}\nif(!isHeader&&headerArray[r]<=frow){if(tmpCell.style.backgroundColor==\"\"){if(tmpCell.parentNode.style.backgroundColor!=\"\"){tmpCell.style.backgroundColor=tmpCell.parentNode.style.backgroundColor;}else if(domutils.hasClassName(tmpCell.parentNode,\"talbe-grid-row-blue\")){tmpCell.style.backgroundColor=\"#E6EBFF\";}else if(domutils.hasClassName(tmpCell.parentNode,\"table-grid-row-green\")){tmpCell.style.backgroundColor=\"#FCFAF6\";}}}\ntmpCell=tmpCell.nextSibling;}\nrow=row.nextSibling;}}\nQueryView.prototype.__oldinitPagePanel=QueryView.prototype.initPagePanel;QueryView.prototype.initPagePanel=function(){var domutils=jsloader.resolve(\"freequery.lang.domutils\");if(domutils.isMobile()){PagePanel=jsloader.resolve(\"ext.IPad.MobilePagePanel\");}\nthis.__oldinitPagePanel();}\nQueryView.prototype.__doExport=QueryView.prototype.doExport;QueryView.prototype.doExport=function(p){var p=util.getAbsolutePos(this.btnExport,this.panel);if(!this.exportMenu)\nthis.initExportMenu();this.exportMenu.dropDown(p.x,p.y+this.btnExport.offsetHeight,80,120);}\nQueryView.prototype.__initExportMenu=QueryView.prototype.initExportMenu;QueryView.prototype.initExportMenu=function(){this.__initExportMenu();if(this.exportMenu){this.exportMenu.insertItem(\"EXCEL2007\",\"EXCEL\");}}\nQueryView.prototype.__doExportMenuCloseUp=QueryView.prototype.doExportMenuCloseUp;QueryView.prototype.doExportMenuCloseUp=function(exportType){this.__doExportMenuCloseUp(exportType);var typeId=(exportType&&typeof exportType==\"string\")?exportType:(this.exportMenu?this.exportMenu.selectedId:null);if(!typeId)\nreturn;if(typeId==\"EXCEL2007\"){if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var data={};data.rowCount=this.allRowCount;data.delimiter=this.getDelimiter();data.exportType=typeId;data.contentType=this.getExportContentType();data.showChart=this.showChart();var dialogConfig={};dialogConfig.title=\"设置导出EXCEL参数\";dialogConfig.size=dialogFactory.size.MIDDLE;dialogConfig.fullName=\"freequery.query.ExportExcelDialog\";dialogConfig.closeBeforeCallback=true;dialogFactory.showDialog(dialogConfig,data,this.executeExport,this);}}\nQueryView.prototype.__setExportFormInputValues=QueryView.prototype.setExportFormInputValues;QueryView.prototype.setExportFormInputValues=function(exportForm,exportType,submitOptions){if(this.charts&&this.charts.length>0){if(submitOptions.exportChartWay==\"excelChart\"){submitOptions.exportType=\"EXCEL2007_XLSM\";exportType=\"EXCEL2007_XLSM\";}}\nthis.__setExportFormInputValues(exportForm,exportType,submitOptions);}\nQueryView.prototype.showChart=function(){var viewState=this.getLayout().viewState,showChart=false;for(var i=0,len=viewState.length;i<len;i++){if(viewState[i].id==\"_graph\"){if(viewState[i].checked&&this.charts&&this.charts.length>0){showChart=true;}}}\nreturn showChart;};","js/freequery/sysresource/URLLinkCommand.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var util=jsloader.resolve(\"freequery.common.util\");var domutils=jsloader.resolve(\"freequery.lang.domutils\");var modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var FrameView=jsloader.resolve(\"freequery.common.FrameView\");var dialogFactory=null;var util=jsloader.resolve(\"freequery.common.util\");var URLLinkCommand=function(){this.parentObj=document.getElementById('rigthContent')||document.body;this.onClose=new CustomEvent(\"OnClose\",this);this.needRefresh=new CustomEvent(\"NeedRefresh\",this);this.urlAlias=\"\";this.urlId=\"\";};lang.extend(URLLinkCommand,Module);URLLinkCommand.prototype.openLink=function(node,openType,isBrowseModule){if(node&&node._id){this.urlId=node._id;var ret=util.remoteInvokeEx(\"UrlLinkService\",\"getURLLink\",[node._id]);if(ret&&ret.result){var url=ret.result.url;if(url.indexOf(\"openresource.jsp\")>=0){url+=\"&__ts=\"+new Date().getTime();}\nif(ret.result.alias!=null&&ret.result.alias!=\"\")\nthis.urlAlias=ret.result.alias;else\nthis.urlAlias=ret.result.name;var setting=ret.result.setting;if(setting)\nsetting=lang.parseJSON(setting);if(isBrowseModule){setting=setting||{};setting.isBrowseModule=setting.isBrowse=true;}\nif(openType==\"NewWindow\"){this.openInNewWindow(url,setting);return false;}else{if(setting&&setting.currentWindow){this.openLinkInCurrentWindow(url,setting);}else{this.openInNewWindow(url,setting);return false;}}}}};URLLinkCommand.prototype.edit=function(node){if(node&&node._id){var ret=util.remoteInvokeEx(\"UrlLinkService\",\"getURLLink\",[node._id]);if(ret&&ret.result){if(node._type==\"BI3OLAP_REPORT\"){if(!util.checkFunctionValid(\"CUSTOM_DISPLAYCUSTOM_MULTIDIMENSIONREPORT\")){alert(\"您对该资源没有“编辑”拥有的权限！\");this.onClose.fire(this);return;}\nvar url=ret.result.url+\"&op=edit\";var setting=ret.result.setting;if(setting)\nsetting=lang.parseJSON(setting);this.openLinkInCurrentWindow(url,setting);}else{if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var dialogConfig={};dialogConfig.title=\"编辑链接\";dialogConfig.size=dialogFactory.size.LARGE;dialogConfig.fullName=\"freequery.resourcemanager.URLLinkDialog\";dialogFactory.showDialog(dialogConfig,[node,\"OPEN\"],this.doAfterNewNode,this);return;}}}}\nURLLinkCommand.prototype.del=function(node){if(node&&node._id){if(modalWindow.open(\"确认要删除 '\"+node.text+\"' 吗？\",\"资源树\",modalWindow.MB_YESNO|modalWindow.MB_ICONQUESTION)!=modalWindow.ID_YES)\nreturn false;util.remoteInvokeEx(\"UrlLinkService\",\"deleteURLLink\",[node._id]);}}\nURLLinkCommand.prototype.doAfterNewNode=function(node,ok){if(ok){node.refreshChildren();node.setExpanded(true);}};URLLinkCommand.prototype.openLinkInCurrentWindow=function(url,setting){if(!this.frameView){this.frameView=new FrameView(this.parentObj);this.frameView.setFrameTitle(this.urlAlias);}\nvar isImage=util.isImage(url);if(!this.iframe){var urlSrc=\"\";if(isImage){urlSrc=\" src='\"+url+\"' \";}\nthis.frameView.frameViewContainer.innerHTML=\"<iframe frameBorder=0 name='URLLinkIFrame' class='_URLLinkIFrame' style='width:100%;height:100%' \"+urlSrc+\"><\/iframe>\";this.iframe=domutils.findElementByClassName(this.frameView.frameViewContainer,\"_URLLinkIFrame\");this.frameView.locationBar.setCloseButtonFunction(function(){this.onClose.fire(this)},this);}\nif(/analysisReport.jsp/.test(url)){var pattern=/[\\?|&]name=([^&$]+)/g;var ret=pattern.exec(url);var name=(ret[1])?\"“\"+ret[1]+\"”\":\"\";var title=(/&op=edit/.test(url))?\"编辑\":\"浏览\"\ntitle+=\"分析报表\"+name;this.frameView.setFrameTitle(title);this.openUrlByPost(url,setting,\"URLLinkIFrame\");return;}\nif(setting&&setting.autoLogin){this.initAutoLoginForm();var userName=registry.get(\"User\");this.user.value=userName?userName:\"\";this.password.value=userName?registry.get(\"Password\"):\"\";this.isNewWindow.value=\"false\";this.autoLoginForm.action=url;this.autoLoginForm.target=\"URLLinkIFrame\";this.autoLoginForm.submit();}else if(!isImage){this.iframe.src=url;}}\nURLLinkCommand.prototype.initAutoLoginForm=function(hasParams){if(!this.autoLoginSpan){this.autoLoginSpan=document.createElement(\"SPAN\");this.autoLoginSpan.style.display=\"none\";this.parentObj.appendChild(this.autoLoginSpan);var form=document.createElement(\"FORM\");form.method=\"POST\";this.autoLoginForm=form;this.autoLoginSpan.appendChild(form);this.user=document.createElement(\"INPUT\");this.user.type=\"hidden\";this.user.name=\"user\";form.appendChild(this.user);this.password=document.createElement(\"INPUT\");this.password.type=\"hidden\";this.password.name=\"password\";form.appendChild(this.password);this.isNewWindow=document.createElement(\"INPUT\");this.isNewWindow.type=\"hidden\";this.isNewWindow.name=\"isNewWindow\";form.appendChild(this.isNewWindow);this.isBrowseModule=document.createElement(\"INPUT\");this.isBrowseModule.type=\"hidden\";this.isBrowseModule.name=\"isBrowseModule\";form.appendChild(this.isBrowseModule);this.isBrowse=document.createElement(\"INPUT\");this.isBrowse.type=\"hidden\";this.isBrowse.name=\"isBrowse\";form.appendChild(this.isBrowse);this.nodeId=document.createElement(\"INPUT\");this.nodeId.type=\"hidden\";this.nodeId.name=\"urlId\";this.nodeId.value=this.urlId;form.appendChild(this.nodeId);if(hasParams){this.params=document.createElement(\"INPUT\");this.params.type=\"hidden\";this.params.name=\"paramsInfo\";form.appendChild(this.params);this.hideToolbarKeys=document.createElement(\"INPUT\");this.hideToolbarKeys.type=\"hidden\";this.hideToolbarKeys.name=\"toolbars\";form.appendChild(this.hideToolbarKeys);this.modifiedCellsList=document.createElement(\"INPUT\");this.modifiedCellsList.type=\"hidden\";this.modifiedCellsList.name=\"modifiedCells\";form.appendChild(this.modifiedCellsList);}}}\nURLLinkCommand.prototype.openInNewWindow=function(url,setting,noStatus){if(/analysisReport.jsp/.test(url)){var app=jsloader.imports(\"bof.baseajax.common.Application\").getInstance();app.connectAp();this.openUrlByPost(url,setting,\"_blank\");this.close();return;}\nif(!setting||!setting.autoLogin)\n{try{window.open(url);}\ncatch(ex){alert(\"无法打开指定网页\");}}\nelse{if(setting&&setting.params&&lang.parseJSON(setting.params).length>0)\nvar hasParams=true;this.initAutoLoginForm(hasParams);if(setting&&setting.isBrowseModule&&this.isBrowseModule)\nthis.isBrowseModule.value=this.isBrowse.value=setting.isBrowseModule;if(setting&&setting.params&&this.params)\nthis.params.value=setting.params;var userName=registry.get(\"User\");this.user.value=userName?userName:\"\";this.password.value=userName?registry.get(\"Password\"):\"\";this.isNewWindow.value=\"true\";this.autoLoginForm.action=url;if(setting.isFullWindow){this.autoLoginForm.onSubmit=this.windowFullOPener(\"about:blank\");this.autoLoginForm.target=\"myWindow\";}\nelse if(noStatus){this.autoLoginForm.onSubmit=this.windowOPener(\"about:blank\");this.autoLoginForm.target=\"myWindow\";}\nelse if(setting.withFeatures){this.autoLoginForm.onSubmit=this.windowOpenerWithFeatures(\"about:blank\",setting);this.autoLoginForm.target=\"myWindow\";}\nelse{this.autoLoginForm.target=\"_blank\";}\nthis.autoLoginForm.submit();}\nif(this.autoLoginSpan){this.autoLoginSpan.innerHTML=\"\";this.autoLoginSpan=null;}}\nURLLinkCommand.prototype.openUrlByPost=function(url,setting,target){var autoLogin=setting?setting.autoLogin:false;var ret=/^([^?$]+)(.*)$/.exec(url);var action=url;var queryStr=null;if(ret){action=ret[1];queryStr=ret[2].substring(1);}\nvar queryParams={};if(autoLogin){queryParams.user=registry.get(\"User\")||'';queryParams.password=registry.get(\"Password\")||'';if(setting&&setting.isBrowseModule)\nqueryParams.isBrowseModule=queryParams.isBrowse=setting.isBrowseModule+\"\";}\nqueryParams.isNewWindow=(\"_blank\"==target)?\"true\":\"false\";if(queryStr){var params=queryStr.split(\"&\");for(var i=0;i<params.length;i++){var param=params[i].split(\"=\");if(param.length>1)\nqueryParams[param[0]]=param[1];}}\nif(setting.postParams){for(var p in setting.postParams){queryParams[p]=setting.postParams[p];}}\nvar postSpan=document.createElement(\"span\");postSpan.style.display=\"none\";this.parentObj.appendChild(postSpan);var postForm=document.createElement(\"form\");postForm.action=action;postForm.method=\"post\";postForm.target=target;postSpan.appendChild(postForm);for(var prop in queryParams){var el=document.createElement(\"input\");el.type=\"hidden\";el.name=prop;el.value=queryParams[prop];postForm.appendChild(el);}\npostForm.submit();domutils.destroyNode(postSpan);}\nURLLinkCommand.prototype.close=function(){if(this.frameView){this.frameView.destroy();this.frameView=null;this.iframe.src=\"about:blank\";this.iframe=null;}\nif(this.autoLoginSpan)\n{this.autoLoginSpan.innerHTML=\"\";this.autoLoginSpan=null;}};URLLinkCommand.prototype.destroy=function(){this.close();if(this.autoLoginSpan&&this.autoLoginSpan.parentNode==this.parentObj)\ndomutils.destroyNode(this.autoLoginSpan);this.parentObj=null;if(this.commandFactory)\ndelete this.commandFactory.cmd[\"URLLinkCommand\"];URLLinkCommand.superclass.destroy.call(this);};URLLinkCommand.prototype.windowOPener=function(url){var features='\"help:no\",\"scroll:no\", \"status:no\", \"center:yes\",\"edge:raised\"';return window.open(url,\"myWindow\",features);}\nURLLinkCommand.prototype.windowFullOPener=function(url){var features=\"width=\"+window.screen.width+\",height=\"+window.screen.height\n+\",left=0,top=0,resizable=yes,toolbar=1,location=1,directories=1\"+\",status=yrd,menubar=1,scrollbars=1 \";return window.open(url,\"myWindow\",features);}\nURLLinkCommand.prototype.windowOpenerWithFeatures=function(url,setting){url=url||\"about:blank\";setting=setting||{};var sFeatures=[\"channelmode=\"+(setting.channelmode||\"no\"),\"directories=\"+(setting.directories||\"yes\"),\"fullscreen=\"+(setting.fullscreen||\"no\"),\"height=\"+(setting.height||\"600\"),\"left =\"+(setting.left||\"0\"),\"location=\"+(setting.location||\"yes\"),\"menubar=\"+(setting.menubar||\"yes\"),\"resizable=\"+(setting.resizable||\"yes\"),\"scrollbars=\"+(setting.scrollbars||\"yes\"),\"status=\"+(setting.status||\"yes\"),\"titlebar=\"+(setting.titlebar||\"yes\"),\"toolbar=\"+(setting.toolbar||\"yes\"),\"top=\"+(setting.top||\"0\"),\"width=\"+(setting.width||\"800\")].join(\",\");return window.open(url,\"myWindow\",sFeatures);}","js/bof/macro/services/MacroService.js":"\nvar util=jsloader.resolve(\"freequery.common.util\");var MacroService=function(){};lang.extend(MacroService,\"MacroServiceStub\");MacroService.prototype.fire=function(resource,targetName,eventName,args,noLookup){var clientId=resource.getClientId&&resource.getClientId();var resourceId=resource.getResourceId();var resourceType=resource.getResourceType();var modules=null;if(resource.modules){modules=resource.modules[eventName];}else{modules=util.remoteInvokeEx2(\"MacroService\",\"getMacroModules\",[clientId?clientId:null,resourceId?resourceId:null,targetName,eventName],null,null,noLookup).result;}\nif(null==modules||modules.length==0)\nreturn;var MacroExecutor=this.getMacroExecutor(resourceType);for(var i=0,len=modules.length;i<len;i++){var module=modules[i];if(module.disabled){continue;}\nnew MacroExecutor(resource,targetName,eventName,args,module.script).run(module);}};MacroService.prototype.getMacroExecutor=function(resourceType){if(resourceType==\"olapQuery\"){return jsloader.resolve(\"bof.macro.OlapQueryMacroExecutor\");}else if(resourceType==\"simpleReport\"){return jsloader.resolve(\"bof.macro.SimpleReportMacroExecutor\");}else if(resourceType==\"dashboard\"||resourceType==\"dashboardMap\"){return jsloader.resolve(\"bof.macro.MeterReportMacroExecutor\");}else if(resourceType==\"page\"){return jsloader.resolve(\"bof.macro.PageMacroExecutor\");}else if(resourceType==\"freereport\"){return jsloader.resolve(\"bof.macro.FreeReportMacroExecutor\");}else if(resourceType==\"chart\"){return jsloader.resolve(\"bof.macro.ChartMacroExecutor\");}\nelse{var Configuration=jsloader.resolve(\"Configuration\");if(Configuration.extensionPoints.Macro&&Configuration.extensionPoints.Macro.MacroExecutor){var extensionExecutor=Configuration.extensionPoints.Macro.MacroExecutor;for(var idx in extensionExecutor){if(extensionExecutor[idx].resourceType==resourceType){return jsloader.resolve(extensionExecutor[idx].className);}}}\nthrow new Error(\"Not support: \"+resourceType)}};","js/bof/macro/SimpleReportMacroExecutor.js":"\nvar util=jsloader.resolve(\"freequery.common.util\");var MacroService=imports(\"bof.macro.services.MacroService\");var SimpleReportMacroExecutor=function(resource,targetName,eventName,args,script){this.resource=resource;this.context=resource.queryNavigator;this.targetName=targetName;this.evenetType=eventName;this.args=args;this.script=script;};SimpleReportMacroExecutor.prototype.run=function(module){var application={};var openOlapQuery=function(id,callback){if(callback){var ret=util.remoteInvokeEx(\"CatalogService\",\"getCatalogElementById\",[id]);if(ret&&ret.succeeded){if(!ret.result){alert(\"报表已被删除\");return;}}\nvar sBaseURL=jsloader.baseHref;if(typeof needToolBar==\"undefined\")\nneedToolBar=true;var url=sBaseURL+\"openresource.jsp?notNeedLogon=true&showtoolbar=\"+needToolBar+\"&resid=\"+id;var wnd=window.open(url);if(wnd.queryCmd){var olapQueryView=wnd.queryCmd.olapQueryView;callback(olapQueryView);}else{var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");eventutil.addEventHandler(wnd,'load',function(){var time=setInterval(function(){if(wnd&&wnd.classAction&&wnd.classAction.olapQueryCommand&&wnd.classAction.olapQueryCommand.olapQueryView&&wnd.classAction.olapQueryCommand.olapQueryView.clientId){clearInterval(time);var olapQueryView=wnd.classAction.olapQueryCommand.olapQueryView;callback(olapQueryView);}},100);});}}else{alert(\"not support in present\")}};application.openOlapQuery=openOlapQuery;application.simpleReportContext=this.context;eval(\"var \"+this.resource.getResourceType()+\" = this.resource;\");eval(\"application.\"+this.resource.getResourceType()+\" = \"+this.resource.getResourceType()+\";\");var event={arguments:this.args};application.event=event;application.application=application;application.module=module;var resourceId=this.resource.getResourceId();var use=function(moduleName){eval(MacroService.getInstance().findCommonModule(resourceId?resourceId:null,moduleName,\"ClientSide\"));return loadCommonModule();};eval(this.script);main.apply(null,this.args);};","js/bof/usermanager/UserService.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var util=imports(\"freequery.common.util\").getInstance();var UserService=function(){this.onChange=new CustomEvent();this.keys={};this.cache={};var ri=function(className,methodName,paramArray,callback,that){return util.remoteInvokeEx2(className,methodName,paramArray,callback,that);}\nvar ri2=function(className,methodName,paramArray,callback,that){return util.remoteInvokeEx3(className,methodName,paramArray,callback,that);}\nthis.isAdmin=function(arg0){return ri(\"UserService\",\"isAdmin\",[arg0]).result;};this.getSystemId=function(){return ri(\"UserService\",\"getSystemId\",[]).result;};this.setSystemId=function(arg0){return ri(\"UserService\",\"setSystemId\",[arg0]).result;};this.getCurrentUser=function(){return ri(\"UserService\",\"getCurrentUser\",[]).result;};this.checkVersion=function(arg0){return ri(\"UserService\",\"checkVersion\",[arg0]).result;};this.getAllGroups=function(){return ri(\"UserService\",\"getAllGroups\",[]).result;};this.logout=function(){return ri(\"UserService\",\"logout\",[]).result;};this.getDepartmentByCode=function(arg0){return ri(\"UserService\",\"getDepartmentByCode\",[arg0]).result;};this.isCurUserFuncTypeAccessible=function(arg0){return ri(\"UserService\",\"isCurUserFuncTypeAccessible\",[arg0]).result;};this.getSystemConfigService=function(){return ri(\"UserService\",\"getSystemConfigService\",[]).result;};this.isUserOfGroupRecursively=function(arg0,arg1){return ri(\"UserService\",\"isUserOfGroupRecursively\",[arg0,arg1]).result;};this.hasRoleByUserId=function(arg0,arg1){return ri(\"UserService\",\"hasRoleByUserId\",[arg0,arg1]).result;};this.getAllDepartmentsOfUser=function(arg0){return ri(\"UserService\",\"getAllDepartmentsOfUser\",[arg0]).result;};this.getParentDepartment=function(arg0){return ri(\"UserService\",\"getParentDepartment\",[arg0]).result;};this.getDaoModule=function(){return ri(\"UserService\",\"getDaoModule\",[]).result;};this.getUserPropertyByName=function(arg0){return ri(\"UserService\",\"getUserPropertyByName\",[arg0]).result;};this.getCurUserLevel=function(){return ri(\"UserService\",\"getCurUserLevel\",[]).result;};this.getUserById=function(arg0){return ri(\"UserService\",\"getUserById\",[arg0]).result;};this.getDefaultDepartment=function(arg0){return ri(\"UserService\",\"getDefaultDepartment\",[arg0]).result;};this.getGroupById=function(arg0){return ri(\"UserService\",\"getGroupById\",[arg0]).result;};this.getRoleById=function(arg0){var role=ri(\"UserService\",\"getRoleById\",[arg0]).result\nreturn ri(\"UserService\",\"getRoleById\",[arg0]).result;};this.loginFor=function(arg0,arg1,arg2){return ri(\"UserService\",\"loginFor\",[arg0,arg1,arg2]).result;};this.isLogged=function(){return ri(\"UserService\",\"isLogged\",[]).result;};this.isLoginAs=function(username){if(!username)\nreturn ri(\"UserService\",\"isLogged\",[]).result;else\nreturn ri(\"UserService\",\"isLoginAs\",[username]).result;};this.getLocalUserInfo=function(arg0,arg1){return ri(\"UserService\",\"getLocalUserInfo\",[arg0,arg1]).result;};this.getMyAccountInfo=function(){return ri(\"UserService\",\"getMyAccountInfo\",[]).result;};this.assertCurFunctionAccessible=function(arg0){return ri(\"UserService\",\"assertCurFunctionAccessible\",[arg0]).result;};this.getAllFunctionsOfCurrentUser=function(){return ri(\"UserService\",\"getAllFunctionsOfCurrentUser\",[]).result;};this.changePassword=function(arg0,arg1){return ri(\"UserService\",\"changePassword\",[arg0,arg1]).result;};this.getUserByName=function(arg0){return ri(\"UserService\",\"getUserByName\",[arg0]).result;};this.searchUsers=function(arg0,arg1,arg2){return ri(\"UserService\",\"searchUsers\",[arg0,arg1,arg2]).result;};this.getMatchUsersNumber=function(arg0){return ri(\"UserService\",\"getMatchUsersNumber\",[arg0]).result;};this.getMatchUsersNumberInCurUser=function(arg0){return ri(\"UserService\",\"getMatchUsersNumberInCurUser\",[arg0]).result;};this.assertCurrentUserCanOperateUser=function(arg0){return ri(\"UserService\",\"assertCurrentUserCanOperateUser\",[arg0]).result;};this.getRootGroup=function(){return ri(\"UserService\",\"getRootGroup\",[]).result;};this.getGroupByName=function(arg0){return ri(\"UserService\",\"getGroupByName\",[arg0]).result;};this.getRootDepartments=function(){return ri(\"UserService\",\"getRootDepartments\",[]).result;};this.getRootDepartmentsInCurHierarchy=function(){};this.getDepartmentById=function(arg0){return ri(\"UserService\",\"getDepartmentById\",[arg0]).result;};this.getDepartmentByName=function(arg0){return ri(\"UserService\",\"getDepartmentByName\",[arg0]).result;};this.searchDepartmentsInCurUser=function(arg0,arg1,arg2){return ri(\"UserService\",\"searchDepartmentsInCurUser\",[arg0,arg1,arg2]).result;};this.searchAllDepartments=function(arg0){return ri(\"UserService\",\"searchAllDepartments\",[arg0]).result;};this.getMatchDepartmentsNumber=function(arg0){return ri(\"UserService\",\"getMatchDepartmentsNumber\",[arg0]).result;};this.getMatchDepartmentsNumberInCurUser=function(arg0){return ri(\"UserService\",\"getMatchDepartmentsNumberInCurUser\",[arg0]).result;};this.getPathOfDepartment=function(arg0,arg1){return ri(\"UserService\",\"getPathOfDepartment\",[arg0,arg1]).result;};this.moveDepartment=function(arg0,arg1){return ri(\"UserService\",\"moveDepartment\",[arg0,arg1]).result;};this.getRoleByName=function(arg0){return ri(\"UserService\",\"getRoleByName\",[arg0]).result;};this.searchRoles=function(arg0,arg1,arg2){return ri(\"UserService\",\"searchRoles\",[arg0,arg1,arg2]).result;};this.searchRolesInCurUser=function(arg0,arg1,arg2){return ri(\"UserService\",\"searchRolesInCurUser\",[arg0,arg1,arg2]).result;};this.getMatchRolesNumber=function(arg0){return ri(\"UserService\",\"getMatchRolesNumber\",[arg0]).result;};this.getMatchRolesNumberInCurUser=function(arg0){return ri(\"UserService\",\"getMatchRolesNumberInCurUser\",[arg0]).result;};this.getFunctionById=function(arg0){return ri(\"UserService\",\"getFunctionById\",[arg0]).result;};this.deleteFunction=function(arg0){return ri(\"UserService\",\"deleteFunction\",[arg0]).result;};this.getRootFunctions=function(){return ri(\"UserService\",\"getRootFunctions\",[]).result;};this.getRootFunctionsOfCurrentUser=function(){return ri(\"UserService\",\"getRootFunctionsOfCurrentUser\",[]).result;};this.getParentFunction=function(arg0){return ri(\"UserService\",\"getParentFunction\",[arg0]).result;};this.getSubFunctionsOfCurrentUser=function(arg0){return ri(\"UserService\",\"getSubFunctionsOfCurrentUser\",[arg0]).result;};this.getAllFunctions=function(){return ri(\"UserService\",\"getAllFunctions\",[]).result;};this.getFunctionsOfRole=function(arg0){return ri(\"UserService\",\"getFunctionsOfRole\",[arg0]).result;};this.getGroupsOfUser=function(arg0){return ri(\"UserService\",\"getGroupsOfUser\",[arg0]).result;};this.assignGroupsToUser=function(arg0,arg1){return ri(\"UserService\",\"assignGroupsToUser\",[arg0,arg1]).result;};this.setDefaultGroups=function(arg0,arg1){return ri(\"UserService\",\"setDefaultGroups\",[arg0,arg1]).result;};this.getDefaultGroups=function(arg0){return ri(\"UserService\",\"getDefaultGroups\",[arg0]).result;};this.getGrantableGroupsOfCurrentUser=function(){return ri(\"UserService\",\"getGrantableGroupsOfCurrentUser\",[]).result;};this.getGrantableDepartmentsOfCurrentUser=function(){return ri(\"UserService\",\"getGrantableDepartmentsOfCurrentUser\",[]).result;};this.assignUsersToGroup=function(arg0,arg1){return ri(\"UserService\",\"assignUsersToGroup\",[arg0,arg1]).result;};this.getGrantableUsersOfDepartment=function(arg0){return ri(\"UserService\",\"getGrantableUsersOfDepartment\",[arg0]).result;};this.getRootGrantableGroupsOfCurrentUser=function(){return ri(\"UserService\",\"getRootGrantableGroupsOfCurrentUser\",[]).result;};this.getGroupsOfRole=function(arg0){return ri(\"UserService\",\"getGroupsOfRole\",[arg0]).result;};this.getUsersOfDepartment=function(arg0){return ri(\"UserService\",\"getUsersOfDepartment\",[arg0]).result;};this.getDepartmentsOfUserInCurHier=function(arg0){return ri(\"UserService\",\"getDepartmentsOfUserInCurHier\",[arg0]).result;};this.getDepartmentsOfUserInCurUser=function(arg0){return ri(\"UserService\",\"getDepartmentsOfUserInCurUser\",[arg0]).result;};this.getDepartmentsOfCurrentUser=function(){return ri(\"UserService\",\"getDepartmentsOfCurrentUser\",[]).result;};this.getDepartmentsOfUser=function(arg0){return ri(\"UserService\",\"getDepartmentsOfUser\",[arg0]).result;};this.assignDepartmentsToUser=function(arg0,arg1){return ri(\"UserService\",\"assignDepartmentsToUser\",[arg0,arg1]).result;};this.setDefaultDepartments=function(arg0,arg1){return ri(\"UserService\",\"setDefaultDepartments\",[arg0,arg1]).result;};this.getDefaultDepartments=function(arg0){return ri(\"UserService\",\"getDefaultDepartments\",[arg0]).result;};this.getGrantableRolesOfCurUser=function(){return ri(\"UserService\",\"getGrantableRolesOfCurUser\",[]).result;};this.getAssignedRolesOfUser=function(arg0){return ri(\"UserService\",\"getAssignedRolesOfUser\",[arg0]).result;};this.getAllRolesOfUserForClient=function(arg0){return ri(\"UserService\",\"getAllRolesOfUserForClient\",[arg0]).result;};this.getUnionRolesOfUser=function(arg0){return ri(\"UserService\",\"getUnionRolesOfUser\",[arg0]).result;};this.getInheritedRolesOfUser=function(arg0){return ri(\"UserService\",\"getInheritedRolesOfUser\",[arg0]).result;};this.getAllRolesOfUser=function(arg0){return ri(\"UserService\",\"getAllRolesOfUser\",[arg0]).result;};this.assignRolesToUser=function(arg0,arg1){return ri(\"UserService\",\"assignRolesToUser\",[arg0,arg1]).result;};this.assignUsersToRole=function(arg0,arg1){return ri(\"UserService\",\"assignUsersToRole\",[arg0,arg1]).result;};this.getCurUsersOfRole=function(arg0){return ri(\"UserService\",\"getCurUsersOfRole\",[arg0]).result;};this.getUsersOfRole=function(arg0){return ri(\"UserService\",\"getUsersOfRole\",[arg0]).result;};this.getCreatedRolesOfCurrentUser=function(){return ri(\"UserService\",\"getCreatedRolesOfCurrentUser\",[]).result;};this.getParentGroup=function(arg0){return ri(\"UserService\",\"getParentGroup\",[arg0]).result;};this.assignRolesToGroup=function(arg0,arg1){return ri(\"UserService\",\"assignRolesToGroup\",[arg0,arg1]).result;};this.assignGroupsToRole=function(arg0,arg1){return ri(\"UserService\",\"assignGroupsToRole\",[arg0,arg1]).result;};this.getAssignedRolesOfGroup=function(arg0){return ri(\"UserService\",\"getAssignedRolesOfGroup\",[arg0]).result;};this.getInheritedRolesOfGroup=function(arg0){return ri(\"UserService\",\"getInheritedRolesOfGroup\",[arg0]).result;};this.getUnionRolesOfGroup=function(arg0){return ri(\"UserService\",\"getUnionRolesOfGroup\",[arg0]).result;};this.getCreatedRolesOfGroup=function(arg0){return ri(\"UserService\",\"getCreatedRolesOfGroup\",[arg0]).result;};this.assignRolesToDepartment=function(arg0,arg1){return ri(\"UserService\",\"assignRolesToDepartment\",[arg0,arg1]).result;};this.assignDepartmentsToRole=function(arg0,arg1){return ri(\"UserService\",\"assignDepartmentsToRole\",[arg0,arg1]).result;};this.getAssignedRolesOfDepartment=function(arg0){return ri(\"UserService\",\"getAssignedRolesOfDepartment\",[arg0]).result;};this.getInheritedRolesOfDepartment=function(arg0){return ri(\"UserService\",\"getInheritedRolesOfDepartment\",[arg0]).result;};this.getUnionRolesOfDepartment=function(arg0){return ri(\"UserService\",\"getUnionRolesOfDepartment\",[arg0]).result;};this.getFunctionsByRoleId=function(arg0){return ri(\"UserService\",\"getFunctionsByRoleId\",[arg0]).result;};this.setFunctionsOfRole=function(arg0,arg1){return ri(\"UserService\",\"setFunctionsOfRole\",[arg0,arg1]).result;};this.isBuiltIn=function(arg0){return ri(\"UserService\",\"isBuiltIn\",[arg0]).result;};this.isGroupAdmin=function(arg0){return ri(\"UserService\",\"isGroupAdmin\",[arg0]).result;};this.isGroupAdminOfRootGroup=function(arg0){return ri(\"UserService\",\"isGroupAdminOfRootGroup\",[arg0]).result;};this.isCurrentUserAdmin=function(){return ri(\"UserService\",\"isCurrentUserAdmin\",[]).result;};this.assertCurrentUserCanUpdateRole=function(arg0){return ri(\"UserService\",\"assertCurrentUserCanUpdateRole\",[arg0]).result;};this.groupIsDescend=function(arg0){return ri(\"UserService\",\"groupIsDescend\",[arg0]).result;};this.getSubGroupsAndUsers=function(arg0){return ri(\"UserService\",\"getSubGroupsAndUsers\",[arg0]).result;};this.getUserPropertyValue=function(arg0){return ri(\"UserService\",\"getUserPropertyValue\",[arg0]).result;};this.getAllHierarchy=function(){};this.createHierarchy=function(arg0,arg1,arg2){};this.getHierarchyById=function(arg0){};this.updateHierarchy=function(arg0,arg1,arg2){};this.addUserAttribute=function(arg0,arg1,arg2,arg3){return ri(\"UserService\",\"addUserAttribute\",[arg0,arg1,arg2,arg3]).result;};this.removeUserAttribute=function(arg0,arg1){return ri(\"UserService\",\"removeUserAttribute\",[arg0,arg1]).result;};this.updateUserAttribute=function(arg0,arg1,arg2,arg3){return ri(\"UserService\",\"updateUserAttribute\",[arg0,arg1,arg2,arg3]).result;};this.addGroupAttribute=function(arg0,arg1,arg2,arg3){return ri(\"UserService\",\"addGroupAttribute\",[arg0,arg1,arg2,arg3]).result;};this.removeGroupAttribute=function(arg0,arg1){return ri(\"UserService\",\"removeGroupAttribute\",[arg0,arg1]).result;};this.updateGroupAttribute=function(arg0,arg1,arg2,arg3){return ri(\"UserService\",\"updateGroupAttribute\",[arg0,arg1,arg2,arg3]).result;};this.getAllGroupAttributes=function(arg0){return ri(\"UserService\",\"getAllGroupAttributes\",[arg0]).result;};this.getGroupAttribute=function(arg0,arg1){return ri(\"UserService\",\"getGroupAttribute\",[arg0,arg1]).result;};this.addDepartmentAttribute=function(arg0,arg1,arg2,arg3){return ri(\"UserService\",\"addDepartmentAttribute\",[arg0,arg1,arg2,arg3]).result;};this.removeDepartmentAttribute=function(arg0,arg1){return ri(\"UserService\",\"removeDepartmentAttribute\",[arg0,arg1]).result;};this.updateDepartmentAttribute=function(arg0,arg1,arg2,arg3){return ri(\"UserService\",\"updateDepartmentAttribute\",[arg0,arg1,arg2,arg3]).result;};this.getAllDepartmentAttributes=function(arg0){return ri(\"UserService\",\"getAllDepartmentAttributes\",[arg0]).result;};this.getDepartmentAttribute=function(arg0,arg1){return ri(\"UserService\",\"getDepartmentAttribute\",[arg0,arg1]).result;};this.getAllRolesOfGroup=function(arg0){return ri(\"UserService\",\"getAllRolesOfGroup\",[arg0]).result;};this.getAllRoles=function(){return ri(\"UserService\",\"getAllRoles\",[]).result;};this.getAllUsers=function(){return ri(\"UserService\",\"getAllUsers\",[]).result;};this.loginFromDB=function(arg0,arg1){return ri(\"UserService\",\"loginFromDB\",[arg0,arg1]).result;};this.switchUser=function(arg0){return ri(\"UserService\",\"switchUser\",[arg0]).result;};this.getLicenses=function(){return ri(\"UserService\",\"getLicenses\",[]).result;};this.isEnabledUser=function(arg0){return ri(\"UserService\",\"isEnabledUser\",[arg0]).result;};this.searchAllUsers=function(arg0){return ri(\"UserService\",\"searchAllUsers\",[arg0]).result;};this.isDefaultGroupAdminOfUser=function(arg0){return ri(\"UserService\",\"isDefaultGroupAdminOfUser\",[arg0]).result;};this.searchDepartments=function(arg0,arg1,arg2){return ri(\"UserService\",\"searchDepartments\",[arg0,arg1,arg2]).result;};this.isGroupAccessibleOfCurUser=function(arg0){return ri(\"UserService\",\"isGroupAccessibleOfCurUser\",[arg0]).result;};this.searchAllRoles=function(arg0){return ri(\"UserService\",\"searchAllRoles\",[arg0]).result;};this.setFunctionsOfRoleIntern=function(arg0,arg1){return ri(\"UserService\",\"setFunctionsOfRoleIntern\",[arg0,arg1]).result;};this.isBuiltInFunction=function(arg0){return ri(\"UserService\",\"isBuiltInFunction\",[arg0]).result;};this.deleteGroupExpByUserId=function(arg0){return ri(\"UserService\",\"deleteGroupExpByUserId\",[arg0]).result;};this.getUserManagerConfig=function(){return ri(\"UserService\",\"getUserManagerConfig\",[]).result;};this.setUserManagerConfig=function(arg0){return ri(\"UserService\",\"setUserManagerConfig\",[arg0]).result;};this.getCurrentUserPassword=function(){return ri(\"UserService\",\"getCurrentUserPassword\",[]).result;};this.setSystemConfigService=function(arg0){return ri(\"UserService\",\"setSystemConfigService\",[arg0]).result;};this.createRole=function(name,alias,desc,groupId,componentDefine){var roleId=ri2(\"UserService\",\"createRole\",[name,alias,desc,groupId,componentDefine]).result;if(roleId){this.onChange.fire({type:\"getGrantableRolesOfCurUser\"});this.onChange.fire({type:\"getSubGroups\"});}\nreturn roleId;};this.updateRole=function(roleId,alias,desc,componentDefine){var result=ri(\"UserService\",\"updateRole\",[roleId,alias,desc,componentDefine]).result;if(result){this.onChange.fire({type:\"getGrantableRolesOfCurUser\"});}\nreturn result;};this.deleteRole=function(roleId){var result=ri(\"UserService\",\"deleteRole\",[roleId]).result;if(result){if(roleId==this.__getCurrentRoleId()){this.__setCurrentRoleId(null);}\nthis.onChange.fire({type:\"getGrantableRolesOfCurUser\"});this.onChange.fire({type:\"getRoleById\",id:roleId});}\nreturn result;};this.createGroup=function(parentId,name,alias,desc){var groupId=ri2(\"UserService\",\"createGroup\",[parentId,name,alias,desc]).result;if(groupId){this.onChange.fire({type:\"getSubGroups\"});}\nreturn groupId;};this.updateGroup=function(groupId,name,alias,desc){var result=ri(\"UserService\",\"updateGroup\",[groupId,name,alias,desc]).result;if(result){this.onChange.fire({type:\"getGroupInfo\"});}\nreturn result;};this.deleteGroup=function(groupId){var parentGroup=ri(\"UserService\",\"getParentGroup\",[groupId]).result;var result=ri(\"UserService\",\"deleteGroup\",[groupId]).result;if(result){if(groupId==this.__getCurrentGroupId()){this.__setCurrentGroupId(null);}\nif(parentGroup)\nthis.__setSelectedGroupId(parentGroup.id);this.onChange.fire({type:\"getSubGroups\"});this.onChange.fire({type:\"getGroupById\",id:groupId});}\nreturn result;};this.createUser=function(parentGroupId,name,alias,desc,password,isEnabled){return this.createUserEx(parentGroupId,name,alias,desc,password,isEnabled,\"\");};this.createUserEx=function(parentGroupId,name,alias,desc,password,isEnabled,extendValue){var userId=ri2(\"UserService\",\"createUserEx\",[parentGroupId,name,alias,desc,password,isEnabled,extendValue]).result;if(userId){this.onChange.fire({type:\"getUsersOfGroup\"});this.onChange.fire({type:\"getSubGroups\"});}\nreturn userId;};this.updateUser=function(userId,alias,desc,password,isEnabled){return this.updateUserEx(user,alias,desc,password,isEnabled,\"\");};this.updateUserEx=function(userId,alias,desc,password,isEnabled,extendValue){var result=ri(\"UserService\",\"updateUserEx\",[userId,alias,desc,password,isEnabled,extendValue]).result;if(result){this.onChange.fire({type:\"getUsersOfGroup\"});}\nreturn result;};this.deleteUser=function(userId){var result=ri(\"UserService\",\"deleteUser\",[userId]).result;if(result){if(userId==this.__getCurrentUserId()){this.__setCurrentUserId(null);}\nthis.onChange.fire({type:\"getUsersOfGroup\"});this.onChange.fire({type:\"getUserById\",id:userId});}\nreturn result;};this.moveUserFromGroup=function(userId,groupId){var result=ri(\"UserService\",\"moveUserFromGroup\",[userId,groupId]).result;if(result){if(userId==this.__getCurrentUserId()){this.__setCurrentUserId(null);}\nthis.onChange.fire({type:\"getUsersOfGroup\"});this.onChange.fire({type:\"getUserById\",id:userId});}\nreturn result;};this.createDepartment=function(parentId,name,alias,desc,departmentCode){var groupId=ri2(\"UserService\",\"createDepartment\",[parentId,name,alias,desc,departmentCode]).result;if(groupId){this.onChange.fire({type:\"getSubGroups\"});}\nreturn groupId;};this.updateDepartment=function(groupId,alias,desc,departmentCode){var result=ri(\"UserService\",\"updateDepartment\",[groupId,alias,desc,departmentCode]).result;if(result){this.onChange.fire({type:\"getGroupInfo\"});}\nreturn result;};this.deleteDepartment=function(groupId){var result=ri(\"UserService\",\"deleteDepartment\",[groupId]).result;if(result){if(groupId==this.__getCurrentGroupId()){this.__setCurrentGroupId(null);}\nthis.onChange.fire({type:\"getSubGroups\"});this.onChange.fire({type:\"getGroupById\",id:groupId});}\nreturn result;};this.deleteHierarchy=function(id){};this.getSubGroups=function(groupId){if(\"ALL_GROUPS\"==groupId){var groupList=this.getRootGrantableGroupsOfCurrentUser();return groupList;}else{return ri(\"UserService\",\"getSubGroups\",[groupId]).result;}};this.getUsersOfGroup=function(groupId){return ri(\"UserService\",\"getUsersOfGroup\",[groupId]).result;};this.login=function(username,password){return ri(\"UserService\",\"login\",[username,password]).result;};this.getRootGrantableDepartmentsOfCurrentUser=function(){var user=this.getCurrentUser();var depList=[];if(this.isAdmin(user.id)||this.isGroupAdminOfRootGroup(user.id)){depList.push(this.getDepartmentById(\"DEPARTMENT\"));return depList;}\nreturn ri(\"UserService\",\"getRootGrantableDepartmentsOfCurrentUser\",[]).result;}\nthis.getSubDepartments=function(groupId){return ri(\"UserService\",\"getSubDepartments\",[groupId]).result;};this.createFunction=function(funcId,funcPid,name,alias,desc){var result=ri2(\"UserService\",\"createFunction\",[funcId,funcPid,name,alias,desc]).result;if(result){this.onChange.fire({type:\"getSubFunctions\"});}\nreturn result;};this.updateFunction=function(funcId,alias,desc){var result=ri(\"UserService\",\"updateFunction\",[funcId,alias,desc]).result;if(result){this.onChange.fire({type:\"getSubFunctions\"});}\nreturn result;};this.deleteFunction=function(functionId){var result=ri(\"UserService\",\"deleteFunction\",[functionId]).result;if(result){if(functionId==this.__getCurrentFunctionId()){this.__setCurrentFunctionId(null);}\nthis.onChange.fire({type:\"getSubFunctions\"});this.onChange.fire({type:\"getFunctionById\",id:functionId});}\nreturn result;};this.getSubFunctions=function(funcId){if(\"ALL_FUNCTIONS\"==funcId){var functionList=this.getRootFunctions();return functionList;}else{return ri(\"UserService\",\"getSubFunctions\",[funcId]).result;}};this.__setCurrentRoleId=function(roleId){this.currentRoleId=roleId;this.onChange.fire({type:\"__getCurrentRoleId\"});};this.__getCurrentRoleId=function(){return this.currentRoleId;};this.__getCurrentRole=function(){if(this.currentRoleId){return this.getRoleById(this.currentRoleId);}else{return null;}};this.__setSelectedGroupId=function(groupId){if(this.selectedGroupId==groupId){return;}\nthis.selectedGroupId=groupId;this.onChange.fire({type:\"__getSelectedGroupId\"});};this.__getSelectedGroupId=function(){return this.selectedGroupId;};this.__setCurrentGroupId=function(groupId){this.currentGroupId=groupId;this.onChange.fire({type:\"__getCurrentGroupId\"});if(groupId){this.__setCurrentUserId(null);}};this.__getCurrentGroupId=function(){return this.currentGroupId;};this.__getCurrentGroup=function(){var bean=null;if(this.currentGroupId){var currentRoleList=this.__getRoleListOfGroup(this.currentGroupId);var currentGroup=this.getGroupById(this.currentGroupId);if(currentGroup){bean={id:currentGroup.id,name:currentGroup.name,alias:currentGroup.alias,desc:currentGroup.desc,departmentCode:currentGroup.departmentCode,roleList:currentRoleList};}}\nreturn bean;};this.__getCurrentGroupInfo=function(){var bean=null;if(this.currentGroupId){var currentGroup=this.getGroupById(this.currentGroupId);if(currentGroup){bean={id:currentGroup.id,name:currentGroup.name,alias:currentGroup.alias,desc:currentGroup.desc,departmentCode:currentGroup.departmentCode};}}\nreturn bean;};this.__setCurrentHierarchyId=function(hierarchyId){};this.__getCurrentHierarchyId=function(){};this.__getCurrentHierarchy=function(){};this.setCurrentHierarchyId=function(hierarchyId){};this.getCurrentHierarchyId=function(){};this.__getCurrentDepartment=function(){var bean=null;if(this.currentGroupId){var currentRoleList=this.__getRoleListOfGroup(this.currentGroupId,true);var currentGroup=this.getDepartmentById(this.currentGroupId);if(currentGroup){bean={id:currentGroup.id,name:currentGroup.name,alias:currentGroup.alias,desc:currentGroup.desc,departmentCode:currentGroup.departmentCode,roleList:currentRoleList};}}\nreturn bean;};this.__getCurrentDepartmentInfo=function(){var bean=null;if(this.currentGroupId){var currentGroup=this.getDepartmentById(this.currentGroupId);if(currentGroup){bean={id:currentGroup.id,name:currentGroup.name,alias:currentGroup.alias,desc:currentGroup.desc,departmentCode:currentGroup.departmentCode};}}\nreturn bean;};this.__setCurrentUserId=function(userId){this.currentUserId=userId;this.onChange.fire({type:\"__getCurrentUserId\"});if(userId){this.__setCurrentGroupId(null);}};this.__getCurrentUserId=function(){return this.currentUserId;};this.__getCurrentUser=function(){var bean=null;if(this.currentUserId){var roleList=this.__getRoleListOfUser(this.currentUserId);var user=this.getUserById(this.currentUserId);var emptyPwd=\"          \";if(user){bean={id:user.id,name:user.name,alias:user.alias,desc:user.desc,password:emptyPwd,rePassword:emptyPwd,roleList:roleList};}}\nreturn bean;};this.__getCurrentUserInfo=function(){var bean=null;if(this.currentUserId){var user=this.getUserById(this.currentUserId);var isEnabled=this.isEnabledUser(this.currentUserId);var emptyPwd=\"          \";if(user){bean={id:user.id,name:user.name,alias:user.alias,desc:user.desc,password:emptyPwd,rePassword:emptyPwd,isEnabled:isEnabled,extendValue:user.extended};}}\nreturn bean;};this.__setSelectedFunctionId=function(funcId){if(this.selectedFunctionId==funcId){return;}\nthis.selectedFunctionId=funcId;this.currentFunctionId=null;this.onChange.fire({type:\"__getSelectedFunctionId\"});};this.__getSelectedFunctionId=function(){return this.selectedFunctionId;};this.__setCurrentFunctionId=function(funcId){this.currentFunctionId=funcId;this.onChange.fire({type:\"__getCurrentFunctionId\"});};this.__getCurrentFunctionId=function(funcId){return this.currentFunctionId;};this.__getCurrentFunction=function(){if(this.currentFunctionId){return this.getFunctionById(this.currentFunctionId);}else{return null;}};this.__isPermission=function(roleId){var grantableRolesOfCurUser=this.getGrantableRolesOfCurUser();for(var i=0;i<grantableRolesOfCurUser.length;i++){if(grantableRolesOfCurUser[i].id==roleId)\nreturn true;}\nreturn false;};this.__isInheritedRole=function(roleId,userId){var grantableRolesOfCurUser=this.getInheritedRolesOfUser(userId);for(var i=0;i<grantableRolesOfCurUser.length;i++){if(grantableRolesOfCurUser[i].id==roleId)\nreturn true;}\nreturn false;};this.__getRoleListOfGroup=function(groupId,isDep){var allRoles=isDep?this.getUnionRolesOfDepartment(groupId):this.getUnionRolesOfGroup(groupId);var assignedRolesOfGroup=isDep?this.getAssignedRolesOfDepartment(groupId):this.getAssignedRolesOfGroup(groupId);var inheritedRolesOfGroup=isDep?this.getInheritedRolesOfDepartment(groupId):this.getInheritedRolesOfGroup(groupId);var roleList=new Array();for(var i=0;i<allRoles.length;i++){var role=new Object();role.id=allRoles[i].id;role.name=allRoles[i].name;role.alias=allRoles[i].alias;role.checked=false;role.applyToDescendant=false;role.disabled=false;for(var j=0;j<assignedRolesOfGroup.length;j++){if(allRoles[i].id==assignedRolesOfGroup[j].role.id){role.checked=true;role.applyToDescendant=assignedRolesOfGroup[j].descend;var isPermission=this.__isPermission(assignedRolesOfGroup[j].role.id);if(!isPermission)\nrole.disabled=true;}}\nfor(var k=0;k<inheritedRolesOfGroup.length;k++){if(allRoles[i].id==inheritedRolesOfGroup[k].id){role.checked=true;role.disabled=true;role.applyToDescendant=true;}}\nroleList.push(role);}\nreturn roleList;};this.__getRoleListOfUser=function(userId){var allRoles=this.getUnionRolesOfUser(userId);var assignedRolesOfUser=this.getAssignedRolesOfUser(userId);var inheritedRolesOfUser=this.getInheritedRolesOfUser(userId);var roleList=new Array();for(var i=0;i<allRoles.length;i++){var role=new Object();role.id=allRoles[i].id;role.name=allRoles[i].name;role.alias=allRoles[i].alias;role.checked=false;role.applyToDescendant=false;role.disabled=false;for(var j=0;j<assignedRolesOfUser.length;j++){if(allRoles[i].id==assignedRolesOfUser[j].id){role.checked=true;var isPermission=this.__isPermission(assignedRolesOfUser[j].id);if(!isPermission)\nrole.disabled=true;}}\nfor(var k=0;k<inheritedRolesOfUser.length;k++){if(allRoles[i].id==inheritedRolesOfUser[k].id){role.checked=true;role.disabled=true;}}\nroleList.push(role);}\nreturn roleList;};this.__getGrantableRolesOfCurUser=function(){var grantableRolesOfCurUser=this.getGrantableRolesOfCurUser();if(!grantableRolesOfCurUser)\nreturn null;this.createdRolesOfCurrentUser=this.getCreatedRolesOfCurrentUser();var roleList=new Array();for(var i=0;i<grantableRolesOfCurUser.length;i++){var role=new Object();role.id=grantableRolesOfCurUser[i].id;role.name=grantableRolesOfCurUser[i].name;role.alias=grantableRolesOfCurUser[i].alias;role.checked=false;role.applyToDescendant=false;role.isCreatedRole=this.__isCreatedRole(role.id);if(role.id!=null&&role.id==\"ADMINS\"&&role.id==\"GROUPADMINS\")\nrole.isBuiltIn=true;else\nrole.isBuiltIn=false;roleList.push(role);}\nreturn roleList;};this.__isGroupAdmin=function(userId){var roles=this.getAssignedRolesOfUser(userId);for(var i=0;i<roles.length;i++){if(roles[i].id==\"GROUPADMINS\")\nreturn true;}\nreturn false;};this.__getUsersOfGrantableGroup=function(){var loginId=this.getCurrentUser().id;var groups=this.getGrantableGroupsOfCurrentUser();var result=new Array();for(var i=0;i<groups.length;i++){var userList=this.getUsersOfGroup(groups[i].id);for(var j=0;j<userList.length;j++){if(!this.isBuiltIn(userList[j].id)&&!this.isGroupAdmin(userList[j].id)&&loginId!=userList[j].id){result.push(userList[j]);}}}\nreturn result;};this.__isCreatedRole=function(roleId){var roles=this.createdRolesOfCurrentUser;if(!roles)\nreturn false;for(var i=0;i<roles.length;i++){if(roles[i].id==roleId)\nreturn true;}\nreturn false;};this.canCurrentUserOperateUserManager=function(){if(!this.keys[\"canCurrentUserOperateUserManager\"]){this.cache[\"canCurrentUserOperateUserManager\"]=ri(\"UserService\",\"canCurrentUserOperateUserManager\",[]).result;this.keys[\"canCurrentUserOperateUserManager\"]=true;}\nreturn this.cache[\"canCurrentUserOperateUserManager\"];};this.__setSelectedFunctionNode=function(node){this.selectedFunction=node;};this.__getSelectedFunctionNode=function(){return this.selectedFunction;};this.addGroupExpByList=function(userid,departmentList){var result=ri(\"UserService\",\"addGroupExpByList\",[userid,departmentList]).result;return result;};this.getDataLimitGroupExp=function(userid,departmentId){var result=ri(\"UserService\",\"getDataLimitGroupExp\",[userid,departmentId]).result;return result;};this.getFunctionConfig=function(){return ri(\"UserService\",\"getFunctionConfig\",[]).result;}\nthis.searchUsersInCurUser=function(searchName,fromIndex,toIndex){var result=ri(\"UserService\",\"searchUsersInCurUser\",[searchName,fromIndex,toIndex]).result;if(result){for(var i=0;i<result.length;i++){var group=this.getDefaultDepartment(result[i].id);if(group){if(group.departmentCode==null||group.departmentCode==\"\"){if(group.id==\"DEPARTMENT\")\nresult[i].departmentCode=this.getDepartmentById(\"DEPARTMENT\").alias;else\nresult[i].departmentCode=\"\";}\nelse\nresult[i].departmentCode=group.departmentCode;}}}\nreturn result;};this.synchronizateUserOnChangeFire=function(){this.onChange.fire({type:\"getUsersOfGroup\"});this.onChange.fire({type:\"refreshRootGroup\"});}\nthis.showUserSynchronization=function(){return ri(\"UserService\",\"showUserSynchronization\",[]).result;}};lang.extend(UserService,Module);","js/freequery/control/Progress.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var Progress=function(parentObject){Progress.superclass.constructor.call(this);this.parentObject=parentObject;parentObject.innerHTML='<div style=\"border: white 2px inset; background: white; width: 100%; height: 100%;\">'+'    <div class=\"_progressBar\" style=\"filter: Alpha(Opacity=0, FinishOpacity=100, Style=1, StartX=0, StartY=0, FinishX=100, FinishY=0);'+'        width: 0%; position: absolute; height: expression(this.parentNode.scrollHeight - 4);\">'+'        <div style=\"background: blue; width: 100%; height: 100%\">'+'        <\/div>'+'    <\/div>'+' <div style=\"width: 100%; height: expression(this.parentNode.scrollHeight - 4); position: absolute; text-align: center\"><table width=\"100%\" height=\"100%\"><tr><td class=\"_progressText\" align=\"center\">0%<\/td><\/tr><\/table><\/div>'+'<\/div>';this.progressBar=domutils.findElementByClassName(parentObject,\"_progressBar\");this.progressText=domutils.findElementByClassName(parentObject,\"_progressText\");this.progress=0;};lang.extend(Progress,Module);Progress.prototype.getProgress=function(){return this.progress;};Progress.prototype.setProgress=function(progress,msg){if(progress<0||progress>100)\nreturn;progress=Math.round(progress);this.progress=progress;if(this.progressBar.style.pixelWidth>0){var filterBackup=this.progressBar.style.filter;this.progressBar.style.filter=\"\";this.progressBar.style.filter=filterBackup;}\nvar width=text=progress+\"%\";this.progressBar.style.width=width;if(msg)\ntext+=\" (\"+msg+\")\";this.progressText.innerText=text;}\nProgress.prototype.increase=function(){this.setProgress(this.progress+1);}","js/bof/baseajax/common/DOMAgent.js":"\n﻿\nvar DOMAgent=function(container){this.container=container;this.listeners={};this.addListener(this.container,\"contextmenu\",this.universalHandler,this);this.addListener(this.container,\"click\",this.universalHandler,this);this.addListener(this.container,\"dblclick\",this.universalHandler,this);this.addListener(this.container,\"mousedown\",this.universalHandler,this);this.addListener(this.container,\"mouseup\",this.universalHandler,this);this.addListener(this.container,\"mouseover\",this.universalHandler,this);this.addListener(this.container,\"mouseout\",this.universalHandler,this);};lang.extend(DOMAgent,\"freequery.widget.Module\");DOMAgent.prototype.destroy=function(){this.removeListener(this.container,\"contextmenu\",this.universalHandler);this.removeListener(this.container,\"click\",this.universalHandler);this.removeListener(this.container,\"dblclick\",this.universalHandler);this.removeListener(this.container,\"mousedown\",this.universalHandler);this.removeListener(this.container,\"mouseup\",this.universalHandler);this.removeListener(this.container,\"mouseover\",this.universalHandler);this.removeListener(this.container,\"mouseout\",this.universalHandler);this.listeners={};this.container=null;DOMAgent.superclass.constructor.call(this);};DOMAgent.prototype.refreshAll=function(html){this.container.innerHTML=html;};DOMAgent.prototype.refreshPart=function(bofid,html){var element=this.getElementByBofid(bofid);element.innerHTML=html;};DOMAgent.prototype.registerListenerByBofid=function(bofid,type,handler,that){this.registerListener(\"BOFID\",bofid,type,handler,that);};DOMAgent.prototype.registerListenerByBofclass=function(bofclass,type,handler,that){this.registerListener(\"BOFCLASS\",bofclass,type,handler,that);};DOMAgent.prototype.registerListenerByDefault=function(type,handler,that){this.registerListener(\"__DefaultBindingType\",\"\",type,handler,that);};DOMAgent.prototype.universalHandler=function(event){var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");var event=eventutil.getEvent();var type=event.type;var target=event.target;var hasElem=false;if(target.tagName.toLowerCase()!=\"embed\"){for(var elem in target){hasElem=true;break;}}\nif(!hasElem)return;this.dispatchEvent(\"__DefaultBindingType\",\"\",type,event);var bofclass=target.getAttribute(\"bofclass\");if(bofclass){this.dispatchEvent(\"BOFCLASS\",bofclass,type,event);}\nvar bofid=target.getAttribute(\"bofid\");if(!bofid)\nbofid=target.bofid;if(bofid){this.dispatchEvent(\"BOFID\",bofid,type,event);}};DOMAgent.prototype.getElementByBofid=function(bofid){return findElementByBofid(this.container,bofid);};DOMAgent.prototype.registerListener=function(bindingType,target,type,handler,that){var key=bindingType+\":\"+target+\":\"+type;var listenerArray=this.listeners[key];if(!listenerArray){listenerArray=[];this.listeners[key]=listenerArray;}\nfor(var i=0;i<listenerArray.length;i++){if(listenerArray[i].handler==handler){return;}}\nlistenerArray.push({handler:handler,that:that});};DOMAgent.prototype.dispatchEvent=function(bindingType,target,type,event){if(!event.target.disabled){var key=bindingType+\":\"+target+\":\"+type;var listenerArray=this.listeners[key];if(!listenerArray){return;}\nfor(var i=0;i<listenerArray.length;i++){var handler=listenerArray[i].handler;var that=listenerArray[i].that;handler.call(that,event);}}};var findElementByBofid=function(baseElements,targetBofid,maxDepth){if(!(baseElements instanceof Array))\nbaseElements=[baseElements];if(0===baseElements.length)\nreturn null;var nextBaseElements=[];for(var i=0;i<baseElements.length;i++){var baseElement=baseElements[i];if(!baseElement.tagName)\ncontinue;var bofid=baseElement.getAttribute(\"bofid\");if(bofid==targetBofid)\nreturn baseElement;var nodes=baseElement.childNodes.length;var tmpNode=baseElement.childNodes[0];for(var j=0;j<nodes;j++){nextBaseElements.push(tmpNode);tmpNode=tmpNode.nextSibling;if(!tmpNode&&j+1<nodes)\ntmpNode=baseElement.childNodes[j+1];}}\nif(\"undefined\"===typeof maxDepth)\nreturn findElementByBofid(nextBaseElements,targetBofid);else if(maxDepth>0)\nreturn findElementByBofid(nextBaseElements,targetBofid,maxDepth-1);else\nreturn null;};","js/bof/baseajax/control/HResizer.js":"\nvar HResizer=function(handle,resizee,minSize,maxSize,that,callback){var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");var event=eventutil.getEvent();this.resizee=resizee;this.initialSize=this.resizee.offsetWidth;this.minSize=minSize;this.maxSize=maxSize;this.initialX=event.pageX;this.deltaX=0;this.callback=callback;this.callObj=that;if(this.minSize<=this.initialSize&&this.initialSize<=this.maxSize){this.minDelta=this.minSize-this.initialSize;this.maxDelta=this.maxSize-this.initialSize;}else{this.minDelta=0;this.maxDelta=0;}\nthis.eventAgent=new(jsloader.resolve(\"freequery.lang.EventAgent\"))();this.mask=this.createResizingMask(handle);this.eventAgent.addListener(document.body,\"mousemove\",this.resizing,this);this.eventAgent.addListener(document.body,\"mouseup\",function(){if(this.deltaX!=0){this.resize();}\nthis.destroy();},this);if(domutils.isIE()){this.eventAgent.addListener(document.body,\"selectstart\",function(ev){domutils.stopEvent(ev);});}else if(domutils.isFirefox()){document.body.style.MozUserSelect=\"none\";}else{;}};HResizer.prototype.destroy=function(){if(this.callback){if(this.callObj){this.callback.call(this.callObj,this.resizee,this.deltaX);}else{this.callback.call(this.resizee,this.deltaX);}}\nthis.eventAgent.removeAllListeners();this.destroyResizingMask(this.mask);if(domutils.isFirefox()){document.body.style.MozUserSelect=\"\";var sel=window.getSelection();sel.collapse(document.body,0);}};HResizer.prototype.resizing=function(ev){var deltaX=ev.clientX-this.initialX;if(this.minDelta<=deltaX&&deltaX<=this.maxDelta){this.deltaX=deltaX;this.mask.style.left=ev.clientX-maskWidth/2;}else{;}};HResizer.prototype.resize=function(ev){this.resizee.style.width=this.initialSize+this.deltaX;};var maskWidth=800;HResizer.prototype.createResizingMask=function(handle){var offset=domutils.getCumulativeOffset(handle);var mask=document.createElement(\"div\");mask.style.height=handle.offsetHeight;mask.style.top=offset.top;mask.style.left=(offset.left-maskWidth/2)+\"px\";mask.style.width=maskWidth+\"px\";mask.className=\"hresizerMask\";document.body.appendChild(mask);return mask;};HResizer.prototype.destroyResizingMask=function(mask){document.body.removeChild(mask);document.body.style.cursor=\"default\";};","js/bof/macro/OlapQueryMacroExecutor.js":"\nvar MacroService=imports(\"bof.macro.services.MacroService\");var util=jsloader.resolve(\"freequery.common.util\");var OlapQueryMacroExecutor=function(resource,targetName,eventName,args,script){this.resource=resource;this.targetName=targetName;this.evenetType=eventName;this.args=args;this.script=script;};OlapQueryMacroExecutor.prototype.run=function(module){var application={};var openOlapQuery=function(id,callback,needToolBar){if(callback){var ret=util.remoteInvokeEx(\"CatalogService\",\"getCatalogElementById\",[id]);if(ret&&ret.succeeded){if(!ret.result){alert(\"报表已被删除\");return;}}\nvar sBaseURL=jsloader.baseHref;if(typeof needToolBar==\"undefined\")\nneedToolBar=true;var url=sBaseURL+\"openresource.jsp?notNeedLogon=true&showtoolbar=\"+needToolBar+\"&resid=\"+id;var wnd=window.open(url);if(wnd.queryCmd){var olapQueryView=wnd.queryCmd.olapQueryView;callback(olapQueryView);}else{var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");eventutil.addEventHandler(wnd,'load',function(){var time=setInterval(function(){if(wnd&&wnd.classAction&&wnd.classAction.olapQueryCommand&&wnd.classAction.olapQueryCommand.olapQueryView&&wnd.classAction.olapQueryCommand.olapQueryView.clientId){clearInterval(time);var olapQueryView=wnd.classAction.olapQueryCommand.olapQueryView;callback(olapQueryView);}},100);});}\nwnd.moveTo(0,0);wnd.resizeTo(screen.availWidth,screen.availHeight);}else{alert(\"not support in present\")}};var openURL=function(url,postData,name,spec){if(postData&&postData.length>0){var form=document.getElementById(\"__openURLForm\");if(!form){var form=document.createElement(\"FORM\");document.body.appendChild(form);}\nform.innerHTML=\"\";form.style.display=\"none\";form.id=\"__openURLForm\";form.action=url;form.method='POST';if(name){form.target=name;}\nelse{form.target=\"_blank\";}\nfor(var i=0;i<postData.length;i++){var input=document.createElement(\"input\");input.name=postData[i].name;input.value=postData[i].value;form.appendChild(input);}\nform.submit();}else{if(name&&spec){window.open(url,name,spec);}\nelse if(name){window.open(url,name)}\nelse{window.open(url);}}};application.openOlapQuery=openOlapQuery;eval(\"var \"+this.resource.getResourceType()+\" = this.resource;\");eval(\"application.\"+this.resource.getResourceType()+\" = \"+this.resource.getResourceType()+\";\");var event={arguments:this.args};application.event=event;application.application=application;application.module=module;var resourceId=this.resource.getResourceId();var use=function(moduleName){eval(MacroService.getInstance().findCommonModule(resourceId?resourceId:null,moduleName,\"ClientSide\"));return loadCommonModule();};eval(this.script);main.apply(null,this.args);};","js/bof/olapquery/OlapQueryCommand.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var util=jsloader.resolve(\"freequery.common.util\");var modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var dialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var OlapQueryView=imports(\"bof.olapquery.olapquery.OlapQueryView\");var OlapQueryViewDisplay=imports(\"bof.olapquery.olapquery.OlapQueryViewDisplay\");var OlapQueryCommand=function(){this.parent=document.getElementById('rigthContent');this.treePane=document.getElementById('leftCatalogTree');this.onClose=new CustomEvent(\"onClose\",this);this.needRefresh=new CustomEvent(\"needRefresh\",this);this.mainView=registry.get(\"MainView\");this.resolveMany=[\"bof.olapquery.olapquery.OlapQueryView\",\"bof.baseajax.common.DOMAgent\",\"bof.olapquery.olapquery.OlapQueryViewToolbar\",\"bof.olapquery.olapquery.OlapTable\",\"bof.olapquery.paging.Paging\",\"freequery.query.ParameterPanel\",\"freequery.control.ComboBox\",\"freequery.control.DropDownBox\",\"freequery.control.DropDownPanel\",\"freequery.control.DateTimePicker\",\"freequery.thirdparty.Calendar\",\"freequery.control.ReportDatePicker\",\"freequery.control.DropDownTree\",\"freequery.control.DropDownTreePanel\",\"freequery.tree.ParameterTree\",\"freequery.tree.ParameterTreeNode\"];};lang.extend(OlapQueryCommand,Module);OlapQueryCommand.prototype.destroy=function(){if(this.tmpQuery){this.tmpQuery.destroy();this.tmpQuery==null;}\nif(this.exportEl){domutils.destroyNode(this.exportEl);this.exportEl==null}\nthis.close();this.mainView=null;this.onClose=null;this.needRefresh=null;this.parent=null;this.treePane=null;OlapQueryCommand.superclass.destroy.call(this);};OlapQueryCommand.prototype.execute=function(action,node){if(this.resolveMany){jsloader.resolveMany(this.resolveMany);this.resolveMany=null;}\nthis.action=action;if(action==\"create\"||action==\"CREATE\"||action==\"createDiscover\"){this.chooseCube();return;}\nif(action==\"OPEN\"&&typeof node!=\"undefined\"){this.openQueryView(node);}\nif(action==\"VIEW\"&&typeof node!=\"undefined\"){this.viewQueryView(node);}\nif(action==\"DISCOVER\"&&typeof node!=\"undefined\"){this.discoverQueryView(node);}\nif(action==\"VIEWNOTREFRESH\"&&typeof node!=\"undefined\"){this.viewNotRefreshQueryView(node);}};OlapQueryCommand.prototype.close=function(){if(this.olapQueryView){if(this.olapQueryView.onClose)\nthis.olapQueryView.onClose.unsubscribe(this.doClose,this);this.olapQueryView.needRefresh.unsubscribe(this.onNeedRefresh,this);this.olapQueryView.onOpenOlapQueryView.unsubscribe(this.openOlapQueryViewRefreshCallback,this);this.olapQueryView.destroy();this.olapQueryView=null;}\nif(this.treeWrapper){this.parentObj.style.overflow=\"\";this.treeWrapper.destroyTree();this.treeWrapper=null;}\nif(this.mainView)\nthis.mainView.showLeftView();this.queryViewOpened=false;};OlapQueryCommand.prototype.isOnlyOneCube=function(){var ret=util.remoteInvokeEx(\"CatalogService\",\"getChildElements\",[\"DATASOURCES\"]);if(ret&&ret.succeeded){var dslist=[];var result=ret.result;for(var i=0;i<result.length;i++){if(result[i].type!=\"OLAP_DATASOURCE\"){continue;}\ndslist.push(result[i]);}\nif(dslist.length==1){var ret2=util.remoteInvokeEx(\"CatalogService\",\"getChildElements\",[dslist[0].id]);if(ret2&&ret2.succeeded){if(ret2.result.length==1){var retValue={isOnlyOne:true,id:ret2.result[0].id};return retValue;}}}}\nvar retValue={isOnlyOne:false,id:null};return retValue;};OlapQueryCommand.prototype.chooseCube=function(){var retValue=this.isOnlyOneCube()\nif(retValue.isOnlyOne){this.createQueryViewByCubeId(retValue.id,null);return;}\nvar data=new Array();var dialogConfig={};dialogConfig.title=\"选择多维数据集\";dialogConfig.forceCallback=true;dialogConfig.fullName=\"bof.olapquery.olapquery.ChooseCubeDialog\";dialogFactory.showDialog(dialogConfig,data,this.createQueryViewByCubeId,this);};OlapQueryCommand.prototype.createQueryViewByCubeId=function(nodeId,node){if(typeof nodeId==\"undefined\"){if(!this.queryViewOpened)\nthis.onClose.fire(this);return;}\nthis.cubeId=nodeId;if(this.mainView)\nthis.mainView.hideLeftView();if(this.action==\"createDiscover\"){this.olapQueryView=new OlapQueryViewDisplay(this.parent,\"EDIT\");}else{this.olapQueryView=new OlapQueryView(this.parent,\"EDIT\");}\nthis.olapQueryView.onClose.subscribe(this.doClose,this);this.olapQueryView.needRefresh.subscribe(this.onNeedRefresh,this);var tree=registry.get(\"DisplayCustomTree\");var folderNodeData=null;if(tree&&tree.selectedNode){var selectedNode=tree.selectedNode;if(selectedNode._type==\"DEFAULT_TREENODE\"||selectedNode._type==\"SELF_TREENODE\"){}else{selectedNode=selectedNode.parentNode;}\nfolderNodeData={id:selectedNode._id,text:selectedNode.text};}\nthis.olapQueryView.init(this.cubeId,folderNodeData);this.queryViewOpened=true;}\nOlapQueryCommand.prototype.openQueryView=function(node){if(this.mainView)\nthis.mainView.hideLeftView();var openMode=\"\"\nvar result=util.remoteInvokeEx(\"OlapQueryClientService\",\"getOpenModeFromQuery\",[node._id]);if(result&&result.succeeded){if(result.result==\"DISCOVER\")\nopenMode=\"createDiscover\";}\nif(openMode==\"createDiscover\"){this.olapQueryView=new OlapQueryViewDisplay(this.parent,\"EDIT\");}else{this.olapQueryView=new OlapQueryView(this.parent,\"EDIT\");}\nthis.olapQueryView.onClose.subscribe(this.doClose,this);this.olapQueryView.needRefresh.subscribe(this.onNeedRefresh,this);this.olapQueryView.open(node._id);this.queryViewOpened=true;}\nOlapQueryCommand.prototype.viewQueryView=function(node){this.olapQueryView=new OlapQueryViewDisplay(this.parent,\"VIEW\");this.olapQueryView.onClose.subscribe(this.doClose,this);this.olapQueryView.needRefresh.subscribe(this.onNeedRefresh,this);this.olapQueryView.onOpenOlapQueryView.subscribe(this.openOlapQueryViewRefreshCallback,this);var flag=this.olapQueryView.open(node._id);this.queryViewOpened=true;}\nOlapQueryCommand.prototype.discoverQueryView=function(node){this.olapQueryView=new OlapQueryViewDisplay(this.parent,\"DISCOVER\");this.olapQueryView.onClose.subscribe(this.doClose,this);this.olapQueryView.needRefresh.subscribe(this.onNeedRefresh,this);this.olapQueryView.onOpenOlapQueryView.subscribe(this.openOlapQueryViewRefreshCallback,this);var flag=this.olapQueryView.open(node._id);this.queryViewOpened=true;};OlapQueryCommand.prototype.openOlapQueryViewRefreshCallback=function(){if(this.olapQueryView){this.olapQueryView.refreshDataByEditType();}}\nOlapQueryCommand.prototype.onNeedRefresh=function(that,folderId){this.needRefresh.fire(this,folderId);};OlapQueryCommand.prototype.doExportTo=function(node,typeId){if(node._type!=\"OLAP_REPORT\"){return;}\nif(!this.exportEl){this.exportEl=document.createElement(\"div\");}\nthis.exportEl.style.display=\"none\";this.exportEl.style.height=\"1px\";var parentEl=document.getElementById('rigthContent');parentEl.appendChild(this.exportEl);if(this.olapQueryView&&this.olapQueryView.queryId==node._id){if(this.olapQueryView.clientId){if(!this.olapQueryView.toolbar.exportMenu){this.olapQueryView.toolbar.initExportMenu();}\nthis.olapQueryView.toolbar.exportMenu.selectedId=typeId;this.olapQueryView.toolbar.doExportMenuCloseUp();return;}}\nif(this.tmpQuery){this.tmpQuery.destroy();this.tmpQuery=null;}\nthis.tmpQuery=new OlapQueryView(this.exportEl,\"EDIT\");this.tmpQuery.open(node._id);this.tmpQuery.onOpenOlapQueryView.subscribe(this.openOlapQueryViewExportCallback,[this,typeId]);};OlapQueryCommand.prototype.openOlapQueryViewExportCallback=function(){if(this[0].tmpQuery.clientId){if(!this[0].tmpQuery.toolbar.exportMenu){this[0].tmpQuery.toolbar.initExportMenu();}\nthis[0].tmpQuery.toolbar.exportMenu.selectedId=this[1];this[0].tmpQuery.toolbar.exportMenu.isFromTree=true;this[0].tmpQuery.toolbar.doExportMenuCloseUp();this[0].tmpQuery.exportMenu=null;}\nwindow.setTimeout(this[0].closeOlapView,100000);}\nOlapQueryCommand.prototype.closeOlapView=function(node,typeId){if(this.tmpQuery){this.tmpQuery.onOpenOlapQueryView.unsubscribe(this.openOlapQueryViewCallback,this);this.tmpQuery.destroy();this.tmpQuery==null;}};OlapQueryCommand.prototype.doClose=function(){this.onClose.fire(this);};OlapQueryCommand.prototype.viewNotRefreshQueryView=function(node){this.olapQueryView=new OlapQueryViewDisplay(this.parent,\"VIEW\");this.olapQueryView.onClose.subscribe(this.doClose,this);this.olapQueryView.needRefresh.subscribe(this.onNeedRefresh,this);this.olapQueryView.open(node._id,node._isInPage_);this.queryViewOpened=true;};OlapQueryCommand.prototype.discoverNotRefreshQueryView=function(node){if(this.mainView){this.mainView.hideLeftView();}\nthis.olapQueryView=new OlapQueryViewDisplay(this.parent,\"DISCOVER\");this.olapQueryView.onClose.subscribe(this.doClose,this);this.olapQueryView.needRefresh.subscribe(this.onNeedRefresh,this);this.olapQueryView.open(node._id);this.queryViewOpened=true;};","js/bof/olapquery/olapquery/ExpListPanel.js":"\nvar ExpListView=imports(\"bof.olapquery.olapquery.ExpListView\");var ExpListPanel=function(container){this.onDeleteHandler=new CustomEvent();this.expListView=new ExpListView(container);this.expListView.onDelClick.subscribe(this.doDeleteExp,this);this.initToBlank();};lang.extend(ExpListPanel,\"freequery.widget.Module\");ExpListPanel.prototype.initToBlank=function(){var data=new Array();this.fill(data);};ExpListPanel.prototype.changeExpList=function(hierarchyDefine){var selections=hierarchyDefine.selections;this.fill(selections);};ExpListPanel.prototype.fill=function(bean){this.expListView.clearList();this.expListView.fillList(bean);};ExpListPanel.prototype.doDeleteExp=function(that,exp){var expList=new Array();expList.push(exp);this.onDeleteHandler.fire(this,expList);};ExpListPanel.prototype.moveUpExpList=function(){var selectedRow=this.expListView.getSelectedRow();if(!selectedRow){return;}\nvar prev=selectedRow.previousSibling;if(!prev){}else{var parentNode=selectedRow.parentNode;parentNode.insertBefore(selectedRow,prev);}};ExpListPanel.prototype.moveDownExpList=function(){var selectedRow=this.expListView.getSelectedRow();if(!selectedRow){return;}\nvar next=selectedRow.nextSibling;if(!next){}else{var parentNode=selectedRow.parentNode;if(next.nextSibling){parentNode.insertBefore(selectedRow,next.nextSibling);}else{parentNode.appendChild(selectedRow);}}};ExpListPanel.prototype.getExpList=function(){var allItems=this.expListView.toDataItems();var expList=new Array();for(var i=0;i<allItems.length;i++){expList.push(allItems[i].id);}\nreturn expList;};ExpListPanel.prototype.destroy=function(){if(this.expListView){this.expListView.destroy();this.expListView=null;}\nExpListPanel.superclass.destroy.call(this);};","js/bof/olapquery/olapquery/ExpListView.js":"\nvar ExpListView=function(container){this.init(container,__url);this.onDelClick=new CustomEvent();};lang.extend(ExpListView,\"freequery.widget.Module2\");ExpListView.prototype.clearList=function(){var tBody=this.elemListTable.firstChild;var rows=this.elemListTable.rows;var length=rows.length;for(var i=length-1;i>0;i--){var trElem=rows[i];var spanElem=trElem.children[2].children[0];this.removeListener(spanElem,\"click\",this.deleteExp);domutils.destroyNode(trElem);}};ExpListView.prototype.fillList=function(items){for(var i=0;i<items.length;i++){this.fillItem(items[i]);}};ExpListView.prototype.fillConditionTd=function(exp,td){var text=\"\";if(exp.selectionType==\"CUSTOM_XMLA_MEMBER\"){text=\"<img src=\\\"img/catalogtree/CUSTOMMEMBER.gif\\\" title=\\\"自定义成员 \\\"/>\";}else if(exp.selectionType==\"FUNCALL_NAMEDSET\"){text=\"<img src=\\\"img/catalogtree/NAMEDSET.gif\\\" title=\\\"自定义命名集\\\"/>\";}else if(exp.selectionType==\"XMLA_Member\"){text=\"<img src=\\\"img/catalogtree/MEMBER.gif\\\" title=\\\"维成员\\\"/>\";}else if(exp.selectionType==\"FunCall\"){text=\"<img src=\\\"img/catalogtree/DB_FUNCTION.gif\\\" title=\\\"函数\\\"/>\";}else if(exp.selectionType==\"MEASURE_MEMBER\"){text=\"<img src=\\\"img/catalogtree/MEASURE.gif\\\" title=\\\"度量值\\\"/>\";}\ntd.innerHTML=text;};ExpListView.prototype.fillItem=function(exp){var tr=this.elemListTable.insertRow(-1);tr.name=lang.toJSONString(exp);if(tr.parentNode.children.length%2==1){tr.style.backgroundColor=\"#f7f7f7\";}\nvar td=tr.insertCell(-1);td.align=\"center\";this.fillConditionTd(exp,td);td=tr.insertCell(-1);td.align=\"center\";td.style.wordWrap='break-word';td.innerText=exp.caption;td=tr.insertCell(-1);;td.align=\"center\";var delButton=this.createElement(td,\"span\");delButton.className=\"button-usermanager-buttonbar button-bgicon-delete\";delButton.title=\"删除\";this.addListener(delButton,\"click\",this.deleteExp,this);};ExpListView.prototype.deleteExp=function(){var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");var ev=eventutil.getEvent();var expJsonString=ev.target.parentElement.parentElement.name;var exp=lang.parseJSON(expJsonString);this.onDelClick.fire(this,exp.mdx);};ExpListView.prototype.destroy=function(){this.clearList();ExpListView.superclass.destroy.call(this);};","js/bof/olapquery/olapquery/OlapQueryView.js":"\nvar util=jsloader.resolve(\"freequery.common.util\");var DOMAgent=jsloader.resolve(\"bof.baseajax.common.DOMAgent\");var OlapQueryViewToolbar=jsloader.resolve(\"bof.olapquery.olapquery.OlapQueryViewToolbar\");var OlapTable=jsloader.resolve(\"bof.olapquery.olapquery.OlapTable\");var TreeWrapper=imports(\"freequery.resourcemanager.TreeWrapper\");var ExpListPanel=imports(\"bof.olapquery.olapquery.ExpListPanel\");var HierarchyDefinePanel=imports(\"bof.olapquery.olapquery.workspace.HierarchyDefinePanel\");var OlapDefinePanel=imports(\"bof.olapquery.olapquery.olapquerydefine.OlapDefinePanel\");var dialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var Paging=jsloader.resolve(\"bof.olapquery.paging.Paging\");var ParameterPanel=jsloader.resolve(\"freequery.query.ParameterPanel\");var OlapQueryPropertyPanel=imports(\"bof.olapquery.olapquery.workspace.OlapQueryPropertyPanel\");var MacroService=imports(\"bof.macro.services.MacroService\");var HResizer=jsloader.resolve(\"bof.baseajax.control.HResizer\");var PopupMenu=jsloader.resolve(\"freequery.menu.PopupMenu\");var OlapQueryMacroExecutor=jsloader.resolve(\"bof.macro.OlapQueryMacroExecutor\");var OlapQueryViewChart=jsloader.resolve(\"bof.olapquery.olapquery.OlapQueryViewChart\");var modalWindow=imports(\"freequery.common.modalWindow\").getInstance();var Progress=jsloader.resolve(\"freequery.control.Progress\");var compatutil=jsloader.resolve(\"freequery.lang.compatutil\");var OlapQueryView=function(container,editType){OlapQueryView.superclass.constructor.call(this,container);this.needRefresh=new CustomEvent(\"needRefresh\",this);this.parent=container;this.editType=editType;this.setFrameTitle(\"多维分析 \");this.domAgent=new DOMAgent(this.frameViewContainer);this.domAgent.registerListenerByDefault(\"contextmenu\",function(e){domutils.stopEvent(e);},this);this.domAgent.registerListenerByBofclass(\"hsplitter\",\"mousedown\",function(){;},this);this.domAgent.registerListenerByBofclass(\"vsplitter\",\"mousedown\",function(){;},this);this.domAgent.registerListenerByBofid(\"nextPage\",\"click\",this.nextPage,this);this.domAgent.registerListenerByBofid(\"prevPage\",\"click\",this.prevPage,this);this.olapTable=new OlapTable(this.domAgent);this.olapTable.refreshDefineHandler.subscribe(this.refreshDefine,this);this.olapTable.refreshChartHandler.subscribe(this.refreshChart,this);this.olapTable.afterRefrshTableHandler.subscribe(this.afterRefrshTable,this);this.olapTable.afterRefreshDataHandler.subscribe(this.afterRefreshData,this);this.olapTable.setRowCountHandler.subscribe(this.setRowCount,this);this.olapTable.onClick.subscribe(this.doOnClickOlapTable,this);this.olapTable.onFilter.subscribe(this.doOnFilter,this);this.olapTable.onAddSubTotal.subscribe(this.doAddSubTotal,this);this.olapTable.onAddFunction.subscribe(this.doAddFunction,this);this.olapTable.onClearSubTotal.subscribe(this.doClearSubTotal,this);this.olapTable.onClearFunction.subscribe(this.doClearFunction,this);this.olapTable.onSetClientConfig.subscribe(this.doSetClientConfig,this);this.olapTable.onSetFunction.subscribe(this.refreshData,this);this.olapTable.onRefreshTableStyle.subscribe(this.refreshTableStyle,this);this.olapTable.onExchange.subscribe(this.doExchange,this);this.olapTable.onDrillTo.subscribe(this.doDrillTo,this);this.olapTable.onNextColumnPage.subscribe(this.doNextColumnPage,this);this.olapTable.onPrevColumnPage.subscribe(this.doPrevColumnPage,this);this.toolbar=new OlapQueryViewToolbar(this.domAgent);this.toolbar.setControlType(\"OlapQueryView\");this.toolbar.onRefresh.subscribe(this.refreshOlapTable,this);this.toolbar.onRefreshData.subscribe(this.refreshData,this);this.toolbar.onSaveOlapQuery.subscribe(this.saveOlapQuery,this);this.toolbar.onRestoreOlapQuery.subscribe(this.restoreOlapQuery,this);this.toolbar.onShowQueryDefinePanel.subscribe(this.showOlapDefinePanel,this);this.toolbar.onSetReport.subscribe(this.setReport,this);this.toolbar.onSetSubtotal.subscribe(this.setSubtotal,this);this.toolbar.onSetParam.subscribe(this.setParamSetting,this);this.toolbar.onAddFavorite.subscribe(this.addFavorite,this);this.toolbar.onSaveAsOlapQuery.subscribe(this.saveAsOlapQuery,this);this.toolbar.onPreviewMDX.subscribe(this.previewMDX,this);this.toolbar.onGoBackWard.subscribe(this.goBackWard,this);this.toolbar.onGoForWard.subscribe(this.goForWard,this);this.toolbar.onExport.subscribe(this.prepareExport,this);this.toolbar.onChangeViewSettings.subscribe(this.changeViewSettings,this);this.toolbar.onGetParamId.subscribe(this.getParamId,this);this.toolbar.onAddChart.subscribe(this.doAddChart,this);this.toolbar.onAddMap.subscribe(this.doAddMap,this);this.toolbar.onPrint.subscribe(this.doPrint,this);this.toolbar.onPropSetting.subscribe(this.doPropSetting,this);this.toolbar.onChangeMode.subscribe(this.doChangeMode,this);this.toolbar.onClearAllHiddenSettings.subscribe(this.doClearAllHiddenSettings,this);this.toolbar.onGetChartCount.subscribe(this.setToolbarChartCount,this);this.newQuery=true;this.queryDefine;this.isDefinePanelShow=true;this.isPaging=false;this.pageCount=1;this.pageRows=0;this.hasRefresh=false;this.refreshingData=false;this.domAgent.registerListenerByBofid(\"hsplitterLetfTd\",\"mousedown\",this.mouseDownToResize,this);this.popupMenu=new PopupMenu(document.body,this);this.frameViewContainer.style.overflow=\"hidden\";this.locationBar.onMinFrame.subscribe(this.doMinFrame,this);this.afterRefresh=new CustomEvent(\"afterRefresh\",this);this.onClickOlapTable=new CustomEvent(\"onClickOlapTable\",this);this.onAfterRefrshTable=new CustomEvent(\"onAfterRefrshTable\",this);this.onDoCmd=new CustomEvent(\"onDoCmd\",this);this.onOpenOlapQueryView=new CustomEvent(\"onOpenOlapQueryView\",this);this.onSave=new CustomEvent(\"onSave\",this);};lang.extend(OlapQueryView,\"freequery.common.FrameView\");OlapQueryView.prototype.mouseDownToResize=function(e){var handle=this.domAgent.getElementByBofid(\"hsplitterLetfTd\");var resizee=this.domAgent.getElementByBofid(\"leftPaneTreeTd\");new HResizer(handle,resizee,200,300);};OlapQueryView.prototype.init=function(cubeId,folderNodeData){this.folderNodeData=folderNodeData;this.cubeId=cubeId;var result=util.remoteInvokeEx(\"OlapQueryClientService\",\"create\",[cubeId]);if(!result){this.onClose.fire(this);return false;}\nresult=result.result;this.setClientId(result.clientId);this.paramPanelId=result.parameterPanelId;this.domAgent.refreshAll(result.html);domutils.removeWhiteSpace(this.domAgent.container);this.initComponent(cubeId,result.clientId,result);this.toolbar.setViewSettings(result.viewSetting);this.autoRefresh=result.autoRefresh;this.isPaging=result.olapPaging;this.toolbar.setIsPaging(this.isPaging);this.pageRows=result.olapPagingRows;this.clientSetting=result.setting;this.setPaddingLeft(this.clientSetting.tableDefine.leftPadding);if(this.clientSetting.alignCenter){this.setAlignCenter(true);}\nthis.setQueryViewBackgroundColor();this.pagingContainer=this.domAgent.getElementByBofid(\"pagingDiv\");this.initPaging();this.elemReportHeader=this.domAgent.getElementByBofid(\"reportHeader\");this.elemReportTail=this.domAgent.getElementByBofid(\"reportTail\");this.setHeader(\"\");this.setTail(\"\");this.elemChartDiv=this.domAgent.getElementByBofid(\"chartDiv\");this.chartTool=new OlapQueryViewChart(this,this.clientId,this.elemChartDiv);this.toolbar.initScrollToolbar();MacroService.getInstance().fire(this,\"olapQuery\",\"onRender\",[this]);this.initHandlers();if(domutils.isIE()&&domutils.getBrowserVersion()>9){var container=this.domAgent.getElementByBofid(\"scrollDiv\");compatutil.fixFirefoxScroll2(container);}\nreturn true;};OlapQueryView.prototype.open=function(olapQueryId){this.id=olapQueryId;util.compositeInvoke(\"openOlapReport\",[olapQueryId],true,this.compositeInvokeOpenOlapReportCallBack,this);this.showMaskDiv(true);this.maskDiv_CancelButton.innerHTML='正在运行中……';}\nOlapQueryView.prototype.compositeInvokeOpenOlapReportCallBack=function(ret){if(ret&&ret.succeeded){}else{if(this.onClose==null){return;}\nmodalWindow.showServerError(ret);this.error=true;this.onClose.fire(this);return false;}\nvar result=util.remoteInvokeEx(\"OlapQueryClientService\",\"openOlapReport\",[this.id]);if(!result){this.error=true;this.onClose.fire(this);return false;}\nif(this.olapTable){}else{return;}\nthis.showMaskDiv(false);this.maskDiv_CancelButton.innerHTML='正在查询中……';var olapQueryId=this.id;result=result.result;this.cubeId=result.cubeId;this.setClientId(result.clientId);this.paramPanelId=result.parameterPanelId;this.clientSetting=result.setting;this.isPaging=result.paging;this.toolbar.setIsPaging(this.isPaging);this.pageRows=result.pageRows;this.reportId=result.reportId;this.reportAlias=result.reportAlias;if(result.paramLayout){this.paramLayout=lang.parseJSON(result.paramLayout);if(this.paramLayout&&this.paramLayout.length>0&&this.paramLayout[0].length>0){;}else{this.paramLayout=null;}}\ntry{var pathandname=util.getCatalogNodeLocation(this.reportId);this.setFrameTitleLocal(pathandname[0]);this.setFrameTitle(pathandname[1]);}catch(e){}\nthis.autoRefresh=result.autoRefresh;this.domAgent.refreshAll(result.html);domutils.removeWhiteSpace(this.domAgent.container);this.initComponent(result.cubeId,result.clientId,result);var chartClientIdList=result.chartClientIdList;this.newQuery=false;this.pagingContainer=this.domAgent.getElementByBofid(\"pagingDiv\");this.initPaging();this.elemReportHeader=this.domAgent.getElementByBofid(\"reportHeader\");this.elemReportTail=this.domAgent.getElementByBofid(\"reportTail\");var formatHead=this.replaceEvalString(this.clientSetting.formatHead);var formatTail=this.replaceEvalString(this.clientSetting.formatTail);this.setHeader(formatHead,true);this.setTail(formatTail,true);this.subtotalInfos=[];if(result.subtotalInfos.length>0){for(var i=0;i<result.subtotalInfos.length;i++){var subtotalInfo=result.subtotalInfos[i];var obj={};obj.name=subtotalInfo.name;obj.dimenion=subtotalInfo.dimenionName;obj.hierarchyText=subtotalInfo.hierText;obj.hierarchyName=subtotalInfo.hierUniqueName;obj.calculate=subtotalInfo.calculateType;obj.solveOrder=subtotalInfo.solveOrder;obj.dataType=subtotalInfo.dataType;obj.formatType=subtotalInfo.formatType;this.subtotalInfos.push(obj);}}\nthis.elemChartDiv=this.domAgent.getElementByBofid(\"chartDiv\");this.chartTool=new OlapQueryViewChart(this,this.clientId,this.elemChartDiv);this.chartTool.loadCharts(result.charts,result.chartOptionsList);this.resetChartAlign(this.clientSetting.chartAlign);this.toolbar.setViewSettings(result.viewSetting);this.setPaddingLeft(this.clientSetting.tableDefine.leftPadding);if(this.clientSetting.alignCenter){this.setAlignCenter(true);}\nthis.setQueryViewBackgroundColor();this.toolbar.initScrollToolbar();util.clearCompositeInvokeCache(\"openOlapReport\",[olapQueryId]);MacroService.getInstance().fire(this,\"olapQuery\",\"onRender\",[this]);this.initHandlers();this.onOpenOlapQueryView.fire(this,this.reportId);if(domutils.isIE()&&domutils.getBrowserVersion()>9){var container=this.domAgent.getElementByBofid(\"scrollDiv\");compatutil.fixFirefoxScroll2(container);}\nreturn true;};OlapQueryView.prototype.initComponent=function(cubeId,clientId,result){this.initHierarchydefinePanel();this.leftPane=this.domAgent.getElementByBofid(\"leftPaneDiv\");this.olapDefineContainer=this.domAgent.getElementByBofid(\"olapDefine\");if(this.editType!=\"VIEW\"){this.treeWrapper=new TreeWrapper({treePane:this.leftPane,className:\"bof.olapquery.olapquery.OlapQueryViewCatalogTree\",titleBackGround:\"img/tree/subtreetitlebg.jpg\",title:\"可选资源\"},cubeId,clientId);this.treeWrapper.showTree();this.treeWrapper.tree.changeColor=true;this.treeWrapper.tree.setEditType(this.editType);this.treeWrapper.tree.placeMemberHandler.subscribe(this.onPlaceMember,this);this.treeWrapper.tree.placeMemberArrayHandler.subscribe(this.refreshDefine,this);this.treeWrapper.tree.onRebuildParam.subscribe(this.doRebuildParam,this);this.treeWrapper.tree.onRefreshDefine.subscribe(this.doRefreshDefine,this);this.initHierarchydefinePanel();this.initOlapDefine(this.olapDefineContainer);this.workSpaceTree=this.domAgent.getElementByBofid(\"treearea\");if(domutils.isFirefox()){util.changeTdToFixSize(this.workSpaceTree.parentNode);}\nthis.workSpaceTreeWrapper=new TreeWrapper({treePane:this.workSpaceTree,className:\"bof.olapquery.olapquery.workspace.OlapWorkSpaceTree\",titleBackGround:\"img/tree/subtreetitlebg.jpg\",title:\"可选资源\"},cubeId,clientId);this.workSpaceTreeWrapper.showTree();this.workSpaceTreeWrapper.tree.setEditType(this.editType);this.workSpaceTreeWrapper.tree.onDeleteHierarchy.subscribe(this.deleteHierarchy,this);this.workSpaceTreeWrapper.tree.onChangeExpListHandler.subscribe(this.onChangeExpList,this);this.workSpaceTreeWrapper.tree.onSelectTreeNode.subscribe(this.selectWorkSpaceNode,this);this.workSpaceTreeWrapper.tree.onRefreshParam.subscribe(this.doRefreshParam,this);}\nthis.setComponentCubeId(this.cubeId);if(this.editType==\"VIEW\"){this.hiddenLeftAndRightPane();}\nthis.toolbar.setEditType(this.editType);this.toolbar.hiddenButton();this.initParamPanelObj();this.refreshDefine(result);}\nOlapQueryView.prototype.selectWorkSpaceNode=function(that,type,node){this.destroyWorkSpace();this.propertyPanel=new OlapQueryPropertyPanel(this.workSpaceSettingContainer);this.propertyPanel.selectedNode=node;if(type==\"USEDCUSTOMMEMBER\"){this.propertyPanel.initToCustomMemberPropertys(node._obj);}else if(type==\"OLAP_PARAM\"){this.propertyPanel.initToOutputParamPropertys(node._obj,node);}else{this.propertyPanel.initToBlank();}\nthis.propertyPanel.onValueChange.subscribe(this.doValueChange,this);}\nOlapQueryView.prototype.doValueChange=function(sender,propertyName,propertyValue,propertyPanelUser,propertyList){var node=sender.selectedNode;if(node._type==\"CUSTOMMEMBER\"){var usedCustomMember=node._obj;if(propertyName==\"solveOrder\"){if(!util.checkNumberString(propertyValue,3)){alert(\"请输入正整数\");return;}\nif(parseInt(propertyValue)>2147483647){alert(\"数值过大!最大值为2147483647\");return;}\nusedCustomMember.solveOrder=propertyValue;var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"updateUsedCustomMember\",[this.clientId,usedCustomMember]);}else if(propertyName==\"customMemberAlias\"){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"setGlobalCustomMemberAlias\",[this.clientId,node._id,propertyValue]);if(ret&&ret.succeeded){this.doRefreshDefine();}}};if(node._type==\"OLAP_PARAM\"){var obj=node._obj;if(propertyName==\"publicParam\"){var alias=propertyList[\"alias\"];var display=propertyList[\"display\"];var noTitle=propertyList[\"noTitle\"];var useFilter=propertyList[\"useFilter\"];var paramSetting=propertyList[\"paramSetting\"];if(propertyValue==\"true\"){var paramId=obj.id;var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"getGlobalOutputParameterById\",[this.clientId,paramId]);if(ret&&ret.succeeded){var paramObj=ret.result;var componentDefine=lang.parseJSON(paramObj.componentDefine);alias.setValue(paramObj.alias);display.setValue(paramObj.display?\"true\":\"false\");noTitle.setValue(paramObj.noTitle?\"true\":\"false\");useFilter.setValue(componentDefine.useFilter?\"true\":\"false\");util.remoteInvokeEx(\"OlapQueryClientService\",\"setOutputParamInfos\",[this.clientId,obj.id,paramObj.alias,paramObj.display?\"true\":\"false\",paramObj.noTitle?\"true\":\"false\",paramObj.componentDefine]);}\nalias.setReadOnly(true);alias.setEnabled(false);display.setEnabled(false);noTitle.setEnabled(false);useFilter.setEnabled(false);paramSetting.setEnabled(false);}else{alias.setReadOnly(false);alias.setEnabled(true);display.setEnabled(true);noTitle.setEnabled(true);useFilter.setEnabled(true);paramSetting.setEnabled(true);}}\nif(propertyName==\"ParamSetting\"){this.propertyPanel.initToOutputParamPropertys(node._obj,node);node.refresh();}else if(propertyName==\"useFilter\"){var componentDefineString=obj.componentDefine;var componentDefine=lang.parseJSON(componentDefineString);var useFilter=false;if(propertyValue==\"true\"){useFilter=true;}\ncomponentDefine.useFilter=useFilter;componentDefineString=lang.toJSONString(componentDefine);var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"setOutputParamInfo\",[this.clientId,obj.id,\"componentDefine\",componentDefineString]);if(ret&&node.tree){node.refresh();}}else{var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"setOutputParamInfo\",[this.clientId,obj.id,propertyName,propertyValue]);if(ret&&node.tree){node.refresh();}}\nthis.rebuildParam(this.clientId);};}\nOlapQueryView.prototype.initOlapDefine=function(container){this.olapDefinePanel=new OlapDefinePanel(container,this.cubeId,this.clientId);this.resetDefineDivPosition();this.olapDefinePanel.onHiddenHandler.subscribe(this.hiddenOlapDefinePanel,this);this.olapDefinePanel.resetMemberOnAxisHandler.subscribe(this.resetMember,this);this.olapDefinePanel.moveMemberHandler.subscribe(this.moveMember,this);this.olapDefinePanel.onChangeExpListHandler.subscribe(this.onChangeExpList,this);this.olapDefinePanel.onChangeCurrentSelectedAxisHandler.subscribe(this.changeCurrentSelectedAxis,this);this.olapDefinePanel.onRemoveExpHandler.subscribe(this.deleteHierarchy,this);this.olapDefinePanel.changeCurrentSelectedStatus(this,0);}\nOlapQueryView.prototype.refreshChart=function(chartOptionsList){if(this.chartTool){this.chartTool.refreshAll(chartOptionsList);}}\nOlapQueryView.prototype.refreshDefine=function(result){var ret;if(result){ret=result;}else{var tempRet=util.remoteInvokeEx(\"OlapQueryClientService\",\"refreshDefine\",[this.clientId]);if(tempRet&&tempRet.succeeded){ret=tempRet.result;}}\nif(ret){this.fillQueryDefine({succeeded:true,result:ret.olapQueryDefine});this.rebuildParam(this.clientId);this.resetForwardBackwardState(ret.canGoForward,ret.canGoBackward);this.refreshClientSetting(ret.setting);if(this.elemReportHeader){var formatHead=this.replaceEvalString(this.clientSetting.formatHead);this.setHeader(formatHead,true);}\nif(this.elemReportTail){var formatTail=this.replaceEvalString(this.clientSetting.formatTail);this.setTail(formatTail,true);}\nvar errorList=ret.errorList;if(errorList.length>0){var msg=\"\";for(var i=0;i<errorList.length;i++){msg+=errorList[i]+\"\\n\";}\nalert(msg);}}}\nOlapQueryView.prototype.onChangeExpList=function(ctrl,axis,hierarchyInt){this.initHierarchydefinePanel();if(this.queryDefine){var axisDefine;if(axis==2){axisDefine=this.queryDefine.dice;}else{if(this.queryDefine.axisList){axisDefine=this.queryDefine.axisList[axis];}}\nif(axisDefine){var hierDefine=axisDefine.hierarchys[hierarchyInt];if(hierDefine){this.hierarchyDefinePanel.setAxis(axis);this.hierarchyDefinePanel.setHierarchyCaption(hierDefine.caption);this.hierarchyDefinePanel.setHierarchyName(hierDefine.name);this.hierarchyDefinePanel.setDimensionCaption(hierDefine.dimensionCaption);this.hierarchyDefinePanel.setDimensionName(hierDefine.dimensionName);this.hierarchyDefinePanel.expListPanel.changeExpList(hierDefine);}else{this.setEmptyWorkspace();}}else{this.setEmptyWorkspace();}\nthis.olapDefinePanel.synHierarchy(axis,hierarchyInt);this.workSpaceTreeWrapper.tree.synHierarchy(axis,hierarchyInt);}else{alert(\"can not find queryDefine\");}}\nOlapQueryView.prototype.setEmptyWorkspace=function(){this.hierarchyDefinePanel.setAxis();this.hierarchyDefinePanel.setHierarchyCaption();this.hierarchyDefinePanel.setHierarchyName();this.hierarchyDefinePanel.setDimensionCaption();this.hierarchyDefinePanel.setDimensionName();this.hierarchyDefinePanel.expListPanel.initToBlank();}\nOlapQueryView.prototype.onPlaceMember=function(ctrl,dimName,hierName,expList,expAliasArray,doCheck){var axis=this.getAxisByHierarchyName(hierName);if(expList.length==1&&doCheck){var ret=util.remoteInvokeEx(\"OlapMetadataService\",\"checkExpValid\",[this.cubeId,expList[0]]);if(ret&&ret.succeeded){if(ret.result){this.doPlaceMember(ctrl,axis,dimName,hierName,expList);}else{alert(\"请选择合法表达式!\");}}}else{this.doPlaceMember(ctrl,axis,dimName,hierName,expList);}}\nOlapQueryView.prototype.getAxisByHierarchyName=function(hierName){var axis=this.currentSelectedAxis;if(this.queryDefine){if(this.queryDefine.axisList){for(var i=0;i<this.queryDefine.axisList.length;i++){var axisDefine=this.queryDefine.axisList[i];if(axisDefine&&axisDefine.hierarchys){for(var j=0;j<axisDefine.hierarchys.length;j++){var hierDefine=axisDefine.hierarchys[j];if(hierName==hierDefine.name){axis=i;}}}}}\nif(this.queryDefine.dice){var axisDefine=this.queryDefine.dice;if(axisDefine&&axisDefine.hierarchys){for(var j=0;j<axisDefine.hierarchys.length;j++){var hierDefine=axisDefine.hierarchys[j];if(hierName==hierDefine.name){axis=2;}}}}}\nreturn axis;}\nOlapQueryView.prototype.getHierarchyOrderByHierarchyName=function(hierName){var hierInt=null;if(this.queryDefine){if(this.queryDefine.axisList){for(var i=0;i<this.queryDefine.axisList.length;i++){var axisDefine=this.queryDefine.axisList[i];if(axisDefine&&axisDefine.hierarchys){for(var j=0;j<axisDefine.hierarchys.length;j++){var hierDefine=axisDefine.hierarchys[j];if(hierName==hierDefine.name){hierInt=j;}}}}}\nif(this.queryDefine.dice){var axisDefine=this.queryDefine.dice;if(axisDefine&&axisDefine.hierarchys){for(var j=0;j<axisDefine.hierarchys.length;j++){var hierDefine=axisDefine.hierarchys[j];if(hierName==hierDefine.name){hierInt=j;}}}}}\nreturn hierInt;}\nOlapQueryView.prototype.fillQueryDefine=function(ret,axis){this.queryDefine=ret.result;if(this.editType!=\"VIEW\"){this.olapDefinePanel.setClientSetting(this.clientSetting);this.olapDefinePanel.processQueryDefine(ret,axis);if(this.hierarchyDefinePanel){var hierName=this.hierarchyDefinePanel.getHierarchyName();if(hierName){var axis=this.getAxisByHierarchyName(hierName);var hierInt=this.getHierarchyOrderByHierarchyName(hierName);this.onChangeExpList(null,axis,hierInt);}}\nthis.workSpaceTreeWrapper.tree.refreshHierarchyFolder(ret);this.workSpaceTreeWrapper.tree.refreshCustomMemberFolder();this.workSpaceTreeWrapper.tree.refreshParamFolder();if(this.propertyPanel){this.propertyPanel.initToBlank();}}}\nOlapQueryView.prototype.doPlaceMember=function(ctrl,axis,dimName,hierName,expList){if(axis==0||axis==1){this.placeMemberOnAxis(axis,null,hierName,expList);}else if(axis==2){this.placeMembersOnDice(null,hierName,expList);}}\nOlapQueryView.prototype.resetMember=function(ctrl,axis,hierarchies){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"resetMembersOnAxis\",[this.clientId,axis,hierarchies]);if(ret&&ret.succeeded){this.refreshDefine();}else{var obj={result:this.queryDefine}\nthis.olapDefinePanel.processQueryDefine(obj);}}\nOlapQueryView.prototype.initParamPanelObj=function(){this.paramContainer=this.domAgent.getElementByBofid(\"paramDiv\");if(!this.paramPanelObj){this.paramPanelObj=new ParameterPanel(this.paramContainer,this._parent,this.paramLayout);this.paramPanelObj.clientId=this.paramPanelId;this.paramPanelObj.onSelectChange.subscribe(this.doParamChange,this);}};OlapQueryView.prototype.doParamChange=function(){if(this.autoRefresh)\nthis.refreshData();this.setHeader(this.clientSetting.head);this.setTail(this.clientSetting.tail);};OlapQueryView.prototype.addParam=function(param){if(!this.paramPanelObj)\nthis.initParamPanelObj();if(param.display){var index=this.paramPanelObj.findParam(param.id);if(index<0){var addedParam=this.paramPanelObj.addParam(param);if(addedParam&&addedParam.dropDownTreePanel&&addedParam.dropDownTreePanel.tree){addedParam.dropDownTreePanel.tree.queryClientId=this.clientId;}else if(addedParam.bofClassName==\"bof.olapquery.param.OlapParamMemberChoose\"){addedParam.queryClientId=this.clientId;}}else{this.paramPanelObj.paramObjList[index].setCurrentValue(param.currentValue,param.currentDisplayValue);}}\nthis.params.push(param);}\nOlapQueryView.prototype.rebuildParam=function(clientId){var ret=util.remoteInvoke(\"OlapQueryClientService\",\"getOutputParamemtersAndLayout\",[clientId]);if(ret&&ret.succeeded){this.paramPanelObj.clear();this.paramsInited=new Array();this.params=new Array();var paramDiv=this.domAgent.getElementByBofid(\"paramDiv\");this.paramPanelObj.initLayout(lang.parseJSON(ret.result[1]));this.paramPanelObj.initParamLayout=true;this.paramPanelObj.paramsInited=new Array();for(var i=0;i<ret.result[0].length;i++){var param=ret.result[0][i];this.addParam(param);}\nthis.adjustParamPanelObj(ret.result[0]);}};OlapQueryView.prototype.getParam=function(paramId){for(var i=0;i<this.params.length;i++){if(this.params[i].id==paramId){return this.params[i];}}\nreturn null;}\nOlapQueryView.prototype.adjustParamPanelObj=function(params){if(!this.paramPanelObj)return;var paramObjList=this.paramPanelObj.paramObjList;var paramArray=new Array();for(var i=0;i<paramObjList.length;i++){var paramTag=paramObjList[i].paramTag;var param=paramTag.param;var paramId=param.id;var find=false;for(var j=0;j<params.length;j++){if(paramId==params[j].id){find=true;if(typeof params[j].currentValue!=\"undefined\"){paramObjList[i].setSelectedItem(params[j].currentValue,params[j].currentDisplayValue);}else{this.paramPanelObj.setParamCtrlValue(paramTag,params[j].value,params[j].displayValue);}}}\nif(find){paramArray.push(paramObjList[i]);}}\nthis.paramPanelObj.paramObjList=paramArray;};OlapQueryView.prototype.moveMember=function(ctrl,removeAxis,removeHier,axis,allHierarchies){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"moveMembers\",[this.clientId,removeAxis,removeHier,axis,allHierarchies]);if(ret&&ret.succeeded){this.refreshDefine();}else{var obj={result:this.queryDefine}\nthis.olapDefinePanel.processQueryDefine(obj);}};OlapQueryView.prototype.moveMember=function(ctrl,removeAxis,removeHier,axis,allHierarchies){util.remoteInvokeEx(\"OlapQueryClientService\",\"moveMembers\",[this.clientId,removeAxis,removeHier,axis,allHierarchies],this.moveMemberRemoteCallback,this);};OlapQueryView.prototype.moveMemberRemoteCallback=function(ret){if(ret&&ret.succeeded){this.refreshDefine();}else{modalWindow.showServerError(ret);this.refreshDefine();}}\nOlapQueryView.prototype.placeMembersOnDice=function(dimName,hierName,expList){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"placeMembersOnDice\",[this.clientId,dimName,hierName,expList]);if(ret&&ret.succeeded){this.refreshDefine();}else{var obj={result:this.queryDefine}\nthis.olapDefinePanel.processQueryDefine(obj);}}\nOlapQueryView.prototype.placeMemberOnAxis=function(axis,dimName,hierName,expList){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"placeMembersOnAxis\",[this.clientId,axis,dimName,hierName,expList]);if(ret&&ret.succeeded){this.refreshDefine();}else{var obj={result:this.queryDefine}\nthis.olapDefinePanel.processQueryDefine(obj);}}\nOlapQueryView.prototype.destroyWorkSpace=function(){if(this.propertyPanel){this.propertyPanel.onValueChange.unsubscribe(this.doValueChange,this);this.propertyPanel.destroy();this.propertyPanel=null;}\nif(this.hierarchyDefinePanel){this.hierarchyDefinePanel.onMoveUpHandler.unsubscribe(this.moveUpExp,this);this.hierarchyDefinePanel.onMoveDownHandler.unsubscribe(this.moveDownExp,this);this.hierarchyDefinePanel.onDeleteHandler.unsubscribe(this.deleteExp,this);this.hierarchyDefinePanel.destroy();this.hierarchyDefinePanel=null;}}\nOlapQueryView.prototype.initHierarchydefinePanel=function(){this.destroyWorkSpace();this.workSpaceSettingContainer=this.domAgent.getElementByBofid(\"workSpaceSetting\");this.hierarchyDefinePanel=new HierarchyDefinePanel(this.workSpaceSettingContainer);this.hierarchyDefinePanel.onMoveUpHandler.subscribe(this.moveUpExp,this);this.hierarchyDefinePanel.onMoveDownHandler.subscribe(this.moveDownExp,this);this.hierarchyDefinePanel.onDeleteHandler.subscribe(this.deleteExp,this);}\nOlapQueryView.prototype.hiddenOlapDefinePanel=function(){this.setOlapDefinePanelStatus(false);}\nOlapQueryView.prototype.showOlapDefinePanel=function(){this.setOlapDefinePanelStatus(!this.isDefinePanelShow);}\nOlapQueryView.prototype.setOlapDefinePanelStatus=function(isShow){this.isDefinePanelShow=isShow;if(isShow){this.olapDefineContainer.style.display=\"\";if(this.olapDefinePanel){this.resetDefineDivPosition();}}else{this.olapDefineContainer.style.display=\"none\";}}\nOlapQueryView.prototype.hiddenLeftAndRightPane=function(){this.setOlapDefinePanelStatus(false);this.domAgent.getElementByBofid(\"hsplitterLetfTd\").style.display=\"none\";this.domAgent.getElementByBofid(\"leftPaneTreeTd\").style.display=\"none\";this.domAgent.getElementByBofid(\"rightPaneTd\").style.display=\"none\";};OlapQueryView.prototype.showLeftAndRightPane=function(){this.setOlapDefinePanelStatus(true);this.domAgent.getElementByBofid(\"hsplitterLetfTd\").style.display=\"\";this.domAgent.getElementByBofid(\"leftPaneTreeTd\").style.display=\"\";this.domAgent.getElementByBofid(\"rightPaneTd\").style.display=\"\";};OlapQueryView.prototype.moveUpExp=function(){this.hierarchyDefinePanel.expListPanel.moveUpExpList();this.changeMembersOrder();alert(\"没完成，结果有问题\");}\nOlapQueryView.prototype.moveDownExp=function(){this.hierarchyDefinePanel.expListPanel.moveDownExpList();this.changeMembersOrder();alert(\"没完成，结果有问题\");}\nOlapQueryView.prototype.changeMembersOrder=function(){var axis=this.hierarchyDefinePanel.getAxis();var hierName=this.hierarchyDefinePanel.getHierarchyName();var dimName=this.hierarchyDefinePanel.getDimensionName();var expList=this.hierarchyDefinePanel.expListPanel.getExpList();var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"changeMembersOrder\",[this.clientId,axis,dimName,hierName,expList]);if(ret&&ret.succeeded){this.refreshDefine();}else{var obj={result:this.queryDefine}\nthis.olapDefinePanel.processQueryDefine(obj);}}\nOlapQueryView.prototype.deleteExp=function(ctrl,expList){var axis=this.hierarchyDefinePanel.getAxis();var hierName=this.hierarchyDefinePanel.getHierarchyName();var dimName=this.hierarchyDefinePanel.getDimensionName();if(axis==2){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"removeMembersFromDice\",[this.clientId,expList]);if(ret&&ret.succeeded){this.refreshDefine();}else{var obj={result:this.queryDefine}\nthis.olapDefinePanel.processQueryDefine(obj);}}else{var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"removeMembersFromAxis\",[this.clientId,axis,dimName,hierName,expList]);if(ret&&ret.succeeded){this.refreshDefine();}else{var obj={result:this.queryDefine}\nthis.olapDefinePanel.processQueryDefine(obj);}}}\nOlapQueryView.prototype.deleteHierarchy=function(that,hierDefine,axisOrdinal){var expList=new Array();for(var i=0;i<hierDefine.selections.length;i++){expList.push(hierDefine.selections[i].mdx);}\nvar ret;if(axisOrdinal!=2){ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"removeMembersFromAxis\",[this.clientId,axisOrdinal,hierDefine.dimensionName,hierDefine.name,expList]);}else{ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"removeMembersFromDice\",[this.clientId,expList]);}\nif(ret&&ret.succeeded){this.refreshDefine();}else{var obj={result:this.queryDefine}\nthis.olapDefinePanel.processQueryDefine(obj);}}\nOlapQueryView.prototype.initExpListPanel=function(){this.expListPanel=new ExpListPanel(this.expListContainer);this.expListPanel.onDeleteHandler.subscribe(this.deleteExp,this);}\nOlapQueryView.prototype.setClientId=function(clientId){this.clientId=clientId;this.olapTable.setClientId(clientId);this.toolbar.setClientId(clientId);};OlapQueryView.prototype.setComponentCubeId=function(cubeId){this.olapTable.setCubeId(cubeId);};OlapQueryView.prototype.removeFromSession=function(){if(this.clientId){util.remoteInvokeEx(\"OlapQueryClientService\",\"close\",[this.clientId]);this.clientId=null;}else{var obj=this;setTimeout(function(){obj.removeFromSession();},1000);}}\nOlapQueryView.prototype.destroy=function(){this.removeFromSession();this.destroyWorkSpace();if(this.olapTable){this.olapTable.refreshDefineHandler.unsubscribe(this.refreshDefine,this);this.olapTable.refreshChartHandler.unsubscribe(this.refreshChart,this);this.olapTable.afterRefrshTableHandler.unsubscribe(this.afterRefrshTable,this);this.olapTable.afterRefreshDataHandler.unsubscribe(this.afterRefreshData,this);this.olapTable.setRowCountHandler.unsubscribe(this.setRowCount,this);this.olapTable.onClick.unsubscribe(this.doOnClickOlapTable,this);this.olapTable.onFilter.unsubscribe(this.doOnFilter,this);this.olapTable.onAddSubTotal.unsubscribe(this.doAddSubTotal,this);this.olapTable.onAddFunction.unsubscribe(this.doAddFunction,this);this.olapTable.onClearSubTotal.unsubscribe(this.doClearSubTotal,this);this.olapTable.onSetClientConfig.unsubscribe(this.doSetClientConfig,this);this.olapTable.onSetFunction.unsubscribe(this.refreshData,this);this.olapTable.onRefreshTableStyle.unsubscribe(this.refreshTableStyle,this);this.olapTable.onExchange.unsubscribe(this.doExchange,this);this.olapTable.onDrillTo.unsubscribe(this.doDrillTo,this);this.olapTable.destroy();this.olapTable=null;}\nif(this.treeWrapper){this.treeWrapper.tree.placeMemberHandler.unsubscribe(this.onPlaceMember,this);this.treeWrapper.tree.placeMemberArrayHandler.unsubscribe(this.refreshDefine,this);this.treeWrapper.tree.onRebuildParam.unsubscribe(this.doRebuildParam,this);this.treeWrapper.tree.onRefreshDefine.unsubscribe(this.doRefreshDefine,this);this.treeWrapper.destroyTree();this.treeWrapper=null;}\nif(this.workSpaceTreeWrapper){this.workSpaceTreeWrapper.tree.onDeleteHierarchy.unsubscribe(this.deleteHierarchy,this);this.workSpaceTreeWrapper.tree.onChangeExpListHandler.unsubscribe(this.onChangeExpList,this);this.workSpaceTreeWrapper.tree.onSelectTreeNode.unsubscribe(this.selectWorkSpaceNode,this);this.workSpaceTreeWrapper.tree.onRefreshParam.unsubscribe(this.doRefreshParam,this);this.workSpaceTreeWrapper.destroyTree();this.workSpaceTreeWrapper=null;}\nif(this.olapDefinePanel){this.olapDefinePanel.onHiddenHandler.unsubscribe(this.hiddenOlapDefinePanel,this);this.olapDefinePanel.resetMemberOnAxisHandler.unsubscribe(this.resetMember,this);this.olapDefinePanel.moveMemberHandler.unsubscribe(this.moveMember,this);this.olapDefinePanel.onChangeExpListHandler.unsubscribe(this.onChangeExpList,this);this.olapDefinePanel.onChangeCurrentSelectedAxisHandler.unsubscribe(this.changeCurrentSelectedAxis,this);this.olapDefinePanel.onRemoveExpHandler.unsubscribe(this.deleteHierarchy,this);this.olapDefinePanel.destroy();this.olapDefinePanel=null}\nif(this.toolbar){this.toolbar.onRefresh.unsubscribe(this.refreshOlapTable,this);this.toolbar.onRefreshData.unsubscribe(this.refreshData,this);this.toolbar.onSaveOlapQuery.unsubscribe(this.saveOlapQuery,this);this.toolbar.onRestoreOlapQuery.unsubscribe(this.restoreOlapQuery,this);this.toolbar.onShowQueryDefinePanel.unsubscribe(this.showOlapDefinePanel,this);this.toolbar.onSetReport.unsubscribe(this.setReport,this);this.toolbar.onSetSubtotal.unsubscribe(this.setSubtotal,this);this.toolbar.onSetParam.unsubscribe(this.setParamSetting,this);this.toolbar.onAddFavorite.unsubscribe(this.addFavorite,this);this.toolbar.onSaveAsOlapQuery.unsubscribe(this.saveAsOlapQuery,this);this.toolbar.onPreviewMDX.unsubscribe(this.previewMDX,this);this.toolbar.onGoBackWard.unsubscribe(this.goBackWard,this);this.toolbar.onGoForWard.unsubscribe(this.goForWard,this);this.toolbar.onExport.unsubscribe(this.prepareExport,this);this.toolbar.onChangeViewSettings.unsubscribe(this.changeViewSettings,this);this.toolbar.onGetParamId.unsubscribe(this.getParamId,this);this.toolbar.onAddChart.unsubscribe(this.doAddChart,this);this.toolbar.onAddMap.unsubscribe(this.doAddMap,this);this.toolbar.onPrint.unsubscribe(this.doPrint,this);this.toolbar.onPropSetting.unsubscribe(this.doPropSetting,this);this.toolbar.onClearAllHiddenSettings.unsubscribe(this.doClearAllHiddenSettings,this);this.toolbar.onGetChartCount.unsubscribe(this.setToolbarChartCount,this);this.toolbar.destroy();this.toolbar=null;}\nif(this.paging){this.paging.onblur.unsubscribe(this.pageChange,this);this.paging.destroy();this.paging=null;}\nif(this.paramPanelObj){this.paramPanelObj.onSelectChange.unsubscribe(this.doParamChange,this);this.paramPanelObj.destroy();this.paramPanelObj=null;}\nif(this.chartTool){this.chartTool.destroy();this.chartTool=null;}\nif(this.exportProgressBar){clearInterval(this.exportInterval);currentQueryView=null;this.showCancelMaskDiv(false);this.exportProgressBar.destroy();this.exportProgressBar=null;}\nif(this.cancelMaskDiv){this.cancelMaskDiv_CancelButton.owner=null;domutils.destroyNode(this.cancelMaskDiv_CancelButton);this.cancelMaskDiv_CancelButton=null;if(this.cancelMaskDiv.parentNode==this.parent){domutils.destroyNode(this.cancelMaskDiv);}\nthis.cancelMaskDiv=null;}\nif(this.locationBar)\nthis.locationBar.onMinFrame.unsubscribe(this.doMinFrame,this);if(this.leftPane)\nthis.leftPane=null;if(this.pagingContainer)\nthis.pagingContainer=null;if(this.paramContainer)\nthis.paramContainer=null;if(this.elemChartDiv)\nthis.elemChartDiv=null;if(this.olapDefineContainer)\nthis.olapDefineContainer=null;if(this.elemReportHeader)\nthis.elemReportHeader=null;if(this.elemReportTail)\nthis.elemReportTail=null;if(this.workSpaceSettingContainer)\nthis.workSpaceSettingContainer=null;if(this.domAgent){this.domAgent.destroy();this.domAgent=null;}\nif(this.popupMenu){this.popupMenu.destroy();this.popupMenu=null;}\ndelete this.hiddenOlapParam;delete this.error;OlapQueryView.superclass.destroy.call(this);};OlapQueryView.prototype.refreshOlapTable=function(){this.olapTable.applyMdx();};OlapQueryView.prototype.refreshData=function(){if(this.refreshingData){return false;}\nif(this.queryDefine){if(this.queryDefine.axisList){if(this.queryDefine.axisList.length==2){if(this.queryDefine.axisList[0].hierarchys.length==0){alert(\"列轴上没有表达式\");return;}}}}\nvar paramSize=this.paramPanelObj.paramObjList.length;for(var i=0;i<paramSize;i++){var param=this.paramPanelObj.paramObjList[i];if(param.olapParam){var paramValue=null;if(param.olapParam.componentType=ParameterPanel.OlapMemberParam){paramValue=param.getSelectedObject();}else if(param.olapParam.componentType=ParameterPanel.OlapMemberDialog){paramValue=param.getSelectedId();}else{paramValue=this.paramPanelObj.getParamValue(param.olapParam.id);}\nif(!paramValue){alert(param.olapParam.alias+\"的值不能为空！\");return;}}}\nthis.refreshingData=true;this.showMaskDiv(true);util.compositeInvoke(\"refreshOlapReport\",[this.clientId],true,this.refreshDataCallBack,this);return true;};OlapQueryView.prototype.refreshDataCallBack=function(ret){if(ret&&ret.succeeded){}else{if(this.onClose==null){return;}\nmodalWindow.showServerError(ret);this.showMaskDiv(false);this.refreshingData=false;this.hasRefresh=true;return;}\nthis.olapTable.refreshData(this.afterRefreshData,this);if(!this.isPaging)\nthis.toolbar.allRowCount=this.allRowCount;return true;}\nOlapQueryView.prototype.afterRefreshData=function(){this.refreshingData=false;this.hasRefresh=true;this.pagingContronl();this.showMaskDiv(false);util.clearCompositeInvokeCache(\"refreshOlapReport\",[this.clientId]);this.refreshTableStyle();this.onAfterRefrshTable.fire(this);}\nOlapQueryView.prototype.directToPage=function(page){var toPage=page;if(typeof page!=\"string\")\ntoPage=this.paging.elemCurrentPage.value;this.showMaskDiv(true);this.olapTable.directToPage(parseFloat(page),this.afterRefreshData,this);this.pageCount=page;this.pagingContronl();};OlapQueryView.prototype.nextPage=function(){if(this.paging.elemNextPage.disabled)\nreturn;this.showMaskDiv(true);this.olapTable.directToPage(++this.pageCount,this.afterRefreshData,this);this.pagingContronl();};OlapQueryView.prototype.prevPage=function(){if(this.pageCount<=1){return;}\nthis.showMaskDiv(true);this.olapTable.directToPage(--this.pageCount,this.afterRefreshData,this);this.pagingContronl();};OlapQueryView.prototype.maxFirstChart=function(){var chartTr=this.domAgent.getElementByBofid(\"chartTr\");if(chartTr.style.display==\"none\")\nreturn;if(this.chartTool.chartList.length<1)\nreturn;var olapTableDiv=this.domAgent.getElementByBofid(\"mainTable\");var height=olapTableDiv.clientHeight;var width=olapTableDiv.clientWidth;this.domAgent.getElementByBofid(\"olapTableTr\").style.display=\"none\";this.domAgent.getElementByBofid(\"pagingDivTr\").style.display=\"none\";this.domAgent.getElementByBofid(\"spaceLineTr\").style.display=\"none\";this.domAgent.getElementByBofid(\"alignControlor\").style.paddingLeft=0;if(this.elemReportHeader.innerHTML==\"\"){this.domAgent.getElementByBofid(\"reportHeaderTr\").style.display=\"none\";}\nif(this.elemReportTail.innerHTML==\"\"){this.domAgent.getElementByBofid(\"reportTailTr\").style.display=\"none\";}\nvar allHidden=true;for(var i=0;i<this.paramPanelObj.paramObjList.length;i++){var paramTag=this.paramPanelObj.paramObjList[i].paramTag;var param=paramTag.getAttribute(\"param\");if(paramTag.style.display!=\"none\"&&paramTag.style.display!=\"NONE\"){allHidden=false;}}\nif(allHidden){this.domAgent.getElementByBofid(\"paramDivTr\").style.display=\"none\";}\nheight=height-this.domAgent.getElementByBofid(\"reportHeaderTr\").clientHeight;height=height-this.domAgent.getElementByBofid(\"paramDivTr\").clientHeight;height=height-this.domAgent.getElementByBofid(\"pagingDivTr\").clientHeight;height=height-this.domAgent.getElementByBofid(\"olapViewShotCut\").clientHeight;height=height-this.domAgent.getElementByBofid(\"reportTailTr\").clientHeight;width=width-2;height=height-2;if(width>0&&height>0){this.chartTool.maxFirstChart(null,height,width);}};OlapQueryView.prototype.resizeFirstChart=function(){if(!this.chartTool.maximizedChart)\nreturn;this.domAgent.getElementByBofid(\"olapTableTr\").style.display=\"block\";this.chartTool.destroyMaximizedChart();};OlapQueryView.prototype.pagingContronl=function(){if(!this.hasRefresh){return;}\nvar pagingDiv=this.domAgent.getElementByBofid(\"pagingDiv\");if(!this.isPaging){pagingDiv.style.display=\"none\";return;}\npagingDiv.style.display=\"\";var prevPage=this.paging.elemPrevPage;if(this.pageCount==1){prevPage.disabled=true;prevPage.style.color=\"gray\";}else{prevPage.disabled=false;prevPage.style.color=\"\";}\nif(this.olapTable&&this.olapTable.rowCount){var currentRowCount=this.olapTable.rowCount;if(currentRowCount<this.pageRows){}else{this.paging.elemNextPage.disabled=false;}}else{}\nvar currentPage=this.paging.elemCurrentPage;currentPage.value=this.pageCount;var rows=this.paging.elemPageRows;rows.value=this.pageRows;if(this.paging.elemNextPage.disabled&&this.paging.elemPrevPage.disabled){pagingDiv.style.display=\"none\";}}\nOlapQueryView.prototype.pageCountChange=function(param){var currentPage=param;if(currentPage.length==0){return;}\nif(this.pageCount==param){return;}\nthis.directToPage(currentPage);}\nOlapQueryView.prototype.pageRowsChange=function(param){var rows=param+\"\";if(this.pageRows==param){return;}\nutil.remoteInvokeEx(\"OlapQueryClientService\",\"setPageRows\",[this.clientId,parseFloat(rows)]);this.pageRows=rows;this.directToPage(\"1\");}\nOlapQueryView.prototype.initPaging=function(){this.paging=new Paging(this.pagingContainer);this.paging.onblur.subscribe(this.pageChange,this);}\nOlapQueryView.prototype.pageChange=function(type,param){if(type==\"count\"){this.pageCountChange(param);}else if(type==\"row\"){this.pageRowsChange(param);}}\nOlapQueryView.prototype.saveOlapQuery=function(){if(this.reportId&&this.reportId!=''){this.updateOlapReport();}else{this.saveNewReport();}};OlapQueryView.prototype.saveAsOlapQuery=function(){this.saveNewReport();this.doClose();}\nOlapQueryView.prototype.updateOlapReport=function(){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"updateOlapReport\",[this.clientId]);if(ret&&ret.succeeded){alert(\"保存多维分析成功!\");}else{}};OlapQueryView.prototype.saveNewReport=function(){var data=new Array();data[0]=[\"DEFAULT_TREENODE\",\"SELF_TREENODE\"];if(registry.get(\"PrivateFolderAction_actived\")){data[0]=[\"SELF_TREENODE\"];}\ndata[1]=[\"OLAP_REPORT\"]\ndata[2]=[\"OLAP报表\"];data[3]=\"SAVE\";data[4]=this.folderNodeData;var uid=registry.get(\"currentUserId\");var ret=util.remoteInvokeEx(\"UserService\",\"getCurrentUser\",[]);if(ret&&ret.result){uid=ret.result.id;}\nif(this.editType==\"VIEW\"||this.editType==\"DISCOVER\"){data.rootNodeId=\"SELF_\"+uid;}\nif(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var dialogConfig={title:\"保存报表\",fullName:\"freequery.dialog.OpenSaveDialog\"};dialogConfig.size=[500,341];dialogFactory.showDialog(dialogConfig,data,this.saveOlapQueryCallback,this);}\nOlapQueryView.prototype.saveOlapQueryCallback=function(ret,dialog){if(!ret)\nreturn false;if(ret.actionType==\"override\")\n{var saved=this.overwriteOlapReport(ret.fileId,ret.fileDesc);if(saved){this.reportId=ret.fileId;this.reportAlias=ret.fileName;dialog.alert(\"保存报表成功！\");this.onSave.fire(this,this.reportId);}else{this.reportId='';}}else{result=util.remoteInvokeEx(\"OlapQueryClientService\",\"saveOlapReport\",[this.clientId,ret.folderId,ret.fileName,ret.fileName,ret.fileDesc]);if(result&&result.succeeded){this.reportId=result.result;this.reportAlias=ret.fileName;dialog.alert(\"保存多维分析成功!\");this.onSave.fire(this,this.reportId);}else{this.reportId='';}}\nif(ret){this.needRefresh.fire(this,ret.folderId);}\nif(this.reportId&&this.reportId!=''){try{var pathandname=util.getCatalogNodeLocation(this.reportId);this.setFrameTitleLocal(pathandname[0]);this.setFrameTitle(pathandname[1]);this.treeWrapper.tree.render(this.cubeId,this.clientId);}catch(e){}};};OlapQueryView.prototype.overwriteOlapReport=function(reportId,desc){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"overwriteOlapReport\",[this.clientId,reportId,desc]);if(ret&&ret.succeeded){return true;}else{return false;}}\nOlapQueryView.prototype.setReport=function(){if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var dialogConfig={};dialogConfig.size=[550,450];dialogConfig.title=\"报表设置\";dialogConfig.fullName=\"bof.olapquery.olapquery.OlapQuerySettingDialog\";var params=[this.clientId,this.clientSetting,this.cubeId];dialogFactory.showDialog(dialogConfig,params,this.afterSetReport,this);}\nOlapQueryView.prototype.afterSetReport=function(close,reportSetting){if(!close)\nreturn;if(!reportSetting)\nreturn;var result=util.remoteInvokeEx(\"OlapQueryClientService\",\"setClientSetting\",[this.clientId,reportSetting]);if(result){this.clientSetting=reportSetting;if(reportSetting.paging==1){this.isPaging=true;this.pageRows=reportSetting.pageRows;this.pagingContronl();}else if(reportSetting.paging==-1){var ret=util.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfig\",[\"OLAP_PAGING\"]);if(ret&&(ret.result==undefined||ret.result.value=='true')){this.isPaging=true;ret=util.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfig\",[\"OLAP_PAGING_ROWS\"]);if(ret&&ret.result){this.pageRows=parseInt(ret.result.value);}else{this.pageRows=1000;}}else{this.isPaging=false;}\nthis.pagingContronl();}else{this.isPaging=false;this.pagingContronl();}}\nthis.setPaddingLeft(this.clientSetting.tableDefine.leftPadding);this.setAlignCenter(this.clientSetting.alignCenter);this.resetChartAlign(this.clientSetting.chartAlign);this.setQueryViewBackgroundColor();this.setHeader(reportSetting.head);this.setTail(reportSetting.tail);if(this.isPaging){this.directToPage(\"1\");}else{this.refreshData();}\nthis.toolbar.setIsPaging(this.isPaging);}\nOlapQueryView.prototype.setParamSetting=function(){this.readyParam();this.readyParamLayout();var dialogConfig={};dialogConfig.title=\"参数设置\";dialogConfig.resizable=\"yes\";dialogConfig.size=dialogFactory.size.LARGE;dialogConfig.fullName=\"bof.olapquery.olapquery.OlapQueryParamSettingDialog\";if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var paramsApplyValue=[this.paramSetting,this.params,false,this.autoRefresh];var layout=this.paramLayout;var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"getParamLayout\",[this.clientId]);if(ret&&ret.succeeded){layout=lang.parseJSON(ret.result);}\nvar params=[paramsApplyValue,layout,this.clientId];dialogFactory.showDialog(dialogConfig,params,this.afterSetParamSetting,this);}\nOlapQueryView.prototype.afterSetParamSetting=function(close,setting){if(!close)\nreturn;if(!setting)\nreturn;this.paramSetting=setting[0];this.autoRefresh=this.paramSetting.autoRefresh;var paramsId=this.paramSetting.applyDefaultValueParams;for(var n=0;n<paramsId.length;n++){var paramId=paramsId[n];var ret=util.remoteInvoke(\"OlapQueryClientService\",\"setParameterUseDefaultValue\",[this.clientId,paramId,true]);}\nvar paramsId=this.paramSetting.noApplyDefaultValueParams;for(var n=0;n<paramsId.length;n++){var paramId=paramsId[n];var ret=util.remoteInvoke(\"OlapQueryClientService\",\"setParameterUseDefaultValue\",[this.clientId,paramId,false]);}\nthis.setAutoRefreshStatus(this.autoRefresh);var newParamLayout=new Array();var layout=setting[1];if(layout==null)return;for(var i=0;i<layout.length;i++){var newRow=new Array();for(var j=0;j<layout[i].length;j++){newRow.push(layout[i][j]);}\nnewParamLayout.push(newRow);}\nvar ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"setParamLayout\",[this.clientId,lang.toJSONString(newParamLayout)]);if(ret&&ret.succeeded){this.paramLayout=newParamLayout;}\nthis.rebuildParam(this.clientId);}\nOlapQueryView.prototype.setHeader=function(title,notNeedReplace){if(typeof title==\"undefined\"||title==\"\"){delete this.clientSetting.header;this.elemReportHeader.innerHTML=\"\";}else{if(!this.clientSetting){this.clientSetting={};}\nthis.clientSetting.header=title;var t;if(notNeedReplace){t=title;}else{t=this.replaceAllFunc(title);}\nt=this.replaceFontStyle(t,\"header\");this.elemReportHeader.innerHTML=t;}};OlapQueryView.prototype.setTail=function(title,notNeedReplace){if(typeof title==\"undefined\"||title==\"\"){this.elemReportTail.innerHTML=\"\";}else{if(!this.clientConfig){this.clientConfig={};}\nthis.clientConfig.tail=title;var t;if(notNeedReplace){t=title;}else{t=this.replaceAllFunc(title);}\nt=this.replaceFontStyle(t,\"tail\");this.elemReportTail.innerHTML=t;}};OlapQueryView.prototype.replaceAllFunc=function(title){var result=util.remoteInvokeEx(\"OlapQueryClientService\",\"replaceAllFunc\",[this.clientId,title]);var t7=title;if(result&&result.result){t7=result.result;}\nvar t8=this.replaceEvalString(t7);return t8;};OlapQueryView.prototype.replaceFontStyle=function(text,headerFlag){var pageTheme=registry.get(\"pageTheme\");if(!pageTheme||!pageTheme.report)\nreturn text;var style=\"\";if(headerFlag==\"header\"&&pageTheme.report.reportHeaderFont){style=\"<span style='font-size:\"+pageTheme.report.reportHeaderFont.fontSize+\";color:\"+pageTheme.report.reportHeaderFont.color+\"'>\";}else if(headerFlag==\"tail\"&&pageTheme.report.reportTailFont){style=\"<span style='font-size:\"+pageTheme.report.reportTailFont.fontSize+\";color:\"+pageTheme.report.reportTailFont.color+\"'>\";}else{return text;}\nvar s1=\"<FONT size=\";while(text.indexOf(s1)!=-1){var t=text.indexOf(s1);var news=text.substring(0,t);var news2=text.substring(t);var l=news2.indexOf(\">\");news2=news2.substring(l+1);text=news+news2;}\ns1=\"<FONT color=\";while(text.indexOf(s1)!=-1){var t=text.indexOf(s1);var news=text.substring(0,t);var news2=text.substring(t);var l=news2.indexOf(\">\");news2=news2.substring(l+1);text=news+news2;}\ntext=text.replace(/<\\/FONT>/ig,\"\")\ntext=style+text+\"<\/span>\";return text;}\nOlapQueryView.prototype.replaceEvalString=function(text){var ret=[];var txt=text;var pat=/EvalString\\([\"|']/g;var temp;var startIndex=0;while((temp=pat.exec(txt))!=null){var head=txt.substring(startIndex,temp.index);ret.push(head);var param=this.getEvalStrParam(txt,pat.lastIndex);var ev=this.evalString(param);ret.push(ev);startIndex=pat.lastIndex+param.length+2;pat.lastIndex=startIndex;}\nif(startIndex<txt.length)\nret.push(txt.substring(startIndex));return ret.join(\"\");}\nOlapQueryView.prototype.getEvalStrParam=function(s,beginIndex){var toIndex=s.length;var c=1;for(var i=beginIndex;i<toIndex;i++){if(s.charAt(i)==\"(\")\n++c;else if(s.charAt(i)==\")\")\n--c;if(c==0){toIndex=i-1;break;}}\nreturn s.substring(beginIndex,toIndex);}\nOlapQueryView.prototype.evalString=function(s){var objDiv=document.createElement(\"div\");objDiv.innerHTML=s;var text=objDiv.innerText;objDiv=null;try{text=eval(text);}\ncatch(ex){text=\"null\";}\nreturn text;}\nOlapQueryView.prototype.setSubtotal=function(e){if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var dialogConfig={};dialogConfig.title=\"分类汇总\";dialogConfig.fullName=\"bof.olapquery.olapquery.SubtotalSettingDialog\";dialogConfig.size=dialogFactory.size.LARGE;if(!this.subtotalSetting){this.subtotalSetting=new Object();}\nthis.subtotalSetting.SubtotalInfos=this.subtotalInfos;this.subtotalSetting.cubeId=this.cubeId;dialogFactory.showDialog(dialogConfig,[this.subtotalSetting],this.afterSetSubtotal,this);}\nOlapQueryView.prototype.afterSetSubtotal=function(succeed,setting){if(!succeed)\nreturn;if(setting&&setting.length>0){this.subtotalInfos=setting;util.remoteInvoke(\"OlapQueryClientService\",\"clearSubtotalInfos\",[this.clientId]);for(var i=0;i<setting.length;i++){var name=setting[i].name;var dimenion=setting[i].dimenion;var hierarchy=setting[i].hierarchyName;var calculate=setting[i].calculate;var text=setting[i].hierarchyText;var solveOrder=setting[i].solveOrder;var dataType=setting[i].dataType;var formatType=setting[i].formatType;var obj={name:name,hierUniqueName:hierarchy,dimensionName:dimenion,hierText:text,calculateType:calculate,solveOrder:solveOrder,dataType:dataType,formatType:formatType};util.remoteInvoke(\"OlapQueryClientService\",\"addCalculateMembers\",[this.clientId,obj]);}}else{util.remoteInvoke(\"OlapQueryClientService\",\"clearSubtotalInfos\",[this.clientId]);this.subtotalInfos=[];}}\nOlapQueryView.prototype.doClearSubTotal=function(hierarchyName){util.remoteInvoke(\"OlapQueryClientService\",\"delCalculateMembersByHierarchyName\",[this.clientId,hierarchyName]);this.synSubTotal();this.refreshData();}\nOlapQueryView.prototype.doClearFunction=function(hierarchyName){util.remoteInvoke(\"OlapQueryClientService\",\"removeExtendFunctionByHierarchy\",[this.clientId,hierarchyName]);this.refreshData();}\nOlapQueryView.prototype.doAddFunction=function(memberName,memberCaption,hierarchyName,hierarchyCaption,dimension,timeHierarchy,timeMemberName,timeMemberCaption,calculate,fireObj){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"getMemberCaption\",[this.clientId,memberName]);if(ret)\nmemberCaption=ret.result;var obj=new Object();obj.hierarchyName=hierarchyName;obj.hierarchyCaption=hierarchyCaption;obj.dimemsionName=dimension;obj.memberName=memberName;if(calculate==\"Proportion\"){obj.functionName=\"Proportion\";obj.name=memberCaption+\"的占比\";}else if(calculate==\"Rank\"){obj.functionName=\"Rank\";obj.name=memberCaption+\"的排名\";}else if(calculate==\"PrevValue\"){obj.functionName=\"PrevValue\";obj.name=memberCaption+\"的前期值\";obj.timeHierarchyName=timeHierarchy;}else if(calculate==\"ChainCompare\"){obj.functionName=\"ChainCompare\";obj.name=memberCaption+\"的环比(前期比)\";obj.timeHierarchyName=timeHierarchy;}else if(calculate==\"Kibbee\"){obj.functionName=\"Kibbee\";obj.name=memberCaption+\"的基比<br>(\"+timeMemberCaption+\")\";obj.timeMemberName=timeMemberName;}else if(calculate==\"CorrespondingPeriodValue\"){obj.functionName=\"CorrespondingPeriodValue\";obj.name=memberCaption+\"的同期值\";obj.timeHierarchyName=timeHierarchy;obj.timeLevelName=fireObj.timeLevelName;}else if(calculate==\"CorrespondingPeriodCompare\"){obj.functionName=\"CorrespondingPeriodCompare\";obj.name=memberCaption+\"的同期比\";obj.timeHierarchyName=timeHierarchy;obj.timeLevelName=fireObj.timeLevelName;}else if(calculate==\"PrevValueGrowthRate\"){obj.functionName=\"PrevValueGrowthRate\";obj.name=memberCaption+\"的前期增长率\";obj.timeHierarchyName=timeHierarchy;}else if(calculate==\"PeriodValueGrowthRate\"){obj.functionName=\"PeriodValueGrowthRate\";obj.name=memberCaption+\"的同期增长率\";obj.timeHierarchyName=timeHierarchy;obj.timeLevelName=fireObj.timeLevelName;}\nvar info=lang.toJSONString(obj);util.remoteInvoke(\"OlapQueryClientService\",\"addExtendFunction\",[this.clientId,info]);this.refreshData();}\nOlapQueryView.prototype.doAddSubTotal=function(hierarchyName,calculate){var setting=this.subtotalInfos;var name=\"\";if(calculate==\"SUM\")\nname=\"_合计\";else if(calculate==\"AVG\")\nname=\"_平均\";else if(calculate==\"MAX\")\nname=\"_最大\";else if(calculate==\"MIN\")\nname=\"_最小\";var obj={name:name,hierUniqueName:hierarchyName,calculateType:calculate};var result=util.remoteInvoke(\"OlapQueryClientService\",\"addCalculateMembers\",[this.clientId,obj]);if(result&&result.succeeded&&result.result){this.synSubTotal();this.refreshData();}else{alert(\"设置失败！存在相同的名称！\");}}\nOlapQueryView.prototype.synSubTotal=function(){var ret=util.remoteInvoke(\"OlapQueryClientService\",\"getAllSubtotalInfos\",[this.clientId]);if(ret&&ret.succeeded){this.subtotalInfos=new Array();var result=ret.result;for(var i=0;i<result.length;i++){var subtotalInfo=result[i];var obj={};obj.name=subtotalInfo.name;obj.dimenion=subtotalInfo.dimenionName;obj.hierarchyText=subtotalInfo.hierText;obj.hierarchyName=subtotalInfo.hierUniqueName;obj.calculate=subtotalInfo.calculateType;obj.solveOrder=subtotalInfo.solveOrder;obj.dataType=subtotalInfo.dataType;obj.formatType=subtotalInfo.formatType;this.subtotalInfos.push(obj);}}}\nOlapQueryView.prototype.readyParamLayout=function(){if(!this.params||this.params.length==0)\nreturn;var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"getParamLayout\",[this.clientId]);if(!ret||!ret.result)\nreturn;this.paramLayout=lang.parseJSON(ret.result);}\nOlapQueryView.prototype.setParamLayout=function(e){if(!this.params||this.params.length==0)\nreturn;var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"getParamLayout\",[this.clientId]);if(!ret||!ret.result)\nreturn;var paramLayout=lang.parseJSON(ret.result);if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var w=dialogFactory.fixSize(800,\"W\");var h=dialogFactory.fixSize(520,\"H\");var layout=window.showModalDialog(\"js/freequery/businessview/ParamLayout.html\",paramLayout,\"dialogHeight:\"+h+\"px;dialogWidth:\"+w+\"px;resizable:yes;status:no\");if(!layout)\nreturn;var newParamLayout=new Array();for(var i=0;i<layout.length;i++){var newRow=new Array();for(var j=0;j<layout[i].length;j++){newRow.push(layout[i][j]);}\nnewParamLayout.push(newRow);}\nvar ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"setParamLayout\",[this.clientId,lang.toJSONString(newParamLayout)]);if(!ret){return;}\nthis.paramLayout=newParamLayout;}\nOlapQueryView.prototype.readyParam=function(e){if(!this.params)\nreturn;var isNew=false;if(!this.paramSetting){this.paramSetting=new Object();this.paramSetting.applyDefaultValueParams=new Array();this.paramSetting.noApplyDefaultValueParams=new Array();this.paramSetting.attributes=new Array();isNew=true;}\nif(!this.paramSetting.applyDefaultValueParams)\nthis.paramSetting.applyDefaultValueParams=new Array();if(!this.paramSetting.noApplyDefaultValueParams)\nthis.paramSetting.noApplyDefaultValueParams=new Array();if(!this.paramSetting.attributes){this.paramSetting.attributes=new Array();}\nfor(var i=0;i<this.params.length;i++){if(this.params[i].useDefaultValue){this.paramSetting.applyDefaultValueParams.push(this.params[i].id);}else{this.paramSetting.noApplyDefaultValueParams.push(this.params[i].id);}}\nisNew=false;}\nOlapQueryView.prototype.doParamOK=function(succeed,setting){if(!succeed)\nreturn;this.paramSetting=setting;this.autoRefresh=setting.autoRefresh;var paramsId=setting.applyDefaultValueParams;for(var n=0;n<paramsId.length;n++){var paramId=paramsId[n];var ret=util.remoteInvoke(\"OlapQueryClientService\",\"setParameterUseDefaultValue\",[this.clientId,paramId,true]);}\nvar paramsId=setting.noApplyDefaultValueParams;for(var n=0;n<paramsId.length;n++){var paramId=paramsId[n];var ret=util.remoteInvoke(\"OlapQueryClientService\",\"setParameterUseDefaultValue\",[this.clientId,paramId,false]);}\nthis.setAutoRefreshStatus(this.autoRefresh);}\nOlapQueryView.prototype.setAutoRefreshStatus=function(autoRefresh){if(!this.clientId)\nreturn;var ret=util.remoteInvoke(\"OlapQueryClientService\",\"setAutoRefresh\",[this.clientId,autoRefresh]);if(ret.succeeded){this.autoRefresh=autoRefresh;}}\nOlapQueryView.prototype.addFavorite=function(){if(this.reportId){var node={};node._id=this.reportId;node._alias=this.reportAlias;var dialogConfig={};dialogConfig.title=\"添加到收藏夹\";dialogConfig.fullName=\"freequery.myfavorite.AddMyFavorite\";if(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");dialogFactory.showDialog(dialogConfig,[node],null,this);}else{alert(\"请先保存多维分析\");}}\nOlapQueryView.prototype.previewMDX=function(){var dialogConfig={};dialogConfig.title=\"查看MDX\";dialogConfig.size=dialogFactory.size.LARGE;dialogConfig.fullName=\"bof.olapquery.olapquery.PreviewMDXDialog\";dialogFactory.showDialog(dialogConfig,[this.clientId],this.emptyFunction,this);}\nOlapQueryView.prototype.emptyFunction=function(){}\nOlapQueryView.prototype.getResourceId=function(){return this.id;};OlapQueryView.prototype.getResourceType=function(){return\"olapQuery\";};OlapQueryView.prototype.doOnClickOlapTable=function(cell,event){this.currentCell=this.wrapCell(cell);var me=this;MacroService.getInstance().fire(this,\"olapTable\",\"onClick\",[this.currentCell]);this.popupMenu.clear();this.cmds={};MacroService.getInstance().fire(this,\"olapTable\",\"onInitPopupMenu\",[{addMenuItem:function(label,cmd,key,callback){me.popupMenu.createMenuItem(label,cmd,key);me.cmds[cmd]=callback;}},this.currentCell]);this.onClickOlapTable.fire(this.currentCell,this,event);if(this.popupMenu.menuItems.length==0){this.popupMenu.clear();this.onDoCmd.fire();}else if(this.popupMenu.menuItems.length==1){var needJumpMenu=false;var ret=util.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfigs\",[]);if(ret){var systemConfig=ret.result;for(var i in systemConfig){if(systemConfig[i].key==\"SINGLE_JUMP_NEED_MENU\"){needJumpMenu=(systemConfig[i].value==\"true\");break;}}}\nif(!needJumpMenu){this.doCmd(this.popupMenu.menuItems[0].cmd);this.popupMenu.clear();}else{this.popupMenu.popup(event);}}else{this.popupMenu.popup(event);}};OlapQueryView.prototype.doCmd=function(cmd){if(!this.cmds){return;}\nvar callback=this.cmds[cmd];if(!callback){this.onDoCmd.fire(cmd);}else\ncallback(this.currentCell);};OlapQueryView.prototype.doAfterRefreshData=function(ret){if(ret.succeeded){this.olapTable.refresh(ret.result);}else{modalWindow.showServerError(ret);}\nthis.afterRefreshData();this.afterRefresh.fire();};OlapQueryView.prototype.goBackWard=function(){if(this.toolbar.canGoBackWard){this.showMaskDiv(true);var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"goBackward\",[this.clientId],this.doAfterRefreshData,this);}};OlapQueryView.prototype.goForWard=function(){if(this.toolbar.canGoForWard){this.showMaskDiv(true);var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"goForward\",[this.clientId],this.doAfterRefreshData,this);}};OlapQueryView.prototype.resetForwardBackwardState=function(canGoForward,canGoBackward){this.toolbar.disableForward(!canGoForward);this.toolbar.disableBackward(!canGoBackward);};OlapQueryView.prototype.exportChartToImage=function(cbOptions){var charts=this.chartTool.chartList||[];var succeeded=charts.length>0;if(succeeded){var chartObjs=[];this.chartImageData=[];this.chartImageData.cbOptions=cbOptions;for(var i=0;i<charts.length&&succeeded;i++){var svgsData=charts[i].exportCharts(\"JPEG\");if(svgsData){this.setChartImageInfo(svgsData);}else{var key=charts[i].flashId;registry.put(key,charts[i]);charts[i].setQueryObject(this);}}}\nif(!succeeded&&cbOptions&&cbOptions.forceCallback){if(cbOptions.func instanceof Function||typeof cbOptions.func=='function'){var args=cbOptions.args||[];args.push(null);cbOptions.func.apply(cbOptions.thisobj,args);}}};OlapQueryView.prototype.setChartImageInfo=function(imageInfo,paramsInfo){var charts=this.chartTool.chartList||[];if(!this.chartImageData||charts.length==0)\nreturn;this.chartImageData.push(lang.toJSONString(imageInfo));registry.remove(imageInfo.chartId);if(this.chartImageData.length==charts.length){var imageDatas=this.chartImageData.concat();var cbOptions=this.chartImageData.cbOptions;this.chartImageData=null;var func=cbOptions?cbOptions.func:null;if(func instanceof Function||typeof func=='function'){var that=cbOptions.thisobj;var args=cbOptions.args.concat()||[];var index=(cbOptions?cbOptions.targetArgIndex:args.length)-0;args[index]=imageDatas.join(\"!@#%&!@#%&\");func.apply(that,args);}}};OlapQueryView.prototype.doExportMenuCloseUp=function(exportType){this.toolbar.doExportMenuCloseUp(exportType);};OlapQueryView.prototype.prepareExport=function(that,type,options){var oldViewSetting=null\nvar oldViewSettingRet=util.remoteInvokeEx(\"OlapQueryClientService\",\"getViewSetting\",[this.clientId]);if(oldViewSettingRet&&oldViewSettingRet.succeeded){oldViewSetting=oldViewSettingRet.result;}\nvar viewSetting=this.toolbar.getViewSettings();this.changeViewSettings(this,viewSetting);var isTreeMenuExport=this.toolbar&&this.toolbar.exportMenu&&this.toolbar.exportMenu.isFromTree;var ret=util.remoteInvokeEx(\"UserService\",\"getCurrentUserQueryMaxRow\",[]);if(ret&&ret.succeeded){var maxRow=ret.result;var integerMaxVlaue=2147483647;if(maxRow!=integerMaxVlaue){var msg=\"当前用户可查讯最大行数为\"+maxRow+\"，是否继续导出？\";var status=modalWindow.open(msg,null,modalWindow.MB_YESNO|modalWindow.MB_ICONQUESTION);if(modalWindow.ID_NO==status){return;}}}\nthis.doExport(that,type,options);};OlapQueryView.prototype.setExportFormInputValues=function(that,type,options){var exportType=this.domAgent.getElementByBofid(\"exportType\");var clientId=this.domAgent.getElementByBofid(\"clientId\");var delimiterElem=this.domAgent.getElementByBofid(\"delimiter\");var headerHtmlElem=this.domAgent.getElementByBofid(\"headerHtml\");var tailHtmlElem=this.domAgent.getElementByBofid(\"tailHtml\");var maxRowElem=this.domAgent.getElementByBofid(\"maxRow\");var valueTypeElem=this.domAgent.getElementByBofid(\"valueType\");var modeElem=this.domAgent.getElementByBofid(\"mode\");var contentTypeElem=this.domAgent.getElementByBofid(\"contentType\");var widthArray=this.olapTable.getMemberPathWidthArray();this.doSetClientConfig(this,widthArray);exportType.value=type;clientId.value=this.clientId;headerHtmlElem.value=this.elemReportHeader.innerHTML;tailHtmlElem.value=this.elemReportTail.innerHTML;if(options&&typeof(options)==\"object\"){maxRowElem.value=options.rowCount;valueTypeElem.value=options.valueType;modeElem.value=options.mode;delimiterElem.value=options.delimiter;contentTypeElem.value=options.contentType;}else if(options)\ndelimiterElem.value=options;};OlapQueryView.prototype.doExport=function(that,type,options){var exportForm=this.domAgent.getElementByBofid(\"exportForm\");this.setExportFormInputValues(that,type,options)\nexportForm.submit();this.showCancelMaskDiv(true);};OlapQueryView.prototype.changeViewSettings=function(that,settings){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"setViewSetting\",[this.clientId,settings]);};OlapQueryView.prototype.changeCurrentSelectedAxis=function(that,axisOrdinal){this.currentSelectedAxis=axisOrdinal;};OlapQueryView.prototype.wrapCell=function(srcCell){var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");var ev=eventutil.getEvent();var tdCell;if(srcCell)\ntdCell=srcCell;else\ntdCell=ev.target;var cellType=(tdCell.bofclass==\"MEMBER\"?\"Member\":\"Data\");if(cellType==\"Data\"){var columnsPosition=lang.parseJSON(tdCell.columnsPosition);var rowsPosition=lang.parseJSON(tdCell.rowsPosition);var groupName=tdCell.getAttribute(\"groupName\");var data={value:new Number(tdCell.getAttribute(\"value\")),td:tdCell,groupName:groupName};}\nif(cellType==\"Member\"){if(tdCell.getAttribute(\"isSubCell\")==\"true\"){var tr=tdCell.parentNode;var tbody=tr.parentNode;var table=tbody.parentNode;tdCell=table.parentNode;}\nif(tdCell.getAttribute(\"resizeContentTd\")==\"true\"){var tr=tdCell.parentNode;var tbody=tr.parentNode;var table=tbody.parentNode;tdCell=table.parentNode;}\nvar member={uniqueName:this.olapTable._unMapObj[tdCell.un].un,caption:this.olapTable._unMapObj[tdCell.un].ca,groupName:tdCell.getAttribute(\"groupName\")};}\nvar cell={cellType:cellType,member:member,data:data};return cell;};OlapQueryView.prototype.getMemberObj=function(cell,hierName){function getMemberObjFromTd(olapTable,td,hierName){var pathObjs=olapTable.getMemberObjPathFromTd(td);for(var i=0;i<pathObjs.length;i++){var obj=pathObjs[i];var hierarchyName=olapTable._hiMap[obj.hi].n;if(hierarchyName==hierName){obj.uniqueName=obj.un;obj.caption=obj.ca;return obj;}}}\nvar td=cell.data.td;while(td){if(td.getAttribute(\"un\")){var ret=getMemberObjFromTd(this.olapTable,td,hierName);if(ret)\nreturn ret;}\ntd=td.previousSibling;}\ntd=cell.data.td;var unMap=[];var row=cell.data.td.parentNode.parentNode.firstChild;while(row&&row.lastChild.getAttribute(\"un\")){unMap.push([]);row=row.nextSibling;}\nvar cellsLength=td.parentNode.cells.length;var cellIndex=td.cellIndex;var lastIndex=cellsLength-cellIndex;var row=cell.data.td.parentNode.parentNode.firstChild;var rowIndex=0;while(row&&row.lastChild.getAttribute(\"un\")){var td=row.firstChild;var colIndex=0;while(unMap[rowIndex][colIndex])\ncolIndex++;while(td){for(var i=0;i<td.rowSpan;i++){for(var j=0;j<td.colSpan;j++){unMap[rowIndex+i][colIndex+j]=td;}}\nwhile(unMap[rowIndex][colIndex])\ncolIndex++;td=td.nextSibling;}\nrowIndex++;row=row.nextSibling;}\nfor(var i=unMap.length-1;i>=0;i--){var td=unMap[i][unMap[i].length-lastIndex];if(td.getAttribute(\"un\")){var ret=getMemberObjFromTd(this.olapTable,td,hierName);if(ret)\nreturn ret;}}}\nOlapQueryView.prototype.setParamValue=function(paramId,paramValue,paramAlias,fromPortal){if(fromPortal){this.paramPanelObj.setParamValue(paramId,paramValue,paramAlias);return;}\nvar value=paramValue;var param=this.getParam(paramId);if(!param)\nreturn;if(param.type==\"MemberSet\"){value=paramValue;var paramArray=paramValue.split(\",\");var newArray=new Array();for(var i=0;i<paramArray.length;i++){newArray.push(paramArray[i]);}\nvalue=lang.toJSONString(newArray);}else{value=paramValue;}\nthis.paramPanelObj.setParamValue(paramId,value,paramAlias);};OlapQueryView.prototype.setParamValueByName=function(paramName,paramValue,paramAlias,fromPortal){var param=this.paramPanelObj.findParamByName(paramName);if(param==null)\nreturn;var paramId=param.id;if(fromPortal){this.paramPanelObj.setParamValue(paramId,paramValue,paramAlias);return;}\nvar value=paramValue;var param=this.getParam(paramId);if(param.type==\"MemberSet\"){value=paramValue;var paramArray=paramValue.split(\",\");var newArray=new Array();for(var i=0;i<paramArray.length;i++){newArray.push(paramArray[i]);}\nvalue=lang.toJSONString(newArray);}else{value=paramValue;}\nthis.paramPanelObj.setParamValue(paramId,value,paramAlias);};OlapQueryView.prototype.getParamValue=function(paramId){var value=null;var displayValue=null;var memberValue=null;var paramValue=this.paramPanelObj.getParamValue(paramId);if(typeof paramValue==\"undefined\"){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"getOutputParameterById\",[this.clientId,paramId]);if(ret.succeeded&&ret.result){var pvalue=ret.result.currentValue||ret.result.value;try{var valueArray=lang.parseJSON(pvalue);value=valueArray.join(\",\");}catch(e){value=pvalue;}\ndisplayValue=ret.result.currentDisplayValue||ret.result.displayValue;}}else{if(typeof paramValue==\"string\"){try{var valueArray=lang.parseJSON(paramValue);value=valueArray.join(\",\");}catch(e){value=paramValue;}}else{value=paramValue.join(\",\");}\ndisplayValue=this.paramPanelObj.getParamDisplayValue(paramId);}\nif(value)\nmemberValue=this.getMemberValueByParamValue(value);var retValue={value:value,displayValue:displayValue,memberValue:memberValue};return retValue;};OlapQueryView.prototype.getMemberValueByParamValue=function(paramValue){var uNameArray=paramValue.split(\",\");var allId=\"\";for(var i=0;i<uNameArray.length;i++){var nameArray=uNameArray[i].split(\".\");var level=nameArray.length;var idValue=nameArray[level-1];idValue=idValue.substring(1,idValue.length-1);if(i!=0)\nallId=allId+\",\";allId=allId+\"'\"+idValue+\"'\";}\nreturn allId;}\nOlapQueryView.prototype.getParamId=function(){var paramId=prompt(\"Input ParamId: \",\"_BOF_Dice_CustomerMember_Measures\");if(!paramId){return;}\nvar retValue=this.getParamValue(paramId);alert(\"实际值：\"+retValue.value+\"，显示值：\"+retValue.displayValue);};OlapQueryView.prototype.refreshClientSetting=function(reportSetting){this.clientSetting=reportSetting;if(reportSetting.paging==1){this.isPaging=true;this.pageCount=reportSetting.startIndex/reportSetting.pageRows+1;this.pageRows=reportSetting.pageRows;this.pagingContronl();}else if(reportSetting.paging==-1){var ret=util.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfig\",[\"OLAP_PAGING\"]);if(ret&&(ret.result==undefined||ret.result.value=='true')){this.isPaging=true;ret=util.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfig\",[\"OLAP_PAGING_ROWS\"]);if(ret&&ret.result){this.pageRows=parseInt(ret.result.value);}else{this.pageRows=1000;}\nthis.pageCount=reportSetting.startIndex/this.pageRows+1;}else{this.isPaging=false;}\nthis.pagingContronl();}else{this.isPaging=false;this.pagingContronl();}\nthis.toolbar.setIsPaging(this.isPaging);};OlapQueryView.prototype.showMaskDiv=function(show){if(!this.maskDiv)\n{this.maskDiv=document.createElement(\"div\");this.maskDiv.className=\"Noprint\";this.parent.appendChild(this.maskDiv);this.maskDiv.style.position=\"absolute\";this.maskDiv.style.width=\"300\";this.maskDiv.style.height=\"100\";var offsetp=this.getOffset(this.parent);this.maskDiv.style.left=offsetp.left+(this.parent.offsetWidth-300)/2;this.maskDiv.style.top=offsetp.top+(this.parent.offsetHeight)/2;this.maskDiv.style.zIndex=100;this.maskDiv.style.backgroundColor=\"lightsteelblue\";this.maskDiv.style.filter=\"progid:DXImageTransform.Microsoft.Alpha(opacity=80)\";this.maskDiv_CancelButton=document.createElement(\"SPAN\");this.maskDiv.appendChild(this.maskDiv_CancelButton);this.maskDiv_CancelButton.style.position=\"absolute\";this.maskDiv_CancelButton.style.width=\"100\";this.maskDiv_CancelButton.style.height=\"50\";this.maskDiv_CancelButton.style.left=\"100\";this.maskDiv_CancelButton.style.top=\"45\";this.maskDiv_CancelButton.innerHTML='正在查询中……';}\nif(show){this.maskDiv.style.display=\"block\";this.canceling=false;this.toolbar.setButtonEnable(\"refreshData\",false);this.toolbar.setButtonEnable(\"backwardBtn\",false);this.toolbar.setButtonEnable(\"forwardBtn\",false);}else{this.maskDiv.style.display=\"none\";this.toolbar.setButtonEnable(\"refreshData\",true);this.toolbar.setButtonEnable(\"backwardBtn\",true);this.toolbar.setButtonEnable(\"forwardBtn\",true);}}\nOlapQueryView.prototype.getOffset=function(obj){var p=new Object();p.left=0;p.top=0;while(obj){p.left+=obj.offsetLeft-obj.scrollLeft;p.top+=obj.offsetTop-obj.scrollTop;obj=obj.offsetParent;}\nreturn p;}\nOlapQueryView.prototype.doAddChart=function(){this.chartTool.showChartSetting(true);};OlapQueryView.prototype.doAddMap=function(){this.chartTool.showMapSetting(true);};OlapQueryView.prototype.doClose=function(){if(this.confirmClose()){this.onClose.fire(this);}};OlapQueryView.prototype.confirmClose=function(){if(!this.isDirty()){return true;}\nvar msg=\"多维分析已经更改，确实要保存？\";var status=modalWindow.open(msg,null,modalWindow.MB_YESNOCANCEL|modalWindow.MB_ICONQUESTION);if(modalWindow.ID_YES==status){this.saveOlapQuery();return true;}else if(modalWindow.ID_NO==status){return true;}else{return false;}};OlapQueryView.prototype.isDirty=function(){if(this.editType!=\"EDIT\"){return false;}\nif(!util.checkFunctionValid(\"BROWSE_ANALYSISREPORT_SAVE\")){return false;}\nif(this.clientId){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"isOlapQueryDirty\",[this.clientId]);if(ret&&ret.succeeded){return ret.result;}}\nreturn false;}\nOlapQueryView.prototype.doOnFilter=function(){if(this.isPaging){this.directToPage(\"1\");}else{this.refreshData();}};OlapQueryView.prototype.doMinFrame=function(){this.resetDefineDivPosition();};OlapQueryView.prototype.resetDefineDivPosition=function(){var olapTableDiv=this.domAgent.getElementByBofid(\"mainTable\");var olapTableDivTop=olapTableDiv.offsetTop;var olapTableDivLeft=olapTableDiv.offsetLeft;var olapTableDivWidth=olapTableDiv.offsetWidth;var olapTableDivHeight=olapTableDiv.offsetHeight;this.olapDefineContainer.style.left=olapTableDivLeft+330;this.olapDefineContainer.style.top=olapTableDivTop+(olapTableDivHeight-170);};OlapQueryView.prototype.doPrint=function(){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"getClientSetting\",[this.clientId]);var refreshRet=null;var oldSetting=null;if(ret&&ret.succeeded){oldSetting=ret.result;}\ntry{if(oldSetting.paging||oldSetting.showGridButton){var cloneSetting=lang.parseJSON(lang.toJSONString(oldSetting));cloneSetting.paging=0;cloneSetting.showGridButton=false;var ret2=util.remoteInvokeEx(\"OlapQueryClientService\",\"setClientSetting\",[this.clientId,cloneSetting]);}\nrefreshRet=util.remoteInvokeEx(\"OlapQueryClientService\",\"refreshData\",[this.clientId]);if(!refreshRet){return;}\nthis.olapTable.refresh(refreshRet.result);var template=domutils.doGet(\"template/freequery/query/Print.template\");var printWindow=window.open(\"\",\"_blank\");var printDoc=printWindow.document;var cssFiles=[\"querygrid.css\",\"dropdowncontrol.css\",\"dragTable.css\",\"popupmenu.css\",\"base.css\",\"OlapQuery.css\"];this.writeCssFiles(printDoc,cssFiles);printDoc.write(\"<base href='\"+jsloader.baseHref+\"' />\");var allCharts=this.chartTool.chartList;var chartOptionsList=refreshRet.result.chartOptionsList;if(allCharts&&allCharts.length>0&&chartOptionsList&&chartOptionsList.length){this.writeChartsHtml(printDoc,allCharts,chartOptionsList);}\nvar scrollDiv=this.domAgent.getElementByBofid(\"scrollDiv\");var targetHTML=scrollDiv.innerHTML;var tpl=template.replace('<div id=\"container\" />','<div id=\"container\">'+targetHTML+'<\/div>');printDoc.write(tpl);printDoc.close();}catch(e){}finally{if(oldSetting.paging||oldSetting.showGridButton){var ret3=util.remoteInvokeEx(\"OlapQueryClientService\",\"setClientSetting\",[this.clientId,oldSetting]);this.refreshData();}}};OlapQueryView.prototype.writeChartsHtml=function(doc,charts,chartOptionsList){var jsText=domutils.doGet(\"js/freequery/lang/JSLoader.js\"),buf=[];var clen=charts.length,chartDefines=[],printChartOptions=[];for(var i=0;i<clen;i++){chartDefines.push(charts[i].chartDefine);}\nprintChartOptions.push(chartOptionsList);buf.push('<script type=\"text/javascript\">');buf.push(jsText);buf.push('');buf.push('(function(chartDefines, printChartOptions) {');buf.push(' var onloadFn = window.onload, jsloader;');buf.push(' var setChartPaneSize = function(chartPane, chartDefine) {');buf.push('  if (!chartPane || !chartDefine)');buf.push('   return;');buf.push('  var chartDef = chartDefine.chart || {};');buf.push('  var width = chartDef.width, height = chartDef.height;');buf.push('  if (width) {');buf.push('   chartPane.style.width = width + \"px\";');buf.push('  }');buf.push('  if (height) {');buf.push('   chartPane.style.height = height + \"px\";');buf.push('  }');buf.push(' };');buf.push(' window.onload = function() {');buf.push('  jsloader = new JSLoader({');buf.push('   lang : \"'+jsloader.getLang()+'\"');buf.push('  });');buf.push('  var lang = jsloader.resolve(\"freequery.lang.lang\");');buf.push('  var domutils = jsloader.resolve(\"freequery.lang.domutils\");');buf.push('  var ChartViewUtil = jsloader.resolve(\"smartbi.chart.ChartViewUtil\");');buf.push('  var containerElem = document.getElementById(\"container\");');buf.push('  var graphEls = domutils.findElementByBofid(containerElem, \"chartDiv\");');buf.push('  var chartCount = chartDefines.length, defs = [];');buf.push('  graphEls = graphEls ? [].concat(graphEls) : [];');buf.push('  for ( var index = 0, pageCount = graphEls.length; index < pageCount; index++) {');buf.push('   var chartOptions = printChartOptions[index] || [];');buf.push('   var graphEl = graphEls[index];');buf.push('   graphEl.innerHTML = \"\";');buf.push('   for ( var i = 0; i < chartCount; i++) {');buf.push('    (function(chartDefine, options) {');buf.push('     var def = defs[i] = defs[i] || chartDefine;');buf.push('     var opt = lang.parseJSON(options);');buf.push('     var chartType = def.chartType;');buf.push('     var chartPane = document.createElement(\"div\");');buf.push('     var renderer = document.createElement(\"div\");');buf.push('     chartPane.style.position = \"relative\";');buf.push('     setChartPaneSize(chartPane, def);');buf.push('     graphEl.appendChild(chartPane);');buf.push('     chartPane.appendChild(renderer);');buf.push('     var chart = ChartViewUtil.initChartView(chartType,renderer,null,null,{ enabled : false },null,null);');buf.push('     if(opt.chartex && opt.chartex.chartId) {');buf.push('      opt.chartex.chartId = opt.chartex.chartId + index + i;');buf.push('     }');buf.push('     chart.refresh(chartType, opt);');buf.push('    })(chartDefines[i], chartOptions[i]);');buf.push('   }');buf.push('   break; // only one page');buf.push('  }');buf.push('  if (typeof onloadFn === \"function\") {');buf.push('   onloadFn.call(this);');buf.push('  }');buf.push(' };');buf.push('})('+lang.toJSONString(chartDefines)+', '+lang.toJSONString(printChartOptions)+');');buf.push('');buf.push('<\\/script>');doc.write(buf.join('\\n'));};OlapQueryView.prototype.writeCssFiles=function(doc,files){var base=jsloader.baseHref;if(doc&&files&&files.length){for(var i=0;i<files.length;i++){var cssStr=domutils.doGet(\"css/\"+files[i]);cssStr=cssStr.replace(/url\\(\\.\\.\\/([^)]+)\\)/g,\"url(\"+base+\"\\./$1)\");doc.write(\"<style>\"+cssStr+\"<\/style>\");}}};OlapQueryView.prototype.doPropSetting=function(){var dialogConfig={};dialogConfig.title=\"成员属性展现设置\";dialogConfig.fullName=\"bof.olapquery.olapquery.toolbar.MemberPropertySettingDialog\";dialogConfig.size=dialogFactory.size.LARGE;dialogFactory.showDialog(dialogConfig,[this.clientId,this.cubeId],this.doPropSettingCallBack,this);};OlapQueryView.prototype.doPropSettingCallBack=function(flag){if(flag){this.refreshData();}};OlapQueryView.prototype.hiddenParameterByName=function(paramName){for(var i=0;i<this.paramPanelObj.paramObjList.length;i++){var paramTag=this.paramPanelObj.paramObjList[i].paramTag;var param=paramTag.getAttribute(\"param\");if(param.name==paramName){paramTag.style.display=\"none\";}}};OlapQueryView.prototype.hiddenParameterByNameEx=function(paramName){for(var i=0;i<this.paramPanelObj.paramObjList.length;i++){var paramTag=this.paramPanelObj.paramObjList[i].paramTag;var param=paramTag.param;if(param.name==paramName){paramTag.style.display=\"none\";util.remoteInvokeEx(\"OlapQueryClientService\",\"setOutputParamInfo\",[this.clientId,param.id,\"display\",\"false\"]);}}};OlapQueryView.prototype.hiddenParameterById=function(paramId){for(var i=0;i<this.paramPanelObj.paramObjList.length;i++){var paramTag=this.paramPanelObj.paramObjList[i].paramTag;var param=paramTag.getAttribute(\"param\");if(param.id==paramId){paramTag.style.display=\"none\";}}};OlapQueryView.prototype.doSetClientConfig=function(that,widthSettings){var clientConfig={columnWidthSettings:widthSettings}\nvar ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"setClientConfig\",[this.clientId,lang.toJSONString(clientConfig)]);};OlapQueryView.prototype.doRebuildParam=function(){this.rebuildParam(this.clientId);};OlapQueryView.prototype.setFrameBorder=function(flag){OlapQueryView.superclass.setFrameBorder.call(this,flag);var vsplitter=this.domAgent.getElementByBofid(\"vsplitter\");var mainTableHsplitter=this.domAgent.getElementByBofid(\"mainTableHsplitter\");if(flag){if(vsplitter)\nvsplitter.style.backgroundColor=\"#0E9BFB\";if(mainTableHsplitter)\nmainTableHsplitter.style.width=\"2px\";}else{if(vsplitter)\nvsplitter.style.backgroundColor=\"\";if(mainTableHsplitter)\nmainTableHsplitter.style.width=\"0px\";}};OlapQueryView.prototype.setShowShotCut=function(flag){if(flag){if(this.domAgent.getElementByBofid(\"olapViewShotCut\"))\nthis.domAgent.getElementByBofid(\"olapViewShotCut\").style.display=\"\";if(this.domAgent.getElementByBofid(\"olapViewToolbarBg\"))\nthis.domAgent.getElementByBofid(\"olapViewToolbarBg\").style.display=\"none\";}else{if(this.domAgent.getElementByBofid(\"olapViewShotCut\"))\nthis.domAgent.getElementByBofid(\"olapViewShotCut\").style.display=\"none\";if(this.domAgent.getElementByBofid(\"olapViewToolbarBg\"))\nthis.domAgent.getElementByBofid(\"olapViewToolbarBg\").style.display=\"\";}}\nOlapQueryView.prototype.setTableRightClickEnable=function(flag){this.olapTable.setRightClickEnable(flag);}\nOlapQueryView.prototype.doChangeMode=function(){if(this.editType==\"DISCOVER\"){this.hiddenLeftAndRightPane();this.editType=\"VIEW\";this.toolbar.setEditType(this.editType);var mainTableHsplitter=this.domAgent.getElementByBofid(\"mainTableHsplitter\");if(mainTableHsplitter)\nmainTableHsplitter.style.width=\"0px\";if(this.domAgent.getElementByBofid(\"_btnDiscover\"))\nthis.domAgent.getElementByBofid(\"_btnDiscover\").value=\"探索模式(D)\";}else if(this.editType==\"VIEW\"){this.showLeftAndRightPane();this.editType=\"DISCOVER\";this.toolbar.setEditType(this.editType);this.initTreeWrapper();var ret=new Object();ret.result=this.queryDefine;this.olapDefinePanel.setClientSetting(this.clientSetting);this.olapDefinePanel.processQueryDefine(ret);var mainTableHsplitter=this.domAgent.getElementByBofid(\"mainTableHsplitter\");if(mainTableHsplitter)\nmainTableHsplitter.style.width=\"2px\";if(this.domAgent.getElementByBofid(\"_btnDiscover\"))\nthis.domAgent.getElementByBofid(\"_btnDiscover\").value=\"浏览模式(D)\";}}\nOlapQueryView.prototype.initTreeWrapper=function(){if(!this.treeWrapper){this.treeWrapper=new TreeWrapper({treePane:this.leftPane,className:\"bof.olapquery.olapquery.OlapQueryViewCatalogTree\",titleBackGround:\"img/tree/subtreetitlebg.jpg\",title:\"可选资源\"},this.cubeId,this.clientId);this.treeWrapper.showTree();this.treeWrapper.tree.changeColor=true;this.treeWrapper.tree.setEditType(this.editType);this.treeWrapper.tree.placeMemberHandler.subscribe(this.onPlaceMember,this);this.treeWrapper.tree.placeMemberArrayHandler.subscribe(this.refreshDefine,this);this.treeWrapper.tree.onRebuildParam.subscribe(this.doRebuildParam,this);this.initHierarchydefinePanel();this.initOlapDefine(this.olapDefineContainer);}\nif(!this.workSpaceTree){this.workSpaceTree=this.domAgent.getElementByBofid(\"treearea\");this.workSpaceTreeWrapper=new TreeWrapper({treePane:this.workSpaceTree,className:\"bof.olapquery.olapquery.workspace.OlapWorkSpaceTree\",titleBackGround:\"img/tree/subtreetitlebg.jpg\",title:\"可选资源\"},this.cubeId,this.clientId);this.workSpaceTreeWrapper.showTree();this.workSpaceTreeWrapper.tree.setEditType(this.editType);this.workSpaceTreeWrapper.tree.onDeleteHierarchy.subscribe(this.deleteHierarchy,this);this.workSpaceTreeWrapper.tree.onChangeExpListHandler.subscribe(this.onChangeExpList,this);this.workSpaceTreeWrapper.tree.onSelectTreeNode.subscribe(this.selectWorkSpaceNode,this);this.workSpaceTreeWrapper.tree.onRefreshParam.subscribe(this.doRefreshParam,this);}}\nOlapQueryView.prototype.resetChartAlign=function(chartAlign){var olapTableTr=this.domAgent.getElementByBofid(\"olapTableTr\");var olapTableContainer=this.domAgent.getElementByBofid(\"olapTableContainer\");var chartDiv=this.domAgent.getElementByBofid(\"chartDiv\");var chartTr=this.domAgent.getElementByBofid(\"chartTr\");var node=olapTableTr.firstChild;olapTableContainer.parentNode.removeChild(olapTableContainer);chartDiv.parentNode.removeChild(chartDiv);while(node){var tmp=node.nextSibling;domutils.destroyNode(node);node=tmp;}\nif(chartAlign==\"right\"){var alignControlor=this.domAgent.getElementByBofid(\"alignControlor\");var table=alignControlor.firstChild;for(var i=0;i<table.rows.length;i++){var row=table.rows[i];if(row.cells.length==1){var cell=row.cells[0];cell.colSpan=2;}}\nvar td=document.createElement(\"TD\");td.style.verticalAlign=\"top\";td.width=\"200\";olapTableTr.appendChild(td);td.appendChild(olapTableContainer);td=document.createElement(\"TD\");td.align=\"left\";td.style.verticalAlign=\"top\";olapTableTr.appendChild(td);td.appendChild(chartDiv);}else{var td=document.createElement(\"TD\");td.style.verticalAlign=\"top\";td.width=\"100%\";td.colSpan=2;olapTableTr.appendChild(td);td.appendChild(olapTableContainer);chartTr.firstChild.appendChild(chartDiv);}};OlapQueryView.prototype.setQueryViewBackgroundColor=function(){var bgColor=this.clientSetting.tableDefine.backgroundColor;var useSystemDefaultValue=this.clientSetting.tableDefine.useSystemDefaultValue;if(useSystemDefaultValue==\"true\"){var ret=util.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfig\",[\"OLAP_REPORT_BACKGROUND\"]);if(ret&&ret.result)\nbgColor=ret.result.value;else\nbgColor=\"#ffffff\";}\nvar pageTheme=registry.get(\"pageTheme\");if(null!=pageTheme){var grid=pageTheme.grid;if(grid&&grid.queryViewBackgroundColor){bgColor=grid.queryViewBackgroundColor;}}\nif(bgColor){this.domAgent.getElementByBofid(\"scrollTd\").style.backgroundColor=bgColor;}}\nOlapQueryView.prototype.setAlignCenter=function(flag){var alignString=\"\";if(flag){alignString=\"CENTER\";}\nvar alignControlor=this.domAgent.getElementByBofid(\"alignControlor\");alignControlor.align=alignString;};OlapQueryView.prototype.setPaddingLeft=function(setting){var olapTableGirdTd=this.domAgent.getElementByBofid(\"alignControlor\");olapTableGirdTd.style.paddingLeft=setting;};OlapQueryView.prototype.doRefreshDefine=function(){this.refreshDefine();};OlapQueryView.prototype.getCellValue=function(row,col){return this.olapTable.getCellValue(row,col);};OlapQueryView.prototype.refreshDataByEditType=function(){if(this.editType==\"VIEW\"){if(this.clientSetting.viewAutoRefresh==1){this.refreshData();}\nelse if(this.clientSetting.viewAutoRefresh==-1){var ret=util.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfig\",[\"OLAP_VIEW_AUTO_REFRESH\"]);if(ret&&ret.result&&ret.result.value==\"true\")\nthis.refreshData();}}else if(this.editType==\"DISCOVER\"){if(this.clientSetting.discoverAutoRefresh==1){this.refreshData();}\nelse if(this.clientSetting.viewAutoRefresh==-1){var ret=util.remoteInvokeEx(\"ConfigClientService\",\"getSystemConfig\",[\"OLAP_DISCOVER_AUTO_REFRESH\"]);if(ret&&ret.result&&ret.result.value==\"true\")\nthis.refreshData();}}};OlapQueryView.prototype.showCancelMaskDiv=function(show){if(!this.cancelMaskDiv){this.cancelMaskDiv=document.createElement(\"div\");this.parent.appendChild(this.cancelMaskDiv);this.cancelMaskDiv.style.position=\"absolute\";this.cancelMaskDiv.style.width=\"400\";this.cancelMaskDiv.style.height=\"200\";var offsetp=this.getOffset(this.parent);this.cancelMaskDiv.style.left=offsetp.left+(this.parent.offsetWidth-400)/2;this.cancelMaskDiv.style.top=offsetp.top+(this.parent.offsetHeight-200)/2;this.cancelMaskDiv.style.zIndex=100;this.cancelMaskDiv.style.backgroundColor=\"lightsteelblue\";this.cancelMaskDiv.style.filter=\"progid:DXImageTransform.Microsoft.Alpha(opacity=80)\";var div=document.createElement(\"DIV\");this.cancelMaskDiv.appendChild(div);div.style.width=\"100%\";div.style.height=\"30px\";this.exportProgressBar=new Progress(div);this.cancelMaskDiv_CancelButton=document.createElement(\"button\");this.cancelMaskDiv.appendChild(this.cancelMaskDiv_CancelButton);this.cancelMaskDiv_CancelButton.style.position=\"absolute\";this.cancelMaskDiv_CancelButton.style.width=\"100\";this.cancelMaskDiv_CancelButton.style.height=\"50\";this.cancelMaskDiv_CancelButton.style.left=\"150\";this.cancelMaskDiv_CancelButton.style.top=\"80\";this.cancelMaskDiv_CancelButton.value=\"取消导出\";this.cancelMaskDiv_CancelButton.innerText=\"取消导出\";this.cancelMaskDiv_CancelButton.owner=this;this.cancelMaskDiv_CancelButton.onclick=function(){this.owner.canceling=true;this.owner.cancelExport();this.owner.exportMHT=false;this.owner.printClick=false;clearInterval(this.exportInterval);currentQueryView=null;this.owner.showCancelMaskDiv(false);};}\nif(show){currentQueryView=this;this.exportProgressBar.setProgress(0);this.exportInterval=setInterval(getExportProgress,500);this.cancelMaskDiv.style.display=\"block\";this.canceling=false;}else{this.cancelMaskDiv.style.display=\"none\";}}\nOlapQueryView.prototype.cancelExport=function(){util.remoteInvokeEx(\"OlapQueryClientService\",\"interruptExport\",[]);var t=exportForm.action;exportForm.action=\"\";exportForm.submit();exportForm.action=t;}\nvar currentQueryView=null;function getExportProgress(){if(currentQueryView){currentQueryView.getExportProgress();}}\nOlapQueryView.prototype.getExportProgress=function(){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"getExportStatus\",[]);if(ret){if(ret.result){var value=parseFloat(ret.result.progress);var msg=ret.result.message;if(msg){this.lastExportMessage=this.lastExportMessage||{};if(this.lastExportMessage.msg==msg){var ext=this.lastExportMessage.ext||\"\";if(ext.length<6)\next+=\".\";else\next=\"\";this.lastExportMessage.ext=ext;}else{this.lastExportMessage.msg=msg;this.lastExportMessage.ext=\"\";}\nmsg+=this.lastExportMessage.ext;}\nthis.exportProgressBar.setProgress(value*100,msg);}else{this.lastExportMessage=null;clearInterval(this.exportInterval);currentQueryView=null;this.showCancelMaskDiv(false);}}}\nOlapQueryView.prototype.refreshTableStyle=function(){var olapTableDiv=this.domAgent.getElementByBofid(\"olapTable\");if(this.clientSetting.frozenRowHeader||this.clientSetting.frozenColumnHeader){olapTableDiv.className=\"olap-centerscroll_div\";olapTableDiv.style.overflow=\"auto\";}else{olapTableDiv.className=\"\";olapTableDiv.style.overflow=\"\";}\nvar alignControlor=this.domAgent.getElementByBofid(\"alignControlor\");var table=alignControlor.firstChild;if(this.clientSetting.adaptWidth){table.style.width=\"100%\";var reportContentTable=this.domAgent.getElementByBofid(\"reportContentTable\");if(reportContentTable)\nreportContentTable.style.width=\"100%\";}else{table.style.width=\"\";}};OlapQueryView.prototype.doRefreshParam=function(){this.rebuildParam(this.clientId);};OlapQueryView.prototype.doExchange=function(){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"exchangeExpressions\",[this.clientId]);if(ret&&ret.succeeded){this.chartTool.doExchange();if(this.isPaging)\nthis.directToPage(\"1\");else\nthis.refreshData();}}\nOlapQueryView.prototype.doDrillTo=function(curHier){var hierList=new Array();if(this.queryDefine){if(this.queryDefine.axisList){for(var i=0;i<this.queryDefine.axisList.length;i++){var axisDefine=this.queryDefine.axisList[i];if(axisDefine&&axisDefine.hierarchys){for(var j=0;j<axisDefine.hierarchys.length;j++){var hierDefine=axisDefine.hierarchys[j];hierList[hierDefine.name]=hierDefine.name;}}}}\nif(this.queryDefine.dice){var axisDefine=this.queryDefine.dice;if(axisDefine&&axisDefine.hierarchys){for(var j=0;j<axisDefine.hierarchys.length;j++){var hierDefine=axisDefine.hierarchys[j];hierList[hierDefine.name]=hierDefine.name;}}}}\nif(!dialogFactory)\ndialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var dialogConfig={title:\"选择目标级别\",fullName:\"bof.olapquery.olapquery.drillto.SelectLevelDialog\"};var data=new Array();data[0]=this.clientId;data[1]=this.cubeId;data[2]=curHier;data[3]=hierList;dialogFactory.showDialog(dialogConfig,data,this.doDrillToCallback,this);}\nOlapQueryView.prototype.doDrillToCallback=function(flag,oldHier,newHier,level){if(flag){var exp=new Array();exp.push(level+\".ALLMEMBERS\");var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"replaceExpressions\",[this.clientId,oldHier,newHier,exp]);if(ret&&ret.succeeded){if(this.isPaging)\nthis.directToPage(\"1\");else\nthis.refreshData();}}}\nOlapQueryView.prototype.getClientId=function(){return this.clientId;}\nOlapQueryView.prototype.getPageId=function(){if(this.portalObj)\nreturn this.portalObj.pageId;}\nOlapQueryView.prototype.setPortalObject=function(portalObj){this.portalObj=portalObj;};OlapQueryView.prototype.getAllHierarchies=function(){var boxData=new Array();var ret=util.remoteInvoke(\"OlapQueryClientService\",\"getCurrentQueryState\",[this.clientId]);if(ret&&ret.succeeded){var axisList=ret.result.axisList;var boxData=new Array();if(axisList){for(var i=0;i<axisList.length;i++){var hierarchys=axisList[i].hierarchys;for(var j=0;j<hierarchys.length;j++){var caption=hierarchys[j].caption;var hierName=hierarchys[j].name;var obj={name:hierName,alias:caption,type:\"AXIS\"}\nboxData.push(obj);}}}\nvar dice=ret.result.dice;if(dice){for(var j=0;j<dice.hierarchys.length;j++){var caption=dice.hierarchys[j].caption;var hierName=dice.hierarchys[j].name;var obj={name:hierName,alias:caption,type:\"DICE\"}\nboxData.push(obj);}}}\nreturn boxData;};OlapQueryView.prototype.doClearAllHiddenSettings=function(){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"clearAllHiddenSettings\",[this.clientId]);if(ret&&ret.succeeded){this.refreshData();}};OlapQueryView.prototype.afterRefrshTable=function(){MacroService.getInstance().fire(this,\"olapQuery\",\"afterRefreshTable\",[this]);}\nOlapQueryView.prototype.getMemberCatpion=function(memberName){var umMap=this.olapTable._unMapObj;for(var idx=0;idx<umMap.length;idx++){if(umMap[idx].un==memberName)\nreturn umMap[idx].ca;}\nreturn\"\";}\nOlapQueryView.prototype.getRowPosition=function(){return this.chartTool.buildRowPosition(this.olapTable);}\nOlapQueryView.prototype.getGridFilters=function(){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"getGridFilter\",[this.clientId]);if(ret&&ret.succeeded)\nreturn ret.result;};OlapQueryView.prototype.getTail=function(){return this.elemReportTail.innerHTML;};OlapQueryView.prototype.getHeader=function(){return this.elemReportHeader.innerHTML;};OlapQueryView.prototype.getOlapTable=function(){return this.olapTable;};OlapQueryView.prototype.setRowCount=function(that,count){this.allRowCount=count;if(!this.isPaging){this.toolbar.allRowCount=this.allRowCount;}};OlapQueryView.prototype.initHandlers=function(){var Configuration=jsloader.resolve(\"Configuration\");var configPoint=Configuration.extensionPoints.OlapQueryView;var handlerList=configPoint&&configPoint.handlers;if(!handlerList||!handlerList.length)\nreturn;this.appendHandlers(handlerList);};OlapQueryView.prototype.appendHandlers=function(handlerList){if(!handlerList||!handlerList.length)\nreturn;if(!this.handlers)\nthis.handlers=[];var toolbarTr=this.domAgent.getElementByBofid(\"toolbarTable\").rows[0];for(var i=0;i<handlerList.length;i++){var clz=jsloader.resolve(handlerList[i].className);var handler=new clz(this);this.handlers.push(handler);if(\"function\"!=typeof handler.readConfig)\ncontinue;var config=handler.readConfig();var items=config&&config.toolbar&&config.toolbar.items;if(!items)\ncontinue;for(var j=0;j<items.length;j++){var item=items[j];var bofid=item.bofid;var image=item.image;if(!bofid||!image)\ncontinue;if(this.domAgent.getElementByBofid(bofid))\ncontinue;var isSpace=(image==\"img/banner/toolbar_tab_space.gif\");var beforeElem=null;if(item.before){beforeElem=this.domAgent.getElementByBofid(item.before);if(beforeElem&&beforeElem.className.indexOf(\"queryview-toolbar-button\")>-1){}else{beforeElem=null;}}\nvar tdElem=document.createElement(\"td\");if(beforeElem){toolbarTr.insertBefore(tdElem,beforeElem.parentNode);}else{toolbarTr.appendChild(tdElem);}\ntdElem.noWrap=true;var itemElem=null;if(isSpace){itemElem=document.createElement(\"span\");itemElem.style.width=\"2px\";itemElem.style.height=\"12px\";}else{itemElem=document.createElement(\"input\");itemElem.type=\"button\";itemElem.className=\"queryview-toolbar-button\";this.addBtnClickListener(handler,item.command,itemElem);}\ntdElem.appendChild(itemElem);itemElem.style.background=\"#FFFFFF url(\"+image+\") no-repeat left center\";for(var k in item){if(k==\"image\"||k==\"before\")\ncontinue;itemElem.setAttribute(k,item[k]);}\nvar propName=this.getPropNameByBofid(bofid);this[propName]=itemElem;}}};OlapQueryView.prototype.addBtnClickListener=function(handler,cmd,btn){if(!btn||!handler||\"function\"!=typeof handler.execute)\nreturn;this.addListener(btn,\"click\",function(){handler.execute(cmd);},this);};OlapQueryView.prototype.doNextColumnPage=function(){this.showMaskDiv(true);this.clientSetting.columnStartIndex+=this.clientSetting.pageColumns;util.remoteInvokeEx(\"OlapQueryClientService\",\"setClientSetting\",[this.clientId,this.clientSetting]);this.directToPage(this.pageCount);};OlapQueryView.prototype.doPrevColumnPage=function(){this.showMaskDiv(true);this.clientSetting.columnStartIndex-=this.clientSetting.pageColumns;util.remoteInvokeEx(\"OlapQueryClientService\",\"setClientSetting\",[this.clientId,this.clientSetting]);this.directToPage(this.pageCount);};OlapQueryView.prototype.setToolbarChartCount=function(){this.toolbar.setChartCount(this.chartTool.chartList.length);};OlapQueryView.prototype.__afterRefrshTable=OlapQueryView.prototype.afterRefrshTable;OlapQueryView.prototype.afterRefrshTable=function(){if(domutils.isIOS()){if(this.iPadScroll){this.iPadScroll.scrollContent.refresh();}else{var slot=this.domAgent.getElementByBofid(\"scrollDiv\");if(slot)\nslot=slot.firstChild;if(slot){var BofIPadScroll=jsloader.resolve(\"ext.IPad.BofIPadScroll\");this.iPadScroll=new BofIPadScroll(slot,null,slot.parentNode);this.iPadScroll.scrollContent.notStopEvent=true;this.iPadScroll.scrollContent.refresh();}}}\nthis.__afterRefrshTable();}\nOlapQueryView.prototype.__setExportFormInputValues=OlapQueryView.prototype.setExportFormInputValues;OlapQueryView.prototype.setExportFormInputValues=function(that,type,options){var charts=this.chartTool.chartList||[];if(charts&&charts.length>0){if(options&&options.exportChartWay==\"excelChart\"){options.exportType=\"EXCEL2007_XLSM\";type=\"EXCEL2007_XLSM\";}}\nthis.__setExportFormInputValues(that,type,options);};","js/bof/olapquery/olapquery/OlapQueryViewChart.js":"\nvar util=jsloader.resolve(\"freequery.common.util\");var Module=jsloader.resolve(\"freequery.widget.Module\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var dialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var PopupMenu=jsloader.resolve(\"freequery.menu.PopupMenu\");var dialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var MacroService=imports(\"bof.macro.services.MacroService\");var ChartSettingWizardWindow=jsloader.resolve(\"smartbi.chartsetting.ChartSettingWizardWindow\");var Chart=null;var ChartViewUtil=jsloader.resolve(\"smartbi.chart.ChartViewUtil\");var OlapQueryViewChart=function(olapQueryView,clientId,container){this.olapQueryView=olapQueryView;this.clientId=clientId;this.container=container;this.chartClientIdList=new Array();this.chartList=new Array();this.onPointClick=new CustomEvent(\"onPointClick\",this);this.onChartClick=new CustomEvent(\"onChartClick\",this);this.onSeriesClick=new CustomEvent(\"onSeriesClick\",this);this.maximizedChart=null;};lang.extend(OlapQueryViewChart,Module);OlapQueryViewChart.prototype.maxFirstChart=function(parent,height,width){if(this.chartList.length>=1){var firstChart=this.chartList[0];var maxSize={width:width,height:height};this._setChartPaneSize(firstChart.viewOptions.renderTo.parentNode,maxSize);firstChart.resizeTo(width,height);this.maximizedChart=firstChart;this.maximizedChart.maximizedSize=maxSize;for(var i=this.chartList.length-1;i>=1;i--){this.chartList[i].hide(true);}}};OlapQueryViewChart.prototype.destroyMaximizedChart=function(){if(this.maximizedChart){var originOptions=this.maximizedChart.__chartOptions;if(originOptions.chart){var width=originOptions.chart.width;var height=originOptions.chart.height;this._setChartPaneSize(this.maximizedChart.viewOptions.renderTo.parentNode,originOptions);this.maximizedChart.resizeTo(width,height);}\ndelete this.maximizedChart.maximizedSize;this.maximizedChart=null;for(var i=this.chartList.length-1;i>=1;i--){this.chartList[i].show(true);}}};OlapQueryViewChart.prototype.removeAll=function(){var chart;while(chart=this.chartList.pop()){this.destroyChart(chart);}}\nOlapQueryViewChart.prototype.destroyChart=function(chart){chart.destroy();}\nOlapQueryViewChart.prototype.afterChartSetting=function(win){if(win==undefined||win==null)\nreturn;var chartType=win.chartDefine.chartType;var chartDefine=win.chartDefine.chartDefine;var externalDefine=win.chartDefine.externalDefine;win.onSave.unsubscribeAll();var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"createChart\",[this.clientId,chartType,chartDefine,externalDefine]);if(ret&&ret.result){var chartId=ret.result[0];win.chartDefine.id=chartId;win.chartDefine.resId=this.olapQueryView.id?this.olapQueryView.id:\"\";var chartOptions=lang.parseJSON(ret.result[1]);var chart=this.addChart(chartType,chartOptions,chartId,chartDefine,externalDefine,win,chartOptions.clientId);chart.refresh(chartType,chartOptions);}}\nOlapQueryViewChart.prototype._setChartPaneSize=function(chartPane,chartDefine){if(!chartPane||!chartDefine)return;var def=('string'===typeof chartDefine)?lang.parseJSON(chartDefine):chartDefine;var chartDef=def.chart||def||{},width=chartDef.width,height=chartDef.height;if(width){chartPane.style.width=width+'px';}\nif(height){chartPane.style.height=height+'px';}}\nOlapQueryViewChart.prototype.addChart=function(chartType,options,chartId,chartDefine,externalDefine,settingWindow,chartClientId){if(!settingWindow){settingWindow=this.getChartSettingWindow({chartDefine:{chartType:chartType,chartDefine:chartDefine,externalDefine:externalDefine,id:chartId,resId:this.olapQueryView.id}});}\nvar backupOptions=jQuery.extend(true,{},options);var chartPane=document.createElement('div'),renderTo=document.createElement('div');chartPane.style.position='relative';chartPane.style.display=\"inline-block\";this._setChartPaneSize(chartPane,chartDefine);this.container.appendChild(chartPane);chartPane.appendChild(renderTo);var chart,thisObj=this,toolbarOption;toolbarOption={enabled:true,events:{onSetting:function(showTypeWindowFirst){if(!thisObj.olapQueryView.olapTable._unMapObj){alert(\"请先刷新数据\");return false;}\nvar provider={};var columnPosition=new Array();var rowPosition=new Array();if(thisObj.olapQueryView.olapTable._unMapObj){columnPosition=thisObj.buildColumnPosition(thisObj.olapQueryView.olapTable);rowPosition=thisObj.buildRowPosition(thisObj.olapQueryView.olapTable);if(columnPosition.length==0||rowPosition.length==0){alert(\"行区/列区为空，无法生成图形\");return;}}\nprovider.getFields=function(){var rtn={columnPosition:columnPosition,rowPosition:rowPosition};return rtn;};settingWindow.options.provider=provider;return true;}}}\nchart=ChartViewUtil.initChartView(chartType,renderTo,chartClientId,null,toolbarOption,settingWindow,this.olapQueryView);chart.__chartType=chartType;chart.__chartOptions=backupOptions;chart._reportType=\"OLAP\";chart._chartId=chartId;this.chartList.push(chart);chart.on('SettingChanged',function(type,needRefresh,chart){thisObj.doChartSettingChanged(needRefresh,chart.chartDefine,chartId);});chart.on('Delete',function(type,chart){thisObj.doDeleteChart(chart,chartId);});chart.on('BeforeRenderer',function(type,chart){});chart.on('AfterRenderer',function(type,chart){});chart.on('PointClick',function(type,e,point,chart){thisObj.onPointClick.fire(e,point,chart,thisObj);var memberMenu=thisObj.createMenuItem(chart,point,e);this.handler.setPoint(point);this.handler.setChartView(chart);this.handler.setQueryObj(thisObj.olapQueryView);this.handler.onDoCmd.subscribe(thisObj.doCmd,this);});chart.on('ChartClick',function(type,e,chart){thisObj.onChartClick.fire(e,chart,thisObj)});chart.on('SeriesClick',function(type,e,series,chart){thisObj.onSeriesClick.fire(e,series,chart,thisObj)});return chart;};OlapQueryViewChart.prototype.createMenuItem=function(chart,point,e){var valueObj=point.getCurrentPointValueObj();if(!valueObj||!valueObj.value)\nreturn;var memberList=valueObj.value.split(\"[]\");var memberPath=\"\";for(var i=0;i<memberList.length;i++){var unqueName=memberList[i];var member=this.getMemberInfo(unqueName);memberPath+=unqueName+\"[]\";var memberMenu=chart.addMenuItem(member.caption);this.createSubMenu(memberMenu,member,memberPath);}\nchart.popupMenu.popup(e);}\nOlapQueryViewChart.prototype.getChartSettingWindow=function(options){var data=options||{};data.dataSettingClass=\"bof.olapquery.olapquery.chart.OlapChartDataSetSetting\";var provider={};var columnPosition=new Array();var rowPosition=new Array();if(this.olapQueryView.olapTable._unMapObj){columnPosition=this.buildColumnPosition(this.olapQueryView.olapTable);rowPosition=this.buildRowPosition(this.olapQueryView.olapTable);}\nprovider.getFields=function(){var rtn={columnPosition:columnPosition,rowPosition:rowPosition};return rtn;};data.provider=provider;data.reportType=\"OLAP\";var win=new ChartSettingWizardWindow(data);return win;};OlapQueryViewChart.prototype.doChartSettingChanged=function(needRefresh,define,chartId){var chartType=define.chartType;var chartDefine=define.chartDefine;var externalDefine=define.externalDefine;var chart=this.getChartById(chartId);chart.__chartType=chartType;var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"updateChart\",[this.clientId,chartId,chartType,chartDefine,externalDefine]);if(ret&&ret.result){var chartPane=eval(chart.viewOptions.renderTo).parentNode;this._setChartPaneSize(chartPane,chart.maximizedSize||chartDefine);if(needRefresh){var options=lang.parseJSON(ret.result);chart.__chartOptions=jQuery.extend(true,{},options);if(chart.maximizedSize){var size=chart.maximizedSize;if(size&&size.width&&size.height){if(!options.chart)options.chart={};options.chart.width=size.width;options.chart.height=size.height;}}\nchart.refresh(chartType,options);}}};OlapQueryViewChart.prototype.doDeleteChart=function(chart,chartId){if(this.chartList){for(var i=0,len=this.chartList.length;i<len;i++){if(this.chartList[i]==chart){util.remoteInvokeEx(\"OlapQueryClientService\",\"removeChart\",[this.clientId,chartId]);var chartPane=eval(chart.viewOptions.renderTo).parentNode;this.chartList.splice(i,1);chart.destroy();if(chartPane){domutils.destroyNode(chartPane);chartPane=null;}\nbreak;}}}};OlapQueryViewChart.prototype.showChartSetting=function(createNewFlag){if(!this.olapQueryView.olapTable._unMapObj){alert(\"请先刷新数据\");return;}\nvar win=this.getChartSettingWindow();win.onSave.subscribe(this.afterChartSetting,this);win.show(0);}\nOlapQueryViewChart.prototype.buildRowPosition=function(table){var rowCount=table._rowHierCount;var rowPosition=new Array();var htmlTable=table.domAgent.getElementByBofid(\"olap-grid\");var tr=htmlTable.tBodies[0].firstChild;var td=null;do{td=tr.firstChild;if(td.className.indexOf(\"olap-grid-left-cell\")>=0)\nbreak;tr=tr.nextSibling;}while(tr);if(!tr)\nreturn rowPosition;var index=0;while(tr){var td=tr.firstChild;var ntd=td.nextSibling;var currentHier=table._unMapObj[td.getAttribute(\"un\")].hi;while(ntd&&ntd.getAttribute(\"un\")!=null&&table._unMapObj[ntd.getAttribute(\"un\")].hi==currentHier){td=ntd;ntd=ntd.nextSibling;}\ndo{var m=new Object();m.uniqueName=table._unMapObj[td.getAttribute(\"un\")].un;m.caption=table._unMapObj[td.getAttribute(\"un\")].ca;m.hierarchyName=table._hiMap[currentHier].n;m.hierarchyAlias=table._hiMap[currentHier].n;for(var i=0;i<td.rowSpan;i++){var row=rowPosition[index+i];if(!row){row=new Object();row.members=new Array();rowPosition[index+i]=row;}\nrow.members.push(m);}\ntd=td.nextSibling;if(td&&td.getAttribute(\"un\")!=null){var currentHier=table._unMapObj[td.getAttribute(\"un\")].hi;var ntd=td.nextSibling;while(ntd&&ntd.getAttribute(\"un\")!=null&&table._unMapObj[ntd.getAttribute(\"un\")].hi==currentHier){td=ntd;ntd=ntd.nextSibling;}}}while(td&&td.getAttribute(\"un\")!=null);tr=tr.nextSibling;index++;}\nreturn rowPosition;}\nOlapQueryViewChart.prototype.getRowId=function(tr){var tableBody=tr.parentNode;for(var i=0;i<tableBody.rows.length;i++){var row=tableBody.rows[i];if(row==tr)\nreturn i;}}\nOlapQueryViewChart.prototype.buildColumnPosition=function(table){var rowCount=table._rowHierCount;var colCount=table._hiMap.length-rowCount;var columnPosition=new Array();var htmlTable=table.domAgent.getElementByBofid(\"olap-grid\");var tr=htmlTable.tBodies[0].firstChild;var td=tr.firstChild;while(td&&td.getAttribute(\"un\")==null)\ntd=td.nextSibling;while(tr&&tr.firstChild&&tr.firstChild.className.indexOf(\"olap-grid-left-cell\")==-1)\ntr=tr.nextSibling;var maxColumnRowId=0;if(tr){maxColumnRowId=this.getRowId(tr);var path=new Array();var prevRowList=new Array();var tempTdList=new Array();var colSpanList=new Array();var colSpan=0;var parentColSpan=0;var maxSpan=0;var obj=null;var rowId=-1;var index=0;var tempTd=td;do{parentColSpan=0;if(tempTd.parentNode.previousSibling){rowId=this.getRowId(tempTd.parentNode.previousSibling);if(colSpanList[rowId])\nparentColSpan=colSpanList[rowId];}\nrowId=this.getRowId(tempTd.parentNode);colSpan=(colSpanList[rowId])?(colSpanList[rowId]):parentColSpan;maxSpan=0;if(prevRowList.length>0)\nmaxSpan=parentColSpan+prevRowList[prevRowList.length-1].colSpan;if(maxSpan>0&&colSpan+tempTd.colSpan>maxSpan){rowId=this.getRowId(tempTd.parentNode);tempTdList[rowId]=tempTd.previousSibling;tempTd=this.popTd(prevRowList,colSpanList);if(tempTd){tempTd=tempTd.nextSibling;continue;}else\nbreak;}\nif(tempTd.getAttribute(\"un\")){var hi=table._unMapObj[tempTd.getAttribute(\"un\")].hi;for(var i=0;i<path.length;i++){if(path[i].hi==hi){path.splice(i,path.length-i);break;}}\npath[path.length]=table._unMapObj[tempTd.getAttribute(\"un\")];}\nrowId=this.getRowId(tempTd.parentNode);if(maxColumnRowId-1==rowId||maxColumnRowId==tempTd.rowSpan+rowId){var col=new Object();col.members=new Array();columnPosition[index]=col;for(var j=0;j<path.length;j++){var m=new Object();m.uniqueName=path[j].un;m.caption=path[j].ca;var hier=path[j].hi\nm.hierarchyName=table._hiMap[hier].n;m.hierarchyAlias=table._hiMap[hier].n;col.members[j]=m;}\nindex++;this.addColSpanByRowSpan(tempTd,colSpanList);rowId=this.getRowId(tempTd.parentNode);colSpanList[rowId]=((colSpanList[rowId])?(colSpanList[rowId]):0)+tempTd.colSpan;tempTd=tempTd.nextSibling;if(!tempTd){tempTd=this.popTd(prevRowList,colSpanList);if(tempTd)\ntempTd=tempTd.nextSibling;}}else{if(tempTd.rowSpan>1){obj=tempTd.parentNode.nextSibling;for(var i=1;i<tempTd.rowSpan;i++){obj=obj.nextSibling;}}else\nobj=tempTd.parentNode.nextSibling;if(obj&&obj.className.indexOf(\"olap-grid-left-cell\")==-1){prevRowList.push(tempTd);rowId=this.getRowId(obj);tempTd=((tempTdList[rowId])?tempTdList[rowId].nextSibling:obj.firstChild);if(!tempTd){tempTd=this.popTd(prevRowList,colSpanList);if(tempTd)\ntempTd=tempTd.nextSibling;}}else{this.addColSpanByRowSpan(tempTd,colSpanList);rowId=this.getRowId(tempTd.parentNode);colSpanList[rowId]=((colSpanList[rowId])?(colSpanList[rowId]):0)+tempTd.colSpan;tempTd=tempTd.nextSibling;if(!tempTd){tempTd=this.popTd(prevRowList,colSpanList);if(tempTd)\ntempTd=tempTd.nextSibling;}}}}while(tempTd)}\nreturn columnPosition;}\nOlapQueryViewChart.prototype.addColSpanByRowSpan=function(tempTd,colSpanList){var obj=null;if(tempTd.rowSpan>1){obj=tempTd.parentNode.nextSibling;for(var i=1;i<tempTd.rowSpan;i++){rowId=this.getRowId(obj);colSpanList[rowId]=((colSpanList[rowId])?(colSpanList[rowId]):0)+tempTd.colSpan;obj=obj.nextSibling;}}}\nOlapQueryViewChart.prototype.popTd=function(prevRowList,colSpanList){var tempTd=null;var obj=null;do{tempTd=prevRowList.pop();if(!tempTd)\nbreak;this.addColSpanByRowSpan(tempTd,colSpanList);obj=tempTd.parentNode;rowId=this.getRowId(obj);colSpanList[rowId]=((colSpanList[rowId])?(colSpanList[rowId]):0)+tempTd.colSpan;}while(tempTd&&!tempTd.nextSibling)\nreturn tempTd;}\nOlapQueryViewChart.prototype.loadCharts=function(charts,chartOptionsList){if(!charts)\nreturn;for(var i=0;i<charts.length;i++){var chartDefine=charts[i].chartDefine;var chartType=chartDefine.chartType,chartId=chartDefine.id;var options=lang.parseJSON(chartOptionsList[i]);this.addChart(chartType,options,chartId,chartDefine.chartDefine,chartDefine.externalDefine,null,charts[i].clientId);}}\nOlapQueryViewChart.prototype.refreshAll=function(chartOptionsList){for(var i=0;i<this.chartList.length;i++){var chart=this.chartList[i];var options=lang.parseJSON(chartOptionsList[i]);var backupOptions=jQuery.extend(true,{},options);if(this.maximizedChart!=null&&this.maximizedChart.clientId==chart.clientId){var size=this.maximizedChart.maximizedSize;if(size&&size.width&&size.height){if(!options.chart)options.chart={};options.chart.width=size.width;options.chart.height=size.height;}}\nchart.__chartOptions=backupOptions;chart.refresh(chart.__chartType,options);if(this.maximizedChart!=null&&this.maximizedChart.clientId!=chart.clientId){var hideParentNode=true;chart.hide(true);}}}\nOlapQueryViewChart.prototype.destroy=function(){this.removeAll();this.container.innerHTML=\"\";this.container=null;this.onPointClick=null;this.onChartClick=null;this.onSeriesClick=null;}\nOlapQueryViewChart.prototype.findChart=function(clientId){for(var i=0;i<this.chartList.length;i++){if(this.chartList[i].clientId==clientId)\nreturn this.chartList[i];}}\nOlapQueryViewChart.prototype.getMemberInfo=function(memberName){var umMap=this.olapQueryView.olapTable._unMapObj;for(var idx=0;idx<umMap.length;idx++){if(umMap[idx].un==memberName){var member=new Object();member.uniqueName=umMap[idx].un;member.caption=umMap[idx].ca;member.hasParent=umMap[idx].at&1;member.hasChild=umMap[idx].at&2;member.isCalculated=umMap[idx].at&4;member.hierarchyName=this.olapQueryView.olapTable._hiMap[umMap[idx].hi].n;return member;}}\nreturn null;}\nOlapQueryViewChart.prototype.isMemberPathEquals=function(memberList1,memberList2){var flag=false;if(memberList1&&memberList2&&memberList1.length==memberList2.length){flag=true;for(var k=0;k<memberList1.length;k++){if(memberList1[k]!=memberList2[k]){flag=false;break;}}}\nreturn flag;}\nOlapQueryViewChart.prototype.createMacroMenu=function(menu,columnMembers,rowMembers){var cell=this.findCell(columnMembers,rowMembers);if(!cell)\nreturn;this.currentCell=this.olapQueryView.wrapCell(cell);if((this.currentCell.data&&!this.currentCell.data.groupName)||(this.currentCell.member&&this.currentCell.member.groupName)){return;}\nvar me=this;this.cmds={};MacroService.getInstance().fire(this.olapQueryView,\"olapTable\",\"onInitPopupMenu\",[{addMenuItem:function(label,cmd,key,callback){menu.createMenuItem(label,cmd,key);me.cmds[cmd]=callback;}},this.currentCell]);this.olapQueryView.onClickOlapTable.fire(this.currentCell,this.olapQueryView,event,menu);}\nOlapQueryViewChart.prototype.isMembersEquals=function(memberList1,memberList2){var flag=false;if(memberList1&&memberList2&&memberList1.length==memberList2.length){flag=true;for(var k=0;k<memberList1.length;k++){if(memberList1[k].uniqueName!=memberList2[k]){flag=false;break;}}}\nreturn flag;}\nOlapQueryViewChart.prototype.createSubMenu=function(memberMenu,member,memberPath){var drillUpM=memberMenu.createMenuItem(\"上钻\",\"drillUp:\"+member.uniqueName);var drillDownM=memberMenu.createMenuItem(\"下钻\",\"drillDown:\"+member.uniqueName);var drillLevelM=memberMenu.createMenuItem(\"层钻\",\"drillLevel:\"+member.uniqueName+\":\"\n+member.hierarchyName+\":\"+member.isCalculated);memberMenu.createSeparator();var expandMemberM=memberMenu.createMenuItem(\"展开\",\"expandMember:\"+member.uniqueName);var collapseMemberM=memberMenu.createMenuItem(\"收起\",\"collapseMember:\"+member.uniqueName);memberMenu.createSeparator();var expandPositionM=memberMenu.createMenuItem(\"按位置展开\",\"expandPosition:\"+memberPath);var collapsePositionM=memberMenu.createMenuItem(\"按位置收起\",\"collapsePosition:\"+memberPath);var drillToM=memberMenu.createMenuItem(\"钻到其它...\",\"drillTo:\"+member.uniqueName+\":\"\n+member.hierarchyName);drillUpM.setEnabled(member.hasParent);drillDownM.setEnabled(member.hasChild);expandMemberM.setEnabled(member.hasChild);expandPositionM.setEnabled(member.hasChild);collapseMemberM.setEnabled(member.hasChild);collapsePositionM.setEnabled(member.hasChild);if(member.isCalculated){drillUpM.setEnabled(false);drillDownM.setEnabled(false);drillLevelM.setEnabled(false);expandMemberM.setEnabled(false);expandPositionM.setEnabled(false);collapseMemberM.setEnabled(false);collapsePositionM.setEnabled(false);}else{drillLevelM.setEnabled(true);}}\nOlapQueryViewChart.prototype.doCmd=function(cmd,query){var olapQueryView=query;var paramList=cmd.split(\":\");if(paramList.length>=2){if(paramList[0]==\"drillUp\"){olapQueryView.olapTable.setCurrentMember(paramList[1]);olapQueryView.olapTable.drillUp();}else if(paramList[0]==\"drillDown\"){olapQueryView.olapTable.setCurrentMember(paramList[1]);olapQueryView.olapTable.drillDown();}else if(paramList[0]==\"expandMember\"){olapQueryView.olapTable.setCurrentMember(paramList[1]);olapQueryView.olapTable.expandMember();}else if(paramList[0]==\"collapseMember\"){olapQueryView.olapTable.setCurrentMember(paramList[1]);olapQueryView.olapTable.collapseMember();}else if(paramList[0]==\"expandPosition\"){var memberPathList=paramList[1].split(\"[]\");memberPathList.pop();olapQueryView.olapTable.setCurrentMemberPath(memberPathList);olapQueryView.olapTable.expandPosition();}else if(paramList[0]==\"collapsePosition\"){var memberPathList=paramList[1].split(\"[]\");memberPathList.pop();olapQueryView.olapTable.setCurrentMemberPath(memberPathList);olapQueryView.olapTable.collapsePosition();}else if(paramList[0]==\"drillLevel\"){olapQueryView.olapTable.setCurrentMember(paramList[1]);olapQueryView.olapTable.setCurrentHierarchy(paramList[2]);olapQueryView.olapTable.showDrillLevelDialog(paramList[3]);}else if(paramList[0]==\"mapDrillUp\"){util.remoteInvoke(\"OlapQueryClientService\",\"changeToParentMap\",[paramList[1]]);olapQueryView.olapTable.setCurrentMember(paramList[2]);olapQueryView.olapTable.drillUp();}else if(paramList[0]==\"mapDrillDown\"){util.remoteInvoke(\"OlapQueryClientService\",\"changeToMap\",[paramList[1],paramList[3]]);olapQueryView.olapTable.setCurrentMember(paramList[2]);olapQueryView.olapTable.drillDown();}else if(paramList[0]==\"drillTo\"){var hierarchyName=paramList[2];if(hierarchyName)\nolapQueryView.olapTable.onDrillTo.fire(hierarchyName);}}}\nOlapQueryViewChart.prototype.doMapSetting=function(){this.showMapSetting(false);}\nOlapQueryViewChart.prototype.showMapSetting=function(createNewFlag){if(!this.olapQueryView.olapTable._unMapObj){alert(\"请先刷新数据\");return;}\nif(createNewFlag){var param=new Object();param.columnPosition=this.buildColumnPosition(this.olapQueryView.olapTable);param.rowPosition=this.buildRowPosition(this.olapQueryView.olapTable);param.clientId=this.clientId;var dialogConfig={title:\"flash地图文件路径\",fullName:\"bof.olapquery.olapquery.MapSettingDialog\",size:dialogFactory.size.LARGE};dialogFactory.showDialog(dialogConfig,param,this.addMapCallback,this);}else if(this.currentChart){var param=new Object();param.columnPosition=this.buildColumnPosition(this.olapQueryView.olapTable);param.rowPosition=this.buildRowPosition(this.olapQueryView.olapTable);param.chartClientId=this.currentChart.clientId;param.clientId=this.clientId;var dialogConfig={title:\"flash地图文件路径\",fullName:\"bof.olapquery.olapquery.MapSettingDialog\",size:dialogFactory.size.LARGE};dialogFactory.showDialog(dialogConfig,param,this.afterChartSetting,this);}}\nOlapQueryViewChart.prototype.doExchange=function(){for(var i=0;i<this.chartList.length;i++){var chart=this.chartList[i];var externalDefineString=chart.chartDefine.externalDefine;var externalDefine=lang.parseJSON(externalDefineString);var olapChartExtendDefine=externalDefine.olapChartExtendDefine;var renderType=olapChartExtendDefine.RenderType;if(renderType==\"column\"){olapChartExtendDefine.RenderType=\"row\";}else if(renderType==\"row\"){olapChartExtendDefine.RenderType=\"column\";}else if(renderType==\"rowallselected\"){olapChartExtendDefine.RenderType=\"columnallselected\";}else if(renderType==\"columnallselected\"){olapChartExtendDefine.RenderType=\"rowallselected\";}\nexternalDefine.olapChartExtendDefine=lang.toJSONString(olapChartExtendDefine);chart.chartDefine.externalDefine=lang.toJSONString(externalDefine);}}\nOlapQueryViewChart.prototype.getChartById=function(chartId){for(var i=0;i<this.chartList.length;i++){var chart=this.chartList[i];if(chart._chartId==chartId){return chart;}}}","js/bof/olapquery/olapquery/OlapQueryViewToolbar.js":"\nvar util=jsloader.resolve(\"freequery.common.util\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var DropDownBox=imports(\"freequery.control.DropDownBox\");var dialogFactory=jsloader.resolve(\"freequery.dialog.dialogFactory\");var DropDownCheckList=imports(\"freequery.control.DropDownCheckList\");var OlapQueryViewToolbar=function(domAgent){this.domAgent=domAgent;this.domAgent.registerListenerByBofid(\"refreshOlapTable\",\"click\",this.refreshOlapTable,this);this.domAgent.registerListenerByBofid(\"refreshData\",\"click\",this.refreshData,this);this.domAgent.registerListenerByBofid(\"saveOlapQuery\",\"click\",this.saveOlapQuery,this);this.domAgent.registerListenerByBofid(\"saveAsOlapQuery\",\"click\",this.saveAsOlapQuery,this);this.domAgent.registerListenerByBofid(\"showView\",\"click\",this.showView,this);this.domAgent.registerListenerByBofid(\"setReport\",\"click\",this.setReport,this);this.domAgent.registerListenerByBofid(\"setSubtotal\",\"click\",this.setSubtotal,this);this.domAgent.registerListenerByBofid(\"setParam\",\"click\",this.setParam,this);this.domAgent.registerListenerByBofid(\"addFavorite\",\"click\",this.addFavorite,this);this.domAgent.registerListenerByBofid(\"previewMDX\",\"click\",this.previewMDX,this);this.domAgent.registerListenerByBofid(\"backwardBtn\",\"click\",this.goBackWard,this);this.domAgent.registerListenerByBofid(\"forwardBtn\",\"click\",this.goForWard,this);this.domAgent.registerListenerByBofid(\"export\",\"click\",this.doExport,this);this.domAgent.registerListenerByBofid(\"getParamId\",\"click\",this.getParamId,this);this.domAgent.registerListenerByBofid(\"addChart\",\"click\",this.doAddChart,this);this.domAgent.registerListenerByBofid(\"print\",\"click\",this.doPrint,this);this.domAgent.registerListenerByBofid(\"propSetting\",\"click\",this.doPropSetting,this);this.domAgent.registerListenerByBofid(\"discover\",\"click\",this.fireOnChangeMode,this);this.domAgent.registerListenerByBofid(\"advancedSetting\",\"click\",this.fireAdvancedSetting,this);this.domAgent.registerListenerByBofid(\"_btnRefreshData\",\"click\",this.refreshData,this);this.domAgent.registerListenerByBofid(\"_btnDiscover\",\"click\",this.fireOnChangeMode,this);this.domAgent.registerListenerByBofid(\"_btnAddChart\",\"click\",this.fireAddChart,this);this.domAgent.registerListenerByBofid(\"_btnExportExcel\",\"click\",this.fireOnExport,this);this.domAgent.registerListenerByBofid(\"clearAllHiddenSettings\",\"click\",this.doClearAllHiddenSettings,this);this.onChangeMode=new CustomEvent();this.onRefresh=new CustomEvent();this.onRefreshData=new CustomEvent();this.onSaveOlapQuery=new CustomEvent();this.onRestoreOlapQuery=new CustomEvent();this.onShowQueryDefinePanel=new CustomEvent();this.onSetReport=new CustomEvent();this.onSetSubtotal=new CustomEvent();this.onSetParam=new CustomEvent();this.onSetParamLayout=new CustomEvent();this.onAddFavorite=new CustomEvent();this.onSaveAsOlapQuery=new CustomEvent();this.onPreviewMDX=new CustomEvent();this.onGoBackWard=new CustomEvent();this.onGoForWard=new CustomEvent();this.onChangeViewSettings=new CustomEvent();this.onAddChart=new CustomEvent();this.onAddMap=new CustomEvent();this.canGoBackWard=false;this.canGoForWard=false;this.onExport=new CustomEvent();this.editType=null;this.controlType=null;this.onGetParamId=new CustomEvent();this.onPrint=new CustomEvent();this.onPropSetting=new CustomEvent();this.onClearAllHiddenSettings=new CustomEvent();this.onAdvancedSetting=new CustomEvent();this.onGetChartCount=new CustomEvent();};OlapQueryViewToolbar.prototype.getParamId=function(){this.onGetParamId.fire();};OlapQueryViewToolbar.prototype.setEditType=function(editType){this.editType=editType;};OlapQueryViewToolbar.prototype.setControlType=function(controlType){this.controlType=controlType;};OlapQueryViewToolbar.prototype.hiddenButton=function(){var configs=new Array();if(this.editType==\"EDIT\"){configs.push([\"BROWSE_ANALYSISREPORT_SAVE\",\"saveOlapQuery\"]);this.domAgent.getElementByBofid(\"discover\").parentNode.style.display=\"NONE\";}else if(this.editType==\"VIEW\"){this.domAgent.getElementByBofid(\"saveOlapQuery\").parentNode.style.display=\"NONE\";}else if(this.editType==\"DISCOVER\"){this.domAgent.getElementByBofid(\"saveOlapQuery\").parentNode.style.display=\"NONE\";}\nif(this.controlType==\"OlapQueryView\"){this.domAgent.getElementByBofid(\"advancedSetting\").parentNode.style.display=\"NONE\";}\nconfigs.push([\"BROWSE_ANALYSISREPORT_VIEWPANEL\",\"showView\"]);configs.push([\"BROWSE_ANALYSISREPORT_REFRESH\",\"refreshData\"]);configs.push([\"BROWSE_ANALYSISREPORT_SAVEAS\",\"saveAsOlapQuery\"]);configs.push([\"BROWSE_ANALYSISREPORT_ADDTOFAVORITE\",\"addFavorite\"]);configs.push([\"BROWSE_ANALYSISREPORT_SETTING\",\"setReport\"]);configs.push([\"BROWSE_ANALYSISREPORT_SUBTOTAL\",\"setSubtotal\"]);configs.push([\"BROWSE_ANALYSISREPORT_PARAMETERSETTING\",\"setParam\"]);configs.push([\"BROWSE_ANALYSISREPORT_PREVIEWMDX\",\"previewMDX\"]);configs.push([\"BROWSE_ANALYSISREPORT_EXPORT\",\"export\"]);configs.push([\"BROWSE_ANALYSISREPORT_GRAPH\",\"addChart\"]);configs.push([\"BROWSE_ANALYSISREPORT_PRINT\",\"print\"]);configs.push([\"BROWSE_ANALYSISREPORT_ADVANCEDSETTING\",\"advancedSetting\"]);configs.push([\"BROWSE_ANALYSISREPORT_DISCOVER\",\"discover\"]);for(var i=0;i<configs.length;i++){var config=configs[i];if(!util.checkFunctionValid(config[0])){this.domAgent.getElementByBofid(config[1]).parentNode.style.display=\"NONE\";}}\nif(this.checkDisplay(\"saveOlapQuery\")&&this.checkDisplay(\"saveAsOlapQuery\")&&this.checkDisplay(\"addFavorite\")){this.domAgent.getElementByBofid(\"space2\").style.display=\"NONE\";}\nif(this.checkDisplay(\"addChart\")&&this.checkDisplay(\"showView\")){this.domAgent.getElementByBofid(\"space3\").style.display=\"NONE\";}\nif(this.checkDisplay(\"setReport\")&&this.checkDisplay(\"setSubtotal\")&&this.checkDisplay(\"setParam\")&&this.checkDisplay(\"propSetting\")){this.domAgent.getElementByBofid(\"space4\").style.display=\"NONE\";}\nif(!util.checkFunctionValid(\"BROWSE_ANALYSISREPORT_DISCOVER\"))\nthis.domAgent.getElementByBofid(\"_btnDiscover\").style.display=\"NONE\";if(!util.checkFunctionValid(\"BROWSE_ANALYSISREPORT_GRAPH\"))\nthis.domAgent.getElementByBofid(\"_btnAddChart\").style.display=\"NONE\";if(!util.checkFunctionValid(\"BROWSE_ANALYSISREPORT_EXPORT\"))\nthis.domAgent.getElementByBofid(\"_btnExportExcel\").style.display=\"NONE\";if(domutils.isMobile()){this.domAgent.getElementByBofid(\"discover\").parentNode.style.display=\"NONE\";}};OlapQueryViewToolbar.prototype.checkDisplay=function(bofid){if(this.domAgent.getElementByBofid(bofid)&&this.domAgent.getElementByBofid(bofid).parentNode)\nreturn this.domAgent.getElementByBofid(bofid).parentNode.style.display.toUpperCase()==\"NONE\";return false;};OlapQueryViewToolbar.prototype.refreshOlapTable=function(){this.onRefresh.fire();};OlapQueryViewToolbar.prototype.refreshData=function(){this.onRefreshData.fire();};OlapQueryViewToolbar.prototype.saveOlapQuery=function(){this.onSaveOlapQuery.fire();};OlapQueryViewToolbar.prototype.showView=function(){var showView=this.domAgent.getElementByBofid(\"showView\");var p=util.getAbsolutePos(showView,this.domAgent.container);this.initViewMenu();this.viewMenu.dropDown(p.x,p.y+showView.offsetHeight);};OlapQueryViewToolbar.prototype.doViewMenuCloseUp=function(){var views=this.viewMenu.getCheckboxList(true);for(var i=0;i<views.length;i++){var item=views[i];this.setViewItemDisplay(item.id,item.checked);}\nthis.onChangeViewSettings.fire(this,this.getViewSettings());};OlapQueryViewToolbar.prototype.getViewSettings=function(){var configs=new Array();configs.push(this.getViewSetting(\"reportHeaderTr\"));configs.push(this.getViewSetting(\"reportTailTr\"));configs.push(this.getViewSetting(\"paramDivTr\"));configs.push(this.getViewSetting(\"olapTableTr\"));configs.push(this.getViewSetting(\"olapDefine\"));configs.push(this.getViewSetting(\"leftPaneTreeTd\"));configs.push(this.getViewSetting(\"rightPaneTd\"));configs.push(this.getViewSetting(\"chartTr\"));configs.push(this.getViewSetting(\"scrollDivTr\"));return lang.toJSONString(configs);};OlapQueryViewToolbar.prototype.getViewSetting=function(bofId){var element=this.domAgent.getElementByBofid(bofId);var tableTr=this.domAgent.getElementByBofid(\"olapTableTr\");if(bofId==\"olapTableTr\"&&tableTr.cells&&tableTr.cells.length==2){element=tableTr.cells[0];}else if(bofId==\"chartTr\"&&tableTr.cells&&tableTr.cells.length==2){element=tableTr.cells[1];}\nreturn{bofId:bofId,display:element.style.display!=\"none\"}};OlapQueryViewToolbar.prototype.setViewSettings=function(settingsJsonString){if(!settingsJsonString){return;}\nvar configs=lang.parseJSON(settingsJsonString);for(var i=0;i<configs.length;i++){var config=configs[i];if(config.bofId==\"scrollDivTr\"){continue;}\nif(config.bofId==\"olapDefine\"||config.bofId==\"rightPaneTd\"||config.bofId==\"leftPaneTreeTd\"){continue;}\nthis.setViewItemDisplay(config.bofId,config.display);}};OlapQueryViewToolbar.prototype.initViewMenu=function(){var configs=new Array();configs.push([\"reportHeaderTr\",\"显示表头\"]);configs.push([\"reportTailTr\",\"显示表尾\"]);configs.push([\"paramDivTr\",\"显示参数面板\"]);configs.push([\"olapTableTr\",\"显示表格\"]);configs.push([\"chartTr\",\"显示图形\"]);if(this.controlType==\"OlapQueryView\"){configs.push([\"leftPaneTreeTd\",\"显示资源区\"]);configs.push([\"olapDefine\",\"显示查询面板\"]);configs.push([\"rightPaneTd\",\"显示属性区\"]);}\nif(!this.viewMenu){this.viewMenu=new DropDownCheckList(this.domAgent.container);this.viewMenu.onCloseUp.subscribe(this.doViewMenuCloseUp,this);for(var i=0;i<configs.length;i++){var config=configs[i];this.initViewMenuItem(config[0],config[1]);}\nvar ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"isShowGridButton\",[this.clientId]);if(ret&&ret.succeeded){this.viewMenu.setItemChecked(\"showBtn\",ret.result);}}else{for(var i=0;i<configs.length;i++){var config=configs[i];this.setViewMenuItemChecked(config[0]);}\nvar ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"isShowGridButton\",[this.clientId]);if(ret&&ret.succeeded){this.viewMenu.setItemChecked(\"showBtn\",ret.result);}}};OlapQueryViewToolbar.prototype.initViewMenuItem=function(id,dispalyValue){if(!this.viewMenu){this.viewMenu=new DropDownCheckList(this.domAgent.container);}\nif(id==\"leftPaneTreeTd\"){this.viewMenu.checkList.insertSplit();}\nthis.viewMenu.addItem(id,dispalyValue);this.setViewMenuItemChecked(id);};OlapQueryViewToolbar.prototype.setClientId=function(clientId){this.clientId=clientId;};OlapQueryViewToolbar.prototype.setReport=function(){this.onSetReport.fire();}\nOlapQueryViewToolbar.prototype.setSubtotal=function(){this.onSetSubtotal.fire();}\nOlapQueryViewToolbar.prototype.setParam=function(){this.onSetParam.fire();}\nOlapQueryViewToolbar.prototype.setParamLayout=function(){this.onSetParamLayout.fire();}\nOlapQueryViewToolbar.prototype.addFavorite=function(){this.onAddFavorite.fire();}\nOlapQueryViewToolbar.prototype.saveAsOlapQuery=function(){this.onSaveAsOlapQuery.fire();}\nOlapQueryViewToolbar.prototype.previewMDX=function(){this.onPreviewMDX.fire();};OlapQueryViewToolbar.prototype.goBackWard=function(){this.onGoBackWard.fire();};OlapQueryViewToolbar.prototype.goForWard=function(){this.onGoForWard.fire();};OlapQueryViewToolbar.prototype.disableForward=function(flag){this.canGoForWard=!flag;var goForwardBtn=this.domAgent.getElementByBofid(\"forwardBtn\");if(flag){goForwardBtn.className=\"queryview-toolbar-button disable-queryview-toolbar-forward\";}else{goForwardBtn.className=\"queryview-toolbar-button queryview-toolbar-forward\";}};OlapQueryViewToolbar.prototype.disableBackward=function(flag){this.canGoBackWard=!flag;var goBackwardBtn=this.domAgent.getElementByBofid(\"backwardBtn\");if(flag){goBackwardBtn.className=\"queryview-toolbar-button disable-queryview-toolbar-backward\";}else{goBackwardBtn.className=\"queryview-toolbar-button queryview-toolbar-backward\";}};OlapQueryViewToolbar.prototype.doExport=function(){var exportBtn=this.domAgent.getElementByBofid(\"export\");var p=null;if(domutils.isIE())\np=util.getAbsolutePos(exportBtn,this.domAgent.container);else\np=util.getAbsolutePosScroll(exportBtn,document.body);if(!this.exportMenu){this.initExportMenu();}\np.y=p.y+exportBtn.offsetHeight;this.exportMenu.dropDown(p.x,p.y,50,100);};OlapQueryViewToolbar.prototype.initExportMenu=function(){if(!this.exportMenu){this.exportMenu=new DropDownBox(this.domAgent.container);this.exportMenu.onCloseUp.subscribe(this.doExportMenuCloseUp,this);this.exportMenu.insertItem(\"EXCEL\",\"EXCEL2003\");this.exportMenu.insertItem(\"WORD\",\"WORD\");this.exportMenu.insertItem(\"PDF\",\"PDF\");this.exportMenu.insertItem(\"CSV\",\"CSV\");this.exportMenu.insertItem(\"TXT\",\"TXT\");this.exportMenu.insertItem(\"MHT\",\"HTML\");}};OlapQueryViewToolbar.prototype.destroy=function(){if(this.exportMenu){this.exportMenu.onCloseUp.unsubscribe(this.doExportMenuCloseUp,this);this.exportMenu.destroy();this.exportMenu=null;}\nif(this.viewMenu){this.viewMenu.destroy();this.viewMenu=null;}\nif(this.chartMenu){this.chartMenu.destroy();this.chartMenu=null;}\nif(this.scrollToolbar)\nthis.scrollToolbar.destroy();this.scrollToolbar=null;this.domAgent=null;};OlapQueryViewToolbar.prototype.doExportMenuCloseUp=function(exportType){var typeId=(exportType&&typeof exportType==\"string\")?exportType:(this.exportMenu?this.exportMenu.selectedId:null);if(!typeId){return;}\nthis.onGetChartCount.fire();this.exportType=typeId;if(typeId==\"EXCEL\"){var data={};data.rowCount=this.allRowCount;data.isPaging=this.isPaging;data.contentType=this.getExportContentType();var dialogConfig={};dialogConfig.title=\"设置导出EXCEL参数\";dialogConfig.size=dialogFactory.size.MIDDLE;dialogConfig.fullName=\"bof.olapquery.olapquery.toolbar.ExportExcelDialog\";dialogConfig.closeBeforeCallback=true;dialogFactory.showDialog(dialogConfig,data,this.doExportDialogCloseUp,this);}else if(typeId==\"WORD\"){if(!this.isPaging){this.onExport.fire(this,\"WORD\");return;}\nvar data={};data.rowCount=this.allRowCount;data.isPaging=this.isPaging;data.contentType=this.getExportContentType();if(data.contentType){this.doExportDialogCloseUp(\"WORD\",{contentType:data.contentType});return;}\nvar dialogConfig={};dialogConfig.title=\"设置导出WORD参数\";dialogConfig.size=dialogFactory.size.MIDDLE;dialogConfig.fullName=\"bof.olapquery.olapquery.toolbar.ExportWordDialog\";dialogConfig.closeBeforeCallback=true;dialogFactory.showDialog(dialogConfig,data,this.doExportDialogCloseUp,this);}else if(typeId==\"PDF\"){if(!this.isPaging){this.onExport.fire(this,\"PDF\");return;}\nvar data={};data.rowCount=this.allRowCount;data.isPaging=this.isPaging;data.contentType=this.getExportContentType();if(data.contentType){this.doExportDialogCloseUp(\"PDF\",{contentType:data.contentType});return;}\nvar dialogConfig={};dialogConfig.title=\"设置导出PDF参数\";dialogConfig.size=dialogFactory.size.MIDDLE;dialogConfig.fullName=\"bof.olapquery.olapquery.toolbar.ExportWordDialog\";dialogConfig.closeBeforeCallback=true;dialogFactory.showDialog(dialogConfig,data,this.doExportDialogCloseUp,this);}else if(typeId==\"CSV\"){var data={};data.rowCount=this.allRowCount;data.delimiter=\",\";data.isPaging=this.isPaging;var dialogConfig={};dialogConfig.title=\"设置导出CSV参数\";dialogConfig.size=dialogFactory.size.MIDDLE;dialogConfig.fullName=\"freequery.query.ExportCSVDialog\";dialogConfig.closeBeforeCallback=true;dialogFactory.showDialog(dialogConfig,data,this.doExportDialogCloseUp,this);}else if(typeId==\"TXT\"){var data={};data.rowCount=this.allRowCount;data.delimiter=\",\";data.isPaging=this.isPaging;var dialogConfig={};dialogConfig.title=\"设置导出TXT参数\";dialogConfig.size=dialogFactory.size.MIDDLE;dialogConfig.fullName=\"freequery.query.ExportTxtDialog\";dialogConfig.closeBeforeCallback=true;dialogFactory.showDialog(dialogConfig,data,this.doExportDialogCloseUp,this);}else if(typeId==\"MHT\"){if(!this.isPaging){this.onExport.fire(this,\"MHT\");return;}\nvar data={};data.rowCount=this.allRowCount;data.isPaging=this.isPaging;data.contentType=this.getExportContentType();if(data.contentType){this.doExportDialogCloseUp(\"MHT\",{contentType:data.contentType});return;}\nvar dialogConfig={};dialogConfig.title=\"设置导出MHT参数\";dialogConfig.size=dialogFactory.size.MIDDLE;dialogConfig.fullName=\"bof.olapquery.olapquery.toolbar.ExportWordDialog\";dialogConfig.closeBeforeCallback=true;dialogFactory.showDialog(dialogConfig,data,this.doExportDialogCloseUp,this);}};OlapQueryViewToolbar.prototype.getExportContentType=function(){var showGrid=this.getViewSetting(\"olapTableTr\").display;var showChart=false;if(this.getViewSetting(\"chartTr\").display&&this.chartCount>0){showChart=true;}\nif(showGrid){if(showChart){return null;}else{return\"gridOnly\";}}else{if(showChart){return\"pageByPage\";}else{return null;}}};OlapQueryViewToolbar.prototype.doExportDialogCloseUp=function(exportType,submitOptions){if(!submitOptions)\nreturn;this.onExport.fire(this,this.exportType,submitOptions);}\nOlapQueryViewToolbar.prototype.doAddChart=function(){this.onAddChart.fire();};OlapQueryViewToolbar.prototype.initChartMenu=function(){if(!this.chartMenu){this.chartMenu=new DropDownBox(this.domAgent.container);this.chartMenu.onCloseUp.subscribe(this.doChartMenuCloseUp,this);this.chartMenu.insertItem(\"chart\",\"图形\");this.chartMenu.insertItem(\"map\",\"flash地图文件路径\");}};OlapQueryViewToolbar.prototype.doChartMenuCloseUp=function(){var typeId=this.chartMenu.selectedId;if(typeId){if(typeId==\"chart\")\nthis.onAddChart.fire();else if(typeId==\"map\")\nthis.onAddMap.fire();}}\nOlapQueryViewToolbar.prototype.fireOnExport=function(){this.onExport.fire(this,\"EXCEL\");}\nOlapQueryViewToolbar.prototype.fireAddChart=function(){this.onAddChart.fire();}\nOlapQueryViewToolbar.prototype.fireOnChangeMode=function(){this.onChangeMode.fire();}\nOlapQueryViewToolbar.prototype.fireAdvancedSetting=function(){this.onAdvancedSetting.fire();}\nOlapQueryViewToolbar.prototype.showToolBar=function(showToolbar){if(!showToolbar){if(this.domAgent.getElementByBofid(\"olapViewToolbarBg\"))\nthis.domAgent.getElementByBofid(\"olapViewToolbarBg\").style.display=\"none\";}else{if(this.domAgent.getElementByBofid(\"olapViewToolbarBg\"))\nthis.domAgent.getElementByBofid(\"olapViewToolbarBg\").style.display=\"\";}}\nOlapQueryViewToolbar.prototype.setButtonEnable=function(bofid,enable){if(this.domAgent.getElementByBofid(bofid))\nthis.domAgent.getElementByBofid(bofid).disabled=!enable;};OlapQueryViewToolbar.prototype.doPrint=function(e){this.onPrint.fire(e);};OlapQueryViewToolbar.prototype.doPropSetting=function(e){this.onPropSetting.fire(e);};OlapQueryViewToolbar.prototype.setViewMenuItemChecked=function(id){var element=this.domAgent.getElementByBofid(id);var tableTr=this.domAgent.getElementByBofid(\"olapTableTr\");if(id==\"olapTableTr\"&&tableTr.cells&&tableTr.cells.length==2){element=tableTr.cells[0];}else if(id==\"chartTr\"&&tableTr.cells&&tableTr.cells.length==2){element=tableTr.cells[1];}\nthis.viewMenu.setItemChecked(id,element.style.display!=\"none\");};OlapQueryViewToolbar.prototype.setViewItemDisplay=function(id,display){var el=this.domAgent.getElementByBofid(id);var tableTr=this.domAgent.getElementByBofid(\"olapTableTr\");if(tableTr.cells&&tableTr.cells.length==2){tableTr.style.display=\"\";}\nif(id==\"olapTableTr\"&&tableTr.cells&&tableTr.cells.length==2){if(display){tableTr.cells[0].style.display=\"\";}else{tableTr.cells[0].style.display=\"none\";}}else if(id==\"chartTr\"&&tableTr.cells&&tableTr.cells.length==2){if(display){tableTr.cells[1].style.display=\"\";}else{tableTr.cells[1].style.display=\"none\";}}else if(id==\"showBtn\"){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"setShowGridButton\",[this.clientId,display]);if(ret&&ret.succeeded){this.onRefreshData.fire();}}else{if(display){el.style.display=\"\";}else{el.style.display=\"none\";}}};OlapQueryViewToolbar.prototype.initScrollToolbar=function(){var toolbarTable=this.domAgent.getElementByBofid(\"toolbarTable\");var ScrollToolbar=jsloader.resolve(\"bof.baseajax.control.ScrollToolbar\");this.scrollToolbar=new ScrollToolbar(toolbarTable);};OlapQueryViewToolbar.prototype.doClearAllHiddenSettings=function(){this.onClearAllHiddenSettings.fire();};OlapQueryViewToolbar.prototype.setIsPaging=function(isPaging){this.isPaging=isPaging;};OlapQueryViewToolbar.prototype.setChartCount=function(chartCount){this.chartCount=chartCount;};OlapQueryViewToolbar.prototype.__doExport=OlapQueryViewToolbar.prototype.doExport;OlapQueryViewToolbar.prototype.doExport=function(p){var exportBtn=this.domAgent.getElementByBofid(\"export\");var p=null;if(domutils.isIE())\np=util.getAbsolutePos(exportBtn,this.domAgent.container);else\np=util.getAbsolutePosScroll(exportBtn,document.body);if(!this.exportMenu){this.initExportMenu();}\np.y=p.y+exportBtn.offsetHeight;this.exportMenu.dropDown(p.x,p.y,80,120);}\nOlapQueryViewToolbar.prototype.__initExportMenu=OlapQueryViewToolbar.prototype.initExportMenu;OlapQueryViewToolbar.prototype.initExportMenu=function(){this.__initExportMenu();if(this.exportMenu){this.exportMenu.insertItem(\"EXCEL2007\",\"EXCEL\");}}\nOlapQueryViewToolbar.prototype.__doExportMenuCloseUp=OlapQueryViewToolbar.prototype.doExportMenuCloseUp;OlapQueryViewToolbar.prototype.doExportMenuCloseUp=function(exportType){this.__doExportMenuCloseUp(exportType);var typeId=(exportType&&typeof exportType==\"string\")?exportType:(this.exportMenu?this.exportMenu.selectedId:null);if(!typeId){return;}\nif(typeId==\"EXCEL2007\"){var data={};data.rowCount=this.allRowCount;data.isPaging=this.isPaging;data.contentType=this.getExportContentType();data.exportType=\"EXCEL2007\";data.showChart=this.showChart();var dialogConfig={};dialogConfig.title=\"设置导出EXCEL2007参数\";dialogConfig.size=dialogFactory.size.MIDDLE;dialogConfig.fullName=\"bof.olapquery.olapquery.toolbar.ExportExcelDialog\";dialogConfig.closeBeforeCallback=true;dialogFactory.showDialog(dialogConfig,data,this.doExportDialogCloseUp,this);}}\nOlapQueryViewToolbar.prototype.showChart=function(){return this.domAgent.getElementByBofid(\"chartTr\").style.display.toUpperCase()!=\"NONE\";};","js/bof/olapquery/olapquery/OlapTable.js":"\nvar PopupMenu=jsloader.resolve(\"freequery.menu.PopupMenu\");var util=jsloader.resolve(\"freequery.common.util\");var dialogFactory=imports(\"freequery.dialog.dialogFactory\").getInstance();var modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var FilterPanels=imports(\"bof.olapquery.control.FilterPanels\");var HResizer=jsloader.resolve(\"bof.baseajax.control.HResizer\");var OlapMetadataService=imports(\"bof.olapquery.OlapMetadataService\");var OlapTable=function(domAgent){this.onClickBackgroundColor=\"#9FB6D1\";this.onClickColor=\"#ffffff\";this.domAgent=domAgent;this.domAgent.registerListenerByBofclass(\"MEMBER\",\"mouseup\",this.showPopupMenuOnMember,this);if(domutils.isFirefox()){this.domAgent.registerListenerByBofclass(\"MEMBER\",\"contextmenu\",this.showPopupMenuOnMember,this);}\nthis.domAgent.registerListenerByDefault(\"click\",this.doOnClick,this);this.domAgent.registerListenerByBofclass(\"MEMBER\",\"mouseover\",this.doOnMemberMouseOver,this);this.domAgent.registerListenerByBofclass(\"MEMBER\",\"mouseout\",this.doOnMemberMouseOut,this);this.domAgent.registerListenerByBofclass(\"HIERARCHY\",\"mouseover\",this.doOnHierarchyMouseOver,this);this.domAgent.registerListenerByBofclass(\"HIERARCHY\",\"mouseout\",this.doOnHierarchyMouseOut,this);this.domAgent.registerListenerByBofclass(\"LEVEL\",\"mouseover\",this.doOnHierarchyMouseOver,this);this.domAgent.registerListenerByBofclass(\"LEVEL\",\"mouseout\",this.doOnHierarchyMouseOut,this);this.domAgent.registerListenerByBofclass(\"OPBUTTON\",\"mouseout\",this.doOnMemberButtonMouseOut,this);this.domAgent.registerListenerByBofclass(\"prevColumnPage\",\"click\",this.doOnPrevColumnPage,this);this.domAgent.registerListenerByBofclass(\"nextColumnPage\",\"click\",this.doOnNextColumnPage,this);this.popupMenu=new PopupMenu(document.body,this);this.orderMemu=this.popupMenu.createMenuItem(\"排序\");this.bASCM=this.orderMemu.createMenuItem(\"升序\",\"BASC\",null,\"img/queryview/OlapOrderBAsc.gif\");this.bDESCM=this.orderMemu.createMenuItem(\"降序\",\"BDESC\",null,\"img/queryview/OlapOrderBDesc.gif\");this.ascM=this.orderMemu.createMenuItem(\"分级升序\",\"ASC\",null,\"img/queryview/OlapOrderAsc.gif\");this.descM=this.orderMemu.createMenuItem(\"分级降序\",\"DESC\",null,\"img/queryview/OlapOrderDesc.gif\");this.cancelM=this.orderMemu.createMenuItem(\"取消排序\",\"CANCEL\",null,\"img/queryview/OlapOrderCancel.gif\");this.filterMemu=this.popupMenu.createMenuItem(\"过滤\");this.filterCancelM=this.filterMemu.createMenuItem(\"取消过滤\",\"CANCELFILTER\",null);this.filterCustomFilterM=this.filterMemu.createMenuItem(\"定制过滤...\",\"CUSTOMFILTER\",null);this.filterTopFiveM=this.filterMemu.createMenuItem(\"前5名\",\"TOPFIVE\",null);this.filterBottomFiveM=this.filterMemu.createMenuItem(\"后5名\",\"BOTTOMFIVE\",null);this.filterTopEightyPerM=this.filterMemu.createMenuItem(\"累计前80%\",\"TOPEIGHTYPER\",null);this.filterBottomTwentyPerM=this.filterMemu.createMenuItem(\"累计后20%\",\"BOTTOMTWENTYPER\",null);this.drillMemu=this.popupMenu.createMenuItem(\"钻取\");this.drillUpM=this.drillMemu.createMenuItem(\"上钻\",\"drillUp\",\"U\");this.drillDownM=this.drillMemu.createMenuItem(\"下钻\",\"drillDown\",\"D\");this.drillLevelM=this.drillMemu.createMenuItem(\"层钻\",\"drillLevel\",\"L\");this.drillLevelSeparatorM=this.drillMemu.createSeparator();this.expandMemberM=this.drillMemu.createMenuItem(\"展开\",\"expandMember\",\"X\");this.collapseMemberM=this.drillMemu.createMenuItem(\"收起\",\"collapseMember\",\"C\");this.collapseMemberSeparatorM=this.drillMemu.createSeparator();this.expandPositionM=this.drillMemu.createMenuItem(\"按位置展开\",\"expandPosition\");this.collapsePositionM=this.drillMemu.createMenuItem(\"按位置收起\",\"collapsePosition\");this.drillToSeparatorM=this.drillMemu.createSeparator();this.drillToM=this.drillMemu.createMenuItem(\"钻到其它...\",\"drillTo\");this.hiddenMemu=this.popupMenu.createMenuItem(\"隐藏\");this.hiddenRow=this.hiddenMemu.createMenuItem(\"隐藏行\",\"HIDDENROW\");this.hiddenColumn=this.hiddenMemu.createMenuItem(\"隐藏列\",\"HIDDENCOLUMN\");this.clearRowHidden=this.hiddenMemu.createMenuItem(\"取消隐藏行\",\"CLEARROWHIDDEN\");this.clearColumnHidden=this.hiddenMemu.createMenuItem(\"取消隐藏列\",\"CLEARCOLUMNHIDDEN\");this.exchangeMenu=this.popupMenu.createMenuItem(\"行列互换\",\"EXCHANGE\");this.subTotalMenu=this.popupMenu.createMenuItem(\"分类汇总\");this.sumM=this.subTotalMenu.createMenuItem(\"维度合计\",\"SUM\");this.avgM=this.subTotalMenu.createMenuItem(\"维度平均值\",\"AVG\");this.maxM=this.subTotalMenu.createMenuItem(\"维度最大值\",\"MAX\");this.minM=this.subTotalMenu.createMenuItem(\"维度最小值\",\"MIN\");this.clearSubTotalSeparatorM=this.subTotalMenu.createSeparator();this.clearSubTotalM=this.subTotalMenu.createMenuItem(\"清除维度汇总\",\"ClearSubTotal\");this.extendMemberMenu=this.popupMenu.createMenuItem(\"添加计算\");this.proportionM=this.extendMemberMenu.createMenuItem(\"添加占比\",\"Proportion\");this.rankM=this.extendMemberMenu.createMenuItem(\"添加排名\",\"Rank\");this.timeSeparatorM=this.extendMemberMenu.createSeparator();this.kibbeeM=this.extendMemberMenu.createMenuItem(\"添加基比\",\"Kibbee\");this.chainCompareM=this.extendMemberMenu.createMenuItem(\"添加环比(前期比)\",\"ChainCompare\");this.prevValueM=this.extendMemberMenu.createMenuItem(\"添加前期值\",\"PrevValue\");this.parallelPeriodValueM=this.extendMemberMenu.createMenuItem(\"添加同期值\",\"CorrespondingPeriodValue\");this.parallelPeriodRatioM=this.extendMemberMenu.createMenuItem(\"添加同期比\",\"CorrespondingPeriodCompare\");this.prevValueGrowthRateM=this.extendMemberMenu.createMenuItem(\"添加前期增长率\",\"PrevValueGrowthRate\");this.periodValueGrowthRateM=this.extendMemberMenu.createMenuItem(\"添加同期增长率\",\"PeriodValueGrowthRate\");this.clearExtendMemberSeparatorM=this.extendMemberMenu.createSeparator();this.setExtendMemberM=this.extendMemberMenu.createMenuItem(\"更多计算设置..\",\"SetFunction\");this.clearExtendMemberM=this.extendMemberMenu.createMenuItem(\"清除维度计算\",\"ClearFunction\");this.propertyMemu=this.popupMenu.createMenuItem(\"属性\",\"PROPERTY\");this.refreshDefineHandler=new CustomEvent();this.refreshChartHandler=new CustomEvent();this.afterRefrshTableHandler=new CustomEvent();this.afterRefreshDataHandler=new CustomEvent();this.setRowCountHandler=new CustomEvent();this.domAgent.registerListenerByBofclass(\"SORTBUTTON\",\"click\",this.showPopupMenuOnSort,this);this.domAgent.registerListenerByBofclass(\"FILTERBUTTON\",\"click\",this.doGridFilter,this);this.domAgent.registerListenerByBofclass(\"OPBUTTON\",\"mouseup\",this.showPopupMenuOnMemberButton,this);this.domAgent.registerListenerByBofclass(\"HIERARCHYOPBUTTON\",\"mouseup\",this.showPopupMenuOnHierarchyButton,this);this.onClick=new CustomEvent();this.onFilter=new CustomEvent();this.onAddSubTotal=new CustomEvent();this.onAddFunction=new CustomEvent();this.onClearSubTotal=new CustomEvent();this.onClearFunction=new CustomEvent();this.onSetFunction=new CustomEvent();this.onRefreshTableStyle=new CustomEvent();this.onExchange=new CustomEvent();this.onDrillTo=new CustomEvent();this.onNextColumnPage=new CustomEvent();this.onPrevColumnPage=new CustomEvent();this.domAgent.registerListenerByBofclass(\"COLUMNPROPBUTTON\",\"click\",this.showColumnProp,this);this.domAgent.registerListenerByBofclass(\"columnHResizeControl\",\"mouseover\",this.colHResizeControl_mouseover_handler,this);this.domAgent.registerListenerByBofclass(\"columnHResizeControl\",\"mouseout\",this.colHResizeControl_mouseout_handler,this);this.domAgent.registerListenerByBofclass(\"columnHResizeControl\",\"mousedown\",this.colHResizeControl_mousedown_handler,this);this.onSetClientConfig=new CustomEvent();this.rightClickEnable=true;};OlapTable.prototype.doOnMemberButtonMouseOver=function(e){};OlapTable.prototype.showMemberButton=function(span){if(this.visibleButton&&this.visibleButton!=span)\nthis.visibleButton.style.visibility=\"hidden\";if(span){this.visibleButton=span;this.visibleButton.style.visibility=\"visible\";}};OlapTable.prototype.hideMemberButton=function(){this.showMemberButton(null);};OlapTable.prototype.doOnMemberButtonMouseOut=function(e){if(e.toElement==e.target.parentNode)\nreturn;else\nthis.hideMemberButton();};OlapTable.prototype.doOnMemberButtonMouseMove=function(e){domutils.stopEvent(e);};OlapTable.prototype.doOnMemberMouseOver=function(e){if(!this.rightClickEnable)\nreturn;var cell=e.target;var table=this;table.__hoveringMemberCell=cell;setTimeout(function(){if(table.__hoveringMemberCell==cell){var list=cell.getElementsByTagName(\"SPAN\");var len=list.length;for(var i=0;i<len;i++){if(list[i].className&&list[i].className.indexOf(\"table-grid-button-sub-menu\")>=0){table.showMemberButton(list[i]);break;}}\ntable.__hoveredMemberCell=cell;}},50);};OlapTable.prototype.doOnMemberMouseOut=function(e){var cell=e.target;if(e.toElement&&e.toElement.parentNode&&e.toElement.parentNode==e.target)\nreturn;var list=cell.getElementsByTagName(\"SPAN\");var len=list.length;for(var i=0;i<len;i++){var span=list[i];if(span.className.indexOf(\"table-grid-button-sub-menu\")>=0&&span.getAttribute(\"canHidden\")==\"true\"){this.hideMemberButton();break;}}};OlapTable.prototype.doOnHierarchyMouseOver=function(e){if(!this.rightClickEnable)\nreturn;var cell=e.target;if(cell.getElementsByTagName(\"SPAN\")[0]){var table=this;table.__hoveringHierarchyCell=cell;setTimeout(function(){if(table.__hoveringHierarchyCell==cell){if(cell.getElementsByTagName(\"SPAN\")[0]){if(cell.getElementsByTagName(\"SPAN\")[0].className.indexOf(\"table-grid-button-sub-menu\")>=0){table.showMemberButton(cell.getElementsByTagName(\"SPAN\")[0]);}}}},50);}};OlapTable.prototype.doOnHierarchyMouseOut=function(e){var cell=e.target;if(e.toElement&&e.toElement.parentNode&&e.toElement.parentNode==e.target)\nreturn;var span=cell.getElementsByTagName(\"SPAN\")[0];if(span){this.hideMemberButton();}};OlapTable.prototype.isDescendantOfOlapGrid=function(element){while(element&&element!=document){if(element.getAttribute(\"bofid\")==\"olap-grid\")\nreturn true;element=element.parentNode;}\nreturn false;};OlapTable.prototype.doOnClick=function(e){if(e&&e.target&&e.target.tagName&&!(e.target.tagName.toUpperCase()==\"TD\"))return;if(!this.isDescendantOfOlapGrid(e.target))return;var cell=e.target;if(!cell.className){var rowMember=null;if(cell.rowsPosition){var rowMemberPath=lang.parseJSON(cell.rowsPosition).members;rowMember=rowMemberPath[rowMemberPath.length-1];var list=new Array();for(var i=0;i<rowMemberPath.length;i++){list.push(rowMemberPath[i].uniqueName);}\nthis.setClickStyle(rowMember,list,false);}\nvar colMember=null;if(cell.columnsPosition){var columnMemberPath=lang.parseJSON(cell.columnsPosition).members;colMember=columnMemberPath[columnMemberPath.length-1];var list=new Array();for(var i=0;i<columnMemberPath.length;i++){list.push(columnMemberPath[i].uniqueName);}\nthis.setClickStyle(colMember,list,true);}\nif(this.oldClickCell){var pageTheme=registry.get(\"pageTheme\");if(!pageTheme||!pageTheme.grid||!pageTheme.grid.gridDataFont)\nthis.oldClickCell.style.fontWeight=\"normal\";}\nthis.oldClickCell=cell;cell.style.fontWeight=\"bold\";}\nvar isClickable=cell.getAttribute(\"isClickable\")==\"true\";if(isClickable){if(cell.getAttribute(\"isSubCell\")==\"true\"){var tr=cell.parentNode;var tbody=tr.parentNode;var table=tbody.parentNode;cell=table.parentNode;}\nif(cell.getAttribute(\"resizeContentTd\")==\"true\"){var tr=cell.parentNode;var tbody=tr.parentNode;var table=tbody.parentNode;cell=table.parentNode;}\nthis.onClick.fire(cell,e);}};OlapTable.prototype.setClickStyle=function(member,memberPath,isColumns){var table=this.domAgent.getElementByBofid(\"olap-grid\");for(var i=0;i<table.rows.length;i++){var row=table.rows[i];for(var j=0;j<row.cells.length;j++){var cell=row.cells[j];if(cell.bofclass==\"MEMBER\"){if(typeof cell.getAttribute(\"un\")==\"undefined\"){continue;}\nif(cell.uniqueName==member.uniqueName&&this.compareList(memberPath,this.getMemberPathFromTd(cell))){if(isColumns){if(this.oldColumnCell){this.setCellBackgroundColor(this.oldColumnCell,this.oldColumnCellBgColor);this.setCellColor(this.oldColumnCell,this.oldColumnCellColor);}\nthis.oldColumnCell=cell;this.oldColumnCellBgColor=cell.style.backgroundColor;this.oldColumnCellColor=cell.style.color;}else{if(this.oldRowCell){this.setCellBackgroundColor(this.oldRowCell,this.oldRowCellBgColor);this.setCellColor(this.oldRowCell,this.oldRowCellColor);}\nthis.oldRowCell=cell;this.oldRowCellBgColor=cell.style.backgroundColor;this.oldRowCellColor=cell.style.color;}\nthis.setCellBackgroundColor(cell,this.onClickBackgroundColor);this.setCellColor(cell,this.onClickColor);return;}}else if(cell.bofclass==\"DATA\"){break;}}}};OlapTable.prototype.setCellColor=function(cell,color){cell.style.color=color;if(cell.firstChild&&cell.firstChild.tagName==\"TABLE\"){var table=cell.firstChild;for(var i=0;i<table.rows.length;i++){var row=table.rows[i];this.setCellColor(row.cells[0],color);}}};OlapTable.prototype.setCellBackgroundColor=function(cell,color){cell.style.backgroundColor=color;if(cell.firstChild&&cell.firstChild.tagName==\"TABLE\"){var table=cell.firstChild;for(var i=0;i<table.rows.length;i++){var row=table.rows[i];for(var j=0;j<row.cells.length;j++){this.setCellBackgroundColor(row.cells[j],color);}}}};OlapTable.prototype.compareList=function(src,dest){return lang.toJSONString(src)==lang.toJSONString(dest);};OlapTable.prototype.clearBoldStyle=function(){var table=this.domAgent.getElementByBofid(\"olap-grid\");for(var i=0;i<table.rows.length;i++){var row=table.rows[i];for(var j=0;j<row.cells.length;j++){var cell=row.cells[j];if(cell.bofclass!=\"DATA\"){cell.style.backgroundColor=\"\";}}}};OlapTable.prototype.setRightClickEnable=function(flag){this.rightClickEnable=flag;}\nOlapTable.prototype.showPopupMenuOnHierarchyButton=function(e){this.e=e;domutils.stopEvent(e);this.clearMenuState();this.restMenuState();this.popupMenu.popup(e);};OlapTable.prototype.showPopupMenuOnMember=function(e){if(e.button!=2){return;}\nif(!this.rightClickEnable)\nreturn;this.e=e;this.clearMenuState();this.tdCurrentMember=e.target;if(e.target.getAttribute(\"isSubCell\")==\"true\"){var tr=e.target.parentNode;var tbody=tr.parentNode;var table=tbody.parentNode;this.tdCurrentMember=table.parentNode;}\nif(this.tdCurrentMember.getAttribute(\"resizeContentTd\")==\"true\"){var tr=this.tdCurrentMember.parentNode;var tbody=tr.parentNode;var table=tbody.parentNode;this.tdCurrentMember=table.parentNode;}\nvar uniqueName=this.getCurrentMemberName();if(uniqueName.indexOf(\"BOF_Subtotal\")>=0||uniqueName.indexOf(\"BOF_Func_\")>=0)\nreturn;var memberPath=this.getCurrentMemberPath();if(!memberPath){return;}\nthis.restMenuState();this.popupMenu.popup(e);};OlapTable.prototype.showPopupMenuOnMemberButton=function(e){domutils.stopEvent(e);this.clearMenuState();this.e=e;this.tdCurrentMember=e.target.parentNode;if(this.tdCurrentMember.getAttribute(\"isSubCell\")==\"true\"){var tr=this.tdCurrentMember.parentNode;var tbody=tr.parentNode;var table=tbody.parentNode;this.tdCurrentMember=table.parentNode;}\nif(this.tdCurrentMember.getAttribute(\"resizeContentTd\")==\"true\"){var tr=this.tdCurrentMember.parentNode;var tbody=tr.parentNode;var table=tbody.parentNode;this.tdCurrentMember=table.parentNode;}\nvar uniqueName=this.getCurrentMemberName();if(uniqueName.indexOf(\"BOF_Subtotal\")>=0||uniqueName.indexOf(\"BOF_Func_\")>=0)\nreturn;this.restMenuState();this.popupMenu.popup(e);};OlapTable.prototype.restMenuState=function(){if(this.e&&this.e.target&&this.e.target.parentNode&&(this.e.target.parentNode.bofclass==\"HIERARCHY\"||this.e.target.parentNode.bofclass==\"LEVEL\")){this.propertyMemu.setVisibility(true);return;}\nvar uniqueName=this.getCurrentMemberName();if(uniqueName.indexOf(\"BOF_Subtotal\")>=0||uniqueName.indexOf(\"BOF_Func_\")>=0){return;}\nvar hasParent=this._unMapObj[this.tdCurrentMember.getAttribute(\"un\")].at&1;var hasChild=this._unMapObj[this.tdCurrentMember.getAttribute(\"un\")].at&2;if(this.tdCurrentMember.getAttribute(\"lastColumnCell\")==\"yes\"){this.orderMemu.setVisibility(true);this.ascM.setVisibility(true);this.descM.setVisibility(true);this.bASCM.setVisibility(true);this.bDESCM.setVisibility(true);this.cancelM.setVisibility(true);this.filterMemu.setVisibility(true);this.filterCancelM.setVisibility(true);this.filterCustomFilterM.setVisibility(true);this.filterTopFiveM.setVisibility(true);this.filterBottomFiveM.setVisibility(true);this.filterTopEightyPerM.setVisibility(true);this.filterBottomTwentyPerM.setVisibility(true);this.propertyMemu.setVisibility(true);}\nthis.drillMemu.setVisibility(true);this.drillUpM.setVisibility(true);this.drillLevelSeparatorM.setVisibility(true);this.collapseMemberSeparatorM.setVisibility(true);this.drillDownM.setVisibility(true);this.drillLevelM.setVisibility(true);this.expandMemberM.setVisibility(true);this.collapseMemberM.setVisibility(true);var memberPath=this.getCurrentMemberPath();this.expandPositionM.setVisibility(true);this.collapsePositionM.setVisibility(true);this.drillToSeparatorM.setVisibility(true);this.drillToM.setVisibility(true);if(this.tdCurrentMember.getElementsByTagName(\"SPAN\")[0]){if(util.checkFunctionValid(\"BROWSE_ANALYSISREPORT_SUBTOTAL\")){this.subTotalMenu.setVisibility(true);this.sumM.setVisibility(true);this.avgM.setVisibility(true);this.maxM.setVisibility(true);this.minM.setVisibility(true);this.clearSubTotalSeparatorM.setVisibility(true);this.clearSubTotalM.setVisibility(true);}\nthis.extendMemberMenu.setVisibility(true);this.proportionM.setVisibility(true);this.rankM.setVisibility(true);var hierarchyName=this._hiMap[this._unMapObj[this.tdCurrentMember.getAttribute(\"un\")].hi].n;if((this.isHierarchyOnAxis(0,hierarchyName)&&this.isTimeOnAxis(1))||(this.isHierarchyOnAxis(1,hierarchyName)&&this.isTimeOnAxis(0))){this.timeSeparatorM.setVisibility(true);this.kibbeeM.setVisibility(true);this.chainCompareM.setVisibility(true);this.prevValueM.setVisibility(true);this.parallelPeriodValueM.setVisibility(true);this.parallelPeriodRatioM.setVisibility(true);this.prevValueGrowthRateM.setVisibility(true);this.periodValueGrowthRateM.setVisibility(true);}\nthis.clearExtendMemberSeparatorM.setVisibility(true);this.clearExtendMemberM.setVisibility(true);this.setExtendMemberM.setVisibility(true);}\nthis.drillUpM.setEnabled(hasParent);this.drillDownM.setEnabled(hasChild);this.expandMemberM.setEnabled(hasChild);this.expandPositionM.setEnabled(hasChild);this.collapseMemberM.setEnabled(hasChild);this.collapsePositionM.setEnabled(hasChild);this.exchangeMenu.setVisibility(true);this.drillLevelM.setEnabled(true);if(this.tdCurrentMember.getAttribute(\"lastColumnCell\")==\"yes\"){this.hiddenMemu.setVisibility(true);this.hiddenColumn.setVisibility(true);this.clearColumnHidden.setVisibility(true);}\nif(this.tdCurrentMember.getAttribute(\"lastRowCell\")==\"yes\"){this.hiddenMemu.setVisibility(true);this.hiddenRow.setVisibility(true);this.clearRowHidden.setVisibility(true);}}\nOlapTable.prototype.clearMenuState=function(){this.drillMemu.setVisibility(false);this.drillLevelSeparatorM.setVisibility(false);this.collapseMemberSeparatorM.setVisibility(false);this.drillUpM.setVisibility(false);this.drillDownM.setVisibility(false);this.drillLevelM.setVisibility(false);this.expandMemberM.setVisibility(false);this.collapseMemberM.setVisibility(false);this.expandPositionM.setVisibility(false);this.collapsePositionM.setVisibility(false);this.drillToSeparatorM.setVisibility(false);this.drillToM.setVisibility(false);this.exchangeMenu.setVisibility(false);this.subTotalMenu.setVisibility(false);this.sumM.setVisibility(false);this.avgM.setVisibility(false);this.maxM.setVisibility(false);this.minM.setVisibility(false);this.clearSubTotalSeparatorM.setVisibility(false);this.clearSubTotalM.setVisibility(false);this.extendMemberMenu.setVisibility(false);this.proportionM.setVisibility(false);this.rankM.setVisibility(false);this.timeSeparatorM.setVisibility(false);this.kibbeeM.setVisibility(false);this.chainCompareM.setVisibility(false);this.prevValueM.setVisibility(false);this.parallelPeriodValueM.setVisibility(false);this.parallelPeriodRatioM.setVisibility(false);this.prevValueGrowthRateM.setVisibility(false);this.periodValueGrowthRateM.setVisibility(false);this.clearExtendMemberSeparatorM.setVisibility(false);this.clearExtendMemberM.setVisibility(false);this.setExtendMemberM.setVisibility(false);this.orderMemu.setVisibility(false);this.ascM.setVisibility(false);this.descM.setVisibility(false);this.bASCM.setVisibility(false);this.bDESCM.setVisibility(false);this.cancelM.setVisibility(false);this.filterMemu.setVisibility(false);this.filterCancelM.setVisibility(false);this.filterCustomFilterM.setVisibility(false);this.filterTopFiveM.setVisibility(false);this.filterBottomFiveM.setVisibility(false);this.filterTopEightyPerM.setVisibility(false);this.filterBottomTwentyPerM.setVisibility(false);this.hiddenMemu.setVisibility(false);this.hiddenRow.setVisibility(false);this.hiddenColumn.setVisibility(false);this.clearRowHidden.setVisibility(false);this.clearColumnHidden.setVisibility(false);this.propertyMemu.setVisibility(false);}\nOlapTable.prototype.showPopupMenuOnSort=function(e){this.clearMenuState();this.ascM.setVisibility(true);this.descM.setVisibility(true);this.bASCM.setVisibility(true);this.bDESCM.setVisibility(true);this.cancelM.setVisibility(true);this.tdCurrentMember=e.target.parentNode.parentNode;if(e.target.getAttribute(\"isSubCell\")==\"true\"){var tr=e.target.parentNode;var tbody=tr.parentNode;var table=tbody.parentNode;this.tdCurrentMember=table.parentNode;}\nif(this.tdCurrentMember.getAttribute(\"resizeContentTd\")==\"true\"){var tr=this.tdCurrentMember.parentNode;var tbody=tr.parentNode;var table=tbody.parentNode;this.tdCurrentMember=table.parentNode;}\nthis.sortBtn=e.target;this.popupMenu.popup(e);};OlapTable.prototype.destroy=function(){if(this.popupMenu){this.popupMenu.destroy();this.popupMenu=null;}\nif(this.filterPanels){this.filterPanels.destroy();this.filterPanels=null;}};OlapTable.prototype.doCmd=function(cmd){if(cmd==\"drillUp\"){this.drillUp();}else if(cmd==\"drillDown\"){this.drillDown();}else if(cmd==\"drillLevel\"){this.showDrillLevelDialog();}else if(cmd==\"expandMember\"){this.expandMember();}else if(cmd==\"collapseMember\"){this.collapseMember();}else if(cmd==\"expandPosition\"){this.expandPosition();}else if(cmd==\"collapsePosition\"){this.collapsePosition();}else if(cmd==\"ASC\"||cmd==\"DESC\"||cmd==\"BASC\"||cmd==\"BDESC\"||cmd==\"CANCEL\"){this.sort(cmd);}else if(cmd==\"SUM\"||cmd==\"AVG\"||cmd==\"MAX\"||cmd==\"MIN\"){this.addSubTotal(cmd);}else if(cmd==\"ClearSubTotal\"){this.clearSubTotal();}else if(cmd==\"Proportion\"||cmd==\"Rank\"||cmd==\"PrevValue\"||cmd==\"ChainCompare\"||cmd==\"Kibbee\"||cmd==\"CorrespondingPeriodValue\"||cmd==\"CorrespondingPeriodCompare\"||cmd==\"PrevValueGrowthRate\"||cmd==\"PeriodValueGrowthRate\"){this.addFunction(cmd);}else if(cmd==\"ClearFunction\"){this.clearFunction();}else if(cmd==\"SetFunction\"){this.setFunction();}else if(cmd==\"CANCELFILTER\"||cmd==\"CUSTOMFILTER\"||cmd==\"TOPFIVE\"||cmd==\"BOTTOMFIVE\"||cmd==\"TOPEIGHTYPER\"||cmd==\"BOTTOMTWENTYPER\"){var memberPath=this.getCurrentMemberPath();if(cmd==\"CANCELFILTER\"){this.doFilterServiceCall(memberPath,null);}else if(cmd==\"CUSTOMFILTER\"){var dialogConfig={title:\"定制过滤\",fullName:\"bof.olapquery.control.CustomFilterDialog\"};dialogFactory.showDialog(dialogConfig,[this.clientId,memberPath],this.customFilterCallBack,this);}else{var obj=new Object();obj.memberPath=memberPath;obj.axis=0;obj.groupType=\"AND\";obj.operator1=\"\";obj.value1=\"\";obj.operator2=\"\";obj.value2=\"\";if(cmd==\"TOPFIVE\"){obj.operator1=\"TOPN\";obj.value1=\"5\";this.doFilterServiceCall(memberPath,obj);}else if(cmd==\"TOP10\"){obj.operator1=\"TOPN\";obj.value1=\"10\";this.doFilterServiceCall(memberPath,obj);}else if(cmd==\"TOPEIGHTYPER\"){obj.operator1=\"TOPN\";obj.value1=\"80%\";this.doFilterServiceCall(memberPath,obj);}else if(cmd==\"BOTTOMFIVE\"){obj.operator1=\"BOTTOMN\";obj.value1=\"5\";this.doFilterServiceCall(memberPath,obj);}else if(cmd==\"BOTTOM10\"){obj.operator1=\"BOTTOMN\";obj.value1=\"10\";this.doFilterServiceCall(memberPath,obj);}else if(cmd==\"BOTTOMTWENTYPER\"){obj.operator1=\"BOTTOMN\";obj.value1=\"20%\";this.doFilterServiceCall(memberPath,obj);}}}else if(cmd==\"HIDDENROW\"){var memberPath=this.getCurrentMemberPath();if(!memberPath){return;}\nvar hiddenSetting={memberPath:memberPath,axis:\"ROW\"};util.remoteInvokeEx(\"OlapQueryClientService\",\"addHiddenSetting\",[this.clientId,hiddenSetting],this.afterRefreshData,this);}else if(cmd==\"HIDDENCOLUMN\"){var memberPath=this.getCurrentMemberPath();if(!memberPath){return;}\nvar hiddenSetting={memberPath:memberPath,axis:\"COLUMN\"};util.remoteInvokeEx(\"OlapQueryClientService\",\"addHiddenSetting\",[this.clientId,hiddenSetting],this.afterRefreshData,this);}else if(cmd==\"CLEARROWHIDDEN\"){util.remoteInvokeEx(\"OlapQueryClientService\",\"clearRowHiddenSettings\",[this.clientId],this.afterRefreshData,this);}else if(cmd==\"CLEARCOLUMNHIDDEN\"){util.remoteInvokeEx(\"OlapQueryClientService\",\"clearColumnHiddenSettings\",[this.clientId],this.afterRefreshData,this);}else if(cmd==\"EXCHANGE\"){this.onExchange.fire();}else if(cmd==\"drillTo\"){var hierarchyName=this._hiMap[this._unMapObj[this.tdCurrentMember.getAttribute(\"un\")].hi].n;this.onDrillTo.fire(hierarchyName);}else if(cmd==\"PROPERTY\"){this.showColumnProp();}else{throw new Error(\"Unkown command: \"+cmd);}};OlapTable.prototype.setFunction=function(){var dialogConfig={};dialogConfig.title=\"设置计算成员\";dialogConfig.forceCallback=true;dialogConfig.fullName=\"bof.olapquery.olapquery.function.FunctionSettingDialog\";dialogConfig.size=dialogFactory.size.LARGE;dialogFactory.showDialog(dialogConfig,this.clientId,this.afterSetFunction,this);}\nOlapTable.prototype.afterSetFunction=function(flag){if(flag){this.onSetFunction.fire();}}\nOlapTable.prototype.addSubTotal=function(calculate){if(this.tdCurrentMember){var hierarchyName=this._hiMap[this._unMapObj[this.tdCurrentMember.getAttribute(\"un\")].hi].n;this.onAddSubTotal.fire(hierarchyName,calculate);}}\nOlapTable.prototype.addFunction=function(calculate){var obj=new Object();if(this.tdCurrentMember){obj.calculate=calculate;obj.memberName=this.getCurrentMemberName();obj.memberCaption=obj.memberName;if(obj.memberCaption==null||obj.memberCaption==\"\")\nobj.memberCaption=obj.memberName;var hierarchyName=this._hiMap[this._unMapObj[this.tdCurrentMember.getAttribute(\"un\")].hi].n;obj.hierarchyName=hierarchyName;obj.timeMemberName=null;var timeHierarchy=null;if(calculate==\"PrevValue\"||calculate==\"ChainCompare\"||calculate==\"Kibbee\"||calculate==\"CorrespondingPeriodValue\"||calculate==\"CorrespondingPeriodCompare\"||calculate==\"PrevValueGrowthRate\"||calculate==\"PeriodValueGrowthRate\"){var axis=0;if(this.isHierarchyOnAxis(0,hierarchyName))\naxis=1;else if(this.isHierarchyOnAxis(1,hierarchyName))\naxis=0;var timeHierarchyList=this.getTimeHierarchyList(axis);if(timeHierarchyList.length==0)\nreturn;else if(timeHierarchyList.length==1){timeHierarchy=timeHierarchyList.pop();obj.timeHierarchy=timeHierarchy;}else{var data={};data[0]=timeHierarchyList;data[1]=obj;var dialogConfig={};dialogConfig.title=\"选择时间维度\";dialogConfig.forceCallback=true;dialogConfig.fullName=\"bof.olapquery.olapquery.function.SelectTimeHierarchyDialog\";dialogConfig.dialogType=\"modal\";dialogFactory.showDialog(dialogConfig,data,this.fireAddFunction,this);return;}}\nthis.fireAddFunction(true,obj);}}\nOlapTable.prototype.fireAddFunction=function(flag,obj){if(flag){if(obj.calculate==\"Kibbee\"&&obj.timeMemberName==null){this.selectTimeMember(obj);return;}\nif((obj.calculate==\"CorrespondingPeriodValue\"||obj.calculate==\"CorrespondingPeriodCompare\"||obj.calculate==\"PeriodValueGrowthRate\")&&obj.timeLevelName==null){this.selectTimeLevel(obj);return;}\nthis.onAddFunction.fire(obj.memberName,obj.memberCaption,obj.hierarchyName,obj.hierarchyCaption,obj.dimension,obj.timeHierarchy,obj.timeMemberName,obj.timeMemberCaption,obj.calculate,obj);}}\nOlapTable.prototype.selectTimeMember=function(obj){var hier={name:obj.timeHierarchy,selections:[]}\nvar dialogConfig={title:\"选择基比时间\",size:dialogFactory.size.LARGE,forceCallback:true,dialogType:\"modal\",fullName:\"bof.olapquery.olapquery.function.SelectTimeMemberDialog\"};dialogFactory.showDialog(dialogConfig,[this.cubeId,hier,false,obj],this.fireAddFunction,this);};OlapTable.prototype.clearFunction=function(){if(this.tdCurrentMember){var hierarchyName=this._hiMap[this._unMapObj[this.tdCurrentMember.getAttribute(\"un\")].hi].n;this.onClearFunction.fire(hierarchyName);}}\nOlapTable.prototype.clearSubTotal=function(){if(this.tdCurrentMember){var hierarchyName=this._hiMap[this._unMapObj[this.tdCurrentMember.getAttribute(\"un\")].hi].n;this.onClearSubTotal.fire(hierarchyName);}}\nOlapTable.prototype.sort=function(cmd){var memberPath=this.getCurrentMemberPath();if(!memberPath){return;}\nvar sorting=true;if(cmd==\"CANCEL\"){sorting=false;}\nvar sortMode=1;if(cmd==\"ASC\"){sortMode=1;}else if(cmd==\"DESC\"){sortMode=2;}else if(cmd==\"BASC\"){sortMode=3;}else if(cmd==\"BDESC\"){sortMode=4;}\nutil.remoteInvokeEx(\"OlapQueryClientService\",\"sort\",[this.clientId,sorting,0,sortMode,memberPath],this.afterRefreshData,this);};OlapTable.prototype.getCurrentMemberName=function(){if(this.tdCurrentMember){var un=this.tdCurrentMember.getAttribute(\"un\");return this._unMapObj[un].un;}else if(this.currentMember){return this.currentMember;}else{return null;}};OlapTable.prototype.getMemberPathFromTd=function(td){if(td.className.indexOf(\"olap-grid-left-cell\")>=0){var path=new Array();while(td&&typeof td.getAttribute(\"un\")!=\"undefined\"){path.push(this._unMapObj[td.getAttribute(\"un\")].un);var ptd=td.previousSibling;var prevHierIndex=this._unMapObj[td.getAttribute(\"un\")].hi;while(ptd&&typeof ptd.getAttribute(\"un\")!=\"undefined\"&&prevHierIndex==this._unMapObj[ptd.getAttribute(\"un\")].hi)\nptd=ptd.previousSibling;if(!ptd){var rowSpan=1;do{var tr=td.parentNode.previousSibling;if(tr){td=tr.firstChild;}else\ntd=null;}while(td&&(td.rowSpan<++rowSpan||typeof td.getAttribute(\"un\")==\"undefined\"||this._unMapObj[td.getAttribute(\"un\")].hi==prevHierIndex));if(td){while(td&&td.rowSpan>=rowSpan)\ntd=td.nextSibling;while(td&&typeof typeof td.getAttribute(\"un\")!=\"undefined\"&&this._unMapObj[td.getAttribute(\"un\")].hi==prevHierIndex)\ntd=td.previousSibling;}}else\ntd=ptd;}\nvar ret=new Array();for(var i=path.length-1;i>=0;i--)\nret.push(path[i]);return ret;}else{var path=new Array();var tableBody=td.parentNode.parentNode;var tempTd=tableBody.rows[0].cells[0];while(tempTd&&typeof tempTd.getAttribute(\"un\")==\"undefined\"){tempTd=tempTd.nextSibling;}\nvar prevRowList=new Array();var tempTdList=new Array();var colSpanList=new Array();var colSpan=0;var parentColSpan=0;var maxSpan=0;var obj=null;var rowId=-1;if(tempTd){do{parentColSpan=0;if(tempTd.parentNode.previousSibling){rowId=this.getRowId(tempTd.parentNode.previousSibling);if(colSpanList[rowId])\nparentColSpan=colSpanList[rowId];}\nrowId=this.getRowId(tempTd.parentNode);colSpan=(colSpanList[rowId])?(colSpanList[rowId]):parentColSpan;maxSpan=0;if(prevRowList.length>0)\nmaxSpan=parentColSpan+prevRowList[prevRowList.length-1].colSpan;if(maxSpan>0&&colSpan+tempTd.colSpan>maxSpan){rowId=this.getRowId(tempTd.parentNode);tempTdList[rowId]=tempTd.previousSibling;tempTd=this.popTd(prevRowList,colSpanList);if(tempTd){tempTd=tempTd.nextSibling;continue;}else\nbreak;}\nif(tempTd.getAttribute(\"un\")){var hi=this._unMapObj[tempTd.getAttribute(\"un\")].hi;for(var i=0;i<path.length;i++){if(path[i].hi==hi){path.splice(i,path.length-i);break;}}\npath[path.length]=this._unMapObj[tempTd.getAttribute(\"un\")];}\nif(tempTd==td){td.trueColSpanBegin=colSpan;break;}else{if(tempTd.rowSpan>1){obj=tempTd.parentNode.nextSibling;for(var i=1;i<tempTd.rowSpan;i++){obj=obj.nextSibling;}}else\nobj=tempTd.parentNode.nextSibling;if(obj&&obj.firstChild&&obj.firstChild.className.indexOf(\"olap-grid-left-cell\")==-1){prevRowList.push(tempTd);rowId=this.getRowId(obj);tempTd=((tempTdList[rowId])?tempTdList[rowId].nextSibling:obj.firstChild);if(!tempTd){tempTd=this.popTd(prevRowList,colSpanList);if(tempTd)\ntempTd=tempTd.nextSibling;}}else{this.addColSpanByRowSpan(tempTd,colSpanList);rowId=this.getRowId(tempTd.parentNode);colSpanList[rowId]=((colSpanList[rowId])?(colSpanList[rowId]):0)+tempTd.colSpan;tempTd=tempTd.nextSibling;if(!tempTd){tempTd=this.popTd(prevRowList,colSpanList);if(tempTd)\ntempTd=tempTd.nextSibling;}}}}while(tempTd)}\nvar ret=new Array();for(var i=0;i<path.length;i++)\nret.push(path[i].un);return ret;}}\nOlapTable.prototype.addColSpanByRowSpan=function(tempTd,colSpanList){var obj=null;if(tempTd.rowSpan>1){obj=tempTd.parentNode.nextSibling;for(var i=1;i<tempTd.rowSpan;i++){rowId=this.getRowId(obj);colSpanList[rowId]=((colSpanList[rowId])?(colSpanList[rowId]):0)+tempTd.colSpan;obj=obj.nextSibling;}}}\nOlapTable.prototype.popTd=function(prevRowList,colSpanList){var tempTd=null;var obj=null;do{tempTd=prevRowList.pop();if(!tempTd)\nbreak;this.addColSpanByRowSpan(tempTd,colSpanList);obj=tempTd.parentNode;rowId=this.getRowId(obj);colSpanList[rowId]=((colSpanList[rowId])?(colSpanList[rowId]):0)+tempTd.colSpan;}while(tempTd&&!tempTd.nextSibling)\nreturn tempTd;}\nOlapTable.prototype.getRowId=function(tr){var tableBody=tr.parentNode;for(var i=0;i<tableBody.rows.length;i++){var row=tableBody.rows[i];if(row==tr)\nreturn i;}}\nOlapTable.prototype.getCurrentMemberPath=function(){if(this.tdCurrentMember){var td=this.tdCurrentMember;return this.getMemberPathFromTd(td);}else if(this.currentMemberPath)\nreturn this.currentMemberPath;else\nreturn null;};OlapTable.prototype.getMemberObjPathFromTd=function(td){if(td.className.indexOf(\"olap-grid-left-cell\")>=0){var path=new Array();while(td&&typeof td.getAttribute(\"un\")!=\"undefined\"){path.push(this._unMapObj[td.getAttribute(\"un\")]);var ptd=td.previousSibling;var prevHierIndex=this._unMapObj[td.getAttribute(\"un\")].hi;while(ptd&&typeof ptd.getAttribute(\"un\")!=\"undefined\"&&prevHierIndex==this._unMapObj[ptd.getAttribute(\"un\")].hi)\nptd=ptd.previousSibling;if(!ptd){var rowSpan=1;do{var tr=td.parentNode.previousSibling;if(tr){td=tr.firstChild;}else\ntd=null;}while(td&&(td.rowSpan<++rowSpan||typeof td.getAttribute(\"un\")==\"undefined\"||this._unMapObj[td.getAttribute(\"un\")].hi==prevHierIndex));if(td){while(td&&td.rowSpan>=rowSpan)\ntd=td.nextSibling;while(td&&typeof typeof td.getAttribute(\"un\")!=\"undefined\"&&this._unMapObj[td.getAttribute(\"un\")].hi==prevHierIndex)\ntd=td.previousSibling;}}else\ntd=ptd;}\nvar ret=new Array();for(var i=path.length-1;i>=0;i--)\nret.push(path[i]);return ret;}else{var path=new Array();var colSpan=0;var ptd=td;while(ptd&&typeof ptd.getAttribute(\"un\")!=\"undefined\"){colSpan+=ptd.colSpan;ptd=ptd.previousSibling;}\nvar prevHierIndex=null;do{if(td.getAttribute(\"un\")&&this._unMapObj[td.getAttribute(\"un\")].hi!=prevHierIndex){path.push(this._unMapObj[td.getAttribute(\"un\")]);prevHierIndex=this._unMapObj[td.getAttribute(\"un\")].hi;}\nvar tr=td.parentNode.previousSibling;if(tr){td=tr.firstChild;while(td&&typeof td.getAttribute(\"un\")==\"undefined\")\ntd=td.nextSibling;if(td){var span=td.colSpan;while(td&&span<colSpan){td=td.nextSibling;if(td)\nspan+=td.colSpan;}}}else\ntd=null;}while(td&&typeof td.getAttribute(\"un\")!=\"undefined\");var ret=new Array();for(var i=path.length-1;i>=0;i--)\nret.push(path[i]);return ret;}}\nOlapTable.prototype.applyMdx=function(){var mdx=prompt(\"Input 2 MDX: \",\"select [Promotion].[Promotions].[All Promotions] on columns,([Customer].[Customer Geography].[All Customers], [Product].[Product Categories].[All Products].children) on rows from [Adventure Works] where ([Measures].[Reseller Tax Amount])\");if(!mdx){return;}\nutil.remoteInvokeEx(\"OlapQueryClientService\",\"applyMdx\",[this.clientId,mdx],this.afterRefreshData,this);};OlapTable.prototype.refreshData=function(callback,that){this.olapQueryView=that;if(this.olapQueryView.getPageId()){var result=util.remoteInvokeEx(\"OlapQueryClientService\",\"refreshDataInPage\",[this.clientId,this.olapQueryView.getPageId()],this.afterRefreshData,this);}else{var result=util.remoteInvokeEx(\"OlapQueryClientService\",\"refreshData\",[this.clientId],this.afterRefreshData,this);}};OlapTable.prototype.afterRefreshData=function(result){if(result.succeeded){this.refresh(result.result);this.setRowCountHandler.fire(this,result.rowCount);}else{this.refreshDefineHandler.fire();modalWindow.showServerError(result);}\nthis.afterRefreshDataHandler.fire();}\nOlapTable.prototype.directToPage=function(pageNumber,callback,that){var pageId=that.getPageId();if(!pageId){pageId=null;}\nvar result=util.remoteInvokeEx(\"OlapQueryClientService\",\"directToPageInPage\",[this.clientId,pageNumber,pageId],this.afterRefreshData,this);};OlapTable.prototype.drillUp=function(){var memberName=this.getCurrentMemberName();if(!memberName){return;}\nutil.remoteInvokeEx(\"OlapQueryClientService\",\"drillUp\",[this.clientId,memberName],this.afterRefreshData,this);};OlapTable.prototype.drillDown=function(){var memberName=this.getCurrentMemberName();if(!memberName){return;}\nutil.remoteInvokeEx(\"OlapQueryClientService\",\"drillDown\",[this.clientId,memberName],this.afterRefreshData,this);};OlapTable.prototype.expandMember=function(){var memberName=this.getCurrentMemberName();if(!memberName){return;}\nutil.remoteInvokeEx(\"OlapQueryClientService\",\"expandMember\",[this.clientId,memberName],this.afterRefreshData,this);};OlapTable.prototype.collapseMember=function(){var memberName=this.getCurrentMemberName();if(!memberName){return;}\nutil.remoteInvokeEx(\"OlapQueryClientService\",\"collapseMember\",[this.clientId,memberName],this.afterRefreshData,this);};OlapTable.prototype.setCurrentHierarchy=function(value){this.currentHierarchy=value;};OlapTable.prototype.getCurrentHierarchyName=function(){if(this.tdCurrentMember){var hierarchyName=this._hiMap[this._unMapObj[this.tdCurrentMember.getAttribute(\"un\")].hi].n;return hierarchyName}else if(this.currentHierarchy){return this.currentHierarchy;}else{return null;}};OlapTable.prototype.showDrillLevelDialog=function(flag){var hierName=this.getCurrentHierarchyName();if(!hierName){return;}\nvar memberName=this.getCurrentMemberName();if(!memberName){return;}\nvar isCalculated=false;if(typeof flag==\"undefined\")\nisCalculated=this._unMapObj[this.tdCurrentMember.getAttribute(\"un\")].at&4;else\nisCalculated=flag==\"true\";var dialogConfig={};dialogConfig.title=\"选择层钻\";dialogConfig.size=dialogFactory.size.MIDDLE;dialogConfig.fullName=\"bof.olapquery.olapquery.DrillLevelDialog\";dialogConfig.closeBeforeCallback=true;dialogFactory.showDialog(dialogConfig,[this.cubeId,hierName,memberName,isCalculated],this.drillLevel,this);};OlapTable.prototype.drillLevel=function(memberName,levelName,flag){var thisMemberOnly=false;if(flag){thisMemberOnly=true;}\nif(memberName&&levelName){util.remoteInvokeEx(\"OlapQueryClientService\",\"drillLevel\",[this.clientId,memberName,levelName,thisMemberOnly],this.afterRefreshData,this);}};OlapTable.prototype.expandPosition=function(){var memberPath=this.getCurrentMemberPath();if(!memberPath){return;}\nutil.remoteInvokeEx(\"OlapQueryClientService\",\"expandPosition\",[this.clientId,memberPath],this.afterRefreshData,this);};OlapTable.prototype.collapsePosition=function(){var memberPath=this.getCurrentMemberPath();if(!memberPath){return;}\nutil.remoteInvokeEx(\"OlapQueryClientService\",\"collapsePosition\",[this.clientId,memberPath],this.afterRefreshData,this);};OlapTable.prototype.refreshCallBack=function(){};OlapTable.prototype.refresh=function(result){this._unMapObj=null;this.rowCount=result.rowCount;this.domAgent.refreshPart(\"olapTable\",result.html);var table=this.domAgent.getElementByBofid(\"olap-grid\");var jmap=lang.parseJSON(table.tBodies[1].getAttribute(\"jmap\"));this._unMapObj=jmap[0]\nthis._hiMap=jmap[1];this._rowHierCount=jmap[2];this.resetTableWidth();this.refreshDefineHandler.fire();this.refreshChartHandler.fire(result.chartOptionsList);this.onRefreshTableStyle.fire();this.afterRefrshTableHandler.fire();this.setRowCountHandler.fire(this,result.rowCount);};OlapTable.prototype.setClientId=function(clientId){this.clientId=clientId;};OlapTable.prototype.setCubeId=function(cubeId){this.cubeId=cubeId;};OlapTable.prototype.setCurrentMember=function(memberUniqueName){if(memberUniqueName){if(this.tdCurrentMember)\nthis.tdCurrentMember=null;this.currentMember=memberUniqueName;}}\nOlapTable.prototype.setCurrentMemberPath=function(memberPath){if(memberPath){if(this.tdCurrentMember)\nthis.tdCurrentMember=null;this.currentMemberPath=memberPath;}}\nOlapTable.prototype.doGridFilter=function(e){this.clearMenuState();this.filterCancelM.setVisibility(true);this.filterCustomFilterM.setVisibility(true);this.filterTopFiveM.setVisibility(true);this.filterBottomFiveM.setVisibility(true);this.filterTopEightyPerM.setVisibility(true);this.filterBottomTwentyPerM.setVisibility(true);this.tdCurrentMember=e.target.parentNode.parentNode;if(e.target.getAttribute(\"isSubCell\")==\"true\"){var tr=e.target.parentNode;var tbody=tr.parentNode;var table=tbody.parentNode;this.tdCurrentMember=table.parentNode;}\nif(this.tdCurrentMember.getAttribute(\"resizeContentTd\")==\"true\"){var tr=this.tdCurrentMember.parentNode;var tbody=tr.parentNode;var table=tbody.parentNode;this.tdCurrentMember=table.parentNode;}\nthis.popupMenu.popup(e);};OlapTable.prototype.doFilterCloseUp=function(filter,itemClick){var memberPath=this.getCurrentMemberPath();var selectedId=filter.getSelectedId();if(selectedId==\"CANCEL\"){this.doFilterServiceCall(memberPath,null);}else if(selectedId==\"CUSTOM\"){var dialogConfig={title:\"定制过滤\",fullName:\"bof.olapquery.control.CustomFilterDialog\"};dialogFactory.showDialog(dialogConfig,[this.clientId,memberPath],this.customFilterCallBack,this);}else{var obj=new Object();obj.memberPath=memberPath;obj.axis=0;obj.groupType=\"AND\";obj.operator1=\"\";obj.value1=\"\";obj.operator2=\"\";obj.value2=\"\";if(selectedId==\"TOP5\"){obj.operator1=\"TOPN\";obj.value1=\"5\";this.doFilterServiceCall(memberPath,obj);}else if(selectedId==\"TOP10\"){obj.operator1=\"TOPN\";obj.value1=\"10\";this.doFilterServiceCall(memberPath,obj);}else if(selectedId==\"TOP80PER\"){obj.operator1=\"TOPN\";obj.value1=\"80%\";this.doFilterServiceCall(memberPath,obj);}else if(selectedId==\"BOTTOM5\"){obj.operator1=\"BOTTOMN\";obj.value1=\"5\";this.doFilterServiceCall(memberPath,obj);}else if(selectedId==\"BOTTOM10\"){obj.operator1=\"BOTTOMN\";obj.value1=\"10\";this.doFilterServiceCall(memberPath,obj);}else if(selectedId==\"BOTTOM20PER\"){obj.operator1=\"BOTTOMN\";obj.value1=\"20%\";this.doFilterServiceCall(memberPath,obj);}}};OlapTable.prototype.doFilterServiceCall=function(memberPath,filter){var ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"addGridFilter\",[this.clientId,memberPath,filter]);if(ret&&ret.succeeded){this.onFilter.fire();}};OlapTable.prototype.customFilterCallBack=function(filterJSONString){if(!filterJSONString){return;}\nvar filter=lang.parseJSON(filterJSONString)\nthis.doFilterServiceCall(filter.memberPath,filter);};OlapTable.prototype.getCellValue=function(row,col){var grid=this.domAgent.getElementByBofid(\"olap-grid\");if(grid==null)return null;var tr=grid.rows(row);if(tr==null)return null;var td=tr.cells(col);if(td==null)return null;return td.innerText;};OlapTable.prototype.isExist=function(membersArray,membersJsonArray){for(var k=0;k<membersArray.length;k++){var memberFound=false;for(var z=0;z<membersJsonArray.length;z++){var member=membersJsonArray[z];if(membersArray[k]==member.caption){memberFound=true;break;}}\nif(!memberFound)return false;}\nreturn true;}\nOlapTable.prototype.getCellValueByMembers=function(rowMembers,colMembers){if(rowMembers==null||colMembers==null||rowMembers.length==\"undefined\"||colMembers.length==\"undefined\")\nreturn null;var grid=this.domAgent.getElementByBofid(\"olap-grid\");if(grid==null)return null;var rows=grid.rows;for(var i=0;i<rows.length;i++){var cols=rows[i].cells;for(var j=0;j<cols.length;j++){var td=cols[j];if(td.getAttribute(\"bofclass\")!=\"DATA\")continue;var rowsPosition=td.getAttribute(\"rowsPosition\");var colsPosition=td.getAttribute(\"columnsPosition\");var rmembers=lang.parseJSON(rowsPosition).members;var cmembers=lang.parseJSON(colsPosition).members;if(!this.isExist(rowMembers,rmembers))break;if(!this.isExist(colMembers,cmembers))break;return td.getAttribute(\"value\");}}\nreturn null;};OlapTable.prototype.showColumnProp=function(e){var tdElement=this.e.target.parentNode;if(tdElement.tagName==\"TR\"){this.currentSettingWidthTableElement=tdElement.parentNode.parentNode.parentNode;}else\nthis.currentSettingWidthTableElement=tdElement.parentNode.parentNode.parentNode.parentNode;if(!this.currentSettingWidthTableElement)\nreturn;var gridPropDialog={title:\"自定义字段属性\",fullName:\"bof.olapquery.olapquery.CustomGridPropDialog\"};var width=this.currentSettingWidthTableElement.offsetWidth;if(this.currentSettingWidthTableElement.bofclass!=\"HIERARCHY\"){width=width-1;}\nif(domutils.isIE7()&&this.currentSettingWidthTableElement.bofclass==\"HIERARCHY\"){width=parseInt(width-1);}\nvar columnWidthSettings=null\nvar ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"getClientConfig\",[this.clientId]);if(ret&&ret.succeeded&&ret.result){var clientConfig=ret.result;columnWidthSettings=lang.parseJSON(clientConfig).columnWidthSettings;}\nif(columnWidthSettings){if(this.currentSettingWidthTableElement.bofclass==\"HIERARCHY\"){var hierName=this.currentSettingWidthTableElement.hierName;var arrayLength=columnWidthSettings.length;for(var i=0;i<arrayLength;i++){if(columnWidthSettings[i].uniqueName==hierName){width=columnWidthSettings[i].width;break;}}}}\ndialogFactory.showDialog(gridPropDialog,[width],this.setColumnProp,this);};OlapTable.prototype.setColumnProp=function(ok,width){if(ok){this.currentSettingWidthTableElement.style.width=width;this.resizeCallBack(this.currentSettingWidthTableElement);}};OlapTable.prototype.colHResizeControl_mouseover_handler=function(e){e.target.style.cursor=\"E-resize\";};OlapTable.prototype.colHResizeControl_mouseout_handler=function(e){e.target.style.cursor=\"default\";};OlapTable.prototype.colHResizeControl_mousedown_handler=function(e){var tdElement=e.target;var outTdElement=tdElement.parentNode.parentNode.parentNode.parentNode;this.hResizer=new HResizer(tdElement,outTdElement,20,1000,this,this.resizeCallBack);};OlapTable.prototype.resizeCallBack=function(outTdElement){outTdElement.firstChild.style.width=outTdElement.style.width;this.changeColumnSize(outTdElement);setTimeout(function(){var ow=outTdElement.offsetWidth;var sw=parseInt(outTdElement.firstChild.style.width);if(Math.abs(sw-ow)>1){console.log(ow-1);outTdElement.firstChild.style.width=(ow-1)+\"px\";}},1);var that=this;setTimeout(function(){var memberPathWidthArray=that.getMemberPathWidthArray();that.onSetClientConfig.fire(that,memberPathWidthArray);},500);};OlapTable.prototype.changeColumnSize=function(outTdElement){if(outTdElement.bofclass==\"LEVEL\"||outTdElement.bofclass==\"HIERARCHY\"){var tr=outTdElement.parentNode;var td=tr.firstChild;var spanCount=0;while(td){spanCount+=td.colSpan;if(td==outTdElement){break;}\ntd=td.nextSibling;}\ntr=tr.nextSibling;var spanList=new Array();var rowId=0;while(tr){td=tr.firstChild;var span=0;if(td&&td.bofclass==\"MEMBER\"){rowId++;if(spanList[rowId]){span=spanList[rowId];}else{spanList[rowId]=0;}}\nwhile(td&&td.bofclass==\"MEMBER\"){var rowSpan=td.rowSpan;var colSpan=td.colSpan;spanList[rowId]+=colSpan;if(rowSpan>1){for(var i=1;i<rowSpan;i++){if(spanList[rowId+i]){spanList[rowId+i]+=colSpan;}else{spanList[rowId+i]=colSpan;}}}\nif(spanList[rowId]==spanCount){td.style.width=outTdElement.style.width;break;}\ntd=td.nextSibling;}\ntr=tr.nextSibling;}}\nif(outTdElement.firstChild&&outTdElement.firstChild.firstChild&&outTdElement.firstChild.firstChild.firstChild&&outTdElement.firstChild.firstChild.firstChild.firstChild){outTdElement.firstChild.firstChild.firstChild.firstChild.style.whiteSpace=\"normal\";}}\nOlapTable.prototype.getMemberPathWidthArray=function(){var table=this.domAgent.getElementByBofid(\"olap-grid\");var memberPathWidthArray=new Array();for(var i=0;i<table.rows.length;i++){var row=table.rows[i];var isDataArea=false;for(var j=0;j<row.cells.length;j++){var cell=row.cells[j];var tag=cell.getAttribute(\"bofclass\");if(tag==\"MEMBER\"){var tableElement=cell.firstChild;if(tableElement&&tableElement.bofclass==\"resizeTable\"){var resizerTd=tableElement.rows[0].cells[0];var widthSettingObj={type:\"MEMBER\",memberPath:this.getMemberPathFromTd(cell),width:tableElement.offsetWidth}\nmemberPathWidthArray.push(widthSettingObj);}}else if(tag==\"HIERARCHY\"){var tableElement=cell.firstChild;var resizerTd=tableElement.rows[0].cells[0];var widthSettingObj={type:\"HIERARCHY\",uniqueName:cell.hierName,width:tableElement.offsetWidth}\nmemberPathWidthArray.push(widthSettingObj);}else if(tag==\"LEVEL\"){var tableElement=cell.firstChild;var resizerTd=tableElement.rows[0].cells[0];var widthSettingObj={type:\"LEVEL\",hi:cell.getAttribute(\"hi\"),uniqueName:cell.getAttribute(\"le\"),width:tableElement.offsetWidth}\nmemberPathWidthArray.push(widthSettingObj);}else if(tag==\"DATA\"){isDataArea=true;break;}}\nif(isDataArea){break;}}\nreturn memberPathWidthArray;};OlapTable.prototype.resetTableWidth=function(){var clientConfig=null\nvar ret=util.remoteInvokeEx(\"OlapQueryClientService\",\"getClientConfig\",[this.clientId]);if(ret&&ret.succeeded&&ret.result){clientConfig=ret.result;}else{return;}\nvar columnWidthSettings=lang.parseJSON(clientConfig).columnWidthSettings;if(!columnWidthSettings){return;}\nthis.resetTableWidthWithSetting(columnWidthSettings);};OlapTable.prototype.resetTableWidthWithSetting=function(columnWidthSettings){var table=this.domAgent.getElementByBofid(\"olap-grid\");var memberPathWidthArray=new Array();for(var i=0;i<table.rows.length;i++){var row=table.rows[i];var isDataArea=false;for(var j=0;j<row.cells.length;j++){var cell=row.cells[j];if(cell.bofclass==\"HIERARCHY\"){var tableElement=cell.firstChild;var resizerTd=table.rows[0].cells[0];for(var ii=0;ii<columnWidthSettings.length;ii++){var columnWidthSetting=columnWidthSettings[ii];if(cell.hierName==columnWidthSetting.uniqueName){columnWidthSettings.splice(ii,1);tableElement.style.width=columnWidthSetting.width;cell.style.width=columnWidthSetting.width;this.changeColumnSize(cell);break;}}}else if(cell.bofclass==\"LEVEL\"){var le=cell.getAttribute(\"le\");var hi=cell.getAttribute(\"hi\");var tableElement=cell.firstChild;var resizerTd=table.rows[0].cells[0];var find=false,hiCount=0;for(var ii=0;ii<columnWidthSettings.length;ii++){var columnWidthSetting=columnWidthSettings[ii];if(columnWidthSetting.uniqueName&&le==columnWidthSetting.uniqueName){columnWidthSettings.splice(ii,1);cell.style.width=columnWidthSetting.width;tableElement.style.width=columnWidthSetting.width;this.changeColumnSize(cell);find=true;break;}\nif(columnWidthSetting.hi&&hi==columnWidthSetting.hi){hiCount++;}}\nif(!find&&hiCount==1){for(var ii=0;ii<columnWidthSettings.length;ii++){var columnWidthSetting=columnWidthSettings[ii];if(columnWidthSetting.hi&&hi==columnWidthSetting.hi){columnWidthSettings.splice(ii,1);cell.style.width=columnWidthSetting.width;tableElement.style.width=columnWidthSetting.width;this.changeColumnSize(cell);break;}}}}else if(cell.bofclass==\"MEMBER\"){var tableElement=cell.firstChild;if(tableElement&&tableElement.bofclass==\"resizeTable\"){var resizerTd=tableElement.rows[0].cells[0];for(var ii=0;ii<columnWidthSettings.length;ii++){var columnWidthSetting=columnWidthSettings[ii];if(columnWidthSetting.memberPath){if(this.compareList(columnWidthSetting.memberPath,this.getMemberPathFromTd(cell))){columnWidthSettings.splice(ii,1);tableElement.style.width=columnWidthSetting.width;resizerTd.style.whiteSpace=\"normal\";break;}}}}}else if(cell.bofclass==\"DATA\"){isDataArea=true;break;}}\nif(isDataArea){break;}}};OlapTable.prototype.isTimeOnAxis=function(axis){if(axis==0){for(var i=0;i<this._rowHierCount;i++)\nif(this._hiMap[i].t==1)\nreturn true;}else{for(var i=this._rowHierCount;i<this._hiMap.length;i++)\nif(this._hiMap[i].t==1)\nreturn true;}\nreturn false;}\nOlapTable.prototype.isHierarchyOnAxis=function(axis,hierName){if(axis==0){for(var i=0;i<this._rowHierCount;i++)\nif(this._hiMap[i].n==hierName)\nreturn true;}else{for(var i=this._rowHierCount;i<this._hiMap.length;i++)\nif(this._hiMap[i].n==hierName)\nreturn true;}\nreturn false;};OlapTable.prototype.getTimeHierarchyList=function(axis){var result=new Array();if(axis==0){for(var i=0;i<this._rowHierCount;i++)\nif(this._hiMap[i].t==1)\nresult.push(this._hiMap[i].n);}else{for(var i=this._rowHierCount;i<this._hiMap.length;i++)\nif(this._hiMap[i].t==1)\nresult.push(this._hiMap[i].n);}\nreturn result;};OlapTable.prototype.selectTimeLevel=function(obj){var dialogConfig={};dialogConfig.title=\"请选择层次结构\";dialogConfig.size=dialogFactory.size.MIDDLE;dialogConfig.fullName=\"bof.olapquery.olapquery.function.SelectLevelDialog\";var hierarchy=OlapMetadataService.getInstance().getHierarchyByCubeIdAndName(this.cubeId,obj.timeHierarchy);dialogFactory.showDialog(dialogConfig,[this.cubeId,hierarchy.id,obj],this.fireAddFunction,this);};OlapTable.prototype.doOnPrevColumnPage=function(){this.onPrevColumnPage.fire();}\nOlapTable.prototype.doOnNextColumnPage=function(){this.onNextColumnPage.fire();}","js/bof/olapquery/olapquery/workspace/HierarchyDefinePanel.js":"\nvar ExpListPanel=imports(\"bof.olapquery.olapquery.ExpListPanel\");var util=jsloader.resolve(\"freequery.common.util\");var HierarchyDefinePanel=function(container){this.init(container,__url,true);if(domutils.isFirefox()){util.changeTdToFixSize(this.elemExpListDiv.parentNode);}\nthis.onDeleteHandler=new CustomEvent();this.onMoveUpHandler=new CustomEvent();this.onMoveDownHandler=new CustomEvent();this.hierarchyName;this.hierarchyCaption;this.dimensionName;this.dimensionCaption;this.axis;this.expListPanel=new ExpListPanel(this.elemExpListDiv);this.expListPanel.onDeleteHandler.subscribe(this.deleteExp,this);};lang.extend(HierarchyDefinePanel,\"freequery.widget.Module2\");HierarchyDefinePanel.prototype.setHierarchyCaption=function(caption){this.hierarchyCaption=caption;this.setTitleHtml();}\nHierarchyDefinePanel.prototype.setHierarchyName=function(name){this.hierarchyName=name;}\nHierarchyDefinePanel.prototype.setDimensionCaption=function(caption){this.dimensionCaption=caption;this.setTitleHtml();}\nHierarchyDefinePanel.prototype.setTitleHtml=function(){if(this.dimensionCaption&&this.hierarchyCaption){this.elemHierarchyTitle.innerHTML=this.dimensionCaption+\".\"\n+this.hierarchyCaption;}else{this.elemHierarchyTitle.innerHTML=\"\";}}\nHierarchyDefinePanel.prototype.setDimensionName=function(name){this.dimensionName=name;}\nHierarchyDefinePanel.prototype.setAxis=function(axis){this.axis=parseInt(axis);}\nHierarchyDefinePanel.prototype.getHierarchyCaption=function(){return this.hierarchyCaption;}\nHierarchyDefinePanel.prototype.getHierarchyName=function(){return this.hierarchyName;}\nHierarchyDefinePanel.prototype.getDimensionCaption=function(){return this.dimensionCaption;}\nHierarchyDefinePanel.prototype.getDimensionName=function(){return this.dimensionName;}\nHierarchyDefinePanel.prototype.getAxis=function(){return this.axis;}\nHierarchyDefinePanel.prototype.elemMoveUpButton_click_handler=function(e){this.onMoveUpHandler.fire(this);}\nHierarchyDefinePanel.prototype.elemMoveDownButton_click_handler=function(e){this.onMoveDownHandler.fire(this);}\nHierarchyDefinePanel.prototype.destroy=function(){if(this.expListPanel){this.expListPanel.onDeleteHandler.unsubscribe(this.deleteExp,this);this.expListPanel.destroy();this.expListPanel=null;}\nHierarchyDefinePanel.superclass.destroy.call(this);}\nHierarchyDefinePanel.prototype.deleteExp=function(that,expList){this.onDeleteHandler.fire(this,expList);}","js/bof/olapquery/param/OlapParamDropDownTree.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var DropDownTree=jsloader.resolve(\"freequery.control.DropDownTree\");var OlapParamTreePanel=jsloader.resolve(\"bof.olapquery.param.OlapParamTreePanel\");var util=jsloader.resolve(\"freequery.common.util\");var OlapParamDropDownTree=function(parentObject,width,dropdownParent){OlapParamDropDownTree.superclass.constructor.call(this,parentObject,null,width,dropdownParent);this.destroyDropDownTreePanel();this.dropDownTreePanel=new OlapParamTreePanel(dropdownParent?dropdownParent:this.parent,this);this.dropDownTreePanel.ondropDown.subscribe(this.doDropDown,this);this.dropDownTreePanel.onCloseUp.subscribe(this.doCloseUp,this);this.setEditReadOnly(true);}\nlang.extend(OlapParamDropDownTree,DropDownTree);OlapParamDropDownTree.prototype.btnClick=function(){OlapParamDropDownTree.superclass.btnClick.call(this);this.addListener(document.body,\"mousewheel\",this.doMouseWheel,this);}\nOlapParamDropDownTree.prototype.doMouseWheel=function(e){var isMouseWheelInTreePanel=false;var target=e.target;while(target&&target!=this.dropDownTreePanel.panel){target=target.parentNode;if(target==this.dropDownTreePanel.panel){isMouseWheelInTreePanel=true;break;}}\nif(!isMouseWheelInTreePanel){this.dropDownTreePanel.closeUp(false);}}\nOlapParamDropDownTree.prototype.destroyDropDownTreePanel=function(){this.dropDownTreePanel.ondropDown.unsubscribe(this.doDropDown,this);this.dropDownTreePanel.onCloseUp.unsubscribe(this.doCloseUp,this);this.dropDownTreePanel.destroy();this.dropDownTreePanel=null;}\nOlapParamDropDownTree.prototype.destroy=function(){OlapParamDropDownTree.superclass.destroy.call(this);}\nOlapParamDropDownTree.prototype.render=function(olapParam){this.multSelect=(olapParam.type==\"MemberSet\");this.olapParam=olapParam;if(olapParam.currentDisplayValue){this.edit.setAttribute(\"value\",olapParam.currentDisplayValue);}\nif(olapParam.currentValue){this.selectedObject=olapParam.currentValue;}\nif(olapParam.type==\"MemberSet\"&&olapParam.currentValue){try{this.currentSettingValue=lang.parseJSON(olapParam.currentValue);}catch(e){this.currentSettingValue=new Array();this.currentSettingValue.push(olapParam.currentValue);}}};OlapParamDropDownTree.prototype.doCloseUp=function(){var newValue=this.dropDownTreePanel.selectedValue;var newId=this.dropDownTreePanel.selectedId;if(newValue!=null&&newValue!=\"\"){if(this.selectedId!=newId){this.edit.setAttribute(\"value\",newValue);this.selectedId=newId;this.selectedValue=newValue;this.selectedObject=this.dropDownTreePanel.selectedObject;this.onselectChange.fire(this,this.selectedId,newId,this.selectedValue,newValue);this.old_selected_id=this.selectedId;}}else{if(this.selectedId&&this.selectedId!=null)\nthis.setCurrentValue(this.selectedId,this.selectedValue);}\nthis.removeListener(document.body,\"mousewheel\",this.doMouseWheel,this);}\nOlapParamDropDownTree.prototype.doDropDown=function(){if(this.paramPanel&&!this.paramPanel.paramsInited[this.olapParam.id]){var checkSameLevel=false;if(this.olapParam.componentDefine)\ncheckSameLevel=lang.parseJSON(this.olapParam.componentDefine).onlySameLevel;this.dropDownTreePanel.initTree(this.olapParam,this.parentFieldName,this.multSelect,this.checkDescendents,checkSameLevel);}\nthis.ondropDown.fire(this);}\nOlapParamDropDownTree.prototype.clear=function(){this.dropDownTreePanel.clear();}\nOlapParamDropDownTree.prototype.refreshNode=function(id){this.dropDownTreePanel.tree.refreshNode(id);};OlapParamDropDownTree.prototype.setCurrentValue=function(value,displayValue){this.edit.setAttribute(\"value\",displayValue);this.selectedObject=value;if(this.olapParam.type!=\"MemberSet\")\nreturn;if(value&&value!=\"\"){try{this.currentSettingValue=lang.parseJSON(value);}catch(e){this.currentSettingValue=new Array();this.currentSettingValue.push(value);}}else{this.currentSettingValue=new Array();}\nif(this.dropDownTreePanel){var tree=this.dropDownTreePanel.tree;var nodes=tree.getCheckedNodes();for(var i=0;i<this.currentSettingValue.length;i++){var node=tree.nodes[this.currentSettingValue[i]];if(node)\nnode.setChecked(1);}\nfor(var j=0;j<nodes.length;j++){var found=false;for(var i=0;i<this.currentSettingValue.length;i++){if(nodes[j]._id==this.currentSettingValue[i]){found=true;break;}}\nif(!found)\nnodes[j].setChecked(0);}}};OlapParamDropDownTree.prototype.getSelectedObject=function(){return this.selectedObject;};var domutils=jsloader.resolve(\"freequery.lang.domutils\");if(domutils.isMobile()){OlapParamTreePanel=jsloader.resolve(\"bof.olapquery.param.MobileOlapDropDownTreePanel\");}\nOlapParamDropDownTree.prototype.__setCurrentValue=OlapParamDropDownTree.prototype.setCurrentValue;OlapParamDropDownTree.prototype.setCurrentValue=function(value,displayValue){if(domutils.isMobile()){this.edit.setAttribute(\"value\",displayValue);this.selectedObject=value;}else{this.__setCurrentValue(value,displayValue);}}","js/bof/olapquery/param/OlapParamTreePanel.js":"\n﻿\nvar DropDownTreePanel=jsloader.resolve(\"freequery.control.DropDownTreePanel\");var util=jsloader.resolve(\"freequery.common.util\");var OlapParamTree=jsloader.resolve(\"bof.olapquery.param.OlapParamTree\");var OlapParamTreePanel=function(parentObject,dropDownTree){OlapParamTreePanel.superclass.constructor.call(this,parentObject,dropDownTree);this.destroyTree();this.tree=new OlapParamTree(this.panel,this.dropDownTree,true);this.multSelect=false;this.checkSameLevel=false;}\nlang.extend(OlapParamTreePanel,DropDownTreePanel);OlapParamTreePanel.prototype.destroyTree=function(){if(this.tree){if(!this.multSelect){this.tree.onSelectNode.unsubscribe(this.selectedTree,this);}else{this.tree.onCheckNode.unsubscribe(this.handleChecked,this);}\nthis.tree.unrender();this.tree.destroy();this.tree=null;}}\nOlapParamTreePanel.prototype.destroy=function(){this.destroyTree();this.selectedId=null;this.selectedObject=null;this.selectedValue=null;this.panel.owner=null;OlapParamTreePanel.superclass.destroy.call(this);}\nOlapParamTreePanel.prototype.selectedTree=function(sender,selected,oldSelected){if(selected._type!=\"MEMBER\")return;this.selectedValue=selected._alias||selected._name;this.selectedId=selected._id;this.selectedObject=selected._id;this.closeUp(true);}\nOlapParamTreePanel.prototype.closeUp=function(itemClick){if(this.multSelect){var checkedNodes=this.tree.getCheckedNodes();if(checkedNodes){this.selectedValue=new Array();this.selectedId=new Array();var currentSettingValue=this.dropDownTree.currentSettingValue;if(currentSettingValue){var aliasList=this.dropDownTree.edit.value.split(\",\");var nodes=this.tree.nodes;for(var i=0;i<currentSettingValue.length;i++){var value=currentSettingValue[i];if(!nodes[value]||nodes[value].checked){this.selectedValue.push(aliasList[i]);this.selectedId.push(value);}}}\nfor(var i=0;i<checkedNodes.length;i++){if(currentSettingValue){var found=false;for(var j=0;j<currentSettingValue.length;j++){if(checkedNodes[i]._id==currentSettingValue[j]){found=true;break;}}\nif(found)\ncontinue;}\nvar a=checkedNodes[i]._alias;if(!a)\na=checkedNodes[i]._name;this.selectedValue.push(a);this.selectedId.push(checkedNodes[i]._id);}\nthis.selectedValue=this.selectedValue.join(\",\");this.selectedObject=this.selectedId;this.selectedId=lang.toJSONString(this.selectedId);}}\nthis.onCloseUp.fire(this,itemClick);if(this.panel)\nthis.setVisible(false);this.removeListener(document.body,\"mousedown\",OlapParamTreePanel.superclass.doMouseDown);}\nOlapParamTreePanel.prototype.clear=function(){};OlapParamTreePanel.prototype.getSelectedObject=function(){return this.selectedObject;};OlapParamTreePanel.prototype.handleChecked=function(node,checked){if(this.checkSameLevel){var checkedNodes=this.tree.getCheckedNodes();var currentNodeLevel=node._id.split(\".\").length;if(checkedNodes){for(var i=0;i<checkedNodes.length;i++){if(checkedNodes[i]._id.split(\".\").length!=currentNodeLevel){checkedNodes[i].setChecked(0);}}}}};OlapParamTreePanel.prototype.initTree=function(olapParam,parentFieldName,multSelect,checkDescendents,checkSameLevel){this.multSelect=multSelect;this.checkSameLevel=checkSameLevel;if(this.multSelect){this.tree.onCheckNode.subscribe(this.handleChecked,this);}else{this.tree.onSelectNode.subscribe(this.selectedTree,this);}\nthis.tree.multSelect=multSelect;this.tree.render(olapParam,parentFieldName,checkDescendents);}","js/bof/olapquery/param/OlapParamTree.js":"\n﻿var util=imports(\"freequery.common.util\").getInstance();var Configuration=imports(\"Configuration\").getInstance();var OlapParamTreeNode=imports(\"bof.olapquery.param.OlapParamTreeNode\");var modalWindow=imports(\"freequery.common.modalWindow\").getInstance();var OlapParamTree=function(parent,dropDownTree,hasCheckbox){OlapParamTree.superclass.constructor.call(this,parent);this.treeName=\"OlapParamTree\";this.dropDownTree=dropDownTree;this.multSelect=true;this.addListener(this.rootPane,\"click\",this.doOnClick,this);this.showMenu=false;this.denyTypes=[\"CUBECUSTOMMEMBERS\",\"CUBENAMEDSETS\"];this.hasCheckbox=hasCheckbox;this.onFunCall=new CustomEvent();};lang.extend(OlapParamTree,\"freequery.tree.CatalogTree\");OlapParamTree.prototype.destroy=function(){this.dropDownTree=null;OlapParamTree.superclass.destroy.call(this);}\nOlapParamTree.prototype.render=function(olapParam,clientId){this.olapParam=olapParam;this.cubeId=olapParam.cube.id;this.clientId=clientId;this.multSelect=(olapParam.type==\"MemberSet\");var standbyType=olapParam.standbyType;if(standbyType==\"CONSTLIST\"){this.renderValueList(olapParam);}else if(standbyType==\"MEMBERTREE\"){this.renderMemberTree(olapParam);}else if(standbyType==\"MDX\"){this.renderMdx(olapParam);}}\nOlapParamTree.prototype.renderMemberTree=function(olapParam){var componentDefine;if(typeof olapParam.componentDefine==\"string\")\ncomponentDefine=lang.parseJSON(olapParam.componentDefine);else\ncomponentDefine=olapParam.componentDefine;var hierarchy=lang.parseJSON(componentDefine.hierarchy);var hirearchyId=hierarchy.id;this.hirearchyId=hirearchyId;var dimRet=util.remoteInvoke(\"OlapMetadataService\",\"getDimensionByHierId\",[this.hirearchyId]);if(dimRet&&dimRet.succeeded){var dim=dimRet.result;if(dim.dimType==\"MEASURES\"){this.measureHierarchyId=this.hirearchyId;}}\nvar hierarchyName=hierarchy.name;var standbyValue=lang.parseJSON(olapParam.standbyValue);var isLimitLevel=standbyValue.isLimitLevel;if(isLimitLevel){var level;if(typeof standbyValue.level==\"string\")\nlevel=lang.parseJSON(standbyValue.level);else\nlevel=standbyValue.level;this.rootNode.removeAllChildren();this.rootNode._id=this.cubeId;this.rootNode.hierId=hirearchyId;var catalog={id:level.name,name:level.name,alias:level.alias,type:\"LEVEL\",hasChild:true,hierId:hirearchyId}\nthis.rootNode.addCatalogTreeNode(catalog,1);}else{this.rootNode._id=this.cubeId;this.rootNode.hierId=hirearchyId;var catalog={id:hirearchyId,name:hierarchyName,type:\"HIERARCHY\",hasChild:true,hierId:hirearchyId}\nthis.rootNode.addCatalogTreeNode(catalog,1);}\nvar result=this.dropDownTree.paramPanel.getOlapParamDefaultValue(this.dropDownTree.olapParam.id);if(typeof result==\"undefined\")\nresult=null;if(result!=null&&result.length>=1){for(var i=0;i<result.length;i++){var catalog={id:result[i][0],name:result[i][1],type:\"MEMBER\",hasChild:false,hierId:hirearchyId}\nthis.rootNode.addCatalogTreeNode(catalog,1);}}\nthis.rootNode._isInitChild=true;this.rootNode.setExpanded(true);};OlapParamTree.prototype.renderValueList=function(olapParam){var componentDefine;if(typeof olapParam.componentDefine==\"string\")\ncomponentDefine=lang.parseJSON(olapParam.componentDefine);else\ncomponentDefine=olapParam.componentDefine;var hierarchy=lang.parseJSON(componentDefine.hierarchy);var hirearchyId=hierarchy.id;this.hirearchyId=hirearchyId;var dimRet=util.remoteInvoke(\"OlapMetadataService\",\"getDimensionByHierId\",[this.hirearchyId]);if(dimRet&&dimRet.succeeded){var dim=dimRet.result;if(dim.dimType==\"MEASURES\"){this.measureHierarchyId=this.hirearchyId;}}\nvar hierarchyName=hierarchy.name;var standbyValue=lang.parseJSON(olapParam.standbyValue);var isDisplayChild=standbyValue.isDisplayChild;this.rootNode.removeAllChildren();this.rootNode.hierId=hirearchyId;this.rootNode._id=this.cubeId;this.appendNodes(hirearchyId,isDisplayChild);this.rootNode._isInitChild=true;this.rootNode.setExpanded(true);};OlapParamTree.prototype.renderMdx=function(olapParam){var componentDefine;if(typeof olapParam.componentDefine==\"string\")\ncomponentDefine=lang.parseJSON(olapParam.componentDefine);else\ncomponentDefine=olapParam.componentDefine;var hierarchy=lang.parseJSON(componentDefine.hierarchy);var hirearchyId=hierarchy.id;this.hirearchyId=hirearchyId;var dimRet=util.remoteInvoke(\"OlapMetadataService\",\"getDimensionByHierId\",[this.hirearchyId]);if(dimRet&&dimRet.succeeded){var dim=dimRet.result;if(dim.dimType==\"MEASURES\"){this.measureHierarchyId=this.hirearchyId;}}\nvar hierarchyName=hierarchy.name;var standbyValue=lang.parseJSON(olapParam.standbyValue);var isDisplayChild=standbyValue.isDisplayChild;var value=standbyValue.value;this.rootNode.removeAllChildren();this.rootNode._id=this.cubeId;this.rootNode.hierId=hirearchyId;this.appendNodes(hirearchyId,isDisplayChild);this.rootNode._isInitChild=true;this.rootNode.setExpanded(true);};OlapParamTree.prototype.setMultSelect=function(isMultSelect){this.multSelect=isMultSelect;}\nOlapParamTree.prototype.setShowMenu=function(isShowMenu){this.showMenu=isShowMenu;}\nOlapParamTree.prototype.createTreeNode=function(text,level,mayHasChild,parent,id){return new OlapParamTreeNode(text,level,mayHasChild,parent,id);};OlapParamTree.prototype.canDrag=function(node){return false;};OlapParamTree.prototype.getMenuHandlers=function(){return Configuration.extensionPoints.CatalogTree.olapQueryViewHandler;};OlapParamTree.prototype.doOnClick=function(e){var treeNode=this.getTreeNode(e.target);var nodeType=treeNode._type;switch(nodeType){case\"MOREMEMBER\":treeNode.appendMoreNode();break;default:break;}};OlapParamTree.prototype.appendNodes=function(hirearchyId,isDisplayChild){var result=this.dropDownTree.paramPanel.getParamStandbyValue(this.dropDownTree.olapParam.id);var ret=this.dropDownTree.paramPanel.getOlapParamDefaultValue(this.dropDownTree.olapParam.id);if(!ret)\nret=null;for(var i=0;ret&&i<ret.length;i++){var exist=false;if(result){for(var z=0;z<result.length;z++){if(result[z][0]==ret[i][0]){exist=true;break;}}}\nif(!exist&&ret[i].length>1){var catalog={id:ret[i][0],name:ret[i][1],type:\"MEMBER\",hasChild:false,hierId:hirearchyId}\nthis.rootNode.addCatalogTreeNode(catalog,1);}}\nif(result){var length=result.length;for(var n=0;n<length;n++){if(result[n][0]&&result[n][1]){var catalog={id:result[n][0],name:result[n][1],type:\"MEMBER\",hasChild:isDisplayChild&&result[n][2]!=\"0\",hierId:hirearchyId}\nthis.rootNode.addCatalogTreeNode(catalog,1);}}}};OlapParamTree.prototype.hierIsMessure=function(){return this.measureHierarchyId;};","js/bof/olapquery/param/OlapParamTreeNode.js":"\nvar util=imports(\"freequery.common.util\").getInstance();var OlapMetadataService=imports(\"bof.olapquery.OlapMetadataService\");var modalWindow=imports(\"freequery.common.modalWindow\").getInstance();var OlapTransferDataNode=imports(\"bof.olapquery.olapquery.OlapTransferDataNode\");var OlapParamTreeNode=function(){this.defaultLoadMemberSize=100;this.dimName;this.hierName;this.dimId;this.hierId;this.levelName;OlapParamTreeNode.superclass.constructor.apply(this,arguments);};lang.extend(OlapParamTreeNode,\"freequery.tree.CatalogTreeNode\");OlapParamTreeNode.prototype.initChildren=function(){var nodeType=this._type;switch(nodeType){case\"HIERARCHY\":this.initLevels(this._id);break;case\"MEMBERS\":this.initFirstLevelMembers();break;case\"LEVEL\":this.initMembers(0,this.defaultLoadMemberSize);break;case\"MEMBER\":this.initMemberChildren();break;default:if(this._id){OlapParamTreeNode.superclass.initChildren.call(this);}else{alert(\"未知类型：\"+nodeType);}\nbreak;}};OlapParamTreeNode.prototype.refreshChildren=function(){if(this._id){var result=util.remoteInvoke(\"CatalogService\",\"getCatalogElementById\",[this._id]);if(result.succeeded){if(result.result)\nthis.setCatalogInfo(result.result);}else{modalWindow.showServerError(result);}}\nthis.initChildren();};OlapParamTreeNode.prototype.initMemberChildren=function(){if(this._type!=\"MEMBER\")\nreturn;var hierId=this.catalog.hierId;if(!hierId)\nhierId=this.hierId;this.isLoading=true;this.removeAllChildren();var useFilter=false;var componentDefine;var olapParam=this.tree.olapParam;if(typeof olapParam.componentDefine==\"string\"){componentDefine=lang.parseJSON(olapParam.componentDefine);}else{componentDefine=olapParam.componentDefine;}\nuseFilter=componentDefine.useFilter;var parameterPanelId=this.tree.dropDownTree.paramPanel.clientId;var paramId=this.tree.dropDownTree.olapParam.id;if(this.tree.dynamicLoad){util.remoteInvoke(\"ParameterPanelService\",\"getOlapParamMemberChildren\",[parameterPanelId,paramId,hierId,this._id,0,this.defaultLoadMemberSize],this.initMemberChildrenRemoteCallback,this);}else{var result=util.remoteInvoke(\"ParameterPanelService\",\"getOlapParamMemberChildren\",[parameterPanelId,paramId,hierId,this._id,0,this.defaultLoadMemberSize]);this.initMemberChildrenRemoteCallback(result);this.isLoading=false;this.initExpanderImg();}\nthis._isInitChild=true;}\nOlapParamTreeNode.prototype.initMemberChildrenRemoteCallback=function(result){var ret=lang.parseJSON(lang.toJSONString(result));ret.result=new Array();for(var i=0;i<result.result.length;i++){var member={id:result.result[i][0],name:result.result[i][0],alias:result.result[i][1],childCount:parseInt(result.result[i][2])}\nret.result.push(member);}\nthis.initRemoteCallback(ret,\"MEMBER\",true);}\nOlapParamTreeNode.prototype.initFirstLevelMembers=function(){if(!this.parentNode){return;}\nvar childCount=this.parentNode.childCount;if(childCount<2){return;}\nvar hierId=this.hierId;var firstLevel=this.parentNode.firstChild.nextSibling;var firstLevelName=firstLevel._name;this.isLoading=true;this.removeAllChildren();var useFilter=false;var componentDefine;var olapParam=this.tree.olapParam;if(typeof olapParam.componentDefine==\"string\"){componentDefine=lang.parseJSON(olapParam.componentDefine);}else{componentDefine=olapParam.componentDefine;}\nuseFilter=componentDefine.useFilter;var parameterPanelId=this.tree.dropDownTree.paramPanel.clientId;var paramId=this.tree.dropDownTree.olapParam.id;if(this.tree.dynamicLoad){util.remoteInvoke(\"ParameterPanelService\",\"getOlapParamHierarchyRootMembers\",[parameterPanelId,paramId,hierId,firstLevelName,0,this.defaultLoadMemberSize],this.initFirstLevelMembersRemoteCallback,this);}else{var result=util.remoteInvoke(\"ParameterPanelService\",\"getOlapParamHierarchyRootMembers\",[parameterPanelId,paramId,hierId,firstLevelName,0,this.defaultLoadMemberSize]);this.initFirstLevelMembersRemoteCallback(result);this.isLoading=false;this.initExpanderImg();}\nthis._isInitChild=true;}\nOlapParamTreeNode.prototype.initFirstLevelMembersRemoteCallback=function(result){var ret=lang.parseJSON(lang.toJSONString(result));ret.result=new Array();for(var i=0;i<result.result.length;i++){var member={id:result.result[i][0],name:result.result[i][0],alias:result.result[i][1],childCount:parseInt(result.result[i][2])}\nret.result.push(member);}\nthis.initRemoteCallback(ret,\"MEMBER\",true);}\nOlapParamTreeNode.prototype.initHierarchiesFolder=function(){this.isLoading=true;this.removeAllChildren();if(this.tree.dynamicLoad){util.remoteInvoke(\"CatalogService\",\"getChildElements\",[this._id],this.initHierarchiesFolderRemoteCallback,this);}else{var result=util.remoteInvoke(\"CatalogService\",\"getChildElements\",[this._id]);this.initHierarchiesFolderRemoteCallback(result);this.isLoading=false;this.initExpanderImg();}\nthis._isInitChild=true;}\nOlapParamTreeNode.prototype.initHierarchiesFolderRemoteCallback=function(result){this.initRemoteCallback(result,\"HIERARCHY\");}\nOlapParamTreeNode.prototype.initMembers=function(fromInt,countInt){var hierId=this.catalog.hierId;this.isLoading=true;this.removeAllChildren();var useFilter=false;var componentDefine;var olapParam=this.tree.olapParam;if(typeof olapParam.componentDefine==\"string\"){componentDefine=lang.parseJSON(olapParam.componentDefine);}else{componentDefine=olapParam.componentDefine;}\nuseFilter=componentDefine.useFilter;var parameterPanelId=this.tree.dropDownTree.paramPanel.clientId;var paramId=this.tree.dropDownTree.olapParam.id;if(this.tree.dynamicLoad){util.remoteInvoke(\"ParameterPanelService\",\"getOlapParamLevelMembers\",[parameterPanelId,paramId,hierId,this._name,fromInt,countInt],this.initMembersRemoteCallback,this);}else{var result=util.remoteInvoke(\"ParameterPanelService\",\"getOlapParamLevelMembers\",[parameterPanelId,paramId,hierId,this._name,fromInt,countInt]);this.initMembersRemoteCallback(result);this.isLoading=false;this.initExpanderImg();}\nthis._isInitChild=true;}\nOlapParamTreeNode.prototype.initMembersRemoteCallback=function(result){var ret=lang.parseJSON(lang.toJSONString(result));ret.result=new Array();for(var i=0;i<result.result.length;i++){var member={id:result.result[i][0],name:result.result[i][0],alias:result.result[i][1],childCount:parseInt(result.result[i][2])}\nret.result.push(member);}\nthis.initRemoteCallback(ret,\"MEMBER\");}\nOlapParamTreeNode.prototype.initLevels=function(hierId){this.isLoading=true;this.removeAllChildren();if(this.tree.dynamicLoad){util.remoteInvoke(\"OlapMetadataService\",\"getLevelInfoList\",[hierId],this.initLevelsRemoteCallback,this);}else{var result=util.remoteInvoke(\"OlapMetadataService\",\"getLevelInfoList\",[hierId]);this.initLevelsRemoteCallback(result);this.isLoading=false;this.initExpanderImg();}\nthis._isInitChild=true;};OlapParamTreeNode.prototype.initLevelsRemoteCallback=function(result){this.initRemoteCallback(result,\"LEVEL\");}\nOlapParamTreeNode.prototype.createCatalogNode=function(id,name,alias,hasChildFlag,type,hierId){var catalogId;if(id){catalogId=id;}else{catalogId=name;}\nreturn{id:catalogId,name:name,alias:alias,type:type,hasChild:hasChildFlag,hierId:hierId};};OlapParamTreeNode.prototype.addCatalogTreeNode=function(catalog,levelCount){var childNode=OlapParamTreeNode.superclass.addCatalogTreeNode.call(this,catalog);if(!childNode){return;}\nif(catalog.type==\"MOREMEMBER\"){childNode.textSpan.style.textDecoration=\"underline\";}\nif(catalog.type==\"HIERARCHY\"){if(this._type==\"DIMENSION\"){childNode.dimName=this._name;childNode.dimId=this._id;}\nif(this._type==\"HIERARCHIES\"){childNode.dimName=this.dimName;childNode.dimId=this.dimId;}}\nif(this._type==\"MEASURES\"){childNode.hierName=this.hierName;childNode.hierId=this.hierId;var ret=util.remoteInvoke(\"OlapMetadataService\",\"getDimensionByHierId\",[this.hierId]);if(ret&&ret.succeeded){childNode.dimName=ret.result.name;childNode.dimId=ret.result.id;}else{return;}}\nif(catalog.type==\"LEVEL\"||catalog.type==\"MEMBERS\"){if(this._type==\"HIERARCHY\"){childNode.dimName=this.dimName;childNode.dimId=this.dimId;childNode.hierName=this._name;childNode.hierId=this._id;}\nif(this._type==\"DIMENSION\"){childNode.dimName=this._name;childNode.dimId=this._id;childNode.hierName=this.hierName;childNode.hierId=this.hierId;}\nif(catalog.type==\"LEVEL\"){if(levelCount>5)\nchildNode.setIcon(\"img/catalogtree/\"+catalog.type+\"5.gif\");else\nchildNode.setIcon(\"img/catalogtree/\"+catalog.type+levelCount+\".gif\");}}\nif(catalog.type==\"MEMBER\"){if(this.tree.multSelect&&this.tree.hasCheckbox){childNode.setCheckBoxType(1);var currentValues=this.tree.dropDownTree.currentSettingValue;if(currentValues){for(var i=0;i<currentValues.length;i++){if(catalog.id==currentValues[i])\nchildNode.setChecked(1);}}}\nif(this._type==\"LEVEL\"||this._type==\"MEMBER\"||this._type==\"MEMBERS\"){childNode.dimName=this.dimName;childNode.dimId=this.dimId;childNode.hierName=this.hierName;childNode.hierId=this.hierId;}\nif(this.tree.hierIsMessure()){childNode.setIcon(\"img/catalogtree/MEASURE.gif\");}}\nreturn childNode;}\nOlapParamTreeNode.prototype.createTransferData=function(){var transferNode=this.createTransferNode(this);util.transferData().srcElement=this.tree;util.transferData().srcType=\"OLAPEXP\";util.transferData().dataNodes=[transferNode];return true;};OlapParamTreeNode.prototype.createTransferDatas=function(){var dataNodes=new Array();for(var i=0;i<this.tree.selected.length;i++){var node=this.tree.selected[i];var transferNode=this.createTransferNode(node);util.transferData().srcElement=node.tree;util.transferData().srcType=\"OLAPEXP\";dataNodes.push(transferNode);}\nutil.transferData().dataNodes=dataNodes;return true;}\nOlapParamTreeNode.prototype.createTransferNode=function(node){var transferNode=new OlapTransferDataNode();transferNode.id=node._id;transferNode.type=node._type;transferNode.name=node._name;if(node._type==\"CUSTOMMEMBER\"){transferNode.id=node.expDefine;}\ntransferNode.label=(node._alias==null||node._alias==\"\")?node._name:node._alias;transferNode.alias=node._alias;transferNode.hierName=node.hierName;transferNode.dimName=node.dimName;return transferNode;}\nOlapParamTreeNode.prototype.initRemoteCallback=function(ret,type,isMemberHasChildren){ret=this.reInitChildren(ret);var hasChildFlag=true;if(type==\"MEMBER\"){if(!isMemberHasChildren){hasChildFlag=false;}}\nif(type==\"CUSTOMMEMBER\"){hasChildFlag=false;}\nif(ret.succeeded){if(type==\"LEVEL\"){var catalog=this.createCatalogNode(\"members\",\"成员\",\"成员\",true,\"MEMBERS\");this.addCatalogTreeNode(catalog);}\nfor(var i=0;i<ret.result.length;i++){var bean=ret.result[i];if(type==\"MEMBER\"&&isMemberHasChildren)\nhasChildFlag=bean.childCount>0;if(this.tree.searchCondition){if(this.tree.searchNodeIdArray[bean.id]){var catalog=this.createCatalogNode(bean.id,bean.name,bean.alias,hasChildFlag,type,this.catalog.hierId);this.addCatalogTreeNode(catalog,i+1);}}else{var hierId=this.catalog.hierId;var catalog=this.createCatalogNode(bean.id,bean.name,bean.alias,hasChildFlag,type,hierId);this.addCatalogTreeNode(catalog,i+1);}}\nif(type==\"MEMBER\"){if(ret.result.length==this.defaultLoadMemberSize){var catalog=this.createCatalogNode(\"moreMember\",\"更多\",\"更多\",false,\"MOREMEMBER\");var tempNode=this.addCatalogTreeNode(catalog);tempNode.setIcon(\"img/tree/MORE.gif\");}}}else{modalWindow.showServerError(ret);}\nthis.isLoading=false;this.initExpanderImg();this.tree.onNodeInitComplete.fire(this.tree,this);};OlapParamTreeNode.prototype.addExpToOlapQuery=function(func){var expArray=new Array();var captionArray=new Array();switch(this._type){case\"MEMBER\":var exp=this._name+\".\"+func;if(func==\"MEMBERSELF\"){exp=this._name;}\nvar alias=this._alias||this._name;var caption=\"[\"+alias+\"].\"+func;captionArray.push(caption);expArray.push(exp);break;default:return;}\nthis.tree.onFunCall.fire(captionArray,expArray);};OlapParamTreeNode.prototype.appendMoreNode=function(){var parentNode=this.parentNode;var fromInt=parentNode.childCount-1;var countInt=this.defaultLoadMemberSize;var useFilter=false;var componentDefine;var olapParam=this.tree.olapParam;var parameterPanelId=this.tree.dropDownTree.paramPanel.clientId;var paramId=this.tree.dropDownTree.olapParam.id;if(typeof olapParam.componentDefine==\"string\"){componentDefine=lang.parseJSON(olapParam.componentDefine);}else{componentDefine=olapParam.componentDefine;}\nuseFilter=componentDefine.useFilter;if(parentNode._type==\"LEVEL\"){if(this.tree.dynamicLoad){util.remoteInvoke(\"ParameterPanelService\",\"getOlapParamLevelMembers\",[parameterPanelId,paramId,parentNode.catalog.hierId,parentNode._name,fromInt,countInt],this.appendMoreLevelChildRemoteCallback,this);}}else if(parentNode._type==\"MEMBER\"){if(this.tree.dynamicLoad){var hierId=this.parentNode.catalog.hierId;if(!hierId){hierId=this.parentNode.hierId;}\nutil.remoteInvoke(\"ParameterPanelService\",\"getOlapParamMemberChildren\",[parameterPanelId,paramId,hierId,parentNode._id,fromInt,countInt],this.appendMoreLevelChildRemoteCallback,this);}}}\nOlapParamTreeNode.prototype.appendMoreLevelChildRemoteCallback=function(result){var ret=lang.parseJSON(lang.toJSONString(result));ret.result=new Array();for(var i=0;i<result.result.length;i++){var member={id:result.result[i][0],name:result.result[i][0],alias:result.result[i][1],childCount:parseInt(result.result[i][2])}\nret.result.push(member);}\nvar parentNode=this.parentNode;var hasChildFlag=false;var type=\"MEMBER\";if(parentNode._type==\"LEVEL\"){hasChildFlag=false;}else if(parentNode._type==\"MEMBER\"){hasChildFlag=true;}\nif(ret.succeeded){parentNode.removeChild(this);for(var i=0;i<ret.result.length;i++){var bean=ret.result[i];if(parentNode._type==\"MEMBER\")\nhasChildFlag=bean.childCount>0;if(parentNode.tree.searchCondition){if(parentNode.tree.searchNodeIdArray[bean.id]){var catalog=this.createCatalogNode(bean.id,bean.name,bean.alias,hasChildFlag,type);parentNode.addCatalogTreeNode(catalog,i+1);}}else{var catalog=this.createCatalogNode(bean.id,bean.name,bean.alias,hasChildFlag,type);parentNode.addCatalogTreeNode(catalog,i+1);}}\nif(ret.result.length==this.defaultLoadMemberSize){var catalog=this.createCatalogNode(\"moreMember\",\"更多\",\"更多\",false,\"MOREMEMBER\");var tempNode=parentNode.addCatalogTreeNode(catalog);tempNode.setIcon(\"img/tree/MORE.gif\");}}};OlapParamTreeNode.prototype.doOnMouseMove=function(e){};","js/bof/olapquery/paging/Paging.js":"\nvar util=jsloader.resolve(\"freequery.common.util\");var Paging=function(container){this.init(container,__url);this.applyPageTheme(container);this.onblur=new CustomEvent();}\nlang.extend(Paging,\"freequery.widget.Module2\");Paging.prototype.applyPageTheme=function(container){this.pagePanelFont={};var pageTheme=registry.get(\"pageTheme\");if(pageTheme&&pageTheme.report){if(pageTheme.report.pagePanelFont)\nthis.pagePanelFont=pageTheme.report.pagePanelFont}\nvar fontSize=this.pagePanelFont.fontSize||\"\",color=this.pagePanelFont.color||\"\";container.style.fontSize=fontSize;container.style.color=color;this.elemCurrentPage.style.fontSize=fontSize;this.elemPageRows.style.fontSize=fontSize;this.elemCurrentPage.style.color=color;this.elemPageRows.style.color=color;}\nPaging.prototype.elemCurrentPage_blur_handler=function(){if(this.elemCurrentPage._cancelNextBlur)\nthis.elemCurrentPage._cancelNextBlur=false;else{if(!util.checkNumberString(this.elemCurrentPage.value,3)){alert(\"页数请输入正整数！\");this.elemCurrentPage.focus();return;}\nthis.onblur.fire(\"count\",this.elemCurrentPage.value);}}\nPaging.prototype.elemCurrentPage_keypress_handler=function(e){if(e.keyCode==13){this.elemCurrentPage._cancelNextBlur=true;if(!util.checkNumberString(this.elemCurrentPage.value,3)){alert(\"页数请输入正整数！\");this.elemCurrentPage.focus();return;}\nthis.onblur.fire(\"count\",this.elemCurrentPage.value);}}\nPaging.prototype.elemPageRows_blur_handler=function(){if(this.elemPageRows._cancelNextBlur)\nthis.elemPageRows._cancelNextBlur=false;else{if(this.checkValue(this.elemPageRows.value)){if(parseInt(this.elemPageRows.value)<1){alert(\"分页显示时，每页行数最少为1行！\");this.elemPageRows.focus();return;}else if(parseInt(this.elemPageRows.value)>1000){alert(\"分页显示时，每页行数最多为1000行！\");this.elemPageRows.focus();return;}\nthis.pageRows=parseInt(this.elemPageRows.value);}else{alert(\"行数必须为正整数！\");this.elemPageRows.focus();return;}\nthis.onblur.fire(\"row\",this.elemPageRows.value);}};Paging.prototype.elemPageRows_keypress_handler=function(e){if(e.keyCode==13){this.elemPageRows._cancelNextBlur=true;if(this.checkValue(this.elemPageRows.value)){if(parseInt(this.elemPageRows.value)<1){alert(\"分页显示时，每页行数最少为1行！\");this.elemPageRows.focus();return;}else if(parseInt(this.elemPageRows.value)>1000){alert(\"分页显示时，每页行数最多为1000行！\");this.elemPageRows.focus();return;}\nthis.pageRows=parseInt(this.elemPageRows.value);}else{alert(\"行数必须为正整数！\");this.elemPageRows.focus();return;}\nthis.onblur.fire(\"row\",this.elemPageRows.value);}}\nPaging.prototype.setCurrentPage=function(pageIndex){this.elemCurrentPage.value=pageIndex;};Paging.prototype.checkValue=function(value){var reg=new RegExp(\"^\\\\d+$\");return reg.test(value);};","js/freequery/thirdparty/Calendar.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var util=jsloader.resolve(\"freequery.common.util\");var calendar_holder=document.createElement(\"div\");if(!document.calendar_holder_Parent)\ndocument.body.appendChild(calendar_holder);else\ndocument.calendar_holder_Parent.appendChild(calendar_holder);calendar_holder.style.display=\"none\";calendar_holder.innerHTML=\"<div id=meizzCalendarLayer style='position: absolute; z-index: 9999; width: 180; height: 193; display: none'>\"\n+\"<iframe name=meizzCalendarIframe scrolling=no frameborder=0 width=100% height=100%><\/iframe><\/div>\";var Calendar=function(){if(!window.WebCalendar){window.WebCalendar=new WebCalendarC();window.WebCalendar.owner=this;}}\nlang.extend(Calendar,Module);Calendar.prototype.destroy=function(){window.WebCalendar=null;Calendar.superclass.destroy.call(this);}\nCalendar.prototype.docOnClick=function(e){if(WebCalendar.eventSrc!=e.target)\nWebCalendar.doCancelClick();this.removeListener(document,\"click\",this.docOnClick);}\nCalendar.prototype.calendar=function(e,editObj,type){this.addListener(document,\"click\",this.docOnClick,this);var elem=domutils.findElementByClassName(document.body,'_viewdiv');if(elem){this.addListener(elem,\"scroll\",function(){if(WebCalendar.calendar.style.display!='none')\nthis.docOnClick();this.removeListener(elem,\"scroll\",arguments.callee);},this);}\nvar e=e&&e.target;this.writeIframe(type);var o=WebCalendar.calendar.style;WebCalendar.eventSrc=e;WebCalendar.currentId=null;if(arguments.length==1)\nWebCalendar.objExport=e;else\nWebCalendar.objExport=editObj;if(!WebCalendar.objExport)\nreturn;WebCalendar.tempValue=WebCalendar.objExport.value;WebCalendar.dateTimeType=type;WebCalendar.iframe.document.getElementById('tableWeek').style.cursor=WebCalendar.drag?\"move\":\"default\";e=WebCalendar.objExport;var eTop=e.offsetTop;var eHeight=e.clientHeight;var eLeft=e.offsetLeft;var p=e.type;var pageContent=domutils.findElementByClassName(document.body,'_viewdiv');var content=document.getElementById(\"content\");while(e=e.offsetParent){if(e==content)\nbreak;eTop+=e.offsetTop;eLeft+=e.offsetLeft;}\no.display=\"\";WebCalendar.calendar.parentNode.style.display=\"\";WebCalendar.iframe.document.body.focus();var editOffset=this.getOffset(editObj);var fixheight=3;if(domutils.isFirefox()||domutils.isChrome()){var pos=util.getAbsolutePosScroll(editObj,document.body);editOffset.left=pos.x;editOffset.top=pos.y;fixheight=0;}\no.left=editOffset.left;o.top=editOffset.top+editObj.offsetHeight+fixheight;if(type==\"DATE\")\nWebCalendar.dateReg=/^(\\d{1,4})(-|\\/)(\\d{1,2})\\2(\\d{1,2})$/;else if(type==\"DATETIME\"){WebCalendar.dateReg=/^(\\d{1,4})(-|\\/)(\\d{1,2})\\2(\\d{1,2}) (\\d{1,2}):(\\d{1,2}):(\\d{1,2})$/;WebCalendar.dateReg1=/^(\\d{1,4})(-|\\/)(\\d{1,2})\\2(\\d{1,2}) (\\d{1,2}):(\\d{1,2})$/;}else\nWebCalendar.dateReg=/^(\\d{1,2}):(\\d{1,2})$/;try{if(WebCalendar.objExport.value.valueOf()!=\"\"){WebCalendar.dateStyle=WebCalendar.objExport.value.toString().match(WebCalendar.dateReg);if(WebCalendar.dateStyle==null&&WebCalendar.dateReg1)\nWebCalendar.dateStyle=WebCalendar.objExport.value.toString().match(WebCalendar.dateReg1);if(WebCalendar.dateStyle==null){WebCalendar.thisYear=new Date().getFullYear();WebCalendar.thisMonth=new Date().getMonth()+1;WebCalendar.thisDay=new Date().getDate();WebCalendar.thisHour=new Date().getHours();WebCalendar.thisMinute=new Date().getMinutes();alert(\"原文本框里的日期有错误！\\n可能与你定义的显示时分秒有冲突！\");WebCalendar.writeCalendar();return false;}else{if(type==\"DATE\"){WebCalendar.thisYear=parseInt(WebCalendar.dateStyle[1],10);WebCalendar.thisMonth=parseInt(WebCalendar.dateStyle[3],10);WebCalendar.thisDay=parseInt(WebCalendar.dateStyle[4],10);WebCalendar.inputDate=parseInt(WebCalendar.thisDay,10)+\"/\"\n+parseInt(WebCalendar.thisMonth,10)+\"/\"\n+parseInt(WebCalendar.thisYear,10);}else if(type==\"DATETIME\"){WebCalendar.thisYear=parseInt(WebCalendar.dateStyle[1],10);WebCalendar.thisMonth=parseInt(WebCalendar.dateStyle[3],10);WebCalendar.thisDay=parseInt(WebCalendar.dateStyle[4],10);WebCalendar.thisHour=parseInt((WebCalendar.dateStyle[5])?WebCalendar.dateStyle[5]:\"00\",10);WebCalendar.thisMinute=parseInt((WebCalendar.dateStyle[6])?WebCalendar.dateStyle[6]:\"00\",10);WebCalendar.inputDate=parseInt(WebCalendar.thisDay,10)+\"/\"\n+parseInt(WebCalendar.thisMonth,10)+\"/\"\n+parseInt(WebCalendar.thisYear,10)+\" \"\n+parseInt(WebCalendar.thisHour,10)+\":\"\n+parseInt(WebCalendar.thisMinute,10);}else{WebCalendar.thisYear=new Date().getFullYear();WebCalendar.thisMonth=new Date().getMonth()+1;WebCalendar.thisDay=new Date().getDate();WebCalendar.thisHour=parseInt((WebCalendar.dateStyle[1])?WebCalendar.dateStyle[1]:\"00\",10);WebCalendar.thisMinute=parseInt((WebCalendar.dateStyle[2])?WebCalendar.dateStyle[2]:\"00\",10);WebCalendar.inputDate=parseInt(WebCalendar.thisHour,10)+\":\"\n+parseInt(WebCalendar.thisMinute,10);}\nWebCalendar.writeCalendar();}}else\nWebCalendar.writeCalendar();}catch(e){WebCalendar.writeCalendar();}}\nCalendar.prototype.getOffset=function(obj){var p=new Object();p.left=0;p.top=0;while(obj){p.left+=obj.offsetLeft-obj.scrollLeft;p.top+=obj.offsetTop-obj.scrollTop;obj=obj.offsetParent;}\nreturn p;}\nCalendar.prototype.writeIframe=function(type){var timeDisplay=(type==\"DATE\")?\"hidden\":\"inherit\";var strIframe=\"<html><head><meta http-equiv='Content-Type' content='text/html; charset=gb2312'><style>\"\n+\"*{font-size: 12px; font-family: 宋体}\"+\".bg{  color: \"\n+WebCalendar.lightColor\n+\"; cursor: default; background-color: \"\n+WebCalendar.darkColor\n+\";}\"\n+\"table#tableMain{ width: 171; height: 180;}\"\n+\"table#tableWeek td{ color: \"\n+WebCalendar.lightColor\n+\";}\"\n+\"td#meizzYearHead, td#meizzYearMonth, td#meizzHour, td#meizzMinute{color: \"\n+WebCalendar.wordColor\n+\"}\"\n+\".out { text-align: center; border-top: 1px solid \"\n+WebCalendar.DarkBorder\n+\"; border-left: 1px solid \"\n+WebCalendar.DarkBorder\n+\";\"\n+\"border-right: 1px solid \"\n+WebCalendar.lightColor\n+\"; border-bottom: 1px solid \"\n+WebCalendar.lightColor\n+\";}\"\n+\".over{ text-align: center; border-top: 1px solid #FFFFFF; border-left: 1px solid #FFFFFF;\"\n+\"border-bottom: 1px solid \"\n+WebCalendar.DarkBorder\n+\"; border-right: 1px solid \"\n+WebCalendar.DarkBorder\n+\"}\"\n+\"input{ border: 1px solid \"\n+WebCalendar.darkColor\n+\"; padding-top: 1px; height: 18; cursor: pointer;\"\n+\"       color:\"\n+WebCalendar.wordColor\n+\"; background-color: \"\n+WebCalendar.btnBgColor\n+\"}\"\n+\"<\/style><\/head><body onselectstart='return false' style='margin: 0px' oncontextmenu='return false'><form name=meizz>\";if(WebCalendar.drag){strIframe+=\"<scr\"\n+\"ipt language=javascript>\"\n+\"if(navigator.userAgent.toLowerCase().indexOf('firefox') > 0){HTMLElement.prototype.__defineGetter__( 'innerText', function() {var text = new Array();var child = this.firstChild;while(child) {if(child.nodeType == 1) {if(child.tagName == 'BR')text.push('\\\\n');elsetext.push(child.innerText);} else if(child.nodeType == 3)text.push(child.nodeValue);child = child.nextSibling;}return text.join('');});HTMLElement.prototype.__defineSetter__( 'innerText', function(sText) {this.textContent = sText;});}\"\n+\"var drag=false, cx=0, cy=0, o = parent.WebCalendar.calendar; document.body.onmousemove = function (e){\"\n+\"if(!e)e = window.event;if(parent.WebCalendar.drag && drag){if(o.style.left=='')o.style.left=0; if(o.style.top=='')o.style.top=0;\"\n+\"o.style.left = parseInt(o.style.left) + e.clientX-cx;\"\n+\"o.style.top  = parseInt(o.style.top)  + e.clientY-cy;}};\"\n+\"document.body.onkeydown = function (e){ if(!e)e = window.event;switch(e.keyCode){  case 27 : parent.WebCalendar.doCancelClick(); break;\"\n+\"case 37 : parent.WebCalendar.prevM(); break; case 38 : parent.WebCalendar.prevY(); break; case 39 : parent.WebCalendar.nextM(); break; case 40 : parent.WebCalendar.nextY(); break;\"\n+\"case 84 : document.forms[0].today.click(); break;} e.keyCode = 0; e.returnValue= false;};\"\n+\"function dragStart(e){if(!e)e = window.event;cx=e.clientX; cy=e.clientY; drag=true;}<\/scr\"\n+\"ipt>\"}\nstrIframe+=\"<select name=tmpYearSelect  onblur='if(this.selectedIndex >= 0) {parent.WebCalendar.thisYear = this.options[this.selectedIndex].value; parent.WebCalendar.hiddenSelect(this);}' style='z-index:1;position:absolute;top:3;left:1;display:none'\"\n+\" onchange=' if(this.selectedIndex >= 0) {parent.WebCalendar.thisYear = this.options[this.selectedIndex].value; parent.WebCalendar.hiddenSelect(this); parent.WebCalendar.writeCalendar();parent.WebCalendar.doRefreshCalendar(this);}'><\/select>\"\n+\"<select name=tmpMonthSelect onblur='if(this.selectedIndex >= 0) {parent.WebCalendar.thisMonth = this.options[this.selectedIndex].value;parent.WebCalendar.hiddenSelect(this)}' style='z-index:1; position:absolute;top:3;left:40;display:none'\"\n+\" onchange='if(this.selectedIndex >= 0) {parent.WebCalendar.thisMonth = this.options[this.selectedIndex].value; parent.WebCalendar.hiddenSelect(this); parent.WebCalendar.writeCalendar();parent.WebCalendar.doRefreshCalendar(this);}'><\/select>\"\n+\"<select name=tmpHourSelect onblur='if(this.selectedIndex >= 0) {parent.WebCalendar.thisHour=this.options[this.selectedIndex].value;parent.WebCalendar.hiddenSelect(this)}' style='z-index:1; position:absolute;top:3;left:70;display:none'\"\n+\" onChange='if(this.selectedIndex >= 0) {parent.WebCalendar.thisHour=this.options[this.selectedIndex].value; parent.WebCalendar.hiddenSelect(this); parent.WebCalendar.writeCalendarEx();parent.WebCalendar.doRefreshCalendar(this);}'><\/select>\"\n+\"<select name=tmpMinuteSelect onblur='if(this.selectedIndex >= 0) {parent.WebCalendar.thisMinute=this.options[this.selectedIndex].value;parent.WebCalendar.hiddenSelect(this)}' style='z-index:1; position:absolute;top:3;left:90;display:none'\"\n+\" onChange='if(this.selectedIndex >= 0) {parent.WebCalendar.thisMinute=this.options[this.selectedIndex].value; parent.WebCalendar.hiddenSelect(this); parent.WebCalendar.writeCalendarEx();parent.WebCalendar.doRefreshCalendar(this);}'><\/select>\"\n+\"<table id=tableMain class=bg border=0 cellspacing=2 cellpadding=0>\"\n+\"<tr><td width=175 height=19 bgcolor='\"\n+WebCalendar.lightColor\n+\"'>\"\n+\"    <table width=140 id=tableHead border=0 cellspacing=1 cellpadding=0><tr align=center>\"\n+\"    <td width=40 id=meizzYearHead  title='点击此处选择年份' onclick='parent.WebCalendar.funYearSelect(parseInt(this.innerText, 10))'\"\n+\"        onmouseover='this.bgColor=parent.WebCalendar.darkColor; this.style.color=parent.WebCalendar.lightColor'\"\n+\"        onmouseout='this.bgColor=parent.WebCalendar.lightColor; this.style.color=parent.WebCalendar.wordColor'><\/td>\"\n+\"    <td width=26 id=meizzYearMonth title='点击此处选择月份' onclick='parent.WebCalendar.funMonthSelect(parseInt(this.innerText, 10))'\"\n+\"        onmouseover='this.bgColor=parent.WebCalendar.darkColor; this.style.color=parent.WebCalendar.lightColor'\"\n+\"        onmouseout='this.bgColor=parent.WebCalendar.lightColor; this.style.color=parent.WebCalendar.wordColor'><\/td>\"\n+\"    <td align=center width=15 id=meizzDelimiter style='visibility:\"\n+timeDisplay\n+\"'><b>|<\/b><\/td>\"\n+\"    <td width=30 id=meizzHour title='点击此处选择小时' onclick='parent.WebCalendar.funHourSelect(parseInt(this.innerText, 10))'\"\n+\"        onmouseover='this.bgColor=parent.WebCalendar.darkColor; this.style.color=parent.WebCalendar.lightColor'\"\n+\"        onmouseout='this.bgColor=parent.WebCalendar.lightColor; this.style.color=parent.WebCalendar.wordColor' style='visibility:\"\n+timeDisplay\n+\"'><\/td>\"\n+\"    <td width=30 id=meizzMinute title='点击此处选择分钟' onclick='parent.WebCalendar.funMinuteSelect(parseInt(this.innerText, 10))'\"\n+\"        onmouseover='this.bgColor=parent.WebCalendar.darkColor; this.style.color=parent.WebCalendar.lightColor'\"\n+\"        onmouseout='this.bgColor=parent.WebCalendar.lightColor; this.style.color=parent.WebCalendar.wordColor' style='visibility:\"\n+timeDisplay\n+\"'><\/td>\"\n+\"<\/tr><\/table>\"\n+\"<\/td><\/tr><tr><td height=20><table id=tableWeek border=1 width=171 cellpadding=0 cellspacing=0 \";if(WebCalendar.drag){strIframe+=\"onmousedown='dragStart()' onmouseup='drag=false' onmouseout='drag=false'\";}\nstrIframe+=\" borderColorLight='\"\n+WebCalendar.darkColor\n+\"' borderColorDark='\"\n+WebCalendar.lightColor\n+\"'>\"\n+\"    <tr align=center><td height=20>日<\/td><td>一<\/td><td>二<\/td><td>三<\/td><td>四<\/td><td>五<\/td><td>六<\/td><\/tr><\/table>\"\n+\"<\/td><\/tr><tr><td valign=top width=140 bgcolor='\"+WebCalendar.lightColor+\"'>\"\n+\"    <table id=tableDay height=120 width=171 border=0 cellspacing=1 cellpadding=0>\";for(var x=0;x<5;x++){strIframe+=\"<tr height='18'>\";for(var y=0;y<7;y++)\nstrIframe+=\"<td width='50' class=out id='meizzDay\"+(x*7+y)+\"'><\/td>\";strIframe+=\"<\/tr>\";}\nstrIframe+=\"<tr>\";for(var x=35;x<39;x++)\nstrIframe+=\"<td class=out id='meizzDay\"+x+\"'><\/td>\";strIframe+=\"<td colspan=3 class=out title='\"\n+WebCalendar.regInfo\n+\"' style='background-color:\"\n+WebCalendar.btnBgColor\n+\"'><input style=' background-color: \"\n+WebCalendar.btnBgColor\n+\";visibility:\"\n+timeDisplay\n+\";cursor: pointer; padding-top: 4px; padding-left: 0px; width: 45%; height: 100%; border: 0' onfocus='this.blur()'\"\n+\" type=button value='确定' onclick='parent.WebCalendar.doOkClick()'><input style=' background-color: \"\n+WebCalendar.btnBgColor\n+\";cursor: pointer; padding-top: 4px; padding-left: 0px; width: 55%; height: 100%; border: 0' onfocus='this.blur()'\"\n+\" type=button value='取消' onclick='parent.WebCalendar.doCancelClick()'><\/td><\/tr><\/table>\"\n+\"<\/td><\/tr><tr><td height=20 width=171 bgcolor='\"\n+WebCalendar.lightColor\n+\"'>\"\n+\"    <table border=0 cellpadding=0 cellspacing=0 width=171>\"\n+\"    <tr><td noWrap><input name=prevYear title='前进1 年&#13;快捷键：↑' onclick='parent.WebCalendar.prevY()' type=button value='&lt;&lt;'\"\n+\"    onfocus='this.blur()' style='padding-left: 0px;width:20px;meizz:expression(this.disabled=parent.WebCalendar.thisYear==1000)'><input\"\n+\"    onfocus='this.blur()' name=prevMonth title='向前翻 1 月&#13;快捷键：←' onclick='parent.WebCalendar.prevM()' type=button value='&lt;&nbsp;' style='padding-left: 0px;width:20px;'>\"\n+\"    <\/td><td align=center><input name=today type=button value='今天' onfocus='this.blur()' style='padding-left: 0px;width: 40px' title='当前日期&#13;快捷键：T'\"\n+\"    onclick='parent.WebCalendar.doToday();'>\"\n+\"    <\/td><td align=right><input title='向后翻 1 月&#13;快捷键：→' name=nextMonth onclick='parent.WebCalendar.nextM()' type=button value='&nbsp;&gt;'\"\n+\"    onfocus='this.blur()' style='padding-left: 0px;width:20px;'><input name=nextYear title='向后翻 1 年&#13;快捷键：↓' onclick='parent.WebCalendar.nextY()' type=button value='&gt;&gt;' style='padding-left: 0px;width:20px;'\"\n+\"    onfocus='this.blur()' style='width:20px;meizz:expression(this.disabled=parent.WebCalendar.thisYear==9999)'><\/td><\/tr><\/table>\"\n+\"<\/td><\/tr><table><\/form><\/body><\/html>\";WebCalendar.iframe.document.writeln(strIframe);WebCalendar.iframe.document.close();for(var i=0;i<39;i++){WebCalendar.dayObj[i]=WebCalendar.iframe.document.getElementById(\"meizzDay\"+i);WebCalendar.dayObj[i].onmouseover=dayMouseOver;WebCalendar.dayObj[i].onmouseout=dayMouseOut;WebCalendar.dayObj[i].onclick=WebCalendar.returnDate;}}\nfunction WebCalendarC()\n{this.regInfo=\"\";this.regInfo+=\"\";this.daysMonth=new Array(31,28,31,30,31,30,31,31,30,31,30,31);this.day=new Array(39);this.dayObj=new Array(39);this.dateStyle=null;this.objExport=null;this.eventSrc=null;this.inputDate=null;this.thisYear=new Date().getFullYear();this.thisMonth=new Date().getMonth()+1;this.thisDay=new Date().getDate();this.thisHour=new Date().getHours();this.thisMinute=new Date().getMinutes();this.today=this.thisDay+\"/\"+this.thisMonth+\"/\"+this.thisYear;this.iframe=document.getElementsByName(\"meizzCalendarIframe\")[0].contentWindow;this.calendar=this.getObjectById(\"meizzCalendarLayer\");this.dateReg=\"\";this.yearFall=50;this.format=\"yyyy-mm-dd\";this.timeShow=false;this.drag=true;this.darkColor=\"#0B83D9\";this.lightColor=\"#FFFFFF\";this.btnBgColor=\"#E9F4FE\";this.wordColor=\"#000000\";this.wordDark=\"#DCDCDC\";this.dayBgColor=\"#E9F4FE\";this.todayColor=\"#8DC63F\";this.DarkBorder=\"#CFE5F8\";}\nWebCalendarC.prototype.doToday=function(){this.thisYear=new Date().getFullYear();this.thisMonth=new Date().getMonth()+1;this.writeCalendar();this.returnDate(null,new Date().getDate()+'/'+(new Date().getMonth()+1)+'/'\n+new Date().getFullYear());}\nWebCalendarC.prototype.prevM=function()\n{WebCalendar.thisDay=1;if(WebCalendar.thisMonth==1){WebCalendar.thisYear--;WebCalendar.thisMonth=13;}\nWebCalendar.thisMonth--;WebCalendar.writeCalendar();this.doRefreshCalendar();}\nWebCalendarC.prototype.nextM=function()\n{WebCalendar.thisDay=1;if(WebCalendar.thisMonth==12){WebCalendar.thisYear++;WebCalendar.thisMonth=0;}\nWebCalendar.thisMonth++;WebCalendar.writeCalendar();this.doRefreshCalendar();}\nWebCalendarC.prototype.prevY=function(){WebCalendar.thisDay=1;WebCalendar.thisYear--;WebCalendar.writeCalendar();this.doRefreshCalendar();}\nWebCalendarC.prototype.nextY=function(){WebCalendar.thisDay=1;WebCalendar.thisYear++;WebCalendar.writeCalendar();this.doRefreshCalendar();}\nWebCalendarC.prototype.funMinuteSelect=function()\n{var m=isNaN(parseInt(WebCalendar.thisMinute,10))?new Date().getMonth()+1:parseInt(WebCalendar.thisMinute);var e=WebCalendar.iframe.document.forms[0].tmpMinuteSelect;for(var i=0;i<60;i++)\ne.options.add(new Option(i+\"分钟\",i));e.style.display=\"\";e.value=m;e.focus();window.status=e.style.top;}\nWebCalendarC.prototype.funHourSelect=function()\n{var m=isNaN(parseInt(WebCalendar.thisHour,10))?new Date().getMonth()+1:parseInt(WebCalendar.thisHour);var e=WebCalendar.iframe.document.forms[0].tmpHourSelect;for(var i=0;i<24;i++)\ne.options.add(new Option(i+\"时\",i));e.style.display=\"\";e.value=m;e.focus();window.status=e.style.top;}\nWebCalendarC.prototype.funMonthSelect=function()\n{var m=isNaN(parseInt(WebCalendar.thisMonth,10))?new Date().getMonth()+1:parseInt(WebCalendar.thisMonth);var e=WebCalendar.iframe.document.forms[0].tmpMonthSelect;e.options.add(new Option(\"1月\",1));e.options.add(new Option(\"2月\",2));e.options.add(new Option(\"3月\",3));e.options.add(new Option(\"4月\",4));e.options.add(new Option(\"5月\",5));e.options.add(new Option(\"6月\",6));e.options.add(new Option(\"7月\",7));e.options.add(new Option(\"8月\",8));e.options.add(new Option(\"9月\",9));e.options.add(new Option(\"10月\",10));e.options.add(new Option(\"11月\",11));e.options.add(new Option(\"12月\",12));e.style.display=\"\";e.value=m;e.focus();window.status=e.style.top;}\nWebCalendarC.prototype.funYearSelect=function()\n{var n=WebCalendar.yearFall;var e=WebCalendar.iframe.document.forms[0].tmpYearSelect;var y=isNaN(parseInt(WebCalendar.thisYear,10))?new Date().getFullYear():parseInt(WebCalendar.thisYear);y=(y<=1000)?1000:((y>=9999)?9999:y);var min=(y-n>=1000)?y-n:1000;var max=(y+n<=9999)?y+n:9999;min=(max==9999)?max-n*2:min;max=(min==1000)?min+n*2:max;for(var i=min;i<=max;i++)\ne.options.add(new Option(i+\"年\",i));e.style.display=\"\";e.value=y;e.focus();}\nWebCalendarC.prototype.writeCalendarEx=function(){var y=WebCalendar.thisYear;var m=WebCalendar.thisMonth;var d=WebCalendar.thisDay;var h=WebCalendar.thisHour;var t=WebCalendar.thisMinute;WebCalendar.daysMonth[1]=(0==y%4&&(y%100!=0||y%400==0))?29:28;if(!(y<=9999&&y>=1000&&parseInt(m,10)>0&&parseInt(m,10)<13&&parseInt(d,10)>0&&parseInt(h,10)<24&&parseInt(h,10)>=0&&parseInt(t,10)<60&&parseInt(t,10)>=0)){alert(\"对不起，你输入了错误的日期！\");WebCalendar.thisYear=new Date().getFullYear();WebCalendar.thisMonth=new Date().getMonth()+1;WebCalendar.thisDay=new Date().getDate();WebCalendar.thisHour=new Date().getHours();WebCalendar.thisMinute=new Date().getMinutes();}\ny=WebCalendar.thisYear;m=WebCalendar.thisMonth;d=WebCalendar.thisDay;h=WebCalendar.thisHour;t=WebCalendar.thisMinute;WebCalendar.iframe.document.getElementById('meizzYearHead').innerText=y+\"年\";var monthStr=\"\";switch(parseInt(m,10)){case 1:monthStr=\"1月\";break;case 2:monthStr=\"2月\";break;case 3:monthStr=\"3月\";break;case 4:monthStr=\"4月\";break;case 5:monthStr=\"5月\";break;case 6:monthStr=\"6月\";break;case 7:monthStr=\"7月\";break;case 8:monthStr=\"8月\";break;case 9:monthStr=\"9月\";break;case 10:monthStr=\"10月\";break;case 11:monthStr=\"11月\";break;case 12:monthStr=\"12月\";break;}\nWebCalendar.iframe.document.getElementById('meizzYearMonth').innerText=monthStr;WebCalendar.iframe.document.getElementById('meizzHour').innerText=parseInt(h,10)+\"时\";WebCalendar.iframe.document.getElementById('meizzMinute').innerText=parseInt(t,10)+\"分\";WebCalendar.daysMonth[1]=(0==y%4&&(y%100!=0||y%400==0))?29:28;var w=new Date(y,m-1,1).getDay();var prevDays=m==1?WebCalendar.daysMonth[11]:WebCalendar.daysMonth[m-2];for(var i=(w-1);i>=0;i--)\n{WebCalendar.day[i]=prevDays+\"/\"+(parseInt(m,10)-1)+\"/\"+y;if(m==1)\nWebCalendar.day[i]=prevDays+\"/\"+12+\"/\"+(parseInt(y,10)-1);prevDays--;}\nfor(var i=1;i<=WebCalendar.daysMonth[m-1];i++)\nWebCalendar.day[i+w-1]=i+\"/\"+m+\"/\"+y;for(var i=1;i<39-w-WebCalendar.daysMonth[m-1]+1;i++){WebCalendar.day[WebCalendar.daysMonth[m-1]+w-1+i]=i+\"/\"+(parseInt(m,10)+1)\n+\"/\"+y;if(m==12)\nWebCalendar.day[WebCalendar.daysMonth[m-1]+w-1+i]=i+\"/\"+1+\"/\"\n+(parseInt(y,10)+1);}}\nWebCalendarC.prototype.writeCalendar=function()\n{this.writeCalendarEx();for(var i=0;i<39;i++)\n{var a=WebCalendar.day[i].split(\"/\");WebCalendar.dayObj[i].innerText=a[0];WebCalendar.dayObj[i].title=a[2]+\"-\"+appendZero(a[1])+\"-\"+appendZero(a[0]);WebCalendar.dayObj[i].bgColor=WebCalendar.dayBgColor;WebCalendar.dayObj[i].style.color=WebCalendar.wordColor;if((i<10&&parseInt(WebCalendar.day[i],10)>20)||(i>27&&parseInt(WebCalendar.day[i],10)<12))\nWebCalendar.dayObj[i].style.color=WebCalendar.wordDark;if(WebCalendar.inputDate!=null&&WebCalendar.inputDate.indexOf(WebCalendar.day[i])==0)\n{WebCalendar.dayObj[i].bgColor=WebCalendar.darkColor;WebCalendar.dayObj[i].style.color=WebCalendar.lightColor;if(!WebCalendar.currentId)\nWebCalendar.currentId=WebCalendar.dayObj[i].id;}\nif(WebCalendar.day[i]==WebCalendar.today)\n{WebCalendar.dayObj[i].bgColor=WebCalendar.todayColor;WebCalendar.dayObj[i].style.color=WebCalendar.lightColor;}}}\nWebCalendarC.prototype.doRefreshCalendar=function(e){if(WebCalendar.currentId){for(var i=0;i<39;i++){if(WebCalendar.dayObj[i].id==WebCalendar.currentId){WebCalendar.isRefreshing=true;try{if(WebCalendar.day[WebCalendar.dayObj[i].id.substr(8)].split(\"/\")[1]==WebCalendar.thisMonth){if(domutils.isIE())\nWebCalendar.dayObj[i].click();WebCalendar.dayObj[i].className=\"over\";WebCalendar.dayObj[i].style.backgroundColor=WebCalendar.darkColor;WebCalendar.dayObj[i].style.color=WebCalendar.lightColor;}else{WebCalendar.dayObj[i].style.removeAttribute('backgroundColor');var len=WebCalendar.day.length;for(var j=len-1;j>0;j--){if(WebCalendar.day[j].split(\"/\")[1]==WebCalendar.thisMonth){if(domutils.isIE())\nWebCalendar.dayObj[j].click();WebCalendar.dayObj[j].className=\"over\";WebCalendar.dayObj[j].style.backgroundColor=WebCalendar.darkColor;WebCalendar.dayObj[j].style.color=WebCalendar.lightColor;break;}}}}finally{WebCalendar.isRefreshing=false;}\nbreak;}}}}\nWebCalendarC.prototype.hiddenSelect=function(e){e.innerHTML=\"\";e.style.display=\"none\";}\nWebCalendarC.prototype.getObjectById=function(id){if(document.all)\nreturn(eval(\"document.all.\"+id));return(eval(id));}\nWebCalendarC.prototype.doCancelClick=function(){if(WebCalendar.objExport)\nWebCalendar.objExport.value=WebCalendar.tempValue;this.hiddenCalendar();}\nWebCalendarC.prototype.doOkClick=function(){if(WebCalendar.objExport)\nWebCalendar.tempValue=WebCalendar.objExport.value;this.hiddenCalendar();}\nWebCalendarC.prototype.hiddenCalendar=function(){if(this.owner&&this.owner.removeListener)\nthis.owner.removeListener(document,\"click\",this.owner.docOnClick);this.getObjectById(\"meizzCalendarLayer\").style.display=\"none\";this.getObjectById(\"meizzCalendarLayer\").parentNode.style.display=\"none\";if(WebCalendar.objExport){try{WebCalendar.objExport.focus();WebCalendar.objExport.blur();}catch(e){}}}\nWebCalendarC.prototype.returnDate=function()\n{var a=(arguments.length!=2)?WebCalendar.day[this.id.substr(8)].split(\"/\"):arguments[1].split(\"/\");if(a[1]!=WebCalendar.thisMonth)\nreturn;if(WebCalendar.currentId){for(var i=0;i<39;i++){if(WebCalendar.dayObj[i].id==WebCalendar.currentId){var d=WebCalendar.day[WebCalendar.currentId.substr(8)],a=d.split(\"/\");WebCalendar.dayObj[i].style.backgroundColor=\"\";if(a[1]==WebCalendar.thisMonth&&d!=WebCalendar.today){if(WebCalendar.dateStyle){WebCalendar.dayObj[i].bgColor=WebCalendar.btnBgColor;WebCalendar.dayObj[i].style.color=WebCalendar.lightColor;WebCalendar.dayObj[i].style.color=WebCalendar.wordColor;}}\nbreak;}}}\nif(WebCalendar.objExport){var returnValue;var a=(arguments.length!=2)?WebCalendar.day[this.id.substr(8)].split(\"/\"):arguments[1].split(\"/\");var d=WebCalendar.format.match(/^(\\w{4})(-|\\/)(\\w{1,2})\\2(\\w{1,2})$/);if(d==null){alert(\"你设定的日期输出格式不对！\\r\\n\\r\\n请重新定义 WebCalendar.format ！\");return false;}\nvar flag=d[3].length==2||d[4].length==2;returnValue=flag?a[2]+d[2]+appendZero(a[1])+d[2]+appendZero(a[0]):a[2]+d[2]\n+a[1]+d[2]+a[0];if(WebCalendar.timeShow){var h=new Date().getHours(),m=new Date().getMinutes(),s=new Date().getSeconds();returnValue+=flag?\" \"+appendZero(h)+\":\"+appendZero(m)+\":\"+appendZero(s):\" \"+h+\":\"+m+\":\"+s;}\nif(WebCalendar.dateTimeType==\"DATETIME\"){returnValue+=\" \"+appendZero(WebCalendar.thisHour)+\":\"\n+appendZero(WebCalendar.thisMinute);}else if(WebCalendar.dateTimeType==\"TIME\"){returnValue=appendZero(WebCalendar.thisHour)+\":\"\n+appendZero(WebCalendar.thisMinute);}\nWebCalendar.currentId=this.id;WebCalendar.objExport.value=returnValue;if(WebCalendar.dateTimeType==\"DATE\"&&!WebCalendar.isRefreshing)\nWebCalendar.doOkClick();}}\nfunction appendZero(n){return((\"00\"+n).substr((\"00\"+n).length-2));}\nfunction dayMouseOver(){this.className=\"over\";this.style.backgroundColor=WebCalendar.darkColor;if(WebCalendar.day[this.id.substr(8)].split(\"/\")[1]==WebCalendar.thisMonth)\nthis.style.color=WebCalendar.lightColor;}\nfunction dayMouseOut(){this.className=\"out\";var d=WebCalendar.day[this.id.substr(8)],a=d.split(\"/\");if(WebCalendar.currentId!=this.id){this.style.backgroundColor=\"\";if(a[1]==WebCalendar.thisMonth&&d!=WebCalendar.today){if(WebCalendar.dateStyle&&a[0]==parseInt(WebCalendar.dateStyle[4],10))\nthis.style.color=WebCalendar.lightColor;this.style.color=WebCalendar.wordColor;}}}","js/freequery/tree/ParameterTree.js":"\nvar TreeView=jsloader.resolve(\"freequery.tree.TreeView\");var ParameterTreeNode=jsloader.resolve(\"freequery.tree.ParameterTreeNode\");var util=jsloader.resolve(\"freequery.common.util\");var modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var PopupMenu=jsloader.resolve(\"freequery.menu.PopupMenu\");var TreeNode=jsloader.resolve(\"freequery.tree.TreeNode\");var ParameterTree=function(parent,dropDownTree){ParameterTree.superclass.constructor.call(this,parent);this.dropDownTree=dropDownTree;this.rootNode._id=\"\";this.dynamicLoad=true;this.checkDescendents=false;this.onCheckNode.subscribe(this.doCheckDescendents,this);};lang.extend(ParameterTree,TreeView);ParameterTree.prototype.createTreeNode=function(text,level,mayHasChild,parent,id){return new ParameterTreeNode(text,level,mayHasChild,parent,id);};ParameterTree.prototype.render=function(clientId,paramId,parentFieldName,checkDescendents,noNull){if(!this._isInit){this.checkDescendents=!!checkDescendents;this.clientId=clientId;this.paramId=paramId;this.parentFieldName=parentFieldName;var ret=util.remoteInvoke(\"ParameterPanelService\",\"getParamRootValue\",[clientId,paramId]);if(ret.succeeded&&ret.result){var objList=ret.result;for(var i=0;i<ret.result.length;i++){var node=this.rootNode.addDropDownTreeNode(ret.result[i]);node.tree=this;if(this.isExistInSelectIds(node._id))node.setChecked(1);}}else{modalWindow.showServerError(ret);return;}\nif(this.rootNode.checkBoxType==TreeNode.CHECKBOX_YES){this.menuHandler=new DropDownTreeMenuCommand();this.menuHandler.src=this;this.popupMenu=new PopupMenu(document.body,this.menuHandler);this.popupMenu.setWidth(\"145px\");this.popupMenu.createMenuItem(\"选择当前层节点\",\"ALLSIBLING\");this.popupMenu.createMenuItem(\"取消选择当前层节点\",\"UNALLSIBLING\");this.popupMenu.createSeparator();this.popupMenu.createMenuItem(\"选择下一层节点\",\"ALLCHILDREN\");this.popupMenu.createMenuItem(\"取消选择下一层节点\",\"UNALLCHILDREN\");}else{if(noNull){this.menuHandler=new DropDownTreeMenuCommand();this.menuHandler.src=this;this.popupMenu=new PopupMenu(document.body,this.menuHandler);this.popupMenu.setWidth(\"145px\");this.popupMenu.createMenuItem(\"清空条件\",\"CLEARSELECTED\");}}\nthis._isInit=true;}};ParameterTree.prototype.doOnPopupMenu=function(ev){return this.selectedNode!=null;}\nParameterTree.prototype.setCheckAllSibling=function(node,checked){var parentNode=node.parentNode;if(!parentNode)return;var nodes=parentNode.childCount;var node=parentNode.firstChild;for(var i=0;i<nodes;i++){node.setChecked(checked);node=node.nextSibling;}}\nParameterTree.prototype.setCheckAllChildren=function(node,checked){if(!node)\nreturn;if(!node.getExpanded()){var oldDynamicLoad=this.dynamicLoad;this.dynamicLoad=false;node.setExpanded(true);this.dynamicLoad=oldDynamicLoad;}\nif(node.childCount==0)\nreturn;var tmp=node.firstChild;while(tmp){tmp.setChecked(checked);tmp=tmp.nextSibling;}}\nParameterTree.prototype.doCheckDescendents=function(treeNode,checked){if(!this.checkDescendents){return;}\nif(!this.lazyLoadChild){function lambda(treeNode){for(var child=treeNode.firstChild;child;child=child.nextSibling){child.setChecked(checked);lambda(child);}}\nlambda(treeNode);return;}\nvar oldDynamicLoad=this.dynamicLoad;this.dynamicLoad=false;try{var t=this,lambda=function(treeNode){treeNode.setChecked(checked);if(treeNode._isInitChild){for(var child=treeNode.firstChild;child;child=child.nextSibling){lambda(child);}}else{t.initDescendents(treeNode);lambda(treeNode);}};lambda(treeNode);}finally{this.dynamicLoad=oldDynamicLoad;}};ParameterTree.prototype.isExistInSelectIds=function(id){if(this.dropDownTree.selectedId==null||this.dropDownTree.selectedId==\"\"){return false;}\nvar data=this.dropDownTree.selectedId.split(\",\");for(var i=0;i<data.length;i++){if(data[i]==id)return true;}\nreturn false;}\nParameterTree.prototype.selectNode=function(node,notFocus,e){this.resetNodesStyle();var oldSelected=this.selectedNode;this.selectNodeWithoutFire(node,notFocus);if(!e||e.button!=2){this.onSelectNode.fire(this,this.selectedNode,oldSelected,this.selected);}};ParameterTree.prototype.clearSelected=function(node,notFocus,e){var node={_id:\"\",_alias:\"\"}\nthis.selectNodeWithoutFire(null,notFocus);this.onSelectNode.fire(this,node);var len=this.selected.length;for(var i=0;i<len;i++){this.selected.pop();}};ParameterTree.prototype.initDescendents=function(treeNode){var tree=treeNode.tree;treeNode.isLoading=true;treeNode.removeAllChildren();var ret=util.remoteInvokeEx(\"ParameterPanelService\",\"getParamAllChildrenValue\",[tree.clientId,tree.paramId,tree.parentFieldName,treeNode._id]);if(ret&&ret.succeeded){var result=lang.parseJSON(ret.result);tree.addDropDownTreeNodes(treeNode,result);}\ntreeNode.isLoading=false;treeNode.initExpanderImg();treeNode._isInitChild=true;};ParameterTree.prototype.addDropDownTreeNodes=function(parentNode,items){if(!items||!items.length){return;}\nvar tree=parentNode.tree;for(var i=0,len=items.length;i<len;i++){var item=items[i],data=[item[0],item[1],item[2]],childs=item[3];var node=parentNode.addDropDownTreeNode(data);if(tree.isExistInSelectIds(node._id)){node.setChecked(1);}\nnode.isLoading=true;node.removeAllChildren();if(node._mayHasChild&&childs){tree.addDropDownTreeNodes(node,lang.parseJSON(childs));}\nnode.isLoading=false;node.initExpanderImg();node._isInitChild=true;}};ParameterTree.prototype.setLazyLoadChild=function(lazy){this.lazyLoadChild=lazy;}\nParameterTree.prototype.loadChildFromCache=function(parentNode,lambda){if(!this.childrenCache){if(this.dynamicLoad){util.remoteInvoke(\"ParameterPanelService\",\"getParamTreeStandByValue\",[this.clientId,this.paramId],function(result){this.childrenCache=result.result;this.loadChildFromCache(parentNode,lambda);},this);}else{var result=util.remoteInvokeEx(\"ParameterPanelService\",\"getParamTreeStandByValue\",[this.clientId,this.paramId]);if(!result)\nreturn;this.childrenCache=result.result;this.loadChildFromCache(parentNode,lambda);}}else{var ret={succeeded:true,result:[]}\nvar id=parentNode._id;for(var i=0,len=this.childrenCache.length;i<len;i++){if(this.childrenCache[i][1]==parentNode._id){id=this.childrenCache[i][0];break;}}\nfor(var i=0,len=this.childrenCache.length;i<len;i++){if(this.childrenCache[i][3]==id){var hasChild=\"false\";for(var j=0,leng=this.childrenCache.length;j<leng;j++){if(this.childrenCache[j][3]==this.childrenCache[i][0]){hasChild=\"true\";break;}}\nret.result.push([this.childrenCache[i][1],this.childrenCache[i][2],hasChild]);}}\nparentNode.remoteCallback(ret,lambda);if(this.checkDescendents){var tmp=parentNode.firstChild;while(tmp){tmp.setChecked(parentNode.checked?TreeNode.CHECKBOX_YES:TreeNode.CHECKBOX_NO);tmp=tmp.nextSibling;}}}}\nParameterTree.prototype.getCheckedNodes=function(){var nodes=ParameterTree.superclass.getCheckedNodes.call(this);if(this.lazyLoadChild!=false){return nodes;}\nif(!this.childrenCache){var ret=util.remoteInvokeEx(\"ParameterPanelService\",\"getParamTreeStandByValue\",[this.clientId,this.paramId]);if(!ret||!ret.succeeded||!ret.result){return nodes;}\nthis.childrenCache=ret.result;}\nif(!this.mapCache){var map=this.mapCache={'id2item':{},'pid2childIds':{},'value2id':{}};for(var i=0,len=this.childrenCache.length;i<len;i++){var item=this.childrenCache[i];var id=item[0],value=item[1],pid=item[3];var childIds=map.pid2childIds[pid]=map.pid2childIds[pid]||[];childIds.push(id);map.id2item[id]=item;map.value2id[value]=id;}}\nvar map=this.mapCache,allNodes=this.nodes;var id2item=map.id2item,pid2childIds=map.pid2childIds,value2id=map.value2id;var result=[],checkedValues={};var pushItem=function(id){var item=id2item[id],value=item&&item[1];if(!item||checkedValues[value]){return;}\ncheckedValues[value]=true;var node=allNodes[value];if(node&&node.checked==TreeNode.CHECKBOX_NO){return;}else if(!node||node.checked==TreeNode.CHECKBOX_YES){var displayValue=item[2];result.push({\"_id\":value,\"_alias\":displayValue});}\nvar childIds=pid2childIds[id];if(childIds){for(var i=0,len=childIds.length;i<len;i++){pushItem(childIds[i]);}}};for(var i=0,len=nodes.length;i<len;i++){var node=nodes[i],nodeId=node._id;pushItem(value2id[nodeId]);}\nreturn result;}\nvar DropDownTreeMenuCommand=function(){this.src=null;};DropDownTreeMenuCommand.prototype.destroy=function(){};DropDownTreeMenuCommand.prototype.doCmd=function(cmd){if(this.src==null)\nreturn;if(cmd==\"ALLSIBLING\"){this.src.setCheckAllSibling(this.src.selectedNode,TreeNode.CHECKBOX_YES);}else if(cmd==\"UNALLSIBLING\"){this.src.setCheckAllSibling(this.src.selectedNode,TreeNode.CHECKBOX_NO);}else if(cmd==\"ALLCHILDREN\"){this.src.setCheckAllChildren(this.src.selectedNode,TreeNode.CHECKBOX_YES);}else if(cmd==\"UNALLCHILDREN\"){this.src.setCheckAllChildren(this.src.selectedNode,TreeNode.CHECKBOX_NO);}else if(cmd==\"CLEARSELECTED\"){this.src.clearSelected();}};","js/freequery/tree/TreeView.js":"\nvar Module=jsloader.resolve(\"freequery.widget.Module\");var util=jsloader.resolve(\"freequery.common.util\");var TreeNode=jsloader.resolve(\"freequery.tree.TreeNode\");var CustomEvent=jsloader.resolve(\"freequery.lang.CustomEvent\");var eventutil=jsloader.resolve(\"freequery.lang.eventutil\");var TreeView=function(parent){TreeView.superclass.constructor.call(this);this.CSS_NODEDIV=\"tree_nodediv\";this.CSS_TEXTSPAN=\"tree_textSpan\";this.CSS_TEXTSPAN_SELECTED=\"tree_textSpan_Selected\";this.multSelect=false;this.selected=new Array();this.rootPane=document.createElement(\"SPAN\");this.container=parent;if(parent){parent.appendChild(this.rootPane);parent.style.MozUserSelect=\"none\";}\nthis.nodes=new Array();this.rootNode=this.createTreeNode(\"\",-1,true,this.rootPane);this.rootNode.initChildSpan(false);this.rootNode.tree=this;this.nodes[this.rootNode._id]=this.rootNode;this.rootPane.removeChild(this.rootNode.nodePane);this.rootPane.appendChild(this.rootNode.childSpan);this.searchCondition=null;this.searchNodeIdArray=[];this.needCheckedNodeIdList=[];this.addListener(this.rootPane,\"mousedown\",this.doOnMouseDown,this);this.addListener(this.rootPane,\"mouseup\",this.doOnMouseUp,this);this.addListener(this.rootPane,\"contextmenu\",this.doOnContextMenu,this);this.addListener(this.rootPane,\"dblclick\",this.doOnDblclick,this);this.addListener(this.rootPane,\"keydown\",this.doOnKeyDown,this);this.addListener(this.rootPane,\"selectstart\",this.doOnSelectStart,this);this.addListener(this.rootPane,\"dragover\",this.doOnDragOver,this);this.addListener(this.rootPane,\"drop\",this.doOnDrop,this);this.onSelectNode=new CustomEvent(\"selectNode\",this);this.onDblClick=new CustomEvent(\"dblClick\",this);this.onDragDrop=new CustomEvent(\"dragdrop\",this);this.onCheckNode=new CustomEvent(\"checkNode\",this);this.onSelectedNodeDown=new CustomEvent(\"selectedNodeDown\",this);};lang.extend(TreeView,Module);TreeView.prototype.render=function(){};TreeView.prototype.createTreeNode=function(text,level,mayHasChild,parent,id){return new TreeNode(text,level,mayHasChild,parent,id);};TreeView.prototype.doOnSelectStart=function(e){if(!this._initSelection)\ndomutils.stopEvent(e);};TreeView.prototype.doOnDblclick=function(e){this.selectNode(this.getTreeNode(e.target));if(this.selectedNode){this.selectedNode.setExpanded(true);this.onDblClick.fire(this,this.selectedNode,e);}};TreeView.prototype.getTreeNode=function(target){var htmlNode=target;var nodeList=new Array();while(htmlNode!=null&&htmlNode!=this.rootPane){if(domutils.hasClassName(htmlNode,this.CSS_NODEDIV))\nnodeList.push(htmlNode);htmlNode=htmlNode.parentNode;}\nif(htmlNode==null)\nreturn null;var node=this.rootNode.firstChild;for(var i=nodeList.length-1;i>=0;i--){while(node!=null){if(node.nodePane==nodeList[i])\nbreak;node=node.nextSibling;}\nif(node==null)\nreturn null;if(i>0)\nnode=node.firstChild;}\nreturn node;};TreeView.prototype.doOnMouseDown=function(e){var node=this.getTreeNode(e.target);if(node!=null)\nnode.doOnMouseDown(e,e.target);};TreeView.prototype.doOnMouseUp=function(e){var node=this.getTreeNode(e.target);if(node&&this.multSelect){this.doSelectedNodeUp(node);}}\nTreeView.prototype.doOnContextMenu=function(e){if(this.popupMenu&&this.doOnPopupMenu)\nif(this.doOnPopupMenu(e)){this.popupMenu.popup(e);}\ndomutils.stopEvent(e);if(domutils.isFirefox()){var node=this.getTreeNode(e.target);if(node!=null)\nnode.doOnTextSpanMouseDown(e);}}\nTreeView.prototype.doOnKeyDown=function(e){var keyCode=e.keyCode;if(!this.selectedNode){if(!this.rootNode||!this.rootNode.hasChild())\nreturn;this.selectNode(this.rootNode.firstChild);}\nvar match=true;switch(keyCode){case 37:if(this.selectedNode.hasChild()&&this.selectedNode.getExpanded())\nthis.selectedNode.setExpanded(false);else if(this.selectedNode.parentNode!=null&&this.selectedNode.parentNode!=this.rootNode)\nthis.selectNode(this.selectedNode.parentNode);break;case 39:if(this.selectedNode.hasChild()){if(this.selectedNode.getExpanded())\nthis.selectNode(this.selectedNode.firstChild);else\nthis.selectedNode.setExpanded(true);}\nbreak;case 38:if(this.selectedNode.previousSibling!=null){var tmp=this.selectedNode.previousSibling;while(tmp!=null&&tmp.hasChild()&&tmp.getExpanded())\ntmp=tmp.lastChild;if(tmp!=null){this.selectNode(tmp);}}else if(this.selectedNode.parentNode!=null&&this.selectedNode.parentNode!=this.rootNode)\nthis.selectNode(this.selectedNode.parentNode);break;case 40:if(this.selectedNode.hasChild()&&this.selectedNode.getExpanded()){this.selectNode(this.selectedNode.firstChild);}else{var tmp=this.selectedNode;while(tmp!=null&&tmp.nextSibling==null){tmp=tmp.parentNode;}\nif(tmp!=null){this.selectNode(tmp.nextSibling);}}\nbreak;default:match=false;}\nif(match)\ndomutils.preventDefault(e);};TreeView.prototype.unrender=function(){};TreeView.prototype.destroy=function(){domutils.destroyNode(this.rootNode.nodePane);if(this.container&&this.container==this.rootPane.parentNode)\ndomutils.destroyNode(this.rootPane);this.rootPane=null;if(this.rootNode)\nthis.rootNode.destroy();this.rootNode=null;if(this.popupMenu)\nthis.popupMenu.destroy();TreeView.superclass.destroy.call(this);};TreeView.prototype.scrollIntoView=function(node){var left=0;var top=0;var n=node.textSpan;var treeDiv=this.rootPane.parentNode;if(!treeDiv)\nreturn;while(n&&n!=treeDiv){left+=n.offsetLeft;top+=n.offsetTop;n=n.offsetParent;}\nif(treeDiv.scrollLeft+treeDiv.clientWidth<left){treeDiv.scrollLeft=left+node.textSpan.offsetWidth-treeDiv.clientWidth;}\nif(treeDiv.scrollTop+treeDiv.clientHeight<top+node.textSpan.offsetHeight){treeDiv.scrollTop=top+node.textSpan.offsetHeight-treeDiv.clientHeight;}\nif(treeDiv.scrollLeft>left){treeDiv.scrollLeft=left;}\nif(treeDiv.scrollTop>top){treeDiv.scrollTop=top;}};TreeView.prototype.selectNode=function(node,notFocus){this.resetNodesStyle();var oldSelected=this.selectedNode;this.selectNodeWithoutFire(node,notFocus);this.onSelectNode.fire(this,this.selectedNode,oldSelected,this.selected);};TreeView.prototype.selectNodeWithoutFire=function(node,notFocus){if(this.selectedNode)\ndomutils.replaceClassName(this.selectedNode.textSpan,this.CSS_TEXTSPAN,this.CSS_TEXTSPAN_SELECTED);this.selectedNode=node;if(node){domutils.replaceClassName(node.textSpan,this.CSS_TEXTSPAN_SELECTED,this.CSS_TEXTSPAN);if(!notFocus){this.scrollIntoView(this.selectedNode);try{this.selectedNode.hiddenLink.focus();}catch(ex){}}}};TreeView.prototype.expandToNode=function(node){var nodeList=new Array();var tmp=node;while(tmp!=null){nodeList.push(tmp);tmp=tmp.parentNode;}\nfor(var i=nodeList.length-1;i>=0;i--){nodeList[i].setExpanded(true);}\nthis.selectNode(node);};TreeView.prototype.canDrag=function(node){return false;};TreeView.prototype.doOnDragOver=function(e){var node=this.getTreeNode(e.target);if(this.dragOverNode)\nthis.dragOverNode.textSpan.style.backgroundColor=\"\";if(!this.canDrag(node))\nreturn;node.textSpan.style.backgroundColor=\"gray\";this.dragOverNode=node;domutils.stopEvent(e);};TreeView.prototype.onDragEnd=function(){if(this.dragOverNode)\nthis.dragOverNode.textSpan.style.backgroundColor=\"\";util.transferData().clear();};TreeView.prototype.doOnDrop=function(e){if(this.dragOverNode){this.dragOverNode.textSpan.style.backgroundColor=\"\";this.onDragDrop.fire(this,e,this.dragOverNode);domutils.stopEvent(e);}};TreeView.prototype.setCheckBoxType=function(type){this.rootNode.setCheckBoxType(type);};TreeView.prototype.getCheckedNodes=function(){var result=new Array();for(var id in this.nodes){var node=this.nodes[id];if(node&&node.checked)\nresult.push(node);}\nreturn result;};TreeView.prototype.setMultSelect=function(isMult){this.multSelect=isMult;};TreeView.prototype.doSelectedNodeDown=function(node){var ev=eventutil.getEvent();if(node){var index=this.getSelectedIndex(node);if(index>=0&&!ev.ctrlKey&&!ev.shiftKey)\nreturn;}\nvar oldSelectedNode=this.selectedNode;var oldSelected=this.selected;if(!(ev.ctrlKey)){this.resetNodesStyle();this.resetNodeStyle(oldSelectedNode);this.clearSelected();}\nif(ev.shiftKey){this.resetNodesStyle();this.resetNodeStyle(oldSelectedNode);this.clearSelected();this.setNodesSelected(node);}else{var index=this.getSelectedIndex(node);if(index<0){this.selected.push(node);this.selectNodeEx(node);}else{var selectedNode=this.selected[index];this.resetNodeStyle(selectedNode);this.selected.splice(index,1);}}\nthis.onSelectedNodeDown.fire(this,this.selectedNode,oldSelected,this.selected);}\nTreeView.prototype.doSelectedNodeUp=function(node){var ev=eventutil.getEvent();if(node){var index=this.getSelectedIndex(node);if(index>=0&&!ev.ctrlKey&&!ev.shiftKey){var oldSelectedNode=this.selectedNode;this.resetNodesStyle();this.resetNodeStyle(oldSelectedNode);this.clearSelected();if(this.getSelectedIndex(node)<0)\nthis.selected.push(node);this.selectNodeEx(node);}}}\nTreeView.prototype.resetNodeStyle=function(node){if(node){domutils.replaceClassName(node.textSpan,this.CSS_TEXTSPAN,this.CSS_TEXTSPAN_SELECTED);}}\nTreeView.prototype.clearSelected=function(){var len=this.selected.length;for(var i=0;i<len;i++){this.selected.pop();}};TreeView.prototype.resetNodesStyle=function(){var len=this.selected.length;for(var i=0;i<len;i++){this.resetNodeStyle(this.selected[i]);}};TreeView.prototype.setNodesSelected=function(node){var startNode=this.selectedNode;if(!startNode||(startNode.parentNode!=node.parentNode)){this.selectedNode=null;var newNode=node.parentNode.firstChild;while(newNode){if(newNode==node){this.selected.push(newNode)\nnewNode=null;}else{this.selected.push(newNode);newNode=newNode.nextSibling;}}}else if(startNode.parentNode==node.parentNode){var startFlag=0;var newNode=node.parentNode.firstChild;while(newNode){if(newNode==node||newNode==startNode){this.selected.push(newNode)\nstartFlag++;}else if(startFlag==1){this.selected.push(newNode);}else if(startFlag==2){newNode=null;break;}\nnewNode=newNode.nextSibling}}\nfor(var i=0;i<this.selected.length;i++){this.selectNodeEx(this.selected[i]);}\nthis.selectedNode=node;};TreeView.prototype.selectNodeEx=function(node,notFocus){var oldSelected=this.selectedNode;if(oldSelected){if(oldSelected.parentNode!=node.parentNode){this.resetNodesStyle();this.clearSelected();this.selected.push(node);}}\nthis.selectedNode=node;if(node){node.textSpan.className=this.CSS_TEXTSPAN_SELECTED;if(!notFocus){this.scrollIntoView(this.selectedNode);try{this.selectedNode.hiddenLink.focus();}catch(e){}}}\nthis.onSelectNode.fire(this,this.selectedNode,oldSelected,this.selected);};TreeView.prototype.getSelectedIndex=function(node){var len=this.selected.length;for(var i=0;i<len;i++)\nif(this.selected[i]==node)\nreturn i;return-1;};TreeView.prototype.getSelected=function(){return this.selected;};","js/freequery/tree/TreeNode.js":"\n﻿﻿var Module=jsloader.resolve(\"freequery.widget.Module\");var util=jsloader.resolve(\"freequery.common.util\");var treeNodeId=0;var TreeNode=function(text,level,mayHasChild,parent,id,disableShortTip){TreeNode.superclass.constructor.call(this);this.CSS_NODEDIV=\"tree_nodediv\";this.CSS_PREFIX=\"tree_prefix\";this.CSS_EXPANDER=\"tree_expander\";this.CSS_TEXTSPAN=\"tree_textSpan\";this.CSS_ICON=\"tree_icon\";this.CSS_CHECKBOX=\"tree_checkbox\";this._id=id;if(!this._id)\nthis._id=treeNodeId++;this.level=level;this.childCount=0;this._isInitChild=!mayHasChild;this._mayHasChild=mayHasChild;this.text=text;this.disableShortTip=!!disableShortTip;this.nodePane=document.createElement(\"TABLE\");this.nodePane.className=this.CSS_NODEDIV;if(domutils.isChrome()||domutils.isSafari()){this.nodePane.style.tableLayout='fixed';}\nthis.nodePane.style.width=\"100%\";this.nodePane.cellPadding=0;this.nodePane.cellSpacing=0;if(parent)\nparent.appendChild(this.nodePane);var tr=this.nodePane.insertRow(-1);this.td=tr.insertCell(-1);this.td.vAlign=\"top\";this.td.style.cssText=\"word-break : break-all\";this.td.noWrap=true;this.prefixSpan=document.createElement(\"SPAN\");this.td.appendChild(this.prefixSpan);for(var i=0;i<this.level;i++){var prefix=document.createElement(\"IMG\");prefix.className=this.CSS_PREFIX;prefix.align=\"absMiddle\";this.prefixSpan.appendChild(prefix);}\nthis.expander=document.createElement(\"IMG\");this.expander.className=this.CSS_EXPANDER;this.expander.align=\"absMiddle\";this.td.appendChild(this.expander);this.icon=document.createElement(\"IMG\");this.icon.className=this.CSS_ICON;this.icon.align=\"absMiddle\";this.icon.style.display=\"none\";this.td.appendChild(this.icon);this.textSpan=document.createElement(\"SPAN\");this.textSpan.className=this.CSS_TEXTSPAN;this.td.appendChild(this.textSpan);if(!this.disableShortTip&&util.getCharLength(text)>TreeNode.NODE_NAME_MAX_LENGTH){this.longText=text;text=util.getShortString(text,TreeNode.NODE_NAME_MAX_LENGTH,\"...\");}else{this.longText=undefined;}\nif(domutils.isIE()){this.hiddenLink=document.createElement(\"A\");this.textSpan.appendChild(this.hiddenLink);var textNode=document.createTextNode(text);this.textSpan.appendChild(textNode);}else{this.hiddenLink=document.createElement(\"A\");this.hiddenLink.style.color=\"#000000\";this.hiddenLink.style.textDecoration=\"none\";this.hiddenLink.style.cursor=\"default\";this.hiddenLink.href=\"openresource.jsp?resid=\"+this._id;this.hiddenLink.target=\"_blank\";this.hiddenLink.innerHTML=text;this.addListener(this.hiddenLink,\"click\",this.handleHiddeLinkClick,this);this.textSpan.appendChild(this.hiddenLink);}\nthis.fakeSpan=document.createElement(\"SPAN\");this.textSpan.appendChild(this.fakeSpan);this.fakeSpan.style.visibility=\"hidden\";this.fakeSpan.appendChild(document.createTextNode(' '));};lang.extend(TreeNode,Module);TreeNode.CHECKBOX_NO=0;TreeNode.CHECKBOX_YES=1;TreeNode.CHECKBOX_YES_GRAYABLE=2;TreeNode.NODE_NAME_MAX_LENGTH=40;TreeNode.prototype.handleHiddeLinkClick=function(e){domutils.preventDefault(e);}\nTreeNode.prototype.addChild=function(text,mayHasChild,id){if(!this.childSpan){this.initChildSpan(true);}\nvar childId=id;if(!childId)\nchildId=treeNodeId++;var newNode=this.tree.createTreeNode(text,this.level+1,mayHasChild,this.childSpan,childId);if(this.checkBox)\nnewNode.setCheckBoxType(this.checkBoxType);this.tree.nodes[childId]=newNode;newNode.tree=this.tree;newNode.parentNode=this;newNode.initExpanderImg();if(this.firstChild){this.childCount++;var lastChild=this.lastChild;this.lastChild.nextSibling=newNode;newNode.previousSibling=this.lastChild;this.lastChild.initExpanderImg();this.lastChild=newNode;lastChild.refreshPrefix();}else{if(!this.childSpan){this.initChildSpan(true);}\nthis.childCount++;this.firstChild=newNode;this.lastChild=newNode;this.initExpanderImg();}\nfor(var i=0;i<this.level;i++){newNode.prefixSpan.childNodes[i].src=this.prefixSpan.childNodes[i].src;}\nif(newNode.level>0){if(this.nextSibling)\nnewNode.prefixSpan.childNodes[newNode.level-1].src=\"img/tree/L4.gif\";else\nnewNode.prefixSpan.childNodes[newNode.level-1].src=\"img/tree/L5.gif\";}\nreturn newNode;};TreeNode.prototype.removeChild=function(indexOrNode){if(this.childCount==0)\nreturn false;var obj=null;if(typeof indexOrNode==\"number\"){if(indexOrNode<0||indexOrNode>=this.childCount)\nreturn false;var child=this.firstChild;var i=0;while(i++<indexOrNode)\nchild=child.nextSibling;obj=child;}else if(typeof indexOrNode==\"object\"){obj=indexOrNode;}\nif(!obj)\nreturn false;if(obj.previousSibling)\nobj.previousSibling.nextSibling=obj.nextSibling;if(obj.nextSibling)\nobj.nextSibling.previousSibling=obj.previousSibling;domutils.destroyNode(obj.nodePane);this.childCount--;if(obj.previousSibling&&!obj.nextSibling){obj.previousSibling.initExpanderImg();obj.previousSibling.refreshPrefix();}\nif(!obj.previousSibling&&!obj.nextSibling)\nobj.parentNode.initExpanderImg();if(this.firstChild==obj)\nthis.firstChild=obj.nextSibling;if(this.lastChild==obj)\nthis.lastChild=obj.previousSibling;obj.destroy();return true;};TreeNode.prototype.removeAllChildren=function(){var node=this.firstChild;while(node!=null){domutils.destroyNode(node.nodePane);node.destroy();node=node.nextSibling;}\nthis.childCount=0;this.firstChild=null;};TreeNode.prototype.initChildSpan=function(hidden){this.childSpan=document.createElement(\"SPAN\");if(hidden)\nthis.childSpan.style.display=\"none\";this.td.appendChild(this.childSpan);};TreeNode.prototype.initExpanderImg=function(){if(this.isLoading){this.expander.src=\"img/tree/loading.gif\";}else if(this.hasChild()){if(this.getExpanded()){if(this.nextSibling)\nthis.expander.src=\"img/tree/M1.gif\";else\nthis.expander.src=\"img/tree/M2.gif\";}else{if(this.nextSibling)\nthis.expander.src=\"img/tree/P1.gif\";else\nthis.expander.src=\"img/tree/P2.gif\";}}else{if(this.nextSibling)\nthis.expander.src=\"img/tree/L1.gif\";else\nthis.expander.src=\"img/tree/L2.gif\";}};TreeNode.prototype.setText=function(text){var child=this.textSpan.firstChild;while(child!=null){if(child.nodeType==3){domutils.destroyNode(child);}\nchild=child.nextSibling;}\nif(!this.disableShortTip&&util.getCharLength(text)>TreeNode.NODE_NAME_MAX_LENGTH){this.longText=text;text=util.getShortString(text,TreeNode.NODE_NAME_MAX_LENGTH,\"...\");}else{this.longText=undefined;}\nif(domutils.isIE()){var textNode=document.createTextNode(text);this.textSpan.insertBefore(textNode,this.hiddenLink);}else{this.hiddenLink.innerHTML=text;this.text=text;}};TreeNode.prototype.getExpanded=function(){return this.childSpan&&this.childSpan.style.display!=\"none\";};TreeNode.prototype.setExpanded=function(expanded){if(!this._isInitChild&&expanded){this.initChildren();}\nif(this.childSpan){this.childSpan.style.display=expanded?\"\":\"none\";}else\nthis.initChildSpan(!expanded);this.initExpanderImg();};TreeNode.prototype.hasChild=function(){return!this._isInitChild||this.childCount>0;};TreeNode.prototype.setIcon=function(icon){if(icon==null)\nthis.icon.style.display=\"none\";this.icon.style.display=\"\";this.icon.src=icon;}\nTreeNode.prototype.destroy=function(){if(this.tree.selectedNode==this)\nthis.tree.selectedNode=null;delete this.tree.nodes[this._id];this.parentNode=null;this.tree=null;var child=this.firstChild;while(child!=null){var next=child.nextSibling;child.destroy();child=next;}\nTreeNode.superclass.destroy.call(this);};TreeNode.prototype.refreshPrefixInternal=function(level,src){if(this.prefixSpan&&this.prefixSpan.childNodes[level])\nthis.prefixSpan.childNodes[level].src=src;var child=this.firstChild;while(child!=null){child.refreshPrefixInternal(level,src);child=child.nextSibling;}};TreeNode.prototype.refreshPrefix=function(){this.refreshPrefixInternal(this.level,this.nextSibling?\"img/tree/L4.gif\":\"img/tree/L5.gif\");};TreeNode.prototype.doOnMouseDown=function(e,target){if(target==this.expander){this.doOnExpanderMouseDown(e);}else if(target==this.textSpan||target==this.icon||target==this.hiddenLink){this.doOnTextSpanMouseDown(e);}else if(this.checkBox&&target==this.checkBox){this.doOnCheckBox(e);}\nthis.lastClientX=e.clientX;this.lastClientY=e.clientY;this.addListener(document,\"mousemove\",this.doOnMouseMove,this);this.addListener(document,\"mouseup\",this.doOnMouseUp,this);};TreeNode.prototype.doOnTextSpanMouseDown=function(e){if(this.tree.multSelect){this.tree.doSelectedNodeDown(this);}else{this.tree.selectNode(this);}};TreeNode.prototype.initChildren=function(extraFunc){this._isInitChild=true;};TreeNode.prototype.doOnExpanderMouseDown=function(e){if(domutils.isLeftButton(e.button)){this.setExpanded(!this.getExpanded());}\nif(this.tree&&this.tree.bofClassName&&e.which===2){alert('Tree:\\n'+this.tree.bofClassName+'\\n\\nTreeNode:\\n'+this.bofClassName);}};TreeNode.prototype.getChildNodeByNodeId=function(id){if(!this._isInitChild)\nthis.initChildren();var child=this.firstChild;while(child!=null){if(child._id==id)\nreturn child;child=child.nextSibling;}\nreturn null;};TreeNode.prototype.refreshChildren=function(increment){};TreeNode.prototype.doOnMouseUp=function(e){this.removeListener(document,\"mousemove\",this.doOnMouseMove);this.removeListener(document,\"mouseup\",this.doOnMouseUp);};TreeNode.prototype.createTransferData=function(){return false;};TreeNode.prototype.createTransferDatas=function(){return false;}\nTreeNode.prototype.doOnMouseMove=function(e){if(!this.tree)\nreturn;if((!this.tree.multSelect&&domutils.isLeftButton(e.button)&&this.createTransferData())||(this.tree.multSelect&&domutils.isLeftButton(e.button)&&this.createTransferDatas())){if(this.lastClientX!=e.clientX||this.lastClientY!=e.clientY){this.tree._initSelection=true;this.tree.rootPane.style.MozUserSelect=\"\";if(domutils.isIE()){var r=document.body.createTextRange();r.moveToElementText(this.fakeSpan);try{r.select();}catch(e){}}else{}\nthis.tree._initSelection=false;this.tree.rootPane.style.MozUserSelect=\"none\";if(domutils.isIE()){this.hiddenLink.dragDrop();}else{dragDropEvt=document.createEvent(\"HTMLEvents\");dragDropEvt.initEvent(\"dragstart\",true,false);this.hiddenLink.dispatchEvent(dragDropEvt);}\nif(this.tree){this.removeListener(document,\"mousemove\",this.doOnMouseMove);}}}};TreeNode.prototype.moveTo=function(parent,before){if(!this.tree)\nreturn;if(this==before)\nreturn;if(parent){var orginalParent=this.parentNode;if(this.previousSibling)\nthis.previousSibling.nextSibling=this.nextSibling;else\norginalParent.firstChild=this.nextSibling;if(this.nextSibling)\nthis.nextSibling.previousSibling=this.previousSibling;else{orginalParent.lastChild=this.previousSibling;if(orginalParent.lastChild){orginalParent.lastChild.initExpanderImg();}}\norginalParent.childCount--;domutils.destroyNode(this.nodePane,true);orginalParent.initExpanderImg();}else{parent=this.parentNode;parent.childCount--;if(this.previousSibling)\nthis.previousSibling.nextSibling=this.nextSibling;else\nparent.firstChild=this.nextSibling;if(this.nextSibling)\nthis.nextSibling.previousSibling=this.previousSibling;else\nparent.lastChild=this.previousSibling;}\nif(!parent.childSpan)\nparent.initChildSpan();parent.childSpan.insertBefore(this.nodePane,before?before.nodePane:null);this.parentNode=parent;if(before){this.nextSibling=before;this.previousSibling=before.previousSibling;if(this.previousSibling)\nthis.previousSibling.nextSibling=this;else\nparent.firstChild=this;if(this.nextSibling)\nthis.nextSibling.previousSibling=this;else\nparent.lastChild=this;}else{this.previousSibling=parent.lastChild;this.nextSibling=null;if(parent.lastChild){parent.lastChild.nextSibling=this;parent.lastChild.initExpanderImg();}\nparent.lastChild=this;if(!parent.firstChild)\nparent.firstChild=this;}\nthis.initExpanderImg();parent.childCount++;parent.initExpanderImg();};TreeNode.prototype.setCheckBoxType=function(checkBoxType){this.checkBoxType=checkBoxType;if(checkBoxType==TreeNode.CHECKBOX_NO&&this.checkBox){this.checkBox.style.display=\"none\";this.checked=false;}\nif(checkBoxType!=TreeNode.CHECKBOX_NO&&!this.checkBox){this.checkBox=document.createElement(\"IMG\");this.checkBox.className=this.CSS_CHECKBOX;this.checkBox.align=\"absMiddle\";this.checkBox.src=\"img/tree/CheckBoxUnChecked.gif\";this.checked=TreeNode.CHECKBOX_NO;this.td.insertBefore(this.checkBox,this.icon);}};TreeNode.prototype.doOnCheckBox=function(e){if(this.checked==TreeNode.CHECKBOX_YES){this.checked=TreeNode.CHECKBOX_NO;this.checkBox.src=\"img/tree/CheckBoxUnChecked.gif\";}else if(this.checked==TreeNode.CHECKBOX_NO){if(this.checkBoxType==TreeNode.CHECKBOX_YES_GRAYABLE){this.checked=TreeNode.CHECKBOX_YES_GRAYABLE;this.checkBox.src=\"img/tree/CheckBoxGrayed.gif\";}else{this.checked=TreeNode.CHECKBOX_YES;this.checkBox.src=\"img/tree/CheckBoxChecked.gif\";}}else{this.checked=TreeNode.CHECKBOX_YES;this.checkBox.src=\"img/tree/CheckBoxChecked.gif\";}\nthis.tree.onCheckNode.fire(this,this.checked);};TreeNode.prototype.setChecked=function(checked){this.checked=checked;if(this.checkBox){switch(checked){case TreeNode.CHECKBOX_NO:this.checkBox.src=\"img/tree/CheckBoxUnChecked.gif\";break;case TreeNode.CHECKBOX_YES:this.checkBox.src=\"img/tree/CheckBoxChecked.gif\";break;case TreeNode.CHECKBOX_YES_GRAYABLE:this.checkBox.src=\"img/tree/CheckBoxGrayed.gif\";break;}}};TreeNode.prototype.getParentNodes=function(){var nodes=new Array();var node=this.parentNode;while(node){nodes.push(node);node=node.parentNode;}\nreturn nodes;};TreeNode.prototype.getNodePath=function(){var nodes=this.getParentNodes();var path=\"\";for(var i=nodes.length-1;i>=0;i--){if(path==\"\")\npath=nodes[i].text;else\npath=path+\" > \"+nodes[i].text;}\nif(path!=\"\")path=path+\" > \"\nreturn path;}\nTreeNode.prototype.setExpanderImg=function(hasChild){if(hasChild){if(this.getExpanded()){if(this.nextSibling)\nthis.expander.src=\"img/tree/M1.gif\";else\nthis.expander.src=\"img/tree/M2.gif\";}else{if(this.nextSibling)\nthis.expander.src=\"img/tree/P1.gif\";else\nthis.expander.src=\"img/tree/P2.gif\";}}else{if(this.nextSibling)\nthis.expander.src=\"img/tree/L1.gif\";else\nthis.expander.src=\"img/tree/L2.gif\";}}","js/freequery/tree/ParameterTreeNode.js":"\nvar TreeNode=jsloader.resolve(\"freequery.tree.TreeNode\");var util=jsloader.resolve(\"freequery.common.util\");var modalWindow=jsloader.resolve(\"freequery.common.modalWindow\");var ParameterTreeNode=function(text,level,mayHasChild,parent,id){ParameterTreeNode.superclass.constructor.call(this,text,level,mayHasChild,parent,id);};lang.extend(ParameterTreeNode,TreeNode);ParameterTreeNode.prototype.addDropDownTreeNode=function(data){var hasChild=data[2]==\"true\";var node=this.addChild(data[1],hasChild,data[0]);node.tree=this.tree;node.setCatalogInfo(data);return node;};ParameterTreeNode.prototype.setCatalogInfo=function(data){this._id=data[0];this._alias=data[1]==\"\"||data[1]==null?data[0]:data[1];this._parentFieldName=this.tree.parentFieldName;this.setText(this._alias);};ParameterTreeNode.prototype.remoteCallback=function(result,lambda){if(result.succeeded){for(var i=0;i<result.result.length;i++){var node=this.addDropDownTreeNode(result.result[i]);if(this.tree.isExistInSelectIds(node._id))node.setChecked(1);if(lambda){lambda(node);}}}else{modalWindow.showServerError(result);}\nthis.isLoading=false;this.initExpanderImg();};ParameterTreeNode.prototype.initChildren=function(lambda){this.isLoading=true;this.removeAllChildren();if(!this.tree.lazyLoadChild){this.tree.loadChildFromCache(this,lambda);}else if(this.tree.dynamicLoad){util.remoteInvoke(\"ParameterPanelService\",\"getParamChildValue\",[this.tree.clientId,this.tree.paramId,this._parentFieldName,this._id],function(result){this.remoteCallback(result,lambda);},this);}else{var result=null;result=util.remoteInvoke(\"ParameterPanelService\",\"getParamChildValue\",[this.tree.clientId,this.tree.paramId,this._parentFieldName,this._id]);this.remoteCallback(result,lambda);this.isLoading=false;this.initExpanderImg();}\nthis._isInitChild=true;};ParameterTreeNode.prototype.refreshChildren=function(){var result=util.remoteInvoke(\"CatalogService\",\"getElementById\",[this._id]);if(result.succeeded){if(result.result)\nthis.setCatalogInfo(result.result);}else\nmodalWindow.showServerError(result);this.initChildren();};ParameterTreeNode.prototype.doOnTextSpanMouseDown=function(e){if(this.tree.multSelect){this.tree.doSelectedNodeDown(this);}else{this.tree.selectNode(this,false,e);}};","js/bof/decisionpanel/Portal/Dashlet/Dashlet.html":"<table cellspacing=\"0\" cellpadding=\"0\" bofid='dashletFrame'>\r\n\t<tr style=\"width:100%;height:100%\">\r\n\t<td style=\"width:100%;height:100%\">\r\n\t<table class=\"dashletRadiusBorder\" bofid=\"dashletTable\" style=\"width:100%;height:100%\" cellspacing=\"0\" cellpadding=\"0\">\t\r\n\t\t<tr valign=\"middle\" bofid='dashletTopTr' class = 'dashletTopTr' style=\"height: 22px;\">\r\n\t\t\t<td class=\"dashletTopCenter\" bofid='dashletCenterTopTd' style=\"height: 22px;\">\r\n\t\t\t\t<table width=100% height=100% align=center valign=\"middle\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\r\n\t\t\t\t\t<tr valign=\"middle\"  style=\"height:22px\">\r\n\t\t\t\t\t\t<td align=\"left\" bofid=\"dashletTitle\" style=\"width:100%; height: 22px;padding:0 0 0 5\"><\/td>\r\n\t\t\t\t\t\t<td align='right' bofid=\"dashletToolBar\"  class=\"dashletToolBar\" style=\"height: 22px;padding:0 5 0 0\">\r\n\t\t\t\t\t\t\t<img bofid='backward' style=\"cursor:pointer;display:none\" src=\"themes/default/images/blank.gif\" class=\"dashletBackward\" title=\"后退\" \r\n\t\t\t\t\t\t\t/><img bofid='forward' style=\"cursor:pointer;display:none\" src=\"themes/default/images/blank.gif\" class=\"dashletForward\" title=\"前进\"  \r\n\t\t\t\t\t\t\t/><img bofid='changeResource' style=\"cursor:pointer;\" src=\"themes/default/images/blank.gif\" class=\"dashletExchang\" title=\"切换资源\" \r\n\t\t\t\t\t\t\t/><img bofid='export' style=\"cursor:pointer;display:none\" src=\"themes/default/images/blank.gif\" class=\"dashletExport\" title=\"导出\" \r\n\t\t\t\t\t\t\t/><img bofid='locateReport' style=\"cursor:pointer;\" src=\"themes/default/images/blank.gif\" class=\"dashletLocateReport\" title=\"定位报表\" \r\n\t\t\t\t\t\t\t/><img bofid='min' style=\"cursor:pointer\" src=\"themes/default/images/blank.gif\" class=\"dashletMin\" title=\"最小化\" \r\n\t\t\t\t\t\t\t/><img bofid='max' style=\"cursor:pointer\" src=\"themes/default/images/blank.gif\" class=\"dashletMax\" title=\"最大化\" \r\n\t\t\t\t\t\t\t/><img bofid='delete' style=\"cursor:pointer;visibility: hidden;display:none\" src=\"themes/default/images/blank.gif\" class=\"dashletClose\" title=\"删除\"/>\r\n\t\t\t\t\t\t<\/td>\r\n\t\t\t\t\t<\/tr>\r\n\t\t\t\t<\/table>\r\n\t\t\t<\/td>\r\n\t\t<\/tr>\r\n\t\t<tr>\r\n\t\t\t<td valign=\"top\" bofid='dashletCenterCenterTd' style=\"width:100%;height:100%\" class=\"dashletContent\">\r\n\t\t\t\t<div bofid=\"dashletContent\" valign=\"top\" style=\"width:100%;height:100%\">\r\n\t\t\t\t<\/div>\r\n\t\t\t<\/td>\r\n\t\t<\/tr>\r\n\t<\/table>\r\n\t<\/td>\r\n\t<\/tr>\r\n\t<tr bofid='dashletBottomSpaceTr' class='dashletBottomSpace'>\r\n\t\t<td><\/td>\r\n\t<\/tr>\r\n<\/table>\r\n<DIV bofid=\"folderTreeDiv\" style=\"overflow:auto;width:190px;height:270px;display:none;position: absolute;\">\r\n  <TABLE width=\"100%\" height=\"100%\" cellpadding=\"5\" cellspacing=\"0\" class=\"dialog-wrapper dialog-container treecontainer\">\r\n    <TR>\r\n      <TD align=\"left\" valign=\"top\">\r\n      \t<div bofid=\"treeDiv\" id=\"treeDiv\"><\/div>\r\n      <\/TD>\r\n    <\/TR>\r\n  <\/TABLE>\r\n<\/DIV>","js/MacroServiceStub.js.stub":"var util = imports(\"freequery.common.util\").getInstance();var MacroServiceStub = function() {\n};\n\nMacroServiceStub.prototype.getInstance = function() {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getInstance\", []).result;\n};\n\nMacroServiceStub.prototype.access$000 = function(arg0, arg1) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"access$000\", [arg0, arg1]).result;\n};\n\nMacroServiceStub.prototype.activate = function() {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"activate\", []).result;\n};\n\nMacroServiceStub.prototype.getStateModule = function() {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getStateModule\", []).result;\n};\n\nMacroServiceStub.prototype.getDaoModule = function() {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getDaoModule\", []).result;\n};\n\nMacroServiceStub.prototype.getCatalogTreeModule = function() {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getCatalogTreeModule\", []).result;\n};\n\nMacroServiceStub.prototype.setDaoModule = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"setDaoModule\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.notifyCatalogElementUpdated = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"notifyCatalogElementUpdated\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.getMetadataModule = function() {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getMetadataModule\", []).result;\n};\n\nMacroServiceStub.prototype.fire = function(arg0, arg1, arg2, arg3, arg4, arg5) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"fire\", [arg0, arg1, arg2, arg3, arg4, arg5]).result;\n};\n\nMacroServiceStub.prototype.fire = function(arg0, arg1, arg2, arg3, arg4) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"fire\", [arg0, arg1, arg2, arg3, arg4]).result;\n};\n\nMacroServiceStub.prototype.setCatalogTreeModule = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"setCatalogTreeModule\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.getLogModule = function() {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getLogModule\", []).result;\n};\n\nMacroServiceStub.prototype.setStateModule = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"setStateModule\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.setLogModule = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"setLogModule\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.setMetadataModule = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"setMetadataModule\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.getMacroModulesByResId = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getMacroModulesByResId\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.createMacroModuleElement = function(arg0, arg1) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"createMacroModuleElement\", [arg0, arg1]).result;\n};\n\nMacroServiceStub.prototype.getMacroGuidesByResId = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getMacroGuidesByResId\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.createMacroGuideElement = function(arg0, arg1) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"createMacroGuideElement\", [arg0, arg1]).result;\n};\n\nMacroServiceStub.prototype.importMacroModule = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"importMacroModule\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.importMacroGuide = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"importMacroGuide\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.createMacroModule = function(arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"createMacroModule\", [arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7]).result;\n};\n\nMacroServiceStub.prototype.createMacroModuleWithId = function(arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"createMacroModuleWithId\", [arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8]).result;\n};\n\nMacroServiceStub.prototype.removeMacroModule = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"removeMacroModule\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.getMacroModuleById = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getMacroModuleById\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.getMacroModules = function(arg0, arg1, arg2, arg3) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getMacroModules\", [arg0, arg1, arg2, arg3]).result;\n};\n\nMacroServiceStub.prototype.getMacroModulesByTargetName = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getMacroModulesByTargetName\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.updateMacroModule = function(arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"updateMacroModule\", [arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7]).result;\n};\n\nMacroServiceStub.prototype.getObjectNames = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getObjectNames\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.getEventNames = function(arg0, arg1, arg2) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getEventNames\", [arg0, arg1, arg2]).result;\n};\n\nMacroServiceStub.prototype.getMacroHelp = function(arg0, arg1, arg2, arg3) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getMacroHelp\", [arg0, arg1, arg2, arg3]).result;\n};\n\nMacroServiceStub.prototype.getLibraryModule = function(arg0, arg1, arg2) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getLibraryModule\", [arg0, arg1, arg2]).result;\n};\n\nMacroServiceStub.prototype.createMacroPackage = function(arg0, arg1, arg2, arg3) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"createMacroPackage\", [arg0, arg1, arg2, arg3]).result;\n};\n\nMacroServiceStub.prototype.removeMacroPackage = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"removeMacroPackage\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.updateMacroPackage = function(arg0, arg1, arg2) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"updateMacroPackage\", [arg0, arg1, arg2]).result;\n};\n\nMacroServiceStub.prototype.getMacroPackageById = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getMacroPackageById\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.createMacroLibrary = function(arg0, arg1, arg2, arg3) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"createMacroLibrary\", [arg0, arg1, arg2, arg3]).result;\n};\n\nMacroServiceStub.prototype.removeMacroLibrary = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"removeMacroLibrary\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.updateMacroLibrary = function(arg0, arg1, arg2) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"updateMacroLibrary\", [arg0, arg1, arg2]).result;\n};\n\nMacroServiceStub.prototype.getMacroLibraryById = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getMacroLibraryById\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.removeMacroGuide = function(arg0, arg1) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"removeMacroGuide\", [arg0, arg1]).result;\n};\n\nMacroServiceStub.prototype.updateMacroGuide = function(arg0, arg1, arg2, arg3, arg4, arg5, arg6) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"updateMacroGuide\", [arg0, arg1, arg2, arg3, arg4, arg5, arg6]).result;\n};\n\nMacroServiceStub.prototype.createMacroGuide = function(arg0, arg1, arg2, arg3, arg4, arg5) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"createMacroGuide\", [arg0, arg1, arg2, arg3, arg4, arg5]).result;\n};\n\nMacroServiceStub.prototype.getMacroGuideById = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getMacroGuideById\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.findCommonModule = function(arg0, arg1, arg2) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"findCommonModule\", [arg0, arg1, arg2]).result;\n};\n\nMacroServiceStub.prototype.flushMacroConsole = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"flushMacroConsole\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.createResourcePack = function(arg0, arg1, arg2, arg3, arg4, arg5) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"createResourcePack\", [arg0, arg1, arg2, arg3, arg4, arg5]).result;\n};\n\nMacroServiceStub.prototype.getResourcePackById = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getResourcePackById\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.getResourcePackById = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getResourcePackById\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.deleteResourcePack = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"deleteResourcePack\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.updateResourcePack = function(arg0, arg1, arg2, arg3, arg4, arg5) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"updateResourcePack\", [arg0, arg1, arg2, arg3, arg4, arg5]).result;\n};\n\nMacroServiceStub.prototype.getResourcePacksByType = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getResourcePacksByType\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.getMacroContentByResourceId = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getMacroContentByResourceId\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.getResourceIdsFromContent = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getResourceIdsFromContent\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.addAssociatedModule = function(arg0, arg1) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"addAssociatedModule\", [arg0, arg1]).result;\n};\n\nMacroServiceStub.prototype.removeAssociatedModule = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"removeAssociatedModule\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.addMacroListener = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"addMacroListener\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.getAllMacroModules = function() {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getAllMacroModules\", []).result;\n};\n\nMacroServiceStub.prototype.registerOutline = function(arg0, arg1) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"registerOutline\", [arg0, arg1]).result;\n};\n\nMacroServiceStub.prototype.saveAsMacroModules = function(arg0, arg1) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"saveAsMacroModules\", [arg0, arg1]).result;\n};\n\nMacroServiceStub.prototype.registerAdapter = function(arg0, arg1) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"registerAdapter\", [arg0, arg1]).result;\n};\n\nMacroServiceStub.prototype.createOutline = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"createOutline\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.createDefaultLogger = function() {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"createDefaultLogger\", []).result;\n};\n\nMacroServiceStub.prototype.registerPageAvailableHostObjectClasses = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"registerPageAvailableHostObjectClasses\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.fireIntern = function(arg0, arg1, arg2, arg3, arg4, arg5) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"fireIntern\", [arg0, arg1, arg2, arg3, arg4, arg5]).result;\n};\n\nMacroServiceStub.prototype.getMacroManager = function() {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getMacroManager\", []).result;\n};\n\nMacroServiceStub.prototype.setMacroManager = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"setMacroManager\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.checkSameGuideName = function(arg0, arg1) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"checkSameGuideName\", [arg0, arg1]).result;\n};\n\nMacroServiceStub.prototype.checkUpdateSameGuideName = function(arg0, arg1, arg2) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"checkUpdateSameGuideName\", [arg0, arg1, arg2]).result;\n};\n\nMacroServiceStub.prototype.getHelpNodeCompareKindValue = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getHelpNodeCompareKindValue\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.compareHelpNodeChildren = function(arg0, arg1) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"compareHelpNodeChildren\", [arg0, arg1]).result;\n};\n\nMacroServiceStub.prototype.getLibrary = function(arg0, arg1, arg2, arg3) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getLibrary\", [arg0, arg1, arg2, arg3]).result;\n};\n\nMacroServiceStub.prototype.wrapScript = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"wrapScript\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.loadLocalCommonModule = function(arg0, arg1) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"loadLocalCommonModule\", [arg0, arg1]).result;\n};\n\nMacroServiceStub.prototype.loadLibraryCommonModule = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"loadLibraryCommonModule\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.removeCommentText = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"removeCommentText\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.getTargetReportIds = function(arg0, arg1) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getTargetReportIds\", [arg0, arg1]).result;\n};\n\nMacroServiceStub.prototype.getPackageNames = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getPackageNames\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.getMacroModulesByPageId = function(arg0, arg1, arg2, arg3, arg4) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getMacroModulesByPageId\", [arg0, arg1, arg2, arg3, arg4]).result;\n};\n\nMacroServiceStub.prototype.getAssociatedModuleMap = function() {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getAssociatedModuleMap\", []).result;\n};\n\nMacroServiceStub.prototype.getAssociatedModule = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getAssociatedModule\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.getMatcherReportIds = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"getMatcherReportIds\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.updateDocument = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"updateDocument\", [arg0]).result;\n};\n\nMacroServiceStub.prototype.addMetadataDocument = function(arg0) {\n\treturn util.remoteInvokeEx2(\"MacroService\", \"addMetadataDocument\", [arg0]).result;\n};\n\n","js/thirdparty/fusioncharts/fusioncharts_effect.js":"\n(function(l){var u=l([\"private\",\"SmartbiEffect\"]);if(u===undefined){return}var h=window,q=u.hcLib,d=q.Highcharts,n=d.vml,B=d.Color,g=d.pick,c=d.Series.prototype,e=c.getColor,A=c.convertAttribs,f=d.Point.prototype,o=f.init,k=f.select,m=h.HighchartsColorAdapter,t=d.Renderer,v=d.SVGRenderer.prototype,y=v.color,x=q.chartAPI,r=x(\"base\").draw,w=q.graphics,p,b,z,j=\",\",s=d.seriesTypes.pie.prototype,i=s.translate;x(\"base\").draw=function(D,E){var C=D.instanceAPI.chartInstance.options.dataSource.chartex;if(C&&C.hcOptions){D=q.merge(D,C.hcOptions);arguments[0]=D}if(b(D)&&D.chart.defaultSeriesType==\"pie\"){if(C.shadow!=1){D.plotOptions.series.shadow=false}arguments[0]=D}return r.apply(this,arguments)};b=function(D){var C=D.instanceAPI.chartInstance.options.dataSource.chartex;if(C&&C.effect==1){return true}return false};z=function(D,G){var F=[],E=0,C=D.length;for(;E<C;E++){F[E]=G.call(D[E],D[E],E,D)}return F};var a=function(C,D){return parseInt(C,D||10)};if(!m){m=h.HCColorAdapter={rgbaToHexColor:function(E){var D=null;var C=/rgba\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]?(?:\\.[0-9]+)?)\\s*\\)/.exec(E);if(C){D=[parseInt(C[1]).toString(16),parseInt(C[2]).toString(16),parseInt(C[3]).toString(16),parseFloat(C[4],10)]}C=/rgb\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*\\)/.exec(E);if(C){D=[parseInt(C[1]).toString(16),parseInt(C[2]).toString(16),parseInt(C[3]).toString(16)]}if(D!=null){if(D[0].length==1){D[0]=\"0\"+D[0]}if(D[1].length==1){D[1]=\"0\"+D[1]}if(D[2].length==1){D[2]=\"0\"+D[2]}if(D.length==3){return{color:\"#\"+D.join(\"\")}}if(D.length==4){return{alpha:D.splice(3,1)[0]*100,color:\"#\"+D.join(\"\")}}}return{color:null}},seriesColor:function(E,C,G){var D=G.type,F=E;if(D==\"column\"||D==\"bar\"||D==\"floatedcolumn\"){F=this.columnColor.apply(this,arguments)}else{if(D==\"pie\"){F=this.pieColor.apply(this,arguments)}else{if(D==\"area\"||D==\"areaspline\"){F=this.areaColor.apply(this,arguments)}}}return F},pointColor:function(E,C,G){var D=G.type,F=E;if(D==\"scatter\"||D==\"bubble\"){F=this.scatterColor.apply(this,arguments)}else{if(D==\"area\"||D==\"areaspline\"||D==\"line\"||D==\"spline\"){F=this.scatterColor.apply(this,arguments)}}return F},pieColor:function(){var F=arguments[0],E=arguments[2];var C=this.getFirstColor(F.FCcolor?F.FCcolor.color:F);if(!(F&&F.FCcolor&&F.FCcolor.smartbiColor)){if(E&&(E.options.innerSize||0)!=0){var D={radialGradient:true,smartbiColor:true,gradientUnits:\"userSpaceOnUse\",color:C+\",\"+this.rgbaToHexColor(B(C).brighten(-0.1).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(0.1).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(-0.23).get(\"rgb\")).color,angle:0};return{oldColor:F,FCcolor:D}}else{var D={radialGradient:true,smartbiColor:true,gradientUnits:\"userSpaceOnUse\",color:C+\",\"+this.rgbaToHexColor(B(C).brighten(0.5).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(0).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(-0.1).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(-0.3).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(-0.9).get(\"rgb\")).color,ratio:\"0,0,40,20,20,100\",angle:0};if(n){D.color=C+\",\"+this.rgbaToHexColor(B(C).brighten(0.2).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(0).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(-0.1).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(-0.3).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(-0.5).get(\"rgb\")).color}return{oldColor:F,FCcolor:D}}}return F},scatterColor:function(){var E=arguments[0];var C=this.getFirstColor(E.FCcolor?E.FCcolor.color:E);if(!(E&&E.FCcolor&&E.FCcolor.smartbiColor)){var D={smartbiColor:true,radialGradient:true,gradientUnits:\"objectBoundingBox\",color:this.rgbaToHexColor(B(C).brighten(0.5).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(0).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(-0.1).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(-0.3).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(-0.8).get(\"rgb\")).color,ratio:\"0,40,20,30,100\",angle:0,cx:0.5,cy:0,r:1.09};if(n){D.color=this.rgbaToHexColor(B(C).brighten(0.2).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(0).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(-0.1).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(-0.3).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(-0.5).get(\"rgb\")).color}if(E.FCcolor.alpha){D.alpha=E.FCcolor.alpha}return{oldColor:E,FCcolor:D}}return E},columnColor:function(){var F=arguments[0],E=arguments[2];var C=this.getFirstColor(F.FCcolor?F.FCcolor.color:F);if(!(F&&F.FCcolor&&F.FCcolor.smartbiColor)){var D={smartbiColor:true,gradientUnits:\"objectBoundingBox\",color:this.rgbaToHexColor(B(C).brighten(-0.2).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(0.1).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(0.2).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(0.25).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(0.2).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(0.1).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(-0.2).get(\"rgb\")).color,ratio:\"0,30,15,5,5,15,100\"};if(E.type==\"bar\"){D.angle=0}if(F.FCcolor.alpha){D.alpha=F.FCcolor.alpha}return{oldColor:F,FCcolor:D}}return F},areaColor:function(){var E=arguments[0];var C=this.getFirstColor(E.FCcolor?E.FCcolor.color:E);if(!(E&&E.FCcolor&&E.FCcolor.smartbiColor)){var D={smartbiColor:true,gradientUnits:\"objectBoundingBox\",color:this.rgbaToHexColor(B(C).brighten(0.5).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(0).get(\"rgb\")).color+\",\"+this.rgbaToHexColor(B(C).brighten(-0.3).get(\"rgb\")).color,ratio:\"0,50,100\",alpha:\"75,75,75\"};return{oldColor:E,FCcolor:D}}return E},getFirstColor:function(D){var C=D.split(j)[0];if(C.indexOf(\"rgb\")==-1&&C.indexOf(\"#\")==-1){C=\"#\"+C}return C}}}s.translate=function(){var G=this;i.apply(this,arguments);var H=G.data,D=G.center,C,E=\"objectBoundingBox\";if(!b(G.chart.options)){return}for(var F=0;F<H.length;F++){C=H[F];if(C.color.FCcolor&&C.color.FCcolor.gradientUnits!==E){C.color.FCcolor.cx=D[0];C.color.FCcolor.cy=D[1]-(D[2]/2);C.color.FCcolor.r=D[2];if((G.options.innerSize||0)!=0){start=D[3]/D[2];start=start>1?1/start:start;C.color.FCcolor.ratio=\"0,\"+start*100+\",\"+100*(1-start)/2+\",100\";C.color.FCcolor.cy=D[1];C.color.FCcolor.r=D[2]/2}}}};f.init=function(G,F,D){var C=this;o.apply(this,arguments);if(b(G.chart.options)){if(C.marker&&C.marker.fillColor){var E=C.marker.fillColor;C.marker.fillColor=C.options.marker.fillColor=m.pointColor(E,this,G)}if(C.color){var E=C.color;C.color=C.options.color=m.seriesColor(E,this,G)}}return C}})(FusionCharts);","js/thirdparty/fusioncharts/FusionCharts_HC_Widgets.js":"\n(function(){var q=FusionCharts([\"private\",\"modules.renderer.highcharts-widgets\"]);if(q===undefined){return}var W=q.hcLib,bP=W.BLANKSTRINGPLACEHOLDER,ay=W.BLANKSTRING,bW=W.createTrendLine,bY=W.pluck,aJ=W.getValidValue,T=W.pluckNumber,aZ=W.getFirstDefinedValue,y=W.defaultPaletteOptions,P=W.getFirstValue,a7=W.parsePointValue,au=W.parseStr,bO=W.FC_CONFIG_STRING,aX=W.extend2,bL=W.getDashStyle,aN=W.stubFN,bZ=W.hasSVG,bM=W.falseFN,aI=\"chart\",az=W.graphics.getColumnColor,i=W.getFirstColor,bg=W.pluckColor,aT=W.getFirstAlpha,av=W.graphics.getDarkColor,aY=W.graphics.getLightColor,bC=W.graphics.convertColor,ag=W.graphics.parseColor,bG=W.graphics.parseAlpha,ao=W.COLOR_TRANSPARENT,bb=W.chartAPI,bf=W.titleSpaceManager,bk=W.placeLegendBlockBottom,aF=W.placeLegendBlockRight,B=bb.singleseries,ak=bb.multiseries,a2=W.COMMASTRING,m=W.ZEROSTRING,aE=W.ONESTRING,bt=W.hundredstring,ad=W.commaspacestring,U=W.DECIMALSTRING,f=W.getDefinedColor,bp=W.parseUnsafeString,bK=W.HCstub,ba=W.NumberFormatter,e=W.getLinkAction,aA=\"bold\",z=navigator.userAgent,a3=window,s=/msie/i.test(z)&&!a3.opera,aL=W.Highcharts,bJ=document,I=bJ.documentMode===8,aW=Math,k=aW.round,bm=aW.floor,aD=aW.ceil,b7=aW.max,aq=aW.min,d=aW.abs,b0=aW.cos,ab=aW.sin,aB=aW.random,ac=aW.atan2,V=aW.PI,aC=V/180,K=W.regex.dropHash,t=W.toPrecision,aQ=W.HASHSTRING,bx=W.getColorCodeString,ax=W.regex.hexcode,aj,a=aL.seriesTypes,X=aL.attr,O=bJ.documentElement.ontouchstart!==undefined,p=aL.getTouchEvent,F=aL.addEvent,bo=aL.createElement,bS=aL.discardElement,b5=aL.css,Q=aL.each,bl=aL.extend,ai=aL.map,aK=aL.merge,aP=aL.pick,bR=aL.Color,bi=aL.extendClass,h,b6=function(A){return typeof A===\"object\"},bv=function(A){return typeof A===\"string\"},af=function(A){return A!==h&&A!==null},b4=\"rgba(192,192,192,\"+(bZ?0.000001:0.002)+\")\",al=\"\",aR=\"hover\",bu=\"select\",ah=\"hidden\",ap=s&&!bZ?\"visible\":\"\",Y=\"px\",H=\"none\",by=\"M\",bz=\"L\",bF=\"A\",aO=\"AT\",bw=\"WA\",bs=\"Z\",bI=1,bj=2,a9=3,aV=4,J=1,aU=2,aH=3,a1=4,am=W.regex.startsRGBA,ae=W.setLineHeight,R=W.pluckFontSize,o=W.POSITION_CENTER,j=W.POSITION_TOP,aM=W.POSITION_BOTTOM,E=W.POSITION_RIGHT,bh=W.POSITION_LEFT,b8=W.POSITION_MIDDLE,a0=0,x=W.HUNDREDSTRING,bQ=W.PXSTRING,ar=W.BGRATIOSTRING,bD=W.COMMASPACE,aw=W.getAxisLimits,bq=false&&!/fusioncharts\\.com$/i.test(location.hostname),S=function(cc,cd,ci,ck){var cj=cc[bO],M=cj.smartLabel,cg=cc.series[0],L=(((ck?ci:cd)*0.7)-cg.tickValueDistance-cg.tickMarkDistance),cf,cm=0,cn=0,ch,ce,Z,cb,A=cc.xAxis.labels.style,cl=A.lineHeight.split(/px/)[0];M.setStyle(A);if(L<0){L=0}cb=cg.majorTM.length;for(cf=0;cf<cb;cf++){Z=cg.majorTM[cf];ce=Z.displayValue;ch=M.getSmartText(ce,cd*0.7,cl);cn=Math.max(cn,(ck?ch.height:ch.width));Z.displayValue=ch.text}cn=cn+cg.tickValueDistance;if(cg.showTickMarks){cm=Math.max(cg.majorTMHeight,cg.minorTMHeight)+cg.tickMarkDistance}return(cm+cn)},an=function(ct,cr,cy,cc,cu,cb,cB,M){var cv=ct[bO],cp=cv.smartLabel,Z=ct.series[0],cn=Z.placeValuesInside,cA=0,A,co,cj,L,cd,cw=ct.xAxis.labels.style,cm=cw.lineHeight.split(/px/)[0],cf=0,cF=0,ch=Z.majorTM.length,cC,cl=0,ce=0,cE=0,cD=0,cz=0,cx=0,cg,cq,cG=(cy/2),ck=(cc/2),ci=Z.tickValueDistance,cs=M/(ch-1);cp.setStyle(cw);if(Z.showTickValues&&!cn){for(;cA<ch;cA+=1){cd=cb+(cA*cs);A=Z.majorTM[cA];co=A.displayValue;if(cA==0){A.displayValue=co=bY(Z.lowerLimitDisplay,co)}else{if(cA==ch-1){A.displayValue=co=bY(Z.upperLimitDisplay,co)}}cj=cp.getSmartText(co,cy,cm,true);cg=cj.width+Math.abs((cu+ci)*Math.cos(cd));if(cg>cG){cC=cg-cG;cC=cC/Math.cos(cd);cE=Math.max(cE,cC);cD=Math.min(cD,cC)}cq=cj.height+Math.abs((cu+ci)*Math.sin(cd));if(cq>ck){cC=cq-ck;cC=cC/Math.sin(cd);cz=Math.max(cz,cC);cx=Math.min(cx,cC)}A.displayValue=cj.text}L=L+Z.tickValueDistance}if(cE>0&&cD<0){cl=cE-cD}else{cl=Math.max(Math.abs(cE),Math.abs(cD))}if(cz>0&&cx<0){ce=cz-cx}else{ce=Math.max(Math.abs(cz),Math.abs(cx))}return{width:cl,height:ce}},be=function(cc,Z,A,cb,cu,cf,cy){var cp=cf.options,cq=cp.minorTM,cO=cp.min,cn=cp.max,cx=cb/(cn-cO),co=cp.majorTM,cz,cd,cD,cl,cB,cI,M=cp.ticksOnRight==1,cF=M==1?bh:E,ce,cm=Z,ct,ck,cw,cN=cp.minorTMHeight,cJ=cp.majorTMHeight,cG=cp.tickValueDistance,cK=cp.minorTMColor,cg=cp.minorTMAlpha,cC=cp.minorTMThickness,cr=cp.majorTMColor,cH=cp.majorTMAlpha,L=cp.majorTMThickness,cM=cp.tickMarkDistance,ch=cf.dataLabelsGroup,cE=cp.tickValueStyle,cj=parseInt(cE.lineHeight),cs=Math.max(cJ,cN),cA,cL=0,ci=1,cv=cp.showTickMarks==1;if(!cy){cm=cb+Z;cx=-cx}if(M){ce=cc+cM+A;cI=ce+cN;cB=ce+cJ;cl=ce+cs+cG;cl=ce+(cv?cs:0)+cG;cL=1}else{ce=cc-cM-ci;cI=ce-cN-ci;cB=ce-cJ-ci;cl=ce-((cv?cs:0)+cG)-ci}if(cp.connectTickMarks&&cv){cA=cu.crispLine([by,ce,Z+1,bz,ce,Z+cb],L);cu.path(cA).attr({stroke:bC(cr,cH),\"stroke-linecap\":\"round\",\"stroke-width\":L}).add(ch)}if(!cf.minorTM){cf.minorTM=[]}if(cN!=0&&cv){for(ct=0,ck=cq.length;ct<ck;ct+=1){cz=cq[ct];cd=cm+(cz-cO)*cx;cA=cu.crispLine([by,ce+cL,cd,bz,cI,cd],cC);cf.minorTM[ct]=cu.path(cA).attr({stroke:bC(cK,cg),\"stroke-linecap\":\"round\",\"stroke-width\":cC}).add(ch)}}if(!cf.majorTM){cf.majorTM=[]}for(ct=0,ck=co.length;ct<ck;ct+=1){cw=co[ct];cz=cw.value,cD=cw.displayValue;cd=cm+(cz-cO)*cx;if(cN!=0&&cv){cA=cu.crispLine([by,ce+cL,cd,bz,cB,cd],cC);cf.majorTM[ct]=cu.path(cA).attr({stroke:bC(cr,cH),\"stroke-linecap\":\"round\",\"stroke-width\":L}).add(ch)}cf.majorTM[ct]=cu.text(cD,cl,cd+(cj*0.35)).attr({align:cF}).css(cE).add(ch)}},aa=function(cb,M,A,Z,cv,ce,cz){var cp=ce.options,cq=cp.minorTM,cM=cp.min,cm=cp.max,cy=A/(cm-cM),cn=cp.majorTM,cA,cD,cF=cp.ticksBelowGauge==1,cc,cd=cb,cl=cb,cu,ck,cg=ce.dataLabelsGroup,cL=cp.minorTMHeight,cI=cp.majorTMHeight,cG=cp.tickValueDistance,cr=cp.placeValuesInside,cJ=cp.minorTMColor,cf=cp.minorTMAlpha,cC=cp.minorTMThickness,cs=cp.majorTMColor,cH=cp.majorTMAlpha,L=cp.majorTMThickness,cE=cp.tickValueStyle,cx,cj=cE.lineHeight.split(/px/)[0]*1,ch,co,ci,ct=Math.max(cI,cL),cB,cK=0,cw=cp.showTickMarks==1;if(cz){cy=-cy;cl=cb+A}if(cF){cc=M+cp.tickMarkDistance;ch=cc+cL;co=cc+cI;if(cr){ci=cc-cG-cj*0.5}else{ci=cc+cG+cj+(cw?ct:0)}cK=1}else{cc=M-Z-cp.tickMarkDistance;ch=cc-cL;co=cc-cI;if(cr){ci=cc+cG+cj}else{ci=cc-cG-cj-(cw?ct:0)+cj*0.75}}if(cp.connectTickMarks&&cw){cB=cv.crispLine([by,cb+1,cc,bz,cb+A,cc],L);cv.path(cB).attr({stroke:bC(cs,cH),\"stroke-linecap\":\"round\",\"stroke-width\":L}).add(cg)}if(!ce.minorTM){ce.minorTM=[]}if(cL!=0&&cw){for(cu=0,ck=cq.length;cu<ck;cu+=1){cA=cq[cu];cd=cl+(cA-cM)*cy;cB=cv.crispLine([by,cd,cc+cK,bz,cd,ch],cC);ce.minorTM[cu]=cv.path(cB).attr({stroke:bC(cJ,cf),\"stroke-linecap\":\"round\",\"stroke-width\":cC}).add(cg)}}if(!ce.majorTM){ce.majorTM=[]}if(!ce.tmLabel){ce.tmLabel=[]}for(cu=0,ck=cn.length;cu<ck;cu+=1){cx=cn[cu],cA=cx.value,cD=cx.displayValue;cd=cl+(cA-cM)*cy;if(cI!=0&&cw){cB=cv.crispLine([by,cd,cc+cK,bz,cd,co],L);ce.majorTM[cu]=cv.path(cB).attr({stroke:bC(cs,cH),\"stroke-linecap\":\"round\",\"stroke-width\":L}).add(cg)}ce.tmLabel[cu]=cv.text(cD,cd,ci).attr({align:\"center\"}).css(cE).add(cg)}},b1=function(A,M,cH,Z,cQ){var cD=Z.chart.options.scale,cq=cD.minorTM,c1=cD.min,ck=cD.max,cl=cD.majorTM,cL,cO,cI=cD.axisPosition,cC,cj,cZ=cD.minorTMHeight,cV=cD.majorTMHeight,c2=cD.connectorColor,ce=cD.connectorThickness,cW=cD.minorTMColor,cN=cD.minorTMThickness,cx=cD.majorTMColor,L=cD.majorTMThickness,cX=cD.tickMarkDistance,cT=cD.tickValueDistance,cp=cD.placeTicksInside,cr=cD.placeValuesInside,cP,cJ,cz=Math.max(cV,cZ),cM,cb=cH.g(\"scale\").add(cQ),cB=o,cK=cD.reverseScale,cd=0,cc=0,cy=0,cw=0,cG=0,cE=0,c0=0,cY=0,cv=0,cu=0,ct=0,cs=0,co=0,cm=0,cg=0,cf=0,cF=ck-c1,cU,cS,ci,ch,cA=c1,cR=cN/2,cn=L/2;if(cp){cX=-cX;cV=-cV;cZ=-cZ;if(cr){cz=-cz;cT=-cT}else{cz=-cX}}else{if(cr){cz=-cX;cT=-cT}}if(cK){cF=-cF;cA=ck}switch(cI){case 1:cd=A/cF;cw=-cX;cE=cw-cn;cY=cw-cR;cu=cw-cV;cs=cw-cZ;cm=cw-cz-cT;break;case 2:cc=M/cF;cy=cX;cG=cy+cn;c0=cy+cR;cv=cy+cV;ct=cy+cZ;co=cy+cz+cT;cB=cr?E:bh;cg=A;break;case 3:cd=A/cF;cw=cX;cE=cw+cn;cY=cw+cR;cu=cw+cV;cs=cw+cZ;cm=cw+cz+cT;cf=M;break;case 4:cc=M/cF;cy=-cX;cG=cy-cn;c0=cy-cR;cv=cy-cV;ct=cy-cZ;co=cy-cz-cT;cB=cr?bh:E;break}if(!Z.minorTM){Z.minorTM=[]}if(!Z.majorTM){Z.majorTM=[]}if(!Z.tmLabel){Z.tmLabel=[]}cb.translate(cg,cf);if(cZ){for(cC=0,cj=cq.length;cC<cj;cC+=1){cL=cq[cC]-cA;cU=cL*cd;cS=cL*cc;cM=cH.crispLine([by,cU+c0,cS+cY,bz,cU+ct,cS+cs],cN);Z.minorTM[cC]=cH.path(cM).attr({stroke:cW,\"stroke-linecap\":\"round\",\"stroke-width\":cN}).add(cb)}}for(cC=0,cj=cl.length;cC<cj;cC+=1){cJ=cl[cC];cL=cJ.value-cA;cO=cJ.displayValue;cU=cL*cd;cS=cL*cc;if(cZ){cM=cH.crispLine([by,cU+cG,cS+cE,bz,cU+cv,cS+cu],cN);Z.majorTM[cC]=cH.path(cM).attr({stroke:cx,\"stroke-linecap\":\"round\",\"stroke-width\":L}).add(cb)}if(cO!==ay){cP=(cC==0||cC==cj-1)?cD.limitValues.style:cD.tickValues.style;ci=cJ.labelX||0;ch=cJ.labelY||0;Z.tmLabel[cC]=cH.text(cO,cU+co+ci,(cS+cm)+ch).attr({align:bY(cJ.align,cB)}).css(cP).add(cb)}}if(ce){cM=cH.crispLine([by,cy,cw,bz,cF*cd+cy,cF*cc+cw],L);cH.path(cM).attr({stroke:c2,\"stroke-linecap\":\"round\",\"stroke-width\":ce}).add(cb)}return cb},bE={paletteColors:[[\"8BBA00\",\"F6BD0F\",\"FF654F\",\"AFD8F8\",\"FDB398\",\"CDC309\",\"B1D0D2\",\"FAD1B9\",\"B8A79E\",\"D7CEA5\",\"C4B3CE\",\"E9D3BE\",\"EFE9AD\",\"CEA7A2\",\"B2D9BA\"],[\"8BBA00\",\"F6BD0F\",\"FF654F\",\"AFD8F8\",\"FDB398\",\"CDC309\",\"B1D0D2\",\"FAD1B9\",\"B8A79E\",\"D7CEA5\",\"C4B3CE\",\"E9D3BE\",\"EFE9AD\",\"CEA7A2\",\"B2D9BA\"],[\"8BBA00\",\"F6BD0F\",\"FF654F\",\"AFD8F8\",\"FDB398\",\"CDC309\",\"B1D0D2\",\"FAD1B9\",\"B8A79E\",\"D7CEA5\",\"C4B3CE\",\"E9D3BE\",\"EFE9AD\",\"CEA7A2\",\"B2D9BA\"],[\"8BBA00\",\"F6BD0F\",\"FF654F\",\"AFD8F8\",\"FDB398\",\"CDC309\",\"B1D0D2\",\"FAD1B9\",\"B8A79E\",\"D7CEA5\",\"C4B3CE\",\"E9D3BE\",\"EFE9AD\",\"CEA7A2\",\"B2D9BA\"],[\"8BBA00\",\"F6BD0F\",\"FF654F\",\"AFD8F8\",\"FDB398\",\"CDC309\",\"B1D0D2\",\"FAD1B9\",\"B8A79E\",\"D7CEA5\",\"C4B3CE\",\"E9D3BE\",\"EFE9AD\",\"CEA7A2\",\"B2D9BA\"]],bgColor:[\"CBCBCB,E9E9E9\",\"CFD4BE,F3F5DD\",\"C5DADD,EDFBFE\",\"A86402,FDC16D\",\"FF7CA0,FFD1DD\"],bgAngle:[270,270,270,270,270],bgRatio:[\"0,100\",\"0,100\",\"0,100\",\"0,100\",\"0,100\"],bgAlpha:[\"50,50\",\"60,50\",\"40,20\",\"20,10\",\"30,30\"],toolTipBgColor:[\"FFFFFF\",\"FFFFFF\",\"FFFFFF\",\"FFFFFF\",\"FFFFFF\"],toolTipBorderColor:[\"545454\",\"545454\",\"415D6F\",\"845001\",\"68001B\"],baseFontColor:[\"555555\",\"60634E\",\"025B6A\",\"A15E01\",\"68001B\"],tickColor:[\"333333\",\"60634E\",\"025B6A\",\"A15E01\",\"68001B\"],trendDarkColor:[\"333333\",\"60634E\",\"025B6A\",\"A15E01\",\"68001B\"],trendLightColor:[\"f1f1f1\",\"F3F5DD\",\"EDFBFE\",\"FFF5E8\",\"FFD1DD\"],pointerBorderColor:[\"545454\",\"60634E\",\"415D6F\",\"845001\",\"68001B\"],pointerBgColor:[\"545454\",\"60634E\",\"415D6F\",\"845001\",\"68001B\"],canvasBgColor:[\"FFFFFF\",\"FFFFFF\",\"FFFFFF\",\"FFFFFF\",\"FFFFFF\"],canvasBgAngle:[0,0,0,0,0],canvasBgAlpha:[\"100\",\"100\",\"100\",\"100\",\"100\"],canvasBgRatio:[\"\",\"\",\"\",\"\",\"\"],canvasBorderColor:[\"545454\",\"545454\",\"415D6F\",\"845001\",\"68001B\"],canvasBorderAlpha:[100,100,100,90,100],altHGridColor:[\"EEEEEE\",\"D8DCC5\",\"99C4CD\",\"DEC49C\",\"FEC1D0\"],altHGridAlpha:[50,35,10,20,15],altVGridColor:[\"767575\",\"D8DCC5\",\"99C4CD\",\"DEC49C\",\"FEC1D0\"],altVGridAlpha:[10,20,10,15,10],borderColor:[\"767575\",\"545454\",\"415D6F\",\"845001\",\"68001B\"],borderAlpha:[50,50,50,50,50],legendBgColor:[\"ffffff\",\"ffffff\",\"ffffff\",\"ffffff\",\"ffffff\"],legendBorderColor:[\"545454\",\"545454\",\"415D6F\",\"845001\",\"D55979\"],plotFillColor:[\"767575\",\"D8DCC5\",\"99C4CD\",\"DEC49C\",\"FEC1D0\"],plotBorderColor:[\"999999\",\"8A8A8A\",\"6BA9B6\",\"C1934D\",\"FC819F\"],msgLogColor:[\"717170\",\"7B7D6D\",\"92CDD6\",\"965B01\",\"68001B\"],TrendLightShadeOffset:30};function C(M,L,A){var cb=(aJ(L)!==undefined),Z=0;this.paletteId=M;this.themeColor=L;this.isTheme=cb;this._iterator=Z;this.defaultGaugePaletteOptions=(A&&A.defaultGaugePaletteOptions)||bE}C.prototype={getColor:function(){var L=this.paletteId;var A=this.defaultGaugePaletteOptions.paletteColors[L][this._iterator];this._iterator+=1;if(this._iterator==(this.defaultGaugePaletteOptions.paletteColors[L].length-1)){this._iterator=0}return A},get2DBgColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(aY(A,35)+a2+aY(A,10))}else{return this.defaultGaugePaletteOptions.bgColor[L]}},get2DBgAlpha:function(){var A=this.paletteId;return this.defaultGaugePaletteOptions.bgAlpha[A]},get2DBgAngle:function(){var A=this.paletteId;return this.defaultGaugePaletteOptions.bgAngle[A]},get2DBgRatio:function(){var A=this.paletteId;return this.defaultGaugePaletteOptions.bgRatio[A]},getTickColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(av(A,90))}else{return this.defaultGaugePaletteOptions.tickColor[L]}},getTrendDarkColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(av(A,90))}else{return this.defaultGaugePaletteOptions.trendDarkColor[L]}},getTrendLightColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(aY(A,this.defaultGaugePaletteOptions.TrendLightShadeOffset))}else{return this.defaultGaugePaletteOptions.trendLightColor[L]}},get2DCanvasBgColor:function(){var A=this.paletteId;return this.defaultGaugePaletteOptions.canvasBgColor[A]},get2DCanvasBgAngle:function(){var A=this.paletteId;return this.defaultGaugePaletteOptions.canvasBgAngle[A]},get2DCanvasBgAlpha:function(){var A=this.paletteId;return this.defaultGaugePaletteOptions.canvasBgAlpha[A]},get2DCanvasBgRatio:function(){var A=this.paletteId;return this.defaultGaugePaletteOptions.canvasBgRatio[A]},get2DCanvasBorderColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(av(A,80))}else{return this.defaultGaugePaletteOptions.canvasBorderColor[L]}},get2DCanvasBorderAlpha:function(){var A=this.paletteId;return this.defaultGaugePaletteOptions.canvasBorderAlpha[A]},get2DAltHGridColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(aY(A,20))}else{return this.defaultGaugePaletteOptions.altHGridColor[L]}},get2DAltHGridAlpha:function(){var A=this.paletteId;return this.defaultGaugePaletteOptions.altHGridAlpha[A]},get2DAltVGridColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(aY(A,80))}else{return this.defaultGaugePaletteOptions.altVGridColor[L]}},get2DAltVGridAlpha:function(){var A=this.paletteId;return this.defaultGaugePaletteOptions.altVGridAlpha[A]},get2DToolTipBgColor:function(){var A=this.paletteId;return this.defaultGaugePaletteOptions.toolTipBgColor[A]},get2DToolTipBorderColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(av(A,80))}else{return this.defaultGaugePaletteOptions.toolTipBorderColor[L]}},get2DBaseFontColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(A)}else{return this.defaultGaugePaletteOptions.baseFontColor[L]}},get2DBorderColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(av(A,60))}else{return this.defaultGaugePaletteOptions.borderColor[L]}},get2DBorderAlpha:function(){var A=this.paletteId;return this.defaultGaugePaletteOptions.borderAlpha[A]},get2DLegendBgColor:function(){var A=this.paletteId;return this.defaultGaugePaletteOptions.legendBgColor[A]},get2DLegendBorderColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(av(A,80))}else{return this.defaultGaugePaletteOptions.legendBorderColor[L]}},get2DPlotGradientColor:function(){var A=this.paletteId;return this.defaultGaugePaletteOptions.plotGradientColor[A]},get2DPlotBorderColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(av(A,85))}else{return this.defaultGaugePaletteOptions.plotBorderColor[L]}},get2DPlotFillColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(av(A,85))}else{return this.defaultGaugePaletteOptions.plotFillColor[L]}},get2DMsgLogColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(aY(A,80))}else{return this.defaultGaugePaletteOptions.msgLogColor[L]}},getDialColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(av(A,95)+\",FFFFFF,\"+av(A,95))}else{return this.defaultGaugePaletteOptions.dialColor[L]}},getDialBorderColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(av(A,95)+\",FFFFFF,\"+av(A,95))}else{return this.defaultGaugePaletteOptions.dialBorderColor[L]}},getPivotColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(aY(A,95)+\",FFFFFF,\"+aY(A,95))}else{return this.defaultGaugePaletteOptions.pivotColor[L]}},getPivotBorderColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(av(A,95)+\",FFFFFF,\"+av(A,95))}else{return this.defaultGaugePaletteOptions.pivotBorderColor[L]}},getPointerBorderColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(av(A,75))}else{return this.defaultGaugePaletteOptions.pointerBorderColor[L]}},getPointerBgColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(av(A,75))}else{return this.defaultGaugePaletteOptions.pointerBgColor[L]}},getThmBorderColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(av(A,90))}else{return this.defaultGaugePaletteOptions.thmBorderColor[L]}},getThmFillColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(aY(A,55))}else{return this.defaultGaugePaletteOptions.thmFillColor[L]}},getCylFillColor:function(){var L=this.paletteId,M=this.isTheme,A=this.themeColor;if(M){return(aY(A,55))}else{return this.defaultGaugePaletteOptions.cylFillColor[L]}},getPeriodColor:function(){if(this.isTheme){return(aY(this.themeColor,10))}else{return this.defaultGaugePaletteOptions.periodColor[this.paletteId]}},getWinColor:function(){return this.defaultGaugePaletteOptions.winColor[this.paletteId]},getLossColor:function(){return this.defaultGaugePaletteOptions.lossColor[this.paletteId]},getDrawColor:function(){return this.defaultGaugePaletteOptions.drawColor[this.paletteId]},getScoreLessColor:function(){return this.defaultGaugePaletteOptions.scorelessColor[this.paletteId]},reset:function(){this._iterator=0},parseColorMix:function(L,cb){var ce=[];cb=cb.replace(/\\s/g,ay);cb=cb.toLowerCase();if(cb==\"\"||cb==null||cb==undefined){ce=[L]}else{var Z,M;var cc,A;var cd=cb.split(\",\");for(Z=0;Z<cd.length;Z++){cd[Z]=cd[Z].replace(\"{\",\"\");cd[Z]=cd[Z].replace(\"}\",\"\");if(cd[Z]==\"color\"){ce.push(L)}else{if(cd[Z].substr(0,5)==\"light\"){cc=cd[Z].indexOf(\"-\");A=((cc==-1)?1:(cd[Z].substr(cc+1,cd[Z].length-cc)));A=100-A;ce.push(aY(L,A))}else{if(cd[Z].substr(0,4)==\"dark\"){cc=cd[Z].indexOf(\"-\");A=(cc==-1)?1:(cd[Z].substr(cc+1,cd[Z].length-cc));A=100-A;ce.push(av(L,A))}else{ce.push(cd[Z])}}}}}return ce},parseAlphaList:function(L,cb){var Z=[];var M=[];Z=L.split(\",\");var cd,A=100;var cc;for(cc=0;cc<cb;cc++){cd=T(Z[cc]);if(af(cd)){A=cd}M[cc]=A}return M.join()},parseRatioList:function(cb,A){var cd=[];var cc=[];cd=cb.split(\",\");var Z=0;var M;var L;for(L=0;L<A;L++){M=cd[L];M=(isNaN(M)||(M==undefined))?0:Math.abs(Number(M));M=(M>100)?100:M;cc[L]=M;Z+=M}Z=(Z>100)?100:Z;if(cd.length<A){for(L=cd.length;L<A;L++){cc[L]=(100-Z)/(A-cd.length)}}cc[-1]=0;return cc.join()}};C.prototype.constructor=C;var bB=aL.setOptions({});aj=bB.plotOptions;function bU(){}bU.prototype={numDecimals:function(M){M=t(M,10);M=Math.abs(M);var A=t((M-Math.floor(M)),10);var L=(String(A).length-2);L=(L<0)?0:L;return L},toRadians:function(A){return(A/180)*Math.PI},toDegrees:function(A){return(A/Math.PI)*180},flashToStandardAngle:function(A){return-1*A},standardToFlashAngle:function(A){return-1*A},flash180ToStandardAngle:function(L){var A=360-(((L%=360)<0)?L+360:L);return(A==360)?0:A},getAngularPoint:function(cc,Z,cb,M){M=M*(Math.PI/180);var L=cc+(cb*Math.cos(M));var A=Z-(cb*Math.sin(M));return({x:L,y:A})},remainderOf:function(L,A){return bA(L%A)},boundAngle:function(A){if(A>=0){return remainderOf(A,360)}else{return 360-remainderOf(Math.abs(A),360)}},toNearestTwip:function(Z){var ce=Z;var cc=(ce<0)?-1:1;var M=Math.abs(ce);var cd=Math.round(M*100);var L=Math.floor(cd/5);var cb=Number(String(cd-L*5));var A=(cb>2)?L*5+5:L*5;return cc*(A/100)},roundUp:function(A,M){M=(M==undefined)?2:M;var L=Math.pow(10,M);A*=L;A=Math.round(Number(String(A)));A/=L;return A}};bU.prototype.constructor=bU;window.MathExt=bU;var a5=function(cD,cw,cr,cu,cc,cy,cd){var cg=cD[bO],ci=cg.smartLabel,cA=cw.chart,cs=cD.chart,cm,cn,cv,ch,ct=0,cz=cD.title,cj=cD.subtitle,co=cz.text,cf=cj.text,cb=T(cA.captionpadding,cc,2),M=0,cl=0,A=0,cB=0,L=T(cA.captiononright,0),Z=aJ(cA.captionposition,\"top\").toLowerCase(),ck=0,ce=2,cq=0,cx=cu,cC,cp={left:0,right:0};if(co!==ay){cm=cz.style;M=T(parseInt(cm.fontHeight,10),parseInt(cm.lineHeight,10),12);cB=T(parseInt(cm.fontSize,10),10)}if(cf!==ay){cn=cj.style;cl=T(parseInt(cn.fontHeight,10),parseInt(cn.lineHeight,10),12);A=T(parseInt(cn.fontSize,10),10)}if(M>0||cl>0){ci.setStyle(cm);cv=ci.getSmartText(cz.text,cr,cx);if(cv.width>0){cv.width+=ce;cq=cv.height}ci.setStyle(cn);ch=ci.getSmartText(cj.text,cr,cu-cq);if(ch.width>0){ch.width+=ce}switch(Z){case\"middle\":cz.y=(cu/2)+((cB-(A>0?A+ck:0))/2);cz.y=(cu/2)-ch.height/2;cj.y=cz.y+ck+A;break;case\"bottom\":cj.y=cu-cs.marginBottom-cs.marginTop;cz.y=cj.y-(ch.height>0?ch.height+ck:0);break;default:cz.y=cB-ck;cj.y=cv.height+A;break}ct=Math.max(cv.width,ch.width);cD.title.text=cv.text;cD.subtitle.text=ch.text;if(ct>0){ct=ct+cb}cC=Math.min(ct,cr);if(L){cz.align=cj.align=E;cp.right=cC;cz.x=cv.width-ct+cb;cj.x=ch.width-ct+cb}else{cz.align=cj.align=bh;cp.left=cC;cz.x=ct-cv.width-cb;cj.x=ct-ch.width-cb}}return cp},G=function(M,ce,L,cj,cc){var ci=M.chart,A=ce.chart,cf=M.title,ch=T(A.captionpadding,2),cg=T(A.captiononright,0),cd=M.subtitle,Z,cb=2;ci.spacingRight=ci.spacingLeft=0;if(!af(cj)){cj=0}if(!af(cc)){cc=0}if(cg){Z=(L-ci.marginRight);cd.align=cf.align=bh;cf.x=cd.x=Z+ch+cc+cb}else{Z=(L-ci.marginLeft);cd.align=cf.align=E;cf.x=cd.x=ci.spacingLeft-Z-ch-cj-cb}};var bX=function(L,M,A,cb,Z){this.userMin=L;this.userMax=M;this.numMajorTM=T(cb.majorTMNumber,-1);this.numMinorTM=T(cb.minorTMNumber,5);this.adjustTM=cb.adjustTM;this.tickValueStep=T(cb.tickValueStep,1);this.showLimits=T(cb.showLimits,1);this.showTickValues=T(cb.showTickValues,1);this.nf=Z;this.stopMaxAtZero=A;this.setMinAsZero=!cb.setAdaptiveMin;this.upperLimitDisplay=cb.upperLimitDisplay;this.lowerLimitDisplay=cb.lowerLimitDisplay;this.userMaxGiven=(this.userMax==null||this.userMax==undefined||this.userMax==\"\")?false:true;this.userMinGiven=(this.userMin==null||this.userMin==undefined||this.userMin==\"\")?false:true;this.majorTM=[];this.minorTM=[];this.MathExt=new bU()};bX.prototype={setAxisCoords:function(L,A){this.startAxisPos=L;this.endAxisPos=A},calculateLimits:function(cd,ch){var cb=true;var M=true;if(isNaN(cd)){cd=0.9;M=false}if(isNaN(ch)){ch=0;cb=false}if((cd==ch)&&(cd==0)){cd=0.9}var ci=Math.floor(Math.log(Math.abs(cd))/Math.LN10);var ce=Math.floor(Math.log(Math.abs(ch))/Math.LN10);var Z=Math.max(ce,ci);var cj=Math.pow(10,Z);if(Math.abs(cd)/cj<2&&Math.abs(ch)/cj<2){Z--;cj=Math.pow(10,Z)}var A=Math.floor(Math.log(cd-ch)/Math.LN10);var cc=Math.pow(10,A);if(((cd-ch)>0)&&((cj/cc)>=10)){cj=cc;Z=A}var cg=(Math.floor(cd/cj)+1)*cj;var L;if(ch<0){L=-1*((Math.floor(Math.abs(ch/cj))+1)*cj)}else{if(this.setMinAsZero){L=0}else{L=Math.floor(Math.abs(ch/cj)-1)*cj;L=(L<0)?0:L}}if(this.stopMaxAtZero&&cd<=0){cg=0}if(this.userMaxGiven==false||(this.userMaxGiven==true&&Number(this.userMax)<cd&&M)){this.max=cg}else{this.max=Number(this.userMax)}if(this.userMinGiven==false||(this.userMinGiven==true&&Number(this.userMin)>ch&&cb)){this.min=L}else{this.min=Number(this.userMin)}if(this.min>this.max){if((this.min==Number(this.userMin))&&(this.max==Number(this.userMax))){var cf=this.min;this.min=this.max;this.max=cf}else{if(this.min==Number(this.userMin)){this.max=this.min+1}else{if(this.max==Number(this.userMax)){this.min=this.max-1}}}}else{if(this.min==this.max){this.max=this.min+1}}this.range=Math.abs(this.max-this.min);this.interval=cj;this.calcTickInterval()},calcTickInterval:function(){if(this.numMajorTM!=-1&&this.numMajorTM<2){this.numMajorTM=2}if(this.userMinGiven==false&&this.userMaxGiven==false&&this.numMajorTM!=-1){this.numMajorTM=(this.numMajorTM==-1)?5:this.numMajorTM;var Z=this.getDivisibleRange(this.min,this.max,this.numMajorTM,this.interval,true);var L=Z-this.range;this.range=Z;if(this.max>0){this.max=this.max+L}else{this.min=this.min-L}}else{this.numMajorTM=(this.numMajorTM==-1)?5:this.numMajorTM;if(this.adjustTM==true){var A=0;var cb=1;var M;while(1==1){M=this.numMajorTM+(A*cb);M=(M==0)?1:M;if(this.isRangeDivisible(this.range,M,this.interval)){break}A=(cb==-1||(A>this.numMajorTM))?(++A):(A);if(A>25){M=this.numMajorTM;break}cb=(A<=this.numMajorTM)?(cb*-1):(1)}this.numMajorTM=(M>1)?M:this.numMajorTM}else{}}this.majorTickInt=(this.max-this.min)/(this.numMajorTM-1)},isRangeDivisible:function(L,Z,A){var M=L/(Z-1);if(this.MathExt.numDecimals(M)>this.MathExt.numDecimals(A)){return false}else{return true}},getDivisibleRange:function(Z,A,cc,M,cd){if(cc<3){return this.range}var L=Math.abs(A-Z);var cb=L/(cc-1);if(!this.isRangeDivisible(L,cc,M)){if(cd){var ce=(M>1)?2:0.5;if((Number(cb)/Number(M))<ce){M=M/10}}cb=(Math.floor(cb/M)+1)*M;L=cb*(cc-1)}return L},calculateTicks:function(){this.majorTM=[];this.minorTM=[];var cc=0,cd,M,cb,cl,ck,cm,cg=this.numMajorTM,co=this.numMinorTM,cf=this.nf,ch=this.tickValueStep,ci=bp(this.lowerLimitDisplay),Z=bp(this.upperLimitDisplay),cn=this.majorTickInt,cj=this.min,ce=this.showTickValues,A=false,L=T(this.showLimits,ce);for(;cc<cg;cc+=1){cd=t(Number(cj+(cn*cc)),10);cb=cf.scale(cd);A=false;if(cc%ch!==0&&cc!==cg-1){cb=ay}else{if(cc==0||cc==cg-1){if(!L){cb=ay}else{if(cc==0&&ci){cb=ci;A=true}else{if(cc==cg-1&&Z){cb=Z;A=true}}}}else{if(!ce){cb=ay}}}this.majorTM.push({displayValue:cb,isString:A,value:cd})}cm=cn/(co+1);for(cl=0;cl<cg-1;cl+=1){for(ck=1;ck<=co;ck+=1){this.minorTM.push(this.majorTM[cl].value+cm*ck)}}},returnDataAsTick:function(M,L){var A={};A.value=M;A.displayValue=this.nf.dataLabels(M);A.showValue=L;return A},getMax:function(){return this.max},getMin:function(){return this.min},getMajorTM:function(){return this.majorTM},getMinorTM:function(){return this.minorTM},getAxisPosition:function(cb){if(this.startAxisPos==undefined||this.endAxisPos==undefined){throw new Error(\"Cannot calculate position, as axis co-ordinates have not been defined. Please use setAxisCoords() method to define the same.\")}var Z;var A;var M;var L;Z=(this.max-this.min);A=(this.endAxisPos-this.startAxisPos);M=(A/Z)*(cb-this.min);L=this.startAxisPos+M;return L},getValueFromPosition:function(A){if(this.startAxisPos==undefined||this.endAxisPos==undefined){throw new Error(\"Cannot calculate value, as axis co-ordinates have not been defined. Please use setAxisCoords() method to define the same.\")}var cb;var M;var L;var Z;cb=(this.max-this.min);M=A-this.startAxisPos;L=this.endAxisPos-A;Z=(M/(M+L))*cb+this.min;return Z}};function bV(L,Z,A,M){var cb;Z=T(Z,M);L=T(L,A);if(!Z||!L){cb=1}else{if((L/A)==(Z/M)){cb=A/L}else{cb=Math.min((A/L),(M/Z))}}return cb}bb(\"gaugebase\",{creditLabel:bq,defaultGaugePaletteOptions:bE,multiValueGauge:false,decimals:2,formatnumberscale:0,drawAnnotations:true,useScaleRecursively:true,init:function(A,L,Z,cc){var M=this,cb=Z.jsVars;if(cb&&cb._rtLastUpdatedData){M.rtLatestSeriesData=cb._rtLastUpdatedData}else{M.rtLatestSeriesData=null}return bb.base.init.apply(M,arguments)},chart:function(A,Z){var cC=this.name,cb=this.dataObj||{},L,cd,ct=this.defaultSeriesType,cf,cD=cb.chart||{},cG,ci,cm;L=bK(cb,A,Z,this);cm=L.chart;L.labels.smartLabel=L[bO].smartLabel=this.smartLabel;this.width=A;this.height=Z;cf=L.plotOptions;cm.useRoundEdges=cD.useroundedges==1,cm.defaultSeriesType=ct;var M=cD.palette>0&&cD.palette<6?cD.palette:T(this.paletteIndex,1);M-=1;cm.paletteIndex=M;var cl=this.colorM=new C(M,cD.palettethemecolor,this),cn=aX({},cb.colorrange);this.colorRangeGetter=new a6(cn.color,undefined,this.defaultGaugePaletteOptions.paletteColors[M],this);cm.events.click=L.plotOptions.series.point.events.click=this.linkClickFN;if(bY(cD.clickurl)!==undefined){cm.link=cD.clickurl;cm.style.cursor=\"pointer\";L.plotOptions.series.point.events.click=function(){cm.events.click.call({link:cD.clickurl})}}var cy=bY(cD.basefont,\"Verdana\"),cs=R(cD.basefontsize,10),cu=bY(cD.basefontcolor,cl.get2DBaseFontColor()),cg=bY(cD.outcnvbasefont,cy),cq=R(cD.outcnvbasefontsize,cs),cc=cq+bQ,cI=bY(cD.outcnvbasefontcolor,cu).replace(/^#?([a-f0-9]+)/ig,\"#$1\"),cJ,cw,co;cs=cs+bQ;cu=cu.replace(/^#?([a-f0-9]+)/ig,\"#$1\");this.trendStyle=this.outCanvasStyle={fontFamily:cg,color:cI,fontSize:cc};cJ=ae(this.trendStyle);this.inCanvasStyle={fontFamily:cy,fontSize:cs,color:cu};cw=ae(this.inCanvasStyle);L.legend.itemStyle={fontFamily:cg,fontSize:cc,lineHeight:cJ,color:cI};cf.series.dataLabels.style={fontFamily:cy,fontSize:cs,lineHeight:cw,color:cu};cf.series.dataLabels.color=cf.series.dataLabels.style.color;if(this.isDataLabelBold){cf.series.dataLabels.style.fontWeight=\"bold\";delete cf.series.dataLabels.style.lineHeight;ae(cf.series.dataLabels.style)}L.tooltip.style={fontFamily:cy,fontSize:cs,lineHeight:cw,color:cu};L.title.style={fontFamily:cg,color:cI,fontSize:(cq+3)+bQ,fontWeight:\"bold\"};ae(L.title.style);L.subtitle.style={fontFamily:cg,color:cI,fontSize:(cq+T(this.subTitleFontSizeExtender,1))+bQ,fontWeight:aJ(this.subTitleFontWeight,\"bold\")};ae(L.subtitle.style);L.chart.trendPointStyle={style:this.trendStyle};L.orphanStyles={defaultStyle:{style:aX({},this.inCanvasStyle)}};L.chart.colorRangeStyle={style:{fontFamily:cy,fontSize:cs,lineHeight:cw,color:cu}};ae(L.chart.colorRangeStyle);var cH=A-(cm.marginRight+cm.marginLeft),ch=Z-(cm.marginTop+cm.marginBottom),cz,cF,cr,cj;cm.origW=cz=T(cD.origw,A),cm.origH=cF=T(cD.origh,Z);cm.autoScale=cr=T(cD.autoscale,1);if(cr){cj=bV(cz,cF,A,Z)}else{cj=1}this.scaleFactor=cm.scaleFactor=cj;if(this.createGaugeAxis){this.createGaugeAxis(cb,L,{fontFamily:cg,fontSize:cc,lineHeight:cJ,color:cI})}this.parseStyles(L);delete L.xAxis.labels.style.backgroundColor;delete L.xAxis.labels.style.borderColor;delete L.yAxis[0].labels.style.backgroundColor;delete L.yAxis[0].labels.style.borderColor;delete L.yAxis[1].labels.style.backgroundColor;delete L.yAxis[1].labels.style.borderColor;this.showTooltip=T(cD.showtooltip,this.showTooltip,1);this.tooltipSepChar=bY(cD.tooltipsepchar,bD);this.showValues=T(cD.showvalues,cD.showvalue,this.showValues,1);this.seriesNameInToolTip=T(cD.seriesnameintooltip,1);if(!this.showTooltip){L.tooltip.enabled=false}L.plotOptions.series.connectNullData=T(cD.connectnulldata,0);cm.backgroundColor={FCcolor:{color:bY(cD.bgcolor,cl.get2DBgColor()),alpha:bY(cD.bgalpha,cl.get2DBgAlpha()),angle:bY(cD.bgangle,cl.get2DBgAngle()),ratio:bY(cD.bgratio,cl.get2DBgRatio())}};cG=T(cD.showborder,cd?0:1);cm.borderWidth=cG?T(cD.borderthickness,1):0;cm.borderColor=bC(bY(cD.bordercolor,cl.get2DBorderColor()),bY(cD.borderalpha,cl.get2DBorderAlpha()));cm.plotBackgroundColor=cm.plotBorderColor=ao;cm.plotBorderWidth=0;cm.plotShadow=0;var cE,cp,ce,cv=\"tile\",cx=\"fill\",ck=\"fit\";cm.bgSWF=bY(cD.bgimage,cD.bgswf);cm.bgSWFAlpha=T(cD.bgimagealpha,cD.bgswfalpha,100);cE=bY(cD.bgimagedisplaymode,\"none\").toLowerCase();cp=aJ(cD.bgimagevalign,ay).toLowerCase();ce=aJ(cD.bgimagehalign,ay).toLowerCase();if(cE==cv||cE==cx||cE==ck){if(cp!=j&&cp!=b8&&cp!=aM){cp=b8}if(ce!=bh&&ce!=b8&&ce!=E){ce=b8}}else{if(cp!=j&&cp!=b8&&cp!=aM){cp=j}if(ce!=bh&&ce!=b8&&ce!=E){ce=bh}}cm.bgImageDisplayMode=cE;cm.bgImageVAlign=cp;cm.bgImageHAlign=ce;cm.bgImageScale=T(cD.bgimagescale,100);cm.logoURL=aJ(cD.logourl);cm.logoPosition=bY(cD.logoposition,\"tl\").toLowerCase();cm.logoAlpha=T(cD.logoalpha,100);cm.logoLink=aJ(cD.logolink);cm.logoScale=T(cD.logoscale,100);cm.logoLeftMargin=T(cD.logoleftmargin,0);cm.logoTopMargin=T(cD.logotopmargin,0);cm.annRenderDelay=aJ(cD.annrenderdelay);var cB=L.tooltip.style;L.tooltip.backgroundColor=bC(bY(cB.backgroundColor,cD.tooltipbgcolor,cD.hovercapbgcolor,cD.hovercapbg,cl.get2DToolTipBgColor()),bY(cD.tooltipbgalpha,100));L.tooltip.borderColor=bC(bY(cB.borderColor,cD.tooltipbordercolor,cD.hovercapbordercolor,cD.hovercapborder,cl.get2DToolTipBorderColor()),bY(cD.tooltipborderalpha,100));L.tooltip.shadow=cD.showtooltipshadow==aE?{enabled:true,opacity:T(b7(cD.tooltipbgalpha,cD.tooltipborderalpha),100)/100}:false;L.tooltip.borderWidth=T(cD.tooltipborderthickness,1);if(cD.tooltipborderradius){L.tooltip.borderRadius=T(cD.tooltipborderradius,1)}L.tooltip.style.padding=T(cD.tooltippadding,this.tooltippadding,2);if(cD.tooltipcolor){cB.color=i(cD.tooltipcolor)}cB.backgroundColor=undefined;cB.borderColor=undefined;cB.border=undefined;cm.rotateValues=T(cD.rotatevalues,0);cm.placeValuesInside=T(cD.placevaluesinside,0);cm.valuePosition=cD.valueposition;cm.valuePadding=T(cD.valuepadding,4);L.plotOptions.series.shadow=T(cD.showshadow,cD.showcolumnshadow,this.defaultPlotShadow,y.showShadow[M]);if(cm.useRoundEdges){L.plotOptions.series.shadow=T(cD.showshadow,cD.showcolumnshadow,1);L.plotOptions.series.borderRadius=1;L.tooltip.borderRadius=2}L.title.text=bp(cD.caption);L.subtitle.text=bp(cD.subcaption);if(cD.showtooltip==m){L.tooltip.enabled=false}var cA=T(cD.plotspacepercent,20);if(cA>80||cA<0){cA=20}this.plotSpacePercent=L.plotOptions.series.groupPadding=cA/200;this.parseExportOptions(L);cm.dataStreamURL=bY(cD.datastreamurl,\"\");cm.refreshInterval=T(cD.refreshinterval,1);cm.dataStamp=cD.datastamp;ci=T(cD.showgaugeborder,1);cm.gaugeBorderColor=bY(cD.gaugebordercolor,this.gaugeBorderColor,\"333333\");cm.gaugeBorderThickness=ci?T(cD.gaugeborderthickness,this.gaugeBorderThickness,2):0;cm.gaugeBorderAlpha=bY(cD.gaugeborderalpha,x);cm.gaugeFillColor=bY(cD.gaugefillcolor,cD.ledbgcolor,\"000000\");cm.useSameFillColor=T(cD.usesamefillcolor,0);cm.useSameFillBgColor=T(cD.usesamefillbgcolor,cm.useSameFillColor);cm.colorRangeFillMix=aZ(cD.colorrangefillmix,cD.gaugefillmix,this.colorRangeFillMix,\"{light-10},{dark-10},{light-10},{dark-10}\");cm.colorRangeFillRatio=aZ(cD.colorrangefillratio,cD.gaugefillratio,this.colorRangeFillRatio,cD.gaugefillratio,\"0,10,80,10\");cm.showColorRangeBorder=T(cD.showcolorrangeborder,cD.showgaugeborder,this.showColorRangeBorder,0);cm.colorRangeBorderColor=bY(cD.colorrangebordercolor,cD.gaugebordercolor,\"{dark-20}\");cm.colorRangeBorderThickness=ci?T(cD.colorrangeborderthickness,cD.gaugeborderthickness,1):0;cm.colorRangeBorderAlpha=T(cD.colorrangeborderalpha,cD.gaugeborderalpha,100);cm.roundRadius=T(cD.roundradius,cD.gaugeroundradius,0);cm.showShadow=T(cD.showshadow,1);cm.gaugeType=T(cD.gaugetype,this.gaugeType,1);if(this.preSeriesAddition){this.preSeriesAddition(L,cb,A,Z)}this.series(cb,L,cC,A,Z);if(this.postSeriesAddition){this.postSeriesAddition(L,cb,A,Z)}if(this.configureAxis){this.configureAxis(L,cb)}if(this.spaceManager){this.spaceManager(L,cb,A,Z)}this.updateSnapPoints&&this.updateSnapPoints(L);this.latestDataUpdater&&this.latestDataUpdater(L,cb,A,Z);if(window.console&&window.console.log&&window.FC_DEV_ENVIRONMENT){console.log(L)}return L},latestDataUpdater:function(ce){var A=this.chartInstance,cb,Z=ce.series&&ce.series,cd=Z&&Z[0]&&Z[0].data,M,cc,L;if((cb=(A&&A.jsVars&&A.jsVars._rtLastUpdatedData))&&cd){for(M=0,cc=cb.values&&cb.values.length;M<cc;M+=1){L=cd[M];if(L){L.y=cb.values[M];L.displayValue=cb.labels[M];L.toolText=cb.toolTexts[M]}}}},styleApplicationDefinition_font:function(A,Z,L){var cg,ch,cf,cc=false,cb,ce,cd,M=this.styleMapForFont;switch(Z){case\"caption\":cg=A.title;break;case\"datalabels\":cg=A.plotOptions.series.dataLabels;break;case\"value\":cg=A.plotOptions.series.dataLabels;break;case\"datavalues\":cg=A.plotOptions.series.dataLabels;cc=true;break;case\"subcaption\":cg=A.subtitle;break;case\"tooltip\":cg=A.tooltip;break;case\"trendvalues\":cg=A.chart.trendPointStyle;break;case\"xaxisname\":cg=A.xAxis.title;break;case\"vlinelabels\":cg={style:A[bO].divlineStyle};break;case\"gaugelabels\":cg=A.chart.colorRangeStyle;break;case\"tickvalues\":cg=A.scale.tickValues;break;case\"limitvalues\":cg=A.scale.limitValues;break;case\"openvalue\":cg=A.chart.openValue;break;case\"closevalue\":cg=A.chart.closeValue;break;case\"highlowvalue\":cg=A.chart.highLowValue;break;case\"legend\":cg={style:A.legend.itemStyle};break;default:A.orphanStyles[Z]=cg={text:\"\",style:{}};break}if(typeof cg===\"object\"){if(cg instanceof Array){for(cb=0,ce=cg.length;cb<ce;cb+=1){cd=cg[cb];for(ch in L){cf=ch.toLowerCase();if(typeof M[cf]===\"function\"){M[cf](L[ch],cd,cc)}}ae(cd.style)}}else{for(ch in L){cf=ch.toLowerCase();if(typeof M[cf]===\"function\"){M[cf](L[ch],cg,cc)}}ae(cg.style)}}},createGaugeAxis:function(cm,L,A){var cj=cm.chart,M=this.colorM,cb=this.numberFormatter,cc=this.isHorizontal?(T(cj.ticksbelowgauge,cj.ticksbelowgraph,this.ticksbelowgauge,1)?aH:J):(T(cj.ticksonright,this.ticksOnRight,1)?aU:a1),co=bY(cj.majortmcolor,M.getTickColor()),cf=T(cj.majortmalpha,100),ch=T(T(cj.majortmheight)*this.scaleFactor,this.majorTMHeight,6),cg=T(cj.tickvaluestep,cj.tickvaluesstep,1),Z=T(cj.showtickmarks,1),cl=Z?T(cj.connecttickmarks,this.connectTickMarks,1):0,cd=T(cj.showtickvalues,Z),ck=T(cj.majortmthickness,1),cn=T(cb.getCleanValue(cj.upperlimit)),ci=T(cb.getCleanValue(cj.lowerlimit)),ce=T(cj.reversescale,0)==1;if(!this.isHorizontal){ce=!ce}cg=cg<1?1:cg;L.scale={min:null,max:null,axisPosition:cc,showTickMarks:Z,showTickValues:cd,showLimits:T(cj.showlimits,cd),adjustTM:Boolean(T(cj.adjusttm,1)),majorTMNumber:T(cj.majortmnumber,-1),majorTMColor:bC(co,cf),majorTMHeight:Z?ch:0,majorTMThickness:ck,minorTMNumber:T(cj.minortmnumber,this.minorTMNumber,4),minorTMColor:bC(bY(cj.minortmcolor,co),T(cj.minortmalpha,cf)),minorTMHeight:Z?T(T(cj.minortmheight,cj.minortmwidth)*this.scaleFactor,Math.round(ch/2)):0,minorTMThickness:T(cj.minortmthickness,1),tickMarkDistance:T(T(cj.tickmarkdistance,cj.tickmarkgap)*this.scaleFactor,this.tickMarkDistance,3),tickValueDistance:T(T(cj.tickvaluedistance,cj.displayvaluedistance)*this.scaleFactor,2)+2,placeTicksInside:T(cj.placeticksinside,0),placeValuesInside:T(cj.placevaluesinside,0),tickValueStep:cg,setAdaptiveMin:T(cj.setadaptivemin,0),upperLimit:cn,lowerLimit:ci,upperLimitDisplay:aJ(cj.upperlimitdisplay),lowerLimitDisplay:aJ(cj.lowerlimitdisplay),reverseScale:ce,connectorColor:bC(bY(cj.connectorcolor,co),T(cj.connectoralpha,cf)),connectorThickness:cl?T(cj.connectorthickness,ck):0,majorTM:[],minorTM:[],trendPoint:[],labels:{style:aX({},A)},tickValues:{style:aX({},A)},limitValues:{style:aX({},A)}}},configureAxis:function(cb,cy){var cv=cy.chart,ci=cb.series[0],ck,co,cr,cf,ct,cd=this.colorM,cp,cs,cn,cm,cq,cg,cj=this.colorRangeGetter,L=cj&&cj.colorArr,M=L&&L.length,cl=L&&L[0],Z=L&&L[M-1],cu=this.minDataValue,ch=this.maxDataValue,cx=cb.scale,A=cx.lowerLimit,cc=cx.upperLimit,ce=this.numberFormatter,cw;if(ci){if(af(cu)&&af(ch)){A=A<=cu?A:cl&&cl.minvalue;cc=cc>=ch?cc:Z&&Z.maxvalue}else{A=T(A,cl&&cl.minvalue);cc=T(cc,Z&&Z.maxvalue)}ck=new bX(A,cc,false,cx,this.numberFormatter);ck.calculateLimits(this.maxDataValue,this.minDataValue);ck.calculateTicks();cx.majorTM=ck.getMajorTM();cx.minorTM=ck.getMinorTM();co=cx.min=ck.min;cr=cx.max=ck.max;if(cy.trendpoints&&(cf=cy.trendpoints.point)&&(cp=cf.length)>0){cx.trendPoint=[];for(cs=0;cs<cp;cs+=1){ct=cf[cs];cg=T(ct.dashed,0)?bL(bY(Math.max(ct.dashlen,ct.thickness),4),bY(ct.dashgap,3),T(ct.thickness,1)):undefined;cn=T(ct.startvalue,ct.value);cm=T(ct.endvalue,cn);cw=cn!==cm;if(cn<=cr&&cn>=co&&cm<=cr&&cm>=co){cx.trendPoint.push({style:aX(aX(cb.chart.trendPointStyle.style),{}),startValue:cn,endValue:cm,displayValue:aJ(bp(ct.displayvalue),cw?ay:ce.scale(cn)),showOnTop:T(ct.showontop,cv.ticksbelowgauge,cv.ticksbelowgraph,1),color:bY(ct.color,cd.getTrendLightColor()),alpha:T(ct.alpha,99),thickness:T(ct.thickness,1),dashStyle:cg,useMarker:T(ct.usemarker,0),markerColor:bC(bY(ct.markercolor,ct.color,cd.getTrendLightColor()),100),markerBorderColor:bC(bY(ct.markerbordercolor,ct.bordercolor,cd.getTrendDarkColor()),100),markerRadius:T(T(ct.markerradius)*this.scaleFactor,5),markerToolText:P(ct.markertooltext),trendValueDistance:T(T(ct.trendvaluedistance,cv.trendvaluedistance)*this.scaleFactor,cx.tickValueDistance),isZone:cw,valueInside:T(ct.valueinside,cv.placevaluesinside,0),showBorder:T(ct.showborder,1),borderColor:bC(bY(ct.bordercolor,ct.color,cd.getTrendDarkColor()),T(ct.borderalpha,ct.alpha,100)),radius:T(T(ct.radius)*this.scaleFactor),innerRadius:T(T(ct.innerradius)*this.scaleFactor)});ag(bY(ct.bordercolor,ct.color,cd.getTrendDarkColor()))}}}}},placeTickMark:function(cB,cg,ci){var cv=this.smartLabel,cf=cB.chart,cF=this.width-(cf.marginRight+cf.marginLeft),ce=this.height-(cf.marginTop+cf.marginBottom),cs=cB.scale,cM=cs.min,ck=cs.max,cz=cs.axisPosition,cL=cs.minorTMHeight,cH=cs.majorTMHeight,cc=cs.showLimits,cd=cs.showTickValues,cK=cs.tickMarkDistance,cG=cs.tickValueDistance,cr=Math.max(cH,cL),cl=cs.placeTicksInside,cm=cs.placeValuesInside,cC=cs.reverseScale,cj=0,cq=0,co=0,cI=1,A,M=cs.majorTM.length-1,cA=(cz===2||cz===4)?false:true,cx,cE,ch,cp,Z,cb=6,cD=cA?ce-ci:cF-cg,cu=0,cJ,cn,L,cy,ct=cs.tickValues.style,cw=cs.limitValues.style;if(cs.majorTM[0]&&cs.majorTM[1]){cJ=cs.majorTM[1].value-cs.majorTM[0].value}if(!cl){cj+=cK+cr}if(cd||cc){cv.setStyle(cw);ch=T(parseInt(cw.fontSize,10),10);cp=T(parseInt(cw.lineHeight,10),12);Z=cp/2;if(!cm){cj+=cG}if(cz===3){co=ch}if(cA){cy=cD-cj;cn=((cF/(ck-cM))*cJ/2)+6}else{cn=cD-cj;cy=((ce/(ck-cM))*cJ)+Z}if(cs.majorTM[0]){A=cs.majorTM[0];if(A.isString){if(A.displayValue){cx=cv.getSmartText(A.displayValue,cn,cy);A.displayValue=cx.text;A._oriText=cx.oriText;if(!cA){cu=Math.max(cu,cx.width);A.labelY=ch-(cC?cx.height-Z:Z);A.labelX=cq}else{cu=Math.max(cu,cx.height);A.labelY=((cz===1&&!cm)||(cz===3&&cm))?ch-cx.height:co;cb=Math.min(6,cx.width/2)}}}else{cI=0}if(cA){if(cC){A.labelX=cb;A.align=E}else{A.labelX=-cb;A.align=bh}}}if(cs.majorTM[M]){A=cs.majorTM[M];if(A.isString){if(A.displayValue){cx=cv.getSmartText(A.displayValue,cn,cy);A.displayValue=cx.text;A._oriText=cx.oriText;if(!cA){cu=Math.max(cu,cx.width);A.labelY=ch-(cC?Z:cx.height-Z);A.labelX=cq}else{cu=Math.max(cu,cx.height);A.labelY=((cz===1&&!cm)||(cz===3&&cm))?ch-cx.height:co;cb=Math.min(6,cx.width/2)}}}else{cb=6;M+=1}if(cA){if(cC){A.labelX=-cb;A.align=bh}else{A.labelX=cb;A.align=E}}}for(;cI<M;cI++){if(cI==0||cI==M-1){cv.setStyle(cw);ch=T(parseInt(cw.fontSize,10),10);cp=T(parseInt(cw.lineHeight,10),12);if(cA){co=((cz===1&&cm)||(cz===3&&!cm))?ch:0}}else{cv.setStyle(ct);ch=T(parseInt(ct.fontSize,10),10);cp=T(parseInt(ct.lineHeight,10),12);if(cA){co=((cz===1&&cm)||(cz===3&&!cm))?ch:0}}A=cs.majorTM[cI];if(A.displayValue){A.labelX=T(A.labelX,cq);if(!cA){cx=cv.getOriSize(A.displayValue);cu=Math.max(cu,cx.width);A.labelY=ch-(cx.height/2)}else{cu=Math.max(cu,cp);A.labelY=co}}}}L=cj;if(!cm){cj+=cu}cj=Math.min(cD,cj);if(!cm){cs._labelUsedSpace=cj-L}else{cs._labelUsedSpace=cu}switch(cz){case 1:cf.marginTop+=cj;break;case 2:cf.marginRight+=cj;break;case 3:cf.marginBottom+=cj;break;case 4:cf.marginLeft+=cj;break}return cj},eiMethods:{feedData:function(cd){var Z=this,cb=Z.jsVars,cc=cb.instanceAPI,L=cc.hcInstance&&cc.hcInstance.series&&cc.hcInstance.series[0],A,ce;if(Z.isActive()&&cc&&cc.linearDataParser&&(ce=cc.linearDataParser(cd,cc.multisetRealtime))){A=Z.getDataJSON();if(cc.realtimeUpdate){cc.realtimeUpdate(ce)}else{L&&L.realtimeUpdate(ce)}cb._rtLastUpdatedData=cc.multisetRealtime?ce:Z.getDataJSON();q.raiseEvent(\"RealTimeUpdateComplete\",{data:cd,prevData:A.values,source:\"feedData\",url:null},cb.fcObj);try{window.FC_ChartUpdated&&window.FC_ChartUpdated(cb.fcObj.id)}catch(M){setTimeout(function(){throw(M)},0)}return true}return false},getData:function(){var M,A,L=(M=this.jsVars)&&(M=M.instanceAPI)&&(M=M.hcInstance)&&(M=M.series)&&(M=M[0])&&(M=M.data);A=L&&L[0];if(A){return T(A.value,A.y)}return null},setData:function(L,A){var M=\"\";if((L&&L.toString)||L===\"\"||L===0){M=\"value=\"+L.toString()}if((A&&A.toString)||A===\"\"){M=M+\"&label=\"+A.toString()}if(M){this.feedData(M)}},stopUpdate:function(M){var A=this,L=A.__state;clearTimeout(L._toRealtime);L._rtAjaxObj&&L._rtAjaxObj.abort();L._rtPaused=true;q.raiseEvent(\"RealimeUpdateStopped\",{source:M},A)},restartUpdate:function(){var A=this.__state;if(A._rtDataUrl){A._rtPaused=false;A._rtAjaxObj.get(A._rtDataUrl)}},clearChart:function(A){var cb=this.jsVars,Z,M,L;A=(A&&A.toString&&A.toString());if((Z=cb.instanceAPI)&&(Z=Z.hcInstance)&&(L=Z.series)&&(Z=L[0])&&(Z=Z.chart)&&(Z=Z.options)&&(Z=Z.scale)){M=Z.min;if(!isNaN(M)){this.feedData(\"&showLabel=0&value=\"+M);W.raiseEvent(\"ChartCleared\",{source:A},this,[this.id,A])}}},getDataJSON:function(){var cb=0,cd,L,Z,M=[],ce=[],A=[],cc=(cd=this.jsVars)&&(cd=cd.instanceAPI)&&(cd=cd.hcInstance)&&(cd=cd.series)&&(cd=cd[0])&&(cd=cd.data);if(!cc||!cc.length){L=0}else{L=cc.length}for(;cb<L;cb+=1){Z=cc[cb];M.push(T(Z.value,Z.y));ce.push((Z.dataLabel&&Z.dataLabel.textStr)||\"\");A.push(Z.toolText||\"\")}return{values:M,labels:ce,toolTexts:A}}},linearDataParser:function(ci,cg){var cm=\"&\",cl=\"=\",M=\"|\",cj=\",\",ck={values:cj,colors:cj,toolTexts:cj,links:cj,valueVisibility:cj};var Z=this,L=Z.chartInstance,A,cd,cc,cf,cb,ch={},ce=0;ci=ci&&ci.toString&&ci.toString()||\"\";A=ci.split(cm);for(cf=0,cb=A.length;cf<cb;cf+=1){cd=A[cf].split(cl);cc=cd[1];cd=cd[0];if(cd===ay||cd===undefined||cc===undefined||(cc===ay&&!cg)){continue}cd=cd.toLowerCase();switch(cd){case\"label\":ch.labels=cc.split(cj);break;case\"vline\":ch.vlines=cc.split(cj);break;case\"vlinelabel\":ch.vlineLabels=cc.split(cj);break;case\"vlinecolor\":ch.vlineColors=cc.split(cj);break;case\"vlinethickness\":ch.vlineThickness=cc.split(cj);break;case\"vlinedashed\":ch.vlineDashed=cc.split(cj);break;case\"value\":ch.values=cc.split(M);ce=1;break;case\"showlabel\":ch.showLabels=cc.split(cj);break;case\"showvalue\":ch.valueVisibility=cc.split(M);break;case\"tooltext\":ch.toolTexts=cc.split(M);break;case\"link\":ch.links=cc.split(M);break;case\"color\":ch.colors=cc.split(M);break;case\"datastamp\":ch.dataStamp=cc;break;case\"stopupdate\":ch.pause=(cc==\"1\");break;case\"clear\":ch.clear=(cc==\"1\");break;default:ch[cd]=cc}}if(cg){if(!ch.values){ch.values=[]}cf=ch.values.length;while(cf--){for(cd in ck){if(ch[cd]){ch[cd][cf]&&(ch[cd][cf]=ch[cd][cf].split(cj))}else{ch[cd]=[]}}ce=b7(ch.values[cf].length,ce)}}if(ch.labels){ce=b7(ce,ch.labels.length)}ch.dimension=ce;if(ch.pause&&L.stopUpdate){L.stopUpdate(\"datastream\")}return ch},series:function(ce,cd,A,M,cf){var Z={data:[]},L,cb,cc;cd.legend.enabled=false;if(ce.pointers&&ce.pointers.pointer){L=ce.pointers.pointer}else{L=ce.value}if(!(L instanceof Array)){if(typeof L!==\"object\"){L=[{value:L}]}else{L=[L]}}cc=this.multiValueGauge?L.length:1;for(cb=0;cb<cc;cb+=1){Z.data.push(this.getPointStub(L[cb],cb,cd,ce))}cd.series[0]=Z},pointValueWatcher:function(A){if(A!==null){this.maxDataValue=this.maxDataValue>A?this.maxDataValue:A;this.minDataValue=this.minDataValue<A?this.minDataValue:A}},updateSnapPoints:function(cd){var cg=this,ce=cd.chart,cb=cg.width,L=cg.height,cf=ce.marginBottom,Z=ce.marginLeft,M=ce.marginRight,A=ce.marginTop,cc=bl(cg.snapLiterals||(cg.snapLiterals={}),{chartstartx:0,chartstarty:0,chartwidth:cb,chartheight:L,chartendx:cb,chartendy:L,chartcenterx:cb/2,chartcentery:L/2,chartbottommargin:cf,chartleftmargin:Z,chartrightmargin:M,charttopmargin:A,canvasstartx:Z,canvasstarty:A,canvaswidth:cb-Z-M,canvasheight:L-A-cf,canvasendx:cb-M,canvasendy:L-cf});cc.gaugestartx=cc.canvasstartx;cc.gaugestarty=cc.canvasstarty;cc.gaugeendx=cc.canvasendx;cc.gaugeendy=cc.canvasendy;cc.gaugecenterx=cc.canvascenterx=Z+(cc.canvaswidth/2);cc.gaugecentery=cc.canvascentery=A+(cc.canvasheight/2)}},bb.base);bb(\"linearscalegauge\",{spaceManager:function(cq,ck,ci,cg){var cj=cq.chart,co=ck.chart,cn=ci-(cj.marginRight+cj.marginLeft),Z=cg-(cj.marginTop+cj.marginBottom),A=cj.marginRight,cc=cj.marginLeft,M=cj.marginTop,L=cj.marginBottom,cd=cn*0.3,cl=Z*0.3,cb,ce,cm=0,cp=T(co.canvasleftmargin),cf=T(co.canvasleftmargin,cn*0.4),ch=T(co.canvasrightmargin);if(this.manageTitleSpace){ce=this.manageTitleSpace(cq,ck,cn/2,Z/2)}if(this.placeTickMark){cb=this.placeTickMark(cq,cd,cl)}if(this.placeDataLabels){cm=this.placeDataLabels(cq,cd,cl,M,A,L,cc,cb)}if(this.postDataLabelsPlacement){this.postDataLabelsPlacement(cq,cd,cl)}this.fixCaptionAlignment&&this.fixCaptionAlignment(ce,cq,ck,ci,0,cm)},manageTitleSpace:function(cb,cc,L,Z){var cd=cb.chart,A=this.width-(cd.marginRight+cd.marginLeft),M=this.height-(cd.marginTop+cd.marginBottom);return bf(cb,cc,A,M-Z)},placeDataLabels:function(cs,ch,cp,ce,Z,cb,cg){var ci=this.smartLabel,cn=cs.chart,cr=this.width-(cn.marginRight+cn.marginLeft),M=this.height-(cn.marginTop+cn.marginBottom),L=cn.marginBottom,co,A=cs.plotOptions.series.dataLabels,cq=A.style,cc=T(parseInt(cq.fontSize,10),10),cd=T(parseInt(cq.lineHeight,10),12),cm=M-cp,ck=cn.valuePadding,cf=0,cl=cs.series[0].data[0];if(cl&&cl.displayValue!==ay){ci.setStyle(cq);if(cl.isLabelString){co=ci.getSmartText(cl.displayValue,cr,cm-ck);cl.displayValue=co.text}else{co=ci.getOriSize(cl.displayValue)}if(cl.displayValue===\" \"){co={height:cd}}if(co.height>0){cf=co.height+ck}if(cf>cm){var cj=cf-cm;ck=cj<ck?ck-cj:0;cf=cm}cn.marginBottom+=cf;A.align=o;cn.valuePadding=L-cb+cc+ck}return cf},postDataLabelsPlacement:function(cu,cc,ce){var ch=this.smartLabel,ck=cu.chart,cr=this.width-(ck.marginRight+ck.marginLeft),A=this.height-(ck.marginTop+ck.marginBottom),ct=cu.scale,cl=ct.min,cm=ct.max,cg=ct.axisPosition,cn=ct.limitValues.style,ci=ct.reverseScale,cb,cp=ct.majorTM.length-1,cf=(cg===2||cg===4)?false:true,cq,Z=T(parseInt(cn.fontSize,10),10),M=T(parseInt(cn.lineHeight,10),12),cd=M/2,cs,cj,co,L;if(ct.majorTM[0]&&ct.majorTM[1]){cj=ct.majorTM[1].value-ct.majorTM[0].value}if(cf){L=ct._labelUsedSpace;co=((cr/(cm-cl))*cj/2)+6}else{co=ct._labelUsedSpace;L=((A/(cm-cl))*cj)+cd}ch.setStyle(cn);if(ct.majorTM[0]&&ct.majorTM[0].isString){cb=ct.majorTM[0];if(cb.displayValue){cq=ch.getSmartText(cb._oriText,co,L);cb.displayValue=cq.text;if(!cf){cb.labelY=Z-(ci?cq.height-cd:cd)}else{cs=Math.min(6,cq.width/2);if(ci){cb.labelX=cs}else{cb.labelX=-cs}}}}if(ct.majorTM[cp]&&ct.majorTM[cp].isString){cb=ct.majorTM[cp];if(cb.displayValue){cq=ch.getSmartText(cb._oriText,co,L);cb.displayValue=cq.text;if(!cf){cb.labelY=Z-(ci?cd:cq.height-cd)}else{cs=Math.min(6,cq.width/2);if(ci){cb.labelX=-cs}else{cb.labelX=cs}}}}},getPointStub:function(A,ce,ci,cm,cj){var M=this.numberFormatter,cc=M.getCleanValue(A.value),cl=aJ(A.link),ch=A.tooltext,cf=aJ(bp(A.displayvalue)),Z=M.dataLabels(cc),cd,cb,cg,L=cm.chart,ck;if(!this.showTooltip){cb=false}else{if(ch!==undefined){cb=bp(ch);ck=true}else{cb=Z===null?false:(cj!==undefined)?cj+this.tooltipSepChar+Z:Z}}if(!T(A.showvalue,this.showValues)){cg=ay}else{if(cf!==undefined){cg=cf}else{cg=aJ(Z,\" \")}}if(this.pointValueWatcher){this.pointValueWatcher(cc)}if(this.getPointColorObj){cd=this.getPointColorObj(L,cc)}return{y:cc,displayValue:cg,toolText:cb,isLabelString:ck,color:bC(cd.code,cd.alpha),link:cl,colorRange:cd,doNotSlice:true}},getPointColorObj:function(A,L){return this.colorRangeGetter.getColorObj(L)}},bb.gaugebase);bb(\"led\",{singleValued:true,isDataLabelBold:true,preSeriesAddition:function(cc,L,M,A){var Z=L.chart,cb=cc.chart;cb.ledGap=T(Z.ledgap,2);cb.ledSize=T(Z.ledsize,2)}},bb.linearscalegauge);bb(\"vled\",{defaultSeriesType:\"led\",defaultPlotShadow:1,standaloneInit:true,realtimeEnabled:true,chartleftmargin:15,chartrightmargin:15,charttopmargin:10,chartbottommargin:10,showTooltip:0,connectTickMarks:0,creditLabel:bq},bb.led);bb(\"hled\",{defaultPlotShadow:1,standaloneInit:true,defaultGaugePaletteOptions:bE,creditLabel:bq,isHorizontal:true,connectTickMarks:1,realtimeEnabled:true},bb.vled);bb(\"bullet\",{creditLabel:bq,defaultSeriesType:\"bullet\",defaultPlotShadow:1,drawAnnotations:true,realtimeEnabled:false,subTitleFontSizeExtender:0,subTitleFontWeight:\"normal\",connectTickMarks:0,minorTMNumber:0,majorTMHeight:4,chartleftmargin:10,chartrightmargin:15,charttopmargin:5,chartbottommargin:5,isDataLabelBold:true,defaultGaugePaletteOptions:aK(bE,{paletteColors:[[\"A6A6A6\",\"CCCCCC\",\"E1E1E1\",\"F0F0F0\"],[\"A7AA95\",\"C4C6B7\",\"DEDFD7\",\"F2F2EE\"],[\"04C2E3\",\"66E7FD\",\"9CEFFE\",\"CEF8FF\"],[\"FA9101\",\"FEB654\",\"FED7A0\",\"FFEDD5\"],[\"FF2B60\",\"FF6C92\",\"FFB9CB\",\"FFE8EE\"]],bgColor:[\"FFFFFF\",\"CFD4BE,F3F5DD\",\"C5DADD,EDFBFE\",\"A86402,FDC16D\",\"FF7CA0,FFD1DD\"],bgAngle:[270,270,270,270,270],bgRatio:[\"0,100\",\"0,100\",\"0,100\",\"0,100\",\"0,100\"],bgAlpha:[\"100\",\"60,50\",\"40,20\",\"20,10\",\"30,30\"],toolTipBgColor:[\"FFFFFF\",\"FFFFFF\",\"FFFFFF\",\"FFFFFF\",\"FFFFFF\"],toolTipBorderColor:[\"545454\",\"545454\",\"415D6F\",\"845001\",\"68001B\"],baseFontColor:[\"333333\",\"60634E\",\"025B6A\",\"A15E01\",\"68001B\"],tickColor:[\"333333\",\"60634E\",\"025B6A\",\"A15E01\",\"68001B\"],trendColor:[\"545454\",\"60634E\",\"415D6F\",\"845001\",\"68001B\"],plotFillColor:[\"545454\",\"60634E\",\"415D6F\",\"845001\",\"68001B\"],borderColor:[\"767575\",\"545454\",\"415D6F\",\"845001\",\"68001B\"],borderAlpha:[50,50,50,50,50]}),preSeriesAddition:function(cd,cf,M,cg){var cb=this.colorRangeGetter,cc=cb.colorArr,Z=cc.length,ch=cd.chart,A=cf.chart,L,ce;if(Z&&this.pointValueWatcher){ce=T(cc[0].minvalue);if(af(ce)){this.pointValueWatcher(ce)}ce=T(cc[Z-1].maxvalue);if(af(ce)){this.pointValueWatcher(ce)}}L=T(A.showgaugeborder,A.showcolorrangeborder,0);ch.colorRangeBorderThickness=L?T(A.colorrangeborderthickness,A.gaugeborderthickness,this.gaugeBorderThickness,2):0},postSeriesAddition:function(cb,L,cc,A){var ce=cb.chart,Z=cb.series[0],cd=L.chart,M={value:L.target};Z.data.push(aX(this.getPointStub(M,0,cb,L),{borderColor:bC(bY(cd.targetcolor,this.colorM.get2DPlotFillColor()),aJ(cd.targetalpha,100)),borderWidth:T(cd.targetthickness,3),targetThickness:T(cd.targetthickness,3),targetFillPercent:T(cd.targetfillpercent,60)}))},getPointStub:function(ci,cj,L,cp,cd){var cc=this.numberFormatter,M=this.colorM,ch=this.getColorRange,ce=this.smartLabel,Z=cc.getCleanValue(ci.value),cm=aJ(ci.link),co=ci.tooltext,cq=aJ(bp(ci.displayvalue)),cl=cc.dataLabels(Z),A=this.colorRangeGetter.getColorObj(Z),cn=cp.chart,ck,cb,cr,cf=bY(cn.plotfillcolor,M.get2DPlotFillColor()),cg=T(cn.plotasdot,0);if(!this.showTooltip){ck=ay}else{if(co!==undefined){ck=bp(co)}else{ck=cl===null?false:(cd!==undefined)?cd+this.tooltipSepChar+cl:cl}}if(!T(ci.showvalue,this.showValues)){cb=ay}else{if(cq!==undefined){cb=cq}else{cb=aJ(cl,\" \")}}if(this.pointValueWatcher){this.pointValueWatcher(Z)}if(/\\{/.test((cr=bY(cn.plotbordercolor,\"{dark-20}\")))){cr=M.parseColorMix(cf,cr).join()}return{y:Z,displayValue:cb,toolText:ck,plotAsDot:cg,plotFillPercent:bY(cn.plotfillpercent,cg?25:40),color:bC(cf,T(cn.plotfillalpha,100)),borderColor:bC(cr,T(cn.plotborderalpha,100)),borderWidth:T(cn.showplotborder,0)?T(cn.plotborderthickness,1):0,link:cm,colorRange:A,doNotSlice:true}}},bb.linearscalegauge);bb(\"vbullet\",{creditLabel:bq,defaultSeriesType:\"bullet\",gaugeType:4,ticksOnRight:0,standaloneInit:true},bb.bullet);bb(\"hbullet\",{creditLabel:bq,defaultSeriesType:\"hbullet\",gaugeType:1,standaloneInit:true,isHorizontal:true,defaultCaptionPadding:5,placeDataLabels:function(cr,ch,co,cf,cb,cc,cg){var ci=this.smartLabel,cm=cr.chart,cq=this.width-(cm.marginRight+cm.marginLeft),Z=this.height-(cm.marginTop+cm.marginBottom),A=cm.marginRight,cn,M=cr.plotOptions.series.dataLabels,cp=M.style,cd=T(parseInt(cp.fontSize,10),10),L=cq-ch,ck=cm.valuePadding,ce=0,cl=cr.series[0].data[0];if(cl&&cl.displayValue!==ay){ci.setStyle(cp);if(cl.isLabelString){cn=ci.getSmartText(cl.displayValue,L-ck,Z);cl.displayValue=cn.text}else{cn=ci.getOriSize(cl.displayValue)}if(cn.height>0){ce=cn.width+ck}if(ce>L){var cj=ce-L;ck=cj<ck?ck-cj:0;ce=L}cm.marginRight+=ce;M.align=bh;M.x=0;M.y=cd-(cn.height/2)}return ce},manageTitleSpace:function(M,cd,ch,cc){var cg=M.chart,L=cd.chart,Z=this.width-(cg.marginRight+cg.marginLeft),cb=this.height-(cg.marginTop+cg.marginBottom),cf=T(L.captionpadding,2),ce=T(T(L.captiononright,0)?L.canvasrightmargin:L.canvasleftmargin);if(af(ce)){ce-=cf}var A=T(ce,Z-ch);return a5(M,cd,A,cb,this.defaultCaptionPadding,this.width,this.height)},fixCaptionAlignment:function(cb,M,cc,L,ch,Z){var cg=M.chart,A=cc.chart,ce=T(A.canvasleftmargin),cd=T(A.canvasrightmargin),cf=0;cg.marginRight+=cb.right;cg.marginLeft+=cb.left;if(af(ce)){cg.spacingLeft=cg.marginLeft=ce;cg.spacingLeft-=(cb.left+cf-1)}if(af(cd)){cg.spacingRight=cg.marginRight=cd;cg.spacingRight-=(cb.right+cf-1)}G(M,cc,this.width,ch,Z)}},bb.bullet);bb(\"lineargauge\",{creditLabel:bq,defaultSeriesType:\"lineargauge\",multiValueGauge:true,realtimeEnabled:true,gaugeType:1,chartleftmargin:15,chartrightmargin:15,charttopmargin:10,chartbottommargin:10,colorRangeFillMix:\"{light-10},{dark-20},{light-50},{light-85}\",colorRangeFillRatio:\"0,8,84,8\",isDataLabelBold:true,eiMethods:jQuery.extend({},bb.gaugebase.eiMethods,{getData:function(M){var cb,A,L,Z=(cb=this.jsVars)&&(cb=cb.instanceAPI)&&(cb=cb.hcInstance)&&(cb=cb.series)&&(cb=cb[0])&&(cb=cb.data);if(!Z||!Z.length){A=0}else{A=Z.length}if(M!==undefined&&M>0&&M<=A){L=Z[M-1];return T(L.value,L.y)}else{return null}},getDataForId:function(Z){var M,L,A=(M=this.jsVars)&&(M=M.instanceAPI)&&(M=M.hcInstance)&&(M=M.series)&&(M=M[0])&&(M=M.dataById);if(A[Z]&&A[Z].point){L=A[Z].point;return T(L.value,L.y)}else{return null}},setData:function(cd,cf,ce){var L=this,cg=\"\",A=\"\",cc,cb=(cc=L.jsVars)&&(cc=cc.instanceAPI)&&(cc=cc.hcInstance)&&(cc=cc.series)&&(cc=cc[0])&&(cc=cc.data),M=cb&&cb.length||0,Z=0;if(cd>0&&cd<=M&&((cf&&cf.toString())||cf===\"\"||cf===0)){Z=cd;while(--Z){A+=\"|\"}cg+=\"value=\"+(A+cf);if((ce&&ce.toString)||ce===\"\"){cg+=(\"&label=\"+A+ce.toString())}L.feedData(cg)}},setDataForId:function(Z,M){var L,A=(L=this.jsVars)&&(L=L.instanceAPI)&&(L=L.hcInstance)&&(L=L.series)&&(L=L[0])&&(L=L.dataById);if(A[Z]&&(A[Z].index!==undefined)){this.setData((A[Z].index+1),M)}}}),placeDataLabels:function(cu,cw,cH,cd,L,cm,cg,cn){var M=this,cG=cu.scale,cs=M.smartLabel,cf=cu.chart,cy=M.width-(cf.marginRight+cf.marginLeft),ce=M.height-(cf.marginTop+cf.marginBottom),cz=cf.marginBottom,cC,cc,cb=cu.plotOptions.series.dataLabels,cx=cb.style,A=cu.scale&&cu.scale.labels&&cu.scale.labels.style,ch=T(parseInt(cx.fontSize,10),10),cp=T(parseInt(cx.lineHeight,10),12),cF=ce-cH,cj=cy-cw,cD=cf.valuePadding,ck,cq=0,co=0,cv=0,cB=0,ct=0,Z=0,cE=(cu.series&&cu.series[0]&&cu.series[0].data)||[],cl=(cu.scale&&cu.scale.trendPoint)||[],cA=0,ci=cE.length,cr;cs.setStyle(cx);for(;cA<ci;cA+=1){cr=cE[cA];if(cr&&cr.displayValue!==ay){ck=cD+cr.radius*(cr.sides<=3?0.5:(cr.sides%2?1.1-(1/cr.sides):1));cf.valuePadding=Math.max(cf.valuePadding,ck);if(M.isHorizontal){if(cr.isLabelString){cC=cs.getSmartText(cr.displayValue,cy,cF-cD);cr.displayValue=cC.text}else{cC=cs.getOriSize(cr.displayValue)}if(cr.displayValue===\" \"){cC={height:cp}}if(cC.height>0){cq=cC.height+ck}if(cq>cF){cc=cq-cF;ck=cc<ck?ck-cc:0;cq=cF}if(cf.pointerOnOpp){if(cG.axisPosition===aH){cB=Math.max(cn,cB);cq=Math.max(cn,cq)}co=Math.max(co,cq)}else{if(cG.axisPosition===J){ct=Math.max(cn,ct);cq=Math.max(cn,cq)}cv=Math.max(cq,cv)}cb.align=o}else{if(cr.isLabelString){cC=cs.getSmartText(cr.displayValue,cj-cD,ce);cr.displayValue=cC.text}else{cC=cs.getOriSize(cr.displayValue)}if(cC.width>0){Z=cC.width+ck}if(Z>cj){cc=Z-cj;ck=cc<ck?ck-cc:0;Z=cj}if(cf.pointerOnOpp){if(cG.axisPosition===aU){cf.marginRight-=cn;cf.marginRight+=Math.max(cn,Z)}else{cf.marginRight+=Z}}else{if(cG.axisPosition===a1){cf.marginLeft-=cn;cf.marginLeft+=Math.max(cn,Z)}else{cf.marginLeft+=Z}}cb.align=o}}}cs.setStyle(A);for(cA=0,ci=cl.length;cA<ci;cA+=1){cr=cl[cA];if(cr&&cr.displayValue!==ay){ck=cD+cr.markerRadius*0.5;cf.valuePadding=Math.max(ck,cf.valuePadding);if(M.isHorizontal){cC=cs.getOriSize(cr.displayValue);if(cC.height>0){cq=cC.height+ck}if(cq>cF){cc=cq-cF;ck=cc<ck?ck-cc:0;cq=cF}if(cr.showOnTop){if(cG.axisPosition===J){ct=Math.max(cn,ct);cq=Math.max(cn,cq)}cv=Math.max(cv,cq)}else{if(cG.axisPosition===aH){cB=Math.max(cn,cB);cq=Math.max(cn,cq)}co=Math.max(cq,co)}cb.align=o}}}if(M.isHorizontal){cf.marginBottom+=(co-cB);cf.marginTop+=(cv-ct);cq=cv+co-cB-ct}return cq},preSeriesAddition:function(M,L,Z,A){var ce=M.chart,cc=L.chart,cb=this.colorM,cd=M.scale;ce.pointerRadius=T(cc.pointerradius,10),ce.pointerBgColor=bY(cc.pointerbgcolor,cc.pointercolor,cb.getPointerBgColor()),ce.pointerBgAlpha=T(cc.pointerbgalpha,100),ce.pointerBorderColor=bY(cc.pointerbordercolor,cb.getPointerBorderColor()),ce.pointerBorderThickness=T(cc.pointerborderthickness,1),ce.pointerBorderAlpha=T(cc.pointerborderalpha,100),ce.pointerSides=T(cc.pointersides,3);ce.showGaugeLabels=T(cc.showgaugelabels,1);ce.showPointerShadow=T(cc.showpointershadow,cc.showshadow,1);ce.valuePadding=T(cc.valuepadding,2);if(this.isHorizontal){ce.pointerOnOpp=T(cc.pointerontop,(cd.axisPosition==J?0:1))?0:1;ce.gaugeType=cd.reverseScale?bj:bI;ce.valueAbovePointer=T(cc.valueabovepointer,ce.pointerOnOpp?0:1,1);if(ce.valueAbovePointer===ce.pointerOnOpp){ce.valueInsideGauge=1}else{ce.valueInsideGauge=0}}else{ce.pointerOnOpp=T(cc.pointeronright,(cd.axisPosition==aU?0:1));ce.gaugeType=cd.reverseScale?aV:a9}},getPointStub:function(ci,cj,L,cq,cd){var cc=this.numberFormatter,M=this.colorM,ch=this.getColorRange,ce=this.smartLabel,cg=L.chart,Z=cc.getCleanValue(ci.value),cn=aJ(ci.link),cp=ci.tooltext,cr=aJ(bp(ci.displayvalue)),cl=cc.dataLabels(Z),A=this.colorRangeGetter.getColorObj(Z),co=cq.chart,ck,cb,cm,cf=false;if(!this.showTooltip){ck=ay}else{if(cp!==undefined){ck=bp(cp);cf=true}else{ck=cl===null?false:(cd!==undefined)?cd+this.tooltipSepChar+cl:cl}}if(!T(ci.showvalue,this.showValues)){cb=ay}else{if(cr!==undefined){cb=cr}else{cb=aJ(cl,\" \")}}cm=T(ci.sides,cg.pointerSides);if(cm<3){cm=3}if(this.pointValueWatcher){this.pointValueWatcher(Z)}return{y:Z,displayValue:cb,id:bY(ci.id,\"pointer_\"+cj),editable:bY(ci.editable,co.editmode),isLabelString:cf,toolText:ck,plotFillPercent:bY(co.plotfillpercent,40),color:bC(bY(ci.color,ci.bgcolor,cg.pointerBgColor),T(ci.alpha,ci.bgalpha,cg.pointerBgAlpha)),borderColor:bC(bY(ci.bordercolor,cg.pointerBorderColor),T(co.showplotborder,1)?cg.pointerBorderAlpha:0),borderWidth:T(ci.borderthickness,cg.pointerBorderThickness),radius:T(ci.radius,cg.pointerRadius),sides:cm,link:cn,colorRange:A,doNotSlice:true,tooltipConstraint:this.tooltipConstraint}}},bb.linearscalegauge);bb(\"hlineargauge\",{creditLabel:bq,defaultSeriesType:\"lineargauge\",standaloneInit:true,isHorizontal:true},bb.lineargauge);bb(\"vlineargauge\",{creditLabel:bq,defaultSeriesType:\"lineargauge\",connectTickMarks:0,standaloneInit:true},bb.lineargauge);bb(\"thermometer\",{creditLabel:bq,defaultSeriesType:\"thermometer\",connectTickMarks:0,tickMarkDistance:0,standaloneInit:true,realtimeEnabled:true,isDataLabelBold:true,defaultPlotShadow:0,defaultGaugePaletteOptions:aK(bE,{thmBorderColor:[\"545454\",\"60634E\",\"415D6F\",\"845001\",\"68001B\"],thmFillColor:[\"999999\",\"ADB68F\",\"A2C4C8\",\"FDB548\",\"FF7CA0\"]}),preSeriesAddition:function(cd,ce,M,cf){var cg=cd.chart,A=ce.chart,cb=this.colorM,Z=cd.scale,cc,L=this.numberFormatter;cg.thmOriginX=T(A.thmoriginx,A.gaugeoriginx);cg.thmOriginY=T(A.thmoriginy,A.gaugeoriginy);cg.thmBulbRadius=L.getCleanValue(A.thmbulbradius,true);cg.thmHeight=L.getCleanValue(T(A.thmheight,A.gaugeheight),true);cg.gaugeFillColor=bY(A.gaugefillcolor,A.thmfillcolor,cb.getThmFillColor());cg.gaugeFillAlpha=T(A.gaugefillalpha,A.thmfillalpha,x);cc=T(A.gaugeborderalpha,T(A.showgaugeborder,1)?40:0);cg.gaugeBorderColor=bC(bY(A.gaugebordercolor,cb.getThmBorderColor()),cc);cg.gaugeBorderThickness=T(A.gaugeborderthickness,1);cg.thmGlassColor=bY(A.thmglasscolor,aY(cg.gaugeFillColor,30));cg.use3DLighting=!T(A.use3dlighting,1)},getPointColorObj:function(A,L){return{code:bY(A.gaugefillcolor,A.thmfillcolor,this.colorM.getThmFillColor()),alpha:T(A.gaugefillalpha,A.thmfillalpha,100)}},getPointStub:bb.linearscalegauge,placeDataLabels:bb.linearscalegauge,manageTitleSpace:bb.linearscalegauge,spaceManager:function(cC,cu,cs,cq){var ct=cC.chart,cy=cu.chart,cx=cs-(ct.marginRight+ct.marginLeft),ce=cq-(ct.marginTop+ct.marginBottom),M=ct.marginRight,cg=ct.marginLeft,cc=ct.marginTop,cb=ct.marginBottom,ck=cx*0.3,cw=ce*0.3,cr=ct.thmOriginX,co=ct.thmOriginY,cA=ct.thmBulbRadius,cv=ct.thmHeight,cd=af(cr),cn=af(co),Z=af(cA),cp=af(cv),cf=0.643,cl=0.766,cB=cC.scale,cj=cB.axisPosition===4,cz=0,cm=0,L=4,cD,A,ch,ci=0;if(this.manageTitleSpace){ce-=ci=this.manageTitleSpace(cC,cu,cx/2,ce/2)}if(this.placeTickMark){cx-=cz=this.placeTickMark(cC,T(cA,L)*2,cw)}if(!Z){ct.thmBulbRadius=cA=Math.min(cx/2,T(cv,ce)*0.13);Z=true}if(Z){ch=cA*cf;ck=cD=2*ch;if(cd){if(cj){ct.marginRight+=cm=(cx-cr-ch)}else{ct.marginLeft+=cm=cr-ch}}else{if(cj){ct.marginRight+=cm=(Math.min(cA,cx/2)-ch)}else{ct.marginLeft+=cm=(Math.min(cA,cx/2)-ch)}}cx-=cm}ct.marginRight+=cx-cD;if(cn){cw=co-ci+cA}if(this.placeDataLabels){ce-=this.placeDataLabels(cC,ck,cw,cc,M,cb,cg)}if(!cp){if(cn){ct.thmHeight=cv=Math.max(co-ci+cA-ch,3*cA)}else{ct.thmHeight=cv=Math.max(ce-ch,3*cA)}cp=true}if(cn){ct.marginTop+=co-ci+cA-cv}else{ct.marginTop+=ce-cv}A=cA*(1+cl);ct.marginBottom+=A;ct.valuePadding+=A;if(this.postDataLabelsPlacement){this.postDataLabelsPlacement(cC,ck,cw)}}},bb.gaugebase);bb(\"cylinder\",{creditLabel:bq,defaultSeriesType:\"cylinder\",connectTickMarks:0,tickMarkDistance:2,standaloneInit:true,charttopmargin:10,chartbottommargin:10,chartrightmargin:10,chartleftmargin:10,isDataLabelBold:true,realtimeEnabled:true,defaultGaugePaletteOptions:aK(bE,{cylFillColor:[\"CCCCCC\",\"ADB68F\",\"E1F5FF\",\"FDB548\",\"FF7CA0\"],periodColor:[\"EEEEEE\",\"ECEEE6\",\"E6ECF0\",\"FFF4E6\",\"FFF2F5\"]}),preSeriesAddition:function(cc,cd,L,ce){var cf=cc.chart,A=cd.chart,Z=this.colorM,M=cc.scale,cb;cf.cylFillColor=bY(A.gaugefillcolor,A.cylfillcolor,Z.getCylFillColor());cf.cylGlassColor=bY(A.cylglasscolor,\"FFFFFF\")},getPointColorObj:function(A,L){return{code:bY(A.gaugefillcolor,A.thmfillcolor,this.colorM.getCylFillColor()),alpha:T(A.gaugefillalpha,A.thmfillalpha,100)}},getPointStub:bb.linearscalegauge,placeDataLabels:bb.linearscalegauge,manageTitleSpace:bb.linearscalegauge,spaceManager:function(cu,cq,cm,ck){var co=cu.chart,ct=cq.chart,cs=cm-(co.marginRight+co.marginLeft),Z=ck-(co.marginTop+co.marginBottom),A=co.marginRight,ch=co.marginLeft,M=co.marginTop,L=co.marginBottom,cj=cs*0.2,cr=Z*0.3,cl=T(ct.cylyscale,30),cd=this.scaleFactor,ci=this.numberFormatter;if(this.manageTitleSpace){Z-=this.manageTitleSpace(cu,cq,cs/2,Z/2)}if(this.placeTickMark){cs-=this.placeTickMark(cu,cj,cr)}if(this.placeDataLabels){Z-=this.placeDataLabels(cu,cj,cr,M,A,L,ch)+8}if(this.postDataLabelsPlacement){this.postDataLabelsPlacement(cu,cj,cr)}co.cylHeight=aJ(ct.cylheight);if(cl>50||cl<0){cl=30}co.cylYScale=cl=cl/100;var cf=Math.max(cs/2,5),cp,cc;cp=T(aJ(ci.getCleanValue(ct.cylradius,true))*cd,cf);var ce=Z-((cp*cl)*2);cc=T(aJ(ci.getCleanValue(ct.cylheight,true))*cd,ce);co.marginLeft=T(aJ(ct.cyloriginx)*cd,co.marginLeft);co.marginRight=cm-(co.marginLeft+(cp*2));var cb=co.yScaleRadius=(cp*cl),cg=co.cylinderTotalHeight=cb*2+cc,cn=Z-cg+co.marginTop;co.marginTop=T((aJ(ct.cyloriginy)*cd)-cc,cb+cn);co.marginBottom=ck-(co.marginTop+cc);co.cylRadius=cp;co.cylHeight=cc;co.yScaleRadius=cb}},bb.gaugebase);function bH(cz,cu,ci,cv,cc,ck,cj,cq,co,cs){var cx=af(cc),cl=af(ck),cm=af(cj),L=Math.PI*2,cw=Math.PI,cr=Math.PI/2,ct=cw+cr,ch,cb={radius:cc,centerX:ck,centerY:cj},cy,cE,cg,ce,cn=false,cC,cB,M,A,cD,cd,cp,cA,Z,cF,cf=cz%L;if(cf<0){cf+=L}cq=cq||0;if(cq&&cq<ci/2&&cq<cv/2){cn=true}if(co>cv/2){co=cv/2}if(cs>cv/2){cs=cv/2}cC=Math.cos(cz);cB=Math.sin(cz);M=Math.cos(cu);A=Math.sin(cu);cy=Math.min(cC,M,0);cg=Math.max(cC,M,0);cE=Math.min(cB,A,0);ce=Math.max(cB,A,0);if(!cx||!cl||!cm){cF=cu-cz;cd=cf+cF;if(cd>L||cd<0){cg=1}if(cF>0){if((cf<cr&&cd>cr)||cd>L+cr){ce=1}if((cf<cw&&cd>cw)||cd>L+cw){cy=-1}if((cf<ct&&cd>ct)||cd>L+ct){cE=-1}}else{if((cf>cr&&cd<cr)||cd<-ct){ce=1}if((cf>cw&&cd<cw)||cd<-cw){cy=-1}if((cf>ct&&cd<ct)||cd<-cr){cE=-1}}if(!cl){cp=cg-cy;cD=ci/cp;ck=-cD*cy;ch=cD;if(cn){if(ci-ck<cq){ck=ci-cq;cA=ci-ck;Z=-ck;ch=cy?Math.min(cA/cg,Z/cy):cA/cg}else{if(ck<cq){ck=cq;cA=ci-ck;Z=-ck;ch=cy?Math.min(cA/cg,Z/cy):cA/cg}}}cb.centerX=ck}else{if(!cx){cA=ci-ck;Z=-ck;ch=cy?Math.min(cA/cg,Z/cy):cA/cg}}if(!cm){cp=ce-cE;cD=cv/cp;cj=-cD*cE;if(cn){if(cv-cj<cq){cj=cv-cq;cA=cv-cj;Z=-cj;ch=Math.min(ch,cE?Math.min(cA/ce,Z/cE):cA/ce)}else{if(cj<cq){cj=cq;cA=cv-cj;Z=-cj;ch=Math.min(ch,cE?Math.min(cA/ce,Z/cE):cA/ce)}}}if(cv-cj<co){cj=cv-co;cA=cv-cj;Z=-cj;ch=Math.min(ch,cE?Math.min(cA/ce,Z/cE):cA/ce)}else{if(cj<cs){cj=cs;cA=cv-cj;Z=-cj;ch=Math.min(ch,cE?Math.min(cA/ce,Z/cE):cA/ce)}}ch=Math.min(ch,cD);cb.centerY=cj}else{if(!cx){cA=cv-cj;Z=-cj;ch=Math.min(ch,cE?Math.min(cA/ce,Z/cE):cA/ce)}}cb.maxRadius=ch;if(cb.maxRadius<=0){cb.maxRadius=Math.min(ci/2,cv/2)}}return cb}bb(\"angulargauge\",{standaloneInit:true,drawAnnotations:true,defaultSeriesType:\"angulargauge\",creditLabel:bq,isAngular:true,eiMethods:bb.lineargauge.eiMethods,multiValueGauge:true,realtimeEnabled:true,defaultGaugePaletteOptions:aK(bE,{dialColor:[\"999999,ffffff,999999\",\"ADB68F,F3F5DD,ADB68F\",\"A2C4C8,EDFBFE,A2C4C8\",\"FDB548,FFF5E8,FDB548\",\"FF7CA0,FFD1DD,FF7CA0\"],dialBorderColor:[\"999999\",\"ADB68F\",\"A2C4C8\",\"FDB548\",\"FF7CA0\"],pivotColor:[\"999999,ffffff,999999\",\"ADB68F,F3F5DD,ADB68F\",\"A2C4C8,EDFBFE,A2C4C8\",\"FDB548,FFF5E8,FDB548\",\"FF7CA0,FFD1DD,FF7CA0\"],pivotBorderColor:[\"999999\",\"ADB68F\",\"A2C4C8\",\"FDB548\",\"FF7CA0\"]}),subTitleFontSizeExtender:0,charttopmargin:5,chartrightmargin:5,chartbottommargin:5,chartleftmargin:5,defaultPlotShadow:1,gaugeBorderColor:\"{dark-20}\",gaugeBorderThickness:1,updateSnapPoints:function(M){bb.gaugebase.updateSnapPoints.apply(this,arguments);var L=M.series[0],A=this.snapLiterals;A.gaugestartangle=M.chart.gaugeStartAngle;A.gaugeendangle=M.chart.gaugeEndAngle;A.chartcenterx=A.gaugecenterx=L.gaugeOriginX;A.chartcentery=A.gaugecentery=L.gaugeOriginY;A.gaugeinnerradius=L.gaugeInnerRadius;A.gaugeouterradius=L.gaugeOuterRadius},preSeriesAddition:function(ce,cc,M,ci){var L=cc.chart,cb=T(L.gaugescaleangle,180),cf=T(L.gaugestartangle),Z=T(L.gaugeendangle),ch=af(cf),cd,cg=bZ?0.001:0.01,A=af(Z);if(cb>360||cb<-360){cb=cb>0?360:-360}if(Z>360||Z<-360){Z=Z%360}if(cf>360||cf<-360){cf=cf%360}if(ch&&A){cb=cf-Z;if(cb>360||cb<-360){cb=cb%360;Z=cf-cb}}else{if(ch){Z=cf-cb;if(Z>360||Z<-360){Z=Z%360;cf+=Z>0?-360:360}}else{if(A){cf=Z+cb;if(cf>360||cf<-360){cf=cf%360;Z+=cf>0?-360:360}}else{if(cb===360){cf=180;Z=-180}else{if(cb===-360){cf=-180;Z=-180}else{cd=cb/2;cf=90+cd;Z=cf-cb}}}}}if(Math.abs(cb)===360){cb+=cb>0?-cg:cg;Z=cf-cb}Z=360-Z;cf=360-cf;cb=-cb;if(cf>360||Z>360){cf-=360;Z-=360}ce.chart.gaugeStartAngle=cf=cf*aC;ce.chart.gaugeEndAngle=Z=Z*aC;ce.chart.gaugeScaleAngle=cb=cb*aC},series:function(cw,cd,A,cr,co){var cl={data:[],colorByPoint:true},cu=cw.chart,cs=cd.chart,ck=this.numberFormatter,ce=this.colorM,cf,M=cl.showValue=T(cu.showvalue,cu.showrealtimevalue,0),L=this.scaleFactor,cn=0,cb=cw.dials&&cw.dials.dial;var cc=T(cu.editmode,0),ch=cn=T(aJ(cu.pivotradius)*L,5);cl.pivotRadius=ch;var cj=0,Z=cb&&cb.length,cq,cv,ci,cm,cg,cp,ct=0;if(!Z){cj=-1;Z=0;cb=[]}for(;cj<Z;cj+=1){cq=cb[cj]||{};cf=ck.getCleanValue(cq.value);if(this.pointValueWatcher){this.pointValueWatcher(cf)}cv=T(aJ(cq.rearextension)*L,0);cn=Math.max(cn,cv);ci=aJ(ck.dataLabels(cf),ay);cg=T(cq.showvalue,M);cp=T(aJ(cq.valuey)*L);cm=bY(cq.tooltext,cq.hovertext)?true:false;if(cg&&!af(cp)){ct+=1}cl.data.push({y:cf,id:bY(cq.id,cj),color:{FCcolor:{color:bY(cq.color,cq.bgcolor,ce.getDialColor()),angle:90}},showValue:cg,editMode:T(cq.editmode,cc),borderColor:bC(bY(cq.bordercolor,ce.getDialBorderColor()),T(cq.borderalpha,100)),borderThickness:T(cq.borderthickness,1),baseWidth:T(aJ(cq.basewidth)*L,ch*1.6),topWidth:T(aJ(cq.topwidth)*L,0),rearExtension:cv,valueX:T(aJ(cq.valuex)*L),valueY:cp,radius:T(aJ(cq.radius)*L),link:bY(cq.link,ay),isLabelString:cm,toolText:bY(cq.tooltext,cq.hovertext,ci),displayValue:cg?bY(ci,\" \"):ay,doNotSlice:true})}cl.displayValueCount=ct;cl.compositPivotRadius=cn;cd.series[0]=cl},postSeriesAddition:function(cb,M,L,ce){var cd=cb.chart,A=M.chart,Z=cb.series[0],cc=this.colorM,cf;Z.valueBelowPivot=T(A.valuebelowpivot,0);Z.gaugeFillMix=A.gaugefillmix;Z.gaugeFillRatio=A.gaugefillratio;if(Z.gaugeFillMix==undefined){Z.gaugeFillMix=\"{light-10},{light-70},{dark-10}\"}if(Z.gaugeFillRatio==undefined){Z.gaugeFillRatio=\",6\"}else{if(Z.gaugeFillRatio!=\"\"){Z.gaugeFillRatio=\",\"+Z.gaugeFillRatio}}cf=cc.parseColorMix(bY(A.pivotfillcolor,A.pivotcolor,A.pivotbgcolor,cc.getPivotColor()),bY(A.pivotfillmix,\"{light-10},{light-30},{dark-20}\"));Z.pivotFillAlpha=cc.parseAlphaList(bY(A.pivotfillalpha,x),cf.length);Z.pivotFillRatio=cc.parseRatioList(bY(A.pivotfillratio,m),cf.length);Z.pivotFillColor=cf.join();Z.pivotFillAngle=T(A.pivotfillangle,0);Z.isRadialGradient=bY(A.pivotfilltype,\"radial\").toLowerCase()==\"radial\";Z.showPivotBorder=T(A.showpivotborder,0);Z.pivotBorderThickness=T(A.pivotborderthickness,1);Z.pivotBorderColor=bC(bY(A.pivotbordercolor,cc.getPivotBorderColor()),Z.showPivotBorder==1?bY(A.pivotborderalpha,x):m);this.parseColorMix=cc.parseColorMix;this.parseAlphaList=cc.parseAlphaList;this.parseRatioList=cc.parseRatioList},spaceManager:function(cp,cP,c8,cj){var df=cp.chart,dd=cP.chart,c9=cp.scale,cO=cp.series[0],c6=cO.displayValueCount,c3=c9.tickValues.style,L=T(parseInt(c3.lineHeight,10),12),cs=T(parseInt(c3.fontSize,10),10),cB=cs*(bZ?0.8:1),cW=L*(bZ?0.1:0.3),cl=bZ?0:(L*0.1),c1,dk=T(parseInt(cp.plotOptions.series.dataLabels.style.lineHeight,10),12),cD=cO.pivotRadius,cR=c8-(df.marginRight+df.marginLeft),c0=cj-(df.marginTop+df.marginBottom),cM=this.scaleFactor,dj=cO.compositPivotRadius,co,cn,cG=df.gaugeStartAngle,cF=df.gaugeEndAngle,cz=df.gaugeScaleAngle,da,cV=c6*dk+2+cD,cT=0,cC=cO.valueBelowPivot;if(/^\\d+\\%$/.test(dd.gaugeinnerradius)){da=parseInt(dd.gaugeinnerradius,10)/100}else{da=0.7}c0-=bf(cp,cP,cR,c0/2);if(!cC){cT=cV;cV=0}cO.gaugeOuterRadius=T(Math.abs(aJ(dd.gaugeouterradius)*cM));cO.gaugeInnerRadius=T(Math.abs(aJ(dd.gaugeinnerradius)*cM),cO.gaugeOuterRadius*da);c1=bH(df.gaugeStartAngle,df.gaugeEndAngle,cR,c0,cO.gaugeOuterRadius,T((aJ(dd.gaugeoriginx)*cM)-df.marginLeft),T((aJ(dd.gaugeoriginy)*cM)-df.marginTop),Math.max(dj,cs),cV,cT);co=cO.gaugeOriginX=c1.centerX;cn=cO.gaugeOriginY=c1.centerY;var ck=c1.maxRadius,cN=0,c2,di=c9.majorTM,M=0,cK=di.length,ce,cc=cp.labels.smartLabel,ct,cA,cf,cE,cq,cZ=c9.min,cL=c9.max-c9.min,cQ,cw,dh,dg,A=cR-co,c5=co,Z=c0-cn,c7=cn,cx=c9.placeValuesInside,cJ=Math.cos(89.98*aC),cy=-cJ,cI=0.5,cH=-0.5,cg=af(cO.gaugeOuterRadius),ci=c9.tickValueDistance,cm=c9.showTickValues,cv=c9.showLimits,cX=T(cO.gaugeOuterRadius,c1.maxRadius),dc=T(cO.gaugeInnerRadius,cX*da),cY=cX,cU=cX*0.2,cS,de,db,cd,cr,ch=L*1.5,c4=cF-cG,cu,cb=c4/cL;if(cm||cv){if(cx){if(dc>ci+L){cS=dc-ci}else{cS=dc;ci=0}}else{cY+=ci;if(!cg){cU+=ci}}cc.setStyle(c3);for(;M<cK;M+=1){cq=di[M];cu=cG+((cq.value-cZ)*cb);cQ=Math.cos(cu);cw=Math.sin(cu);ce=cq.displayValue;ct=cc.getOriSize(ce);cA=ct.width;cf=ct.height;cE=cf/2;if(cA>0&&cf>0){cq.x=0;if(cx){cq.align=cQ>cJ?E:(cQ<cy?bh:o);if(cq.isString){dh=cS*cQ;dg=cS*cw;de=Math.abs(dh);if(de<cA){ct=cc.getSmartText(ce,Math.max(de,L),ch);cq.displayValue=ct.text;cA=ct.width;cf=ct.height;cE=cf/2}}if(cQ>cJ||cQ<cy){cq.y=cs-cE+cl;cq.y-=cf*0.4*cw}else{cq.y=cB-(cw<0?0:(cf-cW))}}else{cq.align=cQ>cJ?bh:(cQ<cy?E:o);dh=cY*cQ;dg=cY*cw;if(!cg){if(dg>0){cr=cE+cE*cw;if(Z<dg+cr){dg=Z-cr;cY=Math.max(dg/cw,cU)}}else{if(dg<0){cr=cE-cE*cw;if(c7<-dg+cr){dg=cr-c7;cY=Math.max(dg/cw,cU)}}}}if(cQ>cJ){if(dh+cA>A){if(!cg){dh=A-cA;cY=Math.max(dh/cQ,cU);dh=cY*cQ;if(cq.isString&&dh+cA>A){ct=cc.getSmartText(ce,A-dh,ch);cq.displayValue=ct.text;cf=ct.height;cE=cf/2;cA=ct.width;dh=A-cA;cY=Math.max(dh/cQ,cU)}}else{if(cq.isString){ct=cc.getSmartText(ce,A-dh,ch);cq.displayValue=ct.text;cf=ct.height;cE=cf/2}}}cq.y=cs-cE+cl+(cf*0.4*cw)}else{if(cQ<cy){if(cA-dh>c5){if(!cg){dh=cA-c5;cY=Math.max(dh/cQ,cU);dh=cY*cQ;if(cq.isString&&cA-dh>c5){ct=cc.getSmartText(ce,c5+dh,ch);cq.displayValue=ct.text;cA=ct.width;cf=ct.height;cE=cf/2;dh=cA-c5;cY=Math.max(dh/cQ,cU)}}else{if(cq.isString){ct=cc.getSmartText(ce,c5+dh,ch);cq.displayValue=ct.text;cf=ct.height;cE=cf/2}}}cq.y=cs-cE+cl+(cf*0.4*cw)}else{if(cw>0){db=Z;cd=cf+dg}else{db=c7;cd=cf-dg}if(!cg){if(cd>db){cY=Math.max(db-cf,cU);cd=cf+cY}if(cq.isString&&(cd>db)||(cA>cR)){ct=cc.getSmartText(ce,cR,Math.max(db-cU,L));cq.displayValue=ct.text;cf=ct.height;cE=cf/2;cY=Math.max(db-cf,cU)}}else{if(cq.isString&&(cd>db)||(cA>cR)){ct=cc.getSmartText(ce,cR,Math.max(cf-cd+db,L));cq.displayValue=ct.text;cf=ct.height;cE=cf/2}}cq.y=cB-(cw>0?0:(cf-cW))}}}}}}if(!cg){if(cx){cO.gaugeOuterRadius=cY}else{cO.gaugeOuterRadius=cY-ci}if(cO.gaugeOuterRadius<=0){cO.gaugeOuterRadius=Math.abs(cU)}}cO.gaugeInnerRadius=T(cO.gaugeInnerRadius,cO.gaugeOuterRadius*da)}},bb.gaugebase);bb(\"bulb\",{defaultSeriesType:\"bulb\",defaultPlotShadow:1,standaloneInit:true,drawAnnotations:true,defaultGaugePaletteOptions:bE,charttopmargin:10,chartrightmargin:10,chartbottommargin:10,chartleftmargin:10,realtimeEnabled:true,isDataLabelBold:true,preSeriesAddition:function(cc,cd,L,ce){var cf=cc.chart,A=cd.chart,Z=this.colorM,M=cc.scale,cb;cf.colorRangeGetter=this.colorRangeGetter;cf.defaultColors=bE.paletteColors[0];cf.defaultColLen=cf.defaultColors.length},getPointColor:function(A,cc,Z){var L,cb,cd,M;if(Z){A=i(A);cb=aY(A,65);cd=aY(A,75);M=av(A,65);L={FCcolor:{gradientUnits:\"objectBoundingBox\",cx:0.4,cy:0.4,r:\"80%\",color:cb+a2+cd+a2+M,alpha:cc+a2+cc+a2+cc,ratio:\"0,30,70\",radialGradient:true}}}else{L=bC(A,cc)}return L},getPointStub:function(cn,co,cb,cw,ci){var cm=cb.chart,ct=cw.chart,ch=this.numberFormatter,ce=ch.getCleanValue(cn.value),cr=ch.dataLabels(ce),cs=aJ(cn.link),cu=cn.tooltext,cx=aJ(bp(cn.displayvalue)),M=this.colorRangeGetter.getColorObj(ce),A=cm.useColorNameAsValue=T(ct.usecolornameasvalue,0),cf=M.colorObj||M.prevObj||M.nextObj||{},cd=this.colorM,cq=bp(bY(cf.label,cf.name)),cv=bY(ct.gaugefillalpha,cf.alpha,x),cl=bY(cf.bordercolor,ct.gaugebordercolor,av(cf.code,70)),Z=T(cf.borderalpha,ct.gaugeborderalpha,\"90\")*cv/100,ck=T(ct.showgaugeborder,0)?T(ct.gaugeborderthickness,1):0,L=cm.is3D=T(ct.is3d,1),cc=this.getPointColor(cf.code,cv,L),cp,cg,cj;if(M.isOnMeetPoint){cf=M.nextObj}cm.gaugeFillAlpha=cv;cl=bC(/\\{/.test(cl)?cd.parseColorMix(bY(cf.bordercolor,cf.code),cl)[0]:cl,Z);if(!this.showTooltip){cp=false}else{if(cu!==undefined){cp=bp(cu);cj=true}else{cp=cr===null?false:(ci!==undefined)?ci+this.tooltipSepChar+cr:cr}}if(cx!==undefined){cg=cx}else{cg=cr}if(A){cg=cq}if(this.pointValueWatcher){this.pointValueWatcher(ce)}return{y:ce,displayValue:cg,toolText:cp,isLabelString:cj,colorName:cq,color:cc,borderWidth:ck,borderColor:cl,colorRange:M,link:cs,doNotSlice:true}},spaceManager:function(cx,cq,cn,cm){var ch=cx[bO],ci=ch.smartLabel,cj=cx.series[0],cp=cj&&cj.data[0],cl=cx.chart,cu=cq.chart,cc=cl.scaleFactor=this.scaleFactor,ct=cn-(cl.marginRight+cl.marginLeft),Z=cm-(cl.marginTop+cl.marginBottom),ce=cl.marginLeft,M=cl.marginTop,ck=T(cu.valuepadding,4),cd=cl.useColorNameAsValue,cs,cw,cv,A,cg,cr,co,cf,cb=0,L;if(this.showValues){cp.y=aJ(cp.y,cx.scale.min);cp.displayValue=aJ(cp.displayValue,this.numberFormatter.dataLabels(cx.scale.min))}else{cp.displayValue=ay}L=cp.displayValue;cl.gaugeOriginX=T(cu.gaugeoriginx,cu.bulboriginx,-1);cl.gaugeOriginY=T(cu.gaugeoriginy,cu.bulboriginy,-1);cl.gaugeRadius=T(cu.gaugeradius,cu.bulbradius,-1);cf=cl.gaugeRadius!==-1;Z-=cr=bf(cx,cq,ct,Z*0.3);M+=cr;co=(Z*0.7)-ck;cl.dataLabels={style:cx.plotOptions.series.dataLabels.style};A=cl.dataLabels.style;ci.setStyle(A);if(cl.placeValuesInside==1){cs=cf?cl.gaugeRadius*cc:Math.min(ct,Z)/2;co=Math.sqrt(Math.pow(cs*2,2)/2);cg=ci.getSmartText(L,co,co)}else{co=(cf?Z-(cl.gaugeRadius*2)*cc:(Z*0.7))-ck;cg=ci.getSmartText(L,ct,co);cb=cg.height;cs=(Math.min(ct,Z-cb))/2}if(cd){cp.displayValue=cg.text}cl.valuePadding=ck;cl.valueTextHeight=cg.height;cl.labelLineHeight=parseInt(A.lineHeight);cw=ce+(ct/2);cv=M+(Z-cb)/2;if(!cf){cs=cs}else{cs=cl.gaugeRadius*cc}if(cl.gaugeOriginX==-1){cw=cw}else{cw=cl.gaugeOriginX*cc}if(cl.gaugeOriginY==-1){cv=cv}else{cv=cl.gaugeOriginY*cc}cl.gaugeRadius=cs;cl.gaugeOriginX=cw;cl.gaugeOriginY=cv}},bb.gaugebase);bb(\"drawingpad\",{standaloneInit:true,defaultSeriesType:\"drawingpad\",defaultPlotShadow:1,drawAnnotations:true,chartleftmargin:0,charttopmargin:0,chartrightmargin:0,chartbottommargin:0,defaultGaugePaletteOptions:bE,series:function(M,cb,L,cc,A){var Z={data:[],colorByPoint:true},cd;cb.legend.enabled=false;HCData=Z.data;cb.chart.plotBackgroundColor=ao;cb.chart.plotBorderColor=ao;cd=Z;if(cd instanceof Array){cb.series=cb.series.concat(cd)}else{cb.series.push(cd)}this.configureAxis(cb,M);if(M.trendlines){bW(M.trendlines,cb.yAxis,cb[bO],false,this.isBar)}},spaceManager:function(){},creditLabel:bq},bb.bulb);bb(\"funnel\",{standaloneInit:true,defaultSeriesType:\"funnel\",sliceOnLegendClick:true,defaultPlotShadow:1,subTitleFontSizeExtender:0,tooltippadding:4,drawAnnotations:true,defaultGaugePaletteOptions:bE,isDataLabelBold:false,formatnumberscale:1,preSeriesAddition:function(M,L,Z,A){var cc=L.chart,cb=this.colorM,cd=M.plotOptions.series.dataLabels;cd.connectorWidth=T(cc.smartlinethickness,1);cd.connectorColor=bC(bY(cc.smartlinecolor,cb.get2DBaseFontColor()),T(cc.smartlinealpha,100));if(T(cc.showlegend,0)){M.legend.enabled=true;M.legend.reversed=!Boolean(T(cc.reverselegend,0))}else{M.legend.enabled=false}M.plotOptions.series.point.events.legendItemClick=cc.interactivelegend===m?bM:function(){this.slice();return false}},series:function(M,cb,L,cc,A){if(M.data&&M.data.length>0){var Z={data:[],colorByPoint:true,showInLegend:true},cd;cd=this.point(L,Z,M.data,M.chart,cb);cb.series.push(cd)}},point:function(cS,ci,c1,cT,cC){var cm,cI,Z,cg,cU=cC[bO],cw,cO,cK,cf,cx,cc=0,A,cV,cz,cq,cQ,cb,cZ=0,cv=[],c2,cn=bY(cT.plotborderthickness,aE),L=T(cT.use3dlighting,1),ct=T(cT.showzeropies,1),cY=true,cR,cW,cl=cC.chart,M=this.isPyramid,cr=T(cT.showpercentintooltip,1),c0=T(cT.showlabels,1),cJ=T(cT.showvalues,1),cy=T(cT.showpercentvalues,cT.showpercentagevalues,0),cH=bY(cT.tooltipsepchar,cT.hovercapsepchar,bD),cM=bY(cT.labelsepchar,cH),cE=bY(cT.plotbordercolor,cT.piebordercolor),cL=this.smartLabel,cD=this.numberFormatter,cs=c1.length,ck,cN=0,cG=cC.plotOptions.series.dataLabels,cj=this.colorM,ce,cu=T(cT.issliced,0),cF=0,cA,cd,cp,co,cP={apply:cT.showshadow==aE,opacity:1};ci.isPyramid=M;co=ci.streamlinedData=T(cT.streamlineddata,1);ci.is2d=T(cT.is2d,0);ci.isHollow=T(cT.ishollow,co?1:0);cd=T(cT.percentofprevious,0);cW=T(this.isPyramid?cT.pyramidyscale:cT.funnelyscale);ci.labelDistance=Math.abs(T(cT.labeldistance,cT.nametbdistance,50));ci.showLabelsAtCenter=T(cT.showlabelsatcenter,0);if(cW>=0&&cW<=40){ci.yScale=cW/200}else{ci.yScale=0.2}if(!c0&&!cJ){cC.plotOptions.series.dataLabels.enabled=false;if(cC.tooltip.enabled===false){cY=false}}ci.useSameSlantAngle=T(cT.usesameslantangle,co?0:1);var cB,cX,ch;for(cI=0,cB=0;cI<cs;cI+=1){cg=c1[cI];if(c1[cI].vline){continue}cg.value=cX=cD.getCleanValue(cg.value,true);if(cX!==null){ch=ch||cX;cg.value=cX;cv.push(cg);cc+=cX;cB+=1;ch=Math.max(ch,cX)}}ci.valueSum=cc;cs=cv.length;if(!M&&co){cv.sort(function(c4,c3){return c3.value-c4.value})}if(!M&&!co){cZ+=1;ci.data.push({showInLegend:false,y:cc,name:\"\",shadow:cP,smartTextObj:ck,color:cw,alpha:cO,borderColor:bC(cf,cx),borderWidth:cn,link:aJ(cg.link),displayValue:ay,doNotSlice:bY(cT.enableslicing,aE)!=aE})}for(cI=0;cI<cv.length;cI+=1){cg=cv[cI];Z=cg.value;cp=cI?cv[cI-1].value:Z;cm=bp(bY(cg.label,cg.name,ay));ck=cL.getOriSize(cm);cR=cI&&!M&&co?cI-1:cI;cw=bY(cg.color,cC.colors[cR%cC.colors.length]);cO=bY(cg.alpha,cT.plotfillalpha,x);cf=bY(cg.bordercolor,cE,aY(cw,25)).split(a2)[0];cx=cT.showplotborder!=1?m:bY(cg.borderalpha,cT.plotborderalpha,cT.pieborderalpha,\"80\");cP.opacity=Math.max(cO,cx)/100;cA=T(cg.issliced,cu);if(cA){cF+=1;cU.preSliced=cA}ce={showInLegend:!(cm===ay),y:Z,name:cm,shadow:cP,smartTextObj:ck,color:cw,alpha:cO,borderColor:bC(cf,cx),borderWidth:cn,link:aJ(cg.link),isSliced:cA,displayValue:ay,doNotSlice:bY(cT.enableslicing,aE)!=aE,tooltipConstraint:this.tooltipConstraint};if(!cI&&!M&&co){ce.showInLegend=false}ci.data.push(ce);if(cY){cz=cm;cq=cD.percentValue(Z/(M||!co?cc:(cd?cp:ch))*100);cQ=cD.dataLabels(Z)||ay;cb=cr===1?cq:cQ;cV=c0===1?cz:ay;A=T(cg.showvalue,cJ)===1?(cy===1?cq:cQ):ay;c2=aJ(bp(cg.displayvalue));if(c2){A=c2}else{if(A!==ay&&cV!==ay){A=cV+cM+A}else{A=bY(cV,A)||ay}}if(cz!=ay){cz=cz+cH+cb}else{cz=cb}ci.data[cZ].displayValue=A;ci.data[cZ].toolText=bY(bp(cg.tooltext),cz);cZ+=1}}ci.labelMaxWidth=cN;ci.noOFSlicedElement=cF;return ci},spaceManager:function(cI,cF,L,Z){var cD=this.smartLabel,cp=cF.chart,cf=cI.chart,cA=bY(cp.legendposition,aM).toLowerCase(),cK=L-(cf.marginRight+cf.marginLeft),cL=Z-(cf.marginTop+cf.marginBottom),cb=this.isPyramid,cr,cj,cc,cM,cP,ch=cI.series[0];if(ch){var cv=this._tempSnap={top3DSpace:0,bottom3DSpace:0,topLabelSpace:0,rightLabelSpace:0};cL-=bf(cI,cF,cK,cL/2);if(cI.legend.enabled){if(cA===E){cK-=aF(cI,cF,cK/2,cL,true)}else{cL-=bk(cI,cF,cK,cL/2,true)}}cP=cL*0.1;cr=T(cp.slicingdistance,cP);if(cr>2*cP){cP=0}else{cP=cr}cj=cL-cP;cc=Math.min(2*cj,cK);cf.marginTop+=cP/2;cf.marginBottom+=cP/2;ch.SlicingDistance=cr;var cx=ch.data,ct=cx.length,cO=cb?0:1,cC,ck,cG,cQ=0,ce=3,cE=ch.labelDistance+ce,cu=ch.showLabelsAtCenter,cm,ci,cw,co,cy,cd=Math.min(cc,cK*0.3),cB=cc-cd,cs=cK-cd-cE,A=cI.plotOptions.series.dataLabels.style,cz=T(parseInt(A.lineHeight,10),10),cn=0,cl=cx[0].y,cq,cN=ch.valueSum,cH,cJ=cb?0:1,cR,M=0.8/cl,cS=ch.useSameSlantAngle==1,cg=!ch.streamlinedData;cD.setStyle(A);cq=cL/(cz*1+4);if(!cb&&cx[0].displayValue){ck=cD.getSmartText(cx[0].displayValue,cK,cz);cx[0].displayValue=ck.text;cx[0].labelWidht=cD.getOriSize(ck.text).width;cf.marginTop+=cv.topLabelSpace=cz+4}for(;cO<ct;cO+=1){cC=cx[cO];cm=cC.y;if(cu){ck=cD.getSmartText(cC.displayValue,cK,cz)}else{if(cb){cm=cQ+(cC.y/2);cH=cm/cN}else{cH=cg?0.2+(M*cQ):(cS?cC.y/cl:Math.sqrt(cC.y/cl))}co=cd*cH;cG=cs+((cd-co)/2);ck=cD.getSmartText(cC.displayValue,cG,cz);cC.displayValue=ck.text;cn=Math.max(cn,ck.width);if(cB>0){if(ck.width>0){ci=cG-ck.width}else{ci=cG+cE}cy=(1/(cH+1))*(co+2*ci+cd);cB=Math.min(cB,cy-cd)}cQ+=cC.y}}if(cC){cR=cb?1:(cg?0.2:(cS?cC.y/cl:Math.sqrt(cC.y/cl)))}cw=cd+cB;if(cn>0){cf.marginRight+=cv.rightLabelSpace=(cK-cw)}else{cE=0}ch.labelDistance=ch.connectorWidth=cE;if(!ch.is2d){cf.marginTop+=cv.top3DSpace=(cw*ch.yScale*cJ)/2;cf.marginBottom+=cv.bottom3DSpace=(cw*ch.yScale*cR)/2}}},updateSnapPoints:function(M){bb.gaugebase.updateSnapPoints.apply(this,arguments);var A=this.snapLiterals,L=this._tempSnap||{};A.plotwidth=A.canvaswidth;A.plotsemiwidth=A.canvaswidth/2;A.plotheight=A.canvasheight+L.top3DSpace+L.bottom3DSpace;A.plotstartx=A.canvasstartx;A.plotstarty=A.canvasstarty-L.top3DSpace;A.plotendx=A.canvasendx;A.plotendy=A.canvasendy+L.bottom3DSpace;A.canvaswidth=A.canvaswidth+L.rightLabelSpace;A.canvasheight=A.plotheight+L.topLabelSpace;A.canvasstarty=A.plotstarty-L.topLabelSpace;A.canvasendy=A.plotendy;A.canvasendx=A.canvasendx+L.rightLabelSpace},useSortedData:true,creditLabel:bq},bb.gaugebase);bb(\"pyramid\",{defaultGaugePaletteOptions:bE,subTitleFontSizeExtender:0,drawAnnotations:true,standaloneInit:true,defaultSeriesType:\"pyramid\",defaultPlotShadow:1,useSortedData:false,isPyramid:1,creditLabel:bq},bb.funnel);bb(\"sparkbase\",{defaultPlotShadow:0,useSortedData:false,subTitleFontSizeExtender:0,subTitleFontWeight:\"normal\",drawAnnotations:true,showYAxisValues:0,numdivlines:0,chartrightmargin:3,chartleftmargin:3,charttopmargin:3,chartbottommargin:3,decimals:2,showTrendlineLabel:0,zeroplanethickness:0,tooltippadding:1,useScaleRecursively:true,styleApplicationDefinition_font:bb.gaugebase.styleApplicationDefinition_font,defaultGaugePaletteOptions:aK(bE,{paletteColors:[[\"555555\",\"A6A6A6\",\"CCCCCC\",\"E1E1E1\",\"F0F0F0\"],[\"A7AA95\",\"C4C6B7\",\"DEDFD7\",\"F2F2EE\"],[\"04C2E3\",\"66E7FD\",\"9CEFFE\",\"CEF8FF\"],[\"FA9101\",\"FEB654\",\"FED7A0\",\"FFEDD5\"],[\"FF2B60\",\"FF6C92\",\"FFB9CB\",\"FFE8EE\"]],bgColor:[\"FFFFFF\",\"CFD4BE,F3F5DD\",\"C5DADD,EDFBFE\",\"A86402,FDC16D\",\"FF7CA0,FFD1DD\"],bgAngle:[270,270,270,270,270],bgRatio:[\"0,100\",\"0,100\",\"0,100\",\"0,100\",\"0,100\"],bgAlpha:[\"100\",\"60,50\",\"40,20\",\"20,10\",\"30,30\"],canvasBgColor:[\"FFFFFF\",\"FFFFFF\",\"FFFFFF\",\"FFFFFF\",\"FFFFFF\"],canvasBgAngle:[0,0,0,0,0],canvasBgAlpha:[\"100\",\"100\",\"100\",\"100\",\"100\"],canvasBgRatio:[\"\",\"\",\"\",\"\",\"\"],canvasBorderColor:[\"BCBCBC\",\"BEC5A7\",\"93ADBF\",\"C97901\",\"FF97B1\"],toolTipBgColor:[\"FFFFFF\",\"FFFFFF\",\"FFFFFF\",\"FFFFFF\",\"FFFFFF\"],toolTipBorderColor:[\"545454\",\"545454\",\"415D6F\",\"845001\",\"68001B\"],baseFontColor:[\"333333\",\"60634E\",\"025B6A\",\"A15E01\",\"68001B\"],trendColor:[\"666666\",\"60634E\",\"415D6F\",\"845001\",\"68001B\"],plotFillColor:[\"666666\",\"A5AE84\",\"93ADBF\",\"C97901\",\"FF97B1\"],borderColor:[\"767575\",\"545454\",\"415D6F\",\"845001\",\"68001B\"],borderAlpha:[50,50,50,50,50],periodColor:[\"EEEEEE\",\"ECEEE6\",\"E6ECF0\",\"FFF4E6\",\"FFF2F5\"],winColor:[\"666666\",\"60634E\",\"025B6A\",\"A15E01\",\"FF97B1\"],lossColor:[\"CC0000\",\"CC0000\",\"CC0000\",\"CC0000\",\"CC0000\"],drawColor:[\"666666\",\"A5AE84\",\"93ADBF\",\"C97901\",\"FF97B1\"],scorelessColor:[\"FF0000\",\"FF0000\",\"FF0000\",\"FF0000\",\"FF0000\"]}),preSeriesAddition:function(cg,cd,cb,cj){if(this.name==\"sparkwinloss\"){var ce=cd.data||(cd.dataset&&cd.dataset[0]&&cd.dataset[0].data),cc,L,A={w:1,l:-1,d:0.1};if((cc=ce&&ce.length)>0){while(cc){cc-=1;L=ce[cc];L.value=A[L.value.toLowerCase()]}}}var ck=cg.chart,Z=cd.chart,ci=this.colorM=new C(ck.paletteIndex,Z.palettethemecolor,this);ck.backgroundColor={FCcolor:{color:bY(Z.bgcolor,ci.get2DBgColor()),alpha:bY(Z.bgalpha,ci.get2DBgAlpha()),angle:bY(Z.bgangle,ci.get2DBgAngle()),ratio:bY(Z.bgratio,ci.get2DBgRatio())}};ck.borderColor=bC(bY(Z.bordercolor,ci.get2DBorderColor()),bY(Z.borderalpha,ci.get2DBorderAlpha()));ck.borderWidth=T(Z.showborder,this.showBorder,0)?T(Z.borderthickness,1):0;ck.plotBorderColor=bC(bY(Z.canvasbordercolor,ci.get2DCanvasBorderColor()),T(Z.showcanvasborder,1)==0?m:bY(Z.canvasborderalpha,x));ck.plotBorderWidth=T(Z.canvasborderthickness,1);var ch=ag(bY(Z.basefontcolor,ci.get2DBaseFontColor()));cg.tooltip.style.color=cg.plotOptions.series.dataLabels.style.color=cg.title.style.color=cg.subtitle.style.color=ch;var cf=ck.openColor=ag(bY(Z.opencolor,\"0099FF\")),M=ck.closeColor=ag(bY(Z.closecolor,\"0099FF\"));ck.highColor=ag(bY(Z.highcolor,\"00CC00\")),ck.lowColor=ag(bY(Z.lowcolor,\"CC0000\"));cg.chart.openValue={style:aX({},cg.plotOptions.series.dataLabels.style)};ae(cg.chart.openValue.style);cg.chart.openValue.style.color=cf;cg.chart.closeValue={style:aX({},cg.plotOptions.series.dataLabels.style)};ae(cg.chart.openValue.style);cg.chart.closeValue.style.color=M;cg.chart.highLowValue={style:aX({},cg.plotOptions.series.dataLabels.style)};this.parseStyles(cg);if(this.showCanvas==0){ck.plotBackgroundColor=ao}if(!this.showCanvasBorder){ck.plotBorderWidth=0}if(!ck.useRoundEdges){ck.plotShadow=0}Z.zeroplanethickness=bY(Z.zeroplanethickness,this.zeroplanethickness)},spaceManager:function(cF,ct,cq,co){var cd=cF[bO],ce=cd.smartLabel,cB=ct.chart,cg=cF.series[0],cl=cF.chart,cA=cq-(cl.marginRight+cl.marginLeft),cj,cE=T(cB.canvasleftmargin),cp=T(cB.canvasrightmargin),ch=cF.valuePadding=T(cB.valuepadding,2),L=cF.plotOptions.series.dataLabels,cy=L.style,M=parseInt(cy.lineHeight),ck=cA*0.7,cx=cA,cn=0,cs=0,cu=0;if(cg){cj=a5(cF,ct,ck,co,undefined,cq,co);cx-=(cj.left+cj.right);cA=cq-(cl.marginRight+cl.marginLeft);var A=0,cb=0,Z=0,cr,ci,cf;ce.setStyle(cy);if(af(cl.openValue.label)){ce.setStyle(cl.openValue.style);M=T(parseInt(cl.openValue.style.lineHeight,10),10);cr=ce.getSmartText(cl.openValue.label,cx,M*1.5);if(cr.width>0){cs=A=cr.width+ch;cn+=A;cx-=A}}if(af(cl.closeValue.label)){ce.setStyle(cl.closeValue.style);M=T(parseInt(cl.closeValue.style.lineHeight,10),10);ci=ce.getSmartText(cl.closeValue.label,cx,M*1.5);if(ci.width>0){cu=cb=ci.width+ch;cn+=cb;cx-=cb}}if(af(cl.highLowValue.label)){ce.setStyle(cl.highLowValue.style);M=T(parseInt(cl.highLowValue.style.lineHeight,10),10);cf=ce.getSmartText(cl.highLowValue.label,cx,M*1.5);if(cf.width>0){cu+=Z=cf.width+ch;cn+=Z;cx-=Z}}cl.marginRight+=Z+cb;cl.marginLeft+=A;if(af(cE)){cl.spacingLeft=cl.marginLeft=cE;cl.spacingLeft-=cj.left+A}else{cl.marginLeft+=cj.left}if(af(cp)){cl.spacingRight=cl.marginRight=cp;cl.spacingRight-=cj.right+Z+cb}else{cl.marginRight+=cj.right}this.xAxisMinMaxSetter(cF,ct,cA);var cc=cF.xAxis,cz=cc.min,cD=cc.max,cC=T(cB.periodlength,0),cm=bC(bY(cB.periodcolor,this.colorM.getPeriodColor()),T(cB.periodalpha,100)),cw,cv=1;if(cC>0){for(cw=cz;cw<=cD;cw+=cC){if(cv){cc.plotBands.push({color:cm,from:cw,to:Math.min(cD,cw+cC),zIndex:1});cv=0}else{cv=1}}}G(cF,ct,cq,cs,cu)}}},B);bb(\"sparkline\",{standaloneInit:true,defaultSeriesType:\"sparkline\",creditLabel:bq,showtooltip:0,showCanvas:0,point:bb.linebase.point,lineThickness:1,anchorRadius:2,anchorBorderThickness:0,postSeriesAddition:function(L,Z,A,M){var cj=L.chart,cB=Z.chart,ch=this.colorM,ce=L.series&&L.series[0],cq=ce&&L.series[0].data,cv,co,ct,cc,ck,cJ=bb.highValue,cx=bb.lowValue,cu=L[bO].numberFormatter,cn=cj.openColor,cK=cj.closeColor,cz=cj.highColor,cs=cj.lowColor,cw=T(cB.periodlength,-1),cD=bY(cB.periodcolor,ch.getPeriodColor()),cg=bY(cB.periodalpha,x),cF=ag(bY(cB.anchorcolor,ch.get2DPlotFillColor())),cr=T(cB.showopenanchor,cB.drawanchors,cB.showanchors,1),cG=T(cB.showcloseanchor,cB.drawanchors,cB.showanchors,1),cf=T(cB.showhighanchor,cB.drawanchors,cB.showanchors,1),cA=T(cB.showlowanchor,cB.drawanchors,cB.showanchors,1),cC=T(cB.showopenvalue,1),cb=T(cB.showclosevalue,1),cL=T(cB.showhighlowvalue,1),cm=T(cB.anchoralpha,100),cI=T(cB.drawanchors,cB.showanchors,0)==1?T(cB.anchoralpha,100):0,cH,ci,cy,cd,cp=0,cE=bY(cB.linecolor,ch.get2DPlotFillColor()),cl=T(cB.linealpha,100);if((co=cv=cq&&cq.length)>0){ct=Z.data||(Z.dataset&&Z.dataset[0]&&Z.dataset[0].data);ce.color=bC(cE,cl);while(cv){cv-=1;cc=cq[cv];ck=ct[cv];cc.color=bC(bY(ck.color,cE),T(ck.alpha,cl));cc.marker.fillColor=bC(bY(cc.anchorbgcolor,cF),T(cc.anchorbgalpha,cI));if(cc.y==cJ){cc.marker.fillColor=bC(bY(cc.anchorbgcolor,cz),T(cc.anchorbgalpha,cm));cc.marker.enabled=!!cf;cH=cu.dataLabels(cc.y)}if(cc.y==cx){cc.marker.fillColor=bC(bY(cc.anchorbgcolor,cs),T(cc.anchorbgalpha,cm));cc.marker.enabled=!!cA;ci=cu.dataLabels(cc.y)}if(!T(ck.showvalue,cB.showvalue,cB.showvalues,0)){cc.displayValue=ay}if(af(cc.y)){cp=1}}cc=cq[0];cc.marker.fillColor=bC(bY(cc.anchorbgcolor,cn),T(cc.anchorbgalpha,cm));cc.marker.enabled=!!cr;cy=cu.dataLabels(cc.y);cc=cq[co-1];cc.marker.fillColor=bC(bY(cc.anchorbgcolor,cK),T(cc.anchorbgalpha,cm));cc.marker.enabled=!!cG;cd=cu.dataLabels(cc.y);cj.openValue.label=cj.closeValue.label=cj.highLowValue.label=ay;if(cp){cj.openValue.label=T(cB.showopenvalue,1)?cy:ay;cj.closeValue.label=T(cB.showclosevalue,1)?cd:ay;cj.highLowValue.label=T(cB.showhighlowvalue,1)?'[<span style=\"color: '+cz+'\">'+cH+'<\/span><span>|<\/span><span style=\"color: '+cs+'\">'+ci+\"<\/span>]\":ay}}}},bb.sparkbase);bb(\"sparkcolumn\",{standaloneInit:true,defaultSeriesType:\"column\",creditLabel:bq,showCanvasBorder:true,point:bb.column2dbase.point,postSeriesAddition:function(cg,cn,cr,cp){var cs=cg.chart,cy=cn.chart,cc=this.colorM,ce=cg.series&&cg.series[0]&&cg.series[0].data,Z,ct,cw,cf,ck=bb.highValue,ch=bb.lowValue,cA=bY(cy.plotfillalpha,x),cm=bY(cy.plotfillcolor,cc.get2DPlotFillColor()),co=bY(cy.plotborderalpha,x),cz=bY(cy.plotbordercolor),A=bY(cy.highcolor,cm),ci=bY(cy.lowcolor,cm),L=bY(cy.highbordercolor,cz),cl=bY(cy.lowbordercolor,cz),cb=T(cy.showplotborder,0)?T(cy.plotborderthickness,1):0;if((Z=ce&&ce.length)>0){cw=cn.data||(cn.dataset&&cn.dataset[0]&&cn.dataset[0].data);while(Z){Z-=1;ct=ce[Z];cf=cw[Z];var M=bY(cf.color,cm),cq=bY(cf.alpha,cA),cx=bY(cf.bordercolor,cz),cj=bY(cf.borderalpha,co),cu=bY(cf.ratio,cy.plotfillratio),cd=bY(360-cy.plotfillangle,90);if(ct.y==ck){M=bY(cf.color,A);cx=bY(cf.bordercolor,L)}if(ct.y==ch){M=bY(cf.color,ci);cx=bY(cf.bordercolor,cl)}var cv=this.getColumnColor(cf,M,cq,cx,cj,cu,cd,cg.chart.useRoundEdges);ct.color=cv[0];ct.borderColor=cv[1];ct.borderWidth=cb;if(!T(cf.showvalue,cy.showvalue,cy.showvalues,0)){ct.displayValue=ay}}}},getColumnColor:function(cd,M,cj,co,cf,ce,cm,cg,A,ch){var cc,L,cl,Z,ci,ck,cb,cn;co=bY(co,av(M,60));cl=M.split(a2);Z=cj.split(a2);ci=co.split(a2);cn=cf.split(a2);if(ch){cc={FCcolor:{color:cl[0],alpha:Z[0]}}}else{if(cg){ck=cl[0];cb=Z[0];cc={FCcolor:{color:av(ck,75)+a2+aY(ck,25)+a2+av(ck,80)+a2+aY(ck,65)+a2+av(ck,80),alpha:cb+a2+cb+a2+cb+a2+cb+a2+cb,ratio:\"0,10,13,57,20\",angle:A?\"-180\":\"0\"}};ci=[av(ck,70)]}else{cj=bG(cj,cl.length);cc={FCcolor:{color:M,alpha:cj,ratio:ce,angle:A?180-cm:cm}}}}L={FCcolor:{color:ci[0],alpha:cn[0]}};return[cc,L]}},bb.sparkbase);bb(\"sparkwinloss\",{standaloneInit:true,defaultSeriesType:\"sparkwinloss\",creditLabel:bq,showCanvasBorder:false,showCanvas:0,showtooltip:0,postSeriesAddition:function(cg,cl,cs,cn){var ct=cg.chart,cA=cl.chart,cc=this.colorM,ce=cg.series&&cg.series[0]&&cg.series[0].data,Z,cu,cx,cf,cD=bY(cA.plotfillalpha,x),ck=bY(cA.plotfillcolor,cc.get2DPlotFillColor()),cm=bY(cA.plotborderalpha,x),cC=bY(cA.plotbordercolor),cb=T(cA.showplotborder,0)?T(cA.plotborderthickness,1):0,co=bY(cA.wincolor,cc.getWinColor()),A=bY(cA.losscolor,cc.getLossColor()),cy=bY(cA.drawcolor,cc.getDrawColor()),cr=bY(cA.scorelesscolor,cc.getScoreLessColor()),L=ay,cq,cz,ci,cv,cd,cj=0,cB=0,M=0,ch=ay,cp={\"1\":co,\"-1\":A,\"0.1\":cy,\"true\":cr};cg.tooltip.enabled=false;if((Z=ce&&ce.length)>0){cx=cl.data||(cl.dataset&&cl.dataset[0]&&cl.dataset[0].data);while(Z){Z-=1;cu=ce[Z];cf=cx[Z];switch(cf.value){case 1:L=bY(cf.color,co,ck);cj+=1;break;case-1:L=bY(cf.color,A,ck);cB+=1;break;case 0.1:L=bY(cf.color,cy,ck);M+=1;break}if(cf.scoreless==1){L=bY(cf.color,cr,ck)}cq=bY(cf.alpha,cD);cz=bY(cf.bordercolor,cC);ci=bY(cf.borderalpha,cm);cv=bY(cf.ratio,cA.plotfillratio);cd=bY(360-cA.plotfillangle,90);var cw=this.getColumnColor(cf,L,cq,cz,ci,cv,cd,cg.chart.useRoundEdges);cu.color=cw[0];cu.borderColor=cw[1];cu.borderWidth=cb;if(!T(cf.showvalue,cA.showvalue,cA.showvalues,0)){cu.displayValue=ay}}if(T(cA.showvalue,1)==1){ct.closeValue.style=aX({},cg.plotOptions.series.dataLabels.style);ct.closeValue.label=cj+\"-\"+cB+((M>0)?(\"-\"+M):ay)}}}},bb.sparkcolumn);bb(\"sparkwinloss\",{creditLabel:bq},bb.linebase);function ca(cf,L,cg,cb){var cc,Z=(cf&&cf.length||0),ce,A,M=[],cd=L<0;cg=T(cg,-0.5);cb=T(cb,1.5);for(cc=0;cc<Z;cc+=1){ce=cf[cc];if(ce.isGrid||ce.isVline){A=ce.value+=L;if((cd&&A<cg)||(!cd&&A>cb)){cf.splice(cc,1);if(ce.isGrid){M.push(ce)}cc-=1;Z-=1}}}return M}var b3={realtimeEnabled:true,linearDataParser:bb.gaugebase.linearDataParser,eiMethods:bl({},bb.gaugebase.eiMethods),decimals:2,prepareRealtimeValueText:function(){var Z=this,M=Z.hcJSON.chart,A=Z.hcJSON[bO],L=M.realtimeValueSeparator;return A.rtvHTMLWrapper+A.realtimeValues.join(L)+\"<\/span>\"+A.x.name},chart:function(){var M=this,cb=M.dataObj.chart,A=M.numberFormatter,cj,ci,ch,L=T(cb.showrealtimevalue,1),cc=T(cb.realtimevaluepadding),cl,cf,cg,ce,ck,cd,Z;cb=M.dataObj.chart;cb.adjustdiv=\"0\";if(L){cl=\"<br />\";cb.xaxisname=cb.xaxisname?cl+cb.xaxisname:cl}cj=bb.msareabase.chart.apply(this,arguments);ch=cj.chart;ci=cj[bO];cf=cj.series;if(ci.isDual){ci._userPMin=T(cb.pyaxisminvalue);ci._userPMax=T(cb.pyaxismaxvalue);ci._userSMin=T(cb.syaxisminvalue);ci._userSMax=T(cb.syaxismaxvalue)}else{ci._userMin=T(cb.yaxisminvalue);ci._userMax=T(cb.yaxismaxvalue)}ch.dataStreamURL=bY(cb.datastreamurl,\"\");ch.refreshInterval=T(cb.refreshinterval,1);ch.updateInterval=T(cb.updateinterval,ch.refreshInterval);ch.clearInterval=T(cb.clearchartinterval,0);ch.dataStamp=cb.datastamp;ch.showRealtimeValue=L;ch.realtimeValueSeparator=bY(cb.realtimevaluesep,\", \");ch.realtimeValuePadding=cc;ch.realtimeValueFont=bY(cb.realtimevaluefont,\"\");ch.realtimeValueFontBold=bY(cb.realtimevaluefontbold,0);ch.realtimeValueFontColor=bY(cb.realtimevaluefontcolor,\"\");ch.realtimeValueFontSize=T(cb.realtimevaluefontsize,\"\");if(L){if(!ci.realtimeValues){ci.realtimeValues=[];for(cd=0,Z=cf.length;cd<Z;cd++){cg=cf[cd];ce=cg.data;ck=ce&&ce.length&&ce[ce.length-1]&&ce[ce.length-1].y;ci.realtimeValues[cd]=A.dataLabels(ck,cg.yAxis)}}if(!ci.x.name){ci.x.name=cj.xAxis.title.text}if(!ci.rtvHTMLWrapper){ci.rtvHTMLWrapper='<span style=\"font-weight: '+(ch.realtimeValueFontBold?\"bold\":\"normal\")+(ch.realtimeValueFontColor?\";color:\"+ch.realtimeValueFontColor.replace(K,aQ):\"\")+(ch.realtimeValueFontSize?\";font-size:\"+ch.realtimeValueFontSize+\"px\":\"\")+(ch.realtimeValueFont?\";font-family:\"+ch.realtimeValueFont:\"\")+'\">'}cj.xAxis.title.text=M.prepareRealtimeValueText()}return cj},configureAxis:function(ck){var M=this,ce=ck[bO],cd=ck.xAxis,cn=ce.x,co=ce.axisGridManager,cp=cn.catCount,cc=ce.oriCatTmp,Z=M.dataObj,L=Z.chart||(Z.chart={}),cf=ck.series,cb=cf[0],ch=M.numDisplaySets=T(L.numdisplaysets,cp||15),cq=cb.data.length,cl=cd.plotLines,cg=(cl&&cl.length)||0,cr,cm,cj,A=[],ci;ci=((M.dataObj.categories||(M.dataObj.categories=[{category:[]}]))[0]||(M.dataObj.categories[0]={category:[]})).category||(M.dataObj.categories[0].category=[]);if(cp===0){M.chartInstance.jsVars._forceReflow=true}cm=ch-cq;if(cm>0){while(cg--){cl[cg].value+=cm}cd.plotLines=[];while(cm--){A[cm]=null;co.addXaxisCat(cd,cm,cm,\" \");cc.unshift(null);ci.unshift({label:\" \"})}cd.plotLines=cd.plotLines.reverse().concat(cl)}else{if(cm){ca(cd.plotLines,cm,-0.5);cc.splice(0,-cm)}}cm=cf.length;while(cm--){cj=cf[cm];cr=cj.data;cr=cj.data=A.concat(cr.slice(-ch));cq=cj.length}M.needsRedraw=(cp===0);cp=cn.catCount=ch;return bb.msareabase.configureAxis&&bb.msareabase.configureAxis.apply(this,arguments)},pointValueWatcher:function(M,cq,co,cg,cd){var ci=M[bO];if(ci._skipValueWatcher){return}co=(co===undefined)?0:co;if(!ci._chartState){ci._chartState={}}if(!ci._chartState[co]){ci._chartState[co]={nullValObj:{},nValueMap:{},pValueMap:{},nullArr:[],valueArr:[],pSumArr:[],nSumArr:[],pNullArr:[],nNullArr:[],isLastNull:false,isLastPSumNull:false,isLastNSumNull:false,currentIdx:-1}}var A=this,ch=ci[co],cp=ci._chartState[co],cj=cp.nullValObj,cc=cp.nullArr,cl=cp.valueArr,cn=cp.pSumArr,cb=cp.nSumArr,cu=cp.pNullArr,ce=cp.nNullArr,cm=cp.isLastNull,cw=cp.isLastPSumNull,cf=cp.isLastNSumNull,ck=A.numDisplaySets,L=cp.currentIdx,Z=cp.pValueMap,ct=cp.nValueMap,cv,cx,cs,cr,cz=ck-1,cy=cd%ck;if(cd>L){if(cm){cv=L-cj.lastNullIdx;cc.push(cv);cj.lastNullIdx=L;cv=L-cj.lastNSumNullIdx;ce.push(cv);cj.lastNSumNullIdx=L;cv=L-cj.lastPSumNullIdx;cu.push(cv);cj.lastPSumNullIdx=L}else{if(cf){cv=L-cj.lastNSumNullIdx;ce.push(cv);cj.lastNSumNullIdx=L}if(cw){cv=L-cj.lastPSumNullIdx;cu.push(cv);cj.lastPSumNullIdx=L}}cm=true;cw=true;cf=true;if(L>=cz){((cc[0]===0)&&cc.shift())||cl.shift();cc[0]&&(cc[0]-=1)&&cj.lastNullIdx&&(cj.lastNullIdx-=1);((cu[0]===0)&&cu.shift())||cn.shift();cu[0]&&(cu[0]-=1)&&cj.lastPSumNullIdx&&(cj.lastPSumNullIdx-=1);((ce[0]===0)&&ce.shift())||cb.shift();ce[0]&&(ce[0]-=1)&&cj.lastNSumNullIdx&&(cj.lastNSumNullIdx-=1);delete Z[cy];delete ct[cy]}}if(cq!==null){cm=false;if(A.isStacked){if(cq>0){if(!Z[cy]&&Z[cy]!==0){Z[cy]=cq;cw=false}}else{if(!ct[cy]&&ct[cy]!==0){ct[cy]=cq;cf=false}}}else{cw=false;cf=false}if(cd>L){if(A.isStacked){cl.push(cq);if(cq>0){cn.push(cq);Z[cy]=cq;cw=false}else{cb.push(cq);ct[cy]=cq;cf=false}}else{ct[cy]=cq;Z[cy]=cq;cn.push(cq);cb.push(cq)}}else{if(A.isStacked){if(cq>0){if(cw){cn.push(cq);cw=false}else{cn[cn.length-1]+=cq}}else{if(cf){cb.push(cq);cw=false}else{cb[cb.length-1]+=cq}}}else{if(!Z[cy]&&Z[cy]!==0){Z[cy]=cq;cn.push(cq)}else{if(cq>Z[cy]){Z[cy]=cn[cn.length-1]=cq}}if(!ct[cy]&&ct[cy]!==0){ct[cy]=cq;cb.push(cq)}else{if(cq<ct[cy]){ct[cy]=cb[cb.length-1]=cq}}}}}cp.currentIdx=cd;cp.isLastNull=cm;cp.isLastPSumNull=cw;cp.isLastNSumNull=cf;cx=cl.concat(cn).concat(cb);cs=Math.max.apply(Math,cx);cr=Math.min.apply(Math,cx);ch.max=cs;ch.min=cr},realtimeUpdate:function(cB,cx){var dl=this,cU=dl.hcJSON,cw=cU.chart,cb=dl.dataObj,da=cb.chart,cZ=cU[bO],cO=dl.numberFormatter,ct=cZ.x,di=ct._labelY,dk=ct._labelX,cG=ct._yShipment,cD=ct._isStagger,cE=ct._rotation,cl=ct._textAlign,c2=ct._adjustedPx,cT=ct._staggerLines,A=ct._labelHeight,cV,cF=cZ.axisGridManager,cd=ct.catCount,ch=dl.hcInstance,cn=dl.chartInstance,dg=cn.jsVars,cf=dg.$overlayButton,cv=cB.values,c9=cB.labels||[],dh=cB.showLabels||[],c1=cB.colors,db=cB.toolTexts,dj=cB.links,cc,M,cW,cA,cz=cB.vlines,cP=cB.dimension>cd?cd:cB.dimension,cp,dc,cu,cY,c4,ce,cm,cS,cg,dm,cL,cJ,cI,cH,c7,cr,Z,cQ,c0,cN,c3,cC,cj,cK=cU.xAxis,co=(cb.chart.showlabels==\"0\"),de=cw.showRealtimeValue,ck=cd-cP,cM,c5=cb.categories,cs=dg._reflowData,cq=[],ci=T(cZ._startIndex,0),dd=ct.stepValue,cR,c8,L,cy,df,cX;if(cB.clear){this.realtimeUpdate({dimension:dl.numDisplaySets,values:[],labels:[]},cB.dimension>0)}if(!cB.dimension){return}cU.plotOptions.series.animation=false;if(cz){cc=cB.vlineColors||[];M=cB.vlineLabels||[];cW=cB.vlineThickness||[];cA=cB.vlinedashed||[]}else{cz=[]}if(!(c5)){c5=cb.categories=[]}if(!c5[0]){c5[0]={category:[]}}else{if(!c5[0].category){c5[0].category=[]}}c5=c5[0].category;cq=ca(cK.plotLines,-cP,-0.5);cL=cq.length;while(cL--){if((cM=cq[cL]).label){cp=cM.label;cp.text=(dh[cL]===\"0\"||co)?\"\":bp(c9[cL]||ay);cR=ck+cL;cM.value=cR;dm=cd+cL+ci;cV=dm%dd===0;if(cV){cp.style=cK.labels.style;cp.y=cD?di+(((dm/dd)%cT)*A):cG;cp.x=dk+(cE?c2:0);cp.rotation=cE;cp.textAlign=cl}else{cp.style=cK.steppedLabels.style}cK.plotLines.push(cM);c5.shift();c5.push({label:cp.text})}if(cz[cL]===\"1\"){cF.addVline(cK,{color:cc[cL]&&decodeURIComponent(cc[cL]),label:M[cL]&&decodeURIComponent(M[cL]),thickness:cW[cL]&&decodeURIComponent(cW[cL]),dashed:cA[cL]&&decodeURIComponent(cA[cL])},ck+cL,cU)}}cZ._startIndex=(cP+ci)%(cD?dd*cT:dd);cL=cU.series&&cU.series.length;if(cP){cZ.oriCatTmp.splice(0,cP)}cZ._skipValueWatcher=false;while(cL--){c7=cU.series[cL];cQ=(cv&&cv[cL])||[];c0=(c1&&c1[cL])||[];cN=(dj&&dj[cL])||[];c3=(db&&db[cL])||[];cS=c7.yAxis||0;cg=cZ._rtCounter||(cZ._rtCounter=1);cr=c7.data;for(cJ=(cr.length-cP),cH=cr.length,cI=0;cJ<cH;cJ+=1,cI+=1){cC=cO.getCleanValue(decodeURIComponent(aJ(cQ[cI],null)));cj=decodeURIComponent(c9[cI]||\"\");cZ.oriCatTmp[cJ]=cj;cr.shift();Z=c7._dataParser({label:cj,color:c0&&c0[cI]&&decodeURIComponent(c0[cI]),link:cN&&cN[cI]&&decodeURIComponent(cN[cI]),tooltext:c3&&c3[cI]&&decodeURIComponent(c3[cI])},cJ,cC);Z.y=cC;cr.push(Z);dl.pointValueWatcher(cU,cC,cS,null,cg)}if(de){cZ.realtimeValues[cL]=cO.dataLabels(cC,c7.yAxis)}}cZ._rtCounter+=cP;if(de){cK.title.text=dl.prepareRealtimeValueText()}dc=cU.yAxis[0];cu=cZ[0];cm=T(dl.isStacked?0:dl.setAdaptiveYMin,da.setadaptiveymin,0);c4=cY=!cm;ce=(dc.max-dc.min)/4;if(cZ.isDual){if(cu.max>dc.max||cu.min<dc.min||(!(c4&&dc.min===0)&&dc.min!==cZ._userPMin&&((cu.min-dc.min)>ce))||(!(cY&&dc.max===0)&&dc.max!==cZ._userPMax&&((dc.max-cu.max)>ce))){dg._forceReflow=true;cZ._skipValueWatcher=true}dc=cU.yAxis[1];cu=cZ[1];c4=cY=!T(da.setadaptivesymin,cm);ce=(dc.max-dc.min)/4;if(cu.max>dc.max||cu.min<dc.min||(!(c4&&dc.min===0)&&dc.min!==cZ._userSMin&&((cu.min-dc.min)>ce))||(!(cY&&dc.max===0)&&dc.max!==cZ._userSMax&&((dc.max-cu.max)>ce))){dg._forceReflow=true;cZ._skipValueWatcher=true}}else{if(cu.max>dc.max||cu.min<dc.min||(!(c4&&dc.min===0)&&dc.min!==cZ._userMin&&((cu.min-dc.min)>ce))||(!(cY&&dc.max===0)&&dc.max!==cZ._userMax&&((dc.max-cu.max)>ce))){dg._forceReflow=true;cZ._skipValueWatcher=true}}c8=ch._chartBGImageGroup;if(c8){delete c8.renderer;cU.chart._chartBGImageGroup=c8;L=ch._chartBGImage||[];for(cL=0,cH=L.length;cL<cH;cL+=1){delete L[cL].renderer}cU.chart._chartBGImage=L}cy=ch._chartLogoImageGroup;if(cy){delete cy.renderer;cU.chart._chartLogoImageGroup=cy;df=ch._logoTracker;if(df){delete df.renderer;cU.chart._logoTracker=df}cX=ch._chartLogoImage;if(cX){delete cX.renderer;cU.chart._chartLogoImage=cX}}if(cs.hcJSON){var c6=cs.hcJSON[bO];delete cs.hcJSON[bO];aX(cU.series,cs.hcJSON.series,true);cs.hcJSON[bO]=c6;c6=null}aX(cs,{preReflowAdjustments:function(){var dn=this;dn.dataObj.categories=cb.categories},postReflowAdjustments:function(){var dn=this;dn.hcJSON.xAxis.plotLines=cK.plotLines;dn.hcJSON.series=cU.series},postHCJSONCreation:function(dn){aX(dn,{_FCconf:{0:{min:cZ[0].min,max:cZ[0].max},1:{min:cZ[1].min,max:cZ[1].max},_skipValueWatcher:true,realtimeValues:cZ.realtimeValues,rtvHTMLWrapper:cZ.rtvHTMLWrapper}},true)},hcJSON:{_FCconf:{_userMax:cZ._userMax,_userMin:cZ._userMin,_userPMax:cZ._userPMax,_userSMax:cZ._userSMax,_userPMin:cZ._userPMin,_userSMin:cZ._userSMin,_chartState:cZ._chartState,_rtCounter:cZ._rtCounter,_startIndex:cZ._startIndex,oriCatTmp:cZ.oriCatTmp,x:{catCount:cd,_labelY:di,_labelX:dk,_yShipment:cG,_isStagger:cD,_rotation:cE,_textAlign:cl,_adjustedPx:c2,_staggerLines:cT,_labelHeight:A}}}},true);if(!cx){if(dg._forceReflow){dg._forceReflow=false;cn.resizeTo();return}else{dl.draw(cU,function(dn){dg.hcObj=dn;if(dn.hasRendered){if(dg.overlayButtonActive&&cf){cf.text(dg.overlayButtonMessage);dn.container.appendChild(cf[0])}ch.destroy&&ch.destroy()}})}}},extractTrendLines:function(cb,cd){var M=cb.plotLines,ce=cb.plotBands,cc,L,Z=M.length,cf,A=[],cg=[];while(Z){L=Z-1;cf=M[L];if(cf.isTrend){cg.push(cf)}Z-=1}Z=ce.length;while(Z){L=Z-1;cc=ce[L];if(cc.isTrend){A.push(cc)}Z-=1}return{trendLines:cg,trendBands:A}}};bl(b3.eiMethods,{clearChart:function(A){A=(A&&A.toString&&A.toString());this.feedData(\"clear=1\");W.raiseEvent(\"ChartCleared\",{source:A},this,[this.id,A])},getDataJSON:function(){return this.jsVars._rtLastUpdatedData||{values:[]}},getData:function(){var ch=this.jsVars,cf=ch.hcObj,A=ch.instanceAPI,cg=A.hcJSON[bO],cd=cg.oriCatTmp,cc,ce,ci=[],L,cj,cb,Z,M;if(!cf||!cf.series){return ci}cc=cf.series;L=[];Z=cc.length;while(Z--){ce=cc[Z];L[ce.index]=ce.name;cb=ce.data;M=cd.length;while(M--){cj=ci[M]||(ci[M]=[cd[M]]);cj[Z+1]=cb[M].y}}L.unshift(null);ci.unshift(L);return ci}});bb(\"realtimearea\",bl({standaloneInit:true,multisetRealtime:true,defaultPlotShadow:1,creditLabel:bq},b3),bb.msareabase);bb(\"realtimecolumn\",bl({standaloneInit:true,multisetRealtime:true,creditLabel:bq},b3),bb.mscolumn2dbase);bb(\"realtimeline\",bl({standaloneInit:true,multisetRealtime:true,creditLabel:bq},b3),bb.mslinebase);bb(\"realtimelinedy\",bl({standaloneInit:true,multisetRealtime:true,isDual:true,creditLabel:bq,series:bb.mscombibase},b3),bb.mslinebase);bb(\"realtimestackedarea\",{isStacked:true,showSum:0,creditLabel:bq},bb.realtimearea);bb(\"realtimestackedcolumn\",{isStacked:true,creditLabel:bq},bb.realtimecolumn);var bc=function(L,A){return L.minvalue-A.minvalue};function a6(cg,ci,ch,L){var cf,A,cd,M,cj,cc,cb,Z,ce;if(!(ch instanceof Array)){ch=bE.paletteColors[0]}if(cg&&cg.length>0){M=cg.length-1;for(cd=M;cd>=0;cd-=1){cf=cg[cd];if(cf){cf.minvalue=L.numberFormatter.getCleanValue(cf.minvalue);cf.maxvalue=L.numberFormatter.getCleanValue(cf.maxvalue);if(cf.minvalue===null){if(cf.maxvalue!==null){cf.minvalue=cf.maxvalue}else{if(cd!==M){cg.splice(cd,1)}}}if(cf.label!==undefined){cf.label=bp(cf.label)}if(cf.name!==undefined){cf.name=bp(cf.name)}if(cf.maxvalue!==null){if(cf.minvalue>cf.maxvalue){cj=cf.minvalue;cf.minvalue=cf.maxvalue;cf.maxvalue=cj}}}}cg.sort(bc);if(!cg[0].code){cg[0].code=ch[0]}if(aJ(cg[0].alpha)==undefined){cg[0].alpha=x}for(cd=0,M=cg.length-1;cd<M;cd+=1){ce=cd+1;cf=cg[cd];A=cg[ce];if(!A.code){A.code=ch[ce]}if(aJ(A.alpha)==undefined){A.alpha=x}if(cf.maxvalue===null){cf.maxvalue=A.minvalue}if(cf.maxvalue>A.minvalue){if(cf.maxvalue>A.maxvalue){cc=aX(cf);cc.maxvalue=cf.maxvalue;Z=cc.minvalue=A.maxvalue;for(cb=cd+2;cb<M&&cg[cb].minvalue<Z;cb+=1){}cg.splice(cb,0,cc);M+=1}cf.maxvalue=A.minvalue}}cf=cg[cd];if(cf.maxvalue===null){cf.maxvalue=cf.minvalue}}if(!(cg&&cg.length>0)){if(!ci){ci={code:\"CCCCCC\",alpha:\"100\",bordercolor:\"000000\",borderalpha:\"100\"}}cg=[ci];this.defaultAsigned=true}this.colorArr=cg}a6.prototype={getColorObj:function(cd){var cc=this.colorArr,Z=0,L=cc.length,M,A,ce,cb={};for(;Z<L;Z+=1){cb.index=Z;M=cc[Z];ce=cc[Z+1];if(cd<M.minvalue){cb.nextObj=M;return cb}if(cd>=M.minvalue&&cd<=M.maxvalue){cb.colorObj=M;if(ce&&cd==ce.minvalue){cb.nextObj=ce;cb.isOnMeetPoint=true}return cb}cb.prevObj=M}cb.index=Z-1;return cb},getColorRangeArr:function(ce,M){var ch,cc=this.colorArr,L,A,cd,cg,cb,cf=[],Z,ci;if(!this.defaultAsigned){if(ce>M){ch=ce;ce=M;M=ch}if(ce<M){cd=this.getColorObj(ce);cb=this.getColorObj(M);if(cd&&cb){cg=ce;L=cd.index;A=cb.index;for(;L<=A;L+=1){Z=aX({},cc[L]);if(Z.minvalue!==cg){Z.minvalue=cg}cf.push(Z);ci=Z;cg=Z.maxvalue}ci.maxvalue=M}}}return cf}};a6.prototype.constructor=a6;var r=function(cs,cf,ci,cr,ce,cg){var cd=Math.pow(cr,2)-Math.pow(cs,2),cp=-2*(Math.pow(cr,2)*ci-Math.pow(cs,2)*cg),ch=Math.pow(cs*ce,2)+Math.pow(cr*ci,2)-Math.pow(cr*cf,2)-Math.pow(cs*cg,2),cn=Math.sqrt(Math.pow(cp,2)-4*cd*ch),cm=(-cp+cn)/(2*cd),ck=(-cp-cn)/(2*cd),cq,Z,M,cc,cb,L,A,co,cl,cj=100;if(cm<cg&&cm>ci){cq=ck}else{if(ck<cg&&ck>ci){cq=cm}}Z=Math.sqrt((Math.pow(cq-ci,2)-Math.pow(cf,2))/Math.pow(cs,2));M=-Z;cc={x:Math.round((Math.pow(cs,2)*Z/(cq-ci))*cj)/cj,y:Math.round(((Math.pow(cf,2)/(cq-ci))+ci)*cj)/cj};cb={x:Math.round((Math.pow(cr,2)*Z/(cq-cg))*cj)/cj,y:Math.round(((Math.pow(ce,2)/(cq-cg))+cg)*cj)/cj};L={x:Math.round((Math.pow(cs,2)*M/(cq-ci))*cj)/cj,y:Math.round(((Math.pow(cf,2)/(cq-ci))+ci)*cj)/cj};A={x:Math.round((Math.pow(cr,2)*M/(cq-cg))*cj)/cj,y:Math.round(((Math.pow(ce,2)/(cq-cg))+cg)*cj)/cj};cl={topLeft:L,bottomLeft:A,topRight:cc,bottomRight:cb};for(co in cl){if(isNaN(cl[co].x)||isNaN(cl[co].y)){if(co==\"topLeft\"||co==\"bottomLeft\"){cl[co].x=-cs}else{cl[co].x=cs}cl[co].y=ci}}return cl},at=function(cg,cf,ct,cr,cn,cv,cm,ck){var cb=cf+cn,cp=ct*cv,co=cr*cv,cx,ci=r(ct,cp,cf,cr,co,cb),cj=ci.topLeft,cl=ci.bottomLeft,ch=ci.topRight,ce=ci.bottomRight,cw=cg+cj.x,cu=cg+ch.x,cs=cg+cl.x,cq=cg+ce.x,M=cj.y,A=cl.y,cd=ck.getArcPath(cg,cf,cw,M,cu,M,ct,cp,0,0),cc=ck.getArcPath(cg,cf,cw,M,cu,M,ct,cp,1,1),Z=ck.getArcPath(cg,cb,cq,A,cs,A,cr,co,1,0),L=ck.getArcPath(cg,cb,cq,A,cs,A,cr,co,0,1);cx={front:[by,cw,M].concat(cd,[bz,cq,A],Z,[bs]),back:[by,cw,M].concat(cc,[bz,cq,A],L,[bs]),silhuette:[by,cw,M].concat(cc,[bz,cq,A],Z,[bs])};if(!cm){cx.top=[by,cw,M].concat(cd,[bz,cu,M],ck.getArcPath(cg,cf,cu,M,cw,M,ct,cp,0,1),[bs])}return cx},bT=(function(){var L={y:true,R1:true,R2:true,h:true,r3dFactor:true,color:true,alpha:true,fill:true,stroke:true,strokeColor:true,strokeAlpha:true,\"stroke-width\":true},Z=0.01,M=function(cg,cf,cs,cq,cl,cw,co,cj,ch,ck){if(b6(cg)){cf=cg.y;cs=cg.R1;cq=cg.R2;cl=cg.h;cw=cg.r3dFactor;co=cg.is2D;ck=cg.isHollow;ch=cg.isFunnel;cj=cg.renderer;cg=cg.x}var cx=cg-cs,cv=cg+cs,ct=cg-cq,cr=cg+cq,ce=cf+cl,cu;if(co){cu={silhuette:[by,cx,cf,bz,cv,cf,cr,ce,ct,ce,bs]};if(!ch){cu.lighterHalf=[by,cx,cf,bz,cg,cf,cg,ce,ct,ce,bs];cu.darkerHalf=[by,cg,cf,bz,cv,cf,cr,ce,cg,ce,bs]}}else{if(ch){cu=at(cg,cf,cs||Z,cq||Z,cl,cw,ck,cj)}else{var cp=cs*cw,cm=cq*cw,cn=aq(5,cs),cc=aq(2,2*cp),cd=aq(2,cc),ci=cd/cw;cu={top:[by,cx,cf,bz,cg,cf+cp,cv,cf,cg,cf-cp,bs],front:[by,cx,cf,bz,cg,cf+cp,cv,cf,cr,ce,cg,ce+cm,ct,ce,bs],topLight:[by,cx,cf+0.5,bz,cg,cf+cp+0.5,cg,cf+cp-cc,cx+ci,cf,bs],topLight1:[by,cv,cf+0.5,bz,cg,cf+cp+0.5,cg,cf+cp-cd,cv-ci,cf,bs],silhuette:[by,cx,cf,bz,cg,cf-cp,cv,cf,cr,ce,cg,ce+cm,ct,ce,bs],centerLight:[by,cg,cf+cp,bz,cg,ce+cm,cg-5,ce+cm,cg-cn,cf+cp,bs],centerLight1:[by,cg,cf+cp,bz,cg,ce+cm,cg+5,ce+cm,cg+cn,cf+cp,bs]}}}return cu},A=function(cd,cC){var cB,cv,cf=this,cw,ci,cA,cr=false,ch=false,cu,cl,cx,cc={},cn={},cj={},cg={},cp={},cm={},ct=this[\"_3dAttr\"];if(bv(cd)&&af(cC)){cB=cd;cd={};cd[cB]=cC}if(bv(cd)){if(L[cd]){cf=this[\"_3dAttr\"][cd]}else{cf=this[\"_attr\"](cd)}}else{for(cB in cd){cv=cd[cB];if(L[cB]){ct[cB]=cv;if(cB===\"fill\"){if(cv&&cv.linearGradient&&cv.stops&&cv.stops[0]){cv=cv.stops[0][1]}if(am.test(cv)){cA=bR(cv);cw=cA.get(\"hex\");ci=cA.get(\"a\")*100}else{if(cv&&cv.FCcolor){cw=cv.FCcolor.color.split(a2)[0];ci=cv.FCcolor.alpha.split(a2)[0]}else{if(ax.test(cv)){cw=cv.replace(K,aQ);ci=T(ct.alpha,100)}}}ct.color=cw;ct.alpha=ci;ch=true}else{if(cB===\"color\"||cB===\"alpha\"){ct.fill=bC(ct.color,T(ct.alpha,100));ch=true}else{if(cB===\"stroke\"||cB===\"strokeColor\"||cB===\"strokeAlpha\"){if(ct.is2D){if(cB===\"stroke\"){if(cv&&cv.linearGradient&&cv.stops&&cv.stops[0]){cv=cv.stops[0][1]}if(am.test(cv)){cA=bR(cv);cw=cA.get(\"hex\");ci=cA.get(\"a\")*100}else{if(cv&&cv.FCcolor){cw=cv.FCcolor.color.split(a2)[0];ci=cv.FCcolor.alpha.split(a2)[0]}else{if(ax.test(cv)){cw=cv.replace(K,aQ);ci=T(ct.alpha,100)}}}ct.strokeColor=cw;ct.strokeAlpha=ci}else{ct.stroke=bC(ct.strokeColor,T(ct.strokeAlpha,100))}if(ct.isFunnel){this.funnel2D.attr(\"stroke\",ct.stroke)}else{this.borderElement.attr(\"stroke\",ct.stroke)}}}else{if(cB===\"stroke-width\"){if(ct.is2D){if(ct.isFunnel){this.funnel2D.attr(cB,cv)}else{this.borderElement.attr(cB,cv)}}}else{cr=true}}}}}else{this[\"_attr\"](cB,cv)}}if(ct.is2D){if(cr){Shapeargs=M(ct.x,ct.y,ct.R1,ct.R2,ct.h,ct.r3dFactor,ct.is2D);cf.shadowElement.attr({d:Shapeargs.silhuette});if(ct.isFunnel){cf.funnel2D.attr({d:Shapeargs.silhuette})}else{cf.lighterHalf.attr({d:Shapeargs.lighterHalf});cf.darkerHalf.attr({d:Shapeargs.darkerHalf});cf.borderElement.attr({d:Shapeargs.silhuette})}}if(ch){if(ct.isFunnel){cf.funnel2D.attr(\"fill\",bC(ct.color,T(ct.alpha,100)))}else{var cy=av(ct.color,80),ce=aY(ct.color,80);cf.lighterHalf.attr(\"fill\",bC(ce,T(ct.alpha,100)));cf.darkerHalf.attr(\"fill\",bC(cy,T(ct.alpha,100)))}}}else{if(cr){Shapeargs=M(ct.x,ct.y,ct.R1,ct.R2,ct.h,ct.r3dFactor,ct.is2D);cf.shadowElement.attr(\"d\",Shapeargs.silhuette);if(ct.isFunnel){cf.front.attr(\"d\",Shapeargs.front);cf.back.attr(\"d\",Shapeargs.back);if(cf.top&&Shapeargs.top){cf.top.attr(\"d\",Shapeargs.top)}}else{cf.front.attr(\"d\",Shapeargs.front);cf.top.attr(\"d\",Shapeargs.top);cf.topLight.attr(\"d\",Shapeargs.topLight);cf.topLight1.attr(\"d\",Shapeargs.topLight1);cf.centerLight.attr(\"d\",Shapeargs.centerLight);cf.centerLight1.attr(\"d\",Shapeargs.centerLight1)}}if(ch){cw=ct.color;ci=ct.alpha;if(ct.isFunnel){cu=aY(cw,60);cx=av(cw,60);cf.back.attr(\"fill\",{FCcolor:{color:cx+a2+cu+a2+cw,alpha:ci+a2+ci+a2+ci,ratio:\"0,60,40\",angle:0}});cf.front.attr(\"fill\",{FCcolor:{color:cw+a2+cu+a2+cx,alpha:ci+a2+ci+a2+ci,ratio:\"0,40,60\",angle:0}});if(cf.top){cf.top.attr(\"fill\",{FCcolor:{color:cu+a2+cx,alpha:ci+a2+ci,ratio:\"0,100\",angle:-65}})}}else{cu=aY(cw,80);cl=aY(cw,70);cx=av(cw,80);var co=\"0,100\",ck=\"0,\"+ci,cz=cw+a2+cl,cs=-45,cq=(5/(ct.R1*ct.r3dFactor))*100;cf.centerLight.attr(\"fill\",{FCcolor:{color:cz,alpha:ck,ratio:co,angle:0}});cf.centerLight1.attr(\"fill\",{FCcolor:{color:cz,alpha:ck,ratio:co,angle:180}});cf.topLight.attr(\"fill\",{FCcolor:{color:cl+a2+cl+a2+cw+a2+cw,alpha:ci+a2+ci+a2+0+a2+0,ratio:\"0,50,\"+cq+a2+(50-cq),angle:cs}});cf.topLight1.attr(\"fill\",{FCcolor:{color:cl+a2+cw+a2+cx,alpha:ci+a2+ci+a2+ci,ratio:\"0,50,50\",angle:0}});cf.front.attr(\"fill\",{FCcolor:{color:cw+a2+cw+a2+cx+a2+cx,alpha:ci+a2+ci+a2+ci+a2+ci,ratio:\"0,50,0,50\",angle:0}});cf.top.attr(\"fill\",{FCcolor:{color:cu+a2+cw+a2+cx+a2+cx,alpha:ci+a2+ci+a2+ci+a2+ci,ratio:\"0,25,30,45\",angle:cs}})}}}}return cf},cb=function(){var cc=this.shadowElement;if(cb){cc.shadow.apply(cc,arguments)}};return function(cn,cm,ci,ch,ck,ce,cp,cg,cl,cc,cj){if(b6(cn)){cm=cn.y;ci=cn.R1;ch=cn.R2;ck=cn.h;ce=cn.r3dFactor;cp=cn.gStr;cg=cn.is2D;cl=cn.renderer;cj=cn.isHollow;cc=cn.isFunnel;cn=cn.x}ce=T(ce,0.15);var cf={x:cn,y:cm,R1:ci,R2:ch,h:ck,r3dFactor:ce,is2D:cg,isHollow:cj,isFunnel:cc,renderer:cl},cd=M(cf),co=cl.g(cp);co.Shapeargs=cd;co.shadowElement=cl.path(cd.silhuette).attr({fill:b4}).add(co);co._attr=co.attr;co.attr=A;co.shadow=cb;co._3dAttr=cf;if(cc){if(cg){co.funnel2D=cl.path(cd.silhuette).add(co)}else{co.back=cl.path(cd.back).attr({\"stroke-width\":0}).add(co);co.front=cl.path(cd.front).attr({\"stroke-width\":0}).add(co);if(cd.top){co.top=cl.path(cd.top).attr({\"stroke-width\":0}).add(co)}}}else{if(cg){co.lighterHalf=cl.path(cd.lighterHalf).attr({\"stroke-width\":0}).add(co);co.darkerHalf=cl.path(cd.darkerHalf).attr({\"stroke-width\":0}).add(co);co.borderElement=cl.path(cd.silhuette).attr({fill:b4}).add(co)}else{co.front=cl.path(cd.front).attr({\"stroke-width\":0}).add(co);co.centerLight=cl.path(cd.centerLight).attr({\"stroke-width\":0}).add(co);co.centerLight1=cl.path(cd.centerLight1).attr({\"stroke-width\":0}).add(co);co.top=cl.path(cd.top).attr({\"stroke-width\":0}).add(co);co.topLight=cl.path(cd.topLight).attr({\"stroke-width\":0}).add(co);co.topLight1=cl.path(cd.topLight1).attr({\"stroke-width\":0}).add(co)}}return co}})();aj.funnel=aK(aj.pie,{states:{hover:{}}});function a4(A,cc,Z,L,cb){var M=cc+cb;return[by,A-Z,cc,bz,A+Z,cc,A+L,M,A-L,M,\"z\"]}var D=aL.extendClass(a.pie.prototype.pointClass,{slice:function(ch,cn,cb){var cl=this,ce=cl.series,M=ce.options,cg=M.SlicingDistance,ci=cg/2,Z,cd;ch=cl.sliced=af(ch)?ch:!cl.sliced;Z={hcJSON:{series:[]}};Z.hcJSON.series[ce.index]={data:[]};if(ch){if(ce.lastSlicedPoint){Z.hcJSON.series[ce.index].data[ce.lastSlicedPoint.index]={isSliced:false};ce.lastSlicedPoint.sliced=false}else{cd=ce.data.length;while(cd--){Z.hcJSON.series[ce.index].data[cd]={isSliced:false}}}ce.lastSlicedPoint=cl}else{ce.lastSlicedPoint=undefined}var ck={translateY:ch?-ci:0},cm={translateY:ch?ci:0},cd=0,cj=0,cc=ce.data,L=cc.length,cf,A;Z.hcJSON.series[ce.index].data[cl.index]={isSliced:ch||false};aX(ce.chart.options.instanceAPI.chartInstance.jsVars._reflowData,Z,true);cn=aP(cn,true);for(cd=0;cd<L;cd+=1){A=cc[cd];if(A.graphic){if(A.x<cl.x){cf=ck;cj+=1}else{if(A.x==cl.x){if(!cj){cf={translateY:ch?-ci/2:0}}else{if(cd==L-1){cf={translateY:ch?ci/2:0}}else{cf={translateY:0}}}}else{cf=cm}}A.graphic.animate(cf);if(A.dataLabelElement){A.dataLabelElement.animate(cf)}if(A.tracker){A.tracker.animate(cf)}}}}}),aG=aL.extendClass(a.pie,{type:\"funnel\",pointClass:D,translate:function(){var cn=this,cE=cn.data,ct=cn.chart,ce=cn.options,cF=cE.length,cv=ct.plotWidth,cu=ct.plotHeight,cc=cv/2,cp=cn.type===\"funnel\",cr=cu,cz=cF-1,cs=cE[cz].y,cA=cE[0].y,cg,co,ch,cd,cl=0,L=ce.yScale,cx=ce.isHollow,cb=ce.is2d,cC=0,cw=ct.renderer,ci={},ck=ce.streamlinedData,cf=cn.options.labelDistance,cy=0.8/cr,cq,cB=0,cm=cc,cj=ce.showLabelsAtCenter,A=3,Z=T(parseInt(ce.dataLabels.style.lineHeight),12),M=T(parseInt(ce.dataLabels.style.fontSize),10),cD=M*0.3;if(!ck){cg=cr/cA}else{cg=cr/(cA-cs)}co=cc;Q(cE,function(cG,cH){if(cH){if(cG.isSliced){cq=cG.x;if(cq>1&&!ci[cq]){ci[cq]=true;cB+=1}if(cq<cz){ci[cq+1]=true;cB+=1}}if(!ck){cC+=cd=cg*cE[cH].y;ch=cc*(1-(cC*cy))}else{if(ce.useSameSlantAngle==1){ch=cc*cG.y/cA}else{ch=cc*Math.sqrt(cG.y/cA)}cd=cg*(cE[cH-1].y-cG.y)}cG.shapeArgs={x:cm,y:cl,R1:co,R2:ch,h:cd,r3dFactor:L,isHollow:cx,gStr:\"point\",is2D:cb,renderer:cw,isFunnel:true};if(cj){cG.labelAline=\"center\";cG.labelX=cm;cG.labelY=(cb?cl:cl+(L*co))+(cd/2)+cD}else{cG.labelAline=\"left\";cG.labelX=cm+cf+ch+A;cG.labelY=cl+cD+cd}cl+=cd;co=ch}else{if(ce.useSameSlantAngle==1){ch=cc*cE[0].y/cA}else{ch=cc*Math.sqrt(cE[0].y/cA)}if(cG.labelWidht>ch*2){cG.labelAline=\"left\";cG.labelX=0}else{cG.labelAline=\"center\";cG.labelX=cm}cG.labelY=(cb?cl:cl-(L*co))-cD-A}cG.plotX=cm;cG.plotY=cl});cn._temp={slicingGapPosition:ci,noOfGap:cB}},drawPoints:function(){var cc=this,cb=cc.data,cd=cc.chart,M=cb.length-1,cf,Z=cc.options,ci=cc._temp||{},L=ci.slicingGapPosition,cj=ci.noOfGap,A=Z.SlicingDistance,ch,cg=A/2,ce=0;if(cj){ch=Math.min(cg*1.5,A/cj);ce=cg}for(;M>=0;M-=1){cf=cb[M];if(cf.shapeArgs){if(!cf.graphic){cf.graphic=bT(cf.shapeArgs)}cf.graphic.attr({color:cf.color,alpha:cf.alpha,\"stroke-width\":cf.borderWidth,stroke:cf.borderColor}).add(cc.group).shadow(cf.shadow.apply,undefined,cf.shadow);if(cj){if(ce){cf.graphic.attr({translateY:ce});cf._startTranslateY=ce}if(L[cf.x]){ce-=ch}}}}},drawDataLabels:function(){var ck=this,cw=ck.data,cm=ck.chart,cd=ck.options.dataLabels,cf=ck.dataLabelsGroup,cj,ch,cx,cl,co=cm.renderer,ci=ck.options.showLabelsAtCenter,cn={\"stroke-width\":cd.connectorWidth,stroke:cd.connectorColor},cb=Number(cd.style.lineHeight.split(/px/)[0]),Z=T(parseInt(cd.style.fontSize),10),ct=Z*0.3,L=cb*0.3,cr=cm.plotSizeY,cc={},cg,cv,cs,cy,cq,cp,M=3,ce=ck.options.labelDistance,A,cu;if(!cf){cf=ck.dataLabelsGroup=co.g(\"data-labels\").attr({visibility:ck.visible?ap:ah,zIndex:6}).translate(cm.plotLeft,cm.plotTop).add();if(cm.options.chart.hasScroll){cf.clip(ck.clipRect)}}for(cq=cw.length-1;cq>=0;cq-=1){cp=cw[cq];ch=cp.labelY;cj=cp.labelX;cx=cp.labelAline;if(!ci){cy=cs=ch-ct;if(cg!==undefined&&cv!==undefined&&cv-cs<cb){cy=cv-cb;ch=cy+ct}cg=cp.plotY;cv=cy;if((typeof cp.displayValue!==\"undefined\"&&cp.displayValue!==ay)&&!(cq===0&&ck.type==\"funnel\")){A=cj-M;cu=A-ce;cl=[by,cu,cs,bz,A,cy];cl=co.crispLine(cl,cd.connectorWidth);co.path(cl).attr(cn).add(cp.graphic||cf)}co.text(cp.displayValue,cj,ch).attr({align:cx}).css(cd.style).add(cp.graphic||cc.graphic||cf)}else{cp.dataLabelElement=co.text(cp.displayValue,cj,ch).attr({align:cx,translateY:cp._startTranslateY||0}).css(cd.style).add(cp.graphic?cf:cc.graphic)}cc=cp}},drawTracker:function(){var Z=this,ce=Z.chart,cd=ce.renderer,L,cg,cc=+new Date(),ch=Z.options.cursor,cb=ch&&{cursor:ch},M=Z.data.length-1,cf,A,ci;for(;M>=0;M-=1){cf=Z.data[M];cg=cf.tracker;if(cf.graphic){L=cf.graphic.Shapeargs.silhuette;if(cg){cg.attr(L)}else{if(cf.link!==undefined){A={cursor:\"pointer\",_cursor:\"hand\"}}else{A=cb}cf.tracker=cd.path(L).attr({isTracker:cc,fill:b4,visibility:Z.visible?ap:ah,zIndex:1,translateY:cf._startTranslateY||0}).on(O?\"touchstart\":\"mouseover\",(function(cj){return function(ck){ci=ck.relatedTarget||ck.fromElement;if(ce.hoverSeries!==Z&&X(ci,\"isTracker\")!==cc){Z.onMouseOver()}cj.onMouseOver()}})(cf)).on(\"mouseout\",function(cj){if(!Z.options.stickyTracking){ci=cj.relatedTarget||cj.toElement;if(X(ci,\"isTracker\")!==cc){Z.onMouseOut()}}}).css(A).add(ce.trackerGroup||cf.graphic)}}}},render:function(){var L=this,cb,M=L.chart,Z=M.renderer,A=L.options;if(!L.group){cb=L.group=Z.g(\"series\");cb.attr({visibility:L.visible?ap:ah,zIndex:A.zIndex}).translate(M.plotLeft,M.plotTop).add(M.seriesGroup)}this.drawPoints();this.drawTracker();this.drawDataLabels();if(L.visible){M.currentSeriesIndex=L.index;if(M.naviigator){placeNaviGator(M)}}if(L.options.animation&&L.animate){L.animate()}L.isDirty=false},animate:function(){var Z=this,M,A,cc,L=Z.data.length,cb=Z.options.animation;if(cb&&!b6(cb)){cb={}}for(M=0;M<L;M+=1){A=Z.data[M];cc=A&&A.graphic;if(cc){if(!cc.isAnimating){cc.isAnimating=true;cc.attr({alpha:0,strokeAlpha:0});cc.animate({alpha:A.alpha,strokeAlpha:bR(A.borderColor).get(\"a\")*100},cb)}}}this.animate=null}});a.funnel=aG;aj.pyramid=aK(aj.funnel,{states:{hover:{}}});var c=aL.extendClass(a.funnel,{type:\"pyramid\",translate:function(){var cn=this,cz=cn.data,cr=cn.chart,cc=cn.options,ct=cr.plotWidth,cs=cr.plotHeight,ch=ct/2,cq=cs,cf,co,cg,cb,cu=cr.renderer,cd=cc.valueSum,Z=cc.is2d,cy=cc.connectorWidth,cl=0,ck=0,cp,ci={},cw=0,cv=cz.length-1,L=cc.yScale,A=3,ce=cn.options.labelDistance,cj=cc.showLabelsAtCenter,M=T(parseInt(cc.dataLabels.style.fontSize),10),cx=M*0.3,cm=ch;cf=cq/cd;co=0;Q(cz,function(cA){if(cA.isSliced){cp=cA.x;if(cp&&!ci[cp]){ci[cp]=true;cw+=1}if(cp<cv){ci[cp+1]=true;cw+=1}}cl+=cA.y;cg=ch*cl/cd;cb=cf*cA.y;cA.shapeArgs={x:cm,y:ck,R1:co,R2:cg,h:cb,r3dFactor:L,gStr:\"point\",is2D:Z,renderer:cu};if(cj){cA.labelAline=\"center\";cA.labelX=cm;cA.labelY=(Z?ck:ck+(L*co))+(cb/2)+cx}else{cA.labelAline=\"left\";cA.labelX=cm+ce+(co+cg)/2+A;cA.labelY=ck+cx+(cb/2)}ck+=cb;cA.plotX=cm;cA.plotY=ck-cb/2;co=cg});cn._temp={slicingGapPosition:ci,noOfGap:cw}}});a.pyramid=c;aj.bulb=aK(aj.pie,{states:{hover:{}}});var bn=aL.extendClass(a.pie,{type:\"bulb\",drawPoints:function(){var cc=this,A,cb=cc.data,cd=cc.chart,ch=cc.options,M=cd.options.chart,cg,L,Z=M.gaugeRadius,cf=M.gaugeOriginX,ce=M.gaugeOriginY;cg=cb[0];L=cg.graphic;if(cg.y!==h&&!isNaN(cg.y)){A=cg.pointAttr[cg.selected?bu:al];A={r:Z,fill:cg.color,stroke:cg.borderColor,\"stroke-linecap\":\"round\",\"stroke-width\":cg.borderWidth};cg.plotX=cf;cg.plotY=ce;cg.radius=Z;if(L){L.animate({x:cf,y:ce,r:Z})}else{cg.graphic=cd.renderer.symbol(\"circle\",cf,ce,Z).attr(A).add(cc.chart.seriesGroup)}}},drawDataLabels:function(){var Z=this,cc=Z.data,cb=Z.chart,M=Z.options,cd=cb.options.chart,A=cc[0],ce=Z.dataLabelsGroup,L;if(!ce){ce=Z.dataLabelsGroup=cb.renderer.g(\"data-labels\").attr({visibility:Z.visible?ap:ah,zIndex:6}).add()}if(!cd.placeValuesInside){L=A.plotY+A.radius+cd.valuePadding+cd.labelLineHeight*1}else{L=(A.plotY+cd.labelLineHeight*1)-cd.valueTextHeight/2}if(A.y!==h&&!isNaN(A.y)&&(A.displayValue!==ay)){A.dataLabel=cb.renderer.text(A.displayValue,A.plotX,L).attr({align:\"center\"}).css(M.dataLabels.style).add(ce)}},animate:function(cc){var Z=this,M,A,cd,L=Z.data.length,cb=Z.options.animation;if(cb&&!b6(cb)){cb={}}A=Z.data[0];cd=A&&A.graphic;if(cd){if(!cd.isAnimating){cd.isAnimating=true;cd.attr({r:0});cd.animate({r:A.radius},cb)}}this.animate=null},realtimeUpdate:function(cg){var ce=this,ci=ce.chart,M=ci.options,cm=M.chart,cl=ce&&ce.data&&ce.data[0],cb={},Z,cn,cd=M.instanceAPI.numberFormatter,ch=M.instanceAPI.getPointColor,cf=M.instanceAPI.colorRangeGetter,cc,ck,A=cg.values||[],co=cg.labels||[],L=cg.toolTexts||[],cj=cg.showLabels||[];if(cl){if(A[0]){ck=cf.getColorObj(cd.getCleanValue(A[0]));cb=ck.isOnMeetPoint?ck.nextObj:ck.colorObj;if(!cb){cb=ck.nextObj||ck.prevObj}cn=cm.defaultColors[ck.index%M.defaultColLen];Z=ch(bY(cb.code,cn),cm.gaugeFillAlpha,cm.is3D);cl.graphic.attr({fill:Z})}if(cb&&cm.useColorNameAsValue){cc=bY(cb.name,cb.label,co[0])}else{cc=bY(co[0],cd.dataLabels(A[0]))}if(cc!==undefined){if(cj[0]==0){cc=ay}cl.dataLabel&&cl.dataLabel.attr({text:cc})}cc=bY(L[0],cd.dataLabels(A[0]));if(cc!==undefined){cl.toolText=cc;ci.tooltip&&ci.tooltip.refresh(cl,true)}}},drawGraph:function(){},render:function(){var L=this,cb,M=L.chart,Z=M.renderer,A=L.options;if(!L.group){cb=L.group=Z.g(\"series\");cb.attr({visibility:L.visible?ap:ah,zIndex:A.zIndex}).translate(M.plotLeft,M.plotTop).add(M.seriesGroup)}this.drawGraph();this.drawPoints();this.drawTracker();this.drawDataLabels();if(L.visible){M.currentSeriesIndex=L.index;if(M.naviigator){placeNaviGator(M)}}if(L.options.animation&&L.animate){L.animate()}L.isDirty=false}});a.bulb=bn;aj.led=aK(aj.bulb,{states:{hover:{}}});var w=(function(){var M={value:true},L=[],A=function(ch,cc){var cq,cp,ci=this,ce,cd,cj=this[\"_3dAttr\"],cf,cr;if(bv(ch)&&af(cc)){cq=ch;ch={};ch[cq]=cc}if(bv(ch)){if(M[ch]){ci=ci._3dAttr[ch]}else{ci=ci._attr(ch)}}else{for(cq in ch){cp=ch[cq];if(M[cq]){if(cp>=cj.minValue&&cp<=cj.maxValue){cj[cq]=cp;cf=(cp-cj.minValue)/cj.perLEDValueLength;cr=(Math.round(cf)*cj.sizeGapSum)-cj.ledGap;if(cj.LEDCase){var cn=ci.colorArr,cg=0,cm=cn.length,ck,cb,cl;for(cg=0;cg<cm;cg+=1){ck=cn[cg];if(ck.maxLEDNoFrac<=cf){cl=cj.LEDLowerFN}else{if(!cb){cl=undefined;cb=ck}else{cl=cj.LEDUpperFN}}if(cl){ck[cl]();if(cl===\"show\"){ck.attr(ck.oriShapeArg)}}}if(!cb){cb=ck}cb.show();cb.attr(cb.hoverShapeArg)}if(ci.darkShade){var co={};if(cj.isXChange){co.width=Math.ceil(cj.w-cr);if(cj.isIncrement){co.x=cj.x+cr}}else{co.height=Math.ceil(cj.h-cr);if(cj.isIncrement){co.y=cj.y+cr}}ci.darkShade.attr(co)}}}else{this[\"_attr\"](cq,cp)}}}return ci},Z=function(){};return function(cO,cN,cQ,c1,cH,cK,cS,cA,c2,co,cG,cM,ce,cq,cT,cP,cc,cd,c6,cJ){if(b6(cO)){cN=cO.y;cQ=cO.w;c1=cO.h;cH=cO.gStr;cK=cO.renderer;cS=cO.value;cA=cO.gaugeFillColor;c2=cO.gaugeBorderColor;co=cO.gaugeBorderAlpha;cG=cO.gaugeBorderThickness;cM=cO.colorRangeManager;ce=cO.minValue;cq=cO.maxValue;cT=cO.useSameFillColor;cP=cO.useSameFillBgColor;cc=cO.ledSize;cd=cO.ledGap;c6=cO.type;cO=cO.x}if(!(cS>=ce&&cS<=cq)){cS=ce}cA=bY(cA,\"FFFFFF\");c2=bY(c2,\"000000\").replace(K,aQ);co=T(co,1);cG=T(cG,2);var cg={x:cO,y:cN,w:cQ,h:c1,gStr:cH,renderer:cK,value:cS,gaugeFillColor:cA,gaugeBorderColor:c2,gaugeBorderAlpha:co,gaugeBorderThickness:cG,colorRangeManager:cM,minValue:ce,maxValue:cq,ledGap:cd,ledSize:cc,type:c6,useSameFillColor:cT,useSameFillBgColor:cP},cy=cK.g(cH);cy._attr=cy.attr;cy.attr=A;cy.shadow=cJ;cy._3dAttr=cg;var cx=cM.getColorRangeArr(ce,cq),cl=cO,ck=cN,cV=true,cB=true,cu=(c6===2||c6===4)?c1:cQ,cD=cd+cc,cX=cd/2,cZ=cX/2,cv=cu-cc,cR,cw=cq-ce,cC,cU,c3,c0=0,cF=cx.length,cn=0,cj,ci,cf,cL,cE,cI,cm=0,cY=0,cW=false,cb=\"show\",cz=\"show\",cr=cO,cp=cN,ch=cG/2,ct=cO-ch,c5=cN-ch,cs=cO+cQ+ch,c4=cN+c1+ch;if(cT){cY+=1;LEDLOwerFN=\"hide\"}if(cP){cY+=2;cz=\"hide\"}if(cv<0){cR=1;cc=cu}else{cR=parseInt(cv/cD,10)+1;cn=cv%cD;cc+=cn/cR;cD=cc+cd}cC=cw/cR;cy.colorArr=[];cU=[];if(c6===1){cr+=cD-(cd/2)}else{if(c6===2){cB=false;cp+=cD-(cd/2)}else{if(c6===3){cl=cO+cQ;cV=false;cr+=cD-(cd/2)}else{ck=cN+c1;cV=false;cB=false;cp+=cD-(cd/2)}}}cg.ledGap=cd;cg.ledSize=cc;cg.sizeGapSum=cD;cg.perLEDValueLength=cC;cg.isIncrement=cV;cg.isXChange=cB;cg.LEDLowerFN=cb,cg.LEDUpperFN=cz;cg.LEDCase=cY;if(cY){if(cY===3){cE={x:cO,y:cN,width:cQ,height:c1}}else{cW=true}}cy.border=cK.path([by,ct,c5,bz,cs,c5,cs,c4,ct,c4,bs]).attr({stroke:bC(c2,co),\"stroke-width\":cG}).add(cy);for(;c0<cF;c0+=1){c3=cx[c0];if(c3&&af(c3.maxvalue)){cj=Math.round((c3.maxvalue-ce)/cC);ci=cj-cm;cm=cj;if(ci>0){cL={r:0};if(cW){cE={}}cf=ci*cD;if(cB){cL.y=ck;cL.width=cf-cd;cL.height=c1;if(cV){cL.x=cl;cl+=cf}else{cL.x=cl-cL.width;cl-=cf}if(cW){cE.width=cL.x-cO;if((cV&&cY===1)||(!cV&&cY===2)){cE.x=cO;cE.width+=cL.width}else{cE.width=cQ-cE.width}}if(c0===0||c0===cF-1){cL.width+=cZ;if((cV&&c0===cF-1)||(!cV&&c0===0)){cL.x-=cZ;cL.width=Math.ceil(cL.width)}}else{cL.width+=cX;cL.x-=cZ}}else{cL.x=cl;cL.width=cQ;cL.height=cf-cd;if(cV){cL.y=ck;ck+=cf}else{cL.y=ck-cL.height;ck-=cf}if(cW){cE.height=cL.y-cN;if((cV&&cY===1)||(!cV&&cY===2)){cE.y=cN;cE.height+=cL.height}else{cE.height=c1-cE.height}}if(c0===0||c0===cF-1){cL.height+=cZ;if((cV&&c0===cF-1)||(!cV&&c0===0)){cL.y-=cZ;cL.height=Math.ceil(cL.height)}}else{cL.height+=cX;cL.y-=cZ}}cI=cK.rect(cL).attr({\"stroke-width\":0,fill:bC(bY(c3.code,\"000000\"),T(c3.alpha,100))}).add(cy);cI.oriShapeArg=cL;cI.hoverShapeArg=cE;cI.maxLEDNo=cj;cI.maxLEDNoFrac=(c3.maxvalue-ce)/cC;cy.colorArr.push(cI)}}}cy.darkShade=cK.rect(cO,cN,cQ,c1,0).attr({\"stroke-width\":0,fill:bC(cA,50)}).add(cy);for(c0=1;c0<cR;c0+=1){if(cB){cU.push(by,cr,cp,bz,cr,cp+c1);cr+=cD}else{cU.push(by,cr,cp,bz,cr+cQ,cp);cp+=cD}}cy.LEDGap=cK.path(cU).attr({stroke:bC(cA,100),\"stroke-width\":cd}).add(cy);cy.attr({value:cS});return cy}})();var aS=aL.extendClass(a.bulb,{type:\"led\",drawPoints:function(){var cc=this,cb=cc.data,cf=cc.chart,cj=cc.options,cd,M=cf.options.scale,ce=M.max,cg=M.min,ch=cb[0],L=this.chart.options.instanceAPI,ci=cc.group,Z=cf.options.chart,A=ch.y;ch.minValue=cg;ch.maxValue=ce;if(L.isHorizontal){cd=M.reverseScale?3:1}else{cd=M.reverseScale?4:2}ch.graphic=w(0,0,cf.plotSizeX,cf.plotSizeY,\"points-group\",cf.renderer,A,Z.gaugeFillColor,Z.gaugeBorderColor,Z.gaugeBorderAlpha,Z.gaugeBorderThickness,L.colorRangeGetter,cg,ce,Z.useSameFillColor,Z.useSameFillBgColor,Z.ledSize,Z.ledGap,cd,cj.shadow).add(ci);ch.graphic.border&&ch.graphic.border.shadow(cj.shadow,undefined,cj.shadow);b1(cf.plotWidth,cf.plotHeight,cf.renderer,cc,ci)},realtimeUpdate:function(ci){var Z=this,cg=Z&&Z.chart,cl=Z&&Z.data&&Z.data[0],ck=this.chart.options.instanceAPI.numberFormatter,M=cg.options.plotOptions.series.animation,L={duration:M?ci.interval:0},ch,cd,cm=ci.values||[],cb=ci.labels||[],cf=ci.showLabels||[],ce=ci.toolTexts||[],A=ck.getCleanValue(cm[0]);if(cl){var cj=cl.minValue,cc=cl.maxValue;if(A>=cj&&A<=cc){M&&$(cl.graphic).stop(true,true);cl.value=A;cl.graphic.animate({value:A},L);ch=bY(cb[0],ck.dataLabels(A),cl.dataLabel&&cl.dataLabel.textStr);if(cf[0]==0){ch=\"\"}cl.dataLabel&&(ch!==undefined)&&cl.dataLabel.attr({text:ch});cd=bY(ce[0],ck.dataLabels(A));if(cd!==undefined){cl.toolText=cd;cg.tooltip&&cg.tooltip.refresh(cl,true)}}}},drawDataLabels:function(){var ce=this,cd=ce.data,cj=ce.chart,cn=ce.options,cl=cd[0],cg=ce.dataLabelsGroup,M=cj.plotWidth,cm=cj.plotHeight,cc=cj.options.chart,Z=cc.valuePadding,cf=cn.dataLabels,A=cf.style,ck=parseInt(A.lineHeight),L=T(cc.yScaleRadius+(ck*0.37),0),ci;if(!cg){cg=ce.dataLabelsGroup=cj.renderer.g(\"data-labels\").translate(cj.plotLeft,cj.plotTop).attr({visibility:ce.visible?ap:ah,zIndex:6}).add()}ci=cm+Z+L;if(cl.y!==h&&!isNaN(cl.y)&&(cl.displayValue!==ay)){cl.dataLabel=cj.renderer.text(cl.displayValue,M/2,ci).attr({align:cf.align||o}).css(A).add(cg);var cb=cl.dataLabel.getBBox(),ch;if(cb.x<0){ch=cb.width-cj.plotLeft;if(cj.chartWidth<ch){ch=cj.chartWidth-cj.plotLeft}cl.dataLabel.attr({x:ch/2})}}},animate:function(cd){var L=this,A,ce,cb=L.options.animation;if(cb&&!b6(cb)){cb={}}if(!cd){A=L.data[0];var Z=A.minValue,cc=A.maxValue,M;ce=A&&A.graphic;if(ce){M=ce.attr(\"value\");ce.attr({value:Z});ce.animate({value:M},cb)}}},render:function(){var L=this,cb,M=L.chart,Z=M.renderer,A=L.options;if(!L.group){cb=L.group=Z.g(\"series\");cb.attr({visibility:L.visible?ap:ah,zIndex:A.zIndex}).translate(M.plotLeft,M.plotTop).add(M.seriesGroup)}this.drawPoints();this.drawTracker();this.drawDataLabels();if(L.visible){M.currentSeriesIndex=L.index;if(M.naviigator){placeNaviGator(M)}}if(L.options.animation&&L.animate){L.animate()}L.isDirty=false}});a.led=aS;aj.cylinder=aK(aj.bulb,{states:{hover:{}}});var b9=(function(){var M={fulidHRatio:true,color:true,alpha:true,fill:true},L=[],A=function(cb,cE){var cD,cq,cd=this,cs,cg,cC,cf=false,cm=false,co=this[\"_3dAttr\"];if(bv(cb)&&af(cE)){cD=cb;cb={};cb[cD]=cE}if(bv(cb)){if(M[cb]){cd=cd._3dAttr[cb]}else{cd=cd._attr(cb)}}else{for(cD in cb){cq=cb[cD];if(M[cD]){if(cD===\"fill\"){if(cq&&cq.linearGradient&&cq.stops&&cq.stops[0]){cq=cq.stops[0][1]}if(am.test(cq)){cC=bR(cq);cs=cC.get(\"hex\");cg=cC.get(\"a\")*100}else{if(cq&&cq.FCcolor){cs=cq.FCcolor.color.split(a2)[0];cg=cq.FCcolor.alpha.split(a2)[0]}else{if(ax.test(cq)){cs=cq.replace(K,aQ)}}}co.fluidColor=bY(cs,co.fluidColor,\"000000\");co.fluidAlpha=T(cg,co.fluidAlpha,100);cf=true}else{if(cD===\"color\"){co.fluidColor=bY(cq,co.fluidColor,\"000000\");cf=true}else{if(cD===\"alpha\"){co.fluidAlpha=T(cq,co.fluidAlpha,100);cf=true}else{if(cq>=0&&cq<=1){co.fulidHRatio=cq;cm=true}}}}if(cf){var cA=av(co.fluidColor,70),ch=aY(co.fluidColor,70),cv=av(co.conColor,80),cp=aY(co.conColor,80),cz;cg=co.fluidAlpha;cz=cg+a2+cg;cd.fluid.attr({\"stroke-width\":0,fill:{FCcolor:{gradientUnits:\"objectBoundingBox\",cx:0.5,cy:0,r:\"100%\",color:ch+a2+cA,alpha:cz,ratio:\"0,100\",radialGradient:true}}});cd.fluidTop.attr({\"stroke-width\":3,stroke:bC(ch,cg),fill:{FCcolor:{gradientUnits:\"objectBoundingBox\",cx:0.5,cy:0.7,r:\"100%\",color:ch+a2+cA,alpha:cz,ratio:\"0,100\",radialGradient:true}}});cd.btnBorderLight.attr({fill:{FCcolor:{color:cp+a2+cv+a2+cp+a2+cp+a2+cv+a2+cA+a2+cv+a2+cp,alpha:\"50,50,50,50,50,\"+(cg*0.7)+\",50,50\",ratio:\"0,15,0,12,0,15,43,15\",angle:0}}})}if(cm){var ck=co.x,cl=co.r,cj=co.fluidStroke,cn=cj/2,cB=co.h*co.fulidHRatio,cy=ck-cl,cx=ck+cl,cw=cy+cn,cu=cx-cn,ce=co.y+co.h,cc=ce-cB,ct=cl*co.r3dFactor,cr=cl-cn,ci=co.renderer.getArcPath;cd.fluid.attr({d:L.concat([by,cy,ce],ci(ck,ce,cy,ce,cx,ce,cl,ct,0,0),[bz,cx,cc],ci(ck,cc,cx,cc,cy,cc,cl,ct,1,0),[bs])});cd.fluidTop.attr({d:L.concat([by,cw,cc],ci(ck,cc,cw,cc,cu,cc,cr,ct,0,0),[bz,cu,cc],ci(ck,cc,cu,cc,cw,cc,cr,ct,0,0),[bs])})}}else{this[\"_attr\"](cD,cq)}}}return cd},Z=function(){};return function(cI,cH,cL,cN,cg,cA,cF,cS,ce,cv,cz,cM){if(b6(cI)){cH=cI.y;cL=cI.r;cN=cI.h;cg=cI.r3dFactor;cA=cI.gStr;cF=cI.renderer;cS=cI.fulidHRatio;ce=cI.conColor;cv=cI.conAlpha;cz=cI.fluidColor;cM=cI.fluidAlpha;cI=cI.x}cg=T(cg,0.15);if(!(cS>=0&&cS<=1)){cS=0}ce=bY(ce,\"FFFFFF\");cv=T(cv,30);cz=bY(cz,\"000000\");cM=T(cM,100);var ct=3,cu={x:cI,y:cH,r:cL,h:cN,r3dFactor:cg,renderer:cF,fulidHRatio:cS,conColor:ce,conAlpha:cv,fluidStroke:ct,fluidColor:cz,fluidAlpha:cM},cd=cF.getArcPath,cc=cF.g(cA);cc._attr=cc.attr;cc.attr=A;cc.shadow=Z;cc._3dAttr=cu;var cm=cL*cg,cG=ct/2,ck=cL-cG,cT=cH+cN,cr=cN*cS,cR=cT-cr,cs=cI-cL,cq=cI+cL,cp=cs+cG,co=cq-cG,cj=cs-2,ci=cq+2,cK=cL+2,cJ=cm+2,cE=cT+4,cD=cE+0.001,cC=cE+1,cb=av(ce,80),ch=av(ce,90),cB=aY(ce,80),cf=av(cz,70),cw=aY(cz,70),cy=cL*0.85,cn=cI-cy,cl=cI+cy,cx=Math.sqrt((1-((cy*cy)/(cL*cL)))*cm*cm),cQ=cH+cx,cP=cT+cx,cO=cH-1;cc.btnBorder=cF.path(L.concat([by,cj,cE],cd(cI,cE,cj,cE,ci,cE,cK,cJ,0,0),[bz,ci,cD],cd(cI,cD,ci,cD,cj,cD,cK,cJ,0,0),[bs])).attr({\"stroke-width\":4,stroke:bC(cb,80)}).add(cc);cc.btnBorder1=cF.path(L.concat([by,cs,cE],cd(cI,cE,cs,cE,cq,cE,cL,cm,0,0),[bz,cq,cD],cd(cI,cD,cq,cD,cs,cD,cL,cm,0,0),[bs])).attr({\"stroke-width\":4,stroke:bC(cb,50)}).add(cc);cc.btnBorderLight=cF.path(L.concat([by,cs,cT],cd(cI,cT,cs,cT,cq,cT,cL,cm,0,0),[bz,cq,cC],cd(cI,cC,cq,cC,cs,cC,cL,cm,1,0),[bs])).attr({\"stroke-width\":0,fill:{FCcolor:{color:cB+a2+cb+a2+cB+a2+cB+a2+cb+a2+cf+a2+cb+a2+cB,alpha:\"50,50,50,50,50,70,50,50\",ratio:\"0,15,0,12,0,15,43,15\",angle:0}}}).add(cc);cc.back=cF.path(L.concat([by,cs,cT],cd(cI,cT,cs,cT,cq,cT,cL,cm,1,0),[bz,cq,cH],cd(cI,cH,cq,cH,cs,cH,cL,cm,0,0),[bs])).attr({\"stroke-width\":1,stroke:bC(cb,50),fill:{FCcolor:{color:cB+a2+cb+a2+cB+a2+cb+a2+ch+a2+ch+a2+cb+a2+cB,alpha:\"30,30,30,30,30,30,30,30\",ratio:\"0,15,43,15,0,12,0,15\",angle:0}}}).add(cc);cc.fluid=cF.path(L.concat([by,cs,cT],cd(cI,cT,cs,cT,cq,cT,cL,cm,0,0),[bz,cq,cR],cd(cI,cR,cq,cR,cs,cR,cL,cm,1,0),[bs])).attr({\"stroke-width\":0,fill:{FCcolor:{gradientUnits:\"objectBoundingBox\",cx:0.5,cy:0,r:\"100%\",color:cw+a2+cf,alpha:\"100,100\",ratio:\"0,100\",radialGradient:true}}}).add(cc);cc.fluidTop=cF.path(L.concat([by,cp,cR],cd(cI,cR,cp,cR,co,cR,ck,cm,0,0),[bz,co,cR],cd(cI,cR,co,cR,cp,cR,ck,cm,0,0),[bs])).attr({\"stroke-width\":3,stroke:bC(cw,100),fill:{FCcolor:{gradientUnits:\"objectBoundingBox\",cx:0.5,cy:0.7,r:\"100%\",color:cw+a2+cf,alpha:\"100,100\",ratio:\"0,100\",radialGradient:true}}}).add(cc);cc.front=cF.path(L.concat([by,cs,cT],cd(cI,cT,cs,cT,cq,cT,cL,cm,0,0),[bz,cq,cH],cd(cI,cH,cq,cH,cs,cH,cL,cm,1,0),[bs])).attr({\"stroke-width\":1,stroke:bC(cb,50),fill:{FCcolor:{color:cB+a2+cb+a2+cB+a2+cB+a2+cb+a2+cB+a2+cb+a2+cB,alpha:\"30,30,30,30,30,30,30,30\",ratio:\"0,15,0,12,0,15,43,15\",angle:0}}}).add(cc);cc.frontLight=cF.path(L.concat([by,cs,cT],cd(cI,cT,cs,cT,cn,cP,cL,cm,0,0),[bz,cn,cQ],cd(cI,cH,cn,cQ,cs,cH,cL,cm,1,0),[bs])).attr({\"stroke-width\":0,stroke:\"#\"+cb,fill:{FCcolor:{color:cB+a2+cb,alpha:\"40,0\",ratio:\"0,100\",angle:0}}}).add(cc);cc.frontLight1=cF.path(L.concat([by,cl,cP],cd(cI,cT,cl,cP,cq,cT,cL,cm,0,0),[bz,cq,cH],cd(cI,cH,cq,cH,cl,cQ,cL,cm,1,0),[bs])).attr({\"stroke-width\":0,stroke:\"#\"+cb,fill:{FCcolor:{color:cB+a2+cb,alpha:\"40,0\",ratio:\"0,100\",angle:180}}}).add(cc);cc.cylinterTop=cF.path(L.concat([by,cs,cO],cd(cI,cO,cs,cO,cq,cO,cL,cm,0,0),[bz,cq,cO],cd(cI,cO,cq,cO,cs,cO,cL,cm,0,0),[bs])).attr({\"stroke-width\":2,stroke:bC(cb,40)}).add(cc);return cc}})(),v=aL.extendClass(a.bulb,{type:\"cylinder\",drawPoints:function(){var cc=this,cd,cq=cc.data,cg=cc.chart,ch=cg.renderer,cb=cg.plotHeight,cl=cg.plotWidth,cr=cg.options.scale,cm=cr.max,cf=cr.min,A=cc.options,ck=cg.options.chart,ce,L,Z,cn=A.gaugeRadius,cp=A.gaugeOriginX,co=A.gaugeOriginY,cj=cq[0],M=T(cj.y,cf),ci=(M-cf)/(cm-cf);cj.minValue=cf;cj.maxValue=cm;cj.fulidHRatio=ci;cj.graphic=b9(ck.cylRadius,0,ck.cylRadius,ck.cylHeight,ck.cylYScale,\"points-group\",cg.renderer,ci,ck.cylGlassColor,\"100\",ck.cylFillColor,\"100\").add(cc.group);b1(cg.plotWidth,cg.plotHeight,cg.renderer,cc,cc.group)},realtimeUpdate:function(ci){var M=this,cl=M&&M.data&&M.data[0],ch=M.chart,ck=ch.options.instanceAPI.numberFormatter,L=ch.options.plotOptions.series.animation,A={duration:L?ci.interval:0},cm=ci.values||[],cg,cd,cb=ci.labels||[],cf=ci.showLabels||[],ce=ci.toolTexts||[];if(cl){var cj=cl.minValue,cc=cl.maxValue,Z,cn;Z=ck.getCleanValue(cm[0]);cn=(Z-cj)/(cc-cj);if(Z===null||(!(cn<0||cn>1))){L&&$(cl.graphic).stop(true,true);cl.graphic.animate({fulidHRatio:cn},A);cg=bY(cb[0],ck.dataLabels(Z));cd=bY(ce[0],ck.dataLabels(Z));if(cd!==undefined){cl.toolText=cd;ch.tooltip&&ch.tooltip.refresh(cl,true)}if(cl.dataLabel&&cg!==undefined){if(cf[0]==0){cg=\"\"}cl.dataLabel.attr({text:cg})}}}},drawDataLabels:a.led.prototype.drawDataLabels,animate:function(Z){var L=this,A,cb,M=L.options.animation;if(M&&!b6(M)){M={}}A=L.data[0];cb=A&&A.graphic;if(cb){if(!cb.isAnimating){cb.isAnimating=true;cb.attr({fulidHRatio:0});cb.animate({fulidHRatio:A.fulidHRatio},M)}}this.animate=null},drawTracker:function(){},render:function(){var L=this,cb,M=L.chart,Z=M.renderer,A=L.options;if(!L.group){cb=L.group=Z.g(\"series\");cb.attr({visibility:L.visible?ap:ah,zIndex:A.zIndex}).translate(M.plotLeft,M.plotTop).add(M.seriesGroup)}this.drawPoints();this.drawTracker();this.drawDataLabels();if(L.visible){M.currentSeriesIndex=L.index;if(M.naviigator){placeNaviGator(M)}}if(L.options.animation&&L.animate){L.animate()}L.isDirty=false}});a.cylinder=v;aj.thermometer=aK(aj.bulb,{states:{hover:{}}});var N=(function(){var M={fulidHRatio:true,fluidColor:true,fluidAlpha:true,fluidFill:true},L=[],A=function(cf,cb){var cm,cl,cg=this,ce,cd,cn,cj=false,ck=false,ch=this[\"_3dAttr\"],cc=ch.renderer.getArcPath;if(bv(cf)&&af(cb)){cm=cf;cf={};cf[cm]=cb}if(bv(cf)){if(M[cf]){cg=cg._3dAttr[cf]}else{cg=cg._attr(cf)}}else{for(cm in cf){cl=cf[cm];if(M[cm]){if(cm===\"fluidFill\"){if(cl&&cl.linearGradient&&cl.stops&&cl.stops[0]){cl=cl.stops[0][1]}if(am.test(cl)){cn=bR(cl);ce=cn.get(\"hex\");cd=cn.get(\"a\")*100}else{if(cl&&cl.FCcolor){ce=cl.FCcolor.color.split(a2)[0];cd=cl.FCcolor.alpha.split(a2)[0]}else{if(ax.test(cl)){ce=cl.replace(K,aQ)}}}ch.fluidColor=bY(ce,ch.fluidColor,\"000000\");ch.fluidAlpha=T(cd,ch.fluidAlpha,100);cj=true}else{if(cm===\"fluidColor\"){ch.fluidColor=bY(cl,ch.fluidColor,\"000000\");cj=true}else{if(cm===\"fluidAlpha\"){ch.fluidAlpha=T(cl,ch.fluidAlpha,100);cj=true}else{if(cl>=0&&cl<=1){ch.fulidHRatio=cl;ck=true}}}}if(cj){var co=av(ch.fluidColor,ch.is2D?80:70);cg.fluid.attr({fill:bC(co,ch.fluidAlpha)});cg.fluidTop.attr({fill:bC(co,ch.fluidAlpha)});cg.topLight.attr({stroke:bC(co,ch.fluidAlpha*0.4)});cg.topLightBorder.attr({fill:{FCcolor:{color:co+a2+co,alpha:\"0,\"+(ch.fluidAlpha*0.3),ratio:\"0,80\",angle:90}}})}if(ck){var ci=ch.scaleY+(ch.h*(1-ch.fulidHRatio));cg.fluid.attr({d:ch.fluidPath.concat([bz,ch.lx2,ci,ch.lx1,ci,bs])});cg.fluidTop.attr({d:L.concat([by,ch.lx1,ci],cc(ch.x,ci,ch.lx1,ci,ch.lx2,ci,ch.lCylWidthHalf,1,1,0),[bs])})}}else{this[\"_attr\"](cm,cl)}}}return cg},Z=function(cb,cd,cc){this.border.shadow(cb,cd,cc)};return function(cB,cA,cD,cJ,cv,cz,cQ,ch,cN,cj,cu,cG,cC){if(b6(cB)){cA=cB.y;cD=cB.r;cJ=cB.h;cv=cB.gStr;cz=cB.renderer;cQ=cB.fulidHRatio;ch=cB.conColor;cN=cB.conBorderColor;cj=cB.conBorderThickness;cu=cB.fluidColor;cG=cB.fluidAlpha;cC=cB.is2D;cB=cB.x}if(!(cQ>=0&&cQ<=1)){cQ=0}ch=bY(ch,\"FFFFFF\");cN=bY(cN,\"#000000\");cj=T(cj,1);cu=bY(cu,\"000000\");cG=T(cG,100);var cq=3,cs={x:cB,y:cA,r:cD,h:cJ,renderer:cz,fulidHRatio:cQ,conColor:ch,conBorderColor:cN,conBorderThickness:cj,fluidStroke:cq,fluidColor:cu,is2D:cC,fluidAlpha:cG},ce=cz.getArcPath,cd=cz.g(cv);cd._attr=cd.attr;cd.attr=A;cd.shadow=Z;cd._3dAttr=cs;var cb=av(ch,80),cO=av(cu,cC?80:70),cw=aY(ch,80),cr=0.643,cg=0.766,cx=cD*cr,cf=cx,ci=cx*0.33,cI=cx-ci,cL=cD*cg,cp=cB-cx,co=cB+cx,cn=cB-cI,cm=cB+cI,cy=cA+cf,cS=cy+cJ,cR=cS+cL,cP=cA+ci,cM=cy+(cJ*(1-cQ)),cc=cx*0.9,cH=cD+cc-cx,cF=cB-cc,cE=cB+cc,ct=cR-Math.abs(Math.sqrt((cH*cH)-(cc*cc))),ck=cx*0.6,cl=parseInt(cB-ck,10),cK=cB+(cx/2);cs.fluidPath=L.concat([by,cF,ct],ce(cB,cR,cF,ct,cE,ct,cH,cH,0,1));cs.scaleY=cy;cs.lx1=cF;cs.lx2=cE;cs.lCylWidthHalf=cc;cd.topLight=cz.path([by,cF,cy,bz,cE,cy]).attr({\"stroke-width\":1,stroke:bC(cO,40)}).add(cd);cd.topLightBorder=cz.path([by,cF,cy,bz,cE,cy,cE,cP,cF,cP,bs]).attr({\"stroke-width\":0,fill:{FCcolor:{color:cO+a2+cO,alpha:\"40,0\",ratio:\"0,80\",radialGradient:true,gradientUnits:\"objectBoundingBox\",cx:0.5,cy:1,r:\"70%\"}}}).add(cd);cd.fluid=cz.path(cs.fluidPath.concat([bz,cE,cM,cF,cM,bs])).attr({\"stroke-width\":0,fill:bC(cO,cG)}).add(cd);cd.fluidTop=cz.path(L.concat([by,cF,cM],ce(cB,cM,cF,cM,cE,cM,cc,1,1,0),[bs])).attr({\"stroke-width\":0,fill:bC(cO,cG)}).add(cd);cd.border=cz.path(L.concat([by,cn,cA],ce(cn,cP,cn,cA,cp,cP,ci,ci,0,0),[bz,cp,cS],ce(cB,cR,cp,cS,co,cS,cD,cD,0,1),[bz,co,cP],ce(cm,cP,co,cP,cm,cA,ci,ci,0,0),[bs])).attr({\"stroke-width\":cj,stroke:cN}).add(cd);if(!cC){cd.bulbBorderLight=cz.path(L.concat([by,cp,cS],ce(cB,cR,cp,cS,co,cS,cD,cD,0,1),ce(cB,cR,co,cS,cp,cS,cD,cD,0,0),ce(cB,cR,cp,cS,co,cS,cD,cD,1,0),[bs])).attr({\"stroke-width\":0,stroke:\"#00FF00\",fill:{FCcolor:{gradientUnits:\"objectBoundingBox\",cx:0.5,cy:0.5,r:\"50%\",color:cb+a2+cw,alpha:\"0,50\",ratio:\"78,30\",radialGradient:true}}}).add(cd);cd.bulbTopLight=cz.path(L.concat([by,cp,cS],ce(cB,cR,cp,cS,co,cS,cD,cD,0,1),ce(cB,cR,co,cS,cp,cS,cD,cD,0,0),ce(cB,cR,cp,cS,co,cS,cD,cD,1,0),[bs])).attr({\"stroke-width\":0,fill:{FCcolor:{gradientUnits:\"objectBoundingBox\",cx:0.3,cy:0.1,r:\"100%\",color:cw+a2+cb,alpha:\"60,0\",ratio:\"0,30\",radialGradient:true}}}).add(cd);cd.bulbCenterLight=cz.path(L.concat([by,cp,cS],ce(cB,cR,cp,cS,co,cS,cD,cD,0,1),ce(cB,cR,co,cS,cp,cS,cD,cD,0,0),ce(cB,cR,cp,cS,co,cS,cD,cD,1,0),[bs])).attr({\"stroke-width\":0,fill:{FCcolor:{gradientUnits:\"objectBoundingBox\",cx:0.25,cy:0.7,r:\"100%\",color:cw+a2+cb,alpha:\"80,0\",ratio:\"0,70\",radialGradient:true}}}).add(cd);cd.cylLeftLight=cz.path(L.concat([by,cB,cA,bz,cn,cA],ce(cn,cP,cn,cA,cp,cP,ci,ci,0,0),[bz,cp,cS,cB,cS,bs])).attr({\"stroke-width\":0,fill:{FCcolor:{color:cw+a2+cb,alpha:\"50,0\",ratio:\"0,80\",angle:0}}}).add(cd);cd.cylRightLight=cz.path(L.concat([by,cp,cA,bz,cm,cA],ce(cm,cP,cm,cA,co,cP,ci,ci,1,0),[bz,co,cS,cp,cS,bs])).attr({\"stroke-width\":0,fill:{FCcolor:{color:cw+a2+cb+a2+cb,alpha:\"50,0, 0\",ratio:\"0,40,60\",angle:180}}}).add(cd);cd.cylLeftLight1=cz.path([by,cl,cP,bz,cp,cP,cp,cS,cl,cS,bs]).attr({\"stroke-width\":0,fill:{FCcolor:{color:cw+a2+cb,alpha:\"60,0\",ratio:\"0,100\",angle:180}}}).add(cd);cd.cylRightLight1=cz.path([by,cl-0.01,cP,bz,cK,cP,cK,cS,cl-0.01,cS,bs]).attr({\"stroke-width\":0,fill:{FCcolor:{color:cw+a2+cb,alpha:\"60,0\",ratio:\"0,100\",angle:0}}}).add(cd)}return cd}})();var br=aL.extendClass(a.cylinder,{type:\"thermometer\",drawPoints:function(){var ce=this,cp=ce.data,cg=ce.chart,ch=cg.renderer,cb=cg.plotHeight,cm=cg.plotWidth,cq=cg.options.scale,cn=cq.max,cf=cq.min,A=ce.options,cl=cg.options.chart,cj=cp[0],M=T(cj.y,cf),Z=0.643,co=cl.thmBulbRadius,cd=co*Z,ci=(M-cf)/(cn-cf),cc=bR(cj.color),ck=cc.get(\"hex\").replace(K,ay),L=cc.get(\"a\")*100;cj.minValue=cf;cj.maxValue=cn;cj.fulidHRatio=ci;cj.graphic=N(0+cd,0-cd,co,cg.plotHeight,\"points-group\",ch,ci,cl.thmGlassColor,cl.gaugeBorderColor,cl.gaugeBorderThickness,ck,L,cl.use3DLighting).add(ce.group);cj.graphic.shadow(A.shadow,false,A.shadow);b1(cg.plotWidth,cg.plotHeight,cg.renderer,ce,ce.group)},drawDataLabels:a.led.prototype.drawDataLabels,animate:function(Z){var L=this,A,cb,M=L.options.animation;if(M&&!b6(M)){M={}}A=L.data[0];cb=A&&A.graphic;if(cb){if(!cb.isAnimating){cb.isAnimating=true;cb.attr({fulidHRatio:0});cb.animate({fulidHRatio:A.fulidHRatio},M)}}this.animate=null},render:function(){var L=this,cb,M=L.chart,Z=M.renderer,A=L.options;if(!L.group){cb=L.group=Z.g(\"series\");cb.attr({visibility:L.visible?ap:ah,zIndex:A.zIndex}).translate(M.plotLeft,M.plotTop).add(M.seriesGroup)}this.drawPoints();this.drawTracker();this.drawDataLabels();if(L.visible){M.currentSeriesIndex=L.index;if(M.naviigator){placeNaviGator(M)}}if(L.options.animation&&L.animate){L.animate()}L.isDirty=false}});a.thermometer=br;aj.lineargauge=aK(aj.bulb,{states:{hover:{}}});var b2=aL.extendClass(a.bulb,{type:\"lineargauge\",drawTracker:function(){var ce=this,cg=ce.chart,cn=ce.data,co=cg.options.scale,cc=(co.max-co.min)/cg.plotWidth,cl={},ch=cg.renderer,ck,cd,A=+new Date(),Z=ce.options,cb=Z.cursor,cf=cb&&{cursor:cb},M;if(cg.options.chart.hasScroll){cg.trackerGroup.clip(ce.clipRect)}Q(ce.data,function(cq){cd=cq.tracker;var cr=cq.errorTracker,cp=cq.errorValue,cu,ct;ck=cq.trackerArgs||cq.shapeArgs||{};delete ck.strokeWidth;if(cd){cd.attr(ck)}else{if(cq.link!==undefined){var cs={cursor:\"pointer\",_cursor:\"hand\"}}cq.tracker=ch[cq.shapeType]&&ch[cq.shapeType](ck).attr({isTracker:A,fill:b4,visibility:ce.visible?ap:ah,zIndex:Z.zIndex||1}).on(O?\"touchstart\":\"mouseover\",function(cv){M=cv.relatedTarget||cv.fromElement;if(cg.hoverSeries!==ce&&X(M,\"isTracker\")!==A){ce.onMouseOver()}cq.onMouseOver()}).on(\"mouseout\",function(cv){if(!Z.stickyTracking){M=cv.relatedTarget||cv.toElement;if(X(M,\"isTracker\")!==A){ce.onMouseOut()}}}).css(cs).add(cq.group||cg.trackerGroup)}if(cp){cu=cq.errorPath;if(cr){cr.attr({d:cu})}else{ct={series:ce,chart:cg,id:cq.id,label:cq.label,options:cq.options,svgElm:cq.svgElm,toolText:cq.errorValue+\"\",getLabelConfig:cq.getLabelConfig};cq.errorTracker=ch.path(cu).attr({\"stroke-width\":b7(ce.options.errorBarThickness,10),stroke:b4,isTracker:A,fill:b4,visibility:ce.visible?ap:ah,zIndex:1}).on(O?\"touchstart\":\"mouseover\",(function(cv,cw){return function(cy){var cz=cw.plotLeft,cx=cw.plotTop;cv.tooltipPos=[bY(cy.layerX,cy.x)-cz+20,bY(cy.layerY,cy.y)-cx-15];cw.tooltip.refresh(cv)}}(ct,cg))).on(\"mousemove\",(function(cv,cw){return function(cy){var cz=cw.plotLeft,cx=cw.plotTop;cv.tooltipPos=[bY(cy.layerX,cy.x)-cz+20,bY(cy.layerY,cy.y)-cx-15];cw.tooltip.refresh(cv)}}(ct,cg))).on(\"mouseout\",(function(cv){return function(){cv.tooltip.hide()}}(cg))).css(cs).add(cq.group||cg.trackerGroup)}}});var L={pageX:0,pageY:0},ci=function(cu){var cr=cu.type===\"dragend\",cq=cu.data,cv,cp=(O&&p(cu))||L,ct=ce.chart&&ce.chart.options&&ce.chart.options.instanceAPI&&ce.chart.options.instanceAPI.chartInstance;if(cr){cv=ct&&ct.jsVars;cv&&(cv._rtLastUpdatedData=ct.getDataJSON());q.raiseEvent(\"RealTimeUpdateComplete\",{data:\"&value=\"+cq.updatedValStr,prevData:cl.values,source:\"editMode\",url:null},ct);try{window.FC_ChartUpdated&&window.FC_ChartUpdated(ct.id)}catch(cs){setTimeout(function(){throw(cs)},1)}cg.tooltip&&cg.tooltip.block(false)&&cg.tooltip.refresh(cq,true)}else{cl=ct.getDataJSON();cq.dragStartX=cu.pageX||cp.pageX;cq.dragStartY=cu.pageY||cp.pageY;cg.tooltip&&cg.tooltip.block(true)}},cm=function(cw){var cq=cw.data,cp=(O&&p(cw))||L,cu=cq.dragStartX-(cw.pageX||cp.pageX),cs=T(cq.value,cq.y,co.min),ct=cs-(cu*cc),cv=0,cr=[];if(ct<co.min){ct=co.min}else{if(ct>co.max){ct=co.max}}for(;cv<cq.index;cv+=1){cr.push(\"\")}cr.push(ct);if(cs!==ct&&ce.realtimeUpdate({values:cr})){cq.updatedValStr=cr.join(\"|\");cq.dragStartX=(cw.pageX||cp.pageX)}},cj=(cn&&cn.length)||0;while(cj--){point=cn[cj];if(point.editable===\"1\"&&point.tracker){point.index=cj;point.tracker.css({cursor:\"pointer\",_cursor:\"hand\"});F(point.tracker.element,\"dragstart dragend\",ci,point);F(point.tracker.element,\"drag\",cm,point)}}},realtimeUpdate:function(cj,cb){if(cj===this.lastUpdatedObj){return false}var ci=this,ck=ci.chart,cy=ck.options.scale,cq=ck.options.chart,ce=ck.options.series&&ck.options.series[0]&&ck.options.series[0].data,cu=ck.options.plotOptions.series.animation,L={duration:cu?cj.interval:0},cx=ci&&ci.data,cp,cs=0,ch=this.chart.options.instanceAPI.numberFormatter,cf,cc,A,cv=ck.plotWidth,cd=ck.plotHeight,ct=cq.gaugeType,co=cy.min,cr=cy.max,cg={1:function(cz){return{x:(cz-co)*cv/(cr-co)}},2:function(cz){return{y:(cz-co)*cd/(cr-co)}},3:function(cz){return{x:(cr-cz)*cv/(cr-co)}},4:function(cz){return{y:(cr-cz)*cd/(cr-co)}}},Z=cj.values||[],cw=cj.labels||[],M=cj.toolTexts||[],cl=cj.showLabels||[],cn=Math.min(cx.length,Z.length),cm=false;if(cb){cp=cx[cb.index];cc=ch.getCleanValue(Z[0]);if(cp&&(cc===null||(cc<=cr&&cc>=co))){if(cc!==null){cp.value=cc;A=cg[ct](cc);cu&&$(cp.graphic).stop(true,true);cp.graphic.animate(A,L);if(cp.tracker){cu&&$(cp.tracker).stop(true,true);cp.tracker.animate(A,L);if(A.x!==undefined){cp.plotX=A.x}if(A.y!==undefined){cp.plotY=A.y}}cm=true}cf=bY(cw[0],ch.dataLabels(cc));if(cp.dataLabel&&cf!==undefined){cf=(cl[0]==0)?\"\":cf;cu&&$(cp.dataLabel).stop(true,true);cp.dataLabel.animate(A,L);cp.dataLabel.attr({text:cf});cm=true}cf=bY(M[0],((ce&&ce[cb.index]&&ce[cb.index].isLabelString&&ce[cb.index].toolText)||undefined),ch.dataLabels(cc));if(cf!==undefined){cp.toolText=cf;ck.tooltip&&ck.tooltip.refresh(cp,true);cm=true}}}else{for(;cs<cn;cs+=1){cp=cx[cs];cc=ch.getCleanValue(Z[cs]);if(cp&&(cc===null||(cc<=cr&&cc>=co))){if(cc!==null){cp.value=cc;A=cg[ct](cc);cu&&$(cp.graphic).stop(true,true);cp.graphic.animate(A,L);if(cp.tracker){cu&&$(cp.tracker).stop(true,true);cp.tracker.animate(A,L);if(A.x!==undefined){cp.plotX=A.x}if(A.y!==undefined){cp.plotY=A.y}}cm=true}cf=bY(cw[cs],ch.dataLabels(cc));if(cp.dataLabel&&cf!==undefined){cf=(cl[cs]==0)?\"\":cf;cu&&$(cp.dataLabel).stop(true,true);cp.dataLabel.animate(A,L);cp.dataLabel.attr({text:cf});cm=true}cf=bY(M[cs],((ce&&ce[cs]&&ce[cs].isLabelString&&ce[cs].toolText)||undefined),ch.dataLabels(cc));if(cf!==undefined){cp.toolText=cf;ck.tooltip&&ck.tooltip.refresh(cp,true);cm=true}}}this.lastUpdatedObj=cj}return cm},translate:function(){var L=this,cq=L.data,cb=L.chart,cj=cb.options&&cb.options.chart,cr=cb.options.scale,A=(cr&&cr.trendPoint)||[],cn=cb.options.instanceAPI,cd=cb.plotHeight,cf=cb.plotWidth,cm,ci=cr.min,ck=cr.max,M=ck-ci,cl=cq.length,ce=0,Z=0,cp=0,co=0,cg,ch,cc=ci;if(cn.isHorizontal){ce=cf/M;co=cj.pointerOnOpp?cd:0;cm=cr.reverseScale?3:1}else{Z=cd/M;cp=cj.pointerOnOpp?cf:0;cm=cr.reverseScale?4:2}if(cr.reverseScale){ce=-ce;Z=-Z;cc=ck}L.gaugeType=cm;L.valueTranslator=function(cs){cs=T(cs,cc)-cc;return{x:cs*ce+cp,y:cs*Z+co}};while(cl--){ch=cq[cl];cg=T(ch.y,cc)-cc;ch.plotX=ch.origX=cg*ce+cp;ch.plotY=ch.origY=cg*Z+co}cl=A.length;while(cl--){ch=A[cl];cg=ch.startValue;ch.plotX=ch.origX=cg*ce+cp;ch.plotY=ch.origY=cg*Z+co}},drawPoints:function(){var cd=this,cp=cd.data,cn=cp.length,ch=cd.chart,cq=ch.options.scale,cm=ch.options.chart,ci=ch.renderer,cf=cm.showPointerShadow,A=cm.showShadow,cc=(cq&&cq.trendPoint)||[],cj,ck,cl,cb,co=cd.gaugeType,L={right:0,top:0.5,left:1,bottom:1.5},ce,Z,cg=function(){var cr=this;return{x:cr.category,y:cr.y,series:cr.series,point:cr,percentage:cr.percentage,total:cr.total||cr.stackTotal}},M=cm.pointerOnOpp;if(co===1){ce=(M)?\"top\":\"bottom\"}else{if(co===2){ce=M?\"left\":\"right\"}else{if(co===3){ce=(M)?\"top\":\"bottom\"}else{ce=M?\"left\":\"right\"}}}if(cd.dataById===undefined){cd.dataById={}}while(cn--){cj=cp[cn];cl=L[ce]*Math.PI;cj.shapeType=\"symbol\";cj.shapeArgs={symbol:\"poly_\"+cj.sides,x:cj.plotX,y:cj.plotY,radius:cj.radius,options:{startAngle:cl}};cj=cp[cn];if(cj.id!==undefined){cd.dataById[cj.id]={index:cn,point:cj}}ck=cf?{opacity:(Math.max(cj.bgalpha,cj.borderalpha)/100)}:null;cj.graphic=ci[cj.shapeType](cj.shapeArgs).attr({fill:cj.color,stroke:cj.borderColor,\"stroke-width\":cj.borderWidth}).add(cd.group).shadow(ck,undefined,ck)}cn=cc.length;while(cn--){cj=cc[cn];if(cj.useMarker){if(cj.showOnTop){ce=\"bottom\";cb=0}else{ce=\"top\";cb=ch.plotHeight}cl=L[ce]*Math.PI;cj.shapeType=\"symbol\";cj.shapeArgs={symbol:\"poly_3\",x:cj.plotX,y:cb,radius:cj.markerRadius,options:{startAngle:cl}};ck={apply:A,opacity:1};cj.graphic=Z=ci[cj.shapeType](cj.shapeArgs).attr({fill:cj.markerColor,stroke:cj.markerBorderColor,\"stroke-width\":1}).add(cd.group).shadow(ck.apply,undefined,ck);if(cj.markerToolText!==\"\"){(function(cs){var cr={series:{},chart:ch,id:cj.id,label:this.label,options:this.options,svgElm:this.svgElm,toolText:cs,getLabelConfig:cg};Z.on(\"mouseover\",function(cu){var cv=ch.plotLeft,ct=ch.plotTop;cr.tooltipPos=[bY(cu.layerX,cu.x)-cv+20,bY(cu.layerY,cu.y)-ct-15];ch.tooltip.refresh(cr)}).on(\"mouseout\",function(ct){ch.tooltip.hide()}).on(\"mousemove\",function(cu){var cv=ch.plotLeft,ct=ch.plotTop;cr.tooltipPos=[bY(cu.layerX,cu.x)-cv+20,bY(cu.layerY,cu.y)-ct-15];ch.tooltip.refresh(cr)})})(cj.markerToolText)}}}},drawGraph:function(){var cb=this,cF=cb.chart,cE=cF.options.chart,cv=cF.options.scale,M=cF.options.instanceAPI,Z=cb.gaugeType,L=cF.plotHeight,A=cF.plotWidth,cG=cv.min,cp=cv.max,ch=M.colorRangeGetter.getColorRangeArr(cG,cp),ck=(cv&&cv.trendPoint)||[],cu=cE.colorRangeFillMix,cz=cE.colorRangeFillRatio,cC=cE.colorRangeBorderColor,ce=cE.colorRangeBorderAlpha,ct=cE.colorRangeBorderThickness,cy=cF.renderer,cj=cE.showShadow,cx,cB,cm,cc,ci,cl,cq,cD,cw,cs,cd=M.colorM,co=cb.group;if(Z===1){ci=function(cI,cJ){return{x:((cI*A/(cp-cG))),y:0,width:(cJ-cI)*A/(cp-cG),height:L}};cl=270}else{if(Z===2){ci=function(cI,cJ){return{x:0,y:(cI*L/(cp-cG)),width:A,height:(cJ-cI)*L/(cp-cG)}};cl=180}else{if(Z===3){ci=function(cI,cJ){return{x:A-(cJ*A/(cp-cG)),y:0,width:(cJ-cI)*A/(cp-cG),height:L}};cl=270}else{ci=function(cI,cJ){return{x:0,y:L-(cJ*L/(cp-cG)),width:A,height:(cJ-cI)*L/(cp-cG)}};cl=180}}}var cr=cy.g(\"range\").add(co);cr.outerRect=cy.rect(0,0,A,L,0).add(cr);for(cB=0,cm=ch.length;cB<cm;cB+=1){cD=ch[cB],cs=ci((cD.minvalue-cG),(cD.maxvalue-cG));cD.x=cs.x;cD.y=cs.y;cD.width=cs.width;cD.height=cs.height;cq=cD.code;cw=bC(bx(cq,cC),ce);cx=cj?(Math.max(cD.alpha,ce)/100):null;var cn=cd.parseColorMix(cD.code,cu),cA=cd.parseAlphaList(cD.alpha,cn.length),cH=T(cD.borderAlpha,ce),cg=cA.split(a2);cg=b7.apply(Math,cg);cg=b7(ct&&cH||0,cg);cr[\"colorBand\"+cB]=cy.rect(cs.x,cs.y,cs.width,cs.height,0).attr({\"stroke-width\":ct,stroke:cw,fill:{FCcolor:{color:cn.toString(),ratio:cz,alpha:cA,angle:cl}}}).add(cr).shadow(cx,undefined,{opacity:cg/100})}for(cB=0,cm=ck.length;cB<cm;cB+=1){cc=ck[cB],cs=ci((cc.startValue-cG),(cc.endValue-cG));if(cc.isZone){cr[\"trendZone\"+cB]=cy.rect(cs.x,cs.y,cs.width,cs.height,0).attr({fill:{FCcolor:{color:cc.color,alpha:cc.alpha}}}).add(cr)}else{var cf=cy.crispLine([by,cs.x,cs.y,bz,cs.x,(cs.y+cs.height)],cc.thickness);cr[\"trendLine\"+cB]=cy.path(cf).attr({stroke:bC(cc.color,cc.alpha),\"stroke-width\":cc.thickness,dashstyle:cc.dashStyle}).add(cr)}}b1(cF.plotWidth,cF.plotHeight,cF.renderer,cb,co)},drawDataLabels:function(){var cg=this,cI=cg.data,cK=cg.chart,cs=cg.options,cx=cK.options.scale,cJ=cK.options.chart,cb=cK.options.instanceAPI,ck=cg.dataLabelsGroup,cL=cx.min,cr=cx.max,cc=cg.gaugeType,cj=cb.colorRangeGetter.getColorRangeArr(cL,cr),cd=cb.numberFormatter,cz=cJ.colorRangeStyle.style||{},cH,Z=cK.plotHeight,A=cK.plotWidth,ct=(cx&&cx.trendPoint)||[],cn=cJ.pointerOnOpp,cq=cJ.valueInsideGauge,cf=cJ.showGaugeLabels,cE=cs.dataLabels.style,cB,cF,cp,cD,cA,cG,cC,ci,cy=cK.renderer.smartLabel,cl,M,co,cw,cv,cu=T(parseInt(cE.fontHeight,10),parseInt(cE.lineHeight,10),12),ch=(cJ.valuePadding+(cu*0.5)),cm=4,L=cJ.valuePadding,ce=ch;ch=(cq===cn)?ch:ch+(cu/2);cy.setStyle(cE);M=cy.getOriSize(\"W\");co=M.width;if(!ck){ck=cg.dataLabelsGroup=cK.renderer.g(\"data-labels\").attr({visibility:cg.visible?ap:ah,zIndex:6}).add(cg.group)}if(cc===1){cA=function(cM,cN,cO){var cP;if(cO){cP=cN?(Z-ch):(Z+ch)}else{cP=cN?ch:-ch}return{x:(cM*A/(cr-cL)),y:cP,align:\"center\"}};cG=function(cM,cN){return{x:(((cM-cL)+(cN-cM)/2)*A/(cr-cL)),y:(Z/2),width:(cN-cM)*A/(cr-cL),height:Z}}}else{if(cc===2){cA=function(cN,cO,cP){var cM,cQ;if(cP){if(cO){cQ=\"right\";cM=A-ch}else{cQ=\"left\";cM=A+ch}}else{if(cO){cQ=\"left\";cM=ch}else{cQ=\"right\";cM=-ch}}return{x:cM,y:(cN*Z/(cr-cL)),align:cQ}};cG=function(cM,cN){return{y:(((cM-cL)+(cN-cM)/2)*Z/(cr-cL)),x:(A/2),height:(cN-cM)*Z/(cr-cL),width:A}}}else{if(cc===3){cA=function(cM,cN,cO){var cP;if(cO){cP=cN?Z-ch:Z+ch}else{cP=cN?ch:-ch}return{x:A-(cM*A/(cr-cL)),y:cP,align:\"center\"}};cG=function(cM,cN){return{x:A-(((cM-cL)+(cN-cM)/2)*A/(cr-cL)),y:(Z/2),width:(cN-cM)*A/(cr-cL),height:Z}}}else{cA=function(cN,cO,cP){var cM,cQ;if(cP){if(cO){cQ=\"right\";cM=A-ch}else{cQ=\"left\";cM=A+ch}}else{if(cO){cQ=\"left\";cM=ch}else{cQ=\"right\";cM=-ch}}return{x:cM,y:Z-(cN*Z/(cr-cL)),align:cQ}};cG=function(cM,cN){return{y:Z-(((cM-cL)+(cN-cM)/2)*Z/(cr-cL)),x:(A/2),height:(cN-cM)*Z/(cr-cL),width:A}}}}}if(cI){for(cF=0,cp=cI.length;cF<cp;cF+=1){cD=cI[cF];if(cD.showvalue!=0&&cD.displayValue!==ay){cC=cA((cD.y-cL),cq,cn);cD.dataLabel=cK.renderer.text(cD.displayValue,cC.x,cC.y).attr({align:cC.align}).css(cE).add(ck)}}}cE=cz||{};cy.setStyle(cE);if(cj&&cf){for(cF=0,cp=cj.length;cF<cp;cF+=1){cH=cj[cF];cB=bY(cH.label,cH.name);if(af(cB)){cC=cG(cH.minvalue,cH.maxvalue);if((cC.width-cm)>co&&(cC.height-cm)>cu){cl=cy.getSmartText(cB,cC.width-cm,cC.height-cm)}else{cl=cy.getSmartText(cB,cC.width,cC.height)}cK.renderer.text(cl.text,cC.x,cC.y+(cu/4)-((cl.height-cu)/2)).attr({align:\"center\"}).css(cE).add(ck)}}}if(ct){for(cF=0,cp=ct.length;cF<cp;cF+=1){ci=ct[cF];cC=cA(ci.startValue,0,!ci.showOnTop);cv=ci.showOnTop?-L:Z+ce;cw=ci.isZone?cG(ci.startValue,ci.endValue).x:cC.x;ci.dataLabel=cK.renderer.text(bY(ci.displayValue,cd.dataLabels(ci.startValue)),cw,cv).attr({align:cC.align}).css(cE).add(ck)}}},animate:function(cm){var cf=this,cg=cf.chart,cb=cg.options.chart,cc=cf.gaugeType,Z=cb.animation,ce=(cg.series&&cg.series[0]&&cg.series[0].data)||[],ch=cg.plotHeight,cl=cg.plotWidth,cd=0,L=ce.length,cj,A,cn,ck=(cc===1||cc===3)?\"x\":\"y\",ci={},M={};if(Z&&!b6(Z)){Z={}}if(cc===\"3\"){M[ck]=cl}else{if(cc===\"4\"){M[ck]=ch}else{M[ck]=0}}for(;cd<L;cd+=1){cj=cf.data[cd];A=cj&&cj.graphic;ci[ck]=cj.shapeArgs[ck];if(A){if(!A.isAnimating){A.isAnimating=true;A.attr(M);A.animate(ci,Z)}}cn=cj&&cj.dataLabel;if(cn){if(!cn.isAnimating){cn.isAnimating=true;cn.attr(M);cn.animate(ci,Z)}}}this.animate=null}});a.lineargauge=b2;aj.bullet=aK(aj.bulb,{states:{hover:{}}});var b=aL.extendClass(a.lineargauge,{type:\"bullet\",translate:function(){var A=this,cp=A.data,Z=A.chart,ci=Z.options&&Z.options.chart,cq=Z.options.scale,cm=Z.options.instanceAPI,cc=Z.plotHeight,ce=Z.plotWidth,cl,ch=cq.min,cj=cq.max,L=cj-ch,ck=cp.length,cd=0,M=0,co=0,cn=0,cf,cg,cb=ch;if(cm.isHorizontal){cd=ce/L;cn=cc/2;cl=cq.reverseScale?3:1}else{M=cc/L;co=ce/2;cl=cq.reverseScale?4:2}if(cq.reverseScale){cd=-cd;M=-M;cb=cj}A.gaugeType=cl;A.valueTranslator=function(cr){cr=T(cr,cb)-cb;return{x:cr*cd+co,y:cr*M+cn}};while(ck--){cg=cp[ck];cf=T(cg.y,cb)-cb;cg.plotX=cg.origX=cf*cd+co;cg.plotY=cg.origY=cf*M+cn}},drawPoints:function(){var ci=this,cA=ci.data,cl=ci.chart,cn=cl.renderer,cc=cl.plotHeight,cv=cl.plotWidth,cB=cl.options.scale,cw=cB.max,ck=cB.min,co=cA[0],cz=cA[1],cm,Z,cu,cs,A,L,cr,cg,ce,cd,cj=cz.borderWidth,cy=10,ct=cl.options.instanceAPI,cq,cp,cx,M,cf,ch=ct.isHorizontal,cb;cm=Math.min(Math.max(ck,0),cw);cb=ci.valueTranslator(cm);if(af(co.y)){if(co.plotAsDot){cr=cg=(ch?cc:cv)*(co.plotFillPercent/100);cu=co.plotX-(cg/2);cs=co.plotY-(cr/2);if(ch){co.animInitAttr={x:cb.x};co.animAttr={x:cu}}else{co.animInitAttr={y:cb.y};co.animAttr={y:cs}}}else{cu=Math.min(co.plotX,cb.x);cs=Math.min(co.plotY,cb.y);cr=Math.abs(co.plotY-cb.y);cg=Math.abs(co.plotX-cb.x);if(ch){co.animInitAttr={x:cb.x,width:0};co.animAttr={x:cu,width:cg};cr=cc*(co.plotFillPercent/100);cs-=cr/2}else{co.animInitAttr={y:cb.y,height:0};co.animAttr={y:cs,height:cr};cg=cv*(co.plotFillPercent/100);cu-=cg/2}}co.shapeType=\"rect\";co.shapeArgs={x:cu,y:cs,height:cr,width:cg,endY:A,r:0};co.graphic=cn[co.shapeType](co.shapeArgs).attr({fill:co.color,stroke:co.borderColor,\"stroke-width\":co.borderWidth}).add(ci.group)}if(af(cz.y)){if(ch){cx=cc*cz.targetFillPercent/100,cf=cx/2;L=cu=cz.plotX;cp=cs=cz.plotY-cf;A=cz.plotY+cf;cd=cx;ce=cj;cq=cu-(cj/2);M=[cu+cj,cz.plotY]}else{cx=cv*cz.targetFillPercent/100,cf=cx/2;cq=cu=cz.plotX-cf;cs=A=cz.plotY;L=cz.plotX+cf;cd=cj;ce=cx;cp=cs-(cj/2);M=[cz.plotX,cs+cj+cy]}cz.shapeType=\"rect\";cz.tooltipPos=M;cz.trackerArgs={x:cq,y:cp,height:cd,width:ce,r:0};cz.shapeArgs=cn.crispLine([by,cu,cs,bz,L,A],cj);cz.animInitAttr={d:[by,cz.plotX,cz.plotY,bz,cz.plotX,cz.plotY]};cz.animAttr={d:cz.shapeArgs};cz.graphic=cn.path(cz.shapeArgs).attr({stroke:cz.borderColor,\"stroke-width\":cj,\"stroke-linecap\":\"round\"}).add(ci.group)}},drawDataLabels:a.led.prototype.drawDataLabels,animate:function(cc){var M=this,cb=M.data,L=M.options,A,cd,Z=L.animation;if(Z&&!b6(Z)){Z={}}if(!cc){A=cb[0];if(A&&A.animInitAttr&&A.animAttr){cd=A&&A.graphic;if(cd){if(!cd.isAnimating){cd.isAnimating=true;cd.attr(A.animInitAttr);cd.animate(A.animAttr,Z)}}}A=cb[1];if(A&&A.animInitAttr&&A.animAttr){cd=A&&A.graphic;if(cd){if(!cd.isAnimating){cd.isAnimating=true;cd.attr(A.animInitAttr);cd.animate(A.animAttr,Z)}}}this.animate=null}}});a.bullet=b;aj.hbullet=aK(aj.bullet,{states:{hover:{}}});var a8=aL.extendClass(a.bullet,{type:\"hbullet\",drawDataLabels:function(){var cc=this,cb=cc.data,cf=cc.chart,ck=cc.options,ci=cb[0],ce=cc.dataLabelsGroup,L=cf.plotWidth,cj=cf.plotHeight,Z=cf.options.chart,M=Z.valuePadding,cd=ck.dataLabels,A=cd.style,ch=parseInt(A.lineHeight),cg;if(!ce){ce=cc.dataLabelsGroup=cf.renderer.g(\"data-labels\").translate(cf.plotLeft,cf.plotTop).attr({visibility:cc.visible?ap:ah,zIndex:6}).add()}cg=L+M;if(ci.y!==h&&!isNaN(ci.y)&&(ci.displayValue!==ay)){ci.dataLabel=cf.renderer.text(ci.displayValue,cg,cj/2);ci.dataLabel.attr({align:cd.align||o}).css(A).add(ce)}},realtimeUpdate:function(cf){var cd=this,M=cd&&cd.options,cq=cd&&cd.data,ch=cd.chart,cj,co,cc=ch.options.instanceAPI.numberFormatter,cb,Z,ce,cm=M.gaugeWidth,cp=M.gaugeOriginX-ch.plotLeft,ck=M.min,cg,cl=M.max,L=cf.values||[],cn=cf.labels||[],A=cf.toolTexts||[],ci=cf.showLabels||[];if(cq[0]&&L[0]){cj=cq[0];co=L[0];Z=cc.getCleanValue(L[0],true);if(cj&&Z<=cl&&Z>=ck){if(cj.plotasdot){cg=cp+(Z-ck)*cm/(cl-ck)-(cj.shapeArgs.width/2);cj.graphic.animate({x:cg})}else{ce=(Z-ck)*cm/(cl-ck);cg=(Z-cj.value)*cm/(cl-ck);cj.graphic.animate({width:ce})}cb=bY(co.label,cc.dataLabels(Z));cj.toolText=cb;cj.value=Z;if(cj.dataLabel){cj.dataLabel.attr({text:cb})}if(cj.tracker){cj.tracker.animate({width:ce});cj.plotX+=(cg/2)}}}if(cq[1]&&L[1]){cj=cq[1];co=L[1];Z=cc.getCleanValue(b6(co)?co.value:co,true);if(cj&&Z<=cl&&Z>=ck){cg=cp+(Z-ck)*cm/(cl-ck)-(cj.shapeArgs.width/2);cj.graphic.animate({x:cg});cb=bY(co.label,cc.dataLabels(Z));cj.toolText=cb;cj.value=Z;if(cj.tracker){cj.tracker.animate({x:cg});cj.plotX=cg}}}}});a.hbullet=a8;aj.drawingpad=aK(aj.pie,{states:{hover:{}}});var bN=aL.extendClass(a.pie,{type:\"drawingpad\",drawPoints:function(){var cc=this,A,cb=cc.data,ce=cc.chart,ci=cc.options,ch,L,cd,M,Z=ci.gaugeRadius,cg=ci.gaugeOriginX,cf=ci.gaugeOriginY},drawDataLabel:function(){},animate:function(A){}});a.drawingpad=bN;aj.sparkline=aK(aj.line,{states:{hover:{}}});var g=aL.extendClass(a.line,{type:\"sparkline\",drawDataLabels:function(){var cb=this,Z=cb.data,ce=cb.chart,ci=cb.options,ch=Z[0],cd=cb.dataLabelsGroup,cf=ci.dataLabels.style,cg=parseInt(cf.lineHeight),M=ce.options.chart,L=M.valuePadding,A=0,cc=(ce.plotHeight/2)+(cg*0.3);if(!cd){cd=cb.dataLabelsGroup=ce.renderer.g(\"data-labels\").attr({visibility:cb.visible?ap:ah,zIndex:6}).translate(ce.plotLeft,ce.plotTop).add(ce.seriesGroup)}if(af(M.openValue.label)){ch.openValue=ce.renderer.text(M.openValue.label,-L,cc).attr({align:\"right\"}).css(M.openValue.style).add(cd)}if(af(M.closeValue.label)){ch.closeValue=ce.renderer.text(M.closeValue.label,ce.plotWidth+L,cc).attr({align:\"left\"}).css(M.closeValue.style).add(cd)}if(ch.closeValue&&ch.closeValue.getBBox().width>0){A=ch.closeValue.getBBox().width+L}if(af(M.highLowValue.label)){ch.dataLabel=ce.renderer.text(M.highLowValue.label,ce.plotWidth+L+A,cc,undefined,0).attr({align:\"left\"}).css(M.highLowValue.style).add(cd)}}});a.sparkline=g;aj.sparkwinloss=aK(aj.column,{states:{hover:{}}});var bd=aL.extendClass(a.column,{type:\"sparkwinloss\",drawDataLabels:function(){var M=this,L=M.data,cb=M.chart,cf=M.options,A=cb.options.chart,ce=L[0],Z=M.dataLabelsGroup,cd=cf.dataLabels.style,cc=parseInt(cd.lineHeight);if(!Z){Z=M.dataLabelsGroup=cb.renderer.g(\"data-labels\").attr({visibility:M.visible?ap:ah,zIndex:6}).translate(cb.plotLeft,cb.plotTop).add(cb.seriesGroup)}if(typeof A.closeValue.label!=\"undefined\"){ce.dataLabel=cb.renderer.text(A.closeValue.label,cb.plotWidth+A.valuePadding,cb.plotHeight/2+(cc*0.3)).attr({align:\"left\"}).css(cd).add(Z)}}});a.sparkwinloss=bd;aj.angulargauge=aK(aj.pie,{states:{hover:{}}});var bA=function(A,M){M=(M==undefined)?2:M;var L=Math.pow(10,M);A*=L;A=Math.round(Number(String(A)));A/=L;return A},n=function(L,Z,M,A){return[bA(L*M-Z*A,2),bA(Z*M+L*A,2)]},l=function(L,A){var M=\"angle\";return function(cg,Z){var co,cn,cc,ch=this,cl=this[\"_Attr\"],cm,ce,ck,cb,cj,cf,cd,ci;if(!cl){cl=ch._Attr={}}if(bv(cg)&&af(Z)){co=cg;cg={};cg[co]=Z}if(bv(cg)){if(cg==M){ch=ch._Attr[cg]}else{ch=ch._attr(cg)}}else{for(co in cg){cn=cg[co];if(co==M){cl[co]=cn;ce=cn*aC;cl.tooltipPos[0]=cl.cx+(cl.toolTipRadius*Math.cos(ce));cl.tooltipPos[1]=cl.cy+(cl.toolTipRadius*Math.sin(ce));if(ch.renderer.type===\"VML\"){cc=ch.element;cm=bY(cl.d,ch.d.split(\" \"));cl.d=cm;cb=Math.cos(ce);cj=Math.sin(ce);ck=[by].concat(n(cm[1],cm[2],cb,cj),[bz],n(cm[4],cm[5],cb,cj),n(cm[6],cm[7],cb,cj),n(cm[8],cm[9],cb,cj),[bs]);ch._attr({d:ck});if(cl.color&&cl.color.FCcolor){cl.color.FCcolor.angle=0-cn}Q(cc.childNodes,function(cr){var cq,cp=\"angle\";if(af(cr.angle)){cq=T(cr.angle,0);if(!af(cr.FCColorAngle)){cr.FCColorAngle=cq}else{cq=cr.FCColorAngle}cq-=cn;if(s&&!bZ){cq%=360}if(I){cr[cp]=cq}else{X(cr,cp,cq)}}})}else{ch.rotate(cn,0,0)}}else{ch._attr(co,cn)}}}return ch}},u=aL.extendClass(a.pie,{type:\"angulargauge\",drawPoints:function(){var cg=this,ci,cx=cg.data,cl=cg.chart,cr=cl.options.chart,cy=cl.options.scale,L=cg.options,cn=cl.renderer,cf=Number(L.gaugeOriginX),ce=Number(L.gaugeOriginY),cq=cr.gaugeStartAngle,cm=cr.gaugeEndAngle,ck=cy.min,ct=cy.max,cb=cg.pointGroup,ch=ct-ck,M=cm-cq,cs=0,cp,Z,cu,cd,cw,A,cj,cc=cx&&cx.length,co,cv=l(cq,cm);if(cg.dataById===undefined){cg.dataById={}}for(;cs<cc;cs+=1){cp=cx[cs];if(!af(cp.y)){cp.y=ck;if(!af(cp.toolText)){cp.toolText=ck}if(cp.displayValue===\" \"){cp.displayValue=ck}}if(cp.id!==undefined){cg.dataById[cp.id]={index:cs,point:cp}}cp.index=cs;Z=T(cp.radius,(Number(L.gaugeOuterRadius)+Number(L.gaugeInnerRadius))/2);cu=cp.baseWidth;A=cu/2;cd=cp.topWidth;cj=cd/2;cw=cp.rearExtension;if(cp.y>=ck&&cp.y<=ct){co=(cq+((cp.y-ck)/ch)*M)/aC}else{co=cq}cp.tooltipPos=[cf,ce];cp.graphic=cn.path([by,Z,-cj,bz,Z,cj,-cw,A,-cw,-A,bs]).attr({fill:cp.color,stroke:cp.borderColor,\"stroke-width\":cp.borderThickness}).add(cb).shadow(L.shadow);cp.graphic._attr=cp.graphic.attr;cp.graphic.attr=cv;cp.graphic._Attr={tooltipPos:cp.tooltipPos,cx:cf,cy:ce,toolTipRadius:Z-cw,color:cp.color};cp.graphic.attr({angle:co})}},drawGraph:function(){var cd=this,da=cd.chart,c9=da.options.chart,cF=da.options.scale,cy=cd.options,cK=cd.chart.renderer,c7=cy.gaugeOuterRadius,cm=cy.gaugeInnerRadius,cL=cy.gaugeFillRatio,c6=c9.gaugeBorderColor,cD=c9.gaugeBorderThickness,ci=c9.gaugeBorderAlpha,cE=cy.gaugeFillMix,cQ=cy.gaugeOriginX,cP=cy.gaugeOriginY,cf=c9.gaugeStartAngle,c5=c9.gaugeEndAngle,Z=cF.min,cj=cF.max,M=da.options.instanceAPI,cq=M.colorRangeGetter.getColorRangeArr(Z,cj),c3=0,cC=cq.length,cJ=cj-Z,cw=c5-cf,c8,cT,cg,cn,cU=c5>cf?1:0,cG=1-cU,c2=cf,cI=Math.cos(cf),cs=Math.sin(cf),cv=cQ+(c7*cI),cu=cP+(c7*cs),cS=cQ+(cm*cI),ct=cP+(cm*cs),cc,cb,cN,cp,cr,cM,cB,dd,cl,cY=cF.trendPoint;if(!cd.trendPointGroup){cd.trendPointGroup=cK.g(\"trendpoint\").add(cd.group)}for(;c3<cC;c3+=1){c8=cq[c3];cT=cf+(((Math.min(c8.maxvalue,cj)-Z)/cJ)*cw);cI=Math.cos(cT);cs=Math.sin(cT);cc=cQ+(c7*cI);cb=cP+(c7*cs);cN=cQ+(cm*cI);cp=cP+(cm*cs);cn=Math.abs(c2-cT)>Math.PI?1:0,cg=[by,cv,cu].concat(cK.getArcPath(cQ,cP,cv,cu,cc,cb,c7,c7,cU,cn),[bz,cN,cp],cK.getArcPath(cQ,cP,cN,cp,cS,ct,cm,cm,cG,cn),[bs]);cr=M.parseColorMix(c8.code,cE);cM=M.parseAlphaList(c8.alpha,cr.length);cB=M.parseRatioList((cm/c7*100)+cL,cr.length);var cH=c8.bordercolor,dc=T(c8.borderAlpha,ci);if(cH&&cH.indexOf(\"{\")==-1){cH=bC(cH,dc)}else{cH=M.parseColorMix(c8.code,bY(cH,c6))[0]}cH=bC(cH,dc);cl=cM.split(a2);cl=b7.apply(Math,cl);cl=b7(cD&&dc||0,cl);cK.path(cg).attr({fill:{FCcolor:{gradientUnits:\"userSpaceOnUse\",cx:cQ,cy:cP,r:c7,color:cr.join(),alpha:cM,ratio:cB,defaultColor:c8.color,defaultAlpha:c8.alpha,radialGradient:true}},\"stroke-width\":cD,stroke:cH}).add(cd.group).shadow(cy.shadow,undefined,{opacity:cl/100});cv=cc;cu=cb;cS=cN;ct=cp;c2=cT}if(!cd.tickMarkGroup){cd.tickMarkGroup=cK.g(\"tickMark\").add(cd.group)}if(!cd.trendMarkerGroup){cd.trendMarkerGroup=cK.g(\"trendMarker\").add(cd.group)}if(!cd.pointGroup){cd.pointGroup=cK.g(\"point\").translate(cQ,cP).add(cd.group)}cK.circle(cQ,cP,cy.pivotRadius).attr({fill:{FCcolor:{color:cy.pivotFillColor,alpha:cy.pivotFillAlpha,ratio:cy.pivotFillRatio,radialGradient:cy.isRadialGradient,gradientUnits:\"objectBoundingBox\",angle:cy.pivotFillAngle,cx:0.5,cy:0.5,r:\"50%\"}},\"stroke-width\":cy.pivotBorderThickness,stroke:cy.pivotBorderColor}).add(cd.group).shadow(cy.shadow);var ce,co,cO,cz,c4,cX,de=\"poly_3\",db,A,L,cZ,cW,c1,ck=Math.cos(89.99*aC),cV,cA,cR,ch=-ck,cx,c0=function(){var df=this;return{x:df.category,y:df.y,series:df.series,point:df,percentage:df.percentage,total:df.total||df.stackTotal}};for(c3=0,cC=cY.length;c3<cC;c3+=1){ce=cY[c3];cX=ce.isZone;co=cf+(((ce.startValue-Z)/cJ)*cw);cz=T(ce.radius,c7);c4=T(ce.innerRadius,cX?Math.max(cm-15,0):cm);c1=T(ce.trendValueDistance,0);cI=Math.cos(co);cs=Math.sin(co);cv=cQ+(cz*cI);cu=cP+(cz*cs);cS=cQ+(c4*cI);ct=cP+(c4*cs);if(cX){cO=cf+(((ce.endValue-Z)/cJ)*cw);cI=Math.cos(cO);cs=Math.sin(cO);cc=cQ+(cz*cI);cb=cP+(cz*cs);cN=cQ+(c4*cI);cp=cP+(c4*cs);cU=cO>co?1:0;cG=cU?0:1;cn=Math.abs(c2-cT)>Math.PI?1:0,cg=[by,cv,cu].concat(cK.getArcPath(cQ,cP,cv,cu,cc,cb,cz,cz,cU,cn),[bz,cN,cp],cK.getArcPath(cQ,cP,cN,cp,cS,ct,c4,c4,cG,cn),[bs]);ce.graphic=cK.path(cg).attr({fill:bC(ce.color,ce.alpha),\"stroke-width\":ce.showBorder?ce.thickness:0,stroke:ce.borderColor,dashstyle:ce.dashStyle}).add(cd.trendPointGroup)}else{ce.graphic=cK.path([by,cv,cu,bz,cS,ct]).attr({\"stroke-width\":ce.showBorder?ce.thickness:0,stroke:ce.borderColor,\"stroke-linecap\":\"round\",dashstyle:ce.dashStyle}).add(cd.tickMarkGroup)}if(ce.useMarker){ce.markerElement=db=cK.symbol(de,cv,cu,ce.markerRadius,{startAngle:-co+Math.PI}).attr({fill:ce.markerColor,\"stroke-width\":1,stroke:ce.markerBorderColor}).add(cd.trendMarkerGroup);if(ce.markerToolText!==\"\"){(function(dg){var df={series:{},chart:da,id:ce.id,label:this.label,options:this.options,svgElm:this.svgElm,toolText:dg,getLabelConfig:c0};db.on(\"mouseover\",function(di){var dj=da.plotLeft,dh=da.plotTop;df.tooltipPos=[bY(di.layerX,di.x)-dj+20,bY(di.layerY,di.y)-dh-15];da.tooltip.refresh(df)}).on(\"mouseout\",function(dh){da.tooltip.hide()}).on(\"mousemove\",function(di){var dj=da.plotLeft,dh=da.plotTop;df.tooltipPos=[bY(di.layerX,di.x)-dj+20,bY(di.layerY,di.y)-dh-15];da.tooltip.refresh(df)})})(ce.markerToolText)}}if(ce.displayValue!=\"\"){A=(ce.endValue+ce.startValue)/2;cO=cf+(((A-Z)/cJ)*cw);cI=Math.cos(cO);cs=Math.sin(cO);if(ce.valueInside){L=c4-2-c1;cZ=cI>ck?E:(cI<ch?bh:o)}else{L=cz+2+c1;cZ=cI>ck?bh:(cI<ch?E:o)}cv=cQ+(L*cI);cu=cP+(L*cs);cV=ce.style;cA=T(parseInt(cV.fontSize,10),10);cR=cA*0.8,ce.textElement=cK.text(ce.displayValue,cv,cu).attr({align:ce.align||cZ}).css(ce.style).add(cd.trendMarkerGroup);cx=ce.textElement.getBBox();cW=cx.height;if(cI>ck||cI<ch){cu+=cA-(cW/2)+(cW*0.4*cs*(ce.valueInside?-1:1))}else{if(ce.valueInside){cu+=cR-(cs<0?0:cW*0.9)}else{cu+=cR-(cs>0?0:cW*0.9)}}ce.textElement.attr({y:cu})}}},drawTracker:function(){var ch=this,ck=ch.chart,cc=ch.options,cp=ck.options.chart,cs=ck.options.scale,cg=cc.gaugeOriginX,cf=cc.gaugeOriginY,co=cp.gaugeStartAngle,cm=cp.gaugeEndAngle,cn,A=+new Date(),cd=ch.options.cursor,ci=cd&&{cursor:cd},cb,cr,cj=(cs.max-cs.min)/(cm-co),cq=function(ct){var cu={left:ct.offsetLeft,top:ct.offsetTop};ct=ct.offsetParent;while(ct){cu.left+=ct.offsetLeft;cu.top+=ct.offsetTop;if(ct!==bJ.body&&ct!==bJ.documentElement){cu.left-=ct.scrollLeft;cu.top-=ct.scrollTop}ct=ct.offsetParent}return cu},Z=cq(ch.chart.container),ce=function(cv,ct,cu){return ac(ct[1]-cv.pageY+cu.top,ct[0]-cv.pageX+cu.left)},M={pageX:0,pageY:0},cl=function(cv){ch.rotationStartAngle=ce((O?(p(cv)||M):cv),[cg,cf],Z);var cu=ch.chart&&ch.chart.options&&ch.chart.options.instanceAPI&&ch.chart.options.instanceAPI.chartInstance,cw;if(ch.chart.tooltip){if(cv.type===\"dragstart\"){ch.chart.tooltip.block(true);cr=cu.getDataJSON()}else{cu=ch.chart&&ch.chart.options&&ch.chart.options.instanceAPI&&ch.chart.options.instanceAPI.chartInstance,cw=cu&&cu.jsVars;cw&&(cw._rtLastUpdatedData=cu.getDataJSON());q.raiseEvent(\"RealTimeUpdateComplete\",{data:\"&value=\"+cv.data.updatedValStr,prevData:cr.values,source:\"editMode\",url:null},cu);try{window.FC_ChartUpdated&&window.FC_ChartUpdated(cu.id)}catch(ct){setTimeout(function(){throw(ct)},1)}ch.chart.tooltip.block(false);ch.chart.tooltip.refresh(cv.data,true)}}},L=function(ct){var cA=ct.data,cy=ce((O?(p(ct)||M):ct),[cg,cf],Z),cz=ch.rotationStartAngle,cv;if(cy<0&&cz>0){cv=d(cy)-ch.rotationStartAngle}else{if(cy>0&&cz<0){cv=d(ch.rotationStartAngle)-cy}else{cv=ch.rotationStartAngle-cy}}var cu=T(cA.value,cA.y)-(cv*cj),cB=[],cw=0,cx=cA.index;if(cu<cs.min){cu=cs.min}else{if(cu>cs.max){cu=cs.max}}for(;cw<cx;cw+=1){cB.push(\"\")}cB.push(cu);if(cu!==cA.value&&ch.realtimeUpdate({values:cB})){cA.updatedValStr=cB.join(\"|\");ch.rotationStartAngle=cy}};Q(ch.data,function(ct){cn=ct.trackerEventAdded;if(ct.y!==null){if(!cn&&ct.graphic){if(ct.link!==undefined||ct.editMode){var cu={cursor:\"pointer\",_cursor:\"hand\"}}ct.graphic.attr({isTracker:A}).on(O?\"touchstart\":\"mouseover\",function(cv){cb=cv.relatedTarget||cv.fromElement;if(ck.hoverSeries!==ch&&X(cb,\"isTracker\")!==A){ch.onMouseOver()}ct.onMouseOver()}).on(\"mouseout\",function(cv){if(!ch.options.stickyTracking){cb=cv.relatedTarget||cv.toElement;if(X(cb,\"isTracker\")!==A){ch.onMouseOut()}}}).css(cu);ct.trackerEventAdded=true;if(ct.editMode){F(ct.graphic.element,\"dragstart dragend\",cl,ct);F(ct.graphic.element,\"drag\",L,ct)}}}})},drawTickMarks:function(){var ce=this,cO=ce.chart,cp=ce.options,cN=cO.options.chart,cw=cO.options.scale,cz=cO.renderer,cC=Number(cp.gaugeOriginX),cB=Number(cp.gaugeOriginY),cf=cN.gaugeStartAngle,cL=cN.gaugeEndAngle,cc=cw.min,cg=cw.max,A=Number(cp.gaugeInnerRadius),cx=Number(cp.gaugeOuterRadius),cy=cg-cc,cn=cL-cf,cK=0,co=cw.majorTM,cr=cw.minorTM,ck,cl,cm=ce.tickMarkGroup,Z,M,cb,cD,cG,cH=\"center\",cj,cd=Math.cos,ch=Math.sin,cM=Number(cw.minorTMHeight),cJ=Number(cw.majorTMHeight),cq=cw.placeTicksInside,cs=cw.placeValuesInside,cI=cw.tickValueDistance,cv,ct,cu,ci,cF,cE,L,cA;if(cq){cv=A;ct=cv+cM;cu=cv+cJ}else{cv=cx;ct=cv-cM;cu=cv-cJ}if(cs){ci=A-cI}else{ci=cx+cI}if(!ce.majorTM){ce.majorTM=[]}if(!ce.tmLabel){ce.tmLabel=[]}for(cK=0,ck=co.length;cK<ck;cK+=1){cl=co[cK];cF=cl.value,cG=cl.displayValue;cj=((cF-cc)*cn/cy)+cf;L=cd(cj);cA=ch(cj);Z=cC+(cv*L);M=cB+(cv*cA);cb=cC+(cu*L);cD=cB+(cu*cA);ce.majorTM[cK]=cz.path([by,Z,M,bz,cb,cD]).attr({stroke:bC(cw.majorTMColor,cw.majorTMAlpha),\"stroke-width\":cw.majorTMThickness,\"stroke-linecap\":\"round\"}).add(cm);if(cG!==\"\"){cE=(cK==0||cK==ck-1)?cw.limitValues.style:cw.tickValues.style;Z=cC+(ci*L)+(cl.x||0);M=cB+(ci*cA)+(cl.y||0);ce.tmLabel[cK]=cz.text(cG,Z,M).attr({align:cl.align||cH}).css(cE).add(cm)}}if(!ce.minorTM){ce.minorTM=[]}for(cK=0,ck=cr.length;cK<ck;cK+=1){cF=cr[cK];cj=((cF-cc)*cn/cy)+cf;Z=cC+(cv*cd(cj));M=cB+(cv*ch(cj));cb=cC+(ct*cd(cj));cD=cB+(ct*ch(cj));ce.majorTM[cK]=cz.path([by,Z,M,bz,cb,cD]).attr({stroke:bC(cw.minorTMColor,cw.minorTMAlpha),\"stroke-width\":cw.minorTMThickness,\"stroke-linecap\":\"round\"}).add(cm)}},drawDataLabels:function(){var cc=this,cb=cc.data,cg=cc.chart,Z=cc.options,cn=Z.dataLabels,ce=cc.dataLabelsGroup,ci,ch,M=\"center\",cf=cg.renderer,L=cn.style,cd=Z.pivotRadius,cm=T(parseInt(L.lineHeight,10),12),ck=Z.valueBelowPivot,cl=Z.gaugeOriginX,cj=Z.gaugeOriginY,A=cj+(ck?cm+cd+2:-cd-2);if(!ce){ce=cc.dataLabelsGroup=cf.g(\"data-labels\").attr({visibility:cc.visible?ap:ah,zIndex:6}).translate(cg.plotLeft,cg.plotTop).add()}Q(cb,function(co,cp){if(co.displayValue!==ay){ch=co.valueY;ci=T(co.valueX,cl);if(!af(ch)){ch=A;A+=ck?cm:-cm}co.dataLabel=cf.text(co.displayValue,ci,ch).attr({align:M}).css(L).add(ce)}})},realtimeUpdate:function(ch,Z){var cf=this,cw=cf.data,cj=cf.chart,cx=cj.options.scale,cq=cj.options.chart,co,cr=0,cc=cj.options.series&&cj.options.series[0]&&cj.options.series[0].data,ce=cj.options.instanceAPI.numberFormatter,cs=cj.options.plotOptions.series.animation,cv=cs?ch.interval:0,cd,cb,cp=cq.gaugeStartAngle,cl=cq.gaugeEndAngle,ci=cx.min,ct=cx.max,cg=ct-ci,M=cl-cp,L=ch.values||[],cu=ch.labels||[],ck=ch.showLabels||[],A=ch.toolTexts||[],cn=Math.min(L.length,cw.length),cm=false;if(Z){co=cw[Z.index];cb=ce.getCleanValue(L[0]);if(co&&(cb===null||(cb<=ct&&cb>=ci))){if(cb!==null){co.value=cb;$(co.graphic).stop(true,true);co.graphic.animate({angle:(cp+((cb-ci)/cg)*M)/aC},{duration:cv});cm=true}cd=bY(cu[0],ce.dataLabels(cb));if(co.dataLabel&&cd!==undefined){if(ck[0]==0){cd=\"\"}co.dataLabel.attr({text:cd});cm=true}cd=bY(A[0],((cc&&cc[Z.index]&&cc[Z.index].isLabelString&&cc[Z.index].toolText)||undefined),ce.dataLabels(cb));if(cd!==undefined){co.toolText=cd;cj.tooltip&&cj.tooltip.refresh(co,true);cm=true}}}else{for(;cr<cn;cr+=1){co=cw[cr];cb=ce.getCleanValue(L[cr]);if(co&&(cb===null||(cb<=ct&&cb>=ci))){if(cb!==null){co.value=cb;$(co.graphic).stop(true,true);co.graphic.animate({angle:(cp+((cb-ci)/cg)*M)/aC},{duration:cv});cm=true}cd=bY(cu[cr],ce.dataLabels(cb));if(co.dataLabel&&cd!==undefined){if(ck[cr]==cr){cd=\"\"}co.dataLabel.attr({text:cd});cm=true}cd=bY(A[cr],((cc&&cc[cr]&&cc[cr].isLabelString&&cc[cr].toolText)||undefined),ce.dataLabels(cb));if(cd!==undefined){co.toolText=cd;cj.tooltip&&cj.tooltip.refresh(co,true);cm=true}}}}return cm},render:function(){var L=this,cb,M=L.chart,Z=M.renderer,A=L.options;if(!L.group){cb=L.group=Z.g(\"series\");cb.attr({visibility:L.visible?ap:ah,zIndex:A.zIndex}).translate(M.plotLeft,M.plotTop).add(M.seriesGroup)}this.drawGraph();this.drawTickMarks();this.drawPoints();this.drawTracker();this.drawDataLabels();if(L.visible){M.currentSeriesIndex=L.index;if(M.naviigator){placeNaviGator(M)}}if(L.options.animation&&L.animate){L.animate()}L.isDirty=false},animate:function(cg){var cb=this,Z=cb.data,ch=cb.options,ce=cb.chart,L=ce.options.chart,cc=L.gaugeStartAngle,A,M=0,cf,cd=Z&&Z.length;if(!cg){for(;M<cd;M+=1){cf=Z[M];if(cf.y){A=cf.graphic.attr(\"angle\");cf.graphic.attr(\"angle\",cc/aC);cf.graphic.animate({angle:A},cb.options.animation)}}cb.animate=null}}});a.angulargauge=u})();(function(){var a=FusionCharts([\"private\",\"modules.renderer.highcharts-annotations\"]);if(a===undefined){return}var T=a.core,o=a.hcLib,ar=\"#ff0000\",y=100,al=\"1px solid \",b=150,v=\"annotations\",V=2,x=5,h=0,s=360,Q=0.5,ac=\"1\",F=\"0\",K=\"bold\",H=\"normal\",c=\"italic\",am=\"hidden\",ae=\"none\",av=\"round\",aw=\"radial\",P=\"$\",D=\"+$\",G=\"-$\",E=\"\",au=\"px\",n=\"M\",p=\"L\",e=\"x\",d=\"y\",at=\"90\",aa=\"stroke-weight\",U=\"stroke-linecap\",z=\"stroke-width\",an=\"objectBoundingBox\",ad=\"poly_\",ai=\"top\",m=\"right\",S=\"bottom\",O=\"left\",R=\"center\",l=\"middle\",ao=o.hasSVG,aq=Math.min,N=Math.max,u=Math.sin,g=Math.cos,J=Math.PI,ak=J/180,w=a.extend,af=o.pluck,ab=o.pluckNumber,B=o.graphics.convertColor,aj=o.getDashStyle,C=o.getValidValue,ap=o.parseUnsafeString,ag=o.setImageDisplayMode,r=o.graphics.parseColor,W=o.setLineHeight,A={style:{}},ah=function(){return this},j=function(L,M){if(!M){return{FCcolor:L}}else{return w(L.FCcolor,M)}},t=function(M,L){var X;if(L>360||L<-360){L=L%360}if(M>360||M<-360){M=M%360}X=M-L;if(X>360||X<-360){X=X%360;L=M-X}L=360-L;M=360-M;X=-X;if(M>360||L>360){M-=360;L-=360}return{start:M,end:L,angle:X}},I=function(ay,L,ax,M){var Y={},X;for(X in ay){Y[ax+X]=Y[L+X]=ay[X];Y[M+X]=ay[X]*-1}return Y},Z=function(aA,X,M,ax){var ay=0,L=0,aB=(X==undefined)?1:X,az,Y;if(!aA||!aA.toString){return M}aA=aA.toLowerCase().replace(/\\s/g,E);az=aA.match(/^[\\+\\-]?\\d+(\\.\\d+)?|[\\+\\-]\\d+(\\.\\d+)?/g);if(az){for(Y=0;Y<az.length;Y+=1){ay=ay+(Number(az[Y])||0)}ay=ay*aB}az=aA.match(/^[\\+\\-]?(\\$[a-z]+)|[\\+\\-](\\$[a-z]+)/g);if(az){for(Y=0;Y<az.length;Y+=1){L=L+(ax[az[Y]]||0)}}az=aA.match(/^[\\+\\-]?\\$\\d+(\\.\\d+)?|[\\+\\-]\\$\\d+(\\.\\d+)?/g);if(az){for(Y=0;Y<az.length;Y+=1){L=L+Number(az[Y].replace(P,E))||0}}return ay+L},q=function(Y){var X=this.jsVars,L=X.annotationGroupsById,M=L&&L[Y];if(M&&M.wrapper){M.wrapper.show()}},f=function(Y){var X=this.jsVars,L=X.annotationGroupsById,M=L&&L[Y];if(M&&M.wrapper){M.wrapper.hide()}},k,i;k=function(L,X,M,Y){var ax=this;ax.options=L;ax.chart=M;ax.attrs={};ax.css={};ax.bounds={};ax.annotations=[];ax.shared=X;ax.snaps=Y||{};ax.id=L.id||E;(M.annotations||(M.annotations=[])).push(ax);ax.scale()};w(k.prototype,{scaleImageX:1,scaleImageY:1,scaleText:1,scaleValue:1,scaleValueComplement:1,scaleX:1,scaleY:1});k.prototype.scale=function(){var ay=this,M=ay.options,aD=ay.chart,L=ay.shared,ax=ay.bounds,aE=ay.snaps,aB=L.rootxscale,aG=L.rootyscale,az=ax.xs=ab(M.xscale,L.xscale,100)/100,aF=ax.ys=ab(M.yscale,L.yscale,100)/100,aL,Y,aC,aJ,X,aK,aA,aI,aH;ay.scaleText=ay.scaleText*aF;ay.scaleImageX=ay.scaleImageX*az;ay.scaleImageY=ay.scaleImageY*aF;if(af(M.autoscale,L.autoscale)!=F){Y=ab(M.origw,L.origw);aC=ab(M.origh,L.origh);aJ=aD.chartWidth/Y;X=aD.chartHeight/aC;aL=(af(M.constrainedscale,L.constrainedscale)!=F);aK=aJ<X?aJ:X;aA=aL?aK:(aJ<X?X:aJ);aI=aL?aK:aJ;aH=aL?aK:X;ay.scaleValue=ay.scaleValue*aK;ay.scaleValueComplement=ay.scaleValueComplement*aA;ay.scaleX=ay.scaleX*aI;ay.scaleY=ay.scaleX*aH;az=ax.xs=ax.xs*aI;aF=ax.ys=ax.ys*aH;aB=aB*aI;aG=aG*aH;if(af(M.scaletext,L.scaletext)==ac){ay.scaleText=ay.scaleText*aH}if(af(M.scaleimages,L.scaleimages)==ac){ay.scaleImageX=ay.scaleImageX*aI;ay.scaleImageY=ay.scaleImageY*aH}}ax.x=Z(af(M.x,M.xpos),aB,0,aE)+ab(M.grpxshift,L.grpxshift,0);ax.y=Z(af(M.y,M.ypos),aG,0,aE)+ab(M.grpyshift,L.grpyshift,0);ay.xshift=ab(M.xshift,L.xshift,0);ay.yshift=ab(M.yshift,L.yshift,0)};k.prototype.draw=function(){var ay=this,X=ay.chart,L=ay.options,ax=ay.shared,Y=ay.bounds;ay.wrapper=X.renderer.g(v).attr({x:0,y:0,zIndex:(af(L.showbelow,L.showbelowchart,ax.showbelow)!=F)?0.5:6,visibility:L.visible==F?am:E}).translate(Y.x,Y.y).add();if(L.items){for(var M=0;M<L.items.length;M+=1){new i(X,L.items[M],ay).draw()}}return ay};i=function(X,M,Y){var L=this;L.chart=X;L.options=M;L.group=Y;(Y.annotations||(Y.annotations=[])).push(L);L.args=[];L.attrs={};L.style={};L.bounds={};L.type=M.type&&M.type.toLowerCase&&M.type.toLowerCase();L.scale();L.setup()};i.prototype.getAbsoluteBounds=function(){var ax=this,L=ax.bounds,X=L.x1,aA=L.y1,M=L.x2,az=L.y2,aB=aq(X,M),ay=aq(aA,az),aC=N(X,M)-aB,Y=N(aA,az)-ay;return{x:aB,width:aC,y:ay,height:Y,r:L.r,unscaled:{width:aC/L.xs,height:Y/L.ys}}};i.prototype.scale=function(){var ay=this,aB=ay.group,aD=aB.bounds,L=ay.bounds,aG=ay.options,ax=aB.snaps,X=af(aG.x,aG.xpos),aA=af(aG.y,aG.ypos),M=af(aG.tox,aG.toxpos),az=af(aG.toy,aG.toypos),Y=L.xs=aD.xs,aC=L.ys=aD.ys,aF=ab(aG.xshift,aB.xshift,0),aE=ab(aG.toyshuft,aB.yshift,0);ay.hasDimension=true;ay.hasDimensionX=true;ay.hasDimensionY=true;L.x1=Z(X,Y,0,ax)+aF;if(M===undefined){ay.hasDimension=false;ay.hasDimensionX=false;L.x2=L.x1}else{L.x2=Z(M,Y,0,ax)+aF}L.y1=Z(aA,aC,0,ax)+aE;if(az===undefined){ay.hasDimension=false;ay.hasDimensionY=false;L.y2=L.y1}else{L.y2=Z(az,aC,0,ax)+aE}L.r=ab(aG.radius,0)*aB.scaleValue};i.prototype.setup=function(){var aB=this,aG=aB.options,aE=aB.group,X=aE.options,aF=aB.attrs,aA=aB.style,ay=aE.scaleValue,aC=af(X.fillalpha,aE.options.alpha,y),M=aB.fillAlpha=ab(aG.fillalpha,aG.alpha,aC),L=aB.fillColor=af(aG.fillcolor,aG.color,X.color,ar),Y=aB.fillPattern=af(aG.fillpattern&&aG.fillpattern.toLowerCase&&aG.fillpattern.toLowerCase(),X.fillpattern&&X.fillpattern.toLowerCase&&X.fillpattern.toLowerCase()),aD=aG.showborder?(aG.showborder==ac):C(aG.bordercolor),ax=aB.borderAlpha=ab(aG.borderalpha,aG.alpha,X.borderalpha,aC),az=aB.dashed=(aG.dashed==ac);aB.link=af(aG.link,X.link);aB.shadow=(af(aG.showshadow,X.showshadow)==ac);aF.stroke=aD?B(af(aG.bordercolor,L),ax):ae;aF[U]=av;aF.fill=j({gradientUnits:an,color:L,alpha:M,ratio:af(aG.fillratio,X.fillratio),angle:360-ab(aG.fillangle,0),radialGradient:Y===aw});aF[z]=aD?ab(aG.borderthickness,aG.thickness,2)*ay:0;if(az){aF.dashstyle=aj(aG.dashlen*ay,aG.dashgap*ay,aF[z])}if(aB.link){aA.cursor=\"pointer\";aA._cursor=\"hand\"}aB.toolText=ap(af(aG.tooltext,aE.options.tooltext))};i.prototype.draw=function(){var ax=this,ay=ax.chart,aA=ax.type,aE=ax.attrs,aB,L,aD,aF,X,aC,Y,M=ay.plotLeft,az=ay.plotTop;aB=i.types[aA]&&i.types[aA].call&&i.types[aA].call(ax);if(aB){L=ax.wrapper=ay.renderer[aB].apply(ay.renderer,ax.args).attr(aE).css(ax.style).add(ax.group.wrapper);if(ax.shadow){aD={opacity:N(ax.borderAlpha,aE.fill.FCcolor.alpha)/100};L.shadow(aD,undefined,aD)}if(aB===\"text\"){L.textBound()}if(ax.link){L.on(\"click\",function(){ay.options.instanceAPI.linkClickFN.call(ax)})}if(ax.toolText&&(aF=ay.tooltip)){X={tooltipPos:[20,20],series:{},svgElm:L.svgElm,point:ax,getLabelConfig:ah};Y=function(){aF.refresh(X)};L.on(\"mousemove\",function(aG){X.tooltipPos[0]=(aG.layerX||aG.x)-M;X.tooltipPos[1]=(aG.layerY||aG.y)-az;if(aC){aC=clearTimeout(aC);aC=setTimeout(Y,b)}else{aF.refresh(X);aC=-2}}).on(\"mouseout\",function(){aC=clearTimeout(aC);aF.hide()})}}return ax};i.keys={};i.textAlignOptions={left:O,right:m,center:R};i.textVerticalAlignOptions={top:ai,middle:l,bottom:S};i.textRotationOptions={\"0\":\"0\",\"1\":\"270\",right:\"90\",left:\"270\"};i.types={rectangle:function(){var L=this,M=L.args,X=L.getAbsoluteBounds(),Y=X.width*Q;if(X.r>Y){X.r=Y}M[0]=X.x;M[1]=X.y;M[2]=X.width;M[3]=X.height;M[4]=X.r;return\"rect\"},line:function(){var L=this,Y=L.args,X=L.options,ay=L.group.scaleValue,M=L.attrs,ax=L.bounds;Y[0]=[n,ax.x1,ax.y1,p,ax.x2,ax.y2];M.stroke=B(L.fillColor,L.fillAlpha);M[z]=ab(X.thickness,V)*ay;return\"path\"},polygon:function(){var L=this,X=L.args,M=L.options,Y=L.bounds;X[0]=ad+ab(M.sides,x);X[1]=Y.x1;X[2]=Y.y1;X[3]=Y.r;X[4]={startAngle:ab(M.startangle,h)*ak};return\"symbol\"},circle:function(){var L=this,M=L.args,aG=L.attrs,ay=L.options,az=L.bounds,ax=L.chart.chartWidth,aC=L.chart.chartHeight,aA=L.group.scaleValueComplement,aI=t(ab(ay.startangle,h),ab(ay.endangle,s)),aM=az.r,aL;if(!af(ay.radius)){az.r=ax<aC?(ax*az.xs):(aC*az.ys);az.r=aM=az.r*0.3}aL=ab(ay.yradius,aM/aA)*aA;if(!L.fillPattern){aG.fill.FCcolor.radialGradient=true;L.fillPattern=aw}if(L.fillPattern===aw){aG.fill.FCcolor.cx=aG.fill.FCcolor.cy=Q}if(!(aI.angle%360)&&(aM===aL)){M[0]=az.x1;M[1]=az.y1;M[2]=az.r;return\"circle\"}if(!(aI.angle%360)){aI.start=aI.start-0.001}var aB=L.chart.renderer.getArcPath,aK=aI.start*ak,aH=aI.end*ak,aJ=aI.angle*ak,Y=az.x1,X=az.y1,aE=Y+g(aK)*aM,aD=X+u(aK)*aL,aO=Y+g(aH)*aM,aN=X+u(aH)*aL,aF;aF=aB(Y,X,aE,aD,aO,aN,aM,aL,0,aJ>=J?1:0);aF.unshift(n,aE,aD);aF.push(\"Z\");M[0]=aF;return\"path\"},arc:function(){var az=this,aD=az.options,aA=az.args,aC=az.attrs,L=az.bounds,ax=az.chart.chartWidth,M=az.chart.chartHeight,Y=az.group.scaleValue,aB=t(ab(aD.startangle,0),ab(aD.endangle,360)),ay=aB.start,X=aB.end;if(!af(aD.radius)){L.r=ax<M?(ax*L.xs):(M*L.ys);L.r=L.r*0.3}L.innerR=ab(aD.innerradius,L.r*0.8/Y)*Y;if(L.innerR>L.r){L.innerR=L.innerR+L.r;L.r=L.innerR-L.r;L.innerR=L.innerR-L.r}if(!(aB.angle%360)&&!ao){X=X+Q;ay=ay-Q}if(!az.fillPattern){aC.fill.FCcolor.radialGradient=true;az.fillPattern=aw}if(az.fillPattern===aw){aC.fill.FCcolor.cx=aC.fill.FCcolor.cy=Q}aA[0]=L.x1;aA[1]=L.y1;aA[2]=L.r;aA[3]=L.innerR;aA[5]=ay*ak;aA[4]=X*ak;return\"arc\"},text:function(){var L=this,aJ=L.chart,M=L.args,aG=L.style,aM=L.attrs,aC=L.group,az=L.bounds,Y=L.options,aD=L.getAbsoluteBounds(),aP=af(Y.align,aC.options.textalign,R).toLowerCase(),ay=af(Y.valign,aC.options.textvalign,l).toLowerCase(),aI=ap(af(Y.text,Y.label)),aF=L.chart&&L.chart.renderer&&L.chart.renderer.smartLabel,aS,aE=af(Y.wrap,aC.options.wraptext)==ac,aA,aL,aX=af(Y.rotatetext,aC.options.rotatetext,F).toLowerCase(),aO=i.textRotationOptions[aX],aQ=aO!=F,aH=aQ?e:d,aK=aQ?d:e,aW=aJ.options.orphanStyles,aR=w({},aW.defaultStyle.style||{}),aN=aW[aC.id.toLowerCase()]||A,aB=aN.style.color,aV=w(aR,aN.style),ax=parseFloat(aV.fontSize),aU=aO==at?-1:1,aT=af(Y.font,aC.options.font,aV.fontFamily),X=ab(Y.fontsize,aC.options.fontsize,ax)*aC.scaleText;if(aE){aA=ab(Y.wrapwidth,L.hasDimensionX?aD.width/az.xs:undefined);aL=ab(Y.wrapheight,L.hasDimensionY?aD.height/az.ys:undefined);aA&&(aA=aA*az.xs);aL&&(aL=aL*az.ys)}aG.fontFamily=aT;aG.fontWeight=af(Y.bold,Y.isbold)==ac?K:H;if(af(Y.italic,Y.isitalic)==ac){aG.fontStyle=c}if(Y.bgcolor){aG.backgroundColor=r(Y.bgcolor)}if(Y.bordercolor){aG.borderColor=r(Y.bordercolor);aG.border=al+aG.borderColor}if(Y.fontcolor){aG.color=aM.fill=r(Y.fontcolor)}else{aG.color=r(aB||aM.fill.FCcolor.color)}aG.fontSize=X+au;if(X==ax){aG.lineHeight=aV.lineHeight}else{W(aG)}aM.align=i.textAlignOptions[aP]||R;aM.rotation=parseInt(aO,10);aF.setStyle(aG);aS=aF.getSmartText(aI,aA,aL,false);switch(i.textVerticalAlignOptions[ay]||l){case ai:aD[aH]=aD[aH]+(X-aS.height)*aU;break;case S:aD[aH]=aD[aH]+X*aU;break;default:aD[aH]=aD[aH]+(X-aS.height*Q)*aU}if(aM.align===O){aD[aK]=aD[aK]+ab(Y.leftmargin,0)}else{if(aM.align===R){aD[aK]=aD[aK]+ab(Y.leftmargin,0)*Q}}M[0]=aS.text;M[1]=aD.x;M[2]=aD.y;delete aM.stroke;delete aM[aa];return\"text\"},image:function(){var ay=this,az=ay.chart,ax=ay.style,Y=az.chartWidth,X=az.chartHeight,aG=ay.options,aD=ay.attrs,aA=ay.args,L=C(aG.url),aC=ay.group.scaleImageX*af(Number(aG.xscale),100)/100,aB=ay.group.scaleImageY*af(Number(aG.yscale),100)/100,aF=ay.getAbsoluteBounds(),M={width:1,height:1},aE;if(!L){aA[0]=aF.x;aA[1]=aF.y;aA[2]=aF.width;aA[3]=aF.height;aA[4]=aF.r;return\"rect\"}aE=new Image();aE.onload=function(){M=ag(ae,ai,O,100,0,Y,X,aE);if(ay.wrapper){ay.wrapper.attr({width:(ay.hasDimensionX?aF.unscaled.width:M.width)*aC,height:(ay.hasDimensionY?aF.unscaled.height:M.height)*aB})}};aE.src=L;aA[0]=L;aA[1]=aF.x;aA[2]=aF.y;aA[3]=(ay.hasDimensionX?aF.unscaled.width:M.width)*aC;aA[4]=(ay.hasDimensionY?aF.unscaled.height:M.height)*aB;ax.opacity=N(ay.fillAlpha,ay.borderAlpha)/100;delete aD.stroke;delete aD.fill;delete aD[U];return\"image\"}};o.Highcharts.Chart.prototype.callbacks.unshift(function(ay,X){var ax=X.chartInstance,Y=ax.jsVars,L=X.dataObj||{},aD=L.annotations,az,aC,aB,aA=Y.annotationGroupsById={};if(!(X.drawAnnotations&&ax.dataReady()&&L.chart&&L.chart.showannotations!=F&&aD&&aD.groups&&aD.groups.length)){return}az={showbelow:af(aD.showbelow,aD.showbelowchart),autoscale:aD.autoscale,scaletext:aD.scaletext,scaleimages:aD.scaleimages,constrainedscale:aD.constrainedscale,origw:af(aD.origw,L.chart.origw,ay.chartWidth),origh:af(aD.origh,L.chart.origh,ay.chartHeight),xshift:aD.xshift,yshift:aD.yshift,grpxshift:aD.grpxshift,grpyshift:aD.grpyshift,xscale:aD.xscale,yscale:aD.yscale,rootxscale:ab(aD.xscale,100)/100,rootyscale:ab(aD.yscale,100)/100};X.snapLiterals&&(aC=I(X.snapLiterals,D,P,G));for(var M=0;M<aD.groups.length;M+=1){aB=new k(aD.groups[M],az,ay,aC).draw();if(aB.id){aA[aB.id]=aB}}});T.addEventListener(\"rendered\",function(ax,M){var Y=ax.sender,ay=Y.jsVars||{},L=ay.hcObj,X=ay.instanceAPI;if(!(L&&X&&X.drawAnnotations)){delete Y.showAnnotation;delete Y.hideAnnotation;return}if(!Y.showAnnotation){Y.showAnnotation=Y.ref.showAnnotation=q}if(!Y.hideAnnotation){Y.hideAnnotation=Y.ref.hideAnnotation=f}})})();FusionCharts([\"private\",\"modules.renderer.highcharts-realtime\",function(){var global=this,lib=global.hcLib,math=Math,mathRandom=math.random,mathMin=math.min,pluckNumber=lib.pluckNumber,THRESHOLD_MS=10,IN_ALERT_RANGE=\"1\",OUT_OF_ALERT_RANGE=\"2\",ACTION_CALLJS=\"calljs\",ACTION_SHOWANNOTATION=\"showannotation\",processAlerts,resetRealtimeThreads,resetTimeout;processAlerts=function(event){var chartObj=event.sender,vars=chartObj.jsVars,state=chartObj.__state,iapi=vars.instanceAPI,data=iapi.dataObj,alerts=data&&data.alerts&&data.alerts.alert||[],values=vars._rtLastUpdatedData&&vars._rtLastUpdatedData.values,checkBounds,alertCount=alerts.length,dataCount,i;if(!values||!values.length){return}checkBounds=function(value){var alertObj,alertAction,j;for(j=0;j<alertCount;j+=1){alertObj=alerts[j];alertAction=alertObj.action&&alertObj.action.toLowerCase();if(alertObj.minvalue<value&&alertObj.maxvalue>value){if(!(alertObj.occuronce===\"1\"&&alertObj.hasOccurred)){alertObj.hasOccurred=true;alertObj.state=IN_ALERT_RANGE;switch(alertAction){case ACTION_CALLJS:setTimeout(function(){eval(alertObj.param)},0);break;case ACTION_SHOWANNOTATION:chartObj.showAnnotation&&chartObj.showAnnotation(alertObj.param);break}}}else{if(alertAction===ACTION_SHOWANNOTATION&&alertObj.state===IN_ALERT_RANGE){chartObj.hideAnnotation&&chartObj.hideAnnotation(alertObj.param)}alertObj.state=OUT_OF_ALERT_RANGE}}};if(iapi.multiValueGauge){dataCount=mathMin(values.length,((iapi.hcInstance&&iapi.hcInstance.options&&iapi.hcInstance.options&&iapi.hcInstance.options.series&&iapi.hcInstance.options.series[0]&&iapi.hcInstance.options.series[0].data&&iapi.hcInstance.options.series[0].data.length)||0));for(i=0;i<dataCount;i+=1){if(!state.lastSetValues||values[i]!==state.lastSetValues[i]){checkBounds(values[i])}}}else{if(!state.lastSetValues||values[0]!==state.lastSetValues[0]){checkBounds(values[0])}}state.lastSetValues=values};resetRealtimeThreads=function(event){var chartObj=event.sender,state=chartObj.__state;chartObj.jsVars&&(chartObj.jsVars._rtLastUpdatedData=null);state._toRealtime=clearTimeout(state._toRealtime);state._toClearChart=clearTimeout(state._toClearChart)};resetTimeout=function(fn,ms,id){clearTimeout(id);return setTimeout(fn,ms)};global.addEventListener([\"BeforeRender\",\"DataUpdated\"],function(event){var chart=event.sender;if(chart.options.renderer!==\"javascript\"){return}chart.__state.rtStateChanged=true});global.addEventListener(\"drawcomplete\",function(event){var chartObj=event.sender;if(!chartObj||!chartObj.options){return}if(chartObj.options.renderer!==\"javascript\"&&!chartObj.__state.rtStateChanged){return}chartObj.__state.rtStateChanged=false;var iapi=chartObj.jsVars.instanceAPI,hci=iapi.hcInstance,state=chartObj.__state,vars=chartObj.jsVars,options=(hci&&hci.options&&hci.options.chart)||{},refreshMs=(pluckNumber(options.updateInterval,options.refreshInterval)*1000),clearMs=(pluckNumber(options.clearInterval,0)*1000),latencyMs=iapi.drawingLatency,dataUrl=options.dataStreamURL,dataStamp=options.dataStamp,realtimeEnabled=Boolean(iapi.realtimeEnabled&&(refreshMs>0)&&(dataUrl!==undefined)&&hci.options.chart),animation=iapi.hcJSON&&iapi.hcJSON.plotOptions&&iapi.hcJSON.plotOptions.series.animation&&iapi.hcJSON.plotOptions.series.animation.duration||0,ajaxObj=state._rtAjaxObj,clearChart=function(){chartObj.clearChart&&chartObj.clearChart();if(clearMs){state._toClearChart=setTimeout(clearChart,clearMs)}},requestData=function(){var url=dataUrl+(dataUrl.indexOf(\"?\")===-1?\"?num=\":\"&num=\")+mathRandom();if(dataStamp){url+=(\"&dataStamp=\"+dataStamp)}if(ajaxObj.open){ajaxObj.abort()}ajaxObj.get(url)};if(refreshMs<=0){state._toRealtime=clearTimeout(state._toRealtime);ajaxObj&&ajaxObj.abort()}else{if(refreshMs<THRESHOLD_MS){if(latencyMs>=THRESHOLD_MS){latencyMs=THRESHOLD_MS-1}refreshMs=THRESHOLD_MS}}state._toClearChart=clearTimeout(state._toClearChart);if(clearMs>0){if(clearMs<THRESHOLD_MS){clearMs=THRESHOLD_MS}else{state._toClearChart=setTimeout(clearChart,clearMs)}}refreshMs=refreshMs-latencyMs;if(realtimeEnabled){state._rtPaused=false;state._rtDataUrl=dataUrl;state.lastSetValues=null;ajaxObj=state._rtAjaxObj||(state._rtAjaxObj=new global.ajax());ajaxObj.onSuccess=function(responseText,wrapper,data,url){var prevData,updateObj=iapi.linearDataParser&&iapi.linearDataParser(responseText,iapi.multisetRealtime),seriesZero=hci.series&&hci.series[0];if(chartObj.isActive()&&updateObj&&hci&&((seriesZero&&seriesZero.realtimeUpdate)||iapi.realtimeUpdate)){dataStamp=updateObj.dataStamp?updateObj.dataStamp:null;updateObj.interval=refreshMs<1000?refreshMs:1000;prevData=chartObj.getDataJSON();if(iapi.realtimeUpdate){iapi.realtimeUpdate(updateObj)}else{seriesZero.realtimeUpdate(updateObj)}vars._rtLastUpdatedData=iapi.multisetRealtime?updateObj:chartObj.getDataJSON();global.raiseEvent(\"RealTimeUpdateComplete\",{data:responseText,prevData:prevData.values,source:\"XmlHttpRequest\",url:url,drawingLatency:iapi.drawingLatency},event.sender);try{window.FC_ChartUpdated&&window.FC_ChartUpdated(event.sender.id)}catch(err){setTimeout(function(){throw err},1)}if(!state._rtPaused){state._toRealtime=setTimeout(requestData,refreshMs)}}else{state._toRealtime=clearTimeout(state._toRealtime)}};ajaxObj.onError=function(resp,wrapper,data,url){global.raiseEvent(\"RealTimeUpdateError\",{source:\"XmlHttpRequest\",url:url,xmlHttpRequestObject:wrapper.xhr,error:resp,httpStatus:(wrapper.xhr&&wrapper.xhr.status)?wrapper.xhr.status:-1},event.sender);if(chartObj.isActive()){state._toRealtime=setTimeout(requestData,refreshMs)}else{state._toRealtime=clearTimeout(state._toRealtime)}};state._toRealtime=resetTimeout(requestData,animation>refreshMs?animation:refreshMs,state._toRealtime)}chartObj.addEventListener(\"beforedispose\",function(){state._toRealtime=clearTimeout(state._toRealtime);state._toClearChart=clearTimeout(state._toClearChart)});chartObj.removeEventListener([\"beforedataupdate\",\"beforerender\"],resetRealtimeThreads);chartObj.addEventListener([\"beforedataupdate\",\"beforerender\"],resetRealtimeThreads);chartObj.removeEventListener(\"RealTimeUpdateComplete\",processAlerts);if(iapi.dataObj&&iapi.dataObj.alerts&&iapi.dataObj.alerts&&iapi.dataObj.alerts.alert&&iapi.dataObj.alerts.alert.length){chartObj.addEventListener(\"RealTimeUpdateComplete\",processAlerts)}})}]);","js/thirdparty/fusioncharts/FusionCharts_HC_Charts.js":"\nFusionCharts([\"private\",\"modules.renderer.highcharts-charts\",function(){var D=this,j=D.hcLib,aM=j.BLANKSTRING,aR=j.createTrendLine,Y=j.pluck,F=j.getValidValue,B=j.pluckNumber,bg=j.defaultPaletteOptions,f=j.getFirstValue,I=j.getDefinedColor,bh=j.parseUnsafeString,ai=j.FC_CONFIG_STRING,ag=j.extend2,H=j.getDashStyle,a6=j.toPrecision,T=j.stubFN,G=j.Highcharts,au=G.Series,c=G.hasSVG,a5=G.hasTouch,a9=G.isIE,aC=G.extend,R=G.merge,b=G.pick,bj=G.each,ac=G.attr,K=G.map,bd=G.seriesTypes,ad=G.addEvent,J=G.getPosition,at=G.getTouchEvent,aL=G.getOptions(),bn=aL.plotOptions,n=function(A){return A!==aF&&A!==null},v=function(A,L){return parseInt(A,L||10)},V=function(A){return typeof A===\"object\"},a7=function(A){return typeof A===\"string\"},a0=document.documentMode===8,aF,aG=\"rgba(192,192,192,\"+(c?0.000001:0.002)+\")\",ab=\"\",P=\"select\",av=\"hidden\",ap=a0?\"visible\":\"\",aD=\"show\",y=\"hide\",ao=\"px\",an=\"none\",ay=\"M\",az=\"L\",aI=\"A\",d=\"AT\",am=\"WA\",aj=\"Z\",aa=Math,U=aa.sin,aW=aa.cos,aH=aa.atan2,O=aa.round,ae=aa.min,aS=aa.max,bi=aa.abs,r=aa.PI,bl=aa.ceil,X=aa.floor,ah=aa.sqrt,bk=r/180,S=Math.PI,aJ=S/2,w=2*S,g=S+aJ,t=4*S,aB=j.graphics.getColumnColor,a3=j.getFirstColor,ak=j.setLineHeight,al=j.pluckFontSize,aO=j.pluckColor,Q=j.getFirstAlpha,ar=j.graphics.getDarkColor,a2=j.graphics.getLightColor,q=j.graphics.convertColor,aA=j.COLOR_TRANSPARENT,s=j.POSITION_CENTER,aV=j.POSITION_TOP,aK=j.POSITION_BOTTOM,aQ=j.POSITION_RIGHT,i=j.POSITION_LEFT,aZ=0,bc=j.chartAPI,x=j.titleSpaceManager,u=j.placeLegendBlockBottom,af=j.placeLegendBlockRight,z=j.graphics.mapSymbolName,bb=bc.singleseries,ba=bc.multiseries,ax=j.COMMASTRING,a1=j.STRINGUNDEFINED,a=j.ZEROSTRING,l=j.ONESTRING,N=j.HUNDREDSTRING,aq=j.PXSTRING,bo=j.COMMASPACE,be=false&&!/fusioncharts\\.com$/i.test(location.hostname),aN=function(A,L){if(!L){return{FCcolor:A}}else{return aC(A.FCcolor,L)}};bc(\"column2d\",{standaloneInit:true,creditLabel:be},bc.column2dbase);bc(\"column3d\",{defaultSeriesType:\"column3d\",defaultPlotShadow:1,defaultZeroPlaneHighlighted:false},bc.column2d);bc(\"bar2d\",{isBar:true,defaultSeriesType:\"bar\",spaceManager:bc.barbase},bc.column2d);bc(\"line\",{standaloneInit:true,creditLabel:be},bc.linebase);bc(\"area2d\",{standaloneInit:true,creditLabel:be},bc.area2dbase);bc(\"pie2d\",{standaloneInit:true,defaultSeriesType:\"pie\",defaultPlotShadow:1,sliceOnLegendClick:true,point:function(bX,bt,b3,bY,bN){var bv,bR,Z,br,bV,bZ=bN[ai],bH=bZ.is3d,bG,bU,bS,bq,bI,b4=0,A,b0,bM,by,bW,bp,b1=0,bJ=[],b5,bx=B(bY.plotborderthickness,bH?0.1:1),L=B(bY.use3dlighting,1),bC=L?B(bY.radius3d,bY[\"3dradius\"],90):100,bD=B(bY.showzeropies,1),bz=B(bY.showpercentintooltip,1),b2=B(bY.showlabels,1),bE=B(bY.showvalues,1),bL=B(bY.showpercentvalues,bY.showpercentagevalues,0),bQ=Y(bY.tooltipsepchar,bY.hovercapsepchar,bo),bT=Y(bY.labelsepchar,bQ),bP=Y(bY.plotbordercolor,bY.piebordercolor),bO=bN[ai].numberFormatter,bB=b3.length,bK,bF,bw,bs=B(bY.plotborderdashed,0),bu=B(bY.plotborderdashlen,5),M=B(bY.plotborderdashgap,4),bA;if(bC>100){bC=100}if(bC<0){bC=0}if(B(bY.showlegend,0)){bN.legend.enabled=true;bN.legend.reversed=!Boolean(B(bY.reverselegend,0));bt.showInLegend=true}for(bR=0;bR<bB;bR+=1){br=b3[bR];Z=bO.getCleanValue(br.value,true);if(!(Z===null||(!bD&&Z===0))){bJ.push(br);b4+=Z}}if(b4===0){bJ=[]}bt.enableRotation=bJ.length>1?B(bY.enablerotation,1):0;bt.is3D=bH;bt.use3DLighting=L;bt.pieYScale=B(bY.pieyscale,40);if(bt.pieYScale<1){bt.pieYScale=1}if(bt.pieYScale>=100){bt.pieYScale=80}bt.pieYScale/=100;bt.pieSliceDepth=B(bY.pieslicedepth,15);if(bt.pieSliceDepth<1){bt.pieSliceDepth=1}bt.managedPieSliceDepth=bt.pieSliceDepth;for(bR=bJ.length-1;bR>=0;bR-=1){br=bJ[bR];Z=bO.getCleanValue(br.value,true);bv=bh(Y(br.label,br.name,aM));bG=Y(br.color,bN.colors[bR%bN.colors.length]);bU=Y(br.alpha,bY.plotfillalpha,N);bq=Y(br.bordercolor,bP,a2(bG,bH?90:25)).split(ax)[0];bI=bY.showplotborder==a?a:Y(br.borderalpha,bY.plotborderalpha,bY.pieborderalpha,\"80\");bV={opacity:Math.max(bU,bI)/100};bF=Boolean(B(br.issliced,bY.issliced,0));if(bF){bZ.preSliced=bF}bw=B(br.dashed,bs)?H(Y(br.dashlen,bu),Y(br.dashgap,M),bx):undefined;bt.data.push({showInLegend:!(bv===aM),y:Z,name:bv,shadow:bV,toolText:bh(F(br.tooltext)),color:this.getPointColor(bG,bU,bC),_3dAlpha:bU,borderColor:q(bq,bI),borderWidth:bx,link:F(br.link),sliced:bF,dashStyle:bw,doNotSlice:Y(bY.enableslicing,l)!=l});bM=bv;by=bO.percentValue(Z/b4*100);bW=bO.dataLabels(Z)||aM;bp=bz===1?by:bW;b0=B(br.showlabel,b2)===1?bM:aM;A=(bA=B(br.showvalue,bE))===1?(bL===1?by:bW):aM;b5=F(bh(br.displayvalue));if(b5!==undefined&&bA){A=b5}else{if(A!==aM&&b0!==aM){A=b0+bT+A}else{A=Y(b0,A)}}if(bM!=aM){bM=bM+bQ+bp}else{bM=bp}bK=bt.data[b1];bK.displayValue=A;bK.toolText=Y(bK.toolText,bM);b1+=1}bN.legend.enabled=bY.showlegend==l?true:false;bN.chart.startingAngle=Y(bJ.length>1?bY.startingangle:0,0);return bt},getPointColor:function(M,bs,bp){var Z,A,br,L,bq;M=a3(M);bs=Q(bs);if(bp<100&&c){A=Math.floor((0.85*(100-0.35*bp))*100)/100;br=ar(M,A);L=Math.floor((0.5*(100+bp))*100)/100;bq=a2(M,L);Z={FCcolor:{color:bq+ax+br,alpha:bs+ax+bs,ratio:bp+\",100\",radialGradient:true}}}else{Z={FCcolor:{color:M+ax+M,alpha:bs+ax+bs,ratio:\"0,100\"}}}return Z},configureAxis:function(bp,bq){var Z=0,L=bp[ai],br,M,A=0;bp.plotOptions.series.dataLabels.style=bp.xAxis.labels.style;bp.plotOptions.series.dataLabels.color=bp.xAxis.labels.style.color;delete L.x;delete L[0];delete L[1];bp.chart.plotBorderColor=bp.chart.plotBackgroundColor=aA;br=L.pieDATALabels=[];if(bp.series.length===1){if((M=bp.series[0].data)&&(Z=bp.series[0].data.length)>0&&bp.plotOptions.series.dataLabels.enabled){for(;Z--;){if(M[Z]&&F(M[Z].displayValue)!==undefined){br.push(M[Z].displayValue)}}}}},spaceManager:function(bX,bT,L,bp){var b1=bX[ai],bO=[],bD=b1.is3d,by=this.name,A=b1.smartLabel,bA=B(b1.pieDATALabels&&b1.pieDATALabels.length,0),bU=0,b7,bx=bT.chart,bK=B(bx.managelabeloverflow,0),bG=!b1.preSliced&&(bx.enableslicing==a)&&(bx.showlegend!=l||bx.interactivelegend==a)?0:B(bx.slicingdistance,20),bE=B(bx.pieradius,0),bB=B(bx.enablesmartlabels,bx.enablesmartlabel,1),bY=bB?B(bx.skipoverlaplabels,bx.skipoverlaplabel,1):0,bq=B(bx.issmartlineslanted,1),bQ=B(bx.labeldistance,bx.nametbdistance,5),bP=B(bx.smartlabelclearance,5),bZ=L-(bX.chart.marginRight+bX.chart.marginLeft),b0=bp-(bX.chart.marginTop+bX.chart.marginBottom),b3=Math.min(b0,bZ),bS=Y(bx.smartlinecolor,bg.plotFillColor[bX.chart.paletteIndex]),M=B(bx.smartlinealpha,100),bC=B(bx.smartlinethickness,1),bL=bX.plotOptions.series.dataLabels,b2=bL.style,bH=B(parseInt(b2.lineHeight,10),12),bs=bX.series[0]||{},bF=bs.pieYScale,b8=bs.pieSliceDepth,bW=bE===0?b3*0.15:bE,bJ=0,br=2*bW;bL.connectorWidth=bC;bL.connectorColor=q(bS,M);b0-=x(bX,bT,bZ,br<b0?b0-br:b0/2);if(bx.showlegend==l){if(Y(bx.legendposition,aK).toLowerCase()!=aQ){b0-=u(bX,bT,bZ,b0/2,true)}else{bZ-=af(bX,bT,bZ/3,b0,true)}}A.setStyle(b2);if(bA!==1){for(;bA--;){bO[bA]=b7=A.getOriSize(b1.pieDATALabels[bA]);bU=Math.max(bU,b7.width)}}if(bB){bQ=bP+bG}if(bE===0){if(bD){b0-=b8;bJ=Math.min((bZ/2)-bU,((b0/2)-bH)/bF)-bQ}else{bJ=Math.min((bZ/2)-bU,(b0/2)-bH)-bQ}if(bJ>=bW){bW=bJ}else{var bN=bW-bJ;bQ=Math.max(bQ-bN,bG)}}if(bD){var b4=b0-(2*((bW*bF)+bH));if(b8>b4){bs.managedPieSliceDepth=b8-b4}}bX.plotOptions.pie3d.slicedOffset=bX.plotOptions.pie.slicedOffset=bG;bX.plotOptions.pie3d.size=bX.plotOptions.pie.size=2*bW;bX.plotOptions.series.dataLabels.distance=bQ;bX.plotOptions.series.dataLabels.isSmartLineSlanted=bq;bX.plotOptions.series.dataLabels.enableSmartLabels=bB;bX.plotOptions.series.dataLabels.skipOverlapLabels=bY;bX.plotOptions.series.dataLabels.manageLabelOverflow=bK;if(by===\"doughnut2d\"||by===\"doughnut3d\"){var b6=B(bx.doughnutradius,0),bV,bI,bv,bu,bR,bt,Z=B(bx.use3dlighting,1),bw,bM,b5,bz=Z?B(bx.radius3d,bx[\"3dradius\"],50):100;if(bz>100){bz=100}if(bz<0){bz=0}if(b6===0||b6>=bW){bI=bW/2}else{bI=b6}bX.plotOptions.pie3d.innerSize=bX.plotOptions.pie.innerSize=2*bI;if(bz>0&&c){bv=parseInt(bI/bW*100,10);bR=(100-bv)/2;bt=parseInt(bR*bz/100,10);bw=2*(bR-bt);bu=bv+ax+bt+ax+bw+ax+bt;if(bX.series[0]&&bX.series[0].data){b5=bX.series[0].data;for(bV=0,bA=b5.length;bV<bA;bV+=1){bM=b5[bV];if(bM.color.FCcolor){bM.color.FCcolor.ratio=bu}}}}}},creditLabel:be,eiMethods:{sliceDataItem:function(L){var Z=this.jsVars,A=Z.hcObj,M;if(A&&A.series&&(M=A.series[0])&&M.data&&M.data[L]&&M.data[L].slice){return M.data[M.xIncrement-1-L].slice()}}}},bb);bc.pie2d.eiMethods.togglePieSlice=bc.pie2d.eiMethods.sliceDataItem;bc(\"pie3d\",{defaultSeriesType:\"pie3d\",creditLabel:be,getPointColor:function(A,M,L){return A},defaultPlotShadow:0},bc.pie2d);bc(\"doughnut2d\",{getPointColor:function(M,bs,bp){var Z,A,br,L,bq;M=a3(M);bs=Q(bs);if(bp<100&&c){A=Math.floor((85-0.2*(100-bp))*100)/100;br=ar(M,A);L=Math.floor((100-0.5*bp)*100)/100;bq=a2(M,L);Z={FCcolor:{color:br+ax+bq+ax+bq+ax+br,alpha:bs+ax+bs+ax+bs+ax+bs,radialGradient:true}}}else{Z={FCcolor:{color:M+ax+M,alpha:bs+ax+bs,ratio:\"0,100\"}}}return Z}},bc.pie2d);bc(\"doughnut3d\",{defaultSeriesType:\"pie3d\",getPointColor:bc.pie3d,defaultPlotShadow:0},bc.doughnut2d);bc(\"pareto2d\",{standaloneInit:true,point:function(b8,bx,cg,b9,bW){var cc,b0,bO,b4,b1,bs,bE,cl,b3,bG,bu,bJ,ce,bA,bF,bR,b5,bT,bM,bH,bS,bV,ck,b7,bv,bC,ch,bN,b6,bX,bD,bP,bL=cg.length,br=0,cb={},L=bW.chart.paletteIndex,bq=/3d$/.test(bW.chart.defaultSeriesType),cj=this.isBar,bB=Y(360-b9.plotfillangle,90),bI=B(b9.plotborderthickness,1),bz=bW.chart.useRoundEdges,bZ=Y(b9.tooltipsepchar,\", \"),bt=Y(b9.plotbordercolor,bg.plotBorderColor[L]).split(ax)[0],bQ=b9.showplotborder==a?a:Y(b9.plotborderalpha,b9.plotfillalpha,N),b2=bW.xAxis,cf=B(b9.showcumulativeline,1),ca=bW[ai],bU=ca.axisGridManager,cd=ca.x,Z=b9.showtooltip!=a,ci=[],bp=[],A=B(b9.use3dlighting,1),bY=bW[ai].numberFormatter,bK=B(b9.showlinevalues,b9.showvalues),bw=B(b9.plotborderdashed,0),by=B(b9.plotborderdashlen,5),M=B(b9.plotborderdashgap,4);bQ=bq?(b9.showplotborder?bQ:a):bQ;bt=bq?Y(b9.plotbordercolor,\"#FFFFFF\"):bt;for(b0=0,bV=0;b0<bL;b0+=1){bv=cg[b0];if(cg[b0].vline){bU.addVline(b2,bv,bV,bW)}else{cc=bY.getCleanValue(bv.value,true);if(cc!==null){bv.value=cc;ci.push(bv);bV+=1}}}bL=ci.length;ci.sort(function(cn,cm){return cm.value-cn.value});if(cf){b3=B(b9.linedashed,0);ch=a3(Y(b9.linecolor,bg.plotBorderColor[L]));bE=Y(b9.linealpha,100);bG=B(b9.linedashlen,5);bu=B(b9.linedashgap,4);cl=B(b9.linethickness,2);bJ={opacity:bE/100};bD=B(b9.drawanchors,b9.showanchors);if(bD===undefined){bD=bE!=a}bT=B(b9.anchorborderthickness,1);bH=B(b9.anchorsides,0);bM=B(b9.anchorradius,3);bR=a3(Y(b9.anchorbordercolor,ch));ce=a3(Y(b9.anchorbgcolor,bg.anchorBgColor[L]));bF=Q(Y(b9.anchoralpha,N));bA=(Q(Y(b9.anchorbgalpha,bF))*bF)/100;b5=b3?H(bG,bu,cl):undefined;cb={yAxis:1,data:[],type:\"line\",color:q(ch,bE),lineWidth:cl,marker:{enabled:bD,fillColor:q(ce,bA),lineColor:q(bR,bF),lineWidth:bT,radius:bM,symbol:z(bH),startAngle:Y(b9.anchorstartangle,90)}}}else{if(b9.showsecondarylimits!==\"1\"){b9.showsecondarylimits=\"0\"}if(b9.showdivlinesecondaryvalue!==\"1\"){b9.showdivlinesecondaryvalue=\"0\"}}for(b0=0;b0<bL;b0+=1){bv=ci[b0];bN=B(bv.showlabel,b9.showlabels,1);bs=bh(!bN?aM:f(bv.label,bv.name));bU.addXaxisCat(b2,b0,b0,bs);br+=cc=bv.value;bO=Y(bv.color,bW.colors[b0%bW.colors.length])+ax+(B(b9.useplotgradientcolor,1)?I(b9.plotgradientcolor,bg.plotGradientColor[L]):aM);b4=Y(bv.alpha,b9.plotfillalpha,N);b1=Y(bv.ratio,b9.plotfillratio);b6={opacity:b4/100};bX=Y(bv.alpha,bQ)+aM;bC=aB(bO,b4,b1,bB,bz,bt,bX,cj,bq);bx.data.push(ag(this.getPointStub(bv,cc,bs,bW),{y:cc,shadow:b6,color:bC[0],borderColor:bC[1],borderWidth:bI,use3DLighting:A,dashStyle:B(bv.dashed,bw)==1?H(by,M,bI):\"\",tooltipConstraint:this.tooltipConstraint}));this.pointValueWatcher(bW,cc);if(cf){bp.push({value:br,dataLabel:bs,tooltext:F(bv.tooltext)})}}cd.catCount=bL;if(!ca[1]){ca[1]={}}ca[1].stacking100Percent=true;if(cf&&br>0){for(b0=0,bL=bp.length;b0<bL;b0+=1){bv=bp[b0];b7=bx.data[b0];cc=(bv.value/br*100);bP=bY.percentValue(cc);ck=b7.displayValue!==aM?bP:aM;if(bK==1){ck=bP}if(bK==0){ck=aM}bs=bv.dataLabel;bS=Z?(bv.tooltext!==undefined?bv.tooltext:((bs!==aM?bs+bZ:aM)+bP)):aM;cb.data.push({shadow:bJ,y:cc,toolText:bS,displayValue:ck,link:b7.link,dashStyle:b5})}return[bx,cb]}else{return bx}},defaultSeriesType:\"column\",isDual:true,creditLabel:be},bb);bc(\"pareto3d\",{defaultSeriesType:\"column3d\",defaultPlotShadow:1},bc.pareto2d);bc(\"mscolumn2d\",{standaloneInit:true,creditLabel:be},bc.mscolumn2dbase);bc(\"mscolumn3d\",{defaultSeriesType:\"column3d\",defaultPlotShadow:1,defaultZeroPlaneHighlighted:false},bc.mscolumn2d);bc(\"msbar2d\",{isBar:true,defaultSeriesType:\"bar\",spaceManager:bc.barbase},bc.mscolumn2d);bc(\"msbar3d\",{defaultSeriesType:\"bar3d\",defaultPlotShadow:1,defaultZeroPlaneHighlighted:false},bc.msbar2d);bc(\"msline\",{standaloneInit:true,creditLabel:be},bc.mslinebase);bc(\"msarea\",{standaloneInit:true,creditLabel:be},bc.msareabase);bc(\"stackedcolumn2d\",{isStacked:true},bc.mscolumn2d);bc(\"stackedcolumn3d\",{isStacked:true},bc.mscolumn3d);bc(\"stackedbar2d\",{isStacked:true},bc.msbar2d);bc(\"stackedbar3d\",{isStacked:true},bc.msbar3d);bc(\"stackedarea2d\",{isStacked:true,showSum:0},bc.msarea);bc(\"marimekko\",{isValueAbs:true,distributedColumns:true,isStacked:true,xAxisMinMaxSetter:T,postSeriesAddition:function(br,bR,bK,bI){var bA=br[ai],bS=0,by=br.xAxis,bP=100/bA.marimekkoTotal,bG=[],bB=br.series,bC=0,bq=B(bR.chart.plotborderthickness,1),bx=br.chart.rotateValues,bO=B(bR.chart.rotatexaxispercentvalues,0),bM=bq*-0.5-(bq%2+(bO?0:4)),bu=bO?3:0,bD=bx?270:0,bN=ag({},br.plotOptions.series.dataLabels.style),bp=parseInt(bN.fontSize,10),bE=bA[0],bw=!bE.stacking100Percent,bJ=bA.inCanvasStyle,bt=this.numberFormatter,L,Z,M,bL,bF,bz,A,bQ,bv,bH,bs;bA.isXYPlot=true;bA.distributedColumns=true;by.min=0;by.max=100;by.labels.enabled=false;by.gridLineWidth=aZ;by.alternateGridColor=aA;L=bE.stack;bR.chart.interactivelegend=\"0\";for(bz=0,Z=br.xAxis.plotLines.length;bz<Z;bz+=1){A=by.plotLines[bz];if(A.isGrid){A.isCat=true;bG[A.value]=A}}if(L.floatedcolumn&&(M=L.floatedcolumn[0])){for(bF=0,Z=M.length;bF<Z;){bs=M[bF];bS+=bL=(bs.p||0);bv=bL*bP;bQ=bC+(bv/2);bH=bC+bv;for(bz=0;bz<bB.length;bz+=1){br.series[bz].data[bF][\"_FCX\"]=bC;br.series[bz].data[bF][\"_FCW\"]=bv}if(bA.showStackTotal){br.xAxis.plotLines.push({value:bQ,width:0,isVline:bw,isTrend:!bw,zIndex:4,label:{align:s,textAlign:bD,rotation:bx?270:0,style:bN,verticalAlign:aV,offsetScale:bw?(bL<0?bs.n:bs.p):undefined,offsetScaleIndex:0,y:bL<0?(bx===270?4:bp):-4,x:0,text:bt.yAxis(a6(bL,10))}})}if(bG[bF]){bG[bF].value=bQ;bG[bF]._weight=bv}bF+=1;if(bA.showXAxisPercentValues&&bF<Z){br.xAxis.plotLines.push({value:bH,width:0,isVine:true,label:{align:s,textAlign:bO?i:s,rotation:bO?270:0,style:{color:bJ.color,fontSize:bJ.fontSize,fontFamily:bJ.fontFamily,lineHeight:bJ.lineHeight,border:\"1px solid\",borderColor:bJ.color,backgroundColor:\"#ffffff\",backgroundOpacity:1},verticalAlign:aK,y:bM,x:bu,text:this.numberFormatter.percentValue(bH)},zIndex:5})}bC=bH}}},defaultSeriesType:\"floatedcolumn\"},bc.stackedcolumn2d);bc(\"msstackedcolumn2d\",{series:function(bz,bw,A,L,bA){var bs,bu,bt,M,bv=bw[ai],by,Z=0,br,bq,bp=[],bx;bw.legend.enabled=Boolean(B(bz.chart.showlegend,1));if(bz.dataset&&bz.dataset.length>0){this.categoryAdder(bz,bw);for(bs=0,bu=bz.dataset.length;bs<bu;bs+=1){if(bx=bz.dataset[bs].dataset){for(bt=0,M=bx.length;bt<M;bt+=1,Z+=1){br={data:[],stack:bs};bq=Math.min(bv.oriCatTmp.length,bx[bt].data&&bx[bt].data.length);bp=this.point(A,br,bx[bt],bz.chart,bw,bq,Z,bs);bw.series.push(bp)}}}if(this.isDual&&bz.lineset&&bz.lineset.length>0){for(bt=0,M=bz.lineset.length;bt<M;bt+=1,Z+=1){br={data:[],yAxis:1,type:\"line\"};by=bz.lineset[bt];bq=Math.min(bv.oriCatTmp.length,by.data&&by.data.length);bw.series.push(bc.msline.point.call(this,\"msline\",br,by,bz.chart,bw,bq,Z))}}this.configureAxis(bw,bz);if(bz.trendlines){aR(bz.trendlines,bw.yAxis,bw[ai],false,this.isBar)}}}},bc.stackedcolumn2d);bc(\"mscombi2d\",{standaloneInit:true,creditLabel:be},bc.mscombibase);bc(\"mscombi3d\",{series:bc.mscombi2d.series,eiMethods:\"view2D,view3D,resetView,rotateView,getViewAngles,fitToStage\"},bc.mscolumn3d);bc(\"mscolumnline3d\",{},bc.mscombi3d);bc(\"stackedcolumn2dline\",{isStacked:true,stack100percent:0},bc.mscombi2d);bc(\"stackedcolumn3dline\",{isStacked:true,stack100percent:0},bc.mscombi3d);bc(\"mscombidy2d\",{isDual:true,secondarySeriesType:undefined},bc.mscombi2d);bc(\"mscolumn3dlinedy\",{isDual:true,secondarySeriesType:\"line\"},bc.mscolumnline3d);bc(\"stackedcolumn3dlinedy\",{isDual:true,secondarySeriesType:\"line\"},bc.stackedcolumn3dline);bc(\"msstackedcolumn2dlinedy\",{isDual:true,stack100percent:0,secondarySeriesType:\"line\"},bc.msstackedcolumn2d);bc(\"scrollcolumn2d\",{postSeriesAddition:bc.scrollbase.postSeriesAddition,tooltipConstraint:\"plot\",avgScrollPointWidth:40},bc.mscolumn2d);bc(\"scrollline2d\",{postSeriesAddition:bc.scrollbase.postSeriesAddition,tooltipConstraint:\"plot\",avgScrollPointWidth:75},bc.msline);bc(\"scrollarea2d\",{postSeriesAddition:bc.scrollbase.postSeriesAddition,tooltipConstraint:\"plot\",avgScrollPointWidth:75},bc.msarea);bc(\"scrollstackedcolumn2d\",{postSeriesAddition:function(M,L,Z,A){bc.base.postSeriesAddition.call(this,M,L,Z,A);bc.scrollbase.postSeriesAddition.call(this,M,L,Z,A)},tooltipConstraint:\"plot\",avgScrollPointWidth:75},bc.stackedcolumn2d);bc(\"scrollcombi2d\",{postSeriesAddition:bc.scrollbase.postSeriesAddition,tooltipConstraint:\"plot\",avgScrollPointWidth:40},bc.mscombi2d);bc(\"scrollcombidy2d\",{postSeriesAddition:bc.scrollbase.postSeriesAddition,tooltipConstraint:\"plot\",avgScrollPointWidth:40},bc.mscombidy2d);bc(\"scatter\",{standaloneInit:true,defaultSeriesType:\"scatter\",defaultZeroPlaneHighlighted:false,creditLabel:be},bc.scatterbase);bc(\"bubble\",{standaloneInit:true,standaloneInut:true,defaultSeriesType:\"bubble\",point:function(bS,br,bV,bT,bL,bX,b0){if(bV.data){var Z,bP,bw,bq,bG,bR,bY,bW,bv,bJ,bM,bE,bQ,by=false,bA,bH,bp,L,M,bO=bc[bS],bZ=bV.data,bx=bZ.length,bU=bL[ai],bF=B(bV.showvalues,bU.showValues),bz=B(bT.bubblescale,1),b1=Y(bT.negativecolor,\"FF0000\"),bC=bL.plotOptions.bubble,bN=this.numberFormatter,bs=B(bV.showregressionline,bT.showregressionline,0);bC.bubbleScale=bz;br.name=F(bV.seriesname);if(B(bV.includeinlegend)===0||br.name===undefined){br.showInLegend=false}bw=Boolean(B(bV.drawanchors,bV.showanchors,bT.drawanchors,1));bY=Y(bV.plotfillalpha,bV.bubblefillalpha,bT.plotfillalpha,N);bW=B(bV.showplotborder,bT.showplotborder,1);bv=a3(Y(bV.plotbordercolor,bT.plotbordercolor,\"666666\"));bJ=Y(bV.plotborderthickness,bT.plotborderthickness,1);bM=Y(bV.plotborderalpha,bT.plotborderalpha,\"95\");bQ=\"circle\";bE=bv;bA=bW==1?bJ:0;bH=Y(bV.color,bV.plotfillcolor,bT.plotfillcolor,bL.colors[b0%bL.colors.length]);br.marker={enabled:bw,fillColor:this.getPointColor(bH,N),lineColor:{FCcolor:{color:bE,alpha:bM}},lineWidth:bA,symbol:bQ};if(bs){br.events={hide:this.hideRLine,show:this.showRLine};var A={sumX:0,sumY:0,sumXY:0,sumXsqure:0,sumYsqure:0,xValues:[],yValues:[]},bD,bK=B(bV.showyonx,bT.showyonx,1),bu=a3(Y(bV.regressionlinecolor,bT.regressionlinecolor,bH)),bB=B(bV.regressionlinethickness,bT.regressionlinethickness,1),bI=Q(B(bV.regressionlinealpha,bT.regressionlinealpha,100)),bt=q(bu,bI)}for(bP=0;bP<bx;bP+=1){bq=bZ[bP];if(bq){Z=bN.getCleanValue(bq.y);bp=bN.getCleanValue(bq.x);L=bN.getCleanValue(bq.z,true);if(Z===null){br.data.push({y:null,x:bp});continue}by=true;bG=a3(Y(bq.color,(bq.z<0?b1:bH)));bR=Y(bq.alpha,bY);M=bO.getPointStub(bq,Z,bp,bL,bV,bF);bG=B(bT.use3dlighting)===0?bG:bO.getPointColor(bG,bR);if(L!==null){bC.zMax=bC.zMax>L?bC.zMax:L;bC.zMin=bC.zMin<L?bC.zMin:L}br.data.push({y:Z,x:bp,z:L,displayValue:M.displayValue,toolText:M.toolText,link:M.link,marker:{enabled:bw,fillColor:bG,lineColor:{FCcolor:{color:bE,alpha:bM}},lineWidth:bA,symbol:bQ}});this.pointValueWatcher(bL,Z,bp,bs&&A)}else{br.data.push({y:null})}}if(bs){bD={type:\"line\",color:bt,showInLegend:false,lineWidth:bB,enableMouseTracking:false,marker:{enabled:false},data:this.getRegressionLineSeries(A,bK,bx),zIndex:0};br=[br,bD]}}if(!by){br.showInLegend=false}return br},postSeriesAddition:function(M,L,Z,A){var bq=M.chart,bp=L.chart;bq.hasScroll=B(bp.clipbubbles,1)},getPointStub:function(br,bv,bt,bs,M,bx){var L,bq,bu,bw=bs[ai],A=bv===null?bv:bw.numberFormatter.dataLabels(bv),Z,bp=bw.tooltipSepChar;if(!bw.showTooltip){L=aM}else{if(F(br.tooltext)!==undefined){L=bh(br.tooltext)}else{if(A===null){L=false}else{if(bw.seriesNameInToolTip){Z=Y(M&&M.seriesname)}L=Z?Z+bp:aM;L+=bt?bt+bp:aM;L+=A;L+=br.z?bp+br.z:aM}}}if(!B(br.showvalue,bx,bw.showValues)){bq=aM}else{if(Y(br.name,br.label)!==undefined){bq=bh(Y(br.name,br.label))}else{bq=A}}bu=F(br.link);return{displayValue:bq,toolText:L,link:bu}}},bc.scatter);var aP={wrapper:[],group:[],push:function(L,A){this.wraper.push(L);this.group.push(A)},add:function(M,L,A){setTimeout(function(){!M.added&&M.add(L)},A||0)},process:function(){}};var bf=function(b4,bJ,bO,bx){var bK=b4.stepZoom,bN=b4.options.chart.stepZoom,bw=bN.skipOverlapPoints,bF=bK.zoomHistory,br=bK.currentZoomLevelIndex,bE,bz=bK.pixelsPerPoint,bt=b4.series,bP=bt.length,bX=b4.options._FCconf,bC=bK.maxIndex,by={},A,bR,bS,bW,b0,b6,bv,bQ,bp,bA,bB,bs,bY,bD=bX.visibleLabelDistance,bZ,Z=false,b3;if(bx<br){Z=true;br=bK.currentZoomLevelIndex=bx||(bx=0);bF.splice(br+1,bF.length);bv=bF[br];bR=bv.stepping;b0=bv.seriesStart;bW=bv.perPointPixelDistance;bQ=bv.scrollRatio;bY=bK.scrollPosition=bv.scrollPosition;bJ=bv._startIndex;bO=bv._stopIndex;bK.scrollablePXLength=bv.scrollablePXLength}else{if(bJ>bO){var L=bJ;bJ=bO;bO=L}A=b4.plotWidth,bS=bO-bJ,bW=A/bS;if(bW<bD){bZ=Math.ceil(bD/bW)}else{bZ=1}if(bW<bz){bR=Math.ceil(bz/bW)}else{bR=1}bW=A/(bS-(bS%bR));b0=bJ%bR;b6=bC-(bC%bR);bA=b6-b0;bB=bA*bW;bQ=A/bB;bs=bB-A;if(bs>0){bY=((bJ-b0)*bW)/(bB-A)}else{bY=0}bK.scrollPosition=bY;bK.scrollablePXLength=bs;bE=bF[br];if(bE&&bE.stepping===bR&&bE.seriesStart===b0&&bE.seriesEnd===b6&&bE.perPointPixelDistance===bW){return}bF[(bK.currentZoomLevelIndex=(br+=1))]={seriesStart:b0,seriesEnd:b6,stepping:bR,perPointPixelDistance:bW,visiblePointDistance:bR*bW,seriesConf:[],scrollRatio:bQ,scrollPosition:bY,scrollablePXLength:bs,_startIndex:bJ,_stopIndex:bO}}var bV,b2,bH=[],bI,M,bM,bT,bG,b5,bU,bL=bK.catLabelArr,bu,bq,b1;if(bZ===undefined){bZ=bW<bD?bl(bD/bW):1}for(b3=0;b3<=bC;b3+=1){bV=b3-b0;bp=bV*bW;bG=bV<0||bV%bR!==0;b5=bV<0||bV%bZ!==0;b1={x:bp,visibility:bG?av:ap};if(bL&&(bU=bL[b3])){bU.attr({x:bp+bK.xDisplacement,visibility:b5?av:ap})}b2=bP;while(b2--){bM=bt[b2];bT=bM.data[b3];bT.plotX=bp;bI=bH[b2]||(bH[b2]={path:[],addMove:true,addLine:false,lastMovePoint:[],connectNullData:bM.options.connectNullData});M=bI.path;if((bu=bT.graphic)){bu.attr(b1)}if((bq=bT.dataLabel)){bq.attr(b1)}if(!bw||!bG){if(n(bT&&bT.plotY)){if(bI.addLine){M.push(ay,bI.lastMovePoint[0],bI.lastMovePoint[1],az);bI.addLine=false}if(bI.addMove){bI.addLine=true;bI.addMove=false;bI.lastMovePoint[0]=bp;bI.lastMovePoint[1]=bT.plotY}else{M.push(bp,bT.plotY)}}else{if(!bI.connectNullData){bI.addMove=true;bI.addLine=false}}}}}for(b2=0;b2<bP;b2+=1){bI=bH[b2]||(bH[b2]={path:[ay],isLastMoveComand:true});M=bI.path;bt[b2].graphLine.attr({d:M});bt[b2].graphPath=M}bK.scroller.setScrollRatio(bQ);bK.scroller.setScrollPosition(bY);if(!br){br=0;bJ=0;bO=bL.length-1}by.reset=(br===0);by.level=br;by.startIndex=bJ;by.startLabel=bL[bJ].textStr;by.endIndex=bO;by.endLabel=bL[bO].textStr;by.action=Z?\"out\":\"in\";j.raiseEvent(\"zoomed\",by,b4.options.instanceAPI.chartInstance,[b4.options.instanceAPI.chartInstance.id,by.startIndex,by.stopIndex,by.startLabel,by.stopLabel,by.action,by.level]);D.raiseEvent(Z?\"zoomedout\":\"zoomedin\",by,b4.options.instanceAPI.chartInstance)},m=function(A,bs){var L=bs.zoomHistory,bv=bs.currentZoomLevelIndex,bp=L[bv],bt=bp.perPointPixelDistance,bq=A.selectionLeft,bu=A.selectionWidth,M=bs.maxIndex,Z,br;Z=(bp.scrollablePXLength*bp.scrollPosition)+bq;br=Z+bu;Z=X(Z/bt);br=bl(br/bt);if(br>M){br=M}return{max:br,min:Z}},W=function(A,bv,bt,L){var bu=this,Z=bu.tracker.normalizeMouseEvent,bp=bu.options.chart.stepZoom,by=bu.renderer,bw=bu.plotLeft,bx=bu.plotTop,br=bu.plotWidth,bB=bu.plotHeight,bq=bp.pinPaneBorderThickness,bA=by.clipRect(bw+A,bx,bv,bB),bs,bC,bz=[],M=0;bs=by.g(\"group\").attr({x:0,y:0,zIndex:2}).clip(bA).add();bC=by.rect(bw+A,bx-bq/2,bv,bB+bq,0).attr({stroke:bp.pinPaneBorderColor,fill:bp.pinPaneBgColor,strokeWidth:bq,isOverlay:true}).css({cursor:\"w-resize\"}).add(bs);bj(bu.series,function(bE){var bD=bE.options,bF=bD.color,bH=aS(bD.lineWidth+bp.pinLineThicknessDelta,1),bG=by.path(bE.graphPath).attr({stroke:bF,\"stroke-width\":bH,\"stroke-linecap\":\"round\",dashstyle:a9&&!c?H(bH+1,bH,bH):H(bH,bH+1,bH),visibility:bE.visible?ap:av});bz.push(bG);bG.translate(bE.group.attr(\"translateX\"),bx).add(bs)});ad(bC.element,\"dragstart drag\",function(bF){var bE=bF.type;bF=Z(at(bF));if(bE===\"dragstart\"){M=bF.pageX-(bs.attr(\"translateX\")||0);return}var bD=bF.pageX-M,bG=bD+A;if(bG<0){bD=-A}else{if((bG+bv)>br){bD=br-bv-A}}bs.translate(bD)});j.raiseEvent(\"pinned\",{startIndex:bt.min,endIndex:bt.max,startLabel:bu.stepZoom.catLabelArr[bt.min].textStr,endLabel:bu.stepZoom.catLabelArr[bt.max].textStr},bu.options.instanceAPI.chartInstance,[bu.options.instanceAPI.chartInstance.id,bt.min,bt.max,bu.stepZoom.catLabelArr[bt.min].textStr,bu.stepZoom.catLabelArr[bt.max].textStr]);return{destroy:function(){bj(bz,function(bD){bD.destroy()});bC.destroy();bs.destroy()}}},a4=function(Z){var M=this,bq=M.stepZoom,A=M.options.chart.stepZoom,bp=Z.selectionLeft,br,L=m(Z,bq);if(bq.pinActive){if(bq.pinComposite){bq.pinComposite.destroy()}bq.pinComposite=W.call(M,bp,Z.selectionWidth,L,bq);return}if(L.max>L.min){bf(M,L.min,L.max)}br=bq.currentZoomLevelIndex;if(!bq.zoButton){bq.zoButton=M.addButton({onclick:function(){var bs=bq.currentZoomLevelIndex-1;bf(M,undefined,undefined,bs);bq.pinButton&&bq.pinActive&&bq.pinButton.onClick();(bs<=1)&&bq.resetButton.hide();(bq.currentZoomLevelIndex==0)&&bq.zoButton.hide()},tooltip:A.showToolBarButtonTooltext&&A.btnZoomOutTooltext,symbol:\"zoomOutIcon\"})}bq.zoButton[br===0?\"hide\":\"show\"]();if(!bq.resetButton){bq.resetButton=M.addButton({onclick:function(){bf(M,undefined,undefined,0);bq.resetButton&&bq.resetButton.hide();bq.zoButton&&bq.zoButton.hide();bq.pinButton&&bq.pinActive&&bq.pinButton.onClick();j.raiseEvent(\"resetzoomchart\",{},M.options.instanceAPI.chartInstance,[M.options.instanceAPI.chartInstance.id])},tooltip:A.showToolBarButtonTooltext&&A.btnResetChartTooltext,symbol:\"resetIcon\",symbolFill:an,hoverSymbolFill:an})}bq.resetButton[M.stepZoom.currentZoomLevelIndex>1?\"show\":\"hide\"]()};aC(j.eventList,{zoomed:\"FC_Zoomed\",pinned:\"FC_Pinned\",resetzoomchart:\"FC_ResetZoomChart\"});bc(\"zoomline\",{standaloneInit:true,hasVDivLine:true,defaultSeriesType:\"stepzoom\",canvasborderthickness:1,tooltipConstraint:\"plot\",chart:function(A,M){var Z=this.dataObj,bp=Z.chart,bq=this.base.chart.apply(this,arguments),L=bq.chart.stepZoom;if(!F(bp.caption)&&!F(bp.subcaption)){bq.chart.marginTop+=15}bq.chart.animation=false;(bq.plotOptions||(bq.plotOptions={}))&&(bq.plotOptions.series||(bq.plotOptions.series={}));bq.plotOptions.series.animation=false;bq.chart.nativeZoom=false;bq.chart.events.selection=a4;if(!bq.callbacks){bq.callbacks=[]}bq.callbacks.push(function(){var br=this,bs=br.renderer,bt=br.stepZoom,bu=bt.pinButton;if(!bu&&br.options.chart.stepZoom.allowPinMode){bu=bt.pinButton=br.addButton({onclick:function(){if((bt.pinActive=!bt.pinActive)){bu.tooltipOptions.point.toolText=L.showToolBarButtonTooltext&&\"Switch to Zoom Mode\"}else{if(bt.pinComposite){bt.pinComposite=bt.pinComposite.destroy()}bu.tooltipOptions.point.toolText=L.showToolBarButtonTooltext&&L.btnSwitchToPinModeTooltext}bu.activate(bt.pinActive);D.raiseEvent(\"pinmodestatechange\",{state:bt.pinActive},br.options.instanceAPI.chartInstance)},tooltip:L.showToolBarButtonTooltext&&L.btnSwitchToPinModeTooltext,symbol:\"pinModeIcon\"})}if(!bs.forExport){bs.batchCapacity=50;bs.batchSpeed=1;bs.simpleAppend=true;bs.processBatch()}});return bq},xAxisMinMaxSetter:function(){this.base.xAxisMinMaxSetter.apply(this,arguments);var A=this.hcJSON,L=A[ai],Z=A.xAxis,M=L.x;Z.min=0;Z.max=M.catCount-1},series:function(bu,bt,A){var br,M,bs=bt[ai],bq,bp,L=bu.chart,Z;bt.legend.enabled=Boolean(B(L.showlegend,1));bt.chart.valuePosition=Y(L.valueposition,\"auto\").toLowerCase();if(bu.dataset&&bu.dataset.length>0){if(bu.categories&&bu.categories[0]&&bu.categories[0].category){this.categoryAdder(bu,bt)}else{return}for(br=0,M=bu.dataset.length;br<M;br+=1){if(bu.dataset[br].data||true){bq={data:[]};bt.series.push(this.point(A,bq,bu.dataset[br],bu.chart,bt,bs.oriCatTmp.length,br));Z=true}}if(Z){this.configureAxis(bt,bu);if(bu.trendlines&&!this.isLog){aR(bu.trendlines,bt.yAxis,bs,false,this.isBar)}}}},point:function(bP,bq,bU,bQ,bF,bW,bZ){var bs=this,bV,bN,bD,b2,bO,bv,L,bL,A,bt,bH,bw,bJ,bA,bT,bp,bM,by,M,bY,bu,Z,bC,b1,bK,bX=bU.data,bz=bX&&bX.length||0,bR=bF[ai],bI=Y(bq.type,bs.defaultSeriesType),bB=bF.plotOptions[bI]&&bF.plotOptions[bI].stacking,br=Y(bs.isValueAbs,bR.isValueAbs,false),bE=B(bq.yAxis,0),bG=bs.numberFormatter,bx=B(bQ.showshadow,1);Z=B(bQ.compactdatamode,0);bC=Y(bQ.dataseparator,\"|\");bV=Y(bU.seriesname,aM);bN=a3(Y(bU.color,bQ.linecolor,bF.colors[bZ%bF.colors.length]));bD=Y(bU.alpha,bQ.linealpha,N);b2=B(bU.linethickness,bQ.linethickness,2);bO=Boolean(B(bU.dashed,bQ.linedashed,0));bv=B(bU.linedashlen,bQ.linedashlen,5);L=B(bU.linedashgap,bQ.linedashgap,4);bL=B(bU.showvalues,bQ.showvalues);bt=B(bU.drawanchors,bU.showanchors,bQ.drawanchors,bQ.showanchors);bH=B(bU.anchorsides,bQ.anchorsides,0);bw=B(bU.anchorradius,bQ.anchorradius,3);bJ=a3(Y(bU.anchorbordercolor,bQ.anchorbordercolor,bN));bA=B(bU.anchorborderthickness,bQ.anchorborderthickness,1);bT=a3(Y(bU.anchorbgcolor,bQ.anchorbgcolor,bN));bp=Y(bU.anchoralpha,bQ.anchoralpha,N);bM=Y(bU.anchorbgalpha,bQ.anchorbgalpha,bp);by=bt===undefined?bD!=0:!!bt;bq.marker={enabled:by,fillColor:{FCcolor:{color:bT,alpha:((bM*bp)/100)+aM}},lineColor:{FCcolor:{color:bJ,alpha:bp+aM}},lineWidth:bA,radius:bw,symbol:z(bH)};bq.name=bV;bq.color={FCcolor:{color:bN,alpha:bD}};bq.shadow={opacity:bx?bD/100:0};bq.lineWidth=b2;bq.dashStyle=bO?H(bv,L,b2):undefined;if(B(bU.includeinlegend)===0||bq.name===undefined||(bD==0&&bt!==1)){bq.showInLegend=false}if(bX){if(Z){var b0=bX.split(bC);for(bK=0;bK<bW;bK+=1){var bS=bG.getCleanValue(b0[bK]);if(bS===null){bq.data.push({y:null});continue}A=bG.dataLabels(bS);b1=bL?A:aM;bq.data.push({y:bS,displayValue:b1,toolText:A});this.pointValueWatcher(bF,bS,bE,bB,bK,0,bI)}}else{for(bK=0;bK<bW;bK+=1){M=bX[bK];if(M){bS=bG.getCleanValue(M.value,br);if(bS===null){bq.data.push({y:null});continue}bY=a3(Y(M.color,bN));bu=Y(M.alpha,bD);by=bt===undefined?bu!=0:!!bt;A=F(bh(M.tooltext),bG.dataLabels(bS));b1=bL?A:aM;bq.data.push({displayValue:b1,toolText:A,y:bS,color:{FCcolor:{color:bY,alpha:bu}}});this.pointValueWatcher(bF,bS,bE,bB,bK,0,bI)}else{bq.data.push({y:null})}}}}return bq},categoryAdder:function(bF,bq){var bs,bD=0,Z,bu=bq[ai],br=bq.xAxis,A,by=bu.x,bC=bF.chart,bz=bq.chart,bv=B(bC.showlabels,1),bE=B(bC.pixelsperpoint,15);bz.zoomType=\"x\";br.maxZoom=2;if(bE<=0){bE=15}bu.pixelsperpoint=bE;if(bF.categories&&bF.categories[0]&&bF.categories[0].category){if(bF.categories[0].font){bq.xAxis.labels.style.fontFamily=bF.categories[0].font}if((Z=B(bF.categories[0].fontsize))!==undefined){if(Z<1){Z=1}bq.xAxis.labels.style.fontSize=Z+aq;ak(bq.xAxis.labels.style)}if(bF.categories[0].fontcolor){bq.xAxis.labels.style.color=bF.categories[0].fontcolor.split(ax)[0].replace(/^\\#?/,\"#\")}var bt=bq[ai].oriCatTmp,bw=bF.categories[0],bA=bw.category;var L=B(bC.compactdatamode,0),M=Y(bC.dataseparator,\"|\");if(L){var bp=bA.split(M);for(bs=0;bs<bp.length;bs+=1){A=bh(f(bp[bs],bp[bs].name));bt[bD]=A;bD+=1}}else{for(bs=0;bs<bA.length;bs+=1){if(!bA[bs].vline){A=(bA[bs].showlabel===\"0\")?aM:bh(f(bF.categories[0].category[bs].label,bF.categories[0].category[bs].name));bt[bD]=f(bh(bF.categories[0].category[bs].tooltext),A);bD+=1}}}if(bv){br.categories=bt}}var bB=(bD-1)||1;bu.displayStartIndex=B(bC.displaystartindex,1)-1;bu.displayEndIndex=B(bC.displayendindex,bD||2)-1;if(bu.displayStartIndex<0||bu.displayStartIndex>=bB){bu.displayStartIndex=0}if(bu.displayEndIndex<=bu.displayStartIndex||bu.displayEndIndex>bB){bu.displayEndIndex=bB}by.catCount=bD;bz.hasScroll=true;var bx=bz.stepZoom={};bx.pixelsperpoint=bu.pixelsperpoint;bx.displayStartIndex=bu.displayStartIndex;bx.displayEndIndex=bu.displayEndIndex;bx.scrollColor=a3(Y(bC.scrollcolor,bg.altHGridColor[bq.chart.paletteIndex]));bx.scrollHeight=B(bC.scrollheight,16);bx.scrollPadding=B(bC.scrollpadding,bq.chart.plotBorderWidth);bx.scrollBtnWidth=B(bC.scrollbtnwidth,bC.scrollheight,16);bx.scrollBtnPadding=B(bC.scrollbtnpadding,0);bu.marginBottomExtraSpace+=bx.scrollPadding+bx.scrollHeight},postSeriesAddition:function(bp,br,L,bs){var A=br.chart,bt=bp.chart,bq=bt.stepZoom,Z=this.paletteIndex,M=bg.canvasBorderColor[Z];if(bq){bq.allowPinMode=B(A.allowpinmode,1);bq.skipOverlapPoints=!!B(A.skipoverlappoints,1);bq.showToolBarButtonTooltext=B(A.showtoolbarbuttontooltext,1);bq.btnResetChartTooltext=Y(A.btnresetcharttooltext,\"Reset Zoom\");bq.btnZoomOutTooltext=Y(A.btnzoomouttooltext,\"Zoom out one level\");bq.btnSwitchToZoomModeTooltext=Y(A.btnswitchtozoommodetooltext,\"Select a subset of data to zoom into it for detailed view\");bq.btnSwitchToPinModeTooltext=Y(A.btnswitchtopinmodetooltext,\"Switch to Pin Mode\");bq.pinLineThicknessDelta=B(A.pinlinethicknessdelta,0);bq.pinPaneBorderThickness=B(A.pinpaneborderthickness,1);bq.pinPaneBorderColor=q(Y(A.pinpanebordercolor,M),B(A.pinpaneborderalpha,15));bq.pinPaneBgColor=q(Y(A.pinpanebgcolor,M),B(A.pinpanebgalpha,15))}},placeHorizontalAxis:function(cl,b1,ci,bK,cu,bB,br){var co=ci[ai],b4,Z,cE,bM,bC,bE,bu,b8,bx,ce,bU,ck=4,bs,bT=0,bX=0,L=10,cD=1,cJ=0,b6=0,bp=0,bL=\"W\",cb=false,bP=false,cz=false,cj=B(bK.chart.labelstep,0),bW=b1.labelDisplay,cA=b1.rotateLabels,cf=b1.horizontalLabelPadding,M=co.marginBottomExtraSpace,bH=ci.chart.marginLeft,cI=ci.chart.marginRight,bv=co.smartLabel,bI=co.pixelsperpoint,cw=b1.catCount,b0=b1.slantLabels,bR=cu/(cl.max-cl.min),cd=0,cG=0,bN={w:0,h:0};if(cl.labels.style){bE=cl.labels.style;bv.setStyle(bE);b8=bv.getOriSize(bL);L=b8.height;bu=b8.width+ck;bs=bv.getOriSize(\"WWW\").width+ck}var cc,cx,bG,cg,cB,bt,bZ,bA,bD,cs=[],bz=[],b2,bY=0,ct=0,cH,b7,cC,b5,cv,cy,bq,bF=b1.horizontalAxisNamePadding,cp=0,ch=b1.staggerLines,cq=cd,A,b9,bO;if(cl.title&&cl.title.text!=aM){bE=cl.title.style;bv.setStyle(bE);b6=bv.getOriSize(bL).height;cl.title.rotation=0;bM=bv.getSmartText(cl.title.text,cu,bB);bX=bM.height}if(ci.chart.marginLeft!=parseInt(bK.chart.chartleftmargin,10)){cg=true}if(ci.chart.marginRight!=parseInt(bK.chart.chartrightmargin,10)){cB=true}bt=cu-br;switch(bW){case an:cz=true;cb=true;if(cA){if(b0){bT=300}else{bT=270}b8=L;L=bu;bu=b8;cb=true}break;case\"rotate\":if(b0){bT=300}else{bT=270}b8=L;L=bu;bu=b8;cb=true;break;case\"stagger\":cb=true;bP=true;bx=Math.floor((bB-b6)/L);if(bx<ch){ch=bx}break;default:if(cA){if(b0){bT=300}else{bT=270}b8=L;L=bu;bu=b8}}bZ=0;bA=cl.plotLines;for(bq=bA.length;bZ<bq;bZ+=1){Z=bA[bZ];if(Z&&Z.label&&(typeof Z.label.text!==a1)){bz.push(Z)}}bD=cl.plotBands;for(bZ=0,bq=bD.length;bZ<bq;bZ+=1){Z=bD[bZ];if(Z&&Z.label&&(typeof Z.label.text!==a1)){bz.push(Z)}}bA=cl.categories||[];for(bZ=0,bq=bA.length;bZ<bq;bZ+=1){cs.push({value:bZ,label:{text:bA[bZ]}})}cH=cs.length-1;b7=cs.length;if(bP){if(ch>b7){ch=b7}else{if(ch<2){ch=2}}}if(b7){if(cl.scroll&&cl.scroll.viewPortMin&&cl.scroll.viewPortMax){cc=cl.scroll.viewPortMin;cx=cl.scroll.viewPortMax;cg=false;cB=false}else{cc=cl.min;cx=cl.max}cC=co.width*0.08,b5=(cs[0].value-cc)*bR,cv=(cx-cs[cH].value)*bR;co.maxLabelWidth=cC;co.visibleLabelDistance=co.width*0.1;if(bW===\"auto\"){if((cC>bR)&&(cC<bs)){if(b0){bT=300}else{bT=270;co.visibleLabelDistance=co.width*0.07;co.maxLabelWidth=L}b8=L;L=bu;bu=b8;cb=true}}else{if(bW===\"rotate\"){if(!b0){co.visibleLabelDistance=co.width*0.07;co.maxLabelWidth=L}}else{if(bW===\"stagger\"){cC*=ch}}}ce=(b5+bH)*2;var bw=bA[0];if(bw){if(cl.labels.style){bv.setStyle(cl.labels.style)}bU=Math.min(cC,bv.getOriSize(bw).width+ck);if(bU>ce){bY=(bU-ce)/2;cu-=bY;bt-=bY;ci.chart.marginLeft+=bY}}ce=(cv+cI)*2;bw=bA[cH];if(bw){if(cl.labels.style){bv.setStyle(cl.labels.style)}bU=Math.min(cC,bv.getOriSize(bC).width+ck);if(bU>ce){ct=(bU-ce)/2;cu-=ct;bt-=ct;ci.chart.marginRight+=ct}}if(!cz){if(!cj){cD=Math.max(1,Math.ceil(bu/cC));cC*=cD}else{cC*=cj;cC=Math.max(cC,bu)}}for(cE=0;cE<b7;cE+=1){Z=cs[cE];if(cE%cD&&Z.label){Z.label.text=aM;continue}if(Z&&Z.label&&F(Z.label.text)!==undefined){bC=Z.label;if(bC.style&&bC.style!==bE){bE=bC.style;bv.setStyle(bE)}if(bT&&cz){b4=bv.getOriSize(bC.text);bN.w=aS(bN.w,b4.width+ck);bN.h=aS(bN.h,b4.height)}else{if(!cz){if(bT||bP){b4=bv.getOriSize(bC.text)}else{b4=bv.getSmartText(bC.text,(cC-ck),bB,cb)}bN.w=Math.max(bN.w,b4.width+ck);bN.h=Math.max(bN.h,b4.height)}}}}}for(cE=0,bq=bz.length;cE<bq;cE+=1){Z=bz[cE];if(Z&&Z.label&&F(Z.label.text)!==undefined){bC=Z.label;if(bC.style&&bC.style!==bE){bE=bC.style;bv.setStyle(bE)}b4=bv.getOriSize(bC.text);if(bC.verticalAlign===aK){cd=aS(cd,b4.height)}else{cG=aS(cG,b4.height)}}}if(cl.scroll&&cl.scroll.enabled&&!bT&&!cz){b9=bN.w/2;if(ci.chart.marginLeft<b9){bO=b9-ci.chart.marginLeft;if(bt>bO){cu-=bO;bt-=bO;ci.chart.marginLeft+=bO}}if(ci.chart.marginRight<b9){bO=b9-ci.chart.marginRight;if(bt>bO){cu-=bO;bt-=bO;ci.chart.marginRight+=bO}}}if(cz){cp=L;if(bT){cp=bN.w}}else{if(bT){cp=bN.w}else{if(bP){cp=ch*L}else{cp=bN.h}}}if(cp>0){cq+=cf+cp}if(bX>0){cq+=bX+bF}var bQ,cn=cG+cq+2;b8=0;if(cn>bB){bQ=cn-bB;if(bF>bQ){bF-=bQ;bQ=0}else{bQ-=bF;bF=0;if(cf>bQ){cf-=bQ;bQ=0}else{bQ-=cf;cf=0}}if(cG>bQ){cG-=bQ;bQ=0}else{if(cG>0){bQ-=cG;cG=0}if(bQ>0){if(cd>bQ){cd-=bQ;bQ=0}else{if(cd>0){bQ-=cd;cd=0}if(bQ>0){if((b8=bX-b6)>bQ){bX-=bQ;bQ=0}else{bQ-=b8;bX=b6;if(bQ>0){if((b8=cp-L)>bQ){cp-=bQ;bQ=0}else{bQ-=b8;cp=L;if(bQ>0){bQ-=bX+bF;bX=0;if(bQ>0){bQ-=cp;cp=0;if(bQ>0){cf-=bQ}}}}}}}}}}}cf+=M;var cK=co.is3d?-ci.chart.xDepth:0,ca=cp+cf,by,bV,bS,bJ,cF=cK,cr=L*0.5;cJ=L+cf,bq=cs.length;bp=0;if(bT){bS=cC;bJ=cp-ck;cl.labels.rotation=bT;cl.labels.align=\"right\";cl.labels.y=cf-M+ck;cl.labels.x=(bu/2)}else{if(bP){bS=L;bJ=(cC*ch)-ck}else{bS=cp;bJ=cC-ck}}for(cE=0;cE<bq;cE+=cD){Z=cs[cE];if(Z&&Z.label&&F(Z.label.text)!==undefined){bC=Z.label;if(bC.style&&bC.style!==bE){bE=bC.style;bv.setStyle(bE)}if(!cz){b4=bv.getSmartText(bC.text,bJ,bS,cb);cl.categories[cE]=b4.text}bp+=1}}bq=bz.length;var b3=0,cm=0;for(cE=0;cE<bq;cE+=1){Z=bz[cE].plotObj?bz[cE].plotObj:bz[cE];if(Z&&Z.label&&F(Z.label.text)!==undefined){bC=Z.label;if(bC.style&&bC.style!==bE){bE=bC.style;bv.setStyle(bE)}if(bC.verticalAlign===aK){b4=bv.getSmartText(bC.text,cu,cd,true);cm=Math.max(cm,b4.height);bC.text=b4.text;bC.y=ca+bv.getOriSize(bL).height;bC.x=cF}else{b4=bv.getSmartText(bC.text,cu,cG,true);b3=Math.max(b3,b4.height);bC.text=b4.text;bC.y=-((cG-bv.getOriSize(bL).height)+cf+2)}}}if(bX>0){bv.setStyle(cl.title.style);bM=bv.getSmartText(cl.title.text,cu,bX);cl.title.text=bM.text;cl.title.margin=ca+cm+bF}cq=cm;if(cp>0){co.horizontalAxisHeight=cf+cp-M;cq+=co.horizontalAxisHeight}if(bX>0){cq+=bX+bF}ci.chart.marginBottom+=cq;if(b3>0){ci.chart.marginTop+=b3;cq+=b3}return cq},creditLabel:be,defaultPlotShadow:1},bc.msline);bc(\"ssgrid\",{standaloneInit:true,defaultSeriesType:\"ssgrid\",chart:function(A,M){var bN=this.containerElement,Z=this.dataObj,bu=this.chartInstance;Z=ag({},Z);Z.chart=Z.chart||Z.graph||{};delete Z.graph;var bv,bD,bQ,bs,bM=0,bU,bT,bF=[],bS=Z.chart,bY=Z.data,bB=bY&&bY.length,b0=this.smartLabel,bK=this.numberFormatter,bX=bN.offsetHeight,bA=bN.offsetWidth,bp,bO={},bW=0,bx=0,by,L=(bS.palette>0&&bS.palette<6?bS.palette:B(this.paletteIndex,1))-1,bJ={chart:{renderTo:bN,ignoreHiddenSeries:false,events:{},spacingTop:0,spacingRight:0,spacingBottom:0,spacingLeft:0,marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,borderRadius:0,borderColor:\"#000000\",borderWidth:1,defaultSeriesType:\"ssgrid\",style:{fontFamily:Y(bS.basefont,\"Verdana\"),fontSize:al(bS.basefontsize,20)+aq,color:Y(bS.basefontcolor,bg.baseFontColor[L]).replace(/^#?([a-f0-9]+)/ig,\"#$1\")},plotBackgroundColor:aA},labels:{smartLabel:b0},colors:[\"AFD8F8\",\"F6BD0F\",\"8BBA00\",\"FF8E46\",\"008E8E\",\"D64646\",\"8E468E\",\"588526\",\"B3AA00\",\"008ED6\",\"9D080D\",\"A186BE\",\"CC6600\",\"FDC689\",\"ABA000\",\"F26D7D\",\"FFF200\",\"0054A6\",\"F7941C\",\"CC3300\",\"006600\",\"663300\",\"6DCFF6\"],credits:{href:\"http://www.fusioncharts.com?BS=FCHSEvalMark\",text:\"FusionCharts\",enabled:this.creditLabel},legend:{enabled:false},series:[],subtitle:{text:aM},title:{text:aM},tooltip:{enabled:false},exporting:{buttons:{exportButton:{},printButton:{enabled:false}}}},bq=bJ.colors,bC=bJ.colors.length,bV=0,bP=0,bt=0,bz=0,bL=0,bI=0,bE=0,bw,bZ=bu.jsVars.cfgStore;bw=bJ.chart;ak(bJ.chart.style);bO.showPercentValues=B(bZ.showpercentvalues,bS.showpercentvalues,0);bO.numberItemsPerPage=Y(bZ.numberitemsperpage,bS.numberitemsperpage);bO.showShadow=B(bZ.showshadow,bS.showshadow,0);bO.baseFont=Y(bZ.basefont,bS.basefont,\"Verdana\");by=al(bZ.basefontsize,bS.basefontsize,10);bO.baseFontSize=by+aq;bO.baseFontColor=a3(Y(bZ.basefontcolor,bS.basefontcolor,bg.baseFontColor[L]));bO.alternateRowBgColor=a3(Y(bZ.alternaterowbgcolor,bS.alternaterowbgcolor,bg.altHGridColor[L]));bO.alternateRowBgAlpha=Y(bZ.alternaterowbgalpha,bS.alternaterowbgalpha,bg.altHGridAlpha[L])+aM;bO.listRowDividerThickness=B(bZ.listrowdividerthickness,bS.listrowdividerthickness,1);bO.listRowDividerColor=a3(Y(bZ.listrowdividercolor,bS.listrowdividercolor,bg.borderColor[L]));bO.listRowDividerAlpha=(B(bZ.listrowdivideralpha,bS.listrowdivideralpha,bg.altHGridAlpha[L])+15)+aM;bO.colorBoxWidth=B(bZ.colorboxwidth,bS.colorboxwidth,8);bO.colorBoxHeight=B(bZ.colorboxheight,bS.colorboxheight,8);bO.navButtonRadius=B(bZ.navbuttonradius,bS.navbuttonradius,7);bO.navButtonColor=a3(Y(bZ.navbuttoncolor,bS.navbuttoncolor,bg.canvasBorderColor[L]));bO.navButtonHoverColor=a3(Y(bZ.navbuttonhovercolor,bS.navbuttonhovercolor,bg.altHGridColor[L]));bO.textVerticalPadding=B(bZ.textverticalpadding,bS.textverticalpadding,3);bO.navButtonPadding=B(bZ.navbuttonpadding,bS.navbuttonpadding,5);bO.colorBoxPadding=B(bZ.colorboxpadding,bS.colorboxpadding,10);bO.valueColumnPadding=B(bZ.valuecolumnpadding,bS.valuecolumnpadding,10);bO.nameColumnPadding=B(bZ.namecolumnpadding,bS.namecolumnpadding,5);bO.borderThickness=B(bZ.borderthickness,bS.borderthickness,1);bO.borderColor=a3(Y(bZ.bordercolor,bS.bordercolor,bg.borderColor[L]));bO.borderAlpha=Y(bZ.borderalpha,bS.borderalpha,bg.borderAlpha[L])+aM;bO.bgColor=Y(bZ.bgcolor,bS.bgcolor,\"FFFFFF\");bO.bgAlpha=Y(bZ.bgalpha,bS.bgalpha,N);bO.bgRatio=Y(bZ.bgratio,bS.bgratio,N);bO.bgAngle=Y(bZ.bgangle,bS.bgangle,a);bw.borderRadius=bO.borderThickness/16;bw.borderWidth=bO.borderThickness;bw.borderColor={FCcolor:{color:bO.borderColor,alpha:bO.borderAlpha}};bw.backgroundColor={FCcolor:{color:bO.bgColor,alpha:bO.bgAlpha,ratio:bO.bgRatio,angle:bO.bgAngle}};bw.borderRadius=B(bS.borderradius,0);bs={fontFamily:bO.baseFont,fontSize:bO.baseFontSize,color:bO.baseFontColor};ak(bs);b0.setStyle(bs);for(bM=0;bM<bB;bM+=1){bv=bY[bM];bU=bK.getCleanValue(bv.value);bT=bh(f(bv.label,bv.name));bD=a3(Y(bv.color,bq[bM%bC]));bQ=Y(bv.alpha,bS.plotfillalpha,N);if(bT!=aM||bU!=null){bF.push({value:bU,label:bT,color:bD});bV=bV+bU;bE+=1}}for(bM=0;bM<bE;bM+=1){bv=bF[bM];bU=bv.value;bv.dataLabel=bv.label;bv.displayValue=bO.showPercentValues?bK.percentValue(bU/bV*100):bK.dataLabels(bU);bp=b0.getOriSize(bv.displayValue);bz=Math.max(bz,(bp.width+bO.valueColumnPadding))}if(bO.numberItemsPerPage){if(bO.numberItemsPerPage>=bE){bO.numberItemsPerPage=bE;bt=bX/bO.numberItemsPerPage;bP=bE}else{var bR=bX;bR=bR-2*(bO.navButtonPadding+bO.navButtonRadius);bP=bO.numberItemsPerPage;bt=bR/bP}}else{bW=parseInt(bs.lineHeight,10);bW=bW+2*bO.textVerticalPadding;bW=Math.max(bW,bO.colorBoxHeight);bx=bX/bW;if(bx>=bE){bt=(bX/bE);bP=bE}else{bR=bX;bR=bR-2*(bO.navButtonPadding+bO.navButtonRadius);bP=Math.floor(bR/bW);bt=bR/bP}}bL=bA-bO.colorBoxPadding-bO.colorBoxWidth-bO.nameColumnPadding-bz-bO.valueColumnPadding;bI=bO.colorBoxPadding+bO.colorBoxWidth+bO.nameColumnPadding;bw.height=bX;bw.width=bA;bw.rowHeight=bt;bw.labelX=bI;bw.colorBoxWidth=bO.colorBoxWidth;bw.colorBoxHeight=bO.colorBoxHeight;bw.colorBoxX=bO.colorBoxPadding;bw.valueX=bO.colorBoxPadding+bO.colorBoxWidth+bO.nameColumnPadding+bL+bO.valueColumnPadding;bw.valueColumnPadding=bO.valueColumnPadding;bw.textStyle=bs;bw.listRowDividerAttr={\"stroke-width\":bO.listRowDividerThickness,stroke:{FCcolor:{color:bO.listRowDividerColor,alpha:bO.listRowDividerAlpha}}};bw.alternateRowColor={FCcolor:{color:bO.alternateRowBgColor,alpha:bO.alternateRowBgAlpha}};bw.navButtonRadius=bO.navButtonRadius;bw.navButtonPadding=bO.navButtonPadding;bw.navButtonColor=bO.navButtonColor;bw.navButtonHoverColor=bO.navButtonHoverColor;bw.lineHeight=parseInt(bs.lineHeight,10);var bH=[],br=0,bG=true;for(bM=0;bM<bE&bP!=0;bM+=1){if(bM%bP==0){bH.push({data:[],visible:bG});bG=false;br+=1}bv=bF[bM];bH[br-1].data.push({label:b0.getSmartText(bv.dataLabel,bL,bt).text,displayValue:bv.displayValue,y:bv.value,color:bv.color})}bJ.series=bH;bJ.exporting.enabled=bS.exportenabled==\"1\"?true:false;bJ.exporting.buttons.exportButton.enabled=bS.exportshowmenuitem==\"0\"?false:true;bJ.exporting.filename=bS.exportfilename?bS.exportfilename:\"FusionCharts\";bJ.exporting.width=bA;return bJ},creditLabel:be},bc.base);bn.ssgrid=R(bn.pie,{states:{hover:{}}});var k=function(Z,bp){var A=Z.currentSeriesIndex,L=Z.series,M=bp?A-1:A+1;if(L[M]){L[A].hide();L[M].show();Z.currentSeriesIndex=M;aE(Z)}},aE=function(M){var br=M.series.length,A=M.options.chart,bp=A.rowHeight,L=M.currentSeriesIndex,Z=M.series[L].data.length*bp,bq=M.naviigator;bq.translate(0,Z);if(L===0){bq.navElePrv.hide()}else{bq.navElePrv.show()}if(L===br-1){bq.navEleNxt.hide()}else{bq.navEleNxt.show()}},p=function(bu){var bt=bu.renderer,bA=bu.options.chart,L=bA.width,bw=20,br=bA.navButtonRadius,bq=br*0.67,bv=bA.navButtonPadding+bq,Z=L-bw,M=bA.navButtonHoverColor,bx=bA.navButtonColor,A,bs,by,bz;if(bu.series.length>1){var bp=bu.naviigator=bt.g(\"navigator\").attr({zIndex:4}).add();bp.navElePrv=by=bt.g(\"navElePrv\").add(bp);A=bt.path([ay,bw,bv,az,bw+br+bq,bv-bq,bw+br,bv,bw+br+bq,bv+bq,\"Z\"]).attr({fill:bx}).add(by);bt.circle(bw+br,bv,br).attr({fill:aA,cursor:\"pointer\"}).on(\"mouseover\",function(){A.attr({fill:M,cursor:\"pointer\"})}).on(\"mouseout\",function(){A.attr({fill:bx})}).on(\"click\",function(){k(bu,true)}).add(by);bp.navEleNxt=bz=bt.g(\"navEleNxt\").add(bp);bs=bt.path([ay,Z,bv,az,Z-br-bq,bv-bq,Z-br,bv,Z-br-bq,bv+bq,\"Z\"]).attr({fill:bx,cursor:\"pointer\"}).add(bz);bt.circle(Z-br,bv,br).attr({fill:aA,cursor:\"pointer\"}).on(\"mouseover\",function(){bs.attr({fill:M})}).on(\"mouseout\",function(){bs.attr({fill:bx})}).on(\"click\",function(){k(bu)}).attr({fill:bx}).add(bz)}};var bm=G.extendClass(bd.pie,{type:\"ssgrid\",translate:function(){var bp=this,M=bp.chart.options.chart,Z=bp.data,bu=0,bs=0,L=M.width,bw=M.rowHeight,bt=M.colorBoxWidth,bq=M.colorBoxHeight,bv=M.colorBoxX,br=M.labelX,A=M.valueX;bj(Z,function(bx){bx.shapeType=\"rect\";bx.alternateGradientBox={x:bu,y:bs,width:L,height:bw,r:0};bx.rowDivider=[ay,bu,bs,az,L,bs];bx.colorBoxArgs={x:bv,y:bs+(bw/2)-(bq/2),width:bt,height:bq,r:0};bx.labelX=br;bx.valueX=A;bs+=bw});bp.options.lastRowDivider=[ay,bu,bs,az,L,bs]},drawPoints:function(){var bu=this,bA=bu.chart.options.chart,bz=bu.chart.renderer,bv,bs=bu.group,bq=bA.alternateRowColor,bt=bA.listRowDividerAttr,bC=bu.options.lastRowDivider,L=bA.rowHeight,bp=bA.textStyle,Z=bA.lineHeight,bx=bA.width,bD=bA.valueColumnPadding,M,A,bB,bE,bw,by,br;bj(bu.data,function(bF,bG){bv=bF.graphic;M=bF.rowDivider;A=bF.colorBoxArgs;bB=bF.alternateGradientBox;by=bF.valueX;if(bv){}else{bF.graphic=bz.path(M).attr(bt).add(bs);if(bG%2==0){bz.rect(bB).attr({fill:bq,\"stroke-width\":0}).add(bs)}bF.symbol=bz.rect(A).attr({fill:bF.color,\"stroke-width\":0,stroke:\"#000000\"}).add(bs);bE=bz.text(bF.label,bF.labelX).css(bp).add(bs);bw=(M[2]+(L/2)+Z)-((bE.getBBox().height/2));bE.attr({y:bw});bE=bz.text(bF.displayValue,by).css(bp).add(bs);br=bE.getBBox();bw=(M[2]+(L/2)+Z)-((br.height/2));bE.attr({y:bw,x:by+((bx-by-bD)-br.width)})}});bz.path(bC).attr(bt).add(bs)},render:function(){var L=this,bp,M=L.chart,Z=M.renderer,A=L.options;if(!M.naviigator){p(M)}if(!L.group){bp=L.group=Z.g(\"series\");bp.attr({visibility:L.visible?ap:av,zIndex:A.zIndex}).translate(M.plotLeft,M.plotTop).add(M.seriesGroup)}this.drawPoints();this.drawDataLabels();if(L.visible){M.currentSeriesIndex=L.index;if(M.naviigator){aE(M)}}if(L.options.animation&&L.animate){L.animate()}L.isDirty=false},drawDataLabels:function(){},drawTracker:function(){},animate:function(A){}});bd.ssgrid=bm;bn.bubble=R(bn.scatter,{states:{hover:{}}});var aU=G.extendClass(bd.scatter,{type:\"bubble\",drawPoints:function(){var bs=this,bt,bC=bs.data,bv=bs.chart,bp,M,by,bw,Z,bu,bA=bs.chart.plotWidth,L=bs.chart.plotHeight,bz=bs.options.zMax,bB=bs.options.bubbleScale,bx,bq,br,A;bx=((bA>L)?L:bA)/8;bq=ah(bz);if(bs.options.marker.enabled){by=bC.length;while(by--){bw=bC[by];bp=bw.plotX;M=bw.plotY;bu=bw.graphic;if(M!==aF&&!isNaN(M)){bt=bw.pointAttr[bw.selected?P:ab];br=ah(bw.z);A=O(br*bx/bq)*bB;bt.r=Z=(A||0);if(bu){bu.animate({x:bp,y:M,r:Z})}else{bw.graphic=bv.renderer.symbol(b(bw.marker&&bw.marker.symbol,bs.symbol),bp,M,Z).attr(bt).add(bs.group)}}}}}});bd.bubble=aU;bn.stepzoom=R(bn.line,{states:{hover:{}}});var E,o=[];var aX=function(M,bI,bp){if(M<=0.01){M=0}var bs=this,bz=bs.stepZoom,br=bs.series,bx=bs.plotWidth,bB=bs.options._FCconf.clipExcessWidth,A=bx/2,bQ=br.length,L=B(M,bz.scrollPosition,0),bO=bz.scrollablePXLength,bH=bO*L,bu=bz.zoomHistory[bz.currentZoomLevelIndex],by=bu.seriesStart,Z=by+(Math.ceil(bH/bu.visiblePointDistance)*bu.stepping),bq=by+(Math.floor((bH+bx)/bu.visiblePointDistance)*bu.stepping),bP=0,bt,bS=\"translateX\",bK=\"x\",bF,bw,bM,bJ,bG,bR,bA,bD,bN=bs.plotLeft-bH,bC,bv,bE,bL=bs.plotTop-bP;bz.catGroup.attr(bS,bN);bz.catClipRect.attr(bK,bH-(bB/2));if(bs.clipRect){bs.clipRect.attr(bK,bH)}bF=bQ;while(bF--){bw=br[bF];if(bw.group){bw.group.attr(bS,bN)}if(bw.dataLabelsGroup){bw.dataLabelsGroup.attr(bS,bN)}if(bw.clipRect){bw.clipRect.attr(bK,bH)}if(bp){bt=aa.min(20,A);bR=bw.data;bG=bR.length;for(bD=0;bD<bG;bD+=1){bA=bR[bD];if(bA.y!==null&&bA.tooltipPos){bM=bA.plotX-bH;if(bM>=0&&bM<=A){bM+=bt}else{if(bM>A&&bM<=bx){bM-=bt}}bA.tooltipPos[0]=bM}}}}bu.scrollPosition=L};var a8=G.extendClass(bd.line,{type:\"stepzoom\",translate:function(){var bq=this,bu=bq.chart,bt=bq.options.stacking,bs=bq.xAxis.categories,A=bq.yAxis,bp=bq.data,br=bp.length;while(br--){var by=bp[br],M=by.x,bw=by.y,bv=by.low,bx=A.stacks[(bw<0?\"-\":\"\")+bq.stackKey],bz,Z;by.plotX=bq.xAxis.translate(M);if(bt&&bx&&bx[M]){bz=bx[M];Z=bz.total;var L=A.options.min;bv=bz.cum;bz.cum+=bw;bw=aS(L,bv+bw);bv=aS(L,bv);if(bt===\"percent\"){bv=Z?bv*100/Z:0;bw=Z?bw*100/Z:0}by.percentage=Z?by.y*100/Z:0;by.stackTotal=Z}if(n(bv)){by.yBottom=A.translate(bv,0,1,0,1)}if(bw!==null){by.plotY=A.translate(bw,0,1,0,1)}by.clientX=bu.inverted?bu.plotHeight-by.plotX:by.plotX;by.category=bs&&bs[by.x]!==aF?bs[by.x]:by.x}},drawPoints:function(){var br=this,by=br.options,b4=br.chart,bI=b4.renderer,bC=b4.options.chart,bA=b4.stepZoom,bx=by.dataLabels,bS=+new Date(),b3=br.data,bu=br.dataLabelsGroup,bv=bA.zoomHistory[bA.currentZoomLevelIndex],bQ=bv.perPointPixelDistance,bT=bA.scrollPosition*bA.scrollablePXLength,bE=bv.stepping,bU=bv.seriesStart,bN=by.marker.enabled,bB=bx.color,A=bx.style,bF=bx.y===null,bt=b4.plotHeight,Z=v(A.fontSize),bY=bC.valuePadding,bL=bC.valuePosition,bO,bM,b0,bD,bq,bV,L,bz,bW,bw,bp,M,b2,bX,bH,bs,b1,bZ,bR,bJ,bG,bP=br.group,bK=bP.element;bx.rotation=bD=(bC.rotateValues==1)?270:undefined;if(!bu){bu=br.dataLabelsGroup=bI.g(\"data-labels\").attr({visibility:br.visible?ap:av,zIndex:6}).translate(b4.plotLeft-bT,b4.plotTop).add();if(bC.hasScroll){bu.clip(br.clipRect)}}bG=bu.element;if(bB===\"auto\"){bB=null}A.color=b(bB,br.color);bX=b3.length;while(bX--){bH=b3[bX];bw=bX-bU;bp=bH.plotX=bw*bQ;M=bH.plotY;if((M!==aF&&!isNaN(M))){bs=bH.graphic;b2=!(bw<0||bw%bE!==0);bV=bx.align;L=(bF?(bH.y>=0?-6:12):bx.y)-bY;bz=bx.formatter.call(bH.getLabelConfig());bW=bH.pointAttr[bH.selected?P:ab];bR=bW.r;b1=bp+20;bZ=M-15;b1=b1<0?0:b1;bZ=bZ<0?0:bZ;bH.tooltipPos=[b1,bZ];bW.isTracker=bS;if(!bN){aC(bW,{fill:aG,stroke:aG,r:3})}if(bs){bs.attr({x:bp,y:M,r:bR})}else{bH.graphic=bs=b4.renderer.symbol(b(bH.marker&&bH.marker.symbol,br.symbol),bp,M,bR).on(a5?\"touchstart\":\"mouseover\",function(b8){var b7=(b8.currentTarget?b8.currentTarget:b8.srcElement),b5,b6;if(!(b5=b7.point)){return}b6=b5.series;bJ=b8.relatedTarget||b8.fromElement;if(b4.hoverSeries!==b6&&ac(bJ,\"isTracker\")!==bS){b6.onMouseOver()}b5.onMouseOver()}).on(\"mouseout\",function(b7){var b6=(b7.currentTarget)?b7.currentTarget:b7.srcElement,b5=b6.point&&b6.point.series;if(b5&&!b5.options.stickyTracking){bJ=b7.relatedTarget||b7.toElement;if(ac(bJ,\"isTracker\")!==bS){b5.onMouseOut()}}}).attr(bW);if(b2){bs.element.point=bH;bK.appendChild(bs.element);bs.added=true}else{bs._parentNode=bP;bI.pending.push(bs)}if(!b2||(a0&&bK.gVis===av)){bs.attr({visibility:av})}}if(bz!=null){bO=bp+bx.x;bM=M+L;switch(bL){case\"above\":bM=M+L;break;case\"below\":bM=M-L+Z;break;default:b0=b3[bX-1];bM=M+(((b0&&b0.plotY)<=bH.plotY)?-(L-Z):L);break}if(bM>bt){bM=M+L}if(bM<Z){bM=M-L+Z}if((bq=bH.dataLabel)){bq.attr({text:bz}).animate({x:bO,y:bM})}else{if(bz!==aF&&bz!==null){bq=bH.dataLabel=bI.text(bz,bO,bM).css(A);if((bq.textStr!==undefined)&&c){bI.buildText(bq)}if(b2){bG.appendChild(bq.element);bq.added=true;bq.attr({align:bV,rotation:bD})}else{bq._parentNode=bu;bI.pending.push(bq)}if(!b2||(a0&&bG.gVis===av)){bq.attr({visibility:av})}}}}}}},drawGraph:function(){var bw=this,M=bw.options,bB=bw.chart,br=bB.options.chart&&bB.options.chart.stepZoom,bx=[],bu=bw.group,bG=M.lineColor||bw.color,A=M.lineWidth,bt=M.dashStyle,bE=bB.renderer,bC=[],bI=bw.data,L=M.connectNullData,bA;var bD=bB.stepZoom.zoomHistory[bB.stepZoom.currentZoomLevelIndex],bH,bF,Z=0,by=[],bz=true,bs,bp=br.skipOverlapPoints,bv=bp?bD.stepping:1;for(bH=bD.seriesStart;bH<bI.length;bH+=bv,Z+=bD.visiblePointDistance){bF=bI[bH];if(n(bF&&bF.plotY)){if(bs){bx.push(ay,by[0],by[1],az);bs=false}if(bz){bs=true;bz=false;by[0]=Z;by[1]=bF.plotY}else{bx.push(Z,bF.plotY)}}else{if(!L){bz=true;bs=false}}}bw.graphPath=bx;bw.singlePoints=bC;var bq=bw.graphLine;bA={stroke:bG,\"stroke-width\":A,\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",dashstyle:bt};if(bq){bw.graphLine.animate({d:bx})}else{bw.graphLine=bE.path(bx).attr(bA).add(bu).shadow(M.shadow,bw.shadowGroup,M.shadow)}},render:function(){var bq=this,cd=bq.chart,bH=cd.stepZoom,bV=cd.renderer,cc=cd.options.chart,bL=cc.stepZoom,b2=cd.options._FCconf,cb=bq.data,bp,b0;if(!cd.stepZoom){var M=cb.length-1,bw=B(bL.pixelsperpoint,30),br=B(bL.displayStartIndex,0),ch=B(bL.displayEndIndex,M),L=cd.plotWidth,bD=cd.plotLeft,bB=bL.scrollHeight,ce=cd.plotHeight+cd.plotTop+B(bL.scrollPadding,0),bU=ch-br,bY=L/bU,bR=b2.maxLabelWidth,bu=b2.visibleLabelDistance,b5=bY<bu?bl(bu/bY):1,bS=bY<bw?bl(bw/bY):1,b7,ci,b3,bO,bt,bK,b1,bx;bY=L/(bU-(bU%bS));b1=b2.clipExcessWidth=bR||0;b7=br%bS;ci=(M-(M%bS))||1;bK=ci-b7,bt=bK*bY;bO=L/bt;bp=bt-L;if(bp>0){b3=((br-b7)*bY)/(bt-L)}else{b3=0}b0=cc.plotBorderWidth;bx=bV.scroller(bD-b0,ce,L+b0+b0,bB,true,{size:bL.scrollBtnWidth,padding:bL.scrollBtnPadding},false).attr({fill:bL.scrollColor}).setScrollRatio(bO).callback(function(cl,ck,cj){aX.call(cd,cl,ck,cj)}).add(cd.seriesGroup);cd.stepZoom=bH={zoomHistory:[{seriesStart:b7,seriesEnd:ci,stepping:bS,perPointPixelDistance:bY,visiblePointDistance:bS*bY,seriesConf:[],scrollRatio:bO,scrollPosition:b3,scrollablePXLength:bp}],currentZoomLevelIndex:0,pixelsPerPoint:bw,displayStartIndex:br,displayEndIndex:ch,scrollRatio:1,maxIndex:M,scrollPosition:b3,scrollablePXLength:bp,scroller:bx};var bF=bq.xAxis,bC=bF.options,bE=bF.categories,Z=bC.labels,bv,bN,bP,b9=0,by,bT,bA,bJ,bW,b6=ce+bB,b8=Z.align,bQ=Z.rotation,bZ=Z.style,bM=B(parseInt(bZ.lineHeight),12),ca,bX,b4;bH.catClipRect=bV.clipRect(-(b1/2),0,L+b1,cd.chartHeight);bH.catGroup=bX=bV.g(\"category-labels\").translate(bD,b6).clip(bH.catClipRect).add(cd.seriesGroup);b4=bH.catGroup.element;if(bE&&bE.length>0){bv=bH.catLabelArr=[];by=bE.length;bN=Z.y||0;bJ=Z.x||0;bH.catLabelClipXDisplacement=-(bM/2);bH.xDisplacement=bJ;for(b9=0;b9<by;b9+=1){ca=!(bA<0||bA%b5!==0);bT=bE[b9];if(n(bT)){bA=b9-b7;bP=(bA*bY)+bJ;bW=bv[b9]=bV.text(bT,bP,bN).css(bZ);if((bW.textStr!==undefined)&&c){bV.buildText(bW)}if(ca){b4.appendChild(bW.element);bW.added=true}else{bW._parentNode=bX;bV.pending.push(bW)}bW.attr({align:b8,rotation:bQ});if(!ca||(a0&&b4.gVis===av)){bW.attr({visibility:av})}}}}bx.setScrollPosition(b3)}var bz,bG=bq.options,cf=bG.animation,A=cf&&bq.animate,bI=A?(cf&&cf.duration)||500:0,cg=bq.clipRect,bs=bH.scrollPosition*bH.scrollablePXLength;if(!cg){cg=bq.clipRect=!cd.hasRendered&&cd.clipRect?cd.clipRect:bV.clipRect(bs,0,cd.plotSizeX,cd.plotSizeY);if(!cd.clipRect){cd.clipRect=cg}}if(!bq.group){bz=bq.group=bV.g(\"series\");bz.clip(bq.clipRect).attr({visibility:bq.visible?ap:av,zIndex:bG.zIndex}).translate(cd.plotLeft-bs,cd.plotTop).add(cd.seriesGroup)}if(A){bq.animate(true)}if(bq.drawGraph){bq.drawGraph()}bq.drawPoints();if(A){bq.animate()}setTimeout(function(){cg.isAnimating=false;bz=bq.group;if(bz&&cg!==cd.clipRect&&cg.renderer){bz.clip((bq.clipRect=cd.clipRect));cg.destroy()}},bI);bq.isDirty=false}});bd.stepzoom=a8;aC(G.Renderer.prototype.symbols,{pinModeIcon:function(by,bw,bI,bq,bz){var bs=by,br=bw-1.5,bt=bI,bE=bt*2/3,bD=bt-bE,bH=bs-bt,bG=bs+bt,bF=bs-bE,bC=bs+bE,bB=bs-0.5,bA=bs+0.5,bx=bA+1,bv=bA+1.5,bp=br-bt,Z=br+bE,M=br-bE,L=br+bD,A=br+br+0.5,bu=[ay,bH,bp,az,bF,M,bF,L,bH,Z,bB,Z,bs,A,bA,Z,bG,Z,bC,L,bC,M,bG,bp,bv,bp,bv,M,bv,L,bx,L,bx,M,bv,M,bv,bp,aj];return bu},zoomOutIcon:function(bv,bu,br,bq,bB){var bt=bv-1,bs=bu-1,bH=br-0.25,bC=43*bk,by=48*bk,bF=bt+bH*aW(bC),bD=bs+bH*U(bC),L=bt+bH*aW(by),A=bs+bH*U(by),bw=4,bx=45*bk,bG=bF+bw*aW(bx),bp=bD+bw*U(bx),bE=L+bw*aW(bx),Z=A+bw*U(bx),M=2;var bA=bB.getArcPath(bt,bs,bF,bD,L,A,bH,bH,0,1);var bz=[\"M\",bF,bD];bz=bz.concat(bA);bz=bz.concat(\"Z\",\"M\",bF+1,bD+1,\"L\",bG,bp,bE,Z,L+1,A+1,\"Z\",\"M\",bt-M,bs,\"L\",bt+M,bs,\"Z\");return bz},resetIcon:function(bt,bs,bp,bx,br){var A=bp,Z=bt-A,M=bs,L=(aJ+S)/2,bv=bt+A*aW(L),bu=bs+A*U(L),bq=A*2/3,bw=[ay,Z,M].concat(br.getArcPath(bt,bs,Z,M,bv,bu,A,A,1,1),[az,bv+bq,bu-1,bv+2,bu+bq-0.5,bv,bu]);return bw}});bn.pie3d=R(bn.pie,{states:{hover:{}}});function e(A){A=(A||0)%w;return A<0?w+A:A}function aT(A,L){return A<=S?A:(L<=S?L:(L>A?0:L))}function h(M,L){var A=L-M;return A<0?w-A:A}var aw=function(A,L){return aH(A[1]-(this.pageY||(this.originalEvent&&this.originalEvent.pageY))+L.top,A[0]-(this.pageX||(this.originalEvent&&this.originalEvent.pageX))+L.left)};function C(by,bx,bz,L,bw,bC,bB,bA,bu,Z){var bv,bt,bs,br,bq,bp,M,A;if(V(by)){bx=by.y;bz=by.r;L=by.innerR;bw=by.radiusYFactor;bC=by.depth;bB=by.seriesGroup;bA=by.renderer;by=by.x}if(bw<0||bw>=1){bw=0.6}by=by||0;bx=bx||0;bz=bz||1;L=L||0;bC=bC||0;this.renderer=bA;this.hasOnePoint=bu;this.use3DLighting=Z;this.cx=by;this.cy=bx;this.rx=bz;this.ry=bz*bw;this.radiusYFactor=bw;this.isDoughnut=L>0;this.innerRx=L;this.innerRy=L*bw;this.depth=bC;this.leftX=by-bz;this.rightX=by+bz;this.leftInnerX=by-L;this.rightInnerX=by+L;this.depthY=bx+bC;this.topY=bx-this.ry;this.bottomY=this.depthY+this.ry;this.bottomBorderGroup=bA.g(\"bottom-border\").add(bB).translate(0,bC),this.outerBackGroup=bA.g(\"outer-back-Side\").add(bB),this.slicingWallsBackGroup=bA.g(\"slicingWalls-back-Side\").add(bB),this.innerBackGroup=bA.g(\"inner-back-Side\").add(bB),this.innerFrontGroup=bA.g(\"inner-front-Side\").add(bB),this.slicingWallsFrontGroup=bA.g(\"slicingWalls-front-Side\").add(bB),this.topGroup=bA.g(\"top-Side\").add(bB);this.moveCmdArr=[ay];this.lineCmdArr=[az];this.closeCmdArr=[aj];this.centerPoint=[by,bx];this.leftPoint=[this.leftX,bx];this.topPoint=[by,this.topY];this.rightPoint=[this.rightX,bx];this.bottomPoint=[by,bx+this.ry];this.leftDepthPoint=[this.leftX,this.depthY];this.rightDepthPoint=[this.rightX,this.depthY];this.leftInnerPoint=[this.leftInnerX,bx];this.rightInnerPoint=[this.rightInnerX,bx];this.leftInnerDepthPoint=[this.leftInnerX,this.depthY];this.rightInnerDepthPoint=[this.rightInnerX,this.depthY];this.pointElemStore=[];this.slicingWallsArr=[];bv=[aI,this.rx,this.ry,0,0,1,this.rightX,bx];bt=[aI,this.rx,this.ry,0,0,1,this.leftX,bx];bs=[aI,this.rx,this.ry,0,0,0,this.rightX,this.depthY];br=[aI,this.rx,this.ry,0,0,0,this.leftX,this.depthY];bq=[aI,this.innerRx,this.innerRy,0,0,0,this.rightInnerX,bx];bp=[aI,this.innerRx,this.innerRy,0,0,0,this.leftInnerX,bx];M=[aI,this.innerRx,this.innerRy,0,0,1,this.rightInnerX,this.depthY];A=[aI,this.innerRx,this.innerRy,0,0,1,this.leftInnerX,this.depthY];if(this.isDoughnut){this.topBorderPath=this.moveCmdArr.concat(this.leftPoint,bv,bt,this.moveCmdArr,this.leftInnerPoint,bq,bp);this.topPath=this.moveCmdArr.concat(this.leftPoint,bv,bt,this.lineCmdArr,this.leftInnerPoint,bq,bp,this.closeCmdArr);this.innerFrontPath=this.moveCmdArr.concat(this.leftInnerPoint,bq,this.lineCmdArr,this.rightInnerDepthPoint,A,this.closeCmdArr);this.innerBackPath=this.moveCmdArr.concat(this.rightInnerPoint,bp,this.lineCmdArr,this.leftInnerDepthPoint,M,this.closeCmdArr)}else{this.topPath=this.moveCmdArr.concat(this.leftPoint,bv,bt,this.closeCmdArr);this.topBorderPath=this.topPath}this.outerBackPath=this.moveCmdArr.concat(this.leftPoint,bv,this.lineCmdArr,this.rightDepthPoint,br,this.closeCmdArr);this.outerFrontPath=this.moveCmdArr.concat(this.rightPoint,bt,this.lineCmdArr,this.leftDepthPoint,bs,this.closeCmdArr);this.clipPathforOuter=[ay,this.leftX,this.topY,az,this.rightX,this.topY,this.rightX,this.bottomY,this.leftX,this.bottomY,aj];this.clipPathforInner=[ay,this.leftInnerX,this.topY,az,this.rightInnerX,this.topY,this.rightInnerX,this.bottomY,this.leftInnerX,this.bottomY,aj];this.clipPathforNoClip=[ay,this.leftInnerX,this.topY,az,this.leftInnerX,this.bottomY,aj]}C.prototype={parseColor:function(bs,br){var bu,bt,bp,M,A,by=br/2,bq,Z,bw,bv,L,bx;if(this.use3DLighting){bu=ar(bs,80);bt=ar(bs,75);bp=a2(bs,85);M=a2(bs,70);A=a2(bs,40)}else{bu=ar(bs,90);bt=ar(bs,87);bp=a2(bs,93);M=a2(bs,87);A=a2(bs,80)}bq=bt+ax+bp+ax+M+ax+bp+ax+bt;bw=br+ax+br+ax+br+ax+br+ax+br;Z=bt+ax+bs+ax+bp+ax+bs+ax+bt;bv=by+ax+by+ax+by+ax+by+ax+by;L=bt+ax+bs+ax+A+ax+bs+ax+bt;if(c){bx={FCcolor:{gradientUnits:\"objectBoundingBox\",radialGradient:true,cx:0.3,cy:0.95,r:1,color:M+ax+bp+ax+bt,alpha:br+ax+br+ax+br,ratio:\"0,10,90\"}}}else{bx={FCcolor:{gradientUnits:\"objectBoundingBox\",color:M+ax+M+ax+bp+ax+bt,alpha:br+ax+br+ax+br+ax+br,angle:-72,ratio:\"0,8,15,77\"}}}return{frontOuter:{FCcolor:{gradientUnits:\"objectBoundingBox\",x1:0,y1:0,x2:1,y2:0,color:bq,alpha:bw,angle:0,ratio:\"0,25,5,5,65\"}},backOuter:{FCcolor:{gradientUnits:\"objectBoundingBox\",x1:0,y1:0,x2:1,y2:0,color:L,alpha:bv,angle:0,ratio:\"0,62,8,8,22\"}},frontInner:{FCcolor:{gradientUnits:\"objectBoundingBox\",x1:0,y1:0,x2:1,y2:0,color:Z,alpha:bv,angle:0,ratio:\"0,25,5,5,65\"}},backInner:{FCcolor:{gradientUnits:\"objectBoundingBox\",x1:0,y1:0,x2:1,y2:0,color:bq,alpha:bw,angle:0,ratio:\"0,62,8,8,22\"}},top:bx,bottom:q(bs,by),startSlice:q(bu,br),endSlice:q(bu,br)}},rotate:function(bq){if(!this.hasOnePoint){var Z=this.pointElemStore,L=0,bp=Z.length,A,M;for(;L<bp;L+=1){A=Z[L];M=A._confObject;M.start+=bq;M.end+=bq;this.updateSliceConf(M)}this.refreshDrawing()}},refreshDrawing:(function(){var A=function(bs){var L,bp,bq,br=bs[0]&&bs[0]._conf.index,Z,M;bq=br<=S;for(bp=1,L=bs.length;bp<L;bp+=1){M=bs[bp]._conf.index;Z=M<=S;if(Z!=bq||M<br){return bp}}return 0};return function(){var bq=this.slicingWallsArr,bs=0,L,br=bq.length,bu,bv=null,bt=null,bp,Z=this.slicingWallsFrontGroup.element,M=this.slicingWallsBackGroup.element;bu=A(bq);for(;bs<br;bs+=1,bu+=1){if(bu===br){bu=0}L=bq[bu],bp=L._conf.index;if(bp<aJ){Z.appendChild(L.element)}else{if(bp<=S){Z.insertBefore(L.element,bv);bv=L.element}else{if(bp<g){M.insertBefore(L.element,bt);bt=L.element}else{M.appendChild(L.element)}}}}}})(),updateSliceConf:function(bD,A){var bB=bD.start,bS=bD.end,bN=e(bB),bC=e(bS),bt,bR,b4,b8,L,bF,bE,cg,cf,cb,ca,b3,b2,b6,b5,ce,bw,bK=this.cx,bH=this.cy,bP=this.rx,bO=this.ry,bp=bP+2,Z=bO+2,bs=this.innerRx,br=this.innerRy,bu=this.depth,bU=this.depthY,bY=this.renderer,bq=bD.elements,cd,bJ,bG,bv;bR=aW(bN);b4=U(bN);b8=aW(bC);L=U(bC);bF=bK+(bP*bR);bE=bH+(bO*b4);cg=bK+(bp*bR);cf=bH+(Z*b4);cd=bE+bu;bJ=bK+(bP*b8);bG=bH+(bO*L);cb=bK+(bp*b8);ca=bH+(Z*L);bv=bG+bu;if(this.isDoughnut){b3=bK+(bs*bR);b2=bH+(br*b4);ce=b2+bu;b6=bK+(bs*b8);b5=bH+(br*L);bw=b5+bu;bD.startSlice=[ay,bF,bE,az,bF,cd,b3,ce,b3,b2,aj];bD.endSlice=[ay,bJ,bG,az,bJ,bv,b6,bw,b6,b5,aj]}else{bD.startSlice=[ay,bF,bE,az,bF,cd,bK,bU,bK,bH,aj];bD.endSlice=[ay,bJ,bG,az,bJ,bv,bK,bU,bK,bH,aj]}if(c){if(bD&&bD.clipTopPath){bD.clipTopPath[1]=cg;bD.clipTopPath[2]=cf;bD.clipTopPath[9]=cb;bD.clipTopPath[10]=ca}else{bD.clipTopPath=[ay,cg,cf,aI,bp,Z,0,0,1,cb,ca,az,this.cx,this.cy,aj]}bD.clipOuterFrontPath1=this.clipPathforNoClip;if(bB!=bS){if(bN>bC){if(bN<S){bD.clipOuterFrontPath1=[ay,this.leftX,this.topY,az,bF,this.topY,bF,this.bottomY,this.leftX,this.bottomY,aj];bD.clipOuterFrontPath=[ay,bJ,this.topY,az,this.rightX,this.topY,this.rightX,this.bottomY,bJ,this.bottomY,aj];bD.clipOuterBackPath=this.clipPathforOuter;if(this.isDoughnut){bD.clipInnerBackPath=this.clipPathforInner;bD.clipInnerFrontPath=[ay,this.leftInnerX,this.topY,az,b3,this.topY,b3,this.bottomY,this.leftInnerX,this.bottomY,aj,ay,b6,this.topY,az,this.rightInnerX,this.topY,this.rightInnerX,this.bottomY,b6,this.bottomY,aj]}}else{if(bC>S){bD.clipOuterFrontPath=this.clipPathforOuter;bD.clipOuterBackPath=[ay,this.rightX,this.topY,az,bF,this.topY,bF,this.bottomY,this.rightX,this.bottomY,aj,ay,bJ,this.topY,az,this.leftX,this.topY,this.leftX,this.bottomY,bJ,this.bottomY,aj];if(this.isDoughnut){bD.clipInnerBackPath=[ay,this.rightInnerX,this.topY,az,b3,this.topY,b3,this.bottomY,this.rightInnerX,this.bottomY,aj,ay,b6,this.topY,az,this.leftInnerX,this.topY,this.leftInnerX,this.bottomY,b6,this.bottomY,aj];bD.clipInnerFrontPath=this.clipPathforInner}}else{bD.clipOuterFrontPath=[ay,this.rightX,this.topY,az,bJ,this.topY,bJ,this.bottomY,this.rightX,this.bottomY,aj];bD.clipOuterBackPath=[ay,this.rightX,this.topY,az,bF,this.topY,bF,this.bottomY,this.rightX,this.bottomY,aj];if(this.isDoughnut){bD.clipInnerBackPath=[ay,this.rightInnerX,this.topY,az,b3,this.topY,b3,this.bottomY,this.rightInnerX,this.bottomY,aj];bD.clipInnerFrontPath=[ay,this.rightInnerX,this.topY,az,b6,this.topY,b6,this.bottomY,this.rightInnerX,this.bottomY,aj]}}}}else{if(bN<S){if(bC>S){bD.clipOuterFrontPath=[ay,bF,this.topY,az,this.leftX,this.topY,this.leftX,this.bottomY,bF,this.bottomY,aj];bD.clipOuterBackPath=[ay,bJ,this.topY,az,this.leftX,this.topY,this.leftX,this.bottomY,bJ,this.bottomY,aj];if(this.isDoughnut){bD.clipInnerBackPath=[ay,b6,this.topY,az,this.leftInnerX,this.topY,this.leftInnerX,this.bottomY,b6,this.bottomY,aj];bD.clipInnerFrontPath=[ay,b3,this.topY,az,this.leftInnerX,this.topY,this.leftInnerX,this.bottomY,b3,this.bottomY,aj]}}else{bD.clipOuterFrontPath=[ay,bF,this.topY,az,bJ,this.topY,bJ,this.bottomY,bF,this.bottomY,aj];bD.clipOuterBackPath=this.clipPathforNoClip;if(this.isDoughnut){bD.clipInnerBackPath=this.clipPathforNoClip;bD.clipInnerFrontPath=[ay,b3,this.topY,az,b6,this.topY,b6,this.bottomY,b3,this.bottomY,aj]}}}else{bD.clipOuterFrontPath=this.clipPathforNoClip;bD.clipOuterBackPath=[ay,bF,this.topY,az,bJ,this.topY,bJ,this.bottomY,bF,this.bottomY,aj];if(this.isDoughnut){bD.clipInnerBackPath=[ay,b3,this.topY,az,b6,this.topY,b6,this.bottomY,b3,this.bottomY,aj];bD.clipInnerFrontPath=this.clipPathforNoClip}}}bt=h(bN,bC);bD.clipTopPath[7]=bt>S?1:0}else{bD.clipOuterFrontPath=bD.clipOuterBackPath=bD.clipInnerBackPath=bD.clipInnerFrontPath=this.clipPathforNoClip}if(!A){bD.elements.startSlice._conf.index=bN;bD.elements.endSlice._conf.index=bC;bD.elements.frontOuter._conf.index=aT(bC,bN);if(bD.elements.frontOuter1){bD.elements.frontOuter1._conf.index=bN;bD.clipOuterFront1.attr({d:bD.clipOuterFrontPath1})}bD.clipTop.attr({d:bD.clipTopPath});bD.clipOuterFront.attr({d:bD.clipOuterFrontPath});bD.clipOuterBack.attr({d:bD.clipOuterBackPath});if(this.isDoughnut){bD.clipInnerBack.attr({d:bD.clipInnerBackPath});bD.clipInnerFront.attr({d:bD.clipInnerFrontPath})}if(this.hasOnePoint){bD.elements.startSlice.hide();bD.elements.endSlice.hide()}else{bD.elements.startSlice.attr({d:bD.startSlice}).show();bD.elements.endSlice.attr({d:bD.endSlice}).show()}}}else{var b1,b0,bZ,bX,bW,bV,by=this.moveCmdArr,b7=this.lineCmdArr,M=this.closeCmdArr,bT=this.centerPoint,bI=this.leftPoint,bQ=this.topPoint,ch=this.rightPoint,bx=this.bottomPoint,bL=this.leftDepthPoint,bM=this.rightDepthPoint,bA=this.leftInnerPoint,bz=this.rightInnerPoint,b9=this.leftInnerDepthPoint,cc=this.rightInnerDepthPoint;bD.outerFrontPath1=[];if(bB!=bS){if(bN>bC){if(bN<S){b1=bY.getArcPath(bK,bH,bF,bE,this.leftX,bH,bP,bO,1,0);bZ=bY.getArcPath(bK,bH,this.leftX,bH,this.rightX,bH,bP,bO,1,0);bW=bY.getArcPath(bK,bH,this.rightX,bH,bJ,bG,bP,bO,1,0);bD.outerBackPath=by.concat(bI,bZ,b7,bM,bY.getArcPath(bK,bU,this.rightX,bU,this.leftX,bU,bP,bO,0,0),M);bD.outerFrontPath1=by.concat([bF,bE],b1,b7,bL,bY.getArcPath(bK,bU,this.leftX,bU,bF,cd,bP,bO,0,0),M);bD.outerFrontPath=by.concat(ch,bW,b7,[bJ,bv],bY.getArcPath(bK,bU,bJ,bv,this.rightX,bU,bP,bO,0,0),M);bD.topBorderPath=by.concat([bF,bE],b1,bZ,bW);if(this.isDoughnut){b0=bY.getArcPath(bK,bH,b6,b5,this.rightInnerX,bH,bs,br,0,0);bX=bY.getArcPath(bK,bH,this.rightInnerX,bH,this.leftInnerX,bH,bs,br,0,0);bV=bY.getArcPath(bK,bH,this.leftInnerX,bH,b3,b2,bs,br,0,0);bD.innerBackPath=by.concat(bz,bX,b7,b9,bY.getArcPath(bK,bU,this.leftInnerX,bU,this.rightInnerX,bU,bs,br,1,0),M);bD.innerFrontPath=by.concat(bA,bV,b7,[b3,ce],bY.getArcPath(bK,bU,b3,ce,this.leftInnerX,bU,bs,br,1,0),M,by,[b6,b5],b0,b7,cc,bY.getArcPath(bK,bU,this.rightInnerX,bU,b6,bw,bs,br,1,0),M);bD.topPath=bD.topBorderPath.concat(b7,[b6,b5],b0,bX,bV,M);bD.topBorderPath=bD.topBorderPath.concat(by,[b6,b5],b0,bX,bV)}else{bD.topPath=bD.topBorderPath.concat(b7,bT,M)}}else{if(bC>S){b1=bY.getArcPath(bK,bH,bF,bE,this.rightX,bH,bP,bO,1,0);bZ=bY.getArcPath(bK,bH,this.rightX,bH,this.leftX,bH,bP,bO,1,0);bW=bY.getArcPath(bK,bH,this.leftX,bH,bJ,bG,bP,bO,1,0);bD.outerFrontPath=by.concat(ch,bZ,b7,bL,bY.getArcPath(bK,bU,this.leftX,bU,this.rightX,bU,bP,bO,0,0),M);bD.outerBackPath=by.concat([bF,bE],b1,b7,bM,bY.getArcPath(bK,bU,this.rightX,bU,bF,cd,bP,bO,0,0),M,by,bI,bW,b7,[bJ,bv],bY.getArcPath(bK,bU,bJ,bv,this.leftX,bU,bP,bO,0,0),M);bD.topBorderPath=by.concat([bF,bE],b1,bZ,bW);if(this.isDoughnut){b0=bY.getArcPath(bK,bH,b6,b5,this.leftInnerX,bH,bs,br,0,0);bX=bY.getArcPath(bK,bH,this.leftInnerX,bH,this.rightInnerX,bH,bs,br,0,0);bV=bY.getArcPath(bK,bH,this.rightInnerX,bH,b3,b2,bs,br,0,0);bD.innerFrontPath=by.concat(bA,bX,b7,cc,bY.getArcPath(bK,bU,this.rightInnerX,bU,this.leftInnerX,bU,bs,br,1,0),M);bD.innerBackPath=by.concat(bz,bV,b7,[b3,ce],bY.getArcPath(bK,bU,b3,ce,this.rightInnerX,bU,bs,br,1,0),M,by,[b6,b5],b0,b7,b9,bY.getArcPath(bK,bU,this.leftInnerX,bU,b6,bw,bs,br,1,0),M);bD.topPath=bD.topBorderPath.concat(b7,[b6,b5],b0,bX,bV,M);bD.topBorderPath=bD.topBorderPath.concat(by,[b6,b5],b0,bX,bV)}else{bD.topPath=bD.topBorderPath.concat(b7,bT,M)}}else{b1=bY.getArcPath(bK,bH,bF,bE,this.rightX,bH,bP,bO,1,0);bZ=bY.getArcPath(bK,bH,this.rightX,bH,bJ,bG,bP,bO,1,0);bD.outerFrontPath=by.concat(ch,bZ,b7,[bJ,bv],bY.getArcPath(bK,bU,bJ,bv,this.rightX,bU,bP,bO,0,0),M);bD.outerBackPath=by.concat([bF,bE],b1,b7,bM,bY.getArcPath(bK,bU,this.rightX,bU,bF,cd,bP,bO,0,0),M);bD.topBorderPath=by.concat([bF,bE],b1,bZ);if(this.isDoughnut){b0=bY.getArcPath(bK,bH,b6,b5,this.rightInnerX,bH,bs,br,0,0);bX=bY.getArcPath(bK,bH,this.rightInnerX,bH,b3,b2,bs,br,0,0);bD.innerFrontPath=by.concat([b6,b5],b0,b7,cc,bY.getArcPath(bK,bU,this.rightInnerX,bU,b6,bw,bs,br,1,0),M);bD.innerBackPath=by.concat(bz,bX,b7,[b3,ce],bY.getArcPath(bK,bU,b3,ce,this.rightInnerX,bU,bs,br,1,0),M);bD.topPath=bD.topBorderPath.concat(b7,[b6,b5],b0,bX,M);bD.topBorderPath=bD.topBorderPath.concat(by,[b6,b5],b0,bX)}else{bD.topPath=bD.topBorderPath.concat(b7,bT,M)}}}}else{if(bN<S){if(bC>S){b1=bY.getArcPath(bK,bH,bF,bE,this.leftX,bH,bP,bO,1,0);bZ=bY.getArcPath(bK,bH,this.leftX,bH,bJ,bG,bP,bO,1,0);bD.outerBackPath=by.concat(bI,bZ,b7,[bJ,bv],bY.getArcPath(bK,bU,bJ,bv,this.leftX,bU,bP,bO,0,0),M);bD.outerFrontPath=by.concat([bF,bE],b1,b7,bL,bY.getArcPath(bK,bU,this.leftX,bU,bF,cd,bP,bO,0,0),M);bD.topBorderPath=by.concat([bF,bE],b1,bZ);if(this.isDoughnut){b0=bY.getArcPath(bK,bH,b6,b5,this.leftInnerX,bH,bs,br,0,0);bX=bY.getArcPath(bK,bH,this.leftInnerX,bH,b3,b2,bs,br,0,0);bD.innerBackPath=by.concat([b6,b5],b0,b7,b9,bY.getArcPath(bK,bU,this.leftInnerX,bU,b6,bw,bs,br,1,0),M);bD.innerFrontPath=by.concat(bA,bX,b7,[b3,ce],bY.getArcPath(bK,bU,b3,ce,this.leftInnerX,bU,bs,br,1,0),M);bD.topPath=bD.topBorderPath.concat(b7,[b6,b5],b0,bX,M);bD.topBorderPath=bD.topBorderPath.concat(by,[b6,b5],b0,bX)}else{bD.topPath=bD.topBorderPath.concat(b7,bT,M)}}else{b1=bY.getArcPath(bK,bH,bF,bE,bJ,bG,bP,bO,1,0);bD.outerBackPath=by.concat([bF,bE]);bD.topBorderPath=bD.outerBackPath.concat(b1);bD.outerFrontPath=bD.topBorderPath.concat(b7,[bJ,bv],bY.getArcPath(bK,bU,bJ,bv,bF,cd,bP,bO,0,0),M);if(this.isDoughnut){b0=bY.getArcPath(bK,bH,b6,b5,b3,b2,bs,br,0,0);bD.innerBackPath=by.concat([b6,b5]);bD.topPath=bD.topBorderPath.concat(b7,[b6,b5],b0,M);bD.topBorderPath=bD.topBorderPath.concat(by,[b6,b5],b0);bD.innerFrontPath=bD.innerBackPath.concat(b0,b7,[b3,ce],bY.getArcPath(bK,bU,b3,ce,b6,bw,bs,br,1,0),M)}else{bD.topPath=bD.topBorderPath.concat(b7,bT,M)}}}else{b1=bY.getArcPath(bK,bH,bF,bE,bJ,bG,bP,bO,1,0);bD.outerFrontPath=by.concat([bF,bE]);bD.topBorderPath=bD.outerFrontPath.concat(b1);bD.outerBackPath=bD.topBorderPath.concat(b7,[bJ,bv],bY.getArcPath(bK,bU,bJ,bv,bF,cd,bP,bO,0,0),M);if(this.isDoughnut){b0=bY.getArcPath(bK,bH,b6,b5,b3,b2,bs,br,0,0);bD.innerFrontPath=by.concat([b6,b5]);bD.topPath=bD.topBorderPath.concat(b7,[b6,b5],b0,M);bD.topBorderPath=bD.topBorderPath.concat(bD.innerFrontPath,b0);bD.innerBackPath=bD.innerFrontPath.concat(b0,b7,[b3,ce],bY.getArcPath(bK,bU,b3,ce,b6,bw,bs,br,1,0),M)}else{bD.topPath=bD.topBorderPath.concat(b7,bT,M)}}}b1=by.concat(bI,b7,ch);b0=by.concat(bQ,b7,bx);bD.topPath=bD.topPath.concat(b1,b0);bD.outerFrontPath=bD.outerFrontPath.concat(b1);bD.outerFrontPath1=bD.outerFrontPath1.concat(b1);bD.outerBackPath=bD.outerBackPath.concat(b1);if(this.isDoughnut){b0=by.concat(bA,b7,bz);bD.innerFrontPath=bD.innerFrontPath.concat(b0);bD.innerBackPath=bD.innerBackPath.concat(b0)}}else{bD.topPath=bD.outerFrontPath=bD.outerBackPath=[];if(this.isDoughnut){bD.innerFrontPath=bD.innerBackPath=[]}}if(!A){bD.elements.startSlice._conf.index=bN;bD.elements.endSlice._conf.index=bC;bD.elements.frontOuter._conf.index=aT(bC,bN);if(bD.elements.frontOuter1){bD.elements.frontOuter1._conf.index=bN;bq.frontOuter1.attr({d:bD.outerFrontPath1})}bD.thisElement.attr({d:bD.topPath});bq.topBorder.attr({d:bD.topBorderPath});bq.bottom.attr({d:bD.topPath});bq.bottomBorder.attr({d:bD.topBorderPath});bq.frontOuter.attr({d:bD.outerFrontPath});bq.backOuter.attr({d:bD.outerBackPath});if(this.isDoughnut){bq.frontInner.attr({d:bD.innerFrontPath});bq.backInner.attr({d:bD.innerBackPath})}if(this.hasOnePoint){bD.elements.startSlice.hide();bD.elements.endSlice.hide()}else{bD.elements.startSlice.attr({d:bD.startSlice}).show();bD.elements.endSlice.attr({d:bD.endSlice}).show()}}}},createSlice:(function(){var Z={stroke:true,strokeWidth:true,\"stroke-width\":true,dashstyle:true,\"stroke-dasharray\":true,translateX:true,translateY:true,\"stroke-opacity\":true,fill:true,opacity:true,isTracker:true,start:true,end:true},A=function(bu,bt){var bz,bx,bw=this,bB=bw._confObject,by,br=bB.elements,bv,bA,bs=bB.pie3DManager;if(a7(bu)&&n(bt)){bz=bu;bu={};bu[bz]=bt}if(a7(bu)){if(Z[bu]){bw=bB[bu]}else{bw=bw._attr(bu)}}else{for(bz in bu){bx=bu[bz];if(Z[bz]){bB[bz]=bx;if(bz===\"translateX\"||bz===\"translateY\"||bz===\"isTracker\"){by={};by[bz]=bx;for(bv in br){br[bv].attr(by)}bw._attr(by)}else{if(bz===\"stroke\"||bz===\"strokeWidth\"||bz===\"stroke-width\"||bz===\"dashstyle\"||bz===\"stroke-dasharray\"){by={};by[bz]=bx;br.topBorder.attr(by);br.startSlice.attr(by);br.endSlice.attr(by);br.bottomBorder.attr(by)}else{if(bz===\"fill\"){}else{if(bz===\"start\"||bz===\"end\"){bA=true}}}}}else{bw._attr(bz,bx)}}if(bA){bs.updateSliceConf(bB);bs.refreshDrawing()}}return bw},L=function(bt,bu){var bs=this._confObject,bv=bs.elements,br;for(br in bv){bv[br].on(bt,bu)}return this._on(bt,bu)},bp=function(){var bs=this._confObject,bt=bs.elements,br;for(br in bt){bt[br].hide()}return this._hide()},M=function(){var bs=this._confObject,bt=bs.elements,br;for(br in bt){bt[br].show()}return this._show()},bq=function(){var bs=this._confObject,bt=bs.elements,br;for(br in bt){bt[br].destroy()}if(c){bs.clipTop.destroy();bs.clipOuterFront.destroy();bs.clipOuterBack.destroy();if(bs.clipOuterFront1){bs.clipOuterFront1.destroy()}if(bs.clipInnerFront){bs.clipInnerFront.destroy()}if(bs.clipInnerBack){bs.clipInnerBack.destroy()}}return this._destroy()};return function(bt,bA,bz,by,bx,bs,bB){var bF=this.renderer,bE=this.parseColor(bz,by),bw,bG={start:bt,end:bA,elements:{},pie3DManager:this,topPath:this.topPath,topBorderPath:this.topBorderPath,outerFrontPath:this.outerFrontPath,outerFrontPath1:this.outerFrontPath,outerBackPath:this.outerBackPath,innerFrontPath:this.innerFrontPath,innerBackPath:this.innerBackPath},bD=this.slicingWallsArr,br=bG.elements,bC,bv,bu;this.updateSliceConf(bG,true);bw=bF.path(bG.topPath).attr({fill:bE.top,\"stroke-width\":0}).add(this.topGroup);br.topBorder=bF.path(bG.topBorderPath).attr({stroke:bx,\"stroke-width\":bs}).add(this.topGroup);br.bottom=bF.path(bG.topPath).attr({fill:bE.bottom,\"stroke-width\":0}).add(this.bottomBorderGroup);br.bottomBorder=bF.path(bG.topBorderPath).attr({stroke:bx,\"stroke-width\":bs}).add(this.bottomBorderGroup);br.frontOuter=bF.path(bG.outerFrontPath).attr({fill:bE.frontOuter,\"stroke-width\":0}).add(this.slicingWallsFrontGroup);br.backOuter=bF.path(bG.outerBackPath).attr({fill:bE.backOuter,\"stroke-width\":0}).add(this.outerBackGroup);br.startSlice=bF.path(bG.startSlice).attr({fill:bE.startSlice,stroke:bx,\"stroke-width\":bs}).add(this.slicingWallsFrontGroup);br.endSlice=bF.path(bG.endSlice).attr({fill:bE.endSlice,stroke:bx,\"stroke-width\":bs}).add(this.slicingWallsFrontGroup);bC=e(bG.start);bv=e(bG.end);bu=h(bC,bv);if(bu>S){br.frontOuter1=bF.path(bG.outerFrontPath1).attr({fill:bE.frontOuter,\"stroke-width\":0}).add(this.slicingWallsFrontGroup);bD.push(br.startSlice,br.frontOuter1,br.frontOuter,br.endSlice);br.frontOuter1._conf={index:bC,isStart:0.5,pIndex:bB};if(c){bG.clipOuterFront1=bF.clipPath(bG.clipOuterFrontPath1);br.frontOuter1.clip(bG.clipOuterFront1)}}else{bD.push(br.startSlice,br.frontOuter,br.endSlice)}br.frontOuter._conf={index:aT(bv,bC),isStart:0.5,pIndex:bB};br.startSlice._conf={index:bC,isStart:0,pIndex:bB};br.endSlice._conf={index:bv,isStart:1,pIndex:bB};if(this.hasOnePoint){br.startSlice.hide();br.endSlice.hide()}if(this.isDoughnut){br.frontInner=bF.path(bG.innerFrontPath).attr({fill:bE.frontInner,\"stroke-width\":0}).add(this.innerFrontGroup);br.backInner=bF.path(bG.innerBackPath).attr({fill:bE.backInner,\"stroke-width\":0}).add(this.innerBackGroup)}if(c){bG.clipTop=bF.clipPath(bG.clipTopPath);bG.clipOuterFront=bF.clipPath(bG.clipOuterFrontPath);bG.clipOuterBack=bF.clipPath(bG.clipOuterBackPath);bw.clip(bG.clipTop);br.topBorder.clip(bG.clipTop);br.bottom.clip(bG.clipTop);br.bottomBorder.clip(bG.clipTop);br.frontOuter.clip(bG.clipOuterFront);br.backOuter.clip(bG.clipOuterBack);if(this.isDoughnut){bG.clipInnerFront=bF.clipPath(bG.clipInnerFrontPath);bG.clipInnerBack=bF.clipPath(bG.clipInnerBackPath);br.frontInner.clip(bG.clipInnerFront);br.backInner.clip(bG.clipInnerBack)}}bw._confObject=bG;bG.thisElement=bw;bw._destroy=bw.destroy;bw.destroy=bq;bw._show=bw.show;bw.show=M;bw._hide=bw.hide;bw.hide=bp;bw._on=bw.on;bw.on=L;bw._attr=bw.attr;bw.attr=A;this.pointElemStore.push(bw);return bw}})()};C.prototype.constructor=C;var aY=G.extendClass(bd.pie,{type:\"pie3d\",translate:function(){var bO=0,bE=this,bK=1000,Z=bE.options,bD=(Y(this.chart.options.chart.startingAngle,0)%360),bM=B(Z.dataLabels.distance,20),M,bq=bE.slicedOffset=Z.slicedOffset,bC=bq+Z.borderWidth,bA=ag([],Z.center),bG=bE.chart,bx=bG.plotWidth,bJ=bG.plotHeight,bs,bp,bL,bN=bE.data,bv,bI=ae(bx,bJ),L,bw,bu,bt=Z.dataLabels.distance,bz=bE.pieYScale=Z.pieYScale,bB=bE.pieSliceDepth=Z.pieSliceDepth,by=bE.managedPieSliceDepth=Z.managedPieSliceDepth,A=bE.slicedOffsetY=bq*bz;bA.push(Z.size,Z.innerSize||0);bA=K(bA,function(bQ,bP){L=/%$/.test(bQ);return L?[bx,bJ-by,bI,bI][bP]*v(bQ)/100:bQ});bA[2]/=2;bA[3]/=2;bA.push(bA[2]*bz);bA.push((bA[2]+bA[3])/2);bA.push(bA[5]*bz);bE.getX=function(bQ,bP){bL=aa.asin((bQ-bA[1])/(bA[2]+bt));return bA[0]+(bP?-1:1)*(aW(bL)*(bA[2]+bt))};bE.center=bA;bj(bN,function(bP){bO+=bP.y});bE.labelsRadius=bA[2]+bM;bE.labelsRadiusY=bE.labelsRadius*bz;bE.quadrantHeight=(bJ-by)/2;bE.quadrantWidth=bx/2;var br=Z.dataLabels,bH=-bD*bk,bF;bH=O(bH*bK)/bK;bF=O((bH+w)*bK)/bK;M=B(parseInt(br.style.fontSize,10),10)+4,bE.maxLabels=Math.floor(bE.quadrantHeight/M);bE.labelFontSize=M;bE.connectorPadding=B(br.connectorPadding,5);bE.isSmartLineSlanted=Y(br.isSmartLineSlanted,true);bE.connectorWidth=B(br.connectorWidth,1);bE.enableSmartLabels=br.enableSmartLabels;if(!bE.pie3DManager){bE.pie3DManager=new C(bA[0],bA[1],bA[2],bA[3],bz,bB,undefined,bG.renderer,bE.data.length===1,Z.use3DLighting)}bj(bN,function(bP){bs=bH;bv=bO?bP.y/bO:0;bH=O((bH+(bv*w))*bK)/bK;if(bH>bF){bH=bF}bp=bH;bP.shapeArgs={start:bs,end:bp};bP.centerAngle=bL=((bp+bs)/2)%w;bP.slicedTranslation=K([aW(bL)*bq+bG.plotLeft,U(bL)*A+bG.plotTop],O);bw=aW(bL)*bA[2];bE.radiusY=bu=U(bL)*bA[4];bP.tooltipPos=[bA[0]+bw*0.7,bA[1]+bu];bP.percentage=bv*100;bP.total=bO});this.setTooltipPoints()},drawDataLabels:(function(){var M=function(bs,br){return bs.point.y-br.point.y},L=function(bs,br){return bs.angle-br.angle},A=[\"left\",\"left\",\"right\",\"right\"],bp=\"center\",bq=[-1,1,1,-1],Z=[1,1,-1,-1];return function(bL){var bF=this,cr=bF.data,ca,bT,cs=bF.chart,br=cs.options.instanceAPI.smartLabel,bZ=bF.options.dataLabels,ck=bZ.style,b3=B(parseInt(ck.lineHeight,10),12),b6=bZ.placeInside,ce=bZ.skipOverlapLabels,b7=bZ.manageLabelOverflow,bC=bF.connectorPadding,bX=bF.connectorWidth,bu,co,bR=bZ.distance,bY=b(bZ.softConnector,true),bH=bR>0,cp,bs=bF.center,bv=bs[1],bw=bs[0],ch=bs[2],by=bs[4],b1=[[],[],[],[]],bQ,cl,cq,b8=cs.plotLeft,bD=cs.plotTop,bx=cs.plotSizeX,bG,bO,cn,bE,ci,cg,bS,cm,bV,bP,bN,bM,cv,cu,ct,cd,cc=bF.labelsRadius,bt=bF.labelsRadiusY,b0,b9,b5=bF.labelFontSize,cf=b5,cj=cf/2,bK=[bC,bC,-bC,-bC],bz=bF.maxLabels,bB=bF.isSmartLineSlanted,bW=bF.enableSmartLabels,b2,cb,bA,b4=bF.pieSliceDepth/2;if(!bL){au.prototype.drawDataLabels.apply(bF);br.setStyle(ck)}if(cr.length==1){ca=cr[0];bA=ca.dataLabel;ca.slicedTranslation=[b8,bD];if(bA){bA.attr({visibility:ap,align:bp,x:bw,y:bv+cj-2});bA.x=bw}}else{if(b6){bj(cr,function(cw){bA=cw.dataLabel;if(bA){var cA=cw.centerAngle;ct=bv+(bs[6]*U(cA))+cj-2;bM=bw+(bs[5]*aW(cA));bA.x=bM;bA._x=bM;bA.y=ct;if(cw.sliced){var cz=cw.slicedTranslation,cy=cz[0]-b8,cx=cz[1]-bD;bM=bM+cy;ct=ct+cx}bA.attr({visibility:ap,align:bp,x:bM,y:ct});cw.dataLabelBG=bA.textBound()}})}else{bj(cr,function(cw){bA=cw.dataLabel;if(bA){bA.on(\"click\",function(cz){cw.firePointEvent(\"click\",cz)});var cy=cw.centerAngle,cx;if(cy<0){cy=w+cy}if(cy<aJ){cx=1}else{if(cy<S){cx=2}else{if(cy<(g)){cx=3}else{cx=0}}}b1[cx].push({point:cw,angle:cy})}});cq=cm=4;while(cq--){if(ce){b0=b1[cq].length-bz;if(b0>0){b1[cq].sort(M);b9=b1[cq].splice(0,b0);for(cn=0,bS=b9.length;cn<bS;cn+=1){ca=b9[cn].point;ca.dataLabel.attr({visibility:av});if(ca.connector){ca.connector.attr({visibility:av})}}}}b1[cq].sort(L)}cb=aS(b1[0].length,b1[1].length,b1[2].length,b1[3].length);b2=aS(ae(cb,bz)*cf,bt);b1[1].reverse();b1[3].reverse();while(cm--){cd=b1[cm];bS=cd.length;if(!ce){if(bS>bz){cf=b2/bS}else{cf=b5}cj=cf/2}cg=(bS*cf)-cj;cp=b2+cj;for(cq=0;cq<bS;cq+=1,cg-=cf){bE=bi(b2*U(cd[cq].angle));if(cp-bE<cf){bE=cp-cf}else{if(bE<cg){bE=cg}}cp=cd[cq].oriY=bE}cl=A[cm];ci=b2-(bS*cf)+cj;cp=-cj;for(cq=cd.length-1;cq>=0;cq-=1,ci+=cf){ca=cd[cq].point;bT=cd[cq].angle;bV=ca.sliced;bA=ca.dataLabel;bE=bi(b2*U(bT));if(bE-cp<cf){bE=cp+cf}else{if(bE>ci){bE=ci}}cp=bE;cv=((bE+cd[cq].oriY)/2);bP=bw+Z[cm]*cc*aW(aa.asin(cv/b2));cv*=bq[cm];cv+=bv;cu=bv+(by*U(bT));bN=bw+(ch*aW(bT));bM=bP+bK[cm];ct=cv+cj-2;bA.x=bM;bA._x=bM;if(b7){bG=cm>1?bM:bx-bM;bO=bA._str=bA._str||bA.textStr||(bA.element&&bA.element.innerHTML);bA.attr({text:br.getSmartText(bO,bG,b3).text})}if(bT<S){cv+=b4;cu+=b4;ct+=b4}bA.y=ct;if(bV){var bU=ca.slicedTranslation,bJ=bU[0]-b8,bI=bU[1]-bD;bM=bM+bJ;bP=bP+bJ;bN=bN+bJ;cu=cu+bI}bA.attr({visibility:ap,align:cl,x:bM,y:ct});ca.dataLabelBG=bA.textBound();if(bH&&bX&&bW){bu=ca.connector;ca.connectorPath=co=[ay,bN,cu,az,bB?bP:bN,cv,bM,cv];if(bu){bu.attr({d:co});bu.attr(\"visibility\",ap)}else{ca.connector=bu=bF.chart.renderer.path(co).attr({\"stroke-width\":bX,stroke:bZ.connectorColor||\"#606060\",visibility:ap,zIndex:3}).translate(b8,bD).add().on(\"click\",function(cw){return function(cx){cw.firePointEvent(\"click\",cx)}}(ca))}}}}}}}}()),rotate:function(bt){var br=this,bq=br.data,bv=br.options,Z=br.slicedOffset,bs=br.slicedOffsetY,M=br.chart.plotLeft,A=br.chart.plotTop,bu=B(this.chart.options.chart.startingAngle,0),L,bp=br.center;L=(bt-bu)%360;this.chart.options.chart.startingAngle=B(bt,this.chart.options.chart.startingAngle)%360;L=(L*r)/180;if(br.pie3DManager){br.pie3DManager.rotate(L)}bj(bq,function(bw){var bD=bw.graphic,bA=bw.shapeArgs,bC={start:bA.start=bA.start+L,end:bA.end=bA.end+L},bx=bw.centerAngle=e((bC.start+bC.end)/2),bz=bw.sliced,by=aW(bx),bB=U(bx);bw.slicedTranslation=K([(by*Z)+M,(bB*bs)+A],O);bw.tooltipPos=[bp[0]+by*bp[2]*0.7,bp[1]+bB*bp[4]];if(bD&&bz){bw.graphic.attr({translateX:bw.slicedTranslation[0],translateY:bw.slicedTranslation[1]})}});this.drawDataLabels(true)},drawPoints:function(){var bq=this,bv=bq.options,bs=bq.chart,br=bs.renderer,Z,M,bu,bt=bq.options.shadow,L,bp,A=bq.center;bj(bq.data,function(bw,bz){var by=bw.sliced,bx=bw.slicedTranslation;M=bw.graphic;bp=bw.shapeArgs;bu=bw.group;L=bw.shadowGroup;if(M){M.animate(bp)}else{bw.graphic=bq.pie3DManager.createSlice(bp.start,bp.end,bw.color,bw._3dAlpha,bw.borderColor,bw.borderWidth,bz);bw.graphic.translate(by?bx[0]:bs.plotLeft,by?bx[1]:bs.plotTop)}if(bw.visible===false){bw.setVisible(false)}});bq.pie3DManager.refreshDrawing()},drawTracker:function(){var Z=this,bs=Z.chart,br=+new Date(),bx=Z.options,bw,bp=[Z.center[0]+Z.chart.plotLeft,Z.center[1]+Z.chart.plotTop],bq,M=Z.options.enableRotation,bv,bu,L,A,bt;if(M){bv=function(by){bq=J(Z.chart.container);Z.rotationStartInstanceAngle=aw.call(by,bp,bq)-Z.chart.options.chart.startingAngle*bk;if(Z.chart.tooltip){if(by.type===\"dragstart\"){Z.chart.tooltip.block(true)}else{Z.chart.tooltip.block(false);Z.chart.tooltip.refresh(by.data,true)}}}}bj(Z.data,function(by){if(by.y!==null){if(by.link!==undefined){var bz={cursor:\"pointer\",_cursor:\"hand\"}}L=by.graphic;L.attr({isTracker:br});L.on(a5?\"touchstart\":\"mouseover\",function(bA){bw=bA.relatedTarget||bA.fromElement;if(bs.hoverSeries!==Z&&ac(bw,\"isTracker\")!==br){Z.onMouseOver()}by.onMouseOver()}).on(\"mouseout\",function(bA){if(!bx.stickyTracking){bw=bA.relatedTarget||bA.toElement;if(ac(bw,\"isTracker\")!==br){Z.onMouseOut()}}}).css(bz);if(M){bu=L._confObject;A=bu.elements;for(bt in A){ad(A[bt].element,\"dragstart dragend\",bv,by);ad(A[bt].element,\"drag\",function(bA){Z.rotate((aw.call(bA,bp,bq)-Z.rotationStartInstanceAngle)/bk)})}ad(L.element,\"dragstart dragend\",bv,by);ad(L.element,\"drag\",function(bA){Z.rotate((aw.call(bA,bp,bq)-Z.rotationStartInstanceAngle)/bk)})}}})}});bd.pie3d=aY},[3,2,2,\"sr4\"]]);","js/thirdparty/fusioncharts/FusionCharts_HC_PowerCharts.js":"\nFusionCharts([\"private\",\"modules.renderer.highcharts-gradientlegend\",function(){var a=this,G=a.core,l=a.hcLib,O=l.pluckNumber,z=l.COLOR_BLACK,U=l.COLOR_GLASS,y=l.FC_CONFIG_STRING,X=l.graphics,t=X.HSBtoRGB,s=X.RGBtoHSB,ac=X.RGBtoHex,Q=X.HEXtoRGB,F=l.COMMASTRING,v=l.BLANKSTRING,ad=l.parseUnsafeString,p=l.graphics.convertColor,V=l.POSITION_TOP,j=l.POSITION_RIGHT,E=l.POSITION_BOTTOM,B=l.POSITION_LEFT,D=l.POSITION_CENTER,g=l.POSITION_MIDDLE,c=l.graphics.getDarkColor,o=l.graphics.getLightColor,S=l.pluck,q=l.getValidValue,h=l.Highcharts,u=h.legendTypes,x=h.hasTouch,Y=h.getTouchEvent,J=h.getPosition,k=h.addEvent,i=\"M\",b=\"Z\",m=\"L\",P=\"none\",K=Math.round,A=Math.max,ae=Math.min,I=Math.abs,H=\"%\",f=\"drag\",d=\"dragstart\",R={pageX:0,pageY:0},r=function(L){return L&&L.replace(/^#?([a-f0-9]+)/ig,\"$1\")};function C(ai,ag,ah){var Z=ai[0],M=ai[1],aj=ai[2],af=Z+((ag[0]-Z)*ah),ak=M+((ag[1]-M)*ah),L=aj+((ag[2]-aj)*ah);return{hex:(z+(af<<16|ak<<8|L).toString(16)).slice(-6),rgb:[af,ak,L]}}function N(M,L){return M.maxvalue-L.maxvalue}function W(M){var L=s(M);return{minRGB:t((L[2]=0,L)),maxRGB:t((L[2]=100,L))}}function w(ag){var al=ag.colorRange||{},aA=ag.dataMin,aD=ag.dataMax,ay=ag.sortLegend||false,aC=ag.mapByCategory||false,at=ag.defaultColor,ak=ag.numberFormatter,aq=al.color,ax=this.colorArr=[],ao,am,ah,au,ar,M,L,aj,an,az,ap,aw,av,aB,af,ai,Z;this.mapByCategory=aC;if(al.mapbypercent===\"1\"){this.mapbypercent=true}if(al.gradient===\"1\"&&!aC){this.gradient=true;L=r(S(al.startcolor,al.mincolor,al.code));aB=Q(r(S(L,at,\"CCCCCC\")));af=this.scaleMin=O(al.startvalue,al.minvalue,this.mapbypercent?0:aA);ax.push({code:L,maxvalue:af,label:ad(al.startlabel),codeRGB:Q(L)});if(aq&&(ah=aq.length)){for(au=0;au<ah;au+=1){aj=aq[au];L=r(S(aj.color,aj.code));az=O(aj.value,aj.maxvalue);ap=O(aj.minvalue);if(az>af){ax.push({code:L,maxvalue:az,userminvalue:ap,label:ad(S(aj.label,aj.displayvalue)),codeRGB:Q(L)})}}}ax.sort(N);ah=ax.length;for(au=1;au<ah;au+=1){aj=ax[au];am=aj.maxvalue-af;if(am>0){aj.minvalue=af;aj.range=am;af=aj.maxvalue}else{ax.splice(au,1);au-=1;ah-=1}}if(ax.length>=2){this.scaleMax=af;ax[au-1].label=S(al.endlabel,ax[au-1].label,ax[au-1].displayvalue)}if(ax.length===1){az=O(al.maxvalue,this.mapbypercent?100:aD);ax.push({minvalue:af,maxvalue:az,range:az-af,label:al.endlabel});this.scaleMax=az;delete ax[0].code}aw=ax[0];av=ax[ax.length-1];if(!aw.code||!av.code){Z=W(aB);if(!aw.code){aw.codeRGB=Z.minRGB;aw.code=ac(Z.minRGB)}if(!av.code){av.codeRGB=Z.maxRGB;av.code=ac(Z.maxRGB)}}ah=ax.length;for(au=1;au<ah;au+=1){aj=ax[au];if(!aj.code){M=M||au}else{if(M){av=aj;ap=aw.maxvalue;ao=av.maxvalue-ap;for(ar=M;ar<au;ar+=1){an=ax[ar];L=C(aw.codeRGB,av.codeRGB,(an.maxvalue-ap)/ao);an.code=L.hex;an.codeRGB=L.rgb}}M=null;aw=aj}}if(this.scaleMin===undefined||this.scaleMax===undefined){this.noValidRange=true}}else{if(aq&&(ah=aq.length)){for(au=0;au<ah;au+=1){aj=aq[au];L=S(aj.color,aj.code);az=O(aj.maxvalue);ap=O(aj.minvalue);ai=S(aj.label,aj.displayvalue,aC?v:(ak.dataLabels(ap)+\" - \"+ak.dataLabels(az)));if(L&&az>ap||(aC&&ai)){ax.push({code:L,maxvalue:az,minvalue:ap,label:ad(ai),labelId:ai.toLowerCase()})}}if(ax.length){if(ay){ax.sort(N)}}else{this.noValidRange=true}}}}w.prototype={getColorObj:function(af){var Z=this.colorArr,M=this.gradient?1:0,L=Z[M],ag;if(this.mapByCategory){af=ad(af).toLowerCase();while(L){if(L.labelId===af){return{code:L.code,seriesIndex:M}}M+=1;L=Z[M]}return{outOfRange:true}}else{if(this.gradient){if(this.scaleMin<=af&&this.scaleMax>=af){while(L&&L.maxvalue<af){M+=1;L=Z[M]}ag=(af-L.minvalue)/L.range;return{code:C(Z[M-1].codeRGB,L.codeRGB,ag).hex}}else{return{outOfRange:true}}}else{while(L){if(L.maxvalue>=af&&L.minvalue<=af){return{code:L.code,seriesIndex:M}}M+=1;L=Z[M]}return{outOfRange:true}}}}};w.prototype.constructor=w;l.colorRange=w;function n(L,M){if(M){return(K(L*100)/100)+H}else{return q(L,v).toString()}}var T=l.configureGradientLegendOptions=function(Z,af){var M=Z.legend,L=af.chart,ag=Z.colorRange||{};M.legendSliderBorderWidth=O(L.legendpointerborderthickness,1);M.legendSliderBorderColor=p(S(L.legendpointerbordercolor,z),O(L.legendpointerborderalpha,100));M.legendSliderWidth=O(L.legendpointerwidth,L.legendpointerswidth,12);M.legendSliderHeight=O(L.legendpointerheight,L.legendpointersheight,12);M.legendColorBoxBorderColor=M.borderColor;M.legendColorBoxBorderWidth=M.borderWidth;M.legendScaleColor=p(S(L.legendscalelinecolor,z),O(L.legendscalelinealpha,100));M.legendScalePadding=O(L.legendscalepadding,4);M.legendScaleLineThickness=O(L.legendscalelinethickness,1);M.legendScaleTickDistance=O(L.legendscaletickdistance,6);M.itemStyle.cursor=\"default\";M.interActivity=O(L.interactivelegend,1)};l.placeGLegendBlockRight=function(aR,aO,al,ap,am){l.configureLegendOptions(aR,aO.chart,true,am,al);T(aR,aO);var aW=aR[y],L=aW.smartLabel,Z=aR.legend,aL,aU,aJ=Z.textPadding=2,a4=aJ*2,aN=Z.title.padding,ax=0,ar=aO.chart,aA=0,a2=Z.padding,aC=2*a2,az=O(aO.chart.legendpadding,7)+(Z.borderWidth/2)+1,av=aR.colorRange||{},an=av.colorArr,aH=av.mapbypercent,aw=av.scaleMax,a1=av.scaleMin,a8=aw-a1,a6=Z.legendSliderWidth,M=Z.legendSliderHeight,aK=M/2,aY=Z.legendScalePadding,aQ=Z.legendScaleTickDistance,aX=Z.itemStyle||{},aE=O(parseInt(aX.lineHeight,10)||12),aT=aE*0.75,aI=al-aC,a3,a7,a5,aS,aP,aM,aV,aq,ak=0,ay,aF,ai,aB,a0,aG,au,aD,aj,ah,aZ,ag,af,at,ao;ap-=aC;if(!av.noValidRange&&an&&(a7=an.length)>1){aG=a7-1;if(Z.title.text!==v){L.setStyle(Z.title.style);ao=L.getSmartText(Z.title.text,aI,A(aE,ap/4));Z.title.text=ao.text;ax=ao.width+aC;ap-=aA=ao.height+aN}aI-=aQ+aY+a6;Z.colorBoxX=a6;aM=A(aE,aI/2);aP=ae(aI-aM-4,aE);aZ=A(aE,ap/2);ah=ap/4;L.setStyle(aX);a5=an[0];a5.scaleLabel=n(a5.maxvalue,aH);aL=L.getSmartText(a5.label,ah,aP);a5.label=aL.text;aF=aL.height;a5.labelY=aT-aL.height/2;aU=L.getSmartText(a5.scaleLabel,aM,aZ);a5.scaleLabel=aU.text;ai=aU.height/2;a0=aU.width;a5.scaleLabelY=aT-aU.height/2;Z.colorBoxY=A(ai,aL.width+a4,aK)+aA;a5=at=an[aG];a5.scaleLabel=n(a5.maxvalue,aH);aL=L.getSmartText(a5.label,ah,aP);a5.label=aL.text;aF=A(aF,aL.height);a5.labelY=aT-aL.height/2;aU=L.getSmartText(a5.scaleLabel,aM,aZ);a5.scaleLabel=aU.text;a0=A(a0,aU.width);aV=aU.height/2;aS=A(aL.width+a4,aV,aK);a5.scaleLabelY=aT-aU.height/2;Z.colorBoxHeight=aq=ap-Z.colorBoxY-aS;ay=aq;aB=aq-aV;au=aq/a8;aj=ae(ay-ak,aB-ai)-4;for(a3=1;a3<aG;a3+=1){a5=an[a3];aD=(a5.maxvalue-a1)*au;aL=L.getSmartText(a5.label,ae(aD-ak,ay-aD)*2,aP);a5.label=aL.text;aF=A(aF,aL.height);a5.labelY=aT-aL.height/2;ag=aL.width/2;a5.scaleLabel=n(a5.maxvalue,aH);aU=L.getSmartText(a5.scaleLabel,aM,ae(aD-ai,aB-aD)*2);a5.scaleLabel=aU.text;a0=A(a0,aU.width);af=aU.height/2;a5.scaleLabelY=aT-aU.height/2;aj=ae(aj,(aD-A(af+ai,ag+ak)-4)*a8/a5.range);ak=ag+aD;ai=af+aD}aj=A(ae(aj,(ae(aB-ai,ay-ak)-4)*a8/at.range,ap*0.3),0);Z.colorBoxHeight-=aj;Z.colorBoxWidth=(aF&&aF+a4)||15;Z.height=Z.totalHeight=ap+aA+aC-aj;Z.width=(a0&&a0+aJ)+Z.colorBoxWidth+a6+Z.legendScaleTickDistance+Z.legendScalePadding+aC;if(Z.width<ax){Z.colorBoxX+=(ax-Z.width)/2;Z.width=ax}if(Z.width>al){Z.width=al}az+=Z.width;aR.chart.marginRight+=az;return az}else{Z.enabled=false;return 0}};l.placeGLegendBlockBottom=function(aS,aO,an,at,ao){l.configureLegendOptions(aS,aO.chart,false,ao,an);T(aS,aO);var aV=aS[y],L=aV.smartLabel,af=aS.legend,aL,aU,aK=af.textPadding=2,aN=af.title.padding,az=0,au=aO.chart,aC=0,a0=af.padding,aD=2*a0,a4=O(aO.chart.legendpadding,7)+(af.borderWidth/2)+1,ax=aS.colorRange||{},ap=ax.colorArr,aI=ax.mapbypercent,ay=ax.scaleMax,aZ=ax.scaleMin,a6=ay-aZ,a3=af.legendSliderWidth,Z=af.legendSliderHeight,aX=af.legendScalePadding,aR=af.legendScaleTickDistance,aW=af.itemStyle||{},aF=O(parseInt(aW.lineHeight,10)||12),aT=aF*0.75,al=at-aD,a1,a5,a2,aJ,aQ,ak,aj,aM,am=0,aB,aP,ai,aE,M,aH,aw,aG,av,ah,aY,ag,aA,ar,aq;an-=aD;if(!ax.noValidRange&&ap&&(a5=ap.length)>1){aH=a5-1;if(af.title.text!==v){L.setStyle(af.title.style);aq=L.getSmartText(af.title.text,an,al/3);af.title.text=aq.text;az=aq.width+aD;al-=aC=aq.height+aN}al-=aR+aX+Z;aY=A(aF,al/2);ah=ae(al-aY-4,aF);L.setStyle(aW);aQ=an/4;ak=aQ*2;a2=ap[0];a2.scaleLabel=n(a2.maxvalue,aI);aL=L.getSmartText(a2.label,aQ,ah);a2.label=aL.text;aP=aL.height;a2.labelY=aT-aL.height/2;aU=L.getSmartText(a2.scaleLabel,ak,aY);a2.scaleLabel=aU.text;ai=aU.width/2;M=aU.height;if(!a2.code){a2.code=S(af.minColor,\"CCCCCC\")}af.colorBoxX=A(ai,aL.width+aK,a3);a2=ar=ap[aH];a2.scaleLabel=n(a2.maxvalue,aI);aL=L.getSmartText(a2.label,aQ,ah);a2.label=aL.text;aP=A(aP,aL.height);a2.labelY=aT-aL.height/2;aU=L.getSmartText(a2.scaleLabel,ak,aY);a2.scaleLabel=aU.text;M=A(M,aU.height);aj=aU.width/2;aJ=A(aL.width+aK,aj,a3);af.colorBoxWidth=aM=an-af.colorBoxX-aJ;aB=aM;aE=aM-aj;aw=aM/a6;av=ae(aB-am,aE-ai)-4;for(a1=1;a1<aH;a1+=1){a2=ap[a1];aG=(a2.maxvalue-aZ)*aw;aL=L.getSmartText(a2.label,ae(aG-am,aB-aG)*2,ah);a2.label=aL.text;aP=A(aP,aL.height);a2.labelY=aT-aL.height/2;ag=aL.width/2;a2.scaleLabel=n(a2.maxvalue,aI);aU=L.getSmartText(a2.scaleLabel,ae(aG-ai,aE-aG)*2,aY);a2.scaleLabel=aU.text;M=A(M,aU.height);aA=aU.width/2;av=ae(av,(aG-A(aA+ai,ag+am)-4)*a6/a2.range);am=ag+aG;ai=aA+aG}av=A(ae(av,(ae(aE-ai,aB-am)-4)*a6/ar.range,an*0.3),0);af.colorBoxWidth-=av;af.width=an+aD-av;if(af.width<az){af.colorBoxX+=(az-af.width)/2;af.width=az}af.colorBoxY=aC+Z;af.colorBoxHeight=(aP&&aP+(2*aK))||15;af.height=af.totalHeight=(M&&M+aK)+af.colorBoxHeight+aC+Z+af.legendScaleTickDistance+af.legendScalePadding+aD;if(af.height>at){af.height=at}a4+=af.height;aS.chart.marginBottom+=a4;return a4}else{af.enabled=false;return 0}};var aa=function(){return{point:this}},e=function(L){return K(L*100)/100};var ab=h.extendClass(u.point,{colorizeItem:function(){},destroy:function(){var M=this.elements,ah=M.box,ak=M.legendGroup,Z=M.legendScroller,ao=M.legendClip,al=M.colorBox,am=M.colorBoxEffect,aj=M.slider1,L=M.slider1Effect,ai=M.slider2,ag=M.slider2Effect,af=M.scale,an;if(al){M.colorBox=al.destroy()}if(am){M.colorBoxEffect=am.destroy()}if(aj){M.slider1=aj.destroy()}if(L){M.slider1Effect=L.destroy()}if(ai){M.slider2=ai.destroy()}if(ag){M.slider2Effect=ag.destroy()}if(ah){M.box=ah.destroy()}if(ak){M.legendGroup=ak.destroy()}if(Z){M.legendScroller=Z.destroy()}if(ao){M.legendClip=ao.destroy()}},renderAllItems:function(){var b1=this,bQ=b1.chart,ag=bQ.plotLeft,bB=bQ.plotTop,ah=bQ.plotWidth,aF=bQ.plotHeight,bR=bQ.options,aK=bQ.tooltip,ay=bR.colorRange,az,a9,bO,a5,by=b1.conf,bo=by.fontSize,aJ=by.padding,bn=b1.renderer,bm=b1.options,bT=bm.itemStyle,bG=bm.symbolStyle,bu=bm.interActivity,bP=b1.elements,b6=bP.legendGroup,bf=by.horizontal,b8,a1,bU,bS,b0,aB,a2,aA,L,bV,au=0,M=bm.lighting3d,be,bl,aw=bm.colorBoxX,at=bm.colorBoxY,ax=be=bm.colorBoxWidth,aD=bl=bm.colorBoxHeight,bv=b1.allItems,bk={FCcolor:{color:v,alpha:v,angle:0,ratio:v}},aS=bk.FCcolor,bA=aw+aJ,bz=at+aJ,bD,bC,bJ,bI,bi,bF,bt,aX=bm.legendColorBoxBorderColor,bw=bm.legendColorBoxBorderWidth,av=bm.legendSliderBorderColor,bx=bm.legendSliderBorderWidth,bc=2,aG=[i],a0=bm.legendScaleColor,bY=bm.legendScalePadding,af=bm.legendScaleLineThickness,a3=(af%2)/2,bh=bm.legendScaleTickDistance,bE=bm.legendSliderWidth,b3=bm.legendSliderHeight,aq=aD/2,aN=ax/2,a4=bE/2,ar=b3/2,br=a4/2,bg,ap,aR,aT,aQ,aP,aM,aL,aI,aE,ao,an,am,al,ak,aj,ai,a6,ba,bj,aW,aV,a7=0,bZ,bX,b2,Z,b7=ae(bE,b3)/4,bb=\"ABABAB\",bM=100,bs=o(bb,50),bq=c(bb,70),aY=p(bb,bM),bL=p(bq,bM),bH=p(bs,bM),a8=1,aU=(a8%2)/2,bd,aC,aH,b5={isFirst:true},b4={},aO,bN,bp=bQ.series,bK;if(ay&&(az=ay.colorArr)&&(bO=az.length)>1){b5.toolText=aO=b0=ay.scaleMin;b4.toolText=bN=aB=ay.scaleMax;a2=aB-b0;b5.snapPX=b4.snapPX=0;b5.tooltipConstraint=b4.tooltipConstraint=\"chart\";b5.getLabelConfig=b4.getLabelConfig=aa;b5.series=b4.series={};b5.tooltipPos=[0,0];b4.tooltipPos=[0,0];b4.tooltipOffsetReference=b5.tooltipOffsetReference=J(bQ.container);b4.tooltipOffsetReference.left=b5.tooltipOffsetReference.left+=ag-20;b4.tooltipOffsetReference.top=b5.tooltipOffsetReference.top+=bB;if(bf){b5.tooltipPos[1]=b4.tooltipPos[1]=aF+bB;aT=K(bA-a4)+aU;aQ=K(bA+a4)+aU;ao=K(bz-b3)+aU;an=K(bz+aD)+aU;aP=K(bA-2)+aU;aM=K(bA+2)+aU;aL=K(bA)+aU;am=K(bz)+aU;al=bz-ar/2;ak=K(al-ar)+aU;al=K(al)+aU;aI=bA-a4/2;aE=K(aI+a4)+aU;aI=K(aI)+aU;bZ=aT;bX=ao;b2=bE;Z=b3;bl=bl/2;bg=[i,aT,ao,m,aQ,ao,aQ,am,aM,am,aL,an,aP,am,aT,am,b,i,aI,ak,m,aI,al,i,aL,ak,m,aL,al,i,aE,ak,m,aE,al];ap=[i,aT,ao+1,m,aQ,ao+1,i,aI-1,ak,m,aI-1,al,i,aL-1,ak,m,aL-1,al,i,aE-1,ak,m,aE-1,al];bi=bz+aD+bY;bt=K(bi+bh)+a3;bi=K(bi)+a3;bC=bt+bo;bI=bz+aq;ba=bO-1;for(a9=0;a9<bO;a9+=1){a5=az[a9];bV=(a5.maxvalue-b0)/a2;bU=(ax*bV)+bA;bj=K(bU)+a3;if(a9){aS.ratio+=F;aS.color+=F;aS.alpha+=F;aG.push(m,bj,bi,bj,bt,i,bj,bi);if(a9===ba){a6=B;aA=bU+bc}else{a6=D;aA=bU}}else{aG.push(bj,bi,m,bj,bt,i,bj,bi);a6=j;aA=bU-bc}aS.ratio+=((bV-au)*100);aS.color+=S(a5.code,z);aS.alpha+=S(a5.alpha,100);au=bV;a5.legendItem=bn.text(a5.label,aA,bI+a5.labelY).css(bT).attr({zIndex:3,align:a6}).add(b6);a5.legendSymbol=bn.text(a5.scaleLabel,bU,bC).css(bT).attr({zIndex:2,align:D}).add(b6);bv.push(a5)}b5.xMin=b4.xMin=0;b5.xMax=b4.xMax=ax;b5.yMin=b4.yMin=0;b5.yMax=b4.yMax=0;b5.y=b4.y=0;b5.x=0;b4.x=ax}else{b5.tooltipPos[0]=b4.tooltipPos[0]=ah+ag;a7=270;aS.angle=90;aT=bA-bE;aQ=bA+ax;ao=bz-ar;an=bz+ar;aT=K(bA-bE)+aU;aQ=K(bA)+aU;ao=K(bz-ar)+aU;an=K(bz+ar)+aU;aP=K(bA+ax)+aU;am=K(bz-2)+aU;al=K(bz+2)+aU;ak=K(bz)+aU;aM=bA-a4/2;aL=K(aM-ar)+aU;aM=K(aM)+aU;aj=bz-ar/2;ai=K(aj+ar)+aU;aj=K(aj)+aU;be=be/2;bg=[i,aT,ao,m,aQ,ao,aQ,am,aP,ak,aQ,al,aQ,an,aT,an,b,i,aL,aj,m,aM,aj,i,aL,ak,m,aM,ak,i,aL,ai,m,aM,ai];ap=[i,aT+1,ao,m,aT+1,an,i,aL,aj-1,m,aM,aj-1,i,aL,ak-1,m,aM,ak-1,i,aL,ai-1,m,aM,ai-1];bj=bA+ax+bY;bF=K(bj+bh)+a3;bj=K(bj)+a3;bD=bF;bJ=bA+aN;ba=bO-1;for(a9=0;a9<bO;a9+=1){a5=az[a9];bV=(a5.maxvalue-b0)/a2;bS=(aD*bV)+bz;bi=K(bS)+a3;if(a9){aS.ratio+=F;aS.color+=F;aS.alpha+=F;aG.push(m,bj,bi,bF,bi,i,bj,bi);if(a9===ba){a6=j;L=bS+bc}else{a6=D;L=bS}}else{aG.push(bj,bi,m,bF,bi,i,bj,bi);a6=B;L=bS-bc}aS.ratio+=((bV-au)*100);aS.color+=S(a5.code,z);aS.alpha+=S(a5.alpha,100);au=bV;a5.legendItem=bn.text(a5.label,bJ+a5.labelY,L).css(bT).attr({zIndex:3,align:a6,rotation:a7}).add(b6);a5.legendSymbol=bn.text(a5.scaleLabel,bD,bS+a5.scaleLabelY).css(bT).attr({zIndex:2,align:B}).add(b6);bv.push(a5)}b5.xMin=b4.xMin=0;b5.xMax=b4.xMax=0;b5.yMin=b4.yMin=0;b5.yMax=b4.yMax=aD;b5.x=b4.x=0;b5.y=0;b4.y=aD}bP.colorBox=bn.rect(bA,bz,ax,aD,0,1).attr({zIndex:2,fill:bk,stroke:aX,strokeWidth:bw}).add(b6);if(M){bP.colorBoxEffect=bn.rect(bA,bz,be,bl,0,1).attr({zIndex:2,fill:U,strokeWidth:0}).add(b6)}bP.scale=bn.path(aG).attr({zIndex:2,stroke:a0,strokeWidth:af}).add(b6);aH=function(cd,cf,ce){var b9,ca=0,cc=bp&&bp.length,cb;if(bf){b9=(cd*a2/ax)+b0;cd=cd||0.01}else{b9=(cf*a2/aD)+b0;cf=cf||0.01}if(ce){bP.slider1.translate(cd,cf).toFront();bP.slider1Effect.translate(cd,cf).toFront();aO=b9;b5.toolText=e(aO)}else{bP.slider2.translate(cd,cf).toFront();bP.slider2Effect.translate(cd,cf).toFront();bN=b9;b4.toolText=e(bN)}if(bu){bK=clearTimeout(bK);bK=setTimeout(function(){for(;ca<cc;ca+=1){cb=bp[ca];if(cb.setScaleRange){cb.setScaleRange(aO,bN)}}},100)}};bd=function(ce){var cc=ce.data,ca=(x&&Y(ce))||R,cd,cf=cd=0,cg,b9=cc.isFirst,cb=b9?b4:b5;if(ce.type===d){cc.tooltipOffsetReference=J(bQ.container);cc.tooltipOffsetReference.left+=ag-20;cc.tooltipOffsetReference.top+=bB;cc.lastDraggedX=cc.dragStartX=ce.pageX||ca.pageX;cc.lastDraggedY=cc.dragStartY=ce.pageY||ca.pageY}else{if(bf){cd=cc.x+((ce.pageX||ca.pageX)-cc.dragStartX);if(cd<=0){cd=0}if(cd>ax){cd=ax}if(b9?cd>cb.x:cd<cb.x){cd=cb.x}if(I(cd-cc.lastDraggedX)>=(cc.snapPX||0)){cg=true}}else{cf=cc.y+((ce.pageY||ca.pageY)-cc.dragStartY);if(cf<=0){cf=0}if(cf>aD){cf=aD}if(b9?cf>cb.y:cf<cb.y){cf=cb.y}if(I(cf-cc.lastDraggedY)>=(cc.snapPX||0)){cg=true}}if(ce.type===f){if(cg){cc.lastDraggedX=cd;cc.lastDraggedY=cf;aH(cd,cf,b9);bW(ce,true)}}else{delete cc.lastDraggedX;delete cc.lastDraggedY;delete cc.dragStartX;delete cc.dragStartY;cc.x=cd;cc.y=cf;aH(cd,cf,b9);aK&&aK.hide()}}};bP.slider1=bn.path(bg).attr({zIndex:3,fill:aY,strokeWidth:a8,stroke:bL}).css(bG).add(b6);bP.slider1Effect=bn.path(ap).attr({zIndex:3,fill:P,strokeWidth:a8,stroke:bH}).css(bG).add(b6);bP.slider2=bn.path(bg).attr({zIndex:3,fill:aY,strokeWidth:a8,stroke:bL}).css(bG).add(b6).translate(b4.x,b4.y);bP.slider2Effect=bn.path(ap).attr({zIndex:3,fill:P,strokeWidth:a8,stroke:bH}).css(bG).translate(b4.x,b4.y).add(b6);k(bP.slider1.element,\"dragstart dragend drag\",bd,b5);k(bP.slider1Effect.element,\"dragstart dragend drag\",bd,b5);k(bP.slider2.element,\"dragstart dragend drag\",bd,b4);k(bP.slider2Effect.element,\"dragstart dragend drag\",bd,b4);var bW=function(ca,cc){var cb=ca.data,b9=cb.tooltipOffsetReference;if(cc||cb.lastDraggedX===undefined){if(aK){if(bf){cb.tooltipPos[0]=(ca.pageX||ca.x||ca.offsetX)-b9.left}else{cb.tooltipPos[1]=(ca.pageY||ca.y||ca.offsetY)-b9.top}aK.refresh(cb)}}},aZ=function(ca){var b9=ca.data;if(b9.lastDraggedX===undefined){aK&&aK.hide()}};k(bP.slider1.element,\"mouseout\",aZ,b5);k(bP.slider1Effect.element,\"mouseover\",bW,b5);k(bP.slider1Effect.element,\"mouseout\",aZ,b5);k(bP.slider2.element,\"mouseover\",bW,b4);k(bP.slider2.element,\"mouseout\",aZ,b4);k(bP.slider2Effect.element,\"mouseover\",bW,b4);k(bP.slider2Effect.element,\"mouseout\",aZ,b4)}}});u.gradient=ab}]);FusionCharts([\"private\",\"modules.renderer.highcharts-powercharts\",function(){var q=this,O=q.hcLib,bt=O.BLANKSTRINGPLACEHOLDER,K=O.BLANKSTRING,aE=O.HASHSTRING,aU=\" \",aP=O.COMMASTRING,bz=O.createTrendLine,a5=O.FC_CONFIG_STRING,bA=O.pluck,ay=O.getValidValue,J=O.pluckNumber,w=O.defaultPaletteOptions,F=O.getFirstValue,at=O.SHAPE_RECT,aL=O.extend2,bu=O.deltend,bs=O.getDashStyle,h=O.getFirstColor,a1=O.pluckColor,aH=O.getFirstAlpha,aX=O.graphics,ao=aX.getColumnColor,al=aX.getDarkColor,aM=aX.getLightColor,bo=aX.convertColor,ab=aX.parseColor,aa=aX.getValidColor,s=aX.mapSymbolName,ag=O.COLOR_TRANSPARENT,aZ=O.chartAPI,v=O.HUNDREDSTRING,a0=O.titleSpaceManager,br=O.placeHorizontalAxis,aR=O.placeVerticalAxis,bD=O.stepYAxisNames,D=O.regex.dropHash,d=O.getDefinedColor,bb=O.parseUnsafeString,u=O.toPrecision,V=O.setLineHeight,I=O.pluckFontSize,an=O.getAxisLimits,a2=O.adjustHorizontalCanvasMargin,X=O.adjustVerticalCanvasMargin,x=aZ.singleseries,aA=O.Highcharts,aW=aA.Series,bi=aA.fireEvent,E=aA.hasTouch,p=aA.getTouchEvent,bB=aA.hasSVG,r=aA.isIE,a7=aA.extend,az=aA.merge,aD=aA.pick,G=aA.each,Q=aA.attr,bF=aA.css,C=aA.docMode8,o=r&&!bB,a9=aA.createElement,bx=aA.discardElement,a=aA.seriesTypes,z=aA.addEvent,aS=aA.removeEvent,bv=aA.Color,bn=aA.getOptions(),ae=bn.plotOptions,a6=\"objectBoundingBox\",H=\"round\",av=\"dragstart\",b=\"dragend\",g,bE=\"rgba(192,192,192,\"+(bB?0.000001:0.002)+\")\",af=\"\",bf=\"select\",ad=\"hidden\",ah=r&&!bB?\"visible\":\"\",ak=\"absolute\",B=\"none\",S=\"px\",bj=\"M\",bk=\"L\",bp=\"A\",aC=\"AT\",bh=\"WA\",be=\"Z\",T=\"corner\",au=\"Tracker\",aN=\"select\",aQ=\",\",aF=\"0\",R=\"1\",aJ=\"100\",n=\"center\",k=\"top\",aB=\"bottom\",y=\"right\",a4=\"left\",bI=\"middle\",P=\"label\",aw=\"input\",aO=0,j=\"<option>\",aV=\"<\/option>\",aj=O.BGRATIOSTRING,ap={pageX:0,pageY:0},aK=Math,N=aK.PI,aq=N/180,c=aK.abs,bH=aK.max,ai=aK.min,ar=aK.ceil,l=aK.round,am=aK.log,a8=aK.floor,W=aK.pow,i=aK.sqrt,bC=aK.cos,U=aK.sin,bq=100000000,aT=0.5,m=\"FFFFFF\",Y=function(A){return A!==g&&A!==null},bw=function(A,L){return parseInt(A,L||10)},bG=function(A){return typeof A===\"object\"},bg=function(A){return typeof A===\"string\"},ax=function(L,A){return(L>0)?(am(L)/am(A||10)):null},a3=function(A){return A&&A.replace(/^#?([a-f0-9]+)/ig,\"#$1\")||B},bc=false;O.eventList.chartupdated=\"FC_ChartUpdated\";O.eventList.dataposted=\"FC_DataPosted\";O.eventList.dataposterror=\"FC_DataPostError\";O.eventList.datarestored=\"FC_DataRestored\";q.addEventListener(\"rendered\",function(L){var A=L.sender,M=A.__state,Z=A.jsVars&&A.jsVars.instanceAPI;if(M&&!M.listenersAdded&&Z&&typeof Z.getCollatedData===\"function\"){A.addEventListener([\"chartupdated\",\"dataupdated\",\"rendered\"],function(bJ){delete bJ.sender.__state.hasStaleData});M.listenersAdded=true}});aZ(\"spline\",{standaloneInit:true,creditLabel:bc,defaultSeriesType:\"spline\"},aZ.linebase);aZ(\"splinearea\",{standaloneInit:true,creditLabel:bc,defaultSeriesType:\"areaspline\",anchorAlpha:\"100\"},aZ.area2dbase);aZ(\"msspline\",{standaloneInit:true,creditLabel:bc,defaultSeriesType:\"spline\"},aZ.mslinebase);aZ(\"mssplinearea\",{standaloneInit:true,creditLabel:bc,defaultSeriesType:\"areaspline\"},aZ.msareabase);aZ(\"msstepline\",{standaloneInit:true,creditLabel:bc,defaultSeriesType:\"line\",stepLine:true},aZ.mslinebase);aZ(\"inversemsline\",{standaloneInit:true,inversed:true},aZ.mslinebase);aZ(\"inversemsarea\",{standaloneInit:true,inversed:true},aZ.msareabase);aZ(\"inversemscolumn2d\",{standaloneInit:true,inversed:true},aZ.mscolumn2dbase);var e=function(b3,bW,b6,bZ,bO,bM){var M,bN,L,Z,b5;var bX=function(b7){if(b7==null||b7==undefined||b7==\"\"||isNaN(b7)){return false}else{return true}};var bQ;if(bX(b6)&&Number(b6)>=b3){Z=Number(b6)}else{if(bO>1){bQ=ar(am(b3)/am(bO))}else{bQ=a8(am(b3)/am(bO))}Z=W(bO,bQ);bN=bQ}if(!bN){if(bO>1){bN=ar(am(Z)/am(bO))}else{bN=a8(am(Z)/am(bO))}}if(bX(bZ)&&Number(bZ)<=bW){L=Number(bZ)}else{if(bO>1){bQ=a8(am(bW)/am(bO))}else{bQ=ar(am(bW)/am(bO))}L=W(bO,bQ);M=bQ}if(!M){if(bO>1){M=a8(am(L)/am(bO))}else{M=ar(am(L)/am(bO))}}var bP;var bR=0;var bJ,bK,bT=[];var bV=Number(String(am(bO)/am(10)));b5=Number(bM)||((a8(bV)==bV)?8:4);if(bO>1){bJ=bN;bK=M}else{if(bO>0&&bO<1){bJ=M;bK=bN}}bV=bN;for(var b1=bJ;b1>=bK;--b1){bP=W(bO,bV);if(L<=bP&&Z>=bP){bT[bR++]={value:bP,ismajor:true}}if(b1==bK){continue}var b4=(bO>1)?-1:1;var bL=W(bO,bV)-W(bO,bV+b4);var bS=bL/(b5+1);for(var b0=1;b0<=b5;++b0){bP=W(bO,bV+b4)+bS*b0;if(L<=bP&&Z>=bP){bT[bR++]={value:bP,ismajor:false}}}if(bO>1){bV--}else{bV++}}var A,bY;for(var bU in bT){for(var b2 in bT[bU]){if(b2==\"value\"){if(!A){A=(bT[bU][b2]==L)&&(bT[bU].isextreme=true)}if(!bY){bY=(bT[bU][b2]==Z)&&(bT[bU].isextreme=true)}}}}if(!A){bT[bR++]={value:L,ismajor:true,isextreme:true}}if(!bY){bT[bR]={value:Z,ismajor:true,isextreme:true}}return{Max:Z,Min:L,divArr:bT}};aZ(\"logmsline\",{standaloneInit:true,isValueAbs:true,isLog:true,configureAxis:function(M,b4){var bN=M[a5],b1=bN.axisGridManager,bK=this.numberFormatter,bO=M.series,Z=M.xAxis,bT=M.yAxis[0],bM=bN[0],bY=b4.chart,bX=!J(bY.showlimits,bY.showyaxisvalues,1),bQ=!J(bY.showdivlinevalues,bY.showyaxisvalues,1),bJ=J(bY.base,10),bR=J(bY.yaxismaxvalue),bP=J(bY.yaxisminvalue),L=J(bY.showminordivlinevalues)===1,bZ=bA(bY.minordivlinecolor,bT.gridLineColor,w.divLineColor[M.chart.paletteIndex]),bL=J(bY.minordivlinealpha,bY.divlinealpha,w.divLineAlpha[M.chart.paletteIndex]),b2=[bT,undefined,undefined,J(bY.divlinethickness,2),bT.gridLineDashStyle,bT.gridLineColor,2],bS=[bT,undefined,undefined,J(bY.minordivlinethickness,1),bT.gridLineDashStyle,bo(bA(bY.minordivlinecolor,bZ),J(bY.minordivlinealpha,bL/2)),2],bV=L||(bL&&bS[3]),A,b3,b0,bW,bU;if(bJ<=0){bJ=10}if(bR<=0){bR=undefined}if(bP<=0){bP=undefined}bW=bO.length;while(bW--){b3=bO[bW]&&bO[bW].data;bU=b3&&b3.length||0;while(bU--){b0=b3[bU];b0.y=ax(b0.y,bJ)}}A=e(bM.max||bJ,bM.min||1,bR,bP,bJ,bV?bY.numminordivlines:0);Z.title.text=bb(bY.xaxisname);aL(bT,{title:{text:bb(bY.yaxisname)},labels:{enabled:false},gridLineWidth:aO,alternateGridColor:ag,reversed:(bY.invertyaxis===\"1\"),max:ax(A.Max,bJ),min:ax(A.Min,bJ)});delete bM.max;delete bM.min;bM.isLog=true;if(bT.reversed&&bT.min>=0){M.plotOptions.series.threshold=bT.max}if(b4.trendlines){bz(b4.trendlines,[{max:A.Max,min:A.Min,plotLines:bT.plotLines,plotBands:bT.plotBands}],bN)}bW=bT.plotLines.length;while(bW--){b0=bT.plotLines[bW];b0.value&&(b0.value=ax(b0.value,bJ));b0.from&&(b0.from=ax(b0.from,bJ));b0.to&&(b0.to=ax(b0.to,bJ))}bW=bT.plotBands.length;while(bW--){b0=bT.plotBands[bW];b0.from&&(b0.from=ax(b0.from,bJ));b0.to&&(b0.to=ax(b0.to,bJ))}bW=A.divArr.length;while(bW--){b0=A.divArr[bW];if(b0.ismajor){b2[1]=ax(b0.value,bJ);b2[2]=bK.yAxis(b0.value);b1.addAxisGridLine.apply(b1,b2)}else{if(bV||b0.isextreme){bS[1]=ax(b0.value,bJ);bS[2]=(L||b0.isextreme)?bK.yAxis(b0.value):K;b1.addAxisGridLine.apply(b1,bS)}}b3=bT.plotLines[bT.plotLines.length-1];if(b0.isextreme){b3.width=0.1;if(bX){b3.label.text=K}}else{if(bQ&&b3.label){b3.label.text=K}}}},pointValueWatcher:function(M,bJ,L){var Z,A=M[a5];L=J(L,0);if(bJ>0){if(!A[L]){A[L]={}}Z=A[L];Z.max=Z.max>bJ?Z.max:bJ;Z.min=Z.min<bJ?Z.min:bJ}},creditLabel:bc},aZ.mslinebase);aZ(\"logmscolumn2d\",{standaloneInit:true,isLog:true,isValueAbs:true,configureAxis:aZ.logmsline.configureAxis,pointValueWatcher:aZ.logmsline.pointValueWatcher,creditLabel:bc},aZ.mscolumn2dbase);aZ(\"errorbar2d\",{standaloneInit:true,creditLabel:bc,showValues:0,chart:function(A,M){var Z=this.base.chart.apply(this,arguments),L=this.drawErrorValue;if(!Z.callbacks){Z.callbacks=[]}Z.callbacks.push(function(){var bL=this,bK=bL.series,bJ=bK&&bK.length;while(bJ--){L.call(bK[bJ])}});return Z},point:function(cb,bO,ch,cc,b3,ci,cm,cg){var bV=false;if(ch.data){var A=!J(cc.halferrorbar,1),ck=ch.data,cd=b3[a5],bR=bA(this.isValueAbs,cd.isValueAbs,false),bY=J(ch.showvalues,cd.showValues),b2=J(bO.yAxis,0),L=J(cc.use3dlighting,1),b5=b3[a5].numberFormatter,M=b3.chart.paletteIndex,cl=aQ+(J(cc.useplotgradientcolor,1)?d(cc.plotgradientcolor,w.plotGradientColor[M]):K),bX=bA(ch.alpha,cc.plotfillalpha,aJ),b1=aH(bA(ch.errorbaralpha,cc.errorbaralpha,bX)),b6=J(ch.dashed,cc.plotborderdashed,0),bP=J(ch.dashlen,cc.plotborderdashlen,5),Z=J(ch.dashgap,cc.plotborderdashgap,4),bU=this.errorBarShadow=J(cc.errorbarshadow,0),bJ,b7,cn,bN,b8,bT,bZ,b9,bS,bL,cf,bK,ca,cj,bQ,ce,bW,b4,bM,b0;bO.name=ay(ch.seriesname);if(J(ch.includeinlegend)===0||bX==0||bO.name===undefined){bO.showInLegend=false}bO.errorBarWidthPercent=J(ch.errorbarwidthpercent,cc.errorbarwidthpercent,70);bO.errorBarColor=bo(h(bA(ch.errorbarcolor,cc.errorbarcolor,\"AAAAAA\")),b1);bO.errorBarThickness=J(ch.errorbarthickness,cc.errorbarthickness,1);bO.color=bA(ch.color,b3.colors[cm%b3.colors.length]).split(aQ)[0].replace(/^#?/g,\"#\");bW=bA(cc.plotborderthickness,R);bQ=b3.chart.useRoundEdges;cn=this.isBar;bJ=/3d$/.test(b3.chart.defaultSeriesType);bM=bA(cc.plotbordercolor,w.plotBorderColor[M]).split(aQ)[0];b0=cc.showplotborder==aF?aF:bA(cc.plotborderalpha,aJ);b0=bJ?(cc.showplotborder?b0:aF):b0;bM=bJ?bA(cc.plotbordercolor,\"#FFFFFF\"):bM;for(b7=0;b7<ci;b7+=1){bN=ck[b7];if(bN){cf=b5.getCleanValue(bN.value,bR);bK=b5.getCleanValue(bN.errorvalue,bR);if(cf===null){bO.data.push({y:null});continue}bV=true;bL=cd.oriCatTmp[b7];bZ=bA(bN.color,ch.color,b3.colors[cm%b3.colors.length])+cl;b9=aH(bA(bN.alpha,bX))+K;b8=bA(bN.ratio,ch.ratio,cc.plotfillratio);bT=bA(360-cc.plotfillangle,90);if(cf<0){bT=360-bT}ca={opacity:b9/100};b4=ai(b9,aH(b0))+K;bS=ao(bZ,b9,b8,bT,bQ,bM,b4,cn,bJ);cj={opacity:b1/250};ce=[];ce.push({errorValue:bK,toolText:bK,shadow:cj});A&&ce.push({errorValue:-bK,toolText:bK,shadow:cj});bO.data.push(aL(this.getPointStub(bN,cf,bL,b3,ch,bY,b2),{y:cf,shadow:ca,errorValue:ce,color:bS[0],borderColor:bS[1],borderWidth:bW,use3DLighting:L,dashStyle:J(bN.dashed,b6)?bs(bA(bN.dashlen,bP),bA(bN.dashgap,Z),bW):undefined}));this.pointValueWatcher(b3,cf,bK)}else{bO.data.push({y:null})}}}if(!bV){bO.showInLegend=false}return bO},pointValueWatcher:function(bJ,bK,L){var bN,M,Z,bM,A=bJ[a5],bL=0;if(bK!==null){if(L){bN=bK+L;M=bK-L}else{bN=M=bK}if(!A[bL]){A[bL]={}}Z=A[bL];Z.max=Z.max>bN?Z.max:bN;Z.min=Z.min<bN?Z.min:bN;Z.max=Z.max>M?Z.max:M;Z.min=Z.min<M?Z.min:M}},drawErrorValue:function(){var bQ=this,cm=bQ.data,co=bQ.chart,b2=bQ.options,cr=b2.animation,bV=bQ.dataLabelsGroup,ct=[],b9=co.renderer,b8=+new Date(),bP=b2.cursor,ch=bP&&{cursor:bP}||{},b1=b2.dataLabels,cj=b1.style,b5=parseInt(cj.lineHeight,10),cn=co.options.chart,bK=co.options.instanceAPI,Z=3,cl=cn.valuePadding+Z,bL=(cn.rotateValues==1)?270:undefined,bO=n,b6={},cb=!bK.avoidCrispError,bZ=bA(bQ.errorGroup,bQ.group),ck=bQ.shadowGroup,bW=J(bK.errorBarShadow,b2.shadow),cc,bT,bR,ca,cq,L,A,b0,b7,bM,M,cg,ci,b4,b3,cf,bS,cp,bJ,ce,cd,bN,cs,bX,bY,bU;if(bQ){b0=cm.length;if(bK.useErrorGroup){bQ.errorGroup=b9.g(\"errorBar\").add(bZ);bZ&&bZ.element&&bZ.element.childNodes&&bZ.element.childNodes[0]&&bZ.element.childNodes[0].parentNode.insertBefore(bQ.errorGroup.element,bZ.element.childNodes[0]);bZ=bQ.errorGroup}if(!ck&&bW){ck=bQ.shadowGroup=b9.g(\"shadow\").add(bZ);bZ&&bZ.element&&bZ.element.childNodes&&bZ.element.childNodes[0]&&bZ.element.childNodes[0].parentNode.insertBefore(ck.element,bZ.element.childNodes[0])}while(b0--){b7=cm[b0];A=b7.plotY;ci=b7.errorValue;if(A!==g&&!isNaN(A)&&(ci&&(b4=ci.length))){b7=cm[b0];bS=b7.shapeArgs;cp=bS&&bS.width;cg=bS&&bS.x;L=J(cg+(cp/2),b7.plotX);bU=cp*b2.errorBarWidthPercent/100;while(b4--){b3=ci[b4];b3.shadow=b3.shadow||{opacity:0};bM=b3.errorValue;if(!b3||!Y(bM)){continue}cf=J(b3.isHorizontal,0);bJ=J(b3.errorBarThickness,b2.errorBarThickness);if(cf){bX=J(bU,b3.errorWidth,b2.hErrorBarWidth,b2.errorBarWidth);ce=bX/2;bY=b3.errorStartValue;cs=J(bY&&bQ.xAxis.translate(bY),L);bN=cs+bQ.xAxis.translate(bM,0,0,0,0,1);b6.x=bN+Z+cl;b6.y=A;bR=A;bT=bN;if(cb){bR=l(A)+(bJ%2/2);bT=l(bN)+(bJ%2/2)}ct=[bj,cs,bR,bk,bT,bR,bj,bT,bR-ce,bk,bT,bR+ce]}else{bX=J(bU,b3.errorWidth,b2.vErrorBarWidth,b2.errorBarWidth);ce=bX/2;cd=J(b3.errorStartValue,b7.y);bN=bQ.yAxis.translate(cd+bM,0,1,0,1);cs=bQ.yAxis.translate(cd,0,1,0,1);b6.x=L+(bL?b5*0.37:0);b6.y=bN+(+(cs>bN?-cl:(b5*0.37+bJ+cl)));bO=(cs>bN)&&bL?a4:n;bR=bN;bT=L;if(cb){bR=l(bN)+(bJ%2/2);bT=l(L)+(bJ%2/2)}ct=[bj,bT,cs,bk,bT,bR,bj,bT-ce,bR,bk,bT+ce,bR]}if(Y(b3.displayValue)){b9.text(b3.displayValue,b6.x,b6.y).attr({align:bO,rotation:bL}).css(cj).add(bV)}if(!b7.errorGraph){b7.errorGraph=[]}M=b7.errorGraph[b4];if(M){stop(M);M.animate({d:ct})}else{b7.errorGraph[b4]=co.renderer.path(ct).attr({\"stroke-linecap\":H,\"stroke-width\":bJ,stroke:bA(b3.errorBarColor,b2.errorBarColor),dashstyle:bA(b3.dashStyle,b2.errorBarDashStyle)}).add(bZ).shadow(bW,ck,b3.shadow||0);bK.useErrorAnimation&&cr&&b7.errorGraph[b4].hide()}if(!b7.errorTracker){b7.errorTracker=[]}ca=b7.errorTracker[b4];if((cc=bA(b3.link,b7.link))!==undefined){ch.cursor=\"pointer\";ch._cursor=\"hand\"}else{ch.cursor=ch._cursor=\"default\"}if(ca){ca.attr({d:ct})}else{cq=b7.errorTracker[b4]=b9.path(ct).attr({\"stroke-width\":bH(bJ,10),stroke:bE,isTracker:b8,fill:bE,visibility:bQ.visible?ah:ad,zIndex:1}).on(E?\"touchstart\":\"mouseover\",function(cx){var cy=co.plotLeft,cw=co.plotTop,cv=(cx.currentTarget?cx.currentTarget:cx.srcElement),cu;if(!(cu=cv.point)){return}co.hoverPoint&&co.hoverPoint.onMouseOut();co.hoverPoint=null;cu.tooltipPos=[bA(cx.layerX,cx.x)-cy+20,bA(cx.layerY,cx.y)-cw-15];co.tooltip&&co.tooltip.refresh(cu)}).on(\"mousemove\",function(cx){var cy=co.plotLeft,cw=co.plotTop,cv=(cx.currentTarget?cx.currentTarget:cx.srcElement),cu;if(!(cu=cv.point)){return}cu.tooltipPos=[bA(cx.layerX,cx.x)-cy+20,bA(cx.layerY,cx.y)-cw-15];co.tooltip&&co.tooltip.refresh(cu)}).on(\"mouseout\",function(){co.tooltip&&co.tooltip.hide()}).on(\"click\",function(cw){var cv=(cw.currentTarget?cw.currentTarget:cw.srcElement),cu;if(!(cu=cv.point)){return}bK.linkClickFN.call(cu)}).css(ch).add(b7.group||co.trackerGroup);a7(cq,{link:cc,series:bQ,chart:co,options:b7.options,toolText:bA(b3.toolText,b7.toolText),getLabelConfig:b7.getLabelConfig});b7.errorTracker[b4].element.point=cq}}}}}}},aZ.mscolumn2dbase);aZ(\"errorline\",{standaloneInit:true,creditLabel:bc,chart:aZ.errorbar2d.chart,drawErrorValue:aZ.errorbar2d.drawErrorValue,point:function(cg,bM,cm,ch,b5,co,cr){var bT=false;if(cm.data){var A=!J(ch.halferrorbar,1),cp=cm.data,ci=b5[a5],bN=bA(this.isValueAbs,ci.isValueAbs,false),bX=J(cm.showvalues,ci.showValues),b4=J(bM.yAxis,0),b7=this.numberFormatter,cb=h(bA(cm.color,ch.linecolor,b5.colors[cr%b5.colors.length])),bO=b5.chart,b2=bA(cm.alpha,ch.linealpha,aJ),bZ=J(cm.errorbaralpha,ch.errorbaralpha,b2),cs=J(cm.linethickness,ch.linethickness,2),cd=Boolean(J(cm.dashed,ch.linedashed,0)),bR=J(cm.linedashlen,ch.linedashlen,5),bJ=J(cm.linedashgap,ch.linedashgap,4),cl,M,b9,cq,bQ,bP,bY,cc,bV,b3,cn,b1,b0,Z,bK,cf,b6,bS,b8,bW,ck,bL,ca,L,bU,ce,cj;bM.name=ay(cm.seriesname);bM.color={FCcolor:{color:cb,alpha:b2}};bM.lineWidth=cs;bP=J(cm.drawanchors,cm.showanchors,ch.drawanchors,ch.showanchors);b6=J(cm.anchorsides,ch.anchorsides,0);bS=J(cm.anchorradius,ch.anchorradius,3);b8=h(bA(cm.anchorbordercolor,ch.anchorbordercolor,cb));bW=J(cm.anchorborderthickness,ch.anchorborderthickness,1);ck=h(bA(cm.anchorbgcolor,ch.anchorbgcolor,w.anchorBgColor[bO.paletteIndex]));bL=bA(cm.anchoralpha,ch.anchoralpha,aJ);ca=bA(cm.anchorbgalpha,ch.anchorbgalpha,bL);L=J(cm.anchorstartangle,ch.anchorstartangle,0);bM.errorBarWidth=J(ch.errorbarwidth,cm.errorbarwidth,5);bM.errorBarColor=bo(h(bA(cm.errorbarcolor,ch.errorbarcolor,\"AAAAAA\")),bZ);bM.errorBarThickness=ai(cs,J(cm.errorbarthickness,ch.errorbarthickness,1));if(J(cm.includeinlegend)===0||bM.name===undefined||(b2==0&&bP!==1)){bM.showInLegend=false}bM.marker={fillColor:{FCcolor:{color:ck,alpha:((ca*bL)/100)+K}},lineColor:{FCcolor:{color:b8,alpha:bL+K}},lineWidth:bW,radius:bS,symbol:s(b6),startAngle:L};for(b9=0;b9<co;b9+=1){bK=cp[b9];if(bK){cl=b7.getCleanValue(bK.value,bN);M=b7.getCleanValue(bK.errorvalue,bN);if(cl===null){bM.data.push({y:null});continue}bT=true;b0=J(bK.anchorsides,b6);b1=J(bK.anchorradius,bS);b3=h(bA(bK.anchorbordercolor,b8));cn=J(bK.anchorborderthickness,bW);bV=h(bA(bK.anchorbgcolor,ck));bY=bA(bK.anchoralpha,bL);cc=bA(bK.anchorbgalpha,ca);cq=h(bA(bK.color,cb));bQ=bA(bK.alpha,b2);ce=J(bK.dashed,cd)?bs(bR,bJ,cs):undefined;cf={opacity:bQ/100};bU=bP===undefined?bQ!=0:!!bP;cj=[];cj.push({errorValue:M,toolText:M,shadow:{opacity:bZ/250}});A&&cj.push({errorValue:-M,toolText:M,shadow:{opacity:bZ/250}});bM.data.push(aL(this.getPointStub(bK,cl,Z,b5,cm,bX,b4),{y:cl,shadow:cf,dashStyle:ce,errorValue:cj,valuePosition:bA(bK.valueposition,bO.valuePosition),color:{FCcolor:{color:cq,alpha:bQ}},marker:{enabled:bU,fillColor:{FCcolor:{color:bV,alpha:(cc*bY/100)+K}},lineColor:{FCcolor:{color:b3,alpha:bY}},lineWidth:cn,radius:b1,symbol:s(b0),startAngle:bA(bK.anchorstartangle,L)}}));aZ.errorbar2d.pointValueWatcher(b5,cl,M)}else{bM.data.push({y:null})}}}if(!bT){bM.showInLegend=false}return bM}},aZ.mslinebase);aZ(\"errorscatter\",{standaloneInit:true,creditLabel:bc,chart:aZ.errorbar2d.chart,drawErrorValue:aZ.errorbar2d.drawErrorValue,defaultZeroPlaneHighlighted:false,useErrorGroup:true,point:function(b8,cs,cc,cM,b0,bJ,bM){if(cc.data){var cJ=false,cn=aZ[b8],ca=J(cc.drawline,0),bP=J(cc.drawprogressioncurve,0),cz=b0[a5],bZ=cc.data,ch,b5=bZ.length,b6=J(cc.showvalues,cz.showValues),bS=this.numberFormatter,cw=J(cc.showregressionline,cM.showregressionline,0),cA=bA(cM.errorbarcolor,\"AAAAAA\"),bU=bA(cM.errorbaralpha,aJ),b1=J(cM.errorbarthickness,1),b7=J(cM.errorbarwidth,5),cO=J(cM.halfverticalerrorbar,1),A=J(cc.verticalerrorbaralpha,cc.errorbaralpha,cM.verticalerrorbaralpha,bU),cu=bo(bA(cc.verticalerrorbarcolor,cc.errorbarcolor,cM.verticalerrorbarcolor,cA),A),bX=J(cc.verticalerrorbarthickness,cc.errorbarthickness,cM.verticalerrorbarthickness,b1),Z=J(cM.halfhorizontalerrorbar,1),ci=bA(cc.horizontalerrorbaralpha,cc.errorbaralpha,cM.horizontalerrorbaralpha,bU),bL=bo(bA(cc.horizontalerrorbarcolor,cc.errorbarcolor,cM.horizontalerrorbarcolor,cA),ci),cx=J(cc.horizontalerrorbarthickness,cc.errorbarthickness,cM.horizontalerrorbarthickness,b1),bO=J(cc.usehorizontalerrorbar,cM.usehorizontalerrorbar,0),bY=J(cc.useverticalerrorbar,cM.useverticalerrorbar,1),bQ={sumX:0,sumY:0,sumXY:0,sumXsqure:0,sumYsqure:0,xValues:[],yValues:[]},bK,cN,cp,cI,cm,cF,cr,ce,cB,M,cK,cQ,bV,b2,cg,cC,ct,bW,cE,cv,b4,cf,cP,cl,cd,bN,cj,cq,bT,cL,cb,L,cG,ck,cD,co,cH,bR,b3,cy;cs.zIndex=1;cs.name=ay(cc.seriesname);if(J(cc.includeinlegend)===0||cs.name===undefined){cs.showInLegend=false}cs.vErrorBarWidth=J(cc.verticalerrorbarwidth,cc.errorbarwidth,cM.verticalerrorbarwidth,b7);cs.hErrorBarWidth=J(cc.horizontalerrorbarwidth,cc.errorbarwidth,cM.horizontalerrorbarwidth,b7);if(ca||bP){if(bP){cs.type=\"spline\"}cp=h(bA(cc.color,b0.colors[bM%b0.colors.length]));cI=bA(cc.alpha,v);cm=J(cc.linethickness,cM.linethickness,2);cF=Boolean(J(cc.linedashed,cc.dashed,cM.linedashed,0));cr=J(cc.linedashlen,cM.linedashlen,5);ce=J(cc.linedashgap,cM.linedashgap,4);cs.color=bo(bA(cc.linecolor,cM.linecolor,cp),J(cc.linealpha,cM.linealpha,cI));cs.lineWidth=cm;cs.dashStyle=cF?bs(cr,ce,cm):undefined}cB=Boolean(J(cc.drawanchors,cc.showanchors,cM.drawanchors,cM.showanchors,1));cK=J(cc.anchorsides,cM.anchorsides,bM+3);cQ=J(cc.anchorradius,cM.anchorradius,3);bV=h(bA(cc.anchorbordercolor,cc.color,cM.anchorbordercolor,cp,b0.colors[bM%b0.colors.length]));cg=J(cc.anchorborderthickness,cM.anchorborderthickness,1);cC=h(bA(cc.anchorbgcolor,cM.anchorbgcolor,w.anchorBgColor[b0.chart.paletteIndex]));ct=bA(cc.anchoralpha,cc.alpha,cM.anchoralpha,aJ);bW=bA(cc.anchorbgalpha,cM.anchorbgalpha,ct);b2=bA(cc.anchorstartangle,cM.anchorstartangle);cs.marker={fillColor:this.getPointColor(cC,aJ),lineColor:{FCcolor:{color:bV,alpha:ct+K}},lineWidth:cg,radius:cQ,symbol:s(cK)};if(cw){cs.events={hide:this.hideRLine,show:this.showRLine};co=J(cc.showyonx,cM.showyonx,1);cH=h(bA(cc.regressionlinecolor,cM.regressionlinecolor,bV));bR=J(cc.regressionlinethickness,cM.regressionlinethickness,cg);b3=aH(J(cc.regressionlinealpha,cM.regressionlinealpha,ct));cy=bo(cH,b3)}for(cN=0;cN<b5;cN+=1){M=bZ[cN];if(M){bK=bS.getCleanValue(M.y);bN=bS.getCleanValue(M.x);cj=bS.getCleanValue(M.errorvalue);if(bK===null){cs.data.push({y:null,x:bN});continue}cJ=true;cL=cn.getPointStub(M,bK,bS.xAxis(bN),b0,cc,b6);cE=J(M.anchorsides,cK);cv=J(M.anchorradius,cQ);b4=h(bA(M.anchorbordercolor,bV));cf=J(M.anchorborderthickness,cg);cP=h(bA(M.anchorbgcolor,cC));cl=bA(M.anchoralpha,M.alpha,ct);cd=bA(M.anchorbgalpha,bW);cb=Boolean(J(M.usehorizontalerrorbar,bO));L=Boolean(J(M.useverticalerrorbar,bY));cq=bT=null;var b9=[];if(cb){cq=bS.getCleanValue(bA(M.horizontalerrorvalue,cj));cG=bS.dataLabels(cq);b9.push({errorValue:cq,toolText:cG,errorBarColor:bL,isHorizontal:1,errorBarThickness:cx,shadow:{opacity:ci/250}});if(!Z){b9.push({errorValue:-cq,toolText:cG,errorBarColor:bL,isHorizontal:1,errorBarThickness:cx,shadow:{opacity:ci/250}})}}if(L){bT=bS.getCleanValue(bA(M.verticalerrorvalue,cj));ck=bS.dataLabels(bT);b9.push({errorValue:bT,toolText:ck,errorBarColor:cu,errorBarThickness:bX,shadow:{opacity:A/250}});if(!cO){b9.push({errorValue:-bT,toolText:ck,errorBarColor:cu,errorBarThickness:bX,shadow:{opacity:A/250}})}}cs.data.push({y:bK,x:bN,errorValue:b9,displayValue:cL.displayValue,toolText:cL.toolText,link:cL.link,marker:{enabled:cB,fillColor:{FCcolor:{color:cP,alpha:((cd*cl)/100)+K}},lineColor:{FCcolor:{color:b4,alpha:cl}},lineWidth:cf,radius:cv,symbol:s(cE),startAngle:bA(M.anchorstartangle,b2)}});this.pointValueWatcher(b0,cO?bK:bK-bT,Z?bN:bN-cq,cw&&bQ);this.pointValueWatcher(b0,bK+bT,bN+cq,cw&&bQ)}else{cs.data.push({y:null})}}if(cw){ch=this.getRegressionLineSeries(bQ,co,b5);this.pointValueWatcher(b0,ch[0].y,ch[0].x);this.pointValueWatcher(b0,ch[1].y,ch[1].x);cD={type:\"line\",color:cy,showInLegend:false,lineWidth:bR,enableMouseTracking:false,marker:{enabled:false},data:ch,zIndex:0};cs=[cs,cD]}}if(!cJ){cs.showInLegend=false}return cs}},aZ.scatterbase);aZ(\"waterfall2d\",{standaloneInit:true,point:function(cb,bN,ci,cc,b2){var cf,b4,b1,bJ,bX,b9,b5,bQ,bL,bR,bW,ca,cm=bA(cc.connectorthickness,1),b7={step:true,type:\"line\",enableMouseTracking:false,data:[],dataLabels:{enabled:false},marker:{enabled:false},dashStyle:cc.connectordashed===\"1\"?bs(J(cc.connectordashlen,2),J(cc.connectordashgap,2),cm):undefined,drawVerticalJoins:false,useForwardSteps:true,color:bo(bA(cc.connectorcolor,\"000000\"),bA(cc.connectoralpha,100)),lineWidth:cm},bU=ci.length,cd=b2[a5],b0=cd.axisGridManager,b8=b2.xAxis,L=b2.chart.paletteIndex,ch=cd.x,M=b2.colors,bV=b2.colors.length,Z=/3d$/.test(b2.chart.defaultSeriesType),cl=this.isBar,cg=bA(cc.showplotborder,(Z?aF:R))===R,bT=cg?(Z?1:J(cc.plotborderthickness,1)):0,bO=b2.chart.useRoundEdges,bY=J(cc.plotborderalpha,cc.plotfillalpha,100)+K,bK=bA(cc.plotbordercolor,w.plotBorderColor[L]).split(aQ)[0],bM=J(cc.plotborderdashed,0),b6=J(cc.plotborderdashlen,6),bZ=J(cc.plotborderdashgap,3),bP=0,ce,bS,A=Boolean(J(cc.use3dlighting,1)),b3=0,ck=0,cj=J(cc.useplotgradientcolor,1)?d(cc.plotgradientcolor,w.plotGradientColor[L]):K;NumberFormatter=b2[a5].numberFormatter;for(b4=0,b1=0;b4<bU;b4+=1){bL=ci[b4];if(bL.vline){b0.addVline(b8,bL,bP,b2);continue}cf=NumberFormatter.getCleanValue(bL.value);ce=J(bL.issum,0);bS=J(bL.cumulative,1);if(ce){cf=bS?b3:(b3===ck?b3:(b3-ck));ck=b3;b7.data.push({y:null,x:b4-0.5})}else{b3+=cf}bW=J(bL.showlabel,cc.showlabels,1);bJ=bb(!bW?K:F(bL.label,bL.name));b0.addXaxisCat(b8,bP,bP,bJ);bP+=1;if(cf>0){bX=bA(bL.color,cc.positivecolor,M[b1%bV])}else{bX=bA(bL.color,cc.negativecolor,M[b1%bV])}bX+=(aQ+cj);b9=bA(bL.alpha,cc.plotfillalpha,aJ);b5=bA(bL.ratio,cc.plotfillratio);bR=bA(360-cc.plotfillangle,90);if(cf<0){bR=360-bR}ca={opacity:b9/100,inverted:cl};bQ=ao(bX,b9,b5,bR,bO,bK,bA(bL.alpha,bY),cl,Z);bN.data.push(aL(this.getPointStub(bL,cf,bJ,b2),{y:cf,_FCY:cf<0?(b3-cf):b3,_FCYBottom:cf<0?b3:b3-cf,shadow:ca,color:bQ[0],borderColor:bQ[1],borderWidth:bT,dashStyle:(J(bL.dashed,bM)?bs(b6,bZ,bT):undefined),use3DLighting:A}));b7.data.push({y:b3,x:b4});this.pointValueWatcher(b2,b3);b1+=1}if(cc.showsumatend!=\"0\"){bW=J(cc.showlabels,1);bJ=bb(!bW?K:F(cc.sumlabel,\"Total\"));b0.addXaxisCat(b8,bP,bP,bJ);bP+=1;bX=M[b1%bV]+aQ+cj;b9=bA(cc.plotfillalpha,aJ);bR=bA(360-cc.plotfillangle,90);if(b3<0){bR=360-bR}ca={opacity:b9/100,inverted:cl};bQ=ao(bX,b9,cc.plotfillratio,bR,bO,bK,bY,cl,Z);bN.data.push(aL(this.getPointStub({},b3,bJ,b2),{y:b3,shadow:ca,color:bQ[0],borderColor:bQ[1],borderWidth:bT,use3DLighting:A}))}ch.catCount=bP;if(cc.showconnectors!=\"0\"){bN=[b7,bN]}return bN},defaultSeriesType:\"floatedcolumn\"},x);var ba=0;function by(bM,Z,bQ,bK,L,bJ,bS,bT){var bW,bV,M=0,bL=bM.length-1,A,bR,bU,bX,bN,bP=Z.series,bO=Z.colors,bY;if(bQ===0){ba=0}if(!bP[bQ]){bP[bQ]={data:[{toolText:false,doNotSlice:true,y:100,visible:false,color:\"rgba(255,255,255,0)\"}]}}bW=bP[bQ];bX=bK-100+bW.data[bW.data.length-1].y;if(bX){bW.data.splice(bW.data.length-1,0,{toolText:false,doNotSlice:true,y:bX,visible:false,color:\"rgba(255,255,255,0)\"})}bW.data[bW.data.length-1].y=100-L;for(bU=0;bU<=bL;bU+=1){A=bM[bU];A._value=J(A.value,1);M+=A._value}bV=(L-bK)/M;for(bU=bL;bU>=0;bU-=1){A=bM[bU];bN=bb(bA(A.label,A.name));bR=bV*A._value;bY=bW.data.length-1;bW.data.splice(bY,0,{prevPointIndex:bT,prevSeriesIndex:bQ-1,displayValue:bS?bN:K,toolText:bb(bA(A.tooltext,A.hovertext,bN)),y:bR,link:ay(A.link),doNotSlice:true,color:bo(A.color||bO[ba%bO.length],A.alpha||bJ)});ba+=1;if(A.category){by(A.category,Z,bQ+1,bK,(bU===0)?L:(bK+bR),bJ,bS,bY)}bK+=bR}}aZ(\"multilevelpie\",{standaloneInit:true,defaultSeriesType:\"pie\",defaultPlotShadow:0,series:function(bR,bQ,A,M,bS){var L=bR.chart,bL=bQ.series,bP,bO,bM=Boolean(J(L.usehovercolor,1)),bJ=bo(bA(L.hoverfillcolor,\"FF5904\"),J(L.hoverfillalpha,100));bQ.legend.enabled=false;bQ.plotOptions.pie.allowPointSelect=false;bQ.plotOptions.series.borderColor=bo(bA(L.plotbordercolor,L.piebordercolor,\"FFFFFF\"),L.showplotborder!=\"0\"?bA(L.plotborderalpha,L.pieborderalpha,100):0);bQ.plotOptions.series.borderWidth=J(L.pieborderthickness,L.plotborderthickness,1);bO=J(L.showlabels,1);bQ.plotOptions.pie.startingAngle=0;bQ.plotOptions.pie.size=\"100%\";bQ.chart.plotBorderColor=0;bQ.chart.plotBackgroundColor=null;if(bM){bQ.plotOptions.series.point.events={mouseOver:function(){var bV=this,bY=bV.series.chart,bX=bY.series,bU,bZ,bW;while(bV){bV.graphic.attr({fill:bJ});bZ=bV.prevPointIndex;bW=bV.prevSeriesIndex;bV=(bU=bX[bW])&&bU.data&&bU.data[bZ]}},mouseOut:function(){var bV=this,bY=bV.series.chart,bX=bY.series,bU,bZ,bW;while(bV){bV.graphic.attr({fill:bV.color});bZ=bV.prevPointIndex;bW=bV.prevSeriesIndex;bV=(bU=bX[bW])&&bU.data&&bU.data[bZ]}}}}bQ.chart.plotBorderWidth=0;if(bR.category){by(bR.category,bQ,0,0,100,bA(L.plotfillalpha,L.piefillalpha,100),bO,null)}var bN=parseInt(L.pieradius),Z,bT=0,bK=true;if(bN){Z=(2*bN)/bL.length;bK=false}else{Z=parseInt(100/bL.length,10)}bQ.plotOptions.series.dataLabels.distance=0;bQ.plotOptions.series.dataLabels.placeInside=true;for(bP=0;bP<bL.length;bP+=1){bL[bP].innerSize=bT+(bK?\"%\":\"\");bL[bP].size=(bT+=Z)+(bK?\"%\":\"\");if(bL[bP].data[bL[bP].data.length-1].y===0){bL[bP].data.pop()}}},spaceManager:function(L,bJ,A,bP){var bL=L[a5],bO=bL.marginLeftExtraSpace,Z=bL.marginTopExtraSpace,M=bL.marginBottomExtraSpace,bN=bL.marginRightExtraSpace,bM=A-(bO+bN+L.chart.marginRight+L.chart.marginLeft),bK=bP-(M+Z+L.chart.marginBottom+L.chart.marginTop);a0(L,bJ,bM,bK*0.4)},creditLabel:bc},x);aZ(\"radar\",{standaloneInit:true,creditLabel:bc,defaultSeriesType:\"radar\",spaceManager:function(bX,bS,bR,bN){bX.chart.plotBorderWidth=0;bX.chart.plotBackgroundColor=null;var bK=bX[a5],bW=bK.x,bJ=bX.xAxis,Z=bS.chart,M=bK.marginLeftExtraSpace,L=bK.marginTopExtraSpace,bT=bK.marginBottomExtraSpace,bO=bK.marginRightExtraSpace,bP=bR-(M+bO+bX.chart.marginRight+bX.chart.marginLeft),A=bN-(bT+L+bX.chart.marginBottom+bX.chart.marginTop);A-=a0(bX,bS,bP,A*0.4);bJ.min=J(bW.min,0);bJ.max=J(bW.max,bW.catCount-1);bJ.gridLineColor=bo(bA(Z.radarspikecolor,w.divLineColor[bX.chart.paletteIndex]),J(Z.radarspikealpha,Z.radarinlinealpha,w.divLineAlpha[bX.chart.paletteIndex]));bJ.gridLineWidth=J(Z.radarspikethickness,1);bJ.showRadarBorder=J(Z.showradarborder,1);bJ.radarBorderThickness=J(Z.radarborderthickness,2);bJ.radarBorderColor=bo(bA(Z.radarbordercolor,w.divLineColor[bX.chart.paletteIndex]),J(Z.radarborderalpha,100));bJ.radarFillColor=bo(bA(Z.radarfillcolor,w.altHGridColor[bX.chart.paletteIndex]),J(Z.radarfillalpha,w.altHGridAlpha[bX.chart.paletteIndex]));if(bX.legend.enabled){if(bA(Z.legendposition,aB).toLowerCase()!=y){A-=this.placeLegendBlockBottom(bX,bS,bP,A/2)}else{bP-=this.placeLegendBlockRight(bX,bS,bP/3,A)}}var bL=J(Z.radarradius,0),bV=2*J(parseInt(bJ.labels.style.lineHeight,10),12),bQ=6,bM=ai(bP-(100+bQ),A-(bV+bQ)),bU=bL===0?bM*0.5:bL;if(!(bU>0)){bU=5}bX.chart.axisRadius=bU},anchorAlpha:\"100\",showValues:0,isRadar:true},aZ.msareabase);var aY=function(){var cg=this,bY=cg.options,b0=cg.radarAxis,b9=b0.catLength,b5=cg.renderer,ce,bM=cg.plotWidth/2,bK=cg.plotHeight/2,ca=b0.radius,bW=b0.xAxis,bL=b0.yAxis,b6=bL.plotLines,ch=bW.plotLines,bP=bL.min,bU=b0.xTrans,bJ=b0.startAngle,cd=[],bT=[bj],A=[],Z=b6.length,cf=b0.yTrans,bO,cc,b3,b2,bS,b4,b7,bR,b1=aK.PI*2,cb=aK.PI/2,bX=aK.PI+cb,bZ,bV,L=[\"right\",\"center\",\"left\"],bQ=ca+10,b8=bL.labels,bN,M=b5.g(\"axis\");M.attr({zIndex:2,width:cg.plotWidth,height:cg.plotHeight}).translate(cg.plotLeft,cg.plotTop).add();b0.divline=[];for(cc=0;cc<Z;cc+=1){A[cc]=[bj];bO=true;ce=b9;bN=b6[cc];b7=bN.value;while(ce--){bS=c(b7-bP)*cf;b3=bM+(bS*bC(-(bJ+(ce*bU))));b2=bK+(bS*U(-(bJ+(ce*bU))));A[cc].splice(A[cc].length,0,b3,b2);if(ce==0){if(bN.label){b8=bN.label;b4=b8.text;if(b4||b4===0){b5.text(b4,b3,b2).attr({align:b8.textAlign,rotation:b8.rotation}).css(b8.style).add(M)}}}if(bO){A[cc].push(bk);bO=false}}A[cc].push(\"Z\");b0.divline[cc]=b5.path(A[cc]).attr({zIndex:2,stroke:bN.color,\"stroke-width\":bN.width}).add(M)}bO=true;ce=ch.length;while(ce--){bN=ch[ce];b7=bN.value;bR=(bJ+(b7*bU));bZ=bR%b1;b3=bM+(ca*bC(-bR));b2=bK+(ca*U(-bR));cd.splice(cd.length,0,bj,bM,bK,bk,b3,b2);bT.splice(bT.length,0,b3,b2);if(bO){bT.push(bk);bO=false}if(bN.label){b8=bN.label;b4=b8.text;if(b4||b4===0){bV=(bZ>cb&&bZ<bX)?0:((bZ==cb||bZ==bX)?1:2);b5.text(b4,bM+(bQ*bC(-bR)),bK+(bQ*U(-bR))).attr({align:L[bV],rotation:b8.rotation}).css(b8.style).add(M)}}}bT.push(\"Z\");b0.spikeGraph=b5.path(cd).attr({zIndex:1,stroke:bW.gridLineColor,\"stroke-width\":bA(bW.gridLineWidth,1)}).add(M);if(bW.showRadarBorder){b0.borderGraph=b5.path(bT).attr({stroke:bW.radarBorderColor,\"stroke-width\":bA(bW.radarBorderThickness,2),fill:bW.radarFillColor}).add(M)}};ae.radar=az(ae.area,{states:{hover:{}}});var bm=aA.extendClass(a.pie,{type:\"radar\",isCartesian:false,pointClass:a.area.prototype.pointClass,pointAttrToOptions:a.area.prototype.pointAttrToOptions,translate:function(){var bM=this,bQ=bM.chart,bL=bM.data,M=bL.length,bO,bU,bJ,bT,bP,bK,Z;if(typeof bQ.radarAxis===\"undefined\"){bK=bQ.plotWidth/2;Z=bQ.plotHeight/2;var bV=bQ.options,L=bV.xAxis,bR=(L.max-L.min)+1,A=bV.yAxis instanceof Array?bV.yAxis[0]:bV.yAxis,bN=Y(bV.chart.axisRadius)?bV.chart.axisRadius:ai(bK,Z);if(bN<0){bN=ai(bK,Z)}bU=A.min;bJ=c(A.max-bU);bT=bN/bJ;bO=(2*aK.PI)/bR;bP=aK.PI/2;bQ.radarAxis={};bQ.radarAxis.yTrans=bT;bQ.radarAxis.xTrans=bO;bQ.radarAxis.yRange=bJ;bQ.radarAxis.startAngle=bP;bQ.radarAxis.yMin=bU;bQ.radarAxis.centerX=bK;bQ.radarAxis.centerY=Z;bQ.radarAxis.radius=bN;bQ.radarAxis.categories=[];bQ.radarAxis.catLength=bR;bQ.radarAxis.yAxis=A;bQ.radarAxis.xAxis=L}else{bK=bQ.radarAxis.centerX;bT=bQ.radarAxis.yTrans;bU=bQ.radarAxis.yMin;bP=bQ.radarAxis.startAngle;bO=bQ.radarAxis.xTrans;Z=bQ.radarAxis.centerY}while(M--){var bS=bL[M];if(bS.y!==null){bS.plotX=bK+((bT*c(bS.y-bU))*bC(-(bP+(M*bO))));bS.plotY=Z+((bT*c(bS.y-bU))*U(-(bP+(M*bO))));bS.clientX=bS.plotX}}},drawGraph:function(A){var bN=this,bV=bN.options,bR=bN.chart,bU=bN.graph,bL=[],M=[],bT=bN.group,bJ=bN.color,bP=bV.lineWidth,bS=bV.lineColor||bJ,bO=aD(bV.fillColor,bv(bJ).setOpacity(bV.fillOpacity||0.5).get()),L,bQ=bR.renderer,bM=[],bK=bR.plotWidth/2,Z=bR.plotHeight/2;if(bN.data.length>1){L=[];G(bN.data,function(bW,bX){if(!bX){L.push(bj);M.push(bj)}else{if(bX<2){L.push(bk);M.push(bk)}}if(bW.y===null){L.push(bK,Z)}else{L.push(bW.plotX,bW.plotY)}M.push(bK,Z)});L.push(\"Z\");M.push(\"Z\");bL=bL.concat(L)}else{}bN.graphPath=bL;bN.animPath=M;bN.singlePoints=bM;if(bU){bU.attr({d:bL})}else{bN.graph=bQ.path(bL).attr({stroke:bS,fill:bO,\"stroke-width\":bP+S}).add(bT).shadow()}},drawTracker:function(){var L=this,M=L.options.cursor,A=M&&{cursor:M},Z;G(L.data,function(bJ){Z=bJ.graphic;if(Z){Z.attr({isTracker:true}).on(\"mouseover\",function(bK){L.onMouseOver();bJ.onMouseOver()}).on(\"mouseout\",function(bK){if(!L.options.stickyTracking){L.onMouseOut()}}).css(A)}})},setVisible:function(M,bR){var bK=this,bO=bK.chart,bN=bK.legendItem,bP=bK.group,bT=bK.tracker,bM=bK.dataLabelsGroup,L=bK.shadowGroup,A,bJ,Z=bK.data,bQ,bS=bO.options.chart.ignoreHiddenSeries,bL=bK.visible;bK.visible=M=M===g?!bL:M;A=M?\"show\":\"hide\";if(bP){bP[A]()}if(L&&L.floated){L[A]()}bJ=Z.length;while(bJ--){bQ=Z[bJ];if(bQ.graphic){bQ.graphic[A]()}}if(bM){bM[A]()}if(bN){bO.legend.colorizeItem(bK,M)}bK.isDirty=true;if(bK.options.stacking){G(bO.series,function(bU){if(bU.options.stacking&&bU.visible){bU.isDirty=true}})}if(bS){bO.isDirtyBox=true}if(bR!==false){bO.redraw()}bi(bK,A)},getColor:a.area.prototype.getColor,drawDataLabels:a.area.prototype.drawDataLabels,animate:function(bJ){var L=this,M=L.chart,A=L.clipRect,Z=L.options.animation;if(Z&&!bG(Z)){Z={}}L.graph.attr({d:L.animPath});L.graph.animate({d:L.graphPath},Z)},getSymbol:a.area.prototype.getSymbol,drawPoints:function(){var bJ=this,A,Z=bJ.data,bM=bJ.chart,L,bO,bK,bN,bL,M;if(bJ.options.marker.enabled){bK=Z.length;while(bK--){bN=Z[bK];L=bN.plotX;bO=bN.plotY;M=bN.graphic;if(bO!==g&&!isNaN(bO)){A=bN.pointAttr[bN.selected?bf:af];bL=A.r;if(M){M.animate({x:L,y:bO,r:bL})}else{bN.graphic=bM.renderer.symbol(aD(bN.marker&&bN.marker.symbol,bJ.symbol),L,bO,bL).attr(A).add(bM.trackerGroup||bJ.group)}}}}},rotate:function(){},render:function(){var Z=this,bL=Z.chart,bN,bR=Z.options,L=bR.animation,bP=L&&Z.animate,A=bP?(L&&L.duration)||500:0,bO,bM,bQ,bJ,bK=bL.renderer,M=Z.clipRect;if(!M){bO=-bL.plotLeft;bM=-bL.plotTop;bQ=bL.chartWidth;bJ=bL.chartHeight;M=Z.clipRect=!bL.hasRendered&&bL.clipRect?bL.clipRect:bK.clipRect(bO,bM,bQ,bJ);M.cliprectX=bO;M.cliprectY=bM;M.cliprectW=bQ;M.cliprectH=bJ;if(!bL.clipRect){bL.clipRect=Z.clipRect}}if(bL.drawRadarAxis!==true){aY.call(bL);bL.drawRadarAxis=true}if(!Z.group){bN=Z.group=bK.g(\"series\");if(bL.inverted){bN.attr({width:bL.plotWidth,height:bL.plotHeight}).invert()}bN.clip(Z.clipRect).attr({visibility:Z.visible?ah:ad,zIndex:3}).translate(bL.plotLeft,bL.plotTop).add(bL.seriesGroup)}Z.drawDataLabels();if(Z.drawGraph){Z.drawGraph()}Z.drawPoints();if(Z.options.enableMouseTracking!==false){Z.drawTracker()}if(bP){Z.animate()}setTimeout(function(){M.isAnimating=false;bN=Z.group;if(bN&&M!==bL.clipRect&&M.renderer){bN.clip((Z.clipRect=bL.clipRect));M.destroy()}},A);Z.isDirty=false}});a.radar=bm;var aG={defaultRestoreButtonVisible:1,spaceManager:function(bJ,bM,M,bQ){var Z=this,bO=bJ[a5],bK=bJ.chart,bN=bM.chart,bR=bO.outCanvasStyle,L=(bQ-(bO.marginBottomExtraSpace+bK.marginBottom+bK.marginTop)*0.3),bP=0,A=bO.smartLabel,bL=4,bT,bS;bK.formAction=ay(bN.formaction);bK.formDataFormat=bA(bN.formdataformat,FusionChartsDataFormats.XML);bK.formTarget=bA(bN.formtarget,\"_self\");bK.formMethod=bA(bN.formmethod,\"POST\");bK.submitFormAsAjax=J(bN.submitformasajax,0);bK.showFormBtn=J(bN.showformbtn,1)&&bK.formAction;bK.formBtnWidth=J(bN.formbtnwidth,80);bK.formBtnTitle=bA(bN.formbtntitle,\"Submit\");bK.formBtnBorderColor=bA(bN.formbtnbordercolor,\"CBCBCB\");bK.formBtnBgColor=bA(bN.formbtnbgcolor,\"FFFFFF\");bK.btnPadding=J(bN.btnpadding,7);bK.btnSpacing=J(bN.btnspacing,5);bK.formBtnStyle={color:bR.color,fontSize:bR.fontSize,fontFamily:bR.fontFamily,fontWeight:\"bold\"};if(bN.btntextcolor){bK.formBtnStyle.color=bN.btntextcolor.replace(D,aE)}if((bS=J(bN.btnfontsize))>=0){bK.formBtnStyle.fontSize=bS+S}V(bK.formBtnStyle);bK.showRestoreBtn=J(bN.showrestorebtn,this.defaultRestoreButtonVisible,1);if(bK.showRestoreBtn){bK.restoreBtnWidth=J(bN.restorebtnwidth,80);bK.restoreBtnTitle=bA(bN.restorebtntitle,\"Restore\");bK.restoreBtnBorderColor=bA(bN.restorebtnbordercolor,bK.formBtnBorderColor);bK.restoreBtnBgColor=bA(bN.restorebtnbgcolor,bK.formBtnBgColor);bK.restoreBtnStyle={color:bK.formBtnStyle.color,fontSize:bK.formBtnStyle.fontSize,fontFamily:bK.formBtnStyle.fontFamily,fontWeight:\"bold\"};if(bN.restorebtntextcolor){bK.restoreBtnStyle.color=bN.restorebtntextcolor.replace(D,aE)}if((bS=J(bN.restorebtnfontsize))>=0){bK.restoreBtnStyle.fontSize=bS+S}V(bK.restoreBtnStyle)}bK.showLimitUpdateMenu=J(bN.showlimitupdatemenu,1);if(bK.showFormBtn){A.setStyle(bK.formBtnStyle);bT=A.getOriSize(bK.formBtnTitle);bP=bT.height||0}if(bK.showRestoreBtn){A.setStyle(bK.restoreBtnStyle);bT=A.getOriSize(bK.restoreBtnTitle);bP=bH(bT.height,bP)||0}if(bP>0){bP+=bK.btnPadding+bL;if(bP>L){bK.btnPadding=bH(bK.btnPadding-bP+L,0)/2;bP=L}}bK.marginBottom+=bP;bK.spacingBottom+=bP;(bJ.callbacks||(bJ.callbacks=[])).push(Z.drawButtons);return Z.placeVerticalXYSpaceManager.apply(this,arguments)},drawButtons:function(bL,L){var bK=bL.renderer,M=L.hcJSON,bQ=M.chart,bJ=bQ.btnPadding,bP=bQ.btnSpacing,A=bL.chartHeight-bQ.spacingBottom+bJ,bO=bL.chartWidth-bQ.spacingRight,Z,bN,bM;if(bQ.showFormBtn){Z=bL.submitBtn=bK.button({x:0,y:0,width:bQ.formBtnWidth,text:bQ.formBtnTitle,style:bQ.formBtnStyle,callBack:function(){L.chartInstance.submitData()},color:bQ.formBtnBgColor,borderColor:bQ.formBtnBorderColor}).add();bM=Z._conf&&Z._conf.width||0;bO-=bM;Z.translate(bO,A);bO-=bP}if(bQ.showRestoreBtn){bN=bL.restoreBtn=bK.button({x:0,y:0,width:bQ.restoreBtnWidth,text:bQ.restoreBtnTitle,style:bQ.restoreBtnStyle,callBack:function(){L.chartInstance.restoreData()},color:bQ.restoreBtnBgColor,borderColor:bQ.restoreBtnBorderColor}).add();bM=bN._conf&&bN._conf.width||0;bO-=bM;bN.translate(bO,A);bO-=bP}},drawAxisUpdateUI:function(bS,bK){var bN=bK.hcJSON,L=bN.chart,bV=bN.yAxis[0],bQ=bN[a5],A=bK.chartInstance,bU=bS.renderer,bR=bS.container,bL=bS.options.chart,bO=bL.showRangeError,bT=bQ.inCanvasStyle,bP=bS.yAxis[0].plotLinesAndBands,bM=[],M=a7({outline:B,\"-webkit-appearance\":B,position:\"absolute\",background:\"transparent\",border:\"1px solid #cccccc\",textAlign:\"right\",top:0,left:0,width:50,zIndex:20,opacity:0,borderRadius:0},bT),Z,bX,bJ,bW;if(bU.forExport){return}Z=function(bZ,b0,bY){var b1;if(bZ===b0+\"\"){return null}b1=bY?A.setUpperLimit(bZ,true):A.setLowerLimit(bZ,true);if(!b1&&bO){bS.showLoading(\"<strong>Sorry! Not enough range gap to modify axis limit to \"+(Number(bZ)||\"0\")+\".<br />Please modify the data values to be within range.<\/strong><br />&nbsp;<br />(click anywhere on the chart to close this message)\",true)}return b1};bW=bP&&bP.length||0;while(bW--){bX=bP[bW];bJ=bX.options;if(bJ.isMaxLabel){bM.push(bX)}else{if(bJ.isMinLabel){bM.push(bX)}}}G(bM,function(b5){var b4=b5.label,b7=b5.options,bZ=b4&&b4.getBBox&&b4.getBBox(),b2,b6,b1,b3,b0,bY;if(!(bZ&&b4)){return}b1=bZ.x+bZ.width-bL.spacingLeft;b3=bS.plotLeft-b1-(o?5:4);b2=jQuery(b6=a9(\"input\",{type:\"text\",value:b7.value},a7(M,{top:(bZ.y+(o?0:-1))+S,left:b3+S,width:b1+S}),bR,true)).bind({focus:function(){b2.val(b7.value).css({opacity:1,color:bT.color});bY=true;b4.hide()},mouseup:function(){if(bY){bY=false;if(!E){setTimeout(function(){b2.select()},0)}}},blur:function(){var b8=b2.val(),b9=Z(b8,b7.value,b7.isMaxLabel);if(b9!==true){b2.css({opacity:0});b4.show()}bY=false},keyup:function(ca){var b9=ca.keyCode,b8=b2.val(),cb;if(b9===13){cb=Z(b8,b7.value,b7.isMaxLabel);if(cb===false){b2.css({color:\"#dd0000\"})}}else{if(b9===27){b2.val(b7.value).trigger(\"blur\",ca)}}}});Q(b6,\"isOverlay\",true);if(o){z(bS.container,\"mousedown\",b0=function(b8){if(b8.srcElement!==b6){b2.trigger(\"blur\",b8)}});z(bS,\"destroy\",function(){aS(bS.container,\"mousedown\",b0);b2.remove()})}else{z(bS,\"defaultprevented\",b0=function(b8){if(b6.parentNode&&b2.is(\":focus\")){b2.trigger(\"blur\",b8)}});z(bS,\"destroy\",function(){aS(bS,\"defaultprevented\",b0);b2.remove()})}if(L.showLimitUpdateMenu){bS.addButton({x:L.spacingLeft,y:bS.chartHeight-L.spacingBottom+(!L.showFormBtn&&!L.showRestoreBtn?-15:10),align:\"left\",symbol:\"configureIcon\",tooltip:\"Change Y-Axis Limits\",menuId:\"axis-update-menu\",menuItems:[{text:\"Increase Upper Limit\",onclick:function(){bK.chartInstance.setUpperLimit(bV.max+bV.tickInterval,true)}},{text:\"Increase Lower Limit\",onclick:function(){bK.chartInstance.setLowerLimit(bV.min+bV.tickInterval,true)}},{text:\"Decrease Upper Limit\",onclick:function(){bK.chartInstance.setUpperLimit(bV.max-bV.tickInterval,true)}},{text:\"Decrease Lower Limit\",onclick:function(){bK.chartInstance.setLowerLimit(bV.min-bV.tickInterval,true)}}]})}})},getCollatedData:function(){var bN=this,bR=bN.chartInstance,M=bR.__state,bP=bR.jsVars,bO=bN.updatedDataObj||aL({},bR.getChartData(FusionChartsDataFormats.JSON)),bJ=bP._reflowData,bM=bO.dataset,Z=(bJ&&bJ.hcJSON&&bJ.hcJSON.series),bL=(Z&&Z.length),bK,L,bQ,A;if(M.hasStaleData!==undefined&&!M.hasStaleData&&bN.updatedDataObj){return bN.updatedDataObj}if(bM&&Z){while(bL--){L=(bM[bL]&&bM[bL].data);bQ=(Z[bL]&&Z[bL].data);bK=(bQ&&bQ.length);if(bK&&L){while(bK--){A=bQ[bK];if(A){L[bK].value=A.y}}}}}M.hasStaleData=false;return(bN.updatedDataObj=bO)},eiMethods:{restoreData:function(){var L=this.jsVars,A=L.fcObj;L._reflowData={};delete L._reflowClean;q.hcLib.createChart(A,L.container,L.type,undefined,undefined,false,true);O.raiseEvent(\"DataRestored\",{},A,[A.id]);return true},submitData:function(){var bN=this.jsVars,bQ=bN.fcObj,bR=FusionChartsDataFormats.JSON,bJ=FusionChartsDataFormats.CSV,bL=FusionChartsDataFormats.XML,M=bN.instanceAPI,Z=M.hcJSON,bO=Z.chart,L=bO.formAction,bP=bO.submitFormAsAjax,bM,bK,A,bS;if(bO.formDataFormat===bR){bM=bR;bK=JSON.stringify(M.getCollatedData())}else{if(bO.formDataFormat===bJ){bM=bJ;bK=M.getCSVString&&M.getCSVString();if(bK===undefined){bK=q.core.transcodeData(M.getCollatedData(),bR,bJ)}}else{bM=bL;bK=q.core.transcodeData(M.getCollatedData(),bR,bL)}}if(L===undefined){return}if(!bP){bS=jQuery(\"<form style='display:none' action='\"+L+\"' method='\"+bO.formMethod+\"'\\n                        target='\"+bO.formTarget+\"'> <input type='hidden' \\n                        name='strXML' value='\"+bb(bK)+\"'><input type='hidden' name='dataFormat' value='\"+bM.toUpperCase()+\"' /><\/form>\");jQuery(document.body).append(bS);bS.submit();bS.remove();bS=null}else{A={error:function(bV,bT,bU){O.raiseEvent(\"DataPostError\",{xhrObject:bV,url:L,errorType:bT,statusText:bU,httpStatus:bV.status},bQ,[bQ.id,bT,bV.status,bU])},success:function(bU,bV,bT){O.raiseEvent(\"DataPosted\",{xhrObject:bT,response:bU,url:L},bQ,[bQ.id,bU])},type:bO.formMethod};A.data={};A.data[\"str\"+bM.toUpperCase()]=bK;jQuery&&jQuery.ajax(L,A)}},getDataWithId:function(){var bM=this.jsVars,M=bM.instanceAPI,A=M.getCollatedData(),bQ=[[null]],bJ=A.dataset,Z=(A.categories&&A.categories[0]&&A.categories[0].category),bL=(bJ&&bJ.length)||0,bN,bP,bO,bR,L,bK;while(bL--){bO=bJ[bL];if(bO){bQ[0][bL+1]=bJ[bL].seriesname;bO=bJ[bL]&&bJ[bL].data;bK=(bO&&bO.length)||0;while(bK--){bR=bK+1;if(!bQ[bR]){bP=(Z&&Z[bK]&&Z[bK].label)||null;bQ[bR]=[bP]}bN=bQ[bR];L=bO[bK].id||((bL+1).toString()+\"_\"+(bR).toString());bN[bL+1]=[L,Number(bO[bK].value)]}}}return bQ},getData:function(bO){var bL=this.jsVars,L=bL.instanceAPI,A=L.getCollatedData(),bQ=[[null]],Z=A.dataset,M=(A.categories&&A.categories[0]&&A.categories[0].category),bK=(Z&&Z.length)||0,bM,bP,bN,bR,bJ;if(bO){if(/^json$/ig.test(bO)){bQ=A}else{bQ=q.core.transcodeData(A,\"json\",bO)}}else{while(bK--){bN=Z[bK];if(bN){bQ[0][bK+1]=Z[bK].seriesname;bN=Z[bK]&&Z[bK].data;bJ=(bN&&bN.length)||0;while(bJ--){bR=bJ+1;if(!bQ[bR]){bP=(M&&M[bJ]&&M[bJ].label)||null;bQ[bR]=[bP]}bM=bQ[bR];bM[bK+1]=Number(bN[bJ].value)}}}}return bQ},setYAxisLimits:function(bN,bJ){var bL=this.jsVars,M=bL.instanceAPI,Z=M.hcJSON,A=M.dataObj,bK=A&&A.chart||{},L=Z.yAxis[0],bM=false;if((bN!==undefined)&&bN>M.highValue&&bN!==L.max){bK.yaxismaxvalue=bN;bM=true}else{bN=M.highValue>L.max?M.highValue:L.max;bK.yaxismaxvalue=bN}if((bJ!==undefined)&&bJ<M.lowValue&&bJ!==L.min){bK.yaxisminvalue=bJ;bM=true}else{bJ=M.lowValue<L.min?M.lowValue:L.min;bK.yaxisminvalue=bJ}if(bM){M.updateChartWithData(A)}return bM},getUpperLimit:function(){var M=this.jsVars,Z=M.instanceAPI,L=Z.hcJSON,A=L.yAxis&&L.yAxis[0];return(A?A.max:undefined)},setUpperLimit:function(A){var L=this.jsVars.fcObj;return L.setYAxisLimits(A,undefined)},getLowerLimit:function(){var M=this.jsVars,Z=M.instanceAPI,L=Z.hcJSON,A=L.yAxis&&L.yAxis[0];return(A?A.min:undefined)},setLowerLimit:function(A){var L=this.jsVars.fcObj;return this.jsVars.fcObj.setYAxisLimits(undefined,A)}},updateChartWithData:function(A){var M=this,Z=M.chartInstance,bK=Z.jsVars,L=(A&&A.chart),bL=bK._reflowData||(bK._reflowData={}),bJ={dataObj:{chart:{yaxisminvalue:J(L.yaxisminvalue),yaxismaxvalue:J(L.yaxismaxvalue)}}};aL(bL,bJ,true);q.hcLib.createChart(Z,bK.container,bK.type);return},preSeriesAddition:function(){var bK=this,M=bK.dataObj,bJ=bK.hcJSON,A=M.chart,Z=bJ.chart,L=bJ[a5];bK.tooltipSepChar=L.tooltipSepChar;Z.allowAxisChange=J(A.allowaxischange,1);Z.changeDivWithAxis=1;Z.snapToDivOnly=J(A.snaptodivonly,0);Z.snapToDiv=Z.snapToDivOnly?1:J(A.snaptodiv,1);Z.snapToDivRelaxation=J(A.snaptodivrelaxation,10);Z.doNotSnap=J(A.donotsnap,0);if(Z.doNotSnap){Z.snapToDiv=Z.snapToDivOnly=0}Z.showRangeError=J(A.showrangeerror,0);if(J(A.allowaxischange,1)){(bJ.callbacks||(bJ.callbacks=[])).push(function(bO){var bN=this,bL=arguments,bM=function(){bK.drawAxisUpdateUI.apply(bN,bL);bP=null},bP;z(bO,\"destroy\",function(){if(bP){bP=clearTimeout(bP)}});bP=setTimeout(bM,1)})}},getPointStub:function(bL,bR,Z,A,bJ,bZ,bN){var bK=A[a5],bO=bN===1?true:false,bX=bR===null?bR:bK.numberFormatter.dataLabels(bR,bO),bT=ay(bb(bL.tooltext)),bW=bK.tooltipSepChar,bS=bJ._sourceDataset,bQ=J(bL.allowdrag,bS.allowdrag,1),M=J(bL.allownegativedrag,bS.allownegativedrag,bJ.allownegativedrag,1),b2,b0,L,bM,bV,bU=0,b1=0,bP,bY;if(!bK.showTooltip){bV=false}else{if(bT!==undefined){bV=bT;bU=1}else{if(bX===null){bV=false}else{if(bK.seriesNameInToolTip){bM=F(bJ&&bJ.seriesname)}bV=bM?bM+bW:K;bV+=Z?Z+bW:K;bP=bV;if(bK.showPercentInToolTip){b2=true}else{bV+=bX}}}}if(!J(bL.showvalue,bZ)){L=K}else{if(ay(bL.displayvalue)!==undefined){L=bb(bL.displayvalue);b1=1}else{if(bK.showPercentValues){b0=true}else{L=bX}}}bY=bA(bL.link);return{displayValue:L,toolText:bV,link:bY,showPercentValues:b0,showPercentInToolTip:b2,allowDrag:bQ,allowNegDrag:M,_toolTextStr:bP,_isUserValue:b1,_isUserTooltip:bU}}};function aI(L){var A=L.fcObj;q.hcLib.createChart(A,L.container,L.type,undefined,undefined,false,true);O.raiseEvent(\"chartupdated\",{},A,[A.id])}aZ(\"dragnode\",{standaloneInit:true,decimals:2,numdivlines:0,numVDivLines:0,defaultZeroPlaneHighlighted:false,defaultZeroPlaneHidden:true,spaceManager:aG.spaceManager,drawButtons:aG.drawButtons,updateChartWithData:aG.updateChartWithData,creditLabel:bc,showYAxisValues:0,defaultSeriesType:\"dragnode\",cleanedData:function(Z,L){var bT=Z&&Z.hcJSON,bK=L&&L.hcJSON,A,M,bP,bQ,bR,bO,bJ,bN,bS,bM,bL;if(bT&&bK){if(bT.series&&bK.series&&(bJ=bK.series.length)){for(bM=0;bM<bJ;bM+=1){bQ=bK.series[bM];M=bT.series[bM];if(bQ.data&&(bN=bQ.data.length)){for(bL=0;bL<bN;bL+=1){if(bQ.data[bL]===true&&M&&M.data&&M.data[bL]){delete M.data[bL];M.data[bL]={y:null}}}}}}if(bT.connectors&&bK.connectors&&(bR=bK.connectors.length)){for(bM=0;bM<bR;bM+=1){bP=bK.connectors[bM];A=bT.connectors[bM];if(bP.connector&&(bS=bP.connector.length)){for(bL=0;bL<bS;bL+=1){if(bP.connector[bL]===true&&A&&A.connector&&A.connector[bL]){delete A.connector[bL];A.connector[bL]={}}}}}}if(bT.dragableLabels&&bK.dragableLabels&&(bO=bK.dragableLabels.length)){for(bM=0;bM<bO;bM+=1){if(bK.dragableLabels[bM]===true&&bT.dragableLabels[bM]){delete bT.dragableLabels[bM];bT.dragableLabels[bM]={}}}}}},eiMethods:aL(a7(aZ.scatterbase.eiMethods,aG.eiMethods),{addNode:function(bZ){var bO=this.jsVars,L=bO.instanceAPI,bY=bO._reflowData||(bO._reflowData={}),b1=L.hcJSON,bL=L.numberFormatter,bJ=bA(bZ.datasetId),bS=bL.getCleanValue(bZ.y),bT=bL.getCleanValue(bZ.x),bP=false,bM=b1.series,Z=bM.length,bW=b1.xAxis.min,bX=b1.xAxis.max,A=b1.yAxis[0].min,M=b1.yAxis[0].max,bQ={hcJSON:{series:[]}},bU=bQ.hcJSON.series,bV,bR,bN,b0,bK;if(bJ!==undefined&&bS!==null&&bS>=A&&bS<=M&&bT!==null&&bT>=bW&&bT<=bX){for(bR=0;bR<Z&&!bP;bR+=1){if(bJ==bM[bR].id){bU[bR]={data:[]};bP=true;bN=bM[bR];b0=bN.data;bK=b0.length;b0.push(bV=bN._dataParser(bZ,bK,bT,bS));bU[bR].data[bK]=bV;aL(bY,bQ,true)}}if(bP){aI(bO);return true}return false}else{return false}},getNodeAttribute:function(A){var bN=this.jsVars,bQ=bN.instanceAPI,M=bN._reflowData||(bN._reflowData={}),bR=M.hcJSON&&M.hcJSON.series||[],L=bQ.hcJSON,Z=false,bM=L.series,bP=bM.length,bL,bJ,bS,bO,bK;if(A!==undefined){for(bL=0;bL<bP&&!Z;bL+=1){bO=bM[bL];bK=bO.data;bS=bK.length;for(bJ=0;bJ<bS;bJ+=1){if(bK[bJ].id===A){if(bR[bL]&&bR[bL].data&&bR[bL].data[bJ]){return aL(bK[bJ]._options,bR[bL].data[bJ]._options,true)}return bK[bJ]._options}}}}return false},setNodeAttribute:function(bO,b6,bP){var b3;if(typeof b6===\"object\"&&bP===undefined){b3=b6}else{b3={};b3[b6]=bP}var bN=this.jsVars,L=bN.instanceAPI,b2=bN._reflowData||(bN._reflowData={}),b5=L.hcJSON,bJ=L.numberFormatter,bR=false,bK=b5.series,Z=bK.length,bZ=b5.xAxis.min,b1=b5.xAxis.max,A=b5.yAxis[0].min,M=b5.yAxis[0].max,bT={hcJSON:{series:[]}},bX=bT.hcJSON.series,b0=b2.hcJSON&&b2.hcJSON.series||[],bY,bV,bW,bU,bS,bM,b4,bL,bQ;if(bO!==undefined){for(bU=0;bU<Z&&!bR;bU+=1){bM=bK[bU];b4=bM.data;bL=b4.length;for(bS=0;bS<bL;bS+=1){if(bO===b4[bS].id){bQ=b4[bS];delete b3.id;if(b0[bU]&&b0[bU].data&&b0[bU].data[bS]&&b0[bU].data[bS]._options){b3=aL(b0[bU].data[bS]._options,b3,true)}b3=aL(bQ._options,b3,true);bV=bJ.getCleanValue(b3.y);bW=bJ.getCleanValue(b3.x);if(bV!==null&&bV>=A&&bV<=M&&bW!==null&&bW>=bZ&&bW<=b1){bX[bU]={data:[]};bY=bM._dataParser(b3,bS,bW,bV);bX[bU].data[bS]=bY;aL(b2,bT,true);aI(bN);return true}else{return false}}}}}return false},deleteNode:function(A){if(A!==undefined){var bN=this.jsVars,bQ=bN.instanceAPI,bM=bN._reflowClean||(bN._reflowClean={}),M=bQ.hcJSON,bL=M.series,bR={hcJSON:{series:[]}},bO,L,bK,bP,bJ,Z;if(bL&&(bP=bL.length)){for(bJ=0;bJ<bP;bJ+=1){bO=bL[bJ];if(bO&&(bK=bO.data)&&(L=bK.length)){for(Z=0;Z<L;Z+=1){if(A===bK[Z].id){bR.hcJSON.series[bJ]={data:[]};bR.hcJSON.series[bJ].data[Z]=true;aL(bM,bR,true);aI(bN);return true}}}}}}return false},addConnector:function(Z){if(typeof Z===\"object\"){var bL=this.jsVars,M=bL.instanceAPI,bM=bL._reflowData||(bL._reflowData={}),bJ=M.hcJSON,A=bJ.connectors&&bJ.connectors[0]||{connector:[]},L=A.connector.length,bK={hcJSON:{connectors:[{connector:[]}]}};bK.hcJSON.connectors[0].connector[L]=A._connectorParser(Z,L);aL(bM,bK,true);aI(bL);return true}return false},editConnector:function(bK,bX,bM){var bV;if(typeof bX===\"object\"&&bM===undefined){bV=bX}else{bV={};bV[bX]=bM}var bJ=this.jsVars,A=bJ.instanceAPI,bU=bJ._reflowData||(bJ._reflowData={}),bW=A.hcJSON,bO=bW.connectors||(bW.connectors=[]),Z=bO.length,bQ={hcJSON:{connectors:[]}},M=bQ.hcJSON.connectors,bT,bR,bP,bN,L,bL,bS;if(bK!==undefined){for(bR=0;bR<Z;bR+=1){bN=bO[bR];if(bN&&(L=bN.connector)){bL=L.length;for(bP=0;bP<bL;bP+=1){if(bK===L[bP].id){bS=L[bP];delete bV.id;if(bU.hcJSON&&bU.hcJSON.connectors&&bU.hcJSON.connectors[bR]&&bU.hcJSON.connectors[bR].connector&&bU.hcJSON.connectors[bR].connector[bP]&&bU.hcJSON.connectors[bR].connector[bP]._options){bV=aL(bU.hcJSON.connectors[bR].connector[bP]._options,bV,true)}bV=aL(bS._options,bV,true);M[bR]={connector:[]};bT=bN._connectorParser(bV,bP);M[bR].connector[bP]=bT;aL(bU,bQ,true);aI(bJ);return true}}}}}return false},deleteConnector:function(L){if(L!==undefined){var bP=this.jsVars,bQ=bP.instanceAPI,bN=bP._reflowClean||(bP._reflowClean={}),M=bQ.hcJSON,Z=M.connectors,bR={hcJSON:{connectors:[]}},bO,A,bK,bJ,bM,bL;if(Z&&(bJ=Z.length)){for(bM=0;bM<bJ;bM+=1){bO=Z[bM];if(bO&&(bK=bO.connector)&&(A=bK.length)){for(bL=0;bL<A;bL+=1){if(L===bK[bL].id){bR.hcJSON.connectors[bM]={connector:[]};bR.hcJSON.connectors[bM].connector[bL]=true;aL(bN,bR,true);aI(bP);return true}}}}}}return false},addLabel:function(Z){if(Z){var bL=this.jsVars,M=bL.instanceAPI,bM=bL._reflowData||(bL._reflowData={}),bJ=M.hcJSON,A=bJ.dragableLabels||[],L=A.length,bK={hcJSON:{dragableLabels:[]}};bK.hcJSON.dragableLabels[L]=Z;aL(bM,bK,true);aI(bL);return true}return false},deleteLabel:function(M){var bM=this.jsVars,L=bM.instanceAPI,bL=bM._reflowClean||(bM._reflowClean={}),Z={hcJSON:{dragableLabels:[]}},bK=L.hcJSON,A=bK.dragableLabels||[],bJ=A.length;if(M<bJ){Z.hcJSON.dragableLabels[M]=true;aL(bL,Z,true);aI(bM);return true}return false},setThreshold:function(Z){var bL=this.jsVars,bJ=bL.hcObj,A=bJ.connectorsStore||[],bK=A.length,L,M;for(M=0;M<bK;M+=1){L=A[M];if(L&&L.options){if(L.options.conStrength<Z){L.graphic&&L.graphic.hide();if(L.text){L.text.hide();L.text.textBoundWrapper&&L.text.textBoundWrapper.hide()}}else{L.graphic&&L.graphic.show();if(L.text){L.text.show();L.text.textBoundWrapper&&L.text.textBoundWrapper.show()}}}}}}),getCollatedData:function(){var bS=this,bQ=bS.chartInstance,bK=bQ.__state,bT=bQ.jsVars,bJ=bS.updatedDataObj||aL({},bQ.getChartData(FusionChartsDataFormats.JSON)),b1=bT._reflowData,L=bT._reflowClean,bL=(bJ.labels||(bJ.labels={label:[]}))&&(bJ.labels.label||(bJ.labels.label=[])),A=(b1&&b1.hcJSON&&b1.hcJSON.dragableLabels),bO=(L&&L.hcJSON&&L.hcJSON.dragableLabels),b0=bJ.connectors,bZ=(b1&&b1.hcJSON&&b1.hcJSON.connectors),bM=(L&&L.hcJSON&&L.hcJSON.connectors),bP=bJ.dataset,bR=(b1&&b1.hcJSON&&b1.hcJSON.series),b2=(L&&L.hcJSON&&L.hcJSON.series),bW=(bR&&bR.length),bV,bX,bU,bN,Z,M,bY;if(bK.hasStaleData!==undefined&&!bK.hasStaleData&&bS.updatedDataObj){return bS.updatedDataObj}if(bP&&bR){while(bW--){bX=(bP[bW]&&bP[bW].data);bU=(bR[bW]&&bR[bW].data);bV=(bU&&bU.length);if(bV&&bX){while(bV--){bN=bU[bV];if(bN){if(bX[bV]){aL(bX[bV],bN._options)}else{bX[bV]=bN._options}}}}}}bW=(bZ&&bZ.length);if(b0&&bZ){while(bW--){Z=(b0[bW]&&b0[bW].connector);M=(bZ[bW]&&bZ[bW].connector);bV=(M&&M.length);if(bV&&Z){while(bV--){bY=M[bV];if(bY){if(Z[bV]){aL(Z[bV],bY._options)}else{Z[bV]=bY._options}}}}}}bW=(A&&A.length);if(bW&&A){while(bW--){if(A[bW]){bL[bW]=A[bW]}}}bu(bP,b2);bu(b0,bM);bu(bL,bO);bK.hasStaleData=false;return(bS.updatedDataObj=bJ)},createHtmlDialog:function(bP,Z,bS,bL,bM,M){var A=this,bO=bP.renderer,bN=A.hcJSON[a5],bJ=bN.inCanvasStyle,bK=bP.chartWidth,L=bP.chartHeight,bT=5,bQ={color:bJ.color,textAlign:\"center\",paddingTop:1+S,border:\"1px solid #cccccc\",borderRadius:4+S,cursor:\"pointer\",_cursor:\"hand\",backgroundColor:\"#ffffff\",zIndex:21,\"-webkit-border-radius\":4+S},bR;bR=bO.html(\"div\",{fill:\"transparent\",width:bK,height:L},{fontSize:10+S,lineHeight:15+S,fontFamily:bJ.fontFamily},bP.container);bR.veil=bO.html(\"div\",{fill:\"000000\",width:bK,height:L,opacity:0.3},undefined,bR);bR.dialog=bO.html(\"div\",{x:(bK-Z)/2,y:(L-bS)/2,fill:\"efefef\",strokeWidth:1,stroke:\"000000\",width:Z,height:bS},{borderRadius:5+S,boxShadow:\"1px 1px 3px #000000\",\"-webkit-border-radius\":5+S,\"-webkit-box-shadow\":\"1px 1px 3px #000000\",\"-ms-filter\":\"progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000')\",filter:\"progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000')\"},bR);bR.ok=bO.html(\"div\",{x:Z-70-bT,y:bS-23-bT,width:65,height:17,text:\"Submit\",tabIndex:1},bQ,bR.dialog).on(\"click\",bL);bR.cancel=bO.html(\"div\",{x:Z-140-bT,y:bS-23-bT,width:65,height:17,text:\"Cancel\",tabIndex:2},bQ,bR.dialog).on(\"click\",bM);bR.remove=bO.html(\"div\",{x:Z-210-bT,y:bS-23-bT,width:65,height:17,text:\"Delete\",tabIndex:3,visibility:\"hidden\"},bQ,bR.dialog).on(\"click\",M);bR.handleKeyPress=function(bU){if(bU.keyCode===13){bR.ok.jqe.trigger(E?\"touchStart\":\"click\",bU)}else{if(bU.keyCode===27){bR.cancel.jqe.trigger(E?\"touchStart\":\"click\",bU)}}};bR.hide();return bR},nodeUpdateUIDefinition:[{key:\"id\",text:\"Id\",inputWidth:60,x:10,y:15},{key:\"dataset\",text:\"Dataset\",inputType:\"select\",inputWidth:110,innerHTML:undefined,x:170,y:15},{key:\"x\",text:\"Value\",x:10,y:40,inputWidth:21},{key:\"y\",text:\",\",x:88,y:40,inputWidth:21,labelWidth:5},{text:\"(x, y)\",x:125,y:40,labelWidth:33,noInput:true},{key:\"tooltip\",text:\"Tooltip\",inputWidth:105,x:170,y:40},{key:\"label\",text:\"Label\",inputWidth:92,x:10,y:65},{key:\"labelalign\",text:\"Align\",labelWidth:70,inputWidth:110,inputType:\"select\",innerHTML:'<option><\/option><option value=\"top\">Top<\/option><option value=\"middle\">Middle<\/option><option value=\"bottom\">Bottom<\/option>',x:145,y:63},{key:\"color\",text:\"Color\",x:10,y:90,inputWidth:60},{key:\"color_out\",innerHTML:\"&nbsp;\",x:85,y:90,inputWidth:15,inputType:\"span\"},{key:\"alpha\",text:\"Alpha\",x:170,y:90,inputWidth:20},{key:\"draggable\",text:\"Allow Drag\",value:true,inputWidth:20,x:250,y:90,labelWidth:58,inputPaddingTop:3,type:\"checkbox\"},{key:\"shape\",text:\"Shape\",inputType:\"select\",inputWidth:97,innerHTML:'<option value=\"rect\">Rectangle<\/option><option value=\"circ\">Circle<\/option><option value=\"poly\">Polygon<\/option>',x:10,y:115},{key:\"rect_height\",text:\"Height\",x:170,y:115,inputWidth:20},{key:\"rect_width\",text:\"Width\",x:255,y:115,inputWidth:20},{key:\"circ_poly_radius\",text:\"Radius\",x:170,y:115,inputWidth:20},{key:\"poly_sides\",text:\"Sides\",x:255,y:115,inputWidth:20},{key:\"link\",text:\"Link\",x:10,y:140,inputWidth:92},{key:\"image\",text:\"Image\",type:\"checkbox\",inputPaddingTop:4,inputWidth:20,x:10,y:170},{key:\"img_url\",text:\"URL\",inputWidth:105,x:170,y:170},{key:\"img_width\",text:\"Width\",inputWidth:20,x:10,y:195},{key:\"img_height\",text:\"Height\",inputWidth:20,x:82,y:195},{key:\"img_align\",text:\"Align\",inputType:\"select\",inputWidth:75,innerHTML:'<option value=\"top\">Top<\/option><option value=\"middle\">Middle<\/option><option value=\"bottom\">Bottom<\/option>',x:170,y:195}],showNodeUpdateUI:(function(){var A=function(bM){var bO=bM.cacheUpdateUI,Z=bO.fields,bN=Z.shape,bL=[\"rect_width\",\"rect_height\",\"circ_poly_radius\",\"poly_sides\"],bK=bL.length,bJ;while(bK--){bJ=bL[bK];if(/rect_|poly_|circ_/.test(bJ)){bO.labels[bJ].hide();bO.fields[bJ].hide()}if(new RegExp(bN.val()).test(bJ)){bO.labels[bJ].show();bO.fields[bJ].show()}}},L=function(bK){var bL=bK.cacheUpdateUI,Z=bL.fields,bJ=aa(Z.color.val());bJ&&Z.color_out.css({background:ab(bJ)})},M=function(bO,Z){var bQ=bO.cacheUpdateUI,bN=bQ.fields,bU=bN.image,bK=bO.chartHeight,bS=5,bJ=bU.val(),bL=Z?300:0,bR=[\"img_width\",\"img_height\",\"img_align\",\"img_url\"],bP,bM,bT;bP=bJ?250:215;bQ.ok.hide();bQ.cancel.hide();bQ.remove.hide();bQ.error.hide();bM=bR.length;while(!bJ&&bM--){bT=bR[bM];bQ.labels[bT].hide();bQ.fields[bT].hide()}bQ.dialog.jqe.animate({top:(bK-bP)/2,height:bP},bL,function(){bM=bR.length;while(bM--&&bJ){bT=bR[bM];bQ.labels[bT].show();bQ.fields[bT].show()}bQ.ok.attr({y:bP-23-bS}).show();bQ.cancel.attr({y:bP-23-bS}).show();bQ.remove.attr({y:bP-23-bS});bQ.error.attr({y:bP-23-bS+4}).show();if(bQ.edit){bQ.remove.show()}else{bQ.remove.hide()}})};return function(bT,bJ,bV){var Z=this,bU=bT.cacheUpdateUI,bQ=Z.hcJSON[a5],bL=bQ.inCanvasStyle,bS=bT.renderer,bW=\"1px solid #cccccc\",bO={width:80+S,border:bW,fontSize:10+S,lineHeight:15+S,padding:2+S,fontFamily:bL.fontFamily},bK=0,bP={textAlign:\"right\"},bN=bU&&bU.fields,bM=bU&&bU.labels,bR;if(!bU){bU=bT.cacheUpdateUI=Z.createHtmlDialog(bT,350,215,function(){var b6=bU&&bU.fields,b8=bU.edit,cb=Z.chartInstance,bZ=Z.hcJSON,bY=bZ.xAxis.min,ca=bZ.yAxis[0].min,b4=bZ.series,b7=b4.length,b0,b2,bX,b3,b9,b5,b1;if(b6){switch(b6.shape.val()){case\"circ\":b1=\"circle\";break;case\"poly\":b1=\"polygon\";break;default:b1=\"rectangle\";break}b5={x:F(b6.x.val(),bY),y:F(b6.y.val(),ca),id:bX=b6.id.val(),datasetId:b6.dataset.val(),name:b6.label.val(),tooltext:b6.tooltip.val(),color:b6.color.val(),alpha:b6.alpha.val(),labelalign:b6.labelalign.val(),allowdrag:b6.draggable.val(),shape:b1,width:b6.rect_width.val(),height:b6.rect_height.val(),radius:b6.circ_poly_radius.val(),numsides:b6.poly_sides.val(),imagenode:b6.image.val(),imagewidth:b6.img_width.val(),imageheight:b6.img_height.val(),imagealign:b6.img_align.val(),imageurl:b6.img_url.val(),link:b6.link.val()};if(bX!==undefined&&!b8){for(bK=0;bK<b7&&!b0;bK+=1){b3=b4[bK].data;b9=b3.length;for(b2=0;b2<b9;b2+=1){if(bX===b3[b2].id){b0=true}}}}if(!b0){b8?(cb&&cb.setNodeAttribute&&cb.setNodeAttribute(b5.id,b5)):(cb&&cb.addNode&&cb.addNode(b5));return}else{bU.error.attr({text:\"ID already exist.\"});b6.label.jqe.focus()}}bU.enableFields()},function(){bU.hide();bU.enableFields();bU.error.attr({text:K})},function(){Z.chartInstance.deleteNode&&Z.chartInstance.deleteNode(bU.fields.id.val())});bR=bU.dialog;bM=bU.labels={};bN=bU.fields={}}bU.config=bJ;bU.edit=bV;if(!bU.error){bU.error=bS.html(\"span\",{color:\"ff0000\",x:30,y:228},undefined,bR)}if(!bU.enableFields){bU.enableFields=function(){var bX;for(bX in bJ){if(bJ[bX]&&bJ[bX].disabled&&bN[bX]){bN[bX].jqe.removeAttr(\"disabled\")}}}}G(this.nodeUpdateUIDefinition,function(b1){var b2,bZ=b1.key,bY={},bX=bJ[bZ]||{},b3,b0;!bM[bZ]&&(bM[bZ]=bS.html(\"label\",{x:b1.x,y:b1.y,width:b1.labelWidth||45,text:b1.text},bP,bR));if(b1.noInput){return}b2=bN[bZ];if(!b2){bO.border=b1.type==\"checkbox\"?K:bW;b2=bN[bZ]=bS.html(b1.inputType||\"input\",{x:b1.labelWidth&&(b1.labelWidth+5)||50,y:-2+(b1.inputPaddingTop||0),width:b1.inputWidth||50},bO);if(b1.inputType!==\"select\"){b2.attr({type:b1.type||\"text\"}).on(\"keyup\",bU.handleKeyPress)}b2.add(bM[bZ])}if(Y(b3=F(bX.innerHTML,b1.innerHTML))){bY.innerHTML=b3}if(bX.disabled){bY.disabled=\"disabled\"}b2.attr(bY);if(Y(b0=F(bX.value,b1.value))){b2.val(b0)}bZ==\"shape\"&&b2.on(\"change\",function(){A(bT)});bZ==\"image\"&&b2.on(\"click\",function(){M(bT,true)});bZ==\"color\"&&b2.bind(\"keyup\",function(){L(bT)})});L(bT);M(bT);A(bT);if(bT.animation){bU.jqe.fadeIn(\"fast\")}else{bU.show()}bU.fields[bV?\"label\":\"id\"].jqe.focus()}})(),labelUpdateUIDefinition:[{key:\"label\",text:\"Label*\",x:10,y:15,inputWidth:235},{key:\"size\",text:\"Size\",x:10,y:40},{key:\"padding\",text:\"Padding\",x:10,y:65},{key:\"x\",text:\"Position\",x:120,y:65,labelWidth:70,inputWidth:25},{key:\"y\",text:\",\",x:225,y:65,labelWidth:10,inputWidth:25},{key:\"xy\",text:\"(x, y)\",x:260,y:65,noInput:true},{key:\"allowdrag\",text:\"Allow Drag\",x:120,y:40,inputType:\"checkbox\",inputPaddingTop:3,inputWidth:15,labelWidth:70,val:1},{key:\"color\",text:\"Color\",x:10,y:90},{key:\"alpha\",text:\"Alpha\",x:145,y:90,inputWidth:30,val:\"100\"},{key:\"bordercolor\",text:\"Border Color\",x:10,y:125,labelWidth:100},{key:\"bgcolor\",text:\"Background Color\",x:10,y:150,labelWidth:100}],showLabelUpdateUI:function(bO,bS){var A=this,bN=bO.renderer,bL=A.hcJSON[a5],L=bL.inCanvasStyle,bP=bO.cacheLabelUpdateUI,bJ={border:\"1px solid #cccccc\",fontSize:10+S,lineHeight:15+S,fontFamily:L.fontFamily,padding:2+S},bK={textAlign:\"right\"},Z=bP&&bP.fields,M=bP&&bP.labels,bQ,bR,bM;if(!bP){bP=bO.cacheLabelUpdateUI=A.createHtmlDialog(bO,315,205,function(){var bT=bP&&bP.fields,bU;if(bT){bU={text:bT.label.val(),x:bT.x.val(),y:bT.y.val(),color:bT.color.val(),alpha:bT.alpha.val(),bgcolor:bT.bgcolor.val(),bordercolor:bT.bordercolor.val(),fontsize:bT.size.val(),allowdrag:bT.allowdrag.val(),padding:bT.padding.val()};if(bU.text){A.chartInstance&&A.chartInstance.addLabel&&A.chartInstance.addLabel(bU);return}else{bP.error.attr({text:\"Label cannot be blank.\"});bT.label.jqe.focus()}}},function(){bP.error.attr({text:\"\"});bP.hide()});bM=bP.dialog;M=bP.labels={};Z=bP.fields={}}G(A.labelUpdateUIDefinition,function(bU){var bT=bU.key;if(!M[bT]){M[bT]=bN.html(P,{x:bU.x,y:bU.y,width:bU.labelWidth||45,text:bU.text},bK,bM)}if(bU.noInput){return}if(!(bQ=Z[bT])){bQ=Z[bT]=bN.html(aw,{y:-2+(bU.inputPaddingTop||0),x:bU.labelWidth&&(bU.labelWidth+5)||50,width:bU.inputWidth||50,type:bU.inputType||\"text\"},bJ,M[bT]).on(\"keyup\",bP.handleKeyPress)}if((bR=bA(bS[bT],bU.val))!==undefined){bQ.val(bR)}});if(!bP.error){bP.error=bN.html(\"span\",{color:\"ff0000\",x:10,y:180},undefined,bM)}if(bO.animation){bP.jqe.fadeIn(\"fast\")}else{bP.show()}bP.fields.label.jqe.focus()},showLabelDeleteUI:function(L,A){var bJ=this,Z=L.renderer,M=L[\"cache-label-delete-ui\"];if(!M){M=L[\"cache-label-delete-ui\"]=bJ.createHtmlDialog(L,250,100,undefined,function(){M.hide()},function(){bJ.chartInstance.deleteLabel(A.index)});M.message=Z.html(\"span\",{x:10,y:10,width:230,height:80}).add(M.dialog);M.ok.hide();M.remove.translate(175).show()}M.message.jqe.text('Would you really like to delete the label: \"'+A.textStr+'\"?');if(L.animation){M.jqe.fadeIn(\"fast\")}else{M.show()}},connectorUpdateUIDefinition:[{key:\"fromid\",text:\"Connect From\",inputType:\"select\",x:10,y:15,labelWidth:80,inputWidth:100},{key:\"toid\",text:\"Connect To\",inputType:\"select\",x:10,y:40,labelWidth:80,inputWidth:100},{key:\"arratstart\",text:\"Arrow At Start\",x:200,y:15,type:\"checkbox\",inputPaddingTop:3,labelWidth:80,inputWidth:15},{key:\"arratend\",text:\"Arrow At End\",x:200,y:40,type:\"checkbox\",inputPaddingTop:3,labelWidth:80,inputWidth:15},{key:\"label\",text:\"Label\",x:10,y:75,labelWidth:40,inputWidth:120},{key:\"id\",text:\"Node ID\",x:190,y:75,inputWidth:55},{key:\"color\",text:\"Color\",x:10,y:100,labelWidth:40,inputWidth:35},{key:\"alpha\",text:\"Alpha\",x:110,y:100,inputWidth:25,labelWidth:35},{key:\"strength\",text:\"Strength\",x:190,y:100,inputWidth:55,val:\"0.1\"},{key:\"url\",text:\"Link\",x:10,y:125,labelWidth:40,inputWidth:240},{key:\"dashed\",text:\"Dashed\",x:10,y:150,type:\"checkbox\",inputPaddingTop:3,inputWidth:15,labelWidth:40},{key:\"dashgap\",text:\"Dash Gap\",x:85,y:150,labelWidth:60,inputWidth:25},{key:\"dashlen\",text:\"Dash Length\",x:190,y:150,labelWidth:70,inputWidth:30}],showConnectorUpdateUI:function(bP,L,bU){var A=this,bV=A.chartInstance,bO=bP.renderer,bM=A.hcJSON[a5],M=bM.inCanvasStyle,bR=bP.cacheConnectorUpdateUI,bK={border:\"1px solid #cccccc\",fontSize:10+S,lineHeight:15+S,fontFamily:M.fontFamily,padding:2+S},bL={textAlign:\"right\"},bJ=bR&&bR.fields,Z=bR&&bR.labels,bQ,bS,bT,bN;if(!bR){bR=bP.cacheConnectorUpdateUI=A.createHtmlDialog(bP,315,215,function(){var bW=bR&&bR.fields,bX;if(bW){bX={from:bW.fromid.val(),to:bW.toid.val(),id:bW.id.val(),label:bW.label.val(),color:bW.color.val(),alpha:bW.alpha.val(),link:bW.url.val(),strength:bW.strength.val(),arrowatstart:bW.arratstart.val(),arrowatend:bW.arratend.val(),dashed:bW.dashed.val(),dashlen:bW.dashlen.val(),dashgap:bW.dashgap.val()};if(bX.from){if(bX.to){if(bX.from!=bX.to){bU?bV.editConnector(bX.id,bX):bV.addConnector(bX);bR.enableFields();return}else{bR.error.attr({text:\"Connector cannot start and end at the same node!\"});bW.fromid.jqe.focus()}}else{bR.error.attr({text:\"Please select a valid connector end.\"});bW.toid.jqe.focus()}}else{bR.error.attr({text:\"Please select a valid connector start.\"});bW.fromid.jqe.focus()}}},function(){bR.error.attr({text:\"\"});bR.enableFields();bR.hide()},function(){bV.deleteConnector(bR.fields.id.val())});bN=bR.dialog;Z=bR.labels={};bJ=bR.fields={}}bR.config=L;bR.enableFields=function(){var bW;for(bW in L){if(L[bW]&&L[bW].disabled&&bJ[bW]){bJ[bW].jqe.removeAttr(\"disabled\")}}};G(A.connectorUpdateUIDefinition,function(bY){var bX=bY.key,bW=L[bX]||{};if(!Z[bX]){Z[bX]=bO.html(P,{x:bY.x,y:bY.y,width:bY.labelWidth||45,text:bY.text},bL,bN)}if(bY.noInput){return}if(!(bS=bJ[bX])){bS=bJ[bX]=bO.html(bY.inputType||aw,{y:-2+(bY.inputPaddingTop||0),x:bY.labelWidth&&(bY.labelWidth+5)||50,width:bY.inputWidth||50},bK);if(bY.inputType!==\"select\"){bS.attr({type:bY.type||\"text\"}).on(\"keyup\",bR.handleKeyPress)}bS.add(Z[bX])}if((bQ=bA(bW.innerHTML,bY.innerHTML))){bS.attr({innerHTML:bQ})}if((bT=bA(bW.val,bY.val))!==undefined){bS.val(bT)}if(bW.disabled){bS.attr({disabled:\"disabled\"})}});(bR.checkDash=function(){var bX=bJ.dashed&&bJ.dashed.val(),bW=bX?\"show\":\"hide\";Z.dashgap&&Z.dashgap[bW]();bJ.dashgap&&bJ.dashgap[bW]();Z.dashlen&&Z.dashlen[bW]();bJ.dashlen&&bJ.dashlen[bW]()})();bJ.dashed.on(\"click\",bR.checkDash);if(!bR.error){bR.error=bO.html(\"span\",{color:\"ff0000\",x:10,y:170},undefined,bN)}bR.remove[bU?\"show\":\"hide\"]();if(bP.animation){bR.jqe.fadeIn(\"fast\")}else{bR.show()}},drawNodeUpdateButtons:function(bR,M){var bP=M.hcJSON,bM=bP.chart,A=bR.pointStore||{},bS=bR.connectorsStore||[],bK=bR.series,bQ=bK.length,bO='<option value=\"',bL='\">',bJ=\"<\/option>\",bT=\"\",L=\"\",bU,Z,bN;for(bN in A){bT+=bO+bN+bL+bN+bJ}for(bN=0;bN<bQ;bN+=1){Z=bK[bN];bU=Z&&Z.options;L+=bO+bU.id+bL+(Z.name!==K&&Z.name+aP+aU||K)+bU.id+bJ}bR.addButton({x:bM.spacingLeft,y:bR.chartHeight-bM.spacingBottom+(!bM.showFormBtn&&!bM.showRestoreBtn?-15:10),align:\"left\",symbol:\"configureIcon\",tooltip:\"Add or edit items\",menuId:\"node-update-menu\",menuItems:[{text:\"Add a Node\",onclick:function(){M.showNodeUpdateUI(bR,{dataset:{innerHTML:L}})}},{text:\"Add a Label\",onclick:function(){M.showLabelUpdateUI(bR,{})}},{text:\"Add a Connector\",onclick:function(){M.showConnectorUpdateUI(bR,{fromid:{innerHTML:bT},toid:{innerHTML:bT}})}}]})},postSeriesAddition:function(){var Z=this,M=Z.dataObj,bJ=Z.hcJSON,L=M.chart,A=Z.base.postSeriesAddition&&Z.base.postSeriesAddition.apply(Z,arguments);bJ.legend.enabled=(L.showlegend==R)?true:false;if(!J(L.viewmode,0)){(bJ.callbacks||(bJ.callbacks=[])).push(Z.drawNodeUpdateButtons)}return A},point:function(cc,bN,cj,ce,b4,cl,co){var bT=this,cf=b4[a5],b7=bT.numberFormatter,cn=cj.data,bQ=cn&&cn.length,bY=J(cj.showvalues,cf.showValues),b1=J(ce.useroundedges),bS=false,bK,bL,b8,bM,cm,ck,bP,b2,b5,L,bO,bJ,bW,ci,Z,b6,bU,bR,cg=\"_\";bN.zIndex=1;bN.name=ay(cj.seriesname);bO=bN.id=bA(cj.id,co);if(!cj.data){bN.showInLegend=false;return bN}if(J(cj.includeinlegend)===0||bN.name===undefined){bN.showInLegend=false}cm=bA(ce.plotfillalpha,aJ);ck=J(ce.showplotborder,1);bP=h(bA(ce.plotbordercolor,\"666666\"));b2=J(ce.plotborderthickness,b1?2:1);b5=bA(ce.plotborderalpha,ce.plotfillalpha,b1?\"35\":\"95\");L=Boolean(J(ce.use3dlighting,ce.is3d,b1?1:0));bJ=h(bA(cj.color,b4.colors[co%b4.colors.length]));bW=bA(cj.plotfillalpha,cj.nodeFillAlpha,cj.alpha,cm);ci=Boolean(J(cj.showplotborder,ck));Z=h(bA(cj.plotbordercolor,cj.nodebordercolor,bP));b6=J(cj.plotborderthickness,cj.nodeborderthickness,b2);bU=(ci)?bA(cj.plotborderalpha,cj.nodeborderalpha,cj.alpha,b5):aF;bR=Boolean(J(cj.allowdrag,1));bN.marker={enabled:true,fillColor:bo(bJ,bW),lineColor:{FCcolor:{color:Z,alpha:bU}},lineWidth:b6,symbol:\"diamond\"};var ca,bV,M,A,cb,cd,b0,b3,b9,ch,cp,bX,bZ=bN._dataParser=function(cq,cA,cy,cx){var cs=bA(cq.id,(bO+cg+cA)),cC=Boolean(J(cq.allowdrag,bR)),cB=ay(cq.shape,\"rectangle\").toLowerCase(),cE=ay(cq.height,10),cr=ay(cq.width,10),cz=ay(cq.radius,10),ct=ay(cq.numsides,4),cw=h(bA(cq.color,bJ)),cv=bA(cq.alpha,bW),cu=ay(cq.imageurl),cD=Boolean(J(cq.imagenode));switch(cB){case\"circle\":bX=0;break;case\"polygon\":bX=2;cB=s(ct);break;default:bX=1;break}if(L){cp=bT.getPointColor(cw,cv,bX)}else{cp=bo(cw,cv)}return aL(bT.getPointStub(cq,cx,b7.xAxis(cy),b4,cj,bY),{_options:cq,y:cx,x:cy,id:cs,imageNode:cD,imageURL:cu,imageAlign:ay(cq.imagealign,K).toLowerCase(),imageWidth:ay(cq.imagewidth),imageHeight:ay(cq.imageheight),labelAlign:bA(cq.labelalign,cD&&Y(cu)?k:bI),allowDrag:cC,marker:{enabled:true,fillColor:cp,lineColor:{FCcolor:{color:Z,alpha:bU}},lineWidth:b6,radius:cz,height:cE,width:cr,symbol:cB},tooltipConstraint:bT.tooltipConstraint})};for(b8=0;b8<bQ;b8+=1){bM=cn[b8];if(bM){bK=b7.getCleanValue(bM.y);bL=b7.getCleanValue(bM.x);if(bK===null){bN.data.push({_options:bM,y:null})}else{bS=true;bN.data.push(bZ(bM,b8,bL,bK));this.pointValueWatcher(b4,bK,bL)}}}if(!bS){bN.showInLegend=false}return bN},getPointColor:function(A,bK,Z){var L,bJ,M;A=h(A);bK=aH(bK);bJ=aM(A,80);M=al(A,65);L={FCcolor:{gradientUnits:a6,color:bJ+aQ+M,alpha:bK+aQ+bK,ratio:aj}};if(Z){if(Z===1){L.FCcolor.angle=0}else{L.FCcolor.angle=180}}else{L.FCcolor.cx=0.4;L.FCcolor.cy=0.4;L.FCcolor.r=\"50%\";L.FCcolor.radialGradient=true}return L},getPointStub:function(bQ,bU,bS,bR,bK){var bO=bR[a5],L=(bU===null?bU:bO.numberFormatter.dataLabels(bU)),bJ=ay(bb(bQ.tooltext)),bM=this.tooltipSepChar=bO.tooltipSepChar,bL,bN=K,A=false,Z,bP,bT,M;if(!bO.showTooltip){Z=false}else{if(bJ!==undefined){Z=bJ;A=true}else{if(ay(bQ.name)!==undefined){Z=bb(ay(bQ.name,K));A=true}else{if(L===null){Z=false}else{if(bO.seriesNameInToolTip){bL=F(bK&&bK.seriesname)}Z=bN=bL?bL+bM:K;Z+=bS?bS+bM:K;Z+=L}}}}M=bb(bA(bQ.name,bQ.label));bP=M;bT=bA(bQ.link);return{displayValue:bP,toolText:Z,link:bT,_toolTextStr:bN,_isUserTooltip:A}},connector:function(M,bX,bV,b4,bL,bJ,bZ){var bS=bL[a5],bT=bS.smartLabel,L=bV.connector,bK=L&&L.length,b6,bM,b0,bU,b1,b3,A,bY,bP,bO,b2,bN,bW,bR,b5,bQ,Z;b6=J(bV.stdthickness,1);bM=h(bA(bV.color,\"FF5904\"));b0=bA(bV.alpha,aJ);bU=J(bV.dashgap,5);b1=J(bV.dashlen,5);b3=Boolean(J(bV.dashed,0));A=Boolean(J(bV.arrowatstart,1));bY=Boolean(J(bV.arrowatend,1));bP=J(bV.strength,1);bN=bX.connector;Z=bX._connectorParser=function(b8,b7){bW=bb(bA(b8.label,b8.name));b5=bA(b8.alpha,b0);bR={FCcolor:{color:h(bA(b8.color,bM)),alpha:b5}};bQ=bT.getOriSize(bW);return{_options:b8,id:bA(b8.id,b7).toString(),from:bA(b8.from,K),to:bA(b8.to,K),label:bW,color:bR,dashStyle:Boolean(J(b8.dashed,b3))?bs(J(b8.dashlen,b1),J(b8.dashgap,bU),b6):undefined,arrowAtStart:Boolean(J(b8.arrowatstart,A)),arrowAtEnd:Boolean(J(b8.arrowatend,bY)),conStrength:J(b8.strength,bP),connectorLink:ay(b8.link),stdThickness:b6,labelWidth:bQ.widht,labelHeight:bQ.height}};for(bO=0;bO<bK;bO+=1){bN.push(Z(L[bO],bO))}return bX},series:function(Z,bP,A){var bO=bP[a5],bQ=[],bJ,M,bM,bK,bL,L,bN;bP.legend.enabled=Boolean(J(Z.chart.showlegend,1));if(Z.dataset&&(bM=Z.dataset.length)>0){this.categoryAdder(Z,bP);bO.x.requiredAutoNumericLabels=false;if(Z.connectors&&(bJ=Z.connectors.length)){for(bN=0,L=bJ;bN<L;bN+=1){M={connector:[]};bQ.push(this.connector(A,M,Z.connectors[bN],Z.chart,bP,bO.oriCatTmp.length,bN))}}for(bN=0;bN<bM;bN+=1){bL={data:[]};bK=this.point(A,bL,Z.dataset[bN],Z.chart,bP,bO.oriCatTmp.length,bN);if(bK instanceof Array){bP.series=bP.series.concat(bK)}else{bP.series.push(bK)}}bP.connectors=bQ;if(Z.labels&&Z.labels.label&&Z.labels.label.length>0){bP.dragableLabels=Z.labels.label}this.configureAxis(bP,Z);if(Z.trendlines){bz(Z.trendlines,bP.yAxis,bO,false,this.isBar)}}}},aZ.scatterbase);function ac(M,bR,A,bP,bL,bQ){var bM=(bR-bP)/(M-A),bJ=aK.atan(bM),bK,Z,L,bO,bN=[];if(bJ<0){bJ=(2*aK.PI)+bJ}if(bP>bR){if((A>=M&&bJ>aK.PI)||(A<M&&bJ>aK.PI)){bJ=bJ-aK.PI}}else{if((A>=M&&bJ<aK.PI&&bJ!=0)||(A<M&&bJ<aK.PI)){bJ=bJ+aK.PI}}if(typeof bQ==\"undefined\"){bK=M+(bL*bC(bJ));Z=bR+(bL*U(bJ))}else{L=c(bL)/2;bO=c(bQ)/2;bK=M+(L=M<A?L:-L);Z=bR+(L*aK.tan(bJ));if(c(bR-Z)>c(bO)){Z=bR+(bO=bR<bP?bO:-bO);bK=M+(bO/aK.tan(bJ))}}bN.push(bk,bK,Z,bK+(10*bC(bJ+0.79)),Z+(10*U(bJ+0.79)),bj,bK+(10*bC(bJ-0.79)),Z+(10*U(bJ-0.79)),bk,bK,Z);return bN}var f=function(bS,b2,b0,bY,b4,bW){var A=this,bL=bW.options.instanceAPI,bO=bS.from,bQ=bS.to,bX,bZ,bT,bJ,b1=b2[bO],bR=b2[bQ],bV,bU,Z,M,bP,bK=800,L,bN,b3,bM;A.renderer=bY;A.connectorsGroup=b4;A.pointStore=b2;A.options=bS;A.style=b0||{};if(b1&&bR){A.fromPointObj=b1;A.toPointObj=bR;A.fromX=bV=b1.plotX;A.fromY=bU=b1.plotY;A.toX=Z=bR.plotX;A.toY=M=bR.plotY;A.arrowAtStart=bS.arrowAtStart;A.arrowAtEnd=bS.arrowAtEnd;A.strokeWidth=bX=(bS.conStrength*bS.stdThickness);A.color=bZ=bS.color;A.textBgColor=bT=bZ&&bZ.FCcolor&&bZ.FCcolor.color;A.label=bP=bS.label;A.link=bS._options&&bS._options.link;b1._config&&b1._config.startConnectors&&b1._config.startConnectors.push(A);bR._config&&bR._config.endConnectors&&bR._config.endConnectors.push(A);bN=function(){L=clearTimeout(L)};b3=function(b6){var b5=bS._options||{};L=clearTimeout(L);L=setTimeout(function(){bL.showConnectorUpdateUI(bW,{fromid:{val:b5.from,innerHTML:j+b5.from+aV,disabled:true},toid:{val:b5.to,innerHTML:j+b5.to+aV,disabled:true},arratstart:{val:Boolean(J(b5.arrowatstart,1))},arratend:{val:Boolean(J(b5.arrowatend,1))},dashed:{val:J(b5.dashed)},dashgap:{val:b5.dashgap},dashlen:{val:b5.dashlen},label:{val:b5.label},id:{val:bS.id,disabled:true},strength:{val:b5.strength},alpha:{val:b5.alpha},color:{val:b5.color}},true)},bK)};bM=function(){bL.linkClickFN.call(A)};A.graphic=bY.path(A.getlinePath()).attr({strokeWidth:bX,dashstyle:bS.dashStyle,stroke:bZ}).add(b4).on(E?\"touchstart\":\"mousedown\",b3).on(\"click\",bM);z(A.graphic.element,\"mouseup dragstart\",bN);if(bP){A.text=bY.text(bP,(bV+Z)/2,(bU+M)/2).attr({align:n,rotation:0}).css(b0).css({backgroundColor:bT,borderColor:bT}).add(b4).textBound().on(E?\"touchstart\":\"mousedown\",b3).on(\"click\",bM);z(A.text.element,\"mouseup dragstart\",bN)}}};f.prototype={updateFromPos:function(A,M){var L=this;L.fromX=A;L.fromY=M;L.graphic&&L.graphic.attr({d:L.getlinePath()});L.text&&L.text.attr({x:(L.fromX+L.toX)/2,y:(L.fromY+L.toY)/2}).textBound()},updateToPos:function(A,M){var L=this;L.toX=A;L.toY=M;L.graphic&&L.graphic.attr({d:L.getlinePath()});L.text&&L.text.attr({x:(L.fromX+L.toX)/2,y:(L.fromY+L.toY)/2}).textBound()},getlinePath:function(){var M=this,A=M.fromPointObj,Z=M.toPointObj,bL=M.fromX,bJ=M.fromY,bM=M.toX,bK=M.toY,bN=[bj,bL,bJ],L;if(M.arrowAtStart){L=A._config;if(L.shapeType==at){bN=bN.concat(ac(bL,bJ,bM,bK,L.shapeArg.width,L.shapeArg.height))}else{bN=bN.concat(ac(bL,bJ,bM,bK,L.shapeArg.radius))}}if(M.arrowAtEnd){L=Z._config;if(L.shapeType==at){bN=bN.concat(ac(bM,bK,bL,bJ,L.shapeArg.width,L.shapeArg.height))}else{bN=bN.concat(ac(bM,bK,bL,bJ,L.shapeArg.radius))}}bN.push(bk,bM,bK);return bN}};f.prototype.constructor=f;var t={mouseDown:function(A){delete A.data.point.dragActive},click:function(A){return!A.data.point.dragActive},dragHandler:function(M){var bJ=M.data,bO=M.type,bP=bJ.point,bL=bJ.series,bM=bL.chart||bL,A=bM.tooltip,bK=(E&&p(M))||ap,Z=bM.options.instanceAPI,bN,L;switch(bO){case av:A.block(true);bJ.dragStartY=M.pageY||bK.pageY||0;bJ.dragStartX=M.pageX||bK.pageX||0;bJ.startValue=bP.y;bJ.startXValue=bP.x;bP.dragActive=true;bL.dragStartHandler&&bL.dragStartHandler(bJ);break;case b:A.block(false);bL.repositionItems(bJ,bJ.changeX?(M.pageX||bK.pageX||0)-bJ.dragStartX:0,bJ.changeY?(M.pageY||bK.pageY||0)-bJ.dragStartY:0,true);L={dataIndex:bP.index+1,datasetIndex:bL.index+1,startValue:bJ.startValue,endValue:bP.y,seriesName:bL.name};bN=[Z.chartInstance.id,L.dataIndex,L.datasetIndex,L.seriesName,L.startValue,L.endValue];if(bJ.changeX){L.startYValue=bJ.startValue;L.endYValue=bP.y;L.startXValue=bJ.startXValue;L.endXValue=bP.x;bN.push(bJ.startXValue,bP.x);delete L.startValue;delete L.endValue}O.raiseEvent(\"chartupdated\",L,Z.chartInstance,bN);delete bJ.dragStartY;delete bJ.dragStartX;delete bJ.startValue;delete bJ.startXValue;break;default:bL.repositionItems(bJ,bJ.changeX?(M.pageX||bK.pageX||0)-bJ.dragStartX:0,bJ.changeY?(M.pageY||bK.pageY||0)-bJ.dragStartY:0);break}},dragLabelHandler:function(L){var M=L.data,bO=L.type,bL=M.element,bR=M.tracker,A=M.toolTip,Z=(E&&p(L))||ap,bM=M.series,bJ,bQ,bP,bK,bN;if(bO===av){A.block(true);M.dragStartY=L.pageY||Z.pageY||0;M.dragStartX=L.pageX||Z.pageX||0}else{bQ=M.x+(L.pageX||Z.pageX||0)-M.dragStartX;bK=bQ-M.leftDistance;if(bK+M.width>M.plotWidth){bK=M.plotWidth-M.width}if(bK<0){bK=0}bQ=bK+M.leftDistance;bP=M.y+(L.pageY||Z.pageY||0)-M.dragStartY;bN=bP-M.topDistance;if(bN+M.height>M.plotHeight){bN=M.plotHeight-M.height}if(bN<0){bN=0}bP=bN+M.topDistance;if(bO===b){A.block(false);M.x=bQ;M.y=bP;delete M.dragStartY;delete M.dragStartX}else{bL.attr({x:bQ,y:bP}).textBound();bR.attr({x:bK,y:bN})}}if(bO==\"dragend\"){bJ={hcJSON:{dragableLabels:[]}};bJ.hcJSON.dragableLabels[M.index]={y:bM.yAxis.translate(bM.chart.plotHeight-bP+M.yAdjustment,1),x:bM.xAxis.translate(bQ,1)};aL(bM.chart.options.instanceAPI.chartInstance.jsVars._reflowData,bJ,true)}},pointUpdate:function(A,L){if(!A._isUserTooltip&&A.toolText!==K){A.options.toolText=A.toolText=A._toolTextStr+L}if(!A._isUserValue&&A.displayValue!==K){A.options.displayValue=A.displayValue=L}},snapPoint:function(Z,bP,bN){var bM=Z.chart,bR=bM.options.chart,bS=bR.snapToDiv,bL=bR.snapToDivOnly,bK=Z._yAxisPlotLines,bQ=bK[1]-bK[0],bT=bL?bQ*0.5:bR.snapToDivRelaxation,L=bK.length,A=bP.lastSnap,bO=1,bJ,M;for(bJ=0;bJ<L;bJ+=1){M=c(bK[bJ]-bN);if(bS&&M<bT){if(A!==bJ){bP.lastSnap=bL?undefined:bJ;bN=bK[bJ]}bO=0;break}}if(bO){bP.lastSnap=undefined}return bN},getLineDataLabelY:function(bP,bU,bO){var bR=bP.chart,bS=bR.options.chart,bX=bR.plotHeight,bK=4,bZ=2,bY=bS.valuePadding+bK,bM=bS.valuePadding+bZ,L=bU.dataLabel,bT=L.rotation===270,bJ=bT?0:bw(L.styles.lineHeight,10),bV=bU._valueBelowPoint,bQ=bT?L.getBBox().height:bU._dataLabelHeight,bL=bQ+bY,A=bT?0:bQ-bJ,M=bO-A-bY,Z=bO+bJ+bM,bN=bV?Z:M,bW=bV?y:a4;if(!bV&&bO<bL){bN=Z;bW=y}else{if(bV&&(bX-bO)<bL){bN=M;bW=a4}}return{y:bN,align:bT?bW:undefined}},getDataLabelY:function(bR,bW,bQ){var bT=bR.chart,bK=bR.options,bL=bK.translatedThreshold,bU=bT.options.chart,bZ=bT.plotHeight,bM=4,b1=2,b0=bU.valuePadding+bM,bO=bU.valuePadding+b1,L=bW.dataLabel,bV=L.rotation===270,bJ=bV?0:bw(L.styles.lineHeight,10),bX=bW._valueBelowPoint,bS=bV?L.getBBox().height:bW._dataLabelHeight,bN=bS+b0,A=bV?0:bS-bJ,M=bQ-A-b0,Z=bQ+bJ+bO,bP=(bX&&bQ<bL)||(!bX&&bQ>bL)?Z:M,bY=bX?y:a4;if(bX&&c(bL-bQ)<bN){if(bQ<bL){bP=M;bY=a4}else{bP=Z;bY=y}}else{if(bQ<bN){bP=Z;bY=y}else{if((bZ-bQ)<bN){bP=M;bY=a4}}}return{y:bP,align:bV?bY:undefined}},setMinMaxValue:function(bM,A){var Z=bM.chart.series,bO=0,bJ=Infinity,bP=-Infinity,M=A.chartInstance.jsVars._reflowData,bL,bQ,bK,bN,L;for(L=0,bL=Z.length;L<bL;L+=1){bK=Z[L]&&Z[L].data;for(bO=0,bN=bK.length;bO<bN;bO+=1){bQ=bK[bO].y;if(bQ!==null){bP=bP>bQ?bP:bQ;bJ=bJ<bQ?bJ:bQ}}}A.highValue=bP;A.lowValue=bJ;M.postHCJSONCreation=function(){var bU=this,bT=bU.hcJSON,bR=bT[a5],bS=bR[0];bS.min=bJ;bS.max=bP}},setSelectBoxValues:function(A,Z){var bJ=Z.xAxis[0],L=Z.yAxis[0],M=Z.plotHeight;A.startX=bJ.translate(A.left,1);A.endX=bJ.translate(A.left+A.width,1);A.startY=L.translate(M-A.top,1);A.endY=L.translate(M-(A.top+A.height),1)}};ae.dragnode=az(ae.scatter,{states:{hover:{}}});a.dragnode=aA.extendClass(a.scatter,{type:\"dragnode\",drawDataLabels:function(){},drawPoints:function(){var cl=this,bU=cl.data,cI=cl.chart,ci=cl.options,cy=cI.options[a5],cJ=cI.options,cu=cJ.connectors,bX=cJ[a5].inCanvasStyle,ck=cI.renderer,cE=cI.labels,cx=cI.trackerGroup,cb=ci.dataLabels.style,cq,cg,bT,bK,cG,Z,bW,bM,cm,b2,cv=cl.group,b0=cI.connectorsGroup,cj=cI.connectorsStore,M=cI.invalConnectStore,cn=cI.pointStore||(cI.pointStore=[]),ca=cl.yAxis,cw=cl.xAxis,cK=parseInt(cb.lineHeight),bJ=ck.smartLabel||cy.smartLabel,cd,bQ,ce,co,cC,cP,cO,cN,cM,cf,L,bV,bO,cD,bR,b6,b4,b8,b9,cH,bN,cB,bL=cI.dragLabelGroup,b5,bS,cc,bY,b7,bP,cL,ct,bZ,cA,cr,cF,A,cp,cz,ch,cs,b3=+new Date();if(!b0){cI.connectorsGroup=b0=ck.g(\"connectorsGroup\").attr({visibility:ah}).add(cv)}if(cl.options.marker.enabled){b9=bU.length;while(b9--){L=bU[b9];cN=L.plotX;cM=L.plotY;if(cM!==g&&!isNaN(cM)){cm=L._config=L._config||{shapeArg:{},startConnectors:[],endConnectors:[]};b2=cm.shapeArg;bQ=L.options;bO=L.graphic;b6=L.marker||{};bR=J(b6&&b6.height);cD=J(b6&&b6.width);bV=J(b6&&b6.radius);b4=bA(b6&&b6.symbol);ce=b4===\"rectangle\";cC=L.dataLabel;b8=L.id;cq=bQ.imageNode;cg=bQ.imageURL;bT=bQ.imageAlign;bM=bQ.labelAlign;Z=ce?cD:bV*1.4;bK=J(bQ.imageWidth,Z);bW=ce?bR:bV*1.4;cG=J(bQ.imageHeight,bW);cd=L.pointAttr[L.selected?bf:af];b4=b2.symbol=aD(b6&&b6.symbol,cl.symbol);if(ce){cm.shapeType=at;b2.x=cN-(cD/2);b2.y=cM-(bR/2);b2.width=cD;b2.height=bR;b2.r=0;if(bO){bO.animate(b2)}else{delete cd.r;L.graphic=ck.rect(b2).attr(cd).add(cv)}}else{cm.shapeType=\"symbol\";b2.x=cN;b2.y=cM;b2.radius=cd.r=cd.r*1;if(bO){bO.animate(b2)}else{L.graphic=ck.symbol(b2).attr(cd).add(cv)}}cn[b8]=L;if(cq&&cg){var b1;if(cG>bW){cG=bW}if(bK>Z){bK=Z}switch(bT){case\"middle\":b1=cM-(cG/2);break;case\"bottom\":b1=bW>cG?cM+(bW/2)-cG:cM-cG/2;break;default:b1=bW>cG?cM-(bW*0.5):cM-cG/2;break}cm.imageX=cN-(bK/2);cm.imageY=b1;L.imageNodeGraph=ck.image(cg).attr({width:bK,height:cG}).translate(cN-(bK/2),b1).css({opacity:1}).add(cv)}cf=L.displayValue;if(Y(cf)||cf!==aU){co=bJ.getSmartText(cf,Z,bW);cp=bW*0.5-(co.height*0.5);switch(bM){case\"top\":cp=-cp;break;case\"bottom\":cp=cp;break;default:cp=0;break}L._yAdjustment=cL=(cK*0.8-(co.height*0.5))+cp;cO=cM+cL;if(cC){cC.attr({text:co.text}).animate({x:cN,y:cO})}else{L.dataLabel=cI.renderer.text(co.text,cN,cO).attr({align:n}).css(cb).add(cv)}}}}if(!cj){cj=cI.connectorsStore=[];M=cI.invalConnectStore=[];for(b9=0;b9<cu.length;b9+=1){G(cu[b9].connector,function(cQ){if(cn[cQ.from]&&cn[cQ.to]){cj.push(new f(cQ,cn,cb,ck,b0,cI))}else{M.push(cQ)}})}}else{for(b9=M.length-1;b9>=0;b9-=1){connector=M[b9];if(cn[connector.from]&&cn[connector.to]){M.splice(b9,1);cj.push(new f(connector,cn,cb,ck,b0,cI))}}}}if(!cI.dragLabelsDrawn&&(cB=cJ.dragableLabels)&&(cH=cB.length)>0){if(!bL){bL=cI.dragLabelGroup=ck.g(\"dragablelabels\").translate(cI.plotLeft,cI.plotTop).attr({zIndex:6}).add()}Z=cI.plotSizeX;bW=cI.plotSizeY;b5=parseInt(bX.fontSize,10);bS=bX.backgroundColor;cc=bX.borderColor;for(b9=0;b9<cH;b9+=1){bN=cB[b9];bN.index=b9;cz=bb(bA(bN.text,bN.label));if(cz){cz=bb(cz);cP=cw.translate(bN.x||0);cO=ca.translate(bN.y||0,0,1,0,1);bY=J(bN.fontsize,b5);b7=a1(bA(bN.color,bX.color));cs=(J(bN.alpha,100))/100;bP=J(bN.allowdrag,1);cL=bY*0.8;ct={fontSize:bY+S,fontFamily:bX.fontFamily,fill:b7,color:b7,opacity:cs};bZ=bA(bN.bgcolor,bS);cA=bA(bN.bordercolor,cc);if(bZ){ct.backgroundColor=bZ.replace(D,aE);ct.backgroundOpacity=cs}if(cA){ct.borderColor=cA.replace(D,aE);ct.borderOpacity=cs}cr=ck.text(cz,cP,cO).attr({align:n,rotation:0}).css(ct).add(bL);cF=cr.getBBox();cL-=(cF.height/2)||0;ch=cO-cF.y;cO=cO+cL;cr.attr({y:cO}).textBound();A=ck.rect(cF.x,cO-ch,cF.width,cF.height,0).attr({isTracker:b3,fill:bE,zIndex:2}).css({cursor:bP?\"move\":\"normal\"}).on(E?\"touchstart\":\"mousedown\",function(){clearTimeout(A._longpressactive);A._longpressactive=setTimeout(function(){cI.options.instanceAPI.showLabelDeleteUI(cI,cr)},1000)}).add(cx);z(A.element,E?\"touchend touchmove\":\"mouseup mousemove\",function(){clearTimeout(A._longpressactive);delete A._longpressactive});cE.push(A,cr);cr.index=b9;if(bP){z(A.element,\"dragstart drag dragend\",t.dragLabelHandler,{index:b9,series:cl,element:cr,tracker:A,toolTip:cI.tooltip,x:cP,y:cO,leftDistance:cP-cF.x,topDistance:ch,width:cF.width,height:cF.height,plotWidth:Z,plotHeight:bW,yAdjustment:cL})}}}cI.dragLabelsDrawn=true}},drawTracker:function(){var M=this,bM=M.chart,bL=bM.renderer,bO=M.options.cursor,A=bM.options.instanceAPI,bJ=bO&&{cursor:bO},bK=+new Date(),L,bN=bM.trackerGroup,Z;G(M.data,function(bP){var bS,bQ;if(bP.y!==null){bQ=bP._config;L=bQ.shapeArg||{};bS=bP.tracker;if(bS){bS.attr(L)}else{if(bP.link!==undefined){var bR={cursor:\"pointer\",_cursor:\"hand\"}}bP._dataLabelX=bP.dataLabel&&bP.dataLabel.attr(\"x\");bP.tracker=bS=bL[bQ.shapeType](L).attr({isTracker:bK,fill:bE,visibility:M.visible?ah:ad}).on(E?\"touchstart\":\"mouseover\",function(bT){M.onMouseOver();bP.onMouseOver()}).on(\"mouseout\",function(bT){if(!M.options.stickyTracking){M.onMouseOut()}}).css(bR).add(bN).on(E?\"touchstart\":\"mousedown\",function(bY){var bT=M.name!==K?M.name+aP+aU:K,bZ=M.options.id,bW={circle:\"circ\",polygon:\"poly\",\"undefined\":\"rect\"},bX=bP._options,bV=bW[bX.shape],bU=800;Z=clearTimeout(Z);Z=setTimeout(function(){A.showNodeUpdateUI(bM,{x:{value:bP.x},y:{value:bP.y},draggable:{value:F(bX.allowdrag,1)},color:{value:bX.color},alpha:{value:bX.alpha},label:{value:F(bX.label,bX.name)},tooltip:{value:bX.tooltext},shape:{value:bV},rect_width:{value:bX.width},rect_height:{value:bX.height},circ_poly_radius:{value:bX.radius},poly_sides:{value:bX.numsides},image:{value:bX.imagenode},img_width:{value:bX.imagewidth},img_height:{value:bX.imageheight},img_align:{value:bX.imagealign},img_url:{value:bX.imageurl},id:{value:bP.id,disabled:true},link:{value:bX.link},dataset:{innerHTML:'<option value=\"'+bZ+'\">'+bT+bZ+\"<\/option>\",disabled:true}},true)},bU)});z(bS.element,\"dragstart mouseup\",function(){Z=clearTimeout(Z)},bQ);if(bP.options.allowDrag){bS.css({cursor:\"move\"});bQ.bBox=bS.getBBox();if(C){setTimeout(function(){delete bS.bBox;bQ.bBox=bS.getBBox();bQ.bBox.r=bQ.bBox.x+bQ.bBox.width;bQ.bBox.b=bQ.bBox.y+bQ.bBox.height},1)}bQ.bBox.r=bQ.bBox.x+bQ.bBox.width;bQ.bBox.b=bQ.bBox.y+bQ.bBox.height;bQ.plotSizeX=bM.plotSizeX;bQ.plotSizeY=bM.plotSizeY;bQ.series=M;bQ.point=bP;bQ.changeX=1;bQ.changeY=1;z(bS.element,\"mousedown\",t.mouseDown,bQ);z(bS.element,\"click\",t.click,bQ);z(bS.element,\"dragstart drag dragend\",t.dragHandler,bQ)}}}})},repositionItems:function(b2,bQ,bP,bZ){var bW=b2.point,bY=b2.bBox,bR=this,bN=bR.xAxis,A=bR.yAxis,bJ=bR.chart.options.instanceAPI,bO=bJ.numberFormatter,b1=b2.plotSizeY,Z,M,bM,bK,bV,bX,bL,L,b0,bU,bT,bS;bQ=bQ||0.1;bP=bP||0.1;if(bY.x+bQ<0){bQ=-bY.x}if(bY.r+bQ>b2.plotSizeX){bQ=b2.plotSizeX-bY.r}if(bY.y+bP<0){bP=-bY.y}if(bY.b+bP>b1){bP=b1-bY.b}bW.graphic.translate(bQ,bP);bW.tracker.translate(bQ,bP);if(bW.imageNodeGraph){bW.imageNodeGraph.translate(b2.imageX+bQ,b2.imageY+bP)}bT=bW.plotX+bQ;bS=bW.plotY+bP;bW.dataLabel&&bW.dataLabel.attr({y:bS+bW._yAdjustment,x:bT});bL=b2.startConnectors;bU=bL.length;for(b0=0;b0<bU;b0+=1){bL[b0].updateFromPos(bT,bS)}bL=b2.endConnectors;bU=bL.length;for(b0=0;b0<bU;b0+=1){bL[b0].updateToPos(bT,bS)}if(bZ){bV=b2.shapeArg;b2.imageX+=bQ;b2.imageY+=bP;bW.plotX=bT;bW.plotY=bS;bY.x+=bQ;bY.r+=bQ;bY.y+=bP;bY.b+=bP;L={x:(bV.x+=bQ),y:(bV.y+=bP)};bW.graphic.attr(L).translate(0,0.1);bW.tracker.attr(L).translate(0,0.1);M=A.translate(b1-bS,1);Z=bN.translate(bT,1);bK=bO.dataLabels(M);bM=bO.dataLabels(Z);bW.y=M;bW.x=Z;if(!bW._isUserTooltip&&bW.toolText!==K){bW.options.toolText=bW.toolText=bW._toolTextStr+bM+bJ.tooltipSepChar+bK}bX={hcJSON:{series:[]}};bX.hcJSON.series[bR.index]={data:[]};bX.hcJSON.series[bR.index].data[bW.index]={_options:{x:Z,y:M},y:M,x:Z,toolText:bW.toolText,displayValue:bW.displayValue};aL(bJ.chartInstance.jsVars._reflowData,bX,true)}}});aZ(\"dragarea\",a7({standaloneInit:true,creditLabel:bc,defaultSeriesType:\"dragarea\",decimals:2,anchorAlpha:\"100\",eiMethods:aZ.msareabase.eiMethods},aG),aZ.msareabase);ae.dragarea=az(ae.area,{states:{hover:{}}});a.dragarea=aA.extendClass(a.area,{type:\"dragarea\",repositionItems:function(ca,bS,bR,b6){var bT=ca.series,b4=ca.point,bX=bT.chart,b3=bX.options.chart,b8=bX.plotHeight,bJ=bT.options,L=bT.yAxis,bU=b3.valuePadding,M=b3.doNotSnap,bK=bX.options.instanceAPI,bQ=bK.numberFormatter,bO=b4.plotY,bM=4,bL={},bP={},A={},bV=bJ.translatedThreshold,b0=bT.graphLinePath,bN=b4.segmentPathIndex,b2=b4.allowNegDrag?b8:bV,bZ=[],bW=0,b1,b5,b9,bY;b9=bO+bR;if(b9<0){b9=0}if(b9>b2){b9=b2}if(b6&&!M){b9=t.snapPoint(bT,b4,b9)}bR=b9-bO;b1=l(L.translate(b8-b9,1)*bq)/bq;bY=bQ.dataLabels(b1);t.pointUpdate(b4,bY);bL.y=b9;bP=t.getLineDataLabelY(bT,b4,b9);bP.x=b4._dataLabelX;bP.text=b4.displayValue;b0[bN-1]=b9;for(var b7=0,Z=b0.length;b7<Z;b7+=1){if(b0[b7]==bj&&b7){bZ.push(bk,b0[b7-2],bV,bk,b0[bW+1],bV,bj,b0[bW+1],b0[bW+2]);bW=b7}bZ.push(b0[b7])}bZ.push(bk,b0[Z-2],bV,bk,b0[bW+1],bV);bT.graphLine.attr({d:b0});A.d=bZ;bT.area.attr(A);b4.graphic.attr(bL);b4.dataLabel.attr(bP);b4.dragTracker.attr(bL);if(b6){b4.plotY=b9;b4.y=b1;b4.dragTracker.attr({y:b9});t.setMinMaxValue(bT,bK);b5={hcJSON:{series:[]}};b5.hcJSON.series[bT.index]={data:[]};b5.hcJSON.series[bT.index].data[b4.index]={y:b1,toolText:b4.toolText,displayValue:b4.displayValue};aL(bK.chartInstance.jsVars._reflowData,b5,true)}},drawTracker:function(){var A=this;A.graphLinePath=A.graphLine&&A.graphLine.attr(\"d\");A.graphLinePath=A.graphLinePath&&A.graphLinePath.split(aU);a.dragline.prototype.drawTracker.apply(this,arguments)}});aZ(\"dragline\",a7({standaloneInit:true,creditLabel:bc,decimals:2,defaultSeriesType:\"dragline\",eiMethods:aZ.mslinebase.eiMethods},aG),aZ.mslinebase);ae.dragline=az(ae.line,{states:{hover:{}}});a.dragline=aA.extendClass(a.line,{type:\"dragline\",repositionItems:function(ca,bR,bQ,b3){var bS=ca.series,b0=ca.point,bV=bS.chart,bZ=bV.options.chart,b4=bV.plotHeight,A=bS.yAxis,bT=bZ.valuePadding,L=bZ.doNotSnap,Z=bV.options.instanceAPI,bP=Z.numberFormatter,bN=b0.plotY,bL=4,M=bS.options.translatedThreshold,b6=b0.index,cb=bS.data,b2=cb[b6-1],b5=cb[b6+1],bK=b2&&b2.plotY,b7=b5&&b5.plotY,bM=b2&&b2.plotX,b8=b5&&b5.plotX,bU=b0.plotX,bY=b0.allowNegDrag?b4:M,bJ={},bO={},bX,b1,b9,bW;b9=bN+bQ;if(b9<0){b9=0}if(b9>bY){b9=bY}if(b3&&!L){b9=t.snapPoint(bS,b0,b9)}bQ=b9-bN;bX=l(A.translate(b4-b9,1)*bq)/bq;bW=bP.dataLabels(bX);t.pointUpdate(b0,bW);bJ.y=b9;bO=t.getLineDataLabelY(bS,b0,b9);bO.text=b0.displayValue;bO.x=b0._dataLabelX;b2&&b0.graphLine.attr({d:[bj,bM,bK,bk,bU,b9]});b5&&b5.graphLine.attr({d:[bj,bU,b9,bk,b8,b7]});b0.graphic.attr(bJ);b0.dataLabel.attr(bO);b0.dragTracker.attr(bJ);if(b3){b0.plotY=b9;b0.y=bX;t.pointUpdate(b0,bW);t.setMinMaxValue(bS,Z);b1={hcJSON:{series:[]}};b1.hcJSON.series[bS.index]={data:[]};b1.hcJSON.series[bS.index].data[b0.index]={y:bX,toolText:b0.toolText,displayValue:b0.displayValue};aL(Z.chartInstance.jsVars._reflowData,b1,true)}},drawTracker:function(){var bP=this,bR=bP.chart,bS=bR.renderer,A=bP.yAxis,bU=E?15:3,L=+new Date(),bJ=bP.options,bK=J(bJ.threshold,bH(bP.yAxis.options.min,0),0),bT=A.options.plotLines,bW=bP._yAxisPlotLines=[],bO=0,bQ={cursor:\"n-resize\",_cursor:\"n-resize\"},bV={cursor:\"pointer\",_cursor:\"hand\"},Z,bL,M,bN,bX,bM;if(bR.options.chart.hasScroll){bR.trackerGroup.clip(bP.clipRect)}bJ.translatedThreshold=bR.plotHeight-A.translate(bH(A.options.min,0));for(bL=bT.length;bO<bL;bO+=1){Z=bT[bO];if(Z.isGrid){bW.push(A.translate(Z.value))}}G(bP.data,function(bZ){var b2=bZ.plotX,b1=bZ.plotY,bY=bH(J(bZ.marker&&bZ.marker.radius,0),bU),b0={x:b2,y:b1,radius:bY};bM=bZ.dragTracker;if(bZ.y!==null){if(bM){bM.attr(b0)}else{bZ._dataLabelX=bZ.dataLabel.attr(\"x\");bZ._dataLabelHeight=bZ.dataLabel.getBBox().height;bZ.dragTracker=bS.circle(b2,b1,bY).attr({isTracker:L,\"stroke-width\":1,stroke:bE,fill:bE,visibility:bP.visible?ah:ad,zIndex:bJ.zIndex||1}).on(E?\"touchstart\":\"mouseover\",function(b3){M=b3.relatedTarget||b3.fromElement;if(bR.hoverSeries!==bP&&Q(M,\"isTracker\")!==L){bP.onMouseOver()}bZ.onMouseOver()}).on(\"mouseout\",function(b3){if(!bJ.stickyTracking){M=b3.relatedTarget||b3.toElement;if(Q(M,\"isTracker\")!==L){bP.onMouseOut()}}}).css(bZ.allowDrag?bQ:(bZ.link!==undefined?bV:K)).add(bZ.group||bR.trackerGroup);bZ.allowDrag&&a.dragcolumn.prototype.bindDragEvent.call(bP,bZ)}}})}});aZ(\"dragcolumn2d\",a7({standaloneInit:true,creditLabel:bc,decimals:2,defaultSeriesType:\"dragcolumn\",eiMethods:aZ.mscolumn2dbase.eiMethods},aG),aZ.mscolumn2dbase);ae.dragcolumn=az(ae.column,{states:{hover:{}}});a.dragcolumn=aA.extendClass(a.column,{type:\"dragcolumn\",bindDragEvent:function(A,bJ){var Z=this,bK=A.dragTracker,L=bJ*0.5,M={series:Z,point:A,changeY:1};L=L||0;z(bK.element,\"mousedown\",t.mouseDown,M);z(bK.element,\"click\",t.click,M);z(bK.element,\"dragstart drag dragend\",t.dragHandler,M)},repositionItems:function(b3,bP,bN,b0){var bQ=b3.series,bY=b3.point,bT=bQ.chart,M=bQ.options,bX=bT.options.chart,bS=M.translatedThreshold,b1=bT.plotHeight,A=bQ.yAxis,bR=bX.valuePadding,L=bX.doNotSnap,Z=bT.options.instanceAPI,bM=Z.numberFormatter,bK=bY.plotY,bJ=4,bW=bY.allowNegDrag?b1:bS,bV,bZ,b2,bU,bO={},bL={};b2=bK+bN;if(b2<0){b2=0}if(b2>bW){b2=bW}if(b0&&!L){b2=t.snapPoint(bQ,bY,b2)}bN=b2-bK;if(b2<=bS){bO.y=b2;bO.height=bS-bO.y}else{bO.y=bS;bO.height=b2-bO.y}bV=l(A.translate(b1-b2,1)*bq)/bq;bU=bM.dataLabels(bV);t.pointUpdate(bY,bU);bL=t.getDataLabelY(bQ,bY,b2);bL.text=bY.displayValue;bL.x=bY._dataLabelX;bY.graphic.attr(bO);bY.tracker.attr(bO);bY.dataLabel.attr(bL);bY.dragTracker.translate(0,bN);if(b0){bY.plotY=b2;bY.y=bV;bY.shapeArgs.y=bO.y;bY.shapeArgs.height=bO.height;bY._dTrackerY+=bN;bY.dragTracker.attr({y:bY._dTrackerY});bY.dragTracker.translate(0,0.1);t.pointUpdate(bY,bU);t.setMinMaxValue(bQ,Z);bZ={hcJSON:{series:[]}};bZ.hcJSON.series[bQ.index]={data:[]};bZ.hcJSON.series[bQ.index].data[bY.index]={y:bV,toolText:bY.toolText,displayValue:bY.displayValue};aL(Z.chartInstance.jsVars._reflowData,bZ,true)}},drawTracker:function(){var bP=this,bR=bP.chart,bU=bR.renderer,M=E?40:10,bY=E?25:0,L=+new Date(),bJ=bP.options,A=bP.yAxis,bV=A.options.plotLines,bK=J(bJ.threshold,bH(A.options.min,0)),bQ=bJ.translatedThreshold=ar(A.getThreshold(bK)),bW=bP._yAxisPlotLines=[],bO=0,Z,bL,bS,bN,bT,bX,bM;bJ.translatedThreshold=bR.plotHeight-A.translate(bH(A.options.min,0));a.column.prototype.drawTracker.apply(this,arguments);for(bL=bV.length;bO<bL;bO+=1){Z=bV[bO];if(Z.isGrid){bW.push(A.translate(Z.value))}}if(bR.options.chart.hasScroll){bR.trackerGroup.clip(bP.clipRect)}G(bP.data,function(bZ){bM=bZ.dragTracker;bX=bZ.trackerArgs||bZ.shapeArgs||{};if(bZ.y!==null&&bZ.allowDrag){if(bM){bM.attr(bX)}else{bT=bX.y+bX.height;bN=(bT>bQ?bT:bX.y)-(M*0.5);bS=bH(bY,bX.width);bZ._dTrackerY=bN;bZ._dataLabelX=bZ.dataLabel.attr(\"x\");bZ._dataLabelHeight=bZ.dataLabel.getBBox().height;bZ.dragTracker=bU.rect(bX.x-((bS-bX.width)*0.5),bN,bS,M,0).attr({isTracker:L,\"stroke-width\":1,stroke:bE,fill:bE,visibility:bP.visible?ah:ad,zIndex:bJ.zIndex||1}).css({cursor:\"n-resize\"}).add(bZ.group||bR.trackerGroup);bP.bindDragEvent(bZ,M)}}})}});aZ(\"selectscatter\",{standaloneInit:true,creditLabel:bc,defaultSeriesType:\"scatter\",defaultZeroPlaneHighlighted:false,spaceManager:aG.spaceManager,drawButtons:aG.drawButtons,updateChartWithData:aG.updateChartWithData,eiMethods:a7(a7(a7({},aZ.scatterbase.eiMethods),aG.eiMethods),{getData:function(bQ){var bN=this.jsVars,L=bN.instanceAPI,A=L.getCollatedData(),bR=[],bJ=A.dataset,M=(bJ&&bJ.length)||0,bM=0,Z=\"null\",bL=0,bP,bO,bK;if(bQ){if(/^json$/ig.test(bQ)){bR=A}else{if(/^csv$/ig.test(bQ)){bR=L.getCSVString()}else{bR=q.core.transcodeData(A,\"json\",bQ)}}}else{for(;bM<M;bM+=1){bO=bJ[bM];if(bO){bO=bJ[bM]&&bJ[bM].data;bK=bP=(bO&&bO.length)||0;bK&&(bR[bL]||(bR[bL]=[ay(bJ[bM].id,Z)]));while(bK--){bR[bL][bK+1]=ay(bO[bK].id,Z)}bP&&(bL+=1)}}}return bR}}),getCSVString:function(){var Z=this,A=Z.chartInstance,L=A.getData(),M=L.length;while(M--){L[M]=L[M].join(\",\")}return L.join(\"|\")},getCollatedData:function(){var bP=this,bN=bP.chartInstance,bJ=bN.__state,bQ=bN.jsVars,bR=bP.hcInstance._selectEleArr,bS=bR&&bR.length,Z=aL({},bN.getChartData(FusionChartsDataFormats.JSON)),bL=Z.dataset,bM,bK,bV,bO,bW,bU,L,bT,A,M=[];while(bS--){bK=bR[bS];bU=bK.startX;L=bK.endX;bT=bK.startY;A=bK.endY;bV=bL.length;while(bV--){M[bV]||(M[bV]={data:[]});bM=bL[bV].data;bW=bM&&bM.length;while(bW--){bO=bM[bW];if(bO.x>bU&&bO.x<L&&bO.y<bT&&bO.y>A){M[bV].data[bW]=true}}}}bV=bL.length;while(bV--){bM=bL[bV].data;bW=bM&&bM.length;while(bW--){if(!(M[bV]&&M[bV].data[bW])){bM.splice(bW,1)}}}return(bP.updatedDataObj=Z)},onSelectionChange:function(bY){var bR=bY.chart,bV=bR.renderer,bX=bR.options.chart,bK=bY.selectionLeft,bQ=bY.selectionTop,bU=bY.selectionWidth,bT=bY.selectionHeight,A=+new Date(),b4=12,L=b4*0.5,bS=12,bP=\"#999999\",bL=\"#777777\",bO=bK+bU,bM=bQ+bT,b1=0,b0=0,b2=E?15:8,bZ=6,b3=15,bN=bU>b3&&bT>b3,bW={left:bK,width:bU,top:bQ,height:bT,trackerRadius:bS,trackerWidth:b4,cornerSymbolRadius:b3,closeButtonRadius:bZ},Z,bJ,M;if(bR.tooltip){bR.tooltip.hide()}bR._selectEle||(bR._selectEle=[]);bR.repositionItems||(bR.repositionItems=aZ.selectscatter.repositionItems);bR.dragStartHandler||(bR.dragStartHandler=aZ.selectscatter.dragStartHandler);Z=bW.containerGroup=bV.g(\"container\").attr({isOverlay:true,visibility:ah,zIndex:6}).add(bR.trackerGroup);bJ=bW.cornerGroupTracker=bV.g(\"corner-resize\").attr({isOverlay:true,visibility:ah,zIndex:6}).translate(bO,bM).add(Z);M=bW.closeButtonGroup=bV.g(\"close-button\").attr({isOverlay:true,visibility:ah,zIndex:6}).translate(bO,bQ).add(Z);bR._selectEleArr||(bR._selectEleArr=[]);bW.selectTracker=bV.rect(bK,bQ,bU,bT,0,1).attr({isTracker:A,isOverlay:true,strokeWidth:1,stroke:bX.selectBorderColor,fill:bX.selectFillColor}).css({cursor:\"move\",_cursor:\"move\"}).add(Z);bW.leftTracker=bV.rect(bK-L,bQ,b4,bT,0).attr({isTracker:A,isOverlay:true,strokeWidth:0,fill:bE}).css({cursor:\"e-resize\",_cursor:\"e-resize\"}).add(Z);bW.rightTracker=bV.rect(bK+bU-L,bQ,b4,bT,0).attr({isTracker:A,isOverlay:true,strokeWidth:0,fill:bE}).css({cursor:\"e-resize\",_cursor:\"e-resize\"}).add(Z);bW.topTracker=bV.rect(bK,bQ-L,bU,b4,0).attr({isTracker:A,isOverlay:true,strokeWidth:0,fill:bE}).css({cursor:\"s-resize\",_cursor:\"s-resize\"}).add(Z);bW.bottomTracker=bV.rect(bK,bQ+bT-L,bU,b4,0).attr({isTracker:A,isOverlay:true,strokeWidth:0,fill:bE}).css({cursor:\"s-resize\",_cursor:\"s-resize\"}).add(Z);bW.cornerInnerSymbol=bV.symbol(\"resizeIcon\",b1,b0,b3).attr({isTracker:A,isOverlay:true,strokeWidth:1,visibility:bN?ah:ad,stroke:bP}).add(bJ);bW.cornerOuterSymbol=bV.symbol(\"resizeIcon\",b1,b0,-b3*0.8).attr({isTracker:A,isOverlay:true,strokeWidth:1,visibility:!bN?ah:ad,stroke:bL}).add(bJ);bW.cornerTracker=bV.circle(b1,b0,bS).attr({isTracker:A,isOverlay:true,\"stroke-width\":1,stroke:bE,fill:bE}).css({cursor:\"nw-resize\",_cursor:\"nw-resize\"}).add(bJ);bW.closeButtonSymbol=bV.symbol(\"closeIcon\",0,0,bZ,bX,bV).attr({isTracker:A,isOverlay:true,strokeWidth:2,visibility:ah,stroke:bX.selectionCancelButtonBorderColor,fill:bX.selectionCancelButtonFillColor,\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}).add(M);bW.closeButtonTracker=bV.circle(0,0,b2).attr({isTracker:A,isOverlay:true,strokeWidth:0,visibility:ah,fill:bE}).css({cursor:\"pointer\",_cursor:\"hand\"}).add(M);t.setSelectBoxValues(bW,bR);bR._selectEleArr.push(bW);bW.index=bR._selectEleArr.length-1;aZ.selectscatter.bindDragEvent(bR,bW)},postSeriesAddition:function(bM,Z){var M=this,bN=aZ.scatter&&aZ.scatter.postSeriesAddition&&aZ.scatter.postSeriesAddition.apply(M,arguments),bO=bM.chart,A=Z.chart,bL=bM.chart.paletteIndex,L=M.repositionItems,bK=bA(A.selectbordercolor,w.canvasBorderColor[bL]),bJ=J(A.selectborderalpha,w.canvasBorderAlpha[bL]);bO.selectBorderColor={FCcolor:{color:bK,alpha:bJ}};bO.selectFillColor=bo(bA(A.selectfillcolor,w.altHGridColor[bL]),J(A.selectfillalpha,w.altHGridAlpha[bL]));bO.selectionCancelButtonBorderColor=bo(bA(A.selectioncancelbuttonbordercolor,bK),J(A.selectioncancelbuttonborderalpha,bJ));bO.selectionCancelButtonFillColor=bo(bA(A.selectioncancelbuttonfillcolor,\"FFFFFF\"),J(A.selectioncancelbuttonfillalpha,100));bM.chart.nativeZoom=false;bO.formAction=ay(A.formaction);if(A.submitdataasxml===\"0\"&&!A.formdataformat){A.formdataformat=FusionChartsDataFormats.CSV}bO.formDataFormat=bA(A.formdataformat,FusionChartsDataFormats.XML);bO.formTarget=bA(A.formtarget,\"_self\");bO.formMethod=bA(A.formmethod,\"POST\");bO.submitFormAsAjax=J(A.submitformasajax,0);(bM.callbacks||(bM.callbacks=[])).push(function(bP,bQ){bP.repositionItems=L;z(bP,\"selection\",bQ.onSelectionChange)});bM.chart.zoomType=\"xy\";return bN},dragStartHandler:function(A){A.point.cornerInnerSymbol.hide();A.point.cornerOuterSymbol.hide();A.point.closeButtonGroup.hide()},repositionItems:function(b3,bN,bM,bW){var bV=b3.point,bO=bV.selectTracker,bS=b3.id,Z=bS==T||bS==aN?undefined:bV[bS+au],bQ=b3.series,bY=bQ.plotHeight,b0=bV.trackerWidth*0.5,bK=bQ.plotWidth,M=a8(bV.left),bP=a8(bV.top),bR=a8(bV.height),bT=a8(bV.width),b4=M+bN,b2=bP+bM,bL={},bU={},bZ=bN,bX=bM,b1,bJ,A,L;switch(bS){case k:if(b2<0){b2=0}if(b2>bY){b2=bY}bM=b2-bP;bL.y=ai(bP+bR,b2)+aT;bL.height=c(bR-bM)||1;break;case aB:if(b2+bR>bY){b2=bY-bR}if(b2+bR<0){b2=-bR}bM=b2-bP;bL.y=ai(bP+bR+bM,bP)+aT;bL.height=c(bR+bM)||1;break;case a4:if(b4<0){b4=0}if(b4>bK){b4=bK}bN=b4-M;bL.x=ai(M+bT,b4)+aT;bL.width=c(bT-bN)||1;break;case y:if(b4+bT>bK){b4=bK-bT}if(b4+bT<0){b4=-bT}bN=b4-M;bL.x=ai(b4+bT,M)+aT;bL.width=c(bT+bN)||1;break;case T:if(b4+bT>bK){b4=bK-bT}if(b4+bT<0){b4=-bT}if(b2+bR>bY){b2=bY-bR}if(b2+bR<0){b2=-bR}bN=b4-M;bM=b2-bP;bL.y=ai(b2+bR,bP)+aT;bL.x=ai(b4+bT,M)+aT;bL.height=c(bR+bM);bL.width=c(bT+bN);bV.cornerGroupTracker.translate(M+bT+bN,bP+bR+bM);break;default:if(b4<0){b4=0}if(b4+bT>bK){b4=bK-bT}if(b2<0){b2=0}if(b2+bR>bY){b2=bY-bR}bN=b4-M;bM=b2-bP;bL.x=(b4)+aT;bL.y=(b2)+aT;bV.cornerGroupTracker.translate(M+bT+bN,bP+bR+bM);break}Z&&Z.translate(bN,bM);bO.attr(bL);if(bW){bV.left=M=Y(bL.x)?bL.x:bV.left;bV.top=bP=Y(bL.y)?bL.y:bV.top;bV.height=bR=Y(bL.height)?bL.height:bV.height;bV.width=bT=Y(bL.width)?bL.width:bV.width;b1=bJ=A=L=undefined;switch(bS){case k:bU.y=bP-b0;bU.x=M;b1=bJ=bL;bV.bottomTracker.attr({y:bP+bR-b0});break;case aB:bU.y=bP+bR-b0;bU.x=M;b1=bJ=bL;bV.topTracker.attr({y:bP-b0});break;case a4:bU.y=bP;bU.x=M-b0;A=L=bL;bV.rightTracker.attr({x:M+bT-b0});break;case y:bU.y=bP;bU.x=M+bT-b0;A=L=bL;bV.leftTracker.attr({x:M+(-b0)});break;default:if(bS==T){bU.y=bP+bR;bU.x=M+bT;bV.cornerGroupTracker.translate(M+bT,bP+bR)}b1={x:M-b0,y:bP,height:bR};bJ={x:M+bT-b0,y:bP,height:bR};A={x:M,y:bP-b0,width:bT};L={x:M,y:bP+bR-b0,width:bT};break}bV.leftTracker.attr(b1);bV.rightTracker.attr(bJ);bV.topTracker.attr(A);bV.bottomTracker.attr(L);bV.cornerGroupTracker.translate(M+bT,bP+bR);t.setSelectBoxValues(bV,bQ);bV.closeButtonGroup.show();bV.closeButtonGroup.translate(M+bT,bP);if(bR>bV.cornerSymbolRadius&&bT>bV.cornerSymbolRadius){bV.cornerInnerSymbol.show()}else{bV.cornerOuterSymbol.show()}Z&&Z.attr(bU)&&Z.translate(0,0.1)}},bindDragEvent:function(M,A){var L,Z;G([k,y,aB,a4,T,aN],function(bJ){L=A[bJ+au].element;Z={series:M,point:A,id:bJ};Z.changeX=bJ===a4||bJ===y||bJ===T||bJ===aN;Z.changeY=bJ===k||bJ===aB||bJ===T||bJ===aN;z(L,\"dragstart drag dragend\",t.dragHandler,Z)});z(A.closeButtonTracker.element,\"click\",function(bL){var bK=M._selectEleArr,bJ=bK.length;bL.data.point.containerGroup.destroy();A.isDeleted=true;while(bJ--){bK[bJ].isDeleted&&(bK.splice(bJ,1))}},{point:A})}},aZ.scatterbase);a7(aA.Renderer.prototype.symbols,{resizeIcon:function(bL,bJ,M,bN,Z){var A=J(M,15)/3,bK=3,bM=[],L;if(A<0){A=-A;M=-M;bL+=M-A/2;bJ+=M-A/2}for(L=3;L>0;L-=1){bM.push(bj,bL-A*L,bJ-bK,bk,bL-bK,bJ-A*L)}return bM},closeIcon:function(bL,bK,bM,M,bQ){var bJ=bL,Z=bK,bW=bM*1.3,bR=43*aq,bN=48*aq,bV=bJ+bW*bC(bR),bU=Z+bW*U(bR),L=bJ+bW*bC(bN),A=Z+bW*U(bN),bP,bT=0.71*(bM-2),bS=0.71*(bM-2),bO=bQ.getArcPath(bJ,Z,bV,bU,L,A,bW,bW,0,1);bP=[\"M\",bV,bU];bP=bP.concat(bO);bP=bP.concat([bj,bL+bT,bK-bS,bk,bL-bT,bK+bS,bj,bL-bT,bK-bS,bk,bL+bT,bK+bS]);return bP},configureIcon:function(bP,bO,bQ,bN,bW){bQ=bQ-1;var b0=0.5,bY=0.25,b3=bQ*0.71,b2=(bQ+2)*0.71,b6=bP-bQ,bM=bO-bQ,b5=bP+bQ,bL=bO+bQ,b4=bP+b0,bK=bO+b0,b1=bP-b0,bJ=bO-b0,bZ=b6-2,Z=bM-2,bX=b5+2,M=bL+2,bV=bP+b3,A=bO+b3,bT=bP-b3,b8=bO-b3,bS=bP+b2,b7=bO+b2,L=bP-b2,bR=bO-b2,bU;bU=[bj,b6,bK,bk,bZ,bK,bZ,bJ,b6,bJ,bT-bY,b8+bY,L-bY,bR+bY,L+bY,bR-bY,bT+bY,b8-bY,b1,bM,b1,Z,b4,Z,b4,bM,bV-bY,b8-bY,bS-bY,bR-bY,bS+bY,bR+bY,bV+bY,b8+bY,b5,bJ,bX,bJ,bX,bK,b5,bK,bV+bY,A-bY,bS+bY,b7-bY,bS-bY,b7+bY,bV-bY,A+bY,b4,bL,b4,M,b1,M,b1,bL,bT+bY,A+bY,L+bY,b7+bY,L-bY,b7-bY,bT-bY,A-bY,be];return bU}});aZ(\"multiaxisline\",{standaloneInit:true,creditLabel:bc,defaultSeriesType:\"line\",series:function(b6,bL,bJ){var bO,bK,bU=bL[a5],bV,A,bW,b3=b6.chart,bQ=b6.axis,b1,bY;bL.legend.enabled=Boolean(J(b6.chart.showlegend,1));if(bQ&&bQ.length>0){this.categoryAdder(b6,bL);var M=bL.yAxis[0],Z,b5,bR,b2,bX,bT,L,b0,bM,bN,bP,bS,b4,bZ=J(b3.yaxisvaluesstep,b3.yaxisvaluestep,1);bL.yAxis.splice(0,2);bU.noHiddenAxis=0;for(bY=0,bK=bQ.length;bY<bK;bY+=1){Z=bQ[bY];b1=J(Z.showaxis,1);L=bA(Z.color,bL.colors[bY%bL.colors.length]);b5=bo(L,100);bR=!J(Z.axisonleft,1);b0=J(Z.divlinethickness,b3.divlinethickness,1);bS=b1?J(Z.tickwidth,2):0;b4=b1?J(Z.axislinethickness,2):0;bT=bU[bY]={};bT.showAxis=b1;bU.noHiddenAxis+=1-b1;if(b1){if(bR){bN=bY}else{bM=bY}}if(bR){bL.yAxis.unshift({startOnTick:false,endOnTick:false,title:{enabled:b1,style:M.title.style,text:b1?bb(Z.title):K},labels:{x:0,style:M.labels.style},plotBands:[],plotLines:[],gridLineColor:bo(bA(Z.divlinecolor,L),J(Z.divlinealpha,b3.divlinealpha,w.divLineAlpha[bL.chart.paletteIndex],100)),gridLineWidth:b0,gridLineDashStyle:J(Z.divlineisdashed,b3.divlineisdashed,0)?bs(J(Z.divlinedashlen,b3.divlinedashlen,4),J(Z.divlinedashgap,b3.divlinedashgap,2),b0):undefined,alternateGridColor:ag,lineColor:b5,lineWidth:b4,tickLength:bS,tickColor:b5,tickWidth:b4,opposite:bR,showAxis:b1})}else{bL.yAxis.push({startOnTick:false,endOnTick:false,title:{enabled:b1,style:M.title.style,text:b1?bb(Z.title):K},labels:{x:0,style:M.labels.style},plotBands:[],plotLines:[],gridLineColor:bo(bA(Z.divlinecolor,L),J(Z.divlinealpha,b3.divlinealpha,w.divLineAlpha[bL.chart.paletteIndex],100)),gridLineWidth:b0,gridLineDashStyle:J(Z.divlineisdashed,b3.divlineisdashed,0)?bs(J(Z.divlinedashlen,b3.divlinedashlen,4),J(Z.divlinedashgap,b3.divlinedashgap,2),b0):undefined,alternateGridColor:ag,lineColor:b5,lineWidth:b4,tickLength:bS,tickColor:b5,tickWidth:b4,opposite:bR,showAxis:b1})}bT.yAxisValuesStep=J(Z.yaxisvaluesstep,Z.yaxisvaluestep,bZ);bT.maxValue=Z.maxvalue;bT.tickWidth=bS;bT.minValue=Z.minvalue;bT.setadaptiveymin=J(Z.setadaptiveymin,b3.setadaptiveymin);bT.numDivLines=J(Z.numdivlines,b3.numdivlines,4);bT.adjustdiv=J(Z.adjustdiv,b3.adjustdiv);bT.showYAxisValues=b1?J(Z.showyaxisvalues,Z.showyaxisvalue,b3.showyaxisvalues,b3.showyaxisvalue,1):0;bT.showLimits=b1?J(Z.showlimits,b3.showlimits,bT.showYAxisValues):0;bT.showDivLineValues=b1?J(Z.showdivlinevalue,Z.showdivlinevalues,bT.showYAxisValues):0;if(Z.dataset&&Z.dataset.length>0){bX=Z.dataset.length;for(b2=0;b2<bX;b2+=1){bW=Z.dataset[b2];if(bW.color===undefined){bW.color=L}bV={yAxis:bY,data:[]};A=this.point(bJ,bV,bW,b6.chart,bL,bU.oriCatTmp.length,bY);if(A instanceof Array){bL.series=bL.series.concat(A)}else{bL.series.push(A)}}}}bP=J(bM,bN);for(bY=0,bK=bL.yAxis.length;bY<bK;bY+=1){if(bY!=bP){bL.yAxis[bY].gridLineWidth=0}}this.configureAxis(bL,b6)}},configureAxis:function(L,bZ){var bN=L[a5],bJ=L.xAxis,bQ=bN.x,bV=bZ.chart,bS,bT,bU,bL,bX,bP,bR,bY,M,bW,bK,A,Z,bO,bM;bJ.title.text=bb(bV.xaxisname);for(bM=0,bU=L.yAxis.length;bM<bU;bM+=1){bS=L.yAxis[bM];bL=bN[bM];bO=J(bL.yAxisValuesStep,1);bO=bO<1?1:bO;bX=bL.maxValue;bP=bL.minValue;M=J(bL.setadaptiveymin,0);bY=bR=!M;bW=bL.numDivLines;bK=bL.adjustdiv!==aF;A=bL.showLimits;Z=bL.showDivLineValues;this.axisMinMaxSetter(bS,bL,bX,bP,bR,bY,bW,bK);this.configurePlotLines(bV,L,bS,bL,A,Z,bO,this.numberFormatter,false);if(bS.reversed&&bS.min>=0){L.plotOptions.series.threshold=bS.max}}},spaceManager:function(cf,cc,A,M){var ci=cf[a5],bR,b0,ck,bS=cc.chart,bV=false,b2,b3,Z,b4=ci.marginLeftExtraSpace,cj=ci.marginTopExtraSpace,bJ=ci.marginBottomExtraSpace,ce=ci.marginRightExtraSpace,bO=A-(b4+ce+cf.chart.marginRight+cf.chart.marginLeft),bX=M-(bJ+cf.chart.marginBottom+cf.chart.marginTop),bU=bO*0.3,bZ=bX*0.3,bL=bO-bU,bQ=bX-bZ,b5=bA(bS.legendposition,aB).toLowerCase();if(cf.legend.enabled&&b5===y){bL-=this.placeLegendBlockRight(cf,cc,bL/2,bX)}var bM=cf.yAxis,b7,bK=bM.length,b1=bK-ci.noHiddenAxis;if(b1){var cd,bN,cg,bW,ca=0,bP=0,b9=8,co,cm,bT=0,b6=bL/b1,bY,cn;for(cd=bK-1;cd>=0;cd-=1){cg=bM[cd];if(cg.showAxis){bR=ci[cd];b7=cg.opposite;co=(b7?bP:ca)+b9;b2=10;b3=bR.tickWidth;Z=true;bR.verticalAxisNamePadding=b2;bR.verticalAxisValuesPadding=b3;bR.rotateVerticalAxisName=Z;bR.verticalAxisNameWidth=50;cg.offset=co;bY=b6+bT-b9;cm=aR(cg,bR,cf,cc,bX,bY,b7,0,0);cm+=b9;if(b7){bP+=cm;cf.chart.marginRight+=b9}else{ca+=cm;cf.chart.marginLeft+=b9}cn=bY-cm;bT=cn;bL-=cm;if(bL<b9){b9=0}}}}bL-=a2(cf,cc,bL);ck=bL+bU;if(cf.legend.enabled&&b5!==y){bQ-=this.placeLegendBlockBottom(cf,cc,ck,bQ/2)}bQ-=a0(cf,cc,ck,bQ/2);bR=ci.x;bR.horizontalAxisNamePadding=J(bS.xaxisnamepadding,5);bR.horizontalLabelPadding=J(bS.labelpadding,2);bR.labelDisplay=(bS.rotatelabels==\"1\")?\"rotate\":bA(bS.labeldisplay,\"auto\").toLowerCase();bR.staggerLines=J(bS.staggerlines,2);bR.slantLabels=J(bS.slantlabels,bS.slantlabel,0);this.xAxisMinMaxSetter(cf,cc,ck);bQ-=br(cf.xAxis,bR,cf,cc,ck,bQ,bU);bQ-=X(cf,cc,bQ,cf.xAxis);bN=bZ+bQ;for(cd=0;cd<bK;cd+=1){bD(bN,cf,bS,cf.yAxis[cd],ci[cd].lYLblIdx)}if(cf.legend.enabled&&b5===y){var L=cf.legend,bT,cl=bZ+bQ;if(L.height>cl){L.height=cl;L.scroll.enabled=true;bT=(L.scroll.scrollBarWidth=10)+(L.scroll.scrollBarPadding=2);L.width+=bT;cf.chart.marginRight+=bT}L.y=20}var ch=((cf.chart.marginLeft-J(cf.chart.spacingLeft,0))-(cf.chart.marginRight-J(cf.chart.spacingRight,0)))/2,cb=cf.chart.marginLeft-J(cf.chart.spacingLeft,0),b8=-(cf.chart.marginRight-J(cf.chart.spacingRight,0));switch(cf.title.align){case a4:cf.title.x=cb;break;case y:cf.title.x=b8;break;default:cf.title.x=ch}switch(cf.subtitle.align){case a4:cf.subtitle.x=cb;break;case y:cf.subtitle.x=b8;break;default:cf.subtitle.x=ch}cf.chart.marginLeft+=b4;cf.chart.marginTop+=cj;cf.chart.marginBottom+=bJ;cf.chart.marginRight+=ce}},aZ.mslinebase);aZ(\"candlestick\",{standaloneInit:true,creditLabel:bc,paletteIndex:3,defaultSeriesType:\"candlestick\",series:function(bU,bR,A){var bN,L,bO=bR[a5],bM,Z,bQ,M,bK,bP,bS,bT;bR.legend.enabled=Boolean(J(bU.chart.showlegend,1));if(bU.dataset&&bU.dataset.length>0){this.categoryAdder(bU,bR);bR.yAxis[0].opposite=true;bO.numdivlines=ay(bU.chart.numpdivlines);var bV=jQuery.extend(true,{},bR,{chart:{backgroundColor:\"rgba(255,255,255,0)\",borderColor:\"rgba(255,255,255,0)\",animation:false},title:{text:null},subtitle:{text:null},legend:{enabled:false},credits:{enabled:false},xAxis:{opposite:true,labels:{enabled:false}},yAxis:[{opposite:true,title:{},plotBands:[],plotLines:[]},{opposite:false,title:{text:bU.chart.vyaxisname}}]});for(bN=0,L=bU.dataset.length;bN<L;bN+=1){bM={data:[]};bQ=bU.dataset[bN];Z=this.point(A,bM,bQ,bU.chart,bR,bO.oriCatTmp.length,bN);if(Z instanceof Array){if(J(bU.chart.showvolumechart,1)){bV.series.push({type:\"column\",data:Z[1]});bV.showVolume=true;bK=J(bU.chart.volumeheightpercent,40);bK=bK<20?20:(bK>80?80:bK);bP=bO.height-(bR.chart.marginBottom+bR.chart.marginTop);bS=(bP*bK/100);var bJ=bR.chart.marginBottom+bS;bV[a5].marginTop=bJ+40;bV.yAxis[0].plotBands=[];bV.yAxis[0].plotLines=[];bV.exporting.enabled=false;bV.yAxis[0].title.text=bb(ay(bU.chart.vyaxisname));bV.yAxis[0].title.align=\"low\";bV.chart.height=bS+20;bV.chart.width=bO.width;bV.chart.top=bP-bS;bV.chart.left=0;bV.chart.volumeHeightPercent=bK;if(!bR.subCharts){bR.subCharts=[]}bR.subCharts.push(bV)}bR.series.push(Z[0])}else{bR.series.push(Z)}}if(bU.trendset&&bU.trendset.length>0){for(bN=0,L=bU.trendset.length;bN<L;bN+=1){bM={type:\"line\",marker:{enabled:false},connectNullData:1,data:[]};M=bU.trendset[bN];if(M.data&&M.data.length>0){Z=this.getTrendsetPoint(A,bM,M,bU.chart,bR,bO.oriCatTmp.length,bN);bR.series.push(Z)}}}bU.chart.showdivlinesecondaryvalue=0;bU.chart.showsecondarylimits=0;this.configureAxis(bR,bU);bR.yAxis[1].opposite=false;bR.yAxis[1].min=bR.yAxis[0].min;bR.yAxis[1].max=bR.yAxis[0].max;bR.yAxis[1].title.text=bR.yAxis[0].title.text;bR.yAxis[0].title.text=K;bT=bU.trendlines&&bU.trendlines[0]&&bU.trendlines[0].line;if(bT&&bT.length){for(var bL=0;bL<bT.length;bL+=1){bT[bL].parentyaxis=\"s\";bT[bL].valueonleft=\"1\"}bz(bU.trendlines,bR.yAxis,bO,true,this.isBar)}}},getTrendsetPoint:function(L,bQ,bU,bZ,Z){if(bU.data){var b0=bU.data,M=b0.length,bL=0,bV,bJ,bP,bY,bM,bK,bS,A,bX,bT,bO=Z[a5],bN=this.numberFormatter,bW,bR=bO.toolTextStore;bY=h(bA(bU.color,bZ.trendsetcolor,\"666666\"));bM=bA(bU.alpha,bZ.trendsetalpha,aJ);bK=J(bU.thickness,bZ.trendsetthickness,2);bS=Boolean(J(bU.dashed,bZ.trendsetdashed,0));A=J(bU.dashlen,bZ.trendsetdashlen,4);bX=J(bU.dashgap,bZ.trendsetdashgap,4);bT=bA(bU.includeinlegend,1);bQ.color=bo(bY,bM);bQ.lineWidth=bK;bQ.dashStyle=bS?bs(A,bX):undefined;bQ.includeInLegend=bT;bQ.name=ay(bU.name);if(J(bU.includeinlegend)===0||bQ.name===undefined){bQ.showInLegend=false}bQ.tooltip={enabled:false};bZ.interactivelegend=0;for(bL=0,M=b0.length;bL<M;bL+=1){bV=b0[bL];if(bV&&!bV.vline){bJ=bN.getCleanValue(bV.value);bP=bN.getCleanValue(bV.x);bP=bP!==null?bP:bL+1;bW=bR&&bR[bP];bQ.data.push({x:bP,y:bJ,toolText:bW})}}}return bQ},point:function(ci,bP,cq,cj,b5){if(cq.data){var bL,b7,bR,bN,bM,bU=false,bK,L=aZ[ci],ck=b5[a5],b3,cs=cq.data,bS=cs&&cs.length,bY=J(cq.showvalues,ck.showValues),b6=this.numberFormatter,b2=[],cg=[],Z=b5.chart.paletteIndex,b9={};bP.name=ay(cq.seriesname);bP.showInLegend=false;bP.marker={enabled:true};b3=ay(cj.plotpriceas,K).toLowerCase();if(b3==\"line\"||b3==\"bar\"){bP.plotType=b3}else{bP.plotType=\"candlestick\"}var b0,ch,cl,A,cb,bJ,bQ,ce,bT,bZ,cn,cd,cf,bX=false,ca,b1,cm,b8,bO,co,cp,cc,M,cr,bW,b4,ct,bV;b4=J(bP.yAxis,0);ca=h(bA(cj.bearbordercolor,\"B90000\"));b1=h(bA(cj.bearfillcolor,\"B90000\"));cm=h(bA(cj.bullbordercolor,w.canvasBorderColor[Z]));b8=h(bA(cj.bullfillcolor,\"FFFFFF\"));bO=J(cj.plotlinethickness,(b3==\"line\"||b3==\"bar\")?2:1);co=bA(cj.plotlinealpha,aJ);cp=J(cj.plotlinedashlen,5);cc=J(cj.plotlinedashgap,4);M=Boolean(J(cj.showvplotborder,1));cr=J(cj.vplotborderthickness,1);bW=bA(cj.vplotborderalpha,(M==true)?aJ:aF);ct=h(bA(cj.rolloverbandcolor,w.altHGridColor[Z]));bV=bA(cj.rolloverbandalpha,w.altHGridAlpha[Z]);for(b7=0;b7<bS;b7+=1){bN=cs[b7];if(bN&&!bN.vline){b0=b6.getCleanValue(bN.open);ch=b6.getCleanValue(bN.close);cl=b6.getCleanValue(bN.high);A=b6.getCleanValue(bN.low);cb=b6.getCleanValue(bN.volume,true);ce=b6.getCleanValue(bN.x);if(cb!==null){bX=true}bJ=ai(b0,ch,cl,A);bQ=bH(b0,ch,cl,A);bT=bb(ay(bN.valuetext,K));cn=h(bA(bN.bordercolor,ch<b0?ca:cm));cd=bA(bN.alpha,aJ);bZ=bo(h(bA(bN.color,ch<b0?b1:b8)),cd);cf=Boolean(J(bN.dashed))?bs(cp,cc):undefined;bU=true;bK=L.getPointStub(b5,cj,bN,b0,ch,cl,A,cb,b3);ce=ce?ce:b7+1;b9[ce]=bK.toolText;bP.data.push({high:bH(b0,ch,cl,A),low:ai(b0,ch,cl,A),color:bo(bZ,cd),borderColor:bo(cn,co),dashStyle:cf,borderWidth:bO,x:ce,y:ch,MY:b0,toolText:bK.toolText,link:bK.link});cg.push({y:cb,color:bo(bZ,cd),toolText:bK.toolText,borderWidth:cr,borderColor:bo(cn,bW),dashStyle:cf,x:ce});this.pointValueWatchers(b5,ce,bJ,bQ,cb,b4)}}ck.toolTextStore=b9;if(bP.drawVolume=bX){b2.push(bP,cg)}else{b2=bP}}return b2},getPointStub:function(bN,L,A,bK,bR,Z,bM,bJ,bQ){var M=K,bP=bN[a5],bO=bP.numberFormatter,bL=bQ==\"line\";if(!bP.showTooltip){M=K}else{M=ay(A.tooltext);if(typeof M==\"undefined\"){M=(bK!==null&&!bL)?\"<b>Open:<\/b> \"+bO.dataLabels(bK)+\"<br/>\":K;M+=bR!==null?\"<b>Close:<\/b> \"+bO.dataLabels(bR)+\"<br/>\":K;M+=(Z!==null&&!bL)?\"<b>High:<\/b> \"+bO.dataLabels(Z)+\"<br/>\":K;M+=(bM!==null&&!bL)?\"<b>Low:<\/b> \"+bO.dataLabels(bM)+\"<br/>\":K;M+=bJ!==null?\"<b>Volume:<\/b> \"+bO.dataLabels(bJ):K}}return{toolText:M}},pointValueWatchers:function(bL,A,L,bM,Z,bN){var M,bJ=bL[a5],bK;bN=J(bN,0);if(Z!==null){M=bJ.volume;if(!M){M=bJ.volume={}}M.max=M.max>Z?M.max:Z;M.min=M.min<Z?M.min:Z}if(L!==null){M=bJ[bN];M.max=M.max>L?M.max:L;M.min=M.min<L?M.min:L}if(bM!==null){M=bJ[bN];M.max=M.max>L?M.max:L;M.min=M.min<L?M.min:L}if(A!==null){bK=bJ.x;bK.max=bK.max>A?bK.max:A;bK.min=bK.min<A?bK.min:A}},spaceManager:function(cf,cb,A,L){var ck=cf[a5],bQ,bR=cb.chart,bZ,b1,M,b8=ck.smartLabel,b2=ck.marginLeftExtraSpace,cl=ck.marginTopExtraSpace,bJ=ck.marginBottomExtraSpace,ce=ck.marginRightExtraSpace,bO=A-(b2+ce+cf.chart.marginRight+cf.chart.marginLeft),bV=L-(bJ+0+cf.chart.marginTop),bS=bO*0.3,bX=bV*0.3,cm=bO-bS,cc=bV-bX,bL=cf.yAxis,b6,bK=bL.length,cd,bN,cg,bU,ca=0,bP=0,b9=8,co,cn,bT=0,b4=cm/bK,bW;this.base.spaceManager.apply(this,arguments);if(cf.subCharts){var b3=cf.subCharts[0],bM=L-(cf.chart.marginTop+cf.chart.marginBottom),Z=b3.chart.volumeHeightPercent,cj,b5=ck.horizontalAxisHeight+5,b7,bY,ci,cp;M=J(cb.chart.rotateyaxisname,1);cj=(bM*Z/100);cf.chart.marginBottom+=cj+b5;var b0=aL({},cf.xAxis);for(b7=0,bY=cf.xAxis.plotBands.length;b7<bY;b7+=1){ci=cf.xAxis.plotBands[b7];if(ci&&ci.label&&ci.label.text){ci.label.text=K}cp=b0.plotBands[b7];if(cp&&cp.label&&cp.label.y){cp.label.y=I(bR.basefontsize,10)+4}}for(b7=0,bY=b0.plotLines.length;b7<bY;b7+=1){ci=b0.plotLines[b7];if(ci&&ci.label&&ci.label.text){ci.label.text=K}}if(b3.yAxis&&b3.yAxis[0]&&b3.yAxis[0].title&&b3.yAxis[0].title.text){b3.yAxis[0].title.text=K}b3.xAxis=b0;var ch;if(bL[1].title.rotation){ch=b8.getSmartText(b3.yAxis[1].title.text,M==0?cf.chart.marginLeft-10:cj,undefined,true).text}else{ch=b8.getSmartText(b3.yAxis[1].title.text,b8.getOriSize(bL[1].title.text).width,undefined,true).text}bL=b3.yAxis;bK=bL.length;ca=0;bP=0;b9=0;bT=0;b4=cm/bK;for(cd=bK-1;cd>=0;cd-=1){cg=bL[cd];bQ=ck[cd];b6=cg.opposite;co=(b6?bP:ca)+b9;bZ=10;b1=J(bQ.tickWidth,2)+co;bQ.verticalAxisNamePadding=bZ;bQ.verticalAxisValuesPadding=b1;bQ.rotateVerticalAxisName=M;cg.offset=co;bW=b4+bT-b9}bL=cf.yAxis;b3.yAxis[1].title=jQuery.extend(true,{},cf.yAxis[1].title);b3.yAxis[1].title.text=ch;b3.chart.left=0;b3.chart.width=A;b3.chart.top=(L-cf.chart.marginBottom)+b5;b3.chart.height=cf.chart.marginBottom-b5;b3.chart.marginLeft=cf.chart.marginLeft;b3.chart.marginRight=cf.chart.marginRight;b3.chart.marginTop=5;b3.chart.marginBottom=cf.chart.marginBottom-(b5+cj)}},isDual:true,numVDivLines:0,setAdaptiveYMin:true,divLineIsDashed:1,isCandleStick:true,defaultPlotShadow:1,requiredAutoNumericLabels:1},aZ.scatterbase);ae.candlestick=az(ae.column,{states:{hover:{}}});var bl=aA.extendClass(a.column,{type:\"candlestick\",drawPoints:function(){var Z=this,L=Z.options,bJ=Z.chart.renderer,bK,M,A;G(Z.data,function(bL){if(Y(bL.plotY)){bK=bL.graphic;M=bL.shapeArgs;if(bK){bK.attr(M)}else{A={stroke:bL.borderColor,fill:bL.color,\"stroke-width\":bL.borderWidth,\"stroke-linecap\":\"round\",dashstyle:bL.dashStyle};if(bL.bar){bL.bar.graphic=bJ[bL.bar.shapeType](bL.bar.shapeArgs).attr(A).add(Z.group).shadow(L.shadow,undefined,L.shadow)}if(M){bL.graphic=bJ[bL.shapeType](M).attr(A).add(Z.group).shadow(L.shadow,undefined,L.shadow)}}}})},translate:function(){var bT=this,bX=bT.chart,b8=0,A=bT.xAxis.reversed,b0=bT.xAxis.categories,bR,bY=bT.options.plotType;aW.prototype.translate.apply(bT);G(bX.series,function(cb){if(cb.type==bT.type){if(!cb.options.stacking){cb.columnIndex=b8}else{if(!Y(bR)){bR=b8++}cb.columnIndex=bR}}});var bJ=bT.options,b5,b2,bS,ca=bT.data,bK=bT.closestPoints,bL=c(ca[1]?ca[bK].plotX-ca[bK-1].plotX:bX.plotSizeX/(b0&&b0.length?b0.length:1)),b4=bL*bJ.groupPadding,bU=bL-2*b4,b1=bU/b8,bZ=bJ.pointWidth,bQ=Y(bZ)?(b1-bZ)/2:b1*bJ.pointPadding,bN=aD(bZ,b1-2*bQ),b7=(A?b8-bT.columnIndex:bT.columnIndex)||0,b6=bQ+(b4+b7*b1-(bL/2))*(A?-1:1),bW=bT.yAxis.getThreshold(bJ.threshold||0),bO=bJ.minPointLength;for(b5=0;b5<ca.length;b5+=1){b2=ca[b5];if(bY==\"line\"){if(b5>0){bS=ca[b5-1];bS.shapeType=\"path\";bS.shapeArgs=[bj,bS.plotX,bS.plotY,bk,b2.plotX,b2.plotY]}b2.trackerShapeType=at;b2.trackerArgs={x:b2.plotX-3,y:b2.plotY-3,width:6,height:6}}else{var Z=b2.plotX+b6,M=b2.plotY,bP=bT.yAxis.getThreshold(b2.MY),L=ar(ai(M,bP)),bV=ar(c(M-bP)),bM=bN,b9=bM/2,b3;if(bV<(bO||5)){if(bO){bV=bO;L=bW-(M<=bW?bO:0)}b3=L-3}if(bV<1){bV=1}a7(b2,{barX:Z,barY:L,barW:bM,barH:bV});if(bY==\"bar\"){b2.trackerShapeType=at;b2.shapeType=\"path\";b2.shapeArgs=[bj,b2.plotX,bP,bk,(b2.plotX-b9),bP,bj,b2.plotX,M,bk,(b2.plotX+b9),M];b2.trackerArgs={x:Z,y:Y(b3)?b3:L,width:bM,height:Y(b3)?6:bV}}else{b2.shapeType=at;b2.shapeArgs={x:Z,y:L,width:bM,height:bV,r:bJ.borderRadius};b2.trackerShapeType=at;b2.trackerArgs=Y(b3)&&az(b2.shapeArgs,{height:6,y:b3})}b2.bar={shapeType:\"path\",shapeArgs:[bj,b2.plotX,bT.yAxis.getThreshold(parseFloat(b2.high)),bk,b2.plotX,bT.yAxis.getThreshold(parseFloat(b2.low))]}}}},drawTracker:function(){var L=this,bK=L.chart,bJ=bK.renderer,A,bL,Z=+new Date(),bM=L.options.cursor,M=bM&&{cursor:bM},bN;G(L.data,function(bO){bL=bO.tracker;A=bO.trackerArgs;delete A.strokeWidth;if(bO.y!==null){if(bL){bL.attr(A)}else{if(bO.link!==undefined){var bP={cursor:\"pointer\",_cursor:\"hand\"}}bO.tracker=bJ[bO.trackerShapeType](A).attr({isTracker:Z,fill:bE,visibility:L.visible?ah:ad,zIndex:1}).on(E?\"touchstart\":\"mouseover\",function(bQ){bN=bQ.relatedTarget||bQ.fromElement;if(bK.hoverSeries!==L&&Q(bN,\"isTracker\")!==Z){L.onMouseOver()}bO.onMouseOver()}).on(\"mouseout\",function(bQ){if(!L.options.stickyTracking){bN=bQ.relatedTarget||bQ.toElement;if(Q(bN,\"isTracker\")!==Z){L.onMouseOut()}}}).css(bP).add(bO.group||bK.trackerGroup)}}})}});a.candlestick=bl;aZ(\"kagi\",{standaloneInit:true,stepLine:true,creditLabel:bc,defaultSeriesType:\"kagi\",defaultZeroPlaneHighlighted:false,setAdaptiveYMin:1,canvasPadding:15,isKagi:1,pointValueWatcher:function(Z,bL,bN,bM,M,bJ,bK){if(bL!==null){var L,bO,A=Z[a5];bN=J(bN,0);if(!A[bN]){A[bN]={}}L=A[bN];this.maxValue=L.max=L.max>bL?L.max:bL;this.minValue=L.min=L.min<bL?L.min:bL}},point:function(bK,bW,cc,b9,bO){var b2=bO.chart,bM=cc.length,bU=bO[a5],cb=0,ca=bU.x,M=bO.chart.paletteIndex,bT=bO[a5].numberFormatter,bP,bS,L,b4,bV,b6,Z,bJ,b0,bR,b1,bL,bX,b5,b8,bZ,b3,bN,bY,bQ,A,b7;bL=h(bA(b9.linecolor,b9.palettecolors,w.plotFillColor[M]));bX=J(b9.linealpha,100);bR=J(b9.linethickness,2);bW.color={FCcolor:{color:bL,alpha:bX}};bW.lineWidth=bR;bW.step=this.stepLine;bW.drawVerticalJoins=Boolean(J(b9.drawverticaljoins,1));b1=J(b9.drawanchors,b9.showanchors);for(bS=0,bV=0;bS<bM;bS+=1){b4=cc[bS];if(b4.vline){continue}bP=bT.getCleanValue(b4.value);if(bP==null){continue}b6=J(b4.showlabel,b9.showlabels,1);L=bb(!b6?K:F(b4.label,b4.name));cb+=1;b0=J(b4.linealpha,bX);Z={opacity:b0/100};b8=J(b4.anchorsides,b9.anchorsides,0);b7=J(b4.anchorstartangle,b9.anchorstartangle,0);bN=J(b4.anchorradius,b9.anchorradius,this.anchorRadius,3);b3=h(bA(b4.anchorbordercolor,b9.anchorbordercolor,bL));bZ=J(b4.anchorborderthickness,b9.anchorborderthickness,this.anchorBorderThickness,1);bY=h(bA(b4.anchorbgcolor,b9.anchorbgcolor,w.anchorBgColor[M]));bQ=bA(b4.anchoralpha,b9.anchoralpha,aJ);A=bA(b4.anchorbgalpha,b9.anchorbgalpha,bQ);b5=b1===undefined?b0!=0:!!b1;bW.data.push(aL(this.getPointStub(b4,bP,L,bO),{y:bP,color:bL,shadow:Z,dashStyle:b4.dashed,valuePosition:bA(b4.valueposition,b2.valuePosition),isDefined:true,marker:{enabled:!!b5,fillColor:{FCcolor:{color:bY,alpha:((A*bQ)/100)+K}},lineColor:{FCcolor:{color:b3,alpha:bQ}},lineWidth:bZ,radius:bN,startAngle:b7,symbol:s(b8)}}));this.pointValueWatcher(bO,bP);bV+=1}ca.catCount=cb;return bW},postSeriesAddition:function(b4,bK,A,L){var bO=b4.series[0],cd=bK.chart,co=bK.data,bW=bO&&bO.data,bV=bW&&bW.length,ce=b4[a5],ci=ce.x,b3=ce.axisGridManager,b8=b4.xAxis,b0=false,b9=0,b6=0.5,cl=J(cd.reversalvalue,-1),bY=J(cd.reversalpercentage,5),cf=this.maxValue,bT=this.minValue,b1,cm,cp,b5,ck,Z,bZ,cg,bP,cq,b2,ch,bM,cn,bN,bS,bX,bL,b7,ca,cb,M,cj,bR,bJ,bU,bQ;if(bW&&bW.length){bO.rallyColor=bA(cd.rallycolor,\"FF0000\");bO.rallyAlpha=J(cd.rallyalpha,cd.linealpha,100);bO.declineColor=bA(cd.declinecolor,\"0000FF\");bO.declineAlpha=J(cd.declinealpha,cd.linealpha,100);bO.rallyThickness=J(cd.rallythickness,cd.linethickness,2);bR=J(cd.rallydashlen,cd.linedashlen,5);bJ=J(cd.rallydashgap,cd.linedashgap,4);bO.declineThickness=J(cd.declinethickness,cd.linethickness,2);bU=J(cd.declinedashlen,cd.linedashlen,5);bQ=J(cd.declinedashgap,cd.linedashgap,4);bO.lineDashed={\"true\":J(cd.rallydashed,cd.linedashed,0),\"false\":J(cd.declinedashed,cd.linedashed,0)};bO.getDashStyleObj={\"true\":bs(bR,bJ,bO.rallyThickness),\"false\":bs(bU,bQ,bO.declineThickness)};bO.canvasPadding=J(cd.canvaspadding,this.canvasPadding,15);cl=(cl>0)?cl:bY*(cf-bT)/100;b1=bW[0].y;cm=function(cv,cr){var cu,ct=1,cs=bW[0].y;while(ct<cv){cu=bW[ct].y;if(cr){if(cu<=cs){bW[ct].isDefined=false}}else{if(cu>=cs){bW[ct].isDefined=false}}ct+=1}bW[0].vAlign=(cr)?aB:k;bW[0].align=\"center\"};bV=co.length;for(b7=0,ca=0;ca<bV;ca+=1){bS=co[ca];if(bS&&bS.vline){b7&&b3.addVline(b8,bS,b6,b4);continue}cj=co[ca];if(M){M=false;b6+=0.5}if(b7&&(bM=bW[b7])){cn=bW[b7-1];bM.vAlign=\"middle\";bM.align=y;bM.showLabel=false;cg=null;Z=bM.y;bZ=bW[b7+1]&&bW[b7+1].y;bN=c(b1-Z);if(!b0){if(Z>b1&&bN>cl){cp=true;bP=b1;cq=null;b5=true;b0=true;cm(b7,cp)}else{if(Z<b1&&bN>cl){cp=false;bP=null;cq=b1;b5=false;b0=true;cm(b7,cp)}else{cp=null;b5=null;b0=false}}if(Y(cn)){cn.isRally=cp}if(cp!=null){bW[0].isRally=cp}}else{if(Z<bP&&cp){cp=false}else{if(Z>cq&&!cp){cp=true}}}bM.isRally=cp;if((b5&&Z<b1)||(b5==false&&Z>b1)){cg=b1}cb=(cg)?cg:Z;bN=c(cb-bZ);if(b5==null){ck=null}else{if(b5){ck=(cb>bZ&&bN>=cl)}else{ck=(cb<bZ&&bN>=cl)}}if(cn&&cn.isShift){if(b5){bP=b1;b2=aB}else{if(!b5){cq=b1;b2=k}}ch=\"center\";for(var cc=b7;cc>1;cc-=1){if(bW[cc].y==b1){bW[cc].vAlign=b2;bW[cc].align=ch;bW[cc].showLabel=true;break}}}if(ck){b9+=1;b6+=0.5;M=true;b5=!b5;bM.isShift=true;b1=cb;bX=J(bS.showlabel,cd.showlabels,1);bL=bb(!bX?K:F(bS.label,bS.name));b3.addXaxisCat(b8,b9-1,b9-1,bL)}else{if((b5&&Z>b1)||(b5==false&&Z<b1)){b1=Z}else{cg=b1}}bM.plotValue=cg;bM.objParams={isRally:cp,lastHigh:cq,lastLow:bP,isRallyInitialised:b0}}b7+=1}bX=J(cj.showlabel,cd.showlabels,1);bL=bb(!bX?K:F(cj.label,cj.name));b3.addXaxisCat(b8,b9,b9,bL);bO.shiftCount=ci.catCount=b9+1}},xAxisMinMaxSetter:function(bY,bN,bT){var bJ=bY[a5],bV=bJ.x,bU=bN.chart,bM=bV.min=J(bV.min,0),bP=bV.max=J(bV.max,bV.catCount-1),bW,L=0,A=0,bO,Z=bY.xAxis,bL=bW=ai(J(bU.canvaspadding,0),(bT/2)-10),bX=J(bU.maxhshiftpercent,10),bK=bY.series[0],bQ=bK&&bK.shiftCount,bS=J(bU.canvaspadding,this.canvasPadding,15),M=bT-bS*2,bR;if(bK){bX=bX<=0?10:bX;bR=bK.xShiftLength=ai(M/bQ,bX*M/100);bL=bS+bR/2;bW=bT-((bR*bH((bQ-1),1))+bL);bP=bH(bP,1)}Z.labels.enabled=false;Z.gridLineWidth=aO;Z.alternateGridColor=ag;bO=(bT-(bL+bW))/((bP-bM)+(L+A));Z.min=bM-(L+(bL/bO));Z.max=bP+(A+(bW/bO))}},aZ.linebase);aZ(\"boxandwhisker2d\",{standaloneInit:true,creditLabel:bc,defaultSeriesType:\"boxandwhisker2d\",chart:aZ.errorbar2d.chart,drawErrorValue:aZ.errorbar2d.drawErrorValue,decimals:2,maxColWidth:9000,useErrorAnimation:1,avoidCrispError:0,tooltipsepchar:\": \",point:function(c9,eC,bO,cf,ec,dF,ek,cM){var d8=ec[a5],dO=ec[a5].numberFormatter,dW=ec.chart.paletteIndex,ef=function(eT){var eU=eT&&eT.length,eS;if(eU){eS=eU%2?eT[a8(eU/2)]:(eT[a8((eU-1)/2)]+eT[eU/2])/2}return eS},dT=ec.chart.useRoundEdges,et=J(cf.showshadow,1),eu=ec.colors,cH=ec.colors.length,eK=aQ+(J(cf.useplotgradientcolor,0)?d(cf.plotgradientcolor,w.plotGradientColor[dW]):K),cm=ek*2,dL=J(cf.plotborderthickness,1),dv=bA(cf.plotbordercolor,w.plotBorderColor[dW]).split(aQ)[0],dV=bA(cf.plotborderalpha,aJ),b5=cf.showplotborder==aF?aF:dV,cg=J(bO.dashed,cf.plotborderdashed,0),cs=J(bO.dashlen,cf.plotborderdashlen,5),b0=J(bO.dashgap,cf.plotborderdashgap,4),eJ=bA(bO.upperboxcolor,cf.upperboxcolor,eu[cm%cH]),d7=bA(bO.lowerboxcolor,cf.lowerboxcolor,eu[(cm+1)%cH]),dI=J(bO.upperboxalpha,cf.upperboxalpha),dm=J(bO.lowerboxalpha,cf.lowerboxalpha),eI=bA(bO.upperwhiskercolor,cf.upperwhiskercolor,dv),dn=bA(bO.lowerwhiskercolor,cf.lowerwhiskercolor,dv),c2=J(bO.upperwhiskeralpha,cf.upperwhiskeralpha,cf.plotborderalpha,aJ),bU=J(bO.lowerwhiskeralpha,cf.lowerwhiskeralpha,cf.plotborderalpha,aJ),da=J(bO.upperwhiskerthickness,cf.upperwhiskerthickness,dL),ep=J(bO.lowerwhiskerthickness,cf.lowerwhiskerthickness,dL),eo=bA(bO.upperwhiskerdashed,cf.upperwhiskerdashed,0),dp=bA(bO.lowerwhiskerdashed,cf.lowerwhiskerdashed,0),er=bA(bO.upperwhiskerdashlen,cf.upperwhiskerdashlen,5),ed=bA(bO.lowerwhiskerdashlen,cf.lowerwhiskerdashlen,5),d2=bA(bO.upperwhiskerdashgap,cf.upperwhiskerdashgap,4),dE=bA(bO.lowerwhiskerdashgap,cf.lowerwhiskerdashgap,4),eD=bA(bO.upperquartilecolor,cf.upperquartilecolor,dv),dG=bA(bO.lowerquartilecolor,cf.lowerquartilecolor,dv),b4=bA(bO.upperboxbordercolor,cf.upperboxbordercolor,dv),bP=bA(bO.lowerboxbordercolor,cf.lowerboxbordercolor,dv),dC=bA(bO.mediancolor,cf.mediancolor,dv),cZ=bA(bO.upperquartilealpha,cf.upperquartilealpha,dT?0:dV),b9=bA(bO.lowerquartilealpha,cf.lowerquartilealpha,dT?0:dV),dr=bA(bO.upperboxborderalpha,cf.upperboxborderalpha,dT?0:b5),dh=bA(bO.lowerboxborderalpha,cf.lowerboxborderalpha,dT?0:b5),b7=bA(bO.medianalpha,cf.medianalpha,dV),db=bA(bO.upperquartilethickness,cf.upperquartilethickness,dL),Z=bA(bO.lowerquartilethickness,cf.lowerquartilethickness,dL),cp=bA(bO.upperboxborderthickness,cf.upperboxborderthickness,dL),du=bA(bO.lowerboxborderthickness,cf.lowerboxborderthickness,dL),bX=bA(bO.medianthickness,cf.medianthickness,dL),cV=bA(bO.upperquartiledashed,cf.upperquartiledashed,cg),cK=bA(bO.lowerquartiledashed,cf.lowerquartiledashed,cg),cD=bA(bO.upperboxborderdashed,cf.upperboxborderdashed,cg),ex=bA(bO.lowerboxborderdashed,cf.lowerboxborderdashed,cg),dy=bA(bO.mediandashed,cf.mediandashed,cg),cQ=bA(bO.upperquartiledashlen,cf.upperquartiledashlen,cs),eQ=bA(bO.lowerquartiledashlen,cf.lowerquartiledashlen,cs),d0=bA(bO.upperboxborderdashlen,cf.upperboxborderdashlen,cs),cb=bA(bO.lowerboxborderdashlen,cf.lowerboxborderdashlen,cs),dj=bA(bO.mediandashlen,cf.mediandashlen,cs),ct=bA(bO.upperquartiledashgap,cf.upperquartiledashgap,b0),eq=bA(bO.lowerquartiledashgap,cf.lowerquartiledashgap,b0),dq=bA(bO.upperboxborderdashgap,cf.upperboxborderdashgap,b0),bL=bA(bO.lowerboxborderdashgap,cf.lowerboxborderdashgap,b0),cY=bA(bO.mediandashgap,cf.mediandashgap,b0),b3={},di={},cx={},em={},dN={},c1=[],cT=[],dY=[],cB=[],cA=[],dB=\"polygon\",c6=\"spoke\",cu={polygon:dB,spoke:c6},c8=cu[bA(bO.meaniconshape,cf.meaniconshape,dB).toLowerCase()]||dB,cq=J(bO.meaniconradius,cf.meaniconradius,5),L=J(bO.meaniconsides,cf.meaniconsides,3),eF=bA(bO.meaniconcolor,cf.meaniconcolor,\"000000\"),eA=bA(bO.meaniconbordercolor,cf.meaniconbordercolor,\"000000\"),c0=J(bO.meaniconalpha,cf.meaniconalpha,100),dM=cu[bA(bO.sdiconshape,cf.sdiconshape,dB).toLowerCase()]||dB,bR=J(bO.sdiconradius,cf.sdiconradius,5),cr=J(bO.sdiconsides,cf.sdiconsides,3),ca=bA(bO.sdiconcolor,cf.sdiconcolor,\"000000\"),d4=bA(bO.sdiconbordercolor,cf.sdiconbordercolor,\"000000\"),dA=J(bO.sdiconalpha,cf.sdiconalpha,100),cn=cu[bA(bO.mdiconshape,cf.mdiconshape,dB).toLowerCase()]||dB,dx=J(bO.mdiconradius,cf.mdiconradius,5),d6=J(bO.mdiconsides,cf.mdiconsides,3),dR=bA(bO.mdiconcolor,cf.mdiconcolor,\"000000\"),ci=bA(bO.mdiconbordercolor,cf.mdiconbordercolor,\"000000\"),cd=J(bO.mdiconalpha,cf.mdiconalpha,100),dd=cu[bA(bO.qdiconshape,cf.qdiconshape,dB).toLowerCase()]||dB,cw=J(bO.qdiconradius,cf.qdiconradius,5),bN=J(bO.qdiconsides,cf.qdiconsides,3),eN=bA(bO.qdiconcolor,cf.qdiconcolor,\"000000\"),cF=bA(bO.qdiconbordercolor,cf.qdiconbordercolor,\"000000\"),c5=J(bO.qdiconalpha,cf.qdiconalpha,100),cl=cu[bA(bO.outliericonshape,cf.outliericonshape,dB).toLowerCase()]||dB,bK=J(bO.outliericonradius,cf.outliericonradius,5),d5=J(bO.outliericonsides,cf.outliericonsides,3),dP=bA(bO.outliericoncolor,cf.outliericoncolor,\"000000\"),bT=bA(bO.outliericonbordercolor,cf.outliericonbordercolor,\"000000\"),cc=J(bO.outliericonalpha,cf.outliericonalpha,100),cI=2-1,bW=d8.plotSpacePercent*2,ea=(1-bW)/2,b1=((cI*-0.5)+ek)*ea,cv=J(cf.reverselegend,0),ei=cv?-1:1,c7=eC.legendIndex=(ek*6)+(cv?6-1:0),ey=J(bO.showmean,cf.showmean,0),en=J(bO.showmd,cf.showmd,0),b8=J(bO.showsd,cf.showsd,0),dX=J(bO.showqd,cf.showqd,0),dQ=J(bO.showalloutliers,cf.showalloutliers,0),eE=J(cf.outliersupperrangeratio,0),ds=J(cf.outlierslowerrangeratio,0),es=false,de=Boolean(J(cf.showdetailedlegend,1)),dc=d8.tooltipSepChar,ee=true,eR=bA(cf.dataseparator,aP),dt,c4,cP,ew,bQ,eP,dg,bM,ch,cj,b6,cU,b2,eO,dS,cE,bY,eb,dK,co,bJ,eL,dJ,ce,ev,cN,cR,eM,A,M,dH,el,bV,cX,dk,ez,dw,cz,cC,dl,ej,eh,dU,cO,cG,ck,d3,dz,c3,eB,cJ,dZ,eg,eH,eG,dD,cL,df,d1,d9,bZ,bS,cy,cS,cW;eC.errorBarWidthPercent=J(bO.whiskerslimitswidthratio,cf.whiskerslimitswidthratio,40);dz=bO.data;eC.name=ay(bO.seriesname);if(J(bO.includeinlegend)===0||eC.name===undefined){ee=eC.showInLegend=false}if(L<3){L=3}cE=ab(eJ.split(aQ)[0]);bY=ab(d7.split(aQ)[0]);eC.color={FCcolor:{color:cE+aQ+cE+aQ+bY+aQ+bY,alpha:\"100,100,100,100\",angle:90,ratio:\"0,50,0,50\"}};dl=this.isBar;ej=/3d$/.test(ec.chart.defaultSeriesType);b5=ej?(cf.showplotborder?b5:aF):b5;dv=ej?bA(cf.plotbordercolor,\"#FFFFFF\"):dv;eE=(eE<0)?0:eE;ds=(ds<0)?0:ds;for(el=0;el<dF;el+=1){if(!(dw=dz&&dz[el])){eC.data.push({y:null});cT.push({y:null});dY.push({y:null});cB.push({y:null});c1.push({y:null});continue}c3=dw&&dw.value&&dw.value.replace(/\\s/g,K).split(eR);eB=c3&&c3.length||0;while(eB--){c3[eB]=dO.getCleanValue(c3[eB])}c3&&c3.sort(function(eT,eS){return eT-eS});if((eB=c3&&c3.length)>2){cJ=c3[eB-1];dH=dZ=c3[0];if(eB%2){dD=a8(eB/2);cL=dD+1}else{dD=(eB/2);cL=dD}df=c3.slice(0,dD);d1=c3.slice(cL);eg=ef(c3);eH=ef(df);eG=ef(d1);M=A=cJ;if(A===null){eC.data.push({y:null});continue}es=true;eL=dK=[];eb=0;for(bJ=0;bJ<eB;bJ+=1){eb+=ce=c3[bJ];if(!Y(eL[\"a\"+ce])){dJ={};dJ.value=ce;dJ.frequency=1;dK.push(dJ);eL[\"a\"+ce]=ce;eL[\"a_obj\"+ce]=dJ}else{eL[\"a_obj\"+ce].frequency+=1}}co=dK.length;b6=eb/eB;c4=J(dw.showmean,ey);cP=J(dw.showmd,en);ew=J(dw.showsd,b8);bQ=J(dw.showqd,dX);cO=this.getPointStub(ec,cf,bO,dw,cJ,eG,eg,eH,dZ);cG=cO.toolText;if(c4){eP=1;cj=J(dw.meaniconalpha,c0);c1.push({y:b6,toolText:\"<b>Mean\"+dc+\"<\/b>\"+dO.dataLabels(b6),link:cO.link,marker:{fillColor:bo(bA(dw.meaniconcolor,eF),cj),lineColor:bo(bA(dw.meaniconbordercolor,eA),cj),radius:J(dw.meaniconradius,cq),symbol:s(J(dw.meaniconsides,L),bA(dw.meaniconshape,c8)==c6)}})}else{c1.push({y:null})}if(cP){dg=1;dS=0;for(bJ=0;bJ<co;bJ++){dS+=dK[bJ].frequency*c((Number(dK[bJ].value)-b6))}b2=dS/eB;cj=J(dw.mdiconalpha,cd);cT.push({y:b2,toolText:\"<b>MD\"+dc+\"<\/b>\"+dO.dataLabels(b2),link:cO.link,marker:{fillColor:bo(bA(dw.mdiconcolor,dR),cj),lineColor:bo(bA(dw.mdiconbordercolor,d4),cj),radius:J(dw.mdiconradius,dx),symbol:s(J(dw.mdiconsides,d6),bA(dw.mdiconshape,cn)==c6)}})}else{cT.push({y:null})}if(ew){bM=1;dS=0;for(bJ=0;bJ<eB;bJ++){dS+=W(c3[bJ]-b6,2)}cU=i(dS)/eB;cj=J(dw.sdiconalpha,dA);dY.push({y:cU,toolText:\"<b>SD\"+dc+\"<\/b>\"+dO.dataLabels(cU),link:cO.link,marker:{fillColor:bo(bA(dw.sdiconcolor,ca),cj),lineColor:bo(bA(dw.sdiconbordercolor,d4),cj),radius:J(dw.sdiconradius,bR),symbol:s(J(dw.sdiconsides,cr),bA(dw.sdiconshape,dM)==c6)}})}else{dY.push({y:null})}if(bQ){ch=1;eO=(eG-eH)*0.5;cj=J(dw.qdiconalpha,c5);cB.push({y:eO,toolText:\"<b>QD\"+dc+\"<\/b>\"+dO.dataLabels(eO),link:cO.link,marker:{fillColor:bo(bA(dw.qdiconcolor,eN),cj),lineColor:bo(bA(dw.qdiconbordercolor,cF),cj),radius:J(dw.qdiconradius,cw),symbol:s(J(dw.qdiconsides,bN),bA(dw.qdiconshape,dd)==c6)}})}else{cB.push({y:null})}if(ev=dw.outliers){ev=ev.replace(/\\s/g,K).split(eR);cN=ev.length;while(cN--){ev[cN]=dO.getCleanValue(ev[cN])}ev.sort(function(eT,eS){return eT-eS});cN=ev.length;for(cR=0;cR<cN;cR+=1){eM=ev[cR];if(dQ){M=bH(A,eM);dH=ai(dZ,eM)}cj=J(dw.outliericonalpha,cc);(eM>A||eM<dZ)&&cA.push({y:eM,toolText:\"<b>Outlier\"+dc+\"<\/b>\"+dO.dataLabels(eM),x:el,link:cO.link,marker:{fillColor:bo(bA(dw.outliericoncolor,dP),cj),lineColor:bo(bA(dw.outliericonbordercolor,bT),cj),radius:J(dw.outliericonradius,bK),symbol:s(J(dw.outliericonsides,d5),bA(dw.outliericonshape,cl)==c6)}})}}if(!dQ){dt=M-dH;M+=dt*eE;dH-=dt*ds}bV=bA(dw.upperboxcolor,eJ)+eK;cX=bA(dw.lowerboxcolor,d7)+eK;dk=bA(dw.upperboxalpha,dI,cf.upperboxalpha,cf.plotfillalpha,aJ)+K;ez=bA(dw.lowerboxalpha,dm,cf.lowerboxalpha,cf.plotfillalpha,aJ)+K;cz=bA(dw.ratio,bO.ratio,cf.plotfillratio);cC=bA(360-cf.plotfillangle,90);if(A<0){cC=360-cC}ck={opacity:dk/100};d3=ai(dk,b5)+K;eh=ao(bV,dk,cz,cC,dT,dv,d3,dl,ej);dU=ao(cX,ez,cz,cC,dT,dv,d3,dl,ej);b3={value:eG,color:bo(bA(dw.upperquartilecolor,eD),J(dw.upperquartilealpha,cZ)),borderWidth:J(dw.upperquartilethickness,db),dashStyle:J(dw.upperquartiledashed,cV)?bs(bA(dw.upperquartiledashlen,cQ),bA(dw.upperquartiledashgap,ct),J(dw.upperquartilethickness,db)):undefined,displayValue:cO.displayValueQ3};di={value:eH,color:bo(bA(dw.lowerquartilecolor,dG),J(dw.lowerquartilealpha,b9)),borderWidth:J(dw.lowerquartilethickness,Z),dashStyle:J(dw.lowerquartiledashed,cK)?bs(bA(dw.lowerquartiledashlen,eQ),bA(dw.lowerquartiledashgap,eq),J(dw.lowerquartilethickness,Z)):undefined,displayValue:cO.displayValueQ1};cx={color:bo(bA(dw.upperboxbordercolor,b4),J(dw.upperboxborderalpha,dr)),borderWidth:J(dw.upperboxborderthickness,cp),dashStyle:J(dw.upperboxborderdashed,cD)?bs(bA(dw.upperboxborderdashlen,d0),bA(dw.upperboxborderdashgap,dq),J(dw.upperboxborderthickness,cp)):undefined};em={color:bo(bA(dw.lowerboxbordercolor,bP),J(dw.lowerboxborderalpha,dh)),borderWidth:J(dw.lowerboxborderthickness,du),dashStyle:J(dw.lowerboxborderdashed,ex)?bs(bA(dw.lowerboxborderdashlen,cb),bA(dw.lowerboxborderdashgap,bL),J(dw.lowerboxborderthickness,du)):undefined};dN={value:eg,color:bo(bA(dw.mediancolor,dC),J(dw.medianalpha,b7)),borderWidth:J(dw.medianthickness,bX),dashStyle:J(dw.mediandashed,dy)?bs(bA(dw.mediandashlen,dj),bA(dw.mediandashgap,cY),J(dw.medianthickness,bX)):undefined,displayValue:cO.displayValueMid};d9=[];Y(cJ)&&d9.push({errorValue:cJ-eG,toolText:cG,link:cO.link,errorBarColor:bo(bA(dw.upperwhiskercolor,eI),J(dw.upperwhiskeralpha,c2)),errorBarThickness:J(dw.upperwhiskerthickness,da),dashStyle:J(dw.upperwhiskerdashed,eo)?bs(bA(dw.upperwhiskerdashlen,er),bA(dw.upperwhiskerdashgap,d2),J(dw.upperwhiskerthickness,da)):undefined,displayValue:cO.displayValueMax,shadow:{opacity:et?J(dw.upperwhiskeralpha,c2)/250:0}});Y(dZ)&&d9.push({errorValue:-(eH-dZ),errorStartValue:eH,toolText:cG,link:cO.link,errorBarColor:bo(bA(dw.lowerwhiskercolor,dn),J(dw.lowerwhiskeralpha,bU)),errorBarThickness:J(dw.lowerwhiskerthickness,ep),dashStyle:J(dw.lowerwhiskerdashed,dp)?bs(bA(dw.lowerwhiskerdashlen,ed),bA(dw.lowerwhiskerdashgap,dE),J(dw.lowerwhiskerthickness,ep)):undefined,displayValue:cO.displayValueMin,shadow:{opacity:et?J(dw.lowerwhiskeralpha,bU)/250:0}});eC.data.push(aL(cO,{y:eG,errorValue:d9,shadow:ck,color:eh[0],toolText:cG,lowerboxColor:dU[0],lowerboxBorderColor:dU[1],borderWidth:0,upperQuartile:b3,lowerQuartile:di,upperBoxBorder:cx,lowerBoxBorder:em,median:dN}));this.pointValueWatcher(ec,M);this.pointValueWatcher(ec,dH)}else{eC.data.push({y:null});cT.push({y:null});dY.push({y:null});cB.push({y:null});c1.push({y:null})}}eC.showInLegend=es&&ee;eC.legendFillColor=bo(cE,20);bZ={type:\"line\",name:\"Mean\",data:c1,legendIndex:c7+(ei),showInLegend:!!eP&&ee&&de,marker:{fillColor:bo(eF,100),lineColor:bo(eA,100),radius:cq,symbol:s(L,c8==c6)},color:J(cf.drawmeanconnector,bO.drawmeanconnector,0)?bo(bA(bO.meanconnectorcolor,cf.meanconnectorcolor,eF),J(bO.meanconnectoralpha,cf.meanconnectoralpha,100)):ag,lineWidth:J(cf.drawmeanconnector,bO.drawmeanconnector,0)?J(bO.meanconnectorthickness,cf.meanconnectorthickness,1):0,shadow:0,legendFillColor:eC.legendFillColor};bS={type:\"line\",name:\"SD\",data:dY,legendIndex:c7+(ei*2),showInLegend:!!bM&&ee&&de,marker:{fillColor:bo(ca,100),lineColor:bo(d4,100),radius:bR,symbol:s(cr,dM==c6)},color:J(cf.drawsdconnector,bO.drawsdconnector,0)?bo(bA(bO.sdconnectorcolor,cf.sdconnectorcolor,ca),J(bO.sdconnectoralpha,cf.sdconnectoralpha,100)):ag,lineWidth:J(cf.drawsdconnector,bO.drawsdconnector,0)?J(bO.sdconnectorthickness,cf.sdconnectorthickness,1):0,shadow:0,pointStart:b1,legendFillColor:eC.legendFillColor};cy={type:\"line\",name:\"MD\",data:cT,legendIndex:c7+(ei*3),showInLegend:!!dg&&ee&&de,marker:{fillColor:bo(dR,100),lineColor:bo(ci,100),radius:dx,symbol:s(d6,cn==c6)},color:J(cf.drawmdconnector,bO.drawmdconnector,0)?bo(bA(bO.mdconnectorcolor,cf.mdconnectorcolor,dR),J(bO.mdconnectoralpha,cf.mdconnectoralpha,100)):ag,lineWidth:J(cf.drawmdconnector,bO.drawmdconnector,0)?J(bO.mdconnectorthickness,cf.mdconnectorthickness,1):0,shadow:0,pointStart:b1,legendFillColor:eC.legendFillColor};cS={type:\"line\",name:\"QD\",data:cB,legendIndex:c7+(ei*4),showInLegend:!!ch&&ee&&de,marker:{fillColor:bo(eN,100),lineColor:bo(cF,100),radius:cw,symbol:s(bN,dd==c6)},color:J(cf.drawqdconnector,bO.drawqdconnector,0)?bo(bA(bO.qdconnectorcolor,cf.qdconnectorcolor,eN),J(bO.qdconnectoralpha,cf.qdconnectoralpha,100)):ag,lineWidth:J(cf.drawqdconnector,bO.drawqdconnector,0)?J(bO.qdconnectorthickness,cf.qdconnectorthickness,1):0,shadow:0,pointStart:b1,legendFillColor:eC.legendFillColor};cW={type:\"line\",name:\"Outlier\",showInLegend:!!(cA&&cA.length)&&ee&&de,data:cA,legendIndex:c7+(ei*5),marker:{fillColor:bo(dP,100),lineColor:bo(bT,100),radius:bK,symbol:s(d5,cl==c6)},color:ag,lineWidth:0,shadow:0,pointStart:b1,legendFillColor:eC.legendFillColor};ec._meanDataArr.push(bZ);ec._sdDataArr.push(bS);ec._mdDataArr.push(cy);ec._qdDataArr.push(cS);ec._outliers.push(cW);return eC},series:function(b5,bP,bJ){var bW=bP.series,bK=bP._meanDataArr=[],bZ=bP._sdDataArr=[],bL=bP._mdDataArr=[],b0=bP._qdDataArr=[],b1=bP._outliers=[],bV=bP[a5],L=bP.yAxis[0],Z=bV.plotSpacePercent*2,bR,bY,bM,bN,bX,b3,bS,bQ,bT,bU,bO,b4,b2,A,M;aZ.multiseries.series.call(this,b5,bP,bJ);bX=bW&&bW.length;bN=bH(bK.length,bZ.length,bL.length,b0.length,b1.length,bX);bM=(1-Z)/bX;A=L.min;M=L.max;bP.series=bW.concat(bK,bZ,bL,b0,b1);for(bS=0;bS<bX;bS+=1){bY=bW[bS];bR=bS;!bY.relatedSeries&&(bY.relatedSeries=[]);for(bQ=0;bQ<5;bQ+=1){bR+=bX;bY.relatedSeries.push(bR)}}for(bQ=bS=0;bQ<bN;bQ+=1,bS+=1){b3=(((bX-1)*-0.5)+bS)*bM;bK[bS]&&(bK[bS].pointStart=b3);bZ[bS]&&(bZ[bS].pointStart=b3);b0[bS]&&(b0[bS].pointStart=b3);bL[bS]&&(bL[bS].pointStart=b3);bO=b1[bS];if((bU=bO&&bO.data)){for(bT=0;bT<bU.length;bT+=1){b4=bU[bT];b2=b4.y;b4.y=b2>M||b2<A?null:b2;b4.x=b4.x+b3}}}delete bP._meanDataArr;delete bP._sdDataArr;delete bP._mdDataArr;delete bP._qdDataArr;delete bP._outliers},getPointStub:function(A,bX,bN,bR,bS,bK,Z,bM,bQ){var bU=K,bO=A[a5],bT=bO.tooltipSepChar,bL=this.numberFormatter,bW=J(bR.showvalue,bN.showvalues,bX.showvalues,1),bJ={\"true\":bL.dataLabels(bS),\"false\":K},bP={\"true\":bL.dataLabels(bK),\"false\":K},M={\"true\":bL.dataLabels(Z),\"false\":K},L={\"true\":bL.dataLabels(bM),\"false\":K},bV={\"true\":bL.dataLabels(bQ),\"false\":K};if(!bO.showTooltip){bU=K}else{bU=ay(bR.tooltext);if(!Y(bU)){bU=\"<b>Maximum\"+bT+\"<\/b>\"+bJ[!!1]+\"<br/>\";bU+=\"<b>Q3\"+bT+\"<\/b>\"+bP[!!1]+\"<br/>\";bU+=\"<b>Median\"+bT+\"<\/b>\"+M[!!1]+\"<br/>\";bU+=\"<b>Q1\"+bT+\"<\/b>\"+L[!!1]+\"<br/>\";bU+=\"<b>Minimum\"+bT+\"<\/b>\"+bV[!!1]}}return{toolText:bU,link:bA(bR.link),displayValueMax:bJ[!!(bW&&J(bR.showmaxvalue,bN.showmaxvalues,bX.showmaxvalues,1))],displayValueMid:M[!!(bW&&J(bR.showmedianvalue,bN.showmedianvalues,bX.showmedianvalues,1))],displayValueMin:bV[!!(bW&&J(bR.showminvalue,bN.showminvalues,bX.showminvalues,1))],displayValueQ3:bP[!!(bW&&J(bR.showq3value,bN.showq3values,bX.showq3values,0))],displayValueQ1:L[!!(bW&&J(bR.showq1value,bN.showq1values,bX.showq1values,0))]}}},aZ.multiseries);aZ(\"heatmap\",{standaloneInit:true,creditLabel:bc,defaultSeriesType:\"heatmap\",tooltipsepchar:\": \",tooltipConstraint:\"chart\",series:function(bK,cb,cz,A,M){var cs=bK.chart,bU=cb.chart,cv=cb[a5],bQ=cb.series,L=bU.paletteIndex,ce=this.numberFormatter,cC=bK.rows&&bK.rows.row,b5=cC&&cC.length,bY=bK.columns&&bK.columns.column,cw=bY&&bY.length,cy=bK.dataset,cH=cy&&cy.data,b3=bK.colorrange||{},bW,cr,cA=cv.mapByPercent=J(b3.mapbypercent,0),b8=cv.mapByCategory=J(cs.mapbycategory,0),cu=!b8&&J((b3.gradient),0),cF=bA(cs.plotfillalpha,100),cG=J(cs.showlabels,cs.showlabel,1),ch=J(cs.showvalues,1),cB=J(cs.showplotborder,1),b9=cB?J(cs.plotborderthickness,1):0,bV=bA(cs.plotbordercolor,w.plotBorderColor[L]),cc=bA(cs.plotborderalpha,cB?95:0).toString(),cj=bo(bV,cc),bN=J(cs.plotborderdashed,0),cl=J(cs.plotborderdashlen,5),ca=J(cs.plotborderdashgap,4),cq=bN?bs(cl,ca,b9):undefined,co=O.colorRange,bP=cb.plotOptions.series.dataLabels,cn=bP.style,cd=cn.fontSize.replace(/px/i,K),bR=0,ct=0,bX=0,cI=0,b6=cv.rowIdObj={},b1=cv.columnIdObj={},cD=[],b0=[],bJ=0,bL=[],cp,cm,cx,b4,cE,b7,ci,bZ,bT,bM,ck,bO,bS,cg,b2,cf,Z;if(cu){cb.legend.type=\"gradient\"}bP.tlLabelStyle={fontFamily:ay(cs.tlfont,cn.fontFamily),color:h(ay(cs.tlfontcolor,cn.color)),fontSize:I(cs.tlfontsize,cd)+S};V(bP.tlLabelStyle);bP.trLabelStyle={fontFamily:ay(cs.trfont,cn.fontFamily),color:h(ay(cs.trfontcolor,cn.color)),fontSize:I(cs.trfontsize,cd)+S};V(bP.trLabelStyle);bP.blLabelStyle={fontFamily:ay(cs.blfont,cn.fontFamily),color:h(ay(cs.blfontcolor,cn.color)),fontSize:I(cs.blfontsize,cd)+S};V(bP.blLabelStyle);bP.brLabelStyle={fontFamily:ay(cs.brlfont,cn.fontFamily),color:h(ay(cs.brfontcolor,cn.color)),fontSize:I(cs.brfontsize,cd)+S};V(bP.brLabelStyle);for(cf=0;cf<b5;cf+=1){Z=cC[cf];cp=Z.id;if(Y(cp)&&cp!==K){bR+=1;b6[cp.toLowerCase()]={index:bR,label:bA(Z.label,Z.name,cp)}}}for(cf=0;cf<cw;cf+=1){cg=bY[cf];cx=cg.id;if(Y(cx)&&cx!==K){b1[cx.toLowerCase()]={index:ct,label:bA(cg.label,cg.name,cx)};ct+=1}}for(bO=0,bS=cy&&cy.length;bO<bS;bO+=1){cH=cy[bO]&&cy[bO].data;for(cf=0,b2=cH&&cH.length;cf<b2;cf+=1){bM=cH[cf];ck=ce.getCleanValue(bM.value);if(ck===null&&!b8){continue}cp=ay(bM.rowid,bM.rowids);cm=ay(cp,K).toLowerCase();cx=ay(bM.columnid,bM.columnids);b4=ay(cx,K).toLowerCase();cD.push(ck);if(!Y(ci)&&!Y(bT)&&Y(ck)){bT=ci=ck}if(ci>ck){ci=ck}if(bT<ck){bT=ck}if(Y(cm)&&!Y(b6[cm])&&!b5){bX+=1;b6[cm]={index:bX,label:cp}}if(Y(b4)&&!Y(b1[b4])&&!cw){b1[b4]={index:cI,label:cx};cI+=1}Z=b6[cm];cg=b1[b4];if(Z&&cg){if(!Y(bL[Z.index])){bL[Z.index]=[]}if(!bL[Z.index][cg.index]){bJ+=1;b0.push({rowId:cp,columnId:cx,categoryId:bA(bM.colorrangelabel,bM.categoryid,bM.categoryname,bM.category),tlLabel:bb(bA(bM.tllabel,bM.ltlabel)),trLabel:bb(bA(bM.trlabel,bM.rtlabel)),blLabel:bb(bA(bM.bllabel,bM.lblabel)),brLabel:bb(bA(bM.brlabel,bM.rblabel)),setColor:bM.color,setAlpha:bA(bM.alpha,cF),setShowLabel:J(bM.showlabel,bM.showname,cG),colorRangeLabel:bM.colorrangelabel,displayValue:bM.displayvalue,tooltext:bM.tooltext,showvalue:bM.showvalue,index:bJ,value:ck,y:Z.index,x:cg.index});bL[Z.index][cg.index]=bJ}else{b0[bL[Z.index][cg.index]-1]={rowId:cp,columnId:cx,categoryId:bA(bM.colorrangelabel,bM.categoryid,bM.categoryname,bM.category),tlLabel:bb(bA(bM.tllabel,bM.ltlabel)),trLabel:bb(bA(bM.trlabel,bM.rtlabel)),blLabel:bb(bA(bM.bllabel,bM.lblabel)),brLabel:bb(bA(bM.brlabel,bM.rblabel)),setColor:bM.color,setAlpha:bA(bM.alpha,cF),setShowLabel:J(bM.showlabel,bM.showname,cG),colorRangeLabel:bM.colorrangelabel,displayValue:bM.displayvalue,tooltext:bM.tooltext,showvalue:bM.showvalue,index:bJ,value:ck,y:Z.index,x:cg.index}}}}}if(b0.length){cv.rowCount=bR=bH(bR,bX);cv.columnCount=ct=bH(ct,cI);for(cf in b6){b6[cf].index=bR-b6[cf].index+1}cv.minHeatValue=ci;cv.maxHeatValue=bT;bZ=bT-ci;cA=cA&&!b8,cb.colorRange=new co({colorRange:bK.colorrange,dataMin:ci,dataMax:bT,sortLegend:J(cs.autoorderlegendicon,cs.autoorderlegendicon,0),mapByCategory:b8,defaultColor:\"cccccc\",numberFormatter:ce});if(cu){bQ.push({data:[],borderWidth:b9,borderColor:cj,dashStyle:cq})}else{bW=cb.colorRange.colorArr;cr=bW&&bW.length;for(cf=0;cf<cr;cf+=1){b7=bW[cf];if(Y(b7.code)){bQ.push({data:[],name:bA(b7.label,b7.name),borderWidth:b9,borderColor:cj,color:ab(b7.code),dashStyle:cq})}}}if(!bQ.length){bQ.push({data:[],showInLegend:false})}for(cf=0;cf<b0.length;cf+=1){bM=b0[cf];if(cA){bM.value=l((bM.value-ci)/bZ*10000)/100}cE=cb.colorRange.getColorObj(b8?bM.categoryId:bM.value);if(cE.outOfRange){continue}bM.y=cv.rowCount-bM.y+1;bM.color=bo(bA(bM.setColor,cE.code),bA(bM.setAlpha,cF));bM=aL(bM,this.getPointStub(bM,bM.value,K,cb,bK));if(cu){bQ[0].data.push(bM)}else{bQ[cE.seriesIndex]&&bQ[cE.seriesIndex].data.push(bM)}}}else{cb.series=[];delete bQ}this.configureAxis(cb,bK)},getPointStub:function(bU,bX,bP,bK,b7){var bT=bK[a5],b5=b7.chart,bQ=bT.minHeatValue,M=bT.maxHeatValue,b2=bT.tooltipSepChar,b6=bT.mapByCategory,bV=bT.mapByPercent&&!b6,bR=this.numberFormatter,bS=bR.percentValue(bX),b3=bX===null?bX:bR.dataLabels(bX),bY=ay(bb(bU.tooltext)),b8=ay(bb(bU.displayValue)),bO=b6?b8:bA(b8,b3),Z=J(bU.showvalue,bT.showValues),bM=ay(b5.tltype,K),L=ay(b5.trtype,K),A=ay(b5.bltype,K),bZ=ay(b5.brtype,K),bN=bU.tlLabel,bJ=bU.trLabel,bW=bU.blLabel,b1=bU.brLabel,b0,b4,bL;if(bM!==K){bM=\"<b>\"+bM+b2+\"<\/b>\"}if(L!==K){L=\"<b>\"+L+b2+\"<\/b>\"}if(A!==K){A=\"<b>\"+A+b2+\"<\/b>\"}if(bZ!==K){bZ=\"<b>\"+bZ+b2+\"<\/b>\"}if(!bT.showTooltip){b0=K}else{if(bY!==undefined){b0=bY}else{b0=bO===K?false:((bV?\"<b>Value\"+b2+\"<\/b>\"+b3+\"<br/><b>Percentage\"+b2+\"<\/b>\"+bS:bO)+(bU.tlLabel!==K?\"<br/>\"+(bM+bU.tlLabel):K)+(bU.trLabel!==K?\"<br/>\"+L+bU.trLabel:K)+(bU.blLabel!==K?\"<br/>\"+A+bU.blLabel:K)+(bU.brLabel!==K?\"<br/>\"+bZ+bU.brLabel:K))}}if(!Z){bN=bJ=bW=b1=bL=K}else{if(b8!==undefined){bL=b8}else{bL=bV?bS:b3}}b4=bA(bU.link);return{displayValue:bL,toolText:b0,link:b4,tlLabel:bN,trLabel:bJ,blLabel:bW,brLabel:b1}},configureAxis:function(bM,b5){var bQ=bM[a5],b0=b5.chart,L=bM.yAxis[0],bO=bM.xAxis,bJ=-0.5,bR=bQ.rowCount,b1=bQ.columnCount,b2=bQ.axisGridManager,bW=bQ.rowIdObj,M=bM.chart.paletteIndex,bK=bQ.columnIdObj,b6=bo(bA(b0.vdivlinecolor,b0.divlinecolor,w.divLineColor[M]),J(b0.vdivlinealpha,b0.divlinealpha,w.divLineAlpha[M])),b3=J(b0.vdivlinethickness,b0.divlinethickness,1),bU=J(b0.vdivlineisdashed,b0.divlineisdashed,0)?bs(J(b0.vdivlinedashlen,b0.divlinedashlen,4),J(b0.vdivlinedashgap,b0.divlinedashgap,2),b3):undefined,bS=bo(bA(b0.hdivlinecolor,b0.divlinecolor,w.divLineColor[M]),J(b0.hdivlinealpha,b0.divlinealpha,w.divLineAlpha[M])),bP=J(b0.hdivlinethickness,b0.divlinethickness,1),bL=J(b0.hdivlineisdashed,b0.divlineisdashed,0)?bs(J(b0.hdivlinedashlen,b0.divlinedashlen,4),J(b0.hdivlinedashgap,b0.divlinedashgap,2),b3):undefined,bV=J(b0.showlabels,b0.showlabel,1),Z=J(b0.showxaxislabels,b0.showxaxisnames,bV),bN=J(b0.showyaxislabels,b0.showyaxisnames,bV),bT,bY,A,bZ,bX,b4;L.min=0;L.max=bR;for(bY in bW){A=bW[bY];bX=A.index;bT=bN?A.label:K;b2.addAxisGridLine(L,bX+bJ,bT,0.1,undefined,ag,1);if(bX<bR){L.plotBands.push({isTrend:true,color:bS,value:bX,width:bP,dashStyle:bL,zIndex:3})}}L.labels.enabled=false;L.gridLineWidth=aO;L.alternateGridColor=ag;L.title.text=bb(b0.yaxisname);bO.min=bJ;bO.max=b4=b1+bJ;bO.opposite=J(b0.placexaxislabelsontop,0);bQ.x.catCount=b1;for(bY in bK){bZ=bK[bY];bX=bZ.index;bT=Z?bZ.label:K;b2.addXaxisCat(bO,bX,1,bT);bX-=bJ;if(bX<b4){bO.plotBands.push({isTrend:true,color:b6,value:bX,width:b3,dashStyle:bU,zIndex:3})}}bO.labels.enabled=false;bO.gridLineWidth=aO;bO.alternateGridColor=ag;bO.title.text=bb(b0.xaxisname)},xAxisMinMaxSetter:function(){},placeLegendBlockRight:function(){var M=arguments[0],L=M.legend,A=L.type;if(A===\"gradient\"){if(O.placeGLegendBlockRight){return O.placeGLegendBlockRight.apply(this,arguments)}else{return 0}}else{return O.placeLegendBlockRight.apply(this,arguments)}},placeLegendBlockBottom:function(){var M=arguments[0],L=M.legend,A=L.type;if(A===\"gradient\"){if(O.placeGLegendBlockBottom){return O.placeGLegendBlockBottom.apply(this,arguments)}else{return 0}}else{return O.placeLegendBlockBottom.apply(this,arguments)}}},aZ.column2dbase);ae.heatmap=az(ae.column,{states:{hover:{}}});a.heatmap=aA.extendClass(a.column,{type:\"heatmap\",pointClass:aA.extendClass(a.column.prototype.pointClass,{show:function(){var A=this;A.graphic&&A.graphic.show();A.dataLabel&&A.dataLabel.show();A.TRdataLabel&&A.TRdataLabel.show();A.TLdataLabel&&A.TLdataLabel.show();A.BRdataLabel&&A.BRdataLabel.show();A.BLdataLabel&&A.BLdataLabel.show()},hide:function(){var A=this;A.graphic&&A.graphic.hide();A.dataLabel&&A.dataLabel.hide();A.TRdataLabel&&A.TRdataLabel.hide();A.TLdataLabel&&A.TLdataLabel.hide();A.BRdataLabel&&A.BRdataLabel.hide();A.BLdataLabel&&A.BLdataLabel.hide()}}),animate:function(Z){var A=this,M=A.group,L=A.options.animation;if(!Z&&M){M.attr({opacity:0});jQuery(M.element).animate({opacity:1},L,function(){M.attr({opacity:1})});A.animate=null}},translate:function(){var bJ=this,bK=bJ.chart,bQ=bJ.options,A=bQ.borderWidth,bN=bK.xAxis&&bK.xAxis[0]&&bK.xAxis[0].options,bP=bK.yAxis&&bK.yAxis[0]&&bK.yAxis[0].options,bL=bK.plotWidth,bM=bK.plotHeight,bO=bM/bP.max,M=bL/(bN.max+0.5),L=M/2,Z=bJ.data;aW.prototype.translate.apply(bJ);G(Z,function(bR){var bV=l(bR.plotX-L),bU=l(bR.plotY),bS=l(bR.plotY+bO)-bU,bW=l(bR.plotX+L)-bV,bT;a7(bR,{barX:bV,barY:bU,barW:bW,barH:bS});bR.shapeType=at;bT={x:bV,y:bU,width:bW,height:bS,r:0};if(A%2){bT.y-=1;bT.height+=1}bR.shapeArgs=bT;bR.trackerArgs={x:bT.x,y:bT.y,width:bT.width,height:bT.height,r:0}})},drawDataLabels:function(){if(this.options.dataLabels.enabled){var bR=this,b7=bR.data,bP=bR.options,bL=bP.dataLabels,bO=bR.dataLabelsGroup,bY=bR.chart,b1=bY.renderer,bV=bY.options.instanceAPI,b3=bY.options.chart,b5=bL.style,b4=bL.tlLabelStyle,bU=bL.trLabelStyle,b8=bL.blLabelStyle,bM=bL.brLabelStyle,bJ=parseInt(b5.lineHeight,10),bK=parseInt(b4.lineHeight,10),b2=parseInt(bU.lineHeight,10),bQ=(b1.smartLabel||bV.smartLabel),b6=8,bT=4,bX=6,L=0.9,M=0.5,bN,b0,bW,bS,bZ,A,Z;if(!bO){bO=bR.dataLabelsGroup=b1.g(\"data-labels\").attr({visibility:bR.visible?ah:ad,zIndex:6}).translate(bY.plotLeft,bY.plotTop).add();if(bY.options.chart.hasScroll){bO.clip(bR.clipRect)}}else{bO.translate(bY.plotLeft,bY.plotTop)}G(b7,function(ck,cd){if(ck.config){var cb=ck.config,cg=cb.tlLabel,cf=cb.trLabel,ci=cb.blLabel,cj=cb.brLabel,co=cb.dataLabel,ch=ck.barH,b9=ck.barW-b6,ca=(Y(cg)&&cg!==K),cn=(Y(cf)&&cf!==K),ce=(Y(ci)&&ci!==K),cc=(Y(cj)&&cj!==K),cm,cl;bW=bL.formatter.call(ck.getLabelConfig());bQ.setStyle(b5);bJ=parseInt(b5.lineHeight,10),Z=bQ.getSmartText(bW,b9,ch,false);b0=Z.text;bS=ck.plotX;bZ=(ck.plotY+(ch*M)+(bJ*0.75))-(Z.height*M);if(co){co.attr({text:b0}).animate({x:bS,y:bZ})}else{if(Y(b0)){co=ck.dataLabel=b1.text(b0,bS,bZ).attr({align:n,zIndex:1}).css(b5).add(bO)}}cm=b9*(ca&&cn?M:L);cl=(ch-Z.height)*0.5;bZ=ck.plotY+(parseInt(bK,10)*0.9);bZ=(ck.plotY+parseInt(bK,10)*0.5)+bX;if(ca){bQ.setStyle(b4);Z=bQ.getSmartText(cg,cm,cl,false);b0=Z.text;bS=ck.plotX-(b9*M);co=ck.TLdataLabel;if(co){co.attr({text:b0}).animate({x:bS,y:bZ})}else{co=ck.TLdataLabel=b1.text(b0,bS,bZ).attr({align:a4,zIndex:1}).css(b4).add(bO)}}if(cn){bZ=(ck.plotY+parseInt(b2,10)*0.5)+bX;bQ.setStyle(bU);Z=bQ.getSmartText(cf,cm,cl,false);b0=Z.text;bS=ck.plotX+(b9*M);co=ck.TRdataLabel;if(co){co.attr({text:b0}).animate({x:bS,y:bZ})}else{co=ck.TRdataLabel=b1.text(b0,bS,bZ).attr({align:y,zIndex:1}).css(bU).add(bO)}}cm=b9*(ce&&cc?M:L);bZ=ck.plotY+ch-bT;if(ce){bQ.setStyle(b8);bJ=parseInt(b8.lineHeight,10),Z=bQ.getSmartText(ci,cm,cl,false);b0=Z.text;bS=ck.plotX-(b9*M);bZ=ck.plotY+ch-Z.height+(bJ*0.4);co=ck.BLdataLabel;if(co){co.attr({text:b0}).animate({x:bS,y:bZ})}else{co=ck.BLdataLabel=b1.text(b0,bS,bZ).attr({align:a4,zIndex:1}).css(b8).add(bO)}}if(cc){bQ.setStyle(bM);bJ=parseInt(bM.lineHeight,10),Z=bQ.getSmartText(cj,cm,cl,false);b0=Z.text;bS=ck.plotX+(b9*M);bZ=ck.plotY+ch-Z.height+(bJ*0.4);co=ck.BRdataLabel;if(co){co.attr({text:b0}).animate({x:bS,y:bZ})}else{co=ck.BRdataLabel=b1.text(b0,bS,bZ).attr({align:y,zIndex:1}).css(bM).add(bO)}}}})}},setScaleRange:function(L,bM){var Z=this,bL=Z.data,M=0,bJ=bL.length,A,bK;for(;M<bJ;M+=1){A=bL[M];bK=A.value;if(bK<L||bK>bM){if(!A._hidden){A._hidden=true;A.hide()}}else{if(A._hidden){A._hidden=false;A.show()}}}}});ae.boxandwhisker2d=az(ae.column,{states:{hover:{}}});var bd=aA.extendClass(a.column,{type:\"boxandwhisker2d\",drawDataLabels:function(){},animate:function(Z){var A=this,M=A.data,L=A.options.animation;if(!Z){G(M,function(bT){var bK=bT.graphic,bR=bT.graphic1,bM=bT.shapeArgs,bO=bT.shapeArgs1,bN=bT.UQGraphics,bQ=bT.LQGraphics,bS=bT.UBBGraphics,bJ=bT.LBBGraphics,bP=bT.MidGraphics,bL;if(bR){bN.hide();bQ.hide();bS.hide();bJ.hide();bP.hide();bR.attr({height:0,y:A.yAxis.getThreshold(0)});bR.animate({height:bM.height,y:bM.y},L)}if(bK){bK.attr({height:0,y:A.yAxis.getThreshold(0)});bK.animate({height:bO.height,y:bO.y},L,function(){bN&&bN.show();bQ&&bQ.show();bS&&bS.show();bJ&&bJ.show();bP&&bP.show();bL=bT.errorGraph;bL&&bL[0]&&bL[0].show();bL&&bL[1]&&bL[1].show()})}});A.animate=null}},translate:function(){var bO=this,bR=bO.chart,M=bO.options,b1=M.borderWidth,bZ=0,A=bO.xAxis.reversed,bU=bO.xAxis.categories,bY;aW.prototype.translate.apply(bO);G(bR.series,function(b2){if(b2.type===bO.type){bY=bZ++;b2.columnIndex=bY}});var b0=bO.data,Z=bO.closestPoints,bJ=c(b0[1]?b0[Z].plotX-b0[Z-1].plotX:bR.plotSizeX/((bU&&bU.length)||1)),bW=bJ*M.groupPadding,bP=bJ-2*bW,bV=bP/bZ,bT=M.pointWidth,bN=Y(bT)?(bV-bT)/2:bV*M.pointPadding,bK=bH(aD(bT,bV-2*bN),1);var bL=c(J(M.maxColWidth,50))||1;if(bK>bL&&M.groupPadding===0.1){bW+=((bK-bL)*bZ)/2;bV=bK=bL}var bS=(A?bZ-bO.columnIndex:bO.columnIndex)||0,bX=bN+(bW+bS*bV-(bJ/2))*(A?-1:1),L=J(M.threshold,bH(bO.yAxis.options.min,0),0),bQ=bO.yAxis.getThreshold(L),bM=aD(M.minPointLength,5);G(b0,function(ca){var cf=ca.plotY,b3=ca.lowerQuartile||{},cc=ca.median||{},b7=J(bO.yAxis.translate(b3.value,0,1),ca.yBottom,bQ),ce=J(bO.yAxis.translate(cc.value,0,1),ca.yBottom,bQ),b2=ca.plotX+bX,cd=ar(ai(cf,b7)),b8=ar(bH(cf,ce)-cd),cb=ar(ai(b7,ce)),b9=ar(bH(b7,ce)-cb),b6,b4,b5;if(c(b8)<bM){if(bM){b8=bM;cd=c(cd-bQ)>bM?b7-bM:bQ-(cf<=bQ?bM:0)}b6=cd-3}a7(ca,{barX:b2,barY:cd,barW:bK,barH:b8,medianY:ce});ca.shapeType=at;b4={x:l(b2),y:l(cd),width:l(bK),height:l(b8),r:M.borderRadius};b5=aL({},b4);b5.y=l(cb);b5.height=l(b9);if(b1%2){b4.y-=1;b4.height+=1;b5.y-=1;b5.height+=1}ca.shapeArgs=b4;ca.shapeArgs1=b5;ca.trackerArgs={x:b4.x,y:b4.y,width:b4.width,height:b4.height+b5.height,r:0}})},drawPoints:function(){var bN=this,b0=bN.options,cn=bN.chart,b7=cn.renderer,cf=bN.group,ci=bN.shadowGroup,bV=bN.yAxis,A=(bV.reversed&&bV.options.min<0)?true:false,b6=b7.box.nodeName.toLowerCase()===\"div\"?true:false,bL=bN.inverted,bS=bN.dataLabelsGroup,bY=b0.dataLabels,ch=bY.style,b3=parseInt(ch.lineHeight,10),Z=b3*0.37,cm=cn.options.chart,bJ=3,cl=cm.valuePadding+bJ,bK=(cm.rotateValues==1)?270:undefined,bM=n,b5=+new Date(),b8,ca,cg,ce,cd,co,M,b1,L,cb,bO,bP,bZ,bR,b4,ck,cj,bW,cc,b9,bQ,bT,bX,b2,bU;if(!ci&&b0.shadow){ci=bN.shadowGroup=b7.g(\"shadow\").add(cf);ci.floated=true}if(!bS){bS=bN.dataLabelsGroup=b7.g(\"data-labels\").attr({visibility:bN.visible?ah:ad,zIndex:6}).translate(cn.plotLeft,cn.plotTop).add();if(cn.options.chart.hasScroll){bS.clip(bN.clipRect)}}else{bS.translate(cn.plotLeft,cn.plotTop)}G(bN.data,function(cp){var cr=cp.plotY,cq=cp.upperQuartile,ct=cp.lowerQuartile,cs=cp.upperBoxBorder,cv=cp.lowerBoxBorder,cu=cp.median;if(cr!==g&&!isNaN(cr)&&cp.y!==null){bP=cp.shapeArgs;cd=bP.y;L=bP.width;M=bP.height;cg=bP.r;ce=bP.x;cb=0;if(b6&&bL&&cp.color&&cp.color.FCcolor){cp.color.FCcolor.angle+=90}b4=cp.pointAttr[cp.selected?bf:af];bZ=cp.graphic1;if(bZ){stop(bZ);bZ.animate(bP)}else{cp.graphic1=b7[cp.shapeType](ce,cd,L,M,cg,cb).attr(b4).add(cf).shadow(b0.shadow,ci,cp.shadow)}bO=cp.graphic;bR=cp.shapeArgs1;b1=bR.height;co=bR.y;if(bO){stop(bO);bO.animate(bR)}else{b4.fill=cp.options.lowerboxColor;cp.graphic=b7[cp.shapeType](ce,co,L,b1,cg,cb).attr(b4).add(cf).shadow(b0.shadow,ci,cp.shadow)}bQ=cp.UBBGraphics;bT=cp.LBBGraphics;bX=cp.UQBGraphics;b2=cp.LQBGraphics;bU=cp.MidGraphics;ck=b7.crispLine([bj,ce,cd,bk,ce,cd+M,bj,ce+L,cd,bk,ce+L,cd+M],cs.borderWidth);if(bQ){stop(bQ);bQ.animate({d:ck})}else{cp.UBBGraphics=b7.path(ck).attr({stroke:cs.color,\"stroke-width\":cs.borderWidth,\"stroke-linecap\":H,dashstyle:cs.dashStyle}).add(cf)}cj=b7.crispLine([bj,ce,co,bk,ce,co+b1,bj,ce+L,co,bk,ce+L,co+b1],cv.borderWidth);if(bT){stop(bT);bT.animate({d:cj})}else{cp.LBBGraphics=b7.path(cj).attr({stroke:cv.color,\"stroke-width\":cv.borderWidth,\"stroke-linecap\":H,dashstyle:cv.dashStyle}).add(cf)}cp.UQPath=bW=b7.crispLine([bj,ce,cd,bk,ce+L,cd],cq.borderWidth);if(bX){stop(bX);bX.animate({d:bW})}else{cp.UQGraphics=b7.path(bW).attr({stroke:cq.color,\"stroke-width\":cq.borderWidth,\"stroke-linecap\":H,dashstyle:cq.dashStyle}).add(cf)}b9=b7.crispLine([bj,ce,co,bk,ce+L,co],cu.borderWidth);if(bU){stop(bU);bU.animate({d:b9})}else{cp.MidGraphics=b7.path(b9).attr({stroke:cu.color,\"stroke-width\":cu.borderWidth,\"stroke-linecap\":H,dashstyle:cu.dashStyle}).add(cf)}cc=b7.crispLine([bj,ce,co+b1,bk,ce+L,co+b1],ct.borderWidth);if(b2){stop(b2);b2.animate({d:cc})}else{cp.LQGraphics=b7.path(cc).attr({stroke:ct.color,\"stroke-width\":ct.borderWidth,\"stroke-linecap\":H,dashstyle:ct.dashStyle}).add(cf)}bM=bK?a4:n;if(Y(cu.displayValue)){b7.text(cu.displayValue,ce+(L*0.5)+(bK?Z:0),co-cl).attr({align:bM,rotation:bK}).css(ch).add(bS)}if(Y(cq.displayValue)){b7.text(cq.displayValue,ce+(L*0.5)+(bK?Z:0),cd-cl).attr({align:bM,rotation:bK}).css(ch).add(bS)}if(Y(ct.displayValue)){bM=bK?y:n;b7.text(ct.displayValue,ce+(L*0.5)+(bK?Z:0),co+b1+cl+(bK?0:Z)).attr({align:bM,rotation:bK}).css(ch).add(bS)}}})}});a.boxandwhisker2d=bd;ae.kagi=az(ae.line,{states:{hover:{}}});a.kagi=aA.extendClass(a.line,{type:\"kagi\",translate:function(){var bK,bN=this,L=bN.yAxis,bJ=bN.xAxis,bM=bN.data,bP=bM.length,bL=0,bO,A=bJ.translate(bL),Z,bS,bQ,M,bT,bU,bR;for(bO=0;bO<bP;bO+=1){bU=bM[bO];bR=bU.y;if(!bU.isDefined){bR=bU.plotValue}bR=bA(bU.plotValue,bR);bU.plotY=L.translate(bU.y,0,1,0,1);bU.graphY=L.translate(bR,0,1,0,1);bU.plotX=A;if(bU.isShift){bL+=1;A=bJ.translate(bL)}if(bO){M=bU.config;bT=bM[bO-1];bK=M.objParams.isRally;Z=M.objParams.lastHigh;bS=M.objParams.lastLow;bQ=M.objParams.isRallyInitialised;if(bT&&bQ&&bT.config.isRally!=M.isRally){M.isChanged=true;M.ty=L.translate((bK?Z:bS),0,1,0,1)}else{M.isChanged=false}}}},drawPoints:function(){var bO=this,bX=bO.data,bS=bO.chart,M=bO.options,A=+new Date(),bL=M.cursor,bP=bL&&{cursor:bL}||{},bQ,bN,bK,Z,bV,bU,bM,bT,bJ,bW,bR,L;if(true){bV=bX.length;while(bV--){bU=bX[bV];bK=bU.plotX;Z=bU.plotY;bR=bU.graphic;bM=bU.marker;bT=bM.enabled;if(Z!==g&&!isNaN(Z)&&bU.isDefined){bQ=bU.pointAttr[bU.selected?bf:af];bJ=bQ.r;bW=(bM&&bM.startAngle||90)*aq;bQ.isTracker=true;if(bU.link!==undefined){bP.cursor=\"pointer\";bP._cursor=\"hand\"}else{bP.cursor=bP._cursor=\"default\"}if(bR){bR.animate({x:bK,y:Z,r:bJ})}else{bN=bQ||{};if(!bT){bN=a7(bN,{fill:bE,stroke:bE,r:3})}bR=bU.graphic=bS.renderer.symbol(aD(bU.marker&&bU.marker.symbol,bO.symbol),bK,Z,bJ,{startAngle:bW}).on(E?\"touchstart\":\"mouseover\",function(b1){var b0=(b1.currentTarget?b1.currentTarget:b1.srcElement),bY,bZ;if(!(bY=b0.point)){return}bZ=bY.series;L=b1.relatedTarget||b1.fromElement;if(bS.hoverSeries!==bZ&&Q(L,\"isTracker\")!==A){bZ.onMouseOver()}bY.onMouseOver()}).on(\"mouseout\",function(b0){var bZ=(b0.currentTarget)?b0.currentTarget:b0.srcElement,bY=bZ.point&&bZ.point.series;if(bY&&!bY.options.stickyTracking){L=b0.relatedTarget||b0.toElement;if(Q(L,\"isTracker\")!==A){bY.onMouseOut()}}}).attr(bN).css(bP).add(bO.group);bU.graphic.element.point=bU}}}}},drawTracker:function(){},drawGraph:function(){var bX=[],b0=[],bT=[],bV=[],bR=[],bW=this,bK=bW.options,bZ=bW.chart,bU=bW.group,A=bK.lineWidth,b9=bK.canvasPadding,b3=bZ.renderer,bO=bW.shadowGroup,b8=bK.xShiftLength,ca=bW.segments[0],M={\"true\":bo(bK.rallyColor,bK.rallyAlpha),\"false\":bo(bK.declineColor,bK.declineAlpha)},b2={\"true\":bK.rallyAlpha,\"false\":bK.declineAlpha},bN={\"true\":bK.rallyThickness,\"false\":bK.declineThickness},b5=bK.getDashStyleObj,bY=bK.lineDashed,bS,L,bP,b6,b1,bL,bJ,b4,bM,bQ,b7,Z;if(!bO&&bK.shadow){bO=bW.shadowGroup=b3.g(\"shadow\").add(bU);bO.floated=true}if(!ca){return}bL=b9+b8/2;bJ=ca[0].plotY;b7=!!ca[0].isRally;L=M[b7];bP=bN[b7];bT.push([bj,b9,bJ,bk,bL,bJ]);bR.push({opacity:b2[b7]/100});bV.push({stroke:L,\"stroke-width\":bP,\"stroke-linecap\":H});G(bW.segments,function(cb){G(cb,function(cc,cd){b6=cb[cd+1];if(b6){b1=[bj,bL,bJ];b7=cc.isRally;if(cc.isShift){L=M[b7];bP=bN[b7];bS=J(b6.config.dashStyle,bY[b7])&&b5[b7];bL+=b8;bJ=cc.graphY;b1.push(bk,bL,bJ);bT.push(b1);b1=[bj,bL,bJ];bR.push({opacity:b2[b7]/100});bV.push({stroke:L,\"stroke-width\":bP,\"stroke-linecap\":H,dashstyle:bS})}if(b6.config.isChanged){L=M[b7];bP=bN[b7];bJ=b6.config.ty;bS=J(b6.config.dashStyle,bY[b7])&&b5[b7];b1.push(bk,bL,bJ);bT.push(b1);b1=[bj,bL,bJ];bR.push({opacity:b2[b7]/100});bV.push({stroke:L,\"stroke-width\":bP,\"stroke-linecap\":H,dashstyle:bS})}Z=b6.isRally;L=M[Z];bP=bN[Z];bS=J(b6.config.dashStyle,bY[Z])&&b5[Z];b1.push(bk,bL,b6.graphY);bJ=b6.graphY;bT.push(b1);bR.push({opacity:b2[Z]/100});bV.push({stroke:L,\"stroke-width\":bP,\"stroke-linecap\":H,dashstyle:bS})}})});bW.graphPath=bX;bW.singlePoints=b0;if(!bW.graphLine){bW.graphLine=[]}G(bT,function(cc,cb){bM=bW.graphLine;bQ=bM[cb];if(bQ){bQ.animate({d:cc})}else{if(A){cc=b3.crispLine(cc,bV[cb][\"stroke-width\"]||2);bM[cb]=b3.path(cc).attr(bV[cb]).add(bU).shadow(bK.shadow,bO,bR[cb])}}})},drawDataLabels:function(){if(this.options.dataLabels.enabled){var bS=this,b6=bS.data,bO=bS.options,bK=bO.dataLabels,bN=bS.dataLabelsGroup,bX=bS.chart,b1=bX.renderer,b4=bX.options.chart,b5=bK.style,Z=parseInt(b5.lineHeight,10),bQ=b1.smartLabel,bR=3,bU=b4.valuePadding+bR,bP=b4.rotateValues,L=bX.plotHeight,bY,bM,bJ,bL,b0,bW,bT,bZ,b3,bV,A,M,b2;bQ.setStyle(bK.style);if(!bN){bN=bS.dataLabelsGroup=b1.g(\"data-labels\").attr({visibility:bS.visible?ah:ad,zIndex:6}).translate(bX.plotLeft,bX.plotTop).add();if(bX.options.chart.hasScroll){bN.clip(bS.clipRect)}}else{bN.translate(bX.plotLeft,bX.plotTop)}G(b6,function(b7,b8){if(b7.config.isDefined){bT=bL=b7.plotX;bZ=bJ=b7.plotY;b3=F(b7.config.align,n);bV=F(b7.config.vAlign,k);bM=b7.marker.radius;if((bW=bK.formatter.call(b7.getLabelConfig()))===K){return}M=bQ.getOriSize(bW,undefined,undefined,false);b0=M.text;if(bP){bY=true;if(bV==k){bZ-=bU;bT+=Z*0.31;b3=a4;bY=bZ<M.width}else{if(bV==aB){bZ+=bU;bT+=Z*0.31;b3=y;bY=bZ+M.width>L}}if(bY){bT=bL-(bM/2+bR);bZ=bJ;b3=\"center\"}}else{if(bV==k){bZ-=bU;if(Z>=bZ){bZ=bJ+bU+(Z*0.74)}}else{if(bV==aB){bZ+=+bU+(Z*0.74);if(L<=bZ+bR){bZ=bJ-bU}}else{if(M.width>bT){b3=\"center\";bZ-=bU}else{bT-=bM/2+bR;bZ+=Z*0.37}}}}b2=(bP==1)?270:undefined;A=b7.dataLabel;if(A){A.attr({text:b0}).animate({x:bT,y:bZ})}else{if(Y(b0)){A=b7.dataLabel=b1.text(b0,bT,bZ).attr({align:b3,rotation:b2,zIndex:1}).css(bK.style).add(bN)}}}})}}});aA[o?\"VMLRenderer\":\"SVGRenderer\"].prototype.html=(function(){var bJ=Array.prototype.unshift,bK={cursor:\"cursor\"},A={x:\"left\",y:\"top\",strokeWidth:\"borderThickness\",\"stroke-width\":\"borderThickness\",width:\"width\",height:\"height\"},L={fill:\"backgroundColor\",stroke:\"borderColor\",color:\"color\"},M={left:0,top:0,padding:0,border:B,margin:0,outline:B,\"-webkit-apperance\":B,position:ak,zIndex:20},Z=function(bN,bO,bL){var bP=this,bM;if(bO&&bO instanceof Z){bO=bO.element}bM=bP.element=a9(bN,bL,M,bO);bP.jqe=jQuery(bM);Q(bM,\"isOverlay\",true);bP.nodeName=bN.toLowerCase();bP.added=Boolean(bO)};a7(Z.prototype,{attr:function(bO){var bM=this,bP=bM.element,bN=bM.jqe,bQ={},bT,bS,bR,bL;if(typeof bO!==\"object\"){return bM[bO]||Q(bP,bO)}for(bT in bO){bS=bO[bT];if(bK[bT]){switch(bT){case\"cursor\":if(bS===\"pointer\"&&o){bS=\"hand\"}break}bP.style[bK[bT]]=bS;bR=true}else{if(A[bT]){bP.style[A[bT]]=bS+S;bR=true}else{if(L[bT]){bP.style[L[bT]]=a3(bS);bR=true}else{if(/^visibility$/i.test(bT)){bL=(bS===\"hidden\");bN[bL?\"hide\":\"show\"]();bM.hidden=bL;bR=true}else{if(/^opacity$/i.test(bT)){bF(bP,{opacity:bS});bR=true}else{if(/^innerhtml$/i.test(bT)){bN.html(bS||K);bR=true}else{if(/^text$/i.test(bT)){bN.text(bS||K);bR=true}else{if(/^type$/i.test(bT)&&r&&bM.added){bR=true}}}}}}}}if(bR){bQ[bT]=bS;delete bO[bT];bR=false}}Q(bP,bO);for(bT in bQ){bM[bT]=bO[bT]=bQ[bT];delete bQ[bT]}return this},val:function(bO){var bN=this,bM=bN.jqe,bL=(bO===undefined);if(bN.nodeName===\"input\"&&bM.attr(\"type\")===\"checkbox\"){return bL?(bN.checked()?1:0):bN.checked(bO)}return bL?bM.val():(bM.val(bO),bN)},checked:function(bN){var bM=this,bL=this.jqe;return(bN===undefined)?bM.element.checked:((bN?bL.attr(\"checked\",\"checked\"):bL.removeAttr(\"checked\")),bM)},css:function(){var bM=this,bL=bM.element;bJ.call(arguments,bL);bF.apply(window,arguments);return bM},translate:function(bL,bO){var bN=this,bM=bN.element;if(bL!==undefined){bM.style.left=bL+S}if(bO!==undefined){bM.style.top=bO+S}return bN},add:function(bO,bL){var bP=this,bM=this.element,bN=bO.element;if(bL){bN.insertBefore(bM,bN.firstChild)}else{bN.appendChild(bM)}bP.added=true;return bP},hide:function(){return this.jqe.hide()},show:function(){return this.jqe.show()},destroy:function(){var bM=this,bL=bM.element||{};bL.onclick=bL.onmouseout=bL.onmouseover=bL.onmousemove=bL.onblur=bL.onfocus=null;bL=bx(bL);delete bM.element;delete bM.jqe;return null},on:aA[o?\"VMLElement\":\"SVGElement\"].prototype.on,bind:function(){var bM=this,bL=this.jqe;bL.bind.apply(bL,arguments);return bM}});return function(bN,bL,bM,bP){var bO={},bR,bQ;if(bL&&(\"type\"in bL)){bO.type=bL.type;delete bL.type}bR=new Z(bN,bP,bO).css(bM).attr(bL);for(bQ in bO){bL[bQ]=bO[bQ]}return bR}}())},[3,2,1,\"release\"]]);","js/thirdparty/fusioncharts/FusionCharts_HC.js":"\n(function(){var global=FusionCharts([\"private\",\"modules.renderer.highcharts-lib\"]);if(global===undefined){return}var win=window,BLANKSTRINGPLACEHOLDER=\"#BLANK#\",BLANK=\"\",COLOR_BLACK=\"000000\",COLOR_GLASS=\"rgba(255, 255, 255, 0.3)\",COLOR_WHITE=\"FFFFFF\",COLOR_TRANSPARENT=\"rgba(0,0,0,0)\",LINEHEIGHT=\"line-height\",TESTSTR=\"Ag\",HASHSTRING=\"#\",BREAKSTRING=\"<br />\",STRINGSTRING=\"string\",OBJECTSTRING=\"object\",COMMASTRING=\",\",ZEROSTRING=\"0\",ONESTRING=\"1\",DECIMALSTRING=\".\",STRINGUNDEFINED=\"undefined\",POSITION_TOP=\"top\",POSITION_RIGHT=\"right\",POSITION_BOTTOM=\"bottom\",POSITION_LEFT=\"left\",POSITION_CENTER=\"center\",POSITION_MIDDLE=\"middle\",FC_CONFIG_STRING=\"_FCconf\",SHAPE_RECT=\"rect\",HUNDREDSTRING=\"100\",BGRATIOSTRING=\"0,100\",PXSTRING=\"px\",COMMASPACE=\", \",hasSVG=!!document.createElementNS&&!!document.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\").createSVGRect,isIE=/msie/i.test(navigator.userAgent)&&!window.opera,stripWhitespace=/\\s+/g,dropHash=/^#?/,startsRGBA=/^rgba/i,cleanColorCode=/[#\\s]/ig,breakPlaceholder=/\\{br\\}/ig,hexcode=/^#?[0-9a-f]{6}/i,validhexcolor=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,mathAbs=Math.abs,mathPow=Math.pow,objectToStrFn=Object.prototype.toString,getValidValue=function(arg,value){return!arg&&arg!==false&&arg!==0?value:arg},getDefinedColor=function(color,defColor){return(!color&&color!=0&&color!=false)?defColor:color},getFirstValue=function(){var arg,i,l;for(i=0,l=arguments.length;i<l;i+=1){arg=arguments[i];if(!arg&&arg!==false&&arg!==0){continue}return arg}return BLANK},pluck=function(){var arg,i,l;for(i=0,l=arguments.length;i<l;i+=1){arg=arguments[i];if(!arg&&arg!==false&&arg!==0){continue}return arg}return undefined},getFirstDefinedValue=function(){var arg,i,l;for(i=0,l=arguments.length;i<l;i+=1){arg=arguments[i];if(!arg&&arg!==false&&arg!==0&&arg!=BLANK){continue}return arg}return undefined},pluckNumber=function(){var arg,i,l;for(i=0,l=arguments.length;i<l;i+=1){arg=arguments[i];if(!arg&&arg!==false&&arg!==0){continue}else{if(isNaN(arg=Number(arg))){continue}}return arg}return undefined},pluckFontSize=function(){var arg,i,l;for(i=0,l=arguments.length;i<l;i+=1){arg=arguments[i];if(!arg&&arg!==false&&arg!==0){continue}else{if(isNaN(arg=Number(arg))){continue}}return arg<1?1:arg}return 1},parsePointValue=function(value,abs){value=!value&&value!==false&&value!==0?NaN:Number(value);return isNaN(value)?null:(abs?mathAbs(value):value)},parseUnsafeString=function(str){if(typeof str===STRINGSTRING){return str.replace(breakPlaceholder,BREAKSTRING)}else{return BLANK}},getFirstColor=function(color){color=color.split(COMMASTRING)[0];color=color.replace(stripWhitespace,BLANK);if(color==BLANK){color=COLOR_BLACK}return color.replace(dropHash,HASHSTRING)},getColorCodeString=function(color,fillString){var returnString=\"\",colorEntry,len,i=0,fillArray=fillString.split(COMMASTRING);for(len=fillArray.length;i<len;i+=1){colorEntry=fillArray[i].split(\"-\");if(colorEntry.length===2){if(colorEntry[0].indexOf(\"dark\")!==\"-1\"){returnString+=(getLightColor(color,100-parseInt(colorEntry[1],10))+COMMASTRING)}else{returnString+=(getDarkColor(color,100-parseInt(colorEntry[1],10))+COMMASTRING)}}else{returnString+=(fillArray[i]+COMMASTRING)}}return returnString.substring(0,returnString.length-1)},pluckColor=function(color){if(!getValidValue(color)){return undefined}color=color.split(COMMASTRING)[0];color=color.replace(stripWhitespace,BLANK);if(color==BLANK){color=COLOR_BLACK}return color.replace(dropHash,HASHSTRING)},getFirstAlpha=function(alpha){alpha=parseInt(alpha,10);if(isNaN(alpha)||alpha>100||alpha<0){alpha=100}return alpha},arrayToStr=\"[object Array]\",objectToStr=\"[object Object]\",merge=function(obj1,obj2,skipUndef){var item,str;if(obj2 instanceof Array){for(item=0;item<obj2.length;item+=1){if(typeof obj2[item]!==OBJECTSTRING){if(!(skipUndef&&obj2[item]===undefined)){obj1[item]=obj2[item]}}else{if(obj1[item]===null||typeof obj1[item]!==OBJECTSTRING){obj1[item]=obj2[item]instanceof Array?[]:{}}merge(obj1[item],obj2[item],skipUndef)}}}else{for(item in obj2){if(obj2[item]!==null&&typeof obj2[item]===OBJECTSTRING){str=objectToStrFn.call(obj2[item]);if(str===objectToStr){if(obj1[item]===null||typeof obj1[item]!==OBJECTSTRING){obj1[item]={}}merge(obj1[item],obj2[item],skipUndef)}else{if(str===arrayToStr){if(obj1[item]===null||!(obj1[item]instanceof Array)){obj1[item]=[]}merge(obj1[item],obj2[item],skipUndef)}else{obj1[item]=obj2[item]}}}else{obj1[item]=obj2[item]}}}return obj1},extend2=function(obj1,obj2,skipUndef){if(typeof obj1!==OBJECTSTRING&&typeof obj2!==OBJECTSTRING){return null}if(typeof obj2!==OBJECTSTRING){obj2=obj1;obj1=undefined}if(typeof obj1!==OBJECTSTRING){obj1=obj2 instanceof Array?[]:{}}merge(obj1,obj2,skipUndef);return obj1},clean=function(obj1,obj2){var item,str;if(obj2 instanceof Array){for(item=obj2.length-1;item>=0;item-=1){if(typeof obj2[item]!==OBJECTSTRING){if(obj2[item]===true&&obj1&&obj1.splice){obj1.splice(item,1)}}else{if(objectToStrFn.call(obj2[item])===objectToStrFn.call(obj1[item])){clean(obj1[item],obj2[item])}}}}else{for(item in obj2){if(typeof obj2[item]!==OBJECTSTRING){if(obj2[item]===true&&obj1&&obj1.splice){obj1.splice(item,1)}}else{if(objectToStrFn.call(obj2[item])===objectToStrFn.call(obj1[item])){clean(obj1[item],obj2[item])}}}}return obj1},deltend=function(obj1,obj2){if(typeof obj1!==OBJECTSTRING||typeof obj2!==OBJECTSTRING){return null}clean(obj1,obj2);return obj1},imprint=function(obj1,obj2,ignoreNull){var item;if(typeof obj1!==OBJECTSTRING||obj1===null){obj1=obj2;return obj2}if(typeof obj2!==OBJECTSTRING||obj2===null){return obj1}for(item in obj2){if(obj1[item]===undefined||(!ignoreNull&&obj1[item]===null)){obj1[item]=obj2[item]}}return obj1},getLinkedChartDataJSON=function(linkedDataId,FCDataObj){var linkedDataJSON={chart:{}},index;FcJSON=FCDataObj;linkedDataId=linkedDataId.toLowerCase();if(FcJSON.linkeddata){for(index=0;index<FcJSON.linkeddata.length;index+=1){if(FcJSON.linkeddata[index].id.toLowerCase()===linkedDataId){linkedDataJSON=FcJSON.linkeddata[index].linkedchart||FcJSON.linkeddata[index].linkedmap}}}return linkedDataJSON},limitedEvalParser=function(){var DOT=\".\",windowPropIdentifier=/^@window_/g,FUNCTION=\"function\";return function(pattern,args){pattern=pattern.replace(/\\[[\\'\\\"]/g,DOT).replace(/[\\'\\\"]\\]/g,BLANK).replace(/\\[/g,\".@window_\").replace(/\\]/g,BLANK);var tokens=pattern.split(DOT),obj=win,lastObj,windowProp,tokenEx=BLANK,token,l,i;l=tokens.length;for(i=0;i<l;i+=1){token=tokens[i];lastObj=obj;if(token.match(windowPropIdentifier)){windowProp=win[token.replace(windowPropIdentifier,BLANK)];obj=obj[windowProp]}else{if(obj===undefined||obj===null){throw(tokenEx||token).replace(windowPropIdentifier,BLANK)+\" is not defined\"}else{obj=obj[token]}}tokenEx=token}if(typeof obj===FUNCTION){obj.call(lastObj,args)}else{throw token.replace(windowPropIdentifier,BLANK)+\"() is not a function\"}}}(),getLinkAction=function(FCDataObj,senderChartObj){return function(){var dashPos,frameDetails,commaPos,linkURL,delimiter,linkType,linkedDataId,linkedData,alias,firstBreak,WINDOW=window,pointLink=getFirstValue(this.link,BLANK),pointChartLink=(this.series&&this.series.chart&&this.series.chart.options&&this.series.chart.options.chart&&this.series.chart.options.chart.link)||BLANK,chartLink=(this.options&&this.options.chart&&this.options.chart.link)||BLANK,strLink=pluck(pointLink,chartLink,pointChartLink),originalLink=strLink;if(strLink!==undefined){strLink=WINDOW.decodeURIComponent(strLink).replace(/^\\s+/,BLANK).replace(/\\s+$/,BLANK);if(strLink.search(/^[a-z]*\\s*[\\-\\:]\\s*/i)!==-1){delimiter=strLink.split(/\\s*[\\-\\:]\\s*/)[0].toUpperCase();firstBreak=delimiter.length}switch(delimiter){case\"J\":strLink=strLink.replace(/^j\\s*\\-/i,\"j-\");dashPos=strLink.indexOf(\"-\",2);if(dashPos===-1){limitedEvalParser(strLink.slice(2))}else{limitedEvalParser(strLink.substr(2,dashPos-2).replace(/\\s/g,BLANK),strLink.slice(dashPos+1))}break;case\"JAVASCRIPT\":strLink=strLink.replace(/^JAVASCRIPT\\s*\\:/i,\"javascript:\");try{eval(strLink.slice(11))}catch(err){}break;case\"N\":strLink.replace(/^n\\s*\\-/i,\"n-\");WINDOW.open(strLink.slice(2));break;case\"F\":strLink=strLink.replace(/^f\\s*\\-/i,\"f-\");dashPos=strLink.indexOf(\"-\",2);if(dashPos!==-1){frameDetails=strLink.substr(2,dashPos-2);if(frameDetails&&WINDOW.frames[frameDetails]){WINDOW.frames[frameDetails].location=strLink.slice(dashPos+1)}else{WINDOW.open(strLink.slice(dashPos+1),frameDetails)}}else{WINDOW.open(strLink.slice(2))}break;case\"P\":strLink=strLink.replace(/p\\s*\\-/i,\"p-\");dashPos=strLink.indexOf(\"-\",2);commaPos=strLink.indexOf(COMMASTRING,2);if(dashPos===-1){dashPos=1}linkURL=strLink.slice(dashPos+1);WINDOW.open(linkURL,strLink.substr(2,commaPos-2),strLink.substr(commaPos+1,dashPos-commaPos-1)).focus();break;case\"NEWCHART\":case\"NEWMAP\":if(strLink.charAt(firstBreak)===\":\"){dashPos=strLink.indexOf(\"-\",firstBreak+1);alias=strLink.substring(firstBreak+1,dashPos);firstBreak=dashPos}dashPos=strLink.indexOf(\"-\",firstBreak+1);linkType=strLink.substring(firstBreak+1,dashPos).toUpperCase();if(linkType==\"XMLURL\"){linkedData=strLink.substring(dashPos+1,strLink.length)}else{if(linkType==\"JSONURL\"){linkedData=strLink.substring(dashPos+1,strLink.length)}else{if(linkType==\"XML\"||linkType==\"JSON\"){linkedDataId=strLink.substring(dashPos+1,strLink.length);linkedData=getLinkedChartDataJSON(linkedDataId,FCDataObj);linkType=\"JSON\"}}}global.raiseEvent(\"LinkedChartInvoked\",{alias:alias,linkType:linkType,data:linkedData},senderChartObj);break;default:WINDOW.location.href=strLink;break}global.raiseEvent(\"linkclicked\",{linkProvided:originalLink,linkInvoked:strLink,linkAction:delimiter&&delimiter.toLowerCase()},senderChartObj)}}},getAlpha=function(alpha,multiplyer){alpha=Number(alpha);alpha=isNaN(alpha)?100:alpha;if(multiplyer!==undefined){alpha=alpha*multiplyer/100}return alpha%101},parseAlpha=function(alpha,length,multiplyer){var alphaArr=alpha.split(COMMASTRING),x;if(multiplyer!==undefined){multiplyer=pluckNumber(multiplyer.split(COMMASTRING)[0])}alphaArr[0]=getAlpha(alphaArr[0],multiplyer);for(x=1;x<length;x+=1){alphaArr[x]=alphaArr[0]*getAlpha(alphaArr[x],multiplyer)/100}return alphaArr.join(COMMASTRING)},convertColor=function(color,alpha,rgba){var R=0,G=0,B=0,colorStr,tempArr;if(rgba&&rgba.match(startsRGBA)){tempArr=rgba.split(COMMASTRING);R=tempArr[0].slice(tempArr[0].indexOf(\"(\")+1);G=tempArr[1];B=tempArr[2];if(!alpha&&alpha!==0){alpha=parseInt((tempArr[3].slice(0,tempArr[3].indexOf(\")\"))*100),10)}}if(color){if(color.match(startsRGBA)){tempArr=color.split(COMMASTRING);R=tempArr[0].slice(tempArr[0].indexOf(\"(\")+1);G=tempArr[1];B=tempArr[2]}else{colorStr=color.replace(cleanColorCode,BLANK).split(COMMASTRING)[0];switch(colorStr.length){case 3:colorStr=colorStr[0]+colorStr[0]+colorStr[1]+colorStr[1]+colorStr[2]+colorStr[2];break;case 6:break;default:colorStr=(colorStr+COLOR_WHITE).slice(0,6);break}R=parseInt(colorStr.slice(0,2),16);G=parseInt(colorStr.slice(2,4),16);B=parseInt(colorStr.slice(4,6),16)}}if(!alpha&&alpha!=0){alpha=100}if(typeof alpha===STRINGSTRING){alpha=alpha.split(COMMASTRING)[0]}alpha=parseInt(alpha,10)/100;return\"rgba(\"+R+COMMASTRING+G+COMMASTRING+B+COMMASTRING+alpha+\")\"},parseColor=function(color){return color.replace(cleanColorCode,BLANK).replace(dropHash,HASHSTRING)},getValidColor=function(color){return validhexcolor.test(parseColor(color))&&color},getColorOffset=function(arrColorRGB,offsetPercent,isLighter){var R,G,B;offsetPercent=offsetPercent<0||offsetPercent>100?100:offsetPercent;offsetPercent=offsetPercent/100;if(isLighter){R=Math.round(arrColorRGB[0]+((255-arrColorRGB[0])*offsetPercent));G=Math.round(arrColorRGB[1]+((255-arrColorRGB[1])*offsetPercent));B=Math.round(arrColorRGB[2]+((255-arrColorRGB[2])*offsetPercent))}else{R=Math.round(arrColorRGB[0]-(arrColorRGB[0]*offsetPercent));G=Math.round(arrColorRGB[1]-(arrColorRGB[1]*offsetPercent));B=Math.round(arrColorRGB[2]-(arrColorRGB[2]*offsetPercent))}return[R,G,B]},getDarkColor=function(color,offsetPercent){offsetPercent=offsetPercent<0||offsetPercent>100?100:offsetPercent;offsetPercent=offsetPercent/100;color=color.replace(cleanColorCode,BLANK);var sourceclrRGB=parseInt(color,16),R=Math.floor(sourceclrRGB/65536),G=Math.floor((sourceclrRGB-R*65536)/256),B=sourceclrRGB-R*65536-G*256;return(COLOR_BLACK+((R*offsetPercent)<<16|(G*offsetPercent)<<8|(B*offsetPercent)).toString(16)).slice(-6)},getLightColor=function(color,offsetPercent){offsetPercent=offsetPercent<0||offsetPercent>100?100:offsetPercent;offsetPercent=offsetPercent/100;color=color.replace(cleanColorCode,BLANK);var sourceclrRGB=parseInt(color,16),R=Math.floor(sourceclrRGB/65536),G=Math.floor((sourceclrRGB-R*65536)/256),B=sourceclrRGB-R*65536-G*256;return(COLOR_BLACK+((256-((256-R)*offsetPercent))<<16|(256-((256-G)*offsetPercent))<<8|(256-((256-B)*offsetPercent))).toString(16)).slice(-6)},HSBtoRGB=function(hsb){var h=hsb[0],s=hsb[1],v=hsb[2],r=0,g=0,b=0,rgb=[],tempS=s/100,tempV=v/100,hi=Math.floor(h/60)%6,f=h/60-Math.floor(h/60),p=(tempV*(1-tempS)),q=(tempV*(1-f*tempS)),t=(tempV*(1-(1-f)*tempS));switch(hi){case 0:r=tempV;g=t;b=p;break;case 1:r=q;g=tempV;b=p;break;case 2:r=p;g=tempV;b=t;break;case 3:r=p;g=q;b=tempV;break;case 4:r=t;g=p;b=tempV;break;case 5:r=tempV;g=p;b=q;break}rgb=[Math.round(r*255),Math.round(g*255),Math.round(b*255)];return rgb},RGBtoHSB=function(rgb){var r=rgb[0],g=rgb[1],b=rgb[2],max=Math.max(Math.max(r,g),b),min=Math.min(Math.min(r,g),b),hue=0,saturation=0,value=0;if(max==min){hue=0}else{if(max==r){hue=(60*(g-b)/(max-min)+360)%360}else{if(max==g){hue=(60*(b-r)/(max-min)+120)}else{if(max==b){hue=(60*(r-g)/(max-min)+240)}}}}if(max==0){saturation=0}else{saturation=(max-min)/max}return[Math.round(hue),Math.round(saturation*100),Math.round(max/255*100)]},RGBtoHex=function(rgb){return(COLOR_BLACK+(rgb[0]<<16|rgb[1]<<8|rgb[2]).toString(16)).slice(-6)},HEXtoRGB=function(sourceColor){var sourceClrRGB=parseInt(sourceColor,16),r=Math.floor(sourceClrRGB/65536),g=Math.floor((sourceClrRGB-r*65536)/256),b=Math.floor((sourceClrRGB-r*65536)-(g*256));return[r,g,b]},symbolStr={circle:\"circle\",triangle:\"triangle\",square:\"square\",diamond:\"diamond\",poly:\"poly_\",spoke:\"spoke_\"},mapSymbolName=function(num,isSpoke){var x=symbolStr.circle;num=parsePointValue(num);if(num>=3){x=(isSpoke?symbolStr.spoke:symbolStr.poly)+num}return x},getAngle=function(width,height,type){var angle=Math.atan(height/width)*180/Math.PI;if(type==2){angle=180-angle}else{if(type==3){angle+=180}else{if(type==4){angle=360-angle}}}return angle},getColumnColor=function(setColor,setAlpha,ratio,angle,isRoundEdges,bdColor,bdAlpha,isBar,is3d){var bgColor,borderColor,colorArr,alphaArr,bdColorArr,color,alpha,bdAlphaArr;colorArr=setColor.split(COMMASTRING);alphaArr=setAlpha.split(COMMASTRING);bdColorArr=bdColor.split(COMMASTRING);bdAlphaArr=bdAlpha.split(COMMASTRING);if(is3d){bgColor={FCcolor:{color:colorArr[0],alpha:alphaArr[0]}}}else{if(isRoundEdges){color=colorArr[0];alpha=alphaArr[0];bgColor={FCcolor:{color:getDarkColor(color,75)+COMMASTRING+getLightColor(color,25)+COMMASTRING+getDarkColor(color,80)+COMMASTRING+getLightColor(color,65)+COMMASTRING+getDarkColor(color,80),alpha:alpha+COMMASTRING+alpha+COMMASTRING+alpha+COMMASTRING+alpha+COMMASTRING+alpha,ratio:\"0,10,13,57,20\",angle:isBar?\"-180\":\"0\"}};bdColorArr=[getDarkColor(color,70)]}else{setAlpha=parseAlpha(setAlpha,colorArr.length);bgColor={FCcolor:{color:setColor,alpha:setAlpha,ratio:ratio,angle:isBar?180-angle:angle}}}}borderColor={FCcolor:{color:bdColorArr[0],alpha:bdAlphaArr[0]}};return[bgColor,borderColor]},setLineHeight,toPrecision=function(obj,value){var tenPow=mathPow(10,value);var value=obj*tenPow;if(value>=9223372036854776000||value<=-9223372036854776000){return obj}var ret=Math.round(obj*tenPow)/tenPow;return ret},SmartLabelManager=(function(){var supportedStyle={font:\"font\",fontFamily:\"font-family\",\"font-family\":\"font-family\",fontWeight:\"font-weight\",\"font-weight\":\"font-weight\",fontSize:\"font-size\",\"font-size\":\"font-size\",lineHeight:\"line-height\",\"line-height\":\"line-height\",textDecoration:\"text-decoration\",\"text-decoration\":\"text-decoration\",color:\"color\",whiteSpace:\"white-space\",\"white-space\":\"white-space\",padding:\"padding\",margin:\"margin\",background:\"background\",backgroundColor:\"background-color\",\"background-color\":\"background-color\",backgroundImage:\"background-image\",\"background-image\":\"background-image\",backgroundPosition:\"background-position\",\"background-position\":\"background-position\",backgroundPositionLeft:\"background-position-left\",\"background-position-left\":\"background-position-left\",backgroundPositionTop:\"background-position-top\",\"background-position-top\":\"background-position-top\",backgroundRepeat:\"background-repeat\",\"background-repeat\":\"background-repeat\",border:\"border\",borderColor:\"border-color\",\"border-color\":\"border-color\",borderStyle:\"border-style\",\"border-style\":\"border-style\",borderThickness:\"border-thickness\",\"border-thickness\":\"border-thickness\",borderTop:\"border-top\",\"border-top\":\"border-top\",borderTopColor:\"border-top-color\",\"border-top-color\":\"border-top-color\",borderTopStyle:\"border-top-style\",\"border-top-style\":\"border-top-style\",borderTopThickness:\"border-top-thickness\",\"border-top-thickness\":\"border-top-thickness\",borderRight:\"border-right\",\"border-right\":\"border-right\",borderRightColor:\"border-right-color\",\"border-right-color\":\"border-right-color\",borderRightStyle:\"border-right-style\",\"border-right-style\":\"border-right-style\",borderRightThickness:\"border-right-thickness\",\"border-right-thickness\":\"border-right-thickness\",borderBottom:\"border-bottom\",\"border-bottom\":\"border-bottom\",borderBottomColor:\"border-bottom-color\",\"border-bottom-color\":\"border-bottom-color\",borderBottomStyle:\"border-bottom-style\",\"border-bottom-style\":\"border-bottom-style\",borderBottomThickness:\"border-bottom-thickness\",\"border-bottom-thickness\":\"border-bottom-thickness\",borderLeft:\"border-left\",\"border-left\":\"border-left\",borderLeftColor:\"border-left-color\",\"border-left-color\":\"border-left-color\",borderLeftStyle:\"border-left-style\",\"border-left-Style\":\"border-left-style\",borderLeftThickness:\"border-left-thickness\",\"border-left-thickness\":\"border-left-thickness\"};setLineHeight=(function(){var container=document.createElement(\"span\"),getLineHeight,donotUseStyle={lineHeight:true,\"line-height\":true},calculateLH=function(){var fontSize=pluckNumber(parseInt(container.style.fontSize,10),10);return(fontSize*1.4)+\"px\"};container.innerHTML=\"fy\";if(window.getComputedStyle){getLineHeight=function(){var styleNode=window.getComputedStyle(container,null);if(styleNode&&styleNode.getPropertyValue(LINEHEIGHT)){return styleNode.getPropertyValue(LINEHEIGHT)}else{return calculateLH.apply(this,arguments)}}}else{if(container.currentStyle){getLineHeight=function(){return container.currentStyle.lineHeight}}else{getLineHeight=calculateLH}}return function(styleObj){var key,styleStr=\"\";for(key in styleObj){if(!donotUseStyle[key]&&supportedStyle[key]){styleStr+=supportedStyle[key]+\" : \"+styleObj[key]+\";\"}}if(isIE&&!hasSVG){container.style.setAttribute(\"cssText\",styleStr)}else{container.setAttribute(\"style\",styleStr)}var lineHeight=getLineHeight();if(!parseFloat(lineHeight)){lineHeight=calculateLH()}styleObj.lineHeight=lineHeight;return lineHeight}}());var fixedStyle={position:\"absolute\",top:\"-9999em\",whiteSpace:\"nowrap\"},ellipsesWidth=0,className=\"_SmartLabel\",className2=\"_SmartLabelBR\",classNameReg=/\\b_SmartLabel\\b/,classNameBrReg=/\\b_SmartLabelBR\\b/,spanAdditionRegx=/(\\<[^\\<\\>]+?\\>)|(&(?:[a-z]+|#[0-9]+);|.)/ig,spanAdditionReplacer='$1<span class=\"'+className+'\">$2<\/span>',spanRemovalRegx=new RegExp(\"<span[^>]+?\"+className+\"[^>]+?>(.*?)<\/span>\",\"ig\"),xmlTagRegEx=new RegExp(\"<[^>][^<]*[^>]+>\",\"i\"),testStrAvg=\"WgI\",lineHeight=0,minWidth=0,avgCharWidth=0,dotWidth=0,containerIdIncriment=0,spanTagString=\"span\",ChildRetriverFN,ChildRetriverSTRING,noClassTesting;if(typeof domutils!=\"undefined\"&&domutils.isIOS()){if(navigator.userAgent.toLowerCase().indexOf(\"cpu os 5\")>=0){delete fixedStyle.top}}if(document.getElementsByClassName){ChildRetriverFN=\"getElementsByClassName\";ChildRetriverSTRING=className;noClassTesting=true}else{ChildRetriverFN=\"getElementsByTagName\";ChildRetriverSTRING=spanTagString;noClassTesting=false}function createContainer(containerParent){var body,container;if(containerParent&&containerParent.offsetWidth&&containerParent.offsetHeight){if(containerParent.appendChild){containerParent.appendChild(container=document.createElement(\"span\"));container.className=\"_SmartLabel_Container\";if(window.bof_offline_xhr){container.style.top=\"-9999em\"}return container}}else{body=document.getElementsByTagName(\"body\")[0];if(body&&body.appendChild){container=document.createElement(\"span\");container.className=\"_SmartLabel_Container\";containerIdIncriment+=1;body.appendChild(container);return container}}return undefined}function setContainerStyle(container,styleObj){var key;for(key in styleObj){container.style[key]=styleObj[key]}for(key in fixedStyle){container.style[key]=fixedStyle[key]}}function getNearestChar(text,maxWidth,container){container.innerHTML=text;var difference,charLen,increment,oriWidth=container.offsetWidth;difference=maxWidth;charLen=Math.ceil(maxWidth/avgCharWidth);if(oriWidth<maxWidth){return(text.length-1)}if(charLen>text.length){difference=maxWidth-oriWidth;charLen=text.length}while(difference>0){container.innerHTML=text.substr(0,charLen);difference=maxWidth-container.offsetWidth;increment=Math.floor(difference/avgCharWidth);if(increment){charLen+=increment}else{return charLen}}charLen+=increment;while(difference<0){container.innerHTML=text.substr(0,charLen);difference=maxWidth-container.offsetWidth;increment=Math.floor(difference/avgCharWidth);if(increment){charLen+=increment}else{return charLen}}return charLen}function SmartLabelManager(id,container,useEllipses){if(typeof id===\"undefined\"||typeof id===\"object\"){return}this.id=id;if(typeof container===\"string\"){container=document.getElementById(container)}this.parentContainer=container;this.container=createContainer(container,id);this.showNoEllipses=!useEllipses;this.init=true;this.style={}}SmartLabelManager.prototype={dispose:function(){var label=this,container=label.container,parentNode;if(!label.init){return}if(container&&(parentNode=container.parentNode)){parentNode.removeChild(container);delete label.container}delete label.id;delete label.style;delete label.parentContainer;delete label.showNoEllipses},useEllipsesOnOverflow:function(useEllipses){if(!this.init){return}this.showNoEllipses=!useEllipses},getSmartText:function(text,maxWidth,maxHeight,noWrap,containerParent){if(!this.init){return false}if(pluck(text)===undefined){text=\"\"}if(!this.container){this.container=createContainer(this.parentContainer);this.setStyle()}var smartLabel={text:text,maxWidth:maxWidth,maxHeight:maxHeight,width:null,height:null,oriTextWidth:null,oriTextHeight:null,oriText:text,isTruncated:false},hasHTMLTag=false,len,trimStr,tempArr,maxWidthWithEll,toolText,oriWidth,oriHeight,lastDash=-1,lastSpace=-1,lastIndexBroken=-1,newCharIndex,container=this.container,currStr,nearestChar,oriTextArr=[],ellipsesStr=this.showNoEllipses?\"\":\"...\";var fastTrim=function(str){str=str.replace(/^\\s\\s*/,\"\");var ws=/\\s/,i=str.length;while(ws.test(str.charAt(i-=1))){}return str.slice(0,i+1)};if(container){container.innerHTML=text;smartLabel.oriTextWidth=oriWidth=container.offsetWidth;smartLabel.oriTextHeight=oriHeight=container.offsetHeight;if(oriHeight<=maxHeight&&oriWidth<=maxWidth){smartLabel.width=smartLabel.oriTextWidth=oriWidth;smartLabel.height=smartLabel.oriTextHeight=oriHeight;return smartLabel}if(lineHeight>maxHeight){smartLabel.text=\"\";smartLabel.width=smartLabel.oriTextWidth=0;smartLabel.height=smartLabel.oriTextHeight=0;return smartLabel}text=fastTrim(text).replace(/(\\s+)/g,\" \");hasHTMLTag=xmlTagRegEx.test(text);i=0;maxWidthWithEll=this.showNoEllipses?maxWidth:(maxWidth-ellipsesWidth);if(!hasHTMLTag){oriTextArr=text.split(\"\");len=oriTextArr.length;trimStr=\"\",tempArr=[];container.innerHTML=oriTextArr[0];minWidth=container.offsetWidth;if(maxWidthWithEll>minWidth){tempArr=text.substr(0,getNearestChar(text,maxWidthWithEll,container)).split(\"\");i=tempArr.length-1}else{if(minWidth>maxWidth){smartLabel.text=\"\";smartLabel.width=smartLabel.oriTextWidth=smartLabel.height=smartLabel.oriTextHeight=0;return smartLabel}else{if(!this.showNoEllipses){maxWidthWithEll=maxWidth-(2*dotWidth);if(maxWidthWithEll>minWidth){ellipsesStr=\"..\"}else{maxWidthWithEll=maxWidth-dotWidth;if(maxWidthWithEll>minWidth){ellipsesStr=\".\"}else{maxWidthWithEll=0;ellipsesStr=\"\"}}}}}if(noWrap){for(;i<len;i+=1){tempArr[i]=oriTextArr[i];container.innerHTML=currStr=tempArr.join(\"\");if(container.offsetWidth>maxWidthWithEll){if(!trimStr){trimStr=currStr.substr(0,currStr.length-1)}if(container.offsetWidth>maxWidth){container.innerHTML=smartLabel.text='<span title=\"'+smartLabel.oriText+'\">'+fastTrim(trimStr)+ellipsesStr+\"<\/span>\";smartLabel.width=container.offsetWidth;smartLabel.height=container.offsetHeight;return smartLabel}}}smartLabel.text=container.innerHTML=currStr;smartLabel.width=container.offsetWidth;smartLabel.height=container.offsetHeight;return smartLabel}else{for(;i<len;i+=1){tempArr[i]=oriTextArr[i];container.innerHTML=currStr=tempArr.join(\"\");if(container.offsetWidth>maxWidthWithEll){if(!trimStr){trimStr=currStr.substr(0,currStr.length-1)}if(container.offsetWidth>maxWidth){lastSpace=text.substr(0,tempArr.length).lastIndexOf(\" \");lastDash=text.substr(0,tempArr.length).lastIndexOf(\"-\");if(lastSpace>lastIndexBroken){tempArr.splice(lastSpace,1,\"<br/>\");lastIndexBroken=lastSpace;newCharIndex=lastSpace+1}else{if(lastDash>lastIndexBroken){if(lastDash===tempArr.length-1){tempArr.splice(lastDash,1,\"<br/>-\")}else{tempArr.splice(lastDash,1,\"-<br/>\")}lastIndexBroken=lastDash;newCharIndex=lastDash+1}else{tempArr.splice((tempArr.length-1),1,\"<br/>\"+oriTextArr[i]);newCharIndex=i}}container.innerHTML=currStr=tempArr.join(\"\");if(container.offsetHeight>maxHeight){smartLabel.text=container.innerHTML=\"<span title='\"+smartLabel.oriText+\"'>\"+fastTrim(trimStr)+ellipsesStr+\"<\/span>\";smartLabel.width=container.offsetWidth;smartLabel.height=container.offsetHeight;return smartLabel}else{trimStr=null;nearestChar=getNearestChar(text.substr(newCharIndex),maxWidthWithEll,container);if(tempArr.length<newCharIndex+nearestChar){tempArr=tempArr.concat(text.substr(tempArr.length,newCharIndex+nearestChar-tempArr.length).split(\"\"));container.innerHTML=currStr=tempArr.join(\"\");i=tempArr.length-1}}}}}smartLabel.text=container.innerHTML=currStr;smartLabel.width=container.offsetWidth;smartLabel.height=container.offsetHeight;return smartLabel}}else{toolText=text.replace(spanAdditionRegx,\"$2\");text=text.replace(spanAdditionRegx,spanAdditionReplacer);text=text.replace(/(\\<br\\s*\\/*\\>)/g,\"<span class='\"+[className,\" \",className2].join(\"\")+\"'>$1<\/span>\");container.innerHTML=text;var spanArr=container[ChildRetriverFN](ChildRetriverSTRING),x,y,elem,chr,elemRightMostPoint,elemLowestPoint,lastBR,removeFromIndex,removeFromIndexForEllipses,characterArr=[],dashIndex=-1,spaceIndex=-1,elem,chr;for(x=0,y=spanArr.length;x<y;x+=1){elem=spanArr[x];if(noClassTesting||classNameReg.test(elem.className)){chr=elem.innerHTML;if(chr!=\"\"){if(chr==\" \"){spaceIndex=characterArr.length}else{if(chr==\"-\"){dashIndex=characterArr.length}}characterArr.push({spaceIdx:spaceIndex,dashIdx:dashIndex,elem:elem});oriTextArr.push(chr)}}}delete spanArr;i=0;len=characterArr.length;minWidth=characterArr[0].elem.offsetWidth;if(minWidth>maxWidth){smartLabel.text=\"\";smartLabel.width=smartLabel.oriTextWidth=smartLabel.height=smartLabel.oriTextHeight=0;return smartLabel}else{if(minWidth>maxWidthWithEll&&!this.showNoEllipses){maxWidthWithEll=maxWidth-(2*dotWidth);if(maxWidthWithEll>minWidth){ellipsesStr=\"..\"}else{maxWidthWithEll=maxWidth-dotWidth;if(maxWidthWithEll>minWidth){ellipsesStr=\".\"}else{maxWidthWithEll=0;ellipsesStr=\"\"}}}}if(noWrap){for(;i<len;i+=1){elem=characterArr[i].elem;elemRightMostPoint=elem.offsetLeft+elem.offsetWidth;if(elemRightMostPoint>maxWidthWithEll){if(!removeFromIndexForEllipses){removeFromIndexForEllipses=i}if(container.offsetWidth>maxWidth){removeFromIndex=i;i=len}}}}else{for(;i<len;i+=1){elem=characterArr[i].elem;elemLowestPoint=elem.offsetHeight+elem.offsetTop;elemRightMostPoint=elem.offsetLeft+elem.offsetWidth;lastBR=null;if(elemRightMostPoint>maxWidthWithEll){if(!removeFromIndexForEllipses){removeFromIndexForEllipses=i}if(elemRightMostPoint>maxWidth){lastSpace=characterArr[i].spaceIdx;lastDash=characterArr[i].dashIdx;if(lastSpace>lastIndexBroken){characterArr[lastSpace].elem.innerHTML=\"<br/>\";lastIndexBroken=lastSpace}else{if(lastDash>lastIndexBroken){if(lastDash===i){characterArr[lastDash].elem.innerHTML=\"<br/>-\"}else{characterArr[lastDash].elem.innerHTML=\"-<br/>\"}lastIndexBroken=lastDash}else{elem.parentNode.insertBefore(lastBR=document.createElement(\"br\"),elem)}}if((elem.offsetHeight+elem.offsetTop)>maxHeight){if(lastBR){lastBR.parentNode.removeChild(lastBR)}else{if(lastIndexBroken===lastDash){characterArr[lastDash].elem.innerHTML=\"-\"}else{characterArr[lastSpace].elem.innerHTML=\" \"}}removeFromIndex=i;i=len}else{removeFromIndexForEllipses=null}}}else{if(elemLowestPoint>maxHeight){removeFromIndex=i;i=len}}}}if(removeFromIndex<len){smartLabel.isTruncated=true;removeFromIndexForEllipses=removeFromIndexForEllipses?removeFromIndexForEllipses:removeFromIndex;for(i=len-1;i>=removeFromIndexForEllipses;i-=1){elem=characterArr[i].elem;elem.parentNode.removeChild(elem)}for(;i>=0;i-=1){elem=characterArr[i].elem;if(classNameBrReg.test(elem.className)){elem.parentNode.removeChild(elem)}else{i=0}}}smartLabel.text=container.innerHTML.replace(spanRemovalRegx,\"$1\");if(smartLabel.isTruncated){smartLabel.text+=ellipsesStr;smartLabel.text='<span title=\"'+toolText+'\">'+smartLabel.text+\"<\/span>\"}}smartLabel.height=container.offsetHeight;smartLabel.width=container.offsetWidth;return smartLabel}else{smartLabel.error=new Error(\"Body Tag Missing!\");return smartLabel}},setStyle:function(style){if(!this.init){return false}var key;if(style===this.style&&!this.styleNotSet){return}if(!style){style=this.style}else{if(this.style&&this.container){for(key in this.style){if(!style[key]){this.container.style[key]=\"\"}}}delete this.style;this.style=style}if(this.container){setContainerStyle(this.container,this.style);this.container.innerHTML=testStrAvg;avgCharWidth=Math.ceil((this.container.offsetWidth)/3);lineHeight=this.container.offsetHeight;this.container.innerHTML=\"...\";ellipsesWidth=this.container.offsetWidth;this.container.innerHTML=\".\";dotWidth=this.container.offsetWidth;this.styleNotSet=false}else{this.styleNotSet=true}},getTextSize:function(text,maxWidth,maxHeight,noWrap){if(!this.init){return false}if(!this.container){this.container=createContainer(this.parentContainer);this.setStyle()}var smartLabel={text:text,width:null,height:null,oriTextWidth:null,oriTextHeight:null,isTruncated:false},container=this.container;if(container){container.innerHTML=text;smartLabel.oriTextWidth=container.offsetWidth;smartLabel.oriTextHeight=container.offsetHeight;smartLabel.width=Math.min(smartLabel.oriTextWidth,maxWidth);smartLabel.height=Math.min(smartLabel.oriTextHeight,maxHeight);if(smartLabel.width<smartLabel.oriTextWidth||smartLabel.height<smartLabel.oriTextHeight){smartLabel.isTruncated=true}}return smartLabel},getOriSize:function(text){if(!this.init){return false}if(!this.container){this.container=createContainer(this.parentContainer);this.setStyle()}var smartLabel={text:text,width:null,height:null},container=this.container;if(container){container.innerHTML=text;smartLabel.width=container.offsetWidth;smartLabel.height=container.offsetHeight}return smartLabel}};SmartLabelManager.prototype.constructor=SmartLabelManager;return SmartLabelManager}()),setImageDisplayMode=function(bgImageDisplayMode,bgImageVAlign,bgImageHAlign,bgImageScale,chartBorderWidth,chartWidth,chartHeight,imageEle){var imageWidth=imageEle.width*(bgImageScale/100),imageHeight=imageEle.height*(bgImageScale/100),alignImage={},imgAspectRatio,cAspectRatio,scaleFactor,xCount,yCount,cWidth=chartWidth-(chartBorderWidth*2),cHeight=chartHeight-(chartBorderWidth*2),getImageAlignment=function(bgImageVAlign,bgImageHAlign,imageWidth,imageHeight,chartWidth,chartHeight){var alignObj={};switch(bgImageVAlign){case\"top\":alignObj.y=chartBorderWidth;break;case\"bottom\":alignObj.y=chartHeight-imageHeight-chartBorderWidth;break;case\"middle\":alignObj.y=(chartHeight-imageHeight)/2;break}switch(bgImageHAlign){case\"left\":alignObj.x=chartBorderWidth;break;case\"right\":alignObj.x=chartWidth-imageWidth-chartBorderWidth;break;case\"middle\":alignObj.x=(chartWidth-imageWidth)/2;break}return alignObj};switch(bgImageDisplayMode){case\"center\":alignImage.width=imageWidth;alignImage.height=imageHeight;alignImage.y=(chartHeight/2)-(imageHeight/2);alignImage.x=(chartWidth/2)-(imageWidth/2);break;case\"stretch\":alignImage.width=(chartWidth-chartBorderWidth*2);alignImage.height=(chartHeight-chartBorderWidth*2);alignImage.y=chartBorderWidth;alignImage.x=chartBorderWidth;break;case\"tile\":alignImage.width=imageWidth;alignImage.height=imageHeight;alignImage.tileInfo={};alignImage.tileInfo.xCount=xCount=Math.ceil(cWidth/imageWidth);alignImage.tileInfo.yCount=yCount=Math.ceil(cHeight/imageHeight);alignObj=getImageAlignment(bgImageVAlign,bgImageHAlign,imageWidth*xCount,imageHeight*yCount,chartWidth,chartHeight);alignImage.y=alignObj.y;alignImage.x=alignObj.x;break;case\"fit\":imgAspectRatio=imageWidth/imageHeight;cAspectRatio=cWidth/cHeight;scaleFactor=(imgAspectRatio>cAspectRatio)?cWidth/imageWidth:cHeight/imageHeight;alignImage.width=imageWidth*scaleFactor;alignImage.height=imageHeight*scaleFactor;alignObj=getImageAlignment(bgImageVAlign,bgImageHAlign,alignImage.width,alignImage.height,chartWidth,chartHeight);alignImage.y=alignObj.y;alignImage.x=alignObj.x;break;case\"fill\":imgAspectRatio=imageWidth/imageHeight;cAspectRatio=cWidth/cHeight;scaleFactor=(imgAspectRatio>cAspectRatio)?cHeight/imageHeight:cWidth/imageWidth;alignImage.width=imageWidth*scaleFactor;alignImage.height=imageHeight*scaleFactor;alignObj=getImageAlignment(bgImageVAlign,bgImageHAlign,alignImage.width,alignImage.height,chartWidth,chartHeight);alignImage.y=alignObj.y;alignImage.x=alignObj.x;break;default:alignObj=getImageAlignment(bgImageVAlign,bgImageHAlign,imageWidth,imageHeight,chartWidth,chartHeight);alignImage.width=imageWidth;alignImage.height=imageHeight;alignImage.y=alignObj.y;alignImage.x=alignObj.x}return alignImage},axisLabelAdder=(function(){var TEXTPOSITION={top:{align:\"center\",verticalAlign:\"top\",textAlign:\"center\"},right:{align:\"right\",verticalAlign:\"middle\",textAlign:\"left\"},bottom:{align:\"center\",verticalAlign:\"bottom\",textAlign:\"center\"},left:{align:\"left\",verticalAlign:\"middle\",textAlign:\"right\"}},alphaRetriveRegx=/([^\\,^\\s]+)\\)$/g,labelAdder=function(defaultSeries,FCchartObj){var labelStep;if(/^(bar|bar3d)$/.test(defaultSeries)){this.isBar=true;this.yPos=\"bottom\";this.yOppPos=\"top\";this.xPos=\"left\";this.xOppPos=\"right\"}labelStep=parseInt(FCchartObj.labelstep,10);this.labelStep=labelStep>1?labelStep:1;this.showLabel=pluckNumber(FCchartObj.showlabels,FCchartObj.shownames,1);this.is3D=/3d$/.test(defaultSeries)};labelAdder.prototype={isBar:false,yPos:\"left\",yOppPos:\"right\",xPos:\"bottom\",xOppPos:\"top\",addAxisGridLine:function(axisObj,value,text,width,dashStyle,lineColor,zIndex,isXxis){var hasText=text===\"\"?false:true,hasVisibleLine=width>0||lineColor.match(alphaRetriveRegx)[1]>0?true:false,axisPos,textAttrs,gridLine;if(hasText||hasVisibleLine){if(!hasVisibleLine){lineColor=COLOR_TRANSPARENT;width=0.1}gridLine={isGrid:true,width:width,dashStyle:dashStyle,color:lineColor,value:value,zIndex:zIndex===undefined?2:zIndex};if(hasText){axisPos=axisObj.opposite?(isXxis?this.xOppPos:this.yOppPos):(isXxis?this.xPos:this.yPos);textAttrs=TEXTPOSITION[axisPos];gridLine.label={text:text,style:axisObj.labels.style,textAlign:textAttrs.textAlign,align:textAttrs.align,verticalAlign:textAttrs.verticalAlign,rotation:0,x:0,y:0}}axisObj.plotLines.push(gridLine)}return gridLine},addAxisAltGrid:function(axisObj,currentValue){if(!this.is3D){var lastValue=pluckNumber(axisObj._lastValue,axisObj.min),altGrid=pluck(axisObj._altGrid,false);if(altGrid){axisObj.plotBands.push({isGrid:true,color:axisObj.alternateGridColor,to:currentValue,from:lastValue,zIndex:1})}axisObj._lastValue=currentValue;axisObj._altGrid=!altGrid}},addXaxisCat:function(axisObj,value,index,label){var axisPosition=axisObj.opposite?this.xOppPos:this.xPos,textAttrs=TEXTPOSITION[axisPosition],gridLine={isGrid:true,width:0.1,color:COLOR_TRANSPARENT,value:value,label:{text:label,style:axisObj.labels.style,textAlign:textAttrs.textAlign,align:textAttrs.align,verticalAlign:textAttrs.verticalAlign,rotation:0,x:0,y:0}};if(index%this.labelStep!==0){gridLine.stepped=true;gridLine.label.style=axisObj.steppedLabels.style}axisObj.plotLines.push(gridLine)},addVline:function(axisObj,dataObj,index,hcObj){var conf=hcObj[FC_CONFIG_STRING],isBar=conf.isBar,plotBorderWidth=hcObj.chart.plotBorderWidth,pbwMod2=(plotBorderWidth%2),divlineStyle=conf.divlineStyle,label=parseUnsafeString(dataObj.label),showLabelBorder=Boolean(pluckNumber(dataObj.showlabelborder,conf.showVLineLabelBorder,1)),showLabelBackground=Boolean(pluckNumber(dataObj.showlabelbackground,1)),labelHAlign=pluck(dataObj.labelhalign,isBar?POSITION_LEFT:POSITION_CENTER),labelVAlign=pluck(dataObj.labelvalign,isBar?POSITION_MIDDLE:POSITION_BOTTOM).toLowerCase(),labelPosition=pluckNumber(dataObj.labelposition,0),linePosition=pluckNumber(dataObj.lineposition,0.5),showVLines=pluckNumber(dataObj.showvlines,conf.showVLines,1),alpha=pluckNumber(dataObj.alpha,conf.vLineAlpha,80),color=pluck(dataObj.color,conf.vLineColor,\"333333\").replace(/^#?/,\"#\"),bgColor=pluck(dataObj.labelbgcolor,conf.vLineLabelBgColor,\"333333\").replace(/^#?/,\"#\"),labelColor=color,thickness=pluckNumber(dataObj.thickness,conf.vLineThickness,1),halfThickness=thickness*0.5,isDashed=Boolean(Number(pluck(dataObj.dashed,0))),dashLen=pluckNumber(dataObj.dashlen,5),dashGap=pluckNumber(dataObj.dashgap,2),smartLabel=conf.smartLabel,fontSizeInt=parseInt(divlineStyle.fontSize,10),y=fontSizeInt+2,x=0,smartText,labelRotation=pluckNumber(dataObj.rotatelabel,conf.rotateVLineLabels)?270:0;linePosition=(linePosition<0||linePosition>1)?0.5:linePosition;labelPosition=(labelPosition<0||labelPosition>1)?0:labelPosition;smartLabel.setStyle(divlineStyle);smartText=smartLabel.getOriSize(label);color=convertColor(color,showVLines?alpha:\"0\");if(!isBar){switch(labelVAlign){case POSITION_TOP:y-=smartText.height+2+(plotBorderWidth||1)*(1-labelPosition)+labelPosition;break;case POSITION_MIDDLE:y-=(smartText.height*0.5)+plotBorderWidth*(1-labelPosition*2);break;default:y+=(plotBorderWidth-pbwMod2)*labelPosition}switch(labelHAlign){case POSITION_LEFT:x+=thickness;break;case POSITION_RIGHT:x-=thickness+1;break}}else{switch(labelVAlign){case POSITION_TOP:y-=smartText.height+halfThickness+2;break;case POSITION_MIDDLE:y-=(smartText.height*0.5)+1;break;default:y+=halfThickness}if(!dataObj.labelhalign){x-=smartText.width*labelPosition}}axisObj.plotLines.push({isVline:true,color:color,width:thickness,value:(index-1)+linePosition,zIndex:pluckNumber(dataObj.showontop,conf.showVLinesOnTop)?5:3,dashStyle:isDashed?getDashStyle(dashLen,dashGap,thickness):undefined,label:{text:label,align:isBar?POSITION_LEFT:POSITION_CENTER,offsetScale:labelPosition,rotation:labelRotation,y:y,x:x,textAlign:labelHAlign,style:{color:showVLines?labelColor:color,fontSize:divlineStyle.fontSize,fontFamily:divlineStyle.fontFamily,lineHeight:divlineStyle.lineHeight,border:showVLines&&showLabelBorder?\"1px solid\":BLANK,borderColor:showVLines&&showLabelBorder?labelColor:BLANK,backgroundColor:showLabelBackground?bgColor:BLANK,backgroundOpacity:showVLines&&showLabelBackground?pluck(dataObj.labelbgalpha,conf.vLineLabelBgAlpha)/100:0}}})}};labelAdder.prototype.constructor=labelAdder;return labelAdder})(),NumberFormatter=(function(){var TWOSTRING=\"2\",numberFormatDefaults={formatnumber:ONESTRING,formatnumberscale:ONESTRING,defaultnumberscale:BLANK,numberscaleunit:[\"K\",\"M\"],numberscalevalue:[1000,1000],numberprefix:BLANK,numbersuffix:BLANK,decimals:BLANK,forcedecimals:ZEROSTRING,yaxisvaluedecimals:TWOSTRING,decimalseparator:DECIMALSTRING,thousandseparator:COMMASTRING,thousandseparatorposition:[3],indecimalseparator:BLANK,inthousandseparator:BLANK,sformatnumber:ONESTRING,sformatnumberscale:ZEROSTRING,sdefaultnumberscale:BLANK,snumberscaleunit:[\"K\",\"M\"],snumberscalevalue:[1000,1000],snumberprefix:BLANK,snumbersuffix:BLANK,sdecimals:TWOSTRING,sforcedecimals:ZEROSTRING,syaxisvaluedecimals:TWOSTRING,xFormatNumber:ZEROSTRING,xFormatNumberScale:ZEROSTRING,xDefaultNumberScale:BLANK,xNumberScaleUnit:[\"K\",\"M\"],xNumberScaleValue:[1000,1000],xNumberPrefix:BLANK,xNumberSuffix:BLANK},numberFormatOverrides={mscombidy2d:{formatnumberscale:ONESTRING}},NumberFormatter=function(chartObj,chartAPI){var numberscaleunit,snumberscaleunit,xnumberscaleunit,ticknumberscaleunit,ynumberscaleunit,numberscalevalue,xnumberscalevalue,ticknumberscalevalue,ynumberscalevalue,thousandseparatorposition,paramLabels,param1,snumberscalevalue,chartName=chartAPI.name,chartSpecificConf=numberFormatOverrides[chartName];if(typeof chartSpecificConf!==OBJECTSTRING){chartSpecificConf=numberFormatDefaults}if(getValidValue(chartObj.numberscaleunit)){numberscaleunit=chartObj.numberscaleunit.split(COMMASTRING)}if(snumberscaleunit=getValidValue(chartObj.snumberscaleunit,chartObj.numberscaleunit)){snumberscaleunit=snumberscaleunit.split(COMMASTRING)}if(xnumberscaleunit=getValidValue(chartObj.xnumberscaleunit,chartObj.numberscaleunit)){xnumberscaleunit=xnumberscaleunit.split(COMMASTRING)}if(ticknumberscaleunit=getValidValue(chartObj.ticknumberscaleunit,chartObj.numberscaleunit)){ticknumberscaleunit=ticknumberscaleunit.split(COMMASTRING)}if(ynumberscaleunit=getValidValue(chartObj.ynumberscaleunit,chartObj.numberscaleunit)){ynumberscaleunit=ynumberscaleunit.split(COMMASTRING)}if(getValidValue(chartObj.numberscalevalue)){numberscalevalue=chartObj.numberscalevalue.split(COMMASTRING)}if(snumberscalevalue=getValidValue(chartObj.snumberscalevalue,chartObj.numberscalevalue)){snumberscalevalue=snumberscalevalue.split(COMMASTRING)}if(xnumberscalevalue=getValidValue(chartObj.xnumberscalevalue,chartObj.numberscalevalue)){xnumberscalevalue=xnumberscalevalue.split(COMMASTRING)}if(ticknumberscalevalue=getValidValue(chartObj.ticknumberscalevalue,chartObj.numberscalevalue)){ticknumberscalevalue=ticknumberscalevalue.split(COMMASTRING)}if(ynumberscalevalue=getValidValue(chartObj.ynumberscalevalue,chartObj.numberscalevalue)){ynumberscalevalue=ynumberscalevalue.split(COMMASTRING)}if(getValidValue(chartObj.thousandseparatorposition)){thousandseparatorposition=chartObj.thousandseparatorposition.split(COMMASTRING);var length=thousandseparatorposition.length,value,lastValue=pluckNumber(thousandseparatorposition[length]);lastValue=lastValue?lastValue:numberFormatDefaults.thousandseparatorposition[0];while(length){length-=1;value=pluckNumber(Math.abs(thousandseparatorposition[length]));if(!value){value=lastValue}else{lastValue=value}thousandseparatorposition[length]=value}}if(!chartAPI){chartAPI={}}var scaleRecursively=pluckNumber(chartObj.scalerecursively,0),sScaleRecursively=pluckNumber(chartObj.sscalerecursively,scaleRecursively),xScaleRecursively=pluckNumber(chartObj.xscalerecursively,scaleRecursively),maxScaleRecursion=pluckNumber(chartObj.maxscalerecursion,-1),sMaxScaleRecursion=pluckNumber(chartObj.smaxscalerecursion,maxScaleRecursion),xMaxScaleRecursion=pluckNumber(chartObj.xmaxscalerecursion,maxScaleRecursion),scaleSeparator=getValidValue(chartObj.scaleseparator,\" \"),sScaleSeparator=getValidValue(chartObj.sscaleseparator,scaleSeparator),xScaleSeparator=getValidValue(chartObj.xscaleseparator,scaleSeparator);if(!maxScaleRecursion||maxScaleRecursion==0){maxScaleRecursion=-1}this.paramLabels=paramLabels={formatnumber:pluck(chartObj.formatnumber,chartAPI.formatnumber,chartSpecificConf.formatnumber,numberFormatDefaults.formatnumber),formatnumberscale:pluck(chartObj.formatnumberscale,chartAPI.formatnumberscale,chartSpecificConf.formatnumberscale,numberFormatDefaults.formatnumberscale),defaultnumberscale:getFirstValue(chartObj.defaultnumberscale,chartAPI.defaultnumberscale,chartSpecificConf.defaultnumberscale,numberFormatDefaults.defaultnumberscale),numberscaleunit:pluck(numberscaleunit,chartAPI.numberscaleunit,chartSpecificConf.numberscaleunit,numberFormatDefaults.numberscaleunit).concat(),numberscalevalue:pluck(numberscalevalue,chartAPI.numberscalevalue,chartSpecificConf.numberscalevalue,numberFormatDefaults.numberscalevalue).concat(),numberprefix:getFirstValue(chartObj.numberprefix,chartAPI.numberprefix,chartSpecificConf.numberprefix,numberFormatDefaults.numberprefix),numbersuffix:getFirstValue(chartObj.numbersuffix,chartAPI.numbersuffix,chartSpecificConf.numbersuffix,numberFormatDefaults.numbersuffix),decimalprecision:parseInt(pluck.apply(window,chartObj.decimals===\"auto\"?[numberFormatDefaults.decimalprecision]:[chartObj.decimals,chartObj.decimalprecision,chartAPI.decimals,chartSpecificConf.decimals,numberFormatDefaults.decimals,chartAPI.decimalprecision,chartSpecificConf.decimalprecision,numberFormatDefaults.decimalprecision]),10),forcedecimals:pluck(chartObj.forcedecimals,chartAPI.forcedecimals,chartSpecificConf.forcedecimals,numberFormatDefaults.forcedecimals),decimalseparator:pluck(chartObj.decimalseparator,chartAPI.decimalseparator,chartSpecificConf.decimalseparator,numberFormatDefaults.decimalseparator),thousandseparator:pluck(chartObj.thousandseparator,chartAPI.thousandseparator,chartSpecificConf.thousandseparator,numberFormatDefaults.thousandseparator),thousandseparatorposition:pluck(thousandseparatorposition,chartAPI.thousandseparatorposition,chartSpecificConf.thousandseparatorposition,numberFormatDefaults.thousandseparatorposition),indecimalseparator:getFirstValue(chartObj.indecimalseparator,chartAPI.indecimalseparator,chartSpecificConf.indecimalseparator,numberFormatDefaults.indecimalseparator),inthousandseparator:getFirstValue(chartObj.inthousandseparator,chartAPI.inthousandseparator,chartSpecificConf.inthousandseparator,numberFormatDefaults.inthousandseparator),scalerecursively:scaleRecursively,maxscalerecursion:maxScaleRecursion,scaleseparator:scaleSeparator};if(!chartAPI.useScaleRecursively||((paramLabels.numberscalevalue&&paramLabels.numberscalevalue.length)!=(paramLabels.numberscaleunit&&paramLabels.numberscaleunit.length))){paramLabels.scalerecursively=scaleRecursively=0}this.param1=param1={formatnumber:paramLabels.formatnumber,formatnumberscale:paramLabels.formatnumberscale,defaultnumberscale:paramLabels.defaultnumberscale,numberscaleunit:paramLabels.numberscaleunit.concat(),numberscalevalue:paramLabels.numberscalevalue.concat(),numberprefix:paramLabels.numberprefix,numbersuffix:paramLabels.numbersuffix,decimalprecision:parseInt(pluck(chartObj.yaxisvaluedecimals,paramLabels.decimalprecision,2)),forcedecimals:pluck(chartObj.forceyaxisvaluedecimals,paramLabels.forcedecimals),decimalseparator:paramLabels.decimalseparator,thousandseparator:paramLabels.thousandseparator,thousandseparatorposition:paramLabels.thousandseparatorposition.concat(),indecimalseparator:paramLabels.indecimalseparator,inthousandseparator:paramLabels.inthousandseparator,scalerecursively:scaleRecursively,maxscalerecursion:maxScaleRecursion,scaleseparator:scaleSeparator};this.paramX={formatnumber:pluck(chartObj.xformatnumber,paramLabels.formatnumber),formatnumberscale:pluck(chartObj.xformatnumberscale,paramLabels.formatnumberscale),defaultnumberscale:getFirstValue(chartObj.xdefaultnumberscale,paramLabels.defaultnumberscale),numberscaleunit:pluck(xnumberscaleunit,paramLabels.numberscaleunit.concat()),numberscalevalue:pluck(xnumberscalevalue,paramLabels.numberscalevalue.concat()),numberprefix:pluck(chartObj.xnumberprefix,paramLabels.numberprefix),numbersuffix:pluck(chartObj.xnumbersuffix,paramLabels.numbersuffix),decimalprecision:parseInt(pluck(chartObj.xaxisvaluedecimals,chartObj.xaxisvaluesdecimals,paramLabels.decimalprecision,2)),forcedecimals:pluck(chartObj.forcexaxisvaluedecimals,0),decimalseparator:paramLabels.decimalseparator,thousandseparator:paramLabels.thousandseparator,thousandseparatorposition:paramLabels.thousandseparatorposition.concat(),indecimalseparator:paramLabels.indecimalseparator,inthousandseparator:paramLabels.inthousandseparator,scalerecursively:xScaleRecursively,maxscalerecursion:xMaxScaleRecursion,scaleseparator:xScaleSeparator};if(!chartAPI.useScaleRecursively||((this.paramX.numberscalevalue&&this.paramX.numberscalevalue.length)!=(this.paramX.numberscaleunit&&this.paramX.numberscaleunit.length))){this.paramX.scalerecursively=xScaleRecursively=0}this.param2={formatnumber:pluck(chartObj.sformatnumber,chartAPI.sformatnumber,numberFormatDefaults.sformatnumber),formatnumberscale:pluck(chartObj.sformatnumberscale,chartAPI.sformatnumberscale,numberFormatDefaults.sformatnumberscale),defaultnumberscale:getFirstValue(chartObj.sdefaultnumberscale,chartAPI.sdefaultnumberscale,paramLabels.defaultnumberscale),numberscaleunit:pluck(snumberscaleunit,chartAPI.snumberscaleunit,numberFormatDefaults.snumberscaleunit).concat(),numberscalevalue:pluck(snumberscalevalue,chartAPI.snumberscalevalue,numberFormatDefaults.snumberscalevalue).concat(),numberprefix:getFirstValue(chartObj.snumberprefix,chartAPI.snumberprefix,numberFormatDefaults.snumberprefix),numbersuffix:getFirstValue(chartObj.snumbersuffix,chartAPI.snumbersuffix,numberFormatDefaults.snumbersuffix),decimalprecision:parseInt(pluck(chartObj.syaxisvaluedecimals,chartObj.sdecimals,chartAPI.sdecimals,numberFormatDefaults.sdecimals),10),forcedecimals:pluck(chartObj.forcesyaxisvaluedecimals,chartObj.sforcedecimals,chartAPI.sforcedecimals,numberFormatDefaults.sforcedecimals),decimalseparator:pluck(chartObj.decimalseparator,chartAPI.decimalseparator,numberFormatDefaults.decimalseparator),thousandseparator:pluck(chartObj.thousandseparator,chartAPI.thousandseparator,numberFormatDefaults.thousandseparator),thousandseparatorposition:paramLabels.thousandseparatorposition.concat(),indecimalseparator:pluck(chartObj.indecimalseparator,chartAPI.indecimalseparator,numberFormatDefaults.indecimalseparator),inthousandseparator:pluck(chartObj.inthousandseparator,chartAPI.inthousandseparator,numberFormatDefaults.inthousandseparator),scalerecursively:sScaleRecursively,maxscalerecursion:sMaxScaleRecursion,scaleseparator:sScaleSeparator};if(!chartAPI.useScaleRecursively||((this.param2.numberscalevalue&&this.param2.numberscalevalue.length)!=(this.param2.numberscaleunit&&this.param2.numberscaleunit.length))){this.param2.scalerecursively=sScaleRecursively=0}this.paramScale={formatnumber:pluck(chartObj.tickformatnumber,paramLabels.formatnumber),formatnumberscale:pluck(chartObj.tickformatnumberscale,paramLabels.formatnumberscale),defaultnumberscale:getFirstValue(chartObj.tickdefaultnumberscale,paramLabels.defaultnumberscale),numberscaleunit:pluck(ticknumberscaleunit,paramLabels.numberscaleunit.concat()),numberscalevalue:pluck(ticknumberscalevalue,paramLabels.numberscalevalue.concat()),numberprefix:pluck(chartObj.ticknumberprefix,paramLabels.numberprefix),numbersuffix:pluck(chartObj.ticknumbersuffix,paramLabels.numbersuffix),decimalprecision:parseInt(pluck(chartObj.tickvaluedecimals,paramLabels.decimalprecision,TWOSTRING)),forcedecimals:pluck(chartObj.forcetickvaluedecimals,paramLabels.forcedecimals,0),decimalseparator:paramLabels.decimalseparator,thousandseparator:paramLabels.thousandseparator,thousandseparatorposition:paramLabels.thousandseparatorposition.concat(),indecimalseparator:paramLabels.indecimalseparator,inthousandseparator:paramLabels.inthousandseparator,scalerecursively:scaleRecursively,maxscalerecursion:maxScaleRecursion,scaleseparator:scaleSeparator};if(/^(bubble|scatter|selectscatter)$/.test(chartName)){param1.formatnumber=pluck(chartObj.yformatnumber,param1.formatnumber);param1.formatnumberscale=pluck(chartObj.yformatnumberscale,param1.formatnumberscale);param1.defaultnumberscale=getFirstValue(chartObj.ydefaultnumberscale,param1.defaultnumberscale);param1.numberscaleunit=pluck(ynumberscaleunit,param1.numberscaleunit);param1.numberscalevalue=pluck(ynumberscalevalue,param1.numberscalevalue);param1.numberprefix=pluck(chartObj.ynumberprefix,param1.numberprefix);param1.numbersuffix=pluck(chartObj.ynumbersuffix,param1.numbersuffix);paramLabels.formatnumber=pluck(chartObj.yformatnumber,paramLabels.formatnumber);paramLabels.formatnumberscale=pluck(chartObj.yformatnumberscale,paramLabels.formatnumberscale);paramLabels.defaultnumberscale=getFirstValue(chartObj.ydefaultnumberscale,paramLabels.defaultnumberscale);paramLabels.numberscaleunit=pluck(chartObj.ynumberscaleunit,paramLabels.numberscaleunit.concat());paramLabels.numberscalevalue=pluck(chartObj.ynumberscalevalue,paramLabels.numberscalevalue.concat());paramLabels.numberprefix=pluck(chartObj.ynumberprefix,paramLabels.numberprefix);paramLabels.numbersuffix=pluck(chartObj.ynumbersuffix,paramLabels.numbersuffix)}if(/^(mscombidy2d|mscombidy3d)$/.test(chartName)){this.param2.formatnumberscale=pluckNumber(chartObj.sformatnumberscale,ONESTRING)}if(/^(pie2d|pie3d|doughnut2d|doughnut3d|marimekko|pareto2d|pareto3d)$/.test(chartName)){paramLabels.decimalprecision=pluck(chartObj.decimals,TWOSTRING)}if(scaleRecursively){paramLabels.numberscalevalue.push(1);paramLabels.numberscaleunit.unshift(this.paramLabels.defaultnumberscale);this.param1.numberscalevalue.push(1);this.param1.numberscaleunit.unshift(this.param1.defaultnumberscale);this.paramScale.numberscalevalue.push(1);this.paramScale.numberscaleunit.unshift(this.paramScale.defaultnumberscale)}if(sScaleRecursively){this.param2.numberscalevalue.push(1);this.param2.numberscaleunit.unshift(this.param2.defaultnumberscale)}if(xScaleRecursively){this.paramX.numberscalevalue.push(1);this.paramX.numberscaleunit.unshift(this.paramX.defaultnumberscale)}};NumberFormatter.prototype={percentValue:function(num){var precision=isNaN(this.paramLabels.decimalprecision)?\"2\":this.paramLabels.decimalprecision;return formatCommas(formatDecimals(num,precision,this.paramLabels.forcedecimals),this.paramLabels.decimalseparator,this.paramLabels.thousandseparator,this.paramLabels.thousandseparatorposition)+\"%\"},getCleanValue:function(num,abs){num=convertNumberSeps(num,this.paramLabels.indecimalseparator,this.paramLabels.inthousandseparator);return isNaN(num)?null:(abs?mathAbs(num):num)},dataLabels:function(num,isSY){return formatNumber(num,isSY?this.param2:this.paramLabels)},yAxis:function(num){return formatNumber(num,this.param1)},xAxis:function(num){return formatNumber(num,this.paramX)},sYAxis:function(num){return formatNumber(num,this.param2)},scale:function(num){return formatNumber(num,this.paramScale)}};NumberFormatter.prototype.constructor=NumberFormatter;var formatNumber=function(num,attributes){if(num===null){return}num=Number(num);var strNum=num+BLANK;var strScale;if(attributes.formatnumberscale==1){strScale=attributes.defaultnumberscale}else{strScale=BLANK}var valueArr,decimalPlaceLen;valueArr=strNum.split(\".\")[1];decimalPlaceLen=valueArr?valueArr.length:attributes.forcedecimals?TWOSTRING:BLANK;if(attributes.formatnumberscale==1){var objNum=formatNumberScale(num,attributes.defaultnumberscale,attributes.numberscalevalue,attributes.numberscaleunit,attributes.scalerecursively);strNum=objNum.value;num=objNum.value;strScale=objNum.scale}if(attributes.scalerecursively&&attributes.formatnumberscale!=0){var numList=objNum.value;var scaleList=objNum.scale;var upperIndex=((attributes.maxscalerecursion==-1)?numList.length:Math.min(numList.length,attributes.maxscalerecursion));if(attributes.formatnumber==1){strNum=\"\";var tempNum,tempStr;for(var i=0;i<upperIndex;i++){tempNum=(i==0)?numList[i]:Math.abs(numList[i]);tempStr=String(tempNum);if(i==upperIndex-1){tempStr=formatDecimals(tempNum,pluck(attributes.decimalprecision,decimalPlaceLen),attributes.forcedecimals)}strNum=strNum+formatCommas(tempStr,attributes.decimalseparator,attributes.thousandseparator,attributes.thousandseparatorposition)+scaleList[i]+(i<upperIndex-1?attributes.scaleseparator:\"\")}}else{strNum=\"\";for(i=0;i<upperIndex;i++){strNum=strNum+String((i==0)?numList[i]:Math.abs(numList[i]))+scaleList[i]+(i<upperIndex-1?attributes.scaleseparator:\"\")}}strNum=(attributes.numberprefix||BLANK)+strNum+(attributes.numbersuffix||BLANK);delete numList;delete scaleList}else{if(attributes.formatnumber==1){strNum=formatDecimals(num,pluck(attributes.decimalprecision,decimalPlaceLen),attributes.forcedecimals);strNum=formatCommas(strNum,attributes.decimalseparator,attributes.thousandseparator,attributes.thousandseparatorposition)}strNum=(attributes.numberprefix||BLANK)+strNum+strScale+(attributes.numbersuffix||BLANK)}return strNum};function formatNumberScale(intNum,defaultNumberScale,numScaleValues,numScaleUnits,scaleRecursively){var objRtn={},strScale=defaultNumberScale,i=0,numScaleValue,THOUSAND=1000;var arrValues=[];var arrScales=[];if(scaleRecursively){for(i=0;i<numScaleValues.length;i++){numScaleValue=pluckNumber(numScaleValues[i])||THOUSAND;if(Math.abs(Number(intNum))>=numScaleValue&&i<numScaleValues.length-1){var carry=intNum%numScaleValue;intNum=(intNum-carry)/numScaleValue;if(carry!=0){arrValues.push(carry);arrScales.push(numScaleUnits[i])}}else{arrValues.push(intNum);arrScales.push(numScaleUnits[i]);break}}arrValues.reverse();arrScales.reverse();objRtn.value=arrValues;objRtn.scale=arrScales}else{if(numScaleValues.length===numScaleUnits.length){for(i=0;i<numScaleValues.length;i++){numScaleValue=pluckNumber(numScaleValues[i])||THOUSAND;if(numScaleValue&&Math.abs(Number(intNum))>=numScaleValue){strScale=numScaleUnits[i]||BLANK;intNum=Number(intNum)/numScaleValue}else{if(i==0&&numScaleValues.length==1&&defaultNumberScale==\"\"){numScaleValue=pluckNumber(numScaleValues[i])||THOUSAND;strScale=numScaleUnits[i]||BLANK;intNum=Number(intNum)/numScaleValue}break}}}objRtn.value=intNum;objRtn.scale=strScale}return objRtn}function formatDecimals(intNum,decimalPrecision,forceDecimals){var tenToPower,strRounded;if(decimalPrecision<=0){return String(Math.round(intNum))}if(isNaN(decimalPrecision)){intNum=intNum.toString();if(intNum.length>12&&intNum.indexOf(DECIMALSTRING)!=-1){decimalPrecision=12-intNum.split(DECIMALSTRING)[0].length;tenToPower=mathPow(10,decimalPrecision);strRounded=String(Math.round(intNum*tenToPower)/tenToPower);intNum=strRounded}return intNum}tenToPower=mathPow(10,decimalPrecision);strRounded=String(Math.round(intNum*tenToPower)/tenToPower);if(forceDecimals==1){if(strRounded.indexOf(DECIMALSTRING)==-1){strRounded+=\".0\"}var parts=strRounded.split(DECIMALSTRING);var paddingNeeded=decimalPrecision-parts[1].length;for(var i=1;i<=paddingNeeded;i++){strRounded+=ZEROSTRING}}return(strRounded)}function formatCommas(strNum,decimalseparator,thousandseparator,thSepPos){var intNum=Number(strNum);if(isNaN(intNum)){return BLANK}var strDecimalPart=BLANK;var boolIsNegative=false;var strNumberFloor=BLANK;var formattedNumber=BLANK;var startPos=0;var endPos=0;startPos=0;endPos=strNum.length;if(strNum.indexOf(DECIMALSTRING)!=-1){strDecimalPart=strNum.substring(strNum.indexOf(DECIMALSTRING)+1,strNum.length);endPos=strNum.indexOf(DECIMALSTRING)}if(intNum<0){boolIsNegative=true;startPos=1}strNumberFloor=strNum.substring(startPos,endPos);var strNumberLen=strNumberFloor.length,sepPosLen=thSepPos.length-1,sepDigit=thSepPos[sepPosLen];if(strNumberLen<sepDigit){formattedNumber=strNumberFloor}else{while(strNumberLen>=sepDigit){formattedNumber=(strNumberLen-sepDigit?thousandseparator:BLANK)+strNumberFloor.substr(strNumberLen-sepDigit,sepDigit)+formattedNumber;strNumberLen-=sepDigit;sepDigit=(sepPosLen-=1)<=0?thSepPos[0]:thSepPos[sepPosLen];if(strNumberLen<sepDigit){formattedNumber=strNumberFloor.substring(strNumberLen,0)+formattedNumber}}}if(strDecimalPart!=BLANK){formattedNumber=formattedNumber+decimalseparator+strDecimalPart}if(boolIsNegative==true){formattedNumber=\"-\"+formattedNumber}return formattedNumber}function convertNumberSeps(num,indecimalseparator,inthousandseparator){num=num+BLANK;if(getValidValue(inthousandseparator)){inthousandseparator=inthousandseparator.replace(/(\\W)/ig,\"\\\\$1\");var regExp=new RegExp(inthousandseparator,\"g\");num=num.toString().replace(regExp,BLANK)}if(getValidValue(indecimalseparator)){num=num.replace(indecimalseparator,DECIMALSTRING)}return!isNaN(num=parseFloat(num))&&isFinite(num)?num:NaN}return NumberFormatter})(),getAxisLimits=(function(){var getDivisibleRange=function(yMin,yMax,numDivLines,interval,interceptRange){var range=Math.abs(yMax-yMin);var rangeDiv=range/(numDivLines+1);if(!isRangeDivisible(range,numDivLines,interval)){if(interceptRange){var checkLimit=(interval>1)?2:0.5;if((Number(rangeDiv)/Number(interval))<checkLimit){interval=interval/10}}rangeDiv=(Math.floor(rangeDiv/interval)+1)*interval;range=rangeDiv*(numDivLines+1)}return range},isRangeDivisible=function(range,numDivLines,interval){var rangeDiv=range/(numDivLines+1);if(numDecimals(rangeDiv)>numDecimals(interval)){return false}else{return true}},numDecimals=function(num){num=Math.abs(num);var strNum=String(num);var decimals=0;var dotPos=strNum.indexOf(DECIMALSTRING);if(dotPos!=-1){decimals=strNum.length-dotPos-1}return decimals};return function(maxValue,minValue,yAxisMaxValue,yAxisMinValue,stopMaxAtZero,setMinAsZero,numDivLines,adjustDiv){var yMaxGiven,yMinGiven,yMax,yMin,range,interval;maxValue=(isNaN(maxValue)==true||maxValue==undefined)?0.1:maxValue;minValue=(isNaN(minValue)==true||minValue==undefined)?0:minValue;if((maxValue==minValue)&&(maxValue==0)){maxValue=0.1}stopMaxAtZero=typeof stopMaxAtZero===undefined?true:stopMaxAtZero;setMinAsZero=typeof setMinAsZero===undefined?true:setMinAsZero;var maxPowerOfTen=Math.floor(Math.log(Math.abs(maxValue))/Math.LN10);var minPowerOfTen=Math.floor(Math.log(Math.abs(minValue))/Math.LN10);var powerOfTen=Math.max(minPowerOfTen,maxPowerOfTen);var y_interval=Math.pow(10,powerOfTen);if(Math.abs(maxValue)/y_interval<2&&Math.abs(minValue)/y_interval<2){powerOfTen--;y_interval=Math.pow(10,powerOfTen)}var rangePowerOfTen=Math.floor(Math.log(maxValue-minValue)/Math.LN10);var rangeInterval=Math.pow(10,rangePowerOfTen);if(((maxValue-minValue)>0)&&((y_interval/rangeInterval)>=10)){y_interval=rangeInterval;powerOfTen=rangePowerOfTen}var y_topBound=(Math.floor(maxValue/y_interval)+1)*y_interval;var y_lowerBound;if(minValue<0){y_lowerBound=-1*((Math.floor(Math.abs(minValue/y_interval))+1)*y_interval)}else{if(setMinAsZero){y_lowerBound=0}else{y_lowerBound=Math.floor(Math.abs(minValue/y_interval)-1)*y_interval;y_lowerBound=(y_lowerBound<0)?0:y_lowerBound}}if(stopMaxAtZero&&maxValue<=0){y_topBound=0}if(yAxisMaxValue==null||yAxisMaxValue==undefined||yAxisMaxValue==BLANK){yMaxGiven=false}else{yMaxGiven=true}if(yAxisMinValue==null||yAxisMinValue==undefined||yAxisMinValue==BLANK||isNaN(Number(yAxisMinValue))){yMinGiven=false}else{yMinGiven=true}if(yMaxGiven==false||(yMaxGiven==true&&Number(yAxisMaxValue)<maxValue)){yMax=y_topBound}else{yMax=Number(yAxisMaxValue)}if(yMinGiven==false||(yMinGiven==true&&Number(yAxisMinValue)>minValue)){yMin=y_lowerBound}else{yMin=Number(yAxisMinValue)}range=Math.abs(yMax-yMin);interval=y_interval;if(yMinGiven==false&&yMaxGiven==false&&adjustDiv==true){if(yMax>0&&yMin<0){var found=false;var adjInterval=(interval>10)?(interval/10):interval;var rangeD=getDivisibleRange(yMin,yMax,numDivLines,adjInterval,false);var nextRange=rangeD-(numDivLines+1)*(adjInterval);var rangeDiv;var deltaRange;var mf;var smallArm,bigArm;var extSmallArm,extBigArm;var i;while(found==false){nextRange=nextRange+(numDivLines+1)*(adjInterval);if(isRangeDivisible(nextRange,numDivLines,adjInterval)){deltaRange=nextRange-range;rangeDiv=nextRange/(numDivLines+1);smallArm=Math.min(Math.abs(yMin),yMax);bigArm=range-smallArm;mf=(smallArm==Math.abs(yMin))?-1:1;if(numDivLines==0){found=true}else{for(i=1;i<=Math.floor((numDivLines+1)/2);i++){extSmallArm=rangeDiv*i;if((extSmallArm-smallArm)>deltaRange){continue}if(extSmallArm>smallArm){extBigArm=nextRange-extSmallArm;if(((extBigArm/rangeDiv)==(Math.floor(extBigArm/rangeDiv)))&&((extSmallArm/rangeDiv)==(Math.floor(extSmallArm/rangeDiv)))){range=nextRange;yMax=(mf==-1)?extBigArm:extSmallArm;yMin=(mf==-1)?(-extSmallArm):(-extBigArm);found=true}}else{continue}}}}}}else{var adjRange=getDivisibleRange(yMin,yMax,numDivLines,interval,true);var deltaRange=adjRange-range;range=adjRange;if(yMax>0){yMax=yMax+deltaRange}else{yMin=yMin-deltaRange}}}else{if(adjustDiv==true){if(numDivLines>0){var counter=0;var multiplyFactor=1;var divLines;while(1){divLines=numDivLines+(counter*multiplyFactor);divLines=(divLines==0)?1:divLines;if(isRangeDivisible(range,divLines,interval)){break}counter=(multiplyFactor==-1||(counter>numDivLines))?(++counter):(counter);if(counter>25){divLines=0;break}multiplyFactor=(counter<=numDivLines)?(multiplyFactor*-1):(1)}numDivLines=divLines}}else{}}var divInterval=(yMax-yMin)/(numDivLines+1);divInterval=divInterval;return{Max:yMax,Min:yMin,Range:range,interval:interval,divGap:divInterval}}})(),createDialog=(function(){var api=function(container,text){this.title.y=container.offsetHeight/2;if(text!==undefined){this.title.text=text}};api.prototype={chart:{events:{},margin:[0,0,0,0],backgroundColor:{FCcolor:{alpha:0}}},credits:{href:\"http://www.fusioncharts.com?BS=FCHSEvalMark\",text:\"FusionCharts\",enabled:true},legend:{enabled:false},title:{text:\"\",style:{fontFamily:\"Verdana\",fontSize:\"10px\",color:\"#666666\"}},plotOptions:{series:{}},series:[{}],exporting:{enabled:false}};return api.prototype.constructor=api})(),trendLineLabelPosition={\"true\":{\"true\":{\"true\":{\"true\":POSITION_MIDDLE,\"false\":POSITION_MIDDLE},\"false\":{\"true\":POSITION_MIDDLE,\"false\":POSITION_MIDDLE}},\"false\":{\"true\":{\"true\":POSITION_MIDDLE,\"false\":POSITION_MIDDLE},\"false\":{\"true\":POSITION_MIDDLE,\"false\":POSITION_MIDDLE}}},\"false\":{\"true\":{\"true\":{\"true\":POSITION_BOTTOM,\"false\":POSITION_TOP},\"false\":{\"true\":POSITION_TOP,\"false\":POSITION_BOTTOM}},\"false\":{\"false\":{\"true\":POSITION_BOTTOM,\"false\":POSITION_TOP},\"true\":{\"true\":POSITION_TOP,\"false\":POSITION_BOTTOM}}}},trendLineLabelPositionHoriz={\"true\":{\"true\":{\"true\":POSITION_CENTER,\"false\":POSITION_CENTER},\"false\":{\"true\":POSITION_CENTER,\"false\":POSITION_CENTER}},\"false\":{\"true\":{\"true\":POSITION_RIGHT,\"false\":POSITION_LEFT},\"false\":{\"true\":POSITION_LEFT,\"false\":POSITION_RIGHT}}};createTrendLine=(function(){var regStringStest=/^s$/i,getLabelConfig=function(){var point=this;return{x:point.category,y:point.y,series:point.series,point:point,percentage:point.percentage,total:point.total||point.stackTotal}},getTooltipEvent=function(toolText){var toolTipPointObj,toolTextEvent;toolTipPointObj={series:{},chart:this.chart,id:this.id,label:this.label,options:this.options,svgElm:this.svgElm,toolText:toolText,getLabelConfig:getLabelConfig,tooltipPos:[]};toolTextEvent={mouseover:function(e){var chart=this.chart,plotLeft=chart.plotLeft,plotTop=chart.plotTop,tooltip=chart.tooltip;if(tooltip){toolTipPointObj.tooltipPos[0]=(e.layerX||e.x||e.offsetX||(e.originalEvent&&e.originalEvent.layerX))-plotLeft+20;toolTipPointObj.tooltipPos[1]=(e.layerY||e.y||e.offsetY||(e.originalEvent&&e.originalEvent.layerY))-plotTop-15;tooltip.refresh(toolTipPointObj)}},mousemove:function(e){var chart=this.chart,plotLeft=chart.plotLeft,plotTop=chart.plotTop,tooltip=chart.tooltip;if(tooltip){toolTipPointObj.tooltipPos[0]=(e.layerX||e.x||e.offsetX||(e.originalEvent&&e.originalEvent.layerX))-plotLeft+20;toolTipPointObj.tooltipPos[1]=(e.layerY||e.y||e.offsetY||(e.originalEvent&&e.originalEvent.layerY))-plotTop-15;tooltip.refresh(toolTipPointObj)}},mouseout:function(e){var chart=this.chart,tooltip=chart.tooltip;tooltip&&tooltip.hide()}};return toolTextEvent};return function(trendObj,axis,hcConf,isDY,isBar,isVtrend,isInverse){var x,trendStyle=hcConf.trendStyle,z,l,m,trendLineObj,isOpp,isZone,displayvalue,trendLabelObj,plotBandOrLineEvents,toolText,labelColor,axisObj,width,trendStartValue,trendEndValue,slopeDirection,slopeDirectionHoriz,max,min,allowDrag,halfFontSize=(parseInt(trendStyle.fontSize,10)/2)+2;if(isVtrend?!hcConf.showVLines:!hcConf.showTrendlines){return}for(x=0,l=trendObj.length;x<l;x+=1){if(trendObj[x].line){for(z=0,m=trendObj[x].line.length;z<m;z+=1){trendLineObj=trendObj[x].line[z];allowDrag=trendLineObj.allowdrag==\"1\";trendStartValue=pluckNumber(trendLineObj.startvalue,trendLineObj.value,0);trendEndValue=pluckNumber(trendLineObj.endvalue,trendStartValue);if(isVtrend){axisObj=axis}else{if(isDY&&trendLineObj.parentyaxis&&regStringStest.test(trendLineObj.parentyaxis)){axisObj=axis[1]}else{axisObj=axis[0]}}max=axisObj.max;min=axisObj.min;if(max>=trendStartValue&&max>=trendEndValue&&min<=trendStartValue&&min<=trendEndValue){if(trendLineObj.parentyaxis&&regStringStest.test(trendLineObj.parentyaxis)){isOpp=pluck(trendLineObj.valueonleft,hcConf.trendlineValuesOnOpp)!==ONESTRING}else{isOpp=pluck(trendLineObj.valueonright,hcConf.trendlineValuesOnOpp)===ONESTRING}isZone=Boolean(pluckNumber(trendLineObj.istrendzone,isVtrend?1:0));if(!(isVtrend?hcConf.showVLineLabels:hcConf.showTrendlineLabels)){displayvalue=BLANK}else{displayvalue=parseUnsafeString(pluck(trendLineObj.displayvalue,hcConf.numberFormatter[isVtrend?\"xAxis\":\"dataLabels\"](trendStartValue)))}if(displayvalue){slopeDirection=(trendStartValue>trendEndValue);slopeDirectionHoriz=(trendStartValue<trendEndValue);trendLabelObj={text:displayvalue,textAlign:isBar?POSITION_CENTER:(isOpp?POSITION_LEFT:POSITION_RIGHT),align:isBar?trendLineLabelPositionHoriz[isZone][!isInverse][slopeDirectionHoriz]:(isOpp?POSITION_RIGHT:POSITION_LEFT),verticalAlign:isBar?POSITION_BOTTOM:trendLineLabelPosition[isZone][!isInverse][slopeDirection][isOpp],rotation:0,x:0,fixedx:trendLineObj.fixedx,y:isBar?halfFontSize:2,style:extend2(trendStyle)};labelColor=pluck(trendLineObj.color,hcConf.trendlineColor);trendLineObj.alwaysVisible=isZone;if(labelColor){trendLabelObj.style.color=labelColor.replace(dropHash,HASHSTRING)}}else{trendLabelObj=undefined}toolText=pluck(trendLineObj.tooltext);if(toolText!==undefined){plotBandOrLineEvents=getTooltipEvent(toolText)}else{plotBandOrLineEvents={}}if(allowDrag){plotBandOrLineEvents.drag=function(e){var plotItem=this}}width=pluckNumber(trendLineObj.thickness,hcConf.trendlineThickness,1);if(isZone){axisObj.plotBands.push({isTrend:true,color:convertColor(pluck(trendLineObj.color,hcConf.trendlineColor),pluck(trendLineObj.alpha,hcConf.trendlineAlpha,40)),from:trendStartValue,to:trendEndValue,label:trendLabelObj,zIndex:!hcConf.is3d&&pluck(trendLineObj.showontop,hcConf.showTrendlinesOnTop)===ONESTRING?5:3,events:plotBandOrLineEvents,tooltext:toolText,alwaysVisible:trendLineObj.alwaysVisible,dragable:allowDrag})}else{axisObj.plotLines.push({isTrend:true,color:convertColor(pluck(trendLineObj.color,hcConf.trendlineColor,hcConf.trendlineColor),pluck(trendLineObj.alpha,hcConf.trendlineAlpha,99)),value:trendStartValue,to:trendEndValue,width:width,dashStyle:pluck(trendLineObj.dashed,hcConf.trendlinesAreDashed)==ONESTRING?getDashStyle(pluckNumber(trendLineObj.dashlen,hcConf.trendlinesDashLen),pluckNumber(trendLineObj.dashgap,hcConf.trendlinesDashGap),width):undefined,label:trendLabelObj,zIndex:!hcConf.is3d&&pluck(trendLineObj.showontop,hcConf.showTrendlinesOnTop)===ONESTRING?5:3,events:plotBandOrLineEvents,tooltext:toolText,dragable:allowDrag})}}}}}}})(),getDashStyle=function(dashLen,dashGap,thickness,lineDashed){if(lineDashed||lineDashed===undefined){thickness=thickness?thickness:1;return(pluckNumber(dashLen,5)/thickness)+COMMASTRING+(pluckNumber(dashGap,3)/thickness)}else{return undefined}},parseAttrGridOptions=function(attrGridObj,HCObj,FCObj){if(attrGridObj){var defaultSeriesType=HCObj.chart.defaultSeriesType,acceptType=/^(line|area|spline|areaspline|column)$/.test(defaultSeriesType);if(attrGridObj.enabled==\"1\"&&acceptType){var attrGridOptions={},alternateRowBgColor=attrGridObj.alternaterowbgcolor;alternateRoOptionswBgAlpha=attrGridObj.alternaterowbgalpha,rowPadding=attrGridObj.rowpadding;attrGridOptions.enabled=true;if(alternateRowBgColor){attrGridOptions.alternateRowBgColor=convertColor(alternateRowBgColor,alternateRowBgAlpha)}attrGridOptions.rowPadding=(rowPadding||2.5)-0;function parseAttrDataset(dataset,HCObj){if(dataset&&dataset.length>0){var hcDatasets=[];for(var i=0,len=dataset.length;i<len;i++){var hcDataset={},dataseti=dataset[i];hcDataset.name=getValidValue(dataseti.seriesname);var datas=hcDataset.data=[];if(dataseti.data&&dataseti.data.length>0){for(var di=0,dlen=dataseti.data.length;di<dlen;di++){var item={},fItem=dataseti.data[di];item.y=fItem.value;item.displayValue=fItem.displayvalue;item.attrDisplayValue=fItem.displayvalue;datas.push(item)}}hcDatasets.push(hcDataset)}HCObj.attrGrid.dataset=hcDatasets}}HCObj.attrGrid=attrGridOptions;parseAttrDataset(attrGridObj.dataset,HCObj);HCObj.legend.enabled=false;FCObj.chart.showlegend=\"0\";HCObj.xAxis.title.text=\"\";FCObj.chart.xaxisname=\"\"}}},ChartAPIItem=function(){},chartAPI=function(type,api,parent){var item,typeAPI=chartAPI[type],newTypeAPI,IAPIInterface;if(!typeAPI){IAPIInterface=function(){};IAPIInterface.prototype=parent instanceof ChartAPIItem?parent:new ChartAPIItem();IAPIInterface.prototype.constructor=IAPIInterface;typeAPI=chartAPI[type]=new IAPIInterface()}if(parent){typeAPI.base=parent}typeAPI.name=type;for(item in api){switch(typeof api[item]){case OBJECTSTRING:if(api[item]instanceof ChartAPIItem){typeAPI[item]=api[item][item];break}default:typeAPI[item]=api[item];break;case STRINGUNDEFINED:delete typeAPI[item];break}}if(this instanceof chartAPI){newTypeAPI=function(){};newTypeAPI.prototype=typeAPI;newTypeAPI.prototype.constructor=newTypeAPI;return new newTypeAPI()}else{return typeAPI}};global.extend(global.hcLib,{BLANKSTRINGPLACEHOLDER:BLANKSTRINGPLACEHOLDER,BLANKSTRING:BLANK,COLOR_BLACK:COLOR_BLACK,COLOR_GLASS:COLOR_GLASS,COLOR_WHITE:COLOR_WHITE,COLOR_TRANSPARENT:COLOR_TRANSPARENT,HASHSTRING:HASHSTRING,BREAKSTRING:BREAKSTRING,STRINGSTRING:STRINGSTRING,OBJECTSTRING:OBJECTSTRING,COMMASTRING:COMMASTRING,ZEROSTRING:ZEROSTRING,SAMPLESTRING:\"Ay0\",TESTSTR:TESTSTR,ONESTRING:ONESTRING,DECIMALSTRING:DECIMALSTRING,STRINGUNDEFINED:STRINGUNDEFINED,POSITION_TOP:POSITION_TOP,POSITION_RIGHT:POSITION_RIGHT,POSITION_BOTTOM:POSITION_BOTTOM,POSITION_LEFT:POSITION_LEFT,POSITION_CENTER:POSITION_CENTER,POSITION_MIDDLE:POSITION_MIDDLE,FC_CONFIG_STRING:FC_CONFIG_STRING,SHAPE_RECT:SHAPE_RECT,HUNDREDSTRING:HUNDREDSTRING,PXSTRING:PXSTRING,COMMASPACE:COMMASPACE,regex:{stripWhitespace:stripWhitespace,dropHash:dropHash,startsRGBA:startsRGBA,cleanColorCode:cleanColorCode,breakPlaceholder:breakPlaceholder,hexcode:hexcode},extend2:extend2,deltend:deltend,imprint:imprint,pluck:pluck,pluckNumber:pluckNumber,getFirstDefinedValue:getFirstDefinedValue,pluckFontSize:pluckFontSize,getValidValue:getValidValue,getDefinedColor:getDefinedColor,getFirstValue:getFirstValue,getFirstColor:getFirstColor,getColorCodeString:getColorCodeString,pluckColor:pluckColor,getFirstAlpha:getFirstAlpha,parsePointValue:parsePointValue,parseUnsafeString:parseUnsafeString,toPrecision:toPrecision,stubFN:function(){},falseFN:function(){return false},stableSort:function(arr,sortFunction){var length=arr.length,i;for(i=0;i<length;i++){arr[i].ss_i=i}arr.sort(function(a,b){var sortValue=sortFunction(a,b);return sortValue===0?a.ss_i-b.ss_i:sortValue});for(i=0;i<length;i++){delete arr[i].ss_i}},hasSVG:hasSVG,isIE:isIE,getLinkAction:getLinkAction,graphics:{parseAlpha:parseAlpha,convertColor:convertColor,getDarkColor:getDarkColor,getLightColor:getLightColor,mapSymbolName:mapSymbolName,getColumnColor:getColumnColor,getAngle:getAngle,parseColor:parseColor,getValidColor:getValidColor,HSBtoRGB:HSBtoRGB,RGBtoHSB:RGBtoHSB,RGBtoHex:RGBtoHex,HEXtoRGB:HEXtoRGB},setImageDisplayMode:setImageDisplayMode,SmartLabelManager:SmartLabelManager,setLineHeight:setLineHeight,NumberFormatter:NumberFormatter,getAxisLimits:getAxisLimits,createTrendLine:createTrendLine,getDashStyle:getDashStyle,axisLabelAdder:axisLabelAdder,chartAPI:chartAPI,createDialog:createDialog,defaultPaletteOptions:{bgColor:[\"CBCBCB,E9E9E9\",\"CFD4BE,F3F5DD\",\"C5DADD,EDFBFE\",\"A86402,FDC16D\",\"FF7CA0,FFD1DD\"],bgAngle:[270,270,270,270,270],bgRatio:[BGRATIOSTRING,BGRATIOSTRING,BGRATIOSTRING,BGRATIOSTRING,BGRATIOSTRING],bgAlpha:[\"50,50\",\"60,50\",\"40,20\",\"20,10\",\"30,30\"],canvasBgColor:[COLOR_WHITE,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE],canvasBgAngle:[0,0,0,0,0],canvasBgAlpha:[HUNDREDSTRING,HUNDREDSTRING,HUNDREDSTRING,HUNDREDSTRING,HUNDREDSTRING],canvasBgRatio:[BLANK,BLANK,BLANK,BLANK,BLANK],canvasBorderColor:[\"545454\",\"545454\",\"415D6F\",\"845001\",\"68001B\"],canvasBorderAlpha:[100,100,100,90,100],showShadow:[0,1,1,1,1],divLineColor:[\"717170\",\"7B7D6D\",\"92CDD6\",\"965B01\",\"68001B\"],divLineAlpha:[40,45,65,40,30],altHGridColor:[\"EEEEEE\",\"D8DCC5\",\"99C4CD\",\"DEC49C\",\"FEC1D0\"],altHGridAlpha:[50,35,10,20,15],altVGridColor:[\"767575\",\"D8DCC5\",\"99C4CD\",\"DEC49C\",\"FEC1D0\"],altVGridAlpha:[10,20,10,15,10],anchorBgColor:[COLOR_WHITE,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE],toolTipBgColor:[COLOR_WHITE,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE],toolTipBorderColor:[\"545454\",\"545454\",\"415D6F\",\"845001\",\"68001B\"],baseFontColor:[\"555555\",\"60634E\",\"025B6A\",\"A15E01\",\"68001B\"],borderColor:[\"767575\",\"545454\",\"415D6F\",\"845001\",\"68001B\"],borderAlpha:[50,50,50,50,50],legendBgColor:[COLOR_WHITE,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE],legendBorderColor:[\"545454\",\"545454\",\"415D6F\",\"845001\",\"D55979\"],plotGradientColor:[COLOR_WHITE,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE],plotBorderColor:[\"333333\",\"8A8A8A\",COLOR_WHITE,COLOR_WHITE,COLOR_WHITE],plotFillColor:[\"767575\",\"D8DCC5\",\"99C4CD\",\"DEC49C\",\"FEC1D0\"],bgColor3D:[COLOR_WHITE,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE],bgAlpha3D:[HUNDREDSTRING,HUNDREDSTRING,HUNDREDSTRING,HUNDREDSTRING,HUNDREDSTRING],bgAngle3D:[90,90,90,90,90],bgRatio3D:[BLANK,BLANK,BLANK,BLANK,BLANK],canvasBgColor3D:[\"DDE3D5\",\"D8D8D7\",\"EEDFCA\",\"CFD2D8\",\"FEE8E0\"],canvasBaseColor3D:[\"ACBB99\",\"BCBCBD\",\"C8A06C\",\"96A4AF\",\"FAC7BC\"],divLineColor3D:[\"ACBB99\",\"A4A4A4\",\"BE9B6B\",\"7C8995\",\"D49B8B\"],divLineAlpha3D:[100,100,100,100,100],legendBgColor3D:[\"F0F3ED\",\"F3F3F3\",\"F7F0E8\",\"EEF0F2\",\"FEF8F5\"],legendBorderColor3D:[\"C6CFB8\",\"C8C8C8\",\"DFC29C\",\"CFD5DA\",\"FAD1C7\"],toolTipbgColor3D:[COLOR_WHITE,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE],toolTipBorderColor3D:[\"49563A\",\"666666\",\"49351D\",\"576373\",\"681C09\"],baseFontColor3D:[\"49563A\",\"4A4A4A\",\"49351D\",\"48505A\",\"681C09\"],anchorBgColor3D:[COLOR_WHITE,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE,COLOR_WHITE]}})}());(function(f){f.fn.drag=function(n,j,m){var l=typeof n==\"string\"?n:\"\",k=f.isFunction(n)?n:f.isFunction(j)?j:null;if(l.indexOf(\"drag\")!==0){l=\"drag\"+l}m=(n==k?j:m)||{};return k?this.bind(l,m,k):this.trigger(l)};var c=f.event,e=\"ontouchstart\"in document.documentElement,b=e?\"touchstart\":\"mousedown\",g=e?\"touchmove touchend\":\"mousemove mouseup\",h=function(l,k){var j,m;if(!k.touchXY||!l.originalEvent){return l}j=l.originalEvent||l.sourceEvent;m=j.changedTouches||j.touches;if(m&&m.length){f.extend(l,m[0])}return l},a=c.special,d=a.drag={defaults:{which:1,distance:0,not:\":input\",handle:null,relative:false,drop:false,click:false,touchXY:true},datakey:\"dragdata\",livekey:\"livedrag\",add:function(l){var k=f.data(this,d.datakey),j=l.data||{};k.related+=1;if(!k.live&&l.selector){k.live=true;c.add(this,\"draginit.\"+d.livekey,d.delegate)}f.each(d.defaults,function(m,n){if(j[m]!==undefined){k[m]=j[m]}})},remove:function(){f.data(this,d.datakey).related-=1},setup:function(){if(f.data(this,d.datakey)){return}var j=f.extend({related:0},d.defaults);f.data(this,d.datakey,j);c.add(this,b,d.init,j);if(this.attachEvent){this.attachEvent(\"ondragstart\",d.dontstart)}},teardown:function(){if(f.data(this,d.datakey).related){return}f.removeData(this,d.datakey);c.remove(this,b,d.init);c.remove(this,\"draginit\",d.delegate);d.textselect(true);if(this.detachEvent){this.detachEvent(\"ondragstart\",d.dontstart)}},init:function(m){var k=m.data,l,j=m.originalEvent||m.sourceEvent,n=j?(j.changedTouches||j.touches):[];if(n&&n.length){if(n.length>1){return}else{h(m,k)}}else{if(k.which>0&&m.which!=k.which){return}}if(f(m.target).is(k.not)){return}if(k.handle&&!f(m.target).closest(k.handle,m.currentTarget).length){return}k.propagates=1;k.interactions=[d.interaction(this,k)];k.target=m.target;k.pageX=m.pageX;k.pageY=m.pageY;k.dragging=null;l=d.hijack(m,\"draginit\",k);if(!k.propagates){return}l=d.flatten(l);if(l&&l.length){k.interactions=[];f.each(l,function(){k.interactions.push(d.interaction(this,k))})}k.propagates=k.interactions.length;if(k.drop!==false&&a.drop){a.drop.handler(m,k)}d.textselect(false);c.add(document,g,d.handler,k);if(!e){return false}},interaction:function(k,j){return{drag:k,callback:new d.callback(),droppable:[],offset:f(k)[j.relative?\"position\":\"offset\"]()||{top:0,left:0}}},handler:function(k){var j=k.data;if(!j.dragging&&(k.type===\"mousemove\"||k.type===\"touchmove\")){if(Math.pow(k.pageX-j.pageX,2)+Math.pow(k.pageY-j.pageY,2)<Math.pow(j.distance,2)){return}k.target=j.target;d.hijack(k,\"dragstart\",j);if(j.propagates){j.dragging=true}}switch(k.type){case\"touchmove\":if(j.dragging){k.preventDefault();h(k,j)}case\"mousemove\":if(j.dragging){d.hijack(k,\"drag\",j);if(j.propagates){if(j.drop!==false&&a.drop){a.drop.handler(k,j)}break}k.type=\"mouseup\"}case\"touchend\":if(j.dragging){h(k,j)}case\"mouseup\":c.remove(document,g,d.handler);if(j.dragging){if(j.drop!==false&&a.drop){a.drop.handler(k,j)}d.hijack(k,\"dragend\",j)}d.textselect(true);if(j.click===false&&j.dragging){jQuery.event.triggered=true;setTimeout(function(){jQuery.event.triggered=false},20);j.dragging=false}break}},delegate:function(l){var j=[],m,k=f.data(this,\"events\")||{};f.each(k.live||[],function(n,o){if(o.preType.indexOf(\"drag\")!==0){return}m=f(l.target).closest(o.selector,l.currentTarget)[0];if(!m){return}c.add(m,o.origType+\".\"+d.livekey,o.origHandler,o.data);if(f.inArray(m,j)<0){j.push(m)}});if(!j.length){return false}return f(j).bind(\"dragend.\"+d.livekey,function(){c.remove(this,\".\"+d.livekey)})},hijack:function(k,q,t,r,m){if(!t){return}var s={event:k.originalEvent,type:k.type},o=q.indexOf(\"drop\")?\"drag\":\"drop\",v,n=r||0,l,j,u,p=!isNaN(r)?r:t.interactions.length;k.type=q;k.sourceEvent=s.event;k.originalEvent=null;t.results=[];do{if(l=t.interactions[n]){if(q!==\"dragend\"&&l.cancelled){continue}u=d.properties(k,t,l);l.results=[];f(m||l[o]||t.droppable).each(function(x,w){u.target=w;v=w?c.handle.call(w,k,u):null;if(v===false){if(o==\"drag\"){l.cancelled=true;t.propagates-=1}if(q==\"drop\"){l[o][x]=null}}else{if(q==\"dropinit\"){l.droppable.push(d.element(v)||w)}}if(q==\"dragstart\"){l.proxy=f(d.element(v)||l.drag)[0]}l.results.push(v);delete k.result;if(q!==\"dropinit\"){return v}});t.results[n]=d.flatten(l.results);if(q==\"dropinit\"){l.droppable=d.flatten(l.droppable)}if(q==\"dragstart\"&&!l.cancelled){u.update()}}}while(++n<p);k.type=s.type;k.originalEvent=s.event;return d.flatten(t.results)},properties:function(l,j,k){var m=k.callback;m.drag=k.drag;m.proxy=k.proxy||k.drag;m.startX=j.pageX;m.startY=j.pageY;m.deltaX=l.pageX-j.pageX;m.deltaY=l.pageY-j.pageY;m.originalX=k.offset.left;m.originalY=k.offset.top;m.offsetX=l.pageX-(j.pageX-m.originalX);m.offsetY=l.pageY-(j.pageY-m.originalY);m.drop=d.flatten((k.drop||[]).slice());m.available=d.flatten((k.droppable||[]).slice());return m},element:function(j){if(j&&(j.jquery||j.nodeType==1)){return j}},flatten:function(j){return f.map(j,function(k){return k&&k.jquery?f.makeArray(k):k&&k.length?d.flatten(k):k})},textselect:function(j){f(document)[j?\"unbind\":\"bind\"](\"selectstart\",d.dontstart).attr(\"unselectable\",j?\"off\":\"on\").css(\"MozUserSelect\",j?\"\":\"none\")},dontstart:function(){return false},callback:function(){}};d.callback.prototype={update:function(){if(a.drop&&this.available.length){f.each(this.available,function(j){a.drop.locate(this,j)})}}};a.draginit=a.dragstart=a.dragend=d})(jQuery);(function(c){var a=[\"DOMMouseScroll\",\"mousewheel\"];c.event.special.wheelchange={setup:function(){if(this.addEventListener){for(var d=a.length;d;){this.addEventListener(a[--d],b,false)}}else{this.onmousewheel=b}},teardown:function(){if(this.removeEventListener){for(var d=a.length;d;){this.removeEventListener(a[--d],b,false)}}else{this.onmousewheel=null}}};c.fn.extend({wheelchange:function(d){return d?this.bind(\"wheelchange\",d):this.trigger(\"wheelchange\")},unwheelchange:function(d){return this.unbind(\"wheelchange\",d)}});function b(j){var g=j||window.event,f=[].slice.call(arguments,1),k=0,h=true,e=0,d=0;j=c.event.fix(g);j.type=\"wheelchange\";if(j.wheelDelta){k=j.wheelDelta/120}if(j.detail){k=-j.detail/3}d=k;if(g.axis!==undefined&&g.axis===g.HORIZONTAL_AXIS){d=0;e=-1*k}if(g.wheelDeltaY!==undefined){d=g.wheelDeltaY/120}if(g.wheelDeltaX!==undefined){e=-1*g.wheelDeltaX/120}f.unshift(j,k,e,d);return c.event.handle.apply(this,f)}})(jQuery);(function(){var u=FusionCharts([\"private\",\"modules.renderer.highcharts-src\"]);if(u===undefined){return}var ae=u.hcLib,ca=ae.pluck,ab=ae.pluckNumber,aK=ae.graphics.getDarkColor,be=ae.graphics.getLightColor,bR=ae.graphics.convertColor,bL=ae.getColorCodeString,bs=ae.graphics.getAngle,P=ae.regex.dropHash,aB=ae.regex.startsRGBA,aN=ae.regex.hexcode,a5=ae.HASHSTRING,aO=ae.BLANKSTRING,bh=ae.setImageDisplayMode,n=ae.POSITION_TOP,H=ae.POSITION_RIGHT,a2=ae.POSITION_BOTTOM,bu=ae.POSITION_LEFT,co=ae.POSITION_MIDDLE,aF=ae.BGRATIOSTRING,y=ae.HUNDREDSTRING,p=ae.ZEROSTRING,b0=ae.FC_CONFIG_STRING,bc=ae.extend2,S=ae.getFirstValue,aY=ae.getValidValue,x=ae.toPrecision,aC=ae.COLOR_TRANSPARENT,k=ae.getFirstColor,bg=ae.COMMASTRING,bN={column:[\"column3d\",\"bar3d\",\"area3d\",\"line3d\"],area:[\"area3d\",\"column3d\",\"bar3d\",\"line3d\"]},bW={column3d:function(M,cr){var ct,A,cq=0,cs,Z,cp,cu,L=[];for(ct=0,A=M.length;ct<A;ct+=1){cq=cj(M[ct].data.length,cq)}if(cq>0){Z=M[0];cr=Z.chart;Z.initGroup();cp=cr.column3DStacked=ca(Z.options.stacking,cr.options.plotOptions.column3d&&cr.options.plotOptions.column3d.stacking,cr.options.plotOptions.series.stacking)!==undefined?true:false;for(ct=0;ct<cq;ct+=1){for(cs=0,A=M.length;cs<A;cs+=1){Z=M[cs];cu=Z.data[ct];if(cu&&cu.y!==null){if(cu.y<0&&cp){L.push(cs)}else{M[cs].drawNthPoint(ct)}}}if(cp){for(A=L.length-1;A>=0;A-=1){M[L.pop()].drawNthPoint(ct)}}}for(cs=0,A=M.length;cs<A;cs+=1){M[cs].render()}}},bar3d:function(M,cr){var ct,A,cq=0,cs,Z,cp,cu,L=[];for(ct=0,A=M.length;ct<A;ct+=1){cq=cj(M[ct].data.length,cq)}if(cq>0){Z=M[0];cr=Z.chart;Z.initGroup();cp=cr.column3DStacked=ca(Z.options.stacking,cr.options.plotOptions.column3d&&cr.options.plotOptions.column3d.stacking,cr.options.plotOptions.series.stacking)!==undefined?true:false;for(ct=cq-1;ct>=0;ct-=1){for(cs=0,A=M.length;cs<A;cs+=1){Z=M[cs];cu=Z.data[ct];if(cu&&cu.y!==null){if(cu.y<=0&&cp){L.push(cs)}else{M[cs].drawNthPoint(ct)}}}if(cp){for(A=L.length-1;A>=0;A-=1){M[L.pop()].drawNthPoint(ct)}}}for(cs=0,A=M.length;cs<A;cs+=1){M[cs].render()}}},common:function(L,A){}},b2=function(A){if(bW[A]){return bW[A]}else{return bW.common}},J={column3d:true,bar3d:true,area3d:true,line3d:true},bK=function(cE,M,cw){var cs=0,cI=0,cq=0,cJ=0,cG=0,A=0,L,cr,cL=cE.xDepth,cp=cE.yDepth,cA,cF,cx,cu=cE.options.chart.series2D3Dshift,cv,cC,Z,cy,cD,cz,cK=0,cH=0,ct,cB;if(M.column3d){cs=M.column3d.length}if(M.bar3d){cJ=M.bar3d.length}if(M.area3d){cI=M.area3d.length}if(M.line3d){cq=M.line3d.length}if(cw){cG=(cs?1:0)+(cJ?1:0)+(cI?1:0)+(cq?1:0)}else{cG=(cs?1:0)+(cJ?1:0)+cI+cq}cE.num3dSeriesType=cG;cK=0;cH=0;cC=cp/cG;cv=cL/cG;for(L in M){if(J[L]){cB=M[L];Z=(L===\"column3d\"||L===\"bar3d\"||cw)?false:true;cK+=cv;cH+=cC;for(cy=0,cD=cB.length;cy<cD;cy+=1){cz=cB[cy];cz.depthXDisplacement=-cK;cz.depthYDisplacement=cH;if(Z){cK+=cz.xDepth=cv;cH+=cz.yDepth=cC}else{cz.xDepth=cv;cz.yDepth=cC}}ct=b2(L);ct(cB,cE);delete M[L]}}for(L in M){cA=cE.plotLeft-cK;if(cu){cF=cE.plotTop+cH}else{cF=cE.plotTop}for(cy=0,cr=M[L].length;cy<cr;cy+=1){M[L][cy].options.zIndex=4;M[L][cy].render();M[L][cy].group.translate(cA,cF)}}};function t(cw,cv,cD,cy,L,cN,cF){var cB=[bM],cx=k(typeof cN.color===\"string\"?cN.color:cN.color.FCcolor.color),cG,cM,cL,ct,cs,cr,cK,cJ,cq,cp,cH,cI=cF.box.tagName&&cF.box.tagName.toLowerCase()===\"div\",M=\"Z\",cA=\"A\",cu=\"at\",cC,cz=0.5,cE;cG=cx.replace(P,\"\");cC=be(cG,40);cE=aK(cG,60).replace(P,a5);cG={FCcolor:{color:cG+\",\"+cG+\",\"+cC+\",\"+cG+\",\"+cG,ratio:\"0,30,30,30,10\",angle:0,alpha:\"100,100,100,100,100\"}};switch(L){case\"column\":case\"dragcolumn\":case\"column3d\":cM=parseInt((cD*0.25)*100)/100;cL=parseInt((cM*0.5)*100)/100;ct=parseInt((cy*0.3)*100)/100;cs=parseInt((cy*0.6)*100)/100;cB=cB.concat([cw,cv+cy,bO,cw,cv+ct,cw+cM,cv+ct,cw+cM,cv+cy,cw+cM+cL,cv+cy,cw+cM+cL,cv,cw+cM+cM+cL,cv,cw+cM+cM+cL,cv+cy,cw+cM+cM+cL+cL,cv+cy,cw+cM+cM+cL+cL,cv+cs,cw+cD,cv+cs,cw+cD,cv+cy,M]);cG.FCcolor.angle=270;break;case\"bar\":case\"bar3d\":cM=cD*0.3;cL=cD*0.6;ct=cy/4;cs=ct/2;cB=cB.concat([cw,cv,bO,cw+cL,cv,cw+cL,cv+ct,cw,cv+ct,cw,cv+ct+cs,cw+cD,cv+ct+cs,cw+cD,cv+ct+cs+ct,cw,cv+(2*ct)+cs,cw,cv+2*(ct+cs),cw+cM,cv+2*(ct+cs),cw+cM,cv+cy,cw,cv+cy,M]);break;case\"area\":case\"area3d\":case\"areaspline\":case\"dragarea\":cM=cD*0.3;cL=cD*0.6;ct=cy*0.6;cs=cy*0.2;cr=cy*0.8;cB=cB.concat([cw,cv+cr,bO,cw,cv+ct,cw+cM,cv+cs,cw+cL,cv+ct,cw+cD,cv+cs,cw+cD,cv+cr,M]);cG.FCcolor.angle=270;break;case\"pie\":case\"pie3d\":cD=cD;cy=cy;cM=cD/2;cL=cD*0.7;ct=cy/2;cs=cy*0.7;cK=cw,cJ=cw,cq=cv,cp=cv;if(!cI){cB=cB.concat([cJ+cM,cp+ct,bO,cw+cL,cp,cA,cM,ct,0,0,0,cJ,cp+ct,bO,cJ+cM,cp+ct,bM,cJ+cM,cq+ct,bO,cJ,cq+ct,cA,cM,ct,0,0,0,cJ+cL,cq+cy,bO,cJ+cM,cq+ct,bM,cK+cM,cv+ct,bO,cK+cL,cq+cy,cA,cM+1,ct+1,0,0,0,cK+cL,cp,M])}else{cB=cB.concat([cJ+cM,cp+ct,bO,cw+cL,cp,cu,cw,cv,cw+cD,cv+cy,cw+cL,cp,cJ,cp+ct,bO,cJ+cM,cp+ct,bM,cJ+cM,cq+ct,bO,cJ,cq+ct,cu,cw,cv,cw+cD,cv+cy,cJ,cq+ct,cJ+cL,cq+cy,bO,cJ+cM,cq+ct,bM,cK+cM,cv+ct,bO,cK+cL,cq+cy,cu,cw,cv,cw+cD,cv+cy,cK+cL,cq+cy,cK+cL,cp,M])}break;case\"boxandwhisker2d\":cB=cB.concat([cw,cv,bO,cw+cD,cv,cw+cD,cv+cy,cw,cv+cy,M]);cG=cN.color;cE=\"#000000\";break;default:cB=cB.concat([cw,cv,bO,cw+cD,cv,cw+cD,cv+cy,cw,cv+cy,M]);cG.FCcolor.angle=270;cG.FCcolor.ratio=\"0,70,30\"}return{path:cB,color:cG,strokeWidth:cz,strokeColor:cE}}var bV=document,bi=window,a9=Math,o=a9.round,bz=a9.floor,aR=a9.ceil,cj=a9.max,aE=a9.min,f=a9.abs,cc=a9.cos,ap=a9.sin,ad=a9.PI,m=a9.sqrt,aQ=ad/180,aq=a9.atan2,cm=ad/2,br=ad*1.5,X=ad*2,B=navigator.userAgent,w=/msie/i.test(B)&&!bi.opera,O=bV.documentMode===8,W=/AppleWebKit/.test(B),bE=/Firefox/.test(B),cb=!!bV.createElementNS&&!!bV.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\").createSVGRect,ck=bE&&parseInt(B.split(\"Firefox/\")[1],10)<4,bf=\"http://www.w3.org/2000/svg\",b8,R=bV.documentElement.ontouchstart!==undefined,c={},bo=0,e=1,au,bQ,b6,cn,aI,j,aa=\"div\",aG=\"absolute\",Y=\"relative\",av=\"hidden\",bl=\"highcharts-\",aD=O?\"visible\":\"\",al=\"px\",K=\"none\",bM=\"M\",bO=\"L\",bT=\"A\",a3=\"AT\",bH=\"WA\",bC=\"Z\",bb={Q:\"L\",Z:\"x\"},ce=\"rgba(192,192,192,\"+(cb?0.000001:0.002)+\")\",aA=\"\",a6=\"hover\",bF=\"select\",ao,N,ak,aL,bx,an,am,aH,bZ,aT,b3,U,ar=bi.HCAdapter,cd=ar||{},T=cd.each,bP=cd.grep,ax=cd.map,aZ=cd.merge,I=cd.addEvent,bj=cd.removeEvent,bJ=cd.fireEvent,s=cd.getTouchEvent,z=cd.animate,bd=cd.stop,a={},bm={},bD;function by(L,A){var M;if(!L){L={}}for(M in A){L[M]=A[M]}return L}function b4(A,L){return parseInt(A,L||10)}function bG(A){return typeof A===\"string\"}function ch(A){return typeof A===\"object\"}function aV(A){return Object.prototype.toString.call(A)===\"[object Array]\"}function aJ(A){return typeof A===\"number\"}function C(A){return a9.log(A)/a9.LN10}function F(A){return a9.pow(10,A)}function af(A,M){var L=A.length;while(L--){if(A[L]===M){A.splice(L,1);break}}}function at(A){return A!==j&&A!==null}function ag(M,cq,cp){var L,Z=\"setAttribute\",A;if(bG(cq)){if(at(cp)){M[Z](cq,cp)}else{if(M&&M.getAttribute){A=M.getAttribute(cq)}}}else{if(at(cq)&&ch(cq)){for(L in cq){M[Z](L,cq[L])}}}return A}function bt(A){return aV(A)?A:[A]}function a4(){var L=arguments,M,A,Z=L.length;for(M=0;M<Z;M++){A=L[M];if(typeof A!==\"undefined\"&&A!==null){return A}}return j}function cf(A,L){if(w){if(L&&L.opacity!==j){L.filter=\"alpha(opacity=\"+(L.opacity*100)+\")\"}}by(A.style,L)}function bA(A,cq,cp,Z,M){var L=bV.createElement(A);if(cq){by(L,cq)}if(M){cf(L,{padding:0,border:K,margin:0})}if(cp){cf(L,cp)}if(Z){Z.appendChild(L)}return L}function bv(M,A){var L=function(){};L.prototype=new M();by(L.prototype,A);return L}function l(Z,M,cu,ct){var A=bQ.lang,L=Z,cs=isNaN(M=f(M))?2:M,cr=cu===undefined?A.decimalPoint:cu,cv=ct===undefined?A.thousandsSep:ct,cw=L<0?\"-\":\"\",cq=String(b4(L=f(+L||0).toFixed(cs))),cp=cq.length>3?cq.length%3:0;return cw+(cp?cq.substr(0,cp)+cv:\"\")+cq.substr(cp).replace(/(\\d{3})(?=\\d)/g,\"$1\"+cv)+(cs?cr+f(L-cq).toFixed(cs).slice(2):\"\")}b6=function(cw,cr,cp){function L(cA){return cA.toString().replace(/^([0-9])$/,\"0$1\")}if(!at(cr)||isNaN(cr)){return\"Invalid date\"}cw=a4(cw,\"%Y-%m-%d %H:%M:%S\");var M=new Date(cr*e),cy,cv=M[ak](),cs=M[aL](),cx=M[bx](),cq=M[an](),cz=M[am](),A=bQ.lang,cu=A.weekdays,ct=A.months,Z={a:cu[cs].substr(0,3),A:cu[cs],d:L(cx),e:cx,b:A.shortMonths[cq],B:A.months[cq],m:L(cq+1),y:cz.toString().substr(2,2),Y:cz,H:L(cv),I:L((cv%12)||12),l:(cv%12)||12,M:L(M[N]()),p:cv<12?\"AM\":\"PM\",P:cv<12?\"am\":\"pm\",S:L(M.getSeconds())};for(cy in Z){cw=cw.replace(\"%\"+cy,Z[cy])}return cp?cw.substr(0,1).toUpperCase()+cw.substr(1):cw};function bB(A){var L={left:A.offsetLeft,top:A.offsetTop};A=A.offsetParent;while(A){L.left+=A.offsetLeft;L.top+=A.offsetTop;if(A!==bV.body&&A!==bV.documentElement){L.left-=A.scrollLeft;L.top-=A.scrollTop}A=A.offsetParent}return L}function ac(){this.color=0;this.symbol=0}ac.prototype={wrapColor:function(A){if(this.color>=A){this.color=0}},wrapSymbol:function(A){if(this.symbol>=A){this.symbol=0}}};function aw(L,cq,M,Z,cw,cu,ct){var A=ct.x,cv=ct.y,cs=A-L+M-25,cr=cv-cq+Z+10,cp;if(cs<7){cs=M+A+15}if((cs+L)>(M+cw)){cs-=(cs+L)-(M+cw);cr-=cq;cp=true}if(cr<5){cr=5;if(cp&&cv>=cr&&cv<=(cr+cq)){cr=cv+cq-5}}else{if(cr+cq>Z+cu){cr=Z+cu-cq-5}}return{x:cs,y:cr}}function aW(L,A){var Z=L.length,M;for(M=0;M<Z;M++){L[M].ss_i=M}L.sort(function(cr,cp){var cq=A(cr,cp);return cq===0?cr.ss_i-cp.ss_i:cq});for(M=0;M<Z;M++){delete L[M].ss_i}}function bX(M){var L=M.length,A=M[0];while(L--){if(M[L]<A){A=M[L]}}return A}function aX(M){var L=M.length,A=M[0];while(L--){if(M[L]>A){A=M[L]}}return A}function bp(A){var L;for(L in A){if(A[L]&&A[L].destroy){A[L].destroy()}delete A[L]}}aI={init:function(cp,cu,cv){cu=cu||\"\";var L=cp.shift,M=cu.indexOf(\"C\")>-1,Z=M?7:3,cs,cw,cr,A=cu.split(\" \"),cq=[].concat(cv),cy,ct,cx=function(cz){cr=cz.length;while(cr--){if(cz[cr]===bM){cz.splice(cr+1,0,cz[cr+1],cz[cr+2],cz[cr+1],cz[cr+2])}}};if(M){cx(A);cx(cq)}if(cp.isArea){cy=A.splice(A.length-6,6);ct=cq.splice(cq.length-6,6)}if(L){cq=[].concat(cq).splice(0,Z).concat(cq);cp.shift=false}if(A.length){cs=cq.length;while(A.length<cs){cw=[].concat(A).splice(A.length-Z,Z);if(M){cw[Z-6]=cw[Z-2];cw[Z-5]=cw[Z-1]}A=A.concat(cw)}}if(cy){A=A.concat(cy);cq=cq.concat(ct)}return[A,cq]},step:function(cr,L,cq,A){var Z=[],cp=cr.length,M;if(cq===1){Z=A}else{if(cp===L.length&&cq<1){while(cp--){M=parseFloat(cr[cp]);Z[cp]=isNaN(M)?cr[cp]:cq*(parseFloat(L[cp]-M))+M}}else{Z=L}}return Z}};function cg(L,A){cn=a4(L,A.animation)}if(ar&&ar.init){ar.init(aI)}if(!ar&&bi.jQuery){var Q=jQuery;T=ae.each=function(L,cp,Z){var M=0,A=L.length;if(Z){for(;M<A;M++){if(cp.call(Z,L[M],M,L)===false){return M}}}else{for(;M<A;M++){if(cp.call(L[M],L[M],M,L)===false){return M}}}};bP=Q.grep;ax=function(L,cp){var Z=[],M=0,A=L.length;for(;M<A;M++){Z[M]=cp.call(L[M],L[M],M,L)}return Z};aZ=ae.merge=function(){var A=arguments;return Q.extend(true,null,A[0],A[1],A[2],A[3])};I=function(L,M,A,Z){Q(L).bind(M,Z,A)};bj=function(M,A,L){var Z=bV.removeEventListener?\"removeEventListener\":\"detachEvent\";if(bV[Z]&&!M[Z]){M[Z]=function(){}}Q(M).unbind(A,L)};bJ=function(Z,M,L,A){var cq=Q.Event(M),cp=\"detached\"+M;by(cq,L);if(Z[M]){Z[cp]=Z[M];Z[M]=null}Q(Z).trigger(cq);if(Z[cp]){Z[M]=Z[cp];Z[cp]=null}if(A&&!cq.isDefaultPrevented()){A(cq)}};s=function(A){return(R&&A.sourceEvent&&A.sourceEvent.touches&&A.sourceEvent.touches[0])||A};z=function(M,Z,A){var L=Q(M);if(Z.d){M.toD=Z.d;Z.d=1}L.stop(false,true);L.animate(Z,A)};bd=function(A){Q(A).stop()};Q.extend(Q.easing,{easeOutQuad:function(L,M,A,cp,Z){return-cp*(M/=Z)*(M-2)+A}});var h=jQuery.fx,a8=h.step,b9=h.prototype.cur;T([[a8,\"_default\"],[a8,\"width\"],[a8,\"height\"],[h.prototype,\"cur\"]],function(A){var L,cq=A[0],M=A[1],cp=cq[M],Z;if(cp){cq[M]=function(cr){if(M===\"cur\"){cr=this}Z=cr.elem;if(Z.attr){L=Z.attr(cr.prop,cr.now)}else{L=cp.apply(this,arguments)}return L}}});a8.d=function(M){var L=M.elem;if(!M.started){var A=aI.init(L,L.d,L.toD);M.start=A[0];M.end=A[1];M.started=true}L.attr(\"d\",aI.step(M.start,M.end,M.pos,L.toD))};Q.fx.prototype.cur=function(){var L=this.elem,A;if(L.attr){A=L.attr(this.prop)}else{A=b9.apply(this,arguments)}return A}}aI={init:function(cp,cu,cv){cu=cu||\"\";var L=cp.shift,M=cu.indexOf(\"C\")>-1,Z=M?7:3,cs,cw,cr,A=cu.split(\" \"),cq=[].concat(cv),cy,ct,cx=function(cz){cr=cz.length;while(cr--){if(cz[cr]===bM){cz.splice(cr+1,0,cz[cr+1],cz[cr+2],cz[cr+1],cz[cr+2])}}};if(M){cx(A);cx(cq)}if(cp.isArea){cy=A.splice(A.length-6,6);ct=cq.splice(cq.length-6,6)}if(L){cq=[].concat(cq).splice(0,Z).concat(cq);cp.shift=false}if(A.length){cs=cq.length;while(A.length<cs){cw=[].concat(A).splice(A.length-Z,Z);if(M){cw[Z-6]=cw[Z-2];cw[Z-5]=cw[Z-1]}A=A.concat(cw)}}if(cy){A=A.concat(cy);cq=cq.concat(ct)}return[A,cq]},step:function(cr,L,cq,A){var Z=[],cp=cr.length,M;if(cq===1){Z=A}else{if(cp===L.length&&cq<1){while(cp--){M=parseFloat(cr[cp]);Z[cp]=isNaN(M)?cr[cp]:cq*(parseFloat(L[cp]-M))+M}}else{Z=L}}return Z}};function ah(){var A=bQ.global.useUTC;ao=A?Date.UTC:function(cp,cq,M,L,Z,cr){return new Date(cp,cq,a4(M,1),a4(L,0),a4(Z,0),a4(cr,0)).getTime()};N=A?\"getUTCMinutes\":\"getMinutes\";ak=A?\"getUTCHours\":\"getHours\";aL=A?\"getUTCDay\":\"getDay\";bx=A?\"getUTCDate\":\"getDate\";an=A?\"getUTCMonth\":\"getMonth\";am=A?\"getUTCFullYear\":\"getFullYear\";aH=A?\"setUTCMinutes\":\"setMinutes\";bZ=A?\"setUTCHours\":\"setHours\";aT=A?\"setUTCDate\":\"setDate\";b3=A?\"setUTCMonth\":\"setMonth\";U=A?\"setUTCFullYear\":\"setFullYear\"}function bn(A){bQ=aZ(bQ,A);az=bQ.plotOptions;ah();return bQ}function aU(){return bQ}function b5(A){if(!au){au=bA(aa)}if(A){au.appendChild(A)}au.innerHTML=\"\"}var D={enabled:true,align:\"center\",x:0,y:15,style:{color:\"#666\",fontSize:\"11px\",lineHeight:\"14px\"}};bQ={colors:[\"#4572A7\",\"#AA4643\",\"#89A54E\",\"#80699B\",\"#3D96AE\",\"#DB843D\",\"#92A8CD\",\"#A47D7C\",\"#B5CA92\"],symbols:[\"circle\",\"diamond\",\"square\",\"triangle\",\"triangle-down\"],lang:{loading:\"Loading...\",months:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],shortMonths:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"June\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],weekdays:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],decimalPoint:\".\",resetZoom:\"Reset zoom\",resetZoomTitle:\"Reset zoom level 1:1\",thousandsSep:\",\"},callbacks:[],global:{useUTC:true},chart:{nativeZoom:true,reflow:false,borderColor:\"#4572A7\",borderRadius:5,defaultSeriesType:\"line\",ignoreHiddenSeries:true,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'\"Lucida Grande\", \"Lucida Sans Unicode\", Verdana, Arial, Helvetica, sans-serif',fontSize:\"12px\",cursor:\"default\",\"font-weight\":\"normal\",\"font-style\":\"normal\"},backgroundColor:\"#FFFFFF\",plotBorderColor:\"#C0C0C0\"},title:{text:\"Chart title\",align:\"center\",y:15,style:{color:\"#3E576F\",fontSize:\"16px\"}},subtitle:{text:\"\",align:\"center\",y:30,style:{color:\"#6D869F\"}},plotOptions:{line:{allowPointSelect:false,showCheckbox:false,animation:{duration:1000},events:{},lineWidth:2,shadow:true,marker:{enabled:true,lineWidth:0,radius:4,lineColor:\"#FFFFFF\",states:{hover:{},select:{fillColor:\"#FFFFFF\",lineColor:\"#000000\",lineWidth:2}}},point:{events:{}},dataLabels:aZ(D,{enabled:false,y:-6,formatter:function(){return this.y}}),showInLegend:true,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:true}},labels:{style:{position:aG,color:\"#3E576F\"}},legend:{enabled:true,align:\"center\",layout:\"horizontal\",labelFormatter:function(){return this.name},borderWidth:1,borderColor:\"#909090\",borderRadius:5,shadow:false,style:{padding:\"5px\"},itemStyle:{cursor:\"pointer\",color:\"#3E576F\"},itemHoverStyle:{cursor:\"pointer\"},itemHiddenStyle:{color:\"#C0C0C0\"},itemCheckboxStyle:{position:aG,width:\"13px\",height:\"13px\"},symbolWidth:16,symbolPadding:5,verticalAlign:\"bottom\",x:0,y:0},loading:{hideDuration:250,labelStyle:{position:Y,fontFamily:\"Verdana\",fontSize:\"10px\",color:\"#ffffff\",\"pointer-events\":K},showDuration:100,style:{position:aG,backgroundColor:\"black\",opacity:0.2,textAlign:\"center\",\"text-shadow\":\"1px 1px 3px #ffffff\",filter:\"dropshadow(color=#ffffff, offx=1, offy=1)\"}},tooltip:{enabled:true,backgroundColor:\"rgba(255, 255, 255, .85)\",borderWidth:2,borderRadius:5,shadow:true,snap:R?25:10,style:{color:\"#333333\",fontSize:\"12px\",padding:\"5px\",whiteSpace:\"nowrap\"}},toolbar:{itemStyle:{color:\"#4572A7\",cursor:\"pointer\"}},credits:{enabled:true,text:\"Highcharts.com\",href:\"http://www.highcharts.com\",position:{align:\"right\",x:-10,verticalAlign:\"bottom\",y:-5},style:{cursor:\"pointer\",color:\"#909090\",fontSize:\"10px\"}}};var v={dateTimeLabelFormats:{second:\"%H:%M:%S\",minute:\"%H:%M\",hour:\"%H:%M\",day:\"%e. %b\",week:\"%e. %b\",month:\"%b '%y\",year:\"%Y\"},endOnTick:false,gridLineColor:\"#C0C0C0\",labels:D,lineColor:\"#C0D0E0\",lineWidth:1,max:null,min:null,minPadding:0.01,maxPadding:0.01,minorGridLineColor:\"#E0E0E0\",minorGridLineWidth:1,minorTickColor:\"#A0A0A0\",minorTickLength:2,minorTickPosition:\"outside\",startOfWeek:1,startOnTick:false,tickColor:\"#C0D0E0\",tickLength:5,tickmarkPlacement:\"between\",tickPixelInterval:100,tickPosition:\"outside\",tickWidth:1,title:{align:\"middle\",style:{color:\"#6D869F\",fontWeight:\"bold\"}},type:\"linear\"},a1=aZ(v,{endOnTick:true,gridLineWidth:1,tickPixelInterval:72,showLastLabel:true,labels:{align:\"right\",x:-8,y:3},lineWidth:0,maxPadding:0.05,minPadding:0.05,startOnTick:true,tickWidth:0,title:{rotation:270,text:\"Y-values\"},stackLabels:{enabled:false,formatter:function(){return this.total},style:D.style}}),aP={labels:{align:\"right\",x:-8,y:null},title:{rotation:270}},bk={labels:{align:\"left\",x:8,y:null},title:{rotation:90}},bY={labels:{align:\"center\",x:0,y:14},title:{rotation:0}},b7=aZ(bY,{labels:{y:-5}});var az=ae.defaultPlotOptions=bQ.plotOptions,a7=az.line;az.spline=aZ(a7);az.scatter=aZ(a7,{lineWidth:0,states:{hover:{lineWidth:0}}});az.area=aZ(a7,{});az.areaspline=aZ(az.area);az.column=aZ(a7,{borderColor:\"#FFFFFF\",borderWidth:1,borderRadius:0,groupPadding:0.2,marker:null,pointPadding:0.1,minPointLength:0,states:{hover:{brightness:0.1,shadow:false},select:{color:\"#C0C0C0\",borderColor:\"#000000\",shadow:false}},dataLabels:{y:null,verticalAlign:null}});az.bar=aZ(az.column,{dataLabels:{align:\"left\",x:5,y:0}});az.pie=aZ(a7,{borderColor:\"#FFFFFF\",borderWidth:1,center:[\"50%\",\"50%\"],colorByPoint:true,dataLabels:{distance:30,enabled:true,formatter:function(){return this.point.name},y:5},legendType:\"point\",marker:null,size:\"75%\",showInLegend:false,slicedOffset:10,states:{hover:{brightness:0.1,shadow:false}}});ah();var b1=function(L){var cp=[],A;function cr(cs){A=/rgba\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]?(?:\\.[0-9]+)?)\\s*\\)/.exec(cs);if(A){cp=[b4(A[1]),b4(A[2]),b4(A[3]),parseFloat(A[4])]}else{A=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(cs);if(A){cp=[b4(A[1],16),b4(A[2],16),b4(A[3],16),1]}}}function Z(ct){var cs;if(cp&&!isNaN(cp[0])){if(ct===\"rgb\"){cs=\"rgb(\"+cp[0]+\",\"+cp[1]+\",\"+cp[2]+\")\"}else{if(ct===\"hex\"){cs=\"#\"+(\"000000\"+(cp[0]<<16|cp[1]<<8|cp[2]).toString(16)).slice(-6)}else{if(ct===\"a\"){cs=cp[3]}else{cs=\"rgba(\"+cp.join(\",\")+\")\"}}}}else{cs=L}return cs}function cq(ct){if(aJ(ct)&&ct!==0){var cs;for(cs=0;cs<3;cs++){cp[cs]+=b4(ct*255);if(cp[cs]<0){cp[cs]=0}if(cp[cs]>255){cp[cs]=255}}}return this}function M(cs){cp[3]=cs;return this}cr(L);return{get:Z,brighten:cq,setOpacity:M}};function aM(){}aM.prototype={init:function(A,L){this.element=bV.createElementNS(bf,L);this.renderer=A},animate:function(Z,L,A){var M=a4(L,cn,true);if(M){M=aZ(M);if(A){M.complete=A}z(this,Z,M)}else{this.attr(Z);if(A){A()}}},attr:function(Z,cH){var cF,cz,cD,cB,cr,cu,cp=this.element,L=cp.nodeName,cA=this.renderer,cx,M=this.shadows,cw=this.htmlNode,ct,cE=this;if(bG(Z)&&at(cH)){cF=Z;Z={};Z[cF]=cH}if(bG(Z)){cF=Z;if(L===\"circle\"){cF={x:\"cx\",y:\"cy\"}[cF]||cF}else{if(cF===\"strokeWidth\"){cF=\"stroke-width\"}}cE=ag(cp,cF)||this[cF]||0;if(cF!==\"d\"&&cF!==\"visibility\"){cE=parseFloat(cE)}}else{for(cF in Z){cx=false;cz=Z[cF];if(cF===\"d\"){if(cz&&cz.join){cz=cz.join(\" \")}if(/(NaN| {2}|^$)/.test(cz)){cz=\"M 0 0\"}this.d=cz}else{if(cF===\"x\"&&L===\"text\"){for(cD=0;cD<cp.childNodes.length;cD++){cu=cp.childNodes[cD];if(ag(cu,\"x\")===ag(cp,\"x\")){ag(cu,\"x\",cz)}}if(this.rotation){ag(cp,\"transform\",\"rotate(\"+this.rotation+\" \"+cz+\" \"+b4(Z.y||ag(cp,\"y\"))+\")\")}}else{if(cF===\"fill\"){cz=cA.color(cz,cp,cF)}else{if(L===\"circle\"&&(cF===\"x\"||cF===\"y\")){cF={x:\"cx\",y:\"cy\"}[cF]||cF}else{if(cF===\"translateX\"||cF===\"translateY\"||cF===\"rotation\"||cF===\"verticalAlign\"){this[cF]=cz;this.updateTransform();cx=true}else{if(cF===\"stroke\"){cz=cA.color(cz,cp,cF)}else{if(cF===\"dashstyle\"){cF=\"stroke-dasharray\";cz=cz&&cz.toLowerCase();if(cz===\"solid\"){cz=K}else{if(cz){cz=cz.replace(\"shortdashdotdot\",\"3,1,1,1,1,1,\").replace(\"shortdashdot\",\"3,1,1,1\").replace(\"shortdot\",\"1,1,\").replace(\"shortdash\",\"3,1,\").replace(\"longdash\",\"8,3,\").replace(/dot/g,\"1,3,\").replace(\"dash\",\"4,3,\").replace(/,$/,\"\").split(\",\");cD=cz.length;while(cD--){cz[cD]=parseFloat(cz[cD])*ab(Z[\"stroke-width\"],Z.strokeWidth,ag(this,\"stroke-width\"))}cz=cz.join(\",\")}}}else{if(cF===\"isTracker\"){this[cF]=cz}else{if(cF===\"width\"){cz=b4(cz)}else{if(cF===\"align\"){cF=\"text-anchor\";cz={left:\"start\",center:\"middle\",right:\"end\"}[cz]}else{if(cF===\"title\"){var cG=bV.createElementNS(bf,\"title\");cG.appendChild(bV.createTextNode(cz));cp.appendChild(cG)}}}}}}}}}}}if(cF===\"strokeWidth\"){cF=\"stroke-width\"}if(W&&cF===\"stroke-width\"&&cz===0){cz=0.000001}if(this.symbolName&&/^(x|y|r|start|end|innerR)/.test(cF)){if(!ct){this.symbolAttr(Z);ct=true}cx=true}if(M&&(cF===\"opacity\"||cF===\"stroke-opacity\")){cr=0.06*cz;for(cD=0,cB=M.length;cD<cB;){ag(M[cD],cF,(cD+=1)*cr)}}if(M&&/^(width|height|visibility|x|y|d)$/.test(cF)){cD=M.length;while(cD--){ag(M[cD],cF,cz)}}if((cF===\"width\"||cF===\"height\")&&L===\"rect\"&&cz<0){cz=0}if(cF===\"text\"){this.textStr=cz;if(this.added){cA.buildText(this)}}else{if(!cx){ag(cp,cF,cz)}}if(cw&&(cF===\"x\"||cF===\"y\"||cF===\"translateX\"||cF===\"translateY\"||cF===\"visibility\")){var cs=this,cv,A=cw.length?cw:[this],cq=A.length,cy,cC;for(cC=0;cC<cq;cC++){cy=A[cC];cv=cy.getBBox();cw=cy.htmlNode;cf(cw,by(cs.styles,{left:(cv.x+(cs.translateX||0))+al,top:(cv.y+(cs.translateY||0))+al}));if(cF===\"visibility\"){cf(cw,{visibility:cz})}}}}}return cE},symbolAttr:function(A){var L=this;T([\"x\",\"y\",\"r\",\"start\",\"end\",\"width\",\"height\",\"innerR\",\"startAngle\"],function(M){L[M]=a4(A[M],L[M])});L.attr({d:L.renderer.symbols[L.symbolName](o(L.x*2)/2,o(L.y*2)/2,L.r,{start:L.start,end:L.end,width:L.width,height:L.height,innerR:L.innerR,startAngle:L.startAngle})})},clip:function(A){return this.attr(\"clip-path\",\"url('\"+this.renderer.url+\"#\"+A.id+\"')\")},crisp:function(cq,cr,cp,L,cu){var A=this,ct,Z={},cs={},M;cq=cq||A.strokeWidth||0;M=cq%2/2;cs.x=bz(cr||A.x||0)+M;cs.y=bz(cp||A.y||0)+M;cs.width=bz((L||A.width||0)-2*M);cs.height=bz((cu||A.height||0)-2*M);cs.strokeWidth=cq;if(cs.width===0&&L!==0){cs.width=1}for(ct in cs){if(A[ct]!==cs[ct]){A[ct]=Z[ct]=cs[ct]}}return Z},css:function(Z){var A=this,M=A.element,cq=Z&&Z.width&&M.nodeName===\"text\",cr,cp=\"\",L=function(ct,cs){return\"-\"+cs.toLowerCase()};if(Z&&Z.color){Z.fill=Z.color}Z=by(A.styles,Z);A.styles=Z;if(w&&!cb){if(cq){delete Z.width}cf(A.element,Z)}else{for(cr in Z){cp+=cr.replace(/([A-Z])/g,L)+\":\"+Z[cr]+\";\"}A.attr({style:cp})}if(cq&&A.added){A.renderer.buildText(A)}return A},on:function(A,M){var L=M;if(R&&A===\"click\"){A=\"touchstart\";L=function(Z){Z.preventDefault();M()}}this.element[\"on\"+A]=L;return this},translate:function(A,L){return this.attr({translateX:A,translateY:L})},invert:function(){var A=this;A.inverted=true;A.updateTransform();return A},scale:function(L,A){var M=this;if(!L){L=1}if(!A){A=L}M.fx=L;M.fy=A;M.updateTransform();return M},updateTransform:function(){var A=this,M=A.translateX||0,L=A.translateY||0,cs=A.inverted,cw=A.rotation,cr=A.fx||0,cp=A.fy||0,Z=[],ct=A.shadows,cv,cu,cq;if(cs){M+=A.attr(\"width\");L+=A.attr(\"height\")}if(M||L){Z.push(\"translate(\"+M+\",\"+L+\")\")}if(cs){if(cr){Z.push(\"rotate(90)\");cr*=-1}else{Z.push(\"rotate(90) scale(-1,1)\")}}else{if(cw){Z.push(\"rotate(\"+cw+\" \"+A.x+\" \"+A.y+\")\")}}if(cr||cp){Z.push(\"scale(\"+cr+\", \"+cp+\")\")}if(Z.length){cv=Z.join(\" \");ag(A.element,\"transform\",cv);if(ct){for(cu=0,cq=ct.length;cu<cq;cu+=1){ag(ct[cu],\"transform\",cv)}}}},rotate:function(L,A,M){this.x=A;this.y=M;return this.attr({translateX:A,translateY:M,rotation:L})},toFront:function(){var A=this.element;A.parentNode.appendChild(A);return this},align:function(L,cq,M){var ct=this;if(!L){L=ct.alignOptions;cq=ct.alignByTranslate}else{ct.alignOptions=L;ct.alignByTranslate=cq;if(!M){ct.renderer.alignedObjects.push(ct)}}M=a4(M,ct.renderer);var cp=L.align,Z=L.verticalAlign,cs=(M.x||0)+(L.x||0),cr=(M.y||0)+(L.y||0),A={};if(/^(right|center)$/.test(cp)){cs+=(M.width-(L.width||0))/{right:1,center:2}[cp]}A[cq?\"translateX\":\"x\"]=o(cs);if(/^(bottom|middle)$/.test(Z)){cr+=(M.height-(L.height||0))/({bottom:1,middle:2}[Z]||1)}A[cq?\"translateY\":\"y\"]=o(cr);ct[ct.placed?\"animate\":\"attr\"](A);ct.placed=true;ct.alignAttr=A;return ct},getBBox:function(){var cp,Z,L,M=this.rotation,A=M*aQ;try{cp=by({},this.element.getBBox())}catch(cq){cp={width:0,height:0}}Z=cp.width;L=cp.height;if(M){cp.width=f(L*ap(A))+f(Z*cc(A));cp.height=f(L*cc(A))+f(Z*ap(A))}return cp},show:function(){return this.attr({visibility:aD})},hide:function(){return this.attr({visibility:av})},add:function(cs){var cq=this.renderer,cp=cs||cq,Z=cp.element||cq.box,cu=Z.childNodes,M=this.element,cr=ag(M,\"zIndex\"),ct,A,L;this.parentInverted=cs&&cs.inverted;if(this.textStr!==undefined){cq.buildText(this)}if(cs&&this.htmlNode){if(!cs.htmlNode){cs.htmlNode=[]}cs.htmlNode.push(this)}if(cr){cp.handleZ=true;cr=b4(cr)}if(cp.handleZ){for(L=0;L<cu.length;L++){ct=cu[L];A=ag(ct,\"zIndex\");if(ct!==M&&(b4(A)>cr||(!at(cr)&&at(A)))){Z.insertBefore(M,ct);return this}}}Z.appendChild(M);this.added=true;return this},safeRemoveChild:function(L){var A=L.parentNode;if(A){A.removeChild(L)}},destroy:function(){var cp=this,M=cp.element||{},Z=cp.shadows,L,A;M.onclick=M.onmouseout=M.onmouseover=M.onmousemove=null;bd(cp);if(cp.clipPath){cp.clipPath=cp.clipPath.destroy()}if(cp.stops){for(A=0;A<cp.stops.length;A++){cp.stops[A]=cp.stops[A].destroy()}cp.stops=null}cp.safeRemoveChild(M);if(Z){T(Z,function(cq){cp.safeRemoveChild(cq)})}if(cp.renderer.alignedObjects){af(cp.renderer.alignedObjects,cp)}for(L in cp){delete cp[L]}return null},empty:function(){var L=this.element,M=L.childNodes,A=M.length;while(A--){L.removeChild(M[A])}},shadow:function(cu,ct,cv){if(!cv){cv={}}var Z=[],cp,cs,cq=this.element,L=cv.color||\"rgb(0,0,0)\",A=\"translate\"+(!this.parentInverted!=!cv.inverted?\"(-1,-1)\":\"(1,1)\"),M=b4(this.attr(\"stroke-width\")||1,10)+6,cr=ca(cv.opacity,1)*0.06;if(this.fx||this.fy){A+=\" scale(\"+this.fx+\", \"+this.fy+\")\"}if(cu){for(cp=1;cp<=3;cp++){cs=cq.cloneNode(0);ag(cs,{isShadow:\"true\",stroke:L,\"stroke-opacity\":cr*cp,\"stroke-width\":M-2*cp,transform:A,fill:K});if(ct){ct.element.appendChild(cs)}else{cq.parentNode.insertBefore(cs,cq)}Z.push(cs)}this.shadows=Z}return this},textBound:function(){var A=this,cr=A.renderer,Z=A.textBoundWrapper,cw=A.styles,L=4,cq=L*0.5,M=cq*0.75,cv,ct,cs,cu,cp;if(A.element.nodeName!==\"text\"||!cw||!(cw.backgroundColor||cw.borderColor)||!A.textStr||((A.rotation||0)%90!==0)){if(A.textBoundWrapper){A.textBoundWrapper.destroy()}return A}cv=A.getBBox();cu=cv.width+L;cp=cv.height+L;ct=cv.x;cs=cv.y;if(A.rotation===270){ct=A.attr(\"x\")-cu/2-cq;cs=A.attr(\"y\")-cp+L}if(!Z){Z=A.textBoundWrapper=cr.rect(0,0,0,0,0,1);A.element.parentNode.insertBefore(Z.element,A.element)}Z.attr({fill:cw.backgroundColor||K,stroke:cw.borderColor||aO,\"fill-opacity\":ca(cw.backgroundOpacity,1),\"stroke-opacity\":ca(cw.borderOpacity,1)});Z.attr(Z.crisp(1,ct-M,cs-M,cu,cp));return A}};var d=function(){this.init.apply(this,arguments)};d.prototype={Element:aM,type:\"SVG\",init:function(M,Z,L,cq){var cp=this,cr=location,A;A=cp.createElement(\"svg\").attr({xmlns:bf,version:\"1.1\"});M.appendChild(A.element);cp.box=A.element;cp.boxWrapper=A;cp.alignedObjects=[];cp.url=w?\"\":cr.href.replace(/#.*?$/,\"\").replace(/[\\'\\\\]/g,bi.opera?function(cs){return escape(cs)}:function(cs){return\"\\\\\"+cs});cp.defs=this.createElement(\"defs\").add();cp.forExport=cq;cp.gradients=[];cp.setSize(Z,L,false)},destroy:function(){var M=this,A,L=M.gradients,cp=M.defs,Z=M.pending;M.box=null;M.boxWrapper=M.boxWrapper.destroy();if(Z&&Z.length){while(Z.shift()){}}if(L){for(A=0;A<L.length;A++){M.gradients[A]=L[A].destroy()}M.gradients=null}if(cp){M.defs=cp.destroy()}M.alignedObjects=null;return null},createElement:function(L){var A=new this.Element();A.init(this,L);return A},buildText:function(A){var Z=A.element,cB=a4(A.textStr,\"\").toString().replace(/<(b|strong)>/g,'<span style=\"font-weight:bold\">').replace(/<(i|em)>/g,'<span style=\"font-style:italic\">').replace(/<a/g,\"<span\").replace(/<\\/(b|strong|i|em|a)>/g,\"<\/span>\").split(/<br.*?>/g),cx=Z.childNodes,cz=/style=\"([^\"]+)\"/,M=/href=\"([^\"]+)\"/,cy=ag(Z,\"x\"),cA=A._dx,ct=A.styles,cs=ct&&A.useHTML&&!this.forExport,cv=A.htmlNode,L=ct&&b4(ct.width),cw=ct&&ct.lineHeight,cu,cp=\"getComputedStyle\",cq=cx.length;while(cq--){Z.removeChild(cx[cq])}if(L&&!A.added){this.box.appendChild(Z)}var cr=/title=\"([^\"]+)\"/;if(cr.test(cB[0])){ag(Z,\"title\",cB[0].match(cr)[1])}T(cB,function(cC,cG){var cE,cD=0,cF;cC=cC.replace(/<span/g,\"|||<span\").replace(/<\\/span>/g,\"<\/span>|||\");cE=cC.split(\"|||\");T(cE,function(cK){if(cK!==\"\"||cE.length===1){var cH={},cM=bV.createElementNS(bf,\"tspan\");if(cz.test(cK)){ag(cM,\"style\",cK.match(cz)[1].replace(/(;| |^)color([ :])/,\"$1fill$2\"))}if(M.test(cK)){ag(cM,\"onclick\",'location.href=\"'+cK.match(M)[1]+'\"');cf(cM,{cursor:\"pointer\"})}cK=(cK.replace(/<(.|\\n)*?>/g,\"\")||\" \").replace(/&lt;/g,\"<\").replace(/&gt;/g,\">\");var cJ=bV.createTextNode(cK);cM.appendChild(cJ);if(!cD){cH.x=cy}else{cH.dx=cA}if(!cD){if(cG){if(!cb&&A.renderer.forExport){cf(cM,{display:\"block\"})}cF=bi[cp]&&b4(bi[cp](cu,null).getPropertyValue(\"line-height\"));if(!cF||isNaN(cF)){cF=cw||cu.offsetHeight||18}ag(cM,\"dy\",cF)}cu=cM}ag(cM,cH);Z.appendChild(cM);cD++;if(L){var cN=cK.replace(/-/g,\"- \").split(\" \"),cO,cL,cI=[];while(cN.length||cI.length){cL=Z.getBBox().width;cO=cL>L;if(!cO||cN.length===1){cN=cI;cI=[];if(cN.length){cM=bV.createElementNS(bf,\"tspan\");ag(cM,{dy:cw||16,x:cy});Z.appendChild(cM);if(cL>L){L=cL}}}else{cM.removeChild(cM.firstChild);cI.unshift(cN.pop())}if(cN.length){cM.appendChild(bV.createTextNode(cN.join(\" \").replace(/- /g,\"-\")))}}}}})});if(cs){if(!cv){cv=A.htmlNode=bA(\"span\",null,by(ct,{position:aG,top:0,left:0}),this.box.parentNode)}cv.innerHTML=A.textStr;cq=cx.length;while(cq--){cx[cq].style.visibility=av}}},crispLine:function(L,A){if(L[1]===L[4]){L[1]=L[4]=o(L[1])+(A%2/2)}if(L[2]===L[5]){L[2]=L[5]=o(L[2])+(A%2/2)}return L},path:function(A){return this.createElement(\"path\").attr({d:A,fill:K})},circle:function(L,Z,M){var A=ch(L)?L:{x:L,y:Z,r:M};return this.createElement(\"circle\").attr(A)},arc:function(A,cq,Z,M,cp,L){if(ch(A)){cq=A.y;Z=A.r;M=A.innerR;cp=A.start;L=A.end;A=A.x}return this.symbol(\"arc\",A||0,cq||0,Z||0,{innerR:M||0,start:cp||0,end:L||0})},rect:function(L,cr,M,A,Z,cq){if(ch(L)){cr=L.y;M=L.width;A=L.height;Z=L.r;cq=L.strokeWidth;L=L.x}var cp=this.createElement(\"rect\").attr({rx:Z,ry:Z,fill:K});return cp.attr(cp.crisp(cq,L,cr,cj(M,0),cj(A,0)))},rect3d:(function(){var L={x:{drawTop:true,drawRight:true,drawFront:true,drawShadow:true},y:{drawTop:true,drawRight:true,drawFront:true,drawShadow:true},width:{drawTop:true,drawRight:true,drawFront:true,drawShadow:true},height:{drawRight:true,drawFront:true,drawShadow:true},strokeWidth:true,\"stroke-width\":true,stroke:true,x3D:{drawTop:true,drawRight:true,drawShadow:true},y3D:{drawTop:true,drawRight:true,drawShadow:true},fill:true},A=function(cr,Z){var cx,cv,cu,ct=this,cq,cp,cw,cs=this[\"_3dAttr\"];if(bG(cr)&&at(Z)){cx=cr;cr={};cr[cx]=Z}if(bG(cr)){if(L[cr]){ct=this[\"_3dAttr\"][cr]}else{ct=this[\"_attr\"](cr)}}else{for(cx in cr){cv=cr[cx];if(L[cx]){cu=L[cx];cs[cx]=cv;if(cx===\"stroke\"||cx===\"stroke-width\"||cx===\"strokeWidth\"){this.frontRect.attr(cx,cv);this.topRect.attr(cx,cv);this.rightRect.attr(cx,cv)}if(cx===\"fill\"){if(cv&&cv.linearGradient&&cv.stops&&cv.stops[0]){cv=cv.stops[0][1]}if(aB.test(cv)){cw=b1(cv);cq=cw.get(\"hex\");cp=cw.get(\"a\")*100}else{if(cv&&cv.FCcolor){cq=cv.FCcolor.color.split(bg)[0];cp=cv.FCcolor.alpha.split(bg)[0]}else{if(aN.test(cv)){cq=cv.replace(P,a5);cp=100}}}cs.color=cq;cs.alpha=cp;if(cs.lighting3D===false){cs.frontColor=bR(cs.color,cs.alpha);cs.rightColor=bR(aK(cs.color,60),cs.alpha);cs.topColor=bR(aK(cs.color,75),cs.alpha)}else{cs.frontColor={FCcolor:{color:aK(cs.color,65)+bg+be(cs.color,55),alpha:cp+bg+cp,angle:270}},cs.rightColor={FCcolor:{color:aK(cs.color,35)+bg+aK(cs.color,75),alpha:cp+bg+cp,angle:bs(cs.x3D,cs.height+cs.y3D,3)}},cs.topColor={FCcolor:{color:aK(cs.color,85)+bg+be(cs.color,35),alpha:cp+bg+cp,angle:bs(cs.width+cs.x3D,cs.y3D,4)}}}this.topRect.attr({fill:cs.topColor});this.rightRect.attr({fill:cs.rightColor});this.frontRect.attr({fill:cs.frontColor})}if(cu.drawTop){if(cs.lighting3D!==false&&cs.topColor.FCcolor){cs.topColor.FCcolor.angle=bs(cs.width+cs.x3D,cs.y3D,4)}this.topRect.attr({d:[\"M\",cs.x,cs.y,\"L\",cs.x+cs.width,cs.y,cs.x+cs.width+cs.x3D,cs.y-cs.y3D,cs.x+cs.x3D,cs.y-cs.y3D,\"Z\"],fill:cs.topColor})}if(cu.drawRight){if(cs.lighting3D!==false&&cs.rightColor.FCcolor){cs.rightColor.FCcolor.angle=bs(cs.x3D,cs.height+cs.y3D,3)}this.rightRect.attr({d:[\"M\",cs.x+cs.width,cs.y,\"L\",cs.x+cs.width+cs.x3D,cs.y-cs.y3D,cs.x+cs.width+cs.x3D,cs.y-cs.y3D+cs.height,cs.x+cs.width,cs.y+cs.height,\"Z\"],fill:cs.rightRect})}if(cu.drawFront){this.frontRect.attr(cx,cv)}if(cu.drawShadow){this.shadowElement.attr({d:[\"M\",cs.x+cs.x3D,cs.y-cs.y3D,\"L\",cs.x+cs.x3D+cs.width,cs.y-cs.y3D,cs.x+cs.x3D+cs.width,cs.y-cs.y3D+cs.height]})}}else{this[\"_attr\"](cx,cv)}}}return ct},M=function(){var Z=this.shadowElement;if(M){Z.shadow.apply(Z,arguments)}};return function(cz,cx,cq,cD,ct,cu,cy,cC){if(ch(cz)){cx=cz.y;cq=cz.width;cD=cz.height;cy=cz.strokeWidth;ct=cz.x3D;cu=cz.y3D;cz=cz.x}ct=ab(ct,10);cu=ab(cu,10);var cp=o(cz+cq),Z=cz+cq+ct;cq=cp-cz;ct=Z-cp;var cr={x:cz,y:cx,width:cq,height:cD,r:0},cw=[\"M\",cz,cx,\"L\",cz+cq,cx,cz+cq+ct,cx-cu,cz+ct,cx-cu,\"Z\"],cB=[\"M\",cz+cq,cx,\"L\",cz+cq+ct,cx-cu,cz+cq+ct,cx-cu+cD,cz+cq,cx+cD,\"Z\"],cs=[\"M\",cz+ct,cx-cu,\"L\",cz+ct+cq,cx-cu,cz+ct+cq,cx-cu+cD],cv=this,cA=cv.g(cC);cA.shadowElement=cv.path(cs).add(cA);cA.frontRect=cv.rect(cr).attr({\"stroke-width\":cy}).add(cA);cA.topRect=cv.path(cw).attr({\"stroke-width\":cy}).add(cA);cA.rightRect=cv.path(cB).attr({\"stroke-width\":cy}).add(cA);cA._attr=cA.attr;cA.attr=A;cA.shadow=M;cA._3dAttr={y:cx,width:cq,height:cD,x:cz,strokeWidth:cy,x3D:ct,y3D:cu,lighting3D:cv.lighting3D};return cA}})(),getArcPath:function(cs,cr,Z,A,cu,ct,cp,M,L,cq){return[bT,cp,M,0,cq,L,cu,ct]},scroller:function(){var cr=R?\"touchstart\":\"mousedown\",Z=R?\"touchend\":\"mouseup\",cq=cr+\" \"+Z,cp={pageX:0,pageY:0},cw=function(cA){var cy=cA.type===\"dragend\",cz=cA.data,cx=(R&&s(cA))||cp;cz.dragActive=!cy;if(!cy){cz.dragInitPos=cz.scrollPosition;cz.dragStartX=cA.pageX||cx.pageX;cz.dragStartY=cA.pageY||cx.pageY}else{if(cz.onChange){cz.onChange(cz.scrollPosition,false,true)}if(cz.onEnd){cz.onEnd(cz.scrollPosition,false,true)}}if(R){cz.anchor.attr(\"height\",cz.anchor.attr(\"height\")*(cy?0.625:1.6))}},cu=function(cz){var cy=cz.data,cA=cy.horiz,cx=(R&&s(cz))||cp;cy.group.setScrollPosition(cy.dragInitPos+(cA?((cz.pageX||cx.pageX)-cy.dragStartX):((cz.pageY||cx.pageY)-cy.dragStartY))/cy.zoneLength)},L=function(cB,cy){if(!arguments.length){return this}var cA=this,cz=this.config,cx=cA.elements.anchor.element;by(cz,{onChange:cB,onEnd:cy});return cA},ct=function(cA,cy){var cB=this,cz=cB.config,cx;if(cA>1){cA=1}cx=cz.trackLength*cA;if(cx<5){cA=5/cz.trackLength;cx=cz.trackLength*cA}cz.zoneLength=cz.trackLength-cz.trackLength*(cz.scrollRatio=cA);cB.elements.anchor.attr({width:cx});if(cA>=1){cz.scrollDelta=1}else{cz.scrollDelta=0.1}return cB.setScrollPosition(undefined,undefined,cy)},A=function(cD,cx,cB){var cE=this,cy=cE.config,cF=cy.horiz,cA=cy.anchor,cz=w&&!cb&&!cF,cC;if(at(cD)){if(cD<=0){cD=1e-8}else{if(cD>1){cD=1}}cy.scrollPosition=cD}else{cD=cy.scrollPosition}cC=(cF?cD:1-cD)*cy.zoneLength;if(cC===0){cC=1e-8}if(cz){cA.translate(undefined,-cC)}else{cA.translate(cC)}if(!cB&&cy.onChange){cy.onChange(cD,cx,true)}return cE},cs=function(cy,cB,cA){var cz=!cB&&w&&!cb?180:90,cx={base:cy,light:a5+be(cy,15),dark:a5+aK(cy,cA?50:30)};cx.darkFill=cA?cx.dark:{FCcolor:{color:cx.dark+bg+cy,alpha:\"100\",angle:cz}};cx.lightFill=cA?cx.base:{FCcolor:{color:cy+bg+cx.light,alpha:\"100\",angle:cz}};return cx},cv=function(cE){var cD=this,cC=cD.renderer,cz=cD.config,cB=cD.elements,cy,cA,cx;if(ch(cE)&&\"fill\"in cE){cy=cs(cE.fill,cz.horiz,cz.flat);cA={fill:cy.dark};cx={fill:cy.lightFill};if(cz.buttons){cD.elements.start.attr(cx);cD.elements.end.attr(cx);cD.elements.startArrow.attr(cA);cD.elements.endArrow.attr(cA)}cB.track.attr(cx);cB.anchor.attr({fill:cy.darkFill,stroke:cy.dark,\"stroke-width\":0.2});delete cE.fill}return cC.Element.prototype.attr.apply(cD,arguments)},M=function(cF,cz){var cG=this,cE=cG.renderer,cA=cG.config,cx=cG.elements,cD=cx.marker,cy,cB,cC;if(!cF&&!cz&&cD){cD=cx.marker=cx.marker.destroy();return}};return function(cC,cB,cL,cI,cQ,cx,cE,cF,cy,cH){if(!cQ){cL+=cI;cI=cL-cI;cL=cL-cI}var cM=this,cA=cM.g(\"scroller\").attr({translateX:cC,translateY:cB,width:cL,height:cI}),cS=cA.config={},cN=cA.elements={},cD,cO=!cx?0:(cx.size||cI),cG=cx&&cx.padding||0,cJ=cO*0.25,cR=cI*0.25,cP=cO+cG,cK=cL-2*cP,cz=(cK<3);cN.track=cM.rect(cP,0,cK,cI,0);cN.anchor=cM.rect(cP,cE?0:(cR*0.5),cz?3:cK,cE?cI:(cI-cR),cE?0:aE(cJ,cR));if(cx){cN.start=cM.rect(0,0,cO,cI,0);cN.startArrow=cM.path([bM,cJ,0,bO,0,cR,cJ,cR*2,cJ,0]).translate(cO*0.4,cR);cN.end=cM.rect(cL-cO,0,cO,cI,0);cN.endArrow=cM.path([bM,0,0,bO,cJ,cR,0,cR*2,0,0]).translate(cL-cO*0.6,cR)}if(!cQ){cA.attr({width:cI,height:cL}).invert()}for(cD in cN){cN[cD].add(cA)}by(cS,{group:cA,anchor:cN.anchor,width:cL,horiz:cQ,flat:cE,buttons:!!cx,scrollRatio:1,trackOffset:cP,trackLength:cK,zoneLength:cK,scrollPosition:0,scrollDelta:0.1});by(cA,{destroy:function(){T(cN,function(cT){cT.destroy()})},attr:cv,setScrollRatio:ct,setScrollPosition:A,callback:L,mark:M});I(this.box,\"dragstart dragend\",cw,cS);I(this.box,\"drag\",cu,cS);I(cN.anchor.element,\"dragstart dragend\",cw,cS);I(cN.anchor.element,\"drag\",cu,cS);if(cx){I([cA.elements.start.element,cA.elements.startArrow.element],cr,function(){cA.setScrollPosition(cA.config.scrollPosition-cA.config.scrollDelta)},cS);I([cA.elements.end.element,cA.elements.endArrow.element],cr,function(){cA.setScrollPosition(cA.config.scrollPosition+cA.config.scrollDelta)},cS)}if(cF){I(cF.element,\"wheelchange\",function(cT,cU){cA.setScrollPosition(cA.config.scrollPosition-cU*0.5);cT.preventDefault()})}return cA}}(),setSize:function(cp,A,M){var cq=this,L=cq.alignedObjects,Z=L.length;cq.width=cp;cq.height=A;cq.boxWrapper[a4(M,true)?\"animate\":\"attr\"]({width:cp,height:A});while(Z--){L[Z].align()}},g:function(A){return this.createElement(\"g\").attr(at(A)&&{\"class\":bl+A})},image:function(cq,L,cr,Z,A){var cp={preserveAspectRatio:K},M;if(arguments.length>1){by(cp,{x:L,y:cr,width:Z,height:A})}M=this.createElement(\"image\").attr(cp);if(M.element.setAttributeNS){M.element.setAttributeNS(\"http://www.w3.org/1999/xlink\",\"href\",cq)}else{M.element.setAttribute(\"hc-svg-href\",cq)}return M},symbol:function(cp,cw,cu,cs,cz){if(ch(cp)){cw=cp.x,cu=cp.y,cs=cp.radius,cz=cp.options,cp=cp.symbol}var Z=/^(poly|spoke)\\_\\d+$/,M,cx;if(Z.test(cp)){cx=cp.split(\"_\");M=ab(parseInt(cx[1],10),3);cp=ca(cx[0],\"poly\");if(typeof cz!==\"object\"){cz={}}cz.innerR=M}var cr,L=this.symbols[cp],cy=L&&L(o(cw),o(cu),cs,cz,this),cq=/^url\\((.*?)\\)$/,cv,ct;if(cy){cr=this.path(cy);by(cr,{symbolName:cp,x:cw,y:cu,r:cs});if(cz){by(cr,cz)}}else{if(cq.test(cp)){var A=function(cA,cB){cA.attr({width:cB[0],height:cB[1]}).translate(-o(cB[0]/2),-o(cB[1]/2))};cv=cp.match(cq)[1];ct=c[cv];cr=this.image(cv).attr({x:cw,y:cu});if(ct){A(cr,ct)}else{cr.attr({width:cs,height:cs});bA(\"img\",{onload:function(){var cA=this;A(cr,c[cv]=[cA.width,cA.height])},src:cv});cr.translate(-o(cs/2),-o(cs/2))}}else{cr=this.circle(cw,cu,cs)}}return cr},symbols:{poly:function(cr,cq,Z,ct){var A=ct.innerR,L=2*a9.PI/A,cs,M,cp=(typeof ct.startAngle!==\"undefined\")?ct.startAngle:a9.PI/2;if(A>2){cs=[bM,cr+(Z*cc(-cp)),cq+(Z*ap(-cp)),bO];for(M=1;M<A;M++){cs.push(cr+(Z*cc(-(cp+(M*L)))),cq+(Z*ap(-(cp+(M*L)))))}cs.push(\"Z\")}else{cs=[bM,cr,cq,\"Z\"]}return cs},spoke:function(cr,cq,Z,ct){var A=ct.innerR,L=2*a9.PI/A,cp=(typeof ct.startAngle!==\"undefined\")?ct.startAngle:a9.PI/2,cs,M;if(A>2){cs=[bM,cr,cq,bO,cr+(Z*cc(-cp)),cq+(Z*ap(-cp))];for(M=1;M<A;M++){cs.push(bM,cr,cq,bO,cr+(Z*cc(-(cp+(M*L)))),cq+(Z*ap(-(cp+(M*L)))))}}else{cs=[bM,cr,cq,\"Z\"]}return cs},square:function(M,Z,L){var A=0.707*L;return[bM,M-A,Z-A,bO,M+A,Z-A,M+A,Z+A,M-A,Z+A,\"Z\"]},triangle:function(L,M,A){return[bM,L,M-1.33*A,bO,L+A,M+0.67*A,L-A,M+0.67*A,\"Z\"]},\"triangle-down\":function(L,M,A){return[bM,L,M+1.33*A,bO,L-A,M-0.67*A,L+A,M-0.67*A,\"Z\"]},diamond:function(L,M,A){return[bM,L,M-A,bO,L+A,M,L,M+A,L-A,M,\"Z\"]},arc:function(cu,ct,cr,cw){var M=cw.start,Z=cw.end-0.000001,cs=cw.innerR,cq=cc(M),A=ap(M),L=cc(Z),cv=ap(Z),cp=cw.end-M<ad?0:1;return[bM,cu+cr*cq,ct+cr*A,\"A\",cr,cr,0,cp,1,cu+cr*L,ct+cr*cv,bO,cu+cs*L,ct+cs*cv,\"A\",cs,cs,0,cp,0,cu+cs*cq,ct+cs*A,\"Z\"]}},clipPath:function(L){var Z,M=bl+bo++,A=this.createElement(\"clipPath\").attr({id:M}).add(this.defs);Z=this.createElement(\"path\").attr({d:L,fill:K}).add(A);Z.id=M;Z.clipPath=A;return Z},clipRect:function(L,cr,M,A){var cq,cp=bl+bo++,Z=this.createElement(\"clipPath\").attr({id:cp}).add(this.defs);cq=this.rect(L,cr,M,A,0).add(Z);cq.id=cp;cq.clipPath=Z;return cq},color:function(cE,cL,cp){var cP,A=/^rgba/;if(cE&&cE.linearGradient){var cD=this,cv=\"linearGradient\",ct=cE[cv],cB=bl+bo++,cs,cI,cz;cs=cD.createElement(cv).attr({id:cB,gradientUnits:\"userSpaceOnUse\",x1:ct[0],y1:ct[1],x2:ct[2],y2:ct[3]}).add(cD.defs);cD.gradients.push(cs);cs.stops=[];T(cE.stops,function(cQ){var cR;if(A.test(cQ[1])){cP=b1(cQ[1]);cI=cP.get(\"rgb\");cz=cP.get(\"a\")}else{cI=cQ[1];cz=1}cR=cD.createElement(\"stop\").attr({offset:cQ[0],\"stop-color\":cI,\"stop-opacity\":cz}).add(cs);cs.stops.push(cR)});return\"url('\"+this.url+\"#\"+cB+\"')\"}else{if(cE&&cE.FCcolor){var Z=cE.FCcolor.element,cD=this;if(Z&&Z.parentNode&&!cD.forExport){cL.removeAttribute(cp+\"-opacity\");return cE.FCcolor.url}var cr=ca(cE.FCcolor.color,\"000000\"),cF=ca(cE.FCcolor.alpha,\"100\")+\"\",cx,cO,cw,cy,cK=0,cq=100,cN=ca(cE.FCcolor.ratio,\"0\"),cu=ab(cE.FCcolor.angle,\"0\");cr=cr.replace(/\\s+/ig,\"\").replace(/\\,+$/ig,\"\").split(\",\");cF=cF.replace(/\\s+/ig,\"\").replace(/\\,+$/ig,\"\").split(\",\");cN=cN.replace(/\\s+/ig,\"\").replace(/\\,+$/ig,\"\").split(\",\");cu=cu%360;if(cu<0){cu=360+cu}if(cE.FCcolor.radialGradient){cv=\"radialGradient\";cB=bl+bo++;cs=cD.createElement(cv).attr({id:cB,gradientUnits:ca(cE.FCcolor.gradientUnits,\"userSpaceOnUse\"),cx:cE.FCcolor.cx,cy:cE.FCcolor.cy,r:cE.FCcolor.r}).add(cD.defs);cD.gradients.push(cs);cs.stops=[];for(cx=0;cx<cr.length&&cK<100;cx+=1){cO=cr[cx].replace(/^#?/,\"#\");cq=cw=ab(cF[cx],cq);cy=ab(cN[cx],(cx!==0)?((100-cK)/(cr.length-cx)):0);cK+=cy;if(cK>100){cK=100}if(cD.forExport&&cx===0&&cK){cs.stops.push(cD.createElement(\"stop\").attr({offset:0+\"%\",\"stop-color\":cO,\"stop-opacity\":cw/100}).add(cs))}cs.stops.push(cD.createElement(\"stop\").attr({offset:cK+\"%\",\"stop-color\":cO,\"stop-opacity\":cw/100}).add(cs))}if(w&&cr.length===1){cs.stops.push(cD.createElement(\"stop\").attr({offset:cK+\"%\",\"stop-color\":cO,\"stop-opacity\":cw/100}).add(cs))}cE.FCcolor.element=cs.element;cE.FCcolor.url=\"url('\"+this.url+\"#\"+cB+\"')\";cL.removeAttribute(cp+\"-opacity\");return cE.FCcolor.url}else{if(cr.length===1){ag(cL,cp+\"-opacity\",ab(cF[0],100)/100);return cr[0].replace(/^#?/,\"#\")}else{var cC=100,cA=100,cH,cG,M,L,cJ,cM,cx,cO,cw,cy,cs,cK=0;cv=\"linearGradient\";ct=cE[cv];cB=bl+bo++;cJ=Math.tan((cu*Math.PI)/180);M=Math.round(cA/2-((cC/2)*cJ));cH=Math.round(cC/2-((cA/2)/cJ));cH=(cH<0)?0:cH;cH=(cH>cC)?cC:cH;M=(M<0)?0:M;M=(M>cA)?cA:M;cG=cC-cH;L=cA-M;if(cu>90&&cu<=270){cM=M;M=L;L=cM}if(cu>180&&cu<=360){cM=cH;cH=cG;cG=cM}cs=cD.createElement(cv).attr({id:cB,gradientUnits:ca(cE.FCcolor.gradientUnits,\"objectBoundingBox\"),x1:ca(cE.FCcolor.x1,cH+\"%\"),y1:ca(cE.FCcolor.y1,M+\"%\"),x2:ca(cE.FCcolor.x2,cG+\"%\"),y2:ca(cE.FCcolor.y2,L+\"%\")}).add(cD.defs);cD.gradients.push(cs);cs.stops=[];for(cx=0;cx<cr.length&&cK<100;cx+=1){cO=cr[cx].replace(/^#?/,\"#\");cq=cw=ab(cF[cx],cq);cy=ab(cN[cx],(cx!==0)?((100-cK)/(cr.length-cx)):0);cK+=cy;if(cK>100){cK=100}cs.stops.push(cD.createElement(\"stop\").attr({offset:cK+\"%\",\"stop-color\":cO,\"stop-opacity\":cw/100}).add(cs))}if(w&&cr.length===1){cs.stops.push(cD.createElement(\"stop\").attr({offset:cK+\"%\",\"stop-color\":cO,\"stop-opacity\":cw/100}).add(cs))}cE.FCcolor.element=cs.element;cE.FCcolor.url=\"url('\"+this.url+\"#\"+cB+\"')\";cL.removeAttribute(cp+\"-opacity\");return cE.FCcolor.url}}}else{if(A.test(cE)){cP=b1(cE);ag(cL,cp+\"-opacity\",cP.get(\"a\"));return cP.get(\"rgb\")}else{cL.removeAttribute(cp+\"-opacity\");return cE}}}},text:function(cp,A,cr,Z,L){var M=bQ.chart.style,cq;A=o(a4(A,0));cr=o(a4(cr,0));cq=this.createElement(\"text\").attr({x:A,y:cr,text:cp}).css({fontFamily:M.fontFamily,fontSize:M.fontSize});cq.x=A;cq.y=cr;cq.useHTML=Z;cq._dx=a4(L,3);return cq},button:(function(){var Z=\"button\",A=\"cccccc\",M=function(cw,cv,cr,cs){var cq=aK(cw,80),cy=be(cw,80),cu=aK(cw,70),ct=aK(cw,90),cp=be(cw,70),cx=\"0,100\",cB=bR(ca(cr,cu),ab(cs,cv)),cz,cA=cq+bg+cy;cz=cv+bg+cv;return{commonAttr:{stroke:cB,strokeWidth:1},normalState:{fill:{FCcolor:{color:cA,alpha:cz,ratio:cx,angle:270}}},pressedState:{fill:{FCcolor:{color:cA,alpha:cz,ratio:cx,angle:90}}},hoverState:{fill:{FCcolor:{color:ct+bg+cp,alpha:cz,ratio:cx,angle:270}}}}},L=bR(A,50);return function(cK){var cJ=this,cM=cK.x||0,cL=cK.y||0,cp=cK.width||20,cr=cK.height||10,cV=cK.padding||2,cF=cV*2,cC=cK.text,cv=cK.symbol,cW=cK.symbolOptions,cB=cK.color,cU=cK.alpha,cR=cK.style,cE=cK.callBack,cI=cK.disabled,cN=cK.mouseOver,cH=cK.mouseOut,cu=cK.mouseDown,ct=cK.mouseUp,cX=cK.pressToggling,cP=M(ca(cB,A),ab(cU,100),cK.borderColor,cK.borderAlpha),cw=false,cD,cz,cG,cO,cx,cT,cs,cQ,cq,cA,cY,cy,cS;cx=cJ.g(Z);if(cC){cT=cJ.text(cC,cM,cL).attr({align:\"center\"}).css(cR).add();cs=cT.getBBox();cp=cj(cp,cs.width+cF);cr=cj(cr,cs.height+cF)+2;cY=(cp/2)+cV;cy=(cL-cs.y)+cV;cT.attr({x:cM+cY,y:cL+cy})}else{if(cv){cD=cp/2;cz=cr/2;cG=cj(aE(cD,cz)-cV,2);cD+=cM;cz+=cL;cT=cJ.symbol(cv,cD,cz,cG,cW).attr(cW)}}cO=ab(cK.r,o(aE(cr,cp)/5));cQ=cJ.rect(cM,cL,cp,cr,cO).attr(cP.commonAttr).add(cx);cT&&cT.add(cx);cq=cJ.rect(cM,cL,cp,cr,cO).attr({fill:ce,stroke:ce}).add(cx);cS=cJ.rect(cM,cL,cp,cr,cO).attr({fill:L,stroke:L}).add(cx);cx.shadow=function(){cQ.shadow.apply(cQ,arguments);return cx};cx.destroy=function(){if(cQ&&cQ.destroy){cQ.destroy();delete cQ}if(cq&&cq.destroy){cq.destroy();delete cq}if(cS&&cS.destroy){cS.destroy();delete cS}if(cT&&cT.destroy){cT.destroy();delete cT}if(cx&&cx.destroy){cx.destroy();delete cx}};cx.press=function(cZ){if(cX){if(cZ){cQ.attr(cP.pressedState)}else{cQ.attr(cA)}cw=cZ}};cx.disable=function(cZ){if(cZ){cq.hide();cS.show()}else{cq.show();cS.hide()}};cx.disable(cI);cA=cP.normalState;cQ.attr(cA);cq.on(\"mouseover\",function(cZ){cA=cP.hoverState;!cw&&cQ.attr(cA);cN&&cN(cZ)});cq.on(\"mouseout\",function(cZ){cA=cP.normalState;!cw&&cQ.attr(cA);cH&&cH(cZ)});cq.on(R?\"touchstart\":\"mousedown\",function(cZ){if(cX){cx.press(!cw)}else{cQ.attr(cP.pressedState)}cu&&cu(cZ)});cq.on(R?\"touchend\":\"mouseup\",function(cZ){!cX&&cQ.attr(cA);ct&&ct(cZ)});cq.on(R?\"touchstart\":\"click\",cE);cx._conf={x:cM,y:cL,width:cp,height:cr};return cx}})()};b8=d;var ci;if(!cb){var V=bv(aM,{init:function(M,Z){var A=[\"<\",Z,' filled=\"f\" stroked=\"f\"'],L=[\"position: \",aG,\";\"];if(Z===\"shape\"||Z===aa){L.push(\"left:0;top:0;width:10px;height:10px;\")}if(O){L.push(\"visibility: \",Z===aa?av:aD)}A.push(' style=\"',L.join(\"\"),'\"/>');if(Z){A=Z===aa||Z===\"span\"||Z===\"img\"?A.join(\"\"):M.prepVML(A);this.element=bA(A)}this.renderer=M},add:function(Z){var cr=this,cq=cr.renderer,M=cr.element,cp=cq.box,L=Z&&Z.inverted,A=Z?Z.element||Z:cp;if(L){cq.invertChild(M,A)}if(O&&A.gVis===av){cf(M,{visibility:av})}A.appendChild(M);cr.added=true;if(cr.alignOnAdd){cr.updateTransform()}return cr},attr:function(M,cD){var cC,cv,cy,cx,cr,cq,Z=this.element||{},cA=Z.style,A=Z.nodeName,cw=this.renderer,ct=this.symbolName,cp,cs,L=this.shadows,cu,cB=this;if(bG(M)&&at(cD)){cC=M;M={};M[cC]=cD}if(bG(M)){cC=M;if(cC===\"strokeWidth\"||cC===\"stroke-width\"){cB=this.strokeweight}else{cB=this[cC]}}else{for(cC in M){cv=M[cC];cu=false;if(ct&&/^(x|y|r|start|end|width|height|innerR)/.test(cC)){if(!cs){this.symbolAttr(M);cs=true}cu=true}else{if(cC===\"d\"){cv=cv||[];this.d=cv.join(\" \");cy=cv.length;var cz=[];while(cy--){if(!isNaN(cv[cy])){cz[cy]=o(cv[cy]*10)-5}else{cz[cy]=bb[cv[cy]]||cv[cy]}}cv=cz.join(\" \")||\"x\";Z.path=cv;if(L){cy=L.length;while(cy--){L[cy].path=cv}}cu=true}else{if(cC===\"zIndex\"||cC===\"visibility\"){if(O&&cC===\"visibility\"){Z.gVis=cv;if(A===\"DIV\"){cp=Z.childNodes;cy=cp.length;while(cy--){if(cp[cy].gVis!==av){cf(cp[cy],{visibility:cv})}}if(cv===aD){cv=null}}else{if(Z.parentNode&&Z.parentNode.gVis===av){cv=null}}}if(cv||cv===aD){cA[cC]=cv}cu=true}else{if(/^(width|height)$/.test(cC)){this[cC]=cv;if(this.updateClipping){this[cC]=cv;this.updateClipping()}else{cA[cC]=cv}cu=true}else{if(/^(x|y)$/.test(cC)){this[cC]=cv;if(this.updateClipping){this[{x:\"left\",y:\"top\"}[cC]]=cv;this.updateClipping()}else{if(Z.tagName===\"SPAN\"){this.updateTransform()}else{cA[{x:\"left\",y:\"top\"}[cC]]=cv}}cu=true}else{if(cC===\"class\"){Z.className=cv}else{if(cC===\"stroke\"){cv=cw.color(cv,Z,cC);cC=\"strokecolor\"}else{if(cC===\"stroke-width\"||cC===\"strokeWidth\"){Z.stroked=cv?true:false;cC=\"strokeweight\";this[cC]=cv;if(aJ(cv)){cv+=al}}else{if(cC===\"stroke-linecap\"||cC===\"strokeLinecap\"){this[cC]=cv;cC=\"endcap\";cv=cv===\"butt\"?\"flat\":(cv||\"flat\");cq=Z.getElementsByTagName(\"stroke\")[0]||bA(cw.prepVML([\"<stroke/>\"]),null,null,Z);cq[cC]=cv;cu=true}else{if(cC===\"dashstyle\"){cq=Z.getElementsByTagName(\"stroke\")[0]||bA(cw.prepVML([\"<stroke/>\"]),null,null,Z);cq[cC]=cv||\"solid\";this.dashstyle=cv;cu=true}else{if(cC===\"fill\"){if(A===\"SPAN\"){cA.color=cv}else{Z.filled=cv!==K?true:false;cv=cw.color(cv,Z,cC);cC=\"fillcolor\"}}else{if(cC===\"translateX\"||cC===\"translateY\"||cC===\"rotation\"||cC===\"align\"){if(cC===\"align\"){cC=\"textAlign\"}this[cC]=cv;this.updateTransform();cu=true}else{if(cC===\"text\"){this.bBox=null;this.textStr=cv;Z.innerHTML=cv;cu=true}}}}}}}}}}}}}if(L){if(cC===\"visibility\"){cy=L.length;while(cy--){L[cy].style[cC]=cv}}else{if(cC===\"opacity\"||cC===\"stroke-opacity\"){cr=6*cv;for(cy=0,cx=L.length;cy<cx;){ag(L[cy],cC,(cy+=1)*cr)}}else{if(cC===\"dashstyle\"){cy=L.length;while(cy--){cq=L[cy].getElementsByTagName(\"stroke\")[0]||bA(cw.prepVML([\"<stroke/>\"]),null,null,L[cy]);cq[cC]=cv||\"solid\";L[cy].dashstyle=cv}}}}}if(!cu){if(O){Z[cC]=cv}else{ag(Z,cC,cv)}}}}return cB},clip:function(A){var M=this,L=A.members;L.push(M);M.destroyClip=function(){af(L,M)};return M.css(A.getCSS(M.inverted))},css:function(L){var Z=this,A=Z.element,M=L&&A.tagName===\"SPAN\"&&L.width;if(M){delete L.width;Z.textWidth=M;Z.updateTransform()}Z.styles=by(Z.styles,L);cf(Z.element,L);return Z},safeRemoveChild:function(L){var A=L.parentNode;if(A){b5(L)}},destroy:function(){var A=this;if(A.destroyClip){A.destroyClip()}return aM.prototype.destroy.apply(A)},empty:function(){var L=this.element,Z=L.childNodes,A=Z.length,M;while(A--){M=Z[A];M.parentNode.removeChild(M)}},getBBox:function(){var M=this,A=M.element,L=M.bBox;if(!L){if(A.nodeName===\"text\"){A.style.position=aG}L=M.bBox={x:A.offsetLeft,y:A.offsetTop,width:A.offsetWidth,height:A.offsetHeight}}return L},on:function(A,L){this.element[\"on\"+A]=function(){var M=bi.event;M.target=M.srcElement;L(M)};return this},updateTransform:function(){if(!this.added){this.alignOnAdd=true;return}var Z=this,cC=Z.element,cF=Z.translateX||0,cE=Z.translateY||0,ct=Z.x||0,cr=Z.y||0,cA=Z.textAlign||\"left\",cu={left:0,center:0.5,right:1}[cA],cp=cA&&cA!==\"left\";if(cF||cE){Z.css({marginLeft:cF,marginTop:cE})}if(Z.inverted){T(cC.childNodes,function(cG){Z.renderer.invertChild(cG,cC)})}if(cC.tagName===\"SPAN\"){var cy,cw,cz=Z.rotation,L,cD=0,M=1,cv=0,cs,A=b4(Z.textWidth),cB=Z.xCorr||0,cq=Z.yCorr||0,cx=[cz,cA,cC.innerHTML,Z.textWidth].join(\",\");if(cx!==Z.cTT){if(at(cz)){cD=cz*aQ;M=cc(cD);cv=ap(cD);cf(cC,{filter:cz?[\"progid:DXImageTransform.Microsoft.Matrix(M11=\",M,\", M12=\",-cv,\", M21=\",cv,\", M22=\",M,\", sizingMethod='auto expand')\"].join(\"\"):K})}cy=cC.offsetWidth;cw=cC.offsetHeight;if(cy>A){cf(cC,{width:A+al,display:\"block\",whiteSpace:\"normal\"});cy=A}L=o((b4(cC.style.fontSize)||12)*1.2);cB=M<0&&-cy;cq=cv<0&&-cw;cs=M*cv<0;cB+=cv*L*(cs?1-cu:cu);cq-=M*L*(cz?(cs?cu:1-cu):1);if(cp){cB-=cy*cu*(M<0?-1:1);if(cz){cq-=cw*cu*(cv<0?-1:1)}cf(cC,{textAlign:cA})}Z.xCorr=cB;Z.yCorr=cq}cf(cC,{left:ct+cB,top:cr+cq});Z.cTT=cx}},scale:function(L,A){var M=this;if(!L){L=1}if(!A){A=L}if(L||A){ag(M.element,{coordsize:(M.coordsize=100/L+\",\"+100/A)})}M.fx=L;M.fy=A;return M},rotate:function(L,A,cq){var cp=this,M=cp.element,Z={};A=A||0;cq=cq||0;if(at(L)){L=Number(L);Z.rotation=L;cf(M,{rotation:L,left:0,top:0})}},shadow:function(cy,cx,cB){if(!cB){cB={}}var A=this,cr=[],cs,ct=A.element,cv=A.renderer,cw,Z=ct.style,cz,cA=ct.path,cp=cB.color||\"black\",cq=b4(A.attr(\"stroke-width\")||1,10)+6,M=ca(cB.opacity,1),cu=M*0.06,L=!A.parentInverted!=!cB.inverted?-1:1;if(cA&&typeof cA.value!==\"string\"){cA=\"x\"}if(cy){for(cs=1;cs<=3;cs++){cz=['<shape isShadow=\"true\" strokeweight=\"',(cq-2*cs),'\" filled=\"false\" path=\"',cA,'\" coordsize=\"'+(this.coordsize||\"100,100\")+'\" style=\"',Z.cssText,'\" />'];cw=bA(cv.prepVML(cz),null,{left:b4(Z.left)+L,top:b4(Z.top)+L});cz=['<stroke endcap=\"round\" color=\"',cp,'\" opacity=\"',(cu*cs),'\" dashStyle=\"',A.dashstyle,'\"/>'];bA(cv.prepVML(cz),null,null,cw);if(cx){cx.element.appendChild(cw)}else{ct.parentNode.insertBefore(cw,ct)}ag(cw,{visibility:\"hidden\"});cr.push(cw)}this.shadows=cr}return this},textBound:function(){var L=this,A=L.styles;if(L.element.nodeName.toLowerCase()===\"span\"&&A&&(A.backgroundColor||A.borderColor)&&L.element.innerHTML==\"\"){cf(L.element,{backgroundColor:aO,borderColor:aO,border:aO});return L}if(A&&ca(A.backgroundOpacity)!==undefined){L.css({opacity:A.backgroundOpacity})}return L}});ci=function(){this.init.apply(this,arguments)};ci.prototype=aZ(d.prototype,{Element:V,isIE8:B.indexOf(\"MSIE 8.0\")>-1,type:\"VML\",init:function(M,Z,L){var cp=this,A;cp.alignedObjects=[];A=cp.createElement(aa);M.appendChild(A.element);cp.box=A.element;cp.boxWrapper=A;cp.setSize(Z,L,false);if(!bV.namespaces.hcv){bV.namespaces.add(\"hcv\",\"urn:schemas-microsoft-com:vml\");bV.createStyleSheet().cssText=\"hcv\\\\:fill, hcv\\\\:path, hcv\\\\:shape, hcv\\\\:stroke{ behavior:url(#default#VML); display: inline-block; } \"}},clipRect:function(L,cp,Z,A){var M=this.createElement();return by(M,{members:[],left:L,top:cp,width:Z,height:A,getCSS:function(cr){var cu=this,cw=cu.top,cv=cu.left,ct=cv+cu.width,cq=cw+cu.height,cs={clip:\"rect(\"+o(cr?cv:cw)+\"px,\"+o(cr?cq:ct)+\"px,\"+o(cr?ct:cq)+\"px,\"+o(cr?cw:cv)+\"px)\"};if(!cr&&O){by(cs,{width:(ct<0?0:ct)+al,height:(cq<0?0:cq)+al})}return cs},updateClipping:function(){T(M.members,function(cq){cq.css(M.getCSS(cq.inverted))})}})},getArcPath:function(cs,cr,Z,A,cu,ct,cp,M,L,cq){if(cq||(f(Z-cu)>=1||f(A-ct)>=1)){return[L?bH:a3,cs-cp,cr-M,cs+cp,cr+M,Z,A,cu,ct]}else{return[bO,cu,ct]}},color:function(cz,cH,L){var cL,A=/^rgba/,cD;if(cz&&cz.linearGradient){var cC,cw,cp=cz.linearGradient,cF,cE,cy,cB,cx;T(cz.stops,function(cN,cM){if(A.test(cN[1])){cL=b1(cN[1]);cC=cL.get(\"rgb\");cw=cL.get(\"a\")}else{cC=cN[1];cw=1}if(!cM){cE=cC;cy=cw}else{cB=cC;cx=cw}});cF=90-a9.atan((cp[3]-cp[1])/(cp[2]-cp[0]))*180/ad;cD=[\"<\",L,' colors=\"0% ',cE,\",100% \",cB,'\" angle=\"',cF,'\" opacity=\"',cx,'\" o:opacity2=\"',cy,'\" type=\"gradient\" focus=\"100%\" />'];bA(this.prepVML(cD),null,null,cH)}else{if(cz&&cz.FCcolor){var Z=ca(cz.FCcolor.color,\"000000\"),cA=ca(cz.FCcolor.alpha,\"100\")+\"\",cI=ca(cz.FCcolor.ratio,\"0\"),cq=ab(cz.FCcolor.angle,\"0\"),M=100;Z=Z.replace(/\\s+/ig,\"\").replace(/\\,+$/ig,\"\").split(\",\");cA=cA.replace(/\\s+/ig,\"\").replace(/\\,+$/ig,\"\").split(\",\");cI=cI.replace(/\\s+/ig,\"\").replace(/\\,+$/ig,\"\").split(\",\");cq=cq-90;cq=cq*(-1);cq=cq%360;if(cq<0){cq=360+cq}if(Z.length===1){cD=[\"<\",L,' opacity=\"',ab(cA[0],100)/100,'\"/>'];bA(this.prepVML(cD),null,null,cH);return Z[0].replace(/^#?/,\"#\")}else{var cu,cK,cs,cv,cG=0,cr=\"\",ct=true;cE=Z[0].replace(/^#?/,\"#\");cy=ab(cA[0],100)/100;for(cu=0;cu<Z.length&&cG<100;cu+=1){cK=Z[cu].replace(/^#?/,\"#\");M=cs=ab(cA[cu],M);cv=ab(cI[cu],(cu!==0)?((100-cG)/(Z.length-cu)):0);cG+=cv;if(cG>100){cG=100}if(ct){if(cG>0){cr+=\"0% \"+cK+\",\"}ct=false}cr+=cG+\"% \"+cK+\",\"}if(cG<100){cr+=\"100% \"+cK+\",\"}cB=cK;cx=cs/100;if(cz.FCcolor.radialGradient){if(cz.FCcolor.gradientUnits!==\"objectBoundingBox\"){cD=[\"<\",L,' opacity=\"',ab(cz.FCcolor.defaultAlpha,cA[0],100)/100,'\"/>'];bA(this.prepVML(cD),null,null,cH);return ca(cz.FCcolor.defaultColor,Z[0],\"000000\").replace(/^#?/,\"#\")}else{var cJ=cz.FCcolor.cx+\",\"+cz.FCcolor.cy;cD=[\"<\",L,' colors=\"',cr,'\" color=\"',cE,'\" color2=\"',cB,'\" focusposition=\"',cJ,'\" opacity=\"',cx,'\" o:opacity2=\"',cy,'\" type=\"gradientTitle\" focus=\"100%\" />']}}else{cD=[\"<\",L,' colors=\"',cr,'\" angle=\"',cq,'\" color=\"',cE,'\" color2=\"',cB,'\" opacity=\"',cx,'\" o:opacity2=\"',cy,'\" type=\"gradient\" focus=\"100%\" />']}bA(this.prepVML(cD),null,null,cH)}}else{if(A.test(cz)&&cH.tagName!==\"IMG\"){cL=b1(cz);cD=[\"<\",L,' opacity=\"',cL.get(\"a\"),'\"/>'];bA(this.prepVML(cD),null,null,cH);return cL.get(\"rgb\")}else{return cz}}}},prepVML:function(A){var L=\"display:inline-block;behavior:url(#default#VML);\",M=this.isIE8;A=A.join(\"\");if(M){A=A.replace(\"/>\",' xmlns=\"urn:schemas-microsoft-com:vml\" />');if(A.indexOf('style=\"')===-1){A=A.replace(\"/>\",' style=\"'+L+'\" />')}else{A=A.replace('style=\"','style=\"'+L)}}else{A=A.replace(\"<\",\"<hcv:\")}return A},text:function(cp,A,cr,Z,L){var M=bQ.chart.style,cq=this.createElement(\"span\").attr({text:cp,x:o(A),y:o(cr)}).css({whiteSpace:\"nowrap\",fontFamily:M.fontFamily,fontSize:M.fontSize});cq._dx=a4(L,3);return cq},path:function(A){return this.createElement(\"shape\").attr({coordsize:\"100 100\",d:A})},circle:function(A,M,L){return this.symbol(\"circle\").attr({x:A,y:M,r:x(L,1)})},g:function(A){var M,L;if(A){L={className:bl+A,\"class\":bl+A}}M=this.createElement(aa).attr(L);return M},image:function(cp,L,cq,M,A){var Z=this.createElement(\"img\").attr({src:cp});if(arguments.length>1){Z.css({left:L,top:cq,width:M,height:A})}return Z},rect:function(L,cr,M,A,Z,cq){if(ch(L)){cr=L.y;M=L.width;A=L.height;Z=L.r;cq=L.strokeWidth;L=L.x}var cp=this.symbol(\"rect\");cp.r=Z;return cp.attr(cp.crisp(cq,L,cr,cj(M,0),cj(A,0)))},invertChild:function(L,A){var M=A.style;cf(L,{flip:\"x\",left:b4(M.width)-10,top:b4(M.height)-10,rotation:-90})},symbols:{arc:function(cu,ct,cr,cx){var M=cx.start,Z=cx.end,cq=cc(M),A=ap(M),L=cc(Z),cv=ap(Z),cs=cx.innerR,cw=0.07/cr,cp=(cs&&0.1/cs)||0;if(Z-M===0){return[\"x\"]}else{if(2*ad-Z+M<cw){Z=M+(2*ad)-0.001;L=cc(Z);cv=ap(Z)}else{if(Z-M<cp){L=cc(M+cp)}}}return[\"wa\",cu-cr,ct-cr,cu+cr,ct+cr,cu+cr*cq,ct+cr*A,cu+cr*L,ct+cr*cv,\"at\",cu-cs,ct-cs,cu+cs,ct+cs,cu+cs*L,ct+cs*cv,cu+cs*cq,ct+cs*A,\"x\",\"e\"]},circle:function(A,M,L){return[\"wa\",A-L,M-L,A+L,M+L,A+L,M,A+L,M,\"e\"]},rect:function(cs,cr,cq,M){if(!at(M)){return[]}var cp=M.width,A=M.height,Z=cs+cp,L=cr+A;cq=aE(cq,cp,A);return[bM,cs+cq,cr,bO,Z-cq,cr,\"wa\",Z-2*cq,cr,Z,cr+2*cq,Z-cq,cr,Z,cr+cq,bO,Z,L-cq,\"wa\",Z-2*cq,L-2*cq,Z,L,Z,L-cq,Z-cq,L,bO,cs+cq,L,\"wa\",cs,L-2*cq,cs+2*cq,L,cs+cq,L,cs,L-cq,bO,cs,cr+cq,\"wa\",cs,cr,cs+2*cq,cr+2*cq,cs,cr+cq,cs+cq,cr,\"x\",\"e\"]}}});b8=ci}function bw(da,cO){v=aZ(v,bQ.xAxis);a1=aZ(a1,bQ.yAxis);bQ.xAxis=bQ.yAxis=null;da=aZ(bQ,da);cO&&da.callbacks.push(cO);var cP=da.chart,dq=cP.margin,dE=ch(dq)?dq:[dq,dq,dq,dq],cM=a4(cP.marginTop,dE[0]),cJ=a4(cP.marginRight,dE[1]),c3=a4(cP.marginBottom,dE[2]),c6=a4(cP.marginLeft,dE[3]),dT=cP.spacingTop,cW=cP.spacingRight,cR=cP.spacingBottom,dI=cP.spacingLeft,c4,c7,ds,dw,dC,c5,M,cB,cV,dx,dp,cZ,dJ,c2,dU,cG,cC,c8,cH,ct,dd,dR=da.instanceAPI,dr,cK,cw,cE,dl,cx,dH=this,cU=cP.events,dV=cU&&!!cU.click,cL,cI,cz,cQ,cq,dF,dS,cy,Z,L,dk,cT,dO,dg,di=cP.showAxes,cN=0,dy=[],cr,de=[],cv,db,du,dj,cD,dh,dD,cA,dB,cu,cs,cY;dH.getVar=function(dW){return{isResizing:cN,spacingBox:c4,series:de}[dW]};dH.setVar=function(dW,dX){switch(dW){case\"isResizing\":cN=dX;break;case\"spacingBox\":c4=dX;break;case\"series\":de=dX;break}};function cF(eW){var e7=eW.isX,eP=eW.opposite,d1=cv?!e7:e7,e8=d1?(eP?0:2):(eP?1:3),eB={},eE=aZ(e7?v:a1,[b7,bk,bY,aP][e8],eW),d8=this,e4,ey=eE.type,e5=ey===\"datetime\",eo=ey===\"logarithmic\",ec=eE.offset||0,eJ=e7?\"x\":\"y\",eD=eE.type==\"log\",es=eE.base,d6=function(fi,fh){fi=fi==0?1:fi;return a9.log(fi)/a9.log(fh||10)},fg=0,ef,eL,er,eK=d1?M:c5,ee,d7,ej,e1,e3,e6,eg,eX,dX,el,ei=null,e9=null,eC,eT,d5=eE.minPadding,dY=eE.maxPadding,eh=at(eE.linkedTo),fc,e0,eQ,em=eE.events,eq,d9=[],ea,eM,e2,eZ,eU={},fe={},eb={},d3,fa,ez,fb,eS=eE.categories,eV=eE.labels.formatter||function(){var fi=this.value,fh;if(fb){fh=b6(fb,fi)}else{if(ea%1000000===0){fh=(fi/1000000)+\"M\"}else{if(ea%1000===0){fh=(fi/1000)+\"k\"}else{if(!eS&&fi>=1000){fh=l(fi,0)}else{fh=fi}}}}return fh},eG=d1&&eE.labels.staggerLines,d2=eE.reversed,ek=(eS&&eE.tickmarkPlacement===\"between\")?0.5:0;function en(fj,fi){var fh=this;fh.pos=fj;fh.minor=fi;fh.isNew=true;if(!fi){fh.addLabel()}}en.prototype={addLabel:function(){var fo=this.pos,fh=eE.labels,fn,fk=!((fo===e9&&!a4(eE.showFirstLabel,1))||(fo===ei&&!a4(eE.showLastLabel,0))),fl=(eS&&d1&&eS.length&&!fh.step&&!fh.staggerLines&&!fh.rotation&&Z/eS.length)||(!d1&&Z/2),fj,fm=eS&&at(eS[fo])?eS[fo]:fo,fi=this.label;fn=eV.call({isFirst:fo===eZ[0],isLast:fo===eZ[eZ.length-1],dateTimeLabelFormat:fb,value:eo?F(fm):fm});fj=fl&&{width:cj(1,o(fl-2*(fh.padding||10)))+al};fj=by(fj,fh.style);if(fi===j){this.label=at(fn)&&fk&&fh.enabled?db.text(fn,0,0,fh.useHTML).attr({align:fh.align,rotation:fh.rotation}).css(fj).add(ej):null}else{if(fi){fi.attr({text:fn}).css(fj)}}},getLabelSize:function(){var fh=this.label;return fh?((this.labelBBox=fh.getBBox()))[d1?\"height\":\"width\"]:0},render:function(fn,fi){var fC=this,fB=!fC.minor,fq=fC.label,fm=fC.pos,fz=eE.labels,fo=fC.gridLine,fy=fB?eE.gridLineWidth:eE.minorGridLineWidth,fA=fB?eE.gridLineColor:eE.minorGridLineColor,fp=fB?eE.gridLineDashStyle:eE.minorGridLineDashStyle,fD,ft=fC.mark,fh,fj=fB?eE.tickLength:eE.minorTickLength,fr=fB?eE.tickWidth:(eE.minorTickWidth||0),fv=fB?eE.tickColor:eE.minorTickColor,fw=fB?eE.tickPosition:eE.minorTickPosition,fl=fz.step,fk=(fi&&c8)||cG,fx,fu,fs;fu=d1?ee(fm+ek,null,null,fi)+eK:M+ec+(eP?((fi&&cC)||dU)-dC-M:0);fs=d1?fk-c5+ec-(eP?cy:0):fk-ee(fm+ek,null,null,fi)-eK;if(fy){fD=d7(fm+ek,fy,fi);if(fo===j){fx={stroke:fA,\"stroke-width\":fy};if(fp){fx.dashstyle=fp}if(fB){fx.zIndex=1}fC.gridLine=fo=fy?db.path(fD).attr(fx).add(e1):null}if(!fi&&fo&&fD){fo.animate({d:fD})}}if(fr){if(fw===\"inside\"){fj=-fj}if(eP){fj=-fj}fh=db.crispLine([bM,fu,fs,bO,fu+(d1?0:-fj),fs+(d1?fj:0)],fr);if(ft){ft.animate({d:fh})}else{fC.mark=db.path(fh).attr({stroke:fv,\"stroke-width\":fr}).add(ej)}}if(fq&&!isNaN(fu)){fu=fu+fz.x-(ek&&d1?ek*eL*(d2?-1:1):0);fs=fs+fz.y-(ek&&!d1?ek*eL*(d2?1:-1):0);if(!at(fz.y)){fs+=b4(fq.styles.lineHeight)*0.9-fq.getBBox().height/2}if(eG){fs+=(fn/(fl||1)%eG)*16}if(fl){fq[fn%fl?\"hide\":\"show\"]()}fq[fC.isNew?\"attr\":\"animate\"]({x:fu,y:fs})}fC.isNew=false},destroy:function(){bp(this)}};function eO(fi){var fh=this;if(fi){fh.options=fi;fh.id=fi.id}return fh}eO.prototype={render:function(){var fH=this,fl=fH.options,fh=fl.label,fp=fH.label,fz=fl.width,fk=fl.to,fE=fl.from,fA=fl.value,fx,fo=fl.dashStyle,fC=fH.svgElem,fy=[],fB,ft,fq,fF,fs,fr,fD=fl.color,fw=fl.zIndex,fj=fl.events,fv,fm=2,fG,fu;var fI,fi,fn;fH.chart=dH;if(fz===0&&fh&&at(fh.text)){fz=1;fD=aC}if(eo){fE=C(fE);fk=C(fk);fA=C(fA)}if(fz){fy=d7([fl.value,ca(fl.to,fl.value)],fz);fv={stroke:fD,\"stroke-width\":fz};if(fo){fv.dashstyle=fo}}else{if(at(fE)&&at(fk)){fE=cj(fE,e9);fk=aE(fk,ei);fx=d7(fk);fy=d7(fE);if(fy&&fx){if(this.options.alwaysVisible){if(d1){fx[1]=fx[4]+=fy[1]===fx[1]&&fy[4]===fx[4]}else{fx[2]=fx[5]+=fy[2]===fx[2]&&fy[5]===fx[5]}}fy.push(fx[4],fx[5],fx[1],fx[2])}else{fy=null}fv={fill:fD}}else{return}}if(at(fw)){fv.zIndex=fw}if(!ej){ej=db.g(\"axis\").attr({zIndex:7}).add()}if(fC){if(fy){fC.animate({d:fy},null,fC.onGetPath)}else{fC.hide();fC.onGetPath=function(){fC.show()}}}else{if(fy&&fy.length){fH.svgElem=fC=db.path(fy).attr(fv).add();if(fj){fB=function(fJ){fC.on(fJ,function(fK){fj[fJ].apply(fH,[fK])})};for(ft in fj){fB(ft)}}}}if(fh&&at(fh.text)&&fy&&fy.length&&Z>0&&cy>0){fh=aZ({align:d1&&fx&&\"center\",x:d1?!fx&&4:10,verticalAlign:!d1&&fx&&\"middle\",y:d1?fx?16:10:fx?6:-4,rotation:d1&&!fx&&90},fh);fG=fh.style;fu=b4(fG.lineHeight,10);if(!fp){fH.label=fp=db.text(fh.text,0,0).attr({align:fh.textAlign||fh.align,rotation:fh.rotation,zIndex:fw});if(O){fp.add(ej).css(fG)}else{fp.css(fG).add(ej)}}fq=[fy[1],fy[4],a4(fy[6],fy[1])];fF=[fy[2],fy[5],a4(fy[7],fy[2])];fs=bX(fq);fr=bX(fF);fI=aX(fq)-fs;fi=aX(fF)-fr;if(fh.offsetScale!==undefined){if(fh.offsetScaleIndex!==undefined){fn=(e7?dH.yAxis:dH.xAxis)[fh.offsetScaleIndex];if(d1){fr+=fn.translate(fh.offsetScale,0,1)+(fh.offsetScale<0?fm:-fm)}else{fs=fy[1]+(fI/2)-fn.translate(fh.offsetScale,0,1)+(fh.offsetScale<0?-fm:fm);fr+=b4(fu,10)*0.37}}else{if(d1){fr+=cy*fh.offsetScale}else{fs+=Z*fh.offsetScale}}}if(fh.fixedx){fs=fs+parseInt(fh.fixedx)}fp.align(fh,false,{x:fs,y:fr,width:fI,height:fi});fp.textBound();if(fG.visibility!==av){fp.show()}}else{if(fp){fp.hide()}}return fH},destroy:function(){var fh=this;var fi;for(fi in fh){if(fi!==\"chart\"&&fh[fi]&&fh[fi].destroy){fh[fi].destroy()}delete fh[fi]}}};function et(fj,fi,fh,fl){var fk=this;fk.isNegative=fi;fk.options=fj;fk.x=fh;fk.stack=fl;fk.alignOptions={align:fj.align||(cv?(fi?\"left\":\"right\"):\"center\"),verticalAlign:fj.verticalAlign||(cv?\"middle\":(fi?\"bottom\":\"top\")),y:a4(fj.y,cv?4:(fi?14:-6)),x:a4(fj.x,cv?(fi?-6:6):0)};fk.textAlign=fj.textAlign||(cv?(fi?\"right\":\"left\"):\"center\")}et.prototype={destroy:function(){bp(this)},setTotal:function(fh){this.total=fh;this.cum=fh},render:function(fi){var fh=this,fj=fh.options.formatter.call(fh);if(fh.label){fh.label.attr({text:fj,visibility:av})}else{fh.label=dH.renderer.text(fj,0,0).css(fh.options.style).attr({align:fh.textAlign,rotation:fh.options.rotation,visibility:av}).add(fi)}},setOffset:function(fk,fm){var fp=this,fh=fp.isNegative,fn=d8.translate(fp.total),fj=d8.translate(0),fi=f(fn-fj),fo=dH.xAxis[0].translate(fp.x)+fk,fl=dH.plotHeight,fq={x:cv?(fh?fn:fn-fi):fo,y:cv?fl-fo-fm:(fh?(fl-fn-fi):fl-fn),width:cv?fi:fm,height:cv?fm:fi};if(fp.label){fp.label.align(fp.alignOptions,null,fq).attr({visibility:aD})}}};function d0(){var fh=[],fi=[],fj;e6=eg=null;eX=[];T(de,function(fp){fj=false;T([\"xAxis\",\"yAxis\"],function(fs){if(fp.isCartesian&&((fs===\"xAxis\"&&e7)||(fs===\"yAxis\"&&!e7))&&((fp.options[fs]===eE.index)||(fp.options[fs]===j&&eE.index===0))){fp[fs]=d8;eX.push(fp);fj=true}});if(!fp.visible&&cP.ignoreHiddenSeries){fj=false}if(fj){var fo,fq,fn,fl,fr,fm;if(!e7){fo=fp.options.stacking;eQ=fo===\"percent\";if(fo){fr=fp.options.stack;fl=fp.type+a4(fr,\"\");fm=\"-\"+fl;fp.stackKey=fl;fq=fh[fl]||[];fh[fl]=fq;fn=fi[fm]||[];fi[fm]=fn}if(eQ){e6=0;eg=99}}if(fp.isCartesian){T(fp.data,function(fx,fw){var fs=fx.x,fA=fx.y,ft=fA<0,fz=ft?fn:fq,fy=ft?fm:fl,fu,fv;if(e6===null){e6=eg=fx[eJ]}if(e7){if(fs>eg){eg=fs}else{if(fs<e6){e6=fs}}}else{if(at(fA)){if(fo){fz[fs]=at(fz[fs])?fz[fs]+fA:fA}fu=fz?fz[fs]:fA;fv=a4(fx.low,fu);if(!eQ){if(fu>eg){eg=fu}else{if(fv<e6){e6=fv}}}if(fo){if(!eB[fy]){eB[fy]={}}if(!eB[fy][fs]){eB[fy][fs]=new et(eE.stackLabels,ft,fs)}eB[fy][fs].setTotal(fu)}}}});if(/(area|column|bar)/.test(fp.type)&&!e7){var fk=0;if(e6>=fk){e6=fk;fc=true}else{if(eg<fk){eg=fk;e0=true}}}}}})}ee=function(fj,fp,fq,fk,fo,fi){var fl=1,fn=0,fm=fk?er:eL,fr=fk?eC:e9,fh;if(!fm){fm=eL}if(fq){fl*=-1;fn=ef}if(d2){fl*=-1;fn-=fl*ef}if(fi){if(fp){fh=fj/fm;if(eo&&fo){fh=F(fh)}}else{if(eo&&fo){fj=C(fj)}fh=fj*fm}}else{if(fp){if(d2){fj=ef-fj}fh=fj/fm+fr;if(eo&&fo){fh=F(fh)}}else{if(eo&&fo){fj=C(fj)}fh=fl*(fj-fr)*fm+fn}}return fh};d7=function(fq,fm,fj){var fi,fp,fh,fo,fl,fs,fn=fj&&c8||cG,fk=fj&&cC||dU,fr;if(!(fq instanceof Array)){fq=[fq,fq]}fl=o(ee(fq[0],null,null,fj));fs=o(ee(fq[1],null,null,fj));fi=o(fl+eK);fh=o(fs+eK);fp=o(fn-fl-eK);fo=o(fn-fs-eK);if(isNaN(fl)||isNaN(fs)){fr=true}else{if(d1){fp=dw;fo=fn-c5;if(fi<M||fi>M+Z){fr=true}}else{fi=M;fh=fk-dC;if(fp<dw||fp>dw+cy){fr=true}}}return fr?null:db.crispLine([bM,fi,fp,bO,fh,fo],fm||0)};function fd(fh,fk){var fj,fi;e2=fk?1:a9.pow(10,bz(a9.log(fh)/a9.LN10));fj=fh/e2;if(!fk){fk=[1,2,2.5,5,10];if(eE.allowDecimals===false||eo){if(e2===1){fk=[1,2,5,10]}else{if(e2<=0.1){fk=[1/e2]}}}}for(fi=0;fi<fk.length;fi++){fh=fk[fi];if(fj<=(fk[fi]+(fk[fi+1]||fk[fi]))/2){break}}fh*=e2;return fh}function eR(){eZ=[];var fv,fo=bQ.global.useUTC,fr=1000/e,fl=60000/e,fh=3600000/e,fq=24*3600000/e,fp=7*24*3600000/e,fy=30*24*3600000/e,fm=31556952000/e,ft=[[\"second\",fr,[1,2,5,10,15,30]],[\"minute\",fl,[1,2,5,10,15,30]],[\"hour\",fh,[1,2,3,4,6,8,12]],[\"day\",fq,[1,2]],[\"week\",fp,[1,2]],[\"month\",fy,[1,2,3,4,6]],[\"year\",fm,null]],fn=ft[6],fz=fn[1],fi=fn[2];for(fv=0;fv<ft.length;fv++){fn=ft[fv];fz=fn[1];fi=fn[2];if(ft[fv+1]){var fu=(fz*fi[fi.length-1]+ft[fv+1][1])/2;if(ea<=fu){break}}}if(fz===fm&&ea<5*fz){fi=[1,2,5]}var fx=fd(ea/fz,fi),fA,fk=new Date(e9*e);fk.setMilliseconds(0);if(fz>=fr){fk.setSeconds(fz>=fl?0:fx*bz(fk.getSeconds()/fx))}if(fz>=fl){fk[aH](fz>=fh?0:fx*bz(fk[N]()/fx))}if(fz>=fh){fk[bZ](fz>=fq?0:fx*bz(fk[ak]()/fx))}if(fz>=fq){fk[aT](fz>=fy?1:fx*bz(fk[bx]()/fx))}if(fz>=fy){fk[b3](fz>=fm?0:fx*bz(fk[an]()/fx));fA=fk[am]()}if(fz>=fm){fA-=fA%fx;fk[U](fA)}if(fz===fp){fk[aT](fk[bx]()-fk[aL]()+eE.startOfWeek)}fv=1;fA=fk[am]();var fj=fk.getTime()/e,fw=fk[an](),fs=fk[bx]();while(fj<ei&&fv<Z){eZ.push(fj);if(fz===fm){fj=ao(fA+fv*fx,0)/e}else{if(fz===fy){fj=ao(fA,fw+fv*fx)/e}else{if(!fo&&(fz===fq||fz===fp)){fj=ao(fA,fw,fs+fv*fx*(fz===fq?1:7))}else{fj+=fz*fx}}}fv++}eZ.push(fj);fb=eE.dateTimeLabelFormats[fn[0]]}function eA(fi){var fj,fh=fi;e2=a4(e2,a9.pow(10,bz(a9.log(ea)/a9.LN10)));if(e2<1){fj=o(1/e2)*10;fh=o(fi*fj)/fj}return fh}function ep(){var fi,fj=eA(bz(e9/ea)*ea),fh=eA(aR(ei/ea)*ea);eZ=[];fi=eA(fj);while(fi<=fh){eZ.push(fi);fi=eA(fi+ea)}}function ex(fn){var fh,fr,fi,fl,fm=eE.tickInterval,fk=eE.tickPixelInterval,fo=eE.maxZoom||(e7&&!at(eE.min)&&!at(eE.max)?aE(dH.smallestInterval*5,eg-e6):null),fp;ef=d1?Z:cy;if(eh){fi=dH[e7?\"xAxis\":\"yAxis\"][eE.linkedTo];fl=fi.getExtremes();e9=a4(fl.min,fl.dataMin);ei=a4(fl.max,fl.dataMax)}else{e9=a4(dX,eE.min,e6);ei=a4(el,eE.max,eg)}if(eo){e9=C(e9);ei=C(ei)}if(ei-e9<fo){fp=(fo-ei+e9)/2;e9=cj(e9-fp,a4(eE.min,e9-fp),e6);ei=aE(e9+fo,a4(eE.max,e9+fo),eg)}if(!eS&&!eQ&&!eh&&at(e9)&&at(ei)){fh=(ei-e9)||1;if(!at(eE.min)&&!at(dX)&&d5&&(e6<0||!fc)){e9-=fh*d5}if(!at(eE.max)&&!at(el)&&dY&&(eg>0||!e0)){ei+=fh*dY}}if(e9===ei){ea=1}else{if(eh&&!fm&&fk===fi.options.tickPixelInterval){ea=fi.tickInterval}else{ea=a4(fm,eS?1:(ei-e9)*fk/ef)}}if(!e5&&!at(eE.tickInterval)){ea=fd(ea)}d8.tickInterval=ea;eM=eE.minorTickInterval===\"auto\"&&ea?ea/5:eE.minorTickInterval;if(e5){eR()}else{ep()}if(!eh){if(eS||(e7&&dH.hasColumn)){fr=(eS?1:ea)*0.5;if(eS||!at(a4(eE.min,dX))){e9-=fr}if(eS||!at(a4(eE.max,el))){ei+=fr}}var fj=eZ[0],fq=eZ[eZ.length-1];if(eE.startOnTick){e9=fj}else{if(e9>fj){eZ.shift()}}if(eE.endOnTick){ei=fq}else{if(ei<fq){eZ.pop()}}if(!cr){cr={x:0,y:0}}if(!e5&&eZ.length>cr[eJ]){cr[eJ]=eZ.length}}}function ff(){if(cr&&!e5&&!eS&&!eh){var fi=d3,fh=eZ.length;d3=cr[eJ];if(fh<d3){while(eZ.length<d3){eZ.push(eA(eZ[eZ.length-1]+ea))}eL*=(fh-1)/(d3-1);ei=eZ[eZ.length-1]}if(at(fi)&&d3!==fi){d8.isDirty=true}}}function eF(){var fi,fh;eC=e9;eT=ei;d0();ex();er=eL;eL=ef/((ei-e9)||1);if(!e7){for(fi in eB){for(fh in eB[fi]){eB[fi][fh].cum=0}}}if(!d8.isDirty){d8.isDirty=(e9!==eC||ei!==eT)}}function eN(fj,fh,fk,fi){fk=a4(fk,true);bJ(d8,\"setExtremes\",{min:fj,max:fh},function(){dX=fj;el=fh;if(fk){dH.redraw(fi)}})}function dZ(){return{min:e9,max:ei,dataMin:e6,dataMax:eg,userMin:dX,userMax:el}}function eH(fh){if(e9>fh){fh=e9}else{if(ei<fh){fh=ei}}return ee(fh,0,1)}function ed(fh){var fi=new eO(fh).render();d9.push(fi);return fi}function eY(){var fj=ca(eE.showAlways,eX.length&&at(e9)&&at(ei)),fm=0,fl=0,fk=eE.title,fi=eE.labels,fh=[-1,1,1,-1][e8],fn;if(!ej){ej=db.g(\"axis\").attr({zIndex:7}).add();e1=db.g(\"grid\").attr({zIndex:1}).add()}fa=0;if(fj||eh){T(eZ,function(fo){if(!eU[fo]){eU[fo]=new en(fo)}else{eU[fo].addLabel()}if(e8===0||e8===2||{1:\"left\",3:\"right\"}[e8]===fi.align){fa=cj(eU[fo].getLabelSize(),fa)}});if(eG){fa+=(eG-1)*16}}else{for(fn in eU){eU[fn].destroy();delete eU[fn]}}if(fk&&fk.text){if(!d8.axisTitle){e4=d8.axisTitle=db.text(fk.text,0,0,fk.useHTML).attr({zIndex:7,rotation:fk.rotation||0,align:fk.textAlign||{low:\"left\",middle:\"center\",high:\"right\"}[fk.align]}).css(fk.style).add();e4.isNew=true}fm=e4.getBBox()[d1?\"height\":\"width\"];fl=a4(fk.margin,d1?5:10)}ec=fh*(eE.offset||cB[e8]);ez=fa+(e8!==2&&fa&&fh*eE.labels[d1?\"y\":\"x\"])+fl;cB[e8]=cj(cB[e8],ez+fm+fh*ec)}function ew(){var fk=eE.title,fy=eE.stackLabels,fj=eE.alternateGridColor,fi=eE.lineWidth,fD,fo,fr,fv=dH.hasRendered,fu=fv&&at(eC)&&!isNaN(eC),fB=ca(eE.showAlways,eX.length&&at(e9)&&at(ei));ef=d1?Z:cy;eL=ef/((ei-e9)||1);eK=d1?M:c5;if(fB||eh){if(eM&&!eS){var fq=e9+(eZ[0]-e9)%eM;for(;fq<=ei;fq+=eM){if(!fe[fq]){fe[fq]=new en(fq,true)}if(fu&&fe[fq].isNew){fe[fq].render(null,true)}fe[fq].isActive=true;fe[fq].render()}}T(eZ,function(fF,fE){if(!eh||(fF>=e9&&fF<=ei)){if(fu&&eU[fF].isNew){eU[fF].render(fE,true)}eU[fF].isActive=true;eU[fF].render(fE)}});if(fj){T(eZ,function(fF,fE){if(fE%2===0&&fF<ei){if(!eb[fF]){eb[fF]=new eO()}eb[fF].options={from:fF,to:eZ[fE+1]!==j?eZ[fE+1]:ei,color:fj};eb[fF].render();eb[fF].isActive=true}})}if(!fv){T((eE.plotLines||[]).concat(eE.plotBands||[]),function(fE){d9.push(new eO(fE).render())})}}T([eU,fe,eb],function(fE){var fF;for(fF in fE){if(!fE[fF].isActive){fE[fF].destroy();delete fE[fF]}else{fE[fF].isActive=false}}});if(fi){fD=M+(eP?Z:0)+ec;fo=cG-c5-(eP?cy:0)+ec;fr=db.crispLine([bM,d1?M:fD,d1?fo:dw,bO,d1?dU-dC:fD,d1?fo:cG-c5],fi);if(!e3){e3=db.path(fr).attr({stroke:eE.lineColor,\"stroke-width\":fi,zIndex:7}).add()}else{e3.animate({d:fr})}}if(e4){var fw=d1?M:dw,fn=b4(fk.style.fontSize||12),fs={low:fw+(d1?0:ef),middle:fw+ef/2,high:fw+(d1?ef:0)}[fk.align],fx=(d1?dw+cy:(M-(fn*0.37)))+(d1?1:-1)*(eP?-1:1)*ez+(e8===2?fn:0);e4[e4.isNew?\"attr\":\"animate\"]({x:d1?fs:fx+(eP?Z:0)+ec+(fk.x||0),y:d1?fx-(eP?cy:0)+ec:fs+(fk.y||0)});e4.isNew=false}if(fy&&fy.enabled){var fm,fp,fz,fh=d8.stackTotalGroup;if(!fh){d8.stackTotalGroup=fh=db.g(\"stack-labels\").attr({visibility:aD,zIndex:6}).translate(M,dw).add()}for(fm in eB){fp=eB[fm];for(fz in fp){fp[fz].render(fh)}}}var ft=eE.scroll,fC=d8.scroller,fA,fl;if(ft&&ft.enabled){if(d1){fA=M+ec-2;fl=cG-c5-(!eP?0:cy)+ec+ft.padding-1}else{fA=M+(eP?Z:0);fl=cG-c5}if(!fC){fC=d8.scroller=db.scroller(fA,fl,ef+4,ft.height,d1,{size:ft.buttonWidth,padding:ft.buttonPadding},false,null,this,ej).attr({fill:ft.color}).setScrollRatio(ft.scrollRatio).setScrollPosition(ft.startPercent).callback(function(){d8.scroll.apply(d8,arguments)}).add(ej)}}d8.isDirty=false}function dW(fi){var fh=d9.length;while(fh--){if(d9[fh].id===fi){d9[fh].destroy()}}}function ev(){if(L.resetTracker){L.resetTracker()}ew();T(d9,function(fh){fh.render()});T(eX,function(fh){fh.isDirty=true})}function eu(fh,fi){d8.categories=eW.categories=eS=fh;T(eX,function(fj){fj.translate();fj.setTooltipPoints(true)});d8.isDirty=true;if(a4(fi,true)){dH.redraw()}}function eI(fs,fp,fn){var fl=this,fv=fl.options,fj=fv.scroll,fh=fs,fr=fv.min,fk=fj.vxLength,fm=fj.viewPortMax,fu=fj.viewPortMin,ft=fm-fu-fk,fo=ft*fh+fu,fq=fo+fk,fi;if(fn===undefined){fn=true}if(L.resetTracker){if(fn){L.resetTracker()}else{dH.tooltip&&dH.tooltip.hide()}}dX=fo;el=fq;cg(a4(fp,false),dH);if(di){if(!cN){cr=null;fl.setScale()}T(d9,function(fw){fw.render()});fi=eL*(fo-fr);T(eX,function(fw){fw.scroll(fi,0,fn)})}bJ(dH,\"scroll\")}function d4(){var fh;bj(d8);for(fh in eB){bp(eB[fh]);eB[fh]=null}if(d8.stackTotalGroup){d8.stackTotalGroup=d8.stackTotalGroup.destroy()}T([eU,fe,eb,d9],function(fi){bp(fi)});T([e3,ej,e1,e4],function(fi){if(fi){fi.destroy()}});e3=ej=e1=e4=null}if(cv&&e7&&d2===j){d2=true}by(d8,{addPlotBand:ed,addPlotLine:ed,adjustTickAmount:ff,categories:eS,getExtremes:dZ,getPlotLinePath:d7,getThreshold:eH,isXAxis:e7,options:eE,plotLinesAndBands:d9,getOffset:eY,render:ew,setCategories:eu,setExtremes:eN,setScale:eF,setTickPositions:ex,translate:ee,redraw:ev,removePlotBand:dW,removePlotLine:dW,reversed:d2,stacks:eB,scroll:eI,destroy:d4});for(eq in em){I(d8,eq,em[eq])}eF()}function dz(){var dX={};function dY(d3,d2,d1,d0){if(!dX[d3]){var dZ=db.text(d2,0,0).css(da.toolbar.itemStyle).align({align:\"right\",x:-dC-20,y:dw+30}).on(\"click\",d0).attr({align:\"right\",zIndex:20}).add();dX[d3]=dZ}}function dW(dZ){b5(dX[dZ].element);dX[dZ]=null}return{add:dY,remove:dW}}function dK(d2){var ec,en=d2.borderWidth,dX=d2.crosshairs,ee=[],el=d2.style,dY=d2.shared,ef=b4(el.padding),eh=en+ef,ed=a4(d2.hidden,true),d8,d4,ek=d2.x||0,ej=d2.y||0,d0,dW=\"plot\",eg=false;d0=bc(dR.chartInstance.jsVars._reflowData,{hcJSON:{tooltip:{}}},true).hcJSON.tooltip;function d7(eo){eg=Boolean(eo);if(eg){ea()}}function d1(){return ed}el.padding=0;var d6=db.g(\"tooltip\").attr({zIndex:8}).add(),d9=db.rect(eh,eh,0,0,d2.borderRadius,en).attr({fill:d2.backgroundColor,\"stroke-width\":en}).add(d6).shadow(d2.shadow,undefined,d2.shadow),d5=db.text(d2.text||\"\",ef+eh,b4(el.fontSize)+ef+eh).attr({zIndex:1}).css(el).add(d6);if(d2.text){bBox=d5.getBBox();d8=bBox.width+2*ef;d4=bBox.height+2*ef;d9.attr({width:d8,height:d4,stroke:d2.borderColor})}if(ed){d6.hide()}else{d6.translate(ek,ej)}function em(){T(ee,function(eo){if(eo){eo.destroy()}});T([d9,d5,d6],function(eo){if(eo){eo.destroy()}});d9=d5=d6=null}function eb(){var ev=this,ep=ev.points||bt(ev),eu=ep[0].series.xAxis,eo=ev.x,et=eu&&eu.options.type===\"datetime\",es=bG(eo)||et,eq,er;er=es?['<span style=\"font-size: 10px\">'+(et?b6(\"%A, %b %e, %Y\",eo):eo)+\"<\/span>\"]:[];T(ep,function(ew){er.push(ew.point.tooltipFormatter(es))});return er.join(\"<br/>\")}function ei(ep,eo){ek=ed?ep:(2*ek+ep)/3;ej=ed?eo:(ej+eo)/2;d6.translate(ek,ej);if(f(ep-ek)>1||f(eo-ej)>1){du=function(){ei(ep,eo)}}else{du=null}d0.x=ep;d0.y=eo}function ea(){if(!ed){var eo=dH.hoverPoints;d6.hide();T(ee,function(ep){if(ep){ep.hide()}});if(eo){T(eo,function(ep){ep.setState()})}dH.hoverPoints=null;ed=true;d0.hidden=ed;d0.text=\"\"}}function dZ(){return dW}function d3(eC,eF){var ex,ew,eI,eH,eG,eu,es,er=0,ev={},ez,et=[],eo=eC.tooltipPos,eE=d2.formatter||eb,ey=dH.hoverPoints,eq;if(eg){ea();return}dW=eC.tooltipConstraint||\"plot\";if(dY){if(ey){T(ey,function(eJ){eJ.setState()})}dH.hoverPoints=eC;T(eC,function(eJ){eJ.setState(a6);er+=eJ.plotY;et.push(eJ.getLabelConfig())});es=eC[0].plotX;er=o(er)/eC.length;ev={x:eC[0].category};ev.points=et;eC=eC[0]}else{ev=eC.getLabelConfig()}if(dY){ez=eE.call(ev)}else{if(eC.showPercentInToolTip){ez=eC.toolText+(parseInt(this.percentage*100,10)/100)+\"%\"}else{ez=eC.toolText}}ec=eC.series;es=dY?es:eC.plotX;er=dY?er:eC.plotY;ex=o(eo?eo[0]:(cv?Z-er:es));ew=o(eo?eo[1]:(cv?cy-es:er));eG=dY||!eC.series.isCartesian||cI(ex,ew);if(ez===false||!eG){ea()}else{if(ed&&!eF){d6.show();ed=false}d5.attr({text:ez});eu=d5.getBBox();d8=eu.width+2*ef;d4=eu.height+2*ef;d9.attr({width:d8,height:d4,stroke:d2.borderColor||eC.color||ec.color||\"#606060\"});eq=aw(d8,d4,M,dw,Z,cy,{x:ex,y:ew});ei(o(eq.x-eh),o(eq.y-eh));d0.hidden=ed;d0.text=ez}if(dX){dX=bt(dX);var eB,eD=dX.length,eA,ep;while(eD--){ep=eC.series[eD?\"yAxis\":\"xAxis\"];if(dX[eD]&&ep){eB=ep.getPlotLinePath(eC[eD?\"y\":\"x\"],1);if(ee[eD]){ee[eD].attr({d:eB,visibility:aD})}else{eA={\"stroke-width\":dX[eD].width||1,stroke:dX[eD].color||\"#C0C0C0\",zIndex:2};if(dX[eD].dashStyle){eA.dashstyle=dX[eD].dashStyle}ee[eD]=db.path(eB).attr(eA).add()}}}}}return{shared:dY,refresh:d3,hide:ea,destroy:em,currentConstraint:dZ,move:ei,block:d7,visible:d1}}function dG(dY){var ec,eb,d9,dW,d8=cP.zoomType,d7=/x/.test(d8),d6=/y/.test(d8),ea=(d7&&!cv)||(d6&&cv),dX=(d6&&!cv)||(d7&&cv);function d1(eh){var ef,ek=W&&bV.width/bV.body.scrollWidth-1,eg,ej,ee,ei;eh=eh||bi.event;if(!eh.target){eh.target=eh.srcElement}ef=eh.touches?eh.touches.item(0):eh;if(eh.type!==\"mousemove\"||bi.opera||ek){dg=bB(dp);eg=dg.left;ej=dg.top}if(w){ee=eh.x;ei=eh.y}else{if(ef.layerX===j){ee=ef.pageX-eg;ei=ef.pageY-ej}else{ee=eh.layerX;ei=eh.layerY}}if(ek){ee+=o((ek+1)*eg-eg);ei+=o((ek+1)*ej-ej)}return by(eh,{chartX:ee,chartY:ei})}function d0(ee){var ef={xAxis:[],yAxis:[]};T(dy,function(eg){var ej=eg.translate,ei=eg.isXAxis,eh=cv?!ei:ei;ef[ei?\"xAxis\":\"yAxis\"].push({axis:eg,value:ej(eh?ee.chartX-M:cy-ee.chartY+dw,true)})});return ef}function dZ(ej){var el,em,ee=dH.hoverPoint,ek=dH.hoverSeries,eh,eg,ef=dU,ei=cv?ej.chartY:ej.chartX-M;if(cz&&dY.shared){em=[];eh=de.length;for(eg=0;eg<eh;eg++){if(de[eg].visible&&de[eg].tooltipPoints.length){el=de[eg].tooltipPoints[ei];if(el){el._dist=f(ei-el.plotX);ef=aE(ef,el._dist);em.push(el)}}}eh=em.length;while(eh--){if(em[eh]._dist>ef){em.splice(eh,1)}}if(em.length&&(em[0].plotX!==cD)){cz.refresh(em);cD=em[0].plotX}}if(ek&&ek.tracker){el=ek.tooltipPoints[ei+((cv?ek.yShift:ek.xShift)||0)];if(el){el.onMouseOver()}}}function d5(){var ef=dH.hoverSeries,ee=dH.hoverPoint;if(ee){ee.onMouseOut()}if(ef){ef.onMouseOut()}if(cz){cz.hide()}cD=null}function d4(){if(dW){var eg={xAxis:[],yAxis:[],chart:dH},ee=dW.getBBox(),eh=ee.x-M,ef=ee.y-dw;eg.selectionLeft=eh;eg.selectionTop=ef;eg.selectionWidth=ee.width;eg.selectionHeight=ee.height;if(d9){T(dy,function(ek,ej){var eo=ek.translate,en=ek.isXAxis,em=cv?!en:en,ei=eo(em?eh:cy-ef-ee.height,true,0,0,1),el=eo(em?eh+ee.width:cy-ef,true,0,0,1);eg[en?\"xAxis\":\"yAxis\"].push({axis:ek,min:aE(ei,el),max:cj(ei,el)})});bJ(dH,\"selection\",eg,cP.nativeZoom?cs:undefined)}dW=dW.destroy()}dH&&(dH.mouseIsDown=cQ=d9=false);bj(bV,R?\"touchend\":\"mouseup\",d4)}function d3(ei){var eg=at(ei.pageX)?ei.pageX:ei.page.x,ef=at(ei.pageX)?ei.pageY:ei.page.y,eh=dH.tooltip&&dH.tooltip.currentConstraint(),ee;if(dg){switch(eh){case\"plot\":ee=!cI(eg-dg.left-M,ef-dg.top-dw);break;default:ee=!dl(eg-dg.left,ef-dg.top)}ee=false;if(ee){d5()}}}function d2(){var ef=true,eg=false;dp.onmousedown=function(ej){var eh;ej=d1(ej);if(!R&&ej.preventDefault){eh=ej.target||ej.originalTarget||ej.srcElement||ej.relatedTarget||ej.fromElement;try{if(eh&&!ag(eh,\"isOverlay\")){bJ(dH,\"defaultprevented\");ej.preventDefault()}}catch(ei){}}dH.mouseIsDown=cQ=true;ec=ej.chartX;eb=ej.chartY;I(bV,R?\"touchend\":\"mouseup\",d4)};var ee=function(el){if(el&&el.touches&&el.touches.length>1){return}el=d1(el);if(!R&&!ag(el.target,\"isOverlay\")){el.returnValue=false}var eh=el.chartX,em=el.chartY,ej=!cI(eh-M,em-dw);if(!dg){dg=bB(dp)}if(R&&el.type===\"touchstart\"){if(ag(el.target,\"isOverlay\")){eg=true}if(ag(el.target,\"isTracker\")){if(!dH.runTrackerClick){el.preventDefault()}}else{if(!dV&&!ej){el.preventDefault()}}}if(ej){if(eh<M){eh=M}else{if(eh>M+Z){eh=M+Z}}if(em<dw){em=dw}else{if(em>dw+cy){em=dw+cy}}}if(cQ&&el.type!==\"touchstart\"&&!eg){d9=Math.sqrt(Math.pow(ec-eh,2)+Math.pow(eb-em,2));if(d9>10){if(di&&(d7||d6)&&cI(ec-M,eb-dw)){if(!dW){dW=db.rect(M,dw,ea?1:Z,dX?1:cy,0).attr({fill:cP.selectionMarkerFill||\"rgba(69,114,167,0.25)\",zIndex:7}).add()}}if(dW&&ea){var ek=eh-ec;dW.attr({width:f(ek),x:(ek>0?0:ek)+ec})}if(dW&&dX){var ei=em-eb;dW.attr({height:f(ei),y:(ei>0?0:ei)+eb})}}}else{if(null!=el){dZ(el)}}ef=ej;return ej||!di};if(typeof domutils==\"undefined\"||!domutils.isIOS()){dp.onmousemove=ee}I(dp,\"mouseleave\",d5);I(bV,\"mousemove\",d3);dp.ontouchstart=function(eh){if(d7||d6){dp.onmousedown(eh)}if(!ag(eh.target,\"isTracker\")){dH.tooltip.hide()}ee(eh)};dp.ontouchmove=ee;dp.ontouchend=function(){if(d9){d5()}eg=false};dp.onclick=function(ek){var ei=dH.hoverPoint;ek=d1(ek);ek.cancelBubble=true;if(!d9){if(ei&&ag(ek.target,\"isTracker\")){var ej=ei.plotX,eh=ei.plotY;by(ei,{pageX:dg.left+M+(cv?Z-eh:ej),pageY:dg.top+dw+(cv?cy-ej:eh)});bJ(ei.series,\"click\",by(ek,{point:ei}));ei.firePointEvent(\"click\",ek)}else{by(ek,d0(ek));bJ(dH,\"click\",ek)}}d9=false}}function ed(){if(dH.trackerGroup){dH.trackerGroup=dk=dH.trackerGroup.destroy()}bj(bV,\"mousemove\",d3);dp.onclick=dp.onmousedown=dp.onmousemove=dp.ontouchstart=dp.ontouchend=dp.ontouchmove=null}cT=function(){if(!dk){dH.trackerGroup=dk=db.g(\"tracker\").attr({zIndex:9}).add()}else{dk.translate(M,dw);if(cv){dk.attr({width:dH.plotWidth,height:dH.plotHeight}).invert()}}};cT();if(dY.enabled){dH.tooltip=cz=dK(dY)}d2();dj=setInterval(function(){if(du){du()}},32);by(this,{normalizeMouseEvent:d1,getMouseCoordinates:d0,zoomX:d7,zoomY:d6,resetTracker:d5,destroy:ed})}function dN(dW){var dX=dW.type||cP.type||cP.defaultSeriesType,d0=a[dX],dY,dZ=dH.hasRendered;if(dZ){if(cv&&dX===\"column\"){d0=a.bar}else{if(!cv&&dX===\"bar\"){d0=a.column}}}dY=new d0();dY.init(dH,dW);if(!dZ&&dY.inverted){cv=true}if(dY.isCartesian){di=dY.isCartesian}de.push(dY);return dY}function dM(dW,dZ,dY){var dX;if(dW){cg(dY,dH);dZ=a4(dZ,true);bJ(dH,\"addSeries\",{options:dW},function(){dX=dN(dW);dX.isDirty=true;dH.isDirtyLegend=true;if(dZ){dH.redraw()}})}return dX}cI=function(dW,dX){return dW>=0&&dW<=Z&&dX>=0&&dX<=cy};dl=function(dW,dX){return dW>=0&&dW<=dU&&dX>=0&&dX<=cG};function df(){if(cP.alignTicks!==false){T(dy,function(dW){dW.adjustTickAmount()})}cr=null}function cX(d3){var dY=dH.isDirtyLegend,dX,d2=dH.isDirtyBox,dW=de.length,d0=dW,dZ=dH.clipRect,d1;cg(d3,dH);while(d0--){d1=de[d0];if(d1.isDirty&&d1.options.stacking){dX=true;break}}if(dX){d0=dW;while(d0--){d1=de[d0];if(d1.options.stacking){d1.isDirty=true}}}T(de,function(d4){if(d4.isDirty){d4.cleanData();d4.getSegments();if(d4.options.legendType===\"point\"){dY=true}}});if(dY&&dO.renderLegend){dO.renderLegend();dH.isDirtyLegend=false}if(di){if(!cN){cr=null;T(dy,function(d4){d4.setScale()})}df();dD();T(dy,function(d4){if(d4.isDirty||d2){d4.redraw();d2=true}})}if(d2){dh();cT();if(dZ){bd(dZ);dZ.animate({width:dH.plotSizeX,height:dH.plotSizeY})}}T(de,function(d4){if(d4.isDirty&&d4.visible&&(!d4.isCartesian||d4.xAxis)){d4.redraw()}});if(L&&L.resetTracker){L.resetTracker()}bJ(dH,\"redraw\")}function cS(dZ,dX){var dY=da.loading,dW=dY.labelStyle;if(!cq){cq=bA(aa,{className:\"highcharts-loading\"},by(dY.style,{left:0,top:0,width:dU+al,height:cG+al,zIndex:22,display:K}),dp);by(dW,{top:(cG/2-6)+al});dF=bA(\"span\",null,dW,cq)}if(dX){I(cq,\"click\",dL);cf(cq,\"cursor\",\"pointer\")}else{bj(cq,\"click\",dL);cf(cq,\"cursor\",\"default\")}dF.innerHTML=dZ||da.lang.loading;if(!dS){cf(cq,{opacity:0,display:\"\"});z(cq,{opacity:dY.style.opacity},{duration:dY.showDuration});dS=true}}function dL(){z(cq,{opacity:0},{duration:da.loading.hideDuration,complete:function(){cf(cq,{display:K})}});dS=false}function dv(dZ){var dX,dW,dY;for(dX=0;dX<dy.length;dX++){if(dy[dX].options.id===dZ){return dy[dX]}}for(dX=0;dX<de.length;dX++){if(de[dX].options.id===dZ){return de[dX]}}for(dX=0;dX<de.length;dX++){dY=de[dX].data;for(dW=0;dW<dY.length;dW++){if(dY[dW].id===dZ){return dY[dW]}}}return null}function c1(){var dW=da.xAxis||{},dY=da.yAxis||{},dX;dW=bt(dW);T(dW,function(d0,dZ){d0.index=dZ;d0.isX=true});dY=bt(dY);T(dY,function(d0,dZ){d0.index=dZ});dy=dW.concat(dY);dH.xAxis=[];dH.yAxis=[];dy=ax(dy,function(dZ){dX=new cF(dZ);dH[dX.isXAxis?\"xAxis\":\"yAxis\"].push(dX);return dX});df()}function dc(){var dW=[];T(de,function(dX){dW=dW.concat(bP(dX.data,function(dY){return dY.selected}))});return dW}function dA(){return bP(de,function(dW){return dW.selected})}cY=function(){bJ(dH,\"selection\",{resetSelection:true},cs);dH.toolbar.remove(\"zoom\")};cs=function(dX){var dY=bQ.lang,dW=dH.pointCount<100;dH.toolbar.add(\"zoom\",dY.resetZoom,dY.resetZoomTitle,cY);if(!dX||dX.resetSelection){T(dy,function(dZ){dZ.setExtremes(null,null,false,dW)})}else{T(dX.xAxis.concat(dX.yAxis),function(dZ){var d0=dZ.axis;if(dH.tracker[d0.isXAxis?\"zoomX\":\"zoomY\"]){d0.setExtremes(dZ.min,dZ.max,false,dW)}})}cX()};function dQ(dX,dW){c7=aZ(da.title,dX);ds=aZ(da.subtitle,dW);T([[\"title\",dX,c7],[\"subtitle\",dW,ds]],function(dY){var dZ=dY[0],d2=dH[dZ],d1=dY[1],d0=dY[2];if(d2&&d1){d2=d2.destroy()}if(d0&&d0.text&&!d2){dH[dZ]=db.text(d0.text,0,0,d0.useHTML).attr({align:d0.align,\"class\":\"highcharts-\"+dZ,zIndex:1}).css(d0.style).add().align(d0,false,c4)}})}function dP(){dJ=(dx||cV).offsetWidth-1;c2=(dx||cV).offsetHeight-1;dH.chartWidth=dU=cP.width||dJ||600;dH.chartHeight=cG=cP.height||c2||400}function c9(){cV=cP.renderTo;cZ=bl+bo++;if(bG(cV)){cV=bV.getElementById(cV)}cV.innerHTML=\"\";if(!cV.offsetWidth){dx=cV.cloneNode(0);cf(dx,{position:aG,top:\"-9999px\",display:\"\"});bV.body.appendChild(dx)}dP();dH.container=dp=bA(aa,{className:\"highcharts-container\"+(cP.className?\" \"+cP.className:\"\"),id:cZ},by({position:Y,overflow:av,width:dU+al,height:cG+al,textAlign:\"left\"},cP.style),dx||cV);dH.renderer=db=cP.forExport?new d(dp,dU,cG,true):new b8(dp,dU,cG);db.lighting3D=dH.options.chart.use3DLighting;db.smartLabel=dR.smartLabel;var dY;by(db,{pending:[],processBatch:function(){setTimeout(dY,db.batchSpeed||0)}});dY=function(){if(!db||!db.pending){return}var d1=db.pending,dZ=db.batchCapacity||50,d3=db.simpleAppend,d2,d0;while((d2=d1.shift())&&dZ--&&db){d0=d2._parentNode;if(!d2.added){if(d3&&d0){d0.element.appendChild(d2.element);d2.added=true;if(O&&d0&&d0.element.gVis===av){d2.attr({visibility:av})}}else{d2.add(d0)}}delete d2._parentNode}if(dZ){setTimeout(dY,db.batchSpeed||0)}};var dW,dX;if(bE&&dp.getBoundingClientRect){dW=function(){cf(dp,{left:0,top:0});dX=dp.getBoundingClientRect();cf(dp,{left:(-(dX.left-b4(dX.left)))+al,top:(-(dX.top-b4(dX.top)))+al})};dW();I(bi,\"resize\",dW);I(dH,\"destroy\",function(){bj(bi,\"resize\",dW)})}}dD=function(){var d3=da.legend,dX=a4(d3.margin,10),d0=d3.x,dZ=d3.y,dY=d3.align,dW=d3.verticalAlign,d4,d1=da.attrGrid;cA();if((dH.title||dH.subtitle)&&!at(cM)){d4=cj((dH.title&&!c7.floating&&!c7.verticalAlign&&c7.y)||0,(dH.subtitle&&!ds.floating&&!ds.verticalAlign&&ds.y)||0);if(d4){dw=cj(dw,d4+a4(c7.margin,15)+dT)}}if(d3.enabled&&!d3.floating){if(dY===\"right\"){if(!at(cJ)){dC=cj(dC,dH.legendWidth-d0+dX+cW)}}else{if(dY===\"left\"){if(!at(c6)){M=cj(M,dH.legendWidth+d0+dX+dI)}}else{if(dW===\"top\"){if(!at(cM)){dw=cj(dw,dH.legendHeight+dZ+dX+dT)}}else{if(dW===\"bottom\"){if(!at(c3)){c5=cj(c5,dH.legendHeight-dZ+dX+cR)}}}}}}if(d1&&d1.enabled){if(!dH.attrGrid){dH.attrGrid=new a0.AttrGrid(dH)}var d2=dH.attrGrid.getHeight();c5+=d2}if(di){T(dy,function(d5){d5.getOffset()})}if(!at(c6)){M+=cB[3]}if(!at(cM)){dw+=cB[0]}if(!at(c3)){c5+=cB[2]}if(!at(cJ)){dC+=cB[1]}dB()};function dt(){var dX;function dW(){var dZ=cP.width||cV.offsetWidth,dY=cP.height||cV.offsetHeight;if(dZ&&dY){if(dZ!==dJ||dY!==c2){clearTimeout(dX);dX=setTimeout(function(){cu(dZ,dY,false)},100)}dJ=dZ;c2=dY}}I(bi,\"resize\",dW);I(dH,\"destroy\",function(){bj(bi,\"resize\",dW)})}function dm(){bJ(dH,\"endResize\",null,function(){cN-=1})}cu=function(dY,dW,dZ){var d0=dH.title,dX=dH.subtitle;cN+=1;cg(dZ,dH);c8=cG;cC=dU;dH.chartWidth=dU=o(dY);dH.chartHeight=cG=o(dW);cf(dp,{width:dU+al,height:cG+al});db.setSize(dU,cG,dZ);Z=dU-M-dC;cy=cG-dw-c5;cr=null;T(dy,function(d1){d1.isDirty=true;d1.setScale()});T(de,function(d1){d1.isDirty=true});dH.isDirtyLegend=true;dH.isDirtyBox=true;dD();if(d0){d0.align(null,null,c4)}if(dX){dX.align(null,null,c4)}cX(dZ);c8=null;bJ(dH,\"resize\");if(cn===false){dm()}else{setTimeout(dm,(cn&&cn.duration)||500)}};dB=function(){dH.plotLeft=M=o(M);dH.plotTop=dw=o(dw);dH.plotWidth=Z=o(dU-M-dC);dH.plotHeight=cy=o(cG-dw-c5);dH.plotSizeX=cv?cy:Z;dH.plotSizeY=cv?Z:cy;c4={x:dI,y:dT,width:dU-dI-cW,height:cG-dT-cR}};cA=function(){dw=a4(cM,dT);dC=a4(cJ,cW);c5=a4(c3,cR);M=a4(c6,dI);cB=[0,0,0,0]};dh=function(){var dY=cP.borderWidth||0,d6=cP.backgroundColor,d9=cP.plotBackgroundColor,ey=cP.plotBackgroundImage,em=cP.bgSWF,el=cP.bgSWFAlpha/100,et=cP.bgImageDisplayMode,ea=cP.bgImageVAlign,d0=cP.bgImageHAlign,en=cP.bgImageScale,ee=cP.logoURL,ex=cP.logoAlpha/100,eg=cP.logoPosition,ec=cP.logoLink,ej=cP.logoScale,d8=cP.logoLeftMargin,eB=cP.logoTopMargin,ek=cP._chartBGImageGroup,er=cP._chartBGImage||[],eD=cP._chartLogoImageGroup,ed=cP._logoTracker,es=cP._chartLogoImage,eh,d5,ei={x:M,y:dw,width:Z,height:cy};eh=dY+(cP.shadow?8:0);d5=eh%2;if(dY||d6){if(!cH){cH=db.rect(eh/2,eh/2,dU-eh+d5,cG-eh+d5,cP.borderRadius,dY).attr({stroke:cP.borderColor,\"stroke-width\":dY,fill:d6||K}).add().shadow(cP.shadow,undefined,cP.shadow)}else{cH.animate(cH.crisp(null,null,null,dU-eh,cG-eh))}}var eu=db.clipRect(dY,dY,dU-dY*2,cG-dY*2);if(em&&!dr){var ef=new Image(),ep,eo=1,d7=1,dW,dZ,eC,ez=0,ev,d4;if(ek){ek.renderer=db;cK=ek;dr=er;for(ev=dr.length;ez<ev;ez+=1){d4=dr[ez];d4.renderer=db}ek.clip(eu).add()}else{if(!cK){cK=db.g(\"group\").attr({visibility:aD}).clip(eu).add()}dr=[];ef.onload=function(){ep=bh(et,ea,d0,en,dY,dU,cG,ef);if(ep.tileInfo){eo=ep.tileInfo.xCount;d7=dW=ep.tileInfo.yCount;eC=ep.y;delete ep.tileInfo;while(eo){dW-=1;dr[dZ]=cK.renderer.image(em).attr(ep).css({opacity:el}).add(cK.attr({visibility:aD}));ep.y+=ep.height;if(dW==0){dW=d7;eo-=1;ep.x+=ep.width;ep.y=eC}}}else{dr[0]=cK.renderer.image(em).attr(ep).css({opacity:el}).add(cK.attr({visibility:aD}))}};ef.src=em}dH._chartBGImageGroup=cK;dH._chartBGImage=dr}if(d9){if(!ct){ct=db.rect(M,dw,Z,cy,ab(cP.plotBorderRadius,0)).attr({fill:d9}).add().shadow(cP.plotShadow,undefined,cP.plotShadow)}else{ct.animate(ei)}}if(ey){if(!dd){dd=db.image(ey,M,dw,Z,cy).add()}else{dd.animate(ei)}}if(cP.plotBorderWidth){var eq=cP.plotBorderWidth,d3=eq*0.5,dX={x:M-d3,y:dw-d3,width:Z+eq,height:cy+eq,r:ab(cP.plotBorderRadius,0)};if(!cx){cx=db.rect(dX.x,dX.y,dX.width,dX.height,dX.r,eq).attr({stroke:cP.plotBorderColor,\"stroke-width\":eq,\"stroke-linejoin\":\"round\",zIndex:2}).add()}else{cx.animate(cx.crisp(null,dX.x,dX.y,dX.width,dX.height))}}if(ee&&!cw){var ew=new Image(),d1,d2,eA,eb;if(eD){eD.renderer=db;cE=eD;eD.clip(eu).add();if(ed){ed.renderer=db;eb=ed;eb.add();eb._chart=dH}es.renderer=db;cw=es}else{switch(eg){case\"tr\":d2=n;eA=H;break;case\"bl\":d2=a2;eA=bu;break;case\"br\":d2=a2;eA=H;break;case\"cc\":d2=co;eA=co;break;default:d2=n;eA=bu;break}if(!cE){cE=db.g(\"group\").attr({visibility:av,zIndex:7}).clip(eu).add()}if(ec){eb=db.rect(0,0,1,1,0).attr({isTracker:true,stroke:ce,fill:ce,\"stroke-width\":0,visibility:aD,zIndex:10}).css({cursor:\"pointer\",_cursor:\"hand\"}).add();eb._chart=dH;eb.on(\"mouseover\",function(){if(eb&&eb._chart.tooltip){eb._chart.tooltip.hide()}}).on(\"click\",function(){cP.events.click.call({link:ec})})}cw=db.image(ee);ew.onload=function(){d1=bh(\"none\",d2,eA,ej,dY,dU,cG,ew);cw.attr(d1).translate(d8,eB).css({opacity:ex}).add(cE.attr({visibility:aD}));if(ec){d1.r=0;eb.attr(d1)}};ew.src=ee}dH._chartLogoImageGroup=cE;dH._logoTracker=eb;dH._chartLogoImage=cw}dH.isDirtyBox=false};function A(){var d2=this,d3=d2.options.chart.canvasBaseColor3D,dW=d2.options.chart.canvasBaseDepth,dY=d2.options.chart.canvasBgDepth,dX=d2.options.chart.canvasBgColor,d1=d2.renderer,d0=d2.options.chart.defaultSeriesType,d4=d2.xDepth,dZ=d2.yDepth;if(d2.options.chart.showCanvasBase){if(d0===\"bar3d\"){d2.base3D=d1.rect3d(d2.plotLeft-d4-dW,d2.plotTop+dZ,dW,d2.plotHeight,d4,dZ,0,\"canvasBase3D\")}else{d2.base3D=d1.rect3d(d2.plotLeft-d4,d2.plotTop+d2.plotHeight+dZ,d2.plotWidth,dW,d4,dZ,0,\"canvasBase3D\")}d2.base3D.attr({fill:d3,lighting3D:d2.options.chart.use3DLighting}).add()}if(d2.options.chart.showCanvasBg){if(d0===\"bar3d\"){ct.depth3D=d1.path([\"M\",d2.plotLeft,d2.plotTop,\"L\",d2.plotLeft+(dY*1.2),d2.plotTop-dY,d2.plotLeft+d2.plotWidth-dY,d2.plotTop-dY,d2.plotLeft+d2.plotWidth,d2.plotTop,\"Z\"]).attr({fill:dX}).add()}else{ct.depth3D=d1.path([\"M\",d2.plotLeft+d2.plotWidth,d2.plotTop,\"L\",d2.plotLeft+d2.plotWidth+dY,d2.plotTop+(dY*1.2),d2.plotLeft+d2.plotWidth+dY,d2.plotTop+d2.plotHeight-dY,d2.plotLeft+d2.plotWidth,d2.plotTop+d2.plotHeight,\"Z\"]).attr({fill:dX}).add()}}}function c0(){var d1=da.labels,dY=da.credits,d2,d5,dZ,dX,d4={},d0;dQ();d5=dH.options.legend;if(d5.enabled){dZ=ca(d5.type,\"point\");dX=bm[dZ];dO=dH.legend=new dX();dO.init(dH)}var d3=dH.options.attrGrid;if(d3&&d3.enabled){dH.attrGrid=new a0.AttrGrid(dH)}dD();T(dy,function(d6){d6.setTickPositions(true)});df();dD();dh();if(di){T(dy,function(d6){d6.render()})}if(dH.attrGrid){dH.attrGrid.render()}if(!dH.seriesGroup){dH.seriesGroup=db.g(\"series-group\").attr({zIndex:3}).add()}T(de,function(d6){d6.translate();d6.setTooltipPoints();if(da.chart.is3D){d0=d6.type;if(!d4[d0]){d4[d0]=[]}d4[d0].push(d6)}else{d6.render()}});if(da.chart.is3D){dH.xDepth=ab(da.chart.xDepth,10);dH.yDepth=ab(da.chart.yDepth,10);A.call(dH);bK(dH,d4)}if(d1.items){T(d1.items,function(){var d7=by(d1.style,this.style),d6=b4(d7.left)+M,d9=b4(d7.top)+dw;delete d7.left;delete d7.top;var d8=db.text(this.html,d6,d9).attr({zIndex:ab(this.zIndex,2),align:ca(this.textAlign,\"left\")}).css(d7).add();if(this.vAlign===\"bottom\"){d8.attr({y:d9-d8.getBBox().height})}if(this.vAlign===\"middle\"){d8.attr({y:d9-(d8.getBBox().height/2)})}dH.labels.push(d8)})}if(!dH.toolbar){dH.toolbar=dz(dH)}if(dY.enabled&&!dH.credits){d2=dY.href;db.text(dY.text,0,0).on(\"click\",function(){if(d2){location.href=d2}}).attr({align:dY.position.align,zIndex:8}).css(dY.style).add().align(dY.position)}cT();if(da.buttons){var dW;for(dW in da.buttons){dH.addButton(da.buttons[dW])}}if(da.subCharts&&da.subCharts.length&&!db.forExport){dH.subCharts=[];T(da.subCharts,function(d7){var d6=d7.chart;d6.renderTo=bA(aa,null,{position:\"relative\",background:\"transparent\",left:d6.left+al,top:(w&&!cb?d6.top:(d6.top-cG))+al,width:d6.width+al,height:d6.height+al},dp);by(d7,{instanceAPI:da.instanceAPI});dH.subCharts.push(new bw(d7))})}if(da.chart.hasScroll){if(di){T(dy,function(d7){var d6=d7.options,d8=d6.scroll;if(d8&&d8.enabled){d7.scroll(d8.startPercent,false,true)}})}}dH.hasRendered=true;if(dx){cV.appendChild(dp);b5(dx)}}function cp(){var dY,dX,dW=dp&&dp.parentNode;if(dH===null){return}bJ(dH,\"destroy\");bj(bi,\"unload\",cp);bj(dH);dY=dy.length;while(dY--){dy[dY]=dy[dY].destroy()}if(dH.attrGrid){dH.attrGrid.destroy()}dY=de.length;while(dY--){de[dY]=de[dY].destroy()}T([\"title\",\"subtitle\",\"seriesGroup\",\"clipRect\",\"credits\",\"tracker\"],function(dZ){var d0=dH[dZ];if(d0){dH[dZ]=d0.destroy()}});dY=dH.labels.length;while(dY--){dX=dH.labels[dY];if(dX&&dX.destroy){dX.destroy()}}delete dH.labels;T([cH,cx,ct,dO,cz,db,L],function(dZ){if(dZ&&dZ.destroy){dZ.destroy()}});cH=cx=ct=dO=cz=db=L=null;if(dp){dp.innerHTML=\"\";bj(dp);if(dW){b5(dp)}dp=null}clearInterval(dj);for(dY in dH){delete dH[dY]}dH=null}function dn(){var dW=\"onreadystatechange\",dX=\"complete\";if(!cb&&bi==bi.top&&bV.readyState!==dX){bV.attachEvent(dW,function(){bV.detachEvent(dW,dn);if(bV.readyState===dX){dn()}});return}dR.hcInstance=dH;c9();cA();dB();T(da.series||[],function(dY){dN(dY)});dH.inverted=cv=a4(cv,da.chart.inverted);c1();dH.render=c0;dH.tracker=L=new dG(da.tooltip);c0();bJ(dH,\"load\");T(dH.callbacks,function(dY){dY.apply(dH,[dH,dR])});T(da.callbacks,function(dY){dY.apply(dH,[dH,dR])})}I(bi,\"unload\",cp);if(cP.reflow!==false){I(dH,\"load\",dt)}if(cU){for(cL in cU){I(dH,cL,cU[cL])}}dH.options=da;dH.series=de;dH.addSeries=dM;dH.animation=a4(cP.animation,true);dH.destroy=cp;dH.get=dv;dH.getSelectedPoints=dc;dH.getSelectedSeries=dA;dH.hideLoading=dL;dH.isInsidePlot=cI;dH.redraw=cX;dH.setSize=cu;dH.setTitle=dQ;dH.showLoading=cS;dH.pointCount=0;dH.counters=new ac();dH.labels=[];dn()}bw.prototype.callbacks=[];var bS=function(){};bS.prototype={init:function(M,L){var A=this,Z=M.chart.counters,cp;A.series=M;A.applyOptions(L);A.pointAttr={};A.index=M.pointCount;if(M.options.colorByPoint){cp=M.chart.options.colors;if(!A.options){A.options={}}A.color=A.options.color=A.color||cp[Z.color++];Z.wrapColor(cp.length)}M.chart.pointCount++;M.pointCount++;return A},applyOptions:function(L){var A=this,M=A.series;A.config=L;if(aJ(L)||L===null){A.y=L}else{if(ch(L)&&!aJ(L.length)){by(A,L);A.options=L}else{if(bG(L[0])){A.name=L[0];A.y=L[1]}else{if(aJ(L[0])){A.x=L[0];A.y=L[1]}}}}if(A.x===j){A.x=M.autoIncrement()}},destroy:function(){var A=this,L=A.series,M=L.chart.hoverPoints,Z;L.chart.pointCount--;if(M){A.setState();af(M,A)}if(A===L.chart.hoverPoint){A.onMouseOut()}bj(A);T([\"graphic\",\"tracker\",\"group\",\"dataLabel\",\"connector\",\"shadowGroup\"],function(cp){if(A[cp]){A[cp].destroy()}});if(A.legendItem){A.series.chart.legend.destroyItem(A)}for(Z in A){A[Z]=null}},getLabelConfig:function(){var A=this;return{x:A.category,y:A.y,series:A.series,point:A,percentage:A.percentage,total:A.total||A.stackTotal}},select:function(cp,L){var A=this,M=A.series,Z=M.chart;cp=a4(cp,!A.selected);A.firePointEvent(cp?\"select\":\"unselect\",{accumulate:L},function(){A.selected=cp;A.setState(cp&&bF);if(!L){T(Z.getSelectedPoints(),function(cq){if(cq.selected&&cq!==A){cq.selected=false;cq.setState(aA);cq.firePointEvent(\"unselect\")}})}})},onMouseOver:function(){var A=this,M=A.series.chart,Z=M.tooltip,L=M.hoverPoint;if(L&&L!==A){L.onMouseOut()}A.firePointEvent(\"mouseOver\");if(Z&&!Z.shared){Z.refresh(A)}if(A.link!==undefined&&A.series.tracker){A.series.tracker.css({cursor:\"pointer\",_cursor:\"hand\"})}A.setState(a6);M.hoverPoint=A},onMouseOut:function(){var A=this;A.firePointEvent(\"mouseOut\");A.setState();A.series.chart.hoverPoint=null;if(A.link!==undefined&&A.series.tracker){A.series.tracker.css({cursor:\"auto\",_cursor:\"auto\"})}},tooltipFormatter:function(M){var A=this,L=A.series;return['<span style=\"color:'+L.color+'\">',(A.name||L.name),\"<\/span>: \",(M?(\"x = \"+(A.name||A.x)+\", \"):\"\"),\"\",(M?\"y = \":\"\"),A.y,\"\"].join(\"\")},update:function(L,cr,cp){var A=this,M=A.series,cq=A.graphic,Z=M.chart;cr=a4(cr,true);A.firePointEvent(\"update\",{options:L},function(){A.applyOptions(L);if(ch(L)){M.getAttribs();if(cq){cq.attr(A.pointAttr[M.state])}}M.isDirty=true;if(cr){Z.redraw(cp)}})},remove:function(cq,cp){var A=this,L=A.series,M=L.chart,Z=L.data;cg(cp,M);cq=a4(cq,true);A.firePointEvent(\"remove\",null,function(){af(Z,A);A.destroy();L.isDirty=true;if(cq){M.redraw()}})},firePointEvent:function(cq,Z,L){var A=this,cp=this.series,M=cp.options;if(M.point.events[cq]||(A.options&&A.options.events&&A.options.events[cq])){this.importEvents()}if(cq===\"click\"&&M.allowPointSelect){L=function(cr){if(A.graphic&&A.graphic.parentNode){A.select(null,cr.ctrlKey||cr.metaKey||cr.shiftKey)}}}bJ(this,cq,Z,L)},importEvents:function(){if(!this.hasImportedEvents){var A=this,L=aZ(A.series.options.point,A.options),Z=L.events,M;A.events=Z;for(M in Z){I(A,M,Z[M])}this.hasImportedEvents=true}},setState:function(L){var cu=this,cq=cu.series,cv=cq.options.states,M=az[cq.type].marker&&cq.options.marker,cp=M&&!M.enabled,Z=M&&M.states[L],cr=Z&&Z.enabled===false,ct=cq.stateMarkerGraphic,cs=cq.chart,A=cu.pointAttr;L=L||aA;if(L===cu.state||(cu.selected&&L!==bF)||(cv[L]&&cv[L].enabled===false)||(L&&(cr||(cp&&!Z.enabled)))){return}if(cu.graphic){cu.graphic.attr(A[L])}else{if(L){if(!ct){cq.stateMarkerGraphic=ct=cs.renderer.circle(0,0,A[L].r).attr(A[L]).add(cq.group)}ct.translate(cu.plotX,cu.plotY)}if(ct){ct[L?\"show\":\"hide\"]()}}cu.state=L}};var bq=function(){};bq.prototype={isCartesian:true,type:\"line\",pointClass:bS,pointAttrToOptions:{stroke:\"lineColor\",\"stroke-width\":\"lineWidth\",fill:\"fillColor\",r:\"radius\"},init:function(cq,L){var cp=this,Z,M,A=cq.series.length;cp.chart=cq;L=cp.setOptions(L);by(cp,{index:A,options:L,pointCount:0,name:ca(L.name)===undefined?\"\":L.name,state:aA,pointAttr:{},visible:L.visible!==false,selected:L.selected===true});M=L.events;for(Z in M){I(cp,Z,M[Z])}if((M&&M.click)||(L.point&&L.point.events&&L.point.events.click)||L.allowPointSelect){cq.runTrackerClick=true}cp.getColor();cp.getSymbol();cp.setData(L.data,false)},autoIncrement:function(){var L=this,A=L.options,M=L.xIncrement;M=a4(M,A.pointStart,0);L.pointInterval=a4(L.pointInterval,A.pointInterval,1);L.xIncrement=M+L.pointInterval;return M},cleanData:function(){var Z=this,cp=Z.chart,cq=Z.data,cs,M,cr=cp.smallestInterval,A,L;aW(cq,function(cu,ct){return(cu.x-ct.x)});if(Z.options.connectNulls){for(L=cq.length-1;L>=0;L--){if(cq[L].y===null&&cq[L-1]&&cq[L+1]){cq.splice(L,1)}}}for(L=cq.length-1;L>=0;L--){if(cq[L-1]){A=cq[L].x-cq[L-1].x;if(A>0&&(M===j||A<M)){M=A;cs=L}}}if(cr===j||M<cr){cp.smallestInterval=M}Z.closestPoints=cs},getSegments:function(){var M=this,Z=M.data,L=[],A=-1;if(M.options.connectNullData){T(Z,function(cp,cq){if(typeof cp.y==\"number\"){L.push(Z[cq])}});L=[L]}else{T(Z,function(cp,cq){if(typeof cp.y!=\"number\"){if(cq>A+1){L.push(Z.slice(A+1,cq))}A=cq}else{if(cq==Z.length-1){L.push(Z.slice(A+1,cq+1))}}})}this.segments=L},setOptions:function(M){var A=this.chart.options.plotOptions,L=aZ(A[this.type],A.series,M);return L},getColor:function(){var L=this.chart.options.colors,A=this.chart.counters;this.color=this.options.color||L[A.color++]||\"#0000ff\";A.wrapColor(L.length)},getSymbol:function(){var A=this.chart.options.symbols,L=this.chart.counters;this.symbol=this.options.marker.symbol||A[L.symbol++];L.wrapSymbol(A.length)},addPoint:function(cu,ct,L,M){var cp=this,Z=cp.data,cs=cp.graph,A=cp.area,cq=cp.chart,cr=(new cp.pointClass()).init(cp,cu);cg(M,cq);if(cs&&L){cs.shift=L}if(A){A.shift=L;A.isArea=true}ct=a4(ct,true);Z.push(cr);if(L){Z[0].remove(false)}cp.getAttribs();cp.isDirty=true;if(ct){cq.redraw()}},setData:function(cp,cr){var L=this,cq=L.data,Z=L.initialColor,M=L.chart,A=(cq&&cq.length)||0;L.xIncrement=null;if(at(Z)){M.counters.color=Z}cp=ax(bt(cp||[]),function(cs){return(new L.pointClass()).init(L,cs)});while(A--){cq[A].destroy()}L.data=cp;L.cleanData();L.getSegments();L.getAttribs();L.isDirty=true;M.isDirtyBox=true;if(a4(cr,true)){M.redraw(false)}},remove:function(Z,M){var A=this,L=A.chart;Z=a4(Z,true);if(!A.isRemoving){A.isRemoving=true;bJ(A,\"remove\",null,function(){A.destroy();L.isDirtyLegend=L.isDirtyBox=true;if(Z){L.redraw(M)}})}A.isRemoving=false},translate:function(){var cq=this,cu=cq.chart,ct=cq.options.stacking,cs=cq.xAxis.categories,A=cq.yAxis,cp=cq.data,cr=cp.length;while(cr--){var cy=cp[cr],M=cy.x,cw=cy.y,cv=cy.low,cx=A.stacks[(cw<0?\"-\":\"\")+cq.stackKey],cz,Z;cy.plotX=cq.xAxis.translate(M);if(ct&&cx&&cx[M]){cz=cx[M];Z=cz.total;var L=A.options.min;cv=cz.cum;cz.cum+=cw;cw=cj(L,cv+cw);cv=cj(L,cv);if(ct===\"percent\"){cv=Z?cv*100/Z:0;cw=Z?cw*100/Z:0}cy.percentage=Z?cy.y*100/Z:0;cy.stackTotal=Z}if(at(cv)){cy.yBottom=A.translate(cv,0,1,0,1)}if(cw!==null){cy.plotY=A.translate(cw,0,1,0,1)}cy.clientX=cu.inverted?cu.plotHeight-cy.plotX:cy.plotX;cy.category=cs&&cs[cy.x]!==j?cs[cy.x]:cy.x}},setTooltipPoints:function(Z){var cq=this,cr=cq.chart,L=cr.inverted,cp=[],ct=o((L?cr.plotTop:cr.plotLeft)+cr.plotSizeX),cs,M,A=[];if(Z){cq.tooltipPoints=null}T(cq.segments,function(cu){cp=cp.concat(cu)});if(cq.xAxis&&cq.xAxis.reversed){cp=cp.reverse()}T(cp,function(cu,cv){cs=cp[cv-1]?cp[cv-1]._high+1:0;M=cu._high=cp[cv+1]?(bz((cu.plotX+(cp[cv+1]?cp[cv+1].plotX:ct))/2)):bz(cu.plotX+30);while(cs<=M){A[L?ct-cs++:cs++]=cu}});cq.tooltipPoints=A},onMouseOver:function(){var L=this,M=L.chart,A=M.hoverSeries;if(!R&&M.mouseIsDown){return}if(A&&A!==L){A.onMouseOut()}if(L.options.events.mouseOver){bJ(L,\"mouseOver\")}if(L.tracker){L.tracker.toFront()}L.setState(a6);M.hoverSeries=L},onMouseOut:function(){var M=this,L=M.options,Z=M.chart,cp=Z.tooltip,A=Z.hoverPoint;if(A){A.onMouseOut()}if(M&&L.events.mouseOut){bJ(M,\"mouseOut\")}if(cp&&!L.stickyTracking){cp.hide()}M.setState()},animate:function(cp){var L=this,M=L.chart,A=L.clipRect,Z=L.options.animation;if(Z&&!ch(Z)){Z={}}if(cp){if(!A.animationInit){A.attr({width:0});A.animationInit=true}}else{if(!A.isAnimating){A.animate({width:A.cliprectW},Z);A.isAnimating=true}this.animate=null}},drawPoints:function(){var cq=this,A,cp=cq.data,ct=cq.chart,cv=cq.options,L,cw,cr,cu,cs,Z,M;if(cq.options.marker.enabled){cr=cp.length;while(cr--){cu=cp[cr];L=cu.plotX;cw=cu.plotY;M=cu.graphic;if(cw!==j&&!isNaN(cw)){A=cu.pointAttr[cu.selected?bF:aA];cs=A.r;Z=(cu.marker&&cu.marker.startAngle||90)*aQ;if(M){M.animate({x:L,y:cw,r:cs})}else{cu.graphic=ct.renderer.symbol(a4(cu.marker&&cu.marker.symbol,cq.symbol),L,cw,cs,{startAngle:Z}).attr(A).add(cq.group)}}}}},convertAttribs:function(M,L,cs,cr){var cp=this.pointAttrToOptions,A,Z,cq={};M=M||{};L=L||{};cs=cs||{};cr=cr||{};for(A in cp){Z=cp[A];cq[A]=a4(M[Z],L[A],cs[A],cr[A])}return cq},getAttribs:function(){var ct=this,M=az[ct.type].marker?ct.options.marker:ct.options,cz=M.states,L=cz[a6],cu,Z=ct.color,cv={stroke:Z,fill:Z},cs=ct.data,cr,cx,cq=[],A,cp=ct.pointAttrToOptions,cw,cy;if(ct.options.marker){L.radius=L.radius||M.radius+2;L.lineWidth=L.lineWidth||M.lineWidth+1}else{L.color=L.color||b1(L.color||Z).brighten(L.brightness).get()}cq[aA]=ct.convertAttribs(M,cv);T([a6,bF],function(cA){cq[cA]=ct.convertAttribs(cz[cA],cq[aA])});ct.pointAttr=cq;cr=cs.length;while(cr--){cx=cs[cr];M=(cx.options&&cx.options.marker)||cx.options;if(M&&M.enabled===false){M.radius=0}cw=false;if(cx.options){for(cy in cp){if(at(M[cp[cy]])){cw=true}}}if(cw){A=[];cz=M.states||{};cu=cz[a6]=cz[a6]||{};if(!ct.options.marker){cu.color=b1(cu.color||cx.options.color).brighten(cu.brightness||L.brightness).get()}A[aA]=ct.convertAttribs(M,cq[aA]);A[a6]=ct.convertAttribs(cz[a6],cq[a6],A[aA]);A[bF]=ct.convertAttribs(cz[bF],cq[bF],A[aA])}else{A=cq}cx.pointAttr=A}},destroy:function(){var M=this,Z=M.chart,A=M.clipRect,cp=/\\/5[0-9\\.]+ (Safari|Mobile)\\//.test(B),L,cq;bJ(M,\"destroy\");bj(M);if(M.legendItem){M.chart.legend.destroyItem(M)}T(M.data,function(cr){cr.destroy()});if(M.graphLine){T(M.graphLine,function(cr){cr.destroy()})}if(A&&A!==Z.clipRect){M.clipRect=A.destroy()}T([\"area\",\"graph\",\"dataLabelsGroup\",\"group\",\"tracker\"],function(cr){if(M[cr]){L=cp&&cr===\"group\"?\"hide\":\"destroy\";M[cr][L]()}});if(Z.hoverSeries===M){Z.hoverSeries=null}af(Z.series,M);for(cq in M){delete M[cq]}},drawDataLabels:function(){if(this.options.dataLabels.enabled){var ct=this,cX,cV,dc=ct.data,L=ct.options,cE=L.dataLabels,cP,cz=ct.dataLabelsGroup,dd=ct.chart,cS=dd.renderer,cx=dd.options.chart,c3=dd.options[b0],cs=dd.inverted,cN=ct.type,cI,M=L.stacking,c2=/^(column|column3d|bar|bar3d|floatedcolumn|dragcolumn)$/.test(cN),cY=cE.verticalAlign===null,cO=cE.y===null,c6=dd.plotWidth,cv=dd.plotHeight,cQ=cS.smartLabel||c3.smartLabel,cG,cW,cZ,cq,c0,cJ,cy,cH,cr,cR=/^(line|area|stepzoom|dragline|dragarea|spline)$/.test(cN),cC=ct.depthYDisplacement||0,cU=ct.depthXDisplacement||0,cK,cp=cE.style.fontSize.replace(/px/,\"\"),Z=cS.box.nodeName==\"svg\",cB=(Z&&!M)?2:0,db=\"right\",cM=\"center\",cD=\"left\",cT,da,cw=false,c9=cx.valuePadding,cF=2+c9,c1=cN==\"floatedcolumn\",cL=dd.options.chart.usePerPointLabelColor,cu=L.stacking?0.95:0.7,c7,c5,c8,A,c4,cA;cQ.setStyle(cE.style);if(c2){cG=cx.placeValuesInside;if(M){if(cY){cE=aZ(cE,{verticalAlign:\"middle\"})}if(cO){cE=aZ(cE,{y:{top:14,middle:4,bottom:-6}[cE.verticalAlign]})}cE.align=\"center\"}else{if(cY){cE=aZ(cE,{verticalAlign:\"top\"})}}}if(!/^(bar|pie|bar3d)$/.test(cN)){cE.rotation=cq=(cx.rotateValues==1)?270:undefined}if(!cz){cz=ct.dataLabelsGroup=cS.g(\"data-labels\").attr({visibility:ct.visible?aD:av,zIndex:6}).translate(dd.plotLeft,dd.plotTop).add();if(dd.options.chart.hasScroll){cz.clip(ct.clipRect)}}else{cz.translate(dd.plotLeft,dd.plotTop)}cI=cE.color;if(cI===\"auto\"){cI=null}cE.style.color=a4(cI,ct.color,\"black\");T(dc,function(dm,dh){var de=dm.barX,df=(de&&de+(dm.barW/2))||(dm.plotX!=null?dm.plotX:-999),dq=a4(dm.plotY,-999),dp=dm.dataLabel,dj=cE.align,dl=cO?(dm.y>=0?-6:12):cE.y;cH=cE.formatter.call(dm.getLabelConfig());if(cH==null){return}if(c1){dq=ab(dm.barY,dq)}cy=cQ.getOriSize(cH,undefined,undefined,false);cP=cy.text;c4=(cp*cu-(cy.height*0.5));cX=(cs?c6-dq:df)+cE.x+(cq?c4:0);cV=(cs?cv-df:dq)+dl;cr=undefined;cT=aY(dm.valuePosition,\"auto\").toLowerCase();if(cR){switch(cT){case\"above\":cG=0;break;case\"below\":cG=1;break;default:da=dc[dh-1];cG=((da&&da.plotY)<dm.plotY)?1:0;break}}dm._valueBelowPoint=cG;cw=(dm.y<0);var di=Number(c1?dm.barY:dm.plotY);if(cq){dj=cD;dl=(cw?-4-c9:dl+2-c9);cZ=cy.width-dl;cW=cy.height-dl;cK=cy.width;c0=ab(dm.barH,cv-di);cJ=di;if(cZ<=cJ){cV=cJ+dl;if(cw){cV=dq-dl+cC;dj=db;if((cG&&c0>cZ)||(cZ>cv-dq)){cV=dq+dl+cC;dj=cD}cX+=cU}if(cG&&!cw&&(dm.y!=0)){if(cZ<=c0){dj=cw?cM:db;cV=cJ-dl+cC;cX+=cU}}}else{if(cZ<=c0){dj=db;cV=cJ-dl+cC;cX+=cU;if(cw){cV=cJ-dl+cC}}else{cV=cJ+dl;cr=cJ;if(c0>cJ&&c1){cV=cv+cC;cX+=cU;cr=c0}if(cV<cK){cV=0;dj=db}}}cX+=(cp/2)-cB}else{dl=(cw?-4-c9:dl+2-c9);cW=cy.width+cF;cZ=cp-dl;cK=cp;c0=cv-di;cJ=di;if(/^(bar|bar3d)$/.test(cN)){cV-=cB;c0=dm.barH;cJ=c6-dm.barH;if(cw){cJ=c6-di;if((cG&&c0>cW)||((cW>cJ)&&(c0>cW))){cX=cJ+c9+2+cU;cV+=cC}else{if(cW<cJ){cX=cJ-(c9+2)+cU;cV+=cC;dj=db}else{cX=6;dj=cD}}}else{cJ=di;if((cG&&c0>cW)||(cW>cJ)&&(c0>cW)){cX=c6-cJ-(c9+2)+cU;dj=db;cV+=cC}else{if(cW<cJ){cX=c6-cJ+(c9+2)}else{cX=c6-6;cV+=cC;dj=db}}}if(cX<0){cX=6;dj=cD}if(cX>c6){cX=c6-6;dj=db}}else{if(cw){cJ=ab(dm.barH,di);if((cG&&cJ>cZ)||(cZ>c0)){cV=dq+dl+cC}else{cV=dq+cZ+cC}cX+=cU}else{c0=ab(dm.barH,cv-di);if((cG&&(c0>=cZ)&&(dm.y!=0))||(cZ>cJ)){cV=dq+cZ+cC;cX+=cU}else{cV=dq+dl}if(cN==\"bubble\"){cV=dq-dl/2}}if(cV>cv){cV=cv}if(cV<0){cV=cK}}}dj=M?\"center\":dj;if(cr){cy=cQ.getOriSize(cH,cr,undefined,true);cP=cy.text}if(dp){if(cs&&!cE.y){cV=cV+b4(dp.styles.lineHeight)*0.9-dp.getBBox().height/2}dp.attr({text:cP}).animate({x:cX,y:cV})}else{if(at(cP)){dp=dm.dataLabel=cS.text(cP,cX,cV).attr({align:dj,rotation:cE.rotation,zIndex:1}).css(cE.style).add(cz);if(cL){if(dm.color&&dm.color.FCcolor&&dm.color.FCcolor.color&&dm.color.FCcolor.color.toString){dp.css({color:\"#\"+dm.color.FCcolor.color.split(\",\")[0].replace(P,aO)})}}if(cs&&!cE.y){dp.attr({y:cV+b4(dp.styles.lineHeight)*0.9-dp.getBBox().height/2})}if(c2&&L.stacking&&dp){var dn=dm.barY,dg=dm.barW,dk=dm.barH;if(cq){cA=0}else{cA=c4;c4=0}if(cs){c7=c6-dn-dk;c5=cv-de-dg+cC+cA;c8=dk;A=dg}else{c7=de+cU+c4;c5=dn+cA;c8=dg;A=dk}dp.align(cE,null,{x:c7,y:c5,width:c8,height:A})}}}})}},drawGraph:function(cs){var cy=this,cp=cy.options,cE=cy.chart,Z=cy.graph,cz=[],cM=cy.area,cw=cy.group,cJ=cp.lineColor||cy.color,A=cp.lineWidth,cv=cp.dashStyle,cI=cE.renderer,cA=cy.yAxis.getThreshold(cp.threshold||0),cQ=/^area|dragarea/.test(cy.type),cF=[],cH=[],cx=[],cO=[],cG,cN=0,cC=[],ct=cy.shadowGroup,cP=cy.data,cR=cp.step,L=cp.drawVerticalJoins,cD=cp.useForwardSteps,cr,cq,cK,cB;if(!ct&&cp.shadow){ct=cy.shadowGroup=cI.g(\"shadow\").add(cw);ct.floated=true}T(cy.segments,function(cV,cT){cq=[];T(cV,function(cX,cY){var cZ;if(cy.getPointSpline){cq.push.apply(cq,cy.getPointSpline(cV,cX,cY));cK=cy.getPointSpline(cV,cX,cY);if(cK[0]==\"C\"){cZ=cV[cY-1];cX.segmentPath=cC.concat(cK);cO.push(cZ.config);cN++;cC=[bM].concat(cK.slice(cK.length-2))}else{cC=cK}}else{cq.push(cY?bO:bM);if(cY&&cR){cZ=cV[cY-1];cq.push(cX.plotX,cZ.plotY)}if(cY){cZ=cV[cY-1];cX.segmentPath=[];if(cR){if(cD){cX.segmentPath.push(bM,cZ.plotX,cZ.plotY,bO,cX.plotX,cZ.plotY);L&&cX.segmentPath.push(cX.plotX,cX.plotY)}else{if(L){cX.segmentPath.push(bM,cZ.plotX,cZ.plotY,bO,cZ.plotX,cX.plotY,cX.plotX,cX.plotY)}else{cX.segmentPath.push(bM,cZ.plotX,cX.plotY,bO,cX.plotX,cX.plotY)}}}else{cX.segmentPath.push(bM,cZ.plotX,cZ.plotY,bO,cX.plotX,cX.plotY)}cO.push(cZ.config);cN++}cq.push(cX.plotX,cX.plotY);cX.segmentPathIndex=cq.length}});if(cV.length>1){cz=cz.concat(cq)}else{if(cV.length){cF.push(cV[0])}}if(cQ){var cW=[],cU,cS=cq.length;for(cU=0;cU<cS;cU++){cW.push(cq[cU])}if(cS===3){cW.push(bO,cq[1],cq[2])}if(cp.stacking&&cy.type!==\"areaspline\"){for(cU=cV.length-1;cU>=0;cU--){cW.push(cV[cU].plotX,cV[cU].yBottom)}}else{if(cV.length>0){cW.push(bO,cV[cV.length-1].plotX,cA,bO,cV[0].plotX,cA)}}cH=cH.concat(cW)}});if(cQ){var cL=[];T(cP,function(cS){var cW=[],cV=cS.segmentPath,cU,cT;if(cV){cT=cV.length;for(cU=0;cU<cT;cU++){cW.push(cV[cU])}if(cp.stacking&&cy.type!==\"areaspline\"){}else{cW.push(bO,cV[cV.length-2],cA,bO,cV[1],cA)}cL.push(cW)}})}cy.graphPath=cz;cy.singlePoints=cF;if(cQ){cr=a4(cp.fillColor,b1(cy.color).setOpacity(cp.fillOpacity||0.75).get());if(cM){cM.animate({d:cH})}else{cy.area=cy.chart.renderer.path(cH).attr({fill:cr}).add(cw);var M=cJ}}var cu;if(cQ||cy.getPointSpline){cu=cy.graphLine;cB={stroke:cJ,\"stroke-width\":A,\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",dashstyle:cv};if(cu){cu.animate({d:cz})}else{if(A){cG=cO;cy.graphLine=cI.path(cz).attr(cB).add(cw).shadow(cp.shadow,ct,cp.shadow)}}}else{if(!cy.graphLine){cy.graphLine=[]}T(cP,function(cS,cT){var cU=cP[cT-1],cV=cS.segmentPath;cu=cS.graphLine;if(cu){cu.animate({d:cV})}else{if(A){cG=cU&&cU.config||{};cB={stroke:ca(cG.color,cJ),\"stroke-width\":A,\"stroke-linecap\":\"round\",dashstyle:ca(cG.dashStyle,cv)};cS.graphLine=cI.path(cV).attr(cB).add(cw).shadow(cp.shadow,ct,cG.shadow)}}})}},render:function(){var Z=this,cr=Z.chart,ct,cv,cy=Z.options,L=cy.animation,cw=L&&Z.animate,A=cw?(L&&L.duration)||500:0,M=Z.clipRect,cq=cr.renderer;if(!M){var cu=0,cs=0,cx=cr.plotSizeX,cp=cr.plotSizeY;if(!cr.options.chart.hasScroll){cu=-(cr.inverted?cr.plotTop:cr.plotLeft);cs=-(cr.inverted?cr.plotLeft:cr.plotTop);cx=cr.inverted?cr.chartHeight:cr.chartWidth;cp=cr.inverted?cr.chartWidth:cr.chartHeight}M=Z.clipRect=!cr.hasRendered&&cr.clipRect?cr.clipRect:cq.clipRect(cu,cs,cx,cp);M.cliprectX=cu;M.cliprectY=cs;M.cliprectW=cx;M.cliprectH=cp;if(!cr.clipRect){cr.clipRect=M}}if(!Z.group){ct=Z.group=cq.g(\"series\");if(cr.inverted){cv=function(){ct.attr({width:cr.plotWidth,height:cr.plotHeight}).invert()};cv();I(cr,\"resize\",cv);I(Z,\"destroy\",function(){bj(cr,\"resize\",cv)})}ct.clip(Z.clipRect).attr({visibility:Z.visible?aD:av,zIndex:cy.zIndex}).translate(cr.plotLeft,cr.plotTop).add(cr.seriesGroup)}Z.drawDataLabels();if(cw){Z.animate(true)}if(Z.drawGraph){Z.drawGraph()}Z.drawPoints();if(Z.options.enableMouseTracking!==false){Z.drawTracker()}if(cw){Z.animate()}setTimeout(function(){M.animationInit=false;M.isAnimating=false;ct=Z.group;if(ct&&M!==cr.clipRect&&M.renderer){ct.clip((Z.clipRect=cr.clipRect));M.destroy()}},A);Z.isDirty=false},redraw:function(){var A=this,L=A.chart,M=A.group;if(M){if(L.inverted){M.attr({width:L.plotWidth,height:L.plotHeight})}M.animate({translateX:L.plotLeft,translateY:L.plotTop})}A.translate();A.setTooltipPoints(true);A.render()},setState:function(cp){var M=this,L=M.options,Z=M.graph,cq=L.states,A=L.lineWidth;cp=cp||aA;if(M.state!==cp){M.state=cp;if(cq[cp]&&cq[cp].enabled===false){return}if(cp){A=cq[cp].lineWidth||A+1}if(Z&&!Z.dashstyle){Z.attr({\"stroke-width\":A},cp?0:500)}}},setVisible:function(M,cx){var cq=this,cu=cq.chart,ct=cq.legendItem,cv=cq.group,cz=cq.tracker,cs=cq.dataLabelsGroup,L=cq.shadowGroup,A,cp,Z=cq.data,cw,cy=cu.options.chart.ignoreHiddenSeries,cr=cq.visible;cq.visible=M=M===j?!cr:M;A=M?\"show\":\"hide\";if(cv){cv[A]()}if(L&&L.floated){L[A]()}if(cz){cz[A]()}else{cp=Z.length;while(cp--){cw=Z[cp];if(cw.tracker){cw.tracker[A]()}}}if(cs){cs[A]()}if(ct){cu.legend.colorizeItem(cq,M)}cq.isDirty=true;if(cq.options.stacking){T(cu.series,function(cA){if(cA.options.stacking&&cA.visible){cA.isDirty=true}})}if(cy){cu.isDirtyBox=true}if(cx!==false){cu.redraw()}bJ(cq,A)},show:function(){this.setVisible(true)},hide:function(){this.setVisible(false)},scroll:function(cw,A,cp){var ct=this,cv=ct.chart,cq=ct.clipRect,L=cv.plotLeft-cw,cy=cv.plotTop-A,cs=ct.data,cr=0,cu=cs.length,cx;ct.group.translate(L,cy);ct.dataLabelsGroup.translate(L,cy);cv.trackerGroup.translate(L,cy);cq.attr({x:cw,y:A});cp=cp===undefined?true:cp;if(cp){var Z,M;for(;cr<cu;cr+=1){cx=cs[cr];if(cx.y!==null){Z=cx.plotX-cw+5;M=cx.plotY-A-15;Z=Z<0?0:Z;M=M<0?0:M;cx.tooltipPos=[Z,M]}}ct.xShift=o(cw);ct.yShift=o(A)}},select:function(L){var A=this;A.selected=L=(L===j)?!A.selected:L;if(A.checkbox){A.checkbox.checked=L}bJ(A,L?\"select\":\"unselect\")},drawTracker:function(){var cq=this,cw=cq.options,A=[].concat(cq.graphPath),ct=A.length,cs=cq.chart,L=cs.options.tooltip.snap,cu=cq.tracker,cv=cw.cursor,cr=cv&&{cursor:cv},cp=cq.singlePoints,M,Z;if(cs.options.chart.hasScroll){cs.trackerGroup.clip(cq.clipRect)}if(ct){Z=ct+1;while(Z--){if(A[Z]===bM){A.splice(Z+1,0,A[Z+1]-L,A[Z+2],bO)}if((Z&&A[Z]===bM)||Z===ct){A.splice(Z,0,bO,A[Z-2]+L,A[Z-1])}}}for(Z=0;Z<cp.length;Z++){M=cp[Z];A.push(bM,M.plotX-L,M.plotY,bO,M.plotX+L,M.plotY)}if(cu){cu.attr({d:A})}else{cq.tracker=cs.renderer.path(A).attr({isTracker:true,stroke:ce,fill:K,\"stroke-width\":cw.lineWidth+2*L,visibility:cq.visible?aD:av,zIndex:cw.zIndex||1}).on(R?\"touchstart\":\"mouseover\",function(){if(cs.hoverSeries!==cq){cq.onMouseOver()}}).on(\"mouseout\",function(){if(!cw.stickyTracking){cq.onMouseOut()}}).css(cr).add(cs.trackerGroup)}}};var ai=bv(bq);a.line=ai;var aS=bv(bq,{type:\"area\",simpleSymbol:true});a.area=aS;var b=bv(bq,{type:\"spline\",getPointSpline:function(L,cy,cz){var cw=1.5,A=cw+1,cp=cy.plotX,M=cy.plotY,Z=L[cz-1],cA=L[cz+1],ct,cs,cv,cu,cD;if(cz&&cz<L.length-1){var cr=Z.plotX,cq=Z.plotY,cC=cA.plotX,cB=cA.plotY,cx;ct=(cw*cp+cr)/A;cs=(cw*M+cq)/A;cv=(cw*cp+cC)/A;cu=(cw*M+cB)/A;cx=((cu-cs)*(cv-cp))/(cv-ct)+M-cu;cs+=cx;cu+=cx;if(cs>cq&&cs>M){cs=cj(cq,M);cu=2*M-cs}else{if(cs<cq&&cs<M){cs=aE(cq,M);cu=2*M-cs}}if(cu>cB&&cu>M){cu=cj(cB,M);cs=2*M-cu}else{if(cu<cB&&cu<M){cu=aE(cB,M);cs=2*M-cu}}cy.rightContX=cv;cy.rightContY=cu}if(!cz){cD=[bM,cp,M]}else{cD=[\"C\",Z.rightContX||Z.plotX,Z.rightContY||Z.plotY,ct||cp,cs||M,cp,M];Z.rightContX=Z.rightContY=null}return cD}});a.spline=b;var E=bv(b,{type:\"areaspline\",simpleSymbol:true});a.areaspline=E;var g=bv(bq,{type:\"column\",simpleSymbol:true,pointAttrToOptions:{stroke:\"borderColor\",\"stroke-width\":\"borderWidth\",fill:\"color\",r:\"borderRadius\",dashstyle:\"dashStyle\"},init:function(){bq.prototype.init.apply(this,arguments);var A=this,L=A.chart;L.hasColumn=true;if(L.hasRendered){T(L.series,function(M){if(M.type===A.type){M.isDirty=true}})}},translate:function(){var cw=this,cz=cw.chart,cp=cw.options,M=cp.stacking,cL=cp.borderWidth,cH=0,A=cw.xAxis.reversed,cC=cw.xAxis.categories,cJ={},L,cI;bq.prototype.translate.apply(cw);T(cz.series,function(cM){if(cM.type===cw.type){if(cM.options.stacking){L=cM.stackKey;if(cJ[L]===j){cJ[L]=cH++}cI=cJ[L]}else{cI=cH++}cM.columnIndex=cI}});var cK=cw.data,cq=cw.closestPoints,cr=f(cK[1]?cK[cq].plotX-cK[cq-1].plotX:cz.plotSizeX/((cC&&cC.length)||1)),cE=cr*cp.groupPadding,cx=cr-2*cE,cD=cx/cH,cB=cp.pointWidth,cv=at(cB)?(cD-cB)/2:cD*cp.pointPadding,cs=cj(a4(cB,cD-2*cv),1);var ct=f(ab(cp.maxColWidth,50))||1;if(cs>ct&&cp.groupPadding===0.1){cE+=((cs-ct)*cH)/2;cD=cs=ct}var cA=(A?cH-cw.columnIndex:cw.columnIndex)||0,cF=cv+(cE+cA*cD-(cr/2))*(A?-1:1),Z=ab(cp.threshold,cj(cw.yAxis.options.min,0),0),cy=cw.yAxis.getThreshold(Z),cu=a4(cp.minPointLength,5);cF=o(cF);var cG=cv+(cE+(cA+(A?-1:1))*cD-(cr/2))*(A?-1:1);cG=o(cG);cs=cG-cF;T(cK,function(cS){var cU=cS.plotY,cP=ab(cS.yBottom,cy),cM=cS.plotX+cF,cT=aR(aE(cU,cP)),cQ=aR(cj(cU,cP)-cT),cR=cw.yAxis.stacks[(cS.y<0?\"-\":\"\")+cw.stackKey],cO,cN;if(M&&cR&&cR[cS.x]){cR[cS.x].setOffset(cF,cs)}if(f(cQ)<cu){if(cu){cQ=cu;cT=f(cT-cy)>cu?cP-cu:cy-(cU<=cy?cu:0)}cO=cT-3}by(cS,{barX:cM,barY:cT,barW:cs,barH:cQ});cS.shapeType=\"rect\";cN={x:o(cM),y:o(cT),width:o(cs),height:o(cQ),r:cp.borderRadius};if(cL%2){cN.y-=1;cN.height+=1}cS.shapeArgs=cN;cS.trackerArgs=at(cO)&&aZ(cS.shapeArgs,{height:cj(6,cQ+3),y:cO})})},getSymbol:function(){},drawGraph:function(){},drawPoints:function(){var cs=this,cA=cs.options,ct=cs.chart.renderer,M,cr,Z=cs.shadowGroup,A,cy,cv,cp,cz,cx,cu=cs.yAxis,L=(cu.reversed&&cu.options.min<0)?true:false,cw=ct.box.nodeName.toLowerCase()===\"div\"?true:false,cq=cs.inverted;T(cs.data,function(cB){var cC=cB.plotY;if(cC!==j&&!isNaN(cC)&&cB.y!==null){M=cB.graphic;cr=cB.shapeArgs;if(M){bd(M);M.animate(cr)}else{cv=cr.y;cp=cr.width;cz=cr.height;A=cr.r;cy=cr.x;cx=cB.pointAttr[cB.selected?bF:aA][\"stroke-width\"]%2===0?undefined:1;if(L&&cB.color&&cB.color.FCcolor){cB.color.FCcolor.angle+=180}if(cw&&cq&&cB.color&&cB.color.FCcolor){cB.color.FCcolor.angle+=90}if(cq){cp+=cx||0;cv+=cx||0}cB.graphic=ct[cB.shapeType](cy,cv,cp,cz,A,cx).attr(cB.pointAttr[cB.selected?bF:aA]).add(cs.group).shadow(cA.shadow,Z,cB.shadow)}}})},drawTracker:function(){var L=this,cq=L.chart,cp=cq.renderer,A,cr,Z=+new Date(),cu=L.options,cs=cu.cursor,M=cs&&{cursor:cs},ct;if(cq.options.chart.hasScroll){cq.trackerGroup.clip(L.clipRect)}T(L.data,function(cv){cr=cv.tracker;A=cv.trackerArgs||cv.shapeArgs||{};delete A.strokeWidth;if(cv.y!==null){if(cr){cr.attr(A)}else{if(cv.link!==undefined){var cw={cursor:\"pointer\",_cursor:\"hand\"}}cv.tracker=cp[cv.shapeType](A).attr({isTracker:Z,fill:ce,visibility:L.visible?aD:av,zIndex:cu.zIndex||1}).on(R?\"touchstart\":\"mouseover\",function(cx){ct=cx.relatedTarget||cx.fromElement;if(cq.hoverSeries!==L&&ag(ct,\"isTracker\")!==Z){L.onMouseOver()}cv.onMouseOver()}).on(\"mouseout\",function(cx){if(!cu.stickyTracking){ct=cx.relatedTarget||cx.toElement;if(ag(ct,\"isTracker\")!==Z){L.onMouseOut()}}}).css(cw).add(cv.group||cq.trackerGroup)}}})},animate:function(M){var A=this,L=A.data;if(!M){T(L,function(Z){var cq=Z.graphic,cp=Z.shapeArgs;if(cq){cq.attr({height:0,y:A.yAxis.getThreshold(A.options.threshold||0)});cq.animate({height:cp.height,y:cp.y},A.options.animation)}});A.animate=null}},remove:function(){var A=this,L=A.chart;if(L.hasRendered){T(L.series,function(M){if(M.type===A.type){M.isDirty=true}})}bq.prototype.remove.apply(A,arguments)}});a.column=g;var bI=bv(g,{type:\"bar\",init:function(A){A.inverted=this.inverted=true;g.prototype.init.apply(this,arguments)}});a.bar=bI;var bU=bv(bq,{type:\"scatter\",translate:function(){var A=this;bq.prototype.translate.apply(A);T(A.data,function(L){L.shapeType=\"circle\";L.shapeArgs={x:L.plotX,y:L.plotY,r:A.chart.options.tooltip.snap}})},drawTracker:function(){var L=this,M=L.chart,Z=L.options.cursor,A=Z&&{cursor:Z},cp;T(L.data,function(cq){if(cq.link!==undefined){var cr={cursor:\"pointer\",_cursor:\"hand\"}}cp=cq.graphic;if(cp){cp.attr({isTracker:true}).on(\"mouseover\",function(cs){L.onMouseOver();cq.onMouseOver()}).on(\"mouseout\",function(cs){if(!L.options.stickyTracking){L.onMouseOut()}}).css(cr)}})},cleanData:function(){}});a.scatter=bU;var ba=bv(bS,{init:function(){bS.prototype.init.apply(this,arguments);var A=this,L;by(A,{visible:A.visible!==false,name:a4(A.name,\"Slice\")});L=function(){if(A.series&&A.series.rotationStartInstanceAngle){delete A.series.rotationStartInstanceAngle}else{A.slice()}};if(!A.link&&!A.doNotSlice){I(A,\"click\",L)}return A},setVisible:function(cr){var A=this,cp=A.series.chart,cq=A.tracker,Z=A.dataLabel,L=A.connector,M=A.shadowGroup,cs;A.visible=cr=cr===j?!A.visible:cr;cs=cr?\"show\":\"hide\";A.group[cs]();if(cq){cq[cs]()}if(Z){Z[cs]()}if(L){L[cs]()}if(M){M[cs]()}if(A.legendItem){cp.legend.colorizeItem(A,cr)}},labelPrevX:0,slice:function(cr,cv,M){var cu=this,cq=cu.series,cs=cq.chart,ct=cu.slicedTranslation,A,L;cg(M,cs);cv=a4(cv,true);cr=cu.sliced=at(cr)?cr:!cu.sliced;L={hcJSON:{series:[]}};L.hcJSON.series[cq.index]={data:[]};L.hcJSON.series[cq.index].data[cu.index]={sliced:cr||false};bc(cs.options.instanceAPI.chartInstance.jsVars._reflowData,L,true);A={translateX:(cr?ct[0]:cs.plotLeft),translateY:(cr?ct[1]:cs.plotTop)};if(cq.pie3DManager){cu.graphic.animate(A)}else{cu.group.animate(A)}if(cu.shadowGroup){cu.shadowGroup.animate(A)}var cp=ct[0]-cs.plotLeft,Z=ct[1]-cs.plotTop;if(cu.connectorPath){cu.connectorPath[1]+=cr?cp:-cp;cu.connectorPath[2]+=cr?Z:-Z;cu.connectorPath[4]+=cr?cp:-cp;cu.connectorPath[6]+=cr?cp:-cp;cu.connector.animate({d:cu.connectorPath})}if(cu.dataLabel&&cu.dataLabel._x){cu.dataLabel.animate({x:cr?cu.dataLabel._x+cp:cu.dataLabel._x});if(cu.dataLabel.textBoundWrapper){cu.dataLabel.textBoundWrapper.animate({x:cu.dataLabel.textBoundWrapper.x-(cu.dataLabel.x-cu.dataLabel._x)+(cr?cp:-cp)})}}return cr}});var r=function(A,L){return aq(A[1]-(this.pageY||(this.originalEvent&&this.originalEvent.pageY))+L.top,A[0]-(this.pageX||(this.originalEvent&&this.originalEvent.pageX))+L.left)};var q=bv(bq,{type:\"pie\",isCartesian:false,pointClass:ba,pointAttrToOptions:{stroke:\"borderColor\",\"stroke-width\":\"borderWidth\",fill:\"color\"},getColor:function(){this.initialColor=this.chart.counters.color},animate:function(){var A=this,L=A.data;T(L,function(Z){var cq=Z.graphic,cp=Z.shapeArgs,M=2*ad;if(cq){cq.attr({start:M,end:M});cq.animate({r:cp.r,start:cp.start,end:cp.end},A.options.animation)}});A.animate=null},simpleSymbol:true,rotate:function(cr){var cq=this,cp=cq.data,ct=cq.options,Z=ct.slicedOffset,M=cq.chart.plotLeft,A=cq.chart.plotTop,cs=ab(this.chart.options.chart.startingAngle,0),L;cr=cr;L=(cr-cs)%360;this.chart.options.chart.startingAngle=ab(cr,this.chart.options.chart.startingAngle)%360;L=(L*ad)/180;bc(cq.chart.options.instanceAPI.chartInstance.jsVars._reflowData,{hcJSON:{chart:{startingAngle:this.chart.options.chart.startingAngle}}},true);T(cp,function(cC){var cu=cC.graphic,cD=cC.shadowGroup,cB=cC.tracker,cz=cC.shapeArgs,cv={start:cz.start=cz.start+L,end:cz.end=cz.end+L},cy=cC.centerAngle=((cv.start+cv.end)/2)%X,cx=cC.sliced,cw=cz.r*0.7,cA;cC.slicedTranslation=ax([cc(cy)*Z+M,ap(cy)*Z+A],o);cA={translateX:cC.slicedTranslation[0],translateY:cC.slicedTranslation[1]};cC.tooltipPos=[cz.x+cc(cy)*cw,cz.y+ap(cy)*cw];if(cB){cB.attr(cv)}if(cu){cu.attr(cv);if(cx){cC.group.attr(cA)}}if(cD&&cx){cC.shadowGroup.attr(cA)}});this.drawDataLabels(true)},translate:function(){var cL=0,cA=this,cH=1000,M=cA.options,cz=(ca(this.chart.options.chart.startingAngle,0)%360),cE=-1*(cz/360),cJ=ab(M.dataLabels.distance,20),L,cp=M.slicedOffset,cy=cp+M.borderWidth,cx=M.center,cD=cA.chart,cw=cD.plotWidth,cG=cD.plotHeight,cr,Z,cI,cK=cA.data,cB=2*ad,cu,cF=aE(cw,cG),A,cv,ct,cs=M.dataLabels.distance;cx.push(M.size,M.innerSize||0);cx=ax(cx,function(cN,cM){A=/%$/.test(cN);return A?[cw,cG,cF,cF][cM]*b4(cN)/100:cN});cA.getX=function(cN,cM){cI=a9.asin((cN-cx[1])/(cx[2]/2+cs));return cx[0]+(cM?-1:1)*(cc(cI)*(cx[2]/2+cs))};cA.center=cx;T(cK,function(cM){cL+=cM.y});cA.labelsRadius=(cx[2]/2)+cJ;cA.quadrantHeight=cG/2;cA.quadrantWidth=cw/2;var cq=M.dataLabels,cC=\"objectBoundingBox\";L=ab(parseInt(cq.style.fontSize,10),10)+4,cA.maxLabels=Math.floor(cA.quadrantHeight/L);cA.labelFontSize=L;cA.connectorPadding=ab(cq.connectorPadding,5);cA.isSmartLineSlanted=ca(cq.isSmartLineSlanted,true);cA.connectorWidth=ab(cq.connectorWidth,1);cA.enableSmartLabels=cq.enableSmartLabels;T(cK,function(cM){cu=cL?cM.y/cL:0;cr=o(cE*cB*cH)/cH;cE+=cu;Z=o(cE*cB*cH)/cH;cM.shapeType=\"arc\";cM.shapeArgs={x:cx[0],y:cx[1],r:cx[2]/2,innerR:cx[3]/2,start:cr,end:Z};if(cM.color.FCcolor&&cM.color.FCcolor.gradientUnits!==cC){cM.color.FCcolor.cx=cx[0];cM.color.FCcolor.cy=cx[1],cM.color.FCcolor.r=cx[2]/2}cM.centerAngle=cI=((Z+cr)/2)%X;cM.slicedTranslation=ax([cc(cI)*cp+cD.plotLeft,ap(cI)*cp+cD.plotTop],o);cv=cc(cI)*cx[2]/2;cA.radiusY=ct=ap(cI)*cx[2]/2;cM.tooltipPos=[cx[0]+cv*0.7,cx[1]+ct*0.7];cM.labelPos=[cx[0]+cv+cc(cI)*cs,cx[1]+ct+ap(cI)*cs,cx[0]+cv+cc(cI)*cy,cx[1]+ct+ap(cI)*cy,cx[0]+cv,cx[1]+ct,cs<0?\"center\":cI<cB/4?\"left\":\"right\",cI];cM.percentage=cu*100;cM.total=cL});this.setTooltipPoints()},render:function(){var A=this;this.drawPoints();if(A.options.enableMouseTracking!==false){A.drawTracker()}this.drawDataLabels();if(A.options.animation&&A.animate){A.animate()}A.isDirty=false},drawPoints:function(){var cp=this,cr=cp.chart,cq=cr.renderer,M,A,ct,cs=cp.options.shadow,L,Z;T(cp.data,function(cu){A=cu.graphic;Z=cu.shapeArgs;ct=cu.group;L=cu.shadowGroup;if(cs&&!L){L=cu.shadowGroup=cq.g(\"shadow\").attr({zIndex:4}).add()}if(!ct){ct=cu.group=cq.g(\"point\").attr({zIndex:5}).add()}M=cu.sliced?cu.slicedTranslation:[cr.plotLeft,cr.plotTop];ct.translate(M[0],M[1]);if(L){L.translate(M[0],M[1])}if(A){A.animate(Z)}else{cu.graphic=cq.arc(Z).attr(by(cu.pointAttr[aA],{\"stroke-linejoin\":\"round\",dashstyle:cu.dashStyle})).add(cu.group).shadow(cs,L,cu.shadow)}if(cu.visible===false){cu.setVisible(false)}})},drawDataLabels:(function(){var M=function(cs,cr){return cs.point.y-cr.point.y},L=function(cs,cr){return cs.angle-cr.angle},A=[\"left\",\"left\",\"right\",\"right\"],cp=\"center\",cq=[-1,1,1,-1],Z=[1,1,-1,-1];return function(cL){var cF=this,dr=cF.data,c9,cT,ds=cF.chart,cr=ds.options.instanceAPI.smartLabel,cZ=cF.options.dataLabels,dj=cZ.style,c3=ab(parseInt(dj.lineHeight,10),12),c5=cZ.placeInside,dd=cZ.skipOverlapLabels,c6=cZ.manageLabelOverflow,cB=cF.connectorPadding,cX=cF.connectorWidth,cu,dn,cR=cZ.distance,cY=a4(cZ.softConnector,true),cH=cR>0,dp,cE=cF.center,cv=cE[1],cw=cE[0],dg=cE[2]/2,c1=[[],[],[],[]],cQ,dk,dq,c7=ds.plotLeft,cC=ds.plotTop,cx=ds.plotSizeX,cG,cO,dm,cD,dh,df,cS,dl,cV,cP,cN,cM,dv,du,dt,dc,db=cF.labelsRadius,c0,c8,c4=cF.labelFontSize,de=c4,di=de/2,cK=[cB,cB,-cB,-cB],cy=cF.maxLabels,cA=cF.isSmartLineSlanted,cW=cF.enableSmartLabels,c2,da,cz;if(!cL){bq.prototype.drawDataLabels.apply(cF);cr.setStyle(dj)}if(dr.length==1){c9=dr[0];cz=c9.dataLabel;c9.slicedTranslation=[c7,cC];if(cz){cz.attr({visibility:aD,align:cp,x:cw,y:cv+di-2});cz.x=cw}}else{if(c5){var ct=ab(cF.center[3],0)/2,cs=ct+((dg-ct)/2);T(dr,function(dw){cz=dw.dataLabel;if(cz){var dA=dw.centerAngle;dt=cv+(cs*ap(dA))+di-2;cM=cw+(cs*cc(dA));cz.x=cM;cz._x=cM;cz.y=dt;if(dw.sliced){var dz=dw.slicedTranslation,dy=dz[0]-c7,dx=dz[1]-cC;cM=cM+dy;dt=dt+dx}cz.attr({visibility:aD,align:cp,x:cM,y:dt});cz.textBound()}})}else{T(dr,function(dw){cz=dw.dataLabel;if(cz){if(!cL){cz.on(\"click\",function(dz){dw.firePointEvent(\"click\",dz)})}var dy=dw.centerAngle,dx;if(dy<0){dy=X+dy}if(dy<cm){dx=1}else{if(dy<ad){dx=2}else{if(dy<(br)){dx=3}else{dx=0}}}c1[dx].push({point:dw,angle:dy})}});dq=dl=4;while(dq--){if(dd){c0=c1[dq].length-cy;if(c0>0){c1[dq].sort(M);c8=c1[dq].splice(0,c0);for(dm=0,cS=c8.length;dm<cS;dm+=1){c9=c8[dm].point;c9.dataLabel.attr({visibility:av});if(c9.connector){c9.connector.attr({visibility:av})}}}}c1[dq].sort(L)}da=cj(c1[0].length,c1[1].length,c1[2].length,c1[3].length);c2=cj(aE(da,cy)*de,db);c1[1].reverse();c1[3].reverse();while(dl--){dc=c1[dl];cS=dc.length;if(!dd){if(cS>cy){de=c2/cS}else{de=c4}di=de/2}df=(cS*de)-di;dp=c2+di;for(dq=0;dq<cS;dq+=1,df-=de){cD=f(c2*ap(dc[dq].angle));if(dp-cD<de){cD=dp-de}else{if(cD<df){cD=df}}dp=dc[dq].oriY=cD}dk=A[dl];dh=c2-(cS*de)+di;dp=-di;for(dq=dc.length-1;dq>=0;dq-=1,dh+=de){c9=dc[dq].point;cT=dc[dq].angle;cV=c9.sliced;cz=c9.dataLabel;cD=f(c2*ap(cT));if(cD-dp<de){cD=dp+de}else{if(cD>dh){cD=dh}}dp=cD;dv=((cD+dc[dq].oriY)/2);cP=cw+Z[dl]*db*cc(a9.asin(dv/c2));dv*=cq[dl];dv+=cv;du=cv+(dg*ap(cT));cN=cw+(dg*cc(cT));cM=cP+cK[dl];dt=dv+di-2;cz.x=cM;cz._x=cM;if(c6){cG=dl>1?cM:cx-cM;cO=cz._str=cz._str||cz.textStr||(cz.element&&cz.element.innerHTML);cz.attr({text:cr.getSmartText(cO,cG,c3).text})}cz.y=dt;if(cV){var cU=c9.slicedTranslation,cJ=cU[0]-c7,cI=cU[1]-cC;cM=cM+cJ;cP=cP+cJ;cN=cN+cJ;du=du+cI}cz.attr({visibility:aD,align:dk,x:cM,y:dt});cz.textBound();if(cH&&cX&&cW){cu=c9.connector;c9.connectorPath=dn=[bM,cN,du,bO,cA?cP:cN,dv,cM,dv];if(cu){cu.attr({d:dn});cu.attr(\"visibility\",aD)}else{c9.connector=cu=cF.chart.renderer.path(dn).attr({\"stroke-width\":cX,stroke:cZ.connectorColor||\"#606060\",visibility:aD,zIndex:3}).translate(c7,cC).add().on(\"click\",function(dw){return function(dx){dw.firePointEvent(\"click\",dx)}}(c9))}}}}}}}}()),drawTracker:function(){var M=this,cq,L=[M.center[0]+M.chart.plotLeft,M.center[1]+M.chart.plotTop],A,cp=M.options.enableRotation,Z;if(cp){Z=function(cr){A=bB(M.chart.container);M.rotationStartInstanceAngle=r.call(cr,L,A)-M.chart.options.chart.startingAngle*aQ;if(M.chart.tooltip){if(cr.type===\"dragstart\"){M.chart.tooltip.block(true)}else{M.chart.tooltip.block(false);M.chart.tooltip.refresh(cr.data,true)}}}}g.prototype.drawTracker.apply(this,arguments);T(M.data,function(cr){if(cr.y===null||!(cq=cr.tracker)||cq.canRotate===true){return true}if(cp){I(cq.element,\"dragstart dragend\",Z,cr);I(cq.element,\"drag\",function(cs){M.rotate((r.call(cs,L,A)-M.rotationStartInstanceAngle)/aQ)})}})},getSymbol:function(){}});a.pie=q;var G=function(A){};G.prototype={init:function(Z){var cr=this;cr.chart=Z;cr.getVar=Z.getVar;cr.setVar=Z.setVar;cr.elements={};cr.allItems=[];cr.renderer=Z.renderer;var M=cr.conf={},cu=cr.options=Z.options.legend;if(!cu.enabled){return}M.horizontal=cu.layout===\"horizontal\";var A=M.symbolWidth=cu.symbolWidth,cs=M.symbolPadding=cu.symbolPadding,L=cu.itemStyle,cq=M.padding=cu.padding||4,ct=M.fontSize=b4(L.fontSize)||10,cp=cu.textPadding;M.initialItemX=cp+cq+A+(2*cs)+cu.initialItemX;M.startX=-cp-cs-A;M.startY=-ct+cs;M.cx=-cp-cs-A/2;M.cy=-ct+cs+A/2;M.legendArray=[];M.currentIndex=0;M.currentRowIndex=0;M.itemHeight=0;M.widthOption=cu.width;M.iapi=Z.options.instanceAPI;M.y=ct+cq;cr.renderLegend();I(Z,\"endResize\",function(){cr.positionCheckboxes()})},moveLegend:function(Z){var M=this.elements.legendBox,L=Z.pageX+M.dragOffsetX,A=Z.pageY+M.dragOffsetY;if(L<M.movementBoundaryOrigin){L=M.movementBoundaryOrigin}else{if(L>M.movementBoundaryX){L=M.movementBoundaryX}}if(A<M.movementBoundaryOrigin){A=M.movementBoundaryOrigin}else{if(A>M.movementBoundaryY){A=M.movementBoundaryY}}M.translate(L,A)},colorizeItem:function(cz,cp){var cv=this,cA=cv.options,cr=cv.conf,cs=cz.legendItem,ct=cz.legendLine,M=cz.legendSymbol,cq=cz.legendBackground,cx=cA.itemHiddenStyle.color,cw=cp?cA.itemStyle.color:cx,cu=cp?cz.color:cx,Z=cz.options.legendBorderColor,A=cz.options.legendFillColor,L=cz.customSymbol,cy=cp?cz.pointAttr[aA]:{stroke:cx,fill:cx};if(cs){cs.css({fill:cw})}if(ct){ct.attr({stroke:cu,\"stroke-width\":2,\"stroke-opacity\":1})}if(M){M.attr(cy);M.attr({r:aR(cr.symbolWidth/(ct?4:2)),\"stroke-width\":1,\"stroke-opacity\":1,\"fill-opacity\":1})}if(cq){cq.attr({fill:A||ce,stroke:Z||K})}if(L){L.attr(cp?L.symbolAttr:cy)}},destroy:function(){var Z=this.elements,M=Z.box,cp=Z.legendGroup,L=Z.legendScroller,A=Z.legendClip;if(M){Z.box=M.destroy()}if(cp){Z.legendGroup=cp.destroy()}if(L){Z.legendScroller=L.destroy()}if(A){Z.legendClip=A.destroy()}},positionItem:function(cv,cu,ct){var cp=this.conf,cq=cv.legendItem,cr=cv.legendLine,M=cv.legendSymbol,Z=cv.checkbox,A=cv.legendBackground,L=cv.customSymbol,cs=cv.legendLabelHeight;if(cq){cq.align({x:cu,y:ct,height:cs,verticalAlign:\"middle\"},true,{height:cv.legendItemHeight})}if(cr){cr.translate(cu,ct)}if(M){M.attr({x:cu+cp.cx,y:ct+cp.cy})}if(L){cv.customSymbol.translate(cu,ct)}if(Z){Z.x=cu;Z.y=ct}if(A){A.attr({width:cv.legendItemWidth,height:cv.legendItemHeight}).align({x:cu-cp.symbolPadding,y:ct-cp.symbolPadding,width:cv.legendItemWidth,height:cv.legendItemHeight,verticalAlign:\"middle\",align:\"center\"},true,{width:cv.legendItemWidth,height:cv.legendItemHeight})}},destroyItem:function(A){T([\"legendItem\",\"legendLine\",\"legendSymbol\",\"legendBackground\"],function(L){if(A[L]){A[L].destroy()}});if(A.checkbox){b5(A.checkbox)}},positionCheckboxes:function(){var A=this;T(A.allItems,function(L){var M=L.checkbox,Z=A.elements.legendGroup.alignAttr;if(M){cf(M,{left:(Z.translateX+L.legendItemWidth+M.x-40)+al,top:(Z.translateY+M.y-11)+al})}})},renderItem:function(cK){var cU=this,cq,cA,M,cC,cN,cP=cK.legendItem,ct=cK.series||cK,cV=cU.allItems,c0=cV.length,c3=ct.options,cQ,cR=cU.renderer,cJ=cU.options,L=cJ.itemHoverStyle,c1=cJ.itemStyle,cO=cJ.itemHiddenStyle,Z=cJ.rowHeight,cu=cJ.legendNumColumns,cW=cU.conf,cH=cW.startX,cG=cW.startY,cz=cW.symbolWidth,cB=cW.symbolPadding,cZ=cW.padding,cL=cW.horizontal,cS=cW.legendArray,cp=cW.currentIndex,cM,cv,cF=cW.cy,cI=cW.initialItemX,cx,cs,cD=cU.chart.chartWidth,c2=cW.widthOption,cY,cr=cU.elements,c4=cr.legendGroup,cT=cK.legendBackground,c5=R?\"touchend\":\"click\",cX=c3.relatedSeries,cw=cW.iapi;if(!cP){cN=ct.simpleSymbol;cK.legendItem=cP=cR.text(cJ.labelFormatter.call(cK),0,0).css(cK.visible?c1:cO).on(\"mouseover\",function(){cK.setState(a6);cP.css(L)}).on(\"mouseout\",function(){cP.css(cK.visible?c1:cO);cK.setState()}).on(c5,function(){var c7=\"legendItemClick\",cy,c6;if(cw.sliceOnLegendClick){cy={index:(ct.data.length-cK.index-1),name:cK.name,sliced:!cK.sliced};c6=function(){u.raiseEvent(\"legenditemclicked\",cy,cw.chartInstance)}}else{cy={datasetName:ct.name,datasetIndex:ct.index,id:ct.userID,visible:!ct.visible};c6=function(){u.raiseEvent(\"legenditemclicked\",cy,cw.chartInstance);cK.setVisible(undefined,false);cX&&T(cX,function(c8){cK.chart.series[c8].setVisible(ct.visible,false)})};cQ={hcJSON:{series:[]}};cQ.hcJSON.series[ct.index]={visible:!ct.visible};cX&&T(cX,function(c8){cQ.hcJSON.series[c8]={visible:!ct.visible}});bc(cw.chartInstance.jsVars._reflowData,cQ,true)}if(c4.dragActive){delete c4.dragActive;return false}if(cK.firePointEvent){cK.firePointEvent(c7,null,c6)}else{bJ(cK,c7,null,c6)}}).attr({zIndex:2}).add(c4);if(!cN&&c3&&c3.lineWidth&&c3.lineWidth!=0){cA={\"stroke-width\":c3.lineWidth,zIndex:2};if(c3.dashStyle){cA.dashstyle=c3.dashStyle}cK.legendLine=cR.path([bM,cH,cF,bO,cH+cz,cF]).attr(cA).add(c4).css(cJ.symbolStyle).on(c5,function(){bJ(cP.element,c5)})}if(cN){var A=t(cH,cG,cz,cz,ct.type,cK,cR);cK.customSymbol=cR.path(A.path).attr({\"stroke-width\":A.strokeWidth,zIndex:3}).add(c4);cK.customSymbol.symbolAttr={stroke:A.strokeColor,fill:A.color}}else{if(c3&&c3.marker&&c3.marker.enabled){cC=cR.symbol(cK.symbol,cW.cx,cF,cz/2).attr({zIndex:3}).add(c4)}}cK.legendSymbol=cC;if(!cT){cT=cR.rect(cH,cG,cz,cz,0).attr({zIndex:1}).css({cursor:c1.cursor}).on(c5,function(){bJ(cP.element,c5)}).add(c4)}cK.legendBackground=cT;cU.colorizeItem(cK,cK.visible);var cE=cC||cK.customSymbol;if(cE){cE.css(cJ.symbolStyle).on(c5,function(){bJ(cP.element,c5)})}if(c3&&c3.showCheckbox){cK.checkbox=bA(\"input\",{type:\"checkbox\",checked:cK.selected,defaultChecked:cK.selected},cJ.itemCheckboxStyle,cU.chart.container);I(cK.checkbox,\"click\",function(cy){var c6=cy.target;bJ(cK,\"checkboxClick\",{checked:c6.checked},function(){cK.select()})})}}cq=cP.getBBox();M=cK.legendItemWidth=cJ.itemWidth||cz+cB+cq.width+cZ;cW.itemHeight=cK.legendItemHeight=cj(cq.height,Z);cK.legendLabelHeight=cq.height;cK.symbolSize=cz;cK.lineHeight=Z;if(cL){if(Z&&cu){while(cS[cp]===true){cW.currentIndex=(cp+=1)}cM=bz(cp/cu);cv=cp%cu;if(cM>cW.currentRowIndex){cW.itemY+=Z*(cM-cW.currentRowIndex);cW.currentRowIndex=cM}cW.itemX=cI+(cv*M);cS[cp]=true;cx=cW.itemHeight/Z;cs=cp;for(cY=0;cY<cx;cY+=1,cs+=cu){cS[cs]=true}}else{if(cW.itemX-cI+M>(c2||(cD-2*cZ-cI))){cW.itemX=cI;cW.itemY+=cW.itemHeight}}}cW.lastItemY=cW.itemY;cU.positionItem(cK,cW.itemX,cW.itemY);if(cL){cW.itemX+=M}else{cW.itemY+=cW.itemHeight}cW.offsetWidth=c2||cj(cL?cW.itemX-cI:M,cW.offsetWidth)},renderLegend:function(){var cO=this,cH=cO.renderer,ct=cO.getVar,cR=cO.conf,cA=cR.initialItemX,cI=cR.itemY=cR.y,cr=cR.iapi,cT=cR.padding,cu=cT/2,cX=cR.widthOption,cF=cR.horizontal,cs=cX,cB=cO.options,c0=cB.borderWidth,cG=cB.scroll,cz=cB.height,cJ=cB.title.padding,M=cB.backgroundColor,cS=cB.style,Z=c0*0.5,A=cO.elements,c1=A.legendGroup,cp=A.legendBox,cC=A.legendScroller,cq=A.box,cU=ct(\"spacingBox\"),cZ=cO.chart,cY=cZ.options.chart,cE,L,cQ=cO.allItems,cx,cy,cP,cL,c2=cR.offsetWidth=0;cR.lastItemY=0;cR.itemX=cA;if(!c1){var cM,cK,cN,cW,cw=function(){if(c1){c1.translate(0,(cW-cB.totalHeight)*arguments[0]);bc(cr.chartInstance.jsVars._reflowData,{hcJSON:{legend:{scroll:{position:arguments[0]}}}},true)}};if(cG&&cG.enabled){cp=A.legendBox=cH.g(\"legend-box\").attr({zIndex:10}).add();cM=0;cK=cu+Z;cN=cs=cX-cG.scrollBarWidth-cG.scrollBarPadding;cW=cz-cu-c0;cL=A.legendClip=cH.clipRect(cM,cK,cN,cW);cP=A.legendGroupContainer=cH.g(\"legend-container\").attr({zIndex:1}).clip(cL).add(cp);c1=A.legendGroup=cH.g(\"legend\").add(cP);cC=A.legendScroller=cH.scroller(cN+cu-Z,Z,10,cW+1,false,false,false,cp).attr({zIndex:3,fill:cB.legendScrollBgColor}).setScrollRatio((cW+cT)/cB.totalHeight).callback(cw).add(cp)}else{cP=A.legendGroupContainer=cp=A.legendBox=c1=A.legendGroup=cH.g(\"legend\").attr({zIndex:10}).add()}if(cC&&cG.position){cC.setScrollPosition(cG.position)}if(cB.legendAllowDrag){cp.css({cursor:\"move\"});I(cp.element,\"dragstart dragend\",function(c4){var c3=c4.type;c4=s(c4);cp.movementBoundaryOrigin=c0||0;cp.movementBoundaryX=cZ.chartWidth-cX-cp.movementBoundaryOrigin;cp.movementBoundaryY=cZ.chartHeight-cz-cp.movementBoundaryOrigin;cp.dragOffsetX=cp.attr(\"translateX\")-c4.pageX,cp.dragOffsetY=cp.attr(\"translateY\")-c4.pageY;cp.dragActive=true;if(cZ.tooltip){cZ.tooltip.block(c3===\"dragstart\")}if(c3===\"dragend\"){setTimeout(function(){cp.dragActive=false},1)}});I(cp.element,\"drag\",function(c3){cO.moveLegend(c3)})}}if(cB.title&&cB.title.text!==aO){cx=A.legendCaption=cH.text(cB.title.text,0,0).css(cB.title.style).attr({zIndex:2,align:\"center\"}).add(c1);cy=cx.getBBox();cx.align({align:\"center\",verticalAlign:\"top\",y:cI},false,{x:0,y:0,width:cs,height:cy.height});cR.itemY=(cI+=((cy.height||0)+cJ))}this.renderAllItems();cE=cZ.legendWidth=cX||c2;L=cZ.legendHeight=cR.lastItemY-cR.y+cR.itemHeight;if(c0||M){if(!cq){cq=A.box=cH.rect(0,0,cE,cz,cB.borderRadius,c0||0).attr({stroke:cB.borderColor,\"stroke-width\":c0||0,fill:M||K}).add(cp).shadow(cB.shadow,undefined,cB.shadow);cq.isNew=true}else{if(cE>0&&L>0){cq[cq.isNew?\"attr\":\"animate\"](cq.crisp(null,null,null,cE,cz));cq.isNew=false}}cq[cQ.length?\"show\":\"hide\"]()}var cD=[\"left\",\"right\",\"top\",\"bottom\"],cv,cV=4;while(cV--){cv=cD[cV];if(cS[cv]&&cS[cv]!==\"auto\"){cB[cV<2?\"align\":\"verticalAlign\"]=cv;cB[cV<2?\"x\":\"y\"]=b4(cS[cv])*(cV%2?-1:1)}}if(!cF){cU.y=cY.marginTop;cU.height=cZ.plotHeight}cp.align(by(cB,{width:cE,height:cz}),true,cU);if(!ct(\"isResizing\")){cO.positionCheckboxes()}},renderAllItems:function(){var M=this,L=M.allItems,A=M.getVar(\"series\"),Z=M.options.reversed;T(A,function(cq){var cp=cq.options;if(!cp.showInLegend){return}if(cp.legendType===\"point\"){T(cq.data,function(cr){if(!cr.showInLegend){return}else{L.push(cr)}})}else{L.push(cq)}});aW(L,function(cq,cp){return(cq.options.legendIndex||0)-(cp.options.legendIndex||0)});if(Z){L.reverse()}T(L,M.renderItem,M)}};G.prototype.constructor=bm.point=G;var a0=ae.Highcharts={Chart:bw,dateFormat:b6,pathAnim:aI,getOptions:aU,hasRtlBug:ck,numberFormat:l,Point:bS,Color:b1,Renderer:b8,seriesTypes:a,setOptions:bn,Series:bq,SVGElement:aM,SVGRenderer:d,VMLElement:V,VMLRenderer:ci,legendTypes:bm,addEvent:I,removeEvent:bj,getTouchEvent:s,createElement:bA,discardElement:b5,css:cf,each:T,extend:by,attr:ag,map:ax,merge:aZ,pick:a4,extendClass:bv,product:\"Highcharts\",version:\"2.1.9\",isWebKit:W,docMode8:O,hasTouch:R,hasSVG:cb,isIE:w,getPosition:bB,FusionChartsModified:\"3.2.3\",fireEvent:bJ,getSymbolPath:t};az.floatedcolumn=aZ(az.column,{states:{hover:{}}});var cl=a0.extendClass(a.column,{type:\"floatedcolumn\",translate:function(){var cA=this,cE=cA.chart,cO=0,Z=cA.xAxis.reversed,cH=cA.xAxis.categories,cS={},cp,cN,cL,cP;bq.prototype.translate.apply(cA);T(cE.series,function(cU){if(cU.type==cA.type){if(cU.options.stacking){cp=cU.stackKey;if(cS[cp]===j){cS[cp]=cO++}cP=cS[cp]}else{cP=cO++}cU.columnIndex=cP}});var ct=cA.options,cT=cA.data,cu=cA.closestPoints,cv=f(cT[1]?cT[cu].plotX-cT[cu-1].plotX:cE.plotSizeX/(cH?cH.length:1)),cJ=cv*ct.groupPadding,cC=cv-2*cJ,cI=cC/cO,cG=ct.pointWidth,cy=at(cG)?(cI-cG)/2:cI*ct.pointPadding,cw=cj(a4(cG,cI-2*cy),1),cF=(Z?cO-cA.columnIndex:cA.columnIndex)||0,cK=cy+(cJ+cF*cI-(cv/2))*(Z?-1:1),cs=ct.threshold||0,cz=cA.xAxis,L=cA.yAxis,cR=cz.getExtremes(),cQ=cR.max,cM=cR.min,cB=Math.abs(cE.plotSizeX/(cQ-cM)),cq=L.getExtremes(),A=cq.min,M=cq.max,cr=f(cE.plotSizeY/(M-A)),cD=cA.yAxis.getThreshold(cs),cx=a4(ct.minPointLength,5);T(cT,function(cV){var cX=cV.plotY,cU=cV.yBottom||cD,c0=cV.plotX+cK,cZ=aR(aE(cX,cU)),cW=aR(cj(cX,cU)-cZ),cY,c1;if(cV._FCX!==undefined){c0=cz.translate(cV._FCX,0,0,0,1)}if(cV._FCY!==undefined){cZ=cA.yAxis.translate(cV._FCY,0,1,0,1)}if(cV._FCH!==undefined){cW=o(cV._FCH*cr*100)/100}if(cV._FCW!==undefined){c1=o(cV._FCW*cB*100)/100}else{c1=cw}if(cV._FCYBottom!==undefined){cW=cA.yAxis.translate(cj(A,cV._FCYBottom),0,1,0,1)-cZ}if(f(cW)<cx){if(cx){cW=cx;cZ=f(cZ-cD)>cx?cU-cx:cD-(cX<=cD?cx:0)}cY=cZ-3}by(cV,{barX:c0,barY:cZ,barW:c1,barH:cW});cV.shapeType=\"rect\";cV.shapeArgs={x:c0,y:cZ,width:c1,height:cW,r:ct.borderRadius};cN=c0+c1/2+15;cL=cZ-15;cV.tooltipPos=[cN<0?0:cN,cL<0?0:cL];cV.trackerArgs=at(cY)&&aZ(cV.shapeArgs,{height:cj(6,cW+3),y:cY})})}});a.floatedcolumn=cl;az.column3d=aZ(az.column,{states:{hover:{}}});var ay=a0.extendClass(a.column,{type:\"column3d\",initGroup:function(){var cs=this,cw=cs.chart,cv=cw.renderer,L=cs.xDepth,ct=cs.yDepth,cr,cA=cs.options,cy,cu,cq,Z,cx,A=cs.yAxis;if(!cw.column3DGroups){cx=cw.column3DGroups=cv.g(\"series-3d\");cx.translate(cw.plotLeft-L,cw.plotTop+ct).add(cw.seriesGroup)}if(A.options.min<0&&A.options.max>=0){cr=cw.options.chart.zeroPlaneColor;cy=cw.options.chart.zeroPlaneBorderColor;cq=0;Z=A.translate(0,0,1);var cz=1,M=cw.plotSizeX;if(cw.inverted){var cp;cp=cz;cz=M;M=cp;cq=cw.plotSizeY-Z-M;Z=0}A.zeroPlane=cv.rect3d(cq,Z,M,cz,L,ct,1,\"zeroPlane\").attr({fill:cr,stroke:cy,\"stroke-width\":1,zIndex:2}).add(cx)}},drawNthPoint:function(cF){var ct=this,cx=ct.chart,cs=cx.column3DGroups,cy=cx.renderer,cH=ct.xDepth,L=ct.yDepth,cz=ct.data[cF],cE,cu;var M=cz.plotY,cC,cA,cv,cG,cp,Z,cw,cq,A;if(M!==j&&!isNaN(M)){cC=cz.shapeArgs;cA=cz.color;A=cz.borderColor;cG=cz.borderWidth;cv=cz.graphic;cE=parseInt(cC.x,10);cu=parseInt(cC.y,10);cp=cE;Z=cu;cw=parseInt(cC.height,10);cq=parseInt(cC.width,10);if(ct.options.enableMouseTracking!==false){var cr=cE-cH,cD=cu+L;cz.trackerArgs=[bM,cr,cD,bO,cr,cD+cw,cr+cq,cD+cw,cr+cq+cH,cD+cw-L,cr+cq+cH,cD-L,cr+cH,cD-L,\"Z\"];ct.drawTracker(cF)}if(cx.inverted){var cB;cB=cw;cw=cq;cq=cB;cp=cx.plotSizeY-cu-cq;Z=cx.plotSizeX-cE-cw}if(cv){cv.attr({x:cp,y:Z,width:cq,height:cw,x3D:cH,y3D:L,strokeWidth:cG,fill:cA,stroke:A,zIndex:cz.y>=0?3:1})}else{cz.graphic=cv=cy.rect3d(cp,Z,cq,cw,cH,L,cG,\"point\").attr({fill:cA,stroke:A,zIndex:cz.y>=0?3:1}).add(cs);cv.shadow(ct.options.shadow,undefined,cz.shadow)}if(ct.visible===false){cv.hide()}}},render:function(){var M=this,L=M.options,Z=L.animation,A=Z&&M.animate;M.drawDataLabels();if(A){M.animate()}M.isDirty=false},animate:function(cq){var A=this,cp=A.data,L=A.chart,Z,M;if(!cq){T(cp,function(cr){var cs=cr.graphic;if(cs){if(L.inverted){Z=cs.attr(\"width\");M=cs.attr(\"x\");cs.attr({x:L.plotSizeY-A.yAxis.getThreshold(A.options.threshold||0),width:0});cs.animate({x:M,width:Z},A.options.animation)}else{cs.attr({height:0,y:A.yAxis.getThreshold(A.options.threshold||0)});cs.animate({height:cr.barH,y:cr.barY},A.options.animation)}}});A.animate=null}},drawTracker:function(M){var L=this,cr=L.chart,cq=cr.renderer,A,ct,cp=+new Date(),cu=L.options.cursor,Z=cu&&{cursor:cu},cv,cs=L.data[M];ct=cs.tracker;if(cr.options.chart.hasScroll){cr.trackerGroup.clip(L.clipRect)}A=cs.trackerArgs||cs.shapeArgs;if(cs.y!==null){if(ct){ct.attr(A)}else{if(cs.link!==undefined){Z={cursor:\"pointer\",_cursor:\"hand\"}}cs.tracker=ct=cq.path(A).attr({isTracker:cp,fill:ce,visibility:L.visible?aD:av,zIndex:cs.y>0?-1:-3}).on(R?\"touchstart\":\"mouseover\",function(cw){cv=cw.relatedTarget||cw.fromElement;if(cr.hoverSeries!=L&&ag(cv,\"isTracker\")!=cp){L.onMouseOver()}cs.onMouseOver()}).on(\"mouseout\",function(cw){if(!L.options.stickyTracking){cv=cw.relatedTarget||cw.toElement;if(ag(cv,\"isTracker\")!=cp){L.onMouseOut()}}}).css(Z).add(cr.trackerGroup)}}},setVisible:function(L,cv){var Z=this,ct=Z.chart,cs=Z.legendItem,cr=Z.dataLabelsGroup,A,cp,M=Z.data,cu,cw=ct.options.chart.ignoreHiddenSeries,cq=Z.visible;Z.visible=L=L===j?!cq:L;A=L?\"show\":\"hide\";cp=M.length;while(cp--){cu=M[cp];if(cu.tracker){cu.tracker[A]()}if(cu.graphic){cu.graphic[A]()}}if(cr){cr[A]()}if(cs){ct.legend.colorizeItem(Z,L)}Z.isDirty=true;if(Z.options.stacking){T(ct.series,function(cx){if(cx.options.stacking&&cx.visible){cx.isDirty=true}})}if(cw){ct.isDirtyBox=true}if(cv!==false){ct.redraw()}bJ(Z,A)}});a.column3d=ay;az.bar3d=aZ(az.bar,{states:{hover:{}}});var aj=a0.extendClass(ay,{type:\"bar3d\",init:function(A){A.inverted=this.inverted=true;a.column.prototype.init.apply(this,arguments)}});a.bar3d=aj})();FusionCharts([\"private\",\"modules.renderer.highcharts-export\",function(h){var C=document,f=window,c=Math,o=c.max,t=this,n=t.hcLib,b=n.Highcharts,a=b,w=b.Chart,r=b.createElement,u=b.discardElement,p=b.css,y=C.documentElement.ontouchstart!==undefined,x=b.extend,g=b.merge,d=b.each,s=b.addEvent,B,q=\"div\",A=\"absolute\",v=\"hidden\",e=\"highcharts-\",k=\"px\",m=\"none\",j=\"M\",l=\"L\",z=b.setOptions({lang:{downloadPNG:\"Download PNG image\",downloadJPEG:\"Download JPEG image\",downloadPDF:\"Download PDF document\",downloadSVG:\"Download SVG vector image\",exportButtonTitle:\"Export to raster or vector image\",printButtonTitle:\"Print the chart\"}});z.navigation={menuStyle:{border:\"1px solid #A0A0A0\",background:\"#FFFFFF\"},menuItemStyle:{fontFamily:\"Verdana, Arial\",padding:\"3px 5px\",background:m,color:\"#303030\",fontSize:y?\"14px\":\"11px\"},menuItemHoverStyle:{background:\"#999999\",color:\"#FFFFFF\"},_buttonOptions:{x:11},buttonOptions:{align:\"right\",backgroundColor:{linearGradient:[0,0,0,15],stops:[[0.4,\"#F7F7F7\"],[0.6,\"#E3E3E3\"]]},activeBackgroundColor:{linearGradient:[0,0,0,15],stops:[[0.4,\"#E3E3E3\"],[0.6,\"#F7F7F7\"]]},borderColor:\"#B0B0B0\",borderRadius:2,borderWidth:1,height:15,hoverBorderColor:\"#909090\",hoverSymbolFill:\"#81A7CF\",hoverSymbolStroke:\"#4572A5\",symbolFill:\"#E0E0E0\",symbolStroke:\"#A0A0A0\",symbolX:8,symbolY:7.5,verticalAlign:\"top\",width:16,y:10}};z.exporting={type:\"image/png\",url:\"http://export.highcharts.com/\",width:800,enableImages:false,buttons:{exportButton:{symbol:\"exportIcon\",symbolFill:\"#A8BF77\",hoverSymbolFill:\"#768F3E\",_titleKey:\"exportButtonTitle\",tooltip:\"Export Chart\",menuId:\"export-menu\",menuItems:[{textKey:\"downloadPNG\",onclick:function(){this.exportChart()}},{textKey:\"downloadJPEG\",onclick:function(){this.exportChart({type:\"image/jpeg\"})}},{textKey:\"downloadPDF\",onclick:function(){this.exportChart({type:\"application/pdf\"})}},{textKey:\"downloadSVG\",onclick:function(){this.exportChart({type:\"image/svg+xml\"})}}]},printButton:{symbol:\"printIcon\",symbolFill:\"#B5C9DF\",hoverSymbolFill:\"#779ABF\",_titleKey:\"printButtonTitle\",tooltip:\"Print Chart\",onclick:function(){this.print()}}}};x(w.prototype,{getSVG:function(J){var K=this,D,L,H,E,F,G,I,M=g(K.options,J);if(!C.createElementNS){C.createElementNS=function(O,N){var P=C.createElement(N);P.getBBox=function(){return b.Renderer.prototype.Element.prototype.getBBox.apply({element:P})};return P}}L=r(q,null,{position:A,top:\"-9999em\",width:K.chartWidth+k,height:K.chartHeight+k},C.body);x(M.chart,{renderTo:L,forExport:true});M.exporting.enabled=false;if(!M.exporting.enableImages){M.chart.plotBackgroundImage=null;M.chart.bgSWF=undefined;M.chart.bgImage=undefined;M.chart.logoURL=undefined}M.series=[];d(K.series,function(N){E=N.options;E.animation=false;E.showCheckbox=false;E.visible=N.visible;if(!M.exporting.enableImages){if(E&&E.marker&&/^url\\(/.test(E.marker.symbol)){E.marker.symbol=\"circle\"}}E.data=[];d(N.data,function(O){F=O.config;G={x:O.x,y:O.y,name:O.name};if(typeof F==\"object\"&&O.config&&F.constructor!=Array){x(G,F)}G.visible=O.visible;E.data.push(G);if(!M.exporting.enableImages){I=O.config&&O.config.marker;if(I&&/^url\\(/.test(I.symbol)){delete I.symbol}}});M.series.push(E)});D=new a.Chart(M);d([\"xAxis\",\"yAxis\"],function(N){d(K[N],function(R,P){var Q=D[N][P],T=R.getExtremes(),S=T.userMin,O=T.userMax;if(S!==B||O!==B){Q.setExtremes(S,O,true,false)}})});H=D.container.innerHTML;M=null;D.destroy();u(L);H=H.replace(/zIndex=\"[^\"]+\"/g,\"\").replace(/isShadow=\"[^\"]+\"/g,\"\").replace(/symbolName=\"[^\"]+\"/g,\"\").replace(/jQuery[0-9]+=\"[^\"]+\"/g,\"\").replace(/isTracker=\"[^\"]+\"/g,\"\").replace(/url\\((\\\\?[\\'\\\"])[^#]+#/g,\"url($1#\").replace(/<svg /,'<svg xmlns:xlink=\"http://www.w3.org/1999/xlink\" ').replace(/ href=/g,\" xlink:href=\").replace(/id=([^\" >]+)/g,'id=\"$1\"').replace(/class=([^\" >]+)/g,'class=\"$1\"').replace(/ transform /g,\" \").replace(/ visibility /g,\" \").replace(/visibility=\"[^\"]+\"/g,\"\").replace(/:(path|rect)/g,\"$1\").replace(/<img ([^>]*)>/gi,\"<image $1 />\").replace(/<\\/image>/g,\"\").replace(/<image ([^>]*)([^\\/])>/gi,\"<image $1$2 />\").replace(/width=(\\d+)/g,'width=\"$1\"').replace(/height=(\\d+)/g,'height=\"$1\"').replace(/hc-svg-href=\"/g,'xlink:href=\"').replace(/style=\"([^\"]+)\"/g,function(N){return N.toLowerCase()});H=H.replace(/(url\\(#highcharts-[0-9]+)&quot;/g,\"$1\").replace(/&quot;/g,\"'\");if(H.match(/ xmlns=\"/g).length==2){H=H.replace(/xmlns=\"[^\"]+\"/,\"\")}return H},exportChart:function(E,H){var G,F=this,D=F.getSVG(H);E=g(F.options.exporting,E);D=D.replace(/(\\sd\\s*=\\s*[\"'])[M\\s\\d\\.]*([\"'])/ig,\"$1M 0 0 L 0 0$2\");if(E.type===\"application/pdf\"){D=D.replace(/(\\<([^s^\\s^\\>]+)[^\\>]+?opacity\\s*=\\s*['\"][^1][^\\>]+?(>[\\n\\r\\s]*<\\/[^>]+?>|\\/>))/ig,'$1<$2 opacity=\"1\" stroke-opacity=\"1\" fill=\"#cccccc\" stroke-width=\"0\" r=\"0\" height=\"0.5\" width=\"0.5\" y=\"0\" x=\"0\" d=\"M 0 0 L 1 1\" />')}G=r(\"form\",{method:\"POST\",action:E.url},{display:m},C.body);d([\"filename\",\"type\",\"width\",\"svg\"],function(I){r(\"input\",{type:v,name:I,value:{filename:E.filename||\"FusionCharts\",type:E.type,width:E.width,svg:D}[I]},null,G)});G.submit();u(G)},print:function(){var G=this,E=G.container,H=[],F=E.parentNode,D=C.body,I=D.childNodes;if(G.isPrinting){return}G.isPrinting=true;d(I,function(K,J){if(K.nodeType==1){H[J]=K.style.display;K.style.display=m}});D.appendChild(E);f.print();setTimeout(function(){F.appendChild(E);d(I,function(K,J){if(K.nodeType==1){K.style.display=H[J]}});G.isPrinting=false},1000)},contextMenu:function(V,N,J,I,O,M){var L=this,S=L.options.navigation,F=S.menuItemStyle,Q=L.chartWidth,H=L.chartHeight,U=\"cache-\"+V,E=L[U],P=o(O,M),D=\"1px 1px 3px rgba(0,0,0,0.5)\",R,K,T,G;if(!E){L[U]=E=r(q,{className:e+V},{position:A,zIndex:1000,padding:P+k},L.container);R=r(q,null,x({MozBoxShadow:D,WebkitBoxShadow:D,boxShadow:D},S.menuStyle),E);K=function(){p(E,{display:m})};s(E,\"mouseover\",function(){clearTimeout(T)});s(E,\"mouseleave\",function(){T=setTimeout(K,200)});d(N,function(W){if(W){var X=r(q,{onmouseover:function(){p(this,S.menuItemHoverStyle)},onmouseout:function(){p(this,F)},innerHTML:W.text||b.getOptions().lang[W.textKey]},x({cursor:\"pointer\"},F),R);X[y?\"ontouchstart\":\"onclick\"]=function(){K();W.onclick.apply(L,arguments)}}});L.exportMenuWidth=E.offsetWidth;L.exportMenuHeight=E.offsetHeight}G={display:\"block\"};if(J+L.exportMenuWidth>Q){G.right=(Q-J-O-P)+k}else{G.left=(J-P)+k}if(I+M+L.exportMenuHeight>H){G.bottom=(H-I-P)+k}else{G.top=(I+M-P)+k}p(E,G)},addButton:function(G){var K=this,M=K.renderer,L=g(K.options.navigation.buttonOptions,G),T=L.onclick,R=L.menuItems,J=L.menuId,O=L.width,H=L.height,I,P,E,D=L.paddingRight,S=L.borderWidth,N={stroke:L.borderColor,fill:L.backgroundColor},U={stroke:L.symbolStroke,fill:L.symbolFill},Q;if(L.enabled===false){return{}}if(K.options.navigation._buttonOptions.x>0){D=0}if(L.x==undefined){L.x=K.options.navigation._buttonOptions.x-O-5-(D||0)}K.options.navigation._buttonOptions.x=L.x;function F(){if(!E.active){P.attr(U);I.attr(N);Q&&K.tooltip&&K.tooltip.hide()}}I=M.rect(0,0,O,H,L.borderRadius,S).align(L,true).attr(x({fill:L.backgroundColor,\"stroke-width\":S,zIndex:19},N)).add();E=M.rect(0,0,O,H,0).align(L).attr({fill:\"rgba(255, 255, 255, 0.001)\",zIndex:21}).css({cursor:\"pointer\"}).on(\"mouseover\",function(){P.attr({stroke:L.hoverSymbolStroke,fill:L.hoverSymbolFill});I.attr({stroke:L.hoverBorderColor});if(Q&&K.tooltip){K.tooltip.refresh(Q)}}).on(y?\"touchstart\":\"mousedown\",function(){if(Q&&K.tooltip){K.tooltip.hide()}}).on(\"mouseout\",F).on(\"click\",F).add();Q=L.tooltip?{tooltipPos:[E.attr(\"x\")-15,E.attr(\"y\")+15],series:{},svgElm:E.svgElm,point:{toolText:L.tooltip},getLabelConfig:function(){return this},tooltipConstraint:\"chart\"}:undefined;if(R&&J){T=function(W){F();var V=E.getBBox();K.contextMenu(J,R,V.x,V.y,O,H)}}E.on(\"click\",function(){T.apply(K,arguments);Q&&K.tooltip&&K.tooltip.hide()});P=M.symbol(L.symbol,L.symbolX,L.symbolY,(L.symbolSize||8)/2).align(L,true).attr(x(U,{\"stroke-width\":L.symbolStrokeWidth||1,zIndex:20})).add();return{options:L,tooltipOptions:Q,hide:function(){F();P.hide();E.hide();I.hide()},show:function(){P.show();E.show();I.show()},activate:function(V){V=E.active=!!V;if(V){I.attr({stroke:L.hoverBorderColor,fill:L.activeBackgroundColor});P.attr({stroke:L.hoverSymbolStroke,fill:L.hoverSymbolFill})}else{F()}},onClick:T}}});b.Renderer.prototype.symbols.exportIcon=function(E,F,D){return[j,E-D,F+D,l,E+D,F+D,E+D,F+D*0.5,E-D,F+D*0.5,\"Z\",j,E,F+D*0.5,l,E-D*0.5,F-D/3,E-D/6,F-D/3,E-D/6,F-D,E+D/6,F-D,E+D/6,F-D/3,E+D*0.5,F-D/3,\"Z\"]};b.Renderer.prototype.symbols.printIcon=function(E,F,D){return[j,E-D,F+D*0.5,l,E+D,F+D*0.5,E+D,F-D/3,E-D,F-D/3,\"Z\",j,E-D*0.5,F-D/3,l,E-D*0.5,F-D,E+D*0.5,F-D,E+D*0.5,F-D/3,\"Z\",j,E-D*0.5,F+D*0.5,l,E-D*0.75,F+D,E+D*0.75,F+D,E+D*0.5,F+D*0.5,\"Z\"]};w.prototype.callbacks.push(function(D){var G,F=D.options.exporting,E=F.buttons;if(F.enabled!==false){for(G in E){D.addButton(E[G])}}})}]);(function(){var z=FusionCharts([\"private\",\"modules.renderer.highcharts-base\"]);if(z===undefined){return}var f=z.hcLib,aL=false&&!/fusioncharts\\.com$/i.test(location.hostname),at=f.BLANKSTRINGPLACEHOLDER,ak=f.BLANKSTRING,an=f.createTrendLine,N=f.pluck,A=f.getValidValue,x=f.pluckNumber,aN=f.defaultPaletteOptions,c=f.getFirstValue,D=f.getDefinedColor,aq=f.parsePointValue,aO=f.parseUnsafeString,V=f.FC_CONFIG_STRING,T=f.extend2,j=f.deltend,C=f.getDashStyle,aG=f.toPrecision,H=f.stubFN,b=f.hasSVG,ag=f.graphics.getColumnColor,aB=f.getFirstColor,W=f.setLineHeight,K=f.stableSort,Y=f.pluckFontSize,am=f.pluckColor,G=f.getFirstAlpha,ac=f.graphics.getDarkColor,aD=f.graphics.getLightColor,l=f.graphics.convertColor,af=f.COLOR_TRANSPARENT,q=f.POSITION_CENTER,av=f.POSITION_TOP,aj=f.POSITION_BOTTOM,ao=f.POSITION_RIGHT,e=f.POSITION_LEFT,ay=0,aJ=f.chartAPI,w=f.graphics.mapSymbolName,ae=f.COMMASTRING,a=f.ZEROSTRING,g=f.ONESTRING,E=f.HUNDREDSTRING,ab=f.PXSTRING,F=f.BGRATIOSTRING,aP=f.COMMASPACE,h=f.COLOR_WHITE,az=f.SAMPLESTRING,al=f.TESTSTR,U=f.graphics.getAngle,p=f.POSITION_MIDDLE,aC=f.STRINGUNDEFINED,P=f.axisLabelAdder,ai=f.falseFN,v=f.SmartLabelManager,o=f.NumberFormatter,au=f.getLinkAction,aF=f.getAxisLimits,O=f.HASHSTRING,k=f.createDialog,t=f.regex.dropHash,ap=Math.max,R=Math.min,B=f.Highcharts,d={fontWeight:{\"1\":\"bold\",\"0\":\"normal\"},fontStyle:{\"1\":\"italic\",\"0\":\"normal\"},textDecoration:{\"1\":\"underline\",\"0\":\"none\"}},y={font:function(aQ,aR){aR.style.fontFamily=aQ},size:function(aQ,aR){if(aQ){aR.style.fontSize=Y(aQ)+ab}},color:function(aR,aS,aQ){aS.style.color=aR&&aR.replace&&aR.replace(t,O)||ak;if(aQ){aS.color=aS.style.color}},bgcolor:function(aQ,aR){aR.style.backgroundColor=aQ&&aQ.replace&&aQ.replace(t,O)||ak},bordercolor:function(aQ,aR){aR.style.border=\"1px solid\";aR.style.borderColor=aQ&&aQ.replace&&aQ.replace(t,O)||ak},ishtml:ak,leftmargin:function(aQ,aR){aR.style.marginLeft=x(aQ,0)+ab},letterspacing:function(aQ,aR){aR.style.letterSpacing=x(aQ,0)+ab},bold:function(aQ,aR){aR.style.fontWeight=d.fontWeight[aQ]||\"\"},italic:function(aQ,aR){aR.style.fontStyle=d.fontStyle[aQ]||\"\"},underline:function(aQ,aR){aR.style.textDecoration=d.textDecoration[aQ]||\"\"}},I={chart2D:{bgColor:\"bgColor\",bgAlpha:\"bgAlpha\",bgAngle:\"bgAngle\",bgRatio:\"bgRatio\",canvasBgColor:\"canvasBgColor\",canvasBaseColor:\"canvasBaseColor\",divLineColor:\"divLineColor\",legendBgColor:\"legendBgColor\",legendBorderColor:\"legendBorderColor\",toolTipbgColor:\"toolTipbgColor\",toolTipBorderColor:\"toolTipBorderColor\",baseFontColor:\"baseFontColor\",anchorBgColor:\"anchorBgColor\"},chart3D:{bgColor:\"bgColor3D\",bgAlpha:\"bgAlpha3D\",bgAngle:\"bgAngle3D\",bgRatio:\"bgRatio3D\",canvasBgColor:\"canvasBgColor3D\",canvasBaseColor:\"canvasBaseColor3D\",divLineColor:\"divLineColor3D\",divLineAlpha:\"divLineAlpha3D\",legendBgColor:\"legendBgColor3D\",legendBorderColor:\"legendBorderColor3D\",toolTipbgColor:\"toolTipbgColor3D\",toolTipBorderColor:\"toolTipBorderColor3D\",baseFontColor:\"baseFontColor3D\",anchorBgColor:\"anchorBgColor3D\"}},aA=(function(){var aR={},aQ=300,aS,aT=function(){var a0,aV,a1,aZ,aY=0,aX,aU,aW;for(a0 in aR){aY+=1;aV=aR[a0];a1=aV.jsVars,aX=aV.ref;if((aZ=aX&&aX.parentNode)){aU=aZ.offsetWidth;aW=aZ.offsetHeight;if(!a1.resizeLocked&&(a1._containerOffsetW!==aU||a1._containerOffsetH!==aW)){aX.resize&&aX.resize();a1._containerOffsetW=aU;a1._containerOffsetH=aW}}else{delete aR[a0];aY-=1}}if(!aY){aS=clearInterval(aS)}};return function(aV){var aW=aV.jsVars,aU=aV.ref&&aV.ref.parentNode||{};aW._containerOffsetW=aU.offsetWidth;aW._containerOffsetH=aU.offsetHeight;aR[aV.id]=aV;if(!aS){aS=setInterval(aT,aQ)}}})(),X={getExternalInterfaceMethods:function(){var aT=this.jsVars,aS=aJ[aT.type],aQ=aS&&aS.eiMethods,aR=\"saveAsImage,print,exportChart,getXML,hasRendered,signature,cancelExport,getSVGString,\";if(typeof aQ===\"string\"){aR+=aQ+ae}else{if(aQ!==undefined||aQ!==null){for(var aU in aQ){aR+=aU+ae}}}return aR.substr(0,aR.length-1)},drawOverlayButton:function(aQ){var aR=this.jsVars,aS=aR.$overlayButton;if(aQ&&aQ.show){if(!aS){aS=aR.$overlayButton=jQuery(\"<span>\");aS.click(function(){z.raiseEvent(\"OverlayButtonClick\",aQ,aR.fcObj)})}aS.text(aQ.message?aQ.message:\"Back\");aR.overlayButtonMessage=aS.text();aS.css({border:\"1px solid \"+(aQ.borderColor?aQ.borderColor.replace(t,O):\"#7f8975\"),backgroundColor:(aQ.bgColor?aQ.bgColor.replace(t,O):\"#edefec\"),fontFamily:aQ.font?aQ.font:\"Verdana\",color:\"#\"+aQ.fontColor?aQ.fontColor:\"49563a\",fontSize:(aQ.fontSize?aQ.fontSize:\"10\")+ab,padding:(aQ.padding?aQ.padding:\"3\")+ab,fontWeight:parseInt(aQ.bold,10)===0?\"normal\":\"bold\",position:\"absolute\",top:\"0\",right:\"0\",_cursor:\"hand\",cursor:\"pointer\"});aR.hcObj.container.appendChild(aS[0]);aR.overlayButtonActive=true}else{if(aS){aS.detach();aR.overlayButtonActive=false;delete aR.overlayButtonMessage}}},print:function(){return this.jsVars.hcObj&&this.jsVars.hcObj.hasRendered&&this.jsVars.hcObj.print()},exportChart:function(aQ){var aU=this.jsVars,aS=aU.hcObj,aR={},aT;if(aS&&aS.options&&aS.options.exporting&&aS.options.exporting.enabled){if(!(aQ===undefined||aQ===null)){for(aT in aQ){switch(aT.toLowerCase()){case\"exportfilename\":aR.filename=aQ[aT];break;case\"exportformat\":aR.type={png:\"image/png\",jpg:\"image/jpeg\",pdf:\"application/pdf\",svg:\"image/svg+xml\"}[aQ[aT].toLowerCase()]||\"image/png\";break}}}aS.exportChart(aR)}},getSVGString:function(){return this.jsVars&&this.jsVars.hcObj&&this.jsVars.hcObj.getSVG&&this.jsVars.hcObj.getSVG()},resize:function(){var aT=this.jsVars,aS=aT.container,aQ=aT.fcObj,aR=aT.hcObj;if(!aR){return}if(aR&&aR.destroy){aR.destroy()}f.createChart(aT.fcObj,aS,aT.type,undefined,undefined,false);delete aT.isResizing;f.raiseEvent(\"resized\",{width:aQ.width,height:aQ.height,prevWidth:aT.width,prevHeight:aT.height},aQ,[aQ.id])},lockResize:function(aQ){return this.jsVars.resizeLocked=aQ===undefined&&true||aQ},showChartMessage:function(aU,aS,aR){var aT=this.jsVars,aQ=aT.hcObj;if(aT.msgStore[aU]){aU=aT.msgStore[aU]}if(aS&&aQ&&aQ.hasRendered){aU?aQ.showLoading(aU,aR):aQ.hideLoading()}else{if(aQ&&aQ.destroy){aQ.destroy()}f.createChart(aT.fcObj,aT.container,aT.type,undefined,aU)}return aU},signature:function(){return\"FusionCharts/3.2.2 (XT)\"}};f.createChart=function(a0,aT,a1,a3,aV,aU,aS){var aZ=a0.jsVars,aR=aZ.msgStore,aY,aQ,aX=aJ[a1],aW,a2=function(a9){var a7={renderer:\"javascript\"},a4=aZ.fcObj,a6=a4.width,a8=a4.height,a5=aX&&aX.eiMethods,ba=aZ.$overlayButton;aT.jsVars=a0.jsVars;aZ.container=aT;aZ.hcObj=a9;aZ.type=a1;aZ.width=aT.offsetWidth;aZ.height=aT.offsetHeight;aZ.instanceAPI=aW;a9.container&&(a9.container.style.backgroundColor=aZ.transparent?\"transparent\":\"#ffffff\");if(a9.hasRendered){z.extend(aT,X);if(a5&&typeof a5!==\"string\"){for(var bb in a5){aT[bb]=a5[bb]}}if(aZ.overlayButtonActive&&ba){ba.text(aZ.overlayButtonMessage);a9.container.appendChild(ba[0])}}if(a3){a3({success:a9.hasRendered,ref:aT,id:a0.id});if(a9.hasRendered){a6=Number((a6&&a6.match&&a6.match(/^\\s*(\\d*\\.?\\d*)\\%\\s*$/)||[])[1]);a8=Number((a8&&a8.match&&a8.match(/^\\s*(\\d*\\.?\\d*)\\%\\s*$/)||[])[1]);if((a6||a8)&&a4.ref&&a4.ref.parentNode){}f.raiseEvent(\"loaded\",{type:a1,renderer:\"javascript\"},a0,[a0.id]);f.raiseEvent(\"rendered\",{renderer:\"javascript\"},a4,[a4.id])}}if(a9.hasRendered&&aZ.previousDrawCount<aZ.drawCount){a7.width=aZ.width;a7.height=aZ.height;a7.drawCount=aZ.drawCount;a7.drawingLatency=aW.drawingLatency;a7.displayingMessage=aZ.hasNativeMessage;f.raiseEvent(\"drawcomplete\",a7,a4,[a4.id])}};a0.__state.dataReady=false;if(aZ.instanceAPI&&aZ.instanceAPI.dispose){aZ.instanceAPI.dispose()}aW=aX?new aJ(a1):new aJ(\"stub\");aW.chartInstance=a0;if(aV!==undefined){if(typeof aV===\"string\"){aV=new k(aT,aV);aZ.hasNativeMessage=true}}else{if(!(aX&&aX.init)||(aX&&aX.name===\"stub\")){aV=new k(aT,aR.ChartNotSupported);aZ.hasNativeMessage=true}else{if(aZ.message){aV=new k(aT,aZ.message);aZ.hasNativeMessage=true}else{if(aZ.loadError){aV=new k(aT,aR.LoadDataErrorText);aZ.hasNativeMessage=true}else{if(aZ.stallLoad){aV=new k(aT,aR.XMLLoadingText);aZ.hasNativeMessage=true}else{aY=a0.getChartData(FusionChartsDataFormats.JSON,true);aQ=aY.data;if(aY.error instanceof Error){aV=new k(aT,aR.InvalidXMLText);aZ.hasNativeMessage=true;if(!aS){f.raiseEvent(\"dataxmlinvalid\",{},aZ.fcObj,[aZ.fcObj.id])}}else{if(!aS){f.raiseEvent(\"dataloaded\",{},aZ.fcObj,[aZ.fcObj.id])}aV=aW.init(aT,aQ,a0,a2);aZ.previousDrawCount=aZ.drawCount;aZ.drawCount+=1;if(aV.series.length===0){aV=new k(aT,aR.ChartNoDataText);aZ.hasNativeMessage=true;if(!aS){f.raiseEvent(\"nodatatodisplay\",{},aZ.fcObj,[aZ.fcObj.id])}}else{a0.__state.dataReady=true;aZ.hasNativeMessage=false;delete aZ.message}}}}}}}if(!aV){aV=new k(aT,\"Error rendering chart {0x01}\");aZ.hasNativeMessage=true}aV.chart=aV.chart||{};aV.chart.renderTo=aT;aV.instanceAPI=aW;aV.credits=aV.credits||{};aV.credits.enabled=aX&&aX.creditLabel===true?true:false;if(aU===false){aV.chart.animation=false;(aV.plotOptions||(aV.plotOptions={}))&&(aV.plotOptions.series||(aV.plotOptions.series={}));aV.plotOptions.series.animation=false}return aW.draw(aV,a2)};var Z=f.HCstub=function(aT,aR,a1,aS){var aZ=aT.chart,aQ=x(aZ.charttopmargin,aS.charttopmargin,15),aY=x(aZ.chartrightmargin,aS.chartrightmargin,15),aW=x(aZ.chartbottommargin,aS.chartbottommargin,15),aU=x(aZ.chartleftmargin,aS.chartleftmargin,15),a2=aQ+aW,aX=aU+aY,aV=(0.7*a1),a0=(0.7*aR);if(a2>aV){aQ-=(((a2-aV)*aQ)/a2);aW-=(((a2-aV)*aW)/a2)}if(aX>a0){aU-=(((aX-a0)*aU)/aX);aY-=(((aX-a0)*aY)/aX)}var a3={_FCconf:{0:{stack:{}},1:{stack:{}},x:{stack:{}},oriCatTmp:[],noWrap:false,marginLeftExtraSpace:0,marginRightExtraSpace:0,marginBottomExtraSpace:0,marginTopExtraSpace:0,marimekkoTotal:0},chart:{alignTicks:false,renderTo:ak,ignoreHiddenSeries:false,events:{},reflow:false,spacingTop:aQ,spacingRight:aY,spacingBottom:aW,spacingLeft:aU,marginTop:aQ,marginRight:aY,marginBottom:aW,marginLeft:aU,borderRadius:0,plotBackgroundColor:\"#FFFFFF\",style:{},animation:!x(aZ.defaultanimation,1)?false:{duration:x(aZ.animationduration,1)*500}},colors:[\"AFD8F8\",\"F6BD0F\",\"8BBA00\",\"FF8E46\",\"008E8E\",\"D64646\",\"8E468E\",\"588526\",\"B3AA00\",\"008ED6\",\"9D080D\",\"A186BE\",\"CC6600\",\"FDC689\",\"ABA000\",\"F26D7D\",\"FFF200\",\"0054A6\",\"F7941C\",\"CC3300\",\"006600\",\"663300\",\"6DCFF6\"],credits:{href:\"http://www.fusioncharts.com?BS=FCHSEvalMark\",text:\"FusionCharts\",enabled:true},global:{},labels:{items:[]},lang:{},legend:{enabled:true,symbolWidth:12,borderRadius:1,backgroundColor:\"#FFFFFF\",initialItemX:0,title:{text:ak,x:0,y:0,padding:2},scroll:{},itemStyle:{}},loading:{},plotOptions:{series:{pointPadding:0,borderColor:\"#333333\",events:{},animation:!x(aZ.animation,aZ.defaultanimation,1)?false:{duration:x(aZ.animationduration,1)*1000},states:{hover:{enabled:false},select:{enabled:false}},dataLabels:{enabled:true,color:\"#555555\",style:{},formatter:function(){if(this.point.showPercentValues){return aS.numberFormatter.percentValue(this.percentage)}else{return this.point.displayValue}}},point:{events:{}}},area:{states:{hover:{enabled:false}},marker:{lineWidth:1,radius:3,states:{hover:{enabled:false},select:{enabled:false}}}},radar:{states:{hover:{enabled:false}},marker:{lineWidth:1,radius:3,states:{hover:{enabled:false},select:{enabled:false}}}},areaspline:{states:{hover:{enabled:false}},marker:{lineWidth:1,radius:3,states:{hover:{enabled:false},select:{enabled:false}}}},line:{shadow:true,states:{hover:{enabled:false}},marker:{lineWidth:1,radius:3,states:{hover:{enabled:false},select:{enabled:false}}}},scatter:{states:{hover:{enabled:false}},marker:{lineWidth:1,radius:3,states:{hover:{enabled:false},select:{enabled:false}}}},bubble:{states:{hover:{enabled:false}},marker:{lineWidth:1,radius:3,states:{hover:{enabled:false},select:{enabled:false}}}},spline:{states:{hover:{enabled:false}},marker:{lineWidth:1,radius:3,states:{hover:{enabled:false},select:{enabled:false}}}},pie:{size:\"80%\",allowPointSelect:true,cursor:\"pointer\",point:{events:{legendItemClick:aZ.interactivelegend===a?ai:function(){this.slice()}}}},pie3d:{size:\"80%\",allowPointSelect:true,cursor:\"pointer\",point:{events:{legendItemClick:aZ.interactivelegend===a?ai:function(){this.slice()}}}},column:{},floatedcolumn:{},column3d:{},bar:{},bar3d:{}},point:{},series:[],subtitle:{text:ak,style:{}},symbols:[],title:{text:ak,style:{}},toolbar:{},tooltip:{borderRadius:1,style:{}},xAxis:{steppedLabels:{style:{}},labels:{x:0,style:{},enabled:false},lineWidth:0,plotLines:[],plotBands:[],title:{style:{},text:ak},tickWidth:0,scroll:{enabled:false}},yAxis:[{startOnTick:false,endOnTick:false,title:{style:{},text:ak},tickLength:0,labels:{x:0,style:{}},plotBands:[],plotLines:[]},{tickLength:0,gridLineWidth:0,startOnTick:false,endOnTick:false,title:{style:{},text:ak},labels:{x:0,style:{},enabled:false,formatter:function(){if(this.value!==at){return this.value}else{return ak}}},opposite:true,plotBands:[],plotLines:[]}],exporting:{buttons:{exportButton:{},printButton:{enabled:false}}}};if(aZ.palettecolors&&typeof aZ.palettecolors===\"string\"){a3.colors=aZ.palettecolors.split(ae)}aS.hcJSON=a3;return a3},J=function(bi,bf,a1,aX,aV,bk,a2,aT,bo,bp){var bg,bn=a1.min,a3=a1.max,aS=a1.tickInterval,ba=bp?\"xAxis\":(aX.stacking100Percent?\"percentValue\":(bo?\"sYAxis\":\"yAxis\")),aZ=bn,bh=1,a6=a1.gridLineColor,bq=a1.gridLineWidth,bl=a1.gridLineDashStyle,a0=bn<ay&&a3>ay?true:false,aU=bn===ay,a4=a3===ay,a5=x(bi.showzeroplanevalue)===0,bm=true,aY,bc=1,a9=x(bi.numdivlines,0)>0,a7=bf[V].axisGridManager,aW=bf.chart,aQ=aW.paletteIndex,aR,bb,bj,a8,bd,be;if(bp&&!aX.catOccupied){aX.catOccupied={}}if(a0&&(!bp||!aX.catOccupied[0])){if(bp){bm=x(bi.showvzeroplane,1);aY=x(bi.showvzeroplanevalue,bk);aR=x(bi.vzeroplanethickness,1);bb=aR>0?l(N(bi.vzeroplanecolor,a6),N(bi.vzeroplanealpha,bi.vdivlinealpha,aN.divLineAlpha[aQ])):af}else{bd=x(bi.divlinealpha,aN.divLineAlpha[aQ]);aY=x(bi.showzeroplanevalue,bk);if(this.defaultZeroPlaneHighlighted===false){bm=x(bi.showzeroplane,!(this.defaultZeroPlaneHidden&&!a9));bj=bq}else{bj=bq===1?2:bq;bc=5;bd*=2}aR=x(bi.zeroplanethickness,bj);bb=aR>0?l(N(bi.zeroplanecolor,a6),N(bi.zeroplanealpha,bd)):af}if(bm){a8=aY?aT[ba](0):ak;be=a7.addAxisGridLine(a1,0,a8,aR,bl,bb,bc,bp);be&&(be.isZeroPlane=true)}}if(aV===1&&(!bp||!aX.catOccupied[bn])){if(aU&&a5){a8=ak}else{a8=aT[ba](bn)}be=a7.addAxisGridLine(a1,bn,a8,0.1,undefined,af,1,bp);be&&(be.isMinLabel=true)}if(bq<=0){bq=0.1;a6=af}bg=Number(aG(aZ+aS,10));for(;bg<a3;bg=Number(aG(bg+aS,10)),bh+=1){if(aT[ba](bg)===aT[ba](a3)){break}if(a0&&aZ<ay&&bg>ay&&!bo){a7.addAxisAltGrid(a1,0);bh+=1}if(bg!==ay&&(!bp||!aX.catOccupied[bg])){a8=bk===1&&bh%a2===ay?aT[ba](bg):ak;a7.addAxisGridLine(a1,bg,a8,bq,bl,a6,2,bp)}aZ=bg;if(!bo){a7.addAxisAltGrid(a1,bg)}}if(!bo){a7.addAxisAltGrid(a1,a3)}if(aV===1&&bh%a2===ay&&(!bp||!aX.catOccupied[a3])){if(a4&&a5){a8=ak}else{a8=aT[ba](a3)}be=a7.addAxisGridLine(a1,a3,a8,0.1,bl,af,2,bp);be&&(be.isMaxLabel=true)}if(this.realtimeEnabled){a1.labels._enabled=a1.labels.enabled;a1._gridLineWidth=a1.gridLineWidth;a1._alternateGridColor=a1.alternateGridColor}a1.labels.enabled=false;a1.gridLineWidth=ay;a1.alternateGridColor=af;a1.plotLines.sort(Q)},aw=function(aS,bb){var aZ=aS[V],aV=aS.xAxis,a2=aZ.x,a7=bb.chart,a4,a5,a6,aY,a9,a1,a3,ba,aT,a8,aW,aR,aQ,aU,aX=this.numberFormatter,a0;aV.title.text=aO(a7.xaxisname);a0=x(parseInt(a7.yaxisvaluesstep,10),parseInt(a7.yaxisvaluestep,10),1);a0=a0<1?1:a0;a4=aS.yAxis[0],aY=aZ[0];if(aZ.isDual){a9=aX.getCleanValue(a7.pyaxismaxvalue);a1=aX.getCleanValue(a7.pyaxisminvalue);a4.title.text=aO(a7.pyaxisname)}else{a9=aX.getCleanValue(a7.yaxismaxvalue);a1=aX.getCleanValue(a7.yaxisminvalue);a4.title.text=aO(a7.yaxisname)}aT=x(this.isStacked?0:this.setAdaptiveYMin,a7.setadaptiveymin,0);ba=a3=!aT;a8=x(aZ.numdivlines,a7.numdivlines,this.numdivlines,4);aW=a7.adjustdiv!==a;aR=x(this.showYAxisValues,a7.showyaxisvalues,a7.showyaxisvalue,1);aQ=x(a7.showlimits,aR);aU=x(a7.showdivlinevalue,a7.showdivlinevalues,aR);this.axisMinMaxSetter(a4,aY,a9,a1,a3,ba,a8,aW);this.configurePlotLines(a7,aS,a4,aY,aQ,aU,a0,aZ.numberFormatter,false);if(a4.reversed&&a4.min>=0){aS.plotOptions.series.threshold=a4.max}if(aZ.isDual){a9=a7.syaxismaxvalue;a1=a7.syaxisminvalue;aT=x(a7.setadaptivesymin,aT);ba=a3=!aT;aQ=x(a7.showsecondarylimits,aQ);aU=x(a7.showdivlinesecondaryvalue,aR);a4=aS.yAxis[1],aY=aZ[1];this.axisMinMaxSetter(a4,aY,a9,a1,a3,ba,a8,aW);this.configurePlotLines(a7,aS,a4,aY,aQ,aU,a0,aZ.numberFormatter,true);a4.title.text=aO(a7.syaxisname)}},n=function(aW,aZ,a1,a0,aV,aX,aY){if(aZ!==null){var aU,a2,aR=aW[V];a1=x(a1,0);if(!aR[a1]){aR[a1]={}}aU=aR[a1];if(a0){if(this.distributedColumns){aR.marimekkoTotal+=aZ}a2=aU.stack;var aT,aQ,aS;aV=x(aV,0);aX=x(aX,0);aY=N(aY,aC);if(!a2[aY]){a2[aY]=[]}aT=a2[aY];if(!aT[aX]){aT[aX]=[]}aQ=aT[aX];if(!aQ[aV]){aQ[aV]={}}aS=aQ[aV];if(aZ>=0){if(aS.p){aZ=aS.p+=aZ}else{aS.p=aZ}}else{if(aS.n){aZ=aS.n+=aZ}else{aS.n=aZ}}}aU.max=aU.max>aZ?aU.max:aZ;aU.min=aU.min<aZ?aU.min:aZ}},aE=f.placeVerticalAxis=function(be,a4,bw,bs,a6,bo,a7,a8,bc,by){var bB=bw[V],aS=bB.smartLabel,bC,aV,aY,bf,aT,bA,bb=0,aU=20,bv=bB.marginRightExtraSpace,bh=bB.marginLeftExtraSpace,aW={},bz={},bK={},bq=be.plotLines,bg=be.plotBands,a9=a4.verticalAxisValuesPadding,bi=a4.verticalAxisValuesPadding,br=a4.verticalAxisNamePadding,a3=a4.verticalAxisNameWidth,bj=a4.rotateVerticalAxisName,bN=(be.offset?be.offset:0),bn=0,a2=0,a5=0,bx=0,bl=0,bD=0,ba=0,bm,bd,bJ,aR,bu,bL,bH,aQ,a0,bI,bt=2,bp=(a7?bv+8:bh+4),bG=function(bP,bO){var bR,bQ;if(bP&&bP.label&&A(bP.label.text)!==undefined){bu=bP.label;if(bu.style&&bu.style!==bJ){bJ=bu.style;aS.setStyle(bJ)}bC=aS.getOriSize(bP.label.text);bR=bC.width;bQ=bR?(bR+2):0;if(bP.isGrid){aW[bO]={width:bR,height:bC.height,label:bu};if(bx<=bQ){bx=bQ;a4.lYLblIdx=bO}}else{if(bP.isTrend){if((a7&&bu.textAlign===e)||(bu.textAlign===ao)){bz[bO]={width:bR,height:bC.height,label:bu};bl=ap(bl,bQ)}else{bK[bO]={width:bR,height:bC.height,label:bu};bD=ap(bD,bQ)}}}}},aZ=function(){if(a2+bn>bo){aQ=a2+bn-bo;if(a2){if(bi>=aQ){bi-=aQ;return}else{aQ-=bi;bi=0}}if((a9+br)>=aQ){if(br>=aQ){br-=aQ;return}else{a9-=(aQ-br);br=0;return}}else{aQ-=(a9+br);a9=0;br=0;if(bD>aU){if(bl>bx){if((bD-bl)>=aQ){bD-=aQ;return}else{if((bl-bD)>=aQ){bl-=aQ;return}else{if(bl>bD){aQ-=(bl-bD);bl=bD}else{aQ-=(bD-bl);bD=bl}if(2*(bl-bx)>=aQ){bD-=(aQ/2);bl-=(aQ/2);return}else{aQ-=2*(bl-bx);bl=bx;bD=bx}}}}else{if((bD-aU)>=aQ){bD-=aQ;return}else{aQ-=(bD-aU);bD=aU}}}if(bl>bx){if((bl-bx)>=aQ){bl-=aQ;return}else{aQ-=(bl-bx);bl=bx}}if(bb-bA>=aQ){bb-=aQ;return}else{aQ-=(bb-bA);bb=bA;if(bD>=aQ){bD=0;return}else{aQ-=bD;bD=0}if(bb>=aQ){bb=0;return}else{aQ-=bb;bb=0}if(bx>=aQ){bx-=aQ;bl=bx;return}}}}return},bM=function(bO,bS){var bP,bR=0,bQ=bS?(bD-2):(bD+bO-2);if(bD>0){for(bm in bK){bu=bK[bm].label;if(bK[bm].width>bQ){if(bu.style&&bu.style!==bJ){bJ=bu.style;aS.setStyle(bJ)}bP=aS.getSmartText(bu.text,bQ,a6,true);bu.text=bP.text;bK[bm].height=bP.height;bR=Math.max(bR,bP.width)}else{bR=Math.max(bR,bK[bm].width)}}return(bS?(bQ-bR)+bO:(bQ-bR))}else{for(bm in bK){bK[bm].label.text=ak}return 0}},bF=function(bO,bR){var bQ,bP=bR?bb:(bb+bO);if(bP>0){if(bj){if(bP<bf.height){bf=aS.getSmartText(be.title.text,a6,bP)}bQ=bf.height}else{if(bP<bf.width){bf=aS.getSmartText(be.title.text,bP,a6)}bQ=bf.width}be.title.text=bf.text;return(bR?(bP-bQ)+bO:(bP-bQ))}else{be.title.text=ak;return 0}},bE=function(bO){var bP,bR=0,bQ=(Math.max(bx,bl)+bO-2);if(bQ>0){for(bm in aW){bu=aW[bm].label;if(aW[bm].width>bQ){if(bu.style&&bu.style!==bJ){bJ=bu.style;aS.setStyle(bJ)}bP=aS.getSmartText(bu.text,bQ,a6,true);bu.text=bP.text;aW[bm].height=bP.height;bR=Math.max(bR,bP.width)}else{bR=Math.max(bR,aW[bm].width)}}for(bm in bz){bu=bz[bm].label;if(bz[bm].width>bQ){if(bu.style&&bu.style!==bJ){bJ=bu.style;aS.setStyle(bJ)}bP=aS.getSmartText(bu.text,bQ,a6,true);bu.text=bP.text;bz[bm].height=bP.height;bR=Math.max(bR,bP.width)}else{bR=Math.max(bR,bz[bm].width)}}return(bQ-bR)}else{for(bm in aW){aW[bm].label.text=ak}for(bm in bz){bz[bm].label.text=ak}return 0}},aX=function(bQ,bO,bR){var bP;for(bP in bQ){bQ[bP].label.x=bO;bQ[bP].label.y=bR}};for(bm=0,bd=bg.length;bm<bd;bm+=1){bG(bg[bm],bm)}for(bm=0,bd=bq.length;bm<bd;bm+=1){bG(bq[bm],bm)}if(be.title&&be.title.text!=ak){bJ=be.title.style;aS.setStyle(bJ);aT=aS.getOriSize(al).height;if(bj){aV=a6;aY=bo;bf=aS.getSmartText(be.title.text,aV,aY);bb=bf.height;bA=aT}else{be.title.rotation=0;aV=a3!==undefined?a3:bo;aY=a6;bf=aS.getSmartText(be.title.text,aV,aY);bb=bf.width;bA=aU}}if(bD>0){a2=bD+bi}if(bc){var bk,a1=x(bs.chart.maxlabelwidthpercent,0);if(a1>=1&&a1<=100){bk=(a1*bc/100);if(bx>bk){bx=bk}}}bn=ap(bl,bx);bn+=(bn?a9:0);if(bb>0){bn+=(bb+br+bp)}aZ();a5=bM(0,true);a5=bF(a5,true);a5=bE(a5);a5=bF(a5);bI=a4.verticalAxisNamePadding-br;if(a5&&bI){if(a5>bI){br+=bI;a5-=bI}else{br+=a5;a5=0}}bI=a4.verticalAxisValuesPadding-a9;if(a5&&bI){if(a5>bI){a9+=bI;a5-=bI}else{a9+=a5;a5=0}}bI=a4.verticalAxisValuesPadding-bi;if(a5&&bI){if(a5>bI){bi+=bI;a5-=bI}else{bi+=a5;a5=0}}if(bD>0){a2=bD+bi}bn=ap(bl,bx);bn+=(bn?a9:0);if(bb>0){bn+=(bb+br+bp)}a0=ap(bl,bx);a0+=(a0>0?a9:0);if(bb>0){if(bj){if(bb<bf.height){bf=aS.getSmartText(be.title.text,a6,bb)}}else{if(bb<bf.width){bf=aS.getSmartText(be.title.text,bb,a6)}be.title.y=-((bf.height-aT)/2)}be.title.text=bf.text;be.title.margin=a0+br+bp+(bj?bb-aT:bb/2)}else{be.title.text=ak}bH=-(a9+bN+bh+2);bL=bv+bi+bN+2;ba=ap(bl,bx);if(be.labels.style){bt=parseInt(be.labels.style.fontSize,10)*0.35}if(a7){if(bD>0){aX(bK,bH,bt)}if(ba>0){aX(aW,bL,bt);aX(bz,bL,bt)}}else{if(bD>0){aX(bK,bL,bt)}if(ba>0){aX(aW,bH,bt);aX(bz,bH,bt)}}if(by){bw.chart.marginLeft+=a7?a2:(bn-by);bw.chart.marginRight+=a7?(bn-by):a2}else{bw.chart.marginLeft+=a7?a2:bn;bw.chart.marginRight+=a7?bn:a2}return a2+bn},s=f.titleSpaceManager=function(be,a6,ba,a5){var a8=a6.chart,a1=aO(a8.caption),aV=aO(a8.subcaption),aU,a2=aU=x(a8.captionpadding,10),aW=be[V],a7=aW.smartLabel,a4=false,a3,aQ,bc=0,aZ,a0,bb=0,aR=0,aT=0,aY=0,aS=0,bd=0,a9=be.title,aX=be.subtitle;if(a1!==ak){aZ=a9.style;aT=x(parseInt(aZ.fontHeight,10),parseInt(aZ.lineHeight,10),12);bd=x(parseInt(aZ.fontSize,10),10)}if(aV!==ak){a0=aX.style;aY=x(parseInt(a0.fontHeight,10),parseInt(a0.lineHeight,10),12);aS=x(parseInt(a0.fontSize,10),10)}if(aT>0||aY>0){bc=aT+aY+aU;if(bc>a5){bb=bc-a5;a4=true;if(bb<aU){aU-=bb}else{bb-=aU;aU=0;if(aY>bb){aR=(aY-bb)+10;aY=0}else{bb-=aY;aY=0;if(aT>bb){aR=aT-bb}aT=0;bb=0}}}else{aR=a5-bc}if(aT>0){a7.setStyle(aZ);aT+=aR;a3=a7.getSmartText(a1,ba,aT);aR=aT-a3.height;aT=a3.height;a9.text=a3.text;a9.y=bd}if(aY>0){a7.setStyle(a0);aY+=aR;aQ=a7.getSmartText(aV,ba,aY);aR=aY-aQ.height;aY=aQ.height;aX.text=aQ.text;aX.y=aS+aT}if(a4&&aR>0){aU+=R(a2-aU,aR)}bc=aT+aY+aU;be.chart.marginTop+=bc}return bc},u=f.stepYAxisNames=function(aS,a9,a0,aW,a8,aQ){var a6=0,a5=aW.plotLines,aX=[],aY,aZ,aV=aW.plotLines.length,a3,a2,a1,aR=\"W\",a7=a9[V].smartLabel,aU,aT=parseFloat(Y(a0.basefontsize,10)),a4;for(;a6<aV;a6+=1){a3=a5[a6];if(a3.isGrid&&a3.label&&a3.label.text){aX.push(a3);if(a3.value===0){aY=aX.length-1}}}aV=aX.length;if(aV){if(aW.labels.style){a7.setStyle(aW.labels.style)}else{if(aX[0].label&&aX[0].label.style){a7.setStyle(aW.labels.style)}}aU=a7.getOriSize(aR).height;if(!aQ){aU+=(aT*0.4)}a1=aS/(aV-1);if(a1<aU){a2=Math.max(1,Math.ceil(aU/a1));aZ=aY;for(a6=aY;a6<aV;a6+=1){a3=aX[a6];if(a6===a8){if(((a6-aZ)%a2)&&a4){a4.label.text=\"\"}aZ=a8}if(a3&&a3.label){if((a6-aZ)%a2){a3.label.text=ak}else{a4=a3}}}aZ=aY;for(a6=aY;a6>=0;a6-=1){a3=aX[a6];if(a6===a8){if(((aZ-a6)%a2)&&a4){a4.label.text=\"\"}aZ=a8}if(a3&&a3.label){if((aZ-a6)%a2){a3.label.text=ak}else{a4=a3}}}}}},ah=f.placeHorizontalAxis=function(cf,bK,cb,bn,ct,a9,aX){var ci=cb[V],cG=bn&&bn.chart||{},bO,aU,cH,bq,ba,bc,a0,bW,a5,b5,by,ce=4,aY,bx=0,bE=0,aQ=10,cF=1,cN=0,bQ=0,aV=0,bp=\"W\",b1=false,bt=false,cA=false,cc=x(cG.labelstep,0),cw=x(cG.xaxisminlabelwidth,0),bD=bK.labelDisplay,cB=bK.rotateLabels,b6=bK.horizontalLabelPadding,aS=ci.marginBottomExtraSpace,bh=cb.chart.marginLeft,cM=cb.chart.marginRight,a2=ci.smartLabel,cx=bK.catCount,bJ=bK.slantLabels,bv=ct/(cf.max-cf.min),b3=0,cJ=0,br={w:0,h:0},bY=(bn&&bn.chart)||{},cs=x(bY.updateinterval,bY.refreshinterval)*1000,bg=bY.datastreamurl,b4=Boolean(this.realtimeEnabled&&cs&&(bg!==undefined));if(cf.labels.style){bc=cf.labels.style;a2.setStyle(bc);bW=a2.getOriSize(bp);aQ=bW.height;a0=bW.width+ce;aY=a2.getOriSize(\"WWW\").width+ce}var b2,cy,bf,b9,cD,aZ,bH,a8,bb,cp=[],a7=[],aR,bG=0,cq=0,cL,bR,cE,bP,cv,cz,aW,be=bK.horizontalAxisNamePadding,cl=0,b8=bK.staggerLines,cm=b3,bU=false,bX,bs;if(cf.title&&cf.title.text!=ak){bc=cf.title.style;a2.setStyle(bc);bQ=a2.getOriSize(bp).height;cf.title.rotation=0;bq=a2.getSmartText(cf.title.text,ct,a9);bE=bq.height}if(cb.chart.marginLeft!=parseInt(cG.chartleftmargin,10)){b9=true}if(cb.chart.marginRight!=parseInt(cG.chartrightmargin,10)){cD=true}aZ=ct-aX;switch(bD){case\"none\":cA=true;b1=true;if(cB){if(bJ){bx=300}else{bx=270}bW=aQ;aQ=a0;a0=bW}break;case\"rotate\":if(bJ){bx=300}else{bx=270}bW=aQ;aQ=a0;a0=bW;b1=true;break;case\"stagger\":b1=true;bt=true;a5=Math.floor((a9-bQ)/aQ);if(a5<b8){b8=a5}break;default:if(cB){if(bJ){bx=300}else{bx=270}bW=aQ;aQ=a0;a0=bW}}if(ci.isBar){b1=true}bH=0;a8=cf.plotLines;if(typeof cb._FCconf.isXYPlot===aC&&!ci.isBar){for(aW=a8.length;bH<aW;bH+=1){aU=a8[bH];if(aU){if(aU.isGrid){cp.push(aU)}else{if(aU.isTrend){a7.push(aU)}}}}bb=cf.plotBands;for(bH=0,aW=bb.length;bH<aW;bH+=1){aU=bb[bH];if(aU){a7.push(aU)}}cL=cp.length-1;bR=cp.length;if(bt){if(b8>bR){b8=bR}else{if(b8<2){b8=2}}}if(bR){if(cf.scroll&&cf.scroll.viewPortMin&&cf.scroll.viewPortMax){b2=cf.scroll.viewPortMin;cy=cf.scroll.viewPortMax;b9=false;cD=false}else{b2=cf.min;cy=cf.max}aR=(cp[cL].value-cp[0].value)*bv;cE=aR/(cx-1);bP=(cp[0].value-b2)*bv;cv=(cy-cp[cL].value)*bv;if(bD===\"auto\"){if(cE<aY){if(bJ){bx=300}else{bx=270}bW=aQ;aQ=a0;a0=bW;b1=true}}else{if(bD===\"stagger\"){cE*=b8}}if(a0<cw){a0=cw}if(!bt&&!cA){if(bx){cF=Math.max(1,cc,Math.ceil(aQ/cE))}else{cF=Math.max(1,cc,Math.ceil(a0/cE))}}else{cF=Math.max(1,cc)}if(ci.x){ci.x.stepValue=cF}cE*=cF;b5=(bP+bh)*2;ba=a8[0].label;if(ba&&ba.text){if(ba.style){a2.setStyle(ba.style)}by=Math.min(cE,a2.getOriSize(ba.text).width+ce);if(by>b5){bG=(by-b5)/2}}b5=(cv+cM)*2;ba=a8[cL].label;if(ba&&ba.text){if(ba.style){a2.setStyle(ba.style)}by=Math.min(cE,a2.getOriSize(ba.text).width+ce);if(by>b5){cq=(by-b5)/2}}cz=bG+cq;if(cz>0){if(aZ>cz){bL=(cq*ct)/(cq+ct);bL=bL?bL+4:0;cb.chart.marginRight+=bL;ct-=bL;bL=(bG*ct)/(bG+ct);bL=bL?bL+4:0;cb.chart.marginLeft+=bL;ct-=bL;bv=ct/(cf.max-cf.min)}else{if(bG<cq){if((aZ>=cq)&&cD){bL=(cq*ct)/(cq+ct);bL=bL?bL+4:0;cb.chart.marginRight+=bL;ct-=bL;bv=ct/(cf.max-cf.min)}else{if(b9){bL=(bG*ct)/(bG+ct);bL=bL?bL+4:0;cb.chart.marginLeft+=bL;ct-=bL;bv=ct/(cf.max-cf.min)}}}else{if((aZ>=bG)&&b9){bL=(bG*ct)/(bG+ct);bL=bL?bL+4:0;cb.chart.marginLeft+=bL;ct-=bL;bv=ct/(cf.max-cf.min)}else{if(cD){bL=(cq*ct)/(cq+ct);bL=bL?bL+4:0;cb.chart.marginRight+=bL;ct-=bL;bv=ct/(cf.max-cf.min)}}}}aR=(cp[cL].value-cp[0].value)*bv;cE=aR/(cx-1);if(bt){cE*=b8}if(!bt&&!cA){if(bx){cF=Math.max(1,cc,Math.ceil(aQ/cE))}else{cF=Math.max(1,cc,Math.ceil(a0/cE))}}else{cF=Math.max(1,cc)}if(ci.x){ci.x.stepValue=cF}cE*=cF}for(cH=0;cH<bR;cH+=1){aU=cp[cH];if((cH%cF)&&aU.label){aU.stepped=true;aU.label.style=cf.steppedLabels.style;if(!b4){continue}}else{aU.stepped=false;aU.label.style=cf.labels.style}if(aU&&aU.label&&A(aU.label.text)!==undefined){ba=aU.label;if(ba.style&&ba.style!==bc){bc=ba.style;a2.setStyle(bc)}if(bx&&cA){bO=a2.getOriSize(ba.text);br.w=ap(br.w,bO.width+ce);br.h=ap(br.h,bO.height)}else{if(!cA){if(bx||bt){bO=a2.getOriSize(ba.text)}else{bO=a2.getSmartText(ba.text,(cE-ce),a9,b1)}br.w=ap(br.w,bO.width+ce);br.h=ap(br.h,bO.height)}}}}}for(cH=0,aW=a7.length;cH<aW;cH+=1){aU=a7[cH];if(aU&&aU.label&&A(aU.label.text)!==undefined){ba=aU.label;if(ba.style&&ba.style!==bc){bc=ba.style;a2.setStyle(bc)}bO=a2.getOriSize(ba.text);if(ba.verticalAlign===aj){b3=ap(b3,bO.height)}else{cJ=ap(cJ,bO.height)}}}if(cf.scroll&&cf.scroll.enabled&&!bx&&!cA){bX=br.w/2;if(cb.chart.marginLeft<bX){bs=bX-cb.chart.marginLeft;if(aZ>bs){ct-=bs;aZ-=bs;cb.chart.marginLeft+=bs}}if(cb.chart.marginRight<bX){bs=bX-cb.chart.marginRight;if(aZ>bs){ct-=bs;aZ-=bs;cb.chart.marginRight+=bs}}}}else{var bF={},bj,bo,bk,ca=0,a3=0,bM,bI,bV=null,cu=null,a1,bA,co,b7,bL,bT,cd,bd={},a4,bm,ck,cC,bS,bZ,cK;bU=true;bv=ct/(cf.max-cf.min);var bC=function(cX,cW,cT){var cV,cR,c0,cU,c1,cZ,cP,cY,cS,cQ;cS=cX.plotObj;c1=cX.labelTextWidth;if(!c1){ba=cS.label;if(ba.style&&ba.style!==bc){bc=ba.style;a2.setStyle(bc)}c1=a2.getOriSize(ba.text).width+ce;cX.oriWidth=c1;if(c1>bj){c1=bj}cX.labelTextWidth=c1;cX.leftEdge=(cS.value*bv)-(c1/2);cX.rightEdge=(cS.value*bv)+(c1/2);if(cT){c1=Math.min(c1,2*((aU.value-cf.min)*bv)+cb.chart.marginLeft);cX.labelTextWidth=c1}}if(typeof cW!==aC){cQ=cW.plotObj;ba=cQ.label;if(ba.style&&ba.style!==bc){bc=ba.style;a2.setStyle(bc)}if(cW.oriWidth){cZ=cW.oriWidth}else{cZ=a2.getOriSize(ba.text).width+ce;cW.oriWidth=cZ}if(cZ>bj){cZ=bj}cW.labelTextWidth=cZ;cW.leftEdge=(cQ.value*bv)-(cZ/2);cW.rightEdge=(cQ.value*bv)+(cZ/2);cV=cS.value*bv;cR=cV+(c1/2);cU=cQ.value*bv;c0=cU-(cZ/2);if(c0<cR){if((cV+a0)<(cU-a0)){cP=cR-c0;cY=cU-cV;if(cP>cY){cX.labelTextWidth=Math.min(c1,cY)}else{cX.labelTextWidth=Math.max(a0,(c1-(cP/2)))}cW.labelTextWidth=2*(cY-(cX.labelTextWidth/2));cX.leftEdge=(cS.value*bv)-(cX.labelTextWidth/2);cX.rightEdge=(cS.value*bv)+(cX.labelTextWidth/2);cW.leftEdge=(cQ.value*bv)-(cW.labelTextWidth/2);cW.rightEdge=(cQ.value*bv)+(cW.labelTextWidth/2)}else{cW.labelTextWidth=0;cQ.label.text=ak;return false}}}else{if(cT){c1=Math.min(c1,2*((cf.max-aU.value)*bv)+cb.chart.marginRight);cX.labelTextWidth=c1;cX.leftEdge=(cS.value*bv)-(c1/2);cX.rightEdge=(cS.value*bv)+(c1/2)}}cX.nextCat=cW;return true};if(bt){if(b8>bR){b8=bR}else{if(b8<2){b8=2}}}else{b8=1}for(aW=a8.length;bH<aW;bH+=1){aU=a8[bH];if(aU&&aU.label&&(typeof aU.label.text!==aC)){if(aU.isGrid){bk={plotObj:aU};if(aU.isCat){bI=bH%b8;if(!bF[bI]){bF[bI]=[]}if(!bV){bV=bk;cu=bk;bF[bI].push(bV)}else{cu=bk;bF[bI].push(cu)}}cp.push(bk)}else{if(aU.isTrend){a7.push({plotObj:aU})}}}}bb=cf.plotBands;for(bH=0,aW=bb.length;bH<aW;bH+=1){aU=bb[bH];if(aU&&aU.isTrend&&aU.label&&(typeof aU.label.text!==aC)){a7.push({plotObj:aU})}}if(cp.length){if(!cA&&!bx){if(ci.distributedColumns){var cr,aT;for(bH=0,aW=cp.length;bH<aW;bH+=1){bT=cp[bH];cd=bH%b8;aU=bT.plotObj;if(!aU.label){continue}if(aU.isCat){if(bH-b8>=0){bA=cp[bH-b8];bS=bA.plotObj.value*bv+bA.plotObj._weight*bv/2}else{bA=null;bS=(cf.min*bv)-bh}if(bH+b8<aW){a1=cp[bH+b8];bZ=a1.plotObj.value*bv-a1.plotObj._weight*bv/2}else{a1=null;bZ=(cf.max*bv)+cM}ba=aU.label;if(ba.style&&ba.style!==bc){bc=ba.style;a2.setStyle(bc)}co=aU.value*bv;aT=co-aU._weight*bv/2;cr=co+aU._weight*bv/2;if(b8>1){bm=aT-bS;ck=cr+bZ;cK=cr-aT+Math.min(bm,ck)}else{cK=cr-aT}ba=aU.label;if(ba.style&&ba.style!==bc){a2.setStyle(ba.style)}if(cK<a0&&a0<a2.getOriSize(ba.text).width){aU.label.text=ak;bT.labelTextWidth=0;continue}bT.labelTextWidth=cK;bO=a2.getSmartText(ba.text,(cK-ce),a9,b1);cK=bO.width+ce;bT.labelTextWidth=cK;br.h=Math.max(br.h,bO.height)}}}else{bR=cp.length;cL=cp.length-1;aR=(cp[cL].plotObj.value-cp[0].plotObj.value)*bv;if(aR){bj=aR*0.1;bo=Math.max(aR*0.2,aR/bR)}else{bj=ct;bo=ct}for(cH in bF){bH=0;b7=bF[cH].length;while(bH<b7){bM=bH+1;while(!bC(bF[cH][bH],bF[cH][bM])){bM+=1}bH=bM}}if(bV){a3=((bV.plotObj.value-cf.min)*bv)+bh-(bV.labelTextWidth/2)}aU=cp[0].plotObj;if(!bV||aU!==bV.plotObj){ba=aU.label;if(ba.style&&ba.style!==bc){bc=ba.style;a2.setStyle(bc)}by=a2.getOriSize(ba.text).width+ce;co=((aU.value-cf.min)*bv)+bh;if(bV){bu=a3-co;if((bu<by)&&(bu>(a0/2))){by=bu*2}else{by=0}}cp[0].labelTextWidth=by;if(by>0){bW=co-(by/2)}if(bW<a3){a3=bW}}if(cu){by=cu.labelTextWidth;ca=((cf.max-cu.plotObj.value)*bv)+cM-(by/2)}aU=cp[cL].plotObj;if(!cu||aU!==cu.plotObj){ba=aU.label;if(ba.style&&ba.style!==bc){bc=ba.style;a2.setStyle(bc)}by=a2.getOriSize(ba.text).width+ce;co=((cf.max-aU.value)*bv)+cM;if(cu){bu=co-ca;if((bu<by)&&(bu>(a0/2))){by=bu*2}else{by=0}}cp[cL].labelTextWidth=by;if(by>0){bW=co-(by/2)}if(bW<ca){ca=bW}}if(a3<0){bG=-a3}else{bG=0}if(ca<0){cq=-ca}else{cq=0}cz=bG+cq;if(cz>0){if(aZ>cz){bL=(cq*ct)/(cq+ct);bL=bL?bL+4:0;cb.chart.marginRight+=bL;ct-=bL;bL=(bG*ct)/(bG+ct);bL=bL?bL+4:0;cb.chart.marginLeft+=bL;ct-=bL;bv=ct/(cf.max-cf.min)}else{if(bG<cq){if((aZ>=cq)&&cD){bL=(cq*ct)/(cq+ct);bL=bL?bL+4:0;cb.chart.marginRight+=bL;ct-=bL;bv=ct/(cf.max-cf.min)}else{if(b9){bL=(bG*ct)/(bG+ct);bL=bL?bL+4:0;cb.chart.marginLeft+=bL;ct-=bL;bv=ct/(cf.max-cf.min)}}}else{if((aZ>=bG)&&b9){bL=(bG*ct)/(bG+ct);bL=bL?bL+4:0;cb.chart.marginLeft+=bL;ct-=bL;bv=ct/(cf.max-cf.min)}else{if(cD){bL=(cq*ct)/(cq+ct);bL=bL?bL+4:0;cb.chart.marginRight+=bL;ct-=bL;bv=ct/(cf.max-cf.min)}}}}cM=cb.chart.marginRight;bh=cb.chart.marginLeft;aR=(cp[cL].plotObj.value-cp[0].plotObj.value)*bv;bj=aR*0.1;bo=Math.max(aR*0.2,aR/bR);for(cH in bF){bH=0;b7=bF[cH].length;while(bH<b7){bM=bH+1;while(!bC(bF[cH][bH],bF[cH][bM],true)){bM+=1}bH=bM}cH+=1}}for(bH=0,aW=cp.length;bH<aW;bH+=1){bT=cp[bH];cd=bH%b8;aU=bT.plotObj;if(!aU.label){continue}if(aU.isCat){if(bT.labelTextWidth){bd[cd]=bT}}else{bA=bd[cd];if(bA){a1=bA.nextCat}else{if(bF[cd]){a1=bF[cd][0]}else{a1=null}}a4=null;if(bH>=b8){cj=bH-b8;a4=cp[cj];while(!a4.labelTextWidth){if(cj>=b8){cj-=b8;a4=cp[cj]}else{a4=null;break}}}if(a4){bS=a4.rightEdge}else{bS=(cf.min*bv)-bh}if(a1){bZ=a1.leftEdge}else{bZ=(cf.max*bv)+cM}ba=aU.label;if(ba.style&&ba.style!==bc){bc=ba.style;a2.setStyle(bc)}by=a2.getOriSize(ba.text).width+ce;bf=(aU.value*bv)-(by/2);if(ci.isBar&&(bH==aW-1)&&a4){if(bS>bf){a4.plotObj.label.text=ak;a4.labelTextWidth=0;bS=a4.leftEdge}}else{if((bS>bf)||(bZ<(bf+by))){aU.label.text=ak;bT.labelTextWidth=0;continue}}bS=Math.max(bS,bf);co=aU.value*bv;cK=2*Math.min((co-bS),(bZ-co));ba=aU.label;if(ba.style&&ba.style!==bc){a2.setStyle(ba.style)}if(cK<a0&&a0<a2.getOriSize(ba.text).width){aU.label.text=ak;bT.labelTextWidth=0;continue}bT.labelTextWidth=cK;bO=a2.getSmartText(ba.text,(cK-ce),a9,b1);cK=bO.width+ce;bT.labelTextWidth=cK;bT.leftEdge=co-(cK/2);bT.rightEdge=co+(cK/2);br.h=Math.max(br.h,bO.height)}}var bB=null,cj=null;cC=null,a4=null;for(bH=0,aW=cp.length;bH<aW;bH+=1){bT=cp[bH];aU=bT.plotObj;cd=bH%b8;if(aU.isCat&&bT.labelTextWidth){cC=null,a4=null;co=aU.value*bv;if(bH>=b8){cj=bH-b8;a4=cp[cj];while(!a4.labelTextWidth){if(cj>b8){cj-=b8;a4=cp[cj]}else{a4=null;break}}}if(a4){bm=co-a4.rightEdge}else{bm=co-(cf.min*bv)+cb.chart.marginLeft}if((bH+b8)<aW){bB=bH+b8;cC=cp[bB];while(!cC.labelTextWidth){if((bB+b8)<(aW-1)){bB+=b8;cC=cp[bB]}else{cC=null;break}}}if(cC){ck=cC.leftEdge-co}else{ck=(cf.max*bv)+cb.chart.marginRight-co}cK=Math.min(bm,ck)*2;if(cK>bo){cK=bo}if(cK>bT.oriWidth){cK=bT.oriWidth}bT.labelTextWidth=cK;ba=aU.label;if(ba.style&&ba.style!==bc){a2.setStyle(ba.style)}bO=a2.getSmartText(ba.text,cK-ce,a9,b1);bT.labelTextWidth=bO.width+ce;br.h=Math.max(br.h,bO.height);bT.rightEdge=co+(bT.labelTextWidth/2)}}}}else{if(bx){for(bH=0,aW=cp.length;bH<aW;bH+=1){aU=cp[bH].plotObj;if(aU&&aU.label&&aU.label.text){ba=aU.label;if(ba.style&&ba.style!==bc){bc=ba.style;a2.setStyle(bc)}cH=1;if((bH+cH)<aW){var bi=cp[cH+bH].plotObj;while(bi&&((bi.value-aU.value)*bv)<a0){if(aU.isCat){if(bi.label){bi.label.text=ak;cH+=1;if((cH+bH)>=(aW-1)){break}bi=a8[cH+bH].plotObj}}else{if(bi.isCat){aU.label.text=ak;aU=bi;bH+=(cH-1);ba=aU.label;if(ba.style&&ba.style!==bc){bc=ba.style;a2.setStyle(bc)}break}}}}br.w=Math.max(br.w,(a2.getOriSize(ba.text).width+ce))}}}}}for(cH=0,aW=a7.length;cH<aW;cH+=1){aU=a7[cH].plotObj;if(aU&&aU.label&&A(aU.label.text)!==undefined){ba=aU.label;if(ba.style&&ba.style!==bc){bc=ba.style;a2.setStyle(bc)}bO=a2.getOriSize(ba.text);if(ba.verticalAlign===aj){b3=ap(b3,bO.height)}else{cJ=ap(cJ,bO.height)}}}}if(cA){cl=aQ;if(bx){cl=br.w}}else{if(bx){cl=br.w}else{if(bt){cl=b8*aQ}else{cl=br.h}}}if(cl>0){cm+=b6+cl}if(bE>0){cm+=bE+be}var bu,ch=cJ+cm+2;bW=0;if(ch>a9){bu=ch-a9;if(be>bu){be-=bu;bu=0}else{bu-=be;be=0;if(b6>bu){b6-=bu;bu=0}else{bu-=b6;b6=0}}if(cJ>bu){cJ-=bu;bu=0}else{if(cJ>0){bu-=cJ;cJ=0}if(bu>0){if(b3>bu){b3-=bu;bu=0}else{if(b3>0){bu-=b3;b3=0}if(bu>0){if((bW=bE-bQ)>bu){bE-=bu;bu=0}else{bu-=bW;bE=bQ;if(bu>0){if((bW=cl-aQ)>bu){cl-=bu;bu=0}else{bu-=bW;cl=aQ;if(bu>0){bu-=bE+be;bE=0;if(bu>0){bu-=cl;cl=0;if(bu>0){b6-=bu}}}}}}}}}}}b6+=aS;var cO=ci.is3d?-cb.chart.xDepth:0,b0=cl+b6,a6,bz,bw,bl,cI=cO,cn=aQ*0.5;cN=aQ+b6,aW=cp.length;aV=0;if(!bU){if(bx){bw=cE;bl=cl-ce;a6=ao;if(bJ){bz=b6+8}else{bz=b6+4}}else{if(bt){bw=aQ;bl=cE-ce;a6=q}else{bw=cl;bl=cE-ce;a6=q;bz=cN}}for(cH=0;cH<aW;cH+=cF){aU=cp[cH];if(aU&&aU.label&&A(aU.label.text)!==undefined){ba=aU.label;if(ba.style&&ba.style!==bc){bc=ba.style;a2.setStyle(bc)}if(!cA){bO=a2.getSmartText(ba.text,bl,bw,b1);ba.text=bO.text;if(bt){bz=cN+((aV%b8)*aQ)}if(bx){cI=cO+(cn/2)}}ba.y=bz;ba.x=cI;ba.rotation=bx;ba.textAlign=a6;aV+=1}}bK._labelY=cN;bK._labelX=cO;bK._yShipment=bz;bK._isStagger=bt;bK._rotation=bx;bK._textAlign=a6;bK._adjustedPx=cn/2;bK._staggerLines=b8;bK._labelHeight=aQ}else{if(bx){a6=ao;if(bJ){bz=b6+8}else{bz=b6+4}aW=cp.length;for(cH=0;cH<aW;cH+=1){aU=cp[cH].plotObj;if(aU&&aU.label&&A(aU.label.text)!==undefined){ba=aU.label;if(ba.style&&ba.style!==bc){bc=ba.style;a2.setStyle(bc)}bH=1;bO=a2.getSmartText(ba.text,cl-4,a0,b1);ba.text=bO.text;cI=cO+(cn/2);ba.y=bz;ba.x=cI;ba.rotation=bx;ba.textAlign=a6;aV+=1}}}else{bw=cl;a6=q;bz=cN;for(cH=0;cH<aW;cH+=cF){aU=cp[cH].plotObj;if(aU&&aU.label&&A(aU.label.text)!==undefined){ba=aU.label;if(ba.style&&ba.style!==bc){bc=ba.style;a2.setStyle(bc)}if(!cA){bO=a2.getSmartText(ba.text,cp[cH].labelTextWidth-4,bw,b1);ba.text=bO.text;if(bt){bz=cN+((aV%b8)*aQ)}}ba.y=bz;ba.x=cI;ba.rotation=bx;ba.textAlign=a6;aV+=1}}}}aW=a7.length;var bN=0,cg=0;for(cH=0;cH<aW;cH+=1){aU=a7[cH].plotObj?a7[cH].plotObj:a7[cH];if(aU&&aU.label&&A(aU.label.text)!==undefined){ba=aU.label;if(ba.style&&ba.style!==bc){bc=ba.style;a2.setStyle(bc)}if(ba.verticalAlign===aj){bO=a2.getSmartText(ba.text,ct,b3,true);cg=Math.max(cg,bO.height);ba.text=bO.text;ba.y=b0+a2.getOriSize(bp).height;ba.x=cI}else{bO=a2.getSmartText(ba.text,ct,cJ,true);bN=Math.max(bN,bO.height);ba.text=bO.text;ba.y=-((cJ-a2.getOriSize(bp).height)+b6+2)}}}if(bE>0){a2.setStyle(cf.title.style);bq=a2.getSmartText(cf.title.text,ct,bE);cf.title.text=bq.text;cf.title.margin=b0+cg+be}if(cb.attrGrid&&cb.attrGrid.enabled){cb.attrGrid.marginTop=b0+cg+(cb.attrGrid.rowPadding||2.5)}cm=cg;if(cl>0){ci.horizontalAxisHeight=b6+cl-aS;cm+=ci.horizontalAxisHeight}if(bE>0){cm+=bE+be}cb.chart.marginBottom+=cm;if(bN>0){cb.chart.marginTop+=bN;cm+=bN}if(cf.opposite){cb.chart.marginTop+=cm;cb.chart.marginBottom-=cm;cb.xAxis.opposite=1;for(aW=a8.length,bH=0;bH<aW;bH+=1){aU=a8[bH];if(aU&&aU.isGrid&&(ba=aU.label)&&ba.text!==undefined){ba.textAlign=e;ba.y-=bz+b6+4}}}return cm},aa=f.configureLegendOptions=function(bc,aW,a9,a1,aU){var aX=bc.legend,a5=bc.chart,aS=a5.paletteIndex,aZ=a5.is3D,aT,ba=aZ?I.chart3D:I.chart2D,a7,a3,a6,bb=a5.useRoundEdges,a2=4,aY,a4=2*a2,a8=x(aW.legendiconscale,1),aV=parseInt(aX.itemStyle.fontSize,10)||10,a0=aV+1,aR=bc.chart.defaultSeriesType,aQ=3;if(a8<=0||a8>5){a8=1}aX.padding=a2;if(a0<=0){a0=1}aU-=a4;a0*=a8;aQ*=a8;a0=Math.min(a0,aU);if(a0<=0){aQ=a0=0}aX.symbolWidth=a0;aX.symbolPadding=aQ;aX.textPadding=4;aX.legendHeight=aY=a0+(2*aQ);aX.rowHeight=Math.max(parseInt(aX.itemStyle.lineHeight,10)||12,aY);if(a9){aX.align=ao;aX.verticalAlign=\"middle\";aX.layout=\"vertical\"}else{aX.x=(a5.marginLeft-a5.spacingLeft-a5.marginRight+a5.spacingRight)/2}aT=N(aW.legendbordercolor,aN[ba.legendBorderColor][aS]);a3=x(aW.legendborderalpha,100);a6=x(aW.legendbgalpha,100);aX.backgroundColor=l(N(aW.legendbgcolor,aN[ba.legendBgColor][aS]),a6);aX.borderColor=l(aT,a3);aX.borderWidth=x(aW.legendborderthickness,!bb||aW.legendbordercolor?1:0);aX.shadow=Boolean(x(aW.legendshadow,1));if(aX.shadow){aX.shadow={enabled:aX.shadow,opacity:ap(a3,a6)/100}}aX.reversed=Boolean(x(aW.reverselegend,0));if(/^pie|pie3d$/.test(aR)){aX.reversed=!aX.reversed}aX.style={padding:a2};a7=Boolean(x(aW.interactivelegend,1));if(!a7){bc.plotOptions.series.events.legendItemClick=ai;aX.itemStyle.cursor=\"default\";aX.itemHoverStyle={cursor:\"inherit\"}}else{aX.symbolStyle={_cursor:\"hand\",cursor:\"pointer\"}}aX.borderRadius=x(aW.legendborderradius,bb?3:0);aX.legendAllowDrag=Boolean(x(aW.legendallowdrag,0));aX.title.text=aO(c(aW.legendcaption,ak));aX.legendScrollBgColor=aB(N(aW.legendscrollbgcolor,aN.altHGridColor[bc.chart.paletteIndex]));aX.legendScrollBarColor=N(aW.legendscrollbarcolor,aT);aX.legendScrollBtnColor=N(aW.legendscrollbtncolor,aT);aX.title.style=T({fontWeight:\"bold\"},aX.itemStyle)},S=f.placeLegendBlockRight=function(bi,a6,aR,aV,a1){aa(bi,a6.chart,true,a1,aR);var a9=0,aT=bi.series,ba,be,bd=bi[V].smartLabel,aU=bi.legend,bb,aW,a8=aU.textPadding,aY=aU.title.padding,a3,a0=aU.symbolWidth,aQ=aU.symbolPadding,aX=a0+(2*aQ),bc=aV*2,a5=2,aS=0,aZ=x(a6.chart.legendpadding,7)+(aU.borderWidth/2)+1,a2=aU.padding,a4=2*a2,bh={width:a4,height:a4},bg=false,bf=[],a7;aR-=a4;if(a1){aT=aT&&aT[0]&&aT[0].data}if(typeof aT===aC||typeof aT.length===aC){return 0}else{ba=aT.length;for(a9=0;a9<ba;a9+=1){a7=aT[a9];if(a7&&a7.showInLegend!==false){a7.__i=a9;bf.push(a7)}}bf.sort(function(bk,bj){return(bk.legendIndex-bj.legendIndex)||(bk.__i-bj.__i)});ba=bf.length}aW=aR-aX-a5-a8;if(aW<0){aW=0}bd.setStyle(aU.itemStyle);for(a9=0;a9<ba;a9+=1){be=bf[a9];bg=true;if(aW===0){bh.height+=aX;be.name=ak}else{bb=bd.getSmartText(be.name,aW,bc);be.name=bb.text;bh.height+=Math.max(bb.height,aX);aS=Math.max(bb.width,aS)}}if(bg){aU.width=aS+aX+a5+a8+a4;if(aU.title.text!==ak){bd.setStyle(aU.title.style);bb=bd.getSmartText(aU.title.text,aR,bc);aU.title.text=bb.text;a3=bb.width+a4;if(aU.width<a3){aU.initialItemX=(a3-aU.width)/2;aU.width=a3}bh.height+=bb.height+aY}aU.height=aU.totalHeight=bh.height;if(aU.height>aV){aU.height=aV;aU.scroll.enabled=true;aU.width+=(aU.scroll.scrollBarWidth=10)+(aU.scroll.scrollBarPadding=2)}aZ=Math.min(aU.width+aZ,aR);bi.chart.marginRight+=aZ;return aZ}else{aU.enabled=false;return 0}},r=f.placeLegendBlockBottom=function(bq,bp,aX,a5,a2){aa(bq,bp.chart,false,a2,aX);var bv=0,bx=bq.series,ba,bi,aQ=bq[V].smartLabel,aR=bq.legend,a4,a3,bl=aR.textPadding,bo=aR.title.padding,bb,a9=aR.symbolPadding,aV=aR.legendHeight,a6=bp.chart,be=0,aT=a5*2,bh=2,aU=aR.rowHeight,bn=[],aW=x(a6.minimisewrappinginlegend,0),aZ=x(parseInt(a6.legendnumcolumns,10),0),bf=0,a0=0,bd=0,aS=0,bj=0,bu=aR.padding,bg=2*bu,bw=x(bp.chart.legendpadding,7)+(aR.borderWidth/2)+1,bm={width:bg,height:bg},br=false,bs,a7=[];if(aZ<0){aZ=0}aX-=bg;aQ.setStyle(aR.itemStyle);var a8=aQ.getSmartText(al).height;bw=Math.min(bw,a5-a8-8);a5-=bw;if(a2){bx=bx&&bx[0]&&bx[0].data}if(typeof bx===aC||typeof bx.length===aC){return 0}else{ba=bx.length;for(bv=0;bv<ba;bv+=1){bs=bx[bv];if(bs&&bs.showInLegend!==false){bs.__i=bv;a7.push(bs)}}a7.sort(function(bz,by){return(bz.legendIndex-by.legendIndex)||(bz.__i-by.__i)});ba=a7.length}aQ.setStyle(aR.itemStyle);for(bv=0;bv<ba;bv+=1){br=true;a4=aQ.getOriSize(a7[bv].name);bf=Math.max(bf,a4.width);a0+=a4.width;bd+=1}aS=a0/bd;if(br){aS+=aV+bh+bl;bf+=aV+bh+bl;if(aZ>0&&bd<aZ){aZ=bd}if(aZ>0&&(bj=aX/aZ)>aS){if(bj>bf){bj=bf}}else{if(aX>bf&&(aW||aS*1.5>bf)){aZ=Math.floor(aX/bf);if(bd<aZ){aZ=bd}bj=bf}else{if(aX>=2*aS){aZ=Math.floor(aX/aS);if(bd<aZ){aZ=bd}bj=Math.floor(aX/aZ);if(bj>bf){bj=bf}}else{aZ=1;bj=aX}}}aR.itemWidth=bj;a3=bj-aV-bh-bl;if(a3<0){a9=a3=bl=0}aR.symbolPadding=a9;aR.textPadding=bl;aR.width=(bj*aZ)+bg;if(aR.title.text!==ak){aQ.setStyle(aR.title.style);a4=aQ.getSmartText(aR.title.text,aX,aT);aR.title.text=a4.text;bb=a4.width+bg;if(aR.width<bb){aR.initialItemX=(bb-aR.width)/2;aR.width=bb}be=a4.height+bo}aQ.setStyle(aR.itemStyle);var bk,a1,bt,bc=0,aY;if(aR.reversed){a7.reverse()}for(bv=0;bv<ba;bv+=1){bi=a7[bv];if(a3===0){bn[bc]=true;bi.name=ak}else{a4=aQ.getSmartText(bi.name,a3,aT);bi.name=a4.text;while(bn[bc]===true){bc+=1}a1=a4.height/aU;aY=bc;for(bt=0;bt<a1;bt+=1,aY+=aZ){bn[aY]=true}}bc+=1}bk=Math.ceil(bn.length/aZ);bm.height+=(bk*aU)+be;aR.height=aR.totalHeight=bm.height;aR.rowHeight=aU;aR.legendNumColumns=aZ;if(aR.height>a5){aR.height=a5;aR.scroll.enabled=true;aR.width+=(aR.scroll.scrollBarWidth=10)+(aR.scroll.scrollBarPadding=2)}bw+=aR.height;bq.chart.marginBottom+=bw;return bw}else{aR.enabled=false;return 0}},Q=function(aR,aQ){return aR.value-aQ.value},aK=function(bl,bc,a9,a6){var a2=bl[V],ba,aU,a3=true,aZ=0,aX=0,bi,aW=bc.chart,a0=false,aY,bg,be,aV=a2.marginLeftExtraSpace,aT=a2.marginTopExtraSpace,bb=a2.marginBottomExtraSpace,a5=a2.marginRightExtraSpace,a7=a9-(aV+a5+bl.chart.marginRight+bl.chart.marginLeft),aR=a6-(bb+bl.chart.marginBottom+bl.chart.marginTop),bj=a7*0.3,bm=aR*0.3,aQ=a7-bj,bf=aR-bm,bk=N(aW.legendposition,aj).toLowerCase();if(bl.legend.enabled&&bk===ao){aQ-=this.placeLegendBlockRight(bl,bc,aQ/2,aR)}aY=x(aW.yaxisnamepadding,5);bg=x(aW.yaxisvaluespadding,aW.labelypadding,2);be=aW.rotateyaxisname!==a;if(a2.isDual){a0=true;ba=a2[1];ba.verticalAxisNamePadding=aY;ba.verticalAxisValuesPadding=bg;ba.rotateVerticalAxisName=be;ba.verticalAxisNameWidth=x(aW.syaxisnamewidth);a3=bl.yAxis[1].opposite;aQ-=aE(bl.yAxis[1],ba,bl,bc,aR,aQ/2,a3,a0)}ba=a2[0];ba.verticalAxisNamePadding=aY;ba.verticalAxisValuesPadding=bg;ba.rotateVerticalAxisName=be;ba.verticalAxisNameWidth=x(a0?aW.pyaxisnamewidth:aW.yaxisnamewidth);aQ-=aE(bl.yAxis[0],ba,bl,bc,aR,aQ,!a3,a0);aQ-=aM(bl,bc,aQ,bl.yAxis[0],bl.yAxis[1]);bi=aQ+bj;if(bl.legend.enabled&&bk!==ao){bf-=this.placeLegendBlockBottom(bl,bc,bi,bf/2)}bf-=aZ=s(bl,bc,bi,bf/2);ba=a2.x;ba.horizontalAxisNamePadding=x(aW.xaxisnamepadding,5);ba.horizontalLabelPadding=x(aW.labelpadding,aW.labelxpadding,2);ba.labelDisplay=N(aW.labeldisplay,\"auto\").toLowerCase();ba.rotateLabels=x(aW.rotatelabels,aW.rotatexaxislabels,0);ba.staggerLines=x(aW.staggerlines,2);ba.slantLabels=x(aW.slantlabels,aW.slantlabel,0);this.xAxisMinMaxSetter(bl,bc,bi);bf-=this.placeHorizontalAxis(bl.xAxis,ba,bl,bc,bi,bf,bj);bf-=m(bl,bc,bf,bl.xAxis);if(a0){u((bm+bf),bl,aW,bl.yAxis[1],a2[1].lYLblIdx);ar(bl,bl.yAxis[1].title,bf)}u((bm+bf),bl,aW,bl.yAxis[0],a2[0].lYLblIdx);ar(bl,bl.yAxis[0].title,bf);if(bl.legend.enabled&&bk===ao){var aS=bl.legend,bh,a8=bm+bf;if(aS.height>a8){if(aS.type===\"gradient\"){}else{aS.height=a8;aS.scroll.enabled=true;bh=(aS.scroll.scrollBarWidth=10)+(aS.scroll.scrollBarPadding=2);aS.width+=bh;bl.chart.marginRight+=bh}}}var bd=((bl.chart.marginLeft-x(bl.chart.spacingLeft,0))-(bl.chart.marginRight-x(bl.chart.spacingRight,0)))/2,a4=bl.chart.marginLeft-x(bl.chart.spacingLeft,0),a1=-(bl.chart.marginRight-x(bl.chart.spacingRight,0));switch(bl.title.align){case\"left\":bl.title.x=a4;break;case\"right\":bl.title.x=a1;break;default:bl.title.x=bd}switch(bl.subtitle.align){case\"left\":bl.subtitle.x=a4;break;case\"right\":bl.subtitle.x=a1;break;default:bl.subtitle.x=bd}bl.chart.marginLeft+=aV;bl.chart.marginTop+=aT;bl.chart.marginBottom+=bb;bl.chart.marginRight+=a5},ax=function(bk,bc,a9,a6){var a2=bk[V],aQ,be,ba,aV,aZ=0,aY=0,bg,aX=bc.chart,bi,a0=false,a4,aR,bj,aW=a2.marginLeftExtraSpace,aU=a2.marginTopExtraSpace,bb=a2.marginBottomExtraSpace,a5=a2.marginRightExtraSpace,a7=a9-(aW+a5+bk.chart.marginRight+bk.chart.marginLeft),aS=a6-(bb+bk.chart.marginBottom+bk.chart.marginTop),bh=a7*0.3,bl=aS*0.3;aQ=a7-bh;be=aS-bl;bi=N(aX.legendposition,aj).toLowerCase();if(bk.legend.enabled&&bi===ao){aQ-=this.placeLegendBlockRight(bk,bc,aQ/2,aS)}a4=x(aX.xaxisnamepadding,5);aR=x(aX.labelpadding,2);bj=aX.rotatexaxisname!==a;ba=a2.x;ba.verticalAxisNamePadding=a4;ba.verticalAxisValuesPadding=aR;ba.rotateVerticalAxisName=bj;ba.verticalAxisNameWidth=x(a0?aX.pxaxisnamewidth:aX.xaxisnamewidth);aQ-=aE(bk.xAxis,ba,bk,bc,aS,aQ,false,false,a7);aQ-=aM(bk,bc,aQ,bk.xAxis);bg=aQ+bh;if(bk.legend.enabled&&bi!==ao){be-=this.placeLegendBlockBottom(bk,bc,bg,be/2)}be-=aZ=s(bk,bc,bg,be/2);ba=a2[0];ba.horizontalAxisNamePadding=x(aX.yaxisnamepadding,5);ba.horizontalLabelPadding=x(aX.yaxisvaluespadding,2);ba.labelDisplay=\"auto\";ba.staggerLines=x(aX.staggerlines,2);ba.slantLabels=x(aX.slantlabels,0);this.xAxisMinMaxSetter(bk,bc,bg);be-=this.placeHorizontalAxis(bk.yAxis[0],ba,bk,bc,bg,be,bh);be-=m(bk,bc,be,bk.yAxis[0]);u((bl+be),bk,aX,bk.xAxis,a2.x.lYLblIdx,true);ar(bk,bk.xAxis.title,be);if(bk.legend.enabled&&bi===ao){var aT=bk.legend,bf,a8=bl+be;if(aT.height>a8){aT.height=a8;aT.scroll.enabled=true;bf=(aT.scroll.scrollBarWidth=10)+(aT.scroll.scrollBarPadding=2);aT.width+=bf;bk.chart.marginRight+=bf}aT.y=20}var bd=((bk.chart.marginLeft-x(bk.chart.spacingLeft,0))-(bk.chart.marginRight-x(bk.chart.spacingRight,0)))/2,a3=bk.chart.marginLeft-x(bk.chart.spacingLeft,0),a1=-(bk.chart.marginRight-x(bk.chart.spacingRight,0));switch(bk.title.align){case\"left\":bk.title.x=a3;break;case\"right\":bk.title.x=a1;break;default:bk.title.x=bd}switch(bk.subtitle.align){case\"left\":bk.subtitle.x=a3;break;case\"right\":bk.subtitle.x=a1;break;default:bk.subtitle.x=bd}bk.chart.marginLeft+=aW;bk.chart.marginTop+=aU;bk.chart.marginBottom+=bb;bk.chart.marginRight+=a5},ar=f.adjustVerticalAxisTitle=function(aS,aT,aR){if(!aT||!aT.text){return}var aY=aT.text,aU=aS[V],aW=aU.smartLabel,aQ,aX=2*Math.min(aS.chart.marginTop,aS.chart.marginBottom)+aR,aV=aR+aS.chart.marginTop+aS.chart.marginBottom;if(aT.style){aW.setStyle(aT.style)}aQ=aW.getOriSize(aY);if(aT.rotation==\"0\"){if(aQ.height>aX){aT.y=((aV/2)-((aR/2)+aS.chart.marginTop))/2}}else{if(aQ.width>aX){aT.y=((aV/2)-((aR/2)+aS.chart.marginTop))}}},m=f.adjustVerticalCanvasMargin=function(aR,aZ,aU,aQ){var aT=aZ.chart,a1=0,a2=0,aX=0,a3=x(aT.canvastopmargin,0),aS=x(aT.canvasbottommargin,0),aW=a3+aS,a0=a3/aW,aV=1-a0,aY=aR.chart.marginTop,a4=aR.chart.marginBottom;if(aS>a4){a1+=(aS-a4)}if(a3>aY){a1+=(a3-aY)}if(a1>aU){if(a3>aY&&aS>a4){a2=(aU*a0);aX=(aU*aV)}else{if(a3>aY){a2=aU}else{aX=aU}}}else{if(a1>0){if(aS>a4){aX=(aS-a4)}if(a3>aY){a2=(a3-aY)}}}if(a2){aR.chart.marginTop+=a2}if(aX){aR.chart.marginBottom+=aX;if(aQ&&aQ.title){aQ.title.margin+=aX}}return(a2+aX)},aM=f.adjustHorizontalCanvasMargin=function(aR,aY,a3,aT,a2){var aU=aY.chart,a0=x(aU.canvasleftmargin,0),aZ=x(aU.canvasrightmargin,0),aV=a0+aZ,aX=a0/aV,aS=1-aX,a1=0,aQ=aR.chart.marginLeft,a4=aR.chart.marginRight,aW=0,a5=0;if(a0>aQ){a1+=(a0-aQ)}if(aZ>a4){a1+=(aZ-a4)}if(a1>a3){if(a0>aQ&&aZ>a4){aW=(a3*aX);a5=(a3*aS)}else{if(aZ>a4){a5=a3}else{aW=a3}}}else{if(a1>0){if(a0>aQ){aW=(a0-aQ)}if(aZ>a4){a5=(aZ-a4)}}}if(aW){aR.chart.marginLeft+=aW;if(aT&&aT.title){aT.title.margin+=aW}}if(a5){aR.chart.marginRight+=a5;if(a2&&a2.title){a2.title.margin+=a5}}return(a5+aW)},M=function(ba,a2,a8,a6){var a1=ba[V],aQ=a1.isBar,a3=a1.is3d,a0=ba.chart.rotateValues&&!aQ?270:0;if(this.isStacked&&a1.showStackTotal){var aT=a1.plotSpacePercent,aR,aY,aU,bg=1-aT,be,a7,bd,bh,aW,a5,aV,aZ,a9,aS,bb=T({},ba.plotOptions.series.dataLabels.style),aX=parseFloat(bb.fontSize),bc,a4=a1[0],bf=!a4.stacking100Percent;bb.color=ba.plotOptions.series.dataLabels.color;aU=a4.stack;for(aR in aU){aY=aU[aR].length;be=bg/aY;bd=-(bg-be)/2;for(a7=0;a7<aY;a7+=1,bd+=be){aV=aU[aR][a7];for(a5=0,aW=aV.length;a5<aW;a5+=1){aZ=aV[a5];bh=a5;aS=bh+bd;a9=(aZ.n||0)+(aZ.p||0);bc=a9<0?aZ.n:aZ.p;ba.xAxis.plotLines.push({value:aS,width:0,isVline:bf,isTrend:!bf,zIndex:4,label:{align:q,textAlign:!a3&&a0===270?(a9<0?ao:e):(aQ?a9<0?ao:e:q),offsetScale:bf?bc:undefined,offsetScaleIndex:0,rotation:a0,style:bb,verticalAlign:av,y:aQ?0:(a9<0?(a0===270?4:aX):-4),x:0,text:a1.numberFormatter.yAxis(a9)}})}}}}};aJ(\"base\",{useScaleRecursively:true,tooltipConstraint:\"chart\",draw:function(aQ,aT){var aS=this,aR=new Date();aS.drawingLatency=aS.drawingLatency||0;return new B.Chart(aQ,function(){aS.drawingLatency=(new Date())-aR;aT&&aT.apply(this,arguments)})},init:function(aR,aQ){var aT=this,a0=aT.chartInstance||arguments[2],aZ=a0.jsVars,aV=aZ._reflowData||(aZ._reflowData={}),aY=aZ._reflowClean,aX,aW,aU,aS;aT.dataObj=aQ=T({},aQ);aU=aQ.chart=(aQ.chart||aQ.graph||aQ.map||{});delete aQ.graph;delete aQ.map;if(aV&&!aT.stateless){aX=aV.hcJSON;delete aV.hcJSON;T(aT,aV,true);aT.preReflowAdjustments&&aT.preReflowAdjustments.call(this);aV.hcJSON=aX;aX=null}aT.containerElement=aR;aT.config={};aT.smartLabel=new v(a0.id,document.getElementsByTagName(\"body\")[0]||aR,x(aU.useellipseswhenoverflow,aU.useellipsewhenoverflow,1));aT.linkClickFN=au(aQ,a0);aT.numberFormatter=new o(aQ.chart,aT);if(!aT.standaloneInit){return new f.createDialog(aR,aZ.msgStore.ChartNotSupported)}aS=aT.chart(aR.offsetWidth||parseFloat(aR.style.width),aR.offsetHeight||parseFloat(aR.style.height),a0);if(aV&&!aT.stateless){if(aV.hcJSON){T(aS,aV.hcJSON,true)}aT.postReflowAdjustments&&aT.postReflowAdjustments.call(this);if(aY&&aT.cleanedData){aT.cleanedData(aT,aY);aT.cleanedData(aV,aY)}}return aS},chart:function(b7,a9){var cp=this,bq=cp.name,aQ=cp.dataObj,cg=aQ.chart,bN,bn,cc,bk,bi,aS,a0,bb=cp.defaultSeriesType,bU,b5,b2,bm,bz,aU,cf,bR,co;bN=Z(aQ,b7,a9,this);co=bN.chart;bR=bN.xAxis;bU=bN[V];if(cp.postHCJSONCreation){cp.postHCJSONCreation.call(cp,bN)}bN.labels.smartLabel=aS=bU.smartLabel=this.smartLabel;bU.width=b7;bU.height=a9;b2=bN.plotOptions;bU.isDual=this.isDual;bU.numberFormatter=this.numberFormatter;bU.axisGridManager=new P(bb,cg);co.is3D=bn=bU.is3d=/3d$/.test(bb);co.isBar=b5=bU.isBar=this.isBar;a0=/^pie/.test(bb);cf=cg.useroundedges==1,aU=bn?I.chart3D:I.chart2D;co.events.click=bN.plotOptions.series.point.events.click=this.linkClickFN;co.defaultSeriesType=bb;var bQ=cg.palette>0&&cg.palette<6?cg.palette:x(this.paletteIndex,1);bQ-=1;co.paletteIndex=bQ;co.usePerPointLabelColor=cg.colorlabelsfromplot==g;co.useRoundEdges=(cf&&!bn&&!this.distributedColumns&&this.defaultSeriesType!==\"pie\");if(N(cg.clickurl)!==undefined){co.link=cg.clickurl;co.style.cursor=\"pointer\";bN.plotOptions.series.point.events.click=function(){co.events.click.call({link:cg.clickurl})}}var a5=N(cg.basefont,\"Verdana\"),bV=Y(cg.basefontsize,10),bF=N(cg.basefontcolor,aN[aU.baseFontColor][bQ]),bX=N(cg.outcnvbasefont,a5),bM=Y(cg.outcnvbasefontsize,bV),bB=bM+ab,bE=N(cg.outcnvbasefontcolor,bF).replace(/^#?([a-f0-9]+)/ig,\"#$1\"),aT,bA,bP;bV=bV+ab;bF=bF.replace(/^#?([a-f0-9]+)/ig,\"#$1\");bU.trendStyle=bU.outCanvasStyle={fontFamily:bX,color:bE,fontSize:bB};aT=W(bU.trendStyle);bU.inCanvasStyle={fontFamily:a5,fontSize:bV,color:bF};bA=W(bU.inCanvasStyle);bU.divlineStyle={fontFamily:a5,fontSize:bV,color:bF,lineHeight:bA};bR.labels.style={fontFamily:bX,fontSize:bB,lineHeight:aT,color:bE};bR.steppedLabels.style={fontFamily:bX,fontSize:bB,lineHeight:aT,color:bE,visibility:\"hidden\"};bN.yAxis[0].labels.style={fontFamily:bX,fontSize:bB,lineHeight:aT,color:bE};bN.yAxis[1].labels.style={fontFamily:bX,fontSize:bB,lineHeight:aT,color:bE};bN.legend.itemStyle={fontFamily:bX,fontSize:bB,lineHeight:aT,color:bE};bN.legend.itemHiddenStyle={fontFamily:bX,fontSize:bB,lineHeight:aT};bN.plotOptions.series.dataLabels.style={fontFamily:a5,fontSize:bV,lineHeight:bA,color:bF};bN.plotOptions.series.dataLabels.color=bN.plotOptions.series.dataLabels.style.color;bN.tooltip.style={fontFamily:a5,fontSize:bV,lineHeight:bA,color:bF};bN.title.style={fontFamily:bX,color:bE,fontSize:(bM+3)+ab,fontWeight:x(cg.captionfontbold)===0?\"normal\":\"bold\"};W(bN.title.style);bN.subtitle.style={fontFamily:bX,color:bE,fontSize:(bM+x(this.subTitleFontSizeExtender,1))+ab,fontWeight:A(this.subTitleFontWeight,\"bold\")};W(bN.subtitle.style);bR.title.style={fontFamily:bX,color:bE,fontSize:bB,fontWeight:x(cg.subcaptionfontbold)===0?\"normal\":\"bold\"};bP=W(bR.title.style);bN.yAxis[0].title.style={fontFamily:bX,color:bE,fontSize:bB,lineHeight:bP,fontWeight:\"bold\"};bN.yAxis[1].title.style={fontFamily:bX,color:bE,fontSize:bB,lineHeight:bP,fontWeight:\"bold\"};bN.orphanStyles={defaultStyle:{style:T({},bU.inCanvasStyle)}};this.parseStyles(bN);delete bN.xAxis.labels.style.backgroundColor;delete bN.xAxis.labels.style.borderColor;delete bN.yAxis[0].labels.style.backgroundColor;delete bN.yAxis[0].labels.style.borderColor;delete bN.yAxis[1].labels.style.backgroundColor;delete bN.yAxis[1].labels.style.borderColor;bU.showTooltip=x(cg.showtooltip,this.showtooltip,1);bU.tooltipSepChar=N(cg.tooltipsepchar,this.tooltipsepchar,aP);bU.showValues=x(cg.showvalues,this.showValues,1);bU.seriesNameInToolTip=x(cg.seriesnameintooltip,1);bU.showVLines=x(cg.showvlines,1);bU.showVLinesOnTop=x(cg.showvlinesontop,0);bU.showVLineLabels=x(cg.showvlinelabels,this.showVLineLabels,1);bU.showVLineLabelBorder=x(cg.showvlinelabelborder,1);bU.rotateVLineLabels=x(cg.rotatevlinelabels,0);bU.vLineColor=N(cg.vlinecolor,\"333333\");bU.vLineThickness=N(cg.vlinethickness,1);bU.vLineAlpha=x(cg.vlinealpha,80);bU.vLineLabelBgColor=N(cg.vlinelabelbgcolor,\"ffffff\");bU.vLineLabelBgAlpha=x(cg.vlinelabelbgalpha,bn?50:100);bU.trendlineColor=N(cg.trendlinecolor,\"333333\");bU.trendlineThickness=N(cg.trendlinethickness,1);bU.trendlineAlpha=x(cg.trendlinealpha);bU.showTrendlinesOnTop=N(cg.showtrendlinesontop,0);bU.trendlineValuesOnOpp=N(cg.trendlinevaluesonopp,cg.trendlinevaluesonright,0);bU.trendlinesAreDashed=x(cg.trendlinesaredashed,0);bU.trendlinesDashLen=x(cg.trendlinedashlen,5);bU.trendlinesDashGap=x(cg.trendlinedashgap,2);bU.showTrendlines=x(cg.showtrendlines,1);bU.showTrendlineLabels=x(cg.showtrendlinelabels,this.showTrendlineLabels,1);bN.plotOptions.series.connectNullData=x(cg.connectnulldata,0);co.backgroundColor={FCcolor:{color:N(cg.bgcolor,aN[aU.bgColor][bQ]),alpha:N(cg.bgalpha,aN[aU.bgAlpha][bQ]),angle:N(cg.bgangle,aN[aU.bgAngle][bQ]),ratio:N(cg.bgratio,aN[aU.bgRatio][bQ])}};co.borderRadius=x(cg.borderradius,0);co.rotateValues=x(cg.rotatevalues,0);co.placeValuesInside=x(cg.placevaluesinside,0);co.valuePosition=N(cg.valueposition,\"auto\");co.valuePadding=x(cg.valuepadding,2);co.borderColor=l(N(cg.bordercolor,bn?\"#666666\":aN.borderColor[bQ]),N(cg.borderalpha,bn?\"100\":aN.borderAlpha[bQ]));bm=x(cg.showborder,bn?0:1);co.borderWidth=bm?x(cg.borderthickness,1):0;co.plotBorderColor=l(N(cg.canvasbordercolor,aN.canvasBorderColor[bQ]),N(cg.canvasborderalpha,aN.canvasBorderAlpha[bQ]));if(cg.showcanvasborder!=\"0\"){bz=Boolean(N(cg.canvasborderthickness,cf?0:1))}co.plotBorderWidth=bn||!bz?0:x(cg.canvasborderthickness,this.canvasborderthickness,co.useRoundEdges?1:2);var br,bL,bv,a8=\"tile\",b6=\"fill\",bH=\"fit\";co.bgSWF=N(cg.bgimage,cg.bgswf);co.bgSWFAlpha=x(cg.bgimagealpha,cg.bgswfalpha,100);br=N(cg.bgimagedisplaymode,\"none\").toLowerCase();bL=A(cg.bgimagevalign,ak).toLowerCase();bv=A(cg.bgimagehalign,ak).toLowerCase();if(br==a8||br==b6||br==bH){if(bL!=av&&bL!=p&&bL!=aj){bL=p}if(bv!=e&&bv!=p&&bv!=ao){bv=p}}else{if(bL!=av&&bL!=p&&bL!=aj){bL=av}if(bv!=e&&bv!=p&&bv!=ao){bv=e}}co.bgImageDisplayMode=br;co.bgImageVAlign=bL;co.bgImageHAlign=bv;co.bgImageScale=x(cg.bgimagescale,100);co.logoURL=A(cg.logourl);co.logoPosition=N(cg.logoposition,\"tl\").toLowerCase();co.logoAlpha=x(cg.logoalpha,100);co.logoLink=A(cg.logolink);co.logoScale=x(cg.logoscale,100);co.logoLeftMargin=x(cg.logoleftmargin,0);co.logoTopMargin=x(cg.logotopmargin,0);var b3=N(cg.divlinecolor,aN[aU.divLineColor][bQ]),a6=N(cg.divlinealpha,bn?aN.divLineAlpha3D[bQ]:aN.divLineAlpha[bQ]),bt=x(cg.divlinethickness,1),a3=Boolean(x(cg.divlineisdashed,this.divLineIsDashed,0)),ce=x(cg.divlinedashlen,4),bT=x(cg.divlinedashgap,2);bN.yAxis[0].gridLineColor=l(b3,a6);bN.yAxis[0].gridLineWidth=bt;bN.yAxis[0].gridLineDashStyle=a3?C(ce,bT,bt):undefined;if(b5){bN.yAxis[0].alternateGridColor=l(N(cg.alternatevgridcolor,aN.altVGridColor[bQ]),x(cg.showalternatevgridcolor,1)===1?N(cg.alternatevgridalpha,aN.altVGridAlpha[bQ]):a)}else{bN.yAxis[0].alternateGridColor=l(N(cg.alternatehgridcolor,aN.altHGridColor[bQ]),(cg.showalternatehgridcolor==0)?0:(N(cg.alternatehgridalpha,aN.altHGridAlpha[bQ])))}var ba=x(cg.vdivlinethickness,1),a2=Boolean(x(cg.vdivlineisdashed,0)),bZ=x(cg.vdivlinedashlen,4),bK=x(cg.vdivlinedashgap,2);bR.gridLineColor=l(N(cg.vdivlinecolor,aN[aU.divLineColor][bQ]),N(cg.vdivlinealpha,aN.divLineAlpha[bQ]));bR.gridLineWidth=ba;bR.gridLineDashStyle=a2?C(bZ,bK,ba):undefined;bR.alternateGridColor=l(N(cg.alternatevgridcolor,aN.altVGridColor[bQ]),(cg.showalternatehgridcolor===\"1\")?(N(cg.alternatevgridalpha,aN.altVGridAlpha[bQ])):0);var be,b1=N(cg.canvasbgcolor,aN[aU.canvasBgColor][bQ]),ch,a4=N(cg.canvasbgalpha,aN.canvasBgAlpha[bQ]),bY=N(cg.showcanvasbg,g);if(bY==a){a4=\"0\"}bN.plotOptions.series.shadow=x(cg.showshadow,cg.showcolumnshadow,this.defaultPlotShadow,aN.showShadow[bQ]);if(this.inversed){bN.yAxis[0].reversed=true;bN.yAxis[1].reversed=true}if(this.isStacked){if(this.distributedColumns){bU.showStackTotal=Boolean(x(cg.showsum,1));bi=x(cg.usepercentdistribution,1);be=x(cg.showpercentvalues,0);ch=x(cg.showpercentintooltip,1);bU.showXAxisPercentValues=x(cg.showxaxispercentvalues,1)}else{bU.showStackTotal=Boolean(x(this.showSum,cg.showsum,0));bi=x(this.stack100percent,cg.stack100percent,0);be=x(cg.showpercentvalues,bi);ch=x(cg.showpercentintooltip,be)}bU.showPercentValues=be;bU.showPercentInToolTip=ch;if(bi){bU.isValueAbs=true;b2[bb].stacking=\"percent\";bU[0].stacking100Percent=true}else{b2[bb].stacking=\"normal\"}}if(this.isDual){if(cg.primaryaxisonleft===\"0\"){bN.yAxis[0].opposite=true;bN.yAxis[1].opposite=false}bN.yAxis[0].showAlways=true;bN.yAxis[1].showAlways=true}if(co.useRoundEdges){bN.plotOptions.series.shadow=x(cg.showshadow,cg.showcolumnshadow,1);bN.plotOptions.series.borderRadius=1;bN.tooltip.borderRadius=2;co.plotBorderRadius=3;if(!bz){co.plotBorderWidth=0}co.plotShadow=bN.plotOptions.series.shadow?{enabled:true,opacity:a4/100}:0}if(x(cg.use3dlighting,1)===1){bN.legend.lighting3d=true}bN.plotOptions.series.maxColWidth=Math.abs(x(b5?cg.maxbarheight:x(cg.maxcolwidth,this.maxColWidth),50))||1;bN.title.text=aO(cg.caption);bN.subtitle.text=aO(cg.subcaption);if(x(cg.showtooltip,this.showtooltip)==0){bN.tooltip.enabled=false}var bd=bN.tooltip.style;bN.tooltip.backgroundColor=l(N(bd.backgroundColor,cg.tooltipbgcolor,aN.toolTipBgColor[bQ]),N(cg.tooltipbgalpha,100));bN.tooltip.borderColor=l(N(bd.borderColor,cg.tooltipbordercolor,aN.toolTipBorderColor[bQ]),N(cg.tooltipborderalpha,100));bd.backgroundColor=undefined;bd.borderColor=undefined;bd.border=undefined;bN.tooltip.shadow=cg.showtooltipshadow==g?{enabled:true,opacity:x(ap(cg.tooltipbgalpha,cg.tooltipborderalpha),100)/100}:false;bN.tooltip.borderWidth=x(cg.tooltipborderthickness,1);if(cg.tooltipborderradius){bN.tooltip.borderRadius=x(cg.tooltipborderradius,1)}bN.tooltip.style.padding=x(cg.tooltippadding,this.tooltippadding,4);if(cg.tooltipcolor){bd.color=aB(cg.tooltipcolor)}var bW=x(cg.plotspacepercent,20);if(bW>80||bW<0){bW=20}bU.plotSpacePercent=bN.plotOptions.series.groupPadding=bW/200;if(bn&&!a0){co.series2D3Dshift=bq===\"mscombi3d\"?true:Boolean(x(cg.use3dlineshift,0));co.canvasBaseColor3D=N(cg.canvasbasecolor,aN.canvasBaseColor3D[bQ]);co.canvasBaseDepth=x(cg.canvasbasedepth,10);co.canvasBgDepth=x(cg.canvasbgdepth,3);co.showCanvasBg=Boolean(x(cg.showcanvasbg,1));co.showCanvasBase=Boolean(x(cg.showcanvasbase,1));if(b5){co.xDepth=5;co.yDepth=5;if(co.showCanvasBg){bU.marginTopExtraSpace+=co.canvasBgDepth}bU.marginLeftExtraSpace+=co.yDepth+(co.showCanvasBase?co.canvasBaseDepth:0);bU.marginBottomExtraSpace+=5}else{co.xDepth=10;co.yDepth=10;if(co.showCanvasBg){bU.marginRightExtraSpace+=co.canvasBgDepth}bU.marginBottomExtraSpace+=co.yDepth+(co.showCanvasBase?co.canvasBaseDepth:0)}b1=b1.split(ae)[0];a4=a4.split(ae)[0];co.use3DLighting=Boolean(x(cg.use3dlighting,1));if(co.use3DLighting){co.plotBackgroundColor={FCcolor:{color:ac(b1,85)+ae+aD(b1,55),alpha:a4+ae+a4,ratio:F,angle:U(b7-(co.marginLeft+co.marginRight),a9-(co.marginTop+co.marginBottom),1)}}}else{co.plotBackgroundColor=l(b1,a4)}co.canvasBgColor=l(ac(b1,80),a4);cc=N(cg.zeroplanecolor,cg.divlinecolor,aN[aU.divLineColor][bQ]);bk=N(cg.zeroplanealpha,cg.divlinealpha,aN.divLineAlpha[bQ]);co.zeroPlaneColor=l(cc,bk);co.zeroPlaneBorderColor=l(N(cg.zeroplanebordercolor,cc),x(cg.zeroplaneshowborder,1)?bk:0)}else{co.is3D=false;co.plotBackgroundColor={FCcolor:{color:b1,alpha:a4,angle:N(cg.canvasbgangle,aN.canvasBgAngle[bQ]),ratio:N(cg.canvasbgratio,aN.canvasBgRatio[bQ])}}}this.parseExportOptions(bN);if(this.preSeriesAddition){this.preSeriesAddition(bN,aQ,b7,a9)}this.series&&this.series(aQ,bN,bq,b7,a9);this.postSeriesAddition(bN,aQ,b7,a9);this.spaceManager(bN,aQ,b7,a9);var bO=x(cg.drawquadrant,0);if(bU.isXYPlot&&bO){var aW=bR.min,bs=bR.max,aZ=bN.yAxis[0].min,bx=bN.yAxis[0].max,ci=x(cg.quadrantxval,(aW+bs)/2),cm=x(cg.quadrantyval,(aZ+bx)/2);if(cm>=aZ&&cm<=bx&&ci>=aW&&ci<=bs){var cb=l(N(cg.quadrantlinecolor,co.plotBorderColor),N(cg.quadrantlinealpha,E)),b8=x(cg.quadrantlinethickness,co.plotBorderWidth),b4=x(cg.quadrantlineisdashed,0),aV=x(cg.quadrantlinedashLen,4),cd=x(cg.quadrantlinedashgap,2),bu=A(cg.quadrantlabeltl,ak),bo=A(cg.quadrantlabeltr,ak),bj=A(cg.quadrantlabelbl,ak),bg=A(cg.quadrantlabelbr,ak),ck=x(cg.quadrantlabelpadding,3),bw=b4?C(aV,cd,b8):undefined;bR.plotLines.push({color:cb,value:ci,width:b8,dashStyle:bw,zIndex:3});bN.yAxis[0].plotLines.push({color:cb,value:cm,width:b8,dashStyle:bw,zIndex:3});var bC=b7-co.marginRight-co.marginLeft,bD=a9-co.marginTop-co.marginBottom,bJ,bI,bh,bf,bl,bc=bU.inCanvasStyle,b0=parseInt(bc.fontSize,10);bJ=(bC/(bs-aW))*(ci-aW);bI=bC-bJ;bf=(bD/(bx-aZ))*(cm-aZ);bh=bD-bf;bJ-=ck;bI-=ck;bh-=ck;bf-=ck;var aY=ck+b0+ab,aX=(bD-ck+b0)+ab,cr=ck+ab,cq=(bC-ck)+ab;aS.setStyle(bc);if(bh>0){if(bu!==ak&&bJ>0){bl=aS.getSmartText(bu,bJ,bh);bN.labels.items.push({html:bl.text,zIndex:3,style:{left:cr,top:aY,fontSize:bc.fontSize,lineHeight:bc.lineHeight,fontFamily:bc.fontFamily,color:bc.color}})}if(bo!==ak&&bI>0){bl=aS.getSmartText(bo,bI,bh);bN.labels.items.push({html:bl.text,textAlign:ao,zIndex:3,style:{left:cq,top:aY,fontSize:bc.fontSize,lineHeight:bc.lineHeight,fontFamily:bc.fontFamily,color:bc.color}})}}if(bf>0){if(bj!==ak&&bJ>0){bl=aS.getSmartText(bj,bJ,bf);bN.labels.items.push({html:bl.text,vAlign:aj,zIndex:3,style:{left:cr,top:aX,fontSize:bc.fontSize,lineHeight:bc.lineHeight,fontFamily:bc.fontFamily,color:bc.color}})}if(bg!==ak&&bI>0){bl=aS.getSmartText(bg,bI,bf);bN.labels.items.push({html:bl.text,textAlign:ao,vAlign:aj,zIndex:3,style:{left:cq,top:aX,fontSize:bc.fontSize,lineHeight:bc.lineHeight,fontFamily:bc.fontFamily,color:bc.color}})}}}}if(this.hasVDivLine){var ca,cl,bp;ca=x(cg.numvdivlines,0)+1;if(ca>1){var cn=bR.min,aR=bU.x.catCount-1,a7=bR.max,by,bG=aR/ca,b9=true,cj=cn,a1,bS;cl=N(cg.vdivlinecolor,b3);bp=x(cg.vdivlinealpha,a6);ba=x(cg.vdivlinethickness,bt);a2=x(cg.vdivlineisdashed,a3);bZ=x(cg.vdivlinedashlen,ce);bK=x(cg.vdivlinedashgap,bT);bS=x(cg.showalternatevgridcolor,0);if(bS){a1=l(N(cg.alternatevgridcolor,aN.altVGridColor[bQ]),N(cg.alternatevgridalpha,aN.altVGridAlpha[bQ]))}for(by=bG;by<aR;by+=bG,b9=!b9){if(b9&&bS){bR.plotBands.push({color:a1,from:cj,to:by,zIndex:1})}bR.plotLines.push({width:ba,color:l(cl,bp),dashStyle:a2?C(bZ,bK,ba):undefined,value:by,zIndex:1});cj=by}if(b9&&bS){bR.plotBands.push({color:a1,from:cj,to:a7,zIndex:1})}}}if(bn&&co.xDepth>co.marginLeft){co.marginLeft=co.xDepth}if(window.console&&window.console.log&&window.FC_DEV_ENVIRONMENT){console.log(bN)}return bN},parseExportOptions:function(aS){var aR=this.dataObj.chart,aQ=aS[V];aS.exporting.enabled=true;aS.exporting.url=N(aR.html5exporthandler,aS.exporting.url);aS.exporting.buttons.printButton.enabled=(aR.showprintmenuitem==\"1\");aS.exporting.buttons.exportButton.enabled=(aR.exportenabled==\"1\")?!(aR.exportshowmenuitem==\"0\"):false;aS.exporting.filename=aR.exportfilename?aR.exportfilename:\"FusionCharts\";aS.exporting.width=aQ.width},defaultSeriesType:ak,paletteIndex:1,creditLabel:aL,placeTitle:s,placeLegendBlockBottom:r,placeLegendBlockRight:S,placeHorizontalAxis:ah,placeVerticalAxis:aE,placeHorizontalCanvasMarginAdjustment:aM,placeVerticalCanvasMarginAdjustment:m,placeHorizontalXYSpaceManager:ax,placeVerticalXYSpaceManager:aK,placeVerticalAxisTitle:ar,spaceManager:function(){return this.placeVerticalXYSpaceManager.apply(this,arguments)},axisMinMaxSetter:function(aY,aW,aV,aX,aT,aQ,aR,aS){var aU;if(aW.stacking100Percent){aU=aF(99,1,100,0,aT,aQ,aR,aS)}else{aU=aF(x(aW.max,aV),x(aW.min,aX),aV,aX,aT,aQ,aR,aS)}aY.min=Number(aG(aU.Min,10));aY.max=Number(aG(aU.Max,10));aY.tickInterval=Number(aG(aU.divGap,10));aW.numdivlines=Math.round((aY.max-aY.min)/aY.tickInterval)-1;if(aU.Range/aU.divGap<=2){aY.alternateGridColor=af}this.highValue=aW.max;this.lowValue=aW.min;delete aW.max;delete aW.min},configurePlotLines:J,xAxisMinMaxSetter:function(bk,a8,bd){var a1=bk[V],bf=a1.x,be=a8.chart,a6=bf.min=x(bf.min,0),ba=bf.max=x(bf.max,bf.catCount-1),bg,aY=0,aV=0,a9,aS=bk.chart.defaultSeriesType,bc=/^(column|column3d|bar|bar3d|floatedcolumn|sparkwinloss|boxandwhisker2d|dragcolumn)$/.test(aS),a3=/^(line|area|spline|areaspline)$/.test(aS),aU=/^(scatter|bubble|candlestick|dragnode)$/.test(aS),a0=bk.xAxis,aZ=a0.scroll,a2=bg=Math.min(x(be.canvaspadding,0),(bd/2)-10);if(bf.adjustMinMax){var aX=x(be.setadaptivexmin,1),a5,bj=a5=!aX,a7=x(this.numVDivLines,be.numvdivlines,4),aR=be.adjustvdiv!==a,bi=x(be.showxaxisvalues,be.showxaxisvalue,1),aT=x(be.showvlimits,bi),aW=x(be.showvdivlinevalue,be.showvdivlinevalues,bi);this.axisMinMaxSetter(a0,bf,be.xaxismaxvalue,be.xaxisminvalue,a5,bj,a7,aR);a6=a0.min;ba=a0.max;if(bf.requiredAutoNumericLabels){var bh=x(parseInt(be.xaxisvaluesstep,10),1);bh=bh<1?1:bh;this.configurePlotLines(be,bk,a0,bf,aT,aW,bh,a1.numberFormatter,false,true)}a0.plotLines.sort(Q)}a0.labels.enabled=false;a0.gridLineWidth=ay;a0.alternateGridColor=af;var a4=bk.attrGrid&&bk.attrGrid.enabled;if(a4&&(bc||a3)){if(!a1.isBar){aY=0.5;aV=0.5}}if((bc||a1.isScroll)&&!a1.hasNoColumn){if(a1.isBar){aY=0.55;aV=0.55}else{aY=0.5;aV=0.5}}if(a1.is3d){a2+=x(bk.chart.xDepth,0)}a9=(bd-(a2+bg))/((ba-a6)+(aY+aV));a0.min=a6-(aY+(a2/a9));a0.max=ba+(aV+(bg/a9));if(aZ&&aZ.enabled){var bb=aZ.vxLength,aQ=a0.max-a0.min;aZ.viewPortMin=a0.min;aZ.viewPortMax=a0.max;aZ.scrollRatio=bb/aQ;a0.max=a0.min+bb}if(aU&&a8.vtrendlines){an(a8.vtrendlines,a0,a1,false,true,true)}},postSeriesAddition:M,styleMapForFont:y,styleApplicationDefinition_font:function(aQ,aT,aR){var aZ,a0,aY,aV=false,aU,aX,aW,aS=this.styleMapForFont;switch(aT){case\"caption\":aZ=aQ.title;break;case\"datalabels\":aZ=aQ.xAxis.labels;break;case\"datavalues\":aZ=aQ.plotOptions.series.dataLabels;aV=true;break;case\"subcaption\":aZ=aQ.subtitle;break;case\"tooltip\":aZ=aQ.tooltip;break;case\"trendvalues\":aZ={style:aQ[V].trendStyle};break;case\"xaxisname\":aZ=aQ.xAxis.title;break;case\"yaxisname\":aZ=[];for(aU=0,aX=aQ.yAxis.length;aU<aX;aU+=1){aZ.push(aQ.yAxis[aU].title)}break;case\"yaxisvalues\":aZ=[];for(aU=0,aX=aQ.yAxis.length;aU<aX;aU+=1){aZ.push(aQ.yAxis[aU].labels)}break;case\"vlinelabels\":aZ={style:aQ[V].divlineStyle};break;case\"legend\":aZ={style:aQ.legend.itemStyle};break;default:aQ.orphanStyles[aT]=aZ={text:\"\",style:{}};break}if(typeof aZ===\"object\"){if(aZ instanceof Array){for(aU=0,aX=aZ.length;aU<aX;aU+=1){aW=aZ[aU];for(a0 in aR){aY=a0.toLowerCase();if(typeof aS[aY]===\"function\"){aS[aY](aR[a0],aW,aV)}}W(aW.style)}}else{for(a0 in aR){aY=a0.toLowerCase();if(typeof aS[aY]===\"function\"){aS[aY](aR[a0],aZ,aV)}}W(aZ.style)}}},parseStyles:function(aT){var aU,aR,aV,aX={},aS,aW,aQ=this.dataObj;if(aQ.styles&&aQ.styles.definition instanceof Array&&aQ.styles.application instanceof Array){for(aU=0;aU<aQ.styles.definition.length;aU+=1){aW=aQ.styles.definition[aU];if(aW.type&&aW.name&&this[\"styleApplicationDefinition_\"+aW.type.toLowerCase()]){aX[aW.name.toLowerCase()]=aW}}for(aU=0;aU<aQ.styles.application.length;aU+=1){aR=aQ.styles.application[aU].styles&&aQ.styles.application[aU].styles.split(ae)||[];for(aS=0;aS<aR.length;aS+=1){aV=aR[aS].toLowerCase();if(aX[aV]&&aQ.styles.application[aU].toobject){this[\"styleApplicationDefinition_\"+aX[aV].type.toLowerCase()](aT,aQ.styles.application[aU].toobject.toLowerCase(),aX[aV])}}}}},dispose:function(){this.smartLabel&&this.smartLabel.dispose()}});aJ(\"stub\",{standaloneInit:true},aJ.base);aJ(\"barbase\",{spaceManager:function(){return this.placeHorizontalXYSpaceManager.apply(this,arguments)}},aJ.base);aJ(\"singleseries\",{series:function(aS,aU,aR,aV,aQ){var aX=aS.data||(aS.dataset&&aS.dataset[0]&&aS.dataset[0].data);if(aX&&aX.length>0){var aT={data:[],colorByPoint:true},aW;aU.legend.enabled=false;aW=this.point(aR,aT,aX,aS.chart,aU);if(aW instanceof Array){aU.series=aU.series.concat(aW)}else{aU.series.push(aW)}this.configureAxis(aU,aS);if(aS.trendlines){an(aS.trendlines,aU.yAxis,aU[V],false,this.isBar)}}},defaultSeriesType:ak,configureAxis:aw,pointValueWatcher:n,getPointStub:function(aW,aZ,aY,aX){var aS,aV,a0,a1=aX[V],aQ=aZ===null?aZ:a1.numberFormatter.dataLabels(aZ),aR=A(aO(aW.tooltext)),aT=A(aO(aW.displayvalue)),aU;if(!a1.showTooltip){aS=ak}else{if(aR!==undefined){aS=aR}else{aS=aQ===null?false:(aY!==ak)?aY+a1.tooltipSepChar+aQ:aQ}}if(!x(aW.showvalue,a1.showValues)){aV=ak}else{if(aT!==undefined){aV=aT}else{aV=aQ}}if(aT!==undefined){aU=aT}else{aU=aQ}a0=N(aW.link);return{displayValue:aV,toolText:aS,link:a0,attrDisplayValue:aU}}},aJ.base);aJ(\"multiseries\",{series:function(aT,aV,aS){var aR,aW,aQ=aV[V],aU,aX;aV.legend.enabled=Boolean(x(aT.chart.showlegend,1));if(aT.dataset&&aT.dataset.length>0){this.categoryAdder(aT,aV);for(aR=0,aW=aT.dataset.length;aR<aW;aR+=1){aU={data:[]};aX=this.point(aS,aU,aT.dataset[aR],aT.chart,aV,aQ.oriCatTmp.length,aR);if(aX instanceof Array){aV.series=aV.series.concat(aX)}else{aV.series.push(aX)}}this.configureAxis(aV,aT);if(aT.trendlines&&!this.isLog){an(aT.trendlines,aV.yAxis,aQ,false,this.isBar,undefined,this.inversed)}if(aT.attrgrid&&aT.attrgrid.enabled==\"1\"){parseAttrGridOptions(aT.attrgrid,aV,aT)}}},categoryAdder:function(a1,aX){var aU,aS=0,a3,aW=aX[V],aR=aW.axisGridManager,aQ=a1.chart,aZ=aX.xAxis,a2,aY=aW.x,aV;if(a1.categories&&a1.categories[0]&&a1.categories[0].category){if(a1.categories[0].font){aX.xAxis.labels.style.fontFamily=a1.categories[0].font}if((a3=x(a1.categories[0].fontsize))!==undefined){if(a3<1){a3=1}aX.xAxis.labels.style.fontSize=a3+ab;W(aX.xAxis.labels.style)}if(a1.categories[0].fontcolor){aX.xAxis.labels.style.color=a1.categories[0].fontcolor.split(ae)[0].replace(/^\\#?/,\"#\")}var a0=aX[V].oriCatTmp,aT=a1.categories[0].category;for(aU=0;aU<aT.length;aU+=1){if(!aT[aU].vline){aV=x(aT[aU].showlabel,aQ.showlabels,1);a2=aV?aO(c(a1.categories[0].category[aU].label,a1.categories[0].category[aU].name)):ak;aR.addXaxisCat(aZ,aS,aS,a2);a0[aS]=c(aO(a1.categories[0].category[aU].tooltext),a2);aS+=1}else{aR.addVline(aZ,aT[aU],aS,aX)}}}aY.catCount=aS},getPointStub:function(aW,a0,aT,aQ,aU,a6,aY){var a3,aS,a5,aV=aQ[V],a7,a8,aZ=aY===1?true:false,a4=a0===null?a0:aV.numberFormatter.dataLabels(a0,aZ),aX,a1=A(aO(aW.tooltext)),a2=aV.tooltipSepChar,aR;if(!aV.showTooltip){a3=false}else{if(a1!==undefined){a3=a1}else{if(a4===null){a3=false}else{if(aV.seriesNameInToolTip){aX=c(aU&&aU.seriesname)}a3=aX?aX+a2:ak;a3+=aT?aT+a2:ak;if(aV.showPercentInToolTip){a8=true}else{a3+=a4}}}}if(!x(aW.showvalue,a6)){aS=ak}else{if(A(aW.displayvalue)!==undefined){aS=aO(aW.displayvalue)}else{if(aV.showPercentValues){a7=true}else{aS=a4}}}if(A(aW.displayvalue)!==undefined){aR=aO(aW.displayvalue)}else{aR=a4}a5=N(aW.link);return{displayValue:aS,toolText:a3,link:a5,showPercentValues:a7,showPercentInToolTip:a8,attrDisplayValue:aR}}},aJ.singleseries);var ad=function(aR,aQ){return aR-aQ};aJ(\"xybase\",{hideRLine:function(){var aR=this.index,aQ=this.chart.series[aR+1];if(aQ&&aQ.hide){aQ.hide()}},showRLine:function(){var aR=this.index,aQ=this.chart.series[aR+1];if(aQ&&aQ.show){aQ.show()}},getRegressionLineSeries:function(a8,a4,a0){var a9,a6,a7,aQ,aW,aZ,a1,aS,a2,aU,a3=a8.sumXY,aV=a8.sumX,aT=a8.sumY,a5=a8.xValues,aR=a8.sumXsqure,aY=a8.yValues,aX=a8.sumYsqure;if(a4){a5.sort(ad);a6=a5[0];a7=a5[a5.length-1];aZ=(a0*a3-aV*aT)/(a0*aR-Math.pow(aV,2));a1=(!isNaN(aZ))?(aZ*(a6-aV/a0))+aT/a0:aT/a0;aS=(!isNaN(aZ))?(aZ*(a7-aV/a0))+aT/a0:aT/a0;a9=[{x:a6,y:a1},{x:a7,y:aS}]}else{aY.sort(ad);aQ=aY[0];aW=aY[aY.length-1];aZ=(a0*a3-aV*aT)/(a0*aX-Math.pow(aT,2));a2=(!isNaN(aZ))?(aZ*(aQ-aT/a0))+aV/a0:aV/a0;aU=(!isNaN(aZ))?(aZ*(aW-aT/a0))+aV/a0:aV/a0;a9=[{x:a2,y:aQ},{x:aU,y:aW}]}return a9},pointValueWatcher:function(aX,aY,aQ,aV){var aT,aR=aX[V],aW;if(aY!==null){aT=aR[0];aT.max=aT.max>aY?aT.max:aY;aT.min=aT.min<aY?aT.min:aY}if(aQ!==null){aW=aR.x;aW.max=aW.max>aQ?aW.max:aQ;aW.min=aW.min<aQ?aW.min:aQ}if(aV){var aU=aQ||0,aS=aY||0;aV.sumX+=aU;aV.sumY+=aS;aV.sumXY+=aU*aS;aV.sumXsqure+=Math.pow(aU,2);aV.xValues.push(aU);aV.sumYsqure+=Math.pow(aS,2);aV.yValues.push(aS)}}},aJ.multiseries);aJ(\"scrollbase\",{postSeriesAddition:function(a3,a6){a3.chart.hasScroll=true;var aT=a3.xAxis,aX=aT.scroll,aU=a3[V],aR=aU.width,a5=aU.x.catCount,a4=a6.chart;aU.isScroll=true;if(this.isStacked){a2=1}else{var a2=0,aZ=0,aS,aW=a3.series,a1,aQ=\"column\",aV=a3.chart.defaultSeriesType;for(aS=aW.length;aZ<aS;aZ++){a1=N(aW[aZ].type,aV);if(a1===aQ){a2+=1}}if(a2<1){a2=1}}var aY=a5*a2,a0=x(a4.numvisibleplot,Math.floor(aR/this.avgScrollPointWidth));if(aX&&a0>=2&&a0<aY){aX.enabled=true;aX.vxLength=a0/a2;aX.startPercent=a4.scrolltoend===g?1:0;aX.padding=x(a4.scrollpadding,a3.chart.plotBorderWidth/2);aX.height=x(a4.scrollheight,16);aX.buttonWidth=x(a4.scrollbtnwidth,a4.scrollheight,16);aX.buttonPadding=x(a4.scrollbtnpadding,0);aX.color=aB(N(a4.scrollcolor,aN.altHGridColor[a3.chart.paletteIndex]));aU.marginBottomExtraSpace+=aX.padding+aX.height}}},aJ.multiseries);var aI=aJ.singleseries,aH=aJ.multiseries;aJ(\"column2dbase\",{point:function(bm,aY,bs,bn,be){var a6=bs.length,bo=be[V],bc=bo.axisGridManager,bj=be.xAxis,aQ=be.chart.paletteIndex,br=bo.x,aT=be.colors,a7=be.colors.length,aU=/3d$/.test(be.chart.defaultSeriesType),bt=this.isBar,bq=N(bn.showplotborder,(aU?a:g))===g,a4=bq?(aU?1:x(bn.plotborderthickness,1)):0,a0=be.chart.useRoundEdges,bb=x(bn.plotborderalpha,bn.plotfillalpha,100),aW=N(bn.plotbordercolor,aN.plotBorderColor[aQ]).split(ae)[0],ba=ae+(x(bn.useplotgradientcolor,1)?D(bn.plotgradientcolor,aN.plotGradientColor[aQ]):ak),a3=0,aR=Boolean(x(bn.use3dlighting,1)),bf=be[V].numberFormatter,a5,bg=x(bn.plotborderdashed,0),aZ=x(bn.plotborderdashlen,5),aS=x(bn.plotborderdashgap,4),bp,bh,bd,aV,a9,bk,bi,a2,aX,a1,a8,bl;for(bh=0,bd=0;bh<a6;bh+=1){aX=bs[bh];if(aX.vline){bc.addVline(bj,aX,a3,be);continue}bp=bf.getCleanValue(aX.value);a8=x(aX.showlabel,bn.showlabels,1);aV=aO(!a8?ak:c(aX.label,aX.name));bc.addXaxisCat(bj,a3,a3,aV);a3+=1;a9=N(aX.color,aT[bd%a7])+ba;bk=N(aX.alpha,bn.plotfillalpha,E);bi=N(aX.ratio,bn.plotfillratio);a1=N(360-bn.plotfillangle,90);if(bp<0){a1=360-a1}bl={opacity:bk/100};a2=ag(a9,bk,bi,a1,a0,aW,N(aX.alpha,bb)+ak,bt,aU);a5=x(aX.dashed,bg)?C(N(aX.dashlen,aZ),N(aX.dashgap,aS),a4):undefined;aY.data.push(T(this.getPointStub(aX,bp,aV,be),{y:bp,shadow:bl,color:a2[0],borderColor:a2[1],borderWidth:a4,use3DLighting:aR,dashStyle:a5,tooltipConstraint:this.tooltipConstraint}));this.pointValueWatcher(be,bp);bd+=1}br.catCount=a3;return aY},defaultSeriesType:\"column\"},aI);aJ(\"linebase\",{defaultSeriesType:\"line\",hasVDivLine:true,defaultPlotShadow:1,point:function(bk,aU,bq,bl,bb){var bn,bd,aR,aT,ba,a3,bi,bj,aZ,aS,br,aY,bt,bh,aX,be,a7,a0,a5,bp,a9,a6,a2,a4,bg,bs,aV=bb.chart,a1=bq.length,bf=bb.xAxis,bm=bb[V],a8=bm.axisGridManager,aW=0,bo=bm.x,aQ=bb.chart.paletteIndex,bc=bb[V].numberFormatter;be=aB(N(bl.linecolor,bl.palettecolors,aN.plotFillColor[aQ]));a7=N(bl.linealpha,E);bt=x(bl.linethickness,this.lineThickness,4);bh=Boolean(x(bl.linedashed,0));aZ=x(bl.linedashlen,5);aS=x(bl.linedashgap,4);aU.color={FCcolor:{color:be,alpha:a7}};aU.lineWidth=bt;aU.step=this.stepLine;aU.drawVerticalJoins=Boolean(x(bl.drawverticaljoins,1));aU.useForwardSteps=Boolean(x(bl.useforwardsteps,1));aX=x(bl.drawanchors,bl.showanchors);for(bd=0,ba=0;bd<a1;bd+=1){aT=bq[bd];if(aT.vline){a8.addVline(bf,aT,aW,bb);continue}bn=bc.getCleanValue(aT.value);a3=x(aT.showlabel,bl.showlabels,1);aR=aO(!a3?ak:c(aT.label,aT.name));a8.addXaxisCat(bf,aW,aW,aR);aW+=1;br=aB(N(aT.color,be));aY=N(aT.alpha,a7);bi=x(aT.dashed,bh)?C(aZ,aS,bt):undefined;bj={opacity:aY/100};a5=x(aT.anchorsides,bl.anchorsides,0);bs=x(aT.anchorstartangle,bl.anchorstartangle,0);a6=x(aT.anchorradius,bl.anchorradius,this.anchorRadius,3);a9=aB(N(aT.anchorbordercolor,bl.anchorbordercolor,be));bp=x(aT.anchorborderthickness,bl.anchorborderthickness,this.anchorBorderThickness,1);a2=aB(N(aT.anchorbgcolor,bl.anchorbgcolor,aN.anchorBgColor[aQ]));a4=N(aT.anchoralpha,bl.anchoralpha,E);bg=N(aT.anchorbgalpha,bl.anchorbgalpha,a4);a0=aX===undefined?aY!=0:!!aX;aU.data.push(T(this.getPointStub(aT,bn,aR,bb),{y:bn,color:{FCcolor:{color:br,alpha:aY}},shadow:bj,dashStyle:bi,valuePosition:N(aT.valueposition,aV.valuePosition),marker:{enabled:!!a0,fillColor:{FCcolor:{color:a2,alpha:((bg*a4)/100)+ak}},lineColor:{FCcolor:{color:a9,alpha:a4}},lineWidth:bp,radius:a6,startAngle:bs,symbol:w(a5)},tooltipConstraint:this.tooltipConstraint}));this.pointValueWatcher(bb,bn);ba+=1}bo.catCount=aW;return aU},defaultZeroPlaneHighlighted:false},aI);aJ(\"area2dbase\",{defaultSeriesType:\"area\",hasVDivLine:true,point:function(bp,aW,bx,bq,be){var aY=be.chart,a2=bx.length,bk=be.xAxis,br=be[V],aQ=be.chart.paletteIndex,ba=br.axisGridManager,bu=br.x,bf=be[V].numberFormatter,aZ=0,bt,bi,aT,a5,bs,aV,bj,bo,aS,bh,bz,a8,a9,bb,by,aU,a3,a7,bl,a0,a1,aX,aR,bg,bv,bd,a4,bm,a6,bn,bw,bc;bs=N(bq.plotfillcolor,bq.areabgcolor,(A(bq.palettecolors)?be.colors[0]:aN.plotFillColor[aQ])).split(ae)[0];a6=ae+(x(bq.useplotgradientcolor,1)?D(bq.plotgradientcolor,aN.plotGradientColor[aQ]):ak);aV=N(bq.plotfillalpha,bq.areaalpha,\"90\");bj=x(bq.plotfillangle,270);bo=N(bq.plotbordercolor,bq.areabordercolor,(A(bq.palettecolors)?be.colors[0]:aN.plotBorderColor[aQ])).split(ae)[0];aS=bq.showplotborder==a?a:N(bq.plotborderalpha,bq.plotfillalpha,bq.areaalpha,E);bh=x(bq.plotborderangle,270);bz=E;a1=Boolean(x(bq.plotborderdashed,0));aX=x(bq.plotborderdashlen,5);aR=x(bq.plotborderdashgap,4);bg=x(bq.plotborderthickness,bq.areaborderthickness,1);bw=aW.fillColor={FCcolor:{color:bs+a6,alpha:aV,ratio:F,angle:bj}};aW.lineWidth=bg;aW.dashStyle=a1?C(aX,aR,bg):undefined;aW.lineColor={FCcolor:{color:bo,alpha:aS,ratio:bz,angle:bh}};a0=Boolean(x(bq.drawanchors,bq.showanchors,1));for(bi=0,bd=0;bi<a2;bi+=1){aU=bx[bi];if(aU.vline){ba.addVline(bk,aU,aZ,be);continue}bt=bf.getCleanValue(aU.value);a5=x(aU.showlabel,bq.showlabels,1);aT=aO(!a5?ak:c(aU.label,aU.name));ba.addXaxisCat(bk,aZ,aZ,aT);aZ+=1;a8=x(aU.anchorsides,bq.anchorsides,0);by=x(aU.anchorstartangle,bq.anchorstartangle,0);a9=x(aU.anchorradius,bq.anchorradius,3);bb=aB(N(aU.anchorbordercolor,bq.anchorbordercolor,bo));bv=x(aU.anchorborderthickness,bq.anchorborderthickness,1);a3=aB(N(aU.anchorbgcolor,bq.anchorbgcolor,aN.anchorBgColor[aQ]));a7=N(aU.anchoralpha,bq.anchoralpha,this.anchorAlpha,a);bl=N(aU.anchorbgalpha,bq.anchorbgalpha,a7);a4=A(aU.color);bm=x(aU.alpha);if(a4!==undefined||bm!==undefined){bc={FCcolor:{color:a4?aB(a4)+a6:bs,alpha:undefined===bm?G(bm)+ak:aV,ratio:F,angle:bj}}}else{bc=bw}bn={opacity:Math.max(bm,aS)/100,inverted:true};aW.data.push(T(this.getPointStub(aU,bt,aT,be),{y:bt,shadow:bn,color:bc,valuePosition:N(aU.valueposition,aY.valuePosition),marker:{enabled:a0,fillColor:{FCcolor:{color:a3,alpha:((bl*a7)/100)+ak}},lineColor:{FCcolor:{color:bb,alpha:a7}},lineWidth:bv,radius:a9,symbol:w(a8),startAngle:by},tooltipConstraint:this.tooltipConstraint}));this.pointValueWatcher(be,bt);bd+=1}bu.catCount=aZ;return aW}},aI);var L={column:function(aU,aQ,aT){var aS=aU[V],aR=aQ.borderWidth;return function(aX,aY,a1){var a2=G(N(aX.alpha,aQ.alpha)).toString(),aZ={opacity:a2/100},a0=ag(N(aX.color,aQ.color)+aQ.plotgradientcolor,a2,N(aX.ratio,aQ.ratio),aQ.fillAangle,aQ.isRoundEdges,aQ.plotBorderColor,Math.min(a2,G(aQ.plotBorderAlpha)).toString(),aQ.isBar,aQ.is3d),aW=x(aX.dashed,aQ.dashed)?C(N(aX.dashlen,aQ.dashLen),N(aX.dashgap,aQ.dashGap),aR):undefined,aV=aT.getPointStub(aX,a1,aS.oriCatTmp[aY],aU,aQ,aQ.showValues,aQ.yAxis);aV.y=a1;aV.shadow=aZ;aV.color=a0[0];aV.borderColor=a0[1];aV.borderWidth=aR;aV.use3DLighting=aQ.use3DLighting;aV.dashStyle=aW;aV.tooltipConstraint=aT.tooltipConstraint;return aV}},line:function(aT,aQ,aS){var aR=aT[V];return function(aW,aY,a0){var aX=N(aW.alpha,aQ.lineAlpha),aZ={opacity:aX/100},aV=N(aW.anchoralpha,aQ.anchorAlpha),aU=aS.getPointStub(aW,a0,aR.oriCatTmp[aY],aT,aQ,aQ.showValues,aQ.yAxis);aU.y=a0;aU.shadow=aZ;aU.dashStyle=x(aW.dashed,aQ.lineDashed)?C(aQ.lineDashLen,aQ.lineDashGap,aQ.lineThickness):undefined;aU.color={FCcolor:{color:aB(N(aW.color,aQ.lineColor)),alpha:aX}};aU.valuePosition=N(aW.valueposition,aQ.valuePosition);aU.marker={enabled:aQ.drawAnchors===undefined?aX!=0:!!aQ.drawAnchors,fillColor:{FCcolor:{color:aB(N(aW.anchorbgcolor,aQ.anchorBgColor)),alpha:(N(aW.anchorbgalpha,aQ.anchorBgAlpha)*aV/100).toString()}},lineColor:{FCcolor:{color:aB(N(aW.anchorbordercolor,aQ.anchorBorderColor)),alpha:aV}},lineWidth:x(aW.anchorborderthickness,aQ.anchorBorderThickness),radius:x(aW.anchorradius,aQ.anchorRadius),symbol:w(x(aW.anchorsides,aQ.anchorSides)),startAngle:N(aW.anchorstartangle,aQ.anchorAngle)};return aU}},area:function(aT,aQ,aS){var aR=aT[V];return function(aW,aX,aZ){var a0=N(aW.alpha,aQ.fillAlpha),aY={opacity:Math.max(a0,aQ.lineAlpha)/100,inverted:true},aV=N(aW.anchoralpha,aQ.anchorAlpha),aU=aS.getPointStub(aW,aZ,aR.oriCatTmp[aX],aT,aQ,aQ.showValues,aQ.yAxis);aU.y=aZ;aU.shadow=aY;aU.color={FCcolor:{color:aB(N(aW.color,aQ.fillColor)),alpha:a0}};aU.valuePosition=N(aW.valueposition,aQ.valuePosition);aU.marker={enabled:aQ.drawAnchors,fillColor:{FCcolor:{color:aB(N(aW.anchorbgcolor,aQ.anchorBgColor)),alpha:(N(aW.anchorbgalpha,aQ.anchorBgAlpha)*aV/100).toString()}},lineColor:{FCcolor:{color:aB(N(aW.anchorbordercolor,aQ.anchorBorderColor)),alpha:aV}},lineWidth:x(aW.anchorborderthickness,aQ.anchorBorderThickness),radius:x(aW.anchorradius,aQ.anchorRadius),symbol:w(x(aW.anchorsides,aQ.anchorSides)),startAngle:N(aW.anchorstartangle,aQ.anchorAngle)};aU.events={click:aQ.getLink};return aU}}};aJ(\"mscolumn2dbase\",{point:function(aS,a4,a5,bb,aU,aT,ba,a8){var a0=false,bc=a5.data||[],aZ,a3=aU[V],aQ=N(a4.type,this.defaultSeriesType),a1=aU.plotOptions[aQ]&&aU.plotOptions[aQ].stacking,aY=N(this.isValueAbs,a3.isValueAbs,false),a6=x(a4.yAxis,0),a2=aU[V].numberFormatter,aR=aU.chart.paletteIndex,aV,aX,a9,aW,a7;a4.name=A(a5.seriesname);if(x(a5.includeinlegend)===0||a4.name===undefined){a4.showInLegend=false}a4.color=N(a5.color,aU.colors[ba%aU.colors.length]).split(ae)[0].replace(/^#?/g,\"#\");a7=/3d$/.test(aU.chart.defaultSeriesType);aW=N(360-bb.plotfillangle,90);if(aV<0){aW=360-aW}aZ=a4._dataParser=L.column(aU,{seriesname:a4.name,color:N(a5.color,aU.colors[ba%aU.colors.length]),alpha:N(a5.alpha,bb.plotfillalpha,E),plotgradientcolor:ae+(x(bb.useplotgradientcolor,1)?D(bb.plotgradientcolor,aN.plotGradientColor[aR]):ak),ratio:N(a5.ratio,bb.plotfillratio),fillAangle:aW,isRoundEdges:aU.chart.useRoundEdges,plotBorderColor:N(bb.plotbordercolor,a7?h:aN.plotBorderColor[aR]).split(ae)[0],plotBorderAlpha:(bb.showplotborder==a||(a7&&bb.showplotborder!=g))?a:N(bb.plotborderalpha,E),isBar:this.isBar,is3d:a7,dashed:x(a5.dashed,bb.plotborderdashed,0),dashLen:x(a5.dashlen,bb.plotborderdashlen,5),dashGap:x(a5.dashgap,bb.plotborderdashgap,4),borderWidth:N(bb.plotborderthickness,g),showValues:x(a5.showvalues,a3.showValues),yAxis:a6,use3DLighting:x(bb.use3dlighting,1),_sourceDataset:a5},this);for(aX=0;aX<aT;aX+=1){a9=bc[aX];if(a9){aV=a2.getCleanValue(a9.value,aY);if(aV===null){a4.data.push({y:null});continue}a0=true;a4.data.push(aZ(a9,aX,aV));this.pointValueWatcher(aU,aV,a6,a1,aX,a8,aQ)}else{a4.data.push({y:null})}}if(!a0&&!this.realtimeEnabled){a4.showInLegend=false}return a4},defaultSeriesType:\"column\"},aH);aJ(\"mslinebase\",{hasVDivLine:true,point:function(aT,ba,bb,bk,aX,aV,bj){var a4=false,a0,a2,a3,bi,bh=aX.chart,bl=bb.data||[],a9=aX[V],aR=N(ba.type,this.defaultSeriesType),a5=aX.plotOptions[aR]&&aX.plotOptions[aR].stacking,a1=N(this.isValueAbs,a9.isValueAbs,false),bc=x(ba.yAxis,0),a8=this.numberFormatter,aU=aB(N(bb.color,bk.linecolor,aX.colors[bj%aX.colors.length])),bd=N(bb.alpha,bk.linealpha,E),aS=x(bk.showshadow,this.defaultPlotShadow,1),bf=x(bb.drawanchors,bb.showanchors,bk.drawanchors,bk.showanchors),aZ=x(bb.anchorsides,bk.anchorsides,0),be=x(bb.anchorstartangle,bk.anchorstartangle,0),a7=x(bb.anchorradius,bk.anchorradius,3),aW=aB(N(bb.anchorbordercolor,bk.anchorbordercolor,aU)),a6=x(bb.anchorborderthickness,bk.anchorborderthickness,1),bg=aB(N(bb.anchorbgcolor,bk.anchorbgcolor,aN.anchorBgColor[aX.chart.paletteIndex])),aY=N(bb.anchoralpha,bk.anchoralpha,E),aQ=N(bb.anchorbgalpha,bk.anchorbgalpha,aY);ba.name=A(bb.seriesname);if(x(bb.includeinlegend)===0||ba.name===undefined||(bd==0&&bf!==1)){ba.showInLegend=false}ba.marker={fillColor:{FCcolor:{color:bg,alpha:((aQ*aY)/100)+ak}},lineColor:{FCcolor:{color:aW,alpha:aY+ak}},lineWidth:a6,radius:a7,symbol:w(aZ),startAngle:be};ba.color={FCcolor:{color:aU,alpha:bd}};ba.shadow=aS?{opacity:aS?bd/100:0}:false;ba.step=this.stepLine;ba.drawVerticalJoins=Boolean(x(bk.drawverticaljoins,1));ba.useForwardSteps=Boolean(x(bk.useforwardsteps,1));ba.lineWidth=x(bb.linethickness,bk.linethickness,2);a3=ba._dataParser=L.line(aX,{seriesname:ba.name,lineAlpha:bd,anchorAlpha:aY,showValues:x(bb.showvalues,a9.showValues),yAxis:bc,lineDashed:Boolean(x(bb.dashed,bk.linedashed,0)),lineDashLen:x(bb.linedashlen,bk.linedashlen,5),lineDashGap:x(bb.linedashgap,bk.linedashgap,4),lineThickness:ba.lineWidth,lineColor:aU,valuePosition:N(bb.valueposition,bh.valuePosition),drawAnchors:bf,anchorBgColor:bg,anchorBgAlpha:aQ,anchorBorderColor:aW,anchorBorderThickness:a6,anchorRadius:a7,anchorSides:aZ,anchorAngle:be,_sourceDataset:bb},this);for(a2=0;a2<aV;a2+=1){bi=bl[a2];if(bi){a0=a8.getCleanValue(bi.value,a1);if(a0===null){ba.data.push({y:null});continue}a4=true;ba.data.push(a3(bi,a2,a0));this.pointValueWatcher(aX,a0,bc,a5,a2,0,aR)}else{ba.data.push({y:null})}}if(!a4&&!this.realtimeEnabled){ba.showInLegend=false}return ba},defaultSeriesType:\"line\",defaultPlotShadow:1,defaultZeroPlaneHighlighted:false},aH);aJ(\"msareabase\",{hasVDivLine:true,point:function(bg,aX,bm,bh,a6,bn,bp){var a1=false,aZ=a6.chart,bo=bm.data||[],bi=a6[V],a9=N(aX.type,this.defaultSeriesType),a4=a6.plotOptions[a9]&&a6.plotOptions[a9].stacking,aY=N(this.isValueAbs,bi.isValueAbs,false),aQ=a6.chart.paletteIndex,a5=x(aX.yAxis,0),a7=a6[V].numberFormatter,bk=N(bm.color,bh.plotfillcolor,a6.colors[bp%a6.colors.length]).split(ae)[0].replace(/^#?/g,\"#\").split(ae)[0],aV=N(bm.alpha,bh.plotfillalpha,bh.areaalpha,this.isRadar?\"50\":\"70\"),bd=x(bh.plotfillangle,270),aR=F,bf=N(bm.plotbordercolor,bm.color,bh.plotbordercolor,bh.areabordercolor,this.isRadar?a6.colors[bp%a6.colors.length]:aN.plotFillColor[a6.chart.paletteIndex]).split(ae)[0],aT=N(bm.showplotborder,bh.showplotborder)==a?a:N(bm.plotborderalpha,bh.plotborderalpha,bm.alpha,bh.plotfillalpha,bh.areaalpha,\"95\"),ba=x(bh.plotborderangle,270),bq=E,a8=x(bm.anchorsides,bh.anchorsides,0),aS=x(bm.anchorstartangle,bh.anchorstartangle,0),a0=x(bm.anchorradius,bh.anchorradius,3),bb=aB(N(bm.anchorbordercolor,bh.anchorbordercolor,bk)),a2=x(bm.anchorborderthickness,bh.anchorborderthickness,1),bj=aB(N(bm.anchorbgcolor,bh.anchorbgcolor,aN.anchorBgColor[aQ])),aW=x(bm.anchoralpha,bh.anchoralpha,this.anchorAlpha,0),be=x(bm.anchorbgalpha,bh.anchorbgalpha,aW),a3,bl,bc,aU;if(!this.isRadar){bk+=ae+(x(bh.useplotgradientcolor,1)?D(bh.plotgradientcolor,aN.plotGradientColor[aQ]):ak)}aX.name=N(bm.seriesname);if(x(bm.includeinlegend)===0||aX.name===undefined){aX.showInLegend=false}aX.fillColor={FCcolor:{color:bk,alpha:aV,ratio:aR,angle:bd}};aX.color=bk;aX.shadow={opacity:x(bh.showshadow,1)?(aT/100):0};aX.lineColor={FCcolor:{color:bf,alpha:aT,ratio:bq,angle:ba}};aX.lineWidth=N(bm.plotborderthickness,bh.plotborderthickness,1);aX.dashStyle=Boolean(x(bm.dashed,bh.plotborderdashed,0))?C(x(bm.dashlen,bh.plotborderdashlen,5),x(bm.dashgap,bh.plotborderdashgap,4),aX.lineWidth):undefined;aX.marker={fillColor:{FCcolor:{color:bj,alpha:((be*aW)/100)+ak}},lineColor:{FCcolor:{color:bb,alpha:aW+ak}},lineWidth:a2,radius:a0,symbol:w(a8),startAngle:aS};a3=aX._dataParser=L.area(a6,{seriesname:aX.name,lineAlpha:aT,anchorAlpha:aW,showValues:x(bm.showvalues,bi.showValues),yAxis:a5,fillColor:bk,fillAlpha:aV,valuePosition:N(bm.valueposition,aZ.valuePosition),drawAnchors:Boolean(x(bh.drawanchors,bh.showanchors,1)),anchorBgColor:bj,anchorBgAlpha:be,anchorBorderColor:bb,anchorBorderThickness:a2,anchorRadius:a0,anchorSides:a8,anchorAngle:aS,getLink:this.linkClickFN,_sourceDataset:bm},this);for(bc=0;bc<bn;bc+=1){aU=bo[bc];if(aU){bl=aU?a7.getCleanValue(aU.value,aY):null;if(bl===null){aX.data.push({y:null});continue}a1=true;aX.data.push(a3(aU,bc,bl));this.pointValueWatcher(a6,bl,a5,a4,bc,0,a9)}else{aX.data.push({y:null})}}if(!a1&&!this.realtimeEnabled){aX.showInLegend=false}return aX},defaultSeriesType:\"area\",defaultPlotShadow:0},aH);aJ(\"scatterbase\",{showValues:0,defaultPlotShadow:0,point:function(by,a1,bC,bz,br,bE,bG){if(bC.data){var aW,bt,aU,bn,bH,bw,a7,aY,a6,aX,a0,bx,aT,a3,bf,bb,bl,aS,bB,bj,bk,bp,bD,be,bi,bv,aZ,a9=false,bq,aV,aQ=aJ[by],bu=x(bC.drawline,bz.drawlines,0),ba=x(bC.drawprogressioncurve,0),bA=br[V],bF=bC.data,bh,a8=bF.length,bg=x(bC.showvalues,bA.showValues),bs=this.numberFormatter,a2=x(bC.showregressionline,bz.showregressionline,0);a1.zIndex=1;a1.name=A(bC.seriesname);if(x(bC.includeinlegend)===0||a1.name===undefined){a1.showInLegend=false}if(bu||ba){if(ba){a1.type=\"spline\"}aU=aB(N(bC.color,br.colors[bG%br.colors.length]));bn=N(bC.alpha,E);bH=x(bC.linethickness,bz.linethickness,2);bw=Boolean(x(bC.linedashed,bC.dashed,bz.linedashed,0));a7=x(bC.linedashlen,bz.linedashlen,5);aY=x(bC.linedashgap,bz.linedashgap,4);a1.color=l(N(bC.linecolor,bz.linecolor,aU),x(bC.linealpha,bz.linealpha,bn));a1.lineWidth=bH;a1.dashStyle=bw?C(a7,aY,bH):undefined}a6=Boolean(x(bC.drawanchors,bC.showanchors,bz.drawanchors,bz.showanchors,1));aT=x(bC.anchorsides,bz.anchorsides,bG+3);a3=x(bC.anchorradius,bz.anchorradius,3);bf=aB(N(bC.anchorbordercolor,bC.color,bz.anchorbordercolor,aU,br.colors[bG%br.colors.length]));bb=x(bC.anchorborderthickness,bz.anchorborderthickness,1);bl=aB(N(bC.anchorbgcolor,bz.anchorbgcolor,aN.anchorBgColor[br.chart.paletteIndex]));aS=N(bC.anchoralpha,bC.alpha,bz.anchoralpha,E);bB=N(bC.anchorbgalpha,bC.alpha,bz.anchorbgalpha,aS);bq=N(bC.anchorstartangle,bz.anchorstartangle);a1.marker={fillColor:this.getPointColor(bl,E),lineColor:{FCcolor:{color:bf,alpha:aS+ak}},lineWidth:bb,radius:a3,symbol:w(aT)};if(a2){a1.events={hide:this.hideRLine,show:this.showRLine};var aR={sumX:0,sumY:0,sumXY:0,sumXsqure:0,sumYsqure:0,xValues:[],yValues:[]},bd,bo=x(bC.showyonx,bz.showyonx,1),a5=aB(N(bC.regressionlinecolor,bz.regressionlinecolor,bf)),bc=x(bC.regressionlinethickness,bz.regressionlinethickness,bb),bm=G(x(bC.regressionlinealpha,bz.regressionlinealpha,aS)),a4=l(a5,bm)}for(bt=0;bt<a8;bt+=1){a0=bF[bt];if(a0){aW=bs.getCleanValue(a0.y);aZ=bs.getCleanValue(a0.x);if(aW===null){a1.data.push({y:null,x:aZ});continue}a9=true;aV=aQ.getPointStub(a0,aW,bs.xAxis(aZ),br,bC,bg);bj=x(a0.anchorsides,aT);bk=x(a0.anchorradius,a3);bp=aB(N(a0.anchorbordercolor,bf));bD=x(a0.anchorborderthickness,bb);be=aB(N(a0.anchorbgcolor,bl));bi=N(a0.anchoralpha,a0.alpha,aS);bv=N(a0.anchorbgalpha,bB);a1.data.push({y:aW,x:aZ,displayValue:aV.displayValue,toolText:aV.toolText,link:aV.link,marker:{enabled:a6,fillColor:{FCcolor:{color:be,alpha:((bv*bi)/100)+ak}},lineColor:{FCcolor:{color:bp,alpha:bi}},lineWidth:bD,radius:bk,symbol:w(bj),startAngle:N(a0.anchorstartangle,bq)}});this.pointValueWatcher(br,aW,aZ,a2&&aR)}else{a1.data.push({y:null})}}if(a2){bh=this.getRegressionLineSeries(aR,bo,a8);this.pointValueWatcher(br,bh[0].y,bh[0].x);this.pointValueWatcher(br,bh[1].y,bh[1].x);bd={type:\"line\",color:a4,showInLegend:false,lineWidth:bc,enableMouseTracking:false,marker:{enabled:false},data:bh,zIndex:0};a1=[a1,bd]}}if(!a9){a1.showInLegend=false}return a1},categoryAdder:function(bg,aV){var aX,bd=0,aT,a2=aV[V],bb=a2.x,a8,aW=aV.xAxis,aQ,a6,ba=bg.chart,aR=parseInt(ba.labelstep,10),a5=x(ba.showlabels,1),bf=N(ba.xaxislabelmode,\"categories\").toLowerCase(),a1=aV[V].numberFormatter;aV._FCconf.isXYPlot=true;aR=aR>1?aR:1;bb.catOccupied={};if(bf!==\"auto\"&&bg.categories&&bg.categories[0]&&bg.categories[0].category){a6=bg.categories[0];if(a6.font){aV.xAxis.labels.style.fontFamily=a6.font}if((aT=x(a6.fontsize))!==undefined){if(aT<1){aT=1}aV.xAxis.labels.style.fontSize=aT+ab;W(aV.xAxis.labels.style)}if(a6.fontcolor){aV.xAxis.labels.style.color=a6.fontcolor.split(ae)[0].replace(/^\\#?/,\"#\")}var a3=N(a6.verticallinecolor,aN.divLineColor[aV.chart.paletteIndex]),a9=x(a6.verticallinethickness,1),bc=x(a6.verticallinealpha,aN.divLineAlpha[aV.chart.paletteIndex]),aS=x(a6.verticallinedashed,0),a4=x(a6.verticallinedashlen,4),aY=x(a6.verticallinedashgap,2),a0=l(a3,bc),a7,be,aZ,aU;for(aX=0;aX<a6.category.length;aX+=1){a7=a6.category[aX];a8=a1.getCleanValue(a7.x);if(a8!==null&&!a7.vline){bb.catOccupied[a8]=true;aU=x(a7.showlabel,a7.showname,a5);be=x(a7.showverticalline,a7.showline,a7.sl,0);aZ=x(a7.linedashed,aS);aQ=(aU===0||bd%aR!==0)?ak:aO(c(a7.label,a7.name));aW.plotLines.push({isGrid:true,isCat:true,width:be?a9:0,color:a0,dashStyle:C(a4,aY,a9,aZ),value:a8,label:{text:aQ,style:aW.labels.style,align:q,verticalAlign:aj,textAlign:q,rotation:0,x:0,y:0}});this.pointValueWatcher(aV,null,a8);bd+=1}}if(bf===\"mixed\"){bb.requiredAutoNumericLabels=x(this.requiredAutoNumericLabels,1)}}else{bb.requiredAutoNumericLabels=x(this.requiredAutoNumericLabels,1)}bb.adjustMinMax=true},getPointColor:function(aQ,aU){var aR,aT,aS;aQ=aB(aQ);aU=G(aU);aT=aD(aQ,70);aS=ac(aQ,50);aR={FCcolor:{gradientUnits:\"objectBoundingBox\",cx:0.4,cy:0.4,r:\"100%\",color:aT+ae+aS,alpha:aU+ae+aU,ratio:F,radialGradient:true}};return aR},defaultSeriesType:\"scatter\"},aJ.xybase);aJ(\"mscombibase\",{series:function(a4,a1,aQ){var aV,aT,aU,a0,aR=a4.chart,aW,aY=[],a3=[],a5=[],a2,aS,aZ=a1[V],aX=this.isDual;a1.legend.enabled=Boolean(x(a4.chart.showlegend,1));if(a4.dataset&&a4.dataset.length>0){this.categoryAdder(a4,a1);a0=aZ.oriCatTmp.length;for(aV=0,aT=a4.dataset.length;aV<aT;aV+=1){aU=a4.dataset[aV];if(aU.isscatter==\"true\"||aU.showlineinlegend==\"0\"){aU.lineWidth=0}a2=aX&&N(aU.parentyaxis,\"p\").toLowerCase()===\"s\"?true:false;aW={legendIndex:aV,data:[]};if(a2){aW.yAxis=1;aS=c(aU.renderas,this.secondarySeriesType)}else{aS=c(aU.renderas,this.defaultSeriesType)}aS=aS.toLowerCase();switch(aS){case\"line\":case\"spline\":aW.type=\"line\";aY.push(aJ.mslinebase.point.call(this,aQ,aW,aU,aR,a1,a0,aV));break;case\"area\":case\"splinearea\":aW.type=\"area\";a1.chart.series2D3Dshift=true;a5.push(aJ.msareabase.point.call(this,aQ,aW,aU,aR,a1,a0,aV));break;case\"column\":case\"column3d\":a3.push(aJ.mscolumn2dbase.point.call(this,aQ,aW,a4.dataset[aV],aR,a1,a0,aV));break;default:if(a2){aW.type=\"line\";aY.push(aJ.mslinebase.point.call(this,aQ,aW,aU,aR,a1,a0,aV))}else{a3.push(aJ.mscolumn2dbase.point.call(this,aQ,aW,a4.dataset[aV],aR,a1,a0,aV))}}}if(aR.areaovercolumns!==\"0\"){a1.series=a1.series.concat(a3,a5,aY)}else{a1.series=a1.series.concat(a5,a3,aY)}if(a3.length===0){aZ.hasNoColumn=true}this.configureAxis(a1,a4);if(a4.trendlines){an(a4.trendlines,a1.yAxis,a1[V],aX,this.isBar)}if(a4.attrgrid&&a4.attrgrid.enabled==\"1\"){parseAttrGridOptions(a4.attrgrid,a1,a4)}}}},aJ.mscolumn2dbase)})();(function(){var c=FusionCharts([\"private\",\"modules.renderer.highcharts-interface\"]);if(c===undefined){return}var e=\"stub\",n=c.hcLib,m=c.renderer.getRenderer(\"javascript\"),g=n.hasModule,l=n.loadModule,p=n.moduleCmdQueue,b=n.executeWaitingCommands,f=n.injectModuleDependency,j=n.moduleDependencies,d=n.getDependentModuleName,a=n.eventList={loaded:\"FC_Loaded\",dataloaded:\"FC_DataLoaded\",rendered:\"FC_Rendered\",drawcomplete:\"FC_DrawComplete\",resized:\"FC_Resized\",dataxmlinvalid:\"FC_DataXMLInvalid\",nodatatodisplay:\"FC_NoDataToDisplay\"},h=n.raiseEvent=function(s,r,w,t,u,v){var q=a[s];c.raiseEvent(s,r,w,u,v);if(q&&typeof window[q]===\"function\"){setTimeout(function(){window[q].apply(window,t)},0)}},k=function(u){var w,x,v,s,q,r={},t;for(w in c.core.items){w=c.core.items[w];v=w.chartType();x=w.jsVars;if(x&&x.waitingModule&&w.__state.rendering&&n.needsModule(u,v)){x.waitingModuleError=true;s=d(v).concat(x.userModules);if(s.length){q=s[s.length-1];r[q]=n.moduleCmdQueue[q]}}}for(t in r){b(r[t])}c.raiseError(c.core,\"11171116151\",\"run\",\"HC-interface~renderer.load\",\"Unable to load required modules and resources: \"+u)},o=function(r,q,s){c.hcLib.createChart(r,q,e,s,r.jsVars.msgStore.ChartNotSupported)};j.charts=c.extend(j.charts||{},{column2d:0,column3d:0,pie2d:0,pie3d:0,line:0,bar2d:0,area2d:0,doughnut2d:0,doughnut3d:0,pareto2d:0,pareto3d:0,mscolumn2d:0,mscolumn3d:0,msline:0,msarea:0,msbar2d:0,msbar3d:0,stackedcolumn2d:0,marimekko:0,stackedcolumn3d:0,stackedarea2d:0,stackedcolumn2dline:0,stackedcolumn3dline:0,stackedbar2d:0,stackedbar3d:0,msstackedcolumn2d:0,mscombi2d:0,mscombi3d:0,mscolumnline3d:0,mscombidy2d:0,mscolumn3dlinedy:0,stackedcolumn3dlinedy:0,msstackedcolumn2dlinedy:0,scatter:0,bubble:0,ssgrid:0,scrollcolumn2d:0,scrollcolumn3d:0,scrollline2d:0,scrollarea2d:0,scrollstackedcolumn2d:0,scrollcombi2d:0,scrollcombidy2d:0,zoomline:0});j.powercharts=c.extend(j.powercharts||{},{spline:0,splinearea:0,msspline:0,mssplinearea:0,multiaxisline:0,multilevelpie:0,waterfall2d:0,msstepline:0,inversemsline:0,inversemscolumn2d:0,inversemsarea:0,errorbar2d:0,errorscatter:0,errorline:0,logmsline:0,logmscolumn2d:0,radar:0,dragnode:0,candlestick:0,selectscatter:0,dragcolumn2d:0,dragline:0,dragarea:0,boxandwhisker2d:0,kagi:0,heatmap:0});j.widgets=c.extend(j.widgets||{},{angulargauge:0,bulb:0,cylinder:0,drawingpad:0,funnel:0,hbullet:0,hled:0,hlineargauge:0,vlineargauge:0,pyramid:0,realtimearea:0,realtimecolumn:0,realtimeline:0,realtimelinedy:0,realtimestackedarea:0,realtimestackedcolumn:0,sparkcolumn:0,sparkline:0,sparkwinloss:0,thermometer:0,vbullet:0,vled:0});j.maps=c.extend(j.maps||{},{});c.extend(m,{render:function(s,z){var x=this,y=x.chartType(),w=x.jsVars,r=x.__state,v=n.chartAPI,t,u;t=d(y).concat(w.userModules);if(w.isResizing){w.isResizing=clearTimeout(w.isResizing)}w.hcObj&&w.hcObj.destroy&&w.hcObj.destroy();if(!v[y]){if(g(t)){if(!w.drLoadAttempted){if(f(y)){t=d(y).concat(w.userModules)}w.drLoadAttempted=true}else{c.raiseError(x,11112822001,\"run\",\"HC-interface~renderer.render\",\"Chart runtimes not loaded even when resource is present\");o(x,s,z);return}}else{if(!t.length){o(x,s,z);return}else{if(w.waitingModuleError){o(x,s,z);delete w.waitingModule;delete w.waitingModuleError;return}}}u=p[t[t.length-1]];if(u){u.push({cmd:\"render\",obj:x,args:arguments})}else{c.raiseError(x,12080515551,\"run\",\"HC-interface~renderer.render\",\"Unregistered module in dependentModule definition.\");c.hcLib.createChart(x,s,e,undefined,w.msgStore.RenderChartErrorText);return}if(!w.waitingModule){c.hcLib.createChart(x,s,e,undefined,w.msgStore.LoadingText);m.load.call(x)}return}if(v[r.lastRenderedType]&&r.lastRenderedType!==y){for(var q in v[r.lastRenderedType].eiMethods){delete x[q]}}r.lastRenderedType=y;r.lastRenderedSrc=x.src;delete w.waitingModule;delete w.waitingModuleError;delete w.drLoadAttempted;c.hcLib.createChart(x,s,y,z)},update:function(t){var r=this,q=r.ref,s=r.jsVars;s.hcObj&&s.hcObj.destroy&&s.hcObj.destroy();if(s.isResizing){s.isResizing=clearTimeout(s.isResizing)}if(t.error===undefined){delete s.stallLoad;delete s.loadError;if(this.isActive()){if(r.src!==r.__state.lastRenderedSrc){r.render()}else{c.hcLib.createChart(r,s.container,s.type)}}}else{if(this.isActive()&&typeof q.showChartMessage===\"function\"){q.showChartMessage(\"InvalidXMLText\")}delete s.loadError}},resize:function(s){var r=this.ref,q,t=this.jsVars;if(!(r&&r.resize)){return}if(t.isResizing){t.isResizing=clearTimeout(t.isResizing)}t.isResizing=setTimeout(function(){q=c.normalizeCSSDimension(s.width,s.height,r);if(s.width!==undefined){r.style.width=q.width}if(s.height!==undefined){r.style.height=q.height}r.resize();delete t.isResizing},0)},dispose:function(){var r,s=this.jsVars,q=s.hcObj||{};if(s.isResizing){s.isResizing=clearTimeout(s.isResizing)}s.instanceAPI&&s.instanceAPI.dispose&&s.instanceAPI.dispose();if((r=this.ref)){c.purgeDOM(r);if(r.parentNode){r.parentNode.removeChild(r)}r.jsVars=r.FusionCharts=null}n.cleanupWaitingCommands(this);return q&&q.destroy&&q.destroy()},load:function(){var u=this,v=u.jsVars,t=u.chartType(),s=c.hcLib.chartAPI[t],r=d(t).concat(v.userModules),q=r[r.length-1];if(s||!r||(r&&r.length===0)){delete v.waitingModule;return}if(!v.waitingModule){v.waitingModule=true;delete v.waitingModuleError;l(r,function(){delete v.waitingModule;b(n.moduleCmdQueue[q])},k,u)}},config:function(r){var s,u=this.jsVars,t=u.msgStore,q=u.cfgStore;for(s in r){if(t[s]){t[s]=r[s]}else{q[s.toLowerCase()]=r[s]}}}})})();","js/thirdparty/fusioncharts/FusionCharts.js":"\n(function(){if(window.FusionCharts&&window.FusionCharts.version){return}var e={},c=e.modules={},f=e.interpreters={},a=Object.prototype.toString,d=/msie/i.test(navigator.userAgent)&&!window.opera,b=!!document.createElementNS&&!!document.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\").createSVGRect,g=function(k,i){var h,j;if(i instanceof Array){for(h=0;h<i.length;h+=1){if(typeof i[h]!==\"object\"){k[h]=i[h]}else{if(typeof k[h]!==\"object\"){k[h]=i[h]instanceof Array?[]:{}}g(k[h],i[h])}}}else{for(h in i){if(typeof i[h]===\"object\"){j=a.call(i[h]);if(j===\"[object Object]\"){if(typeof k[h]!==\"object\"){k[h]={}}g(k[h],i[h])}else{if(j===\"[object Array]\"){if(!(k[h]instanceof Array)){k[h]=[]}g(k[h],i[h])}else{k[h]=i[h]}}}else{k[h]=i[h]}}}return k};e.extend=function(l,k,j,h){var i;if(j&&l.prototype){l=l.prototype}if(h===true){g(l,k)}else{for(i in k){l[i]=k[i]}}return l};e.uniqueId=function(){return\"chartobject-\"+(e.uniqueId.lastId+=1)};e.uniqueId.lastId=0;e.policies={options:{swfSrcPath:[\"swfSrcPath\",undefined],product:[\"product\",\"v3\"],insertMode:[\"insertMode\",\"replace\"],safeMode:[\"safeMode\",true],overlayButton:[\"overlayButton\",undefined],containerBackgroundColor:[\"backgroundColor\",undefined],chartType:[\"type\",undefined]},attributes:{lang:[\"lang\",\"EN\"],\"class\":[\"className\",\"FusionCharts\"],id:[\"id\",undefined]},width:[\"width\",\"400\"],height:[\"height\",\"300\"],src:[\"swfUrl\",\"\"]};f.stat=[\"swfUrl\",\"id\",\"width\",\"height\",\"debugMode\",\"registerWithJS\",\"backgroundColor\",\"scaleMode\",\"lang\",\"detectFlashVersion\",\"autoInstallRedirect\"];e.parsePolicies=function(k,h,i){var m,l,j;for(l in h){if(e.policies[l]instanceof Array){j=i[h[l][0]];k[l]=j===undefined?h[l][1]:j}else{if(typeof k[l]!==\"object\"){k[l]={}}for(m in h[l]){j=i[h[l][m][0]];k[l][m]=j===undefined?h[l][m][1]:j}}}};e.parseCommands=function(n,h,k){var m,j;if(typeof h===\"string\"){h=f[h]||[]}for(m=0,j=h.length;m<j;m++){n[h[m]]=k[m]}return n};e.core=function(i){if(!(this instanceof e.core)){if(arguments.length===1&&i instanceof Array&&i[0]===\"private\"){if(c[i[1]]){return undefined}c[i[1]]={};if(i[3]instanceof Array){e.core.version[i[1]]=i[3]}if(typeof i[2]===\"function\"){return i[2].call(e,c[i[1]])}else{return e}}if(arguments.length===1&&typeof i===\"string\"){return e.core.items[i]}e.raiseError&&e.raiseError(this,\"25081840\",\"run\",\"\",new SyntaxError('Use the \"new\" keyword while creating a new FusionCharts object'))}var h={};this.__state={};if(arguments.length===1&&typeof arguments[0]===\"object\"){h=arguments[0]}else{e.parseCommands(h,f.stat,arguments);if(e.core.options.sensePreferredRenderer&&h.swfUrl&&h.swfUrl.match&&!h.swfUrl.match(/[^a-z0-9]+/ig)){h.type=h.swfUrl}}if(arguments.length>1&&typeof arguments[arguments.length-1]===\"object\"){delete h[f.stat[arguments.length-1]];e.extend(h,arguments[arguments.length-1])}this.id=typeof h.id===\"undefined\"?this.id=e.uniqueId():h.id;this.args=h;if(e.core.items[this.id]instanceof e.core){e.raiseWarning(this,\"06091847\",\"param\",\"\",new Error('A FusionChart oject with the specified id \"'+this.id+'\" already exists. Renaming it to '+(this.id=e.uniqueId())))}if(h.type&&h.type.toString){if(!e.renderer.userSetDefault&&(d||b)){h.renderer=h.renderer||\"javascript\"}h.swfUrl=(e.core.options.swfSrcPath||h.swfSrcPath||e.core.options.scriptBaseUri).replace(/\\/\\s*$/g,\"\")+\"/\"+h.type.replace(/\\.swf\\s*?$/ig,\"\")+\".swf\"}e.parsePolicies(this,e.policies,h);this.attributes.id=this.id;this.resizeTo(h.width,h.height,true);e.raiseEvent(\"BeforeInitialize\",h,this);e.core.items[this.id]=this;e.raiseEvent(\"Initialized\",h,this);return this};e.core.prototype={};e.core.prototype.constructor=e.core;e.extend(e.core,{id:\"FusionCharts\",version:[3,2,4,\"release\",8565],items:{},options:{sensePreferredRenderer:true},getObjectReference:function(h){return e.core.items[h].ref}},false);window.FusionCharts=e.core;if(window.FusionMaps&&window.FusionMaps.legacy){e.core([\"private\",\"modules.core.geo\",window.FusionMaps.legacy,window.FusionMaps.version])}else{if(!(/loaded|complete/.test(document.readyState)||document.loaded)){(function(){function k(){if(arguments.callee.done){return}arguments.callee.done=true;if(i){clearInterval(i)}if(window.FusionMaps&&window.FusionMaps.legacy){e.core([\"private\",\"modules.core.geo\",window.FusionMaps.legacy,window.FusionMaps.version])}window.FusionMaps=e.core}if(document.addEventListener){document.addEventListener(\"DOMContentLoaded\",k,false)}else{if(document.attachEvent){window.attachEvent(\"onLoad\",k)}}if(/msie/i.test(navigator.userAgent)&&!window.opera){try{document.write(\"<script id=__ie_onload defer src=javascript:void(0)><\\/script>\");var h=document.getElementById(\"__ie_onload\");h.onreadystatechange=function(){if(this.readyState==\"complete\"){k()}}}catch(j){}}if(/WebKit/i.test(navigator.userAgent)){var i=setInterval(function(){if(/loaded|complete/.test(document.readyState)){k()}},10)}window.onload=function(l){return function(){k();l&&l.call&&l.call(window)}}(window.onload)}())}}window.FusionMaps=e.core}());(function(){var a=FusionCharts([\"private\",\"StackTrace\"]);if(a===undefined){return}var b=a.printStackTrace=function(d){d=d||{guess:true};var e=d.e||null,g=!!d.guess;var f=new b.implementation(),c=f.run(e);return(g)?f.guessAnonymousFunctions(c):c};b.implementation=function(){};b.implementation.prototype={run:function(c,d){c=c||this.createException();d=d||this.mode(c);if(d===\"other\"){return this.other(arguments.callee)}else{return this[d](c)}},createException:function(){try{this.undef()}catch(c){return c}},mode:function(c){if(c[\"arguments\"]&&c.stack){return\"chrome\"}else{if(c.stack&&c.sourceURL){return\"safari\"}else{if(c.stack&&c.number){return\"ie\"}else{if(typeof c.message===\"string\"&&typeof window!==\"undefined\"&&window.opera){if(!c.stacktrace){return\"opera9\"}if(c.message.indexOf(\"\\n\")>-1&&c.message.split(\"\\n\").length>c.stacktrace.split(\"\\n\").length){return\"opera9\"}if(!c.stack){return\"opera10a\"}if(c.stacktrace.indexOf(\"called from line\")<0){return\"opera10b\"}return\"opera11\"}else{if(c.stack){return\"firefox\"}}}}}return\"other\"},instrumentFunction:function(d,f,g){d=d||window;var c=d[f];d[f]=function e(){g.call(this,b().slice(4));return d[f]._instrumented.apply(this,arguments)};d[f]._instrumented=c},deinstrumentFunction:function(c,d){if(c[d].constructor===Function&&c[d]._instrumented&&c[d]._instrumented.constructor===Function){c[d]=c[d]._instrumented}},chrome:function(d){var c=(d.stack+\"\\n\").replace(/^\\S[^\\(]+?[\\n$]/gm,\"\").replace(/^\\s+(at eval )?at\\s+/gm,\"\").replace(/^([^\\(]+?)([\\n$])/gm,\"{anonymous}()@$1$2\").replace(/^Object.<anonymous>\\s*\\(([^\\)]+)\\)/gm,\"{anonymous}()@$1\").split(\"\\n\");c.pop();return c},safari:function(c){return c.stack.replace(/\\[native code\\]\\n/m,\"\").replace(/^(?=\\w+Error\\:).*$\\n/m,\"\").replace(/^@/gm,\"{anonymous}()@\").split(\"\\n\")},ie:function(d){var c=/^.*at (\\w+) \\(([^\\)]+)\\)$/gm;return d.stack.replace(/at Anonymous function /gm,\"{anonymous}()@\").replace(/^(?=\\w+Error\\:).*$\\n/m,\"\").replace(c,\"$1@$2\").split(\"\\n\")},firefox:function(c){return c.stack.replace(/(?:\\n@:0)?\\s+$/m,\"\").replace(/^[\\(@]/gm,\"{anonymous}()@\").split(\"\\n\")},opera11:function(j){var c=\"{anonymous}\",k=/^.*line (\\d+), column (\\d+)(?: in (.+))? in (\\S+):$/;var m=j.stacktrace.split(\"\\n\"),n=[];for(var f=0,h=m.length;f<h;f+=2){var g=k.exec(m[f]);if(g){var l=g[4]+\":\"+g[1]+\":\"+g[2];var d=g[3]||\"global code\";d=d.replace(/<anonymous function: (\\S+)>/,\"$1\").replace(/<anonymous function>/,c);n.push(d+\"@\"+l+\" -- \"+m[f+1].replace(/^\\s+/,\"\"))}}return n},opera10b:function(k){var j=/^(.*)@(.+):(\\d+)$/;var f=k.stacktrace.split(\"\\n\"),d=[];for(var h=0,c=f.length;h<c;h++){var g=j.exec(f[h]);if(g){var l=g[1]?(g[1]+\"()\"):\"global code\";d.push(l+\"@\"+g[2]+\":\"+g[3])}}return d},opera10a:function(j){var c=\"{anonymous}\",k=/Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i;var l=j.stacktrace.split(\"\\n\"),m=[];for(var f=0,h=l.length;f<h;f+=2){var g=k.exec(l[f]);if(g){var d=g[3]||c;m.push(d+\"()@\"+g[2]+\":\"+g[1]+\" -- \"+l[f+1].replace(/^\\s+/,\"\"))}}return m},opera9:function(l){var g=\"{anonymous}\",k=/Line (\\d+).*script (?:in )?(\\S+)/i;var f=l.message.split(\"\\n\"),d=[];for(var j=2,c=f.length;j<c;j+=2){var h=k.exec(f[j]);if(h){d.push(g+\"()@\"+h[2]+\":\"+h[1]+\" -- \"+f[j+1].replace(/^\\s+/,\"\"))}}return d},other:function(i){var d=\"{anonymous}\",h=/function\\s*([\\w\\-$]+)?\\s*\\(/i,c=[],f,e,g=10;while(i&&i[\"arguments\"]&&c.length<g){f=h.test(i.toString())?RegExp.$1||d:d;e=Array.prototype.slice.call(i[\"arguments\"]||[]);c[c.length]=f+\"(\"+this.stringifyArguments(e)+\")\";i=i.caller}return c},stringifyArguments:function(e){var d=[];var g=Array.prototype.slice;for(var f=0;f<e.length;++f){var c=e[f];if(c===undefined){d[f]=\"undefined\"}else{if(c===null){d[f]=\"null\"}else{if(c.constructor){if(c.constructor===Array){if(c.length<3){d[f]=\"[\"+this.stringifyArguments(c)+\"]\"}else{d[f]=\"[\"+this.stringifyArguments(g.call(c,0,1))+\"...\"+this.stringifyArguments(g.call(c,-1))+\"]\"}}else{if(c.constructor===Object){d[f]=\"#object\"}else{if(c.constructor===Function){d[f]=\"#function\"}else{if(c.constructor===String){d[f]='\"'+c+'\"'}else{if(c.constructor===Number){d[f]=c}}}}}}}}}return d.join(\",\")},sourceCache:{},ajax:function(c){var d=this.createXMLHTTPObject();if(d){try{d.open(\"GET\",c,false);d.send(null);return d.responseText}catch(f){}}return\"\"},createXMLHTTPObject:function(){var f,c=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject(\"Msxml2.XMLHTTP\")},function(){return new ActiveXObject(\"Msxml3.XMLHTTP\")},function(){return new ActiveXObject(\"Microsoft.XMLHTTP\")}];for(var d=0;d<c.length;d++){try{f=c[d]();this.createXMLHTTPObject=c[d];return f}catch(g){}}},isSameDomain:function(c){return typeof location!==\"undefined\"&&c.indexOf(location.hostname)!==-1},getSource:function(c){if(!(c in this.sourceCache)){this.sourceCache[c]=this.ajax(c).split(\"\\n\")}return this.sourceCache[c]},guessAnonymousFunctions:function(n){for(var j=0;j<n.length;++j){var h=/\\{anonymous\\}\\(.*\\)@(.*)/,o=/^(.*?)(?::(\\d+))(?::(\\d+))?(?: -- .+)?$/,d=n[j],e=h.exec(d);if(e){var g=o.exec(e[1]);if(g){var f=g[1],c=g[2],l=g[3]||0;if(f&&this.isSameDomain(f)&&c){var k=this.guessAnonymousFunction(f,c,l);n[j]=d.replace(\"{anonymous}\",k)}}}}return n},guessAnonymousFunction:function(f,h,c){var d;try{d=this.findFunctionName(this.getSource(f),h)}catch(g){d=\"getSource failed with url: \"+f+\", exception: \"+g.toString()}return d},findFunctionName:function(c,g){var j=/function\\s+([^(]*?)\\s*\\(([^)]*)\\)/;var n=/['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*function\\b/;var k=/['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*(?:eval|new Function)\\b/;var d=\"\",o,l=Math.min(g,20),f,e;for(var h=0;h<l;++h){o=c[g-h-1];e=o.indexOf(\"//\");if(e>=0){o=o.substr(0,e)}if(o){d=o+d;f=n.exec(d);if(f&&f[1]){return f[1]}f=j.exec(d);if(f&&f[1]){return f[1]}f=k.exec(d);if(f&&f[1]){return f[1]}}}return\"(?)\"}}}());(function(){var b=FusionCharts([\"private\",\"EventManager\"]);if(b===undefined){return}window.FusionChartsEvents={BeforeInitialize:\"beforeinitialize\",Initialized:\"initialized\",Loaded:\"loaded\",BeforeRender:\"beforerender\",Rendered:\"rendered\",DataLoadRequested:\"dataloadrequested\",DataLoadRequestCancelled:\"dataloadrequestcancelled\",DataLoadRequestCompleted:\"dataloadrequestcompleted\",BeforeDataUpdate:\"beforedataupdate\",DataUpdateCancelled:\"dataupdatecancelled\",DataUpdated:\"dataupdated\",DataLoadCancelled:\"dataloadcancelled\",DataLoaded:\"dataloaded\",DataLoadError:\"dataloaderror\",NoDataToDisplay:\"nodatatodisplay\",DataXMLInvalid:\"dataxmlinvalid\",InvalidDataError:\"invaliddataerror\",DrawComplete:\"drawcomplete\",Resized:\"resized\",BeforeDispose:\"beforedispose\",Disposed:\"disposed\"};var a=function(j,h,i,g){try{j[0].call(h,i,g||{})}catch(k){if(b.printStackTrace){var f=b.printStackTrace({e:k});if(f&&f.length&&window.console){console.log(f.join(\"\\n\"))}}setTimeout(function(){throw k},0)}};var c=function(j,h,e){if(!(j instanceof Array)){return}var f=0,g;for(;f<j.length;f+=1){if(j[f][1]===h.sender||j[f][1]===undefined){g=j[f][1]===h.sender?h.sender:b.core;a(j[f],g,h,e);if(h.detached===true){j.splice(f,1);f-=1;h.detached=false}}if(h.cancelled===true){break}}};var d={unpropagator:function(){return(this.cancelled=true)===false},detacher:function(){return(this.detached=true)===false},undefaulter:function(){return(this.prevented=true)===false},listeners:{},lastEventId:0,addListener:function(f,g,h){if(f instanceof Array){for(var e=0;e<f.length;e+=1){d.addListener(f[e],g,h)}return}if(typeof f!==\"string\"){b.raiseError(h||b.core,\"03091549\",\"param\",\"::EventTarget.addListener\",new Error(\"Unspecified Event Type\"));return}if(typeof g!==\"function\"){b.raiseError(h||b.core,\"03091550\",\"param\",\"::EventTarget.addListener\",new Error(\"Invalid Event Listener\"));return}f=f.toLowerCase();if(!(d.listeners[f]instanceof Array)){d.listeners[f]=[]}d.listeners[f].push([g,h])},removeListener:function(f,g,j){var h,e;if(typeof g!==\"function\"){b.raiseError(j||b.core,\"03091560\",\"param\",\"::EventTarget.removeListener\",new Error(\"Invalid Event Listener\"));return}if(f instanceof Array){for(e=0;e<f.length;e+=1){d.removeListener(f[e],g,j)}return}if(typeof f!==\"string\"){b.raiseError(j||b.core,\"03091559\",\"param\",\"::EventTarget.removeListener\",new Error(\"Unspecified Event Type\"));return}f=f.toLowerCase();h=d.listeners[f];if(!(h instanceof Array)){return}for(e=0;e<h.length;e+=1){if(h[e][0]===g&&h[e][1]===j){h.splice(e,1);e-=1}}},triggerEvent:function(g,f,e,i,j){if(typeof g!==\"string\"){b.raiseError(f,\"03091602\",\"param\",\"::EventTarget.dispatchEvent\",new Error(\"Invalid Event Type\"));return undefined}g=g.toLowerCase();var h={eventType:g,eventId:(d.lastEventId+=1),sender:f||new Error(\"Orphan Event\"),cancel:false,stopPropagation:this.unpropagator,prevented:false,preventDefault:this.undefaulter,detached:false,detachHandler:this.detacher};if(i){h.originalEvent=i}c(d.listeners[g],h,e);c(d.listeners[\"*\"],h,e);if(j&&h.prevented===false){a(j,h.sender,h,e)}return true}};b.raiseEvent=function(g,f,i,e,h){return d.triggerEvent(g,i,f,e,h)};b.addEventListener=function(e,f){return d.addListener(e,f)};b.removeEventListener=function(e,f){return d.removeListener(e,f)};b.extend(b.core,{addEventListener:b.addEventListener,removeEventListener:b.removeEventListener},false);b.extend(b.core,{addEventListener:function(e,f){return d.addListener(e,f,this)},removeEventListener:function(e,f){return d.removeListener(e,f,this)}},true);b.addEventListener(\"Cleanup\",function(h){var g,f;for(g in d.listeners){for(f=0;f<d.listeners[g].length;f+=1){if(d.listeners[g][f][1]===h.sender){d.listeners[g].splice(f,1)}}}})}());(function(){var d=FusionCharts([\"private\",\"ErrorHandler\"]);if(d===undefined){return}var e=\"text\";var a={type:\"TypeException\",range:\"ValueRangeException\",impl:\"NotImplementedException\",param:\"ParameterException\",run:\"RuntimeException\",comp:\"DesignTimeError\",\"undefined\":\"UnspecifiedException\"};var b=function(j,h,k,f,i,g){var n=\"#\"+h+\" \"+(j?j.id:\"unknown-source\")+f+\" \"+g+\" >> \";if(i instanceof Error){i.name=a[k];i.module=\"FusionCharts\"+f;i.level=g;i.message=n+i.message;n=i.message;if(d.printStackTrace){var m=d.printStackTrace({e:i});if(m&&m.length&&window.console){console.log(m.join(\"\\n\"))}}window.setTimeout(function(){throw i},0)}else{n=n+i}var l={id:h,nature:a[k],source:\"FusionCharts\"+f,message:n};d.raiseEvent(g,l,j);if(typeof window[\"FC_\"+g]===\"function\"){window[\"FC_\"+g](l)}};d.raiseError=function(g,j,f,i,h){b(g,j,f,i,h,\"Error\")};d.raiseWarning=function(g,j,f,i,h){b(g,j,f,i,h,\"Warning\")};var c={outputHelpers:{text:function(h,f){var g=(h.sender.id||h.sender).toString();c.outputTo(\"#\"+h.eventId+\" [\"+g+'] fired \"'+h.eventType+'\" event. '+(h.eventType===\"error\"||h.eventType===\"warning\"?f.message:\"\"))},event:function(g,f){this.outputTo(g,f)},verbose:function(g,f){c.outputTo(g.eventId,g.sender.id,g.eventType,f)}},outputHandler:function(g,f){if(typeof c.outputTo!==\"function\"){d.core.debugMode.outputFailed=true;return}d.core.debugMode.outputFailed=false;c.currentOutputHelper(g,f)},currentOutputHelper:undefined,outputTo:undefined,enabled:false};c.currentOutputHelper=c.outputHelpers[e];d.extend(d.core,{debugMode:{syncStateWithCharts:true,outputFormat:function(f){if(f&&typeof f.toLowerCase===\"function\"&&typeof c.outputHelpers[f=f.toLowerCase()]===\"function\"){c.currentOutputHelper=c.outputHelpers[f];return true}return false},outputTo:function(f){if(typeof f===\"function\"){c.outputTo=f}else{if(f===null){d.core.debugMode.enabled(false);delete c.outputTo}}},enabled:function(h,f,i){var g;if(typeof h===\"object\"&&arguments.length===1){g=h;h=g.state;f=g.outputTo;i=g.outputFormat}if(typeof h===\"function\"){if(typeof f===\"string\"&&(arguments.length===2||g)){i=f}f=h;h=true}if(typeof h===\"boolean\"&&h!==c.enabled){d.core[(c.enabled=h)?\"addEventListener\":\"removeEventListener\"](\"*\",c.outputHandler)}if(typeof f===\"function\"){c.outputTo=f}d.core.debugMode.outputFormat(i);return c.enabled},_enableFirebugLite:function(){if(window.console&&window.console.firebug){d.core.debugMode.enabled(console.log,\"verbose\");return}d.loadScript(\"firebug-lite.js\",function(){d.core.debugMode.enabled(console.log,\"verbose\")},\"{ startOpened: true }\")}}},false)}());(function(){var b=FusionCharts([\"private\",\"modules.mantle.ajax\"]);if(!b){return}var m=\"function\",k=\"Microsoft.XMLHTTP\",p=\"Msxml2.XMLHTTP\",l=\"GET\",e=\"XmlHttprequest Error\",n=\"run\",o=\"1110111515A\",g=window,h=parseFloat(navigator.appVersion.split(\"MSIE\")[1]),d=(h>=5.5&&h<=7)?true:false,f=g.location.protocol===\"file:\",c=g.ActiveXObject,i=(!c||!f)&&g.XMLHttpRequest,j={objects:0,xhr:0,requests:0,success:0,failure:0,idle:0},q=function(){var r;if(i){q=function(){j.xhr++;return new i()};return q()}try{r=new c(p);q=function(){j.xhr++;return new c(p)}}catch(s){try{r=new c(k);q=function(){j.xhr++;return new c(k)}}catch(s){r=false}}return r},a=b.ajax=function(s,r){this.onSuccess=s;this.onError=r;this.open=false;j.objects++;j.idle++};a.stats=function(r){return r?j[r]:b.extend({},j)};a.prototype.headers={\"If-Modified-Since\":\"Sat, 29 Oct 1994 19:43:31 GMT\",\"X-Requested-With\":\"XMLHttpRequest\",\"X-Requested-By\":\"FusionCharts\",Accept:\"text/plain, */*\"};a.prototype.get=function(s,w){var r=this,t=r.xmlhttp,v=r.headers,y=r.onError,u=r.onSuccess,x;if(!t||d){t=q();r.xmlhttp=t}t.onreadystatechange=function(){try{if(t.readyState===4){if((!t.status&&f)||(t.status>=200&&t.status<300)||t.status===304||t.status===1223||t.status===0){u&&u(t.responseText,r,w,s);j.success++}else{if(y){y(Error(e),r,w,s);j.failure++}}j.idle--;r.open=false}}catch(A){if(y){y(A,r,w,s)}j.failure++}};try{if(t.overrideMimeType){t.overrideMimeType(\"text/plain\")}t.open(l,s,true);for(x in v){t.setRequestHeader(x,v[x])}t.send(null);j.requests++;j.idle++;r.open=true}catch(z){b.raiseError(b.core,o,n,e,z.message)}return t};a.prototype.abort=function(){var r=this,s=r.xmlhttp;r.open=false;return s&&typeof s.abort===m&&s.readyState&&s.readyState!==0&&s.abort()};a.prototype.dispose=function(){var r=this;r.open&&r.abort();delete r.onError;delete r.onSuccess;delete r.xmlhttp;delete r.open;j.objects--;return(r=null)}}());(function(){var b=FusionCharts([\"private\",\"modules.mantle.runtime;1.1\"]);if(b===undefined){return}var m=/(^|[\\/\\\\])(fusioncharts\\.js|fusioncharts\\.debug\\.js|fusioncharts\\.core\\.js|fusioncharts\\.min\\.js)([\\?#].*)?$/ig,a=false,g=false,j=15000;b.getScriptBaseUri=function(t){var q=document.getElementsByTagName(\"script\"),r=q.length,u,s;for(s=0;s<r;s+=1){u=q[s].getAttribute(\"src\");if(!(u===undefined||u===null||u.match(t)===null)){return u.replace(t,\"$1\")}}return undefined};b.core.options.scriptBaseUri=(function(){var q=b.getScriptBaseUri(m);if(q===undefined){b.raiseError(FusionCharts,\"1603111624\",\"run\",\">GenericRuntime~scriptBaseUri\",\"Unable to locate FusionCharts script source location (URL).\");return\"\"}return q}());var i=/[\\\\\\\"<>;&]/,n=/^[^\\S]*?(sf|f|ht)(tp|tps):\\/\\//i,o=FusionChartsEvents.ExternalResourceLoad=\"externalresourceload\",k={},c={},h={},f={};b.isXSSSafe=function(r,q){if(q&&n.exec(r)!==null){return false}return(i.exec(r)===null)};b.loadScript=function(w,z,u,t,r){if(!w){return false}if(a===true){b.raiseWarning(b.core,\"04031935\",\"run\",\">genericRuntime~loadScript\",\"External Script loading has been blocked\");return false}var x,A=z&&z.success||z,v=z&&z.failure,B,q,s={type:\"script\",success:false},y=function(){f[q]=clearTimeout(f[q]);s.success?(A&&A(w,q)):(v&&v(w,q));b.raiseEvent(o,s,b.core)};if(r){B=\"\"}else{B=b.core.options.scriptBaseUri}q=B+w;if(!b.isXSSSafe(q,g)){q=typeof window.encodeURIComponent===\"function\"?window.encodeURIComponent(q):window.escape(q)}s.path=B;s.src=q;s.file=w;if(h[q]===true&&t){s.success=true;s.notReloaded=true;if(typeof z===\"function\"){z();b.raiseEvent(o,s,b.core)}return true}if(k[q]&&t){return false}k[q]=true;if(c[q]&&c[q].parentNode){c[q].parentNode.removeChild(c[q])}x=c[q]=document.createElement(\"script\");x.type=\"text/javascript\";x.src=q;if(u){x[(\"\\v\"===\"v\"?\"text\":\"innerHTML\")]=u}if(typeof A===\"function\"){h[q]=false;f[q]=clearTimeout(f[q]);x.onload=function(){h[q]=true;s.success=true;y()};x.onerror=function(){h[q]=false;k[q]=false;y()};x.onreadystatechange=function(){if(this.readyState===\"complete\"||this.readyState===\"loaded\"){h[q]=true;s.success=true;y()}}}document.getElementsByTagName(\"head\")[0].appendChild(x);if(typeof v===\"function\"){f[q]=setTimeout(function(){if(h[q]){return}y()},b.core.options.html5ResourceLoadTimeout||j)}return true};b.capitalizeString=function(r,q){return r?r.replace(q?(/(^|\\s)([a-z])/g):(/(^|\\s)([a-z])/),function(s,u,t){return u+t.toUpperCase()}):r};var p=b.purgeDOM=function(t){var r=t.attributes,s,q,u;if(r){for(s=r.length-1;s>=0;s-=1){u=r[s].name;if(typeof t[u]===\"function\"){t[u]=null}}}r=t.childNodes;if(r){q=r.length;for(s=0;s<q;s+=1){p(t.childNodes[s])}}},l=function(q,r,s){var t;for(t in q){var u;if(q[t]instanceof Array){r[q[t][0]]=s[t]}else{for(u in q[t]){r[q[t][u][0]]=s[t][u]}}}},e=/[^\\%\\d]*$/ig,d=/^(FusionCharts|FusionWidgets|FusionMaps)/;b.extend(b.core,{dispose:function(){b.raiseEvent(\"BeforeDispose\",{},this);b.renderer.dispose(this);delete b.core.items[this.id];b.raiseEvent(\"Disposed\",{},this);for(var q in this){delete this[q]}b.raiseEvent(\"Cleanup\",{},this)},clone:function(u,t){var q=(typeof u),s={},r=b.extend({},this.args,false,false);l(b.policies,r,this);l(b.renderer.getRendererPolicy(this.options.renderer),r,this);delete r.id;delete r.animate;delete r.stallLoad;s.link=r.link;r=b.extend({},r,false,false);r.link=s.link;switch(q){case\"object\":b.extend(r,u);break;case\"boolean\":t=u;break}return t?r:new b.core(r)},isActive:function(){if(!this.ref||document.getElementById(this.id)!==this.ref||typeof this.ref.signature!==\"function\"){return false}try{return d.test(this.ref.signature())}catch(q){return false}},resizeTo:function(q,r,s){var t={width:q,height:r};if(typeof arguments[0]===\"object\"){t.width=arguments[0].width;t.height=arguments[0].height;s=r}if(t.width&&typeof t.width.toString===\"function\"){this.width=t.width.toString().replace(e,\"\")}if(t.height&&typeof t.height.toString===\"function\"){this.height=t.height.toString().replace(e,\"\")}if(s!==true){b.renderer.resize(this,t)}},chartType:function(s){var r=this,t=r.src,q;if(typeof s===\"string\"){r.src=s;r.isActive()&&r.render()}return(q=(q=t.substring(t.indexOf(\".swf\"),0))?q:t).substring(q.lastIndexOf(\"/\")+1).toLowerCase().replace(/^fcmap_/i,\"\")}},true);window.getChartFromId=window.getMapFromId=function(q){b.raiseWarning(this,\"11133001041\",\"run\",\"GenericRuntime~getObjectFromId()\",'Use of deprecated getChartFromId() or getMapFromId(). Replace with \"FusionCharts()\" or FusionCharts.items[].');return b.core.items[q]instanceof b.core?b.core.items[q].ref:window.swfobject.getObjectById(q)}}());(function(){var f=FusionCharts([\"private\",\"RendererManager\"]);if(f===undefined){return}f.policies.options.containerElementId=[\"renderAt\",undefined];f.policies.options.renderer=[\"renderer\",undefined];f.normalizeCSSDimension=function(m,i,k){var j=m===undefined?k.offsetWidth:m,l=i===undefined?k.offsetHeight:i,n;k.style.width=j=j.toString?j.toString():\"0\";k.style.height=l=l.toString?l.toString():\"0\";if(j.match(/^\\s*\\d*\\.?\\d*\\%\\s*$/)&&!j.match(/^\\s*0\\%\\s*$/)&&k.offsetWidth===0){n=k;while((n=n.offsetParent)){if(n.offsetWidth>0){j=(n.offsetWidth*parseFloat(j.match(/\\d*/)[0])/100).toString();break}}}if(l.match(/^\\s*\\d*\\.?\\d*\\%\\s*$/)&&!l.match(/^\\s*0\\%\\s*$/)&&k.offsetHeight<=20){n=k;while((n=n.offsetParent)){if(n.offsetHeight>0){l=(n.offsetHeight*parseFloat(l.match(/\\d*/)[0])/100).toString();break}}}n={width:(j.replace?j.replace(/^\\s*(\\d*\\.?\\d*)\\s*$/ig,\"$1px\"):j),height:(l.replace?l.replace(/^\\s*(\\d*\\.?\\d*)\\s*$/ig,\"$1px\"):l)};k.style.width=n.width;k.style.height=n.height;return n};var a=function(){f.raiseError(this,\"25081845\",\"run\",\"::RendererManager\",new Error(\"No active renderer\"));return},c={\"undefined\":{render:a,remove:a,update:a,resize:a,config:a,policies:{}}},b={},g=f.renderer={register:function(i,j){if(!i||typeof i.toString!==\"function\"){throw\"#03091436 ~renderer.register() Invalid value for renderer name.\"}i=i.toString().toLowerCase();if(c[i]!==undefined){f.raiseError(f.core,\"03091438\",\"param\",\"::RendererManager>register\",'Duplicate renderer name specified in \"name\"');return false}c[i]=j;return true},userSetDefault:false,setDefault:function(i){if(!i||typeof i.toString!==\"function\"){f.raiseError(f.core,\"25081731\",\"param\",\"::RendererManager>setDefault\",'Invalid renderer name specified in \"name\"');return false}if(c[i=i.toString().toLowerCase()]===undefined){f.raiseError(f.core,\"25081733\",\"range\",\"::RendererManager>setDefault\",\"The specified renderer does not exist.\");return false}this.userSetDefault=false;f.policies.options.renderer=[\"renderer\",i];return true},notifyRender:function(i){var j=f.core.items[(i&&i.id)];if(!j||(i.success===false&&!i.silent)){f.raiseError(f.core.items[i.id],\"25081850\",\"run\",\"::RendererManager\",new Error(\"There was an error rendering the chart. Enable FusionCharts JS debugMode for more information.\"))}j.ref=i.ref;if(i.ref){i.ref.FusionCharts=f.core.items[i.id];if(j.options.containerBackgroundColor){i.ref.style&&(i.ref.style.backgroundColor=j.options.containerBackgroundColor)}}f.raiseEvent(\"internal.DOMElementCreated\",i,j)},protectedMethods:{options:true,attributes:true,src:true,ref:true,constructor:true,signature:true,link:true},getRenderer:function(i){return c[i]},getRendererPolicy:function(j){var i=c[j].policies;return typeof i===\"object\"?i:{}},currentRendererName:function(){return f.policies.options.renderer[1]},update:function(i){b[i.id].update.apply(i,Array.prototype.slice.call(arguments,1))},render:function(i){b[i.id].render.apply(i,Array.prototype.slice.call(arguments,1))},remove:function(i){b[i.id].remove.apply(i,Array.prototype.slice.call(arguments,1))},resize:function(i){b[i.id].resize.apply(i,Array.prototype.slice.call(arguments,1))},config:function(i){b[i.id].config.apply(i,Array.prototype.slice.call(arguments,1))},dispose:function(i){b[i.id].dispose.apply(i,Array.prototype.slice.call(arguments,1))}};var e=function(i){return function(){if(this.ref===undefined||this.ref===null||typeof this.ref[i]!==\"function\"){f.raiseError(this,\"25081617\",\"run\",\"~\"+i+\"()\",\"ExternalInterface call failed. Check whether chart has been rendered.\");return undefined}return this.ref[i].apply(this.ref,arguments)}};f.addEventListener(\"BeforeInitialize\",function(j){var k=j.sender,i;if(typeof k.options.renderer===\"string\"&&c[k.options.renderer.toLowerCase()]===undefined){k.options.renderer=f.policies.options.renderer[1]}k.options.renderer=k.options.renderer.toLowerCase();b[k.id]=c[k.options.renderer];if(b[k.id].initialized!==true&&typeof b[k.id].init===\"function\"){b[k.id].init();b[k.id].initialized=true}f.parsePolicies(k,b[k.id].policies||{},k.args);for(var l in b[k.id].prototype){k[l]=b[k.id].prototype[l]}for(i in b[k.id].events){k.addEventListener(i,b[k.id].events[i])}});f.addEventListener(\"Loaded\",function(o){var n=o.sender,m=o.sender.ref;if(n instanceof f.core){delete n.__state.rendering}if(m===undefined||m===null||typeof m.getExternalInterfaceMethods!==\"function\"||!n.isActive()){return}var k,j;try{k=m.getExternalInterfaceMethods();k=typeof k===\"string\"?k.split(\",\"):[]}catch(l){k=[];f.raiseError(n,\"13111126041\",\"run\",\"RendererManager^Loaded\",Error(\"Error while retrieving data from the chart-object.\"+(l.message&&l.message.indexOf(\"NPObject\")>=0?\" Possible cross-domain security restriction.\":\"\")))}for(j=0;j<k.length;j+=1){if(n[k[j]]===undefined){n[k[j]]=e(k[j])}}});var d=function(i,j){if(typeof i[j]===\"function\"){return function(){return i[j].apply(i,arguments)}}return i[j]};f.addEventListener(\"loaded\",function(k,i){var j=k.sender;if(!j.ref){return}if(!j.options){return}var n=f.renderer.protectedMethods,m=f.renderer.getRenderer(j.options.renderer).protectedMethods,o;for(o in k.sender){if(m&&!(n[o]||m[o]||j.ref[o]!==undefined)){try{j.ref[o]=d(k.sender,o)}catch(l){}}}});var h=function(o,l){var k=document.getElementById(o),j=l.getAttribute(\"id\");if(k===null){return false}if(o===j){return true}var n=l.getElementsByTagName(\"*\");for(var m=0;m<n.length;m+=1){if(n[m]===k){return false}}return true};f.extend(f.core,{render:function(m){var j,i;if((j=window[this.id])&&j.FusionCharts&&j.FusionCharts===this||(j=this.ref)&&j.FusionCharts&&j.FusionCharts===this){f.renderer.dispose(this)}if(window[this.id]!==undefined){f.raiseError(this,\"25081843\",\"comp\",\".render\",new Error(\"#25081843:IECompatibility() Chart Id is same as a JavaScript variable name. Variable naming error. Please use unique name for chart JS variable, chart-id and container id.\"))}var k=this.options.insertMode.toLowerCase()||\"replace\",l;if(m===undefined){m=this.options.containerElementId}if(typeof m===\"string\"){m=document.getElementById(m)}if(m===undefined||m===null){f.raiseError(this,\"03091456\",\"run\",\".render()\",new Error(\"Unable to find the container DOM element.\"));return this}if(h(this.id,m)){f.raiseError(this,\"05102109\",\"run\",\".render()\",new Error(\"A duplicate object already exists with the specific Id: \"+this.id));return this}l=document.createElement(this.options.containerElementType||\"span\");l.setAttribute(\"id\",this.id);if(k!==\"append\"&&k!==\"prepend\"){while(m.hasChildNodes()){m.removeChild(m.firstChild)}}if(k===\"prepend\"&&m.firstChild){m.insertBefore(l,m.firstChild)}else{m.appendChild(l)}this.options.containerElement=m;this.options.containerElementId=m.id;if((i=l.style)){i.lineHeight=\"100%\";i.display=\"inline-block\";i.zoom=\"1\";i[\"*DISPLAY\"]=\"inline\"}f.normalizeCSSDimension(this.width,this.height,l);this.__state.rendering=true;f.raiseEvent(\"BeforeRender\",{container:m,width:this.width,height:this.height,renderer:this.options.renderer},this);f.renderer.render(this,l,f.renderer.notifyRender);return this},remove:function(){f.renderer.remove(this);return this},configure:function(i,j){var k;if(!i){return}else{if(typeof i===\"string\"){k={};k[i]=j}else{k=i}}f.renderer.config(this,k)}},true);f.extend(f.core,{setCurrentRenderer:function(){var i=g.setDefault.apply(g,arguments);g.userSetDefault=true;return i},getCurrentRenderer:function(){return g.currentRendererName.apply(g,arguments)},render:function(){var k=[\"swfUrl\",\"id\",\"width\",\"height\",\"renderAt\",\"dataSource\",\"dataFormat\"],l={},j;if(arguments[0]instanceof f.core){arguments[0].render();return arguments[0]}for(j=0;(j<arguments.length&&j<k.length);j+=1){l[k[j]]=arguments[j]}if(typeof arguments[arguments.length-1]===\"object\"){delete l[k[j-1]];f.extend(l,arguments[arguments.length-1])}if(l.dataFormat===undefined){l.dataFormat=FusionChartsDataFormats.XMLURL}return new f.core(l).render()}},false)}());(function(){var c=FusionCharts([\"private\",\"DataHandlerManager\"]);if(c===undefined){return}window.FusionChartsDataFormats={};var h=\"XmlHttpRequest\",f=c.transcoders={},a={},b={},i=/url$/i,e=function(m,q,l,k){var p=false,n=l.obj,o=l.format,j=l.silent;c.raiseEvent(\"DataLoadRequestCompleted\",{source:h,url:k,data:m,dataFormat:o,cancelDataLoad:function(){p=true;q.abort();this.cancelDataLoad=function(){return false};return true},xmlHttpRequestObject:q.xhr},n);if(p!==true){n.setChartData(m,o,j)}else{c.raiseEvent(\"DataLoadCancelled\",{source:h,url:k,dataFormat:o,xmlHttpRequestObject:q.xhr},n)}},g=function(n,o,l,k){var m=l.obj,j={source:h,url:k,xmlHttpRequestObject:o.xhr,error:n,httpStatus:(o.xhr&&o.xhr.status)?o.xhr.status:-1};c.raiseEvent(\"DataLoadError\",j,m);if(typeof window.FC_DataLoadError===\"function\"){window.FC_DataLoadError(m.id,j)}};c.policies.options.dataSource=[\"dataSource\",undefined];c.policies.options.dataFormat=[\"dataFormat\",undefined];c.policies.options.dataConfiguration=[\"dataConfiguration\",undefined];c.policies.options.showDataLoadingMessage=[\"showDataLoadingMessage\",true];c.addDataHandler=function(j,m){if(typeof j!==\"string\"||f[j.toLowerCase()]!==undefined){c.raiseError(c.core,\"03091606\",\"param\",\"::DataManager.addDataHandler\",new Error(\"Invalid Data Handler Name\"));return}var k={},l=j.toLowerCase();f[l]=m;m.name=j;k[\"set\"+j+\"Url\"]=function(n){return this.setChartDataUrl(n,j)};k[\"set\"+j+\"Data\"]=function(o,n){return this.setChartData(o,j,false,n)};k[\"get\"+j+\"Data\"]=function(){return this.getChartData(j)};window.FusionChartsDataFormats[j]=l;window.FusionChartsDataFormats[j+\"URL\"]=l+\"URL\";c.extend(c.core,k,true)};c.addEventListener(\"BeforeInitialize\",function(j){var k=j.sender;a[k.id]=\"\";b[k.id]={};if(k.options.dataSource!==undefined&&typeof k.options.dataFormat===\"string\"){k.__state.dataSetDuringConstruction=true;k.setChartData(k.options.dataSource,k.options.dataFormat)}});c.addEventListener(\"BeforeDispose\",function(k){var j=k.sender;delete a[k.sender.id];delete b[k.sender.id];if(j&&j.__state&&j.__state.dhmXhrObj){j.__state.dhmXhrObj.abort()}});c.extend(c.core,{setChartDataUrl:function(k,o,j){if(o===undefined||o===null||typeof o.toString!==\"function\"){c.raiseError(c.core,\"03091609\",\"param\",\".setChartDataUrl\",new Error(\"Invalid Data Format\"));return}o=o.toString().toLowerCase();var q,n=this,l=(n.options&&(n.options.renderer===\"flash\")&&n.options.useLegacyXMLTransport)||false,p;if(i.test(o)){q=o.slice(0,-3)}else{q=o;o=o+\"url\"}c.raiseEvent(\"DataLoadRequested\",{source:h,url:k,dataFormat:q,cancelDataLoadRequest:function(){l=true;c.raiseEvent(\"DataLoadRequestCancelled\",{source:h,url:k,dataFormat:q},n);try{if(this.__state&&this.__state.dhmXhrObj){this.__state.dhmXhrObj.abort()}}catch(r){}this.cancelDataLoadRequest=function(){return false};return true}},n);if(l){if(this.__state&&this.__state.dhmXhrObj){try{this.__state.dhmXhrObj.abort()}catch(m){}}return}this.options.dataSource=k;if(!this.__state.dhmXhrObj){this.__state.dhmXhrObj=new c.ajax(e,g)}p=this.__state.dhmXhrObj;p.get(typeof window.decodeURIComponent===\"function\"?window.decodeURIComponent(k):window.unescape(k),{obj:this,format:q,silent:j})},setChartData:function(l,n,j){if(n===undefined||n===null||typeof n.toString!==\"function\"){c.raiseError(c.core,\"03091610\",\"param\",\".setChartData\",new Error(\"Invalid Data Format\"));return}n=n.toString().toLowerCase();var p;if(i.test(n)){this.setChartDataUrl(l,n,j);return}else{this.options.dataSource=l;p=n}this.options.dataFormat=n;var k=f[p],o,m=false;if(typeof k===\"undefined\"){c.raiseError(c.core,\"03091611\",\"param\",\".setChartData\",new Error(\"Data Format not recognized\"));return}o=k.encode(l,this,this.options.dataConfiguration)||{};o.format=o.dataFormat=p;o.dataSource=l;o.cancelDataUpdate=function(){m=true;this.cancelDataUpdate=function(){return false};return true};c.raiseEvent(\"BeforeDataUpdate\",o,this);delete o.cancelDataUpdate;if(m===true){c.raiseEvent(\"DataUpdateCancelled\",o,this);return}a[this.id]=o.data||\"\";b[this.id]={};if(j!==true){if(this.options.safeMode===true&&this.__state.rendering===true&&!this.isActive()){this.__state.updatePending=o;c.raiseWarning(this,\"23091255\",\"run\",\"::DataHandler~update\",\"Renderer update was postponed due to async loading.\")}else{delete this.__state.updatePending;c.renderer.update(this,o)}}this.__state.dataReady=undefined;c.raiseEvent(\"DataUpdated\",o,this)},getChartData:function(k,m){var j,l;if(k===undefined||typeof k.toString!==\"function\"||(j=f[k=k.toString().toLowerCase()])===undefined){c.raiseError(this,\"25081543\",\"param\",\"~getChartData()\",new Error('Unrecognized data-format specified in \"format\"'));return undefined}l=(typeof b[this.id][k]===\"object\")?b[this.id][k]:b[this.id][k]=j.decode(a[this.id],this,this.options.dataConfiguration);return Boolean(m)===true?l:l.data},dataReady:function(){return this.__state.dataReady}},true);c.extend(c.core,{transcodeData:function(l,p,o,n,m){if(!p||typeof p.toString!==\"function\"||!o||typeof o.toString!==\"function\"||f[(o=o.toString().toLowerCase())]===undefined||f[(p=p.toString().toLowerCase())]===undefined){c.raiseError(this,\"14090217\",\"param\",\"transcodeData()\",new Error(\"Unrecognized data-format specified during transcoding.\"));return undefined}var k=f[p].encode(l,this,m),j=f[o].decode(k.data,this,m);if(!(j.error instanceof Error)){j.error=k.error}return n?j:j.data}},false);c.addEventListener(\"Disposed\",function(j){delete b[j.sender.id]});c.addEventListener(\"Loaded\",function(k){var j=k.sender;if(j instanceof c.core&&j.__state.updatePending!==undefined){c.renderer.update(j,j.__state.updatePending);delete j.__state.updatePending}});c.addEventListener(\"NoDataToDisplay\",function(k){var j=k.sender;if(j&&j.__state){j.__state.dataReady=false}});var d=c._interactiveCharts={selectscatter:[true,false],dragcolumn2d:[true,true],dragarea:[true,true],dragline:[true,true],dragnode:[true,true]};c.addEventListener(\"Loaded\",function(k){var o=k.sender,l=o.__state,j,n,m;if(o.chartType&&d[o.chartType()]&&d[o.chartType()][0]){for(j in c.transcoders){m=c.transcoders[j].name;n=\"get\"+m+\"Data\";o[n]=function(p,q){return function(r){var s=this;if(r===false){return q.apply(s)}else{if(s.ref.getUpdatedXMLData){return c.core.transcodeData(s.ref.getUpdatedXMLData(),\"xml\",p)}else{if(s.getData){return s.getData(p)}else{return q.apply(s)}}}}}(j,o.constructor.prototype[n]);o[n]._dynamicdatarouter=true}if(l){l.dynamicDataRoutingEnabled=true}}else{if(l&&l.dynamicDataRoutingEnabled){for(j in c.transcoders){m=c.transcoders[j].name;n=\"get\"+m+\"Data\";if(o.hasOwnProperty(n)&&o[n]._dynamicdatarouter){delete o[n]}}l.dynamicDataRoutingEnabled=false}}})}());var swfobject=window.swfobject=function(){var D=\"undefined\",r=\"object\",S=\"Shockwave Flash\",W=\"ShockwaveFlash.ShockwaveFlash\",q=\"application/x-shockwave-flash\",R=\"SWFObjectExprInst\",x=\"onreadystatechange\",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\\/(\\d+(\\.\\d+)?).*$/,\"$1\")):false,X=!+\"\\v1\",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\\s+(\\S+\\s+\\S+$)/,\"$1\");ag[0]=parseInt(ab.replace(/^(.*)\\..*$/,\"$1\"),10);ag[1]=parseInt(ab.replace(/^.*\\.(.*)\\s.*$/,\"$1\"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,\"$1\"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){try{ab=ad.GetVariable(\"$version\")}catch(Z){}if(ab){X=true;ab=ab.split(\" \")[1].split(\",\");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState==\"complete\")||(typeof j.readyState==D&&(j.getElementsByTagName(\"body\")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener(\"DOMContentLoaded\",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState==\"complete\"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll(\"left\")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName(\"body\")[0].appendChild(C(\"span\"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener(\"load\",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener(\"load\",Y,false)}else{if(typeof O.attachEvent!=D){i(O,\"onload\",Y)}else{if(typeof O.onload==\"function\"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName(\"body\")[0];var aa=C(r);aa.setAttribute(\"type\",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ac;try{ac=Z.GetVariable(\"$version\")}catch(ab){}if(ac){ac=ac.split(\" \")[1].split(\",\");M.pv=[parseInt(ac[0],10),parseInt(ac[1],10),parseInt(ac[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa=o[af].userData||{};aa.success=false;aa.id=Y;if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute(\"width\")||\"0\";ai.height=ae.getAttribute(\"height\")||\"0\";if(ae.getAttribute(\"class\")){ai.styleclass=ae.getAttribute(\"class\")}if(ae.getAttribute(\"align\")){ai.align=ae.getAttribute(\"align\")}var ah={};var X=ae.getElementsByTagName(\"param\");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute(\"name\").toLowerCase()!=\"movie\"){ah[X[ad].getAttribute(\"name\")]=X[ad].getAttribute(\"value\")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var Y,X=null;if(!(document.embeds&&(Y=document.embeds[aa]))){if(!((Y=c(aa))&&Y.nodeName==\"OBJECT\")){Y=window[aa]}}if(!Y){return X}if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}return X}function A(){return!a&&F(\"6.0.65\")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName==\"OBJECT\"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width=\"310\"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height=\"137\"}j.title=j.title.slice(0,47)+\" - Flash Player Installation\";var ad=M.ie&&M.win?\"ActiveX\":\"PlugIn\",ac=\"MMredirectURL=\"+O.location.toString().replace(/&/g,\"%26\")+\"&MMplayerType=\"+ad+\"&MMdoctitle=\"+j.title;if(typeof ab.flashvars!=D){ab.flashvars+=\"&\"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C(\"div\");X+=\"SWFObjectNew\";Y.setAttribute(\"id\",X);ae.parentNode.insertBefore(Y,ae);ae.style.display=\"none\";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C(\"div\");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display=\"none\";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C(\"div\");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName==\"PARAM\")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ak,ai,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ak.id==D){ak.id=aa.id}if(M.ie&&M.win){var aj=new Array();for(var ag in ak){var ae=ag.toLowerCase();if(ak[ag]!=Object.prototype[ag]){if(ae==\"data\"){ai.movie=ak[ag]}else{if(ae==\"styleclass\"){aj.push(' class=\"',ak[ag],'\"')}else{if(ae!=\"classid\"){aj.push(\" \",ag,'=\"',ak[ag],'\"')}}}}}var ah=new Array();for(var af in ai){if(ai[af]!=Object.prototype[af]){ah.push('<param name=\"',af,'\" value=\"',ai[af],'\" />')}}aa.outerHTML='<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\"'+aj.join(\"\")+\">\"+ah.join(\"\")+\"<\/object>\";N[N.length]=ak.id;X=c(ak.id)}else{var Z=C(r);Z.setAttribute(\"type\",q);for(var ac in ak){if(ak[ac]!=Object.prototype[ac]){var ad=ac.toLowerCase();if(ad==\"styleclass\"){Z.setAttribute(\"class\",ak[ac])}else{if(ad!=\"classid\"){Z.setAttribute(ac,ak[ac])}}}}for(var ab in ai){if(ai[ab]!=Object.prototype[ab]&&ab.toLowerCase()!=\"movie\"){e(Z,ab,ai[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C(\"param\");aa.setAttribute(\"name\",X);aa.setAttribute(\"value\",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName==\"OBJECT\"){if(M.ie&&M.win){X.style.display=\"none\";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]==\"function\"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(\".\");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName(\"head\")[0];if(!aa){return}var X=(ad&&typeof ad==\"string\")?ad:\"screen\";if(ab){n=null;G=null}if(!n||G!=X){var Z=C(\"style\");Z.setAttribute(\"type\",\"text/css\");Z.setAttribute(\"media\",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+\" {\"+Y+\"}\"))}}}function w(Z,X){if(!m){return}var Y=X?\"visible\":\"hidden\";if(J&&c(Z)){c(Z).style.visibility=Y}else{v(\"#\"+Z,\"visibility:\"+Y)}}function L(Y){var Z=/[\\\\\\\"<>\\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent(\"onunload\",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{FusionChartsModified:true,registerObject:function(ac,X,ab,Z,aa){var Y=aa||{};if(M.w3&&ac&&X){Y.id=ac;Y.swfVersion=X;Y.expressInstall=ab;Y.callbackFn=Z;Y.userData=aa;o[o.length]=Y;w(ac,false)}else{if(Z){Y.success=false;Y.id=ac;Z(Y)}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ac,ai,af,ah,Y,ab,Z,ae,ag,ad,aa){var X=aa||{};X.success=false;X.id=ai;if(M.w3&&!(M.wk&&M.wk<312)&&ac&&ai&&af&&ah&&Y){w(ai,false);K(function(){af+=\"\";ah+=\"\";var ak={};if(ag&&typeof ag===r){for(var am in ag){ak[am]=ag[am]}}ak.data=ac;ak.width=af;ak.height=ah;var an={};if(ae&&typeof ae===r){for(var al in ae){an[al]=ae[al]}}if(Z&&typeof Z===r){for(var aj in Z){if(typeof an.flashvars!=D){an.flashvars+=\"&\"+aj+\"=\"+Z[aj]}else{an.flashvars=aj+\"=\"+Z[aj]}}}if(F(Y)){var ao=u(ak,an,ai);if(ak.id==ai){w(ai,true)}X.success=true;X.ref=ao}else{if(ab&&A()){ak.data=ab;P(ak,an,ai,ad);return}else{w(ai,true)}}if(ad){ad(X)}})}else{if(ad){ad(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\\?/.test(Z)){Z=Z.split(\"?\")[1]}if(aa==null){return L(Z)}var Y=Z.split(\"&\");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf(\"=\"))==aa){return L(Y[X].substring((Y[X].indexOf(\"=\")+1)))}}}return\"\"},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display=\"block\"}}if(E){E(B)}}a=false}}}}();FusionCharts([\"private\",\"modules.renderer.flash\",function(){var a=this,k=window,p=document,d=\"object\",i=\"string\",o=\"function\",b=function(q){return(typeof q===o)},g=k.encodeURIComponent?function(q){return k.encodeURIComponent(q)}:function(q){return k.escape(q)};try{a.swfobject=k.swfobject;k.swfobject.createCSS(\"object.FusionCharts:focus, embed.FusionCharts:focus\",\"outline: none\")}catch(e){}a.core.options.requiredFlashPlayerVersion=\"8\";a.core.options.flashInstallerUrl=\"http://get.adobe.com/flashplayer/\";a.core.options.installRedirectMessage=\"You need Adobe Flash Player 8 (or above) to view the charts on this page. It is a free, lightweight and safe installation from Adobe Systems Incorporated.\\n\\nWould you like to go to Adobe's website and install Flash Player?\";a.core.hasRequiredFlashVersion=function(q){if(typeof q===\"undefined\"){q=a.core.options.requiredFlashPlayerVersion}return k.swfobject?k.swfobject.hasFlashPlayerVersion(q):undefined};var m=false,h=/.*?\\%\\s*?$/g,j={chartWidth:true,chartHeight:true,mapWidth:true,mapHeight:true},n=function(q){var r=k.swfobject.getObjectById(q),u,s,v,z,t={},x,w,y={};if(!r||typeof r.tagName!==i){return undefined}if((x=r.parentNode)&&x.tagName&&x.tagName.toLowerCase()===d&&x.parentNode){x=x.parentNode}if(!x){return undefined}t.renderAt=x;if(!(r.tagName.toLowerCase()!==d&&r.getAttribute&&(w=r.getAttribute(\"flashvars\")||\"\"))&&r.hasChildNodes&&r.hasChildNodes()){z=r.childNodes;for(u=0,s=z.length;u<s;u+=1){if(z[u].tagName===\"PARAM\"&&(v=z[u].getAttribute(\"name\"))&&v.toLowerCase()===\"flashvars\"){w=z[u].getAttribute(\"value\")||\"\"}}}if(w&&b(w.toString)){w=w.split(/\\=|&/g);t.flashVars={};for(u=0,s=w.length;u<s;u+=2){t.flashVars[w[u]]=w[u+1]}}return t},c=function(s,q){if(q&&q.source===\"XmlHttpRequest\"){return}var r=s.sender;if(r.ref&&b(r.ref.dataInvokedOnSWF)&&r.ref.dataInvokedOnSWF()&&b(r.ref.getXML)){a.raiseWarning(r,\"08300116\",\"run\",\"::DataHandler~__fusioncharts_vars\",\"Data was set in UTF unsafe manner\");r.setChartData(k.unescape(s.sender.ref.getXML({escaped:true})),FusionChartsDataFormats.XML,true);r.flashVars.dataXML=r.getChartData(FusionChartsDataFormats.XML);delete r.flashVars.dataURL}s.sender.removeEventListener(\"DataLoaded\",c)};k.__fusioncharts_dimension=(function(){return function(s){var r,q;return!((r=a.core(s))instanceof a.core&&r.ref&&(q=r.ref.parentNode))?{}:{width:q.offsetWidth*(h.test(r.width)?parseInt(r.width,10)/100:1),height:q.offsetHeight*(h.test(r.height)?parseInt(r.height,10)/100:1)}}}());k.__fusioncharts_vars=function(u,s){var r=a.core.items[u],t,q;if(!(r instanceof a.core)){setTimeout(function(){if(u!==undefined&&(t=n(u))){}else{a.raiseError(a.core,\"25081621\",\"run\",\"::FlashRenderer\",\"FusionCharts Flash object is accessing flashVars of non-existent object.\")}},0);return false}if(typeof s===d){if(r.ref&&b(r.ref.dataInvokedOnSWF)&&r.ref.dataInvokedOnSWF()){if(s.dataURL!==undefined){r.addEventListener(\"DataLoaded\",c)}else{if(s.dataXML!==undefined){s.dataXML=k.unescape(s.dataXML)}}r.__state.flashUpdatedFlashVars=true}else{delete s.dataURL;delete s.dataXML}a.extend(r.flashVars,s);return true}if(r.__state.dataSetDuringConstruction&&r.flashVars.dataXML===undefined&&r.options.dataSource!==undefined&&typeof r.options.dataFormat===i){r.flashVars.dataXML=r.options.dataSource}r.__state.flashInvokedFlashVarsRequest=true;return r.flashVars};k.__fusioncharts_event=function(r,q){setTimeout(function(){a.raiseEvent(r.type,q,a.core.items[r.sender])},0)};var f=function(q){var r=q.sender;if(r.options.renderer!==\"flash\"){return}if(r.width===undefined){r.width=a.renderer.policies.flashVars.chartWidth[1]}if(r.height===undefined){r.height=a.renderer.policies.flashVars.chartHeight[1]}if(r.flashVars.DOMId===undefined){r.flashVars.DOMId=r.id}a.extend(r.flashVars,{registerWithJS:\"1\",chartWidth:r.width,chartHeight:r.height,InvalidXMLText:\"Invalid data.\"});if(Boolean(r.options.autoInstallRedirect)===true&&!k.swfobject.hasFlashPlayerVersion(a.core.options.requiredFlashPlayerVersion.toString())&&m===false){m=true;if(a.core.options.installRedirectMessage&&k.confirm(a.core.options.installRedirectMessage)){k.location.href=a.core.options.flashInstallerUrl}}if(r.options.dataFormat===undefined&&r.options.dataSource===undefined){r.options.dataFormat=FusionChartsDataFormats.XMLURL;r.options.dataSource=\"Data.xml\"}};var l={dataFormat:\"xml\",init:function(){a.addEventListener(\"BeforeInitialize\",f)},policies:{params:{scaleMode:[\"scaleMode\",\"noScale\"],scale:[\"scaleMode\",\"noScale\"],wMode:[\"wMode\",\"opaque\"],menu:[\"menu\",undefined],bgColor:[\"bgColor\",undefined],allowScriptAccess:[\"allowScriptAccess\",\"always\"],quality:[\"quality\",\"best\"],swLiveConnect:[\"swLiveConnect\",undefined],base:[\"base\",undefined],align:[\"align\",undefined],salign:[\"sAlign\",undefined]},flashVars:{lang:[\"lang\",\"EN\"],debugMode:[\"debugMode\",undefined],scaleMode:[\"scaleMode\",\"noScale\"],animation:[\"animate\",undefined]},options:{autoInstallRedirect:[\"autoInstallRedirect\",false],useLegacyXMLTransport:[\"_useLegacyXMLTransport\",false]}},render:function(q,u){if(Boolean(this.flashVars.animation)===true){delete this.flashVars.animation}if(!this.src){a.raiseError(this,\"03102348\",\"run\",\"::FlashRenderer.render\",'Could not find a valid \"src\" attribute. swfUrl or chart type missing.')}var s={},w=this.flashVars.dataXML,v=this.flashVars.dataURL,t,r;a.extend(s,this.flashVars);if(this.flashVars.stallLoad===true){if(this.options.dataFormat===FusionChartsDataFormats.XML){w=this.options.dataSource}if(this.options.dataFormat===FusionChartsDataFormats.XMLURL){v=this.options.dataSource}}if(a.core.debugMode.enabled()&&a.core.debugMode.syncStateWithCharts&&s.debugMode===undefined&&this.options.safeMode){s.debugMode=\"1\"}this.__state.lastRenderedSrc=this.src;s.dataXML=g(w)||\"\";if(a.isXSSSafe(v)){s.dataURL=v||\"\"}else{s.dataURL=g(v)||\"\"}for(t in j){if(s.hasOwnProperty(t)){s[t]=g(s[t])}}if(!(k.swfobject&&k.swfobject.embedSWF&&k.swfobject.FusionChartsModified)){k.swfobject=a.swfobject}if(m&&!a.core.options.installRedirectMessage){r={silent:true}}if(k.swfobject&&k.swfobject.embedSWF){k.swfobject.embedSWF(this.src,q.id,this.width,this.height,a.core.options.requiredFlashPlayerVersion,undefined,s,this.params,this.attributes,u,r)}else{a.raiseError(this,\"1113061611\",\"run\",\"FlashRenderer~render\",Error(\"Could not find swfobject library or embedSWF API\"))}},update:function(s){var q=this.ref,r=s.data;this.flashVars.dataXML=r;if(s.error===undefined){if(this.isActive()&&b(q.setDataXML)){if(this.src!==this.__state.lastRenderedSrc){this.render()}else{q.setDataXML(r,false)}}else{delete this.flashVars.dataURL;delete this.flashVars.animation}}else{if(this.isActive()&&b(q.showChartMessage)){q.showChartMessage(\"InvalidXMLText\")}else{this.flashVars.dataXML=\"<Invalid\"+s.format.toUpperCase()+\">\";delete this.flashVars.dataURL;delete this.flashVars.animation}}},resize:function(){this.flashVars.chartWidth=this.width;this.flashVars.chartHeight=this.height;if(this.ref!==undefined){this.ref.width=this.width;this.ref.height=this.height;if(b(this.ref.resize)){try{this.ref.resize(this.ref.offsetWidth,this.ref.offsetHeight)}catch(q){}}}},config:function(q){a.extend(this.flashVars,q)},dispose:function(){var q;k.swfobject.removeSWF(this.id);if((q=this.ref)){if(q.parentNode){q.parentNode.removeChild(q)}}},protectedMethods:{flashVars:true,params:true,setDataXML:true,setDataURL:true,hasRendered:true,getXML:true,getDataAsCSV:true,print:true,exportChart:true},events:{Loaded:function(r){var q=r.sender;q.flashVars.animation=\"0\"},DataLoadRequested:function(t,r){var u=t.sender,q=r.url,s=false;if(r.dataFormat===FusionChartsDataFormats.XML&&(k.location.protocol===\"file:\"&&Boolean(u.options.safeMode)||Boolean(u.options.useLegacyXMLTransport))){if(u.ref){if(u.ref.setDataURL){u.ref.setDataURL(q,false)}else{a.raiseError(this,\"0109112330\",\"run\",\">FlashRenderer^DataLoadRequested\",Error(\"Unable to fetch URL due to security restriction on Flash Player. Update global security settings.\"))}}else{u.flashVars.dataURL=q}t.stopPropagation();s=true;r.cancelDataLoadRequest();u.addEventListener(\"DataLoaded\",c)}if(u.ref&&u.showChartMessage){delete u.flashVars.stallLoad;if(u.options.showDataLoadingMessage){u.ref.showChartMessage(\"XMLLoadingText\")}}else{if(!s){u.flashVars.stallLoad=true}}},DataLoadRequestCancelled:function(q){var r=q.sender;if(r.ref&&b(r.showChartMessage)){r.ref.showChartMessage()}delete r.flashVars.stallLoad},DataLoadError:function(r,q){var s=r.sender;if(s.ref&&b(s.ref.showChartMessage)&&q.source===\"XmlHttpRequest\"){s.ref.showChartMessage(\"LoadDataErrorText\")}else{delete s.flashVars.dataURL;s.flashVars.dataXML=\"<JSON parsing error>\";delete s.flashVars.stallLoad}},DataLoadRequestCompleted:function(r,q){var s=r.sender;if(q.source!==\"XmlHttpRequest\"){return}delete s.flashVars.stallLoad}}};l.prototype={getSWFHTML:function(){var t=p.createElement(\"span\"),s=p.createElement(\"span\"),r=\"RnVzaW9uQ2hhcnRz\"+(new Date()).getTime();t.appendChild(s);s.setAttribute(\"id\",r);t.style.display=\"none\";p.getElementsByTagName(\"body\")[0].appendChild(t);k.swfobject.embedSWF(this.src,r,this.width,this.height,\"8.0.0\",undefined,this.flashVars,this.params,this.attrs);var q=t.innerHTML.replace(r,this.id);k.swfobject.removeSWF(r);t.parentNode.removeChild(t);return q},setTransparent:function(q){if(typeof q!==\"boolean\"&&q!==null){q=true}this.params.wMode=q===null?\"window\":(q===true?\"transparent\":\"opaque\")},registerObject:function(){},addVariable:function(){a.raiseWarning(this,\"1012141919\",\"run\",\"FlashRenderer~addVariable()\",'Use of deprecated \"addVariable()\". Replace with \"configure()\".');a.core.prototype.configure.apply(this,arguments)},setDataXML:function(q){a.raiseWarning(this,\"11033001081\",\"run\",\"GenericRuntime~setDataXML()\",'Use of deprecated \"setDataXML()\". Replace with \"setXMLData()\".');if(q===undefined||q===null||!b(q.toString)){a.raiseError(this,\"25081627\",\"param\",\"~setDataXML\",'Invalid data type for parameter \"xml\"');return}if(this.ref===undefined||this.ref===null||!b(this.ref.setDataXML)){this.setChartData(q.toString(),FusionChartsDataFormats.XML)}else{this.ref.setDataXML(q.toString())}},setDataURL:function(q){a.raiseWarning(this,\"11033001082\",\"run\",\"GenericRuntime~setDataURL()\",'Use of deprecated \"setDataURL()\". Replace with \"setXMLUrl()\".');if(q===undefined||q===null||!b(q.toString)){a.raiseError(this,\"25081724\",\"param\",\"~setDataURL\",'Invalid data type for parameter \"url\"');return}if(this.ref===undefined||this.ref===null||!b(this.ref.setDataURL)){this.setChartData(q.toString(),FusionChartsDataFormats.XMLURL)}else{this.ref.setDataURL(q.toString())}}};a.renderer.register(\"flash\",l);a.renderer.setDefault(\"flash\")}]);(function(){var t;t=FusionCharts([\"private\",\"modules.renderer.highcharts\"]);if(t===undefined){return}t.extend(t.core.options,{html5ScriptNameSuffix:\".js\",html5ScriptNamePrefix:\"FusionCharts.HC.\",jQuerySourceFileName:\"jquery.min.js\"});var f=window,a=t.core.options,g=\"display: inline-block; *zoom:1; *display:inline; width: 100%; font-family: Verdana; font-size: 10px; color: #666666; text-align: center;\",k=\"modules.renderer.highcharts-\",s=function(){},j=t.hcLib={cmdQueue:[]},i=j.moduleCmdQueue={jquery:[],base:[],charts:[],powercharts:[],widgets:[],maps:[]},q=j.moduleDependencies={},d=j.moduleMeta={jquery:\"jquery.min.js\",base:\"FusionCharts.HC.js\",charts:\"FusionCharts.HC.Charts.js\",powercharts:\"FusionCharts.HC.PowerCharts.js\",widgets:\"FusionCharts.HC.Widgets.js\",maps:\"FusionCharts.HC.Maps.js\"},u={},h=j.getDependentModuleName=function(y){var w=[],x,v;for(x in q){if((v=q[x][y])===undefined){continue}w[v]=x}return w},e=j.injectModuleDependency=function(y,x,w){var v=false;if(x===undefined){x=y}if(!q[y]){q[y]={};if(!i[y]){i[y]=[];j.moduleMeta[y]=a.html5ScriptNamePrefix+x+a.html5ScriptNameSuffix}v=true}q[y][x]=w||0;return v},m=j.hasModule=function(w){var x,v;if(w instanceof Array){for(x=0,v=w.length;x<v;x+=1){if(!Boolean(t.modules[k+w])||(w===\"jquery\"&&!Boolean(window.jQuery))){return false}}return true}if(w===\"jquery\"){return Boolean(window.jQuery)}return Boolean(t.modules[k+w])},c=j.needsModule=function(v,w){return(j.moduleDependencies[v]&&j.moduleDependencies[v][w])!==undefined},o=j.loadModule=function(x,B,w,z){if(!(x instanceof Array)){x=[x]}var v=x.length,y=0,A=function(){if(y>=v){B&&B();return}var E=x[y],D=d[E],C;y+=1;if(!E){w&&w(E)}else{if(m(E)){A();return}else{if(u[E]){t.raiseError(z||t.core,\"1112201445A\",\"run\",\"JavaScriptRenderer~loadModule() \",\"required resources are absent or blocked from loading.\");w&&w(E);return}}}C=(E===\"jquery\")?t.core.options.jQuerySourceFileName:t.core.options[\"html5\"+t.capitalizeString(E)+\"Src\"];t.loadScript(C==undefined?D:C,{success:function(){if(m(E)){A()}else{w&&w(E)}},failure:w&&function(){w(E)}},undefined,true)};A()},l=j.executeWaitingCommands=function(v){var w;while((w=v.shift())){if(typeof w===\"object\"){s[w.cmd].apply(w.obj,w.args)}}},n=j.cleanupWaitingCommands=function(A){var z=A.chartType(),x=h(z),y,w=[],v,B;while((y=x.shift())){v=i[y]||[];while((B=v.shift())){if(typeof B===\"object\"&&B.obj!==A){w.push(B)}}v.concat(w);w=[]}},p=function(v){delete v.sender.jsVars._reflowData;v.sender.jsVars._reflowData={};delete v.sender.jsVars._reflowClean},r=function(){var v=function(){};v.prototype={LoadDataErrorText:\"Error in loading data.\",XMLLoadingText:\"Retrieving data. Please wait\",InvalidXMLText:\"Invalid data.\",ChartNoDataText:\"No data to display.\",ReadingDataText:\"Reading data. Please wait\",ChartNotSupported:\"Chart type not supported.\",LoadingText:\"Loading chart. Please wait\",RenderChartErrorText:\"Unable to render chart.\"};return v.prototype.constructor=v}(),b=function(w,v){var y=w.jsVars,x=y.msgStore;if(v&&w.options.showLoadingMessage){v.innerHTML='<small style=\"'+g+\" padding-top: \"+((parseInt(v.style.height,10)/2)-5)+'px\">'+x.LoadingText+\"<\/small>\";v.style.backgroundColor=y.transparent?w.options.containerBackgroundColor||\"transparent\":\"#ffffff\"}};s.dataFormat=\"json\";s.policies={jsVars:{},options:{showLoadingMessage:[\"showLoadingMessage\",true]}};s.ready=false;s.init=function(){if(!window.jQuery){o(\"jquery\",function(){jQuery.noConflict();if(window.$===undefined){window.$=jQuery}s.init()},undefined,t.core);return}if(!m(\"base\")){o(\"base\",function(){s.ready=true;l(j.cmdQueue)},undefined,t.core);return}s.ready=true};s.render=function(v){b(this,v);j.cmdQueue.push({cmd:\"render\",obj:this,args:arguments})};s.update=function(){j.cmdQueue.push({cmd:\"update\",obj:this,args:arguments})};s.resize=function(){j.cmdQueue.push({cmd:\"resize\",obj:this,args:arguments})};s.dispose=function(){var v=j.cmdQueue,x,w;for(x=0,w=v.length;x<w;x+=1){if(v[x].obj===this){v.splice(x,1);w-=1;x-=1}}};s.config=function(){j.cmdQueue.push({cmd:\"config\",obj:this,args:arguments})};s.load=function(){j.cmdQueue.push({cmd:\"load\",obj:this,args:arguments})};s.protectedMethods={};s.events={BeforeInitialize:function(y){var w=y.sender,z=w.jsVars,x=this.chartType(),v;z.fcObj=w;z.msgStore=z.msgStore||new r();z.cfgStore=z.cfgStore||{};z.previousDrawCount=-1;z.drawCount=0;z._reflowData={};if(!(z.userModules instanceof Array)){v=z.userModules;z.userModules=[];if(typeof v===\"string\"){z.userModules=z.userModules.concat(v.split(\",\"))}}if(!j.chartAPI||!j.chartAPI[x]){z.needsLoaderCall=true}},Initialized:function(w){var v=w.sender,x=v.jsVars;if(x.needsLoaderCall){delete x.needsLoaderCall;s.load.call(v)}},BeforeDataUpdate:p,BeforeDispose:p,BeforeRender:function(w){var v=w.sender,x=v.jsVars;delete x.drLoadAttempted;delete x.waitingModule;delete x.waitingModuleError;p.apply(this,arguments)},DataLoadRequested:function(w,v){var y=w.sender,x=y.jsVars;delete x.loadError;if(y.ref&&y.options.showDataLoadingMessage){if(x.hcObj&&!x.hasNativeMessage&&x.hcObj.showLoading){x.hcObj.showLoading(x.msgStore.XMLLoadingText)}else{if(y.ref.showChartMessage){y.ref.showChartMessage(\"XMLLoadingText\")}else{x.stallLoad=true}}}else{x.stallLoad=true}},DataLoadRequestCompleted:function(v){var x=v.sender,w=x.id;delete w.stallLoad},DataLoadError:function(v){var x=v.sender,w=x.jsVars;delete w.stallLoad;w.loadError=true;if(x.ref&&typeof x.ref.showChartMessage===\"function\"){x.ref.showChartMessage(\"LoadDataErrorText\")}p.apply(this,arguments)}};s._call=function(x,v,w){x.apply(w||f,v||[])};t.extend(s.prototype,{getSWFHTML:function(){t.raiseWarning(this,\"11090611381\",\"run\",\"JavaScriptRenderer~getSWFHTML()\",\"getSWFHTML() is not supported for JavaScript charts.\")},addVariable:function(){t.raiseWarning(this,\"11090611381\",\"run\",\"JavaScriptRenderer~addVariable()\",'Use of deprecated \"addVariable()\". Replace with \"configure()\".');t.core.prototype.configure.apply(this,arguments)},getXML:function(){t.raiseWarning(this,\"11171116291\",\"run\",\"JavaScriptRenderer~getXML()\",'Use of deprecated \"getXML()\". Replace with \"getXMLData()\".');return this.getXMLData.apply(this,arguments)},setDataXML:function(){t.raiseWarning(this,\"11171116292\",\"run\",\"JavaScriptRenderer~setDataXML()\",'Use of deprecated \"setDataXML()\". Replace with \"setXMLData()\".');return this.setXMLData.apply(this,arguments)},setDataURL:function(){t.raiseWarning(this,\"11171116293\",\"run\",\"JavaScriptRenderer~setDataURL()\",'Use of deprecated \"SetDataURL()\". Replace with \"setXMLUrl()\".');return this.setXMLUrl.apply(this,arguments)},hasRendered:function(){return this.jsVars.hcObj&&this.jsVars.hcObj.hasRendered},setTransparent:function(v){var w;if(!(w=this.jsVars)){return}if(typeof v!==\"boolean\"&&v!==null){v=true}w.transparent=v===null?false:(v===true?true:false)}});t.extend(t.core,{_fallbackJSChartWhenNoFlash:function(){if(!window.swfobject.hasFlashPlayerVersion(t.core.options.requiredFlashPlayerVersion)){t.renderer.setDefault(\"javascript\")}},_enableJSChartsForSelectedBrowsers:function(v){if(v===undefined||v===null){return}t.renderer.setDefault((new RegExp(v).test(navigator.userAgent))?\"javascript\":\"flash\")},_doNotLoadExternalScript:function(v){var w,x;for(w in v){x=w.toLowerCase();if(d[x]){u[x]=Boolean(v[w])}}},_preloadJSChartModule:function(v){throw\"NotImplemented()\"}});t.renderer.register(\"javascript\",s);if(window.swfobject&&window.swfobject.hasFlashPlayerVersion&&!window.swfobject.hasFlashPlayerVersion(t.core.options.requiredFlashPlayerVersion)){t.raiseWarning(t.core,\"1204111846\",\"run\",\"JSRenderer\",\"Switched to JavaScript as default rendering due to absence of required Flash Player.\");t.renderer.setDefault(\"javascript\")}}());(function(){var b=FusionCharts([\"private\",\"XMLDataHandler\"]);if(b===undefined){return}var a=function(c){return{data:c,error:undefined}};b.addDataHandler(\"XML\",{encode:a,decode:a})}());var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?\"0\"+n:n}if(typeof Date.prototype.toJSON!==\"function\"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+\"-\"+f(this.getUTCMonth()+1)+\"-\"+f(this.getUTCDate())+\"T\"+f(this.getUTCHours())+\":\"+f(this.getUTCMinutes())+\":\"+f(this.getUTCSeconds())+\"Z\":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,escapable=/[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,gap,indent,meta={\"\\b\":\"\\\\b\",\"\\t\":\"\\\\t\",\"\\n\":\"\\\\n\",\"\\f\":\"\\\\f\",\"\\r\":\"\\\\r\",'\"':'\\\\\"',\"\\\\\":\"\\\\\\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'\"'+string.replace(escapable,function(a){var c=meta[a];return typeof c===\"string\"?c:\"\\\\u\"+(\"0000\"+a.charCodeAt(0).toString(16)).slice(-4)})+'\"':'\"'+string+'\"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value===\"object\"&&typeof value.toJSON===\"function\"){value=value.toJSON(key)}if(typeof rep===\"function\"){value=rep.call(holder,key,value)}switch(typeof value){case\"string\":return quote(value);case\"number\":return isFinite(value)?String(value):\"null\";case\"boolean\":case\"null\":return String(value);case\"object\":if(!value){return\"null\"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)===\"[object Array]\"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||\"null\"}v=partial.length===0?\"[]\":gap?\"[\\n\"+gap+partial.join(\",\\n\"+gap)+\"\\n\"+mind+\"]\":\"[\"+partial.join(\",\")+\"]\";gap=mind;return v}if(rep&&typeof rep===\"object\"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]===\"string\"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?\": \":\":\")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?\": \":\":\")+v)}}}}v=partial.length===0?\"{}\":gap?\"{\\n\"+gap+partial.join(\",\\n\"+gap)+\"\\n\"+mind+\"}\":\"{\"+partial.join(\",\")+\"}\";gap=mind;return v}}if(typeof JSON.stringify!==\"function\"){JSON.stringify=function(value,replacer,space){var i;gap=\"\";indent=\"\";if(typeof space===\"number\"){for(i=0;i<space;i+=1){indent+=\" \"}}else{if(typeof space===\"string\"){indent=space}}rep=replacer;if(replacer&&typeof replacer!==\"function\"&&(typeof replacer!==\"object\"||typeof replacer.length!==\"number\")){throw new Error(\"JSON.stringify\")}return str(\"\",{\"\":value})}}if(typeof JSON.parse!==\"function\"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value===\"object\"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return\"\\\\u\"+(\"0000\"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\\],:{}\\s]*$/.test(text.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g,\"@\").replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g,\"]\").replace(/(?:^|:|,)(?:\\s*\\[)+/g,\"\"))){j=eval(\"(\"+text+\")\");return typeof reviver===\"function\"?walk({\"\":j},\"\"):j}throw new SyntaxError(\"JSON.parse\")}}}());(function(){var a=FusionCharts([\"private\",\"JSON_DataHandler\"]);if(a===undefined){return}if(window.JSON===undefined){a.raiseError(this,\"1113062012\",\"run\",\"JSONDataHandler\",Error(\"Could not find library support for JSON parsing.\"))}a.core.options.allowIESafeXMLParsing=[\"_allowIESafeXMLParsing\",true];var c=\"compactdatamode\",g=\"string\",h=\"function\",e=\"object\",b=function(l){l=l.replace(/^\\s\\s*/,\"\");var j=/\\s/,k=l.length;while(j.test(l.charAt(k-=1))){}return l.slice(0,k+1)},i=function(j){if(j===null||j===undefined||typeof j.toString!==h){return\"\"}j=j.toString().replace(/&/g,\"&amp;\").replace(/\\'/g,\"&#39;\").replace(/\\\"/g,\"&quot;\").replace(/<\/g,\"&lt;\").replace(/>/g,\"&gt;\");return j};var d=(function(){var m={arr:{set:true,trendlines:true,vtrendlines:true,line:{trendlines:true,vtrendlines:true},data:true,dataset:true,lineset:true,categories:true,category:true,linkeddata:true,application:true,definition:true,axis:true,connectors:true,connector:{connectors:true},trendset:true,row:{rows:true},column:{columns:true},label:{labels:true},color:{colorrange:true},dial:{dials:true},pointer:{pointers:true},point:{trendpoints:true},process:{processes:true},task:{tasks:true},milestone:{milestones:true},datacolumn:{datatable:true},text:{datacolumn:true},alert:{alerts:true},groups:{annotations:true},items:{groups:true},shapes:true,shape:{shapes:true},entitydef:true,entity:{entitydef:true}},tag:{chart:\"linkedchart\",map:\"linkedmap\",set:\"data\",vline:{chart:\"data\",dataset:\"data\",categories:\"category\",linkedchart:\"data\"},apply:{application:\"application\"},style:{definition:\"definition\"},marker:{application:\"application\",definition:\"definition\"},entity:{entitydef:\"entitydef\",data:\"data\"},shape:{shapes:\"shapes\"},connector:{connectors:{chart:\"connector\",linkedchart:\"connector\",map:\"connectors\",linkedmap:\"connectors\"}},annotationgroup:{annotations:\"groups\"},annotation:{groups:\"items\"}},attr:{vline:{vline:\"true\"}},ins:{chart:true,map:true},dsv:{dataset:\"data\",categories:\"category\"},text:{target:\"target\",value:\"value\"},group:{styles:{definition:true,application:true},chart:{value:true,target:true},linkedchart:{value:true,target:true},markers:{definition:true,application:true,shapes:true,connectors:true},map:{entitydef:true,data:true},linkedmap:{entitydef:true,data:true}}};var j=1,k=3;var l={append:function(r,p,q,o){if(m.arr[q]&&(m.arr[q]===true||m.arr[q][o]===true)){if(!(p[q]instanceof Array)){p[q]=[]}p[q].push(r)}else{p[q]=r}},child:function(r,q,p,x){var s,u,o,v,w,t;for(s=0;s<q.length;s+=1){o=q[s];u=o.nodeName.toLowerCase();switch(o.nodeType){case j:v=l.attr(o.attributes);t=m.ins[u];if(t===true){w=v;v={};v[u]=w;w=undefined}t=m.attr[u];if(typeof t===e){a.extend(v,t)}t=m.tag[u];if(t){if(typeof t===e&&typeof t[p]===e){w=undefined;for(w in t[p]){if(x[w]){u=t[p][w];break}}}else{if(typeof t===e&&typeof t[p]===g){u=t[p]}else{if(typeof t===g){u=t}}}}if(o.childNodes.length){t=m.group[p];if(t&&t[u]){l.child(r,o.childNodes,u,x)}else{l.child(v,o.childNodes,u,x)}}t=m.group[p];if(!(t&&t[u])){l.append(v,r,u,p)}break;case k:t=m.text[p];if(t){u=t;v=o.data;l.append(v,r,u,p)}t=m.dsv[p];if(typeof t===g&&x.chart&&parseInt(x.chart[c],10)){u=t;v=o.data;r[u]=r[u]?r[u]+v:v}break}}},attr:function(o){var p,q={};if(!o||!o.length){return q}for(p=0;p<o.length;p+=1){q[o[p].nodeName.toLowerCase()]=o[p].value||o[p].nodeValue}return q}};var n=function(p){var u={},r,o,t;if(typeof p!==e&&typeof p.toString!==h){n.errorObject=new TypeError(\"xml2json.parse()\");return u}p=p.toString().replace(/<\\!--[\\s\\S]*?-->/g,\"\").replace(/<\\?xml[\\s\\S]*?\\?>/ig,\"\").replace(/&(?!([^;\\n\\r]+?;))/g,\"&amp;$1\");p=b(p);if(!p){return u}try{if(window.DOMParser){r=(new window.DOMParser()).parseFromString(p,\"text/xml\")}else{if(document.body&&a.core.options.allowIESafeXMLParsing){var q=document.createElement(\"xml\");q.innerHTML=p;document.body.appendChild(q);r=q.XMLDocument;document.body.removeChild(q);q=null}else{r=new ActiveXObject(\"Microsoft.XMLDOM\");r.async=\"false\";r.loadXML(p)}}if(!(r&&r.childNodes&&r.childNodes.length===1&&(o=r.childNodes[0])&&o.nodeName&&(t=o.nodeName.toLowerCase())&&(t===\"chart\"||t===\"map\"))){n.errorObject=new TypeError(\"xml2json.parse()\");return u}}catch(s){n.errorObject=s}if(o){if(o.attributes){u[t]=l.attr(o.attributes)}if(o.childNodes){l.child(u,o.childNodes,t,u)}delete n.errorObject}else{n.errorObject=new TypeError(\"xml2json.parse()\")}return u};return function(o){delete n.errorObject;var p=n(o);return{data:p,error:n.errorObject}}}());var f=(function(){var j={items:{explode:{data:\"set\",groups:{annotations:\"annotationgroup\"},items:{groups:\"annotation\"}},text:{chart:{target:\"target\",value:\"value\"}},dsv:{dataset:{data:\"dataset\"},categories:{category:\"categories\"}},attr:{chart:{chart:\"chart\"},map:{map:\"map\"},linkedmap:{map:\"map\"},linkedchart:{chart:\"chart\"}},group:{styles:{definition:\"style\",application:\"apply\"},map:{data:\"entity\",entitydef:\"entity\"},markers:{definition:\"marker\",application:\"marker\",shapes:\"shape\",connectors:\"connector\"}}},qualify:function(n,m,l){return typeof this.items[n][l]===e?this.items[n][l][m]:this.items[n][l]}};var k=function(o,n,s,m){var r=\"\",l=\"\",t=\"\",u=\"\",v,q,p;if(n&&typeof n.toLowerCase===\"function\"){n=n.toLowerCase()}if(s===undefined&&o[n]){for(v in o[n]){q=v.toLowerCase();if(q===c){m.applyDSV=(o[n][v]==1)}}}if(o instanceof Array){for(v=0;v<o.length;v+=1){if(typeof o[v]===g){u+=i(o[v])}else{u+=k(o[v],n,s,m)}}}else{for(v in o){q=v.toLowerCase();if(o[v]==null){r+=\" \"}else{if(o[v]instanceof Array&&(p=j.qualify(\"group\",q,n))){l+=\"<\"+q+\">\"+k(o[v],p,n,m)+\"<\/\"+q+\">\"}else{if(typeof o[v]===e){if((p=j.qualify(\"attr\",q,n))){t=k(o[v],p,n,m).replace(/\\/\\>/ig,\"\");n=q}else{l+=k(o[v],q,n,m)}}else{if(m.applyDSV&&(p=j.qualify(\"dsv\",q,n))){l+=o[v]}else{if((p=j.qualify(\"text\",q,n))){l+=\"<\"+p+\">\"+o[v]+\"<\/\"+p+\">\"}else{if(q===\"vline\"&&Boolean(o[v])){n=\"vline\"}else{r+=\" \"+q+'=\"'+i(o[v]).toString().replace(/\\\"/ig,\"&quot;\")+'\"'}}}}}}}if((p=j.qualify(\"explode\",s,n))){n=p}u=(t!==\"\"?t:\"<\"+n)+r+(l!==\"\"?\">\"+l+\"<\/\"+n+\">\":\" />\")}return u};return function(n){delete k.errorObject;if(n&&typeof n===g){try{n=JSON.parse(n)}catch(o){k.errorObject=o}}var m=n&&n.map?\"map\":\"chart\",l=k(n,m,undefined,{});return{data:l,error:k.errorObject}}}());a.addDataHandler(\"JSON\",{encode:f,decode:d})}());(function(){var b=FusionCharts([\"private\",\"CSVDataHandler\"]);if(b===undefined){return}var a=function(d){this._data=[];this.rowCount=0;this.columnCount=0;this.configure(d)};a.prototype.set=function(g,d,f){var e;if(this.rowCount<=g){for(e=this.rowCount;e<=g;e+=1){this._data[e]=[]}this.rowCount=g+1}if(this.columnCount<=d){this.columnCount=d+1}this._data[g][d]=f};a.prototype.configure=function(d){this.delimiter=this._decodePseudoCode(d.delimiter,\",\");this.qualifier=this._decodePseudoCode(d.qualifier,'\"');this.eolCharacter=this._decodePseudoCode(d.eolCharacter,\"\\r\\n\")};a.prototype._decodePseudoCode=function(e,d){if(e===undefined||e===null||!e.toString){return d}return e.replace(\"{tab}\",\"\\t\").replace(\"{quot}\",'\"').replace(\"{apos}\",\"'\")};a.prototype.toString=function(){var f,d,e=\"\";for(f=0;f<this.rowCount;f+=1){d=this.qualifier+this._data[f].join(this.qualifier+this.delimiter+this.qualifier)+this.qualifier;e+=(d==='\"\"'?this.eolCharacter:d+this.eolCharacter)}if(this.rowCount>0){e=e.slice(0,e.length-2)}return e};var c=function(m){var o=b.core.transcodeData(m,\"xml\",\"json\")||{},e,h,g,f,d,n;if(typeof o.chart!==\"object\"){o.chart={}}e=new a({separator:o.chart.exportdataseparator,qualifier:o.chart.exportdataqualifier});if(o.dataset&&o.categories&&o.categories[0]&&o.categories[0].category){for(h=0;h<o.dataset.length;h+=1){e.set(0,h+1,o.dataset[h].seriesname);for(g=0,f=0,d=o.categories[0].category.length;g<d;g+=1){if(!o.categories[0].category[g].vline){e.set(f+1,0,o.categories[0].category[g].label||o.categories[0].category[g].name);n=parseFloat(o.dataset[h]&&o.dataset[h].data&&o.dataset[h].data[f]?o.dataset[h].data[f].value:\"\");n=isNaN(n)?\"\":n;e.set(f+1,h+1,n);f+=1}}}}else{if(o.data instanceof Array){e.set(0,1,o.chart&&o.chart.yaxisname?o.chart.yaxisname:\"Value\");d=o.data.length;for(h=0;h<d;h+=1){if(!o.data[h].vline){e.set(h+1,0,o.data[h].label||o.data[h].name);n=parseFloat(o.data[h].value?o.data[h].value:\"\");n=isNaN(n)?\"\":n;e.set(h+1,1,n)}}}}if(e.rowCount>0){e.set(0,0,o.chart&&o.chart.xaxisname?o.chart.xaxisname:\"Label\")}return{data:e.toString(),error:undefined}};b.addDataHandler(\"CSV\",{encode:function(d,e){b.raiseError(e,\"0604111215A\",\"run\",\"::CSVDataHandler.encode()\",\"FusionCharts CSV data-handler only supports encoding of data.\");throw\"FeatureNotSupportedException()\"},decode:c});b.core.addEventListener(\"Loaded\",function(d){var e=d.sender;if(!e||!e.options){return}if(e.options.renderer!==\"javascript\"){return}if(!e.getDataAsCSV){e.getDataAsCSV=e.ref.getDataAsCSV=e.getCSVData}})}());(function(){var a=FusionCharts([\"private\",\"DynamicChartAttributes\"]);if(a===undefined){return}a.extend(a.core,{setChartAttribute:function(d,g){if(typeof d===\"string\"){var c=arguments[0];d={};d[c]=g}else{if(d===null||typeof d!==\"object\"){return}}var f=0,e=this.getChartData(FusionChartsDataFormats.JSON),h,b=e.chart||e.graph||e.map||{};for(h in d){f+=1;if(d[h]===null){delete b[h.toLowerCase()];continue}b[h.toLowerCase()]=d[h]}if(f>0){if(typeof b.animation===\"undefined\"){b.animation=\"0\"}this.setChartData(e,FusionChartsDataFormats.JSON)}},getChartAttribute:function(d){var b=(b=this.getChartData(FusionChartsDataFormats.JSON)).chart||b.graph||b.map;if(arguments.length===0||d===undefined||b===undefined){return b}var e,c;if(typeof d===\"string\"){e=b[d.toString().toLowerCase()]}else{if(d instanceof Array){e={};for(c=0;c<d.length;c+=1){e[d[c]]=b[d[c].toString().toLowerCase()]}}else{a.raiseError(this,\"25081429\",\"param\",\"~getChartAttribute()\",'Unexpected value of \"attribute\"')}}return e}},true)}());(function(){var b=FusionCharts([\"private\",\"api.LinkManager\"]);if(b===undefined){return}b.policies.link=[\"link\",undefined];var e=window.FusionChartsDOMInsertModes={REPLACE:\"replace\",APPEND:\"append\",PREPEND:\"prepend\"},a={},d=function(f,g){this.items={};this.root=f;this.parent=g;if(g instanceof b.core){this.level=this.parent.link.level+1}else{a[f.id]=[{}];this.level=0}},c=function(g,f){return(g.options.containerElement===f.options.containerElement||g.options.containerElementId===f.options.containerElementId)&&g.options.insertMode===e.REPLACE};d.prototype.configuration=function(){var f=a[this.root.id][this.level]||(a[this.root.id][this.level]={});return f};b.extend(b.core,{configureLink:function(g,h){var f;if(g instanceof Array){for(f=0;f<g.length;f+=1){if(typeof a[this.link.root.id][f]!==\"object\"){a[this.link.root.id][f]={}}b.extend(a[this.link.root.id][f],g[f])}a[this.link.root.id].splice(g.length)}else{if(typeof g===\"object\"){if(typeof h!==\"number\"){h=this.link.level}if(a[this.link.root.id][h]===undefined){a[this.link.root.id][h]={}}b.extend(a[this.link.root.id][h],g)}else{b.raiseError(this,\"25081731\",\"param\",\"~configureLink()\",\"Unable to update link configuration from set parameters\")}}}},true);b.addEventListener(\"BeforeInitialize\",function(f){if(!(f.sender.link instanceof d)){f.sender.link=new d(f.sender)}else{if(f.sender.link.parent instanceof b.core){f.sender.link.parent.link.items[f.sender.id]=f.sender}}});b.addEventListener(\"LinkedChartInvoked\",function(h,f){var i=h.sender,j=i.clone({dataSource:f.data,dataFormat:f.linkType,link:new d(i.link.root,i)},true),g=f.alias;if(g){if(!j.swfSrcPath&&j.swfUrl){j.swfSrcPath=j.swfUrl.replace(/(.*?)?[^\\/]*\\.swf.*?/ig,\"$1\")}j.type=g}if(i.args&&parseInt(i.args.animate,10)!==0){delete j.animate}b.extend(j,i.link.configuration());b.raiseEvent(\"BeforeLinkedItemOpen\",{level:i.link.level},i.link.root);if(b.core.items[j.id]instanceof b.core){b.core.items[j.id].dispose()}var k=new b.core(j);if(!c(k,i)&&!(i.options.overlayButton&&i.options.overlayButton.message)){if(typeof i.options.overlayButton!==\"object\"){i.options.overlayButton={}}i.options.overlayButton.message=\"Close\"}k.render();b.raiseEvent(\"LinkedItemOpened\",{level:i.link.level,item:k},i.link.root)});b.addEventListener(\"OverlayButtonClick\",function(j,g){if(g.id!==\"LinkManager\"){return}var h=j.sender,k=h.link.level-1,i=h.link.parent,f=h.link.root;b.raiseEvent(\"BeforeLinkedItemClose\",{level:k,item:h},f);setTimeout(function(){if(b.core.items[h.id]){h.dispose()}b.raiseEvent(\"LinkedItemClosed\",{level:k},f)},0);if(!i.isActive()&&c(h,i)){i.render()}});b.addEventListener(\"Loaded\",function(g){var h=g.sender;if(!h||h.link===undefined){return}if(h.link.root===h||!(h.link.parent instanceof b.core)){return}if(!(h.ref&&typeof h.ref.drawOverlayButton===\"function\")){b.raiseWarning(h,\"04091602\",\"run\",\"::LinkManager^Loaded\",\"Unable to draw overlay button on object. -\"+h.id);return}var f=b.extend({show:true,id:\"LinkManager\"},h.link.parent.options.overlayButton);b.extend(f,h.link.parent.link.configuration().overlayButton||{});h.ref.drawOverlayButton(f)});b.addEventListener(\"BeforeDispose\",function(g){var f=g.sender;if(!(f&&f.link instanceof d)){return}if(f.link.parent instanceof b.core){delete f.link.parent.link.items[g.sender.id]}delete a[f.id]});FusionChartsEvents.LinkedItemOpened=\"linkeditemopened\";FusionChartsEvents.BeforeLinkedItemOpen=\"beforelinkeditemopen\";FusionChartsEvents.LinkedItemClosed=\"linkeditemclosed\";FusionChartsEvents.BeforeLinkedItemClose=\"beforelinkeditemclose\"}());(function(){var b=FusionCharts([\"private\",\"PrintManager\"]);if(b===undefined){return}var d={enabled:false,invokeCSS:true,processPollInterval:2000,message:\"Chart is being prepared for print.\",useExCanvas:false,bypass:false};var j={getCanvasElementOf:function(s,r,o){if(s.__fusioncharts__canvascreated!==true){var q=document.createElement(\"canvas\"),p=b.core.items[s.id].attributes[\"class\"];if(d.useExCanvas&&G_vmlCanvasManager){G_vmlCanvasManager.initElement(q)}q.setAttribute(\"class\",p);q.__fusioncharts__reference=s.id;s.parentNode.insertBefore(q,s.nextSibling);s.__fusioncharts__canvascreated=true}s.nextSibling.setAttribute(\"width\",r||s.offsetWidth||2);s.nextSibling.setAttribute(\"height\",o||s.offsetHeight||2);return s.nextSibling},removeCanvasElementOf:function(s){var p=s.ref&&s.ref.parentNode?s.ref.parentNode:(s.options.containerElement||window.getElementById(s.options.containerElementId));if(!p){return}var r=p.getElementsByTagName(\"canvas\"),o,q;for(q=0,o=r.length;q<o;q+=1){if(r[q].__fusioncharts__reference===s.id){p.removeChild(r[q]);if(s.ref){s.ref.__fusioncharts__canvascreated=false}}}},rle2rgba:function(y,s,p){if(typeof p!==\"string\"){p=\"FFFFFF\"}var z=y.split(/[;,_]/),q,t,o,u,v,w=0;for(t=0;t<z.length;t+=2){if(z[t]===\"\"){z[t]=p}z[t]=(\"000000\"+z[t]).substr(-6);o=parseInt(\"0x\"+z[t].substring(0,2),16);u=parseInt(\"0x\"+z[t].substring(2,4),16);v=parseInt(\"0x\"+z[t].substring(4,6),16);for(q=0;q<z[t+1];q+=1){s[w]=o;s[w+1]=u;s[w+2]=v;s[w+3]=255;w+=4}}return s},rle2array:function(s,q){if(typeof q!==\"string\"){q=\"FFFFFF\"}var o=s.split(\";\"),r,p;for(r in o){o[r]=o[r].split(/[_,]/);for(p=0;p<o[r].length;p+=2){o[r][p]=o[r][p]===\"\"?q:(\"000000\"+o[r][p]).substr(-6)}}return o},drawText:function(q,u,t,o){var r=q.getContext(\"2d\"),p=t||2,s=o||2;r.clearRect(0,0,p,s);r.textBaseline=\"middle\";r.textAlign=\"center\";r.font=\"8pt verdana\";r.fillStyle=\"#776666\";if(typeof r.fillText===\"function\"){r.fillText(u,p/2,s/2)}else{if(typeof r.mozDrawText===\"function\"){r.translate(p/2,s/2);r.mozDrawText(u)}else{b.raiseWarning(b.core,\"25081803\",\"run\",\"::PrintManager>lib.drawText\",\"Canvas text drawing is not supported in browser\")}}return true},appendCSS:function(o){var p=document.createElement(\"style\");p.setAttribute(\"type\",\"text/css\");if(typeof p.styleSheet===\"undefined\"){p.appendChild(document.createTextNode(o))}else{p.styleSheet.cssText=o}return document.getElementsByTagName(\"head\")[0].appendChild(p)}};j.drawRLE=function(r,w,p,A,s){p=p||2;A=A||2;r.setAttribute(\"width\",p);r.setAttribute(\"height\",A);var q=r.getContext(\"2d\"),o;if(typeof q.putImageData===\"function\"&&typeof q.createImageData===\"function\"){o=q.createImageData(p,A);j.rle2rgba(w,o.data,s);q.putImageData(o,0,0)}else{o=j.rle2array(w,s);var v=0,u=0,t=0;for(u in o){v=0;for(t=0;t<o[u].length;t+=2){q.fillStyle=\"#\"+o[u][t];q.fillRect(v,u,o[u][t+1],1);v+=parseInt(o[u][t+1],10)}}}return true};var i={styles:{print:\"canvas.FusionCharts{display:none;}@media print{object.FusionCharts{display:none;}canvas.FusionCharts{display:block;}}\",error:\"canvas.FusionCharts{display:none;}\",normal:\"\"},cssNode:undefined},a={},n={},m=0,e;i.invoke=function(o){if(typeof this.styles[o]!==\"undefined\"){o=this.styles[o]}if(typeof o!==\"undefined\"){if(this.cssNode!==undefined&&this.cssNode.parentNode!==undefined){this.cssNode.parentNode.removeChild(this.cssNode)}i.cssNode=j.appendCSS(o)}};var h=function(q){var s=q.sender.ref,o,p;if(s===undefined||typeof s.prepareImageDataStream!==\"function\"||s.prepareImageDataStream()===false){e(q.sender);return}if(!a[q.sender.id]){a[q.sender.id]=s;m+=1;if(m===1){b.raiseEvent(\"PrintReadyStateChange\",{ready:false,bypass:d.bypass},q.sender)}}try{o=s.offsetWidth;p=s.offsetHeight;j.drawText(j.getCanvasElementOf(s,o,p),d.message,o,p)}catch(r){i.invoke(\"error\");b.raiseError(q.sender,\"25081807\",\"run\",\"::PrintManager>onDrawComplete\",\"There was an error while showing message to user via canvas.\")}},l=function(p,o){try{if(j.drawRLE(j.getCanvasElementOf(p.sender.ref,o.width,o.height),o.stream,o.width,o.height,o.bgColor)===true){if(a[p.sender.id]){delete a[p.sender.id];m-=1;if(m===0){b.raiseEvent(\"PrintReadyStateChange\",{ready:true,bypass:d.bypass},p.sender)}}}}catch(q){i.invoke(\"error\");b.raiseError(p.sender,\"25081810\",\"run\",\"::PrintManager>onImageStreamReady\",\"There was an error while drawing canvas.\")}},f=function(o){j.removeCanvasElementOf(o.sender)},c=function(p){var o=p?\"addEventListener\":\"removeEventListener\";b.core[o](\"ImageStreamReady\",l);b.core[o](\"DrawComplete\",h);b.core[o](\"BeforeDispose\",f)},g=function(){var o;if(d.invokeCSS===true){i.invoke(\"print\")}for(o in b.core.items){e(b.core.items[o]);e()}},k=function(){var o;i.invoke(\"error\");for(o in b.core.items){j.removeCanvasElementOf(b.core.items[o])}if(!d.bypass){b.raiseEvent(\"PrintReadyStateChange\",{ready:false,bypass:d.bypass})}i.invoke(\"normal\")};e=function(p){var o;if(p instanceof b.core){n[p.id]=p;return}for(o in n){h({sender:n[o]},{});delete n[o]}};b.extend(b.core,{printManager:{configure:function(o){b.extend(d,o||{})},isReady:function(){if(d.bypass){return true}if(m>0||!d.enabled){return false}var p,o;for(p in b.core.items){if((o=b.core.items[p].ref)!==undefined&&o.hasRendered&&o.hasRendered()===false){return false}}return true},enabled:function(o){if(o===undefined){return d.enabled}if(\"\\v\"===\"v\"||b.renderer.currentRendererName()!==\"flash\"||typeof document.createElement(\"canvas\").getContext!==\"function\"){d.bypass=true;b.raiseEvent(\"PrintReadyStateChange\",{ready:true,bypass:d.bypass});b.raiseWarning(b.core,\"25081816\",\"run\",\".printManager.enabled\",\"printManager is not compatible with your browser\");return d.enabled}d.bypass=false;c(o);if(o===true){g()}else{k()}return(d.enabled=o)},managedPrint:function(o){if(d.bypass){window.print();return}if(!b.core.printManager.isReady()){if(b.core.printManager.enabled(true)!==true){window.print();return}b.addEventListener(\"PrintReadyStateChange\",b.core.printManager.managedPrint);return}if(typeof o===\"object\"&&o.ready!==true){return}b.removeEventListener(\"PrintReadyStateChange\",b.core.printManager.managedPrint);window.print()}}},false);FusionChartsEvents.PrintReadyStateChange=\"printreadystatechange\"}());","js/thirdparty/fusioncharts/FusionCharts_HC_AttrGrid.js":"\n(function(d){var c=d([\"private\",\"SmartbiAttrGrid\"]);if(c===undefined){return}var e=window,a=c.hcLib,f=a.Highcharts,b=null;getAttrGridClass(f)})(FusionCharts);function getAttrGridClass(a){var f=a.merge,g=\"\",d=\"M\",e=\"L\",i=Math.ceil,b=a.docMode8,h=a.each;var c=function(j){this.chart=j;this.init()};a.AttrGrid=c;c.prototype.init=function(){var n=this,m=n.chart,l=m.options.chart&&m.options.chart.plotBorderColor,j={enabled:true,showGridLine:true,gridLineThickness:1,gridLineColor:l||\"#999999\",rowHeight:20,rowPadding:2.5};var k=this.chart.options.attrGrid;n.chart.options.attrGrid=k=f(j,k);if(!k.enabled){return}n.renderer=n.chart.renderer;n.options=k};c.prototype.destroy=function(){var p=this,o=p.attrGridGroup,n=p.verticalGridLineGroup,s=p.horizontalGridLineGroup,k=p.alternateRowRectGroup,t=p.alternateRowRects,l=p.verticalGridLines,r=p.horizontalGridLines,j=p.dataRows;if(j&&j.length>0){for(var m=j.length-1;m>=0;m--){var u=j[m];if(u.attrGridRowGroup){u.attrGridRowGroup=u.attrGridRowGroup.destroy()}if(u.attrGridLabels){for(var q=u.attrGridLabels.length-1;q>=0;q--){u.attrGridLabels[q]=u.attrGridLabels[q].destroy()}u.attrGridLabels=null}h([\"legendLine\",\"legendSymbol\",\"customSymbol\"],function(v){if(u[v]){u[v].destroy()}})}p.dataRows=null}if(l){for(var m=l.length-1;m>=0;m--){l[m]=l[m].destroy()}p.verticalGridLines=null}if(r){for(var m=r.length-1;m>=0;m--){r[m]=r[m].destroy()}p.horizontalGridLines=null}if(t){for(var m=t.length-1;m>=0;m--){t[m]=t[m].destroy()}p.alternateRowRects=null}if(s){p.horizontalGridLineGroup=s.destroy()}if(n){p.verticalGridLineGroup=n.destroy()}if(k){p.alternateRowRectGroup=k.destroy()}if(o){p.attrGridGroup=o.destroy()}};c.prototype.getHeight=function(){var j=this.options;var k=this.getDataset();if(k&&k.length>0){return(j.rowHeight-0)*k.length}return 0};c.prototype.render=function(){var ad=\"none\",V=!a.hasSVG&&!a.hasTouch,x=this,am=x.chart,ac=am.renderer,W=am.options.attrGrid,ai=x.getDataset(),M=x.getXAxisGridLines(),af=am.plotTop+am.plotHeight,ap=5,G=af,ag=0,E=(W.marginTop||0),S=am.plotLeft+am.plotWidth-ap,q=W.rowPadding-0,p=W.rowHeight-0,A=13,I=q,z={stroke:W.gridLineColor,\"stroke-width\":W.gridLineThickness,zIndex:1},k=null,F,L,K,s=[],aa=[],ah=[],t=[];if(!ai||!ai.length||!M||!M.length){return}x.alternateRowRects=s;x.horizontalGridLines=ah;x.verticalGridLines=aa;x.dataRows=t;if(!k){x.attrGridGroup=k=ac.g(\"attrgrid\").add();k.translate(ap,G)}if(W.alternateRowBgColor){x.alternateRowRectGroup=K=ac.g(\"attrgrid-vgridline\").add(k)}if(!F){x.verticalGridLineGroup=F=ac.g(\"attrgrid-vgridline\").add(k)}if(!L){x.horizontalGridLineGroup=L=ac.g(\"attrgrid-hgridline\").add(k)}var T=M[0].options.label,y=W.dataLabels,r=(y&&y.align)||T.textAlign||T.align,o=f(T.style,y&&y.style);if(T.rotation!=0&&r==\"right\"){r=\"center\"}var v,an;v=an=E;for(var ak=0,O=ai.length;ak<O;ak++){var al=ai[ak],P,aj=[];t.push(al);al.attrGridRowGroup=P=ac.g(\"attrgrid-row\").add(k);al.attrGridLabels=aj;var D=I;if(al.type){var ab={startX:ag+I,startY:v+(V?q:q*2),symbolWidth:A};x.conf=ab;ab.cx=ab.startX+A/2;ab.cy=ab.startY+(p-q)/2;x.renderSeriesSymbol(al,ab);D=A+I*2}var u=ac.text(al.name,0,0);if(b){u.add(P).css(o)}else{u.css(o).add(P)}an=an+p-q;u.attr({y:an,x:ag+D,zIndex:3});aj.push(u);var Y=v+(V?0:q),Z=ag,n=S+ag;var m=ac.path([d,Z,Y,e,n,Y]).attr(z).add(L);ah.push(m);if(ak==O-1){var m=ac.path([d,Z,Y+p,e,n,Y+p]).attr(z).add(L);ah.push(m)}if(W.alternateRowBgColor&&ak%2==1){var R=ac.rect(Z,Y,S,p,0,0).attr({stroke:W.gridLineColor,\"stroke-width\":0,fill:W.alternateRowBgColor,zIndex:2}).add(K);s.push(R)}for(var C=0,Q=al.data.length;C<Q;C++){var B=al.data[C],N=M[C];var X=B.attrDisplayValue||B.y;var l=ac.text(X?X:\"\",0,0).attr({x:N.x,y:an,align:r});if(b){l.add(P).css(o)}else{l.css(o).add(P)}aj.push(l)}v+=p;an=v}if(M&&M.length>0){var j=ac.path([d,ag,E+(V?0:q),e,ag,v+(V?0:q)]).attr(z).add(F);aa.push(j);var w=[],U=x.getXAxis(),ae=am.plotWidth/M.length;for(var ak=0,O=M.length;ak<=O;ak++){var J=am.plotLeft-ap+ak*ae,ao=0,H=J;y2=v+(V?0:q);var j=ac.path([d,J,ao,e,H,y2]).attr(z).add(F);aa.push(j)}}};c.prototype.getXAxisGridLines=function(){var p=this.chart,j=this.getXAxis(),n=j&&j.options.plotLines,q=[],l=p.plotLeft;if(n&&n.length>0){for(var m=0,o=n.length;m<o;m++){var r=n[m];if(r.isGrid){var k={};k.value=r.value;k.x=l+j.translate(k.value);k.y=r.y;k.options=r;q.push(k)}}}return q};c.prototype.getXAxis=function(){var j=this.chart,k=j.xAxis&&j.xAxis[0];return k};c.prototype.getDataset=function(){var o=[],l=this.chart.series,n=this.options.dataset||[];if(l&&l.length>0){for(var k=0,j=l.length;k<j;k++){var m=l[k];if(this.acceptChartType(m.type)){o.push(m)}}return o.concat(n)}return null};c.prototype.acceptChartType=function(k){var j=/^(line|area|spline|areaspline|column)$/.test(k);return j&&!this.chart.inverted};c.prototype.renderSeriesSymbol=function(m,r){var t=this,s=t.renderer,q=a.getSymbolPath,x=m.options,p=r.startX,n=r.startY,k=r.cy,l=r.symbolWidth,v,o,j=m.attrGridRowGroup,w=m;o=m.simpleSymbol;if(!o&&x&&x.lineWidth){v={\"stroke-width\":x.lineWidth,zIndex:3};if(x.dashStyle){v.dashstyle=x.dashStyle}w.legendLine=s.path([d,p,k,e,p+l,k]).attr(v).add(j)}if(o){var u=q(p,n,l,l,m.type,w,s);w.customSymbol=s.path(u.path).attr({\"stroke-width\":u.strokeWidth,zIndex:3}).add(j);w.customSymbol.symbolAttr={stroke:u.strokeColor,fill:u.color}}else{if(x&&x.marker&&x.marker.enabled){legendSymbol=s.symbol(w.symbol,r.cx,k,l/2).attr({zIndex:3}).add(j);w.legendSymbol=legendSymbol}}t.colorizeItem(m,true)};c.prototype.colorizeItem=function(m,l){var p=this,t=m,u=p.options,n=p.conf,o=t.legendLine,k=t.legendSymbol,r=\"#cccccc\",q=l?t.color:r,j=t.customSymbol,s=l?t.pointAttr[g]:{stroke:r,fill:r};if(o){o.attr({stroke:q,\"stroke-width\":2,\"stroke-opacity\":1})}if(k){k.attr(s);k.attr({r:i(n.symbolWidth/(o?4:2)),\"stroke-width\":1})}if(j){j.attr(l?j.symbolAttr:s)}}};","js/smartbi/chart/ChartViewUtil.js":"\nvar Configuration=jsloader.resolve(\"Configuration\");var ChartView=null;var ChartViewDemo=null;var ChartViewUtil={getChartClassName:function(chartType){var mapClassName={chartViewClassName:\"smartbi.map.MapView\",chartClassName:\"smartbi.map.SmartbiMap\"}\nif(chartType=='map'||chartType==\"airlinemap\"){return mapClassName;}\nvar chartPlugIn=Configuration.extensionPoints.chartPlugIn;for(var plugInd in chartPlugIn){var configPoint=chartPlugIn[plugInd].chartConfig;for(var ind in configPoint){var configClass=configPoint[ind];if(chartType==configClass.type){return configClass;}}}\nvar defaultClassName={chartViewClassName:\"smartbi.chart.ChartView\",chartClassName:\"smartbi.chart.Chart\",chartViewDemoClassName:\"smartbi.chartsetting.ChartSettingViewDemo\"}\nreturn defaultClassName;},initChartView:function(chartType,container,chartClientId,chartDefine,toolbarOption,settingControl,context){var viewOptions={clientId:chartClientId,chartDefine:chartDefine,renderTo:container,settingControl:settingControl,context:context};if(toolbarOption){viewOptions.toolbar=toolbarOption;}\nvar chartClassName=this.getChartClassName(chartType);ChartView=jsloader.resolve(chartClassName.chartViewClassName);var chartView=new ChartView(viewOptions,chartType,chartClassName.chartClassName);return chartView;},initChartViewDemo:function(chartType,container){var chartClassName=this.getChartClassName(chartType);var ChartViewDemo=jsloader.resolve(chartClassName.chartViewDemoClassName);var chartViewDemo=new ChartViewDemo(chartType,container);return chartViewDemo;},getAllChartPlugIn:function(){var chartPlugIn=Configuration.extensionPoints.chartPlugIn;var defaultChartConfig=[{id:\"system\",name:\"系统默认\",iconUrl:\"img/chart/charttype/all.png\",chartTemplatesClassName:\"smartbi.ChartTypeTemplates\",defaultChartType:\"column\"}]\nreturn defaultChartConfig.concat(chartPlugIn);},hasOtherChartPlugIn:function(){var chartPlugIn=Configuration.extensionPoints.chartPlugIn;if(!chartPlugIn||(chartPlugIn.length==1&&chartPlugIn[0].id==\"system\")){return false;}\nreturn true;},initChartTemplates:function(chartType){var chartClassName=this.getChartClassName(chartType);var ChartViewDemo=jsloader.resolve(chartClassName.chartViewDemoClassName);var chartViewDemo=new ChartViewDemo(chartType,container);return chartViewDemo;},getChartTemplatesClassName:function(chartType){var chartPlugIn=Configuration.extensionPoints.chartPlugIn;for(var plugInd in chartPlugIn){var configPoint=chartPlugIn[plugInd].chartConfig;for(var ind in configPoint){var configClass=configPoint[ind];if(chartType==configClass.type){return chartPlugIn[plugInd].chartTemplatesClassName;}}}\nreturn\"smartbi.ChartTypeTemplates\";}};","js/smartbi/chart/abstract/AbstractChartConfig.js":"\nvar AbstractChartConfig={};AbstractChartConfig.commonChartConfig={chartDatas:{key:\"chartDatas\",name:\"数据设置\",className:\"smartbi.chart.abstract.AbstractDataSetSetting\"}};AbstractChartConfig.getChartConfig=function(chartType){var newChartConfig=jQuery.extend(true,{},AbstractChartConfig.commonChartConfig);return newChartConfig;}","js/smartbi/chart/abstract/AbstractChartTypeTemplates.js":"\nif(typeof Class=='undefined'){jsloader.resolve(\"freequery.lang.Class\",true);}\nvar AbstractChartTypeTemplates=Class.extend({init:function(){this.initTemplatesGroup();this.initTemplates();},destroy:function(){delete this.templates;delete this.templatesGroup;},initTemplates:function(){this.templatesGroup={};return this.templatesGroup;},initTemplatesGroup:function(){this.templates={};return this.templates;},getTemplateByReportType:function(reportType){return this.initTemplates();;},getTemplateByType:function(chartType,filterFn){this.initTemplates();var r=this.templates[chartType];var t=typeof filterFn=='function'?filterFn.call(null,r):r;if(t&&t.length>0)return t[0];},getTemplateById:function(id){this.initTemplates();for(var prop in this.templates){if(prop==\"bofClassName\")\ncontinue;var tp=this.templates[prop];var len=tp.length;for(var i=0;i<len;i++){if(tp[i].id==id)\nreturn tp[i];}}\nreturn null;},getGroupTemplatesByReportType:function(reportType){var templates=this.getTemplateByReportType(reportType);return this.groupTemplates(templates);},getToTemplatesByChartOption:function(option,chartType,reportType){var allTemplates=this.getTemplateByReportType(reportType);return this.groupTemplates(allTemplates);},groupTemplates:function(templates){var tpG=this.initTemplatesGroup(),otherTpGItem=null,tpGAllTemplateKeys=[],resultGroup={};function addGroupItem(targetGroup,gpKey,gpItem){if(!targetGroup[gpKey]){targetGroup[gpKey]={};var t=targetGroup[gpKey];for(var key in gpItem){t[key]=gpItem[key];}\nt['templates']={};}}\nfor(var key in tpG){var tpGItem=tpG[key];if(tpGItem.templateKeys&&tpGItem.templateKeys.length>0){tpGAllTemplateKeys=tpGAllTemplateKeys.concat(tpGItem.templateKeys);for(var j=0;j<tpGItem.templateKeys.length;j++){var tpItem=templates[tpGItem.templateKeys[j]];if(tpItem){addGroupItem(resultGroup,key,tpGItem);resultGroup[key]['templates'][tpGItem.templateKeys[j]]=tpItem;}}}else{otherTpGItem=tpGItem;}}\nvar notOtherKeys=tpGAllTemplateKeys.join(',')+',';if(otherTpGItem!=null){var otherKey='other';for(var key in templates){if(notOtherKeys.indexOf(key)<0){addGroupItem(resultGroup,otherKey,otherTpGItem);resultGroup[otherKey]['templates'][key]=templates[key];}}}\nreturn resultGroup;}});","js/smartbi/chart/abstract/AbstractChartView.js":"\nif(typeof ServerChartView=='undefined'){jsloader.resolve(\"smartbi.chart.ServerChartView\",true);}\nvar ChartMacroMenuCmd=jsloader.resolve(\"smartbi.chart.ChartMacroMenuCmd\");var util=jsloader.resolve(\"freequery.common.util\");var MacroService=null;var PopupMenu=null;var AbstractChartView=ServerChartView.extend({init:function(viewOptions,chartType,className){this._super(viewOptions,chartType,className);var defaultViewOptions=this.getDefaultViewOptions();this.viewOptions=jQuery.extend(false,null,defaultViewOptions,viewOptions);this.defaultChartOptions={};var sc=this.viewOptions.settingControl;this.setSettingControl(sc);if(this.viewOptions.chartDefine){this.chartDefine=this.viewOptions.chartDefine;}\nif(this.viewOptions.context){this.context=this.viewOptions.context;}\nthis.clientId=this.viewOptions.clientId;this._private={_chartObj:null};this.handler=new ChartMacroMenuCmd();this.handler.onDoCmd.subscribe(this.doAutoCmd,this);},destroy:function(){delete this.chartType;delete this.className;},refresh:function(chartType,chartOptions){this._super(chartType,chartOptions);},initChart:function(chartType){this._super(chartType);this.attachEvents(chartType);},attachEvents:function(chartType){var chartObj=this.getChartObject(),chartView=this;chartObj.on('PointClick',function(type,point,chart,e){chartView.pointClick(point);if(chartView.getChartId())\nchartView.runMacro(\"pointClick\",point,e);});chartObj.on('BeforeRenderer',function(type,chart){chartView.onBeforeRenderer(type,chart);});chartObj.on('AfterRenderer',function(type,chart){chartView.onAfterRenderer(type,chart);});},getChartObject:function(){return this._private._chartObj;},isInPage:function(){if(this.context&&this.context.getPageId())\nreturn true;return false;},setSettingControl:function(settingControl){this.viewOptions.settingControl=settingControl;var sc=settingControl;if(sc!=undefined&&sc!=null&&sc.chartDefine){this.chartDefine=sc.chartDefine;}\nif(sc!=undefined&&sc!=null){sc.onSave.subscribe(function(obj){this.fire('SettingChanged',true,obj);},this);}},getDefaultViewOptions:function(){var defaultViewOptions={renderOnBrowser:true,chartDefine:null};return defaultViewOptions;},getDemoOption:function(chartType,option){return option;},showLoading:function(message){var chartObj=this.getChartObject();if(chartObj!=null&&chartObj.showLoading){chartObj.showLoading(message);}else{var renderTo=this.viewOptions.renderTo;if(typeof renderTo=='string'){renderTo=document.getElementById(renderTo);}\nif(renderTo){var width=200,height=200;if(this.chartDefine){width=this.chartDefine.width||width;height=this.chartDefine.height||height;}\nrenderTo.innerHTML='<div class=\"dashboard_loading\" style=\"text-align:center; width:'+width+'px; padding-top:'+height/2+'px\">'+message+'...<\/div>';}}},hideLoading:function(){var chartObj=this.getChartObject();if(chartObj!=null&&chartObj.hideLoading){chartObj.hideLoading();}else{var renderTo=this.viewOptions.renderTo;if(typeof renderTo=='string'){renderTo=document.getElementById(renderTo);}\nif(renderTo){renderTo.innerHTML='';}}},pointClick:function(pointObj,e){this.fire('PointClick',e,pointObj,this);},onBeforeRenderer:function(){this.fire('BeforeRenderer',this);},onAfterRenderer:function(){this.fire('AfterRenderer',this);},getResourceId:function(){if(this.chartDefine)\nreturn this.chartDefine.resId;},getResourceType:function(){return\"chart\";},getClientId:function(){return this.clientId;},setContext:function(context){this.context=context;},getContext:function(context){return this.context;},getChartId:function(){if(this.chartDefine)\nreturn this.chartDefine.id;},runMacro:function(clickType,point,e){this.getAllClickMacros();if(!this.needJumpMenu)\nthis.needJumpMenu=this.isNeedJumpMenu();if(!this.handler.chartView)\nthis.handler.setChartView(this);this.handler.setPoint(point);if(!PopupMenu)\nPopupMenu=jsloader.resolve(\"freequery.menu.PopupMenu\");if(this.popupMenu){this.popupMenu.clear();}else{this.popupMenu=new PopupMenu(document.body,this.handler);}\nthis.handler.menuItems=new Array();try{if(!MacroService)\nMacroService=jsloader.imports(\"bof.macro.services.MacroService\").getInstance();}catch(ex){;}\nMacroService.fire(this,this.getChartId(),clickType,[this,point,e]);if(this.popupMenu.menuItems.length==0){return;}else if(this.popupMenu.menuItems.length==1){if(!this.needJumpMenu){this.handler.doCmd(this.popupMenu.menuItems[0].cmd);this.popupMenu.clear();}else{this.doPopupMenuCmd(e);}}else{this.doPopupMenuCmd(e);}},getAllClickMacros:function(){if(this.modules)\nreturn;var resId=this.getResourceId();var chartId=this.getChartId();var modules=util.remoteInvokeEx2(\"MacroService\",\"getMacroModulesByResId\",[resId],null,null,null).result;var macros={};if(modules){for(key in modules){var module=modules[key];var eventName=module.eventName;if(!macros[eventName])\nmacros[eventName]=[];if(module.targetName==chartId){macros[eventName].push(module);}}}\nthis.modules=macros;},addMenuItem:function(labelName,callback,autoCmd){if(!this.popupMenu||!this.handler)\nreturn;this.handler.menuItems[labelName]=callback;if(autoCmd)\nthis.handler.autoCmd[labelName]=labelName;else\nreturn this.popupMenu.createMenuItem(labelName,labelName);},isNeedJumpMenu:function(){if(!util){util=jsloader.resolve(\"freequery.common.util\");}\nvar value=util.getSystemConfig(\"SINGLE_JUMP_NEED_MENU\");return(value==\"true\");},doPopupMenuCmd:function(e){if(this.popupMenu.menuItems.length==0){this.doAutoCmd();return;}\nif(this.popupMenu.menuItems.length>1){this.popupMenu.popup(e);return;}\nif(!this.needJumpMenu){this.handler.doCmd(this.popupMenu.menuItems[0].cmd);this.popupMenu.clear();}else{this.popupMenu.popup(e);}},doAutoCmd:function(){for(indx in this.handler.autoCmd){var autoName=this.handler.autoCmd[indx];this.handler.doCmd(autoName);}\nthis.handler.autoCmd=[];try{this.popupMenu.clear();}catch(e){}}});","js/smartbi/chart/abstract/AbstractDataSetSetting.js":"\nvar AbstractDataSetSetting=function(container,settingControl){this.container=container;this.settingControl=settingControl;this.chartType=settingControl.getChartType();this.reportType=settingControl.reportType;this.key=\"chartDatas\";this.subKey=\"fieldList\";this.needRefreshDemo=true;this.needRefreshDemoEvent=new CustomEvent(\"needRefreshDemoEvent\");this.init(container,__url);this.render();}\nlang.extend(AbstractDataSetSetting,\"freequery.widget.Module2\");AbstractDataSetSetting.prototype.destroy=function(){this.clearTable();AbstractDataSetSetting.superclass.destroy.call(this);}\nAbstractDataSetSetting.prototype.render=function(){this.clearTable();this.dataField=this.settingControl.getFields();this.renderTitle('序列;水平(X)轴;左垂直(Y)轴');this.tableCtrls=new Array();for(var i=0;this.dataField&&i<this.dataField.length;i++){var field=this.dataField[i];var row=this.elemDataFieldTable.insertRow(-1);this.tableCtrls[i]=new Object();row.className=i%2==0?\"listView-talbe-row-white\":\"listView-talbe-row-gray\";row.style.height=\"25px\";this.tableCtrls[i].id=field.id;this.tableCtrls[i].dataType=field.dataType\nvar cell=row.insertCell(-1);cell.className=\"listView-table_td\";var aliasInput=document.createTextNode(field.alias);cell.appendChild(aliasInput);this.tableCtrls[i].alias=aliasInput;this.renderDefaultRow(row,i);}}\nAbstractDataSetSetting.prototype.renderTitle=function(titles){var names=(titles+'').split(';');var rtRow=this.elemDataFieldTable.insertRow(-1);for(var i=0,len=names.length;i<len;i++){var trCell=rtRow.insertCell(-1);trCell.innerHTML='<strong>'+names[i]+'<\/strong>';domutils.addClassName(trCell,'listView-table-top');}}\nAbstractDataSetSetting.prototype.renderDefaultRow=function(row,i){this.tableCtrls[i].typeX=this.createX(row,i);this.tableCtrls[i].typeY=this.createY(row,i);}\nAbstractDataSetSetting.prototype.createX=function(row,i){var cell=row.insertCell(-1);var selected=document.createElement(\"INPUT\");selected.type=\"checkbox\";selected.value=\"categories\";selected.bofid=i;cell.appendChild(selected);this.addListener(selected,\"click\",this.doCategories,this);return selected;}\nAbstractDataSetSetting.prototype.createY=function(row,i){var cell=row.insertCell(-1);var selected=document.createElement(\"INPUT\");selected.type=\"checkbox\";selected.value=\"yAxis\";selected.bofid=i;cell.appendChild(selected);this.addListener(selected,\"click\",this.doYaxis,this);return selected;}\nAbstractDataSetSetting.prototype.clearTable=function(){if(this.tableCtrls){for(var i=0;i<this.tableCtrls.length;i++){this.tableCtrls[i].id=null;this.tableCtrls[i].alias=null;this.tableCtrls[i].typeY=null;this.removeListener(this.tableCtrls[i],\"mousemove\",this.item_mouseover_handler);this.removeListener(this.tableCtrls[i],\"mouseout\",this.item_mouseout_handler);}\nthis.tableCtrls=null;}\nvar maxRow=this.elemDataFieldTable.childNodes.length\nfor(var i=maxRow-1;i>=0;i--){var r=this.elemDataFieldTable.childNodes[i];domutils.destroyNode(r);}}\nAbstractDataSetSetting.prototype.getValue=function(){var objList=[];for(var i=0;i<this.tableCtrls.length;i++){if(this.tableCtrls[i].typeX&&this.tableCtrls[i].typeX.checked){var obj={};obj.id=this.tableCtrls[i].id;obj.alias=this.tableCtrls[i].alias.data;obj.axisType=\"categories\";objList.push(obj);}else if(this.tableCtrls[i].typeY&&this.tableCtrls[i].typeY.checked){var obj={}\nobj.id=this.tableCtrls[i].id;obj.alias=this.tableCtrls[i].alias.data;obj.axisType=\"yAxis\";if(this.tableCtrls[i].renderAs){obj.chartType=this.tableCtrls[i].renderAs.value;}\nobjList.push(obj);}}\nvar returnObj={};returnObj[this.key]={};returnObj[this.key][this.subKey]=objList;return returnObj;}\nAbstractDataSetSetting.prototype.setValue=function(obj){var dataObj=obj[this.key]||obj;var objList=dataObj[this.subKey];for(var id in objList){var obj=objList[id];for(var j=0;j<this.tableCtrls.length;j++){if(this.tableCtrls[j].id==obj.id){if(obj.axisType==\"categories\"&&this.tableCtrls[j].typeX){this.tableCtrls[j].typeX.checked=true;}else if(obj.axisType==\"yAxis\"&&this.tableCtrls[j].typeY){this.tableCtrls[j].typeY.checked=true;}\nbreak;}}}}\nAbstractDataSetSetting.prototype.destroy=function(){this.clearTable();AbstractDataSetSetting.superclass.destroy.call(this);}\nAbstractDataSetSetting.prototype.checkValidate=function(){var typeXCount=0;var typeYCount=0;var typeZCount=0;var typeSYCount=0;var seriesCount=0;if(this.tableCtrls){for(var i=0;i<this.tableCtrls.length;i++){if(this.tableCtrls[i].typeX&&this.tableCtrls[i].typeX.checked)\ntypeXCount++;else if(this.tableCtrls[i].typeY&&this.tableCtrls[i].typeY.checked)\ntypeYCount++;}}\nif(typeYCount==0){alert(\"请选择最少一个垂直Y轴！\");return false;}\nif(typeXCount==0){alert(\"请选择最少一个水平X轴！\");return false;}\nreturn true;}\nAbstractDataSetSetting.prototype.getXYColumns=function(){var rtn=new Array();if(this.tableCtrls){for(var i=0;i<this.tableCtrls.length;i++){if((this.tableCtrls[i].typeX&&this.tableCtrls[i].typeX.checked)||(this.tableCtrls[i].typeY&&this.tableCtrls[i].typeY.checked)){var obj=new Object();obj.name=this.tableCtrls[i].id;obj.caption=this.tableCtrls[i].alias.value;rtn.push(obj);}}}\nreturn rtn;}\nAbstractDataSetSetting.prototype.doCategories=function(myself){var self=myself.srcElement;var bofid=myself.srcElement.bofid;if(self.checked){if(this.tableCtrls[bofid].typeY)\nthis.tableCtrls[bofid].typeY.checked=false;}}\nAbstractDataSetSetting.prototype.doYaxis=function(myself){var self=myself.srcElement;var bofid=myself.srcElement.bofid;if(self.checked){if(this.tableCtrls[bofid].dataType!=\"INTEGER\"&&this.tableCtrls[bofid].dataType!=\"DOUBLE\"){self.checked=false;alert(\"指标（Y）轴必须为数值\");return;}\nif(this.tableCtrls[bofid].typeX)\nthis.tableCtrls[bofid].typeX.checked=false;}}","js/thirdparty/printStackTrace.js":"\nfunction printStackTrace(options){options=options||{guess:true};var ex=options.e||null,guess=!!options.guess;var p=new printStackTrace.implementation(),result=p.run(ex);return(guess)?p.guessAnonymousFunctions(result):result;}\nif(typeof module!==\"undefined\"&&module.exports){module.exports=printStackTrace;}\nprintStackTrace.implementation=function(){};printStackTrace.implementation.prototype={run:function(ex,mode){ex=ex||this.createException();mode=mode||this.mode(ex);if(mode==='other'){return this.other(arguments.callee);}else{return this[mode](ex);}},createException:function(){try{this.undef();}catch(e){return e;}},mode:function(e){if(e['arguments']&&e.stack){return'chrome';}else if(e.stack&&e.sourceURL){return'safari';}else if(e.stack&&e.number){return'ie';}else if(typeof e.message==='string'&&typeof window!=='undefined'&&window.opera){if(!e.stacktrace){return'opera9';}\nif(e.message.indexOf('\\n')>-1&&e.message.split('\\n').length>e.stacktrace.split('\\n').length){return'opera9';}\nif(!e.stack){return'opera10a';}\nif(e.stacktrace.indexOf(\"called from line\")<0){return'opera10b';}\nreturn'opera11';}else if(e.stack){return'firefox';}\nreturn'other';},instrumentFunction:function(context,functionName,callback){context=context||window;var original=context[functionName];context[functionName]=function instrumented(){callback.call(this,printStackTrace().slice(4));return context[functionName]._instrumented.apply(this,arguments);};context[functionName]._instrumented=original;},deinstrumentFunction:function(context,functionName){if(context[functionName].constructor===Function&&context[functionName]._instrumented&&context[functionName]._instrumented.constructor===Function){context[functionName]=context[functionName]._instrumented;}},chrome:function(e){var stack=(e.stack+'\\n').replace(/^\\S[^\\(]+?[\\n$]/gm,'').replace(/^\\s+(at eval )?at\\s+/gm,'').replace(/^([^\\(]+?)([\\n$])/gm,'{anonymous}()@$1$2').replace(/^Object.<anonymous>\\s*\\(([^\\)]+)\\)/gm,'{anonymous}()@$1').split('\\n');stack.pop();return stack;},safari:function(e){return e.stack.replace(/\\[native code\\]\\n/m,'').replace(/^(?=\\w+Error\\:).*$\\n/m,'').replace(/^@/gm,'{anonymous}()@').split('\\n');},ie:function(e){var lineRE=/^.*at (\\w+) \\(([^\\)]+)\\)$/gm;return e.stack.replace(/at Anonymous function /gm,'{anonymous}()@').replace(/^(?=\\w+Error\\:).*$\\n/m,'').replace(lineRE,'$1@$2').split('\\n');},firefox:function(e){return e.stack.replace(/(?:\\n@:0)?\\s+$/m,'').replace(/^[\\(@]/gm,'{anonymous}()@').split('\\n');},opera11:function(e){var ANON='{anonymous}',lineRE=/^.*line (\\d+), column (\\d+)(?: in (.+))? in (\\S+):$/;var lines=e.stacktrace.split('\\n'),result=[];for(var i=0,len=lines.length;i<len;i+=2){var match=lineRE.exec(lines[i]);if(match){var location=match[4]+':'+match[1]+':'+match[2];var fnName=match[3]||\"global code\";fnName=fnName.replace(/<anonymous function: (\\S+)>/,\"$1\").replace(/<anonymous function>/,ANON);result.push(fnName+'@'+location+' -- '+lines[i+1].replace(/^\\s+/,''));}}\nreturn result;},opera10b:function(e){var lineRE=/^(.*)@(.+):(\\d+)$/;var lines=e.stacktrace.split('\\n'),result=[];for(var i=0,len=lines.length;i<len;i++){var match=lineRE.exec(lines[i]);if(match){var fnName=match[1]?(match[1]+'()'):\"global code\";result.push(fnName+'@'+match[2]+':'+match[3]);}}\nreturn result;},opera10a:function(e){var ANON='{anonymous}',lineRE=/Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i;var lines=e.stacktrace.split('\\n'),result=[];for(var i=0,len=lines.length;i<len;i+=2){var match=lineRE.exec(lines[i]);if(match){var fnName=match[3]||ANON;result.push(fnName+'()@'+match[2]+':'+match[1]+' -- '+lines[i+1].replace(/^\\s+/,''));}}\nreturn result;},opera9:function(e){var ANON='{anonymous}',lineRE=/Line (\\d+).*script (?:in )?(\\S+)/i;var lines=e.message.split('\\n'),result=[];for(var i=2,len=lines.length;i<len;i+=2){var match=lineRE.exec(lines[i]);if(match){result.push(ANON+'()@'+match[2]+':'+match[1]+' -- '+lines[i+1].replace(/^\\s+/,''));}}\nreturn result;},other:function(curr){var ANON='{anonymous}',fnRE=/function\\s*([\\w\\-$]+)?\\s*\\(/i,stack=[],fn,args,maxStackSize=10;while(curr&&curr['arguments']&&stack.length<maxStackSize){fn=fnRE.test(curr.toString())?RegExp.$1||ANON:ANON;args=Array.prototype.slice.call(curr['arguments']||[]);stack[stack.length]=fn+'('+this.stringifyArguments(args)+')';curr=curr.caller;}\nreturn stack;},stringifyArguments:function(args){var result=[];var slice=Array.prototype.slice;for(var i=0;i<args.length;++i){var arg=args[i];if(arg===undefined){result[i]='undefined';}else if(arg===null){result[i]='null';}else if(arg.constructor){if(arg.constructor===Array){if(arg.length<3){result[i]='['+this.stringifyArguments(arg)+']';}else{result[i]='['+this.stringifyArguments(slice.call(arg,0,1))+'...'+this.stringifyArguments(slice.call(arg,-1))+']';}}else if(arg.constructor===Object){result[i]='#object';}else if(arg.constructor===Function){result[i]='#function';}else if(arg.constructor===String){result[i]='\"'+arg+'\"';}else if(arg.constructor===Number){result[i]=arg;}}}\nreturn result.join(',');},sourceCache:{},ajax:function(url){var req=this.createXMLHTTPObject();if(req){try{req.open('GET',url,false);req.send(null);return req.responseText;}catch(e){}}\nreturn'';},createXMLHTTPObject:function(){var xmlhttp,XMLHttpFactories=[function(){return new XMLHttpRequest();},function(){return new ActiveXObject('Msxml2.XMLHTTP');},function(){return new ActiveXObject('Msxml3.XMLHTTP');},function(){return new ActiveXObject('Microsoft.XMLHTTP');}];for(var i=0;i<XMLHttpFactories.length;i++){try{xmlhttp=XMLHttpFactories[i]();this.createXMLHTTPObject=XMLHttpFactories[i];return xmlhttp;}catch(e){}}},isSameDomain:function(url){return typeof location!==\"undefined\"&&url.indexOf(location.hostname)!==-1;},getSource:function(url){if(!(url in this.sourceCache)){this.sourceCache[url]=this.ajax(url).split('\\n');}\nreturn this.sourceCache[url];},guessAnonymousFunctions:function(stack){for(var i=0;i<stack.length;++i){var reStack=/\\{anonymous\\}\\(.*\\)@(.*)/,reRef=/^(.*?)(?::(\\d+))(?::(\\d+))?(?: -- .+)?$/,frame=stack[i],ref=reStack.exec(frame);if(ref){var m=reRef.exec(ref[1]);if(m){var file=m[1],lineno=m[2],charno=m[3]||0;if(file&&this.isSameDomain(file)&&lineno){var functionName=this.guessAnonymousFunction(file,lineno,charno);stack[i]=frame.replace('{anonymous}',functionName);}}}}\nreturn stack;},guessAnonymousFunction:function(url,lineNo,charNo){var ret;try{ret=this.findFunctionName(this.getSource(url),lineNo);}catch(e){ret='getSource failed with url: '+url+', exception: '+e.toString();}\nreturn ret;},findFunctionName:function(source,lineNo){var reFunctionDeclaration=/function\\s+([^(]*?)\\s*\\(([^)]*)\\)/;var reFunctionExpression=/['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*function\\b/;var reFunctionEvaluation=/['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*(?:eval|new Function)\\b/;var code=\"\",line,maxLines=Math.min(lineNo,20),m,commentPos;for(var i=0;i<maxLines;++i){line=source[lineNo-i-1];commentPos=line.indexOf('//');if(commentPos>=0){line=line.substr(0,commentPos);}\nif(line){code=line+code;m=reFunctionExpression.exec(code);if(m&&m[1]){return m[1];}\nm=reFunctionDeclaration.exec(code);if(m&&m[1]){return m[1];}\nm=reFunctionEvaluation.exec(code);if(m&&m[1]){return m[1];}}}\nreturn'(?)';}};","js/freequery/control/YearCalendarWrapper.js":"\nvar Module2=jsloader.resolve(\"freequery.widget.Module2\");var domutils=jsloader.resolve(\"freequery.lang.domutils\");var UUIDGenerator=jsloader.resolve(\"freequery.thirdparty.UUIDGenerator\");var YearCalendarWrapper=function(container){var uuid=new UUIDGenerator();var CalendarStr=uuid.id;eval('if (!window.Calendar'+CalendarStr+') { '\n+'window.Calendar'+CalendarStr+' = new YearCalendar(container,\"Calendar'+CalendarStr+'\"); '\n+'window.Calendar'+CalendarStr+'.owner = this; '\n+'this.Calendar = window.Calendar'+CalendarStr+'}');}\nlang.extend(YearCalendarWrapper,Module2);YearCalendarWrapper.prototype.destroy=function(){if(this.Calendar){this.Calendar.destroy();this.Calendar=null;}\nYearCalendarWrapper.superclass.destroy.call(this);};var YearCalendar=function(container,varname){this.parent=container;this.ObjectName=\"parent.\"+varname;this.ObjectWindow=\"window.\"+varname;this.frameId=this.ObjectName+\".YearCalendarLayer\";this.frame=document.getElementById(this.frameId);if(!this.frame){this.initFrame();}\nthis.isWrite=false;this.bmoveable=true;this.datestyle=\"yyyy 年\";this.dateValueStyle=\"yyyy\";this.TitleStyle=\"yyyy年\";this.cellwidth=49;this.cellheight=49;this.toolBarHeight=25;this.CalendarContainer=window.frames[this.frameId].document;this.Style=this.frame.style;this.year=new Date().getFullYear();this.month=new Date().getMonth()+1;this.date=new Date().getDate();this.thisYear=this.year;this.CalendarValues=new Array(6);this.CalendarCell=new Array(6);this.outerValue=\"\";this.oldValue=\"\";this.currentValue=\"\";this.displayObject=null;this.dateValue=\"\";this.srcButton=null;this.followcodes=\"\";this.ScrollYearOnClick=true;this.onRefresh=new CustomEvent(\"editChange\",this);this.ifCheckEditChange=true;};lang.extend(YearCalendar,Module2);YearCalendar.prototype.destroy=function(){if(this.Style){this.Style=null;delete this.Style;}\nif(this.srcButton){this.srcButton=null;}\nif(this.displayObject){this.displayObject=null;}\nif(this.CalendarValues){this.CalendarValues=null;delete this.CalendarValues;}\nif(this.titleDiv){document.body.removeChild(this.titleDiv);if(this.titleCantainer){this.titleDiv.removeChild(this.titleCantainer);this.titleCantainer.innerHTML=\"\";delete this.titleCantainer;}\ndomutils.destroyNode(this.titleDiv);}\nthis.onRefresh=null;if(this.CalendarCell){if(this.CalendarContainer){for(var id in this.CalendarCell){this.CalendarCell[id].innerHTML=\"\";delete this.CalendarCell[id];}\nthis.CalendarContainer.writeln('');this.CalendarContainer.close();delete this.CalendarContainer;}\nthis.CalendarCell=null;}\nif(this.frame){document.body.removeChild(this.frame);this.frame.src=\"about:blank\";domutils.destroyNode(this.frame);delete this.frame;}\nif(this.owner){this.owner=null;delete this.owner;}\nif(this.parent)\nthis.parent.innerHTML=\"\";YearCalendar.superclass.destroy.call(this);};YearCalendar.prototype.initFrame=function(){this.frame=document.createElement(\"iframe\");this.frame.setAttribute(\"id\",this.frameId);this.frame.setAttribute(\"name\",this.frameId);this.frame.className=\"multicalendar-iframe\";this.frame.setAttribute(\"scrolling\",\"no\");this.frame.setAttribute(\"onmouseout\",\"\"+this.ObjectName+\".correctPosition()\");this.frame.style.display=\"none\";document.body.appendChild(this.frame);};YearCalendar.prototype.writeIframe=function(){if(this.cellwidth<21)this.cellwidth=21;if(this.cellheight<20)this.cellheight=20;var strFrame;strFrame='<style>';with(this){strFrame+='*{font-family:宋体;}';strFrame+='DIV.calendar-panel-size {width:'+(getCalendarWidth())+';height:'+(getCalendarHeight()+2)+';}';strFrame+='TABLE.calendar-main-size {width:'+(getCalendarWidth())+'px;height:'+getCalendarHeight()+'px;}';strFrame+='.head-size{width:'+(getCalendarWidth()-2)+';height:'+getToolBarHeight()+';}';strFrame+='table.year-size{width:'+(getYearWidth())+'px;height:96px;}';strFrame+='calendarcell-size{width:'+(getCalendarWidth()-2)+';height:'+(getBodyHeight())+';}';}\nstrFrame+='<\/style>';strFrame+='<scr'+'ipt>';strFrame+='     var datelayerx,datelayery; /*存放年历控件的鼠标位置*/      ';strFrame+='     var bDrag=false; ';strFrame+='     var DateLayer='+this.ObjectName+'.Style;    ';strFrame+='     document.onmousemove=function(){/*在鼠标移动事件中，如果开始拖动年历，则移动年历*/     ';strFrame+='      if(bDrag){     ';strFrame+='       DateLayer.left = (parseInt(DateLayer.left,10)+window.event.clientX-datelayerx)+\"px\";/*由于每次移动以后鼠标位置都恢复为初始的位置，因此写法与div中不同*/     ';strFrame+='       DateLayer.top = (parseInt(DateLayer.top,10)+window.event.clientY-datelayery)+\"px\";    ';strFrame+='      }';strFrame+='     }; ';strFrame+='     function DragStart(){  /*开始年历拖动*/     ';strFrame+='      if(window.event.button== 1){   /*值1表示鼠标左键*/ ';strFrame+='       datelayerx=window.event.clientX;  ';strFrame+='       datelayery=window.event.clientY;  ';strFrame+='       bDrag=true;  ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function DragEnd(){  /*结束年历拖动*/';strFrame+='      bDrag=false;   ';strFrame+='     }  ';strFrame+='     document.onmousedown=function(){ /*点击的时候关闭年份和月份的选择列表*/ ';strFrame+='      var obj=document.getElementById(\"tmpSelectYearLayer\");   ';strFrame+='      if(!bFromYear&&event.srcElement!=document.getElementById(\"CalendarYearHead\")&&obj.style.display!=\"none\"){ ';strFrame+='       obj.style.display=\"none\";bYearListOpening=true  ';strFrame+='      }';strFrame+='     }; ';strFrame+='     var strTempClass=\"\";    ';strFrame+='     document.oncontextmenu=function(){/*禁止出现右键菜单*/     ';strFrame+='      if(!event.ctrlKey)return false;     ';strFrame+='     }; ';strFrame+='     function mOver(obj){/*年/月选择列表的mouseover处理*/';strFrame+='      strTempClass=obj.className;  ';strFrame+='      obj.className=\"mouseoverYM\"; ';strFrame+='      bYearListOpening=false;  /*为了显示年份列表的时候向上滚动功能的正常使用*/     ';strFrame+='     }  ';strFrame+='     function mOut(obj){/*年/月选择列表的mouseout处理*/  ';strFrame+='      obj.className=strTempClass;  ';strFrame+='     }  ';strFrame+='     function setYear(iYear){/*下拉选择年份的处理*/      ';strFrame+='      '+this.ObjectName+'.setYear(iYear) ';strFrame+='     }  ';strFrame+='     var bScrolling=false;   ';strFrame+='     var bYearListOpening=true; /*这个变量用于控制在刚刚显示年份列表的时候，鼠标处于向上滚动条位置的情况下不要滚动*/    ';strFrame+='     var iScroll=null;';strFrame+='     var bFromYear=false; /*标志为从年份下拉列表处进行了点击，以便不要关闭年份列表*/';strFrame+='     function scrollYear(bUp){/*滚动年份列表*/    ';strFrame+='      var oTable=document.getElementById(\"tmpSelectYearLayer\").childNodes[0];';strFrame+='      if(bUp){';strFrame+='       var iMin=parseInt(oTable.rows[1].cells[0].innerHTML.replace(/\\\\D/g,\\'\\'),10);  ';strFrame+='       if(iMin>1000){      ';strFrame+='        oTable.deleteRow(oTable.rows.length-2);';strFrame+='        var oTd=oTable.insertRow(1).insertCell(0);    ';strFrame+='        oTd.innerHTML=(iMin-1).toString()+\"年\";      ';strFrame+='        oTd.onmouseover=Function(\"mOver(this)\");      ';strFrame+='        oTd.onmouseout=Function(\"mOut(this)\"); ';strFrame+='        oTd.onmousedown=Function(\"setYear(\"+(iMin-1).toString()+\")\");      ';strFrame+='        oTd.className=(iMin-1=='+this.ObjectName+'.year?\"selectedYM\":\"normalYM\");';strFrame+='        if(bScrolling){   ';strFrame+='         window.setTimeout(\"scrollYear(true)\", 300); ';strFrame+='        }   ';strFrame+='       }     ';strFrame+='      }else{  ';strFrame+='       var iMax=parseInt(oTable.rows[oTable.rows.length-2].cells[0].innerHTML.replace(/\\\\D/g,\\'\\'),10);    ';strFrame+='       if(iMax<=9999){     ';strFrame+='        var oTd=oTable.insertRow(oTable.rows.length-1).insertCell(0);      ';strFrame+='        oTable.deleteRow(1);     ';strFrame+='        oTd.innerHTML=(iMax+1).toString()+\"年\";      ';strFrame+='        oTd.onmouseover=Function(\"mOver(this)\");      ';strFrame+='        oTd.onmouseout=Function(\"mOut(this)\"); ';strFrame+='        oTd.onmousedown=Function(\"setYear(\"+(iMax+1).toString()+\")\");      ';strFrame+='        oTd.className=(iMax+1=='+this.ObjectName+'.year?\"selectedYM\":\"normalYM\");';strFrame+='        if(bScrolling){   ';strFrame+='         window.setTimeout(\"scrollYear(false)\", 300);';strFrame+='        }   ';strFrame+='       }     ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function startScroll(oTd,bUp){ ';strFrame+='      bFromYear=true;';strFrame+='      if(!bYearListOpening){';strFrame+='       bScrolling=true;    ';strFrame+='       scrollYear(bUp);    ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function stopScroll(){  ';strFrame+='      bYearListOpening=false;      ';strFrame+='      bFromYear=false;      ';strFrame+='      bScrolling=false;     ';strFrame+='      if(iScroll){   ';strFrame+='       clearTimeout(iScroll);     ';strFrame+='      }';strFrame+='     }  ';strFrame+='<\/scr'+'ipt>';with(this){strFrame+=' <div class=\"calendar-panel-size\" >';strFrame+='  <div style=\"z-index:9999;position: absolute; left:0; top:0;\" onselectstart=\"return false\">  ';strFrame+='   <span id=tmpSelectYearLayer class=\"year\" style=\"display: none;left:23px;\"><\/span> ';strFrame+='   <table border=0 cellspacing=0 cellpadding=0 class=\"calendar-main-size main mainbackgroundcolor\">     ';strFrame+='    <tr>';strFrame+='     <td class=\"head-size mainbackgroundcolor\"> ';strFrame+='      <table class=\"head-size mainbackgroundcolor whiteborder\" border=0 cellspacing=0 cellpadding=0 > ';strFrame+='       <tr align=center>     ';strFrame+='        <td width=19><span class=\"calendar-border-noleft calendar-border-left prev-month-tool-button\" title=\"前一年\" onclick=\"'+this.ObjectName+'.goPrevYear()\" ondblclick=\"'+this.ObjectName+'.goPrevYear()\" onfocus=\"this.blur()\" ><span><\/td>';strFrame+='        <td width='+getYearWidth()+' align=center class=\"calendarhead\" onmouseover=\"className=\\'mouseover\\'\" onmouseout=\"className=\\'calendarhead\\'\" onclick=\"'+this.ObjectName+'.selectYear(this.innerHTML.substring(0,4))\" title=\"点击这里选择年份\" id=CalendarYearHead><\/td>    ';strFrame+='        <td width=19><span class=\"calendar-border-noleft calendar-border-left next-month-tool-button\" title=\"后一年\" onclick=\"'+this.ObjectName+'.goNextYear()\" ondblclick=\"'+this.ObjectName+'.goNextYear()\" onfocus=\"this.blur()\" ><span><\/td>';strFrame+='       <\/tr>     ';strFrame+='      <\/table>    ';strFrame+='     <\/td>   ';strFrame+='    <\/tr>     ';strFrame+='    <tr>';strFrame+='     <td class=\"calendarcell-size\" align=center> ';strFrame+='         <table align=center border=0 cellspacing=\"0\" cellpadding=0 class=\"calendarcell calendarcell-size\" >   ';var n=0;for(j=0;j<2;j++){strFrame+='       <tr align=center>  ';for(i=0;i<3;i++){strFrame+='        <td width='+(cellwidth)+' height='+(cellheight)+' id=CalendarCell'+(n)+'><\/td>';n++;}\nstrFrame+='       <\/tr> ';}\nstrFrame+='        <\/table>    ';strFrame+='      <\/td>   ';strFrame+='    <\/tr>     ';strFrame+='   <\/table>';strFrame+='  <\/div>  ';strFrame+=' <\/div>  ';}\nthis.CalendarContainer=window.frames[this.frameId].document;this.CalendarContainer.writeln(strFrame);this.CalendarContainer.close();this.Style.width=this.getCalendarWidth();this.Style.height=this.getCalendarHeight()+2;var head=this.CalendarContainer.getElementsByTagName(\"head\").item(0);var fileref=this.CalendarContainer.createElement(\"link\");fileref.setAttribute(\"rel\",\"stylesheet\");fileref.setAttribute(\"type\",\"text/css\");var cssHref=window.bof_offline_xhr?\"css/bof_merge.css\":jsloader.baseHref+\"css/bof_merge.css.jsp\";fileref.setAttribute(\"href\",cssHref);if(typeof fileref!=\"undefined\"){head.appendChild(fileref);}\nfor(i=0;i<6;i++)\n{this.CalendarCell[i]=this.CalendarContainer.getElementById('CalendarCell'+i);var tempDay=this.CalendarCell[i];tempDay.style.cursor=\"pointer\";tempDay.onmouseover=this.MouseOver;tempDay.onmouseout=this.MouseOut;tempDay.onclick=Function(this.ObjectWindow+\".calendarCellClick(\"+i+\")\");tempDay.ondblclick=Function(this.ObjectWindow+\".calendarCellDblClick(\"+i+\")\");}\nthis.isWrite=true;};YearCalendar.prototype.showCalendar=function(srcButton,displayObject){if(!this.isWrite){this.writeIframe();}\nvar selt=this;var obj;var calendarButton;this.followcodes=\"\";if(displayObject){calendarButton=displayObject;if(typeof(displayObject)==\"object\")obj=displayObject\nelse if(typeof(displayObject)==\"string\")this.followcodes=displayObject;}else{calendarButton=srcButton;}\nvar th=srcButton;var calendarStyle=this.Style;var ttop=calendarButton.offsetTop;var thei=calendarButton.offsetHeight;var twid=calendarButton.offsetWidth;var tleft=calendarButton.offsetLeft;var ttyp=calendarButton.type;while(calendarButton=calendarButton.offsetParent){ttop+=calendarButton.offsetTop;tleft+=calendarButton.offsetLeft;}\nvar cheight=this.getCalendarHeight();if(document.body.clientHeight>cheight+thei&&document.body.clientHeight-(ttop-document.body.scrollTop)<cheight+thei&&ttop-document.body.scrollTop>cheight){calendarStyle.top=ttop-cheight-1}else{calendarStyle.top=ttop+thei+1;}\ncalendarStyle.left=tleft;this.displayObject=!obj?th:obj;this.srcButton=!obj?null:th;var tempValue=this.getValueToDate(this.dateValue);this.outerValue=tempValue;this.oldValue=tempValue;this.currentValue=tempValue;if(tempValue!=\"\"){this.year=tempValue;}else{this.year=new Date().getFullYear();}\nthis.writeCalendar();calendarStyle.display='';this.addEvent(document,\"click\",function(){with(window.event)\nif(srcElement!=selt.srcButton&&srcElement!=selt.displayObject){selt.close();}});};YearCalendar.prototype.writeCalendar=function(){if(!this.CalendarContainer.getElementById(\"CalendarYearHead\"))\nreturn;var selt=this;var yy=this.year;this.CalendarContainer.getElementById(\"CalendarYearHead\").innerHTML=yy+\" 年\";for(var m=0;m<6;m++){this.CalendarValues[m]=new CalendarDataObject(yy-4+m);}\nfor(var m=0;m<6;m++){var tempDay=this.CalendarCell[m];if(this.outerValue&&this.CalendarValues[m].equals(this.outerValue)){tempDay.className=\"selectedday-tenday\";}else if(this.CalendarValues[m].equals(this.thisYear)){tempDay.className=\"normalday\";}else{tempDay.className=\"normalday\";}\ntempDay.innerHTML=this.CalendarValues[m].year;}\nfunction CalendarDataObject(year){this.year=year;this.calendarValue=selt.dateValueStyle.replace(\"yyyy\",this.year);this.calendarText=selt.datestyle.replace(\"yyyy\",this.year);this.calendarTitle=selt.TitleStyle.replace(\"yyyy\",this.year);this.equals=function(year){try{return this.year==year;}\ncatch(e){return false;}}}};YearCalendar.prototype.onEditChange=function(){if(this.ifCheckEditChange){var tempText=this.getText();if(tempText!=\"\"){if(!this.isValidText(tempText)){alert(\"输入日期格式不正确，请重新输入！\");this.displayObject.value=this.getDateToText(this.oldValue);this.dateValue=this.getDateToValue(this.oldValue);}else{var tempDate=this.getTextToDate(tempText);var tempValue=this.getDateToValue(tempDate);this.year=tempDate;this.dateValue=tempValue;this.outerValue=tempDate;this.oldValue=tempDate;this.currentValue=tempDate;this.onRefresh.fire();this.writeCalendar();}}else{this.setValue(\"\");}}};YearCalendar.prototype.isValidDate=function(testDate){var myRegExp=/^((1[6-9]|[2-9]\\d)\\d{2})$/;return myRegExp.test(testDate);};YearCalendar.prototype.isValidText=function(testContent){var myRegExp=/^(((1[6-9]|[2-9]\\d)\\d{2})\\s(\\u5e74))$/;return myRegExp.test(testContent);};YearCalendar.prototype.getDateToValue=function(Date){var tempDate=Date;var result=\"\";if(tempDate!=\"\"&&tempDate){result=this.dateValueStyle.replace(\"yyyy\",tempDate);}\nreturn result;};YearCalendar.prototype.getDateToText=function(Date){var tempDate=Date;var result=\"\";if(tempDate!=\"\"&&tempDate){result=this.datestyle.replace(\"yyyy\",tempDate);}\nreturn result;};YearCalendar.prototype.getTextToDate=function(Text){var reg=new RegExp(\"^\"+this.datestyle.replace(\"yyyy\",\"(\\\\d{4})\")+\"$\");var r=Text.match(reg);var date=null;if(r!=null){date=parseInt(r[1],10);}else{date=\"\";}\nreturn date;};YearCalendar.prototype.getValueToDate=function(value){var reg=new RegExp(\"^\"+this.dateValueStyle.replace(\"yyyy\",\"(\\\\d{4})\")+\"$\");var r=value.match(reg);var date=null;if(r!=null){date=parseInt(r[1],10);}else{date=\"\";}\nreturn date;};YearCalendar.prototype.addEvent=function(obj,eventName,oCallback){var ret;ret=obj.attachEvent(\"on\"+eventName,oCallback);return ret;};YearCalendar.prototype.close=function(){if(this.CalendarContainer){this.CalendarContainer.getElementById(\"tmpSelectYearLayer\").style.display=\"none\";this.Style.display=\"none\";}};YearCalendar.prototype.getText=function(){return this.displayObject.value;};YearCalendar.prototype.getValue=function(){var date=this.getTextToDate(this.getText());var value=this.getDateToValue(date);return value+\"\";};YearCalendar.prototype.setText=function(text){if(this.displayObject){this.displayObject.value=text;this.onEditChange();}else{alert(\"您所要输出的控件对象并不存在！\");}\nif(this.followcodes!=\"\"){eval(this.followcodes);}};YearCalendar.prototype.setValue=function(value){var tempdate=this.getValueToDate(value);var temptext=this.getDateToText(tempdate);this.displayObject.value=temptext;this.dateValue=value;this.outerValue=tempdate;this.oldValue=tempdate;this.currentValue=tempdate;};YearCalendar.prototype.setReadOnly=function(readonly){if(readonly){this.ifCheckEditChange=false;}else{this.ifCheckEditChange=true;}\nthis.displayObject.readOnly=readonly;};YearCalendar.prototype.getReadOnly=function(){return this.displayObject.readOnly;};YearCalendar.prototype.setScrollYearOnClick=function(scoll){this.ScrollYearOnClick=scoll;};YearCalendar.prototype.getScrollYearOnClick=function(){return this.ScrollYearOnClick;};YearCalendar.prototype.getCalendarWidth=function(){return parseInt(this.cellwidth*3+2+1,10);};YearCalendar.prototype.getCalendarHeight=function(){return this.cellheight*2+this.toolBarHeight+2+1;};YearCalendar.prototype.getYearWidth=function(){return parseInt((this.getCalendarWidth()-42-2-4),10);};YearCalendar.prototype.getToolBarHeight=function(){return this.toolBarHeight;};YearCalendar.prototype.getBodyHeight=function(){return this.cellheight*2+1;};YearCalendar.prototype.selectYear=function(strYear){if(strYear.match(/\\D/)!=null)return;var m=(strYear)?strYear:new Date().getFullYear();if(m<1000||m>9999)return;var n=m-2;if(n<1000)n=1000;if(n+100>9999)n=9900;var s='';s+='<table border=0 cellspacing=0 cellpadding=0 class=\"year year-size\">';if(this.ScrollYearOnClick){s+='<tr><td align=center height=3 onmouseout=\"stopScroll()\"'+'onclick=\"return false\" onmousedown=\"startScroll(this,true)\" onmouseup=\"stopScroll()\" style=\"cursor:pointer\" title=\"向上滚动年份\"><span class=\"prev-year-button\" ><\/span><\/td><\/tr>';}\nelse{s+='<tr><td align=center height=3 style=\"cursor:pointer\" onmouseover=\"startScroll(this,true)\" onmouseout=\"stopScroll()\"'+'onclick=\"return false\" title=\"向上滚动年份\"><span class=\"prev-year-button\" ><\/span><\/td><\/tr>';}\nfor(var i=n;i<n+5;i++){s+='<tr><td class='+(i==parseInt(strYear,10)?'selectedYM':'normalYM')+' style=\"cursor:pointer\" onmouseover=\"mOver(this)\" onmouseout=\"mOut(this)\" onmousedown=\"setYear('+i+')\">'+i+'年'+'<\/td><\/tr>';}\nif(this.ScrollYearOnClick){s+='<tr><td align=center height=3 style=\"cursor:pointer\" onmouseout=\"stopScroll()\"'+'onclick=\"return false\" onmousedown=\"startScroll(this,false)\" onmouseup=\"stopScroll()\" title=\"向下滚动年份\"><span class=\"next-year-button\" ><\/span><\/td><\/tr>';}\nelse{s+='<tr><td align=center height=3 style=\"cursor:pointer\" onmouseover=\"startScroll(this,false)\" onmouseout=\"stopScroll()\"'+'onclick=\"return false\" title=\"向下滚动年份\"><span class=\"next-year-button\" ><\/span><\/td><\/tr>';}\ns+='<\/table>';this.CalendarContainer.getElementById(\"tmpSelectYearLayer\").innerHTML=s;this.CalendarContainer.getElementById(\"tmpSelectYearLayer\").style.display=\"\";};YearCalendar.prototype.goPrevYear=function(){if(this.year>1000&&this.year<10000){this.year--;this.writeCalendar();}};YearCalendar.prototype.goNextYear=function(){if(this.year>999&&this.year<9999){this.year++;this.writeCalendar();}};YearCalendar.prototype.calendarCellClick=function(n){if(this.displayObject){this.year=this.CalendarValues[n].year;this.displayObject.value=this.CalendarValues[n].calendarText;this.dateValue=this.CalendarValues[n].calendarValue;this.currentValue=this.year;this.oldValue=this.year;this.outerValue=this.year;this.close();this.displayObject.blur();var scope=this;setTimeout(function(){scope.onRefresh.fire();},10);}else{this.close();alert(\"您所要输出的控件对象并不存在！\");}\nif(this.followcodes!=\"\"){eval(this.followcodes);}};YearCalendar.prototype.calendarCellDblClick=function(n){this.calendarCellClick(n);};YearCalendar.prototype.setDateStyle=function(datestyle){this.datestyle=datestyle;this.writeIframe();};YearCalendar.prototype.setateValueStyle=function(dateValueStyle){this.dateValueStyle=dateValueStyle;this.writeIframe();};YearCalendar.prototype.setTitleStyle=function(TitleStyle){this.TitleStyle=TitleStyle;this.writeIframe();};YearCalendar.prototype.setYear=function(year){if(isNaN(year)||year<=999||year>9999)return;this.year=parseInt(year,10);this.writeCalendar();};YearCalendar.prototype.correctPosition=function(){var CalendarWindow=this.frame;if(CalendarWindow.bDrag){var x=event.clientX-CalendarWindow.datelayerx;var y=event.clientY-CalendarWindow.datelayery;this.Style.left=(x<0?0:x)+\"px\";this.Style.top=(y<0?0:y)+\"px\";}};YearCalendar.prototype.MouseOver=function(){this.tmpTdClass=this.className;this.className=\"mouseover-tenday\";};YearCalendar.prototype.MouseOut=function(){this.className=this.tmpTdClass;};","js/freequery/control/HalfYearCalendarWrapper.js":"\nvar Module2=jsloader.resolve(\"freequery.widget.Module2\");var domutils=jsloader.resolve(\"freequery.lang.domutils\");var UUIDGenerator=jsloader.resolve(\"freequery.thirdparty.UUIDGenerator\");var HalfYearCalendarWrapper=function(container){var uuid=new UUIDGenerator();var CalendarStr=uuid.id;eval('if (!window.Calendar'+CalendarStr+') { '\n+'window.Calendar'+CalendarStr+' = new HalfYearCalendar(container,\"Calendar'+CalendarStr+'\"); '\n+'window.Calendar'+CalendarStr+'.owner = this; '\n+'this.Calendar = window.Calendar'+CalendarStr+'}');};lang.extend(HalfYearCalendarWrapper,Module2);HalfYearCalendarWrapper.prototype.destroy=function(){if(this.Calendar){this.Calendar.destroy();this.Calendar=null;}\nHalfYearCalendarWrapper.superclass.destroy.call(this);};var HalfYearCalendar=function(container,varname){this.parent=container;this.ObjectName=\"parent.\"+varname;this.ObjectWindow=\"window.\"+varname;this.frameId=this.ObjectName+\".HalfYearCalendarLayer\";this.frame=document.getElementById(this.frameId);if(!this.frame){this.initFrame();}\nthis.isWrite=false;this.bmoveable=true;this.datestyle=\"yyyy 年 h半年\";this.dateValueStyle=\"yyyyHh\";this.TitleStyle=\"yyyy年 h半年\";this.cellwidth=74;this.cellheight=50;this.toolBarHeight=25;this.CalendarContainer=window.frames[this.frameId].document;this.Style=this.frame.style;this.year=new Date().getFullYear();this.month=new Date().getMonth()+1;this.date=new Date().getDate();this.halfYear=this.monthOfHalfYear(this.month);this.thisHalfYear=new HalfYear(this.year,this.halfYear);this.CalendarValues=new Array(2);this.CalendarCell=new Array(2);this.outerValue=\"\";this.oldValue=\"\";this.currentValue=\"\";this.displayObject=null;this.dateValue=\"\";this.srcButton=null;this.followcodes=\"\";this.ScrollYearOnClick=true;this.onRefresh=new CustomEvent(\"editChange\",this);this.ifCheckEditChange=true;};lang.extend(HalfYearCalendar,Module2);function HalfYear(year,halfYear){this.year=year;this.halfYear=halfYear;};HalfYearCalendar.prototype.destroy=function(){if(this.Style){this.Style=null;delete this.Style;}\nif(this.srcButton){this.srcButton=null;}\nif(this.displayObject){this.displayObject=null;}\nif(this.CalendarValues){this.CalendarValues=null;delete this.CalendarValues;}\nif(this.titleDiv){document.body.removeChild(this.titleDiv);if(this.titleCantainer){this.titleDiv.removeChild(this.titleCantainer);this.titleCantainer.innerHTML=\"\";delete this.titleCantainer;}\ndomutils.destroyNode(this.titleDiv);}\nthis.onRefresh=null;if(this.CalendarCell){if(this.CalendarContainer){for(var id in this.CalendarCell){this.CalendarCell[id].innerHTML=\"\";delete this.CalendarCell[id];}\nthis.CalendarContainer.writeln('');this.CalendarContainer.close();delete this.CalendarContainer;}\nthis.CalendarCell=null;}\nif(this.frame){document.body.removeChild(this.frame);this.frame.src=\"about:blank\";domutils.destroyNode(this.frame);delete this.frame;}\nif(this.owner){this.owner=null;delete this.owner;}\nif(this.parent)\nthis.parent.innerHTML=\"\";HalfYearCalendar.superclass.destroy.call(this);};HalfYearCalendar.prototype.initFrame=function(){this.frame=document.createElement(\"iframe\");this.frame.setAttribute(\"id\",this.frameId);this.frame.setAttribute(\"name\",this.frameId);this.frame.className=\"multicalendar-iframe\";this.frame.setAttribute(\"scrolling\",\"no\");this.frame.setAttribute(\"onmouseout\",\"\"+this.ObjectName+\".correctPosition()\");this.frame.style.display=\"none\";document.body.appendChild(this.frame);};HalfYearCalendar.prototype.writeIframe=function(){if(this.cellwidth<21)this.cellwidth=21;if(this.cellheight<20)this.cellheight=20;var strFrame;strFrame='<style>';with(this){strFrame+='*{font-family:宋体;}';strFrame+='DIV.calendar-panel-size {width:'+(getCalendarWidth())+';height:'+(getCalendarHeight()+2)+';}';strFrame+='TABLE.calendar-main-size {width:'+(getCalendarWidth())+'px;height:'+getCalendarHeight()+'px;}';strFrame+='.head-size{width:'+(getCalendarWidth()-2)+';height:'+getToolBarHeight()+';}';strFrame+='table.year-size{width:'+(getYearWidth())+'px;height:48px;}';strFrame+='calendarcell-size{width:'+(getCalendarWidth()-2)+';height:'+(getBodyHeight())+';}';}\nstrFrame+='<\/style>';strFrame+='<scr'+'ipt>';strFrame+='     var datelayerx,datelayery; /*存放半年历控件的鼠标位置*/      ';strFrame+='     var bDrag=false; ';strFrame+='     var DateLayer='+this.ObjectName+'.Style;    ';strFrame+='     document.onmousemove=function(){/*在鼠标移动事件中，如果开始拖动半年历，则移动半年历*/     ';strFrame+='      if(bDrag){     ';strFrame+='       DateLayer.left = (parseInt(DateLayer.left,10)+window.event.clientX-datelayerx)+\"px\";/*由于每次移动以后鼠标位置都恢复为初始的位置，因此写法与div中不同*/     ';strFrame+='       DateLayer.top = (parseInt(DateLayer.top,10)+window.event.clientY-datelayery)+\"px\";    ';strFrame+='      }';strFrame+='     }; ';strFrame+='     function DragStart(){  /*开始半年历拖动*/     ';strFrame+='      if(window.event.button== 1){   /*值1表示鼠标左键*/ ';strFrame+='       datelayerx=window.event.clientX;  ';strFrame+='       datelayery=window.event.clientY;  ';strFrame+='       bDrag=true;  ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function DragEnd(){  /*结束半年历拖动*/';strFrame+='      bDrag=false;   ';strFrame+='     }  ';strFrame+='     document.onmousedown=function(){ /*点击的时候关闭年份和月份的选择列表*/ ';strFrame+='      var obj=document.getElementById(\"tmpSelectYearLayer\");   ';strFrame+='      if(!bFromYear&&event.srcElement!=document.getElementById(\"CalendarYearHead\")&&obj.style.display!=\"none\"){ ';strFrame+='       obj.style.display=\"none\";bYearListOpening=true  ';strFrame+='      }';strFrame+='     }; ';strFrame+='     var strTempClass=\"\";    ';strFrame+='     document.oncontextmenu=function(){/*禁止出现右键菜单*/     ';strFrame+='      if(!event.ctrlKey)return false;     ';strFrame+='     }; ';strFrame+='     function mOver(obj){/*年/月选择列表的mouseover处理*/';strFrame+='      strTempClass=obj.className;  ';strFrame+='      obj.className=\"mouseoverYM\"; ';strFrame+='      bYearListOpening=false;  /*为了显示年份列表的时候向上滚动功能的正常使用*/     ';strFrame+='     }  ';strFrame+='     function mOut(obj){/*年/月选择列表的mouseout处理*/  ';strFrame+='      obj.className=strTempClass;  ';strFrame+='     }  ';strFrame+='     function setYear(iYear){/*下拉选择年份的处理*/      ';strFrame+='      '+this.ObjectName+'.setYear(iYear) ';strFrame+='     }  ';strFrame+='     var bScrolling=false;   ';strFrame+='     var bYearListOpening=true; /*这个变量用于控制在刚刚显示年份列表的时候，鼠标处于向上滚动条位置的情况下不要滚动*/    ';strFrame+='     var iScroll=null;';strFrame+='     var bFromYear=false; /*标志为从年份下拉列表处进行了点击，以便不要关闭年份列表*/';strFrame+='     function scrollYear(bUp){/*滚动年份列表*/    ';strFrame+='      var oTable=document.getElementById(\"tmpSelectYearLayer\").childNodes[0];';strFrame+='      if(bUp){';strFrame+='       var iMin=parseInt(oTable.rows[1].cells[0].innerHTML.replace(/\\\\D/g,\\'\\'),10);  ';strFrame+='       if(iMin>1000){      ';strFrame+='        oTable.deleteRow(oTable.rows.length-2);';strFrame+='        var oTd=oTable.insertRow(1).insertCell(0);    ';strFrame+='        oTd.innerHTML=(iMin-1).toString()+\"年\";      ';strFrame+='        oTd.onmouseover=Function(\"mOver(this)\");      ';strFrame+='        oTd.onmouseout=Function(\"mOut(this)\"); ';strFrame+='        oTd.onmousedown=Function(\"setYear(\"+(iMin-1).toString()+\")\");      ';strFrame+='        oTd.className=(iMin-1=='+this.ObjectName+'.year?\"selectedYM\":\"normalYM\");';strFrame+='        if(bScrolling){   ';strFrame+='         window.setTimeout(\"scrollYear(true)\", 300); ';strFrame+='        }   ';strFrame+='       }     ';strFrame+='      }else{  ';strFrame+='       var iMax=parseInt(oTable.rows[oTable.rows.length-2].cells[0].innerHTML.replace(/\\\\D/g,\\'\\'),10);    ';strFrame+='       if(iMax<=9999){     ';strFrame+='        var oTd=oTable.insertRow(oTable.rows.length-1).insertCell(0);      ';strFrame+='        oTable.deleteRow(1);     ';strFrame+='        oTd.innerHTML=(iMax+1).toString()+\"年\";      ';strFrame+='        oTd.onmouseover=Function(\"mOver(this)\");      ';strFrame+='        oTd.onmouseout=Function(\"mOut(this)\"); ';strFrame+='        oTd.onmousedown=Function(\"setYear(\"+(iMax+1).toString()+\")\");      ';strFrame+='        oTd.className=(iMax+1=='+this.ObjectName+'.year?\"selectedYM\":\"normalYM\");';strFrame+='        if(bScrolling){   ';strFrame+='         window.setTimeout(\"scrollYear(false)\", 300);';strFrame+='        }   ';strFrame+='       }     ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function startScroll(oTd,bUp){ ';strFrame+='      bFromYear=true;';strFrame+='      if(!bYearListOpening){';strFrame+='       bScrolling=true;    ';strFrame+='       scrollYear(bUp);    ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function stopScroll(){  ';strFrame+='      bYearListOpening=false;      ';strFrame+='      bFromYear=false;      ';strFrame+='      bScrolling=false;     ';strFrame+='      if(iScroll){   ';strFrame+='       clearTimeout(iScroll);     ';strFrame+='      }';strFrame+='     }  ';strFrame+='<\/scr'+'ipt>';with(this){strFrame+=' <div class=\"calendar-panel-size\" >';strFrame+='  <div style=\"z-index:9999;position: absolute; left:0; top:0;\" onselectstart=\"return false\">  ';strFrame+='   <span id=tmpSelectYearLayer class=\"year\" style=\"display: none;top:1px;left:23px;\"><\/span> ';strFrame+='   <table border=0 cellspacing=0 cellpadding=0 class=\"calendar-main-size main mainbackgroundcolor\">     ';strFrame+='    <tr>';strFrame+='     <td class=\"head-size mainbackgroundcolor\"> ';strFrame+='      <table class=\"head-size mainbackgroundcolor whiteborder\" border=0 cellspacing=0 cellpadding=0 > ';strFrame+='       <tr align=center>     ';strFrame+='        <td width=19><span class=\"calendar-border-noleft calendar-border-left prev-month-tool-button\" title=\"前一年\" onclick=\"'+this.ObjectName+'.goPrevYear()\" ondblclick=\"'+this.ObjectName+'.goPrevYear()\" onfocus=\"this.blur()\" ><span><\/td>';strFrame+='        <td width='+getYearWidth()+' align=center class=\"calendarhead\" onmouseover=\"className=\\'mouseover\\'\" onmouseout=\"className=\\'calendarhead\\'\" onclick=\"'+this.ObjectName+'.selectYear(this.innerHTML.substring(0,4))\" title=\"点击这里选择年份\" id=CalendarYearHead><\/td>    ';strFrame+='        <td width=19><span class=\"calendar-border-noleft calendar-border-left next-month-tool-button\" title=\"后一年\" onclick=\"'+this.ObjectName+'.goNextYear()\" ondblclick=\"'+this.ObjectName+'.goNextYear()\" onfocus=\"this.blur()\" ><span><\/td>';strFrame+='       <\/tr>     ';strFrame+='      <\/table>    ';strFrame+='     <\/td>   ';strFrame+='    <\/tr>     ';strFrame+='    <tr>';strFrame+='     <td class=\"calendarcell-size\" align=center> ';strFrame+='         <table align=center border=0 cellspacing=\"0\" cellpadding=0 class=\"calendarcell calendarcell-size\" > ';strFrame+='       <tr align=center>  ';strFrame+='        <td width='+(cellwidth)+' height='+(cellheight)+' id=CalendarCell0>上半年<\/td>';strFrame+='        <td width='+(cellwidth)+' height='+(cellheight)+' id=CalendarCell1>下半年<\/td>';strFrame+='       <\/tr> ';strFrame+='         <\/table>    ';strFrame+='       <\/td>   ';strFrame+='    <\/tr>     ';strFrame+='   <\/table>';strFrame+='  <\/div>  ';strFrame+=' <\/div>  ';}\nthis.CalendarContainer=window.frames[this.frameId].document;this.CalendarContainer.writeln(strFrame);this.CalendarContainer.close();this.Style.width=this.getCalendarWidth();this.Style.height=this.getCalendarHeight();var head=this.CalendarContainer.getElementsByTagName(\"head\").item(0);var fileref=this.CalendarContainer.createElement(\"link\");fileref.setAttribute(\"rel\",\"stylesheet\");fileref.setAttribute(\"type\",\"text/css\");var cssHref=window.bof_offline_xhr?\"css/bof_merge.css\":jsloader.baseHref+\"css/bof_merge.css.jsp\";fileref.setAttribute(\"href\",cssHref);if(typeof fileref!=\"undefined\"){head.appendChild(fileref);}\nfor(i=0;i<2;i++)\n{this.CalendarCell[i]=this.CalendarContainer.getElementById('CalendarCell'+i);var tempDay=this.CalendarCell[i];tempDay.style.cursor=\"pointer\";tempDay.onmouseover=this.MouseOver;tempDay.onmouseout=this.MouseOut;tempDay.onclick=Function(this.ObjectWindow+\".calendarCellClick(\"+i+\")\");tempDay.ondblclick=Function(this.ObjectWindow+\".calendarCellDblClick(\"+i+\")\");}\nthis.isWrite=true;};HalfYearCalendar.prototype.showCalendar=function(srcButton,displayObject){if(!this.isWrite){this.writeIframe();}\nvar selt=this;var obj;var calendarButton;this.followcodes=\"\";if(displayObject){calendarButton=displayObject;if(typeof(displayObject)==\"object\")obj=displayObject\nelse if(typeof(displayObject)==\"string\")this.followcodes=displayObject;}else{calendarButton=srcButton;}\nvar th=srcButton;var calendarStyle=this.Style;var ttop=calendarButton.offsetTop;var thei=calendarButton.offsetHeight;var twid=calendarButton.offsetWidth;var tleft=calendarButton.offsetLeft;var ttyp=calendarButton.type;while(calendarButton=calendarButton.offsetParent){ttop+=calendarButton.offsetTop;tleft+=calendarButton.offsetLeft;}\nvar cheight=this.getCalendarHeight();if(document.body.clientHeight>cheight+thei&&document.body.clientHeight-(ttop-document.body.scrollTop)<cheight+thei&&ttop-document.body.scrollTop>cheight){calendarStyle.top=ttop-cheight-1}else{calendarStyle.top=ttop+thei+1;}\ncalendarStyle.left=tleft;this.displayObject=!obj?th:obj;this.srcButton=!obj?null:th;var tempValue=this.getValueToDate(this.dateValue);this.outerValue=tempValue;this.oldValue=tempValue;this.currentValue=tempValue;if(tempValue!=\"\"){this.year=tempValue.year;this.halfYear=tempValue.halfYear;}else{this.year=new Date().getFullYear();this.halfYear=this.thisHalfYear.halfYear;}\nthis.writeCalendar();calendarStyle.display='';this.addEvent(document,\"click\",function(){with(window.event)\nif(srcElement!=selt.srcButton&&srcElement!=selt.displayObject){selt.close();}});};HalfYearCalendar.prototype.writeCalendar=function(){if(!this.CalendarContainer.getElementById(\"CalendarYearHead\"))\nreturn;var selt=this;var yy=this.year;var qq=this.halfYear;this.CalendarContainer.getElementById(\"CalendarYearHead\").innerHTML=yy+\" 年\";for(var m=0;m<2;m++){this.CalendarValues[m]=new CalendarDataObject(yy,m+1);}\nfor(var m=0;m<2;m++){var tempDay=this.CalendarCell[m];if(this.outerValue&&this.CalendarValues[m].equals(this.outerValue)){tempDay.className=\"selectedday-quarter\";}else if(this.CalendarValues[m].equals(this.thisHalfYear)){tempDay.className=\"normalday\";}else{tempDay.className=\"normalday\";}}\nfunction CalendarDataObject(year,halfYear){this.year=year;this.halfYear=halfYear;this.calendarValue=selt.dateValueStyle.replace(\"yyyy\",this.year).replace(\"h\",this.halfYear);this.calendarText=selt.datestyle.replace(\"yyyy\",this.year).replace(\"h\",(parseInt(this.halfYear,10)==1)?\"上\":\"下\");this.calendarTitle=selt.TitleStyle.replace(\"yyyy\",this.year).replace(\"h\",(parseInt(this.halfYear,10)==1)?\"上\":\"下\");this.equals=function(value){try{return this.year==value.year&&this.halfYear==value.halfYear;}\ncatch(e){return false;}}}};HalfYearCalendar.prototype.onEditChange=function(){if(this.ifCheckEditChange){var tempText=this.getText();if(tempText!=\"\"){if(!this.isValidText(tempText)){alert(\"输入日期格式不正确，请重新输入！\");this.displayObject.value=this.getDateToText(this.oldValue);this.dateValue=this.getDateToValue(this.oldValue);}else{var tempDate=this.getTextToDate(tempText);var tempValue=this.getDateToValue(tempDate);this.year=tempDate.year;this.halfYear=tempDate.halfYear;this.dateValue=tempValue;this.outerValue=tempDate;this.oldValue=tempDate;this.currentValue=tempDate;this.onRefresh.fire();this.writeCalendar();}}else{this.setValue(\"\");}}};HalfYearCalendar.prototype.isValidDate=function(testDate){var myRegExp=/^(((1[6-9]|[2-9]\\d)\\d{2})H([1-2]))$/;return myRegExp.test(testDate);};HalfYearCalendar.prototype.isValidText=function(testContent){var myRegExp=/^(((1[6-9]|[2-9]\\d)\\d{2})\\s(\\u5e74)\\s(\\u4e0a|\\u4e0b)(\\u534a\\u5e74))$/;return myRegExp.test(testContent);};HalfYearCalendar.prototype.getDateToValue=function(Date){var tempDate=Date;var result=\"\";if(tempDate!=\"\"&&tempDate){var year=tempDate.year;var halfYear=tempDate.halfYear;result=this.dateValueStyle.replace(\"yyyy\",year).replace(\"h\",halfYear);}\nreturn result;};HalfYearCalendar.prototype.getDateToText=function(Date){var tempDate=Date;var result=\"\";if(tempDate!=\"\"&&tempDate){var year=tempDate.year;var halfYear=tempDate.halfYear;result=this.datestyle.replace(\"yyyy\",year).replace(\"h\",((parseInt(halfYear,10)==1)?\"上\":\"下\"));}\nreturn result;};HalfYearCalendar.prototype.getTextToDate=function(Text){var reg=new RegExp(\"^\"+this.datestyle.replace(\"yyyy\",\"(\\\\d{4})\").replace(\"h\",\"(\\u4e0a|\\u4e0b)\")+\"$\");var r=Text.match(reg);var date=null;if(r!=null){r[1]=parseInt(r[1],10);r[2]=parseInt((r[2]==\"上\"?1:2),10);date=new HalfYear(r[1],r[2]);}else{date=\"\";}\nreturn date;};HalfYearCalendar.prototype.getValueToDate=function(value){var reg=new RegExp(\"^\"+this.dateValueStyle.replace(\"yyyy\",\"(\\\\d{4})\").replace(\"h\",\"(\\\\d{1})\")+\"$\");var r=value.match(reg);var date=null;if(r!=null){r[1]=parseInt(r[1],10);r[2]=parseInt(r[2],10);date=new HalfYear(r[1],r[2]);}else{date=\"\";}\nreturn date;};HalfYearCalendar.prototype.addEvent=function(obj,eventName,oCallback){var ret;ret=obj.attachEvent(\"on\"+eventName,oCallback);return ret;};HalfYearCalendar.prototype.close=function(){if(this.CalendarContainer){this.CalendarContainer.getElementById(\"tmpSelectYearLayer\").style.display=\"none\";this.Style.display=\"none\";}};HalfYearCalendar.prototype.getText=function(){return this.displayObject.value;};HalfYearCalendar.prototype.getValue=function(){var date=this.getTextToDate(this.getText());var value=this.getDateToValue(date);return value+\"\";};HalfYearCalendar.prototype.setText=function(text){if(this.displayObject){this.displayObject.value=text;this.onEditChange();}else{alert(\"您所要输出的控件对象并不存在！\");}\nif(this.followcodes!=\"\"){eval(this.followcodes);}};HalfYearCalendar.prototype.setValue=function(value){var tempdate=this.getValueToDate(value);var temptext=this.getDateToText(tempdate);this.displayObject.value=temptext;this.dateValue=value;this.outerValue=tempdate;this.oldValue=tempdate;this.currentValue=tempdate;};HalfYearCalendar.prototype.setReadOnly=function(readonly){if(readonly){this.ifCheckEditChange=false;}else{this.ifCheckEditChange=true;}\nthis.displayObject.readOnly=readonly;};HalfYearCalendar.prototype.getReadOnly=function(){return this.displayObject.readOnly;};HalfYearCalendar.prototype.setScrollYearOnClick=function(scoll){this.ScrollYearOnClick=scoll;};HalfYearCalendar.prototype.getScrollYearOnClick=function(){return this.ScrollYearOnClick;};HalfYearCalendar.prototype.getCalendarWidth=function(){return parseInt(this.cellwidth*2+2+1,10);};HalfYearCalendar.prototype.getCalendarHeight=function(){return this.cellheight+this.toolBarHeight+2+1;};HalfYearCalendar.prototype.getYearWidth=function(){return parseInt((this.getCalendarWidth()-42-2-4),10);};HalfYearCalendar.prototype.getToolBarHeight=function(){return this.toolBarHeight;};HalfYearCalendar.prototype.getBodyHeight=function(){return this.cellheight+1;};HalfYearCalendar.prototype.selectYear=function(strYear){if(strYear.match(/\\D/)!=null)return;var m=(strYear)?strYear:new Date().getFullYear();if(m<1000||m>9999)return;var n=m-1;if(n<1000)n=1000;if(n+100>9999)n=9900;var s='';s+='<table border=0 cellspacing=0 cellpadding=0 class=\"year year-size\">';if(this.ScrollYearOnClick){s+='<tr><td align=center height=3 onmouseout=\"stopScroll()\"'+'onclick=\"return false\" onmousedown=\"startScroll(this,true)\" onmouseup=\"stopScroll()\" style=\"cursor:pointer\" title=\"向上滚动年份\"><span class=\"prev-year-button\" ><\/span><\/td><\/tr>';}\nelse{s+='<tr><td align=center height=3 style=\"cursor:pointer\" onmouseover=\"startScroll(this,true)\" onmouseout=\"stopScroll()\"'+'onclick=\"return false\" title=\"向上滚动年份\"><span class=\"prev-year-button\" ><\/span><\/td><\/tr>';}\nfor(var i=n;i<n+3;i++){s+='<tr><td class='+(i==parseInt(strYear,10)?'selectedYM':'normalYM')+' style=\"cursor:pointer\" onmouseover=\"mOver(this)\" onmouseout=\"mOut(this)\" onmousedown=\"setYear('+i+')\">'+i+'年'+'<\/td><\/tr>';}\nif(this.ScrollYearOnClick){s+='<tr><td align=center height=3 style=\"cursor:pointer\" onmouseout=\"stopScroll()\"'+'onclick=\"return false\" onmousedown=\"startScroll(this,false)\" onmouseup=\"stopScroll()\" title=\"向下滚动年份\"><span class=\"next-year-button\" ><\/span><\/td><\/tr>';}\nelse{s+='<tr><td align=center height=3 style=\"cursor:pointer\" onmouseover=\"startScroll(this,false)\" onmouseout=\"stopScroll()\"'+'onclick=\"return false\" title=\"向下滚动年份\"><span class=\"next-year-button\" ><\/span><\/td><\/tr>';}\ns+='<\/table>';this.CalendarContainer.getElementById(\"tmpSelectYearLayer\").innerHTML=s;this.CalendarContainer.getElementById(\"tmpSelectYearLayer\").style.display=\"\";};HalfYearCalendar.prototype.goPrevYear=function(){if(this.year>1000&&this.year<10000){this.year--;this.writeCalendar();}};HalfYearCalendar.prototype.goNextYear=function(){if(this.year>999&&this.year<9999){this.year++;this.writeCalendar();}};HalfYearCalendar.prototype.monthOfHalfYear=function(month){var halfYear;if(month<7){halfYear=1;}else{halfYear=2;}\nreturn halfYear;};HalfYearCalendar.prototype.calendarCellClick=function(n){if(this.displayObject){this.year=this.CalendarValues[n].year;this.halfYear=this.CalendarValues[n].halfYear;this.displayObject.value=this.CalendarValues[n].calendarText;this.dateValue=this.CalendarValues[n].calendarValue;var tempHalfYear=new HalfYear(this.year,this.halfYear);this.currentValue=tempHalfYear;this.oldValue=tempHalfYear;this.outerValue=tempHalfYear;this.close();this.displayObject.blur();var scope=this;setTimeout(function(){scope.onRefresh.fire();},10);}else{this.close();alert(\"您所要输出的控件对象并不存在！\");}\nif(this.followcodes!=\"\"){eval(this.followcodes);}};HalfYearCalendar.prototype.calendarCellDblClick=function(n){this.calendarCellClick(n);};HalfYearCalendar.prototype.setDateStyle=function(datestyle){this.datestyle=datestyle;this.writeIframe();};HalfYearCalendar.prototype.setateValueStyle=function(dateValueStyle){this.dateValueStyle=dateValueStyle;this.writeIframe();};HalfYearCalendar.prototype.setTitleStyle=function(TitleStyle){this.TitleStyle=TitleStyle;this.writeIframe();};HalfYearCalendar.prototype.setYear=function(year){if(isNaN(year)||year<=999||year>9999)return;this.year=parseInt(year,10);this.writeCalendar();};HalfYearCalendar.prototype.correctPosition=function(){var CalendarWindow=this.frame;if(CalendarWindow.bDrag){var x=event.clientX-CalendarWindow.datelayerx;var y=event.clientY-CalendarWindow.datelayery;this.Style.left=(x<0?0:x)+\"px\";this.Style.top=(y<0?0:y)+\"px\";}};HalfYearCalendar.prototype.MouseOver=function(){this.tmpTdClass=this.className;this.className=\"mouseover-quarter\";};HalfYearCalendar.prototype.MouseOut=function(){this.className=this.tmpTdClass;};","js/freequery/control/QuarterCalendarWrapper.js":"\nvar Module2=jsloader.resolve(\"freequery.widget.Module2\");var domutils=jsloader.resolve(\"freequery.lang.domutils\");var UUIDGenerator=jsloader.resolve(\"freequery.thirdparty.UUIDGenerator\");var QuarterCalendarWrapper=function(container){var uuid=new UUIDGenerator();var CalendarStr=uuid.id;eval('if (!window.Calendar'+CalendarStr+') { '\n+'window.Calendar'+CalendarStr+' = new QuarterCalendar(container,\"Calendar'+CalendarStr+'\"); '\n+'window.Calendar'+CalendarStr+'.owner = this; '\n+'this.Calendar = window.Calendar'+CalendarStr+'}');}\nlang.extend(QuarterCalendarWrapper,Module2);QuarterCalendarWrapper.prototype.destroy=function(){if(this.Calendar){this.Calendar.destroy();this.Calendar=null;}\nQuarterCalendarWrapper.superclass.destroy.call(this);};var QuarterCalendar=function(container,varname){this.parent=container;this.ObjectName=\"parent.\"+varname;this.ObjectWindow=\"window.\"+varname;this.frameId=this.ObjectName+\".QuarterCalendarLayer\";this.frame=document.getElementById(this.frameId);if(!this.frame){this.initFrame();}\nthis.isWrite=false;this.bmoveable=true;this.datestyle=\"yyyy 年 q 季度\";this.dateValueStyle=\"yyyyQq\";this.TitleStyle=\"yyyy年 第q季\";this.cellwidth=74;this.cellheight=50;this.toolBarHeight=25;this.CalendarContainer=window.frames[this.frameId].document;this.Style=this.frame.style;this.year=new Date().getFullYear();this.month=new Date().getMonth()+1;this.date=new Date().getDate();this.quarter=this.monthOfQuarter(this.month);this.thisQuarter=new Quarter(this.year,this.quarter);this.CalendarValues=new Array(4);this.CalendarCell=new Array(4);this.outerValue=\"\";this.oldValue=\"\";this.currentValue=\"\";this.displayObject=null;this.dateValue=\"\";this.srcButton=null;this.followcodes=\"\";this.ScrollYearOnClick=true;this.onRefresh=new CustomEvent(\"editChange\",this);this.ifCheckEditChange=true;};lang.extend(QuarterCalendar,Module2);function Quarter(year,quarter){this.year=year;this.quarter=quarter;};QuarterCalendar.prototype.destroy=function(){if(this.Style){this.Style=null;delete this.Style;}\nif(this.srcButton){this.srcButton=null;}\nif(this.displayObject){this.displayObject=null;}\nif(this.CalendarValues){this.CalendarValues=null;delete this.CalendarValues;}\nif(this.titleDiv){document.body.removeChild(this.titleDiv);if(this.titleCantainer){this.titleDiv.removeChild(this.titleCantainer);this.titleCantainer.innerHTML=\"\";delete this.titleCantainer;}\ndomutils.destroyNode(this.titleDiv);}\nthis.onRefresh=null;if(this.CalendarCell){if(this.CalendarContainer){for(var id in this.CalendarCell){this.CalendarCell[id].innerHTML=\"\";delete this.CalendarCell[id];}\nthis.CalendarContainer.writeln('');this.CalendarContainer.close();delete this.CalendarContainer;}\nthis.CalendarCell=null;}\nif(this.frame){document.body.removeChild(this.frame);this.frame.src=\"about:blank\";domutils.destroyNode(this.frame);delete this.frame;}\nif(this.owner){this.owner=null;delete this.owner;}\nif(this.parent)\nthis.parent.innerHTML=\"\";QuarterCalendar.superclass.destroy.call(this);};QuarterCalendar.prototype.initFrame=function(){this.frame=document.createElement(\"iframe\");this.frame.setAttribute(\"id\",this.frameId);this.frame.setAttribute(\"name\",this.ObjectName+\".QuarterCalendarLayer\");this.frame.className=\"multicalendar-iframe\";this.frame.setAttribute(\"scrolling\",\"no\");this.frame.setAttribute(\"onmouseout\",\"\"+this.ObjectName+\".correctPosition()\");this.frame.style.display=\"none\";document.body.appendChild(this.frame);};QuarterCalendar.prototype.writeIframe=function(){if(this.cellwidth<21)this.cellwidth=21;if(this.cellheight<20)this.cellheight=20;var strFrame;strFrame='<style>';with(this){strFrame+='*{font-family:宋体;}';strFrame+='DIV.calendar-panel-size {width:'+(getCalendarWidth())+';height:'+(getCalendarHeight()+2)+';}';strFrame+='TABLE.calendar-main-size {width:'+(getCalendarWidth())+'px;height:'+getCalendarHeight()+'px;}';strFrame+='.head-size{width:'+(getCalendarWidth()-2)+';height:'+getToolBarHeight()+';}';strFrame+='table.year-size{width:'+(getYearWidth())+'px;height:48px;}';strFrame+='calendarcell-size{width:'+(getCalendarWidth()-2)+';height:'+(getBodyHeight())+';}';}\nstrFrame+='<\/style>';strFrame+='<scr'+'ipt>';strFrame+='     var datelayerx,datelayery; /*存放季历控件的鼠标位置*/      ';strFrame+='     var bDrag=false; ';strFrame+='     var DateLayer='+this.ObjectName+'.Style;    ';strFrame+='     document.onmousemove=function(){/*在鼠标移动事件中，如果开始拖动季历，则移动季历*/     ';strFrame+='      if(bDrag){     ';strFrame+='       DateLayer.left = (parseInt(DateLayer.left,10)+window.event.clientX-datelayerx)+\"px\";/*由于每次移动以后鼠标位置都恢复为初始的位置，因此写法与div中不同*/     ';strFrame+='       DateLayer.top = (parseInt(DateLayer.top,10)+window.event.clientY-datelayery)+\"px\";    ';strFrame+='      }';strFrame+='     }; ';strFrame+='     function DragStart(){  /*开始季历拖动*/     ';strFrame+='      if(window.event.button== 1){   /*值1表示鼠标左键*/ ';strFrame+='       datelayerx=window.event.clientX;  ';strFrame+='       datelayery=window.event.clientY;  ';strFrame+='       bDrag=true;  ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function DragEnd(){  /*结束季历拖动*/';strFrame+='      bDrag=false;   ';strFrame+='     }  ';strFrame+='     document.onmousedown=function(){ /*点击的时候关闭年份和月份的选择列表*/ ';strFrame+='      var obj=document.getElementById(\"tmpSelectYearLayer\");   ';strFrame+='      if(!bFromYear&&event.srcElement!=document.getElementById(\"CalendarYearHead\")&&obj.style.display!=\"none\"){ ';strFrame+='       obj.style.display=\"none\";bYearListOpening=true  ';strFrame+='      }';strFrame+='     }; ';strFrame+='     var strTempClass=\"\";    ';strFrame+='     document.oncontextmenu=function(){/*禁止出现右键菜单*/     ';strFrame+='      if(!event.ctrlKey)return false;     ';strFrame+='     }; ';strFrame+='     function mOver(obj){/*年/月选择列表的mouseover处理*/';strFrame+='      strTempClass=obj.className;  ';strFrame+='      obj.className=\"mouseoverYM\"; ';strFrame+='      bYearListOpening=false;  /*为了显示年份列表的时候向上滚动功能的正常使用*/     ';strFrame+='     }  ';strFrame+='     function mOut(obj){/*年/月选择列表的mouseout处理*/  ';strFrame+='      obj.className=strTempClass;  ';strFrame+='     }  ';strFrame+='     function setYear(iYear){/*下拉选择年份的处理*/      ';strFrame+='      '+this.ObjectName+'.setYear(iYear) ';strFrame+='     }  ';strFrame+='     var bScrolling=false;   ';strFrame+='     var bYearListOpening=true; /*这个变量用于控制在刚刚显示年份列表的时候，鼠标处于向上滚动条位置的情况下不要滚动*/    ';strFrame+='     var iScroll=null;';strFrame+='     var bFromYear=false; /*标志为从年份下拉列表处进行了点击，以便不要关闭年份列表*/';strFrame+='     function scrollYear(bUp){/*滚动年份列表*/    ';strFrame+='      var oTable=document.getElementById(\"tmpSelectYearLayer\").childNodes[0];';strFrame+='      if(bUp){';strFrame+='       var iMin=parseInt(oTable.rows[1].cells[0].innerHTML.replace(/\\\\D/g,\\'\\'),10);  ';strFrame+='       if(iMin>1000){      ';strFrame+='        oTable.deleteRow(oTable.rows.length-2);';strFrame+='        var oTd=oTable.insertRow(1).insertCell(0);    ';strFrame+='        oTd.innerHTML=(iMin-1).toString()+\"年\";      ';strFrame+='        oTd.onmouseover=Function(\"mOver(this)\");      ';strFrame+='        oTd.onmouseout=Function(\"mOut(this)\"); ';strFrame+='        oTd.onmousedown=Function(\"setYear(\"+(iMin-1).toString()+\")\");      ';strFrame+='        oTd.className=(iMin-1=='+this.ObjectName+'.year?\"selectedYM\":\"normalYM\");';strFrame+='        if(bScrolling){   ';strFrame+='         window.setTimeout(\"scrollYear(true)\", 300); ';strFrame+='        }   ';strFrame+='       }     ';strFrame+='      }else{  ';strFrame+='       var iMax=parseInt(oTable.rows[oTable.rows.length-2].cells[0].innerHTML.replace(/\\\\D/g,\\'\\'),10);    ';strFrame+='       if(iMax<=9999){     ';strFrame+='        var oTd=oTable.insertRow(oTable.rows.length-1).insertCell(0);      ';strFrame+='        oTable.deleteRow(1);     ';strFrame+='        oTd.innerHTML=(iMax+1).toString()+\"年\";      ';strFrame+='        oTd.onmouseover=Function(\"mOver(this)\");      ';strFrame+='        oTd.onmouseout=Function(\"mOut(this)\"); ';strFrame+='        oTd.onmousedown=Function(\"setYear(\"+(iMax+1).toString()+\")\");      ';strFrame+='        oTd.className=(iMax+1=='+this.ObjectName+'.year?\"selectedYM\":\"normalYM\");';strFrame+='        if(bScrolling){   ';strFrame+='         window.setTimeout(\"scrollYear(false)\", 300);';strFrame+='        }   ';strFrame+='       }     ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function startScroll(oTd,bUp){ ';strFrame+='      bFromYear=true;';strFrame+='      if(!bYearListOpening){';strFrame+='       bScrolling=true;    ';strFrame+='       scrollYear(bUp);    ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function stopScroll(){  ';strFrame+='      bYearListOpening=false;      ';strFrame+='      bFromYear=false;      ';strFrame+='      bScrolling=false;     ';strFrame+='      if(iScroll){   ';strFrame+='       clearTimeout(iScroll);     ';strFrame+='      }';strFrame+='     }  ';strFrame+='<\/scr'+'ipt>';with(this){strFrame+=' <div class=\"calendar-panel-size\" >';strFrame+='  <div style=\"z-index:9999;position: absolute; left:0; top:0;\" onselectstart=\"return false\">  ';strFrame+='   <span id=tmpSelectYearLayer class=\"year\" style=\"display: none;left:23px;\"><\/span> ';strFrame+='   <table border=0 cellspacing=0 cellpadding=0 class=\"calendar-main-size main mainbackgroundcolor\">     ';strFrame+='    <tr>';strFrame+='     <td class=\"head-size mainbackgroundcolor\"> ';strFrame+='      <table class=\"head-size mainbackgroundcolor whiteborder\" border=0 cellspacing=0 cellpadding=0 > ';strFrame+='       <tr align=center>     ';strFrame+='        <td width=19><span class=\"calendar-border-noleft calendar-border-left prev-month-tool-button\" title=\"前一年\" onclick=\"'+this.ObjectName+'.goPrevYear()\" ondblclick=\"'+this.ObjectName+'.goPrevYear()\" onfocus=\"this.blur()\" ><span><\/td>';strFrame+='        <td width='+getYearWidth()+' align=center class=\"calendarhead\" onmouseover=\"className=\\'mouseover\\'\" onmouseout=\"className=\\'calendarhead\\'\" onclick=\"'+this.ObjectName+'.selectYear(this.innerHTML.substring(0,4))\" title=\"点击这里选择年份\" id=CalendarYearHead><\/td>    ';strFrame+='        <td width=19><span class=\"calendar-border-noleft calendar-border-left next-month-tool-button\" title=\"后一年\" onclick=\"'+this.ObjectName+'.goNextYear()\" ondblclick=\"'+this.ObjectName+'.goNextYear()\" onfocus=\"this.blur()\" ><span><\/td>';strFrame+='       <\/tr>     ';strFrame+='      <\/table>    ';strFrame+='     <\/td>   ';strFrame+='    <\/tr>     ';strFrame+='    <tr>';strFrame+='     <td class=\"calendarcell-size\" align=center> ';strFrame+='         <table align=center border=0 cellspacing=\"0\" cellpadding=0 class=\"calendarcell calendarcell-size\" > ';strFrame+='      <tr align=center>  ';strFrame+='       <td width='+(cellwidth)+' height='+(cellheight)+' id=CalendarCell0>一季度<\/td>';strFrame+='       <td width='+(cellwidth)+' height='+(cellheight)+' id=CalendarCell1>二季度<\/td>';strFrame+='      <\/tr> ';strFrame+='      <tr align=center>  ';strFrame+='       <td width='+(cellwidth)+' height='+(cellheight)+' id=CalendarCell2>三季度<\/td>';strFrame+='       <td width='+(cellwidth)+' height='+(cellheight)+' id=CalendarCell3>四季度<\/td>';strFrame+='      <\/tr> ';strFrame+='        <\/table>    ';strFrame+='      <\/td>   ';strFrame+='    <\/tr>     ';strFrame+='   <\/table>';strFrame+='  <\/div>  ';strFrame+=' <\/div>  ';}\nthis.CalendarContainer=window.frames[this.ObjectName+\".QuarterCalendarLayer\"].document\nthis.CalendarContainer.writeln(strFrame);this.CalendarContainer.close();this.Style.width=this.getCalendarWidth();this.Style.height=this.getCalendarHeight()+2;var head=this.CalendarContainer.getElementsByTagName(\"head\").item(0);var fileref=this.CalendarContainer.createElement(\"link\");fileref.setAttribute(\"rel\",\"stylesheet\");fileref.setAttribute(\"type\",\"text/css\");var cssHref=window.bof_offline_xhr?\"css/bof_merge.css\":jsloader.baseHref+\"css/bof_merge.css.jsp\";fileref.setAttribute(\"href\",cssHref);if(typeof fileref!=\"undefined\"){head.appendChild(fileref);}\nfor(i=0;i<4;i++)\n{this.CalendarCell[i]=this.CalendarContainer.getElementById('CalendarCell'+i);var tempDay=this.CalendarCell[i];tempDay.style.cursor=\"pointer\";tempDay.onmouseover=this.MouseOver;tempDay.onmouseout=this.MouseOut;tempDay.onclick=Function(this.ObjectWindow+\".calendarCellClick(\"+i+\")\");tempDay.ondblclick=Function(this.ObjectWindow+\".calendarCellDblClick(\"+i+\")\");}\nthis.isWrite=true;};QuarterCalendar.prototype.showCalendar=function(srcButton,displayObject){if(!this.isWrite){this.writeIframe();}\nvar selt=this;var obj;var calendarButton;this.followcodes=\"\";if(displayObject){calendarButton=displayObject;if(typeof(displayObject)==\"object\")obj=displayObject\nelse if(typeof(displayObject)==\"string\")this.followcodes=displayObject;}else{calendarButton=srcButton;}\nvar th=srcButton;var calendarStyle=this.Style;var ttop=calendarButton.offsetTop;var thei=calendarButton.offsetHeight;var twid=calendarButton.offsetWidth;var tleft=calendarButton.offsetLeft;var ttyp=calendarButton.type;while(calendarButton=calendarButton.offsetParent){ttop+=calendarButton.offsetTop;tleft+=calendarButton.offsetLeft;}\nvar cheight=this.getCalendarHeight();if(document.body.clientHeight>cheight+thei&&document.body.clientHeight-(ttop-document.body.scrollTop)<cheight+thei&&ttop-document.body.scrollTop>cheight){calendarStyle.top=ttop-cheight-1}else{calendarStyle.top=ttop+thei+1;}\ncalendarStyle.left=tleft;this.displayObject=!obj?th:obj;this.srcButton=!obj?null:th;var tempValue=this.getValueToDate(this.dateValue);this.outerValue=tempValue;this.oldValue=tempValue;this.currentValue=tempValue;if(tempValue!=\"\"){this.year=tempValue.year;this.quarter=tempValue.quarter;}else{this.year=new Date().getFullYear();this.quarter=this.thisQuarter.quarter;}\nthis.writeCalendar();calendarStyle.display='';this.addEvent(document,\"click\",function(){with(window.event)\nif(srcElement!=selt.srcButton&&srcElement!=selt.displayObject){selt.close();}});};QuarterCalendar.prototype.writeCalendar=function(){if(!this.CalendarContainer.getElementById(\"CalendarYearHead\"))\nreturn;var selt=this;var yy=this.year;var qq=this.quarter;this.CalendarContainer.getElementById(\"CalendarYearHead\").innerHTML=yy+\" 年\";for(var m=0;m<4;m++){this.CalendarValues[m]=new CalendarDataObject(yy,m+1);}\nfor(var m=0;m<4;m++){var tempDay=this.CalendarCell[m];if(this.outerValue&&this.CalendarValues[m].equals(this.outerValue)){tempDay.className=\"selectedday-quarter\";}else if(this.CalendarValues[m].equals(this.thisQuarter)){tempDay.className=\"normalday\";}else{tempDay.className=\"normalday\";}}\nfunction CalendarDataObject(year,quarter){this.year=year;this.quarter=quarter;this.calendarValue=selt.dateValueStyle.replace(\"yyyy\",this.year).replace(\"q\",this.quarter);this.calendarText=selt.datestyle.replace(\"yyyy\",this.year).replace(\"q\",this.quarter);this.calendarTitle=selt.TitleStyle.replace(\"yyyy\",this.year).replace(\"q\",this.quarter);this.equals=function(value){try{return this.year==value.year&&this.quarter==value.quarter;}\ncatch(e){return false;}}}};QuarterCalendar.prototype.onEditChange=function(){if(this.ifCheckEditChange){var tempText=this.getText();if(tempText!=\"\"){if(!this.isValidText(tempText)){alert(\"输入日期格式不正确，请重新输入！\");this.displayObject.value=this.getDateToText(this.oldValue);this.dateValue=this.getDateToValue(this.oldValue);}else{var tempDate=this.getTextToDate(tempText);var tempValue=this.getDateToValue(tempDate);this.year=tempDate.year;this.quarter=tempDate.quarter;this.dateValue=tempValue;this.outerValue=tempDate;this.oldValue=tempDate;this.currentValue=tempDate;this.onRefresh.fire();this.writeCalendar();}}else{this.setValue(\"\");}}};QuarterCalendar.prototype.isValidDate=function(testDate){var myRegExp=/^(((1[6-9]|[2-9]\\d)\\d{2})Q([1-4]))$/;return myRegExp.test(testDate);};QuarterCalendar.prototype.isValidText=function(testContent){var myRegExp=/^(((1[6-9]|[2-9]\\d)\\d{2})\\s(\\u5e74)\\s([1-4])\\s(\\u5b63\\u5ea6))$/;return myRegExp.test(testContent);};QuarterCalendar.prototype.getDateToValue=function(Date){var tempDate=Date;var result=\"\";if(tempDate!=\"\"&&tempDate){var year=tempDate.year;var quarter=tempDate.quarter;result=this.dateValueStyle.replace(\"yyyy\",year).replace(\"q\",quarter);}\nreturn result;};QuarterCalendar.prototype.getDateToText=function(Date){var tempDate=Date;var result=\"\";if(tempDate!=\"\"&&tempDate){var year=tempDate.year;var quarter=tempDate.quarter;result=this.datestyle.replace(\"yyyy\",year).replace(\"q\",quarter);}\nreturn result;};QuarterCalendar.prototype.getTextToDate=function(Text){var reg=new RegExp(\"^\"+this.datestyle.replace(\"yyyy\",\"(\\\\d{4})\").replace(\"q\",\"(\\\\d{1})\")+\"$\");var r=Text.match(reg);var date=null;if(r!=null){r[1]=parseInt(r[1],10);r[2]=parseInt(r[2],10);date=new Quarter(r[1],r[2]);}else{date=\"\";}\nreturn date;};QuarterCalendar.prototype.getValueToDate=function(value){var reg=new RegExp(\"^\"+this.dateValueStyle.replace(\"yyyy\",\"(\\\\d{4})\").replace(\"q\",\"(\\\\d{1})\")+\"$\");var r=value.match(reg);var date=null;if(r!=null){r[1]=parseInt(r[1],10);r[2]=parseInt(r[2],10);date=new Quarter(r[1],r[2]);}else{date=\"\";}\nreturn date;};QuarterCalendar.prototype.addEvent=function(obj,eventName,oCallback){var ret;ret=obj.attachEvent(\"on\"+eventName,oCallback);return ret;};QuarterCalendar.prototype.close=function(){if(this.CalendarContainer){this.CalendarContainer.getElementById(\"tmpSelectYearLayer\").style.display=\"none\";this.Style.display=\"none\";}};QuarterCalendar.prototype.getText=function(){return this.displayObject.value;};QuarterCalendar.prototype.getValue=function(){var date=this.getTextToDate(this.getText());var value=this.getDateToValue(date);return value+\"\";};QuarterCalendar.prototype.setText=function(text){if(this.displayObject){this.displayObject.value=text;this.onEditChange();}else{alert(\"您所要输出的控件对象并不存在！\");}\nif(this.followcodes!=\"\"){eval(this.followcodes);}};QuarterCalendar.prototype.setValue=function(value){var tempdate=this.getValueToDate(value);var temptext=this.getDateToText(tempdate);this.displayObject.value=temptext;this.dateValue=value;this.outerValue=tempdate;this.oldValue=tempdate;this.currentValue=tempdate;};QuarterCalendar.prototype.setScrollYearOnClick=function(scoll){this.ScrollYearOnClick=scoll;};QuarterCalendar.prototype.getScrollYearOnClick=function(){return this.ScrollYearOnClick;};QuarterCalendar.prototype.setReadOnly=function(readonly){if(readonly){this.ifCheckEditChange=false;}else{this.ifCheckEditChange=true;}\nthis.displayObject.readOnly=readonly;};QuarterCalendar.prototype.getReadOnly=function(){return this.displayObject.readOnly;};QuarterCalendar.prototype.getCalendarWidth=function(){return parseInt(this.cellwidth*2+2+1,10);};QuarterCalendar.prototype.getCalendarHeight=function(){return this.cellheight*2+this.toolBarHeight+2+1;};QuarterCalendar.prototype.getYearWidth=function(){return parseInt((this.getCalendarWidth()-42-2-4),10);};QuarterCalendar.prototype.getToolBarHeight=function(){return this.toolBarHeight;};QuarterCalendar.prototype.getBodyHeight=function(){return this.cellheight*2+1;};QuarterCalendar.prototype.selectYear=function(strYear){if(strYear.match(/\\D/)!=null)return;var m=(strYear)?strYear:new Date().getFullYear();if(m<1000||m>9999)return;var n=m-2;if(n<1000)n=1000;if(n+100>9999)n=9900;var s='';s+='<table border=0 cellspacing=0 cellpadding=0 class=\"year year-size\">';if(this.ScrollYearOnClick){s+='<tr><td align=center height=3 onmouseout=\"stopScroll()\"'+'onclick=\"return false\" onmousedown=\"startScroll(this,true)\" onmouseup=\"stopScroll()\" style=\"cursor:pointer\" title=\"向上滚动年份\"><span class=\"prev-year-button\" ><\/span><\/td><\/tr>';}\nelse{s+='<tr><td align=center height=3 style=\"cursor:pointer\" onmouseover=\"startScroll(this,true)\" onmouseout=\"stopScroll()\"'+'onclick=\"return false\" title=\"向上滚动年份\"><span class=\"prev-year-button\" ><\/span><\/td><\/tr>';}\nfor(var i=n;i<n+5;i++){s+='<tr><td class='+(i==parseInt(strYear,10)?'selectedYM':'normalYM')+' style=\"cursor:pointer\" onmouseover=\"mOver(this)\" onmouseout=\"mOut(this)\" onmousedown=\"setYear('+i+')\">'+i+'年'+'<\/td><\/tr>';}\nif(this.ScrollYearOnClick){s+='<tr><td align=center height=3 style=\"cursor:pointer\" onmouseout=\"stopScroll()\"'+'onclick=\"return false\" onmousedown=\"startScroll(this,false)\" onmouseup=\"stopScroll()\" title=\"向下滚动年份\"><span class=\"next-year-button\" ><\/span><\/td><\/tr>';}\nelse{s+='<tr><td align=center height=3 style=\"cursor:pointer\" onmouseover=\"startScroll(this,false)\" onmouseout=\"stopScroll()\"'+'onclick=\"return false\" title=\"向下滚动年份\"><span class=\"next-year-button\" ><\/span><\/td><\/tr>';}\ns+='<\/table>';this.CalendarContainer.getElementById(\"tmpSelectYearLayer\").innerHTML=s;this.CalendarContainer.getElementById(\"tmpSelectYearLayer\").style.display=\"\";};QuarterCalendar.prototype.goPrevYear=function(){if(this.year>1000&&this.year<10000){this.year--;this.writeCalendar();}};QuarterCalendar.prototype.goNextYear=function(){if(this.year>999&&this.year<9999){this.year++;this.writeCalendar();}};QuarterCalendar.prototype.monthOfQuarter=function(month){var quarter;if(month<4){quarter=1;}else if(month<7){quarter=2;}else if(month<10){quarter=3;}else{quarter=4;}\nreturn quarter;};QuarterCalendar.prototype.calendarCellClick=function(n){if(this.displayObject){this.year=this.CalendarValues[n].year;this.quarter=this.CalendarValues[n].quarter;this.displayObject.value=this.CalendarValues[n].calendarText;this.dateValue=this.CalendarValues[n].calendarValue;var tempQuarter=new Quarter(this.year,this.quarter);this.currentValue=tempQuarter;this.oldValue=tempQuarter;this.outerValue=tempQuarter\nthis.close();this.displayObject.blur();var scope=this;setTimeout(function(){scope.onRefresh.fire();},10);}else{this.close();alert(\"您所要输出的控件对象并不存在！\");}\nif(this.followcodes!=\"\"){eval(this.followcodes);}};QuarterCalendar.prototype.calendarCellDblClick=function(n){this.calendarCellClick(n);};QuarterCalendar.prototype.setDateStyle=function(datestyle){this.datestyle=datestyle;this.writeIframe();};QuarterCalendar.prototype.setateValueStyle=function(dateValueStyle){this.dateValueStyle=dateValueStyle;this.writeIframe();};QuarterCalendar.prototype.setTitleStyle=function(TitleStyle){this.TitleStyle=TitleStyle;this.writeIframe();};QuarterCalendar.prototype.setYear=function(year){if(isNaN(year)||year<=999||year>9999)return;this.year=parseInt(year,10);this.writeCalendar();};QuarterCalendar.prototype.correctPosition=function(){var CalendarWindow=this.frame;if(CalendarWindow.bDrag){var x=event.clientX-CalendarWindow.datelayerx;var y=event.clientY-CalendarWindow.datelayery;this.Style.left=(x<0?0:x)+\"px\";this.Style.top=(y<0?0:y)+\"px\";}};QuarterCalendar.prototype.MouseOver=function(){this.tmpTdClass=this.className;this.className=\"mouseover-quarter\";};QuarterCalendar.prototype.MouseOut=function(){this.className=this.tmpTdClass;};","js/freequery/control/MonthCalendarWrapper.js":"\nvar Module2=jsloader.resolve(\"freequery.widget.Module2\");var domutils=jsloader.resolve(\"freequery.lang.domutils\");var UUIDGenerator=jsloader.resolve(\"freequery.thirdparty.UUIDGenerator\");var MonthCalendarWrapper=function(container){var uuid=new UUIDGenerator();var CalendarStr=uuid.id;eval('if (!window.Calendar'+CalendarStr+') { '\n+'window.Calendar'+CalendarStr+' = new MonthCalendar(container,\"Calendar'+CalendarStr+'\"); '\n+'window.Calendar'+CalendarStr+'.owner = this; '\n+'this.Calendar = window.Calendar'+CalendarStr+'}');}\nlang.extend(MonthCalendarWrapper,Module2);MonthCalendarWrapper.prototype.destroy=function(){if(this.Calendar){this.Calendar.destroy();this.Calendar=null;}\nMonthCalendarWrapper.superclass.destroy.call(this);};var MonthCalendar=function(container,varname){this.parent=container;this.ObjectName=\"parent.\"+varname;this.ObjectWindow=\"window.\"+varname;this.frameId=this.ObjectName+\".MonthCalendarLayer\";this.frame=document.getElementById(this.frameId);if(!this.frame){this.initFrame();}\nthis.titleDiv=null;this.titleCantainer=null;if(!this.titleDiv){this.initTitleDiv();}\nthis.isWrite=false;this.bmoveable=true;this.datestyle=\"yyyy 年 MM 月\";this.dateValueStyle=\"yyyyMM\";this.TitleStyle=\"MM月份\\nyyyy年MM月dd日 到 YYYY年mm月DD日\";this.cellwidth=37;this.cellheight=37;this.toolBarHeight=25;this.CalendarContainer=window.frames[this.frameId].document;this.Style=this.frame.style;this.year=new Date().getFullYear();this.month=new Date().getMonth()+1;this.date=new Date().getDate();this.thisMonth=new Month(this.year,this.month);this.CalendarValues=new Array(12);this.CalendarCell=new Array(12);this.outerValue=\"\";this.oldValue=\"\";this.currentValue=\"\";this.displayObject=null;this.dateValue=\"\";this.srcButton=null;this.MonthinMM=this.datestyle.indexOf(\"MM\")>=0?true:false;this.followcodes=\"\";this.ScrollYearOnClick=true;this.onRefresh=new CustomEvent(\"editChange\",this);this.ifCheckEditChange=true;};lang.extend(MonthCalendar,Module2);function Month(year,month){this.year=year;this.month=month;};MonthCalendar.prototype.destroy=function(){if(this.Style){this.Style=null;delete this.Style;}\nif(this.srcButton){this.srcButton=null;}\nif(this.displayObject){this.displayObject=null;}\nif(this.CalendarValues){this.CalendarValues=null;delete this.CalendarValues;}\nif(this.titleDiv){document.body.removeChild(this.titleDiv);if(this.titleCantainer){this.titleDiv.removeChild(this.titleCantainer);this.titleCantainer.innerHTML=\"\";delete this.titleCantainer;}\ndomutils.destroyNode(this.titleDiv);}\nthis.onRefresh=null;if(this.CalendarCell){if(this.CalendarContainer){for(var id in this.CalendarCell){this.CalendarCell[id].innerHTML=\"\";delete this.CalendarCell[id];}\nthis.CalendarContainer.writeln('');this.CalendarContainer.close();delete this.CalendarContainer;}\nthis.CalendarCell=null;}\nif(this.frame){document.body.removeChild(this.frame);this.frame.src=\"about:blank\";domutils.destroyNode(this.frame);delete this.frame;}\nif(this.owner){this.owner=null;delete this.owner;}\nif(this.parent)\nthis.parent.innerHTML=\"\";MonthCalendar.superclass.destroy.call(this);};MonthCalendar.prototype.initFrame=function(){this.frame=document.createElement(\"iframe\");this.frame.setAttribute(\"id\",this.frameId);this.frame.setAttribute(\"name\",this.frameId);this.frame.className=\"multicalendar-iframe\";this.frame.setAttribute(\"scrolling\",\"no\");this.frame.setAttribute(\"onmouseout\",\"\"+this.ObjectName+\".correctPosition()\");this.frame.style.display=\"none\";document.body.appendChild(this.frame);};MonthCalendar.prototype.initTitleDiv=function(){this.titleDiv=document.createElement(\"div\");this.titleDiv.setAttribute(\"id\",this.ObjectName+\".DateCalendarTitle\");this.titleDiv.setAttribute(\"name\",this.ObjectName+\".DateCalendarTitle\");this.titleDiv.className=\"multicalendar-month-title\";this.titleDiv.style.display=\"none\";document.body.appendChild(this.titleDiv);var divleft=document.createElement(\"span\");divleft.className=\"multicalendar-month-title-left\";this.titleCantainer=document.createElement(\"span\");this.titleCantainer.className=\"multicalendar-month-title-center\";var divright=document.createElement(\"span\");divright.className=\"multicalendar-month-title-right\";this.titleDiv.appendChild(divleft);this.titleDiv.appendChild(this.titleCantainer);this.titleDiv.appendChild(divright);}\nMonthCalendar.prototype.writeIframe=function(){if(this.cellwidth<21)this.cellwidth=21;if(this.cellheight<20)this.cellheight=20;var strFrame;strFrame='<style>';with(this){strFrame+='*{font-family:宋体;}';strFrame+='DIV.calendar-panel-size {width:'+(getCalendarWidth())+';height:'+(getCalendarHeight()+2)+';}';strFrame+='TABLE.calendar-main-size {width:'+(getCalendarWidth())+'px;height:'+getCalendarHeight()+'px;}';strFrame+='.head-size{width:'+(getCalendarWidth()-2)+';height:'+getToolBarHeight()+';}';strFrame+='table.year-size{width:'+(getYearWidth())+'px;height:96px;}';strFrame+='calendarcell-size{width:'+(getCalendarWidth()-2)+';height:'+(getBodyHeight())+';}';}\nstrFrame+='<\/style>';strFrame+='<scr'+'ipt>';strFrame+='     var datelayerx,datelayery; /*存放月历控件的鼠标位置*/      ';strFrame+='     var bDrag=false; ';strFrame+='     var DateLayer='+this.ObjectName+'.Style;    ';strFrame+='     document.onmousemove=function(){/*在鼠标移动事件中，如果开始拖动月历，则移动月历*/     ';strFrame+='      if(bDrag){     ';strFrame+='       DateLayer.left = (parseInt(DateLayer.left,10)+window.event.clientX-datelayerx)+\"px\";/*由于每次移动以后鼠标位置都恢复为初始的位置，因此写法与div中不同*/     ';strFrame+='       DateLayer.top = (parseInt(DateLayer.top,10)+window.event.clientY-datelayery)+\"px\";    ';strFrame+='      }';strFrame+='     }; ';strFrame+='     function DragStart(){  /*开始月历拖动*/     ';strFrame+='      if(window.event.button== 1){   /*值1表示鼠标左键*/ ';strFrame+='       datelayerx=window.event.clientX;  ';strFrame+='       datelayery=window.event.clientY;  ';strFrame+='       bDrag=true;  ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function DragEnd(){  /*结束月历拖动*/';strFrame+='      bDrag=false;   ';strFrame+='     }  ';strFrame+='     document.onmousedown=function(){ /*点击的时候关闭年份和月份的选择列表*/ ';strFrame+='      var obj=document.getElementById(\"tmpSelectYearLayer\");   ';strFrame+='      if(!bFromYear&&event.srcElement!=document.getElementById(\"CalendarYearHead\")&&obj.style.display!=\"none\"){ ';strFrame+='       obj.style.display=\"none\";bYearListOpening=true  ';strFrame+='      }';strFrame+='     }; ';strFrame+='     var strTempClass=\"\";    ';strFrame+='     document.oncontextmenu=function(){/*禁止出现右键菜单*/     ';strFrame+='      if(!event.ctrlKey)return false;     ';strFrame+='     }; ';strFrame+='     function mOver(obj){/*年/月选择列表的mouseover处理*/';strFrame+='      strTempClass=obj.className;  ';strFrame+='      obj.className=\"mouseoverYM\"; ';strFrame+='      bYearListOpening=false;  /*为了显示年份列表的时候向上滚动功能的正常使用*/     ';strFrame+='     }  ';strFrame+='     function mOut(obj){/*年/月选择列表的mouseout处理*/  ';strFrame+='      obj.className=strTempClass;  ';strFrame+='     }  ';strFrame+='     function setYear(iYear){/*下拉选择年份的处理*/      ';strFrame+='      '+this.ObjectName+'.setYear(iYear) ';strFrame+='     }  ';strFrame+='     var bScrolling=false;   ';strFrame+='     var bYearListOpening=true; /*这个变量用于控制在刚刚显示年份列表的时候，鼠标处于向上滚动条位置的情况下不要滚动*/    ';strFrame+='     var iScroll=null;';strFrame+='     var bFromYear=false; /*标志为从年份下拉列表处进行了点击，以便不要关闭年份列表*/';strFrame+='     function scrollYear(bUp){/*滚动年份列表*/    ';strFrame+='      var oTable=document.getElementById(\"tmpSelectYearLayer\").childNodes[0];';strFrame+='      if(bUp){';strFrame+='       var iMin=parseInt(oTable.rows[1].cells[0].innerHTML.replace(/\\\\D/g,\\'\\'),10);  ';strFrame+='       if(iMin>1000){      ';strFrame+='        oTable.deleteRow(oTable.rows.length-2);';strFrame+='        var oTd=oTable.insertRow(1).insertCell(0);    ';strFrame+='        oTd.innerHTML=(iMin-1).toString()+\"年\";      ';strFrame+='        oTd.onmouseover=Function(\"mOver(this)\");      ';strFrame+='        oTd.onmouseout=Function(\"mOut(this)\"); ';strFrame+='        oTd.onmousedown=Function(\"setYear(\"+(iMin-1).toString()+\")\");      ';strFrame+='        oTd.className=(iMin-1=='+this.ObjectName+'.year?\"selectedYM\":\"normalYM\");';strFrame+='        if(bScrolling){   ';strFrame+='         window.setTimeout(\"scrollYear(true)\", 300); ';strFrame+='        }   ';strFrame+='       }     ';strFrame+='      }else{  ';strFrame+='       var iMax=parseInt(oTable.rows[oTable.rows.length-2].cells[0].innerHTML.replace(/\\\\D/g,\\'\\'),10);    ';strFrame+='       if(iMax<=9999){     ';strFrame+='        var oTd=oTable.insertRow(oTable.rows.length-1).insertCell(0);      ';strFrame+='        oTable.deleteRow(1);     ';strFrame+='        oTd.innerHTML=(iMax+1).toString()+\"年\";      ';strFrame+='        oTd.onmouseover=Function(\"mOver(this)\");      ';strFrame+='        oTd.onmouseout=Function(\"mOut(this)\"); ';strFrame+='        oTd.onmousedown=Function(\"setYear(\"+(iMax+1).toString()+\")\");      ';strFrame+='        oTd.className=(iMax+1=='+this.ObjectName+'.year?\"selectedYM\":\"normalYM\");';strFrame+='        if(bScrolling){   ';strFrame+='         window.setTimeout(\"scrollYear(false)\", 300);';strFrame+='        }   ';strFrame+='       }     ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function startScroll(oTd,bUp){ ';strFrame+='      bFromYear=true;';strFrame+='      if(!bYearListOpening){';strFrame+='       bScrolling=true;    ';strFrame+='       scrollYear(bUp);    ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function stopScroll(){  ';strFrame+='      bYearListOpening=false;      ';strFrame+='      bFromYear=false;      ';strFrame+='      bScrolling=false;     ';strFrame+='      if(iScroll){   ';strFrame+='       clearTimeout(iScroll);     ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function mouseOverOfCell(cell,ev){  /*鼠标经过日期单元格*/';strFrame+='      '+this.ObjectName+'.MouseOver(cell,ev);   ';strFrame+='     }  ';strFrame+='     function mouseOutOfCell(cell){  /*鼠标离开日期单元格*/';strFrame+='      '+this.ObjectName+'.MouseOut(cell);   ';strFrame+='     }  ';strFrame+='<\/scr'+'ipt>';with(this){strFrame+=' <div class=\"calendar-panel-size\" >';strFrame+='  <div style=\"z-index:9999;position: absolute; left:0; top:0;\" onselectstart=\"return false\">  ';strFrame+='   <span id=tmpSelectYearLayer class=\"year\" style=\"display: none;left:23px;\"><\/span> ';strFrame+='   <table border=0 cellspacing=0 cellpadding=0 class=\"calendar-main-size main mainbackgroundcolor\" >     ';strFrame+='    <tr>';strFrame+='     <td class=\"head-size mainbackgroundcolor\"> ';strFrame+='      <table class=\"head-size mainbackgroundcolor whiteborder\" border=0 cellspacing=0 cellpadding=0 > ';strFrame+='       <tr align=center>     ';strFrame+='        <td width=19><span class=\"calendar-border-noleft calendar-border-left prev-month-tool-button\" title=\"前一年\" onclick=\"'+this.ObjectName+'.goPrevYear()\" ondblclick=\"'+this.ObjectName+'.goPrevYear()\" onfocus=\"this.blur()\" ><span><\/td>';strFrame+='        <td width='+getYearWidth()+' align=center class=\"calendarhead\" onmouseover=\"className=\\'mouseover\\'\" onmouseout=\"className=\\'calendarhead\\'\" onclick=\"'+this.ObjectName+'.selectYear(this.innerHTML.substring(0,4))\" title=\"点击这里选择年份\" id=CalendarYearHead><\/td>';strFrame+='        <td width=19><span class=\"calendar-border-noleft calendar-border-left next-month-tool-button\" title=\"后一年\" onclick=\"'+this.ObjectName+'.goNextYear()\" ondblclick=\"'+this.ObjectName+'.goNextYear()\" onfocus=\"this.blur()\" ><span><\/td>';strFrame+='       <\/tr>     ';strFrame+='      <\/table>    ';strFrame+='     <\/td>   ';strFrame+='    <\/tr>     ';strFrame+='    <tr>';strFrame+='     <td class=\"calendarcell-size\" align=center> ';strFrame+='         <table align=center border=0 cellspacing=\"0\" cellpadding=0 class=\"calendarcell calendarcell-size\" >   ';var n=0;for(j=0;j<3;j++){strFrame+='       <tr align=center>  ';for(i=0;i<4;i++){strFrame+='        <td onmouseover=\"mouseOverOfCell(this,event)\" onmouseout=\"mouseOutOfCell(this)\" width='+cellwidth+' height='+cellheight+' id=CalendarCell'+(n)+'>'+(n+1)+'月<\/td>';n++;}\nstrFrame+='       <\/tr> ';}\nstrFrame+='         <\/table>    ';strFrame+='       <\/td>   ';strFrame+='    <\/tr>     ';strFrame+='   <\/table>';strFrame+='  <\/div>  ';strFrame+=' <\/div>  ';}\nthis.CalendarContainer=window.frames[this.frameId].document;this.CalendarContainer.writeln(strFrame);this.CalendarContainer.close();this.Style.width=this.getCalendarWidth();this.Style.height=this.getCalendarHeight()+6;var head=this.CalendarContainer.getElementsByTagName(\"head\").item(0);var fileref=this.CalendarContainer.createElement(\"link\");fileref.setAttribute(\"rel\",\"stylesheet\");fileref.setAttribute(\"type\",\"text/css\");var cssHref=window.bof_offline_xhr?\"css/bof_merge.css\":jsloader.baseHref+\"css/bof_merge.css.jsp\";fileref.setAttribute(\"href\",cssHref);if(typeof fileref!=\"undefined\"){head.appendChild(fileref);}\nfor(i=0;i<12;i++)\n{this.CalendarCell[i]=this.CalendarContainer.getElementById('CalendarCell'+i);var tempDay=this.CalendarCell[i];tempDay.style.cursor=\"pointer\";tempDay.onclick=Function(this.ObjectWindow+\".calendarCellClick(\"+i+\")\");tempDay.ondblclick=Function(this.ObjectWindow+\".calendarCellDblClick(\"+i+\")\");}\nthis.isWrite=true;};MonthCalendar.prototype.showCalendar=function(srcButton,displayObject){if(!this.isWrite){this.writeIframe();}\nvar selt=this;var obj;var calendarButton;this.followcodes=\"\";if(displayObject){calendarButton=displayObject;if(typeof(displayObject)==\"object\")obj=displayObject\nelse if(typeof(displayObject)==\"string\")this.followcodes=displayObject;}else{calendarButton=srcButton;}\nvar th=srcButton;var calendarStyle=this.Style;var ttop=calendarButton.offsetTop;var thei=calendarButton.offsetHeight;var twid=calendarButton.offsetWidth;var tleft=calendarButton.offsetLeft;var ttyp=calendarButton.type;while(calendarButton=calendarButton.offsetParent){ttop+=calendarButton.offsetTop;tleft+=calendarButton.offsetLeft;}\nvar cheight=this.getCalendarHeight();if(document.body.clientHeight>cheight+thei&&document.body.clientHeight-(ttop-document.body.scrollTop)<cheight+thei&&ttop-document.body.scrollTop>cheight){calendarStyle.top=ttop-cheight-1}else{calendarStyle.top=ttop+thei+1;}\ncalendarStyle.left=tleft;this.displayObject=!obj?th:obj;this.srcButton=!obj?null:th;var tempValue=this.getValueToDate(this.dateValue);this.outerValue=tempValue;this.oldValue=tempValue;this.currentValue=tempValue;if(tempValue!=\"\"){this.year=tempValue.year;this.month=tempValue.month;}else{this.year=new Date().getFullYear();this.month=new Date().getMonth()+1;}\nthis.writeCalendar();calendarStyle.display='';this.addEvent(document,\"click\",function(){with(window.event)\nif(srcElement!=selt.srcButton&&srcElement!=selt.displayObject){selt.close();}});};MonthCalendar.prototype.writeCalendar=function(){if(!this.CalendarContainer.getElementById(\"CalendarYearHead\"))\nreturn;var selt=this;var yy=this.year;var mm=this.month;this.CalendarContainer.getElementById(\"CalendarYearHead\").innerHTML=yy+\" 年\";for(var m=0;m<12;m++){this.CalendarValues[m]=new CalendarDataObject(yy,m+1);}\nfor(var m=0;m<12;m++){var tempDay=this.CalendarCell[m];if(this.outerValue&&this.CalendarValues[m].equals(this.outerValue)){tempDay.className=\"selectedday-month\";}else if(this.CalendarValues[m].equals(this.thisMonth)){tempDay.className=\"this-month\";}else{tempDay.className=\"normalday\";}\ntempDay.dec=this.CalendarValues[m].calendarTitle;}\nfunction CalendarDataObject(year,month){this.year=year;this.month=month;var month=this.month;if(month<10&&selt.MonthinMM)month=\"0\"+month;this.calendarValue=selt.dateValueStyle.replace(\"yyyy\",this.year).replace((selt.MonthinMM?\"MM\":\"M\"),month);this.calendarText=selt.datestyle.replace(\"yyyy\",this.year).replace((selt.MonthinMM?\"MM\":\"M\"),month);this.calendarTitle=selt.TitleStyle.replace(\"yyyy\",this.year).replace(\"MM\",this.month).replace(\"MM\",this.month).replace(\"dd\",\"1\").replace(\"YYYY\",this.year).replace(\"mm\",this.month).replace(\"DD\",(new Date(year,month,0)).getDate());this.equals=function(value){try{return this.year==value.year&&this.month==value.month;}\ncatch(e){return false;}}}};MonthCalendar.prototype.onEditChange=function(){if(this.ifCheckEditChange){var tempText=this.getText();if(tempText!=\"\"){if(!this.isValidText(tempText)){alert(\"输入日期格式不正确，请重新输入！\");this.displayObject.value=this.getDateToText(this.oldValue);this.dateValue=this.getDateToValue(this.oldValue);}else{var tempDate=this.getTextToDate(tempText);var tempValue=this.getDateToValue(tempDate);this.year=tempDate.year;this.month=tempDate.month;this.dateValue=tempValue;this.outerValue=tempDate;this.oldValue=tempDate;this.currentValue=tempDate;this.onRefresh.fire();this.writeCalendar();}}else{this.setValue(\"\");}}};MonthCalendar.prototype.isValidDate=function(testDate){var myRegExp=/^(((1[6-9]|[2-9]\\d)\\d{2})(0?[1-9]|1[0-2]))$/;return myRegExp.test(testDate);};MonthCalendar.prototype.isValidText=function(testContent){var myRegExp=/^(((1[6-9]|[2-9]\\d)\\d{2})\\s(\\u5e74)\\s(0?[1-9]|1[0-2])\\s(\\u6708))$/;return myRegExp.test(testContent);};MonthCalendar.prototype.getDateToValue=function(Date){var tempDate=Date;var result=\"\";if(tempDate!=\"\"&&tempDate){var year=tempDate.year;var month=tempDate.month;if(month<10&&this.MonthinMM)month=\"0\"+month;result=this.dateValueStyle.replace(\"yyyy\",year).replace((this.MonthinMM?\"MM\":\"M\"),month);}\nreturn result;};MonthCalendar.prototype.getDateToText=function(Date){var tempDate=Date;var result=\"\";if(tempDate!=\"\"&&tempDate){var year=tempDate.year;var month=tempDate.month;if(month<10&&this.MonthinMM)month=\"0\"+month;result=this.datestyle.replace(\"yyyy\",year).replace((this.MonthinMM?\"MM\":\"M\"),month);}\nreturn result;};MonthCalendar.prototype.getTextToDate=function(Text){var reg=new RegExp(\"^\"+this.datestyle.replace(\"yyyy\",\"(\\\\d{4})\").replace((this.MonthinMM?\"MM\":\"M\"),\"(\\\\d{1,2})\")+\"$\");var r=Text.match(reg);var date=null;if(r!=null){r[1]=parseInt(r[1],10);r[2]=parseInt(r[2],10);date=new Month(r[1],r[2]);}else{date=\"\";}\nreturn date;};MonthCalendar.prototype.getValueToDate=function(value){var reg=new RegExp(\"^\"+this.dateValueStyle.replace(\"yyyy\",\"(\\\\d{4})\").replace((this.MonthinMM?\"MM\":\"M\"),\"(\\\\d{1,2})\")+\"$\");var r=value.match(reg);var date=null;if(r!=null){r[1]=parseInt(r[1],10);r[2]=parseInt(r[2],10);date=new Month(r[1],r[2]);}else{date=\"\";}\nreturn date;};MonthCalendar.prototype.addEvent=function(obj,eventName,oCallback){var ret;ret=obj.attachEvent(\"on\"+eventName,oCallback);return ret;};MonthCalendar.prototype.close=function(){if(this.CalendarContainer){this.CalendarContainer.getElementById(\"tmpSelectYearLayer\").style.display=\"none\";this.Style.display=\"none\";}};MonthCalendar.prototype.getText=function(){return this.displayObject.value;};MonthCalendar.prototype.getValue=function(){var date=this.getTextToDate(this.getText());var value=this.getDateToValue(date);return value+\"\";};MonthCalendar.prototype.setText=function(text){if(this.displayObject){this.displayObject.value=text;this.onEditChange();}else{alert(\"您所要输出的控件对象并不存在！\");}\nif(this.followcodes!=\"\"){eval(this.followcodes);}};MonthCalendar.prototype.setValue=function(value){var tempdate=this.getValueToDate(value);var temptext=this.getDateToText(tempdate);this.displayObject.value=temptext;this.dateValue=value;this.outerValue=tempdate;this.oldValue=tempdate;this.currentValue=tempdate;};MonthCalendar.prototype.setReadOnly=function(readonly){if(readonly){this.ifCheckEditChange=false;}else{this.ifCheckEditChange=true;}\nthis.displayObject.readOnly=readonly;};MonthCalendar.prototype.getReadOnly=function(){return this.displayObject.readOnly;};MonthCalendar.prototype.setScrollYearOnClick=function(scoll){this.ScrollYearOnClick=scoll;};MonthCalendar.prototype.getScrollYearOnClick=function(){return this.ScrollYearOnClick;};MonthCalendar.prototype.getCalendarWidth=function(){return parseInt(this.cellwidth*4+2+1,10);};MonthCalendar.prototype.getCalendarHeight=function(){return this.cellheight*3+this.toolBarHeight+2;};MonthCalendar.prototype.getYearWidth=function(){return parseInt(this.getCalendarWidth()-42-2-4,10);};MonthCalendar.prototype.getToolBarHeight=function(){return this.toolBarHeight;};MonthCalendar.prototype.getBodyHeight=function(){return this.cellheight*3+1;};MonthCalendar.prototype.selectYear=function(strYear){if(strYear.match(/\\D/)!=null)return;var m=(strYear)?strYear:new Date().getFullYear();if(m<1000||m>9999)return;var n=m-2;if(n<1000)n=1000;if(n+100>9999)n=9900;var s='';s+='<table border=0 cellspacing=0 cellpadding=0 class=\"year year-size\">';if(this.ScrollYearOnClick){s+='<tr><td align=center height=3 onmouseout=\"stopScroll()\"'+'onclick=\"return false\" onmousedown=\"startScroll(this,true)\" onmouseup=\"stopScroll()\" style=\"cursor:pointer\" title=\"向上滚动年份\"><span class=\"prev-year-button\" ><\/span><\/td><\/tr>';}\nelse{s+='<tr><td align=center height=3 style=\"cursor:pointer\" onmouseover=\"startScroll(this,true)\" onmouseout=\"stopScroll()\"'+'onclick=\"return false\" title=\"向上滚动年份\"><span class=\"prev-year-button\" ><\/span><\/td><\/tr>';}\nfor(var i=n;i<n+6;i++){s+='<tr><td class='+(i==parseInt(strYear,10)?'selectedYM':'normalYM')+' style=\"cursor:pointer\" onmouseover=\"mOver(this)\" onmouseout=\"mOut(this)\" onmousedown=\"setYear('+i+')\">'+i+'年'+'<\/td><\/tr>';}\nif(this.ScrollYearOnClick){s+='<tr><td align=center height=3 style=\"cursor:pointer\" onmouseout=\"stopScroll()\"'+'onclick=\"return false\" onmousedown=\"startScroll(this,false)\" onmouseup=\"stopScroll()\" title=\"向下滚动年份\"><span class=\"next-year-button\" ><\/span><\/td><\/tr>';}\nelse{s+='<tr><td align=center height=3 style=\"cursor:pointer\" onmouseover=\"startScroll(this,false)\" onmouseout=\"stopScroll()\"'+'onclick=\"return false\" title=\"向下滚动年份\"><span class=\"next-year-button\" ><\/span><\/td><\/tr>';}\ns+='<\/table>';this.CalendarContainer.getElementById(\"tmpSelectYearLayer\").innerHTML=s;this.CalendarContainer.getElementById(\"tmpSelectYearLayer\").style.display=\"\";};MonthCalendar.prototype.goPrevYear=function(){if(this.year>1000&&this.year<10000){this.year--;this.writeCalendar();}};MonthCalendar.prototype.goNextYear=function(){if(this.year>999&&this.year<9999){this.year++;this.writeCalendar();}};MonthCalendar.prototype.calendarCellClick=function(n){if(this.displayObject){this.year=this.CalendarValues[n].year;this.month=this.CalendarValues[n].month;this.displayObject.value=this.CalendarValues[n].calendarText;this.dateValue=this.CalendarValues[n].calendarValue;var tempMonth=new Month(this.year,this.month);this.currentValue=tempMonth;this.oldValue=tempMonth;this.outerValue=tempMonth;this.close();this.displayObject.blur();var scope=this;setTimeout(function(){scope.onRefresh.fire();},10);}else{this.close();alert(\"您所要输出的控件对象并不存在！\");}\nif(this.followcodes!=\"\"){eval(this.followcodes);}};MonthCalendar.prototype.calendarCellDblClick=function(n){this.calendarCellClick(n);};MonthCalendar.prototype.setDateStyle=function(datestyle){this.datestyle=datestyle;this.writeIframe();};MonthCalendar.prototype.setateValueStyle=function(dateValueStyle){this.dateValueStyle=dateValueStyle;this.writeIframe();};MonthCalendar.prototype.setTitleStyle=function(TitleStyle){this.TitleStyle=TitleStyle;this.writeIframe();};MonthCalendar.prototype.setYear=function(year){if(isNaN(year)||year<=999||year>9999)return;this.year=parseInt(year,10);this.writeCalendar();};MonthCalendar.prototype.correctPosition=function(){var CalendarWindow=this.frame;if(CalendarWindow.bDrag){var x=event.clientX-CalendarWindow.datelayerx;var y=event.clientY-CalendarWindow.datelayery;this.Style.left=(x<0?0:x)+\"px\";this.Style.top=(y<0?0:y)+\"px\";}};MonthCalendar.prototype.MouseOver=function(cell,ev){cell.tmpTdClass=cell.className;cell.className=\"mouseover-month\";var tempTitle=cell.dec.replace(\"\\n\",\"<br>\");this.titleCantainer.innerHTML=tempTitle;if((document.body.clientHeight-ev.screenY)<44){this.titleDiv.style.top=ev.screenY-window.screenTop-60;}else{this.titleDiv.style.top=ev.screenY-window.screenTop+30;}\nif((document.body.clientWidth-ev.screenX)<194){this.titleDiv.style.left=ev.screenX-window.screenLeft-194;}else{this.titleDiv.style.left=ev.screenX-window.screenLeft-97;}\nthis.titleDiv.style.display=\"block\";};MonthCalendar.prototype.MouseOut=function(cell){cell.className=cell.tmpTdClass;this.titleDiv.style.display=\"none\";};","js/freequery/control/WeekCalendarWrapper.js":"\nvar Module2=jsloader.resolve(\"freequery.widget.Module2\");var domutils=jsloader.resolve(\"freequery.lang.domutils\");var UUIDGenerator=jsloader.resolve(\"freequery.thirdparty.UUIDGenerator\");var WeekCalendarWrapper=function(container){var uuid=new UUIDGenerator();var CalendarStr=uuid.id;eval('if (!window.Calendar'+CalendarStr+') { '\n+'window.Calendar'+CalendarStr+' = new WeekCalendar(container,\"Calendar'+CalendarStr+'\"); '\n+'window.Calendar'+CalendarStr+'.owner = this; '\n+'this.Calendar = window.Calendar'+CalendarStr+'}');}\nlang.extend(WeekCalendarWrapper,Module2);WeekCalendarWrapper.prototype.destroy=function(){if(this.Calendar){this.Calendar.destroy();this.Calendar=null;}\nWeekCalendarWrapper.superclass.destroy.call(this);};var WeekCalendar=function(container,varname){this.parent=container;this.ObjectName=\"parent.\"+varname;this.ObjectWindow=\"window.\"+varname;this.frameId=this.ObjectName+\".WeekCalendarLayer\";this.frame=document.getElementById(this.frameId);if(!this.frame){this.initFrame();}\nthis.titleDiv=null;this.titleCantainer=null;if(!this.titleDiv){this.initTitleDiv();}\nthis.isWrite=false;this.bmoveable=true;this.datestyle=\"yyyy 年 ww 周\";this.dateValueStyle=\"yyyyWww\";this.TitleStyle=\"第ww周\\nyyyy年MM月dd日 至 YYYY年mm月DD日\";this.cellwidth=21;this.cellheight=21;this.toolBarHeight=25;this.CalendarContainer=window.frames[this.frameId].document;this.Style=this.frame.style;this.year=new Date().getFullYear();this.month=new Date().getMonth()+1;this.date=new Date().getDate();this.week=this.dayOfWeek(this.year,this.month,this.date);this.thisWeek=new Week(this.year,this.week);this.CalendarValues=new Array(56);this.CalendarCell=new Array(56);this.WeekStartDay=new Array(56);this.WeekEndDay=new Array(56);this.outerValue=\"\";this.oldValue=\"\";this.currentValue=\"\";this.displayObject=null;this.dateValue=\"\";this.srcButton=null;this.WeekinWW=this.datestyle.indexOf(\"ww\")>=0?true:false;this.followcodes=\"\";this.ScrollYearOnClick=true;this.onRefresh=new CustomEvent(\"editChange\",this);this.ifCheckEditChange=true;};lang.extend(WeekCalendar,Module2);function Week(year,week){this.year=year;this.week=week;}\nWeekCalendar.prototype.destroy=function(){if(this.Style){this.Style=null;delete this.Style;}\nif(this.srcButton){this.srcButton=null;}\nif(this.displayObject){this.displayObject=null;}\nif(this.CalendarValues){this.CalendarValues=null;delete this.CalendarValues;}\nif(this.titleDiv){document.body.removeChild(this.titleDiv);if(this.titleCantainer){this.titleDiv.removeChild(this.titleCantainer);this.titleCantainer.innerHTML=\"\";delete this.titleCantainer;}\ndomutils.destroyNode(this.titleDiv);}\nthis.onRefresh=null;if(this.CalendarCell){if(this.CalendarContainer){for(var id in this.CalendarCell){this.CalendarCell[id].innerHTML=\"\";delete this.CalendarCell[id];}\nthis.CalendarContainer.writeln('');this.CalendarContainer.close();delete this.CalendarContainer;}\nthis.CalendarCell=null;}\nif(this.frame){document.body.removeChild(this.frame);this.frame.src=\"about:blank\";domutils.destroyNode(this.frame);delete this.frame;}\nif(this.owner){this.owner=null;delete this.owner;}\nif(this.parent)\nthis.parent.innerHTML=\"\";WeekCalendar.superclass.destroy.call(this);};WeekCalendar.prototype.initFrame=function(){this.frame=document.createElement(\"iframe\");this.frame.setAttribute(\"id\",this.frameId);this.frame.setAttribute(\"name\",this.frameId);this.frame.className=\"multicalendar-iframe\";this.frame.setAttribute(\"scrolling\",\"no\");this.frame.setAttribute(\"onmouseout\",\"\"+this.ObjectName+\".correctPosition()\");this.frame.style.display=\"none\";document.body.appendChild(this.frame);};WeekCalendar.prototype.initTitleDiv=function(){this.titleDiv=document.createElement(\"div\");this.titleDiv.setAttribute(\"id\",this.ObjectName+\".DateCalendarTitle\");this.titleDiv.setAttribute(\"name\",this.ObjectName+\".DateCalendarTitle\");this.titleDiv.className=\"multicalendar-month-title\";this.titleDiv.style.display=\"none\";document.body.appendChild(this.titleDiv);var divleft=document.createElement(\"span\");divleft.className=\"multicalendar-month-title-left\";this.titleCantainer=document.createElement(\"span\");this.titleCantainer.className=\"multicalendar-month-title-center\";var divright=document.createElement(\"span\");divright.className=\"multicalendar-month-title-right\";this.titleDiv.appendChild(divleft);this.titleDiv.appendChild(this.titleCantainer);this.titleDiv.appendChild(divright);}\nWeekCalendar.prototype.writeIframe=function(){if(this.cellwidth<21)this.cellwidth=21;if(this.cellheight<20)this.cellheight=20;var strFrame;strFrame='<style>';with(this){strFrame+='*{font-family:宋体;}';strFrame+='DIV.calendar-panel-size {width:'+(getCalendarWidth())+';height:'+(getCalendarHeight()+2)+';}';strFrame+='TABLE.calendar-main-size {width:'+(getCalendarWidth())+'px;height:'+getCalendarHeight()+'px;}';strFrame+='.head-size{width:'+(getCalendarWidth()-2)+';height:'+getToolBarHeight()+';}';strFrame+='table.year-size{width:'+(getYearWidth())+'px;height:128px;}';strFrame+='calendarcell-size{width:'+(getCalendarWidth()-2)+';height:'+(getBodyHeight())+';}';}\nstrFrame+='<\/style>';strFrame+='<scr'+'ipt>';strFrame+='     var datelayerx,datelayery; /*存放周历控件的鼠标位置*/      ';strFrame+='     var bDrag=false; ';strFrame+='     var DateLayer='+this.ObjectName+'.Style;    ';strFrame+='     document.onmousemove=function(){/*在鼠标移动事件中，如果开始拖动周历，则移动周历*/     ';strFrame+='      if(bDrag){     ';strFrame+='       DateLayer.left = (parseInt(DateLayer.left,10)+window.event.clientX-datelayerx)+\"px\";/*由于每次移动以后鼠标位置都恢复为初始的位置，因此写法与div中不同*/     ';strFrame+='       DateLayer.top = (parseInt(DateLayer.top,10)+window.event.clientY-datelayery)+\"px\";    ';strFrame+='      }';strFrame+='     }; ';strFrame+='     function DragStart(){  /*开始周历拖动*/     ';strFrame+='      if(window.event.button== 1){   /*值1表示鼠标左键*/ ';strFrame+='       datelayerx=window.event.clientX;  ';strFrame+='       datelayery=window.event.clientY;  ';strFrame+='       bDrag=true;  ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function DragEnd(){  /*结束周历拖动*/';strFrame+='      bDrag=false;   ';strFrame+='     }  ';strFrame+='     document.onmousedown=function(){ /*点击的时候关闭年份和月份的选择列表*/ ';strFrame+='      var obj=document.getElementById(\"tmpSelectYearLayer\");   ';strFrame+='      if(!bFromYear&&event.srcElement!=document.getElementById(\"CalendarYearHead\")&&obj.style.display!=\"none\"){ ';strFrame+='       obj.style.display=\"none\";bYearListOpening=true  ';strFrame+='      }';strFrame+='     }; ';strFrame+='     var strTempClass=\"\";    ';strFrame+='     document.oncontextmenu=function(){/*禁止出现右键菜单*/     ';strFrame+='      if(!event.ctrlKey)return false;     ';strFrame+='     }; ';strFrame+='     function mOver(obj){/*年/月选择列表的mouseover处理*/';strFrame+='      strTempClass=obj.className;  ';strFrame+='      obj.className=\"mouseoverYM\"; ';strFrame+='      bYearListOpening=false;  /*为了显示年份列表的时候向上滚动功能的正常使用*/     ';strFrame+='     }  ';strFrame+='     function mOut(obj){/*年/月选择列表的mouseout处理*/  ';strFrame+='      obj.className=strTempClass;  ';strFrame+='     }  ';strFrame+='     function setYear(iYear){/*下拉选择年份的处理*/      ';strFrame+='      '+this.ObjectName+'.setYear(iYear) ';strFrame+='     }  ';strFrame+='     var bScrolling=false;   ';strFrame+='     var bYearListOpening=true; /*这个变量用于控制在刚刚显示年份列表的时候，鼠标处于向上滚动条位置的情况下不要滚动*/    ';strFrame+='     var iScroll=null;';strFrame+='     var bFromYear=false; /*标志为从年份下拉列表处进行了点击，以便不要关闭年份列表*/';strFrame+='     function scrollYear(bUp){/*滚动年份列表*/    ';strFrame+='      var oTable=document.getElementById(\"tmpSelectYearLayer\").childNodes[0];';strFrame+='      if(bUp){';strFrame+='       var iMin=parseInt(oTable.rows[1].cells[0].innerHTML.replace(/\\\\D/g,\\'\\'),10);  ';strFrame+='       if(iMin>1000){      ';strFrame+='        oTable.deleteRow(oTable.rows.length-2);';strFrame+='        var oTd=oTable.insertRow(1).insertCell(0);    ';strFrame+='        oTd.innerHTML=(iMin-1).toString()+\"年\";      ';strFrame+='        oTd.onmouseover=Function(\"mOver(this)\");      ';strFrame+='        oTd.onmouseout=Function(\"mOut(this)\"); ';strFrame+='        oTd.onmousedown=Function(\"setYear(\"+(iMin-1).toString()+\")\");      ';strFrame+='        oTd.className=(iMin-1=='+this.ObjectName+'.year?\"selectedYM\":\"normalYM\");';strFrame+='        if(bScrolling){   ';strFrame+='         window.setTimeout(\"scrollYear(true)\", 300); ';strFrame+='        }   ';strFrame+='       }     ';strFrame+='      }else{  ';strFrame+='       var iMax=parseInt(oTable.rows[oTable.rows.length-2].cells[0].innerHTML.replace(/\\\\D/g,\\'\\'),10);    ';strFrame+='       if(iMax<=9999){     ';strFrame+='        var oTd=oTable.insertRow(oTable.rows.length-1).insertCell(0);      ';strFrame+='        oTable.deleteRow(1);     ';strFrame+='        oTd.innerHTML=(iMax+1).toString()+\"年\";      ';strFrame+='        oTd.onmouseover=Function(\"mOver(this)\");      ';strFrame+='        oTd.onmouseout=Function(\"mOut(this)\"); ';strFrame+='        oTd.onmousedown=Function(\"setYear(\"+(iMax+1).toString()+\")\");      ';strFrame+='        oTd.className=(iMax+1=='+this.ObjectName+'.year?\"selectedYM\":\"normalYM\");';strFrame+='        if(bScrolling){   ';strFrame+='         window.setTimeout(\"scrollYear(false)\", 300);';strFrame+='        }   ';strFrame+='       }     ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function startScroll(oTd,bUp){ ';strFrame+='      bFromYear=true;';strFrame+='      if(!bYearListOpening){';strFrame+='       bScrolling=true;    ';strFrame+='       scrollYear(bUp);    ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function stopScroll(){  ';strFrame+='      bYearListOpening=false;      ';strFrame+='      bFromYear=false;      ';strFrame+='      bScrolling=false;     ';strFrame+='      if(iScroll){   ';strFrame+='       clearTimeout(iScroll);     ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function mouseOverOfCell(cell,ev){  /*鼠标经过日期单元格*/';strFrame+='      '+this.ObjectName+'.MouseOver(cell,ev);   ';strFrame+='     }  ';strFrame+='     function mouseOutOfCell(cell){  /*鼠标离开日期单元格*/';strFrame+='      '+this.ObjectName+'.MouseOut(cell);   ';strFrame+='     }  ';strFrame+='<\/scr'+'ipt>';with(this){strFrame+=' <div class=\"calendar-panel-size\" >';strFrame+='  <div style=\"z-index:9999;position: absolute; left:0; top:0;\" onselectstart=\"return false\">  ';strFrame+='   <span id=tmpSelectYearLayer class=\"year\" style=\"display: none;left:23px;\"><\/span> ';strFrame+='   <table border=0 cellspacing=0 cellpadding=0 class=\"calendar-main-size main mainbackgroundcolor\">     ';strFrame+='    <tr>';strFrame+='     <td class=\"head-size mainbackgroundcolor\"> ';strFrame+='      <table class=\"head-size mainbackgroundcolor whiteborder\" border=0 cellspacing=0 cellpadding=0 > ';strFrame+='       <tr align=center>     ';strFrame+='        <td width=19><span class=\"calendar-border-noleft calendar-border-left prev-month-tool-button\" title=\"前一年\" onclick=\"'+this.ObjectName+'.goPrevYear()\" ondblclick=\"'+this.ObjectName+'.goPrevYear()\" onfocus=\"this.blur()\" ><span><\/td>';strFrame+='        <td width='+getYearWidth()+' align=center class=\"calendarhead\" onmouseover=\"className=\\'mouseover\\'\" onmouseout=\"className=\\'calendarhead\\'\" onclick=\"'+this.ObjectName+'.selectYear(this.innerHTML.substring(0,4))\" title=\"点击这里选择年份\" id=CalendarYearHead><\/td>    ';strFrame+='        <td width=19><span class=\"calendar-border-noleft calendar-border-left next-month-tool-button\" title=\"后一年\" onclick=\"'+this.ObjectName+'.goNextYear()\" ondblclick=\"'+this.ObjectName+'.goNextYear()\" onfocus=\"this.blur()\" ><span><\/td>';strFrame+='       <\/tr>     ';strFrame+='      <\/table>    ';strFrame+='     <\/td>   ';strFrame+='    <\/tr>     ';strFrame+='    <tr>';strFrame+='     <td class=\"calendarcell-size\" align=center> ';strFrame+='         <table align=center border=0 cellspacing=\"0\" cellpadding=0 class=\"calendarcell calendarcell-size\" >   ';var n=0;for(j=0;j<7;j++){strFrame+='       <tr align=center>  ';for(i=0;i<7;i++){strFrame+='        <td onmouseover=\"mouseOverOfCell(this,event)\" onmouseout=\"mouseOutOfCell(this)\" width='+(cellwidth)+' height='+(cellheight)+' id=CalendarCell'+n+'><\/td>   ';n++;}\nstrFrame+='       <\/tr> ';}\nstrFrame+='       <tr align=center>     ';for(i=49;i<56;i++)\nstrFrame+='        <td onmouseover=\"mouseOverOfCell(this,event)\" onmouseout=\"mouseOutOfCell(this)\" width='+(cellwidth)+' height='+(cellheight)+' id=CalendarCell'+i+'><\/td>     ';strFrame+='       <\/tr>     ';strFrame+='         <\/table>    ';strFrame+='       <\/td>   ';strFrame+='    <\/tr>     ';strFrame+='   <\/table>';strFrame+='  <\/div>  ';strFrame+=' <\/div>  ';}\nthis.CalendarContainer=window.frames[this.frameId].document;this.CalendarContainer.writeln(strFrame);this.CalendarContainer.close();this.Style.width=this.getCalendarWidth();this.Style.height=this.getCalendarHeight()+6;var head=this.CalendarContainer.getElementsByTagName(\"head\").item(0);var fileref=this.CalendarContainer.createElement(\"link\");fileref.setAttribute(\"rel\",\"stylesheet\");fileref.setAttribute(\"type\",\"text/css\");fileref.setAttribute(\"href\",jsloader.baseHref+\"css/bof_merge.css.jsp\");if(typeof fileref!=\"undefined\"){head.appendChild(fileref);}\nfor(i=0;i<56;i++)\n{this.CalendarCell[i]=this.CalendarContainer.getElementById('CalendarCell'+i);var tempDay=this.CalendarCell[i];if(i<53){tempDay.style.cursor=\"pointer\";tempDay.onclick=Function(this.ObjectWindow+\".calendarCellClick(\"+i+\")\");tempDay.ondblclick=Function(this.ObjectWindow+\".calendarCellDblClick(\"+i+\")\");}else{tempDay.style.cursor=\"\";tempDay.onmouseover=null;tempDay.onmouseout=null;tempDay.onclick=null;tempDay.ondblclick=null;}}\nthis.isWrite=true;};WeekCalendar.prototype.showCalendar=function(srcButton,displayObject){if(!this.isWrite){this.writeIframe();}\nvar selt=this;var obj;var calendarButton;this.followcodes=\"\";if(displayObject){calendarButton=displayObject;if(typeof(displayObject)==\"object\")obj=displayObject\nelse if(typeof(displayObject)==\"string\")this.followcodes=displayObject;}else{calendarButton=srcButton;}\nvar th=srcButton;var calendarStyle=this.Style;var ttop=calendarButton.offsetTop;var thei=calendarButton.offsetHeight;var twid=calendarButton.offsetWidth;var tleft=calendarButton.offsetLeft;var ttyp=calendarButton.type;while(calendarButton=calendarButton.offsetParent){ttop+=calendarButton.offsetTop;tleft+=calendarButton.offsetLeft;}\nvar cheight=this.getCalendarHeight();if(document.body.clientHeight>cheight+thei&&document.body.clientHeight-(ttop-document.body.scrollTop)<cheight+thei&&ttop-document.body.scrollTop>cheight){calendarStyle.top=ttop-cheight-1}else{calendarStyle.top=ttop+thei+1;}\ncalendarStyle.left=tleft;this.displayObject=!obj?th:obj;this.srcButton=!obj?null:th;var tempValue=this.getValueToDate(this.dateValue);this.outerValue=tempValue;this.oldValue=tempValue;this.currentValue=tempValue;if(tempValue!=\"\"){this.year=tempValue.year;this.week=tempValue.week;}else{this.year=new Date().getFullYear();this.week=this.dayOfWeek(this.year,new Date().getMonth()+1,new Date().getDate());}\nthis.writeCalendar();calendarStyle.display='';this.addEvent(document,\"click\",function(){with(window.event)\nif(srcElement!=selt.srcButton&&srcElement!=selt.displayObject){selt.close();}});};WeekCalendar.prototype.writeCalendar=function(){if(!this.CalendarContainer.getElementById(\"CalendarYearHead\"))\nreturn;var selt=this;var yy=this.year;var ww=this.week;this.CalendarContainer.getElementById(\"CalendarYearHead\").innerHTML=yy+\" 年\";this.initWeekArrays(this.year);for(i=0;i<this.getWeekCount(this.year);i++){this.CalendarValues[i]=new CalendarDataObject(yy,i+1);}\nfor(i=0;i<this.getWeekCount(this.year);i++)\n{var tempDay=this.CalendarCell[i];if(this.outerValue&&this.CalendarValues[i].equals(this.outerValue)){tempDay.className=\"selectedday\";}else if(this.CalendarValues[i].equals(this.thisWeek)){tempDay.className=\"today\";}else{tempDay.className=\"normalday\";}\ntempDay.innerHTML=this.CalendarValues[i].week;tempDay.dec=this.CalendarValues[i].calendarTitle;}\nvar lastDay=this.CalendarCell[52];if(lastDay.style.cursor!=\"\"&&typeof(lastDay.style.cursor)!=\"undefined\"){lastDay.stylecursor=lastDay.style.cursor;lastDay.onmouseovervalue=lastDay.onmouseover;lastDay.onmouseoutvalue=lastDay.onmouseout;lastDay.onclickvalue=lastDay.onclick;lastDay.ondblclickvalue=lastDay.ondblclick;}\nif(this.getWeekCount(this.year)!=53){lastDay.style.cursor=\"\";lastDay.onmouseover=null;lastDay.onmouseout=null;lastDay.onclick=null;lastDay.ondblclick=null;lastDay.className=\"normalday\";lastDay.innerHTML=\"&nbsp\";}else{lastDay.style.cursor=lastDay.stylecursor;lastDay.onmouseover=lastDay.onmouseovervalue;lastDay.onmouseout=lastDay.onmouseoutvalue;lastDay.onclick=lastDay.onclickvalue;lastDay.ondblclick=lastDay.ondblclickvalue;}\nfor(var i=53;i<56;i++){this.CalendarCell[i].innerHTML=\"&nbsp\";this.CalendarCell[i].className=\"normalday\";}\nfunction CalendarDataObject(year,week){this.year=year;this.week=week;var week=this.week;if(week<10&&selt.WeekinWW)week=\"0\"+week;this.calendarValue=selt.dateValueStyle.replace(\"yyyy\",year).replace((selt.WeekinWW?\"ww\":\"w\"),week);this.calendarText=selt.datestyle.replace(\"yyyy\",year).replace((selt.WeekinWW?\"ww\":\"w\"),week);this.calendarTitle=selt.TitleStyle.replace(\"yyyy\",selt.WeekStartDay[week-1].getYear()).replace(\"MM\",selt.WeekStartDay[week-1].getMonth()+1).replace(\"dd\",selt.WeekStartDay[week-1].getDate()).replace(\"YYYY\",selt.WeekEndDay[week-1].getYear()).replace(\"mm\",selt.WeekEndDay[week-1].getMonth()+1).replace(\"DD\",selt.WeekEndDay[week-1].getDate()).replace((selt.WeekinWW?\"ww\":\"w\"),week);this.equals=function(value){try{return this.year==value.year&&this.week==value.week;}\ncatch(e){return false}}}};WeekCalendar.prototype.getWeekCount=function(year){var weekCount=52;var week=new Date(year,0,1).getDay();if((year%4==0&&year%100!=0)||year%400==0){if(week==6||week==5){weekCount=53;}else{weekCount=52;}}else{if(week==6){weekCount=53;}else{weekCount=52;}}\nreturn parseInt(weekCount,10);};WeekCalendar.prototype.dayOfWeek=function(year,month,day){var date=new Date(year,month-1,day);var firstDayOfYear=new Date(year,0,1);var currentDayOfYear=0;var year=0;if(date.getYear()>=2000){year=date.getYear();}\nelse{year=date.getYear()+1900;}\nvar month=date.getMonth();var day=date.getDate();var week=date.getDay();var weekOfFirstDay=firstDayOfYear.getDay();for(var i=0;i<12;i++){if(i<month){currentDayOfYear+=this.getDaysOfMonth(year,i+1);}\nif(i==month){currentDayOfYear+=day;}}\ncurrentDayOfYear+=firstDayOfYear.getDay();currentDayOfYear+=(7-date.getDay()-1);return currentDayOfYear/7;};WeekCalendar.prototype.initWeekArrays=function(year){var firstDayOfYear=new Date(year,0,1);var count=0;var FirstStartDay=this.getFirstDateOfWeek(firstDayOfYear);this.WeekStartDay[count]=new Date(FirstStartDay.getFullYear(),FirstStartDay.getMonth(),FirstStartDay.getDate());var FirstEndDay=this.getLastDateOfWeek(firstDayOfYear);this.WeekEndDay[count]=new Date(FirstEndDay.getFullYear(),FirstEndDay.getMonth(),FirstEndDay.getDate());for(count=1;count<this.getWeekCount(this.year);count++){var tempDay=new Date(this.WeekEndDay[count-1].getFullYear(),this.WeekEndDay[count-1].getMonth(),this.WeekEndDay[count-1].getDate());tempDay.setDate(tempDay.getDate()+1);var StartDay=this.getFirstDateOfWeek(tempDay);this.WeekStartDay[count]=new Date(StartDay.getFullYear(),StartDay.getMonth(),StartDay.getDate());var EndDay=this.getLastDateOfWeek(tempDay);this.WeekEndDay[count]=new Date(EndDay.getFullYear(),EndDay.getMonth(),EndDay.getDate());}};WeekCalendar.prototype.getDaysOfMonth=function(year,month){return((new Date(year,month,0)).getDate());};WeekCalendar.prototype.getFirstDateOfWeek=function(day){var firstDateOfWeek=day;firstDateOfWeek.setDate(firstDateOfWeek.getDate()-firstDateOfWeek.getDay());return firstDateOfWeek;};WeekCalendar.prototype.getLastDateOfWeek=function(day){var lastDateOfWeek=day;lastDateOfWeek.setDate(lastDateOfWeek.getDate()+6-lastDateOfWeek.getDay());return lastDateOfWeek;};WeekCalendar.prototype.onEditChange=function(){if(this.ifCheckEditChange){var tempText=this.getText();if(tempText!=\"\"){if(!this.isValidText(tempText)){alert(\"输入日期格式不正确，请重新输入！\");this.displayObject.value=this.getDateToText(this.oldValue);this.dateValue=this.getDateToValue(this.oldValue);}else{var tempDate=this.getTextToDate(tempText);var tempValue=this.getDateToValue(tempDate);this.year=tempDate.year;this.week=tempDate.week;this.dateValue=tempValue;this.outerValue=tempDate;this.oldValue=tempDate;this.currentValue=tempDate;this.onRefresh.fire();this.writeCalendar();}}else{this.setValue(\"\");}}};WeekCalendar.prototype.isValidDate=function(testDate){var myRegExp;if(this.getWeekCount(parseInt(testDate.split(\"-\")[0]))==53){myRegExp=/^(((1[6-9]|[2-9]\\d)\\d{2})W(0?[1-9]|[1-4][0-9]|5[0-3]))$/;}else{myRegExp=/^(((1[6-9]|[2-9]\\d)\\d{2})W(0?[1-9]|[1-4][0-9]|5[0-2]))$/;}\nreturn myRegExp.test(testDate);};WeekCalendar.prototype.isValidText=function(testContent){var myRegExp;if(this.getWeekCount(parseInt(testContent.substring(0,4)))==53){myRegExp=/^(((1[6-9]|[2-9]\\d)\\d{2})\\s(\\u5e74)\\s(0?[1-9]|[1-4][0-9]|5[0-3])\\s(\\u5468))$/;}else{myRegExp=/^(((1[6-9]|[2-9]\\d)\\d{2})\\s(\\u5e74)\\s(0?[1-9]|[1-4][0-9]|5[0-2])\\s(\\u5468))$/;}\nreturn myRegExp.test(testContent);};WeekCalendar.prototype.getDateToValue=function(Date){var tempDate=Date;var result=\"\";if(tempDate!=\"\"&&tempDate){var year=tempDate.year;var week=tempDate.week;if(week<10&&this.WeekinWW)week=\"0\"+week;result=this.dateValueStyle.replace(\"yyyy\",year).replace((this.WeekinWW?\"ww\":\"w\"),week);}\nreturn result;};WeekCalendar.prototype.getDateToText=function(Date){var tempDate=Date;var result=\"\";if(tempDate!=\"\"&&tempDate){var year=tempDate.year;var week=tempDate.week;if(week<10&&this.WeekinWW)week=\"0\"+week;result=this.datestyle.replace(\"yyyy\",year).replace((this.WeekinWW?\"ww\":\"w\"),week);}\nreturn result;};WeekCalendar.prototype.getTextToDate=function(Text){var reg=RegExp(\"^\"+this.datestyle.replace(\"yyyy\",\"(\\\\d{4})\").replace((this.WeekinWW?\"ww\":\"w\"),\"(\\\\d{1,2})\")+\"$\");var r=Text.match(reg);var date=null;if(r!=null){r[1]=parseInt(r[1],10);r[2]=parseInt(r[2],10);date=new Week(r[1],r[2]);}else{date=\"\";}\nreturn date;};WeekCalendar.prototype.getValueToDate=function(value){var reg=RegExp(\"^\"+this.dateValueStyle.replace(\"yyyy\",\"(\\\\d{4})\").replace((this.WeekinWW?\"ww\":\"w\"),\"(\\\\d{1,2})\")+\"$\");var r=value.match(reg);var date=null;if(r!=null){r[1]=parseInt(r[1],10);r[2]=parseInt(r[2],10);date=new Week(r[1],r[2]);}else{date=\"\";}\nreturn date;};WeekCalendar.prototype.addEvent=function(obj,eventName,oCallback){var ret;ret=obj.attachEvent(\"on\"+eventName,oCallback);return ret;};WeekCalendar.prototype.close=function(){if(this.CalendarContainer){this.CalendarContainer.getElementById(\"tmpSelectYearLayer\").style.display=\"none\";this.Style.display=\"none\";}};WeekCalendar.prototype.getText=function(){return this.displayObject.value;};WeekCalendar.prototype.getValue=function(){var date=this.getTextToDate(this.getText());var value=this.getDateToValue(date);return value+\"\";};WeekCalendar.prototype.setText=function(text){if(this.displayObject){this.displayObject.value=text;this.onEditChange();}else{alert(\"您所要输出的控件对象并不存在！\");}\nif(this.followcodes!=\"\"){eval(this.followcodes);}};WeekCalendar.prototype.setValue=function(value){var tempdate=this.getValueToDate(value);var temptext=this.getDateToText(tempdate);this.displayObject.value=temptext;this.dateValue=value;this.outerValue=tempdate;this.oldValue=tempdate;this.currentValue=tempdate;};WeekCalendar.prototype.setReadOnly=function(readonly){if(readonly){this.ifCheckEditChange=false;}else{this.ifCheckEditChange=true;}\nthis.displayObject.readOnly=readonly;};WeekCalendar.prototype.getReadOnly=function(){return this.displayObject.readOnly;};WeekCalendar.prototype.setScrollYearOnClick=function(scoll){this.ScrollYearOnClick=scoll;};WeekCalendar.prototype.getScrollYearOnClick=function(){return this.ScrollYearOnClick;};WeekCalendar.prototype.getCalendarWidth=function(){return parseInt(this.cellwidth*7+2+1,10);};WeekCalendar.prototype.getCalendarHeight=function(){return this.cellheight*8+this.toolBarHeight+2+1;};WeekCalendar.prototype.getYearWidth=function(){return parseInt((this.getCalendarWidth()-42-2-4),10);};WeekCalendar.prototype.getToolBarHeight=function(){return this.toolBarHeight;};WeekCalendar.prototype.getBodyHeight=function(){return this.cellheight*8+1;};WeekCalendar.prototype.selectYear=function(strYear){if(strYear.match(/\\D/)!=null)return;var m=(strYear)?strYear:new Date().getFullYear();if(m<1000||m>9999)return;var n=m-4;if(n<1000)n=1000;if(n+100>9999)n=9900;var s='';s+='<table border=0 cellspacing=0 cellpadding=0 class=\"year year-size\">';if(this.ScrollYearOnClick){s+='<tr><td align=center height=3 onmouseout=\"stopScroll()\"'+'onclick=\"return false\" onmousedown=\"startScroll(this,true)\" onmouseup=\"stopScroll()\" style=\"cursor:pointer\" title=\"向上滚动年份\"><span class=\"prev-year-button\" ><\/span><\/td><\/tr>';}\nelse{s+='<tr><td align=center height=3 style=\"cursor:pointer\" onmouseover=\"startScroll(this,true)\" onmouseout=\"stopScroll()\"'+'onclick=\"return false\" title=\"向上滚动年份\"><span class=\"prev-year-button\" ><\/span><\/td><\/tr>';}\nfor(var i=n;i<n+8;i++){s+='<tr><td class='+(i==parseInt(strYear,10)?'selectedYM':'normalYM')+' style=\"cursor:pointer\" onmouseover=\"mOver(this)\" onmouseout=\"mOut(this)\" onmousedown=\"setYear('+i+')\">'+i+'年'+'<\/td><\/tr>';}\nif(this.ScrollYearOnClick){s+='<tr><td align=center height=3 style=\"cursor:pointer\" onmouseout=\"stopScroll()\"'+'onclick=\"return false\" onmousedown=\"startScroll(this,false)\" onmouseup=\"stopScroll()\" title=\"向下滚动年份\"><span class=\"next-year-button\" ><\/span><\/td><\/tr>';}\nelse{s+='<tr><td align=center height=3 style=\"cursor:pointer\" onmouseover=\"startScroll(this,false)\" onmouseout=\"stopScroll()\"'+'onclick=\"return false\" title=\"向下滚动年份\"><span class=\"next-year-button\" ><\/span><\/td><\/tr>';}\ns+='<\/table>';this.CalendarContainer.getElementById(\"tmpSelectYearLayer\").innerHTML=s;this.CalendarContainer.getElementById(\"tmpSelectYearLayer\").style.display=\"\";};WeekCalendar.prototype.goPrevYear=function(){if(this.year>1000&&this.year<10000){this.year--;this.writeCalendar();}};WeekCalendar.prototype.goNextYear=function(){if(this.year>999&&this.year<9999){this.year++;this.writeCalendar();}};WeekCalendar.prototype.calendarCellClick=function(n){if(this.displayObject){this.year=this.CalendarValues[n].year;this.week=this.CalendarValues[n].week;this.displayObject.value=this.CalendarValues[n].calendarText;this.dateValue=this.CalendarValues[n].calendarValue;var week=new Week(this.year,this.week);this.currentValue=week;this.oldValue=week;this.outerValue=week;this.close();this.displayObject.blur();var scope=this;setTimeout(function(){scope.onRefresh.fire();},10);}else{this.close();alert(\"您所要输出的控件对象并不存在！\");}\nif(this.followcodes!=\"\"){eval(this.followcodes);}};WeekCalendar.prototype.calendarCellDblClick=function(n){this.calendarCellClick(n);};WeekCalendar.prototype.setDateStyle=function(datestyle){this.datestyle=datestyle;this.writeIframe();};WeekCalendar.prototype.setDateValueStyle=function(dateValueStyle){this.dateValueStyle=dateValueStyle;this.writeIframe();};WeekCalendar.prototype.setTitleStyle=function(TitleStyle){this.TitleStyle=TitleStyle;this.writeIframe();};WeekCalendar.prototype.setYear=function(year){if(isNaN(year)||year<=999||year>9999)return;this.year=parseInt(year,10);this.writeCalendar();};WeekCalendar.prototype.correctPosition=function(){var CalendarWindow=this.frame;if(CalendarWindow.bDrag){var x=event.clientX-CalendarWindow.datelayerx;var y=event.clientY-CalendarWindow.datelayery;this.Style.left=(x<0?0:x)+\"px\";this.Style.top=(y<0?0:y)+\"px\";}};WeekCalendar.prototype.MouseOver=function(cell,ev){cell.tmpTdClass=cell.className;cell.className=\"mouseover\";var tempTitle=cell.dec.replace(\"\\n\",\"<br>\");this.titleCantainer.innerHTML=tempTitle;if((document.body.clientHeight-ev.screenY)<44){this.titleDiv.style.top=ev.screenY-window.screenTop-60;}else{this.titleDiv.style.top=ev.screenY-window.screenTop+30;}\nif((document.body.clientWidth-ev.screenX)<151){this.titleDiv.style.left=ev.screenX-window.screenLeft-151;}else{this.titleDiv.style.left=ev.screenX-window.screenLeft-75;}\nthis.titleDiv.style.display=\"block\";};WeekCalendar.prototype.MouseOut=function(cell){cell.className=cell.tmpTdClass;this.titleDiv.style.display=\"none\";};","js/freequery/control/TenDaysCalendarWrapper.js":"\nvar Module2=jsloader.resolve(\"freequery.widget.Module2\");var domutils=jsloader.resolve(\"freequery.lang.domutils\");var UUIDGenerator=jsloader.resolve(\"freequery.thirdparty.UUIDGenerator\");var TenDaysCalendarWrapper=function(container){var uuid=new UUIDGenerator();var CalendarStr=uuid.id;eval('if (!window.Calendar'+CalendarStr+') { '\n+'window.Calendar'+CalendarStr+' = new TenDaysCalendar(container,\"Calendar'+CalendarStr+'\"); '\n+'window.Calendar'+CalendarStr+'.owner = this; '\n+'this.Calendar = window.Calendar'+CalendarStr+'}');}\nlang.extend(TenDaysCalendarWrapper,Module2);TenDaysCalendarWrapper.prototype.destroy=function(){if(this.Calendar){this.Calendar.destroy();this.Calendar=null;}\nTenDaysCalendarWrapper.superclass.destroy.call(this);};var TenDaysCalendar=function(container,varname){this.parent=container;this.ObjectName=\"parent.\"+varname;this.ObjectWindow=\"window.\"+varname;this.frameId=this.ObjectName+\".TenDaysCalendarLayer\";this.frame=document.getElementById(this.frameId);if(!this.frame){this.initFrame();}\nthis.isWrite=false;this.bmoveable=true;this.datestyle=\"yyyy 年 MM 月 t旬\";this.dateValueStyle=\"yyyyMMTt\";this.TitleStyle=\"从 yyyy年MM月dd日 至 YYYY年mm月DD日\";this.cellwidth=52;this.cellheight=52;this.toolBarHeight=21;this.CalendarContainer=window.frames[this.frameId].document;this.Style=this.frame.style;this.year=new Date().getFullYear();this.month=new Date().getMonth()+1;this.date=new Date().getDate();this.tenDay=this.dayOfTenDays(this.date);this.thisTenDay=new TenDay(this.year,this.month,this.tenDay);this.CalendarValues=new Array(3);this.CalendarCell=new Array(3);this.TenDaysStartDay=new Array(3);this.TenDaysEndDay=new Array(3);this.outerValue=\"\";this.oldValue=\"\";this.currentValue=\"\";this.displayObject=null;this.dateValue=\"\";this.srcButton=null;this.MonthinMM=this.datestyle.indexOf(\"MM\")>=0?true:false;this.followcodes=\"\";this.ScrollYearOnClick=true;this.onRefresh=new CustomEvent(\"editChange\",this);this.ifCheckEditChange=true;};lang.extend(TenDaysCalendar,Module2);function TenDay(year,month,tenDay){this.year=year;this.month=month;this.tenDay=tenDay;};TenDaysCalendar.prototype.destroy=function(){if(this.Style){this.Style=null;delete this.Style;}\nif(this.srcButton){this.srcButton=null;}\nif(this.displayObject){this.displayObject=null;}\nif(this.CalendarValues){this.CalendarValues=null;delete this.CalendarValues;}\nif(this.titleDiv){document.body.removeChild(this.titleDiv);if(this.titleCantainer){this.titleDiv.removeChild(this.titleCantainer);this.titleCantainer.innerHTML=\"\";delete this.titleCantainer;}\ndomutils.destroyNode(this.titleDiv);}\nthis.onRefresh=null;if(this.CalendarCell){if(this.CalendarContainer){for(var id in this.CalendarCell){this.CalendarCell[id].innerHTML=\"\";delete this.CalendarCell[id];}\nthis.CalendarContainer.writeln('');this.CalendarContainer.close();delete this.CalendarContainer;}\nthis.CalendarCell=null;}\nif(this.frame){document.body.removeChild(this.frame);this.frame.src=\"about:blank\";domutils.destroyNode(this.frame);delete this.frame;}\nif(this.owner){this.owner=null;delete this.owner;}\nif(this.parent)\nthis.parent.innerHTML=\"\";TenDaysCalendar.superclass.destroy.call(this);};TenDaysCalendar.prototype.initFrame=function(){this.frame=document.createElement(\"iframe\");this.frame.setAttribute(\"id\",this.frameId);this.frame.setAttribute(\"name\",this.frameId);this.frame.className=\"multicalendar-iframe\";this.frame.setAttribute(\"scrolling\",\"no\");this.frame.setAttribute(\"onmouseout\",\"\"+this.ObjectName+\".correctPosition()\");this.frame.style.display=\"none\";document.body.appendChild(this.frame);};TenDaysCalendar.prototype.writeIframe=function(){if(this.cellwidth<21)this.cellwidth=21;if(this.cellheight<20)this.cellheight=20;var strFrame;strFrame='<style>';with(this){strFrame+='*{font-family:宋体;}';strFrame+='DIV.calendar-panel-size {width:'+(getCalendarWidth())+';height:'+(getCalendarHeight()+2)+';}';strFrame+='TABLE.calendar-main-size {width:'+(getCalendarWidth())+'px;height:'+getCalendarHeight()+'px;}';strFrame+='.head-size{width:'+(getCalendarWidth()-2)+';height:'+getToolBarHeight()+';}';strFrame+='table.year-size{width:'+(getYearWidth())+'px;height:48px;}';strFrame+='span.month-size{left: '+(getYearWidth()-getMonthWidth()*2+42)+'px;}';strFrame+='table.month-size{width:'+(getMonthWidth()*4)+'px;height:48px;}';strFrame+='calendarcell-size{width:'+(getCalendarWidth()-2)+';height:'+(getBodyHeight())+';}';}\nstrFrame+='<\/style>';strFrame+='<scr'+'ipt>';strFrame+='     var datelayerx,datelayery; /*存放旬历控件的鼠标位置*/      ';strFrame+='     var bDrag=false; ';strFrame+='     var DateLayer='+this.ObjectName+'.Style;    ';strFrame+='     document.onmousemove=function(){/*在鼠标移动事件中，如果开始拖动旬历，则移动旬历*/     ';strFrame+='      if(bDrag){     ';strFrame+='       DateLayer.left = (parseInt(DateLayer.left,10)+window.event.clientX-datelayerx)+\"px\";/*由于每次移动以后鼠标位置都恢复为初始的位置，因此写法与div中不同*/     ';strFrame+='       DateLayer.top = (parseInt(DateLayer.top,10)+window.event.clientY-datelayery)+\"px\";    ';strFrame+='      }';strFrame+='     }; ';strFrame+='     function DragStart(){  /*开始旬历拖动*/     ';strFrame+='      if(window.event.button== 1){   /*值1表示鼠标左键*/ ';strFrame+='       datelayerx=window.event.clientX;  ';strFrame+='       datelayery=window.event.clientY;  ';strFrame+='       bDrag=true;  ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function DragEnd(){  /*结束旬历拖动*/';strFrame+='      bDrag=false;   ';strFrame+='     }  ';strFrame+='     document.onmousedown=function(){ /*点击的时候关闭年份和月份的选择列表*/ ';strFrame+='      var obj=document.getElementById(\"tmpSelectYearLayer\");   ';strFrame+='      if(!bFromYear&&event.srcElement!=document.getElementById(\"CalendarYearHead\")&&obj.style.display!=\"none\"){ ';strFrame+='       obj.style.display=\"none\";bYearListOpening=true  ';strFrame+='      }';strFrame+='      obj=document.getElementById(\"tmpSelectMonthLayer\");      ';strFrame+='      if(event.srcElement!=document.getElementById(\"CalendarMonthHead\")&&obj.style.display!=\"none\"){     ';strFrame+='       obj.style.display=\"none\";  ';strFrame+='      }';strFrame+='     }; ';strFrame+='     var strTempClass=\"\";    ';strFrame+='     document.oncontextmenu=function(){/*禁止出现右键菜单*/     ';strFrame+='      if(!event.ctrlKey)return false;     ';strFrame+='     }; ';strFrame+='     function mOver(obj){/*年/月选择列表的mouseover处理*/';strFrame+='      strTempClass=obj.className;  ';strFrame+='      obj.className=\"mouseoverYM\"; ';strFrame+='      bYearListOpening=false;  /*为了显示年份列表的时候向上滚动功能的正常使用*/     ';strFrame+='     }  ';strFrame+='     function mOut(obj){/*年/月选择列表的mouseout处理*/  ';strFrame+='      obj.className=strTempClass;  ';strFrame+='     }  ';strFrame+='     function setMonth(iMonth){/*下拉选择月份的处理*/    ';strFrame+='      '+this.ObjectName+'.setMonth(iMonth)      ';strFrame+='     }  ';strFrame+='     function setYear(iYear){/*下拉选择年份的处理*/      ';strFrame+='      '+this.ObjectName+'.setYear(iYear) ';strFrame+='     }  ';strFrame+='     var bScrolling=false;   ';strFrame+='     var bYearListOpening=true; /*这个变量用于控制在刚刚显示年份列表的时候，鼠标处于向上滚动条位置的情况下不要滚动*/    ';strFrame+='     var iScroll=null;';strFrame+='     var bFromYear=false; /*标志为从年份下拉列表处进行了点击，以便不要关闭年份列表*/';strFrame+='     function scrollYear(bUp){/*滚动年份列表*/    ';strFrame+='      var oTable=document.getElementById(\"tmpSelectYearLayer\").childNodes[0];';strFrame+='      if(bUp){';strFrame+='       var iMin=parseInt(oTable.rows[1].cells[0].innerHTML.replace(/\\\\D/g,\\'\\'),10);  ';strFrame+='       if(iMin>1000){      ';strFrame+='        oTable.deleteRow(oTable.rows.length-2);';strFrame+='        var oTd=oTable.insertRow(1).insertCell(0);    ';strFrame+='        oTd.innerHTML=(iMin-1).toString()+\"年\";      ';strFrame+='        oTd.onmouseover=Function(\"mOver(this)\");      ';strFrame+='        oTd.onmouseout=Function(\"mOut(this)\"); ';strFrame+='        oTd.onmousedown=Function(\"setYear(\"+(iMin-1).toString()+\")\");      ';strFrame+='        oTd.className=(iMin-1=='+this.ObjectName+'.year?\"selectedYM\":\"normalYM\");';strFrame+='        if(bScrolling){   ';strFrame+='         window.setTimeout(\"scrollYear(true)\", 300); ';strFrame+='        }   ';strFrame+='       }     ';strFrame+='      }else{  ';strFrame+='       var iMax=parseInt(oTable.rows[oTable.rows.length-2].cells[0].innerHTML.replace(/\\\\D/g,\\'\\'),10);    ';strFrame+='       if(iMax<=9999){     ';strFrame+='        var oTd=oTable.insertRow(oTable.rows.length-1).insertCell(0);      ';strFrame+='        oTable.deleteRow(1);     ';strFrame+='        oTd.innerHTML=(iMax+1).toString()+\"年\";      ';strFrame+='        oTd.onmouseover=Function(\"mOver(this)\");      ';strFrame+='        oTd.onmouseout=Function(\"mOut(this)\"); ';strFrame+='        oTd.onmousedown=Function(\"setYear(\"+(iMax+1).toString()+\")\");      ';strFrame+='        oTd.className=(iMax+1=='+this.ObjectName+'.year?\"selectedYM\":\"normalYM\");';strFrame+='        if(bScrolling){   ';strFrame+='         window.setTimeout(\"scrollYear(false)\", 300);';strFrame+='        }   ';strFrame+='       }     ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function startScroll(oTd,bUp){ ';strFrame+='      bFromYear=true;';strFrame+='      if(!bYearListOpening){';strFrame+='       bScrolling=true;    ';strFrame+='       scrollYear(bUp);    ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function stopScroll(){  ';strFrame+='      bYearListOpening=false;      ';strFrame+='      bFromYear=false;      ';strFrame+='      bScrolling=false;     ';strFrame+='      if(iScroll){   ';strFrame+='       clearTimeout(iScroll);     ';strFrame+='      }';strFrame+='     }  ';strFrame+='<\/scr'+'ipt>';with(this){strFrame+=' <div class=\"calendar-panel-size\" >';strFrame+='  <div style=\"z-index:9999;position: absolute; left:0; top:0;\" onselectstart=\"return false\">  ';strFrame+='   <span id=tmpSelectYearLayer class=\"year\" style=\"display: none; top:1;\"><\/span> ';strFrame+='   <span id=tmpSelectMonthLayer class=\"month month-size\" style=\"display: none;\"><\/span>     ';strFrame+='   <table border=0 cellspacing=0 cellpadding=0 class=\"calendar-main-size main mainbackgroundcolor\">     ';strFrame+='    <tr>';strFrame+='     <td class=\"head-size mainbackgroundcolor\"> ';strFrame+='      <table class=\"head-size mainbackgroundcolor\" border=0 cellspacing=0 cellpadding=0 > ';strFrame+='       <tr align=center >     ';strFrame+='        <td width=19><span class=\"calendar-border-noleft calendar-border-left prev-year-tool-button\" title=\"前一年\" onclick=\"'+this.ObjectName+'.goPrevYear()\" ondblclick=\"'+this.ObjectName+'.goPrevYear()\" onfocus=\"this.blur()\" ><span><\/td>';strFrame+='        <td width=19><span class=\"calendar-border-noleft prev-month-tool-button\" title=\"前一月\" onclick=\"'+this.ObjectName+'.goPrevMonth()\" ondblclick=\"'+this.ObjectName+'.goPrevMonth()\" onfocus=\"this.blur()\" ><span><\/td> ';strFrame+='        <td width='+getYearWidth()+' align=right class=\"calendarhead\" onmouseover=\"className=\\'mouseover\\'\" onmouseout=\"className=\\'calendarhead\\'\" onclick=\"'+this.ObjectName+'.selectYear(this.innerHTML.substring(0,4))\" title=\"点击这里选择年份\" id=CalendarYearHead><\/td>    ';strFrame+='        <td width='+getMonthWidth()+' align=left class=\"calendarhead\" onmouseover=\"className=\\'mouseover\\'\" onmouseout=\"className=\\'calendarhead\\'\" onclick=\"'+this.ObjectName+'.selectMonth(this.innerHTML.replace(/\\\\D/g,\\'\\'))\" title=\"点击这里选择月份\" id=CalendarMonthHead><\/td> ';strFrame+='        <td width=19><span class=\"calendar-border-noleft calendar-border-left next-month-tool-button\" title=\"后一月\" onclick=\"'+this.ObjectName+'.goNextMonth()\" ondblclick=\"'+this.ObjectName+'.goNextMonth()\" onfocus=\"this.blur()\" ><span><\/td>  ';strFrame+='        <td width=19><span class=\"calendar-border-noleft next-year-tool-button\" title=\"后一年\" onclick=\"'+this.ObjectName+'.goNextYear()\" ondblclick=\"'+this.ObjectName+'.goNextYear()\" onfocus=\"this.blur()\" ><span><\/td>';strFrame+='       <\/tr>     ';strFrame+='      <\/table>    ';strFrame+='     <\/td>   ';strFrame+='    <\/tr>     ';strFrame+='    <tr>';strFrame+='     <td class=\"calendarcell-size\" align=center> ';strFrame+='         <table align=center border=0 cellspacing=\"0\" cellpadding=0 class=\"calendarcell calendarcell-size\" >   ';strFrame+='       <tr align=center>  ';strFrame+='        <td width='+(cellwidth)+' height='+(cellheight)+' id=CalendarCell0>上旬<\/td>';strFrame+='        <td width='+(cellwidth)+' height='+(cellheight)+' id=CalendarCell1>中旬<\/td>';strFrame+='        <td width='+(cellwidth)+' height='+(cellheight)+' id=CalendarCell2>下旬<\/td>';strFrame+='       <\/tr> ';strFrame+='        <\/table>    ';strFrame+='      <\/td>   ';strFrame+='    <\/tr>     ';strFrame+='   <\/table>';strFrame+='  <\/div>  ';strFrame+=' <\/div>  ';}\nthis.CalendarContainer=window.frames[this.frameId].document;this.CalendarContainer.writeln(strFrame);this.CalendarContainer.close();this.Style.width=this.getCalendarWidth();this.Style.height=this.getCalendarHeight();var head=this.CalendarContainer.getElementsByTagName(\"head\").item(0);var fileref=this.CalendarContainer.createElement(\"link\");fileref.setAttribute(\"rel\",\"stylesheet\");fileref.setAttribute(\"type\",\"text/css\");var cssHref=window.bof_offline_xhr?\"css/bof_merge.css\":jsloader.baseHref+\"css/bof_merge.css.jsp\";fileref.setAttribute(\"href\",cssHref);if(typeof fileref!=\"undefined\"){head.appendChild(fileref);}\nfor(i=0;i<3;i++)\n{this.CalendarCell[i]=this.CalendarContainer.getElementById('CalendarCell'+i);var tempDay=this.CalendarCell[i];tempDay.style.cursor=\"pointer\";tempDay.onmouseover=this.MouseOver;tempDay.onmouseout=this.MouseOut;tempDay.onclick=Function(this.ObjectWindow+\".calendarCellClick(\"+i+\")\");tempDay.ondblclick=Function(this.ObjectWindow+\".calendarCellDblClick(\"+i+\")\");}\nthis.isWrite=true;};TenDaysCalendar.prototype.showCalendar=function(srcButton,displayObject){if(!this.isWrite){this.writeIframe();}\nvar selt=this;var obj;var calendarButton;this.followcodes=\"\";if(displayObject){calendarButton=displayObject;if(typeof(displayObject)==\"object\")obj=displayObject\nelse if(typeof(displayObject)==\"string\")this.followcodes=displayObject;}else{calendarButton=srcButton;}\nvar th=srcButton;var calendarStyle=this.Style;var ttop=calendarButton.offsetTop;var thei=calendarButton.offsetHeight;var twid=calendarButton.offsetWidth;var tleft=calendarButton.offsetLeft;var ttyp=calendarButton.type;while(calendarButton=calendarButton.offsetParent){ttop+=calendarButton.offsetTop;tleft+=calendarButton.offsetLeft;}\nvar cheight=this.getCalendarHeight();if(document.body.clientHeight>cheight+thei&&document.body.clientHeight-(ttop-document.body.scrollTop)<cheight+thei&&ttop-document.body.scrollTop>cheight){calendarStyle.top=ttop-cheight-1}else{calendarStyle.top=ttop+thei+1;}\ncalendarStyle.left=tleft;this.displayObject=!obj?th:obj;this.srcButton=!obj?null:th;var tempValue=this.getValueToDate(this.dateValue);this.outerValue=tempValue;this.oldValue=tempValue;this.currentValue=tempValue;if(tempValue!=\"\"){this.year=tempValue.year;this.month=tempValue.month;this.tenDay=tempValue.tenDay;}else{this.year=new Date().getFullYear();this.month=new Date().getMonth()+1;this.tenDay=this.dayOfTenDays(new Date().getDate());}\nthis.writeCalendar();calendarStyle.display='';this.addEvent(document,\"click\",function(){with(window.event)\nif(srcElement!=selt.srcButton&&srcElement!=selt.displayObject){selt.close();}});};TenDaysCalendar.prototype.writeCalendar=function(){if(!this.CalendarContainer.getElementById(\"CalendarYearHead\"))\nreturn;var selt=this;var yy=this.year;var mm=this.month;var tt=this.tenDay;this.CalendarContainer.getElementById(\"CalendarYearHead\").innerHTML=yy+\"年\";this.CalendarContainer.getElementById(\"CalendarMonthHead\").innerHTML=mm+\"月\";this.initTenDaysArrays(this.year);for(var t=0;t<3;t++){this.CalendarValues[t]=new CalendarDataObject(yy,mm,t+1);}\nfor(var t=0;t<3;t++){var tempDay=this.CalendarCell[t];if(this.outerValue&&this.CalendarValues[t].equals(this.outerValue)){tempDay.className=\"selectedday-tenday\";}else if(this.CalendarValues[t].equals(this.thisTenDay)){tempDay.className=\"normalday\";}else{tempDay.className=\"normalday\";}}\nfunction CalendarDataObject(year,month,tenday){this.year=year;this.month=month;this.tenday=tenday;var tempValue=\"上\";if(tenday==2){tempValue=\"中\";}else if(tenday==3){tempValue=\"下\";}\nvar month=this.month;if(month<10&&selt.MonthinMM)month=\"0\"+month;this.calendarValue=selt.dateValueStyle.replace(\"yyyy\",this.year).replace((selt.MonthinMM?\"MM\":\"M\"),month).replace(\"t\",this.tenday);this.calendarText=selt.datestyle.replace(\"yyyy\",this.year).replace((selt.MonthinMM?\"MM\":\"M\"),month).replace(\"t\",tempValue);this.calendarTitle=selt.TitleStyle.replace(\"yyyy\",selt.TenDaysStartDay[tenday-1].getYear()).replace(\"MM\",selt.TenDaysStartDay[tenday-1].getMonth()+1).replace(\"dd\",selt.TenDaysStartDay[tenday-1].getDate()).replace(\"YYYY\",selt.TenDaysEndDay[tenday-1].getYear()).replace(\"mm\",selt.TenDaysEndDay[tenday-1].getMonth()+1).replace(\"DD\",selt.TenDaysEndDay[tenday-1].getDate());this.equals=function(value){try{return this.year==value.year&&this.month==value.month&&this.tenday==value.tenDay;}\ncatch(e){return false;}}}};TenDaysCalendar.prototype.getDaysOfMonth=function(year,month){return((new Date(year,month,0)).getDate());};TenDaysCalendar.prototype.initTenDaysArrays=function(year,month){for(var t=0;t<3;t++){if(t!=2)\n{this.TenDaysStartDay[t]=new Date(year,month-1,(t*10)+1);this.TenDaysEndDay[t]=new Date(year,month-1,(t+1)*10)}else{this.TenDaysStartDay[t]=new Date(year,month-1,(t*10)+1);this.TenDaysEndDay[t]=new Date(year,month-1,this.getDaysOfMonth(year,month))}}};TenDaysCalendar.prototype.onEditChange=function(){if(this.ifCheckEditChange){var tempText=this.getText();if(tempText!=\"\"){if(!this.isValidText(tempText)){alert(\"输入日期格式不正确，请重新输入！\");this.displayObject.value=this.getDateToText(this.oldValue);this.dateValue=this.getDateToValue(this.oldValue);}else{var tempDate=this.getTextToDate(tempText);var tempValue=this.getDateToValue(tempDate);this.year=tempDate.year;this.month=tempDate.month;this.tenDay=tempDate.tenDay;this.dateValue=tempValue;this.outerValue=tempDate;this.oldValue=tempDate;this.currentValue=tempDate;this.onRefresh.fire();this.writeCalendar();}}else{this.setValue(\"\");}}};TenDaysCalendar.prototype.isValidDate=function(testDate){var myRegExp=/^(((1[6-9]|[2-9]\\d)\\d{2})(0?[1-9]|1[0-2])T([1-3]))$/;return myRegExp.test(testDate);};TenDaysCalendar.prototype.isValidText=function(testContent){var myRegExp=/^(((1[6-9]|[2-9]\\d)\\d{2})\\s(\\u5e74)\\s(0?[1-9]|1[0-2])\\s(\\u6708)\\s(\\u4e0a|\\u4e2d|\\u4e0b)(\\u65ec))$/;return myRegExp.test(testContent);};TenDaysCalendar.prototype.getDateToValue=function(Date){var tempDate=Date;var result=\"\";if(tempDate!=\"\"&&tempDate){var year=tempDate.year;var month=tempDate.month;var tenDay=tempDate.tenDay;if(month<10&&this.MonthinMM)month=\"0\"+month;result=this.dateValueStyle.replace(\"yyyy\",year).replace((this.MonthinMM?\"MM\":\"M\"),month).replace(\"t\",tenDay);;}\nreturn result;};TenDaysCalendar.prototype.getDateToText=function(Date){var tempDate=Date;var result=\"\";if(tempDate!=\"\"&&tempDate){var year=tempDate.year;var month=tempDate.month;var tenDay=tempDate.tenDay;if(month<10&&this.MonthinMM)month=\"0\"+month;var tempValue=\"上\";if(tenDay==2){tempValue=\"中\";}else if(tenDay==3){tempValue=\"下\";}\nresult=this.datestyle.replace(\"yyyy\",year).replace((this.MonthinMM?\"MM\":\"M\"),month).replace(\"t\",tempValue);}\nreturn result;};TenDaysCalendar.prototype.getTextToDate=function(Text){var reg=new RegExp(\"^\"+this.datestyle.replace(\"t\",\"(\\u4e0a|\\u4e2d|\\u4e0b)\").replace(\"yyyy\",\"(\\\\d{4})\").replace((this.MonthinMM?\"MM\":\"M\"),\"(\\\\d{1,2})\")+\"$\");var r=Text.match(reg);var date=null;if(r!=null){r[1]=parseInt(r[1],10);r[2]=parseInt(r[2],10);if(r[3]==\"上\"){r[3]=1;}else if(r[3]==\"中\"){r[3]=2;}else{r[3]=3;}\ndate=new TenDay(r[1],r[2],r[3]);}else{date=\"\";}\nreturn date;};TenDaysCalendar.prototype.getValueToDate=function(value){var reg=new RegExp(\"^\"+this.dateValueStyle.replace(\"t\",\"(\\\\d{1})\").replace(\"yyyy\",\"(\\\\d{4})\").replace((this.MonthinMM?\"MM\":\"M\"),\"(\\\\d{1,2})\")+\"$\");var r=value.match(reg);var date=null;if(r!=null){r[1]=parseInt(r[1],10);r[2]=parseInt(r[2],10);r[3]=parseInt(r[3],10);date=new TenDay(r[1],r[2],r[3]);}else{date=\"\";}\nreturn date;};TenDaysCalendar.prototype.addEvent=function(obj,eventName,oCallback){var ret;ret=obj.attachEvent(\"on\"+eventName,oCallback);return ret;};TenDaysCalendar.prototype.close=function(){if(this.CalendarContainer){this.CalendarContainer.getElementById(\"tmpSelectYearLayer\").style.display=\"none\";this.CalendarContainer.getElementById(\"tmpSelectMonthLayer\").style.display=\"none\";this.Style.display=\"none\";}};TenDaysCalendar.prototype.getText=function(){return this.displayObject.value;};TenDaysCalendar.prototype.getValue=function(){var date=this.getTextToDate(this.getText());var value=this.getDateToValue(date);return value+\"\";};TenDaysCalendar.prototype.setText=function(text){if(this.displayObject){this.displayObject.value=text;this.onEditChange();}else{alert(\"您所要输出的控件对象并不存在！\");}\nif(this.followcodes!=\"\"){eval(this.followcodes);}};TenDaysCalendar.prototype.setValue=function(value){var tempdate=this.getValueToDate(value);var temptext=this.getDateToText(tempdate);this.displayObject.value=temptext;this.dateValue=value;this.outerValue=tempdate;this.oldValue=tempdate;this.currentValue=tempdate;};TenDaysCalendar.prototype.setReadOnly=function(readonly){if(readonly){this.ifCheckEditChange=false;}else{this.ifCheckEditChange=true;}\nthis.displayObject.readOnly=readonly;};TenDaysCalendar.prototype.getReadOnly=function(){return this.displayObject.readOnly;};TenDaysCalendar.prototype.setScrollYearOnClick=function(scoll){this.ScrollYearOnClick=scoll;};TenDaysCalendar.prototype.getScrollYearOnClick=function(){return this.ScrollYearOnClick;};TenDaysCalendar.prototype.getCalendarWidth=function(){return parseInt(this.cellwidth*3+2+1,10);};TenDaysCalendar.prototype.getCalendarHeight=function(){return this.cellheight+this.toolBarHeight+2+1;};TenDaysCalendar.prototype.getYearWidth=function(){return parseInt((this.getCalendarWidth()-21-21-20-20-2)*0.58,10);};TenDaysCalendar.prototype.getMonthWidth=function(){return parseInt((this.getCalendarWidth()-21-21-20-20-2)*0.42,10);};TenDaysCalendar.prototype.getToolBarHeight=function(){return this.toolBarHeight;};TenDaysCalendar.prototype.getBodyHeight=function(){return this.cellheight+1;};TenDaysCalendar.prototype.selectMonth=function(strMonth){if(strMonth.match(/\\D/)!=null)return;var m=(strMonth)?strMonth:new Date().getMonth()+1;var s='';var currentMonth=1;s+='<table border=0 cellspacing=0 cellpadding=0 class=\"month month-size\">';for(var i=1;i<=3;i++){s+='<tr>';for(var j=1;j<=4;j++){s+='<td class='+(currentMonth==parseInt(strMonth,10)?'selectedYM':'normalYM')+' onmouseover=\"mOver(this)\" onmouseout=\"mOut(this)\" onmousedown=\"setMonth('+currentMonth+')\">'+currentMonth+'月'+'<\/td>';currentMonth++;s}\ns+='<\/tr>';}\ns+='<\/table>';this.CalendarContainer.getElementById(\"tmpSelectMonthLayer\").innerHTML=s;this.CalendarContainer.getElementById(\"tmpSelectMonthLayer\").style.display=\"\";};TenDaysCalendar.prototype.selectYear=function(strYear){if(strYear.match(/\\D/)!=null)return;var m=(strYear)?strYear:new Date().getFullYear();if(m<1000||m>9999)return;var n=m-1;if(n<1000)n=1000;if(n+100>9999)n=9900;var s='';s+='<table border=0 cellspacing=0 cellpadding=0 class=\"year year-size\">';if(this.ScrollYearOnClick){s+='<tr><td align=center height=3 onmouseout=\"stopScroll()\"'+'onclick=\"return false\" onmousedown=\"startScroll(this,true)\" onmouseup=\"stopScroll()\" style=\"cursor:pointer\" title=\"向上滚动年份\"><span class=\"prev-year-button\" ><\/span><\/td><\/tr>';}\nelse{s+='<tr><td align=center height=3 style=\"cursor:pointer\" onmouseover=\"startScroll(this,true)\" onmouseout=\"stopScroll()\"'+'onclick=\"return false\" title=\"向上滚动年份\"><span class=\"prev-year-button\" ><\/span><\/td><\/tr>';}\nfor(var i=n;i<n+3;i++){s+='<tr><td class='+(i==parseInt(strYear,10)?'selectedYM':'normalYM')+' style=\"cursor:pointer\" onmouseover=\"mOver(this)\" onmouseout=\"mOut(this)\" onmousedown=\"setYear('+i+')\">'+i+'年'+'<\/td><\/tr>';}\nif(this.ScrollYearOnClick){s+='<tr><td align=center height=3 style=\"cursor:pointer\" onmouseout=\"stopScroll()\"'+'onclick=\"return false\" onmousedown=\"startScroll(this,false)\" onmouseup=\"stopScroll()\" title=\"向下滚动年份\"><span class=\"next-year-button\" ><\/span><\/td><\/tr>';}\nelse{s+='<tr><td align=center height=3 style=\"cursor:pointer\" onmouseover=\"startScroll(this,false)\" onmouseout=\"stopScroll()\"'+'onclick=\"return false\" title=\"向下滚动年份\"><span class=\"next-year-button\" ><\/span><\/td><\/tr>';}\ns+='<\/table>';this.CalendarContainer.getElementById(\"tmpSelectYearLayer\").innerHTML=s;this.CalendarContainer.getElementById(\"tmpSelectYearLayer\").style.display=\"\";};TenDaysCalendar.prototype.goPrevYear=function(){if(this.year>1000&&this.year<10000){this.year--;this.writeCalendar();}};TenDaysCalendar.prototype.goNextYear=function(){if(this.year>999&&this.year<9999){this.year++;this.writeCalendar();}};TenDaysCalendar.prototype.goPrevMonth=function(){if(this.month>1){this.month--}else{this.year--;this.month=12;}\nthis.writeCalendar();};TenDaysCalendar.prototype.goNextMonth=function(){if(this.month==12){this.year++;this.month=1}else{this.month++}\nthis.writeCalendar();};TenDaysCalendar.prototype.dayOfTenDays=function(date){var tenday;if(date<11){tenday=1;}else if(date<21){tenday=2;}else{tenday=3;}\nreturn tenday;};TenDaysCalendar.prototype.calendarCellClick=function(n){if(this.displayObject){this.year=this.CalendarValues[n].year;this.month=this.CalendarValues[n].month;this.tenDay=this.CalendarValues[n].tenday;this.displayObject.value=this.CalendarValues[n].calendarText;this.dateValue=this.CalendarValues[n].calendarValue;var tenday=new TenDay(this.year,this.month,this.tenday);this.currentValue=tenday;this.oldValue=tenday;this.outerValue=tenday;this.close();this.displayObject.blur();var scope=this;setTimeout(function(){scope.onRefresh.fire();},10);}else{this.close();alert(\"您所要输出的控件对象并不存在！\");}\nif(this.followcodes!=\"\"){eval(this.followcodes);}};TenDaysCalendar.prototype.calendarCellDblClick=function(n){this.calendarCellClick(n);};TenDaysCalendar.prototype.setDateStyle=function(datestyle){this.datestyle=datestyle;this.writeIframe();};TenDaysCalendar.prototype.setateValueStyle=function(dateValueStyle){this.dateValueStyle=dateValueStyle;this.writeIframe();};TenDaysCalendar.prototype.setTitleStyle=function(TitleStyle){this.TitleStyle=TitleStyle;this.writeIframe();};TenDaysCalendar.prototype.setMonth=function(month){if(isNaN(month)||month<=0||month>12)return;this.month=parseInt(month,10);this.writeCalendar();};TenDaysCalendar.prototype.setYear=function(year){if(isNaN(year)||year<=999||year>9999)return;this.year=parseInt(year,10);this.writeCalendar();};TenDaysCalendar.prototype.setYearMonth=function(year,month){if(isNaN(year)||year<=999||year>9999)return;if(isNaN(month)||month<=0||month>12)return;this.year=parseInt(year,10);this.month=parseInt(month,10);this.writeCalendar();};TenDaysCalendar.prototype.correctPosition=function(){var CalendarWindow=this.frame;if(CalendarWindow.bDrag){var x=event.clientX-CalendarWindow.datelayerx;var y=event.clientY-CalendarWindow.datelayery;this.Style.left=(x<0?0:x)+\"px\";this.Style.top=(y<0?0:y)+\"px\";}};TenDaysCalendar.prototype.MouseOver=function(){this.tmpTdClass=this.className;this.className=\"mouseover-tenday\";};TenDaysCalendar.prototype.MouseOut=function(){this.className=this.tmpTdClass;};","js/freequery/control/DateCalendarWrapper.js":"\nvar Module2=jsloader.resolve(\"freequery.widget.Module2\");var domutils=jsloader.resolve(\"freequery.lang.domutils\");var UUIDGenerator=jsloader.resolve(\"freequery.thirdparty.UUIDGenerator\");var DateCalendarWrapper=function(container){var uuid=new UUIDGenerator();var CalendarStr=uuid.id;eval('if (!window.Calendar'+CalendarStr+') { '\n+'window.Calendar'+CalendarStr+' = new DateCalendar(container,\"Calendar'+CalendarStr+'\"); '\n+'window.Calendar'+CalendarStr+'.owner = this; '\n+'this.Calendar = window.Calendar'+CalendarStr+'}');}\nlang.extend(DateCalendarWrapper,Module2);DateCalendarWrapper.prototype.destroy=function(){if(this.Calendar){this.Calendar.destroy();this.Calendar=null;}\nDateCalendarWrapper.superclass.destroy.call(this);};var DateCalendar=function(container,varname){this.parent=container;this.ObjectName=\"parent.\"+varname;this.ObjectWindow=\"window.\"+varname;this.frameId=this.ObjectName+\".DateCalendarLayer\";this.frame=document.getElementById(this.frameId);if(!this.frame){this.initFrame();}\nthis.titleDiv=null;this.titleCantainer=null;if(!this.titleDiv){this.initTitleDiv();}\nthis.isWrite=false;this.bmoveable=false;this.datestyle=\"yyyy 年 MM 月 dd 日\";this.dateValueStyle=\"yyyy-MM-dd\";this.TitleStyle=\"yyyy年MM月dd日 周W\";this.cellWidth=21;this.cellHeight=21;this.toolBarHeight=21;this.dragBarHeight=22;this.CalendarContainer=window.frames[this.ObjectName+\".DateCalendarLayer\"].document;this.Style=this.frame.style;this.year=new Date().getFullYear();this.month=new Date().getMonth()+1;this.date=new Date().getDate();this.CalendarValues=new Array(42);this.CalendarCell=new Array(42);this.outerValue=\"\";this.oldValue=\"\";this.currentValue=\"\";this.displayObject=null;this.dateValue=\"\";this.srcButton=null;this.MonthinMM=this.datestyle.indexOf(\"MM\")>=0?true:false;this.Dateindd=this.datestyle.indexOf(\"dd\")>=0?true:false;this.followcodes=\"\";this.ScrollYearOnClick=true;this.onRefresh=new CustomEvent(\"editChange\",this);this.ifCheckEditChange=true;};lang.extend(DateCalendar,Module2);DateCalendar.prototype.destroy=function(){if(this.Style){this.Style=null;delete this.Style;}\nif(this.srcButton){this.srcButton=null;}\nif(this.displayObject){this.displayObject=null;}\nif(this.CalendarValues){this.CalendarValues=null;delete this.CalendarValues;}\nif(this.titleDiv){document.body.removeChild(this.titleDiv);if(this.titleCantainer){this.titleDiv.removeChild(this.titleCantainer);this.titleCantainer.innerHTML=\"\";delete this.titleCantainer;}\ndomutils.destroyNode(this.titleDiv);}\nthis.onRefresh=null;if(this.CalendarCell){if(this.CalendarContainer){for(var id in this.CalendarCell){this.CalendarCell[id].innerHTML=\"\";delete this.CalendarCell[id];}\nthis.CalendarContainer.writeln('');this.CalendarContainer.close();delete this.CalendarContainer;}\nthis.CalendarCell=null;}\nif(this.frame){document.body.removeChild(this.frame);this.frame.src=\"about:blank\";domutils.destroyNode(this.frame);delete this.frame;}\nif(this.owner){this.owner=null;delete this.owner;}\nif(this.parent)\nthis.parent.innerHTML=\"\";DateCalendar.superclass.destroy.call(this);};DateCalendar.prototype.initFrame=function(){this.frame=document.createElement(\"iframe\");this.frame.setAttribute(\"id\",this.frameId);this.frame.setAttribute(\"name\",this.frameId);this.frame.className=\"multicalendar-iframe\";this.frame.setAttribute(\"scrolling\",\"no\");this.frame.setAttribute(\"onmouseout\",\"\"+this.ObjectName+\".correctPosition()\");this.frame.style.display=\"none\";document.body.appendChild(this.frame);};DateCalendar.prototype.initTitleDiv=function(){this.titleDiv=document.createElement(\"div\");this.titleDiv.setAttribute(\"id\",this.ObjectName+\".DateCalendarTitle\");this.titleDiv.setAttribute(\"name\",this.ObjectName+\".DateCalendarTitle\");this.titleDiv.className=\"multicalendar-title\";this.titleDiv.style.display=\"none\";document.body.appendChild(this.titleDiv);var divleft=document.createElement(\"span\");divleft.className=\"multicalendar-title-left\";this.titleCantainer=document.createElement(\"span\");this.titleCantainer.className=\"multicalendar-title-center\";var divright=document.createElement(\"span\");divright.className=\"multicalendar-title-right\";this.titleDiv.appendChild(divleft);this.titleDiv.appendChild(this.titleCantainer);this.titleDiv.appendChild(divright);}\nDateCalendar.prototype.writeIframe=function(){if(this.cellWidth<21)this.cellWidth=21;if(this.cellHeight<20)this.cellHeight=20;var strFrame;strFrame+='<style>';with(this){strFrame+='*{font-family:宋体;}';strFrame+='DIV.calendar-panel-size {width:'+(getCalendarWidth())+';height:'+(getCalendarHeight()+2)+';}';strFrame+='TABLE.calendar-main-size {width:'+(getCalendarWidth())+'px;height:'+getCalendarHeight()+'px;}';strFrame+='.dragbar-size{width:'+(getCalendarWidth()-2)+';height:'+getDragBarHeight()+';}';strFrame+='.head-size{width:'+(getCalendarWidth()-2)+';height:'+getToolBarHeight()+';}';strFrame+='table.year-size{width:'+(getYearWidth())+'px;height:120px;}';strFrame+='span.month-size{left: '+(getYearWidth()-(getMonthWidth()/2)+42)+'px;}';strFrame+='table.month-size{width:'+(getMonthWidth()*2)+'px;height:100px;}';strFrame+='calendarcell-size{width:'+(getCalendarWidth()-2)+';height:'+(getBodyHeight())+';}';}\nstrFrame+='<\/style>';strFrame+='<scr'+'ipt>';strFrame+='     var datelayerx,datelayery; /*存放日历控件的鼠标位置*/      ';strFrame+='     var bDrag=false; ';strFrame+='     var DateLayer='+this.ObjectName+'.Style;    ';strFrame+='     document.onmousemove=function(){/*在鼠标移动事件中，如果开始拖动日历，则移动日历*/     ';strFrame+='      if(bDrag){     ';strFrame+='       DateLayer.left = (parseInt(DateLayer.left,10)+window.event.clientX-datelayerx)+\"px\";/*由于每次移动以后鼠标位置都恢复为初始的位置，因此写法与div中不同*/     ';strFrame+='       DateLayer.top = (parseInt(DateLayer.top,10)+window.event.clientY-datelayery)+\"px\";    ';strFrame+='      }';strFrame+='     }; ';strFrame+='     function DragStart(){  /*开始日历拖动*/     ';strFrame+='      if(window.event.button== 1){   /*值1表示鼠标左键*/ ';strFrame+='       datelayerx=window.event.clientX;  ';strFrame+='       datelayery=window.event.clientY;  ';strFrame+='       bDrag=true;  ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function DragEnd(){  /*结束日历拖动*/';strFrame+='      bDrag=false;   ';strFrame+='     }  ';strFrame+='     document.onmousedown=function(){ /*点击的时候关闭年份和月份的选择列表*/ ';strFrame+='      var obj=document.getElementById(\"tmpSelectYearLayer\");   ';strFrame+='      if(!bFromYear&&event.srcElement!=document.getElementById(\"CalendarYearHead\")&&obj.style.display!=\"none\"){ ';strFrame+='       obj.style.display=\"none\";bYearListOpening=true  ';strFrame+='      }';strFrame+='      obj=document.getElementById(\"tmpSelectMonthLayer\");      ';strFrame+='      if(event.srcElement!=document.getElementById(\"CalendarMonthHead\")&&obj.style.display!=\"none\"){     ';strFrame+='       obj.style.display=\"none\";  ';strFrame+='      }';strFrame+='     }; ';strFrame+='     var strTempClass=\"\";    ';strFrame+='     document.oncontextmenu=function(){/*禁止出现右键菜单*/     ';strFrame+='      if(!event.ctrlKey)return false;     ';strFrame+='     }; ';strFrame+='     function mOver(obj){/*年/月选择列表的mouseover处理*/';strFrame+='      strTempClass=obj.className;  ';strFrame+='      obj.className=\"mouseoverYM\"; ';strFrame+='      bYearListOpening=false;  /*为了显示年份列表的时候向上滚动功能的正常使用*/     ';strFrame+='     }  ';strFrame+='     function mOut(obj){/*年/月选择列表的mouseout处理*/  ';strFrame+='      obj.className=strTempClass;  ';strFrame+='     }  ';strFrame+='     function setMonth(iMonth){/*下拉选择月份的处理*/    ';strFrame+='      '+this.ObjectName+'.setMonth(iMonth)      ';strFrame+='     }  ';strFrame+='     function setYear(iYear){/*下拉选择年份的处理*/      ';strFrame+='      '+this.ObjectName+'.setYear(iYear) ';strFrame+='     }  ';strFrame+='     var bScrolling=false;   ';strFrame+='     var bYearListOpening=true; /*这个变量用于控制在刚刚显示年份列表的时候，鼠标处于向上滚动条位置的情况下不要滚动*/    ';strFrame+='     var iScroll=null;';strFrame+='     var bFromYear=false; /*标志为从年份下拉列表处进行了点击，以便不要关闭年份列表*/';strFrame+='     function scrollYear(bUp){/*滚动年份列表*/    ';strFrame+='      var oTable=document.getElementById(\"tmpSelectYearLayer\").childNodes[0];';strFrame+='      if(bUp){';strFrame+='       var iMin=parseInt(oTable.rows[1].cells[0].innerHTML.replace(/\\\\D/g,\\'\\'),10);  ';strFrame+='       if(iMin>1000){      ';strFrame+='        oTable.deleteRow(oTable.rows.length-2);';strFrame+='        var oTd=oTable.insertRow(1).insertCell(0);    ';strFrame+='        oTd.innerHTML=(iMin-1).toString()+\"年\";      ';strFrame+='        oTd.onmouseover=Function(\"mOver(this)\");      ';strFrame+='        oTd.onmouseout=Function(\"mOut(this)\"); ';strFrame+='        oTd.onmousedown=Function(\"setYear(\"+(iMin-1).toString()+\")\");      ';strFrame+='        oTd.className=(iMin-1=='+this.ObjectName+'.year?\"selectedYM\":\"normalYM\");';strFrame+='        if(bScrolling){   ';strFrame+='         window.setTimeout(\"scrollYear(true)\", 300); ';strFrame+='        }   ';strFrame+='       }     ';strFrame+='      }else{  ';strFrame+='       var iMax=parseInt(oTable.rows[oTable.rows.length-2].cells[0].innerHTML.replace(/\\\\D/g,\\'\\'),10);    ';strFrame+='       if(iMax<=9999){     ';strFrame+='        var oTd=oTable.insertRow(oTable.rows.length-1).insertCell(0);      ';strFrame+='        oTable.deleteRow(1);     ';strFrame+='        oTd.innerHTML=(iMax+1).toString()+\"年\";      ';strFrame+='        oTd.onmouseover=Function(\"mOver(this)\");      ';strFrame+='        oTd.onmouseout=Function(\"mOut(this)\"); ';strFrame+='        oTd.onmousedown=Function(\"setYear(\"+(iMax+1).toString()+\")\");      ';strFrame+='        oTd.className=(iMax+1=='+this.ObjectName+'.year?\"selectedYM\":\"normalYM\");';strFrame+='        if(bScrolling){   ';strFrame+='         window.setTimeout(\"scrollYear(false)\", 300);';strFrame+='        }   ';strFrame+='       }     ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function startScroll(oTd,bUp){ ';strFrame+='      bFromYear=true;';strFrame+='      if(!bYearListOpening){';strFrame+='       bScrolling=true;    ';strFrame+='       scrollYear(bUp);    ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function stopScroll(){  ';strFrame+='      bYearListOpening=false;      ';strFrame+='      bFromYear=false;      ';strFrame+='      bScrolling=false;     ';strFrame+='      if(iScroll){   ';strFrame+='       clearTimeout(iScroll);     ';strFrame+='      }';strFrame+='     }  ';strFrame+='     function mouseOverOfCell(cell,ev){  /*鼠标经过日期单元格*/';strFrame+='      '+this.ObjectName+'.MouseOver(cell,ev);   ';strFrame+='     }  ';strFrame+='     function mouseOutOfCell(cell){  /*鼠标离开日期单元格*/';strFrame+='      '+this.ObjectName+'.MouseOut(cell);   ';strFrame+='     }  ';strFrame+='  <\/scr'+'ipt>';with(this){strFrame+='<div class=\"calendar-panel-size\" onselectstart=\"return false\">';strFrame+='  <div style=\"z-index:9999;position: absolute; left:0; top:0;\" onselectstart=\"return false\">  ';strFrame+='   <span id=tmpSelectYearLayer class=\"year\" style=\"display: none;\"><\/span> ';strFrame+='   <span id=tmpSelectMonthLayer class=\"month month-size\" style=\"display: none;\"><\/span>     ';strFrame+='   <table border=0 cellspacing=0 cellpadding=0 class=\"calendar-main-size main mainbackgroundcolor\">     ';strFrame+='    <tr>';strFrame+='     <td class=\"head-size mainbackgroundcolor\"> ';strFrame+='      <table class=\"head-size mainbackgroundcolor\" border=0 cellspacing=0 cellpadding=0 > ';strFrame+='       <tr align=center >     ';strFrame+='        <td width=19><span class=\"calendar-border-noleft prev-year-tool-button\" title=\"前一年\" onclick=\"'+this.ObjectName+'.goPrevYear()\" ondblclick=\"'+this.ObjectName+'.goPrevYear()\" onfocus=\"this.blur()\" ><span><\/td>';strFrame+='        <td width=19><span class=\"calendar-border-noleft prev-month-tool-button\" title=\"前一月\" onclick=\"'+this.ObjectName+'.goPrevMonth()\" ondblclick=\"'+this.ObjectName+'.goPrevMonth()\" onfocus=\"this.blur()\" ><span><\/td> ';strFrame+='        <td width='+getYearWidth()+' align=right class=\"calendarhead\" onmouseover=\"className=\\'mouseover\\'\" onmouseout=\"className=\\'calendarhead\\'\" onclick=\"'+this.ObjectName+'.selectYear(this.innerHTML.substring(0,4))\" title=\"点击这里选择年份\" id=CalendarYearHead><\/td>    ';strFrame+='        <td width='+getMonthWidth()+' align=left class=\"calendarhead\" onmouseover=\"className=\\'mouseover\\'\" onmouseout=\"className=\\'calendarhead\\'\" onclick=\"'+this.ObjectName+'.selectMonth(this.innerHTML.replace(/\\\\D/g,\\'\\'))\" title=\"点击这里选择月份\" id=CalendarMonthHead><\/td> ';strFrame+='        <td width=19><span class=\"calendar-border-noleft calendar-border-left next-month-tool-button\" title=\"后一月\" onclick=\"'+this.ObjectName+'.goNextMonth()\" ondblclick=\"'+this.ObjectName+'.goNextMonth()\" onfocus=\"this.blur()\" ><span><\/td>  ';strFrame+='        <td width=19><span class=\"calendar-border-noleft next-year-tool-button\" title=\"后一年\" onclick=\"'+this.ObjectName+'.goNextYear()\" ondblclick=\"'+this.ObjectName+'.goNextYear()\" onfocus=\"this.blur()\" ><span><\/td>';strFrame+='       <\/tr>     ';strFrame+='      <\/table>    ';strFrame+='     <\/td>   ';strFrame+='    <\/tr>     ';strFrame+='    <tr >';strFrame+='     <td class=\"dragbar-size\" align=center>    ';strFrame+='      <table class=\"dragbar-size dragbar\"  align=center border=0 cellspacing=0 cellpadding=0 '+(bmoveable?'onmousedown=\"DragStart()\" onmouseup=\"DragEnd()\"':'')+' style=\"cursor:'+(bmoveable?'move':'default')+'\"> ';strFrame+='       <tr align=center valign=middle>   ';strFrame+='        <td class=dragbar>日<\/td> ';strFrame+='        <td class=dragbar>一<\/td> ';strFrame+='        <td class=dragbar>二<\/td> ';strFrame+='        <td class=dragbar>三<\/td> ';strFrame+='        <td class=dragbar>四<\/td> ';strFrame+='        <td class=dragbar>五<\/td> ';strFrame+='        <td class=dragbar>六<\/td> ';strFrame+='       <\/tr>     ';strFrame+='      <\/table>    ';strFrame+='     <\/td>   ';strFrame+='    <\/tr>     ';strFrame+='    <tr>';strFrame+='     <td class=\"calendarcell-size\" align=center> ';strFrame+='         <table align=center border=0 cellspacing=\"0\" cellpadding=0 class=\"calendarcell calendarcell-size\" >   ';var n=0;for(j=0;j<5;j++){strFrame+='       <tr align=center>  ';for(i=0;i<7;i++){strFrame+='        <td onmouseover=\"mouseOverOfCell(this,event)\" onmouseout=\"mouseOutOfCell(this)\" width='+(cellWidth)+' height='+(cellHeight)+' id=CalendarCell'+n+'><\/td>   ';n++;}\nstrFrame+='       <\/tr> ';}\nstrFrame+='       <tr align=center>     ';for(i=35;i<42;i++)\nstrFrame+='        <td onmouseover=\"mouseOverOfCell(this,event)\" onmouseout=\"mouseOutOfCell(this)\" width='+(cellWidth)+' height='+(cellHeight)+' id=CalendarCell'+i+'><\/td>     ';strFrame+='       <\/tr>     ';strFrame+='         <\/table>    ';strFrame+='       <\/td>   ';strFrame+='    <\/tr>     ';strFrame+='   <\/table>';strFrame+='  <\/div>  ';strFrame+=' <\/div>  ';}\nthis.CalendarContainer=window.frames[this.frameId].document\nthis.CalendarContainer.writeln(strFrame);this.CalendarContainer.close();this.Style.width=this.getCalendarWidth();this.Style.height=this.getCalendarHeight()+6;var head=this.CalendarContainer.getElementsByTagName(\"head\").item(0);var fileref=this.CalendarContainer.createElement(\"link\");fileref.setAttribute(\"rel\",\"stylesheet\");fileref.setAttribute(\"type\",\"text/css\");var cssHref=window.bof_offline_xhr?\"css/bof_merge.css\":jsloader.baseHref+\"css/bof_merge.css.jsp\";fileref.setAttribute(\"href\",cssHref);if(typeof fileref!=\"undefined\"){head.appendChild(fileref);}\nfor(i=0;i<42;i++){this.CalendarCell[i]=this.CalendarContainer.getElementById('CalendarCell'+i);var tempDay=this.CalendarCell[i];tempDay.style.cursor=\"pointer\";tempDay.onclick=Function(this.ObjectWindow+\".calendarCellClick(\"+i+\")\");tempDay.ondblclick=Function(this.ObjectWindow+\".calendarCellDblClick(\"+i+\")\");}\nthis.isWrite=true;};DateCalendar.prototype.showCalendar=function(srcButton,displayObject){if(!this.isWrite){this.writeIframe();}\nvar selt=this;var obj;var calendarButton;this.followcodes=\"\";if(displayObject){calendarButton=displayObject;if(typeof(displayObject)==\"object\")obj=displayObject\nelse if(typeof(displayObject)==\"string\")this.followcodes=displayObject;}else{calendarButton=srcButton;}\nvar th=srcButton;var calendarStyle=this.Style;var ttop=calendarButton.offsetTop;var thei=calendarButton.offsetHeight;var twid=calendarButton.offsetWidth;var tleft=calendarButton.offsetLeft;var ttyp=calendarButton.type;while(calendarButton=calendarButton.offsetParent){ttop+=calendarButton.offsetTop;tleft+=calendarButton.offsetLeft;}\nvar cheight=this.getCalendarHeight();if(document.body.clientHeight>cheight+thei&&document.body.clientHeight-(ttop-document.body.scrollTop)<cheight+thei&&ttop-document.body.scrollTop>cheight){calendarStyle.top=ttop-cheight-1;}else{calendarStyle.top=ttop+thei+1;}\ncalendarStyle.left=tleft;this.displayObject=!obj?th:obj;this.srcButton=!obj?null:th;var tempValue=this.getValueToDate(this.dateValue);this.outerValue=tempValue;this.oldValue=tempValue;this.currentValue=tempValue;if(tempValue!=\"\"){this.year=tempValue.getFullYear();this.month=tempValue.getMonth()+1;this.date=tempValue.getDate();}else{this.year=new Date().getFullYear();this.month=new Date().getMonth()+1;this.date=new Date().getDate();}\nthis.writeCalendar();calendarStyle.display='';this.addEvent(document,\"click\",function(){with(window.event)\nif(srcElement!=selt.srcButton&&srcElement!=selt.displayObject){selt.close();}});};DateCalendar.prototype.writeCalendar=function(){if(!this.CalendarContainer.getElementById(\"CalendarYearHead\"))\nreturn;var selt=this;var yy=this.year;var mm=this.month;this.CalendarContainer.getElementById(\"CalendarYearHead\").innerHTML=yy+\"年\";this.CalendarContainer.getElementById(\"CalendarMonthHead\").innerHTML=mm+\"月\";var day1=1;var day2=1;var firstday=new Date(yy,mm-1,1).getDay();var year,month;for(i=0;i<firstday;i++){year=mm==1?yy-1:yy;month=mm==1?12:mm-1;this.CalendarValues[i]=new CalendarDataObject(year,month,this.getDaysOfMonth(year,month)-firstday+i+1);}\nfor(i=firstday;day1<this.getDaysOfMonth(yy,mm)+1;i++){this.CalendarValues[i]=new CalendarDataObject(yy,mm,day1);day1++;}\nfor(i=firstday+this.getDaysOfMonth(yy,mm);i<42;i++){year=mm==12?yy+1:yy;month=mm==12?1:mm+1;this.CalendarValues[i]=new CalendarDataObject(year,month,day2);day2++;}\nfor(i=0;i<42;i++)\n{var tempDay=this.CalendarCell[i];if(this.outerValue&&this.CalendarValues[i].equals(this.outerValue)){if(i<8&&this.CalendarValues[i].day>20||i>=28&&this.CalendarValues[i].day<15){tempDay.className=\"selectedgrayday\"}else{tempDay.className=\"selectedday\";}}else if(this.CalendarValues[i].equals(new Date())){if(i<8&&this.CalendarValues[i].day>20||i>=28&&this.CalendarValues[i].day<15){tempDay.className=\"graytoday\"}else{tempDay.className=\"today\";}}else{if(i<8&&this.CalendarValues[i].day>20||i>=28&&this.CalendarValues[i].day<15){tempDay.className=\"grayday\"}else{tempDay.className=\"normalday\";}}\ntempDay.innerHTML=this.CalendarValues[i].day;tempDay.dec=this.CalendarValues[i].calendarTitle;tempDay.title=tempDay.dec;}\nfunction CalendarDataObject(year,month,day){this.year=year;this.month=month;this.day=day;var mm=month;var n=day;if(month<10&&selt.MonthinMM)mm=\"0\"+mm;if(day<10&&selt.Dateindd)n=\"0\"+n;this.calendarValue=selt.dateValueStyle.replace((selt.Dateindd?\"dd\":\"d\"),n).replace(\"yyyy\",year).replace((selt.MonthinMM?\"MM\":\"M\"),mm);this.calendarText=selt.datestyle.replace((selt.Dateindd?\"dd\":\"d\"),n).replace(\"yyyy\",year).replace((selt.MonthinMM?\"MM\":\"M\"),mm);this.calendarTitle=selt.TitleStyle.replace((selt.Dateindd?\"dd\":\"d\"),n).replace(\"yyyy\",year).replace((selt.MonthinMM?\"MM\":\"M\"),mm).replace(\"W\",selt.getDaysOfWeek(this.year,this.month,this.day));this.equals=function(eDate){try{return this.year==eDate.getFullYear()&&this.month==eDate.getMonth()+1&&this.day==eDate.getDate();}\ncatch(e){return false}}}};DateCalendar.prototype.getDaysOfMonth=function(year,month){return((new Date(year,month,0)).getDate());};DateCalendar.prototype.getDaysOfWeek=function(year,month,day){var weekName;var tempDate=new Date(year,month-1,day);switch(tempDate.getDay()){case 0:weekName=\"日\";break;case 1:weekName=\"一\";break;case 2:weekName=\"二\";break;case 3:weekName=\"三\";break;case 4:weekName=\"四\";break;case 5:weekName=\"五\";break;case 6:weekName=\"六\";break;default:weekName=\"日\";break;}\nreturn weekName;};DateCalendar.prototype.onEditChange=function(){if(this.ifCheckEditChange){var tempText=this.getText();if(tempText!=\"\"){if(!this.isValidText(tempText)){alert(\"输入日期格式不正确，请重新输入！\");this.displayObject.value=this.getDateToText(this.oldValue);this.dateValue=this.getDateToValue(this.oldValue);return;}else{var tempDate=this.getTextToDate(tempText);var tempValue=this.getDateToValue(tempDate);this.year=tempDate.getFullYear();this.month=tempDate.getMonth()+1;this.date=tempDate.getDate();this.dateValue=tempValue;this.outerValue=tempDate;this.oldValue=tempDate;this.currentValue=tempDate;this.onRefresh.fire();this.writeCalendar();}}else{this.setValue(\"\");}}};DateCalendar.prototype.isValidDate=function(value){var myRegExp=/^((((1[6-9]|[2-9]\\d)\\d{2})-(0?[13578]|1[02])-(0?[1-9]|[12]\\d|3[01]))|(((1[6-9]|[2-9]\\d)\\d{2})-(0?[13456789]|1[012])-(0?[1-9]|[12]\\d|30))|(((1[6-9]|[2-9]\\d)\\d{2})-0?2-(0?[1-9]|1\\d|2[0-8]))|(((1[6-9]|[2-9]\\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))-0?2-29-))$/;return myRegExp.test(value);};DateCalendar.prototype.isValidText=function(Text){var myRegExp=/^((((1[6-9]|[2-9]\\d)\\d{2})\\s(\\u5e74)\\s(0?[13578]|1[02])\\s(\\u6708)\\s(0?[1-9]|[12]\\d|3[01])\\s(\\u65e5))|(((1[6-9]|[2-9]\\d)\\d{2})\\s(\\u5e74)\\s(0?[13456789]|1[012])\\s(\\u6708)\\s(0?[1-9]|[12]\\d|30)\\s(\\u65e5))|(((1[6-9]|[2-9]\\d)\\d{2})\\s(\\u5e74)\\s0?2\\s(\\u6708)\\s(0?[1-9]|1\\d|2[0-8])\\s(\\u65e5))|(((1[6-9]|[2-9]\\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))\\s(\\u5e74)\\s0?2\\s(\\u6708)\\s29\\s(\\u65e5)))$/;return myRegExp.test(Text);};DateCalendar.prototype.getDateToValue=function(Date){var tempDate=Date;var result=\"\";if(tempDate!=\"\"&&tempDate){var year=tempDate.getFullYear();var month=tempDate.getMonth()+1;var day=tempDate.getDate();if(month<10&&this.MonthinMM)month=\"0\"+month;if(day<10&&this.Dateindd)day=\"0\"+day;result=this.dateValueStyle.replace((this.Dateindd?\"dd\":\"d\"),day).replace(\"yyyy\",year).replace((this.MonthinMM?\"MM\":\"M\"),month);}\nreturn result;};DateCalendar.prototype.getDateToText=function(Date){var tempDate=Date;var result=\"\";if(tempDate!=\"\"&&tempDate){var year=tempDate.getFullYear();var month=tempDate.getMonth()+1;var day=tempDate.getDate();if(month<10&&this.MonthinMM)month=\"0\"+month;if(day<10&&this.Dateindd)day=\"0\"+day;result=this.datestyle.replace((this.Dateindd?\"dd\":\"d\"),day).replace(\"yyyy\",year).replace((this.MonthinMM?\"MM\":\"M\"),month);}\nreturn result;};DateCalendar.prototype.getTextToDate=function(Text){var reg=new RegExp(\"^\"+this.datestyle.replace((this.Dateindd?\"dd\":\"d\"),\"(\\\\d{1,2})\").replace(\"yyyy\",\"(\\\\d{4})\").replace((this.MonthinMM?\"MM\":\"M\"),\"(\\\\d{1,2})\")+\"$\");var r=Text.match(reg);var date=null;if(r!=null){r[1]=parseInt(r[1],10);r[2]=parseInt(r[2],10);r[3]=parseInt(r[3],10);date=new Date(r[1],r[2]-1,r[3]);}else{date=\"\";}\nreturn date;};DateCalendar.prototype.getValueToDate=function(value){var reg=new RegExp(\"^\"+this.dateValueStyle.replace((this.Dateindd?\"dd\":\"d\"),\"(\\\\d{1,2})\").replace(\"yyyy\",\"(\\\\d{4})\").replace((this.MonthinMM?\"MM\":\"M\"),\"(\\\\d{1,2})\")+\"$\");var r=value.match(reg);var date=null;if(r!=null){r[1]=parseInt(r[1],10);r[2]=parseInt(r[2],10);r[3]=parseInt(r[3],10);date=new Date(r[1],r[2]-1,r[3]);}else{date=\"\";}\nreturn date;};DateCalendar.prototype.addEvent=function(obj,eventName,oCallback){var ret;ret=obj.attachEvent(\"on\"+eventName,oCallback);return ret;};DateCalendar.prototype.close=function(){if(this.CalendarContainer){this.CalendarContainer.getElementById(\"tmpSelectYearLayer\").style.display=\"none\";this.CalendarContainer.getElementById(\"tmpSelectMonthLayer\").style.display=\"none\";this.Style.display=\"none\";}};DateCalendar.prototype.getText=function(){return this.displayObject.value;};DateCalendar.prototype.getValue=function(){var date=this.getTextToDate(this.getText());var value=this.getDateToValue(date);return value+\"\";};DateCalendar.prototype.setText=function(text){if(this.displayObject){this.displayObject.value=text;this.onEditChange();}else{alert(\"您所要输出的控件对象并不存在！\");}\nif(this.followcodes!=\"\"){eval(this.followcodes);}};DateCalendar.prototype.setValue=function(value){var tempdate=this.getValueToDate(value);var temptext=this.getDateToText(tempdate);this.displayObject.value=temptext;this.dateValue=value;this.outerValue=tempdate;this.oldValue=tempdate;this.currentValue=tempdate;};DateCalendar.prototype.setReadOnly=function(readonly){if(readonly){this.ifCheckEditChange=false;}else{this.ifCheckEditChange=true;}\nthis.displayObject.readOnly=readonly;};DateCalendar.prototype.getReadOnly=function(){return this.displayObject.readOnly;};DateCalendar.prototype.setScrollYearOnClick=function(scoll){this.ScrollYearOnClick=scoll;};DateCalendar.prototype.getScrollYearOnClick=function(){return this.ScrollYearOnClick;};DateCalendar.prototype.getCalendarWidth=function(){return parseInt(this.cellWidth*7+2+1,10);};DateCalendar.prototype.getCalendarHeight=function(){return this.cellHeight*6+this.toolBarHeight+this.dragBarHeight+2+1;};DateCalendar.prototype.getYearWidth=function(){return parseInt((this.getCalendarWidth()-21-21-20-20-2)*0.58,10)+4;};DateCalendar.prototype.getMonthWidth=function(){return parseInt((this.getCalendarWidth()-21-21-20-20-2)*0.42,10);};DateCalendar.prototype.getToolBarHeight=function(){return this.toolBarHeight;};DateCalendar.prototype.getDragBarHeight=function(){return this.dragBarHeight;};DateCalendar.prototype.getBodyHeight=function(){return this.cellHeight*6+1;};DateCalendar.prototype.selectMonth=function(strMonth){if(strMonth.match(/\\D/)!=null)return;var m=(strMonth)?strMonth:new Date().getMonth()+1;var s='';var currentMonth=1;s+='<table border=0 cellspacing=0 cellpadding=0 class=\"month month-size\">';for(var i=1;i<=6;i++){s+='<tr>';for(var j=1;j<=2;j++)\n{s+='<td class='+((currentMonth)==parseInt(strMonth,10)?'selectedYM':'normalYM')+' onmouseover=\"mOver(this)\" onmouseout=\"mOut(this)\" onmousedown=\"setMonth('+(currentMonth)+')\">'+(currentMonth)+'月'+'<\/td>';currentMonth++;}\ns+='<\/tr>';}\ns+='<\/table>';this.CalendarContainer.getElementById(\"tmpSelectMonthLayer\").innerHTML=s;this.CalendarContainer.getElementById(\"tmpSelectMonthLayer\").style.display=\"\";};DateCalendar.prototype.selectYear=function(strYear){if(strYear.match(/\\D/)!=null)return;var m=(strYear)?strYear:new Date().getFullYear();if(m<1000||m>9999)return;var n=m-3;if(n<1000)n=1000;if(n+100>9999)n=9900;var s='';s+='<table border=0 cellspacing=0 cellpadding=0 class=\"year year-size\">';if(this.ScrollYearOnClick){s+='<tr><td align=center height=3 onmouseout=\"stopScroll()\"'+'onclick=\"return false\" onmousedown=\"startScroll(this,true)\" onmouseup=\"stopScroll()\" style=\"cursor:pointer\" title=\"向上滚动年份\"><span class=\"prev-year-button\" ><\/span><\/td><\/tr>';}\nelse{s+='<tr><td align=center height=3 style=\"cursor:pointer\" onmouseover=\"startScroll(this,true)\" onmouseout=\"stopScroll()\"'+'onclick=\"return false\" title=\"向上滚动年份\"><span class=\"prev-year-button\" ><\/span><\/td><\/tr>';}\nfor(var i=n;i<n+8;i++){s+='<tr><td class='+(i==parseInt(strYear,10)?'selectedYM':'normalYM')+' style=\"cursor:pointer\" onmouseover=\"mOver(this)\" onmouseout=\"mOut(this)\" onmousedown=\"setYear('+i+')\">'+i+'年'+'<\/td><\/tr>';}\nif(this.ScrollYearOnClick){s+='<tr><td align=center height=3 style=\"cursor:pointer\" onmouseout=\"stopScroll()\"'+'onclick=\"return false\" onmousedown=\"startScroll(this,false)\" onmouseup=\"stopScroll()\" title=\"向下滚动年份\"><span class=\"next-year-button\" ><\/span><\/td><\/tr>';}\nelse{s+='<tr><td align=center height=3 style=\"cursor:pointer\" onmouseover=\"startScroll(this,false)\" onmouseout=\"stopScroll()\"'+'onclick=\"return false\" title=\"向下滚动年份\"><span class=\"next-year-button\" ><\/span><\/td><\/tr>';}\ns+='<\/table>';this.CalendarContainer.getElementById(\"tmpSelectYearLayer\").innerHTML=s;this.CalendarContainer.getElementById(\"tmpSelectYearLayer\").style.display=\"\";};DateCalendar.prototype.goPrevYear=function(){if(this.year>1000&&this.year<10000){this.year--;this.writeCalendar();}};DateCalendar.prototype.goNextYear=function(){if(this.year>999&&this.year<9999){this.year++;this.writeCalendar();}};DateCalendar.prototype.goPrevMonth=function(){if(this.month>1){this.month--}else{this.year--;this.month=12;}\nthis.writeCalendar();};DateCalendar.prototype.goNextMonth=function(){if(this.month==12){this.year++;this.month=1}else{this.month++}\nthis.writeCalendar();};DateCalendar.prototype.calendarCellClick=function(n){if(this.displayObject){this.year=this.CalendarValues[n].year;this.month=this.CalendarValues[n].month;this.date=this.CalendarValues[n].day;this.displayObject.value=this.CalendarValues[n].calendarText;this.dateValue=this.CalendarValues[n].calendarValue;var date=new Date(this.year,this.month-1,this.date)\nthis.currentValue=date;this.oldValue=date;this.outerValue=date;this.close();this.displayObject.blur();var scope=this;setTimeout(function(){scope.onRefresh.fire();},10);}else{this.close();alert(\"您所要输出的控件对象并不存在！\");}\nif(this.followcodes!=\"\"){eval(this.followcodes);}};DateCalendar.prototype.calendarCellDblClick=function(n){this.calendarCellClick(n);};DateCalendar.prototype.setDateStyle=function(datestyle){this.datestyle=datestyle;this.writeIframe();};DateCalendar.prototype.setDateValueStyle=function(dateValueStyle){this.dateValueStyle=dateValueStyle;this.writeIframe();};DateCalendar.prototype.setTitleStyle=function(TitleStyle){this.TitleStyle=TitleStyle;this.writeIframe();};DateCalendar.prototype.setMonth=function(month){if(isNaN(month)||month<=0||month>12)return;this.month=parseInt(month,10);this.writeCalendar();};DateCalendar.prototype.setYear=function(year){if(isNaN(year)||year<=999||year>9999)return;this.year=parseInt(year,10);this.writeCalendar();};DateCalendar.prototype.setYearMonth=function(year,month){if(isNaN(year)||year<=999||year>9999)return;if(isNaN(month)||month<=0||month>12)return;this.year=parseInt(year,10);this.month=parseInt(month,10);this.writeCalendar();};DateCalendar.prototype.correctPosition=function(){var CalendarWindow=this.frame;if(CalendarWindow.bDrag){var x=event.clientX-CalendarWindow.datelayerx;var y=event.clientY-CalendarWindow.datelayery;this.Style.left=(x<0?0:x)+\"px\";this.Style.top=(y<0?0:y)+\"px\";}};DateCalendar.prototype.MouseOver=function(cell,ev){};DateCalendar.prototype.MouseOut=function(cell){};","js/freequery/thirdparty/UUIDGenerator.js":"\n﻿var Module2=jsloader.resolve(\"freequery.widget.Module2\");var UUIDGenerator=function(){this.id=this.createUUID();}\nUUIDGenerator.prototype.valueOf=function(){return this.id;}\nUUIDGenerator.prototype.toString=function(){return this.id;}\nUUIDGenerator.prototype.createUUID=function(){var dg=new Date(1582,10,15,0,0,0,0);var dc=new Date();var t=dc.getTime()-dg.getTime();var tl=this.getIntegerBits(t,0,31);var tm=this.getIntegerBits(t,32,47);var thv=this.getIntegerBits(t,48,59)+'1';var csar=this.getIntegerBits(this.rand(4095),0,7);var csl=this.getIntegerBits(this.rand(4095),0,7);var n=this.getIntegerBits(this.rand(8191),0,7)+\nthis.getIntegerBits(this.rand(8191),8,15)+\nthis.getIntegerBits(this.rand(8191),0,7)+\nthis.getIntegerBits(this.rand(8191),8,15)+\nthis.getIntegerBits(this.rand(8191),0,15);return tl+tm+thv+csar+csl+n;}\nUUIDGenerator.prototype.getIntegerBits=function(val,start,end){var base16=this.returnBase(val,16);var quadArray=new Array();var quadString='';var i=0;for(i=0;i<base16.length;i++){quadArray.push(base16.substring(i,i+1));}\nfor(i=Math.floor(start/4);i<=Math.floor(end/4);i++){if(!quadArray[i]||quadArray[i]=='')quadString+='0';else quadString+=quadArray[i];}\nreturn quadString;}\nUUIDGenerator.prototype.returnBase=function(number,base){return(number).toString(base).toUpperCase();}\nUUIDGenerator.prototype.rand=function(max){return Math.floor(Math.random()*(max+1));}","popowner.html":"<head>\r\n\t<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\r\n\t<base href=\"http://server:port/\">\r\n\t<style type=\"text/css\">\r\n\t\t.popupMenuPane {\r\n\t\t\tborder-width: 1px;\r\n\t\t\tborder-style: solid;\r\n\t\t\tborder-color: #002D96;\r\n\t\t\tbackground: #F6F6F6;\r\n\t\t\tpadding: 1px 1px 1px 1px;\r\n\t\t\tbackground-image: url(img/jsxmenu/office_xp_menu_left.gif);\r\n\t\t\tbackground-repeat: repeat-y;\r\n\t\t\tposition: absolute;\r\n\t\t\tz-index: 999;\r\n\t\t\toverflow: visible;\r\n\t\t\tleft: 100px;\r\n\t\t\ttop: 100px;\r\n\t\t}\r\n\t\t\r\n\t\t.popupMenuItemPane {\r\n\t\t\tpadding: 6px 6px 3px 3px;\r\n\t\t\theight: 18px;\r\n\t\t\twidth: 150px;\r\n\t\t}\r\n\t\t\r\n\t\t.popupMenuItemOver {\r\n\t\t\tborder: solid 1px #161B7E;\r\n\t\t\tbackground: #DCEEBD;\r\n\t\t\tpadding: 5px 5px 2px 2px;\r\n\t\t\theight: 18px;\r\n\t\t\twidth: 150px;\r\n\t\t}\r\n\t\t\r\n\t\t.popupMenuItemIcon {\r\n\t\t\tmargin-left: 3px;\r\n\t\t\tmargin-right: 10px;\r\n\t\t\twidth: 11px;\r\n\t\t\theight: 14px;\r\n\t\t}\r\n\t\t\r\n\t\t.popupMenuItemTextSpan {\r\n\t\t\tcursor: default;\r\n\t\t\tfont-size: 12px;\r\n\t\t\tvertical-align: middle;\r\n\t\t}\r\n\t\t\r\n\t\t.popupMenuOver {\r\n\t\t\tborder: solid 1px #161B7E;\r\n\t\t\tbackground: #DCEEBD;\r\n\t\t\tcolor: #000000;\r\n\t\t\tfont-size: 12px;\r\n\t\t\ttext-align: left;\r\n\t\t\tvertical-align: middle;\r\n\t\t\theight: 20px;\r\n\t\t\tpadding: 2px 15px 2px 28px;\r\n\t\t\tmargin: 0px 0px 0px 0px;\r\n\t\t\tcursor: pointer;\r\n\t\t}\r\n\t\t\r\n\t\t.popupMenuItemArrow {\r\n\t\t\tbackground-image: url(img/jsxmenu/office_xp_arrow.gif);\r\n\t\t\tbackground-repeat: no-repeat; /* Do not alter this line! */\r\n\t\t\tbackground-position: right center;\r\n\t\t}\r\n\t\t\r\n\t\t.popupMenuDisabled {\r\n\t\t\tcolor: gray;\r\n\t\t}\r\n\t\t\r\n\t\t/**下拉菜单*/\r\n\t\t.dropDownMenuPanel {\r\n\t\t\tborder-width: 1px;\r\n\t\t\tborder-style: solid;\r\n\t\t\tborder-color: #4A8DC0;\r\n\t\t\tbackground: #BADDF5;\r\n\t\t\tpadding: 1px 1px 1px 1px;\r\n\t\t\tbackground-repeat: repeat-y;\r\n\t\t\tposition: absolute;\r\n\t\t\tz-index: 999;\r\n\t\t\toverflow: visible;\r\n\t\t\tleft: 100px;\r\n\t\t\ttop: 100px;\r\n\t\t}\r\n\t\t\r\n\t\t.dropDownMenuItemOver {\r\n\t\t\tborder: solid 1px #5FB3F7;\r\n\t\t\tbackground: #5FB3F7;\r\n\t\t\tpadding: 5px 5px 2px 2px;\r\n\t\t\theight: 18px;\r\n\t\t\twidth: 150px;\r\n\t\t}\r\n\t<\/style>\r\n\t<style>\r\n\t\tbody, td {\r\n\t\t\tfont-size: 12px;\r\n\t\t}\r\n\t\tv\\:* {Behavior: url(#default#VML);}\r\n\t<\/style>\r\n<\/head>\t\t\r\n<body id=\"popbody\" BOTTOMMARGIN=\"0\" LEFTMARGIN=\"0\" RIGHTMARGIN=\"0\" TOPMARGIN=\"0\" BGCOLOR=transparent style=\"backgroud-color:transparent;overflow:hidden\"  scroll=\"no\">\r\n<\/body>"};
